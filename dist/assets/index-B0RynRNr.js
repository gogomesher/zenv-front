const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DxJ2hdhs.js","assets/parseSignature-Bd_m5pfg.js","assets/hashTypedData-DB6Y4yit.js","assets/embedded-wallet-DJmM9gaN.js","assets/class-map-BKD9lMKe.js","assets/index-Brwreh6R.js","assets/index-CQdhTG8K.js","assets/if-defined-BrvS5P3j.js","assets/ref-Bs-cfaPF.js","assets/async-directive-B406kvJw.js","assets/index-CIAgLtiu.js","assets/HelpersUtil-9Zb366mV.js","assets/index-CNiZKeSm.js","assets/index-DesRC0JT.js","assets/index-WfqQXdEQ.js","assets/index-CLA-e8Vm.js","assets/index-eqXWN7Qt.js","assets/NavigationUtil-DmfK5sOV.js","assets/email-CKVwek_g.js","assets/index-D079wjBx.js","assets/index-DvREvh8N.js","assets/socials-BFRWnNY8.js","assets/index-Ds-9-0Tn.js","assets/index-Dwpu55pX.js","assets/index-CeWBh6Fh.js","assets/index-FX8VHZid.js","assets/browser-BbOhlDYq.js","assets/index-C61pHmi_.js","assets/swaps-BGFNZCTy.js","assets/index-CuwT0hue.js","assets/index-6GAnrxYc.js","assets/SwapController-BMc4oiUY.js","assets/index-CK_hlVrv.js","assets/send-C8fWcGGF.js","assets/index-Da7F4DWy.js","assets/index-BPU8Qd6X.js","assets/index-D5zATZQK.js","assets/index-D1Mk5Xaw.js","assets/receive-CRaLc1JJ.js","assets/onramp-DzC9CWIh.js","assets/index-C0azJHwb.js","assets/index-BSB1mO13.js","assets/index-Dp8ofrox.js","assets/pay-with-exchange-mdriwBdj.js","assets/ExchangeController-DTKqbUD2.js","assets/transactions-CbLjxml1.js","assets/index-DCK_jpR5.js","assets/updateLocale-Bqtx8hr2.js","assets/index-bN5qDOBM.js","assets/index-WbTSFz8b.js","assets/index-BFcRr3yu.js","assets/index-oDxIX6yS.js","assets/data-capture-DLhRNwHj.js","assets/features-DOk9aQsG.js","assets/index-ChoWaquB.js","assets/index-DQQZpkyY.js","assets/w3m-modal-Bf_ofIjs.js","assets/index-Blr2TCnh.js","assets/index-DRicxQIX.js","assets/embedded-wallet-BHi68UG3.js","assets/index-D1DpIkmA.js","assets/HelpersUtil-DL_3hKsV.js","assets/index-BAa-drCU.js","assets/index-Cn9rIZ3w.js","assets/index-CJd_XbGZ.js","assets/index-CMcdcRgj.js","assets/index-C9Am43-o.js","assets/index-BnDmH0Y9.js","assets/index-Bf_SjFc6.js","assets/index-B2xGJ35h.js","assets/index-zHpK0vul.js","assets/email-DqDcN8mL.js","assets/index-DON4uOfc.js","assets/index-DR2EPHuG.js","assets/socials-CFkMwL_0.js","assets/index-BzooDL_d.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-BZTzv3uc.js","assets/index-BBbel1RN.js","assets/index-BXLnwjYp.js","assets/index-Btu9FXa8.js","assets/swaps-C3zMFPoA.js","assets/index-BmRuJ2NL.js","assets/index-sIUM2Y0C.js","assets/SwapController-Dv4ymab2.js","assets/index-Bce24cBw.js","assets/send-DMSeKPum.js","assets/index-BbUgdJ-S.js","assets/index-C1deNAl8.js","assets/receive-OpituZJg.js","assets/index-DY5cqQ6C.js","assets/onramp-B8olMY9I.js","assets/index-BcEWfdHv.js","assets/index-DgOyO3I4.js","assets/pay-with-exchange-DpzvOtbT.js","assets/transactions-D4om8osg.js","assets/index-MiDnh25m.js","assets/index-DSD9Cw_y.js","assets/index-DOzHidNN.js","assets/data-capture-PbPCVGxu.js","assets/features-CP830lQZ.js","assets/index-CRtFHqxg.js","assets/index-BheuShHC.js","assets/w3m-modal-Dj78Q7Ng.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const Pce="modulepreload",Rce=function(t){return"/"+t},Z9={},Cr=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(u){return Promise.all(u.map(l=>Promise.resolve(l).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=c(r.map(u=>{if(u=Rce(u),u in Z9)return;Z9[u]=!0;const l=u.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":Pce,l||(f.as="script"),f.crossOrigin="",f.href=u,a&&f.setAttribute("nonce",a),document.head.appendChild(f),l)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Oce=Symbol(),Y9=Object.getPrototypeOf,JR=new WeakMap,kce=t=>t&&(JR.has(t)?JR.get(t):Y9(t)===Object.prototype||Y9(t)===Array.prototype),jY=t=>kce(t)&&t[Oce]||null,GI=(t,e=!0)=>{JR.set(t,e)},KI={},T4=t=>typeof t=="object"&&t!==null,Bce=t=>T4(t)&&!NE.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),LY=(t,e)=>{const r=XR.get(t);if(r?.[0]===e)return r[1];const n=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return GI(n,!0),XR.set(t,[e,n]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(n,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(NE.has(i))GI(i,!1);else if(Th.has(i)){const[c,u]=Th.get(i);a.value=LY(c,u())}Object.defineProperty(n,s,a)}),Object.preventExtensions(n)},Uce=(t,e,r,n)=>({deleteProperty(s,i){const o=Reflect.get(s,i);r(i);const a=Reflect.deleteProperty(s,i);return a&&n(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),u=Reflect.get(s,i,a);if(c&&(J9(u,o)||rv.has(o)&&J9(u,rv.get(o))))return!0;r(i),T4(o)&&(o=jY(o)||o);const l=!Th.has(o)&&Dce(o)?Dn(o):o;return e(i,l),Reflect.set(s,i,l,a),n(["set",[i],o,u]),!0}}),Th=new WeakMap,NE=new WeakSet,XR=new WeakMap,uI=[1],rv=new WeakMap;let J9=Object.is,Mce=(t,e)=>new Proxy(t,e),Dce=Bce,jce=LY,Lce=Uce;function Dn(t={}){if(!T4(t))throw new Error("object required");const e=rv.get(t);if(e)return e;let r=uI[0];const n=new Set,s=(y,E=++uI[0])=>{r!==E&&(i=r=E,n.forEach(S=>S(y,E)))};let i=r;const o=(y=uI[0])=>(i!==y&&(i=y,c.forEach(([E])=>{const S=E[1](y);S>r&&(r=S)})),r),a=y=>(E,S)=>{const C=[...E];C[1]=[y,...C[1]],s(C,S)},c=new Map,u=(y,E)=>{const S=!NE.has(E)&&Th.get(E);if(S){if((KI?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(n.size){const C=S[2](a(y));c.set(y,[S,C])}else c.set(y,[S])}},l=y=>{var E;const S=c.get(y);S&&(c.delete(y),(E=S[1])==null||E.call(S))},d=y=>(n.add(y),n.size===1&&c.forEach(([S,C],_)=>{if((KI?"production":void 0)!=="production"&&C)throw new Error("remove already exists");const T=S[2](a(_));c.set(_,[S,T])}),()=>{n.delete(y),n.size===0&&c.forEach(([S,C],_)=>{C&&(C(),c.set(_,[S]))})});let f=!0;const p=Lce(()=>f,u,l,s),g=Mce(t,p);rv.set(t,g);const h=[t,o,d];return Th.set(g,h),Reflect.ownKeys(t).forEach(y=>{const E=Object.getOwnPropertyDescriptor(t,y);"value"in E&&E.writable&&(g[y]=t[y])}),f=!1,g}function ui(t,e,r){const n=Th.get(t);(KI?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let s;const i=[],o=n[2];let a=!1;const u=o(l=>{i.push(l),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,u()}}function nv(t){const e=Th.get(t);(KI?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[r,n]=e;return jce(r,n())}function dy(t){return NE.add(t),t}function Fce(){return{proxyStateMap:Th,refSet:NE,snapCache:XR,versionHolder:uI,proxyCache:rv}}function li(t,e,r,n){let s=t[e];return ui(t,()=>{const i=t[e];Object.is(s,i)||r(s=i)})}const{proxyStateMap:$ce,snapCache:qce}=Fce(),F_=t=>$ce.has(t);function Hce(t){const e=[];let r=0;const n=new Map,s=new WeakMap,i=()=>{const u=qce.get(a),l=u?.[1];if(l&&!s.has(l)){const d=new Map(n);s.set(l,d)}},o=u=>s.get(u)||n,a={data:e,index:r,epoch:0,get size(){return F_(this)||i(),o(this).size},get(u){const d=o(this).get(u);if(d===void 0){this.epoch;return}return this.data[d]},has(u){const l=o(this);return this.epoch,l.has(u)},set(u,l){if(!F_(this))throw new Error("Cannot perform mutations on a snapshot");const d=n.get(u);return d===void 0?(n.set(u,this.index),this.data[this.index++]=l):this.data[d]=l,this.epoch++,this},delete(u){if(!F_(this))throw new Error("Cannot perform mutations on a snapshot");const l=n.get(u);return l===void 0?!1:(delete this.data[l],n.delete(u),this.epoch++,!0)},clear(){if(!F_(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,n.clear()},forEach(u){this.epoch,o(this).forEach((d,f)=>{u(this.data[d],f,this)})},*entries(){this.epoch;const u=o(this);for(const[l,d]of u)yield[l,this.data[d]]},*keys(){this.epoch;const u=o(this);for(const l of u.keys())yield l},*values(){this.epoch;const u=o(this);for(const l of u.values())yield this.data[l]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=Dn(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var Au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ln(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){var s=!1;try{s=this instanceof n}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var X9={};const ae={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",BASE_ACCOUNT:"baseAccount",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122",TON:"ton"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks",ton:"TON"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",TON:"ton"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],SOLANA_SPL_TOKEN_ADDRESSES:{SOL:"So11111111111111111111111111111111111111112"},HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof X9<"u"?X9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}},IS_DEVELOPMENT:typeof process<"u"&&!1,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},FY={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return t?.filter(r=>r.chainNamespace===e)||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){if(!e)return;const r=t.find(s=>s.caipNetworkId===e);if(r)return r.name;const[n]=e.split(":");return ae.CHAIN_NAME_MAP?.[n]||void 0}},$Y=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"];var zce=20,Wce=1,S0=1e6,Q9=1e6,Vce=-7,Gce=21,Kce=!1,PE="[big.js] ",z0=PE+"Invalid ",IT=z0+"decimal places",Zce=z0+"rounding mode",qY=PE+"Division by zero",yn={},Il=void 0,Yce=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function HY(){function t(e){var r=this;if(!(r instanceof t))return e===Il?HY():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(z0+"value");e=e===0&&1/e<0?"-0":String(e)}Jce(r,e)}r.constructor=t}return t.prototype=yn,t.DP=zce,t.RM=Wce,t.NE=Vce,t.PE=Gce,t.strict=Kce,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function Jce(t,e){var r,n,s;if(!Yce.test(e))throw Error(z0+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),s=e.length,n=0;n<s&&e.charAt(n)=="0";)++n;if(n==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=r-n-1,t.c=[],r=0;n<=s;)t.c[r++]=+e.charAt(n++)}return t}function W0(t,e,r,n){var s=t.c;if(r===Il&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(Zce);if(e<1)n=r===3&&(n||!!s[0])||e===0&&(r===1&&s[0]>=5||r===2&&(s[0]>5||s[0]===5&&(n||s[1]!==Il))),s.length=1,n?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(n=r===1&&s[e]>=5||r===2&&(s[e]>5||s[e]===5&&(n||s[e+1]!==Il||s[e-1]&1))||r===3&&(n||!!s[0]),s.length=e,n){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function V0(t,e,r){var n=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)s="0"+s;s="0."+s}else if(n>0)if(++n>i)for(n-=i;n--;)s+="0";else n<i&&(s=s.slice(0,n)+"."+s.slice(n));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&r?"-"+s:s}yn.abs=function(){var t=new this.constructor(this);return t.s=1,t};yn.cmp=function(t){var e,r=this,n=r.c,s=(t=new r.constructor(t)).c,i=r.s,o=t.s,a=r.e,c=t.e;if(!n[0]||!s[0])return n[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=n.length)<(c=s.length)?a:c,i=-1;++i<o;)if(n[i]!=s[i])return n[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};yn.div=function(t){var e=this,r=e.constructor,n=e.c,s=(t=new r(t)).c,i=e.s==t.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>S0)throw Error(IT);if(!s[0])throw Error(qY);if(!n[0])return t.s=i,t.c=[t.e=0],t;var a,c,u,l,d,f=s.slice(),p=a=s.length,g=n.length,h=n.slice(0,a),y=h.length,E=t,S=E.c=[],C=0,_=o+(E.e=e.e-t.e)+1;for(E.s=i,i=_<0?0:_,f.unshift(0);y++<a;)h.push(0);do{for(u=0;u<10;u++){if(a!=(y=h.length))l=a>y?1:-1;else for(d=-1,l=0;++d<a;)if(s[d]!=h[d]){l=s[d]>h[d]?1:-1;break}if(l<0){for(c=y==a?s:f;y;){if(h[--y]<c[y]){for(d=y;d&&!h[--d];)h[d]=9;--h[d],h[y]+=10}h[y]-=c[y]}for(;!h[0];)h.shift()}else break}S[C++]=l?u:++u,h[0]&&l?h[y]=n[p]||0:h=[n[p]]}while((p++<g||h[0]!==Il)&&i--);return!S[0]&&C!=1&&(S.shift(),E.e--,_--),C>_&&W0(E,_,r.RM,h[0]!==Il),E};yn.eq=function(t){return this.cmp(t)===0};yn.gt=function(t){return this.cmp(t)>0};yn.gte=function(t){return this.cmp(t)>-1};yn.lt=function(t){return this.cmp(t)<0};yn.lte=function(t){return this.cmp(t)<1};yn.minus=yn.sub=function(t){var e,r,n,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var u=i.c.slice(),l=i.e,d=t.c,f=t.e;if(!u[0]||!d[0])return d[0]?t.s=-c:u[0]?t=new o(i):t.s=1,t;if(a=l-f){for((s=a<0)?(a=-a,n=u):(f=l,n=d),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(r=((s=u.length<d.length)?u:d).length,a=c=0;c<r;c++)if(u[c]!=d[c]){s=u[c]<d[c];break}if(s&&(n=u,u=d,d=n,t.s=-t.s),(c=(r=d.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;r>a;){if(u[--r]<d[r]){for(e=r;e&&!u[--e];)u[e]=9;--u[e],u[r]+=10}u[r]-=d[r]}for(;u[--c]===0;)u.pop();for(;u[0]===0;)u.shift(),--f;return u[0]||(t.s=1,u=[f=0]),t.c=u,t.e=f,t};yn.mod=function(t){var e,r=this,n=r.constructor,s=r.s,i=(t=new n(t)).s;if(!t.c[0])throw Error(qY);return r.s=t.s=1,e=t.cmp(r)==1,r.s=s,t.s=i,e?new n(r):(s=n.DP,i=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=s,n.RM=i,this.minus(r.times(t)))};yn.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};yn.plus=yn.add=function(t){var e,r,n,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,u=t.c;if(!a[0]||!u[0])return u[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,n=u):(e=-e,n=a),n.reverse();e--;)n.push(0);n.reverse()}for(a.length-u.length<0&&(n=u,u=a,a=n),e=u.length,r=0;e;a[e]%=10)r=(a[--e]=a[e]+u[e]+r)/10|0;for(r&&(a.unshift(r),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};yn.pow=function(t){var e=this,r=new e.constructor("1"),n=r,s=t<0;if(t!==~~t||t<-Q9||t>Q9)throw Error(z0+"exponent");for(s&&(t=-t);t&1&&(n=n.times(e)),t>>=1,!!t;)e=e.times(e);return s?r.div(n):n};yn.prec=function(t,e){if(t!==~~t||t<1||t>S0)throw Error(z0+"precision");return W0(new this.constructor(this),t,e)};yn.round=function(t,e){if(t===Il)t=0;else if(t!==~~t||t<-S0||t>S0)throw Error(IT);return W0(new this.constructor(this),t+this.e+1,e)};yn.sqrt=function(){var t,e,r,n=this,s=n.constructor,i=n.s,o=n.e,a=new s("0.5");if(!n.c[0])return new s(n);if(i<0)throw Error(PE+"No square root");i=Math.sqrt(+V0(n,!0,!0)),i===0||i===1/0?(e=n.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do r=t,t=a.times(r.plus(n.div(r)));while(r.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return W0(t,(s.DP-=4)+t.e+1,s.RM)};yn.times=yn.mul=function(t){var e,r=this,n=r.constructor,s=r.c,i=(t=new n(t)).c,o=s.length,a=i.length,c=r.e,u=t.e;if(t.s=r.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+u,o<a&&(e=s,s=i,i=e,u=o,o=a,a=u),e=new Array(u=o+a);u--;)e[u]=0;for(c=a;c--;){for(a=0,u=o+c;u>c;)a=e[u]+i[c]*s[u-c-1]+a,e[u--]=a%10,a=a/10|0;e[u]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};yn.toExponential=function(t,e){var r=this,n=r.c[0];if(t!==Il){if(t!==~~t||t<0||t>S0)throw Error(IT);for(r=W0(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return V0(r,!0,!!n)};yn.toFixed=function(t,e){var r=this,n=r.c[0];if(t!==Il){if(t!==~~t||t<0||t>S0)throw Error(IT);for(r=W0(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return V0(r,!1,!!n)};yn[Symbol.for("nodejs.util.inspect.custom")]=yn.toJSON=yn.toString=function(){var t=this,e=t.constructor;return V0(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};yn.toNumber=function(){var t=+V0(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(PE+"Imprecise conversion");return t};yn.toPrecision=function(t,e){var r=this,n=r.constructor,s=r.c[0];if(t!==Il){if(t!==~~t||t<1||t>S0)throw Error(z0+"precision");for(r=W0(new n(r),t,e);r.c.length<t;)r.c.push(0)}return V0(r,t<=r.e||r.e<=n.NE||r.e>=n.PE,!!s)};yn.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(PE+"valueOf disallowed");return V0(t,t.e<=e.NE||t.e>=e.PE,!0)};var co=HY();const zY={bigNumber(t){return t?new co(t):new co(0)},multiply(t,e){if(t===void 0||e===void 0)return new co(0);const r=new co(t),n=new co(e);return r.times(n)},toFixed(t,e=2){return t===void 0||t===""?new co(0).toFixed(e):new co(t).toFixed(e)},formatNumberToLocalString(t,e=2){return t===void 0||t===""?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"})},parseLocalStringToNumber(t){if(t===void 0||t==="")return 0;const e=t.replace(/,/gu,"");return new co(e).toNumber()}},Xce=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Qce=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],eue=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],tue={getERC20Abi:t=>ae.USDT_CONTRACT_ADDRESSES.includes(t)?eue:Xce,getSwapAbi:()=>Qce},xs={validateCaipAddress(t){if(t.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,s]=e;if(!r||!n||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},yl={RPC_ERROR_CODE:{USER_REJECTED_REQUEST:4001,USER_REJECTED_METHODS:5002,USER_REJECTED:5e3},PROVIDER_RPC_ERROR_NAME:{PROVIDER_RPC:"ProviderRpcError",USER_REJECTED_REQUEST:"UserRejectedRequestError"},isRpcProviderError(t){try{if(typeof t=="object"&&t!==null){const e=t,r=typeof e.message=="string",n=typeof e.code=="number";return r&&n}return!1}catch{return!1}},isUserRejectedMessage(t){return t.toLowerCase().includes("user rejected")||t.toLowerCase().includes("user cancelled")||t.toLowerCase().includes("user canceled")},isUserRejectedRequestError(t){if(yl.isRpcProviderError(t)){const e=t.code===yl.RPC_ERROR_CODE.USER_REJECTED_REQUEST,r=t.code===yl.RPC_ERROR_CODE.USER_REJECTED_METHODS;return e||r||yl.isUserRejectedMessage(t.message)}return t instanceof Error?yl.isUserRejectedMessage(t.message):!1}};let rue=class extends Error{constructor(e,r){super(r.message,{cause:e}),this.name=yl.PROVIDER_RPC_ERROR_NAME.PROVIDER_RPC,this.code=r.code}},Hy=class extends rue{constructor(e){super(e,{code:yl.RPC_ERROR_CODE.USER_REJECTED_REQUEST,message:"User rejected the request"}),this.name=yl.PROVIDER_RPC_ERROR_NAME.USER_REJECTED_REQUEST}};const mt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",RECENT_WALLET:"@appkit/recent_wallet",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails",LATEST_APPKIT_VERSION:"@appkit/latest_version",TON_WALLETS_CACHE:"@appkit/ton_wallets_cache"};function g3(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ft={setItem(t,e){p1()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(p1())return localStorage.getItem(t)||void 0},removeItem(t){p1()&&localStorage.removeItem(t)},clear(){p1()&&localStorage.clear()}};function p1(){return typeof window<"u"&&typeof localStorage<"u"}function sv(t,e){const r=t?.["--apkt-accent"]??t?.["--w3m-accent"];return e==="light"?{"--w3m-accent":r||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":r||"hsla(230, 100%, 67%, 1)","--w3m-background":"#202020"}}var eU={};const m3=(typeof process<"u"&&typeof eU<"u"?eU.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",WY=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],nue="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",wr={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:m3,SECURE_SITE_DASHBOARD:`${m3}/dashboard`,SECURE_SITE_FAVICON:`${m3}/images/favicon.png`,SOLANA_NATIVE_TOKEN_ADDRESS:"So11111111111111111111111111111111111111111",RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],SUGGESTED_TOKENS_BY_CHAIN:{"eip155:42161":["USDâ‚®0"]},BALANCE_SUPPORTED_CHAINS:[ae.CHAIN.EVM,ae.CHAIN.SOLANA],SEND_PARAMS_SUPPORTED_CHAINS:[ae.CHAIN.EVM],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[ae.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[ae.CHAIN.EVM,ae.CHAIN.SOLANA],PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES:[ae.CHAIN.EVM,ae.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[ae.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x",ton:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[ae.CHAIN.EVM,ae.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa",ton:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},Ae={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3,latestAppKitVersion:6048e5,tonWallets:864e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Ae.getActiveNamespace(),e=Ae.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{ft.setItem(mt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ft.getItem(mt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ft.removeItem(mt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ft.setItem(mt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ft.setItem(mt.ACTIVE_CAIP_NETWORK_ID,t),Ae.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ft.getItem(mt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ft.removeItem(mt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=g3(t);ft.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Ae.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ft.setItem(mt.RECENT_WALLETS,JSON.stringify(e)),ft.setItem(mt.RECENT_WALLET,JSON.stringify(t)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ft.getItem(mt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},getRecentWallet(){try{const t=ft.getItem(mt.RECENT_WALLET);return t?JSON.parse(t):null}catch{console.info("Unable to get AppKit recent")}return null},deleteRecentWallet(){try{ft.removeItem(mt.RECENT_WALLET)}catch{console.info("Unable to delete AppKit recent")}},setConnectedConnectorId(t,e){try{const r=g3(t);ft.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ft.getItem(mt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=g3(t);return ft.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{ft.setItem(mt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ft.getItem(mt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ft.removeItem(mt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ft.getItem(mt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return ft.getItem(mt.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(t){try{ft.setItem(mt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ft.getItem(mt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ft.getItem(mt.CONNECTED_NAMESPACES);return t?.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ft.setItem(mt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Ae.getConnectedNamespaces();e.includes(t)||(e.push(t),Ae.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Ae.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),Ae.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ft.getItem(mt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ft.setItem(mt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ft.removeItem(mt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ft.getItem(mt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Ae.getBalanceCache();ft.setItem(mt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=Ae.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;Ae.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Ae.getBalanceCache();e[t.caipAddress]=t,ft.setItem(mt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ft.getItem(mt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Ae.getBalanceCache();ft.setItem(mt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=Ae.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),Ae.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Ae.getNativeBalanceCache();e[t.caipAddress]=t,ft.setItem(mt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ft.getItem(mt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=Ae.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;Ae.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Ae.getEnsCache();e[t.address]=t,ft.setItem(mt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Ae.getEnsCache();ft.setItem(mt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ft.getItem(mt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=Ae.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;Ae.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Ae.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ft.setItem(mt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Ae.getIdentityCache();ft.setItem(mt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},getTonWalletsCache(){try{const t=ft.getItem(mt.TON_WALLETS_CACHE),e=t?JSON.parse(t):void 0;if(e&&!this.isCacheExpired(e.timestamp,this.cacheExpiry.tonWallets))return e;Ae.removeTonWalletsCache()}catch{console.info("Unable to get ton wallets cache")}},updateTonWalletsCache(t){try{const e=Ae.getTonWalletsCache()||{timestamp:0,wallets:[]};e.timestamp=new Date().getTime(),e.wallets=t,ft.setItem(mt.TON_WALLETS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ton wallets cache",t)}},removeTonWalletsCache(){try{ft.removeItem(mt.TON_WALLETS_CACHE)}catch{console.info("Unable to remove ton wallets cache")}},clearAddressCache(){try{ft.removeItem(mt.PORTFOLIO_CACHE),ft.removeItem(mt.NATIVE_BALANCE_CACHE),ft.removeItem(mt.ENS_CACHE),ft.removeItem(mt.IDENTITY_CACHE),ft.removeItem(mt.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{ft.setItem(mt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=ft.getItem(mt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const r=Ae.getConnections(),n=r[e]??[],s=new Map;for(const o of n)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===ae.CONNECTOR_ID.AUTH;if(a&&!c){const u=new Set(a.accounts.map(d=>d.address.toLowerCase())),l=o.accounts.filter(d=>!u.has(d.address.toLowerCase()));a.accounts.push(...l)}else s.set(o.connectorId,{...o})}const i={...r,[e]:Array.from(s.values())};ft.setItem(mt.CONNECTIONS,JSON.stringify(i))}catch(r){console.error("Unable to sync connections to storage",r)}},getConnections(){try{const t=ft.getItem(mt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:r}){try{const n=Ae.getConnections(),s=n[r]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),ft.setItem(mt.CONNECTIONS,JSON.stringify({...n,[r]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${r}"`)}},getDisconnectedConnectorIds(){try{const t=ft.getItem(mt.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const r=Ae.getDisconnectedConnectorIds(),n=r[e]??[];n.push(t),ft.setItem(mt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...r,[e]:Array.from(new Set(n))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const r=Ae.getDisconnectedConnectorIds();let n=r[e]??[];n=n.filter(s=>s.toLowerCase()!==t.toLowerCase()),ft.setItem(mt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...r,[e]:Array.from(new Set(n))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(Ae.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=ft.getItem(mt.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){try{const n=Ae.getTransactionsCache()[t]?.[e];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.transactionsHistory))return n.transactions;Ae.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:r,transactions:n}){try{const s=Ae.getTransactionsCache();s[t]={...s[t],[e]:{timestamp:r,transactions:n}},ft.setItem(mt.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:r,transactions:n})}},removeTransactionsCache({address:t,chainId:e}){try{const r=Ae.getTransactionsCache(),n=r?.[t]||{},{[e]:s,...i}=n;ft.setItem(mt.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...r,[t]:i}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=ft.getItem(mt.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const r=Ae.getTokenPriceCache()[t.join(",")];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.tokenPrice))return r.tokenPrice;Ae.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=Ae.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},ft.setItem(mt.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=Ae.getTokenPriceCache();ft.setItem(mt.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}},getLatestAppKitVersion(){try{const t=this.getLatestAppKitVersionCache(),e=t?.version;return e&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.latestAppKitVersion)?e:void 0}catch{console.info("Unable to get latest AppKit version")}},getLatestAppKitVersionCache(){try{const t=ft.getItem(mt.LATEST_APPKIT_VERSION);return t?JSON.parse(t):{}}catch{console.info("Unable to get latest AppKit version cache")}return{}},updateLatestAppKitVersion(t){try{const e=Ae.getLatestAppKitVersionCache();e.timestamp=t.timestamp,e.version=t.version,ft.setItem(mt.LATEST_APPKIT_VERSION,JSON.stringify(e))}catch{console.info("Unable to update latest AppKit version on local storage",t)}}},ke={getWindow(){if(!(typeof window>"u"))return window},isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return ke.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=wr.TEN_SEC_MS:!0},isAllowedRetry(t,e=wr.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(ke.isClient()&&window.self!==window.top)try{const t=window?.location?.ancestorOrigins?.[0],e="https://app.safe.global";if(t){const r=new URL(t),n=new URL(e);return r.hostname===n.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+wr.FOUR_MINUTES_MS},getNetworkId(t){return t?.split(":")[1]},getPlainAddress(t){return t?.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function s(){t(...n)}r&&clearTimeout(r),r=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,r=null){if(ke.isHttpUrl(t))return this.formatUniversalUrl(t,e);let n=t,s=r;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),s&&!s?.endsWith("/")&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${n}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:n}},formatUniversalUrl(t,e){if(!ke.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Ae.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window?.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window?.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;const t=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,e=window?.navigator?.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((r,n)=>{const s=new Image;s.onload=r,s.onerror=n,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ke.wait(2e3)])},parseBalance(t,e){let r="0.000";if(typeof t=="string"){const c=Number(t);if(!isNaN(c)){const u=(Math.floor(c*1e3)/1e3).toFixed(3);u&&(r=u)}}const[n,s]=r.split("."),i=n||"0",o=s||"000";return{formattedText:`${i}.${o}${e?` ${e}`:""}`,value:i,decimals:o,symbol:e}},getApiUrl(){return ae.W3M_API_URL},getBlockchainApiUrl(){return ae.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ae.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){return typeof t=="string"?t:typeof t?.issues?.[0]?.message=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,s)=>{r[n]=s}),e.sort((n,s)=>{const i=r[n.id],o=r[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const s=n[e];return r.has(s)?!1:(r.add(s),!0)})},generateSdkVersion(t,e,r){const s=t.length===0?wr.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${r}`},createAccount(t,e,r,n,s){return{namespace:t,address:e,type:r,publicKey:n,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in ae.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window?.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window?.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),r,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",n),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,n+i),c=t.substring(n+i,o),u=t.substring(s),l=c+r;return a+l+u}};var y3={},Cb={},tU;function sue(){if(tU)return Cb;tU=1,Cb.byteLength=a,Cb.toByteArray=u,Cb.fromByteArray=f;for(var t=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=n.length;s<i;++s)t[s]=n[s],e[n.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(p){var g=p.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=p.indexOf("=");h===-1&&(h=g);var y=h===g?0:4-h%4;return[h,y]}function a(p){var g=o(p),h=g[0],y=g[1];return(h+y)*3/4-y}function c(p,g,h){return(g+h)*3/4-h}function u(p){var g,h=o(p),y=h[0],E=h[1],S=new r(c(p,y,E)),C=0,_=E>0?y-4:y,T;for(T=0;T<_;T+=4)g=e[p.charCodeAt(T)]<<18|e[p.charCodeAt(T+1)]<<12|e[p.charCodeAt(T+2)]<<6|e[p.charCodeAt(T+3)],S[C++]=g>>16&255,S[C++]=g>>8&255,S[C++]=g&255;return E===2&&(g=e[p.charCodeAt(T)]<<2|e[p.charCodeAt(T+1)]>>4,S[C++]=g&255),E===1&&(g=e[p.charCodeAt(T)]<<10|e[p.charCodeAt(T+1)]<<4|e[p.charCodeAt(T+2)]>>2,S[C++]=g>>8&255,S[C++]=g&255),S}function l(p){return t[p>>18&63]+t[p>>12&63]+t[p>>6&63]+t[p&63]}function d(p,g,h){for(var y,E=[],S=g;S<h;S+=3)y=(p[S]<<16&16711680)+(p[S+1]<<8&65280)+(p[S+2]&255),E.push(l(y));return E.join("")}function f(p){for(var g,h=p.length,y=h%3,E=[],S=16383,C=0,_=h-y;C<_;C+=S)E.push(d(p,C,C+S>_?_:C+S));return y===1?(g=p[h-1],E.push(t[g>>2]+t[g<<4&63]+"==")):y===2&&(g=(p[h-2]<<8)+p[h-1],E.push(t[g>>10]+t[g>>4&63]+t[g<<2&63]+"=")),E.join("")}return Cb}var $_={};var rU;function iue(){return rU||(rU=1,$_.read=function(t,e,r,n,s){var i,o,a=s*8-n-1,c=(1<<a)-1,u=c>>1,l=-7,d=r?s-1:0,f=r?-1:1,p=t[e+d];for(d+=f,i=p&(1<<-l)-1,p>>=-l,l+=a;l>0;i=i*256+t[e+d],d+=f,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=o*256+t[e+d],d+=f,l-=8);if(i===0)i=1-u;else{if(i===c)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-u}return(p?-1:1)*o*Math.pow(2,i-n)},$_.write=function(t,e,r,n,s,i){var o,a,c,u=i*8-s-1,l=(1<<u)-1,d=l>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,g=n?1:-1,h=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=f/c:e+=f*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(e*c-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[r+p]=a&255,p+=g,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;t[r+p]=o&255,p+=g,o/=256,u-=8);t[r+p-g]|=h*128}),$_}var nU;function N4(){return nU||(nU=1,(function(t){const e=sue(),r=iue(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=S,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const V=new Uint8Array(1),q={foo:function(){return 42}};return Object.setPrototypeOf(q,Uint8Array.prototype),Object.setPrototypeOf(V,q),V.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(V){if(V>s)throw new RangeError('The value "'+V+'" is invalid for option "size"');const q=new Uint8Array(V);return Object.setPrototypeOf(q,a.prototype),q}function a(V,q,z){if(typeof V=="number"){if(typeof q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(V)}return c(V,q,z)}a.poolSize=8192;function c(V,q,z){if(typeof V=="string")return f(V,q);if(ArrayBuffer.isView(V))return g(V);if(V==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V);if(Mt(V,ArrayBuffer)||V&&Mt(V.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Mt(V,SharedArrayBuffer)||V&&Mt(V.buffer,SharedArrayBuffer)))return h(V,q,z);if(typeof V=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const X=V.valueOf&&V.valueOf();if(X!=null&&X!==V)return a.from(X,q,z);const ne=y(V);if(ne)return ne;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof V[Symbol.toPrimitive]=="function")return a.from(V[Symbol.toPrimitive]("string"),q,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V)}a.from=function(V,q,z){return c(V,q,z)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(V){if(typeof V!="number")throw new TypeError('"size" argument must be of type number');if(V<0)throw new RangeError('The value "'+V+'" is invalid for option "size"')}function l(V,q,z){return u(V),V<=0?o(V):q!==void 0?typeof z=="string"?o(V).fill(q,z):o(V).fill(q):o(V)}a.alloc=function(V,q,z){return l(V,q,z)};function d(V){return u(V),o(V<0?0:E(V)|0)}a.allocUnsafe=function(V){return d(V)},a.allocUnsafeSlow=function(V){return d(V)};function f(V,q){if((typeof q!="string"||q==="")&&(q="utf8"),!a.isEncoding(q))throw new TypeError("Unknown encoding: "+q);const z=C(V,q)|0;let X=o(z);const ne=X.write(V,q);return ne!==z&&(X=X.slice(0,ne)),X}function p(V){const q=V.length<0?0:E(V.length)|0,z=o(q);for(let X=0;X<q;X+=1)z[X]=V[X]&255;return z}function g(V){if(Mt(V,Uint8Array)){const q=new Uint8Array(V);return h(q.buffer,q.byteOffset,q.byteLength)}return p(V)}function h(V,q,z){if(q<0||V.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(V.byteLength<q+(z||0))throw new RangeError('"length" is outside of buffer bounds');let X;return q===void 0&&z===void 0?X=new Uint8Array(V):z===void 0?X=new Uint8Array(V,q):X=new Uint8Array(V,q,z),Object.setPrototypeOf(X,a.prototype),X}function y(V){if(a.isBuffer(V)){const q=E(V.length)|0,z=o(q);return z.length===0||V.copy(z,0,0,q),z}if(V.length!==void 0)return typeof V.length!="number"||bt(V.length)?o(0):p(V);if(V.type==="Buffer"&&Array.isArray(V.data))return p(V.data)}function E(V){if(V>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return V|0}function S(V){return+V!=V&&(V=0),a.alloc(+V)}a.isBuffer=function(q){return q!=null&&q._isBuffer===!0&&q!==a.prototype},a.compare=function(q,z){if(Mt(q,Uint8Array)&&(q=a.from(q,q.offset,q.byteLength)),Mt(z,Uint8Array)&&(z=a.from(z,z.offset,z.byteLength)),!a.isBuffer(q)||!a.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===z)return 0;let X=q.length,ne=z.length;for(let ce=0,me=Math.min(X,ne);ce<me;++ce)if(q[ce]!==z[ce]){X=q[ce],ne=z[ce];break}return X<ne?-1:ne<X?1:0},a.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(q,z){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(q.length===0)return a.alloc(0);let X;if(z===void 0)for(z=0,X=0;X<q.length;++X)z+=q[X].length;const ne=a.allocUnsafe(z);let ce=0;for(X=0;X<q.length;++X){let me=q[X];if(Mt(me,Uint8Array))ce+me.length>ne.length?(a.isBuffer(me)||(me=a.from(me)),me.copy(ne,ce)):Uint8Array.prototype.set.call(ne,me,ce);else if(a.isBuffer(me))me.copy(ne,ce);else throw new TypeError('"list" argument must be an Array of Buffers');ce+=me.length}return ne};function C(V,q){if(a.isBuffer(V))return V.length;if(ArrayBuffer.isView(V)||Mt(V,ArrayBuffer))return V.byteLength;if(typeof V!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof V);const z=V.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&z===0)return 0;let ne=!1;for(;;)switch(q){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return Ne(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z*2;case"hex":return z>>>1;case"base64":return Ee(V).length;default:if(ne)return X?-1:Ne(V).length;q=(""+q).toLowerCase(),ne=!0}}a.byteLength=C;function _(V,q,z){let X=!1;if((q===void 0||q<0)&&(q=0),q>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0,q>>>=0,z<=q))return"";for(V||(V="utf8");;)switch(V){case"hex":return k(this,q,z);case"utf8":case"utf-8":return m(this,q,z);case"ascii":return x(this,q,z);case"latin1":case"binary":return M(this,q,z);case"base64":return A(this,q,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,q,z);default:if(X)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),X=!0}}a.prototype._isBuffer=!0;function T(V,q,z){const X=V[q];V[q]=V[z],V[z]=X}a.prototype.swap16=function(){const q=this.length;if(q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let z=0;z<q;z+=2)T(this,z,z+1);return this},a.prototype.swap32=function(){const q=this.length;if(q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let z=0;z<q;z+=4)T(this,z,z+3),T(this,z+1,z+2);return this},a.prototype.swap64=function(){const q=this.length;if(q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let z=0;z<q;z+=8)T(this,z,z+7),T(this,z+1,z+6),T(this,z+2,z+5),T(this,z+3,z+4);return this},a.prototype.toString=function(){const q=this.length;return q===0?"":arguments.length===0?m(this,0,q):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(q){if(!a.isBuffer(q))throw new TypeError("Argument must be a Buffer");return this===q?!0:a.compare(this,q)===0},a.prototype.inspect=function(){let q="";const z=t.INSPECT_MAX_BYTES;return q=this.toString("hex",0,z).replace(/(.{2})/g,"$1 ").trim(),this.length>z&&(q+=" ... "),"<Buffer "+q+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(q,z,X,ne,ce){if(Mt(q,Uint8Array)&&(q=a.from(q,q.offset,q.byteLength)),!a.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof q);if(z===void 0&&(z=0),X===void 0&&(X=q?q.length:0),ne===void 0&&(ne=0),ce===void 0&&(ce=this.length),z<0||X>q.length||ne<0||ce>this.length)throw new RangeError("out of range index");if(ne>=ce&&z>=X)return 0;if(ne>=ce)return-1;if(z>=X)return 1;if(z>>>=0,X>>>=0,ne>>>=0,ce>>>=0,this===q)return 0;let me=ce-ne,Rt=X-z;const Tt=Math.min(me,Rt),Ct=this.slice(ne,ce),or=q.slice(z,X);for(let Et=0;Et<Tt;++Et)if(Ct[Et]!==or[Et]){me=Ct[Et],Rt=or[Et];break}return me<Rt?-1:Rt<me?1:0};function P(V,q,z,X,ne){if(V.length===0)return-1;if(typeof z=="string"?(X=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,bt(z)&&(z=ne?0:V.length-1),z<0&&(z=V.length+z),z>=V.length){if(ne)return-1;z=V.length-1}else if(z<0)if(ne)z=0;else return-1;if(typeof q=="string"&&(q=a.from(q,X)),a.isBuffer(q))return q.length===0?-1:D(V,q,z,X,ne);if(typeof q=="number")return q=q&255,typeof Uint8Array.prototype.indexOf=="function"?ne?Uint8Array.prototype.indexOf.call(V,q,z):Uint8Array.prototype.lastIndexOf.call(V,q,z):D(V,[q],z,X,ne);throw new TypeError("val must be string, number or Buffer")}function D(V,q,z,X,ne){let ce=1,me=V.length,Rt=q.length;if(X!==void 0&&(X=String(X).toLowerCase(),X==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if(V.length<2||q.length<2)return-1;ce=2,me/=2,Rt/=2,z/=2}function Tt(or,Et){return ce===1?or[Et]:or.readUInt16BE(Et*ce)}let Ct;if(ne){let or=-1;for(Ct=z;Ct<me;Ct++)if(Tt(V,Ct)===Tt(q,or===-1?0:Ct-or)){if(or===-1&&(or=Ct),Ct-or+1===Rt)return or*ce}else or!==-1&&(Ct-=Ct-or),or=-1}else for(z+Rt>me&&(z=me-Rt),Ct=z;Ct>=0;Ct--){let or=!0;for(let Et=0;Et<Rt;Et++)if(Tt(V,Ct+Et)!==Tt(q,Et)){or=!1;break}if(or)return Ct}return-1}a.prototype.includes=function(q,z,X){return this.indexOf(q,z,X)!==-1},a.prototype.indexOf=function(q,z,X){return P(this,q,z,X,!0)},a.prototype.lastIndexOf=function(q,z,X){return P(this,q,z,X,!1)};function L(V,q,z,X){z=Number(z)||0;const ne=V.length-z;X?(X=Number(X),X>ne&&(X=ne)):X=ne;const ce=q.length;X>ce/2&&(X=ce/2);let me;for(me=0;me<X;++me){const Rt=parseInt(q.substr(me*2,2),16);if(bt(Rt))return me;V[z+me]=Rt}return me}function I(V,q,z,X){return fe(Ne(q,V.length-z),V,z,X)}function U(V,q,z,X){return fe(Be(q),V,z,X)}function F(V,q,z,X){return fe(Ee(q),V,z,X)}function B(V,q,z,X){return fe(At(q,V.length-z),V,z,X)}a.prototype.write=function(q,z,X,ne){if(z===void 0)ne="utf8",X=this.length,z=0;else if(X===void 0&&typeof z=="string")ne=z,X=this.length,z=0;else if(isFinite(z))z=z>>>0,isFinite(X)?(X=X>>>0,ne===void 0&&(ne="utf8")):(ne=X,X=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ce=this.length-z;if((X===void 0||X>ce)&&(X=ce),q.length>0&&(X<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");ne||(ne="utf8");let me=!1;for(;;)switch(ne){case"hex":return L(this,q,z,X);case"utf8":case"utf-8":return I(this,q,z,X);case"ascii":case"latin1":case"binary":return U(this,q,z,X);case"base64":return F(this,q,z,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,q,z,X);default:if(me)throw new TypeError("Unknown encoding: "+ne);ne=(""+ne).toLowerCase(),me=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(V,q,z){return q===0&&z===V.length?e.fromByteArray(V):e.fromByteArray(V.slice(q,z))}function m(V,q,z){z=Math.min(V.length,z);const X=[];let ne=q;for(;ne<z;){const ce=V[ne];let me=null,Rt=ce>239?4:ce>223?3:ce>191?2:1;if(ne+Rt<=z){let Tt,Ct,or,Et;switch(Rt){case 1:ce<128&&(me=ce);break;case 2:Tt=V[ne+1],(Tt&192)===128&&(Et=(ce&31)<<6|Tt&63,Et>127&&(me=Et));break;case 3:Tt=V[ne+1],Ct=V[ne+2],(Tt&192)===128&&(Ct&192)===128&&(Et=(ce&15)<<12|(Tt&63)<<6|Ct&63,Et>2047&&(Et<55296||Et>57343)&&(me=Et));break;case 4:Tt=V[ne+1],Ct=V[ne+2],or=V[ne+3],(Tt&192)===128&&(Ct&192)===128&&(or&192)===128&&(Et=(ce&15)<<18|(Tt&63)<<12|(Ct&63)<<6|or&63,Et>65535&&Et<1114112&&(me=Et))}}me===null?(me=65533,Rt=1):me>65535&&(me-=65536,X.push(me>>>10&1023|55296),me=56320|me&1023),X.push(me),ne+=Rt}return w(X)}const b=4096;function w(V){const q=V.length;if(q<=b)return String.fromCharCode.apply(String,V);let z="",X=0;for(;X<q;)z+=String.fromCharCode.apply(String,V.slice(X,X+=b));return z}function x(V,q,z){let X="";z=Math.min(V.length,z);for(let ne=q;ne<z;++ne)X+=String.fromCharCode(V[ne]&127);return X}function M(V,q,z){let X="";z=Math.min(V.length,z);for(let ne=q;ne<z;++ne)X+=String.fromCharCode(V[ne]);return X}function k(V,q,z){const X=V.length;(!q||q<0)&&(q=0),(!z||z<0||z>X)&&(z=X);let ne="";for(let ce=q;ce<z;++ce)ne+=jt[V[ce]];return ne}function j(V,q,z){const X=V.slice(q,z);let ne="";for(let ce=0;ce<X.length-1;ce+=2)ne+=String.fromCharCode(X[ce]+X[ce+1]*256);return ne}a.prototype.slice=function(q,z){const X=this.length;q=~~q,z=z===void 0?X:~~z,q<0?(q+=X,q<0&&(q=0)):q>X&&(q=X),z<0?(z+=X,z<0&&(z=0)):z>X&&(z=X),z<q&&(z=q);const ne=this.subarray(q,z);return Object.setPrototypeOf(ne,a.prototype),ne};function N(V,q,z){if(V%1!==0||V<0)throw new RangeError("offset is not uint");if(V+q>z)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(q,z,X){q=q>>>0,z=z>>>0,X||N(q,z,this.length);let ne=this[q],ce=1,me=0;for(;++me<z&&(ce*=256);)ne+=this[q+me]*ce;return ne},a.prototype.readUintBE=a.prototype.readUIntBE=function(q,z,X){q=q>>>0,z=z>>>0,X||N(q,z,this.length);let ne=this[q+--z],ce=1;for(;z>0&&(ce*=256);)ne+=this[q+--z]*ce;return ne},a.prototype.readUint8=a.prototype.readUInt8=function(q,z){return q=q>>>0,z||N(q,1,this.length),this[q]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(q,z){return q=q>>>0,z||N(q,2,this.length),this[q]|this[q+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(q,z){return q=q>>>0,z||N(q,2,this.length),this[q]<<8|this[q+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(q,z){return q=q>>>0,z||N(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+this[q+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(q,z){return q=q>>>0,z||N(q,4,this.length),this[q]*16777216+(this[q+1]<<16|this[q+2]<<8|this[q+3])},a.prototype.readBigUInt64LE=ge(function(q){q=q>>>0,le(q,"offset");const z=this[q],X=this[q+7];(z===void 0||X===void 0)&&se(q,this.length-8);const ne=z+this[++q]*2**8+this[++q]*2**16+this[++q]*2**24,ce=this[++q]+this[++q]*2**8+this[++q]*2**16+X*2**24;return BigInt(ne)+(BigInt(ce)<<BigInt(32))}),a.prototype.readBigUInt64BE=ge(function(q){q=q>>>0,le(q,"offset");const z=this[q],X=this[q+7];(z===void 0||X===void 0)&&se(q,this.length-8);const ne=z*2**24+this[++q]*2**16+this[++q]*2**8+this[++q],ce=this[++q]*2**24+this[++q]*2**16+this[++q]*2**8+X;return(BigInt(ne)<<BigInt(32))+BigInt(ce)}),a.prototype.readIntLE=function(q,z,X){q=q>>>0,z=z>>>0,X||N(q,z,this.length);let ne=this[q],ce=1,me=0;for(;++me<z&&(ce*=256);)ne+=this[q+me]*ce;return ce*=128,ne>=ce&&(ne-=Math.pow(2,8*z)),ne},a.prototype.readIntBE=function(q,z,X){q=q>>>0,z=z>>>0,X||N(q,z,this.length);let ne=z,ce=1,me=this[q+--ne];for(;ne>0&&(ce*=256);)me+=this[q+--ne]*ce;return ce*=128,me>=ce&&(me-=Math.pow(2,8*z)),me},a.prototype.readInt8=function(q,z){return q=q>>>0,z||N(q,1,this.length),this[q]&128?(255-this[q]+1)*-1:this[q]},a.prototype.readInt16LE=function(q,z){q=q>>>0,z||N(q,2,this.length);const X=this[q]|this[q+1]<<8;return X&32768?X|4294901760:X},a.prototype.readInt16BE=function(q,z){q=q>>>0,z||N(q,2,this.length);const X=this[q+1]|this[q]<<8;return X&32768?X|4294901760:X},a.prototype.readInt32LE=function(q,z){return q=q>>>0,z||N(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},a.prototype.readInt32BE=function(q,z){return q=q>>>0,z||N(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},a.prototype.readBigInt64LE=ge(function(q){q=q>>>0,le(q,"offset");const z=this[q],X=this[q+7];(z===void 0||X===void 0)&&se(q,this.length-8);const ne=this[q+4]+this[q+5]*2**8+this[q+6]*2**16+(X<<24);return(BigInt(ne)<<BigInt(32))+BigInt(z+this[++q]*2**8+this[++q]*2**16+this[++q]*2**24)}),a.prototype.readBigInt64BE=ge(function(q){q=q>>>0,le(q,"offset");const z=this[q],X=this[q+7];(z===void 0||X===void 0)&&se(q,this.length-8);const ne=(z<<24)+this[++q]*2**16+this[++q]*2**8+this[++q];return(BigInt(ne)<<BigInt(32))+BigInt(this[++q]*2**24+this[++q]*2**16+this[++q]*2**8+X)}),a.prototype.readFloatLE=function(q,z){return q=q>>>0,z||N(q,4,this.length),r.read(this,q,!0,23,4)},a.prototype.readFloatBE=function(q,z){return q=q>>>0,z||N(q,4,this.length),r.read(this,q,!1,23,4)},a.prototype.readDoubleLE=function(q,z){return q=q>>>0,z||N(q,8,this.length),r.read(this,q,!0,52,8)},a.prototype.readDoubleBE=function(q,z){return q=q>>>0,z||N(q,8,this.length),r.read(this,q,!1,52,8)};function v(V,q,z,X,ne,ce){if(!a.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(q>ne||q<ce)throw new RangeError('"value" argument is out of bounds');if(z+X>V.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(q,z,X,ne){if(q=+q,z=z>>>0,X=X>>>0,!ne){const Rt=Math.pow(2,8*X)-1;v(this,q,z,X,Rt,0)}let ce=1,me=0;for(this[z]=q&255;++me<X&&(ce*=256);)this[z+me]=q/ce&255;return z+X},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(q,z,X,ne){if(q=+q,z=z>>>0,X=X>>>0,!ne){const Rt=Math.pow(2,8*X)-1;v(this,q,z,X,Rt,0)}let ce=X-1,me=1;for(this[z+ce]=q&255;--ce>=0&&(me*=256);)this[z+ce]=q/me&255;return z+X},a.prototype.writeUint8=a.prototype.writeUInt8=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,1,255,0),this[z]=q&255,z+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,2,65535,0),this[z]=q&255,this[z+1]=q>>>8,z+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,2,65535,0),this[z]=q>>>8,this[z+1]=q&255,z+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,4,4294967295,0),this[z+3]=q>>>24,this[z+2]=q>>>16,this[z+1]=q>>>8,this[z]=q&255,z+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,4,4294967295,0),this[z]=q>>>24,this[z+1]=q>>>16,this[z+2]=q>>>8,this[z+3]=q&255,z+4};function R(V,q,z,X,ne){de(q,X,ne,V,z,7);let ce=Number(q&BigInt(4294967295));V[z++]=ce,ce=ce>>8,V[z++]=ce,ce=ce>>8,V[z++]=ce,ce=ce>>8,V[z++]=ce;let me=Number(q>>BigInt(32)&BigInt(4294967295));return V[z++]=me,me=me>>8,V[z++]=me,me=me>>8,V[z++]=me,me=me>>8,V[z++]=me,z}function $(V,q,z,X,ne){de(q,X,ne,V,z,7);let ce=Number(q&BigInt(4294967295));V[z+7]=ce,ce=ce>>8,V[z+6]=ce,ce=ce>>8,V[z+5]=ce,ce=ce>>8,V[z+4]=ce;let me=Number(q>>BigInt(32)&BigInt(4294967295));return V[z+3]=me,me=me>>8,V[z+2]=me,me=me>>8,V[z+1]=me,me=me>>8,V[z]=me,z+8}a.prototype.writeBigUInt64LE=ge(function(q,z=0){return R(this,q,z,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ge(function(q,z=0){return $(this,q,z,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(q,z,X,ne){if(q=+q,z=z>>>0,!ne){const Tt=Math.pow(2,8*X-1);v(this,q,z,X,Tt-1,-Tt)}let ce=0,me=1,Rt=0;for(this[z]=q&255;++ce<X&&(me*=256);)q<0&&Rt===0&&this[z+ce-1]!==0&&(Rt=1),this[z+ce]=(q/me>>0)-Rt&255;return z+X},a.prototype.writeIntBE=function(q,z,X,ne){if(q=+q,z=z>>>0,!ne){const Tt=Math.pow(2,8*X-1);v(this,q,z,X,Tt-1,-Tt)}let ce=X-1,me=1,Rt=0;for(this[z+ce]=q&255;--ce>=0&&(me*=256);)q<0&&Rt===0&&this[z+ce+1]!==0&&(Rt=1),this[z+ce]=(q/me>>0)-Rt&255;return z+X},a.prototype.writeInt8=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,1,127,-128),q<0&&(q=255+q+1),this[z]=q&255,z+1},a.prototype.writeInt16LE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,2,32767,-32768),this[z]=q&255,this[z+1]=q>>>8,z+2},a.prototype.writeInt16BE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,2,32767,-32768),this[z]=q>>>8,this[z+1]=q&255,z+2},a.prototype.writeInt32LE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,4,2147483647,-2147483648),this[z]=q&255,this[z+1]=q>>>8,this[z+2]=q>>>16,this[z+3]=q>>>24,z+4},a.prototype.writeInt32BE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,4,2147483647,-2147483648),q<0&&(q=4294967295+q+1),this[z]=q>>>24,this[z+1]=q>>>16,this[z+2]=q>>>8,this[z+3]=q&255,z+4},a.prototype.writeBigInt64LE=ge(function(q,z=0){return R(this,q,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ge(function(q,z=0){return $(this,q,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function O(V,q,z,X,ne,ce){if(z+X>V.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function H(V,q,z,X,ne){return q=+q,z=z>>>0,ne||O(V,q,z,4),r.write(V,q,z,X,23,4),z+4}a.prototype.writeFloatLE=function(q,z,X){return H(this,q,z,!0,X)},a.prototype.writeFloatBE=function(q,z,X){return H(this,q,z,!1,X)};function W(V,q,z,X,ne){return q=+q,z=z>>>0,ne||O(V,q,z,8),r.write(V,q,z,X,52,8),z+8}a.prototype.writeDoubleLE=function(q,z,X){return W(this,q,z,!0,X)},a.prototype.writeDoubleBE=function(q,z,X){return W(this,q,z,!1,X)},a.prototype.copy=function(q,z,X,ne){if(!a.isBuffer(q))throw new TypeError("argument should be a Buffer");if(X||(X=0),!ne&&ne!==0&&(ne=this.length),z>=q.length&&(z=q.length),z||(z=0),ne>0&&ne<X&&(ne=X),ne===X||q.length===0||this.length===0)return 0;if(z<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("sourceEnd out of bounds");ne>this.length&&(ne=this.length),q.length-z<ne-X&&(ne=q.length-z+X);const ce=ne-X;return this===q&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(z,X,ne):Uint8Array.prototype.set.call(q,this.subarray(X,ne),z),ce},a.prototype.fill=function(q,z,X,ne){if(typeof q=="string"){if(typeof z=="string"?(ne=z,z=0,X=this.length):typeof X=="string"&&(ne=X,X=this.length),ne!==void 0&&typeof ne!="string")throw new TypeError("encoding must be a string");if(typeof ne=="string"&&!a.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);if(q.length===1){const me=q.charCodeAt(0);(ne==="utf8"&&me<128||ne==="latin1")&&(q=me)}}else typeof q=="number"?q=q&255:typeof q=="boolean"&&(q=Number(q));if(z<0||this.length<z||this.length<X)throw new RangeError("Out of range index");if(X<=z)return this;z=z>>>0,X=X===void 0?this.length:X>>>0,q||(q=0);let ce;if(typeof q=="number")for(ce=z;ce<X;++ce)this[ce]=q;else{const me=a.isBuffer(q)?q:a.from(q,ne),Rt=me.length;if(Rt===0)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(ce=0;ce<X-z;++ce)this[ce+z]=me[ce%Rt]}return this};const G={};function K(V,q,z){G[V]=class extends z{constructor(){super(),Object.defineProperty(this,"message",{value:q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${V}]`,this.stack,delete this.name}get code(){return V}set code(ne){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ne,writable:!0})}toString(){return`${this.name} [${V}]: ${this.message}`}}}K("ERR_BUFFER_OUT_OF_BOUNDS",function(V){return V?`${V} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),K("ERR_INVALID_ARG_TYPE",function(V,q){return`The "${V}" argument must be of type number. Received type ${typeof q}`},TypeError),K("ERR_OUT_OF_RANGE",function(V,q,z){let X=`The value of "${V}" is out of range.`,ne=z;return Number.isInteger(z)&&Math.abs(z)>2**32?ne=Q(String(z)):typeof z=="bigint"&&(ne=String(z),(z>BigInt(2)**BigInt(32)||z<-(BigInt(2)**BigInt(32)))&&(ne=Q(ne)),ne+="n"),X+=` It must be ${q}. Received ${ne}`,X},RangeError);function Q(V){let q="",z=V.length;const X=V[0]==="-"?1:0;for(;z>=X+4;z-=3)q=`_${V.slice(z-3,z)}${q}`;return`${V.slice(0,z)}${q}`}function re(V,q,z){le(q,"offset"),(V[q]===void 0||V[q+z]===void 0)&&se(q,V.length-(z+1))}function de(V,q,z,X,ne,ce){if(V>z||V<q){const me=typeof q=="bigint"?"n":"";let Rt;throw q===0||q===BigInt(0)?Rt=`>= 0${me} and < 2${me} ** ${(ce+1)*8}${me}`:Rt=`>= -(2${me} ** ${(ce+1)*8-1}${me}) and < 2 ** ${(ce+1)*8-1}${me}`,new G.ERR_OUT_OF_RANGE("value",Rt,V)}re(X,ne,ce)}function le(V,q){if(typeof V!="number")throw new G.ERR_INVALID_ARG_TYPE(q,"number",V)}function se(V,q,z){throw Math.floor(V)!==V?(le(V,z),new G.ERR_OUT_OF_RANGE("offset","an integer",V)):q<0?new G.ERR_BUFFER_OUT_OF_BOUNDS:new G.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${q}`,V)}const be=/[^+/0-9A-Za-z-_]/g;function We(V){if(V=V.split("=")[0],V=V.trim().replace(be,""),V.length<2)return"";for(;V.length%4!==0;)V=V+"=";return V}function Ne(V,q){q=q||1/0;let z;const X=V.length;let ne=null;const ce=[];for(let me=0;me<X;++me){if(z=V.charCodeAt(me),z>55295&&z<57344){if(!ne){if(z>56319){(q-=3)>-1&&ce.push(239,191,189);continue}else if(me+1===X){(q-=3)>-1&&ce.push(239,191,189);continue}ne=z;continue}if(z<56320){(q-=3)>-1&&ce.push(239,191,189),ne=z;continue}z=(ne-55296<<10|z-56320)+65536}else ne&&(q-=3)>-1&&ce.push(239,191,189);if(ne=null,z<128){if((q-=1)<0)break;ce.push(z)}else if(z<2048){if((q-=2)<0)break;ce.push(z>>6|192,z&63|128)}else if(z<65536){if((q-=3)<0)break;ce.push(z>>12|224,z>>6&63|128,z&63|128)}else if(z<1114112){if((q-=4)<0)break;ce.push(z>>18|240,z>>12&63|128,z>>6&63|128,z&63|128)}else throw new Error("Invalid code point")}return ce}function Be(V){const q=[];for(let z=0;z<V.length;++z)q.push(V.charCodeAt(z)&255);return q}function At(V,q){let z,X,ne;const ce=[];for(let me=0;me<V.length&&!((q-=2)<0);++me)z=V.charCodeAt(me),X=z>>8,ne=z%256,ce.push(ne),ce.push(X);return ce}function Ee(V){return e.toByteArray(We(V))}function fe(V,q,z,X){let ne;for(ne=0;ne<X&&!(ne+z>=q.length||ne>=V.length);++ne)q[ne+z]=V[ne];return ne}function Mt(V,q){return V instanceof q||V!=null&&V.constructor!=null&&V.constructor.name!=null&&V.constructor.name===q.name}function bt(V){return V!==V}const jt=(function(){const V="0123456789abcdef",q=new Array(256);for(let z=0;z<16;++z){const X=z*16;for(let ne=0;ne<16;++ne)q[X+ne]=V[z]+V[ne]}return q})();function ge(V){return typeof BigInt>"u"?ve:V}function ve(){throw new Error("BigInt not supported")}})(y3)),y3}var nr=N4(),fy={};const oue="https://secure.walletconnect.org/sdk",aue=(typeof process<"u"&&typeof fy<"u"?fy.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||oue,cue=(typeof process<"u"&&typeof fy<"u"?fy.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",uue=(typeof process<"u"&&typeof fy<"u"?fy.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",ct={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ss={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},sU={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},qs={set(t,e){rc.isClient&&localStorage.setItem(`${ct.STORAGE_KEY}${t}`,e)},get(t){return rc.isClient?localStorage.getItem(`${ct.STORAGE_KEY}${t}`):null},delete(t,e){rc.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${ct.STORAGE_KEY}${t}`))}},q_=30*1e3,rc={checkIfAllowedToTriggerEmail(){const t=qs.get(ct.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<q_){const r=Math.ceil((q_-e)/1e3);throw new Error(`Please try again after ${r} seconds`)}}},getTimeToNextEmailLogin(){const t=qs.get(ct.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<q_)return Math.ceil((q_-e)/1e3)}return 0},checkIfRequestExists(t){return Ss.NOT_SAFE_RPC_METHODS.includes(t.method)||Ss.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&(t?.match(sU.transactionHash)||t?.match(sU.signedMessage))?ct.RPC_RESPONSE_TYPE_TX:ct.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Ss.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var qr;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(qr||(qr={}));var QR;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(QR||(QR={}));const Qe=qr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ah=t=>{switch(typeof t){case"undefined":return Qe.undefined;case"string":return Qe.string;case"number":return isNaN(t)?Qe.nan:Qe.number;case"boolean":return Qe.boolean;case"function":return Qe.function;case"bigint":return Qe.bigint;case"symbol":return Qe.symbol;case"object":return Array.isArray(t)?Qe.array:t===null?Qe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Qe.promise:typeof Map<"u"&&t instanceof Map?Qe.map:typeof Set<"u"&&t instanceof Set?Qe.set:typeof Date<"u"&&t instanceof Date?Qe.date:Qe.object;default:return Qe.unknown}},Me=qr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),lue=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");let Uu=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,qr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Uu.create=t=>new Uu(t);const iv=(t,e)=>{let r;switch(t.code){case Me.invalid_type:t.received===Qe.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Me.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,qr.jsonStringifyReplacer)}`;break;case Me.unrecognized_keys:r=`Unrecognized key(s) in object: ${qr.joinValues(t.keys,", ")}`;break;case Me.invalid_union:r="Invalid input";break;case Me.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${qr.joinValues(t.options)}`;break;case Me.invalid_enum_value:r=`Invalid enum value. Expected ${qr.joinValues(t.options)}, received '${t.received}'`;break;case Me.invalid_arguments:r="Invalid function arguments";break;case Me.invalid_return_type:r="Invalid function return type";break;case Me.invalid_date:r="Invalid date";break;case Me.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:qr.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Me.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Me.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Me.custom:r="Invalid input";break;case Me.invalid_intersection_types:r="Intersection results could not be merged";break;case Me.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Me.not_finite:r="Number must be finite";break;default:r=e.defaultError,qr.assertNever(t)}return{message:r}};let VY=iv;function due(t){VY=t}function ZI(){return VY}const YI=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};let a="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},fue=[];function ot(t,e){const r=YI({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ZI(),iv].filter(n=>!!n)});t.common.issues.push(r)}let Aa=class GY{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return Vt;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r)n.push({key:await s.key,value:await s.value});return GY.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Vt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}};const Vt=Object.freeze({status:"aborted"}),KY=t=>({status:"dirty",value:t}),Lo=t=>({status:"valid",value:t}),e8=t=>t.status==="aborted",t8=t=>t.status==="dirty",ov=t=>t.status==="valid",JI=t=>typeof Promise<"u"&&t instanceof Promise;var Bt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Bt||(Bt={}));let Bl=class{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}};const iU=(t,e)=>{if(ov(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Uu(t.common.issues);return this._error=r,this._error}}};function Jt(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:s}}let sr=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ah(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:ah(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Aa,ctx:{common:e.parent.common,data:e.data,parsedType:ah(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(JI(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ah(e)},i=this._parseSync({data:e,path:s.path,parent:s});return iU(s,i)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ah(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(JI(s)?s:Promise.resolve(s));return iU(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Me.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Fu({schema:this,typeName:$t.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Kd.create(this,this._def)}nullable(){return T0.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return I0.create(this,this._def)}promise(){return gy.create(this,this._def)}or(e){return hv.create([this,e],this._def)}and(e){return pv.create(this,e,this._def)}transform(e){return new Fu({...Jt(this._def),schema:this,typeName:$t.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new bv({...Jt(this._def),innerType:this,defaultValue:r,typeName:$t.ZodDefault})}brand(){return new rJ({typeName:$t.ZodBranded,type:this,...Jt(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new r6({...Jt(this._def),innerType:this,catchValue:r,typeName:$t.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return P4.create(this,e)}readonly(){return s6.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const hue=/^c[^\s-]{8,}$/i,pue=/^[a-z][a-z0-9]*$/,gue=/^[0-9A-HJKMNP-TV-Z]{26}$/,mue=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,yue=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,bue="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let b3;const wue=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,vue=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Eue=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function _ue(t,e){return!!((e==="v4"||!e)&&wue.test(t)||(e==="v6"||!e)&&vue.test(t))}let hy=class g1 extends sr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Qe.string){const i=this._getOrReturnCtx(e);return ot(i,{code:Me.invalid_type,expected:Qe.string,received:i.parsedType}),Vt}const n=new Aa;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ot(s,{code:Me.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ot(s,{code:Me.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")yue.test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"email",code:Me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")b3||(b3=new RegExp(bue,"u")),b3.test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"emoji",code:Me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")mue.test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"uuid",code:Me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")hue.test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"cuid",code:Me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")pue.test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"cuid2",code:Me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")gue.test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"ulid",code:Me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ot(s,{validation:"url",code:Me.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"regex",code:Me.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?Eue(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?_ue(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"ip",code:Me.invalid_string,message:i.message}),n.dirty()):qr.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:Me.invalid_string,...Bt.errToObj(n)})}_addCheck(e){return new g1({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Bt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Bt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Bt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Bt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Bt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Bt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Bt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Bt.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...Bt.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Bt.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Bt.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Bt.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Bt.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Bt.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Bt.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Bt.errToObj(r)})}nonempty(e){return this.min(1,Bt.errToObj(e))}trim(){return new g1({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new g1({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new g1({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};hy.create=t=>{var e;return new hy({checks:[],typeName:$t.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Jt(t)})};function Aue(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}let av=class r8 extends sr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Qe.number){const i=this._getOrReturnCtx(e);return ot(i,{code:Me.invalid_type,expected:Qe.number,received:i.parsedType}),Vt}let n;const s=new Aa;for(const i of this._def.checks)i.kind==="int"?qr.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Aue(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.not_finite,message:i.message}),s.dirty()):qr.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Bt.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Bt.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Bt.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Bt.toString(r))}setLimit(e,r,n,s){return new r8({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Bt.toString(s)}]})}_addCheck(e){return new r8({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Bt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Bt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Bt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Bt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Bt.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Bt.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Bt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Bt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Bt.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&qr.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};av.create=t=>new av({checks:[],typeName:$t.ZodNumber,coerce:t?.coerce||!1,...Jt(t)});let cv=class n8 extends sr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Qe.bigint){const i=this._getOrReturnCtx(e);return ot(i,{code:Me.invalid_type,expected:Qe.bigint,received:i.parsedType}),Vt}let n;const s=new Aa;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):qr.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Bt.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Bt.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Bt.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Bt.toString(r))}setLimit(e,r,n,s){return new n8({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Bt.toString(s)}]})}_addCheck(e){return new n8({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Bt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Bt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Bt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Bt.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Bt.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};cv.create=t=>{var e;return new cv({checks:[],typeName:$t.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Jt(t)})};let uv=class extends sr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Qe.boolean){const n=this._getOrReturnCtx(e);return ot(n,{code:Me.invalid_type,expected:Qe.boolean,received:n.parsedType}),Vt}return Lo(e.data)}};uv.create=t=>new uv({typeName:$t.ZodBoolean,coerce:t?.coerce||!1,...Jt(t)});let lv=class ZY extends sr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Qe.date){const i=this._getOrReturnCtx(e);return ot(i,{code:Me.invalid_type,expected:Qe.date,received:i.parsedType}),Vt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ot(i,{code:Me.invalid_date}),Vt}const n=new Aa;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):qr.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZY({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Bt.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Bt.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};lv.create=t=>new lv({checks:[],coerce:t?.coerce||!1,typeName:$t.ZodDate,...Jt(t)});let XI=class extends sr{_parse(e){if(this._getType(e)!==Qe.symbol){const n=this._getOrReturnCtx(e);return ot(n,{code:Me.invalid_type,expected:Qe.symbol,received:n.parsedType}),Vt}return Lo(e.data)}};XI.create=t=>new XI({typeName:$t.ZodSymbol,...Jt(t)});let dv=class extends sr{_parse(e){if(this._getType(e)!==Qe.undefined){const n=this._getOrReturnCtx(e);return ot(n,{code:Me.invalid_type,expected:Qe.undefined,received:n.parsedType}),Vt}return Lo(e.data)}};dv.create=t=>new dv({typeName:$t.ZodUndefined,...Jt(t)});let fv=class extends sr{_parse(e){if(this._getType(e)!==Qe.null){const n=this._getOrReturnCtx(e);return ot(n,{code:Me.invalid_type,expected:Qe.null,received:n.parsedType}),Vt}return Lo(e.data)}};fv.create=t=>new fv({typeName:$t.ZodNull,...Jt(t)});let py=class extends sr{constructor(){super(...arguments),this._any=!0}_parse(e){return Lo(e.data)}};py.create=t=>new py({typeName:$t.ZodAny,...Jt(t)});let m0=class extends sr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Lo(e.data)}};m0.create=t=>new m0({typeName:$t.ZodUnknown,...Jt(t)});let tf=class extends sr{_parse(e){const r=this._getOrReturnCtx(e);return ot(r,{code:Me.invalid_type,expected:Qe.never,received:r.parsedType}),Vt}};tf.create=t=>new tf({typeName:$t.ZodNever,...Jt(t)});let QI=class extends sr{_parse(e){if(this._getType(e)!==Qe.undefined){const n=this._getOrReturnCtx(e);return ot(n,{code:Me.invalid_type,expected:Qe.void,received:n.parsedType}),Vt}return Lo(e.data)}};QI.create=t=>new QI({typeName:$t.ZodVoid,...Jt(t)});let I0=class lI extends sr{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==Qe.array)return ot(r,{code:Me.invalid_type,expected:Qe.array,received:r.parsedType}),Vt;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(ot(r,{code:o?Me.too_big:Me.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(ot(r,{code:Me.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(ot(r,{code:Me.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new Bl(r,o,r.path,a)))).then(o=>Aa.mergeArray(n,o));const i=[...r.data].map((o,a)=>s.type._parseSync(new Bl(r,o,r.path,a)));return Aa.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new lI({...this._def,minLength:{value:e,message:Bt.toString(r)}})}max(e,r){return new lI({...this._def,maxLength:{value:e,message:Bt.toString(r)}})}length(e,r){return new lI({...this._def,exactLength:{value:e,message:Bt.toString(r)}})}nonempty(e){return this.min(1,e)}};I0.create=(t,e)=>new I0({type:t,minLength:null,maxLength:null,exactLength:null,typeName:$t.ZodArray,...Jt(e)});function Cm(t){if(t instanceof qc){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Kd.create(Cm(n))}return new qc({...t._def,shape:()=>e})}else return t instanceof I0?new I0({...t._def,type:Cm(t.element)}):t instanceof Kd?Kd.create(Cm(t.unwrap())):t instanceof T0?T0.create(Cm(t.unwrap())):t instanceof Nh?Nh.create(t.items.map(e=>Cm(e))):t}let qc=class gu extends sr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=qr.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Qe.object){const u=this._getOrReturnCtx(e);return ot(u,{code:Me.invalid_type,expected:Qe.object,received:u.parsedType}),Vt}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof tf&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=i[u],d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Bl(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof tf){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(ot(s,{code:Me.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Bl(s,d,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const d=await l.key;u.push({key:d,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>Aa.mergeObjectSync(n,u)):Aa.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return Bt.errToObj,new gu({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=Bt.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new gu({...this._def,unknownKeys:"strip"})}passthrough(){return new gu({...this._def,unknownKeys:"passthrough"})}extend(e){return new gu({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new gu({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:$t.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new gu({...this._def,catchall:e})}pick(e){const r={};return qr.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new gu({...this._def,shape:()=>r})}omit(e){const r={};return qr.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new gu({...this._def,shape:()=>r})}deepPartial(){return Cm(this)}partial(e){const r={};return qr.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new gu({...this._def,shape:()=>r})}required(e){const r={};return qr.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Kd;)i=i._def.innerType;r[n]=i}}),new gu({...this._def,shape:()=>r})}keyof(){return tJ(qr.objectKeys(this.shape))}};qc.create=(t,e)=>new qc({shape:()=>t,unknownKeys:"strip",catchall:tf.create(),typeName:$t.ZodObject,...Jt(e)});qc.strictCreate=(t,e)=>new qc({shape:()=>t,unknownKeys:"strict",catchall:tf.create(),typeName:$t.ZodObject,...Jt(e)});qc.lazycreate=(t,e)=>new qc({shape:t,unknownKeys:"strip",catchall:tf.create(),typeName:$t.ZodObject,...Jt(e)});let hv=class extends sr{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Uu(a.ctx.common.issues));return ot(r,{code:Me.invalid_union,unionErrors:o}),Vt}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},l=c._parseSync({data:r.data,path:r.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Uu(c));return ot(r,{code:Me.invalid_union,unionErrors:a}),Vt}}get options(){return this._def.options}};hv.create=(t,e)=>new hv({options:t,typeName:$t.ZodUnion,...Jt(e)});const dI=t=>t instanceof gv?dI(t.schema):t instanceof Fu?dI(t.innerType()):t instanceof mv?[t.value]:t instanceof RE?t.options:t instanceof yv?Object.keys(t.enum):t instanceof bv?dI(t._def.innerType):t instanceof dv?[void 0]:t instanceof fv?[null]:null;let YY=class JY extends sr{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Qe.object)return ot(r,{code:Me.invalid_type,expected:Qe.object,received:r.parsedType}),Vt;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(ot(r,{code:Me.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Vt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const o=dI(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new JY({typeName:$t.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...Jt(n)})}};function s8(t,e){const r=ah(t),n=ah(e);if(t===e)return{valid:!0,data:t};if(r===Qe.object&&n===Qe.object){const s=qr.objectKeys(e),i=qr.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=s8(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===Qe.array&&n===Qe.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=s8(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===Qe.date&&n===Qe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}let pv=class extends sr{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(e8(i)||e8(o))return Vt;const a=s8(i.value,o.value);return a.valid?((t8(i)||t8(o))&&r.dirty(),{status:r.value,value:a.data}):(ot(n,{code:Me.invalid_intersection_types}),Vt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};pv.create=(t,e,r)=>new pv({left:t,right:e,typeName:$t.ZodIntersection,...Jt(r)});let Nh=class XY extends sr{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Qe.array)return ot(n,{code:Me.invalid_type,expected:Qe.array,received:n.parsedType}),Vt;if(n.data.length<this._def.items.length)return ot(n,{code:Me.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Vt;!this._def.rest&&n.data.length>this._def.items.length&&(ot(n,{code:Me.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Bl(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Aa.mergeArray(r,o)):Aa.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new XY({...this._def,rest:e})}};Nh.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Nh({items:t,typeName:$t.ZodTuple,rest:null,...Jt(e)})};let QY=class i8 extends sr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Qe.object)return ot(n,{code:Me.invalid_type,expected:Qe.object,received:n.parsedType}),Vt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in n.data)s.push({key:i._parse(new Bl(n,a,n.path,a)),value:o._parse(new Bl(n,n.data[a],n.path,a))});return n.common.async?Aa.mergeObjectAsync(r,s):Aa.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof sr?new i8({keyType:e,valueType:r,typeName:$t.ZodRecord,...Jt(n)}):new i8({keyType:hy.create(),valueType:e,typeName:$t.ZodRecord,...Jt(r)})}},e6=class extends sr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Qe.map)return ot(n,{code:Me.invalid_type,expected:Qe.map,received:n.parsedType}),Vt;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:s._parse(new Bl(n,a,n.path,[u,"key"])),value:i._parse(new Bl(n,c,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return Vt;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return Vt;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}}}};e6.create=(t,e,r)=>new e6({valueType:e,keyType:t,typeName:$t.ZodMap,...Jt(r)});let t6=class o8 extends sr{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Qe.set)return ot(n,{code:Me.invalid_type,expected:Qe.set,received:n.parsedType}),Vt;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(ot(n,{code:Me.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(ot(n,{code:Me.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return Vt;l.status==="dirty"&&r.dirty(),u.add(l.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((c,u)=>i._parse(new Bl(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new o8({...this._def,minSize:{value:e,message:Bt.toString(r)}})}max(e,r){return new o8({...this._def,maxSize:{value:e,message:Bt.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};t6.create=(t,e)=>new t6({valueType:t,minSize:null,maxSize:null,typeName:$t.ZodSet,...Jt(e)});let eJ=class fI extends sr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Qe.function)return ot(r,{code:Me.invalid_type,expected:Qe.function,received:r.parsedType}),Vt;function n(a,c){return YI({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ZI(),iv].filter(u=>!!u),issueData:{code:Me.invalid_arguments,argumentsError:c}})}function s(a,c){return YI({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ZI(),iv].filter(u=>!!u),issueData:{code:Me.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof gy){const a=this;return Lo(async function(...c){const u=new Uu([]),l=await a._def.args.parseAsync(c,i).catch(p=>{throw u.addIssue(n(c,p)),u}),d=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(d,i).catch(p=>{throw u.addIssue(s(d,p)),u})})}else{const a=this;return Lo(function(...c){const u=a._def.args.safeParse(c,i);if(!u.success)throw new Uu([n(c,u.error)]);const l=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(l,i);if(!d.success)throw new Uu([s(l,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new fI({...this._def,args:Nh.create(e).rest(m0.create())})}returns(e){return new fI({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new fI({args:e||Nh.create([]).rest(m0.create()),returns:r||m0.create(),typeName:$t.ZodFunction,...Jt(n)})}},gv=class extends sr{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};gv.create=(t,e)=>new gv({getter:t,typeName:$t.ZodLazy,...Jt(e)});let mv=class extends sr{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return ot(r,{received:r.data,code:Me.invalid_literal,expected:this._def.value}),Vt}return{status:"valid",value:e.data}}get value(){return this._def.value}};mv.create=(t,e)=>new mv({value:t,typeName:$t.ZodLiteral,...Jt(e)});function tJ(t,e){return new RE({values:t,typeName:$t.ZodEnum,...Jt(e)})}let RE=class a8 extends sr{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return ot(r,{expected:qr.joinValues(n),received:r.parsedType,code:Me.invalid_type}),Vt}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return ot(r,{received:r.data,code:Me.invalid_enum_value,options:n}),Vt}return Lo(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return a8.create(e)}exclude(e){return a8.create(this.options.filter(r=>!e.includes(r)))}};RE.create=tJ;let yv=class extends sr{_parse(e){const r=qr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Qe.string&&n.parsedType!==Qe.number){const s=qr.objectValues(r);return ot(n,{expected:qr.joinValues(s),received:n.parsedType,code:Me.invalid_type}),Vt}if(r.indexOf(e.data)===-1){const s=qr.objectValues(r);return ot(n,{received:n.data,code:Me.invalid_enum_value,options:s}),Vt}return Lo(e.data)}get enum(){return this._def.values}};yv.create=(t,e)=>new yv({values:t,typeName:$t.ZodNativeEnum,...Jt(e)});let gy=class extends sr{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Qe.promise&&r.common.async===!1)return ot(r,{code:Me.invalid_type,expected:Qe.promise,received:r.parsedType}),Vt;const n=r.parsedType===Qe.promise?r.data:Promise.resolve(r.data);return Lo(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};gy.create=(t,e)=>new gy({type:t,typeName:$t.ZodPromise,...Jt(e)});let Fu=class extends sr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$t.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ot(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Vt:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Vt:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ov(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>ov(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):o);qr.assertNever(s)}};Fu.create=(t,e,r)=>new Fu({schema:t,typeName:$t.ZodEffects,effect:e,...Jt(r)});Fu.createWithPreprocess=(t,e,r)=>new Fu({schema:e,effect:{type:"preprocess",transform:t},typeName:$t.ZodEffects,...Jt(r)});let Kd=class extends sr{_parse(e){return this._getType(e)===Qe.undefined?Lo(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Kd.create=(t,e)=>new Kd({innerType:t,typeName:$t.ZodOptional,...Jt(e)});let T0=class extends sr{_parse(e){return this._getType(e)===Qe.null?Lo(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};T0.create=(t,e)=>new T0({innerType:t,typeName:$t.ZodNullable,...Jt(e)});let bv=class extends sr{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===Qe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};bv.create=(t,e)=>new bv({innerType:t,typeName:$t.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Jt(e)});let r6=class extends sr{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return JI(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Uu(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Uu(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};r6.create=(t,e)=>new r6({innerType:t,typeName:$t.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Jt(e)});let n6=class extends sr{_parse(e){if(this._getType(e)!==Qe.nan){const n=this._getOrReturnCtx(e);return ot(n,{code:Me.invalid_type,expected:Qe.nan,received:n.parsedType}),Vt}return{status:"valid",value:e.data}}};n6.create=t=>new n6({typeName:$t.ZodNaN,...Jt(t)});const xue=Symbol("zod_brand");let rJ=class extends sr{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},P4=class nJ extends sr{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Vt:i.status==="dirty"?(r.dirty(),KY(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Vt:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new nJ({in:e,out:r,typeName:$t.ZodPipeline})}},s6=class extends sr{_parse(e){const r=this._def.innerType._parse(e);return ov(r)&&(r.value=Object.freeze(r.value)),r}};s6.create=(t,e)=>new s6({innerType:t,typeName:$t.ZodReadonly,...Jt(e)});const sJ=(t,e={},r)=>t?py.create().superRefine((n,s)=>{var i,o;if(!t(n)){const a=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:r)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...u,fatal:c})}}):py.create(),Cue={object:qc.lazycreate};var $t;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})($t||($t={}));const Sue=(t,e={message:`Input not instance of ${t.name}`})=>sJ(r=>r instanceof t,e),iJ=hy.create,oJ=av.create,Iue=n6.create,Tue=cv.create,aJ=uv.create,Nue=lv.create,Pue=XI.create,Rue=dv.create,Oue=fv.create,kue=py.create,Bue=m0.create,Uue=tf.create,Mue=QI.create,Due=I0.create,jue=qc.create,Lue=qc.strictCreate,Fue=hv.create,$ue=YY.create,que=pv.create,Hue=Nh.create,zue=QY.create,Wue=e6.create,Vue=t6.create,Gue=eJ.create,Kue=gv.create,Zue=mv.create,Yue=RE.create,Jue=yv.create,Xue=gy.create,oU=Fu.create,Que=Kd.create,ele=T0.create,tle=Fu.createWithPreprocess,rle=P4.create,nle=()=>iJ().optional(),sle=()=>oJ().optional(),ile=()=>aJ().optional(),ole={string:(t=>hy.create({...t,coerce:!0})),number:(t=>av.create({...t,coerce:!0})),boolean:(t=>uv.create({...t,coerce:!0})),bigint:(t=>cv.create({...t,coerce:!0})),date:(t=>lv.create({...t,coerce:!0}))},ale=Vt;var Z=Object.freeze({__proto__:null,defaultErrorMap:iv,setErrorMap:due,getErrorMap:ZI,makeIssue:YI,EMPTY_PATH:fue,addIssueToContext:ot,ParseStatus:Aa,INVALID:Vt,DIRTY:KY,OK:Lo,isAborted:e8,isDirty:t8,isValid:ov,isAsync:JI,get util(){return qr},get objectUtil(){return QR},ZodParsedType:Qe,getParsedType:ah,ZodType:sr,ZodString:hy,ZodNumber:av,ZodBigInt:cv,ZodBoolean:uv,ZodDate:lv,ZodSymbol:XI,ZodUndefined:dv,ZodNull:fv,ZodAny:py,ZodUnknown:m0,ZodNever:tf,ZodVoid:QI,ZodArray:I0,ZodObject:qc,ZodUnion:hv,ZodDiscriminatedUnion:YY,ZodIntersection:pv,ZodTuple:Nh,ZodRecord:QY,ZodMap:e6,ZodSet:t6,ZodFunction:eJ,ZodLazy:gv,ZodLiteral:mv,ZodEnum:RE,ZodNativeEnum:yv,ZodPromise:gy,ZodEffects:Fu,ZodTransformer:Fu,ZodOptional:Kd,ZodNullable:T0,ZodDefault:bv,ZodCatch:r6,ZodNaN:n6,BRAND:xue,ZodBranded:rJ,ZodPipeline:P4,ZodReadonly:s6,custom:sJ,Schema:sr,ZodSchema:sr,late:Cue,get ZodFirstPartyTypeKind(){return $t},coerce:ole,any:kue,array:Due,bigint:Tue,boolean:aJ,date:Nue,discriminatedUnion:$ue,effect:oU,enum:Yue,function:Gue,instanceof:Sue,intersection:que,lazy:Kue,literal:Zue,map:Wue,nan:Iue,nativeEnum:Jue,never:Uue,null:Oue,nullable:ele,number:oJ,object:jue,oboolean:ile,onumber:sle,optional:Que,ostring:nle,pipeline:rle,preprocess:tle,promise:Xue,record:zue,set:Vue,strictObject:Lue,string:iJ,symbol:Pue,transformer:oU,tuple:Hue,undefined:Rue,union:Fue,unknown:Bue,void:Mue,NEVER:ale,ZodIssueCode:Me,quotelessJson:lue,ZodError:Uu});const os=Z.object({message:Z.string()});function rt(t){return Z.literal(ct[t])}const TT=Z.object({serializedMessage:Z.string().optional(),accountAddress:Z.string(),chainId:Z.string(),notBefore:Z.string().optional(),domain:Z.string(),uri:Z.string(),version:Z.string(),nonce:Z.string(),statement:Z.string().optional(),resources:Z.array(Z.string()).optional(),requestId:Z.string().optional(),issuedAt:Z.string().optional(),expirationTime:Z.string().optional()});Z.object({accessList:Z.array(Z.string()),blockHash:Z.string().nullable(),blockNumber:Z.string().nullable(),chainId:Z.string().or(Z.number()),from:Z.string(),gas:Z.string(),hash:Z.string(),input:Z.string().nullable(),maxFeePerGas:Z.string(),maxPriorityFeePerGas:Z.string(),nonce:Z.string(),r:Z.string(),s:Z.string(),to:Z.string(),transactionIndex:Z.string().nullable(),type:Z.string(),v:Z.string(),value:Z.string()});const cle=Z.object({chainId:Z.string().or(Z.number()),rpcUrl:Z.optional(Z.string())}),ule=Z.object({email:Z.string().email()}),lle=Z.object({otp:Z.string()}),dle=Z.object({uri:Z.string(),preferredAccountType:Z.optional(Z.string()),chainId:Z.optional(Z.string().or(Z.number())),siwxMessage:Z.optional(TT),rpcUrl:Z.optional(Z.string())}),fle=Z.object({chainId:Z.optional(Z.string().or(Z.number())),preferredAccountType:Z.optional(Z.string()),socialUri:Z.optional(Z.string()),siwxMessage:Z.optional(TT),rpcUrl:Z.optional(Z.string())}),hle=Z.object({provider:Z.enum(["google","github","apple","facebook","x","discord"])}),ple=Z.object({email:Z.string().email()}),gle=Z.object({otp:Z.string()}),mle=Z.object({otp:Z.string()}),yle=Z.object({themeMode:Z.optional(Z.enum(["light","dark"])),themeVariables:Z.optional(Z.record(Z.string(),Z.string().or(Z.number()))),w3mThemeVariables:Z.optional(Z.record(Z.string(),Z.string()))}),ble=Z.object({metadata:Z.object({name:Z.string(),description:Z.string(),url:Z.string(),icons:Z.array(Z.string())}).optional(),sdkVersion:Z.string().optional(),sdkType:Z.string().optional(),projectId:Z.string()}),wle=Z.object({type:Z.string()}),vle=Z.object({action:Z.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),Ele=Z.object({url:Z.string()}),_le=Z.object({userName:Z.string()}),Ale=Z.object({email:Z.string().optional().nullable(),address:Z.string(),chainId:Z.string().or(Z.number()),accounts:Z.array(Z.object({address:Z.string(),type:Z.enum([Ss.ACCOUNT_TYPES.EOA,Ss.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:Z.string().optional().nullable(),preferredAccountType:Z.optional(Z.string()),signature:Z.string().optional(),message:Z.string().optional(),siwxMessage:Z.optional(TT)}),xle=Z.object({action:Z.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),Cle=Z.object({email:Z.string().email().optional().nullable(),address:Z.string(),chainId:Z.string().or(Z.number()),smartAccountDeployed:Z.optional(Z.boolean()),accounts:Z.array(Z.object({address:Z.string(),type:Z.enum([Ss.ACCOUNT_TYPES.EOA,Ss.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:Z.optional(Z.string()),signature:Z.string().optional(),message:Z.string().optional(),siwxMessage:Z.optional(TT)}),Sle=Z.object({uri:Z.string()}),Ile=Z.object({isConnected:Z.boolean()}),Tle=Z.object({chainId:Z.string().or(Z.number())}),Nle=Z.object({chainId:Z.string().or(Z.number())}),Ple=Z.object({newEmail:Z.string().email()}),Rle=Z.object({smartAccountEnabledNetworks:Z.array(Z.number())});Z.object({address:Z.string(),isDeployed:Z.boolean()});const Ole=Z.object({version:Z.string().optional()}),kle=Z.object({type:Z.string(),address:Z.string()}),Ble=Z.any(),Ule=Z.object({method:Z.literal("eth_accounts")}),Mle=Z.object({method:Z.literal("eth_blockNumber")}),Dle=Z.object({method:Z.literal("eth_call"),params:Z.array(Z.any())}),jle=Z.object({method:Z.literal("eth_chainId")}),Lle=Z.object({method:Z.literal("eth_estimateGas"),params:Z.array(Z.any())}),Fle=Z.object({method:Z.literal("eth_feeHistory"),params:Z.array(Z.any())}),$le=Z.object({method:Z.literal("eth_gasPrice")}),qle=Z.object({method:Z.literal("eth_getAccount"),params:Z.array(Z.any())}),Hle=Z.object({method:Z.literal("eth_getBalance"),params:Z.array(Z.any())}),zle=Z.object({method:Z.literal("eth_getBlockByHash"),params:Z.array(Z.any())}),Wle=Z.object({method:Z.literal("eth_getBlockByNumber"),params:Z.array(Z.any())}),Vle=Z.object({method:Z.literal("eth_getBlockReceipts"),params:Z.array(Z.any())}),Gle=Z.object({method:Z.literal("eth_getBlockTransactionCountByHash"),params:Z.array(Z.any())}),Kle=Z.object({method:Z.literal("eth_getBlockTransactionCountByNumber"),params:Z.array(Z.any())}),Zle=Z.object({method:Z.literal("eth_getCode"),params:Z.array(Z.any())}),Yle=Z.object({method:Z.literal("eth_getFilterChanges"),params:Z.array(Z.any())}),Jle=Z.object({method:Z.literal("eth_getFilterLogs"),params:Z.array(Z.any())}),Xle=Z.object({method:Z.literal("eth_getLogs"),params:Z.array(Z.any())}),Qle=Z.object({method:Z.literal("eth_getProof"),params:Z.array(Z.any())}),ede=Z.object({method:Z.literal("eth_getStorageAt"),params:Z.array(Z.any())}),tde=Z.object({method:Z.literal("eth_getTransactionByBlockHashAndIndex"),params:Z.array(Z.any())}),rde=Z.object({method:Z.literal("eth_getTransactionByBlockNumberAndIndex"),params:Z.array(Z.any())}),nde=Z.object({method:Z.literal("eth_getTransactionByHash"),params:Z.array(Z.any())}),sde=Z.object({method:Z.literal("eth_getTransactionCount"),params:Z.array(Z.any())}),ide=Z.object({method:Z.literal("eth_getTransactionReceipt"),params:Z.array(Z.any())}),ode=Z.object({method:Z.literal("eth_getUncleCountByBlockHash"),params:Z.array(Z.any())}),ade=Z.object({method:Z.literal("eth_getUncleCountByBlockNumber"),params:Z.array(Z.any())}),cde=Z.object({method:Z.literal("eth_maxPriorityFeePerGas")}),ude=Z.object({method:Z.literal("eth_newBlockFilter")}),lde=Z.object({method:Z.literal("eth_newFilter"),params:Z.array(Z.any())}),dde=Z.object({method:Z.literal("eth_newPendingTransactionFilter")}),fde=Z.object({method:Z.literal("eth_sendRawTransaction"),params:Z.array(Z.any())}),hde=Z.object({method:Z.literal("eth_syncing"),params:Z.array(Z.any())}),pde=Z.object({method:Z.literal("eth_uninstallFilter"),params:Z.array(Z.any())}),aU=Z.object({method:Z.literal("personal_sign"),params:Z.array(Z.any())}),gde=Z.object({method:Z.literal("eth_signTypedData_v4"),params:Z.array(Z.any())}),mde=Z.object({method:Z.literal("eth_sendTransaction"),params:Z.array(Z.any())}),yde=Z.object({method:Z.literal("solana_signMessage"),params:Z.object({message:Z.string(),pubkey:Z.string()})}),bde=Z.object({method:Z.literal("solana_signTransaction"),params:Z.object({transaction:Z.string()})}),wde=Z.object({method:Z.literal("solana_signAllTransactions"),params:Z.object({transactions:Z.array(Z.string())})}),vde=Z.object({method:Z.literal("solana_signAndSendTransaction"),params:Z.object({transaction:Z.string(),options:Z.object({skipPreflight:Z.boolean().optional(),preflightCommitment:Z.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:Z.number().optional(),minContextSlot:Z.number().optional()}).optional()})}),Ede=Z.object({method:Z.literal("wallet_sendCalls"),params:Z.array(Z.object({chainId:Z.string().or(Z.number()).optional(),from:Z.string().optional(),version:Z.string().optional(),capabilities:Z.any().optional(),calls:Z.array(Z.object({to:Z.string().startsWith("0x"),data:Z.string().startsWith("0x").optional(),value:Z.string().optional()}))}))}),_de=Z.object({method:Z.literal("wallet_getCallsStatus"),params:Z.array(Z.string())}),Ade=Z.object({method:Z.literal("wallet_getCapabilities"),params:Z.array(Z.string().or(Z.number()).optional()).optional()}),xde=Z.object({method:Z.literal("wallet_grantPermissions"),params:Z.array(Z.any())}),Cde=Z.object({method:Z.literal("wallet_revokePermissions"),params:Z.any()}),Sde=Z.object({method:Z.literal("wallet_getAssets"),params:Z.any()}),cU=Z.object({token:Z.string()}),nt=Z.object({id:Z.string().optional()}),w3={appEvent:nt.extend({type:rt("APP_SWITCH_NETWORK"),payload:cle}).or(nt.extend({type:rt("APP_CONNECT_EMAIL"),payload:ule})).or(nt.extend({type:rt("APP_CONNECT_DEVICE")})).or(nt.extend({type:rt("APP_CONNECT_OTP"),payload:lle})).or(nt.extend({type:rt("APP_CONNECT_SOCIAL"),payload:dle})).or(nt.extend({type:rt("APP_GET_FARCASTER_URI")})).or(nt.extend({type:rt("APP_CONNECT_FARCASTER")})).or(nt.extend({type:rt("APP_GET_USER"),payload:Z.optional(fle)})).or(nt.extend({type:rt("APP_GET_SOCIAL_REDIRECT_URI"),payload:hle})).or(nt.extend({type:rt("APP_SIGN_OUT")})).or(nt.extend({type:rt("APP_IS_CONNECTED"),payload:Z.optional(cU)})).or(nt.extend({type:rt("APP_GET_CHAIN_ID")})).or(nt.extend({type:rt("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(nt.extend({type:rt("APP_INIT_SMART_ACCOUNT")})).or(nt.extend({type:rt("APP_SET_PREFERRED_ACCOUNT"),payload:wle})).or(nt.extend({type:rt("APP_RPC_REQUEST"),payload:aU.or(Sde).or(Ule).or(Mle).or(Dle).or(jle).or(Lle).or(Fle).or($le).or(qle).or(Hle).or(zle).or(Wle).or(Vle).or(Gle).or(Kle).or(Zle).or(Yle).or(Jle).or(Xle).or(Qle).or(ede).or(tde).or(rde).or(nde).or(sde).or(ide).or(ode).or(ade).or(cde).or(ude).or(lde).or(dde).or(fde).or(hde).or(pde).or(aU).or(gde).or(mde).or(yde).or(bde).or(wde).or(vde).or(_de).or(Ede).or(Ade).or(xde).or(Cde).and(Z.object({chainId:Z.string().or(Z.number()).optional(),chainNamespace:Z.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:Z.string().optional()}))})).or(nt.extend({type:rt("APP_UPDATE_EMAIL"),payload:ple})).or(nt.extend({type:rt("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:gle})).or(nt.extend({type:rt("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:mle})).or(nt.extend({type:rt("APP_SYNC_THEME"),payload:yle})).or(nt.extend({type:rt("APP_SYNC_DAPP_DATA"),payload:ble})).or(nt.extend({type:rt("APP_RELOAD")})).or(nt.extend({type:rt("APP_RPC_ABORT")})),frameEvent:nt.extend({type:rt("FRAME_SWITCH_NETWORK_ERROR"),payload:os}).or(nt.extend({type:rt("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Nle})).or(nt.extend({type:rt("FRAME_CONNECT_EMAIL_SUCCESS"),payload:vle})).or(nt.extend({type:rt("FRAME_CONNECT_EMAIL_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:Ele})).or(nt.extend({type:rt("FRAME_GET_FARCASTER_URI_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:_le})).or(nt.extend({type:rt("FRAME_CONNECT_FARCASTER_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_CONNECT_OTP_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_CONNECT_OTP_SUCCESS")})).or(nt.extend({type:rt("FRAME_CONNECT_DEVICE_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_CONNECT_DEVICE_SUCCESS")})).or(nt.extend({type:rt("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:Ale})).or(nt.extend({type:rt("FRAME_CONNECT_SOCIAL_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_GET_USER_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_GET_USER_SUCCESS"),payload:Cle})).or(nt.extend({type:rt("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Sle})).or(nt.extend({type:rt("FRAME_SIGN_OUT_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_SIGN_OUT_SUCCESS")})).or(nt.extend({type:rt("FRAME_IS_CONNECTED_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_IS_CONNECTED_SUCCESS"),payload:Ile})).or(nt.extend({type:rt("FRAME_GET_CHAIN_ID_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Tle})).or(nt.extend({type:rt("FRAME_RPC_REQUEST_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_RPC_REQUEST_SUCCESS"),payload:Ble})).or(nt.extend({type:rt("FRAME_SESSION_UPDATE"),payload:cU})).or(nt.extend({type:rt("FRAME_UPDATE_EMAIL_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_UPDATE_EMAIL_SUCCESS"),payload:xle})).or(nt.extend({type:rt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(nt.extend({type:rt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Ple})).or(nt.extend({type:rt("FRAME_SYNC_THEME_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_SYNC_THEME_SUCCESS")})).or(nt.extend({type:rt("FRAME_SYNC_DAPP_DATA_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(nt.extend({type:rt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:Rle})).or(nt.extend({type:rt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:kle})).or(nt.extend({type:rt("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_READY"),payload:Ole})).or(nt.extend({type:rt("FRAME_RELOAD_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_RELOAD_SUCCESS")}))};function v3(t,e={}){return typeof e?.type=="string"&&e?.type?.includes(t)}function Ide({projectId:t,chainId:e,enableLogger:r,rpcUrl:n=ae.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){const i=new URL(aue);i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",uue),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",n);const o=qs.get("dapp_smart_account_version");return o&&(o==="v6"||o==="v7")&&(console.warn(">> AppKit - Forcing smart account version",o),i.searchParams.set("smartAccountVersion",o)),s&&i.searchParams.set("enableCloudAuthAccount","true"),i.toString()}let Tde=class{constructor({projectId:e,isAppClient:r=!1,chainId:n="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:i=!1,rpcUrl:o=ae.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const a=document.getElementById("w3m-iframe");this.iframe&&!a&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(a,c,u)=>{function l({data:d}){if(!v3(ct.FRAME_EVENT_KEY,d))return;const f=w3.frameEvent.safeParse(d);if(!f.success){console.warn("W3mFrame: invalid frame event",f.error.message);return}f.data?.id===a&&(c(f.data),window.removeEventListener("message",l))}rc.isClient&&(window.addEventListener("message",l),u.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:a=>{rc.isClient&&window.addEventListener("message",({data:c})=>{if(!v3(ct.FRAME_EVENT_KEY,c))return;const u=w3.frameEvent.safeParse(c);u.success?a(u.data):console.warn("W3mFrame: invalid frame event",u.error.message)})},onAppEvent:a=>{rc.isClient&&window.addEventListener("message",({data:c})=>{if(!v3(ct.APP_EVENT_KEY,c))return;const u=w3.appEvent.safeParse(c);u.success||console.warn("W3mFrame: invalid app event",u.error.message),a(c)})},postAppEvent:a=>{if(rc.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(a,"*")}},postFrameEvent:a=>{if(rc.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(a,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),this.rpcUrl=o,r&&(this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),rc.isClient)){const a=document.createElement("iframe");a.id="w3m-iframe",a.src=Ide({projectId:e,chainId:n,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:i}),a.name="w3m-secure-iframe",a.style.position="fixed",a.style.zIndex="999999",a.style.display="none",a.style.border="none",a.style.animationDelay="0s, 50ms",a.style.borderBottomLeftRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",a.style.borderBottomRightRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",this.iframe=a,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent(c=>{c.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,this.frameLoadPromiseResolver?.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(r=>({[r]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${r}&projectId=${this.projectId}`,chainId:r}}));return Object.assign({},...e)}};var Sb={exports:{}},E3,uU;function cJ(){if(uU)return E3;uU=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}E3=e;function e(r,n,s){var i=s&&s.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=i(r);for(var u=1;u<a;u++)c[u]=i(n[u]);return c.join(" ")}if(typeof r!="string")return r;var l=n.length;if(l===0)return r;for(var d="",f=1-o,p=-1,g=r&&r.length||0,h=0;h<g;){if(r.charCodeAt(h)===37&&h+1<g){switch(p=p>-1?p:0,r.charCodeAt(h+1)){case 100:case 102:if(f>=l||n[f]==null)break;p<h&&(d+=r.slice(p,h)),d+=Number(n[f]),p=h+2,h++;break;case 105:if(f>=l||n[f]==null)break;p<h&&(d+=r.slice(p,h)),d+=Math.floor(Number(n[f])),p=h+2,h++;break;case 79:case 111:case 106:if(f>=l||n[f]===void 0)break;p<h&&(d+=r.slice(p,h));var y=typeof n[f];if(y==="string"){d+="'"+n[f]+"'",p=h+2,h++;break}if(y==="function"){d+=n[f].name||"<anonymous>",p=h+2,h++;break}d+=i(n[f]),p=h+2,h++;break;case 115:if(f>=l)break;p<h&&(d+=r.slice(p,h)),d+=String(n[f]),p=h+2,h++;break;case 37:p<h&&(d+=r.slice(p,h)),d+="%",p=h+2,h++,f--;break}++f}++h}return p===-1?r:(p<g&&(d+=r.slice(p)),d)}return E3}var lU;function Nde(){if(lU)return Sb.exports;lU=1;const t=cJ();Sb.exports=l;const e=m().console||{},r={mapHttpRequest:D,mapHttpResponse:D,wrapRequestSerializer:L,wrapResponseSerializer:L,wrapErrorSerializer:L,req:D,res:D,err:T,errWithCause:T};function n(b,w){return b==="silent"?1/0:w.levels.values[b]}const s=Symbol("pino.logFuncs"),i=Symbol("pino.hierarchy"),o={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function a(b,w){const x={logger:w,parent:b[i]};w[i]=x}function c(b,w,x){const M={};w.forEach(k=>{M[k]=x[k]?x[k]:e[k]||e[o[k]||"log"]||I}),b[s]=M}function u(b,w){return Array.isArray(b)?b.filter(function(M){return M!=="!stdSerializers.err"}):b===!0?Object.keys(w):!1}function l(b){b=b||{},b.browser=b.browser||{};const w=b.browser.transmit;if(w&&typeof w.send!="function")throw Error("pino: transmit option must have a send function");const x=b.browser.write||e;b.browser.write&&(b.browser.asObject=!0);const M=b.serializers||{},k=u(b.browser.serialize,M);let j=b.browser.serialize;Array.isArray(b.browser.serialize)&&b.browser.serialize.indexOf("!stdSerializers.err")>-1&&(j=!1);const N=Object.keys(b.customLevels||{}),v=["error","fatal","warn","info","debug","trace"].concat(N);typeof x=="function"&&v.forEach(function(Q){x[Q]=x}),(b.enabled===!1||b.browser.disabled)&&(b.level="silent");const R=b.level||"info",$=Object.create(x);$.log||($.log=I),c($,v,x),a({},$),Object.defineProperty($,"levelVal",{get:H}),Object.defineProperty($,"level",{get:W,set:G});const O={transmit:w,serialize:k,asObject:b.browser.asObject,asObjectBindingsOnly:b.browser.asObjectBindingsOnly,formatters:b.browser.formatters,levels:v,timestamp:P(b),messageKey:b.messageKey||"msg",onChild:b.onChild||I};$.levels=d(b),$.level=R,$.isLevelEnabled=function(Q){return this.levels.values[Q]?this.levels.values[Q]>=this.levels.values[this.level]:!1},$.setMaxListeners=$.getMaxListeners=$.emit=$.addListener=$.on=$.prependListener=$.once=$.prependOnceListener=$.removeListener=$.removeAllListeners=$.listeners=$.listenerCount=$.eventNames=$.write=$.flush=I,$.serializers=M,$._serialize=k,$._stdErrSerialize=j,$.child=function(...Q){return K.call(this,O,...Q)},w&&($._logEvent=_());function H(){return n(this.level,this)}function W(){return this._level}function G(Q){if(Q!=="silent"&&!this.levels.values[Q])throw Error("unknown level "+Q);this._level=Q,g(this,O,$,"error"),g(this,O,$,"fatal"),g(this,O,$,"warn"),g(this,O,$,"info"),g(this,O,$,"debug"),g(this,O,$,"trace"),N.forEach(re=>{g(this,O,$,re)})}function K(Q,re,de){if(!re)throw new Error("missing bindings for child Pino");de=de||{},k&&re.serializers&&(de.serializers=re.serializers);const le=de.serializers;if(k&&le){var se=Object.assign({},M,le),be=b.browser.serialize===!0?Object.keys(se):k;delete re.serializers,S([re],be,se,this._stdErrSerialize)}function We(Be){this._childLevel=(Be._childLevel|0)+1,this.bindings=re,se&&(this.serializers=se,this._serialize=be),w&&(this._logEvent=_([].concat(Be._logEvent.bindings,re)))}We.prototype=this;const Ne=new We(this);return a(this,Ne),Ne.child=function(...Be){return K.call(this,Q,...Be)},Ne.level=de.level||this.level,Q.onChild(Ne),Ne}return $}function d(b){const w=b.customLevels||{},x=Object.assign({},l.levels.values,w),M=Object.assign({},l.levels.labels,f(w));return{values:x,labels:M}}function f(b){const w={};return Object.keys(b).forEach(function(x){w[b[x]]=x}),w}l.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},l.stdSerializers=r,l.stdTimeFunctions=Object.assign({},{nullTime:U,epochTime:F,unixTime:B,isoTime:A});function p(b){const w=[];b.bindings&&w.push(b.bindings);let x=b[i];for(;x.parent;)x=x.parent,x.logger.bindings&&w.push(x.logger.bindings);return w.reverse()}function g(b,w,x,M){if(Object.defineProperty(b,M,{value:n(b.level,x)>n(M,x)?I:x[s][M],writable:!0,enumerable:!0,configurable:!0}),b[M]===I){if(!w.transmit)return;const j=w.transmit.level||b.level,N=n(j,x);if(n(M,x)<N)return}b[M]=y(b,w,x,M);const k=p(b);k.length!==0&&(b[M]=h(k,b[M]))}function h(b,w){return function(){return w.apply(this,[...b,...arguments])}}function y(b,w,x,M){return(function(k){return function(){const N=w.timestamp(),v=new Array(arguments.length),R=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var $=0;$<v.length;$++)v[$]=arguments[$];var O=!1;if(w.serialize&&(S(v,this._serialize,this.serializers,this._stdErrSerialize),O=!0),w.asObject||w.formatters?k.call(R,...E(this,M,v,N,w)):k.apply(R,v),w.transmit){const H=w.transmit.level||b._level,W=n(H,x),G=n(M,x);if(G<W)return;C(this,{ts:N,methodLevel:M,methodValue:G,transmitValue:x.levels.values[w.transmit.level||b._level],send:w.transmit.send,val:n(b._level,x)},v,O)}}})(b[s][M])}function E(b,w,x,M,k){const{level:j,log:N=H=>H}=k.formatters||{},v=x.slice();let R=v[0];const $={};let O=(b._childLevel|0)+1;if(O<1&&(O=1),M&&($.time=M),j){const H=j(w,b.levels.values[w]);Object.assign($,H)}else $.level=b.levels.values[w];if(k.asObjectBindingsOnly){if(R!==null&&typeof R=="object")for(;O--&&typeof v[0]=="object";)Object.assign($,v.shift());return[N($),...v]}else{if(R!==null&&typeof R=="object"){for(;O--&&typeof v[0]=="object";)Object.assign($,v.shift());R=v.length?t(v.shift(),v):void 0}else typeof R=="string"&&(R=t(v.shift(),v));return R!==void 0&&($[k.messageKey]=R),[N($)]}}function S(b,w,x,M){for(const k in b)if(M&&b[k]instanceof Error)b[k]=l.stdSerializers.err(b[k]);else if(typeof b[k]=="object"&&!Array.isArray(b[k])&&w)for(const j in b[k])w.indexOf(j)>-1&&j in x&&(b[k][j]=x[j](b[k][j]))}function C(b,w,x,M=!1){const k=w.send,j=w.ts,N=w.methodLevel,v=w.methodValue,R=w.val,$=b._logEvent.bindings;M||S(x,b._serialize||Object.keys(b.serializers),b.serializers,b._stdErrSerialize===void 0?!0:b._stdErrSerialize),b._logEvent.ts=j,b._logEvent.messages=x.filter(function(O){return $.indexOf(O)===-1}),b._logEvent.level.label=N,b._logEvent.level.value=v,k(N,b._logEvent,R),b._logEvent=_($)}function _(b){return{ts:0,messages:[],bindings:b||[],level:{label:"",value:0}}}function T(b){const w={type:b.constructor.name,msg:b.message,stack:b.stack};for(const x in b)w[x]===void 0&&(w[x]=b[x]);return w}function P(b){return typeof b.timestamp=="function"?b.timestamp:b.timestamp===!1?U:F}function D(){return{}}function L(b){return b}function I(){}function U(){return!1}function F(){return Date.now()}function B(){return Math.round(Date.now()/1e3)}function A(){return new Date(Date.now()).toISOString()}function m(){function b(w){return typeof w<"u"&&w}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return b(self)||b(window)||b(this)||{}}}return Sb.exports.default=l,Sb.exports.pino=l,Sb.exports}var Sm=Nde();const uJ=xa(Sm),Pde=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),Rde=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function rf(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Rde(t)}catch{return t}}function Hc(t){return typeof t=="string"?t:Pde(t)||""}const Ode={level:"info"},NT="custom_context",R4=1e3*1024;var kde=Object.defineProperty,Bde=(t,e,r)=>e in t?kde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ch=(t,e,r)=>Bde(t,typeof e!="symbol"?e+"":e,r);let Ude=class{constructor(e){ch(this,"nodeValue"),ch(this,"sizeInBytes"),ch(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},dU=class{constructor(e){ch(this,"lengthInNodes"),ch(this,"sizeInBytes"),ch(this,"head"),ch(this,"tail"),ch(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new Ude(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}};var Mde=Object.defineProperty,Dde=(t,e,r)=>e in t?Mde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,H_=(t,e,r)=>Dde(t,typeof e!="symbol"?e+"":e,r);let lJ=class{constructor(e,r=R4){H_(this,"logs"),H_(this,"level"),H_(this,"levelValue"),H_(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=Sm.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new dU(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===Sm.levels.values.error?console.error(e):r===Sm.levels.values.warn?console.warn(e):r===Sm.levels.values.debug?console.debug(e):r===Sm.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Hc({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new dU(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(Hc({extraMetadata:e})),new Blob(r,{type:"application/json"})}};var jde=Object.defineProperty,Lde=(t,e,r)=>e in t?jde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fde=(t,e,r)=>Lde(t,e+"",r);let $de=class{constructor(e,r=R4){Fde(this,"baseChunkLogger"),this.baseChunkLogger=new lJ(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}};var qde=Object.defineProperty,Hde=(t,e,r)=>e in t?qde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zde=(t,e,r)=>Hde(t,e+"",r);let Wde=class{constructor(e,r=R4){zde(this,"baseChunkLogger"),this.baseChunkLogger=new lJ(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Vde=Object.defineProperty,Gde=Object.defineProperties,Kde=Object.getOwnPropertyDescriptors,fU=Object.getOwnPropertySymbols,Zde=Object.prototype.hasOwnProperty,Yde=Object.prototype.propertyIsEnumerable,hU=(t,e,r)=>e in t?Vde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,i6=(t,e)=>{for(var r in e||(e={}))Zde.call(e,r)&&hU(t,r,e[r]);if(fU)for(var r of fU(e))Yde.call(e,r)&&hU(t,r,e[r]);return t},o6=(t,e)=>Gde(t,Kde(e));function O4(t){return o6(i6({},t),{level:t?.level||Ode.level})}function Jde(t,e,r=NT){return t[r]=e,t}function Ca(t,e=NT){return t[e]||""}function Xde(t,e,r=NT){const n=Ca(t,r);return n.trim()?`${n}/${e}`:e}function Sa(t,e,r=NT){const n=Xde(t,e,r),s=t.child({context:n});return Jde(s,n,r)}function Qde(t){var e,r;const n=new $de((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:uJ(o6(i6({},t.opts),{level:"trace",browser:o6(i6({},(r=t.opts)==null?void 0:r.browser),{write:s=>n.write(s)})})),chunkLoggerController:n}}function efe(t){var e;const r=new Wde((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:uJ(o6(i6({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function PT(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Qde(t):efe(t)}let tfe=class{constructor(e){const r=O4({level:cue}),{logger:n,chunkLoggerController:s}=PT({opts:r});this.logger=Sa(n,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},rfe=class{constructor({projectId:e,chainId:r,enableLogger:n=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:c,metadata:u,sdkVersion:l,sdkType:d}){this.openRpcRequests=new Map,this.isInitialized=!1,n&&(this.w3mLogger=new tfe(e)),this.abortController=i,this.getActiveCaipNetwork=o,this.getCaipNetworks=a;const f=this.getRpcUrl(r);this.projectId=e,this.sdkVersion=l,this.sdkType=d,this.metadata=u,this.w3mFrame=new Tde({projectId:e,isAppClient:!0,chainId:r,enableLogger:n,rpcUrl:f,enableCloudAuthAccount:c}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(r=>{r.type===ct.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,await this.syncDappData({metadata:this.metadata,projectId:this.projectId,sdkVersion:this.sdkVersion,sdkType:this.sdkType}),await this.getSmartAccountEnabledNetworks(),this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!qs.get(ct.EMAIL_LOGIN_USED_KEY)}getEmail(){return qs.get(ct.EMAIL)}getUsername(){return qs.get(ct.SOCIAL_USERNAME)}async reload(){try{await this.appEvent({type:ct.APP_RELOAD})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error reloading iframe"),e}}async connectEmail(e){try{rc.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:ct.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){try{return this.appEvent({type:ct.APP_CONNECT_DEVICE})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting device"),e}}async connectOtp(e){try{return this.appEvent({type:ct.APP_CONNECT_OTP,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};const e=await this.appEvent({type:ct.APP_IS_CONNECTED});return e?.isConnected||this.deleteAuthLoginCache(),e}catch(e){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:e},"Error checking connection"),e}}async getChainId(){try{const e=await this.appEvent({type:ct.APP_GET_CHAIN_ID});return this.setLastUsedChainId(e.chainId),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting chain id"),e}}async getSocialRedirectUri(e){try{return await this.init(),this.appEvent({type:ct.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){try{const r=await this.appEvent({type:ct.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){try{return this.appEvent({type:ct.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){try{const r=await this.appEvent({type:ct.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){try{return this.appEvent({type:ct.APP_SYNC_THEME,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){try{return this.appEvent({type:ct.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){try{const e=await this.appEvent({type:ct.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(e.smartAccountEnabledNetworks),e}catch(e){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:e},"Error getting smart account enabled networks"),e}}async setPreferredAccount(e){try{return this.appEvent({type:ct.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){if(e?.socialUri)try{await this.init();const r=this.getRpcUrl(e.chainId),n=await this.appEvent({type:ct.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:r}});return n.userName&&this.setSocialLoginSuccess(n.userName),this.setLoginSuccess(n.email),this.setLastUsedChainId(n.chainId),this.user=n,n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting social"),r}else try{const r=e?.chainId||this.getLastUsedChainId()||1,n=await this.getUser({chainId:r,preferredAccountType:e?.preferredAccountType,siwxMessage:e?.siwxMessage,rpcUrl:this.getRpcUrl(r)});return this.setLoginSuccess(n.email),this.setLastUsedChainId(n.chainId),this.user=n,n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting"),r}}async getUser(e){try{await this.init();const r=e?.chainId||this.getLastUsedChainId()||1,n=await this.appEvent({type:ct.APP_GET_USER,payload:{...e,chainId:r,rpcUrl:this.getRpcUrl(r)}});return this.user=n,n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:r,preferredAccountType:n}){try{await this.init();const s=this.getRpcUrl(r),i=await this.appEvent({type:ct.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:r,rpcUrl:s,preferredAccountType:n}});return i.userName&&this.setSocialLoginSuccess(i.userName),i}catch(s){throw this.w3mLogger?.logger.error({error:s},"Error connecting social"),s}}async getFarcasterUri(){try{return await this.init(),await this.appEvent({type:ct.APP_GET_FARCASTER_URI})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting farcaster uri"),e}}async connectFarcaster(){try{const e=await this.appEvent({type:ct.APP_CONNECT_FARCASTER});return e.userName&&this.setSocialLoginSuccess(e.userName),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting farcaster"),e}}async switchNetwork({chainId:e}){try{const r=this.getRpcUrl(e),n=await this.appEvent({type:ct.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(n.chainId),n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error switching network"),r}}async disconnect(){try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const n=setTimeout(()=>{r()},3e3);await this.appEvent({type:ct.APP_SIGN_OUT}),clearTimeout(n),r()})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error disconnecting"),e}}async request(e){const r=e;try{if(Ss.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const n=e.chainNamespace||"eip155",s=this.getActiveCaipNetwork(n)?.id;r.chainNamespace=n,r.chainId=s,r.rpcUrl=this.getRpcUrl(s),this.rpcRequestHandler?.(e);const i=await this.appEvent({type:ct.APP_RPC_REQUEST,payload:r});return this.rpcSuccessHandler?.(i,r),i}catch(n){throw this.rpcErrorHandler?.(n,r),this.w3mLogger?.logger.error({error:n},"Error requesting"),n}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ct.FRAME_IS_CONNECTED_SUCCESS&&r.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ct.FRAME_IS_CONNECTED_ERROR&&e(),r.type===ct.FRAME_IS_CONNECTED_SUCCESS&&!r.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ct.FRAME_GET_USER_SUCCESS&&e(r.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ct.FRAME_CONNECT_SOCIAL_SUCCESS&&e(r.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ct.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(r.payload):r.type===ct.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ss.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){try{await Promise.all(Array.from(this.openRpcRequests.values()).map(async({abortController:e,method:r})=>{Ss.SAFE_RPC_METHODS.includes(r)||e.abort(),await this.appEvent({type:ct.APP_RPC_ABORT})})),this.openRpcRequests.clear()}catch(e){this.w3mLogger?.logger.error({error:e},"Error aborting RPC request")}}async appEvent(e){let r,n;function s(c){return c.replace("@w3m-app/","")}const i=[ct.APP_SYNC_DAPP_DATA,ct.APP_SYNC_THEME,ct.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(n=setTimeout(()=>{this.onTimeout?.("iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(n),[ct.APP_CONNECT_EMAIL,ct.APP_CONNECT_DEVICE,ct.APP_CONNECT_OTP,ct.APP_CONNECT_SOCIAL,ct.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(r=setTimeout(()=>{this.onTimeout?.("iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,u)=>{const l=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:e,id:l},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:l});const d=new AbortController;if(o==="RPC_REQUEST"){const p=e;this.openRpcRequests.set(l,{...p.payload,abortController:d})}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?u(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&u(new Error("Something went wrong"))});const f=(p,g)=>{p.id===l&&(g?.logger.info?.({framEvent:p,id:l},"Received frame response"),this.openRpcRequests.delete(p.id),p.type===`@w3m-frame/${o}_SUCCESS`?(r&&clearTimeout(r),n&&clearTimeout(n),"payload"in p&&c(p.payload),c(void 0)):p.type===`@w3m-frame/${o}_ERROR`&&(r&&clearTimeout(r),n&&clearTimeout(n),"payload"in p&&u(new Error(p.payload?.message||"An error occurred")),u(new Error("An error occurred"))))};this.w3mFrame.events.registerFrameEventHandler(l,p=>f(p,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){qs.set(ct.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){qs.set(ct.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&qs.set(ct.EMAIL,e),qs.set(ct.EMAIL_LOGIN_USED_KEY,"true"),qs.delete(ct.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){qs.delete(ct.EMAIL_LOGIN_USED_KEY),qs.delete(ct.EMAIL),qs.delete(ct.LAST_USED_CHAIN_KEY),qs.delete(ct.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&qs.set(ct.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=qs.get(ct.LAST_USED_CHAIN_KEY)??void 0,r=Number(e);return isNaN(r)?e:r}persistSmartAccountEnabledNetworks(e){qs.set(ct.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){let r=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?r=xs.parseCaipNetworkId(e)?.chainNamespace:Number.isInteger(Number(e))?r="eip155":r="solana");const n=this.getCaipNetworks(r);return(e?n.find(i=>String(i.id)===String(e)||i.caipNetworkId===e):n[0])?.rpcUrls.default.http?.[0]}};function dJ(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function pU(t){return dJ(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const fJ="2.40.2";let _3={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${fJ}`},Fn=class c8 extends Error{constructor(e,r={}){const n=r.cause instanceof c8?r.cause.details:r.cause?.message?r.cause.message:r.details,s=r.cause instanceof c8&&r.cause.docsPath||r.docsPath,i=_3.getDocsUrl?.({...r,docsPath:s}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],..._3.version?[`Version: ${_3.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=fJ}walk(e){return hJ(this,e)}};function hJ(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?hJ(t.cause,e):e?null:t}let kQe=class extends Fn{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}},pJ=class extends Fn{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}};class MQe extends Fn{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${r} ${n} long, but is ${e} ${n} long.`,{name:"InvalidBytesLengthError"})}}function zy(t,{dir:e,size:r=32}={}){return typeof t=="string"?nfe(t,{dir:e,size:r}):sfe(t,{dir:e,size:r})}function nfe(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new pJ({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function sfe(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new pJ({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let s=0;s<r;s++){const i=e==="right";n[i?s:r-s-1]=t[i?s:t.length-s-1]}return n}let ife=class extends Fn{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}};class jQe extends Fn{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class ofe extends Fn{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let afe=class extends Fn{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function hI(t,{dir:e="left"}={}){let r=typeof t=="string"?t.replace("0x",""):t,n=0;for(let s=0;s<r.length-1&&r[e==="left"?s:r.length-s-1].toString()==="0";s++)n++;return r=e==="left"?r.slice(n):r.slice(0,r.length-n),typeof t=="string"?(r.length===1&&e==="right"&&(r=`${r}0`),`0x${r.length%2===1?`0${r}`:r}`):r}function Lh(t,{size:e}){if(pU(t)>e)throw new afe({givenSize:pU(t),maxSize:e})}function cfe(t,e={}){const{signed:r}=e;e.size&&Lh(t,{size:e.size});const n=BigInt(t);if(!r)return n;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return n<=i?n:n-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function FQe(t,e={}){let r=t;if(e.size&&(Lh(r,{size:e.size}),r=hI(r)),hI(r)==="0x00")return!1;if(hI(r)==="0x01")return!0;throw new ofe(r)}function $Qe(t,e={}){return Number(cfe(t,e))}function qQe(t,e={}){let r=k4(t);return e.size&&(Lh(r,{size:e.size}),r=hI(r,{dir:"right"})),new TextDecoder().decode(r)}const ufe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function a6(t,e={}){return typeof t=="number"||typeof t=="bigint"?mJ(t,e):typeof t=="string"?yJ(t,e):typeof t=="boolean"?lfe(t,e):gJ(t,e)}function lfe(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(Lh(r,{size:e.size}),zy(r,{size:e.size})):r}function gJ(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=ufe[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(Lh(n,{size:e.size}),zy(n,{dir:"right",size:e.size})):n}function mJ(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new ife({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?zy(a,{size:n}):a}const dfe=new TextEncoder;function yJ(t,e={}){const r=dfe.encode(t);return gJ(r,e)}const ffe=new TextEncoder;function HQe(t,e={}){return typeof t=="number"||typeof t=="bigint"?pfe(t,e):typeof t=="boolean"?hfe(t,e):dJ(t)?k4(t,e):gfe(t,e)}function hfe(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(Lh(r,{size:e.size}),zy(r,{size:e.size})):r}const Zl={zero:48,nine:57,A:65,F:70,a:97,f:102};function gU(t){if(t>=Zl.zero&&t<=Zl.nine)return t-Zl.zero;if(t>=Zl.A&&t<=Zl.F)return t-(Zl.A-10);if(t>=Zl.a&&t<=Zl.f)return t-(Zl.a-10)}function k4(t,e={}){let r=t;e.size&&(Lh(r,{size:e.size}),r=zy(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const s=n.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=gU(n.charCodeAt(a++)),u=gU(n.charCodeAt(a++));if(c===void 0||u===void 0)throw new Fn(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);i[o]=c*16+u}return i}function pfe(t,e){const r=mJ(t,e);return k4(r)}function gfe(t,e={}){const r=ffe.encode(t);return typeof e.size=="number"?(Lh(r,{size:e.size}),zy(r,{dir:"right",size:e.size})):r}let mfe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const y0=(t,e,r)=>JSON.stringify(t,(n,s)=>typeof s=="bigint"?s.toString():s,r),WQe={gwei:9,wei:18},yfe={ether:-9,wei:9};function RT(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[s,i]=[r.slice(0,r.length-e),r.slice(r.length-e)];return i=i.replace(/(0+)$/,""),`${n?"-":""}${s||"0"}${i?`.${i}`:""}`}function c6(t,e="wei"){return RT(t,yfe[e])}const VQe=t=>t,B4=t=>t;class T1 extends Fn{constructor({body:e,cause:r,details:n,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[i&&`Status: ${i}`,`URL: ${B4(o)}`,e&&`Request body: ${y0(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class bJ extends Fn{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${B4(n)}`,`Request body: ${y0(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data,this.url=n}}class mU extends Fn{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${B4(r)}`,`Request body: ${y0(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=r}}const bfe=-1;class Ia extends Fn{constructor(e,{code:r,docsPath:n,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:s||e?.metaMessages,name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof bJ?e.code:r??bfe}}class uc extends Ia{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class wv extends Ia{constructor(e){super(e,{code:wv.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(wv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class vv extends Ia{constructor(e){super(e,{code:vv.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(vv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Ev extends Ia{constructor(e,{method:r}={}){super(e,{code:Ev.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(Ev,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class _v extends Ia{constructor(e){super(e,{code:_v.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(_v,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class my extends Ia{constructor(e){super(e,{code:my.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(my,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Av extends Ia{constructor(e){super(e,{code:Av.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Av,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class xv extends Ia{constructor(e){super(e,{code:xv.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(xv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Cv extends Ia{constructor(e){super(e,{code:Cv.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Cv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class yy extends Ia{constructor(e){super(e,{code:yy.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(yy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class t0 extends Ia{constructor(e,{method:r}={}){super(e,{code:t0.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(t0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class by extends Ia{constructor(e){super(e,{code:by.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(by,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Sv extends Ia{constructor(e){super(e,{code:Sv.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Sv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class b0 extends uc{constructor(e){super(e,{code:b0.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(b0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Iv extends uc{constructor(e){super(e,{code:Iv.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Iv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Tv extends uc{constructor(e,{method:r}={}){super(e,{code:Tv.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(Tv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Nv extends uc{constructor(e){super(e,{code:Nv.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Nv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Pv extends uc{constructor(e){super(e,{code:Pv.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Pv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Rv extends uc{constructor(e){super(e,{code:Rv.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Rv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Ov extends uc{constructor(e){super(e,{code:Ov.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Ov,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class kv extends uc{constructor(e){super(e,{code:kv.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(kv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Bv extends uc{constructor(e){super(e,{code:Bv.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Bv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Uv extends uc{constructor(e){super(e,{code:Uv.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Uv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Mv extends uc{constructor(e){super(e,{code:Mv.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Mv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Dv extends uc{constructor(e){super(e,{code:Dv.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Dv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class jv extends uc{constructor(e){super(e,{code:jv.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(jv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class wfe extends Ia{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class U4 extends Fn{constructor({cause:e,message:r}={}){const n=r?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(U4,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(U4,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class vfe extends Fn{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${c6(r)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(vfe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Efe extends Fn{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${c6(r)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(Efe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class _fe extends Fn{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(_fe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Afe extends Fn{constructor({cause:e,nonce:r}={}){super([`Nonce provided for the transaction ${r?`(${r}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(Afe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class xfe extends Fn{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(xfe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Cfe extends Fn{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(Cfe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Sfe extends Fn{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Sfe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Ife extends Fn{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Ife,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Tfe extends Fn{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Tfe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Nfe extends Fn{constructor({cause:e,maxPriorityFeePerGas:r,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${r?` = ${c6(r)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${c6(n)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Nfe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class GQe extends Fn{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}const KQe=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],ZQe=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],wJ=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],YQe=[...wJ,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],JQe=[...wJ,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],XQe=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],QQe=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],eet=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],tet=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],z_=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}];function Pfe(){let t=()=>{},e=()=>{};return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}}const A3=new Map;function Rfe({fn:t,id:e,shouldSplitBatch:r,wait:n=0,sort:s}){const i=async()=>{const l=c();o();const d=l.map(({args:f})=>f);d.length!==0&&t(d).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let p=0;p<l.length;p++){const{resolve:g}=l[p];g?.([f[p],f])}}).catch(f=>{for(let p=0;p<l.length;p++){const{reject:g}=l[p];g?.(f)}})},o=()=>A3.delete(e),a=()=>c().map(({args:l})=>l),c=()=>A3.get(e)||[],u=l=>A3.set(e,[...c(),l]);return{flush:o,async schedule(l){const{promise:d,resolve:f,reject:p}=Pfe();return r?.([...a(),l])&&i(),c().length>0?(u({args:l,resolve:f,reject:p}),d):(u({args:l,resolve:f,reject:p}),setTimeout(i,n),d)}}}async function vJ(t){return new Promise(e=>setTimeout(e,t))}function Ofe(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof e=="function"?e({count:a,error:u}):e;l&&await vJ(l),o({count:a+1})};try{const u=await t();s(u)}catch(u){if(a<r&&await n({count:a,error:u}))return c({error:u});i(u)}};o()})}const u8=256;let W_=u8,V_;function kfe(t=11){if(!V_||W_+t>u8*2){V_="",W_=0;for(let e=0;e<u8;e++)V_+=(256+Math.random()*256|0).toString(16).substring(1)}return V_.substring(W_,W_+++t)}const G_=new mfe(8192);function Bfe(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(G_.get(r))return G_.get(r);const n=t().finally(()=>G_.delete(r));return G_.set(r,n),n}function Ufe(t,e={}){return async(r,n={})=>{const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...n},{method:u}=r;if(i?.exclude?.includes(u))throw new t0(new Error("method not supported"),{method:u});if(i?.include&&!i.include.includes(u))throw new t0(new Error("method not supported"),{method:u});const l=s?yJ(`${c}.${y0(r)}`):void 0;return Bfe(()=>Ofe(async()=>{try{return await t(r)}catch(d){const f=d;switch(f.code){case wv.code:throw new wv(f);case vv.code:throw new vv(f);case Ev.code:throw new Ev(f,{method:r.method});case _v.code:throw new _v(f);case my.code:throw new my(f);case Av.code:throw new Av(f);case xv.code:throw new xv(f);case Cv.code:throw new Cv(f);case yy.code:throw new yy(f);case t0.code:throw new t0(f,{method:r.method});case by.code:throw new by(f);case Sv.code:throw new Sv(f);case b0.code:throw new b0(f);case Iv.code:throw new Iv(f);case Tv.code:throw new Tv(f);case Nv.code:throw new Nv(f);case Pv.code:throw new Pv(f);case Rv.code:throw new Rv(f);case Ov.code:throw new Ov(f);case kv.code:throw new kv(f);case Bv.code:throw new Bv(f);case Uv.code:throw new Uv(f);case Mv.code:throw new Mv(f);case Dv.code:throw new Dv(f);case jv.code:throw new jv(f);case 5e3:throw new b0(f);default:throw d instanceof Fn?d:new wfe(f)}}},{delay:({count:d,error:f})=>{if(f&&f instanceof T1){const p=f?.headers?.get("Retry-After");if(p?.match(/\d/))return Number.parseInt(p,10)*1e3}return~~(1<<d)*o},retryCount:a,shouldRetry:({error:d})=>Mfe(d)}),{enabled:s,id:l})}}function Mfe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===by.code||t.code===my.code:t instanceof T1&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function OE(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function Dfe(t,{errorInstance:e=new Error("timed out"),timeout:r,signal:n}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;r>0&&(o=setTimeout(()=>{n&&a.abort()},r)),s(await t({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function jfe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const yU=jfe();function Lfe(t,e={}){return{async request(r){const{body:n,fetchFn:s=e.fetchFn??fetch,onRequest:i=e.onRequest,onResponse:o=e.onResponse,timeout:a=e.timeout??1e4}=r,c={...e.fetchOptions??{},...r.fetchOptions??{}},{headers:u,method:l,signal:d}=c;try{const f=await Dfe(async({signal:g})=>{const h={...c,body:Array.isArray(n)?y0(n.map(C=>({jsonrpc:"2.0",id:C.id??yU.take(),...C}))):y0({jsonrpc:"2.0",id:n.id??yU.take(),...n}),headers:{"Content-Type":"application/json",...u},method:l||"POST",signal:d||(a>0?g:null)},y=new Request(t,h),E=await i?.(y,h)??{...h,url:t};return await s(E.url??t,E)},{errorInstance:new mU({body:n,url:t}),timeout:a,signal:!0});o&&await o(f);let p;if(f.headers.get("Content-Type")?.startsWith("application/json"))p=await f.json();else{p=await f.text();try{p=JSON.parse(p||"{}")}catch(g){if(f.ok)throw g;p={error:p}}}if(!f.ok)throw new T1({body:n,details:y0(p.error)||f.statusText,headers:f.headers,status:f.status,url:t});return p}catch(f){throw f instanceof T1||f instanceof mU?f:new T1({body:n,cause:f,url:t})}}}}function EJ({key:t,methods:e,name:r,request:n,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const u=kfe();return{config:{key:t,methods:e,name:r,request:n,retryCount:s,retryDelay:i,timeout:o,type:a},request:Ufe(n,{methods:e,retryCount:s,retryDelay:i,uid:u}),value:c}}function u6(t,e={}){const{key:r="fallback",name:n="Fallback",rank:s=!1,shouldThrow:i=Ffe,retryCount:o,retryDelay:a}=e;return(({chain:c,pollingInterval:u=4e3,timeout:l,...d})=>{let f=t,p=()=>{};const g=EJ({key:r,name:n,async request({method:h,params:y}){let E;const S=async(C=0)=>{const _=f[C]({...d,chain:c,retryCount:0,timeout:l});try{const T=await _.request({method:h,params:y});return p({method:h,params:y,response:T,transport:_,status:"success"}),T}catch(T){if(p({error:T,method:h,params:y,transport:_,status:"error"}),i(T)||C===f.length-1||(E??=f.slice(C+1).some(P=>{const{include:D,exclude:L}=P({chain:c}).config.methods||{};return D?D.includes(h):L?!L.includes(h):!0}),!E))throw T;return S(C+1)}};return S()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:h=>p=h,transports:f.map(h=>h({chain:c,retryCount:0}))});if(s){const h=typeof s=="object"?s:{};$fe({chain:c,interval:h.interval??u,onTransports:y=>f=y,ping:h.ping,sampleCount:h.sampleCount,timeout:h.timeout,transports:f,weights:h.weights})}return g})}function Ffe(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===yy.code||t.code===b0.code||U4.nodeMessage.test(t.message)||t.code===5e3))}function $fe({chain:t,interval:e=4e3,onTransports:r,ping:n,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:u=.3}=a,l=[],d=async()=>{const f=await Promise.all(o.map(async h=>{const y=h({chain:t,retryCount:0,timeout:i}),E=Date.now();let S,C;try{await(n?n({transport:y}):y.request({method:"net_listening"})),C=1}catch{C=0}finally{S=Date.now()}return{latency:S-E,success:C}}));l.push(f),l.length>s&&l.shift();const p=Math.max(...l.map(h=>Math.max(...h.map(({latency:y})=>y)))),g=o.map((h,y)=>{const E=l.map(P=>P[y].latency),C=1-E.reduce((P,D)=>P+D,0)/E.length/p,_=l.map(P=>P[y].success),T=_.reduce((P,D)=>P+D,0)/_.length;return T===0?[0,y]:[u*C+c*T,y]}).sort((h,y)=>y[0]-h[0]);r(g.map(([,h])=>o[h])),await vJ(e),d()};d()}class qfe extends Fn{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function gh(t,e={}){const{batch:r,fetchFn:n,fetchOptions:s,key:i="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:l,raw:d}=e;return({chain:f,retryCount:p,timeout:g})=>{const{batchSize:h=1e3,wait:y=0}=typeof r=="object"?r:{},E=e.retryCount??p,S=g??e.timeout??1e4,C=t||f?.rpcUrls.default.http[0];if(!C)throw new qfe;const _=Lfe(C,{fetchFn:n,fetchOptions:s,onRequest:c,onResponse:u,timeout:S});return EJ({key:i,methods:o,name:a,async request({method:T,params:P}){const D={method:T,params:P},{schedule:L}=Rfe({id:C,wait:y,shouldSplitBatch(B){return B.length>h},fn:B=>_.request({body:B}),sort:(B,A)=>B.id-A.id}),I=async B=>r?L(B):[await _.request({body:B})],[{error:U,result:F}]=await I(D);if(d)return{error:U,result:F};if(U)throw new bJ({body:D,error:U,url:C});return F},retryCount:E,retryDelay:l,timeout:S,type:"http"},{fetchOptions:s,url:C})}}async function Ib(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let Wy=class{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...s}){const i=this.createUrl(s);return(await Ib(i,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const s=this.createUrl(n);return(await Ib(s,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await Ib(i,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await Ib(i,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await Ib(i,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([s,i])=>{i&&n.searchParams.append(s,i)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}sendBeacon({body:e,...r}){const n=this.createUrl(r);return navigator.sendBeacon(n.toString(),e?JSON.stringify(e):void 0)}};const l8={getFeatureValue(t,e){const r=e?.[t];return r===void 0?wr.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;let e=t;return ke.isTelegram()&&(ke.isIos()&&(e=e.filter(r=>r!=="google")),ke.isMac()&&(e=e.filter(r=>r!=="x")),ke.isAndroid()&&(e=e.filter(r=>!["facebook","x"].includes(r)))),ke.isMobile()&&(e=e.filter(r=>r!=="facebook")),e},isSocialsEnabled(){return Array.isArray(we.state.features?.socials)&&we.state.features?.socials.length>0||Array.isArray(we.state.remoteFeatures?.socials)&&we.state.remoteFeatures?.socials.length>0},isEmailEnabled(){return!!(we.state.features?.email||we.state.remoteFeatures?.email)}},yt=Dn({features:wr.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:wr.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{},enableMobileFullScreen:!1,coinbasePreference:"all"}),we={state:yt,subscribeKey(t,e){return li(yt,t,e)},setOptions(t){Object.assign(yt,t)},setRemoteFeatures(t){if(!t)return;const e={...yt.remoteFeatures,...t};yt.remoteFeatures=e,yt.remoteFeatures?.socials&&(yt.remoteFeatures.socials=l8.filterSocialsByPlatform(yt.remoteFeatures.socials)),yt.features?.pay&&(yt.remoteFeatures.email=!1,yt.remoteFeatures.socials=!1)},setFeatures(t){if(!t)return;yt.features||(yt.features=wr.DEFAULT_FEATURES);const e={...yt.features,...t};yt.features=e,yt.features?.pay&&yt.remoteFeatures&&(yt.remoteFeatures.email=!1,yt.remoteFeatures.socials=!1)},setProjectId(t){yt.projectId=t},setCustomRpcUrls(t){yt.customRpcUrls=t},setAllWallets(t){yt.allWallets=t},setIncludeWalletIds(t){yt.includeWalletIds=t},setExcludeWalletIds(t){yt.excludeWalletIds=t},setFeaturedWalletIds(t){yt.featuredWalletIds=t},setTokens(t){yt.tokens=t},setTermsConditionsUrl(t){yt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){yt.privacyPolicyUrl=t},setCustomWallets(t){yt.customWallets=t},setIsSiweEnabled(t){yt.isSiweEnabled=t},setIsUniversalProvider(t){yt.isUniversalProvider=t},setSdkVersion(t){yt.sdkVersion=t},setMetadata(t){yt.metadata=t},setDisableAppend(t){yt.disableAppend=t},setEIP6963Enabled(t){yt.enableEIP6963=t},setDebug(t){yt.debug=t},setEnableWalletGuide(t){yt.enableWalletGuide=t},setEnableAuthLogger(t){yt.enableAuthLogger=t},setEnableWallets(t){yt.enableWallets=t},setPreferUniversalLinks(t){yt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,r]of Object.entries(wr.SIWX_DEFAULTS))t[e]??=r;yt.siwx=t},setConnectMethodsOrder(t){yt.features={...yt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){yt.features={...yt.features,walletFeaturesOrder:t}},setSocialsOrder(t){yt.remoteFeatures={...yt.remoteFeatures,socials:t}},setCollapseWallets(t){yt.features={...yt.features,collapseWallets:t}},setEnableEmbedded(t){yt.enableEmbedded=t},setAllowUnsupportedChain(t){yt.allowUnsupportedChain=t},setManualWCControl(t){yt.manualWCControl=t},setEnableNetworkSwitch(t){yt.enableNetworkSwitch=t},setEnableMobileFullScreen(t){yt.enableMobileFullScreen=ke.isMobile()&&t},setEnableReconnect(t){yt.enableReconnect=t},setCoinbasePreference(t){yt.coinbasePreference=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(yt.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){yt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return yt.universalProviderConfigOverride},getSnapshot(){return nv(yt)}},$p=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),js=Dn({...$p}),Hfe={state:js,subscribeKey(t,e){return li(js,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ke.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){js.message=$p.message,js.variant=$p.variant,js.svg=$p.svg,js.open=$p.open,js.autoClose=$p.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=$p.autoClose}){js.open?(js.open=!1,setTimeout(()=>{js.message=t,js.variant=r,js.svg=e,js.open=!0,js.autoClose=n},150)):(js.message=t,js.variant=r,js.svg=e,js.open=!0,js.autoClose=n)}},vl=Hfe,zfe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},_J=ke.getBlockchainApiUrl(),_o=Dn({clientId:null,api:new Wy({baseUrl:_J,clientId:null}),supportedChains:{http:[],ws:[]}}),kt={state:_o,async get(t){const{st:e,sv:r}=kt.getSdkProperties(),n=we.state.projectId,s={...t.params||{},st:e,sv:r,projectId:n};return _o.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=we.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{_o.supportedChains.http.length||await kt.getSupportedNetworks()}catch{return!1}return _o.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await kt.get({path:"v1/supported-chains"});return _o.supportedChains=t,t}catch{return _o.supportedChains}},async fetchIdentity({address:t}){const e=Ae.getIdentityFromCacheForAddress(t);if(e)return e;const r=await kt.get({path:`/v1/identity/${t}`,params:{sender:J.state.activeCaipAddress?ke.getPlainAddress(J.state.activeCaipAddress):void 0}});return Ae.updateIdentityCache({address:t,identity:r,timestamp:Date.now()}),r},async fetchTransactions({account:t,cursor:e,signal:r,cache:n,chainId:s}){if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))return{data:[],next:void 0};const o=Ae.getTransactionsCacheForAddress({address:t,chainId:s});if(o)return o;const a=await kt.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:r,cache:n});return Ae.updateTransactionsCache({address:t,chainId:s,timestamp:Date.now(),transactions:a}),a},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:s}){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?kt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?kt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async getAddressBalance({caipNetworkId:t,address:e}){return _o.api.post({path:`/v1?chainId=${t}&projectId=${we.state.projectId}`,body:{id:"1",jsonrpc:"2.0",method:"getAddressBalance",params:{address:e}}}).then(r=>r.result)},async fetchTokenPrice({addresses:t}){if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))return{fungibles:[]};const r=Ae.getTokenPriceCacheForAddresses(t);if(r)return r;const n=await _o.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:we.state.projectId},headers:{"Content-Type":"application/json"}});return Ae.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:n}),n},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?kt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){const{st:e,sv:r}=kt.getSdkProperties();if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return kt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:s}){if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return _o.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:wr.CONVERT_SLIPPAGE_TOLERANCE},projectId:we.state.projectId,from:e,to:r,userAddress:n,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){const{st:n,sv:s}=kt.getSdkProperties();if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return kt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:s}})},async getBalance(t,e,r){const{st:n,sv:s}=kt.getSdkProperties();if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))return vl.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Ae.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await kt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:s}});return Ae.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?kt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))return[];const r=J.getAccountData()?.address;return kt.get({path:`/v1/profile/reverse/${t}`,params:{sender:r,apiVersion:"2"}})},async getEnsNameSuggestions(t){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?kt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?_o.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:s}){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?(await _o.api.post({path:"/v1/generators/onrampurl",params:{projectId:we.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:s}})).url:""},async getOnrampOptions(){if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await kt.get({path:"/v1/onramp/options"})}catch{return zfe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){try{return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?await _o.api.post({path:"/v1/onramp/quote",params:{projectId:we.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?kt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?_o.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:we.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){_o.clientId=t,_o.api=new Wy({baseUrl:_J,clientId:t})}},Bc={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},Wfe={handleMobileDeeplinkRedirect(t,e){const r=window.location.href,n=encodeURIComponent(r);if(t===Bc.PHANTOM.id&&!("phantom"in window)){const s=r.startsWith("https")?"https":"http",i=r.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Bc.PHANTOM.url}/ul/browse/${n}?ref=${o}`}if(t===Bc.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Bc.SOLFLARE.url}/ul/v1/browse/${n}?ref=${n}`),e===ae.CHAIN.SOLANA&&t===Bc.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Bc.COINBASE.url}/dapp?cb_url=${n}`),e===ae.CHAIN.BITCOIN&&t===Bc.BINANCE.id&&!("binancew3w"in window)){const s=J.state.activeCaipNetwork,i=window.btoa("/pages/browser/index"),o=window.btoa(`url=${n}&defaultChainId=${s?.id??1}`),a=new URL(Bc.BINANCE.deeplink);a.searchParams.set("appId",Bc.BINANCE.appId),a.searchParams.set("startPagePath",i),a.searchParams.set("startPageQuery",o);const c=new URL(Bc.BINANCE.url);c.searchParams.set("_dp",window.btoa(a.toString())),window.location.href=c.toString()}}},Vfe=Object.freeze({enabled:!0,events:[]}),Gfe=new Wy({baseUrl:ke.getAnalyticsUrl(),clientId:null}),Kfe=5,Zfe=60*1e3,yf=Dn({...Vfe}),Yfe={state:yf,subscribeKey(t,e){return li(yf,t,e)},async sendError(t,e){if(!yf.enabled)return;const r=Date.now();if(yf.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return r-o<Zfe}).length>=Kfe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};yf.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=we.state;await Gfe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ke.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){yf.enabled=!0},disable(){yf.enabled=!1},clearEvents(){yf.events=[]}};let l6=class d8 extends Error{constructor(e,r,n){super(e),this.originalName="AppKitError",this.name="AppKitError",this.category=r,this.originalError=n,n&&n instanceof Error&&(this.originalName=n.name),Object.setPrototypeOf(this,d8.prototype);let s=!1;if(n instanceof Error&&typeof n.stack=="string"&&n.stack){const i=n.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,d8):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function bU(t,e){let r="";try{t instanceof Error?r=t.message:typeof t=="string"?r=t:typeof t=="object"&&t!==null?Object.keys(t).length===0?r="Unknown error":r=t?.message||JSON.stringify(t):r=String(t)}catch(s){r="Unknown error",console.error("Error parsing error message",s)}const n=t instanceof l6?t:new l6(r,e,t);throw Yfe.sendError(n,n.category),n}function Kc(t,e="INTERNAL_SDK_ERROR"){const r={};return Object.keys(t).forEach(n=>{const s=t[n];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return bU(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return bU(a,e)}},r[n]=i}else r[n]=s}),r}const Ua=Dn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Jfe={state:Ua,subscribeNetworkImages(t){return ui(Ua.networkImages,()=>t(Ua.networkImages))},subscribeKey(t,e){return li(Ua,t,e)},subscribe(t){return ui(Ua,()=>t(Ua))},setWalletImage(t,e){Ua.walletImages[t]=e},setNetworkImage(t,e){Ua.networkImages[t]=e},setChainImage(t,e){Ua.chainImages[t]=e},setConnectorImage(t,e){Ua.connectorImages={...Ua.connectorImages,[t]:e}},setTokenImage(t,e){Ua.tokenImages[t]=e},setCurrencyImage(t,e){Ua.currencyImages[t]=e}},la=Kc(Jfe),Xfe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:"",ton:"20f673c0-095e-49b2-07cf-eb5049dcf600"},x3=Dn({networkImagePromises:{}}),AJ={async fetchWalletImage(t){if(t)return await pt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(x3.networkImagePromises[t]||(x3.networkImagePromises[t]=pt._fetchNetworkImage(t)),await x3.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return la.state.walletImages[t]},getWalletImage(t){if(t?.image_url)return t?.image_url;if(t?.image_id)return la.state.walletImages[t.image_id]},getNetworkImage(t){if(t?.assets?.imageUrl)return t?.assets?.imageUrl;if(t?.assets?.imageId)return la.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return la.state.networkImages[t]},getConnectorImage(t){if(t?.imageUrl)return t.imageUrl;if(t?.info?.icon)return t.info.icon;if(t?.imageId)return la.state.connectorImages[t.imageId]},getChainImage(t){return la.state.networkImages[Xfe[t]]},getTokenImage(t){if(t)return la.state.tokenImages[t]}},Qfe=ke.getAnalyticsUrl(),ehe=new Wy({baseUrl:Qfe,clientId:null}),the=["MODAL_CREATED"],rhe=45,wU=1e3*10,as=Dn({timestamp:Date.now(),lastFlush:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"},pendingEvents:[],subscribedToVisibilityChange:!1,walletImpressions:[]}),Zt={state:as,subscribe(t){return ui(as,()=>t(as))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=we.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},shouldFlushEvents(){const t=JSON.stringify(as.pendingEvents).length/1024>rhe,e=as.lastFlush+wU<Date.now();return t||e},_setPendingEvent(t){try{let e=J.getAccountData()?.address;if("address"in t.data&&t.data.address&&(e=t.data.address),the.includes(t.data.event)||typeof window>"u")return;const r=J.getActiveCaipNetwork()?.caipNetworkId;this.state.pendingEvents.push({eventId:ke.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e,properties:{..."properties"in t.data?t.data.properties:{},caipNetworkId:r}}}),as.reportedErrors.FORBIDDEN=!1,Zt.shouldFlushEvents()&&Zt._submitPendingEvents()}catch(e){console.warn("_setPendingEvent",e)}},sendEvent(t){as.timestamp=Date.now(),as.data=t;const e=["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"];(we.state.features?.analytics||e.includes(t.event))&&Zt._setPendingEvent(as),this.subscribeToFlushTriggers()},sendWalletImpressionEvent(t){as.walletImpressions.push(t)},_transformPendingEventsForBatch(t){try{return t.filter(e=>e.props.event!=="WALLET_IMPRESSION_V2")}catch{return t}},_submitPendingEvents(){if(as.lastFlush=Date.now(),!(as.pendingEvents.length===0&&as.walletImpressions.length===0))try{const t=Zt._transformPendingEventsForBatch(as.pendingEvents);as.walletImpressions.length&&t.push({eventId:ke.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:Date.now(),props:{type:"track",event:"WALLET_IMPRESSION_V2",items:[...as.walletImpressions]}}),ehe.sendBeacon({path:"/batch",params:Zt.getSdkProperties(),body:t}),as.reportedErrors.FORBIDDEN=!1,as.pendingEvents=[],as.walletImpressions=[]}catch{as.reportedErrors.FORBIDDEN=!0}},subscribeToFlushTriggers(){as.subscribedToVisibilityChange||typeof document>"u"||(as.subscribedToVisibilityChange=!0,document?.addEventListener?.("visibilitychange",()=>{document.visibilityState==="hidden"&&Zt._submitPendingEvents()}),document?.addEventListener?.("freeze",()=>{Zt._submitPendingEvents()}),window?.addEventListener?.("pagehide",()=>{Zt._submitPendingEvents()}),setInterval(()=>{Zt._submitPendingEvents()},wU))}},nhe=ke.getApiUrl(),Ao=new Wy({baseUrl:nhe,clientId:null}),she=40,vU=4,ihe=20,Ht=Dn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1,explorerWallets:[],explorerFilteredWallets:[],plan:{tier:"none",hasExceededUsageLimit:!1,limits:{isAboveRpcLimit:!1,isAboveMauLimit:!1}}}),pt={state:Ht,subscribeKey(t,e){return li(Ht,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=we.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return we.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Ao.baseUrl}/getWalletImage/${t}`,r=await Ao.getBlob({path:e,params:pt._getSdkProperties()});la.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${Ao.baseUrl}/public/getAssetImage/${t}`,r=await Ao.getBlob({path:e,params:pt._getSdkProperties()});la.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${Ao.baseUrl}/public/getAssetImage/${t}`,r=await Ao.getBlob({path:e,params:pt._getSdkProperties()});la.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${Ao.baseUrl}/public/getCurrencyImage/${t}`,r=await Ao.getBlob({path:e,params:pt._getSdkProperties()});la.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${Ao.baseUrl}/public/getTokenImage/${t}`,r=await Ao.getBlob({path:e,params:pt._getSdkProperties()});la.setTokenImage(t,URL.createObjectURL(r))},_filterWalletsByPlatform(t){const e=t.length,r=ke.isMobile()?t?.filter(s=>s.mobile_link||s.webapp_link?!0:Object.values(Bc).map(o=>o.id).includes(s.id)):t,n=e-r.length;return{filteredWallets:r,mobileFilteredOutWalletsLength:n}},async fetchProjectConfig(){return(await Ao.get({path:"/appkit/v1/config",params:pt._getSdkProperties()})).features},async fetchUsage(){try{const t=await Ao.get({path:"/appkit/v1/project-limits",params:pt._getSdkProperties()}),{tier:e,isAboveMauLimit:r,isAboveRpcLimit:n}=t.planLimits,s=e==="starter",i=r||n;pt.state.plan={tier:e,hasExceededUsageLimit:s&&i,limits:{isAboveRpcLimit:n,isAboveMauLimit:r}}}catch(t){console.warn("Failed to fetch usage",t)}},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Ao.get({path:"/projects/v1/origins",params:pt._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===ae.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=ae.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const e=J.getAllRequestedCaipNetworks()?.map(({assets:r})=>r?.imageId).filter(Boolean).filter(r=>!AJ.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>pt._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=Re.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>pt._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>pt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>pt._fetchTokenImage(e)))},async fetchWallets(t){const e=t.exclude??[];pt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Bc).map(o=>o.id));const n=await Ao.get({path:"/getWallets",params:{...pt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:t.include?.join(","),exclude:e.join(",")}}),{filteredWallets:s,mobileFilteredOutWalletsLength:i}=pt._filterWalletsByPlatform(n?.data);return{data:s||[],count:n?.count,mobileFilteredOutWalletsLength:i}},async prefetchWalletRanks(){const t=Re.state.connectors;if(!t?.length)return;const e={page:1,entries:20,badge:"certified"};if(e.names=t.map(s=>s.name).join(","),J.state.activeChain===ae.CHAIN.EVM){const s=[...t.flatMap(i=>i.connectors?.map(o=>o.info?.rdns)||[]),...t.map(i=>i.info?.rdns)].filter(i=>typeof i=="string"&&i.length>0);s.length&&(e.rdns=s.join(","))}const{data:r}=await pt.fetchWallets(e);Ht.explorerWallets=r,Re.extendConnectorsWithExplorerWallets(r);const n=J.getRequestedCaipNetworkIds().join(",");Ht.explorerFilteredWallets=r.filter(s=>s.chains?.some(i=>n.includes(i)))},async fetchFeaturedWallets(){const{featuredWalletIds:t}=we.state;if(t?.length){const e={...pt._getSdkProperties(),page:1,entries:t?.length??vU,include:t},{data:r}=await pt.fetchWallets(e),n=[...r].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=n.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>pt._fetchWalletImage(i))),Ht.featured=n,Ht.allFeatured=n}},async fetchRecommendedWallets(){try{Ht.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=we.state,n=[...e??[],...r??[]].filter(Boolean),s=J.getRequestedCaipNetworkIds().join(","),i={page:1,entries:vU,include:t,exclude:n,chains:s},{data:o,count:a}=await pt.fetchWallets(i),c=Ae.getRecentWallets(),u=o.map(d=>d.image_id).filter(Boolean),l=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...u,...l].map(d=>pt._fetchWalletImage(d))),Ht.recommended=o,Ht.allRecommended=o,Ht.count=a??0}catch{}finally{Ht.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=we.state,s=J.getRequestedCaipNetworkIds().join(","),i=[...Ht.recommended.map(({id:d})=>d),...r??[],...n??[]].filter(Boolean),o={page:t,entries:she,include:e,exclude:i,chains:s},{data:a,count:c,mobileFilteredOutWalletsLength:u}=await pt.fetchWallets(o);Ht.mobileFilteredOutWalletsLength=u+(Ht.mobileFilteredOutWalletsLength??0);const l=a.slice(0,ihe).map(d=>d.image_id).filter(Boolean);await Promise.allSettled(l.map(d=>pt._fetchWalletImage(d))),Ht.wallets=ke.uniqueBy([...Ht.wallets,...pt._filterOutExtensions(a)],"id").filter(d=>d.chains?.some(f=>s.includes(f))),Ht.count=c>Ht.count?c:Ht.count,Ht.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:r}=await pt.fetchWallets(e);r&&r.forEach(n=>{Ht.excludedWallets.push({rdns:n.rdns,name:n.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=we.state,s=J.getRequestedCaipNetworkIds().join(",");Ht.search=[];const i={page:1,entries:100,search:t?.trim(),badge_type:e,include:r,exclude:n,chains:s},{data:o}=await pt.fetchWallets(i);Zt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>pt._fetchWalletImage(c)),ke.wait(300)]),Ht.search=pt._filterOutExtensions(o)},initPromise(t,e){const r=Ht.promises[t];return r||(Ht.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0,fetchWalletRanks:s=!0}={}){const i=[t&&pt.initPromise("connectorImages",pt.fetchConnectorImages),e&&pt.initPromise("featuredWallets",pt.fetchFeaturedWallets),r&&pt.initPromise("recommendedWallets",pt.fetchRecommendedWallets),n&&pt.initPromise("networkImages",pt.fetchNetworkImages),s&&pt.initPromise("walletRanks",pt.prefetchWalletRanks)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){we.state.features?.analytics&&pt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Ao.get({path:"/getAnalyticsConfig",params:pt._getSdkProperties()});we.setFeatures({analytics:t})}catch{we.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!t?.length){Ht.featured=Ht.allFeatured,Ht.recommended=Ht.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");Ht.featured=Ht.allFeatured.filter(r=>r.chains?.some(n=>e.includes(n))),Ht.recommended=Ht.allRecommended.filter(r=>r.chains?.some(n=>e.includes(n))),Ht.filteredWallets=Ht.wallets.filter(r=>r.chains?.some(n=>e.includes(n)))},clearFilterByNamespaces(){Ht.filteredWallets=[]},setFilterByNamespace(t){if(!t){Ht.featured=Ht.allFeatured,Ht.recommended=Ht.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");Ht.featured=Ht.allFeatured.filter(r=>r.chains?.some(n=>e.includes(n))),Ht.recommended=Ht.allRecommended.filter(r=>r.chains?.some(n=>e.includes(n))),Ht.filteredWallets=Ht.wallets.filter(r=>r.chains?.some(n=>e.includes(n)))}},ohe=["ConnectingExternal","ConnectingMultiChain","ConnectingSocial","ConnectingFarcaster"],rn=Dn({view:"Connect",history:["Connect"],transactionStack:[]}),ahe={state:rn,subscribeKey(t,e){return li(rn,t,e)},pushTransactionStack(t){rn.transactionStack.push(t)},popTransactionStack(t){const e=rn.transactionStack.pop();if(!e)return;const{onSuccess:r,onError:n,onCancel:s}=e;switch(t){case"success":r?.();break;case"error":n?.(),It.goBack();break;case"cancel":s?.(),It.goBack();break}},push(t,e){let r=t,n=e;pt.state.plan.hasExceededUsageLimit&&ohe.includes(t)&&(r="UsageExceeded",n=void 0),r!==rn.view&&(rn.view=r,rn.history.push(r),rn.data=n)},reset(t,e){rn.view=t,rn.history=[t],rn.data=e},replace(t,e){rn.history.at(-1)===t||(rn.view=t,rn.history[rn.history.length-1]=t,rn.data=e)},goBack(){const t=J.state.activeCaipAddress,e=It.state.view==="ConnectingFarcaster",r=!t&&e;if(rn.history.length>1){rn.history.pop();const[n]=rn.history.slice(-1);n&&(t&&n==="Connect"?rn.view="Account":rn.view=n)}else dr.close();rn.data?.wallet&&(rn.data.wallet=void 0),rn.data?.redirectView&&(rn.data.redirectView=void 0),setTimeout(()=>{if(r){J.setAccountProp("farcasterUrl",void 0,J.state.activeChain);const n=Re.getAuthConnector();n?.provider?.reload();const s=nv(we.state);n?.provider?.syncDappData?.({metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType})}},100)},goBackToIndex(t){if(rn.history.length>1){rn.history=rn.history.slice(0,t+1);const[e]=rn.history.slice(-1);e&&(rn.view=e)}},goBackOrCloseModal(){It.state.history.length>1?It.goBack():dr.close()}},It=Kc(ahe),Yl=Dn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),f8={state:Yl,subscribe(t){return ui(Yl,()=>t(Yl))},setThemeMode(t){Yl.themeMode=t;try{const e=Re.getAuthConnector();if(e){const r=f8.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:sv(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Yl.themeVariables={...Yl.themeVariables,...t};try{const e=Re.getAuthConnector();if(e){const r=f8.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:sv(Yl.themeVariables,Yl.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return nv(Yl)}},oa=Kc(f8),xJ=Object.fromEntries($Y.map(t=>[t,void 0])),che=Object.fromEntries($Y.map(t=>[t,!0])),Ar=Dn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:xJ,filterByNamespaceMap:che}),uhe={state:Ar,subscribe(t){return ui(Ar,()=>{t(Ar)})},subscribeKey(t,e){return li(Ar,t,e)},initialize(t){t.forEach(e=>{const r=Ae.getConnectedConnectorId(e);r&&Re.setConnectorId(r,e)})},setActiveConnector(t){t&&(Ar.activeConnector=dy(t))},setConnectors(t){t.filter(s=>!Ar.allConnectors.some(i=>i.id===s.id&&Re.getConnectorName(i.name)===Re.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&Ar.allConnectors.push(dy(s))});const r=Re.getEnabledNamespaces(),n=Re.getEnabledConnectors(r);Ar.connectors=Re.mergeMultiChainConnectors(n)},filterByNamespaces(t){Object.keys(Ar.filterByNamespaceMap).forEach(e=>{Ar.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Ar.filterByNamespaceMap[e]=!0}),Re.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Ar.filterByNamespaceMap[t]=e,Re.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Re.getEnabledNamespaces(),e=Re.getEnabledConnectors(t),r=Re.areAllNamespacesEnabled();Ar.connectors=Re.mergeMultiChainConnectors(e),r?pt.clearFilterByNamespaces():pt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Ar.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Ar.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Ar.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Re.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const s=n[0],i=s?.id===ae.CONNECTOR_ID.AUTH;n.length>1&&s?r.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...n],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:s?.id||""}):s&&r.push(s)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,s=Re.getConnectorName(n);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===r.chain)||i.push(r),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){if(t.id===ae.CONNECTOR_ID.AUTH){const e=t,r=nv(we.state),n=oa.getSnapshot().themeMode,s=oa.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e?.provider?.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:sv(s,n)}),Re.setConnectors([t])}else Re.setConnectors([t])},getAuthConnector(t){const e=t||J.state.activeChain,r=Ar.connectors.find(n=>n.id===ae.CONNECTOR_ID.AUTH);if(r)return r?.connectors?.length?r.connectors.find(s=>s.chain===e):r},getAnnouncedConnectorRdns(){return Ar.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>t.info?.rdns)},getConnectorById(t){return Ar.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:r}){const n=r||J.state.activeChain;return Ar.allConnectors.filter(i=>i.chain===n).find(i=>i.explorerId===t||i.info?.rdns===e)},syncIfAuthConnector(t){if(t.id!=="AUTH")return;const e=t,r=nv(we.state),n=oa.getSnapshot().themeMode,s=oa.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:sv(s,n)})},getConnectorsByNamespace(t){const e=Ar.allConnectors.filter(r=>r.chain===t);return Re.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&ho(t)===Ss.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=It.state.data?.redirectView,r=Re.getConnector({id:t.id,rdns:t.rdns});Wfe.handleMobileDeeplinkRedirect(r?.explorerId||t.id,J.state.activeChain),r?It.push("ConnectingExternal",{connector:r,wallet:t,redirectView:e}):It.push("ConnectingWalletConnect",{wallet:t,redirectView:e})},getConnectors(t){return t?Re.getConnectorsByNamespace(t):Re.mergeMultiChainConnectors(Ar.allConnectors)},setFilterByNamespace(t){Ar.filterByNamespace=t,Ar.connectors=Re.getConnectors(t),pt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Ar.activeConnectorIds={...Ar.activeConnectorIds,[e]:t},Ae.setConnectedConnectorId(e,t))},removeConnectorId(t){Ar.activeConnectorIds={...Ar.activeConnectorIds,[t]:void 0},Ae.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Ar.activeConnectorIds[t]},isConnected(t){return t?!!Ar.activeConnectorIds[t]:Object.values(Ar.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Ar.activeConnectorIds={...xJ}},extendConnectorsWithExplorerWallets(t){Ar.allConnectors.forEach(n=>{const s=t.find(i=>i.id===n.id||i.rdns&&i.rdns===n.info?.rdns);s&&(n.explorerWallet=s)});const e=Re.getEnabledNamespaces(),r=Re.getEnabledConnectors(e);Ar.connectors=Re.mergeMultiChainConnectors(r)}},Re=Kc(uhe),lhe=1e3,Tb={checkNamespaceConnectorId(t,e){return Re.getConnectorId(t)===e},isSocialProvider(t){return wr.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:r=!0,redirectViewOnModalClose:n="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Re.setActiveConnector(e),s?.(ke.isMobile()&&t),n){const u=dr.subscribeKey("open",l=>{l||(It.state.view!==n&&It.replace(n),u(),a(new Error("Modal closed")))})}const c=J.subscribeKey("activeCaipAddress",u=>{u&&(i?.(),r&&dr.close(),c(),o(xs.parseCaipAddress(u)))})})},connectExternal(t){return new Promise((e,r)=>{const n=J.subscribeKey("activeCaipAddress",s=>{s&&(dr.close(),n(),e(xs.parseCaipAddress(s)))});ze.connectExternal(t,t.chain).catch(()=>{n(),r(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:r=!0,onOpenFarcaster:n,onConnect:s}){let i,o=!1,a=null;const c=e||J.state.activeChain,u=J.subscribeKey("activeCaipAddress",l=>{l&&(r&&dr.close(),u())});return new Promise((l,d)=>{async function f(g){if(g.data?.resultUri)if(g.origin===ae.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",f,!1);try{const h=Re.getAuthConnector(c);if(h&&!o){i&&i.close(),o=!0;const y=g.data.resultUri;Zt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:t}}),Ae.setConnectedSocialProvider(t),await ze.connectExternal({id:h.id,type:h.type,socialUri:y},h.chain);const E=J.state.activeCaipAddress;if(!E){d(new Error("Failed to connect"));return}l(xs.parseCaipAddress(E)),Zt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}})}}catch(h){Zt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:t,message:ke.parseError(h)}}),d(new Error("Failed to connect"))}}else Zt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:t,message:"Untrusted Origin"}})}async function p(){if(Zt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:t}}),t==="farcaster"){n?.();const g=dr.subscribeKey("open",y=>{!y&&t==="farcaster"&&(d(new Error("Popup closed")),s?.(),g())}),h=Re.getAuthConnector();if(h&&!J.getAccountData(c)?.farcasterUrl)try{const{url:E}=await h.provider.getFarcasterUri();J.setAccountProp("farcasterUrl",E,c)}catch{d(new Error("Failed to connect to farcaster"))}}else{const g=Re.getAuthConnector();a=ke.returnOpenHref(`${ae.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(g){const{uri:h}=await g.provider.getSocialRedirectUri({provider:t});if(a&&h){a.location.href=h,i=a;const y=setInterval(()=>{i?.closed&&!o&&(d(new Error("Popup closed")),clearInterval(y))},1e3);window.addEventListener("message",f,!1)}else a?.close(),d(new Error("Failed to initiate social connection"))}}catch{d(new Error("Failed to initiate social connection")),a?.close()}}}p()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:r,onConnect:n}){return new Promise((s,i)=>{if(r?.(),e){const a=dr.subscribeKey("open",c=>{c||(It.state.view!==e&&It.replace(e),a(),i(new Error("Modal closed")))})}const o=J.subscribeKey("activeCaipAddress",a=>{a&&(n?.(),t&&dr.close(),o(),s(xs.parseCaipAddress(a)))})})},async updateEmail(){const t=Ae.getConnectedConnectorId(J.state.activeChain),e=Re.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==ae.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const r=e.provider.getEmail()??"";return await dr.open({view:"UpdateEmailWallet",data:{email:r,redirectView:void 0}}),new Promise((n,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==r&&(dr.close(),clearInterval(i),o(),n({email:a}))},lhe),o=dr.subscribeKey("open",a=>{a||(It.state.view!=="Connect"&&It.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&ho(t)===Ss.ACCOUNT_TYPES.EOA}};function CJ(){const t=J.state.activeCaipNetwork?.chainNamespace||"eip155",e=J.state.activeCaipNetwork?.id||1,r=wr.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`}function ho(t){return J.getAccountData(t)?.preferredAccountType}function m1(t){return t?J.state.chains.get(t)?.networkState?.caipNetwork:J.state.activeCaipNetwork}const d6={getConnectionStatus(t,e){const r=Re.state.activeConnectorIds[e],n=ze.getConnections(e);return!!r&&t.connectorId===r?"connected":n.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:r}){return t.map(n=>{if((e?n.connectorId.toLowerCase()===e.toLowerCase():!1)&&r){const i=n.accounts.filter(o=>!r.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...n,accounts:i}}return n})},excludeExistingConnections(t,e){const r=new Set(t);return e.filter(n=>!r.has(n.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(r=>r.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){const e=!!we.state.remoteFeatures?.multiWallet,r=Re.state.activeConnectorIds[t],n=ze.getConnections(t),i=(ze.state.recentConnections.get(t)??[]).filter(a=>Re.getConnectorById(a.connectorId)),o=d6.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return e?{connections:n,recentConnections:o}:{connections:n.filter(a=>a.connectorId.toLowerCase()===r?.toLowerCase()),recentConnections:[]}}},Wn=Dn({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),dhe={state:Wn,subscribe(t){return ui(Wn,()=>t(Wn))},setLastNetworkInView(t){Wn.lastNetworkInView=t},async fetchTransactions(t){if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Wn.loading=!0;try{const e=await kt.fetchTransactions({account:t,cursor:Wn.next,chainId:J.state.activeCaipNetwork?.caipNetworkId}),r=pI.filterSpamTransactions(e.data),n=pI.filterByConnectedChain(r),s=[...Wn.transactions,...n];Wn.loading=!1,Wn.transactions=s,Wn.transactionsByYear=pI.groupTransactionsByYearAndMonth(Wn.transactionsByYear,n),Wn.empty=s.length===0,Wn.next=e.next?e.next:void 0}catch{const r=J.state.activeChain;Zt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:we.state.projectId,cursor:Wn.next,isSmartAccount:ho(r)===Ss.ACCOUNT_TYPES.SMART_ACCOUNT}}),vl.showError("Failed to fetch transactions"),Wn.loading=!1,Wn.empty=!0,Wn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const s=new Date(n.metadata.minedAt).getFullYear(),i=new Date(n.metadata.minedAt).getMonth(),o=r[s]??{},c=(o[i]??[]).filter(u=>u.id!==n.id);r[s]={...o,[i]:[...c,n].sort((u,l)=>new Date(l.metadata.minedAt).getTime()-new Date(u.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>n.nft_info?.flags.is_spam===!0))},filterByConnectedChain(t){const e=J.state.activeCaipNetwork?.caipNetworkId;return t.filter(n=>n.metadata.chain===e)},clearCursor(){Wn.next=void 0},resetTransactions(){Wn.transactions=[],Wn.transactionsByYear={},Wn.lastNetworkInView=void 0,Wn.loading=!1,Wn.empty=!1,Wn.next=void 0}},pI=Kc(dhe,"API_ERROR"),Ur=Dn({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let cp;const fhe={state:Ur,subscribe(t){return ui(Ur,()=>t(Ur))},subscribeKey(t,e){return li(Ur,t,e)},_getClient(){return Ur._client},setClient(t){Ur._client=dy(t)},initialize(t){const e=t.filter(r=>!!r.namespace).map(r=>r.namespace);ze.syncStorageConnections(e)},syncStorageConnections(t){const e=Ae.getConnections(),r=t??Array.from(J.state.chains.keys());for(const n of r){const s=e[n]??[],i=new Map(Ur.recentConnections);i.set(n,s),Ur.recentConnections=i}},getConnections(t){return t?Ur.connections.get(t)??[]:[]},hasAnyConnection(t){const e=ze.state.connections;return Array.from(e.values()).flatMap(r=>r).some(({connectorId:r})=>r===t)},async connectWalletConnect({cache:t="auto"}={}){const e=ke.isTelegram()||ke.isSafari()&&ke.isIos();if(t==="always"||t==="auto"&&e){if(cp){await cp,cp=void 0;return}if(!ke.isPairingExpired(Ur?.wcPairingExpiry)){const r=Ur.wcUri;Ur.wcUri=r;return}cp=ze._getClient()?.connectWalletConnect?.().catch(()=>{}),ze.state.status="connecting",await cp,cp=void 0,Ur.wcPairingExpiry=void 0,ze.state.status="connected"}else await ze._getClient()?.connectWalletConnect?.()},async connectExternal(t,e,r=!0){const n=await ze._getClient()?.connectExternal?.(t);r&&J.setActiveNamespace(e);const s=Re.state.allConnectors.find(o=>o.id===t?.id),i=t.type==="AUTH"?"email":"browser";return Zt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:i,name:s?.name||"Unknown",view:It.state.view,walletRank:s?.explorerWallet?.order}}),n},async reconnectExternal(t){await ze._getClient()?.reconnectExternal?.(t);const e=t.chain||J.state.activeChain;e&&Re.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){if(!e)return;dr.setLoading(!0,J.state.activeChain);const r=Re.getAuthConnector();r&&(J.setAccountProp("preferredAccountType",t,e),await r.provider.setPreferredAccount(t),Ae.setPreferredAccountTypes(Object.entries(J.state.chains).reduce((n,[s,i])=>{const o=s,a=ho(o);return a!==void 0&&(n[o]=a),n},{})),await ze.reconnectExternal(r),dr.setLoading(!1,J.state.activeChain),Zt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:J.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(t){return ze._getClient()?.signMessage(t)},parseUnits(t,e){return ze._getClient()?.parseUnits(t,e)},formatUnits(t,e){return ze._getClient()?.formatUnits(t,e)},updateBalance(t){return ze._getClient()?.updateBalance(t)},async sendTransaction(t){return ze._getClient()?.sendTransaction(t)},async getCapabilities(t){return ze._getClient()?.getCapabilities(t)},async grantPermissions(t){return ze._getClient()?.grantPermissions(t)},async walletGetAssets(t){return ze._getClient()?.walletGetAssets(t)??{}},async estimateGas(t){return ze._getClient()?.estimateGas(t)},async writeContract(t){return ze._getClient()?.writeContract(t)},async getEnsAddress(t){return ze._getClient()?.getEnsAddress(t)},async getEnsAvatar(t){return ze._getClient()?.getEnsAvatar(t)},checkInstalled(t){return ze._getClient()?.checkInstalled?.(t)||!1},resetWcConnection(){Ur.wcUri=void 0,Ur.wcPairingExpiry=void 0,Ur.wcLinking=void 0,Ur.recentWallet=void 0,Ur.status="disconnected",pI.resetTransactions(),Ae.deleteWalletConnectDeepLink(),Ae.deleteRecentWallet()},resetUri(){Ur.wcUri=void 0,Ur.wcPairingExpiry=void 0,cp=void 0},finalizeWcConnection(t){const{wcLinking:e,recentWallet:r}=ze.state;e&&Ae.setWalletConnectDeepLink(e),r&&Ae.setAppKitRecent(r),t&&Zt.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:t,properties:{method:e?"mobile":"qrcode",name:It.state.data?.wallet?.name||"Unknown",view:It.state.view,walletRank:r?.order}})},setWcBasic(t){Ur.wcBasic=t},setUri(t){Ur.wcUri=t,Ur.wcPairingExpiry=ke.getPairingExpiry()},setWcLinking(t){Ur.wcLinking=t},setWcError(t){Ur.wcError=t,Ur.buffering=!1},setRecentWallet(t){Ur.recentWallet=t},setBuffering(t){Ur.buffering=t},setStatus(t){Ur.status=t},setIsSwitchingConnection(t){Ur.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:r}={}){try{await ze._getClient()?.disconnect({id:t,chainNamespace:e,initialDisconnect:r})}catch(n){throw new l6("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},async disconnectConnector({id:t,namespace:e}){try{await ze._getClient()?.disconnectConnector({id:t,namespace:e})}catch(r){throw new l6("Failed to disconnect connector","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){const r=new Map(Ur.connections);r.set(e,t),Ur.connections=r},async handleAuthAccountSwitch({address:t,namespace:e}){const n=J.getAccountData(e)?.user?.accounts?.find(i=>i.type==="smartAccount"),s=n&&n.address.toLowerCase()===t.toLowerCase()&&Tb.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await ze.setPreferredAccountType(s,e)},async handleActiveConnection({connection:t,namespace:e,address:r}){const n=Re.getConnectorById(t.connectorId),s=t.connectorId===ae.CONNECTOR_ID.AUTH;if(!n)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)r&&await ze.handleAuthAccountSwitch({address:r,namespace:e});else return(await ze.connectExternal({id:n.id,type:n.type,provider:n.provider,address:r,chain:e},e))?.address;return r},async handleDisconnectedConnection({connection:t,namespace:e,address:r,closeModalOnConnect:n}){const s=Re.getConnectorById(t.connectorId),i=t.auth?.name?.toLowerCase(),o=t.connectorId===ae.CONNECTOR_ID.AUTH,a=t.connectorId===ae.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Tb.isSocialProvider(i)){const{address:u}=await Tb.connectSocial({social:i,closeModalOnConnect:n,onOpenFarcaster(){dr.open({view:"ConnectingFarcaster"})},onConnect(){It.replace("ProfileWallets")}});c=u}else{const{address:u}=await Tb.connectEmail({closeModalOnConnect:n,onOpen(){dr.open({view:"EmailLogin"})},onConnect(){It.replace("ProfileWallets")}});c=u}else if(a){const{address:u}=await Tb.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:n,onOpen(l){const d=l?"AllWallets":"ConnectingWalletConnect";dr.state.open?It.push(d):dr.open({view:d})},onConnect(){It.replace("ProfileWallets")}});c=u}else{const u=await ze.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);u&&(c=u.address)}return o&&r&&await ze.handleAuthAccountSwitch({address:r,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:r,closeModalOnConnect:n,onChange:s}){let i;const o=J.getAccountData(r)?.caipAddress;if(o){const{address:c}=xs.parseCaipAddress(o);i=c}const a=d6.getConnectionStatus(t,r);switch(a){case"connected":case"active":{const c=await ze.handleActiveConnection({connection:t,namespace:r,address:e});if(i&&c){const u=c.toLowerCase()!==i.toLowerCase();s?.({address:c,namespace:r,hasSwitchedAccount:u,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await ze.handleDisconnectedConnection({connection:t,namespace:r,address:e,closeModalOnConnect:n});c&&s?.({address:c,namespace:r,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${a}`)}}},ze=Kc(fhe),C3={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return RT(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}};let S3;async function EU(){if(!S3){const{createPublicClient:t,http:e,defineChain:r}=await Cr(async()=>{const{createPublicClient:n,http:s,defineChain:i}=await import("./index-DxJ2hdhs.js").then(o=>o.i);return{createPublicClient:n,http:s,defineChain:i}},__vite__mapDeps([0,1,2]));S3={createPublicClient:t,http:e,defineChain:r}}return S3}const h8={getBlockchainApiRpcUrl(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()},async getViemChain(t){const{defineChain:e}=await EU(),{chainId:r}=xs.parseCaipNetworkId(t.caipNetworkId);return e({...t,id:Number(r)})},async createViemPublicClient(t){const{createPublicClient:e,http:r}=await EU(),n=we.state.projectId,s=await h8.getViemChain(t);if(!s)throw new Error(`Chain ${t.caipNetworkId} not found in viem/chains`);return e({chain:s,transport:r(h8.getBlockchainApiRpcUrl(t.caipNetworkId,n))})}},M4={async getMyTokensWithBalance(t){const e=J.getAccountData()?.address,r=J.state.activeCaipNetwork,n=Re.getConnectorId("eip155")===ae.CONNECTOR_ID.AUTH;if(!e||!r)return[];const s=`${r.caipNetworkId}:${e}`,i=Ae.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(r.chainNamespace===ae.CHAIN.EVM&&n){const a=await this.getEIP155Balances(e,r);if(a)return this.filterLowQualityTokens(a)}const o=await kt.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){try{const r=C3.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await ze.getCapabilities(t))?.[r]?.assetDiscovery?.supported)return null;const s=await ze.walletGetAssets({account:t,chainFilter:[r]});if(!C3.isWalletGetAssetsResponse(s))return null;const o=(s[r]||[]).map(a=>C3.createBalance(a,e.caipNetworkId));return Ae.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:o},timestamp:Date.now()}),o}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},async fetchERC20Balance({caipAddress:t,assetAddress:e,caipNetwork:r}){const n=await h8.createViemPublicClient(r),{address:s}=xs.parseCaipAddress(t),[{result:i},{result:o},{result:a},{result:c}]=await n.multicall({contracts:[{address:e,functionName:"name",args:[],abi:z_},{address:e,functionName:"symbol",args:[],abi:z_},{address:e,functionName:"balanceOf",args:[s],abi:z_},{address:e,functionName:"decimals",args:[],abi:z_}]});return{name:i,symbol:o,decimals:c,balance:a&&c?RT(a,c):"0"}}},I3={adapters:{}},SJ={state:I3,initialize(t){I3.adapters={...t}},get(t){return I3.adapters[t]}},f6={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0,ton:void 0},zo=Dn({providers:{...f6},providerIds:{...f6}}),br={state:zo,subscribeKey(t,e){return li(zo,t,e)},subscribe(t){return ui(zo,()=>{t(zo)})},subscribeProviders(t){return ui(zo.providers,()=>t(zo.providers))},setProvider(t,e){t&&e&&(zo.providers[t]=dy(e))},getProvider(t){if(t)return zo.providers[t]},setProviderId(t,e){e&&(zo.providerIds[t]=e)},getProviderId(t){if(t)return zo.providerIds[t]},reset(){zo.providers={...f6},zo.providerIds={...f6}},resetChain(t){zo.providers[t]=void 0,zo.providerIds[t]=void 0}},Eg=Dn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Nu={state:Eg,subscribe(t){return ui(Eg,()=>t(Eg))},subscribeOpen(t){return li(Eg,"open",t)},set(t){Object.assign(Eg,{...Eg,...t})}},hhe={async getTokenList(t){return(await kt.fetchSwapTokens({chainId:t}))?.tokens?.map(n=>({...n,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){const t=J.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const e=(await ze?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e};case"eip155":default:return await kt.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:r,sourceTokenDecimals:n}){const s=await kt.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s?.allowance&&r&&n){const i=ze.parseUnits(r,n)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await M4.getMyTokensWithBalance(t);return J.setAccountProp("tokenBalance",e,J.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return t?.map(e=>({...e,address:e?.address?e.address:CJ(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]},async handleSwapError(t){try{const e=t?.cause;return e?.json&&(await e.json())?.reasons?.[0]?.description?.includes("insufficient liquidity")?"Insufficient liquidity":void 0}catch{return}}},xr=Dn({tokenBalances:[],loading:!1}),phe={state:xr,subscribe(t){return ui(xr,()=>t(xr))},subscribeKey(t,e){return li(xr,t,e)},setToken(t){t&&(xr.token=dy(t))},setTokenAmount(t){xr.sendTokenAmount=t},setReceiverAddress(t){xr.receiverAddress=t},setReceiverProfileImageUrl(t){xr.receiverProfileImageUrl=t},setReceiverProfileName(t){xr.receiverProfileName=t},setNetworkBalanceInUsd(t){xr.networkBalanceInUSD=t},setLoading(t){xr.loading=t},getSdkEventProperties(t){return{message:ke.parseError(t),isSmartAccount:ho(J.state.activeChain)===Ss.ACCOUNT_TYPES.SMART_ACCOUNT,token:xr.token?.symbol||"",amount:xr.sendTokenAmount??0,network:J.state.activeCaipNetwork?.caipNetworkId||""}},async sendToken(){try{switch(tr.setLoading(!0),J.state.activeCaipNetwork?.chainNamespace){case"eip155":await tr.sendEvmToken();return;case"solana":await tr.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}catch(t){throw yl.isUserRejectedRequestError(t)?new Hy(t):t}finally{tr.setLoading(!1)}},async sendEvmToken(){const t=J.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=ho(t);if(!tr.state.sendTokenAmount||!tr.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!tr.state.token)throw new Error("A token is required");if(tr.state.token?.address){Zt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ss.ACCOUNT_TYPES.SMART_ACCOUNT,token:tr.state.token.address,amount:tr.state.sendTokenAmount,network:J.state.activeCaipNetwork?.caipNetworkId||""}});const{hash:r}=await tr.sendERC20Token({receiverAddress:tr.state.receiverAddress,tokenAddress:tr.state.token.address,sendTokenAmount:tr.state.sendTokenAmount,decimals:tr.state.token.quantity.decimals});r&&(xr.hash=r)}else{Zt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ss.ACCOUNT_TYPES.SMART_ACCOUNT,token:tr.state.token.symbol||"",amount:tr.state.sendTokenAmount,network:J.state.activeCaipNetwork?.caipNetworkId||""}});const{hash:r}=await tr.sendNativeToken({receiverAddress:tr.state.receiverAddress,sendTokenAmount:tr.state.sendTokenAmount,decimals:tr.state.token.quantity.decimals});r&&(xr.hash=r)}},async fetchTokenBalance(t){xr.loading=!0;const e=J.state.activeChain,r=J.state.activeCaipNetwork?.caipNetworkId,n=J.state.activeCaipNetwork?.chainNamespace,s=J.getAccountData(e)?.caipAddress??J.state.activeCaipAddress,i=s?ke.getPlainAddress(s):void 0;if(xr.lastRetry&&!ke.isAllowedRetry(xr.lastRetry,30*wr.ONE_SEC_MS))return xr.loading=!1,[];try{if(i&&r&&n){const o=await M4.getMyTokensWithBalance();return xr.tokenBalances=o,xr.lastRetry=void 0,o}}catch(o){xr.lastRetry=Date.now(),t?.(o),vl.showError("Token Balance Unavailable")}finally{xr.loading=!1}return[]},fetchNetworkBalance(){if(xr.tokenBalances.length===0)return;const t=hhe.mapBalancesToSwapTokens(xr.tokenBalances);if(!t)return;const e=t.find(r=>r.address===CJ());e&&(xr.networkBalanceInUSD=e?zY.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){It.pushTransactionStack({});const e=t.receiverAddress,r=J.getAccountData()?.address,n=ze.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),i=await ze.sendTransaction({chainNamespace:ae.CHAIN.EVM,to:e,address:r,data:"0x",value:n??BigInt(0)});return Zt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:ho("eip155")===Ss.ACCOUNT_TYPES.SMART_ACCOUNT,token:tr.state.token?.symbol||"",amount:t.sendTokenAmount,network:J.state.activeCaipNetwork?.caipNetworkId||"",hash:i||""}}),ze._getClient()?.updateBalance("eip155"),tr.resetSend(),{hash:i}},async sendERC20Token(t){It.pushTransactionStack({onSuccess(){It.replace("Account")}});const e=ze.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),r=J.getAccountData()?.address;if(r&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ke.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");const s=await ze.writeContract({fromAddress:r,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:tue.getERC20Abi(n),chainNamespace:ae.CHAIN.EVM});return Zt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:ho("eip155")===Ss.ACCOUNT_TYPES.SMART_ACCOUNT,token:tr.state.token?.symbol||"",amount:t.sendTokenAmount,network:J.state.activeCaipNetwork?.caipNetworkId||"",hash:s||""}}),tr.resetSend(),{hash:s}}return{hash:void 0}},async sendSolanaToken(){if(!tr.state.sendTokenAmount||!tr.state.receiverAddress)throw new Error("An amount and receiver address are required");It.pushTransactionStack({onSuccess(){It.replace("Account")}});let t;tr.state.token&&tr.state.token.address!==wr.SOLANA_NATIVE_TOKEN_ADDRESS&&(ke.isCaipAddress(tr.state.token.address)?t=ke.getPlainAddress(tr.state.token.address):t=tr.state.token.address);const e=await ze.sendTransaction({chainNamespace:"solana",tokenMint:t,to:tr.state.receiverAddress,value:tr.state.sendTokenAmount});e&&(xr.hash=e),ze._getClient()?.updateBalance("solana"),Zt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:!1,token:tr.state.token?.symbol||"",amount:tr.state.sendTokenAmount,network:J.state.activeCaipNetwork?.caipNetworkId||"",hash:e||""}}),tr.resetSend()},resetSend(){xr.token=void 0,xr.sendTokenAmount=void 0,xr.receiverAddress=void 0,xr.receiverProfileImageUrl=void 0,xr.receiverProfileName=void 0,xr.loading=!1,xr.tokenBalances=[]}},tr=Kc(phe),T3={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},K_={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ve=Dn({chains:Hce(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{connectionControllerClient:void 0},isSwitchingNamespace:!1}),IJ={state:Ve,subscribe(t){return ui(Ve,()=>{t(Ve)})},subscribeKey(t,e){return li(Ve,t,e)},subscribeAccountStateProp(t,e,r){const n=r||Ve.activeChain;return n?li(Ve.chains.get(n)?.accountState||{},t,e):()=>{}},subscribeChainProp(t,e,r){let n;return ui(Ve.chains,()=>{const s=r||Ve.activeChain;if(s){const i=Ve.chains.get(s)?.[t];n!==i&&(n=i,e(i))}})},initialize(t,e,r){const{chainId:n,namespace:s}=Ae.getActiveNetworkProps(),i=e?.find(l=>l.id.toString()===n?.toString()),a=t.find(l=>l?.namespace===s)||t?.[0],c=t.map(l=>l.namespace).filter(l=>l!==void 0),u=we.state.enableEmbedded?new Set([...c]):new Set([...e?.map(l=>l.chainNamespace)??[]]);(t?.length===0||!a)&&(Ve.noAdapters=!0),Ve.noAdapters||(Ve.activeChain=a?.namespace,Ve.activeCaipNetwork=i,J.setChainNetworkData(a?.namespace,{caipNetwork:i}),Ve.activeChain&&Nu.set({activeChain:a?.namespace})),u.forEach(l=>{const d=e?.filter(g=>g.chainNamespace===l),f=Ae.getPreferredAccountTypes()||{},p={...we.state.defaultAccountTypes,...f};J.state.chains.set(l,{namespace:l,networkState:Dn({...K_,caipNetwork:d?.[0]}),accountState:Dn({...T3,preferredAccountType:p[l]}),caipNetworks:d??[],...r}),J.setRequestedCaipNetworks(d??[],l)})},removeAdapter(t){if(Ve.activeChain===t){const e=Array.from(Ve.chains.entries()).find(([r])=>r!==t);if(e){const r=e[1]?.caipNetworks?.[0];r&&J.setActiveCaipNetwork(r)}}Ve.chains.delete(t)},addAdapter(t,{connectionControllerClient:e},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Ve.chains.set(t.namespace,{namespace:t.namespace,networkState:{...K_,caipNetwork:r[0]},accountState:{...T3},caipNetworks:r,connectionControllerClient:e}),J.setRequestedCaipNetworks(r?.filter(n=>n.chainNamespace===t.namespace)??[],t.namespace)},addNetwork(t){const e=Ve.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];e.caipNetworks?.find(n=>n.id===t.id)||r.push(t),Ve.chains.set(t.chainNamespace,{...e,caipNetworks:r}),J.setRequestedCaipNetworks(r,t.chainNamespace),Re.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){const r=Ve.chains.get(t);if(r){const n=Ve.activeCaipNetwork?.id===e,s=[...r.caipNetworks?.filter(i=>i.id!==e)||[]];n&&r?.caipNetworks?.[0]&&J.setActiveCaipNetwork(r.caipNetworks[0]),Ve.chains.set(t,{...r,caipNetworks:s}),J.setRequestedCaipNetworks(s||[],t),s.length===0&&Re.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const r=Ve.chains.get(t);r&&(r.networkState={...r.networkState||K_,...e},Ve.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=Ve.chains.get(t);if(n){const s={...n.accountState||T3,...e};Ve.chains.set(t,{...n,accountState:s}),(Ve.chains.size===1||Ve.activeChain===t)&&e.caipAddress&&(Ve.activeCaipAddress=e.caipAddress)}},setChainNetworkData(t,e){if(!t)return;const r=Ve.chains.get(t);if(r){const n={...r.networkState||K_,...e};Ve.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){J.setChainAccountData(r,{[t]:e},n)},setActiveNamespace(t){Ve.activeChain=t;const e=t?Ve.chains.get(t):void 0,r=e?.networkState?.caipNetwork;r?.id&&t&&(Ve.activeCaipAddress=e?.accountState?.caipAddress,Ve.activeCaipNetwork=r,J.setChainNetworkData(t,{caipNetwork:r}),Ae.setActiveCaipNetworkId(r?.caipNetworkId),Nu.set({activeChain:t,selectedNetworkId:r?.caipNetworkId}))},setActiveCaipNetwork(t){if(!t)return;const e=Ve.activeChain===t.chainNamespace;e||J.setIsSwitchingNamespace(!0);const r=Ve.chains.get(t.chainNamespace);Ve.activeChain=t.chainNamespace,Ve.activeCaipNetwork=t,J.setChainNetworkData(t.chainNamespace,{caipNetwork:t});let n=r?.accountState?.address;if(n)Ve.activeCaipAddress=`${t.chainNamespace}:${t.id}:${n}`;else if(e&&Ve.activeCaipAddress){const{address:i}=xs.parseCaipAddress(Ve.activeCaipAddress);n=i,Ve.activeCaipAddress=`${t.caipNetworkId}:${n}`}else Ve.activeCaipAddress=void 0;J.setChainAccountData(t.chainNamespace,{address:n,caipAddress:Ve.activeCaipAddress}),tr.resetSend(),Nu.set({activeChain:Ve.activeChain,selectedNetworkId:Ve.activeCaipNetwork?.caipNetworkId}),Ae.setActiveCaipNetworkId(t.caipNetworkId),!J.checkIfSupportedNetwork(t.chainNamespace)&&we.state.enableNetworkSwitch&&!we.state.allowUnsupportedChain&&!ze.state.wcBasic&&J.showUnsupportedChainUI()},addCaipNetwork(t){if(!t)return;const e=Ve.chains.get(t.chainNamespace);e&&e?.caipNetworks?.push(t)},async switchActiveNamespace(t){if(!t)return;const e=t!==J.state.activeChain,r=J.getNetworkData(t)?.caipNetwork,n=J.getCaipNetworkByNamespace(t,r?.id);e&&n&&await J.switchActiveNetwork(n)},async switchActiveNetwork(t,{throwOnFailure:e=!1}={}){const r=J.state.activeChain;if(!r)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=br.getProviderId(Ve.activeChain)==="AUTH",s=J.getAccountData(r)?.address,i=ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t.chainNamespace);try{if(s&&t.chainNamespace===r||n&&i){const o=SJ.get(t.chainNamespace);if(!o)throw new Error("Adapter not found");await o.switchNetwork({caipNetwork:t})}J.setActiveCaipNetwork(t)}catch(o){if(e)throw o}Zt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})},getConnectionControllerClient(t){const e=t||Ve.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=Ve.chains.get(e);if(!r?.connectionControllerClient)throw new Error("ConnectionController client not set");return r.connectionControllerClient},getNetworkProp(t,e){const r=Ve.chains.get(e)?.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=Ve.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=e?.networkState||{};return ke.sortRequestedNetworks(r,n).filter(o=>o?.id)},getAllRequestedCaipNetworks(){const t=[];return Ve.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const r=J.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){J.setAdapterNetworkState(e,{requestedCaipNetworks:t});const n=J.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(n));Re.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Ve.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const r=J.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(t){return t?Ve.chains.get(t)?.networkState?.caipNetwork:Ve.activeCaipNetwork},getActiveCaipAddress(){return Ve.activeCaipAddress},getApprovedCaipNetworkIds(t){return Ve.chains.get(t)?.networkState?.approvedCaipNetworkIds||[]},setApprovedCaipNetworksData(t,e){J.setAdapterNetworkState(t,e)},checkIfSupportedNetwork(t,e){const r=e||Ve.activeCaipNetwork?.caipNetworkId,n=J.getRequestedCaipNetworks(t);return n.length?n?.some(s=>s.caipNetworkId===r):!0},checkIfSupportedChainId(t){return Ve.activeChain?J.getRequestedCaipNetworks(Ve.activeChain)?.some(r=>r.id===t):!0},checkIfSmartAccountEnabled(){const t=FY.caipNetworkIdToNumber(Ve.activeCaipNetwork?.caipNetworkId);return!Ve.activeChain||!t?!1:!!(qs.get(ct.SMART_ACCOUNT_ENABLED_NETWORKS)?.split(",")||[])?.includes(t.toString())},showUnsupportedChainUI(){dr.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Ve.activeCaipNetwork;return!!(t?.chainNamespace&&wr.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){J.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const r=J.state.chains.get(e)?.accountState?.preferredAccountType,n=we.state.defaultAccountTypes[e];Ve.activeCaipAddress=void 0,J.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Re.removeConnectorId(e)},setIsSwitchingNamespace(t){Ve.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){const t=[];let e;if(Ve.chains.forEach(r=>{ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(n=>n===r.namespace)&&r.namespace&&t.push(r.namespace)}),t.length>0){const r=t[0];return e=r?Ve.chains.get(r)?.caipNetworks?.[0]:void 0,e}},getAccountData(t){const e=t||Ve.activeChain;if(e)return J.state.chains.get(e)?.accountState},getNetworkData(t){const e=t||Ve.activeChain;if(e)return J.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(t,e){if(!t)return;const r=J.state.chains.get(t),n=r?.caipNetworks?.find(s=>s.id.toString()===e?.toString());return n||r?.networkState?.caipNetwork||r?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const t=Re.state.filterByNamespace;return(t?[Ve.chains.get(t)]:Array.from(Ve.chains.values())).flatMap(r=>r?.caipNetworks||[]).map(r=>r.caipNetworkId)},getCaipNetworks(t){return t?J.getRequestedCaipNetworks(t):J.getAllRequestedCaipNetworks()},getCaipNetworkById(t,e){return IJ.getCaipNetworks(e).find(r=>r.id.toString()===t.toString()||r.caipNetworkId.toString()===t.toString())},setLastConnectedSIWECaipNetwork(t){Ve.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Ve.lastConnectedSIWECaipNetwork},async fetchTokenBalance(t){const e=J.getAccountData();if(!e)return[];const r=J.state.activeCaipNetwork?.caipNetworkId,n=J.state.activeCaipNetwork?.chainNamespace,s=J.state.activeCaipAddress,i=s?ke.getPlainAddress(s):void 0;if(J.setAccountProp("balanceLoading",!0,n),e.lastRetry&&!ke.isAllowedRetry(e.lastRetry,30*wr.ONE_SEC_MS))return J.setAccountProp("balanceLoading",!1,n),[];try{if(i&&r&&n){const o=await M4.getMyTokensWithBalance();return J.setAccountProp("tokenBalance",o,n),J.setAccountProp("lastRetry",void 0,n),J.setAccountProp("balanceLoading",!1,n),o}}catch(o){J.setAccountProp("lastRetry",Date.now(),n),t?.(o),vl.showError("Token Balance Unavailable")}finally{J.setAccountProp("balanceLoading",!1,n)}return[]},isCaipNetworkDisabled(t){const e=t.chainNamespace,r=!!J.getAccountData(e)?.caipAddress,n=J.getAllApprovedCaipNetworkIds(),s=J.getNetworkProp("supportsAllNetworks",e)!==!1,i=Re.getConnectorId(e),o=Re.getAuthConnector(),a=i===ae.CONNECTOR_ID.AUTH&&o;return!r||s||a?!1:!n?.includes(t.caipNetworkId)}},J=Kc(IJ),ghe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const r=J.state.activeCaipNetwork,n=J.state.activeChain,s=It.state.data;if(t.id===r?.id)return;const o=!!J.getAccountData(n)?.address,a=!!J.getAccountData(t.chainNamespace)?.address,c=t.chainNamespace!==n,l=Re.getConnectorId(n)===ae.CONNECTOR_ID.AUTH,d=ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(f=>f===t.chainNamespace);e||l&&d?It.push("SwitchNetwork",{...s,network:t}):o&&c&&!a?It.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):It.push("SwitchNetwork",{...s,network:t})}},Wo=Dn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),mhe={state:Wo,subscribe(t){return ui(Wo,()=>t(Wo))},subscribeKey(t,e){return li(Wo,t,e)},async open(t){const e=t?.namespace,r=J.state.activeChain,n=e&&e!==r,s=J.getAccountData(t?.namespace)?.caipAddress,i=J.state.noAdapters;if(ze.state.wcBasic?pt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1}):await pt.prefetch(),Re.setFilterByNamespace(t?.namespace),dr.setLoading(!0,e),e&&n){const o=J.getNetworkData(e)?.caipNetwork||J.getRequestedCaipNetworks(e)[0];o&&(i?(await J.switchActiveNetwork(o),It.push("ConnectingWalletConnectBasic")):ghe.onSwitchNetwork({network:o,ignoreSwitchConfirmation:!0}))}else we.state.manualWCControl||i&&!s?ke.isMobile()?It.reset("AllWallets"):It.reset("ConnectingWalletConnectBasic"):t?.view?It.reset(t.view,t.data):s?It.reset("Account"):It.reset("Connect");Wo.open=!0,Nu.set({open:!0}),Zt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=we.state.enableEmbedded,e=!!J.state.activeCaipAddress;Wo.open&&Zt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Wo.open=!1,It.reset("Connect"),dr.clearLoading(),t?e?It.replace("Account"):It.push("Connect"):Nu.set({open:!1}),ze.resetUri()},setLoading(t,e){e&&Wo.loadingNamespaceMap.set(e,t),Wo.loading=t,Nu.set({loading:t})},clearLoading(){Wo.loadingNamespaceMap.clear(),Wo.loading=!1,Nu.set({loading:!1})},shake(){Wo.shake||(Wo.shake=!0,setTimeout(()=>{Wo.shake=!1},500))}},dr=Kc(mhe),N1={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},p8={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},yhe={providers:WY,selectedProvider:null,error:null,purchaseCurrency:N1,paymentCurrency:p8,purchaseCurrencies:[N1],paymentCurrencies:[],quotesLoading:!1},Nr=Dn(yhe),bhe={state:Nr,subscribe(t){return ui(Nr,()=>t(Nr))},subscribeKey(t,e){return li(Nr,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=J.state.activeChain,r=e===ae.CHAIN.SOLANA?"SOL":"USDC",n=e?J.state.chains.get(e)?.accountState?.address??"":"",s=new URL(t.url);s.searchParams.append("publicKey",nue),s.searchParams.append("destinationCurrencyCode",r),s.searchParams.append("walletAddress",n),s.searchParams.append("externalCustomerId",we.state.projectId),Nr.selectedProvider={...t,url:s.toString()}}else Nr.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,r=WY.filter(n=>e.includes(n.name));Nr.providers=r}else Nr.providers=[]},setPurchaseCurrency(t){Nr.purchaseCurrency=t},setPaymentCurrency(t){Nr.paymentCurrency=t},setPurchaseAmount(t){g8.state.purchaseAmount=t},setPaymentAmount(t){g8.state.paymentAmount=t},async getAvailableCurrencies(){const t=await kt.getOnrampOptions();Nr.purchaseCurrencies=t.purchaseCurrencies,Nr.paymentCurrencies=t.paymentCurrencies,Nr.paymentCurrency=t.paymentCurrencies[0]||p8,Nr.purchaseCurrency=t.purchaseCurrencies[0]||N1,await pt.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await pt.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){Nr.quotesLoading=!0;try{const t=await kt.getOnrampQuote({purchaseCurrency:Nr.purchaseCurrency,paymentCurrency:Nr.paymentCurrency,amount:Nr.paymentAmount?.toString()||"0",network:Nr.purchaseCurrency?.symbol});return Nr.quotesLoading=!1,Nr.purchaseAmount=Number(t?.purchaseAmount.amount),t}catch(t){return Nr.error=t.message,Nr.quotesLoading=!1,null}finally{Nr.quotesLoading=!1}},resetState(){Nr.selectedProvider=null,Nr.error=null,Nr.purchaseCurrency=N1,Nr.paymentCurrency=p8,Nr.purchaseCurrencies=[N1],Nr.paymentCurrencies=[],Nr.paymentAmount=void 0,Nr.purchaseAmount=void 0,Nr.quotesLoading=!1}},g8=Kc(bhe);var Z_={exports:{}},_U;function TJ(){if(_U)return Z_.exports;_U=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(T,P,D){return Function.prototype.apply.call(T,P,D)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:r=function(T){return Object.getOwnPropertyNames(T)};function n(_){console&&console.warn&&console.warn(_)}var s=Number.isNaN||function(T){return T!==T};function i(){i.init.call(this)}Z_.exports=i,Z_.exports.once=E,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(_){if(typeof _!="number"||_<0||s(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");o=_}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||s(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function c(_){return _._maxListeners===void 0?i.defaultMaxListeners:_._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(T){for(var P=[],D=1;D<arguments.length;D++)P.push(arguments[D]);var L=T==="error",I=this._events;if(I!==void 0)L=L&&I.error===void 0;else if(!L)return!1;if(L){var U;if(P.length>0&&(U=P[0]),U instanceof Error)throw U;var F=new Error("Unhandled error."+(U?" ("+U.message+")":""));throw F.context=U,F}var B=I[T];if(B===void 0)return!1;if(typeof B=="function")e(B,this,P);else for(var A=B.length,m=g(B,A),D=0;D<A;++D)e(m[D],this,P);return!0};function u(_,T,P,D){var L,I,U;if(a(P),I=_._events,I===void 0?(I=_._events=Object.create(null),_._eventsCount=0):(I.newListener!==void 0&&(_.emit("newListener",T,P.listener?P.listener:P),I=_._events),U=I[T]),U===void 0)U=I[T]=P,++_._eventsCount;else if(typeof U=="function"?U=I[T]=D?[P,U]:[U,P]:D?U.unshift(P):U.push(P),L=c(_),L>0&&U.length>L&&!U.warned){U.warned=!0;var F=new Error("Possible EventEmitter memory leak detected. "+U.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");F.name="MaxListenersExceededWarning",F.emitter=_,F.type=T,F.count=U.length,n(F)}return _}i.prototype.addListener=function(T,P){return u(this,T,P,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(T,P){return u(this,T,P,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(_,T,P){var D={fired:!1,wrapFn:void 0,target:_,type:T,listener:P},L=l.bind(D);return L.listener=P,D.wrapFn=L,L}i.prototype.once=function(T,P){return a(P),this.on(T,d(this,T,P)),this},i.prototype.prependOnceListener=function(T,P){return a(P),this.prependListener(T,d(this,T,P)),this},i.prototype.removeListener=function(T,P){var D,L,I,U,F;if(a(P),L=this._events,L===void 0)return this;if(D=L[T],D===void 0)return this;if(D===P||D.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete L[T],L.removeListener&&this.emit("removeListener",T,D.listener||P));else if(typeof D!="function"){for(I=-1,U=D.length-1;U>=0;U--)if(D[U]===P||D[U].listener===P){F=D[U].listener,I=U;break}if(I<0)return this;I===0?D.shift():h(D,I),D.length===1&&(L[T]=D[0]),L.removeListener!==void 0&&this.emit("removeListener",T,F||P)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(T){var P,D,L;if(D=this._events,D===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete D[T]),this;if(arguments.length===0){var I=Object.keys(D),U;for(L=0;L<I.length;++L)U=I[L],U!=="removeListener"&&this.removeAllListeners(U);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=D[T],typeof P=="function")this.removeListener(T,P);else if(P!==void 0)for(L=P.length-1;L>=0;L--)this.removeListener(T,P[L]);return this};function f(_,T,P){var D=_._events;if(D===void 0)return[];var L=D[T];return L===void 0?[]:typeof L=="function"?P?[L.listener||L]:[L]:P?y(L):g(L,L.length)}i.prototype.listeners=function(T){return f(this,T,!0)},i.prototype.rawListeners=function(T){return f(this,T,!1)},i.listenerCount=function(_,T){return typeof _.listenerCount=="function"?_.listenerCount(T):p.call(_,T)},i.prototype.listenerCount=p;function p(_){var T=this._events;if(T!==void 0){var P=T[_];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function g(_,T){for(var P=new Array(T),D=0;D<T;++D)P[D]=_[D];return P}function h(_,T){for(;T+1<_.length;T++)_[T]=_[T+1];_.pop()}function y(_){for(var T=new Array(_.length),P=0;P<T.length;++P)T[P]=_[P].listener||_[P];return T}function E(_,T){return new Promise(function(P,D){function L(U){_.removeListener(T,I),D(U)}function I(){typeof _.removeListener=="function"&&_.removeListener("error",L),P([].slice.call(arguments))}C(_,T,I,{once:!0}),T!=="error"&&S(_,L,{once:!0})})}function S(_,T,P){typeof _.on=="function"&&C(_,"error",T,P)}function C(_,T,P,D){if(typeof _.on=="function")D.once?_.once(T,P):_.on(T,P);else if(typeof _.addEventListener=="function")_.addEventListener(T,function L(I){D.once&&_.removeEventListener(T,L),P(I)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}return Z_.exports}var Ys=TJ();const Vy=xa(Ys);var N3={};var m8=function(t,e){return m8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},m8(t,e)};function whe(t,e){m8(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var y8=function(){return y8=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},y8.apply(this,arguments)};function vhe(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Ehe(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function _he(t,e){return function(r,n){e(r,n,t)}}function Ahe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function xhe(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function Che(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function She(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Ihe(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function b8(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function NJ(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function The(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(NJ(arguments[e]));return t}function Nhe(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Lv(t){return this instanceof Lv?(this.v=t,this):new Lv(t)}function Phe(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){n[f]&&(s[f]=function(p){return new Promise(function(g,h){i.push([f,p,g,h])>1||a(f,p)})})}function a(f,p){try{c(n[f](p))}catch(g){d(i[0][3],g)}}function c(f){f.value instanceof Lv?Promise.resolve(f.value.v).then(u,l):d(i[0][2],f)}function u(f){a("next",f)}function l(f){a("throw",f)}function d(f,p){f(p),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Rhe(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:Lv(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Ohe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof b8=="function"?b8(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function khe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Bhe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Uhe(t){return t&&t.__esModule?t:{default:t}}function Mhe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Dhe(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const jhe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return y8},__asyncDelegator:Rhe,__asyncGenerator:Phe,__asyncValues:Ohe,__await:Lv,__awaiter:xhe,__classPrivateFieldGet:Mhe,__classPrivateFieldSet:Dhe,__createBinding:She,__decorate:Ehe,__exportStar:Ihe,__extends:whe,__generator:Che,__importDefault:Uhe,__importStar:Bhe,__makeTemplateObject:khe,__metadata:Ahe,__param:_he,__read:NJ,__rest:vhe,__spread:The,__spreadArrays:Nhe,__values:b8},Symbol.toStringTag,{value:"Module"})),kE=Ln(jhe);var P3={},Nb={},AU;function Lhe(){if(AU)return Nb;AU=1,Object.defineProperty(Nb,"__esModule",{value:!0}),Nb.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Nb.delay=t,Nb}var up={},R3={},lp={},xU;function Fhe(){return xU||(xU=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.ONE_THOUSAND=lp.ONE_HUNDRED=void 0,lp.ONE_HUNDRED=100,lp.ONE_THOUSAND=1e3),lp}var O3={},CU;function $he(){return CU||(CU=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365})(O3)),O3}var SU;function PJ(){return SU||(SU=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=kE;e.__exportStar(Fhe(),t),e.__exportStar($he(),t)})(R3)),R3}var IU;function qhe(){if(IU)return up;IU=1,Object.defineProperty(up,"__esModule",{value:!0}),up.fromMiliseconds=up.toMiliseconds=void 0;const t=PJ();function e(n){return n*t.ONE_THOUSAND}up.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return up.fromMiliseconds=r,up}var TU;function Hhe(){return TU||(TU=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=kE;e.__exportStar(Lhe(),t),e.__exportStar(qhe(),t)})(P3)),P3}var _g={},NU;function zhe(){if(NU)return _g;NU=1,Object.defineProperty(_g,"__esModule",{value:!0}),_g.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const s=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:s})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return _g.Watch=t,_g.default=t,_g}var k3={},Pb={},PU;function Whe(){if(PU)return Pb;PU=1,Object.defineProperty(Pb,"__esModule",{value:!0}),Pb.IWatch=void 0;class t{}return Pb.IWatch=t,Pb}var RU;function Vhe(){return RU||(RU=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),kE.__exportStar(Whe(),t)})(k3)),k3}var OU;function Ghe(){return OU||(OU=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=kE;e.__exportStar(Hhe(),t),e.__exportStar(zhe(),t),e.__exportStar(Vhe(),t),e.__exportStar(PJ(),t)})(N3)),N3}var he=Ghe();class lc{}let Khe=class extends lc{constructor(e){super()}};const kU=he.FIVE_SECONDS,dc={pulse:"heartbeat_pulse"};let RJ=class OJ extends Khe{constructor(e){super(e),this.events=new Ys.EventEmitter,this.interval=kU,this.interval=e?.interval||kU}static async init(e){const r=new OJ(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),he.toMiliseconds(this.interval))}pulse(){this.events.emit(dc.pulse)}};const Zhe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Yhe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Jhe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Xhe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Qhe(t);return}return e}function Qhe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Y_(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Jhe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Zhe.test(t)||Yhe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Xhe)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function epe(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function ei(t,...e){try{return epe(t(...e))}catch(r){return Promise.reject(r)}}function tpe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function rpe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function gI(t){if(tpe(t))return String(t);if(rpe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return gI(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const w8="base64:";function npe(t){return typeof t=="string"?t:w8+ope(t)}function spe(t){return typeof t!="string"||!t.startsWith(w8)?t:ipe(t.slice(w8.length))}function ipe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function ope(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function na(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function ape(...t){return na(t.join(":"))}function J_(t){return t=na(t),t?t+":":""}function cpe(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function upe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const lpe="memory",dpe=()=>{const t=new Map;return{name:lpe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function fpe(t={}){const e={mounts:{"":t.driver||dpe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=u=>{for(const l of e.mountpoints)if(u.startsWith(l))return{base:l,relativeKey:u.slice(l.length),driver:e.mounts[l]};return{base:"",relativeKey:u,driver:e.mounts[""]}},n=(u,l)=>e.mountpoints.filter(d=>d.startsWith(u)||l&&u.startsWith(d)).map(d=>({relativeBase:u.length>d.length?u.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(u,l)=>{if(e.watching){l=na(l);for(const d of e.watchListeners)d(u,l)}},i=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await BU(e.mounts[u],s,u)}},o=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},a=(u,l,d)=>{const f=new Map,p=g=>{let h=f.get(g.base);return h||(h={driver:g.driver,base:g.base,items:[]},f.set(g.base,h)),h};for(const g of u){const h=typeof g=="string",y=na(h?g:g.key),E=h?void 0:g.value,S=h||!g.options?l:{...l,...g.options},C=r(y);p(C).items.push({key:y,value:E,relativeKey:C.relativeKey,options:S})}return Promise.all([...f.values()].map(g=>d(g))).then(g=>g.flat())},c={hasItem(u,l={}){u=na(u);const{relativeKey:d,driver:f}=r(u);return ei(f.hasItem,d,l)},getItem(u,l={}){u=na(u);const{relativeKey:d,driver:f}=r(u);return ei(f.getItem,d,l).then(p=>Y_(p))},getItems(u,l={}){return a(u,l,d=>d.driver.getItems?ei(d.driver.getItems,d.items.map(f=>({key:f.relativeKey,options:f.options})),l).then(f=>f.map(p=>({key:ape(d.base,p.key),value:Y_(p.value)}))):Promise.all(d.items.map(f=>ei(d.driver.getItem,f.relativeKey,f.options).then(p=>({key:f.key,value:Y_(p)})))))},getItemRaw(u,l={}){u=na(u);const{relativeKey:d,driver:f}=r(u);return f.getItemRaw?ei(f.getItemRaw,d,l):ei(f.getItem,d,l).then(p=>spe(p))},async setItem(u,l,d={}){if(l===void 0)return c.removeItem(u);u=na(u);const{relativeKey:f,driver:p}=r(u);p.setItem&&(await ei(p.setItem,f,gI(l),d),p.watch||s("update",u))},async setItems(u,l){await a(u,l,async d=>{if(d.driver.setItems)return ei(d.driver.setItems,d.items.map(f=>({key:f.relativeKey,value:gI(f.value),options:f.options})),l);d.driver.setItem&&await Promise.all(d.items.map(f=>ei(d.driver.setItem,f.relativeKey,gI(f.value),f.options)))})},async setItemRaw(u,l,d={}){if(l===void 0)return c.removeItem(u,d);u=na(u);const{relativeKey:f,driver:p}=r(u);if(p.setItemRaw)await ei(p.setItemRaw,f,l,d);else if(p.setItem)await ei(p.setItem,f,npe(l),d);else return;p.watch||s("update",u)},async removeItem(u,l={}){typeof l=="boolean"&&(l={removeMeta:l}),u=na(u);const{relativeKey:d,driver:f}=r(u);f.removeItem&&(await ei(f.removeItem,d,l),(l.removeMeta||l.removeMata)&&await ei(f.removeItem,d+"$",l),f.watch||s("remove",u))},async getMeta(u,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),u=na(u);const{relativeKey:d,driver:f}=r(u),p=Object.create(null);if(f.getMeta&&Object.assign(p,await ei(f.getMeta,d,l)),!l.nativeOnly){const g=await ei(f.getItem,d+"$",l).then(h=>Y_(h));g&&typeof g=="object"&&(typeof g.atime=="string"&&(g.atime=new Date(g.atime)),typeof g.mtime=="string"&&(g.mtime=new Date(g.mtime)),Object.assign(p,g))}return p},setMeta(u,l,d={}){return this.setItem(u+"$",l,d)},removeMeta(u,l={}){return this.removeItem(u+"$",l)},async getKeys(u,l={}){u=J_(u);const d=n(u,!0);let f=[];const p=[];let g=!0;for(const y of d){y.driver.flags?.maxDepth||(g=!1);const E=await ei(y.driver.getKeys,y.relativeBase,l);for(const S of E){const C=y.mountpoint+na(S);f.some(_=>C.startsWith(_))||p.push(C)}f=[y.mountpoint,...f.filter(S=>!S.startsWith(y.mountpoint))]}const h=l.maxDepth!==void 0&&!g;return p.filter(y=>(!h||cpe(y,l.maxDepth))&&upe(y,u))},async clear(u,l={}){u=J_(u),await Promise.all(n(u,!1).map(async d=>{if(d.driver.clear)return ei(d.driver.clear,d.relativeBase,l);if(d.driver.removeItem){const f=await d.driver.getKeys(d.relativeBase||"",l);return Promise.all(f.map(p=>d.driver.removeItem(p,l)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>UU(u)))},async watch(u){return await i(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(l=>l!==u),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(u,l){if(u=J_(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((d,f)=>f.length-d.length)),e.mounts[u]=l,e.watching&&Promise.resolve(BU(l,s,u)).then(d=>{e.unwatch[u]=d}).catch(console.error),c},async unmount(u,l=!0){u=J_(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&(e.unwatch[u]?.(),delete e.unwatch[u]),l&&await UU(e.mounts[u]),e.mountpoints=e.mountpoints.filter(d=>d!==u),delete e.mounts[u])},getMount(u=""){u=na(u)+":";const l=r(u);return{driver:l.driver,base:l.base}},getMounts(u="",l={}){return u=na(u),n(u,l.parents).map(f=>({driver:f.driver,base:f.mountpoint}))},keys:(u,l={})=>c.getKeys(u,l),get:(u,l={})=>c.getItem(u,l),set:(u,l,d={})=>c.setItem(u,l,d),has:(u,l={})=>c.hasItem(u,l),del:(u,l={})=>c.removeItem(u,l),remove:(u,l={})=>c.removeItem(u,l)};return c}function BU(t,e,r){return t.watch?t.watch((n,s)=>e(n,r+s)):()=>{}}async function UU(t){typeof t.dispose=="function"&&await ei(t.dispose)}function G0(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function kJ(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=G0(r);return(s,i)=>n.then(o=>i(o.transaction(e,s).objectStore(e)))}let B3;function BE(){return B3||(B3=kJ("keyval-store","keyval")),B3}function MU(t,e=BE()){return e("readonly",r=>G0(r.get(t)))}function hpe(t,e,r=BE()){return r("readwrite",n=>(n.put(e,t),G0(n.transaction)))}function ppe(t,e=BE()){return e("readwrite",r=>(r.delete(t),G0(r.transaction)))}function gpe(t=BE()){return t("readwrite",e=>(e.clear(),G0(e.transaction)))}function mpe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},G0(t.transaction)}function ype(t=BE()){return t("readonly",e=>{if(e.getAllKeys)return G0(e.getAllKeys());const r=[];return mpe(e,n=>r.push(n.key)).then(()=>r)})}const bpe="idb-keyval";var wpe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=s=>e+s;let n;return t.dbName&&t.storeName&&(n=kJ(t.dbName,t.storeName)),{name:bpe,options:t,async hasItem(s){return!(typeof await MU(r(s),n)>"u")},async getItem(s){return await MU(r(s),n)??null},setItem(s,i){return hpe(r(s),i,n)},removeItem(s){return ppe(r(s),n)},getKeys(){return ype(n)},clear(){return gpe(n)}}};const vpe="WALLET_CONNECT_V2_INDEXED_DB",Epe="keyvaluestorage";let _pe=class{constructor(){this.indexedDb=fpe({driver:wpe({dbName:vpe,storeName:Epe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Hc(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var U3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mI={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof U3<"u"&&U3.localStorage?mI.exports=U3.localStorage:typeof window<"u"&&window.localStorage?mI.exports=window.localStorage:mI.exports=new e})();function Ape(t){var e;return[t[0],rf((e=t[1])!=null?e:"")]}let xpe=class{constructor(){this.localStorage=mI.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Ape)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return rf(r)}async setItem(e,r){this.localStorage.setItem(e,Hc(r))}async removeItem(e){this.localStorage.removeItem(e)}};const Cpe="wc_storage_version",DU=1,Spe=async(t,e,r)=>{const n=Cpe,s=await e.getItem(n);if(s&&s>=DU){r(e);return}const i=await t.getKeys();if(!i.length){r(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await t.getItem(a);await e.setItem(a,u),o.push(a)}}await e.setItem(n,DU),r(e),Ipe(t,o)},Ipe=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let BJ=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new xpe;this.storage=e;try{const r=new _pe;Spe(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var Tpe=Object.defineProperty,Npe=(t,e,r)=>e in t?Tpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jU=(t,e,r)=>Npe(t,typeof e!="symbol"?e+"":e,r);let Ppe=class extends lc{constructor(e){super(),this.opts=e,jU(this,"protocol","wc"),jU(this,"version",2)}};var Rpe=Object.defineProperty,Ope=(t,e,r)=>e in t?Rpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kpe=(t,e,r)=>Ope(t,e+"",r);let Bpe=class extends lc{constructor(e,r){super(),this.core=e,this.logger=r,kpe(this,"records",new Map)}},Upe=class{constructor(e,r){this.logger=e,this.core=r}},Mpe=class extends lc{constructor(e,r){super(),this.relayer=e,this.logger=r}},Dpe=class extends lc{constructor(e){super()}},jpe=class{constructor(e,r,n,s){this.core=e,this.logger=r,this.name=n}},Lpe=class extends lc{constructor(e,r){super(),this.relayer=e,this.logger=r}},Fpe=class extends lc{constructor(e,r){super(),this.core=e,this.logger=r}},$pe=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},qpe=class{constructor(e,r){this.projectId=e,this.logger=r}},Hpe=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};var zpe=Object.defineProperty,Wpe=(t,e,r)=>e in t?zpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,LU=(t,e,r)=>Wpe(t,typeof e!="symbol"?e+"":e,r);let Vpe=class{constructor(e){this.opts=e,LU(this,"protocol","wc"),LU(this,"version",2)}},Gpe=class{constructor(e){this.client=e}};function Kpe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function UJ(t,...e){if(!Kpe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function FU(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Zpe(t,e){UJ(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Ag=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const M3=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Ype(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function MJ(t){return typeof t=="string"&&(t=Ype(t)),UJ(t),t}let Jpe=class{clone(){return this._cloneInto()}};function Xpe(t){const e=n=>t().update(MJ(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function DJ(t=32){if(Ag&&typeof Ag.getRandomValues=="function")return Ag.getRandomValues(new Uint8Array(t));if(Ag&&typeof Ag.randomBytes=="function")return Ag.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Qpe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}let e0e=class extends Jpe{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=M3(this.buffer)}update(e){FU(this);const{view:r,buffer:n,blockLen:s}=this;e=MJ(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=M3(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){FU(this),Zpe(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;Qpe(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=M3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};const X_=BigInt(2**32-1),v8=BigInt(32);function jJ(t,e=!1){return e?{h:Number(t&X_),l:Number(t>>v8&X_)}:{h:Number(t>>v8&X_)|0,l:Number(t&X_)|0}}function t0e(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=jJ(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const r0e=(t,e)=>BigInt(t>>>0)<<v8|BigInt(e>>>0),n0e=(t,e,r)=>t>>>r,s0e=(t,e,r)=>t<<32-r|e>>>r,i0e=(t,e,r)=>t>>>r|e<<32-r,o0e=(t,e,r)=>t<<32-r|e>>>r,a0e=(t,e,r)=>t<<64-r|e>>>r-32,c0e=(t,e,r)=>t>>>r-32|e<<64-r,u0e=(t,e)=>e,l0e=(t,e)=>t,d0e=(t,e,r)=>t<<r|e>>>32-r,f0e=(t,e,r)=>e<<r|t>>>32-r,h0e=(t,e,r)=>e<<r-32|t>>>64-r,p0e=(t,e,r)=>t<<r-32|e>>>64-r;function g0e(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const m0e=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),y0e=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,b0e=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),w0e=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,v0e=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),E0e=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,er={fromBig:jJ,split:t0e,toBig:r0e,shrSH:n0e,shrSL:s0e,rotrSH:i0e,rotrSL:o0e,rotrBH:a0e,rotrBL:c0e,rotr32H:u0e,rotr32L:l0e,rotlSH:d0e,rotlSL:f0e,rotlBH:h0e,rotlBL:p0e,add:g0e,add3L:m0e,add3H:y0e,add4L:b0e,add4H:w0e,add5H:E0e,add5L:v0e},[_0e,A0e]=er.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),bf=new Uint32Array(80),wf=new Uint32Array(80);let x0e=class extends e0e{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:p,Gl:g,Hh:h,Hl:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=p|0,this.Gl=g|0,this.Hh=h|0,this.Hl=y|0}process(e,r){for(let C=0;C<16;C++,r+=4)bf[C]=e.getUint32(r),wf[C]=e.getUint32(r+=4);for(let C=16;C<80;C++){const _=bf[C-15]|0,T=wf[C-15]|0,P=er.rotrSH(_,T,1)^er.rotrSH(_,T,8)^er.shrSH(_,T,7),D=er.rotrSL(_,T,1)^er.rotrSL(_,T,8)^er.shrSL(_,T,7),L=bf[C-2]|0,I=wf[C-2]|0,U=er.rotrSH(L,I,19)^er.rotrBH(L,I,61)^er.shrSH(L,I,6),F=er.rotrSL(L,I,19)^er.rotrBL(L,I,61)^er.shrSL(L,I,6),B=er.add4L(D,F,wf[C-7],wf[C-16]),A=er.add4H(B,P,U,bf[C-7],bf[C-16]);bf[C]=A|0,wf[C]=B|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:p,Fl:g,Gh:h,Gl:y,Hh:E,Hl:S}=this;for(let C=0;C<80;C++){const _=er.rotrSH(d,f,14)^er.rotrSH(d,f,18)^er.rotrBH(d,f,41),T=er.rotrSL(d,f,14)^er.rotrSL(d,f,18)^er.rotrBL(d,f,41),P=d&p^~d&h,D=f&g^~f&y,L=er.add5L(S,T,D,A0e[C],wf[C]),I=er.add5H(L,E,_,P,_0e[C],bf[C]),U=L|0,F=er.rotrSH(n,s,28)^er.rotrBH(n,s,34)^er.rotrBH(n,s,39),B=er.rotrSL(n,s,28)^er.rotrBL(n,s,34)^er.rotrBL(n,s,39),A=n&i^n&a^i&a,m=s&o^s&c^o&c;E=h|0,S=y|0,h=p|0,y=g|0,p=d|0,g=f|0,{h:d,l:f}=er.add(u|0,l|0,I|0,U|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const b=er.add3L(U,B,m);n=er.add3H(b,I,F,A),s=b|0}({h:n,l:s}=er.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=er.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=er.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=er.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=er.add(this.Eh|0,this.El|0,d|0,f|0),{h:p,l:g}=er.add(this.Fh|0,this.Fl|0,p|0,g|0),{h,l:y}=er.add(this.Gh|0,this.Gl|0,h|0,y|0),{h:E,l:S}=er.add(this.Hh|0,this.Hl|0,E|0,S|0),this.set(n,s,i,o,a,c,u,l,d,f,p,g,h,y,E,S)}roundClean(){bf.fill(0),wf.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const C0e=Xpe(()=>new x0e);const D4=BigInt(0),LJ=BigInt(1),S0e=BigInt(2);function j4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function L4(t){if(!j4(t))throw new Error("Uint8Array expected")}function D3(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const I0e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function F4(t){L4(t);let e="";for(let r=0;r<t.length;r++)e+=I0e[t[r]];return e}function FJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?D4:BigInt("0x"+t)}const Jl={_0:48,_9:57,A:65,F:70,a:97,f:102};function $U(t){if(t>=Jl._0&&t<=Jl._9)return t-Jl._0;if(t>=Jl.A&&t<=Jl.F)return t-(Jl.A-10);if(t>=Jl.a&&t<=Jl.f)return t-(Jl.a-10)}function $J(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=$U(t.charCodeAt(i)),a=$U(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function T0e(t){return FJ(F4(t))}function yI(t){return L4(t),FJ(F4(Uint8Array.from(t).reverse()))}function qJ(t,e){return $J(t.toString(16).padStart(e*2,"0"))}function E8(t,e){return qJ(t,e).reverse()}function Xl(t,e,r){let n;if(typeof e=="string")try{n=$J(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(j4(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function qU(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];L4(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}const j3=t=>typeof t=="bigint"&&D4<=t;function N0e(t,e,r){return j3(t)&&j3(e)&&j3(r)&&e<=t&&t<r}function Rb(t,e,r,n){if(!N0e(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function P0e(t){let e;for(e=0;t>D4;t>>=LJ,e+=1);return e}const R0e=t=>(S0e<<BigInt(t-1))-LJ,O0e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||j4(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function $4(t,e,r={}){const n=(s,i,o)=>{const a=O0e[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}function HU(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const ci=BigInt(0),Cs=BigInt(1),Wp=BigInt(2),k0e=BigInt(3),_8=BigInt(4),zU=BigInt(5),WU=BigInt(8);function Ws(t,e){const r=t%e;return r>=ci?r:e+r}function B0e(t,e,r){if(e<ci)throw new Error("invalid exponent, negatives unsupported");if(r<=ci)throw new Error("invalid modulus");if(r===Cs)return ci;let n=Cs;for(;e>ci;)e&Cs&&(n=n*t%r),t=t*t%r,e>>=Cs;return n}function Ju(t,e,r){let n=t;for(;e-- >ci;)n*=n,n%=r;return n}function VU(t,e){if(t===ci)throw new Error("invert: expected non-zero number");if(e<=ci)throw new Error("invert: expected positive modulus, got "+e);let r=Ws(t,e),n=e,s=ci,i=Cs;for(;r!==ci;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==Cs)throw new Error("invert: does not exist");return Ws(s,e)}function U0e(t){const e=(t-Cs)/Wp;let r,n,s;for(r=t-Cs,n=0;r%Wp===ci;r/=Wp,n++);for(s=Wp;s<t&&B0e(s,e,t)!==t-Cs;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+Cs)/_8;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(r+Cs)/Wp;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,u=o.pow(o.mul(o.ONE,s),r),l=o.pow(a,i),d=o.pow(a,r);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let g=o.sqr(d);f<c&&!o.eql(g,o.ONE);f++)g=o.sqr(g);const p=o.pow(u,Cs<<BigInt(c-f-1));u=o.sqr(p),l=o.mul(l,p),d=o.mul(d,u),c=f}return l}}function M0e(t){if(t%_8===k0e){const e=(t+Cs)/_8;return function(r,n){const s=r.pow(n,e);if(!r.eql(r.sqr(s),n))throw new Error("Cannot find square root");return s}}if(t%WU===zU){const e=(t-zU)/WU;return function(r,n){const s=r.mul(n,Wp),i=r.pow(s,e),o=r.mul(n,i),a=r.mul(r.mul(o,Wp),i),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return U0e(t)}const D0e=(t,e)=>(Ws(t,e)&Cs)===Cs,j0e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function L0e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=j0e.reduce((n,s)=>(n[s]="function",n),e);return $4(t,r)}function F0e(t,e,r){if(r<ci)throw new Error("invalid exponent, negatives unsupported");if(r===ci)return t.ONE;if(r===Cs)return e;let n=t.ONE,s=e;for(;r>ci;)r&Cs&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Cs;return n}function $0e(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function HJ(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function zJ(t,e,r=!1,n={}){if(t<=ci)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=HJ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:i,MASK:R0e(s),ZERO:ci,ONE:Cs,create:c=>Ws(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ci<=c&&c<t},is0:c=>c===ci,isOdd:c=>(c&Cs)===Cs,neg:c=>Ws(-c,t),eql:(c,u)=>c===u,sqr:c=>Ws(c*c,t),add:(c,u)=>Ws(c+u,t),sub:(c,u)=>Ws(c-u,t),mul:(c,u)=>Ws(c*u,t),pow:(c,u)=>F0e(a,c,u),div:(c,u)=>Ws(c*VU(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>VU(c,t),sqrt:n.sqrt||(c=>(o||(o=M0e(t)),o(a,c))),invertBatch:c=>$0e(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?E8(c,i):qJ(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?yI(c):T0e(c)}});return Object.freeze(a)}const GU=BigInt(0),Q_=BigInt(1);function L3(t,e){const r=e.negate();return t?r:e}function WJ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function F3(t,e){WJ(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function q0e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function H0e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const $3=new WeakMap,VJ=new WeakMap;function q3(t){return VJ.get(t)||1}function z0e(t,e){return{constTimeNegate:L3,hasPrecomputes(r){return q3(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>GU;)n&Q_&&(s=s.add(i)),i=i.double(),n>>=Q_;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=F3(n,e),o=[];let a=r,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){const{windows:i,windowSize:o}=F3(r,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**r-1),l=2**r,d=BigInt(r);for(let f=0;f<i;f++){const p=f*o;let g=Number(s&u);s>>=d,g>o&&(g-=l,s+=Q_);const h=p,y=p+Math.abs(g)-1,E=f%2!==0,S=g<0;g===0?c=c.add(L3(E,n[h])):a=a.add(L3(S,n[y]))}return{p:a,f:c}},wNAFUnsafe(r,n,s,i=t.ZERO){const{windows:o,windowSize:a}=F3(r,e),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let d=0;d<o;d++){const f=d*a;if(s===GU)break;let p=Number(s&c);if(s>>=l,p>a&&(p-=u,s+=Q_),p===0)continue;let g=n[f+Math.abs(p)-1];p<0&&(g=g.negate()),i=i.add(g)}return i},getPrecomputes(r,n,s){let i=$3.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&$3.set(n,s(i))),i},wNAFCached(r,n,s){const i=q3(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=q3(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){WJ(n,e),VJ.set(r,n),$3.delete(r)}}}function W0e(t,e,r,n){if(q0e(r,t),H0e(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=P0e(BigInt(r.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let d=u;d>=0;d-=o){c.fill(s);for(let p=0;p<n.length;p++){const g=n[p],h=Number(g>>BigInt(d)&BigInt(a));c[h]=c[h].add(r[p])}let f=s;for(let p=c.length-1,g=s;p>0;p--)g=g.add(c[p]),f=f.add(g);if(l=l.add(f),d!==0)for(let p=0;p<o;p++)l=l.double()}return l}function V0e(t){return L0e(t.Fp),$4(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...HJ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const su=BigInt(0),Vo=BigInt(1),e2=BigInt(2),G0e=BigInt(8),K0e={zip215:!0};function Z0e(t){const e=V0e(t);return $4(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Y0e(t){const e=Z0e(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,u=e2<<BigInt(a*8)-Vo,l=r.create,d=zJ(e.n,e.nBitLength),f=e.uvRatio||((b,w)=>{try{return{isValid:!0,value:r.sqrt(b*r.inv(w))}}catch{return{isValid:!1,value:su}}}),p=e.adjustScalarBytes||(b=>b),g=e.domain||((b,w,x)=>{if(D3("phflag",x),w.length||x)throw new Error("Contexts/pre-hash are not supported");return b});function h(b,w){Rb("coordinate "+b,w,su,u)}function y(b){if(!(b instanceof C))throw new Error("ExtendedPoint expected")}const E=HU((b,w)=>{const{ex:x,ey:M,ez:k}=b,j=b.is0();w==null&&(w=j?G0e:r.inv(k));const N=l(x*w),v=l(M*w),R=l(k*w);if(j)return{x:su,y:Vo};if(R!==Vo)throw new Error("invZ was invalid");return{x:N,y:v}}),S=HU(b=>{const{a:w,d:x}=e;if(b.is0())throw new Error("bad point: ZERO");const{ex:M,ey:k,ez:j,et:N}=b,v=l(M*M),R=l(k*k),$=l(j*j),O=l($*$),H=l(v*w),W=l($*l(H+R)),G=l(O+l(x*l(v*R)));if(W!==G)throw new Error("bad point: equation left != right (1)");const K=l(M*k),Q=l(j*N);if(K!==Q)throw new Error("bad point: equation left != right (2)");return!0});class C{constructor(w,x,M,k){this.ex=w,this.ey=x,this.ez=M,this.et=k,h("x",w),h("y",x),h("z",M),h("t",k),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof C)throw new Error("extended point not allowed");const{x,y:M}=w||{};return h("x",x),h("y",M),new C(x,M,Vo,l(x*M))}static normalizeZ(w){const x=r.invertBatch(w.map(M=>M.ez));return w.map((M,k)=>M.toAffine(x[k])).map(C.fromAffine)}static msm(w,x){return W0e(C,d,w,x)}_setWindowSize(w){P.setWindowSize(this,w)}assertValidity(){S(this)}equals(w){y(w);const{ex:x,ey:M,ez:k}=this,{ex:j,ey:N,ez:v}=w,R=l(x*v),$=l(j*k),O=l(M*v),H=l(N*k);return R===$&&O===H}is0(){return this.equals(C.ZERO)}negate(){return new C(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:w}=e,{ex:x,ey:M,ez:k}=this,j=l(x*x),N=l(M*M),v=l(e2*l(k*k)),R=l(w*j),$=x+M,O=l(l($*$)-j-N),H=R+N,W=H-v,G=R-N,K=l(O*W),Q=l(H*G),re=l(O*G),de=l(W*H);return new C(K,Q,de,re)}add(w){y(w);const{a:x,d:M}=e,{ex:k,ey:j,ez:N,et:v}=this,{ex:R,ey:$,ez:O,et:H}=w;if(x===BigInt(-1)){const At=l((j-k)*($+R)),Ee=l((j+k)*($-R)),fe=l(Ee-At);if(fe===su)return this.double();const Mt=l(N*e2*H),bt=l(v*e2*O),jt=bt+Mt,ge=Ee+At,ve=bt-Mt,V=l(jt*fe),q=l(ge*ve),z=l(jt*ve),X=l(fe*ge);return new C(V,q,X,z)}const W=l(k*R),G=l(j*$),K=l(v*M*H),Q=l(N*O),re=l((k+j)*(R+$)-W-G),de=Q-K,le=Q+K,se=l(G-x*W),be=l(re*de),We=l(le*se),Ne=l(re*se),Be=l(de*le);return new C(be,We,Be,Ne)}subtract(w){return this.add(w.negate())}wNAF(w){return P.wNAFCached(this,w,C.normalizeZ)}multiply(w){const x=w;Rb("scalar",x,Vo,n);const{p:M,f:k}=this.wNAF(x);return C.normalizeZ([M,k])[0]}multiplyUnsafe(w,x=C.ZERO){const M=w;return Rb("scalar",M,su,n),M===su?T:this.is0()||M===Vo?this:P.wNAFCachedUnsafe(this,M,C.normalizeZ,x)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return P.unsafeLadder(this,n).is0()}toAffine(w){return E(this,w)}clearCofactor(){const{h:w}=e;return w===Vo?this:this.multiplyUnsafe(w)}static fromHex(w,x=!1){const{d:M,a:k}=e,j=r.BYTES;w=Xl("pointHex",w,j),D3("zip215",x);const N=w.slice(),v=w[j-1];N[j-1]=v&-129;const R=yI(N),$=x?u:r.ORDER;Rb("pointHex.y",R,su,$);const O=l(R*R),H=l(O-Vo),W=l(M*O-k);let{isValid:G,value:K}=f(H,W);if(!G)throw new Error("Point.fromHex: invalid y coordinate");const Q=(K&Vo)===Vo,re=(v&128)!==0;if(!x&&K===su&&re)throw new Error("Point.fromHex: x=0 and x_0=1");return re!==Q&&(K=l(-K)),C.fromAffine({x:K,y:R})}static fromPrivateKey(w){return I(w).point}toRawBytes(){const{x:w,y:x}=this.toAffine(),M=E8(x,r.BYTES);return M[M.length-1]|=w&Vo?128:0,M}toHex(){return F4(this.toRawBytes())}}C.BASE=new C(e.Gx,e.Gy,Vo,l(e.Gx*e.Gy)),C.ZERO=new C(su,Vo,Vo,su);const{BASE:_,ZERO:T}=C,P=z0e(C,a*8);function D(b){return Ws(b,n)}function L(b){return D(yI(b))}function I(b){const w=r.BYTES;b=Xl("private key",b,w);const x=Xl("hashed private key",i(b),2*w),M=p(x.slice(0,w)),k=x.slice(w,2*w),j=L(M),N=_.multiply(j),v=N.toRawBytes();return{head:M,prefix:k,scalar:j,point:N,pointBytes:v}}function U(b){return I(b).pointBytes}function F(b=new Uint8Array,...w){const x=qU(...w);return L(i(g(x,Xl("context",b),!!s)))}function B(b,w,x={}){b=Xl("message",b),s&&(b=s(b));const{prefix:M,scalar:k,pointBytes:j}=I(w),N=F(x.context,M,b),v=_.multiply(N).toRawBytes(),R=F(x.context,v,j,b),$=D(N+R*k);Rb("signature.s",$,su,n);const O=qU(v,E8($,r.BYTES));return Xl("result",O,r.BYTES*2)}const A=K0e;function m(b,w,x,M=A){const{context:k,zip215:j}=M,N=r.BYTES;b=Xl("signature",b,2*N),w=Xl("message",w),x=Xl("publicKey",x,N),j!==void 0&&D3("zip215",j),s&&(w=s(w));const v=yI(b.slice(N,2*N));let R,$,O;try{R=C.fromHex(x,j),$=C.fromHex(b.slice(0,N),j),O=_.multiplyUnsafe(v)}catch{return!1}if(!j&&R.isSmallOrder())return!1;const H=F(k,$.toRawBytes(),R.toRawBytes(),w);return $.add(R.multiplyUnsafe(H)).subtract(O).clearCofactor().equals(C.ZERO)}return _._setWindowSize(8),{CURVE:e,getPublicKey:U,sign:B,verify:m,ExtendedPoint:C,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>o(r.BYTES),precompute(b=8,w=C.BASE){return w._setWindowSize(b),w.multiply(BigInt(3)),w}}}}BigInt(0),BigInt(1);const q4=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),KU=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const J0e=BigInt(1),ZU=BigInt(2);BigInt(3);const X0e=BigInt(5),Q0e=BigInt(8);function ege(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=q4,o=t*t%i*t%i,a=Ju(o,ZU,i)*o%i,c=Ju(a,J0e,i)*t%i,u=Ju(c,X0e,i)*c%i,l=Ju(u,e,i)*u%i,d=Ju(l,r,i)*l%i,f=Ju(d,n,i)*d%i,p=Ju(f,s,i)*f%i,g=Ju(p,s,i)*f%i,h=Ju(g,e,i)*u%i;return{pow_p_5_8:Ju(h,ZU,i)*t%i,b2:o}}function tge(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function rge(t,e){const r=q4,n=Ws(e*e*e,r),s=Ws(n*n*e,r),i=ege(t*s).pow_p_5_8;let o=Ws(t*n*i,r);const a=Ws(e*o*o,r),c=o,u=Ws(o*KU,r),l=a===t,d=a===Ws(-t,r),f=a===Ws(-t*KU,r);return l&&(o=c),(d||f)&&(o=u),D0e(o,r)&&(o=Ws(-o,r)),{isValid:l||d,value:o}}const nge=zJ(q4,void 0,!0),sge={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:nge,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Q0e,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:C0e,randomBytes:DJ,adjustScalarBytes:tge,uvRatio:rge},GJ=Y0e(sge),ige="EdDSA",oge="JWT",h6=".",OT="base64url",KJ="utf8",ZJ="utf8",age=":",cge="did",uge="key",YU="base58btc",lge="z",dge="K36",fge=32;function H4(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function YJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?H4(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function JJ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=YJ(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return H4(r)}function hge(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var h=0,y=0,E=0,S=g.length;E!==S&&g[E]===0;)E++,h++;for(var C=(S-E)*l+1>>>0,_=new Uint8Array(C);E!==S;){for(var T=g[E],P=0,D=C-1;(T!==0||P<y)&&D!==-1;D--,P++)T+=256*_[D]>>>0,_[D]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");y=P,E++}for(var L=C-y;L!==C&&_[L]===0;)L++;for(var I=c.repeat(h);L<C;++L)I+=t.charAt(_[L]);return I}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var h=0;if(g[h]!==" "){for(var y=0,E=0;g[h]===c;)y++,h++;for(var S=(g.length-h)*u+1>>>0,C=new Uint8Array(S);g[h];){var _=r[g.charCodeAt(h)];if(_===255)return;for(var T=0,P=S-1;(_!==0||T<E)&&P!==-1;P--,T++)_+=a*C[P]>>>0,C[P]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");E=T,h++}if(g[h]!==" "){for(var D=S-E;D!==S&&C[D]===0;)D++;for(var L=new Uint8Array(y+(S-D)),I=y;D!==S;)L[I++]=C[D++];return L}}}function p(g){var h=f(g);if(h)return h;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:p}}var pge=hge,gge=pge;const XJ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},mge=t=>new TextEncoder().encode(t),yge=t=>new TextDecoder().decode(t);let bge=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},wge=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return QJ(this,e)}},vge=class{constructor(e){this.decoders=e}or(e){return QJ(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const QJ=(t,e)=>new vge({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Ege=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new bge(e,r,n),this.decoder=new wge(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const kT=({name:t,prefix:e,encode:r,decode:n})=>new Ege(t,e,r,n),UE=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=gge(r,e);return kT({prefix:t,name:e,encode:n,decode:i=>XJ(s(i))})},_ge=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Age=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Mi=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>kT({prefix:e,name:t,encode(s){return Age(s,n,r)},decode(s){return _ge(s,n,r,t)}}),xge=kT({prefix:"\0",name:"identity",encode:t=>yge(t),decode:t=>mge(t)});var Cge=Object.freeze({__proto__:null,identity:xge});const Sge=Mi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ige=Object.freeze({__proto__:null,base2:Sge});const Tge=Mi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Nge=Object.freeze({__proto__:null,base8:Tge});const Pge=UE({prefix:"9",name:"base10",alphabet:"0123456789"});var Rge=Object.freeze({__proto__:null,base10:Pge});const Oge=Mi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),kge=Mi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Bge=Object.freeze({__proto__:null,base16:Oge,base16upper:kge});const Uge=Mi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Mge=Mi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Dge=Mi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),jge=Mi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Lge=Mi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Fge=Mi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),$ge=Mi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qge=Mi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Hge=Mi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var zge=Object.freeze({__proto__:null,base32:Uge,base32upper:Mge,base32pad:Dge,base32padupper:jge,base32hex:Lge,base32hexupper:Fge,base32hexpad:$ge,base32hexpadupper:qge,base32z:Hge});const Wge=UE({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Vge=UE({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Gge=Object.freeze({__proto__:null,base36:Wge,base36upper:Vge});const Kge=UE({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Zge=UE({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Yge=Object.freeze({__proto__:null,base58btc:Kge,base58flickr:Zge});const Jge=Mi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Xge=Mi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Qge=Mi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),eme=Mi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var tme=Object.freeze({__proto__:null,base64:Jge,base64pad:Xge,base64url:Qge,base64urlpad:eme});const eX=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),rme=eX.reduce((t,e,r)=>(t[r]=e,t),[]),nme=eX.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function sme(t){return t.reduce((e,r)=>(e+=rme[r],e),"")}function ime(t){const e=[];for(const r of t){const n=nme[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const ome=kT({prefix:"ðŸš€",name:"base256emoji",encode:sme,decode:ime});var ame=Object.freeze({__proto__:null,base256emoji:ome}),cme=tX,JU=128,ume=-128,lme=Math.pow(2,31);function tX(t,e,r){e=e||[],r=r||0;for(var n=r;t>=lme;)e[r++]=t&255|JU,t/=128;for(;t&ume;)e[r++]=t&255|JU,t>>>=7;return e[r]=t|0,tX.bytes=r-n+1,e}var dme=A8,fme=128,XU=127;function A8(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw A8.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&XU)<<s:(o&XU)*Math.pow(2,s),s+=7}while(o>=fme);return A8.bytes=i-n,r}var hme=Math.pow(2,7),pme=Math.pow(2,14),gme=Math.pow(2,21),mme=Math.pow(2,28),yme=Math.pow(2,35),bme=Math.pow(2,42),wme=Math.pow(2,49),vme=Math.pow(2,56),Eme=Math.pow(2,63),_me=function(t){return t<hme?1:t<pme?2:t<gme?3:t<mme?4:t<yme?5:t<bme?6:t<wme?7:t<vme?8:t<Eme?9:10},Ame={encode:cme,decode:dme,encodingLength:_me},rX=Ame;const QU=(t,e,r=0)=>(rX.encode(t,e,r),e),eM=t=>rX.encodingLength(t),x8=(t,e)=>{const r=e.byteLength,n=eM(t),s=n+eM(r),i=new Uint8Array(s+r);return QU(t,i,0),QU(r,i,n),i.set(e,s),new xme(t,r,e,i)};let xme=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};const nX=({name:t,code:e,encode:r})=>new Cme(t,e,r);let Cme=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?x8(this.code,r):r.then(n=>x8(this.code,n))}else throw Error("Unknown type, must be binary type")}};const sX=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Sme=nX({name:"sha2-256",code:18,encode:sX("SHA-256")}),Ime=nX({name:"sha2-512",code:19,encode:sX("SHA-512")});var Tme=Object.freeze({__proto__:null,sha256:Sme,sha512:Ime});const iX=0,Nme="identity",oX=XJ,Pme=t=>x8(iX,oX(t)),Rme={code:iX,name:Nme,encode:oX,digest:Pme};var Ome=Object.freeze({__proto__:null,identity:Rme});new TextEncoder,new TextDecoder;const tM={...Cge,...Ige,...Nge,...Rge,...Bge,...zge,...Gge,...Yge,...tme,...ame};({...Tme,...Ome});function aX(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const rM=aX("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),H3=aX("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=YJ(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),cX={utf8:rM,"utf-8":rM,hex:tM.base16,latin1:H3,ascii:H3,binary:H3,...tM};function BT(t,e="utf8"){const r=cX[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Gy(t,e="utf8"){const r=cX[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?H4(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function nM(t){return rf(BT(Gy(t,OT),KJ))}function p6(t){return BT(Gy(Hc(t),KJ),OT)}function z4(t){const e=Gy(dge,YU),r=lge+BT(JJ([e,t]),YU);return[cge,uge,r].join(age)}function kme(t){return BT(t,OT)}function Bme(t){return Gy(t,OT)}function Ume(t){return Gy([p6(t.header),p6(t.payload)].join(h6),ZJ)}function Mme(t){return[p6(t.header),p6(t.payload),kme(t.signature)].join(h6)}function wy(t){const e=t.split(h6),r=nM(e[0]),n=nM(e[1]),s=Bme(e[2]),i=Gy(e.slice(0,2).join(h6),ZJ);return{header:r,payload:n,signature:s,data:i}}function g6(t=DJ(fge)){const e=GJ.getPublicKey(t);return{secretKey:JJ([t,e]),publicKey:e}}async function uX(t,e,r,n,s=he.fromMiliseconds(Date.now())){const i={alg:ige,typ:oge},o=z4(n.publicKey),a=s+r,c={iss:o,sub:t,aud:e,iat:s,exp:a},u=Ume({header:i,payload:c}),l=GJ.sign(u,n.secretKey.slice(0,32));return Mme({header:i,payload:c,signature:l})}var sM=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},Dme=(function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t})(),jme=(function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t})(),Lme=(function(){function t(e,r,n,s){this.name=e,this.version=r,this.os=n,this.bot=s,this.type="bot-device"}return t})(),Fme=(function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t})(),$me=(function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t})(),qme=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Hme=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,iM=3,zme=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",qme]],oM=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function lX(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new $me:typeof navigator<"u"?Vme(navigator.userAgent):Kme()}function Wme(t){return t!==""&&zme.reduce(function(e,r){var n=r[0],s=r[1];if(e)return e;var i=s.exec(t);return!!i&&[n,i]},!1)}function Vme(t){var e=Wme(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Fme;var s=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);s?s.length<iM&&(s=sM(sM([],s,!0),Zme(iM-s.length),!0)):s=[];var i=s.join("."),o=Gme(t),a=Hme.exec(t);return a&&a[1]?new Lme(r,i,o,a[1]):new Dme(r,i,o)}function Gme(t){for(var e=0,r=oM.length;e<r;e++){var n=oM[e],s=n[0],i=n[1],o=i.exec(t);if(o)return s}return null}function Kme(){var t=typeof process<"u"&&process.version;return t?new jme(process.version.slice(1)):null}function Zme(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var An={},aM;function dX(){if(aM)return An;aM=1,Object.defineProperty(An,"__esModule",{value:!0}),An.getLocalStorage=An.getLocalStorageOrThrow=An.getCrypto=An.getCryptoOrThrow=An.getLocation=An.getLocationOrThrow=An.getNavigator=An.getNavigatorOrThrow=An.getDocument=An.getDocumentOrThrow=An.getFromWindowOrThrow=An.getFromWindow=void 0;function t(f){let p;return typeof window<"u"&&typeof window[f]<"u"&&(p=window[f]),p}An.getFromWindow=t;function e(f){const p=t(f);if(!p)throw new Error(`${f} is not defined in Window`);return p}An.getFromWindowOrThrow=e;function r(){return e("document")}An.getDocumentOrThrow=r;function n(){return t("document")}An.getDocument=n;function s(){return e("navigator")}An.getNavigatorOrThrow=s;function i(){return t("navigator")}An.getNavigator=i;function o(){return e("location")}An.getLocationOrThrow=o;function a(){return t("location")}An.getLocation=a;function c(){return e("crypto")}An.getCryptoOrThrow=c;function u(){return t("crypto")}An.getCrypto=u;function l(){return e("localStorage")}An.getLocalStorageOrThrow=l;function d(){return t("localStorage")}return An.getLocalStorage=d,An}var di=dX(),Ob={},cM;function Yme(){if(cM)return Ob;cM=1,Object.defineProperty(Ob,"__esModule",{value:!0}),Ob.getWindowMetadata=void 0;const t=dX();function e(){let r,n;try{r=t.getDocumentOrThrow(),n=t.getLocationOrThrow()}catch{return null}function s(){const p=r.getElementsByTagName("link"),g=[];for(let h=0;h<p.length;h++){const y=p[h],E=y.getAttribute("rel");if(E&&E.toLowerCase().indexOf("icon")>-1){const S=y.getAttribute("href");if(S)if(S.toLowerCase().indexOf("https:")===-1&&S.toLowerCase().indexOf("http:")===-1&&S.indexOf("//")!==0){let C=n.protocol+"//"+n.host;if(S.indexOf("/")===0)C+=S;else{const _=n.pathname.split("/");_.pop();const T=_.join("/");C+=T+"/"+S}g.push(C)}else if(S.indexOf("//")===0){const C=n.protocol+S;g.push(C)}else g.push(S)}}return g}function i(...p){const g=r.getElementsByTagName("meta");for(let h=0;h<g.length;h++){const y=g[h],E=["itemprop","property","name"].map(S=>y.getAttribute(S)).filter(S=>S?p.includes(S):!1);if(E.length&&E){const S=y.getAttribute("content");if(S)return S}}return""}function o(){let p=i("name","og:site_name","og:title","twitter:title");return p||(p=r.title),p}function a(){return i("description","og:description","twitter:description","keywords")}const c=o(),u=a(),l=n.origin,d=s();return{description:u,url:l,icons:d,name:c}}return Ob.getWindowMetadata=e,Ob}var fX=Yme();const Jme="0.1.1";function Xme(){return Jme}let Is=class C8 extends Error{constructor(e,r={}){const n=(()=>{if(r.cause instanceof C8){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause&&"details"in r.cause&&typeof r.cause.details=="string"?r.cause.details:r.cause?.message?r.cause.message:r.details})(),s=r.cause instanceof C8&&r.cause.docsPath||r.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||s?["",n?`Details: ${n}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Xme()}`}),this.cause=r.cause,this.details=n,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return hX(this,e)}};function hX(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?hX(t.cause,e):e?null:t}const xg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Qme(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Fv(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function N0(t,...e){if(!Qme(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function eye(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Fv(t.outputLen),Fv(t.blockLen)}function vy(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function pX(t,e){N0(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function tye(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ey(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function z3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Xu(t,e){return t<<32-e|t>>>e}const rye=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function nye(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function sye(t){for(let e=0;e<t.length;e++)t[e]=nye(t[e]);return t}const uM=rye?t=>t:sye;function iye(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function UT(t){return typeof t=="string"&&(t=iye(t)),N0(t),t}function oye(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];N0(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let W4=class{};function gX(t){const e=n=>t().update(UT(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function aye(t=32){if(xg&&typeof xg.getRandomValues=="function")return xg.getRandomValues(new Uint8Array(t));if(xg&&typeof xg.randomBytes=="function")return Uint8Array.from(xg.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function cye(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function uye(t,e,r){return t&e^~t&r}function lye(t,e,r){return t&e^t&r^e&r}let dye=class extends W4{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=z3(this.buffer)}update(e){vy(this),e=UT(e),N0(e);const{view:r,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=z3(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){vy(this),pX(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,Ey(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;cye(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=z3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}};const vf=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),t2=BigInt(2**32-1),lM=BigInt(32);function fye(t,e=!1){return e?{h:Number(t&t2),l:Number(t>>lM&t2)}:{h:Number(t>>lM&t2)|0,l:Number(t&t2)|0}}function hye(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:o,l:a}=fye(t[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const pye=(t,e,r)=>t<<r|e>>>32-r,gye=(t,e,r)=>e<<r|t>>>32-r,mye=(t,e,r)=>e<<r-32|t>>>64-r,yye=(t,e,r)=>t<<r-32|e>>>64-r,bye=BigInt(0),kb=BigInt(1),wye=BigInt(2),vye=BigInt(7),Eye=BigInt(256),_ye=BigInt(113),mX=[],yX=[],bX=[];for(let t=0,e=kb,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],mX.push(2*(5*n+r)),yX.push((t+1)*(t+2)/2%64);let s=bye;for(let i=0;i<7;i++)e=(e<<kb^(e>>vye)*_ye)%Eye,e&wye&&(s^=kb<<(kb<<BigInt(i))-kb);bX.push(s)}const wX=hye(bX,!0),Aye=wX[0],xye=wX[1],dM=(t,e,r)=>r>32?mye(t,e,r):pye(t,e,r),fM=(t,e,r)=>r>32?yye(t,e,r):gye(t,e,r);function Cye(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],d=dM(u,l,1)^r[a],f=fM(u,l,1)^r[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=yX[o],c=dM(s,i,a),u=fM(s,i,a),l=mX[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=Aye[n],t[1]^=xye[n]}Ey(r)}let Sye=class vX extends W4{constructor(e,r,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,Fv(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=tye(this.state)}clone(){return this._cloneInto()}keccak(){uM(this.state32),Cye(this.state32,this.rounds),uM(this.state32),this.posOut=0,this.pos=0}update(e){vy(this),e=UT(e),N0(e);const{blockLen:r,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){vy(this,!1),N0(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Fv(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(pX(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ey(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new vX(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Iye=(t,e,r)=>gX(()=>new Sye(e,t,r)),Tye=Iye(1,136,256/8),Nye=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ef=new Uint32Array(64);let Pye=class extends dye{constructor(e=32){super(64,e,8,!1),this.A=vf[0]|0,this.B=vf[1]|0,this.C=vf[2]|0,this.D=vf[3]|0,this.E=vf[4]|0,this.F=vf[5]|0,this.G=vf[6]|0,this.H=vf[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)Ef[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const f=Ef[d-15],p=Ef[d-2],g=Xu(f,7)^Xu(f,18)^f>>>3,h=Xu(p,17)^Xu(p,19)^p>>>10;Ef[d]=h+Ef[d-7]+g+Ef[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Xu(a,6)^Xu(a,11)^Xu(a,25),p=l+f+uye(a,c,u)+Nye[d]+Ef[d]|0,h=(Xu(n,2)^Xu(n,13)^Xu(n,22))+lye(n,s,i)|0;l=u,u=c,c=a,a=o+p|0,o=i,i=s,s=n,n=p+h|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){Ey(Ef)}destroy(){this.set(0,0,0,0,0,0,0,0),Ey(this.buffer)}};const Rye=gX(()=>new Pye);const V4=BigInt(0),S8=BigInt(1);function ME(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function G4(t){if(!ME(t))throw new Error("Uint8Array expected")}function $v(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function r2(t){const e=t.toString(16);return e.length&1?"0"+e:e}function EX(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?V4:BigInt("0x"+t)}const _X=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Oye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function qv(t){if(G4(t),_X)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=Oye[t[r]];return e}const Ql={_0:48,_9:57,A:65,F:70,a:97,f:102};function hM(t){if(t>=Ql._0&&t<=Ql._9)return t-Ql._0;if(t>=Ql.A&&t<=Ql.F)return t-(Ql.A-10);if(t>=Ql.a&&t<=Ql.f)return t-(Ql.a-10)}function m6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(_X)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=hM(t.charCodeAt(i)),a=hM(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function w0(t){return EX(qv(t))}function AX(t){return G4(t),EX(qv(Uint8Array.from(t).reverse()))}function DE(t,e){return m6(t.toString(16).padStart(e*2,"0"))}function xX(t,e){return DE(t,e).reverse()}function Dc(t,e,r){let n;if(typeof e=="string")try{n=m6(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(ME(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function y6(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];G4(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}const W3=t=>typeof t=="bigint"&&V4<=t;function K4(t,e,r){return W3(t)&&W3(e)&&W3(r)&&e<=t&&t<r}function Jm(t,e,r,n){if(!K4(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function kye(t){let e;for(e=0;t>V4;t>>=S8,e+=1);return e}const MT=t=>(S8<<BigInt(t))-S8,V3=t=>new Uint8Array(t),pM=t=>Uint8Array.from(t);function Bye(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=V3(t),s=V3(t),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...d)=>r(s,n,...d),c=(d=V3(0))=>{s=a(pM([0]),d),n=a(),d.length!==0&&(s=a(pM([1]),d),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){n=a();const p=n.slice();f.push(p),d+=n.length}return y6(...f)};return(d,f)=>{o(),c(d);let p;for(;!(p=f(u()));)c();return o(),p}}const Uye={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ME(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function DT(t,e,r={}){const n=(s,i,o)=>{const a=Uye[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}function gM(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}function Mye(t,e){if(wM(t)>e)throw new nbe({givenSize:wM(t),maxSize:e})}const ed={zero:48,nine:57,A:65,F:70,a:97,f:102};function mM(t){if(t>=ed.zero&&t<=ed.nine)return t-ed.zero;if(t>=ed.A&&t<=ed.F)return t-(ed.A-10);if(t>=ed.a&&t<=ed.f)return t-(ed.a-10)}function Dye(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;if(t.length>n)throw new sbe({size:t.length,targetSize:n,type:"Bytes"});const s=new Uint8Array(n);for(let i=0;i<n;i++){const o=r==="right";s[o?i:n-i-1]=t[o?i:t.length-i-1]}return s}function CX(t,e){if(Ph(t)>e)throw new Gye({givenSize:Ph(t),maxSize:e})}function jye(t,e){if(typeof e=="number"&&e>0&&e>Ph(t)-1)throw new TX({offset:e,position:"start",size:Ph(t)})}function Lye(t,e,r){if(typeof e=="number"&&typeof r=="number"&&Ph(t)!==r-e)throw new TX({offset:r,position:"end",size:Ph(t)})}function SX(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;const s=t.replace("0x","");if(s.length>n*2)throw new Kye({size:Math.ceil(s.length/2),targetSize:n,type:"Hex"});return`0x${s[r==="right"?"padEnd":"padStart"](n*2,"0")}`}const Fye="#__bigint";function Z4(t,e,r){return JSON.stringify(t,(n,s)=>typeof s=="bigint"?s.toString()+Fye:s,r)}const $ye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function qye(t,e={}){const{strict:r=!1}=e;if(!t)throw new yM(t);if(typeof t!="string")throw new yM(t);if(r&&!/^0x[0-9a-fA-F]*$/.test(t))throw new bM(t);if(!t.startsWith("0x"))throw new bM(t)}function Hye(...t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function Y4(t){return t instanceof Uint8Array?b6(t):Array.isArray(t)?b6(new Uint8Array(t)):t}function b6(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=$ye[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(CX(n,e.size),IX(n,e.size)):n}function G3(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const u=typeof t=="bigint"?"n":"";throw new Vye({max:i?`${i}${u}`:void 0,min:`${o}${u}`,signed:r,size:n,value:`${t}${u}`})}const c=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?zye(c,n):c}function zye(t,e){return SX(t,{dir:"left",size:e})}function IX(t,e){return SX(t,{dir:"right",size:e})}function kd(t,e,r,n={}){const{strict:s}=n;jye(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(r??t.length)*2)}`;return s&&Lye(i,e,r),i}function Ph(t){return Math.ceil((t.length-2)/2)}function Wye(t,e={}){const{strict:r=!1}=e;try{return qye(t,{strict:r}),!0}catch{return!1}}let Vye=class extends Is{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${n?" signed":" unsigned"} integer range ${e?`(\`${r}\` to \`${e}\`)`:`(above \`${r}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class yM extends Is{constructor(e){super(`Value \`${typeof e=="object"?Z4(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class bM extends Is{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Gye=class extends Is{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class TX extends Is{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let Kye=class extends Is{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const Zye=new TextEncoder;function Yye(t){if(!(t instanceof Uint8Array)){if(!t)throw new n2(t);if(typeof t!="object")throw new n2(t);if(!("BYTES_PER_ELEMENT"in t))throw new n2(t);if(t.BYTES_PER_ELEMENT!==1||t.constructor.name!=="Uint8Array")throw new n2(t)}}function Jye(t){return t instanceof Uint8Array?t:typeof t=="string"?Qye(t):Xye(t)}function Xye(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function Qye(t,e={}){const{size:r}=e;let n=t;r&&(CX(t,r),n=IX(t,r));let s=n.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const u=mM(s.charCodeAt(c++)),l=mM(s.charCodeAt(c++));if(u===void 0||l===void 0)throw new Is(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=u*16+l}return o}function ebe(t,e={}){const{size:r}=e,n=Zye.encode(t);return typeof r=="number"?(Mye(n,r),tbe(n,r)):n}function tbe(t,e){return Dye(t,{dir:"right",size:e})}function wM(t){return t.length}function rbe(t){try{return Yye(t),!0}catch{return!1}}class n2 extends Is{constructor(e){super(`Value \`${typeof e=="object"?Z4(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}let nbe=class extends Is{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},sbe=class extends Is{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};function NX(t,e={}){const{as:r=typeof t=="string"?"Hex":"Bytes"}=e,n=Tye(Jye(t));return r==="Bytes"?n:b6(n)}let ibe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const obe={checksum:new ibe(8192)},K3=obe.checksum;function PX(t,e={}){const{compressed:r}=e,{prefix:n,x:s,y:i}=t;if(r===!1||typeof s=="bigint"&&typeof i=="bigint"){if(n!==4)throw new vM({prefix:n,cause:new fbe});return}if(r===!0||typeof s=="bigint"&&typeof i>"u"){if(n!==3&&n!==2)throw new vM({prefix:n,cause:new dbe});return}throw new lbe({publicKey:t})}function abe(t){const e=(()=>{if(Wye(t))return RX(t);if(rbe(t))return cbe(t);const{prefix:r,x:n,y:s}=t;return typeof n=="bigint"&&typeof s=="bigint"?{prefix:r??4,x:n,y:s}:{prefix:r,x:n}})();return PX(e),e}function cbe(t){return RX(b6(t))}function RX(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new hbe({publicKey:t});if(t.length===130){const n=BigInt(kd(t,0,32)),s=BigInt(kd(t,32,64));return{prefix:4,x:n,y:s}}if(t.length===132){const n=Number(kd(t,0,1)),s=BigInt(kd(t,1,33)),i=BigInt(kd(t,33,65));return{prefix:n,x:s,y:i}}const e=Number(kd(t,0,1)),r=BigInt(kd(t,1,33));return{prefix:e,x:r}}function ube(t,e={}){PX(t);const{prefix:r,x:n,y:s}=t,{includePrefix:i=!0}=e;return Hye(i?G3(r,{size:1}):"0x",G3(n,{size:32}),typeof s=="bigint"?G3(s,{size:32}):"0x")}class lbe extends Is{constructor({publicKey:e}){super(`Value \`${Z4(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class vM extends Is{constructor({prefix:e,cause:r}){super(`Prefix "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class dbe extends Is{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class fbe extends Is{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let hbe=class extends Is{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${Ph(Y4(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const pbe=/^0x[a-fA-F0-9]{40}$/;function OX(t,e={}){const{strict:r=!0}=e;if(!pbe.test(t))throw new EM({address:t,cause:new ybe});if(r){if(t.toLowerCase()===t)return;if(kX(t)!==t)throw new EM({address:t,cause:new bbe})}}function kX(t){if(K3.has(t))return K3.get(t);OX(t,{strict:!1});const e=t.substring(2).toLowerCase(),r=NX(ebe(e),{as:"Bytes"}),n=e.split("");for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&n[i]&&(n[i]=n[i].toUpperCase()),(r[i>>1]&15)>=8&&n[i+1]&&(n[i+1]=n[i+1].toUpperCase());const s=`0x${n.join("")}`;return K3.set(t,s),s}function gbe(t,e={}){const{checksum:r=!1}=e;return OX(t),r?kX(t):t}function mbe(t,e={}){const r=NX(`0x${ube(t).slice(4)}`).substring(26);return gbe(`0x${r}`,e)}class EM extends Is{constructor({address:e,cause:r}){super(`Address "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class ybe extends Is{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class bbe extends Is{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}let BX=class extends W4{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,eye(e);const n=UT(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Ey(i)}update(e){return vy(this),this.iHash.update(e),this}digestInto(e){vy(this),N0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const UX=(t,e,r)=>new BX(t,e).update(r).digest();UX.create=(t,e)=>new BX(t,e);const wa=BigInt(0),Bo=BigInt(1),r0=BigInt(2),wbe=BigInt(3),MX=BigInt(4),DX=BigInt(5),jX=BigInt(8);function da(t,e){const r=t%e;return r>=wa?r:e+r}function _c(t,e,r){let n=t;for(;e-- >wa;)n*=n,n%=r;return n}function I8(t,e){if(t===wa)throw new Error("invert: expected non-zero number");if(e<=wa)throw new Error("invert: expected positive modulus, got "+e);let r=da(t,e),n=e,s=wa,i=Bo;for(;r!==wa;){const a=n/r,c=n%r,u=s-i*a;n=r,r=c,s=i,i=u}if(n!==Bo)throw new Error("invert: does not exist");return da(s,e)}function LX(t,e){const r=(t.ORDER+Bo)/MX,n=t.pow(e,r);if(!t.eql(t.sqr(n),e))throw new Error("Cannot find square root");return n}function vbe(t,e){const r=(t.ORDER-DX)/jX,n=t.mul(e,r0),s=t.pow(n,r),i=t.mul(e,s),o=t.mul(t.mul(i,r0),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function Ebe(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Bo,r=0;for(;e%r0===wa;)e/=r0,r++;let n=r0;const s=J4(t);for(;_M(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return LX;let i=s.pow(n,e);const o=(e+Bo)/r0;return function(c,u){if(c.is0(u))return u;if(_M(c,u)!==1)throw new Error("Cannot find square root");let l=r,d=c.mul(c.ONE,i),f=c.pow(u,e),p=c.pow(u,o);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let g=1,h=c.sqr(f);for(;!c.eql(h,c.ONE);)if(g++,h=c.sqr(h),g===l)throw new Error("Cannot find square root");const y=Bo<<BigInt(l-g-1),E=c.pow(d,y);l=g,d=c.sqr(E),f=c.mul(f,d),p=c.mul(p,E)}return p}}function _be(t){return t%MX===wbe?LX:t%jX===DX?vbe:Ebe(t)}const Abe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function xbe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Abe.reduce((n,s)=>(n[s]="function",n),e);return DT(t,r)}function Cbe(t,e,r){if(r<wa)throw new Error("invalid exponent, negatives unsupported");if(r===wa)return t.ONE;if(r===Bo)return e;let n=t.ONE,s=e;for(;r>wa;)r&Bo&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Bo;return n}function FX(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),i),n}function _M(t,e){const r=(t.ORDER-Bo)/r0,n=t.pow(e,r),s=t.eql(n,t.ONE),i=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function $X(t,e){e!==void 0&&Fv(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function J4(t,e,r=!1,n={}){if(t<=wa)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=$X(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:i,MASK:MT(s),ZERO:wa,ONE:Bo,create:c=>da(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return wa<=c&&c<t},is0:c=>c===wa,isOdd:c=>(c&Bo)===Bo,neg:c=>da(-c,t),eql:(c,u)=>c===u,sqr:c=>da(c*c,t),add:(c,u)=>da(c+u,t),sub:(c,u)=>da(c-u,t),mul:(c,u)=>da(c*u,t),pow:(c,u)=>Cbe(a,c,u),div:(c,u)=>da(c*I8(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>I8(c,t),sqrt:n.sqrt||(c=>(o||(o=_be(t)),o(a,c))),toBytes:c=>r?xX(c,i):DE(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?AX(c):w0(c)},invertBatch:c=>FX(a,c),cmov:(c,u,l)=>l?u:c});return Object.freeze(a)}function qX(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function HX(t){const e=qX(t);return e+Math.ceil(e/2)}function Sbe(t,e,r=!1){const n=t.length,s=qX(e),i=HX(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?AX(t):w0(t),a=da(o,e-Bo)+Bo;return r?xX(a,s):DE(a,s)}const AM=BigInt(0),T8=BigInt(1);function Z3(t,e){const r=e.negate();return t?r:e}function zX(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Y3(t,e){zX(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),s=2**t,i=MT(t),o=BigInt(t);return{windows:r,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function xM(t,e,r){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=r;let a=Number(t&s),c=t>>o;a>n&&(a-=i,c+=T8);const u=e*n,l=u+Math.abs(a)-1,d=a===0,f=a<0,p=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:p,offsetF:u}}function Ibe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Tbe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const J3=new WeakMap,WX=new WeakMap;function X3(t){return WX.get(t)||1}function Nbe(t,e){return{constTimeNegate:Z3,hasPrecomputes(r){return X3(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>AM;)n&T8&&(s=s.add(i)),i=i.double(),n>>=T8;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=Y3(n,e),o=[];let a=r,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){let i=t.ZERO,o=t.BASE;const a=Y3(r,e);for(let c=0;c<a.windows;c++){const{nextN:u,offset:l,isZero:d,isNeg:f,isNegF:p,offsetF:g}=xM(s,c,a);s=u,d?o=o.add(Z3(p,n[g])):i=i.add(Z3(f,n[l]))}return{p:i,f:o}},wNAFUnsafe(r,n,s,i=t.ZERO){const o=Y3(r,e);for(let a=0;a<o.windows&&s!==AM;a++){const{nextN:c,offset:u,isZero:l,isNeg:d}=xM(s,a,o);if(s=c,!l){const f=n[u];i=i.add(d?f.negate():f)}}return i},getPrecomputes(r,n,s){let i=J3.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&J3.set(n,s(i))),i},wNAFCached(r,n,s){const i=X3(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=X3(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){zX(n,e),WX.set(r,n),J3.delete(r)}}}function Pbe(t,e,r,n){Ibe(r,t),Tbe(n,e);const s=r.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=kye(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=MT(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let p=d;p>=0;p-=c){l.fill(o);for(let h=0;h<i;h++){const y=n[h],E=Number(y>>BigInt(p)&u);l[E]=l[E].add(r[h])}let g=o;for(let h=l.length-1,y=o;h>0;h--)y=y.add(l[h]),g=g.add(y);if(f=f.add(g),p!==0)for(let h=0;h<c;h++)f=f.double()}return f}function VX(t){return xbe(t.Fp),DT(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...$X(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function CM(t){t.lowS!==void 0&&$v("lowS",t.lowS),t.prehash!==void 0&&$v("prehash",t.prehash)}function Rbe(t){const e=VX(t);DT(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}let Obe=class extends Error{constructor(e=""){super(e)}};const Dd={Err:Obe,_tlv:{encode:(t,e)=>{const{Err:r}=Dd;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=r2(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?r2(s.length/2|128):"";return r2(t)+i+s+e},decode(t,e){const{Err:r}=Dd;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=Dd;if(t<$d)throw new e("integer: negative integers are not allowed");let r=r2(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Dd;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return w0(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Dd,s=Dc("signature",t),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=Dd,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}};function Q3(t,e){return qv(DE(t,e))}const $d=BigInt(0),ri=BigInt(1);BigInt(2);const eN=BigInt(3),kbe=BigInt(4);function Bbe(t){const e=Rbe(t),{Fp:r}=e,n=J4(e.n,e.nBitLength),s=e.toBytes||((C,_,T)=>{const P=_.toAffine();return y6(Uint8Array.from([4]),r.toBytes(P.x),r.toBytes(P.y))}),i=e.fromBytes||(C=>{const _=C.subarray(1),T=r.fromBytes(_.subarray(0,r.BYTES)),P=r.fromBytes(_.subarray(r.BYTES,2*r.BYTES));return{x:T,y:P}});function o(C){const{a:_,b:T}=e,P=r.sqr(C),D=r.mul(P,C);return r.add(r.add(D,r.mul(C,_)),T)}function a(C,_){const T=r.sqr(_),P=o(C);return r.eql(T,P)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=r.mul(r.pow(e.a,eN),kbe),u=r.mul(r.sqr(e.b),BigInt(27));if(r.is0(r.add(c,u)))throw new Error("bad curve params: a or b");function l(C){return K4(C,ri,e.n)}function d(C){const{allowedPrivateKeyLengths:_,nByteLength:T,wrapPrivateKey:P,n:D}=e;if(_&&typeof C!="bigint"){if(ME(C)&&(C=qv(C)),typeof C!="string"||!_.includes(C.length))throw new Error("invalid private key");C=C.padStart(T*2,"0")}let L;try{L=typeof C=="bigint"?C:w0(Dc("private key",C,T))}catch{throw new Error("invalid private key, expected hex or "+T+" bytes, got "+typeof C)}return P&&(L=da(L,D)),Jm("private key",L,ri,D),L}function f(C){if(!(C instanceof h))throw new Error("ProjectivePoint expected")}const p=gM((C,_)=>{const{px:T,py:P,pz:D}=C;if(r.eql(D,r.ONE))return{x:T,y:P};const L=C.is0();_==null&&(_=L?r.ONE:r.inv(D));const I=r.mul(T,_),U=r.mul(P,_),F=r.mul(D,_);if(L)return{x:r.ZERO,y:r.ZERO};if(!r.eql(F,r.ONE))throw new Error("invZ was invalid");return{x:I,y:U}}),g=gM(C=>{if(C.is0()){if(e.allowInfinityPoint&&!r.is0(C.py))return;throw new Error("bad point: ZERO")}const{x:_,y:T}=C.toAffine();if(!r.isValid(_)||!r.isValid(T))throw new Error("bad point: x or y not FE");if(!a(_,T))throw new Error("bad point: equation left != right");if(!C.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(_,T,P){if(_==null||!r.isValid(_))throw new Error("x required");if(T==null||!r.isValid(T)||r.is0(T))throw new Error("y required");if(P==null||!r.isValid(P))throw new Error("z required");this.px=_,this.py=T,this.pz=P,Object.freeze(this)}static fromAffine(_){const{x:T,y:P}=_||{};if(!_||!r.isValid(T)||!r.isValid(P))throw new Error("invalid affine point");if(_ instanceof h)throw new Error("projective point not allowed");const D=L=>r.eql(L,r.ZERO);return D(T)&&D(P)?h.ZERO:new h(T,P,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){const T=FX(r,_.map(P=>P.pz));return _.map((P,D)=>P.toAffine(T[D])).map(h.fromAffine)}static fromHex(_){const T=h.fromAffine(i(Dc("pointHex",_)));return T.assertValidity(),T}static fromPrivateKey(_){return h.BASE.multiply(d(_))}static msm(_,T){return Pbe(h,n,_,T)}_setWindowSize(_){S.setWindowSize(this,_)}assertValidity(){g(this)}hasEvenY(){const{y:_}=this.toAffine();if(r.isOdd)return!r.isOdd(_);throw new Error("Field doesn't support isOdd")}equals(_){f(_);const{px:T,py:P,pz:D}=this,{px:L,py:I,pz:U}=_,F=r.eql(r.mul(T,U),r.mul(L,D)),B=r.eql(r.mul(P,U),r.mul(I,D));return F&&B}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:_,b:T}=e,P=r.mul(T,eN),{px:D,py:L,pz:I}=this;let U=r.ZERO,F=r.ZERO,B=r.ZERO,A=r.mul(D,D),m=r.mul(L,L),b=r.mul(I,I),w=r.mul(D,L);return w=r.add(w,w),B=r.mul(D,I),B=r.add(B,B),U=r.mul(_,B),F=r.mul(P,b),F=r.add(U,F),U=r.sub(m,F),F=r.add(m,F),F=r.mul(U,F),U=r.mul(w,U),B=r.mul(P,B),b=r.mul(_,b),w=r.sub(A,b),w=r.mul(_,w),w=r.add(w,B),B=r.add(A,A),A=r.add(B,A),A=r.add(A,b),A=r.mul(A,w),F=r.add(F,A),b=r.mul(L,I),b=r.add(b,b),A=r.mul(b,w),U=r.sub(U,A),B=r.mul(b,m),B=r.add(B,B),B=r.add(B,B),new h(U,F,B)}add(_){f(_);const{px:T,py:P,pz:D}=this,{px:L,py:I,pz:U}=_;let F=r.ZERO,B=r.ZERO,A=r.ZERO;const m=e.a,b=r.mul(e.b,eN);let w=r.mul(T,L),x=r.mul(P,I),M=r.mul(D,U),k=r.add(T,P),j=r.add(L,I);k=r.mul(k,j),j=r.add(w,x),k=r.sub(k,j),j=r.add(T,D);let N=r.add(L,U);return j=r.mul(j,N),N=r.add(w,M),j=r.sub(j,N),N=r.add(P,D),F=r.add(I,U),N=r.mul(N,F),F=r.add(x,M),N=r.sub(N,F),A=r.mul(m,j),F=r.mul(b,M),A=r.add(F,A),F=r.sub(x,A),A=r.add(x,A),B=r.mul(F,A),x=r.add(w,w),x=r.add(x,w),M=r.mul(m,M),j=r.mul(b,j),x=r.add(x,M),M=r.sub(w,M),M=r.mul(m,M),j=r.add(j,M),w=r.mul(x,j),B=r.add(B,w),w=r.mul(N,j),F=r.mul(k,F),F=r.sub(F,w),w=r.mul(k,x),A=r.mul(N,A),A=r.add(A,w),new h(F,B,A)}subtract(_){return this.add(_.negate())}is0(){return this.equals(h.ZERO)}wNAF(_){return S.wNAFCached(this,_,h.normalizeZ)}multiplyUnsafe(_){const{endo:T,n:P}=e;Jm("scalar",_,$d,P);const D=h.ZERO;if(_===$d)return D;if(this.is0()||_===ri)return this;if(!T||S.hasPrecomputes(this))return S.wNAFCachedUnsafe(this,_,h.normalizeZ);let{k1neg:L,k1:I,k2neg:U,k2:F}=T.splitScalar(_),B=D,A=D,m=this;for(;I>$d||F>$d;)I&ri&&(B=B.add(m)),F&ri&&(A=A.add(m)),m=m.double(),I>>=ri,F>>=ri;return L&&(B=B.negate()),U&&(A=A.negate()),A=new h(r.mul(A.px,T.beta),A.py,A.pz),B.add(A)}multiply(_){const{endo:T,n:P}=e;Jm("scalar",_,ri,P);let D,L;if(T){const{k1neg:I,k1:U,k2neg:F,k2:B}=T.splitScalar(_);let{p:A,f:m}=this.wNAF(U),{p:b,f:w}=this.wNAF(B);A=S.constTimeNegate(I,A),b=S.constTimeNegate(F,b),b=new h(r.mul(b.px,T.beta),b.py,b.pz),D=A.add(b),L=m.add(w)}else{const{p:I,f:U}=this.wNAF(_);D=I,L=U}return h.normalizeZ([D,L])[0]}multiplyAndAddUnsafe(_,T,P){const D=h.BASE,L=(U,F)=>F===$d||F===ri||!U.equals(D)?U.multiplyUnsafe(F):U.multiply(F),I=L(this,T).add(L(_,P));return I.is0()?void 0:I}toAffine(_){return p(this,_)}isTorsionFree(){const{h:_,isTorsionFree:T}=e;if(_===ri)return!0;if(T)return T(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:_,clearCofactor:T}=e;return _===ri?this:T?T(h,this):this.multiplyUnsafe(e.h)}toRawBytes(_=!0){return $v("isCompressed",_),this.assertValidity(),s(h,this,_)}toHex(_=!0){return $v("isCompressed",_),qv(this.toRawBytes(_))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const{endo:y,nBitLength:E}=e,S=Nbe(h,y?Math.ceil(E/2):E);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:l}}function Ube(t){const e=VX(t);return DT(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Mbe(t){const e=Ube(t),{Fp:r,n,nByteLength:s,nBitLength:i}=e,o=r.BYTES+1,a=2*r.BYTES+1;function c(b){return da(b,n)}function u(b){return I8(b,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:p}=Bbe({...e,toBytes(b,w,x){const M=w.toAffine(),k=r.toBytes(M.x),j=y6;return $v("isCompressed",x),x?j(Uint8Array.from([w.hasEvenY()?2:3]),k):j(Uint8Array.from([4]),k,r.toBytes(M.y))},fromBytes(b){const w=b.length,x=b[0],M=b.subarray(1);if(w===o&&(x===2||x===3)){const k=w0(M);if(!K4(k,ri,r.ORDER))throw new Error("Point is not on curve");const j=f(k);let N;try{N=r.sqrt(j)}catch($){const O=$ instanceof Error?": "+$.message:"";throw new Error("Point is not on curve"+O)}const v=(N&ri)===ri;return(x&1)===1!==v&&(N=r.neg(N)),{x:k,y:N}}else if(w===a&&x===4){const k=r.fromBytes(M.subarray(0,r.BYTES)),j=r.fromBytes(M.subarray(r.BYTES,2*r.BYTES));return{x:k,y:j}}else{const k=o,j=a;throw new Error("invalid Point, expected length of "+k+", or uncompressed "+j+", got "+w)}}});function g(b){const w=n>>ri;return b>w}function h(b){return g(b)?c(-b):b}const y=(b,w,x)=>w0(b.slice(w,x));class E{constructor(w,x,M){Jm("r",w,ri,n),Jm("s",x,ri,n),this.r=w,this.s=x,M!=null&&(this.recovery=M),Object.freeze(this)}static fromCompact(w){const x=s;return w=Dc("compactSignature",w,x*2),new E(y(w,0,x),y(w,x,2*x))}static fromDER(w){const{r:x,s:M}=Dd.toSig(Dc("DER",w));return new E(x,M)}assertValidity(){}addRecoveryBit(w){return new E(this.r,this.s,w)}recoverPublicKey(w){const{r:x,s:M,recovery:k}=this,j=D(Dc("msgHash",w));if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");const N=k===2||k===3?x+e.n:x;if(N>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const v=(k&1)===0?"02":"03",R=l.fromHex(v+Q3(N,r.BYTES)),$=u(N),O=c(-j*$),H=c(M*$),W=l.BASE.multiplyAndAddUnsafe(R,O,H);if(!W)throw new Error("point at infinify");return W.assertValidity(),W}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return m6(this.toDERHex())}toDERHex(){return Dd.hexFromSig(this)}toCompactRawBytes(){return m6(this.toCompactHex())}toCompactHex(){const w=s;return Q3(this.r,w)+Q3(this.s,w)}}const S={isValidPrivateKey(b){try{return d(b),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const b=HX(e.n);return Sbe(e.randomBytes(b),e.n)},precompute(b=8,w=l.BASE){return w._setWindowSize(b),w.multiply(BigInt(3)),w}};function C(b,w=!0){return l.fromPrivateKey(b).toRawBytes(w)}function _(b){if(typeof b=="bigint")return!1;if(b instanceof l)return!0;const x=Dc("key",b).length,M=r.BYTES,k=M+1,j=2*M+1;if(!(e.allowedPrivateKeyLengths||s===k))return x===k||x===j}function T(b,w,x=!0){if(_(b)===!0)throw new Error("first arg must be private key");if(_(w)===!1)throw new Error("second arg must be public key");return l.fromHex(w).multiply(d(b)).toRawBytes(x)}const P=e.bits2int||function(b){if(b.length>8192)throw new Error("input is too large");const w=w0(b),x=b.length*8-i;return x>0?w>>BigInt(x):w},D=e.bits2int_modN||function(b){return c(P(b))},L=MT(i);function I(b){return Jm("num < 2^"+i,b,$d,L),DE(b,s)}function U(b,w,x=F){if(["recovered","canonical"].some(K=>K in x))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:k}=e;let{lowS:j,prehash:N,extraEntropy:v}=x;j==null&&(j=!0),b=Dc("msgHash",b),CM(x),N&&(b=Dc("prehashed msgHash",M(b)));const R=D(b),$=d(w),O=[I($),I(R)];if(v!=null&&v!==!1){const K=v===!0?k(r.BYTES):v;O.push(Dc("extraEntropy",K))}const H=y6(...O),W=R;function G(K){const Q=P(K);if(!p(Q))return;const re=u(Q),de=l.BASE.multiply(Q).toAffine(),le=c(de.x);if(le===$d)return;const se=c(re*c(W+le*$));if(se===$d)return;let be=(de.x===le?0:2)|Number(de.y&ri),We=se;return j&&g(se)&&(We=h(se),be^=1),new E(le,We,be)}return{seed:H,k2sig:G}}const F={lowS:e.lowS,prehash:!1},B={lowS:e.lowS,prehash:!1};function A(b,w,x=F){const{seed:M,k2sig:k}=U(b,w,x),j=e;return Bye(j.hash.outputLen,j.nByteLength,j.hmac)(M,k)}l.BASE._setWindowSize(8);function m(b,w,x,M=B){const k=b;w=Dc("msgHash",w),x=Dc("publicKey",x);const{lowS:j,prehash:N,format:v}=M;if(CM(M),"strict"in M)throw new Error("options.strict was renamed to lowS");if(v!==void 0&&v!=="compact"&&v!=="der")throw new Error("format must be compact or der");const R=typeof k=="string"||ME(k),$=!R&&!v&&typeof k=="object"&&k!==null&&typeof k.r=="bigint"&&typeof k.s=="bigint";if(!R&&!$)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let O,H;try{if($&&(O=new E(k.r,k.s)),R){try{v!=="compact"&&(O=E.fromDER(k))}catch(be){if(!(be instanceof Dd.Err))throw be}!O&&v!=="der"&&(O=E.fromCompact(k))}H=l.fromHex(x)}catch{return!1}if(!O||j&&O.hasHighS())return!1;N&&(w=e.hash(w));const{r:W,s:G}=O,K=D(w),Q=u(G),re=c(K*Q),de=c(W*Q),le=l.BASE.multiplyAndAddUnsafe(H,re,de)?.toAffine();return le?c(le.x)===W:!1}return{CURVE:e,getPublicKey:C,getSharedSecret:T,sign:A,verify:m,ProjectivePoint:l,Signature:E,utils:S}}function Dbe(t){return{hash:t,hmac:(e,...r)=>UX(t,e,oye(...r)),randomBytes:aye}}function jbe(t,e){const r=n=>Mbe({...t,...Dbe(n)});return{...r(e),create:r}}const GX=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),SM=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Lbe=BigInt(0),Fbe=BigInt(1),N8=BigInt(2),IM=(t,e)=>(t+e/N8)/e;function $be(t){const e=GX,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=_c(l,r,e)*l%e,f=_c(d,r,e)*l%e,p=_c(f,N8,e)*u%e,g=_c(p,s,e)*p%e,h=_c(g,i,e)*g%e,y=_c(h,a,e)*h%e,E=_c(y,c,e)*y%e,S=_c(E,a,e)*h%e,C=_c(S,r,e)*l%e,_=_c(C,o,e)*g%e,T=_c(_,n,e)*u%e,P=_c(T,N8,e);if(!P8.eql(P8.sqr(P),t))throw new Error("Cannot find square root");return P}const P8=J4(GX,void 0,void 0,{sqrt:$be}),qbe=jbe({a:Lbe,b:BigInt(7),Fp:P8,n:SM,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=SM,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Fbe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=IM(i*t,e),c=IM(-n*t,e);let u=da(t-a*r-c*s,e),l=da(-a*n-c*i,e);const d=u>o,f=l>o;if(d&&(u=e-u),f&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}}},Rye);function Hbe(t){if(t.length!==130&&t.length!==132)throw new Wbe({signature:t});const e=BigInt(kd(t,0,32)),r=BigInt(kd(t,32,64)),n=(()=>{const s=+`0x${t.slice(130)}`;if(!Number.isNaN(s))try{return zbe(s)}catch{throw new Vbe({value:s})}})();return typeof n>"u"?{r:e,s:r}:{r:e,s:r,yParity:n}}function zbe(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new Gbe({value:t})}class Wbe extends Is{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${Ph(Y4(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class Vbe extends Is{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class Gbe extends Is{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}const Cg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function jE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function R8(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function K0(t,...e){if(!jE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function KX(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");R8(t.outputLen),R8(t.blockLen)}function w6(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Kbe(t,e){K0(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function _y(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function tN(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Qu(t,e){return t<<32-e|t>>>e}const ZX=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Zbe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function v0(t){if(K0(t),ZX)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=Zbe[t[r]];return e}const td={_0:48,_9:57,A:65,F:70,a:97,f:102};function TM(t){if(t>=td._0&&t<=td._9)return t-td._0;if(t>=td.A&&t<=td.F)return t-(td.A-10);if(t>=td.a&&t<=td.f)return t-(td.a-10)}function v6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(ZX)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=TM(t.charCodeAt(i)),a=TM(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function Ybe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function X4(t){return typeof t=="string"&&(t=Ybe(t)),K0(t),t}function bl(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];K0(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let YX=class{};function Q4(t){const e=n=>t().update(X4(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function ek(t=32){if(Cg&&typeof Cg.getRandomValues=="function")return Cg.getRandomValues(new Uint8Array(t));if(Cg&&typeof Cg.randomBytes=="function")return Uint8Array.from(Cg.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const tk=BigInt(0),O8=BigInt(1);function P0(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function Pu(t,e,r=""){const n=jE(t),s=t?.length,i=e!==void 0;if(!n||i&&s!==e){const o=r&&`"${r}" `,a=i?` of length ${e}`:"",c=n?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function s2(t){const e=t.toString(16);return e.length&1?"0"+e:e}function JX(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?tk:BigInt("0x"+t)}function jT(t){return JX(v0(t))}function Hv(t){return K0(t),JX(v0(Uint8Array.from(t).reverse()))}function rk(t,e){return v6(t.toString(16).padStart(e*2,"0"))}function XX(t,e){return rk(t,e).reverse()}function hs(t,e,r){let n;if(typeof e=="string")try{n=v6(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(jE(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function NM(t){return Uint8Array.from(t)}const rN=t=>typeof t=="bigint"&&tk<=t;function Jbe(t,e,r){return rN(t)&&rN(e)&&rN(r)&&e<=t&&t<r}function k8(t,e,r,n){if(!Jbe(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function QX(t){let e;for(e=0;t>tk;t>>=O8,e+=1);return e}const LE=t=>(O8<<BigInt(t))-O8;function Xbe(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=p=>new Uint8Array(p),s=p=>Uint8Array.of(p);let i=n(t),o=n(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...p)=>r(o,i,...p),l=(p=n(0))=>{o=u(s(0),p),i=u(),p.length!==0&&(o=u(s(1),p),i=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const g=[];for(;p<e;){i=u();const h=i.slice();g.push(h),p+=i.length}return bl(...g)};return(p,g)=>{c(),l(p);let h;for(;!(h=g(d()));)l();return c(),h}}function FE(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(r).forEach(([s,i])=>n(s,i,!0))}function E6(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const va=BigInt(0),Bi=BigInt(1),n0=BigInt(2),eQ=BigInt(3),tQ=BigInt(4),rQ=BigInt(5),Qbe=BigInt(7),nQ=BigInt(8),ewe=BigInt(9),sQ=BigInt(16);function ks(t,e){const r=t%e;return r>=va?r:e+r}function ls(t,e,r){let n=t;for(;e-- >va;)n*=n,n%=r;return n}function PM(t,e){if(t===va)throw new Error("invert: expected non-zero number");if(e<=va)throw new Error("invert: expected positive modulus, got "+e);let r=ks(t,e),n=e,s=va,i=Bi;for(;r!==va;){const a=n/r,c=n%r,u=s-i*a;n=r,r=c,s=i,i=u}if(n!==Bi)throw new Error("invert: does not exist");return ks(s,e)}function nk(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function iQ(t,e){const r=(t.ORDER+Bi)/tQ,n=t.pow(e,r);return nk(t,n,e),n}function twe(t,e){const r=(t.ORDER-rQ)/nQ,n=t.mul(e,n0),s=t.pow(n,r),i=t.mul(e,s),o=t.mul(t.mul(i,n0),s),a=t.mul(i,t.sub(o,t.ONE));return nk(t,a,e),a}function rwe(t){const e=Z0(t),r=oQ(t),n=r(e,e.neg(e.ONE)),s=r(e,n),i=r(e,e.neg(n)),o=(t+Qbe)/sQ;return(a,c)=>{let u=a.pow(c,o),l=a.mul(u,n);const d=a.mul(u,s),f=a.mul(u,i),p=a.eql(a.sqr(l),c),g=a.eql(a.sqr(d),c);u=a.cmov(u,l,p),l=a.cmov(f,d,g);const h=a.eql(a.sqr(l),c),y=a.cmov(u,l,h);return nk(a,y,c),y}}function oQ(t){if(t<eQ)throw new Error("sqrt is not defined for small field");let e=t-Bi,r=0;for(;e%n0===va;)e/=n0,r++;let n=n0;const s=Z0(t);for(;RM(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return iQ;let i=s.pow(n,e);const o=(e+Bi)/n0;return function(c,u){if(c.is0(u))return u;if(RM(c,u)!==1)throw new Error("Cannot find square root");let l=r,d=c.mul(c.ONE,i),f=c.pow(u,e),p=c.pow(u,o);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let g=1,h=c.sqr(f);for(;!c.eql(h,c.ONE);)if(g++,h=c.sqr(h),g===l)throw new Error("Cannot find square root");const y=Bi<<BigInt(l-g-1),E=c.pow(d,y);l=g,d=c.sqr(E),f=c.mul(f,d),p=c.mul(p,E)}return p}}function nwe(t){return t%tQ===eQ?iQ:t%nQ===rQ?twe:t%sQ===ewe?rwe(t):oQ(t)}const swe=(t,e)=>(ks(t,e)&Bi)===Bi,iwe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function owe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=iwe.reduce((n,s)=>(n[s]="function",n),e);return FE(t,r),t}function awe(t,e,r){if(r<va)throw new Error("invalid exponent, negatives unsupported");if(r===va)return t.ONE;if(r===Bi)return e;let n=t.ONE,s=e;for(;r>va;)r&Bi&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Bi;return n}function aQ(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),i),n}function RM(t,e){const r=(t.ORDER-Bi)/n0,n=t.pow(e,r),s=t.eql(n,t.ONE),i=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function cQ(t,e){e!==void 0&&R8(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Z0(t,e,r=!1,n={}){if(t<=va)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const f=e;f.BITS&&(s=f.BITS),f.sqrt&&(i=f.sqrt),typeof f.isLE=="boolean"&&(r=f.isLE),typeof f.modFromBytes=="boolean"&&(o=f.modFromBytes),a=f.allowedLengths}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:c,nByteLength:u}=cQ(t,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const d=Object.freeze({ORDER:t,isLE:r,BITS:c,BYTES:u,MASK:LE(c),ZERO:va,ONE:Bi,allowedLengths:a,create:f=>ks(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return va<=f&&f<t},is0:f=>f===va,isValidNot0:f=>!d.is0(f)&&d.isValid(f),isOdd:f=>(f&Bi)===Bi,neg:f=>ks(-f,t),eql:(f,p)=>f===p,sqr:f=>ks(f*f,t),add:(f,p)=>ks(f+p,t),sub:(f,p)=>ks(f-p,t),mul:(f,p)=>ks(f*p,t),pow:(f,p)=>awe(d,f,p),div:(f,p)=>ks(f*PM(p,t),t),sqrN:f=>f*f,addN:(f,p)=>f+p,subN:(f,p)=>f-p,mulN:(f,p)=>f*p,inv:f=>PM(f,t),sqrt:i||(f=>(l||(l=nwe(t)),l(d,f))),toBytes:f=>r?XX(f,u):rk(f,u),fromBytes:(f,p=!0)=>{if(a){if(!a.includes(f.length)||f.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);const h=new Uint8Array(u);h.set(f,r?0:h.length-f.length),f=h}if(f.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+f.length);let g=r?Hv(f):jT(f);if(o&&(g=ks(g,t)),!p&&!d.isValid(g))throw new Error("invalid field element: outside of range 0..ORDER");return g},invertBatch:f=>aQ(d,f),cmov:(f,p,g)=>g?p:f});return Object.freeze(d)}function uQ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function lQ(t){const e=uQ(t);return e+Math.ceil(e/2)}function cwe(t,e,r=!1){const n=t.length,s=uQ(e),i=lQ(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?Hv(t):jT(t),a=ks(o,e-Bi)+Bi;return r?XX(a,s):rk(a,s)}function uwe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function lwe(t,e,r){return t&e^~t&r}function dwe(t,e,r){return t&e^t&r^e&r}let dQ=class extends YX{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=tN(this.buffer)}update(e){w6(this),e=X4(e),K0(e);const{view:r,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=tN(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){w6(this),Kbe(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,_y(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;uwe(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=tN(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}};const _f=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Hi=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),zi=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),i2=BigInt(2**32-1),OM=BigInt(32);function fwe(t,e=!1){return e?{h:Number(t&i2),l:Number(t>>OM&i2)}:{h:Number(t>>OM&i2)|0,l:Number(t&i2)|0}}function hwe(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:o,l:a}=fwe(t[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const kM=(t,e,r)=>t>>>r,BM=(t,e,r)=>t<<32-r|e>>>r,Sg=(t,e,r)=>t>>>r|e<<32-r,Ig=(t,e,r)=>t<<32-r|e>>>r,o2=(t,e,r)=>t<<64-r|e>>>r-32,a2=(t,e,r)=>t>>>r-32|e<<64-r;function rd(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const pwe=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),gwe=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,mwe=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),ywe=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,bwe=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),wwe=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,vwe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Af=new Uint32Array(64);let Ewe=class extends dQ{constructor(e=32){super(64,e,8,!1),this.A=_f[0]|0,this.B=_f[1]|0,this.C=_f[2]|0,this.D=_f[3]|0,this.E=_f[4]|0,this.F=_f[5]|0,this.G=_f[6]|0,this.H=_f[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)Af[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const f=Af[d-15],p=Af[d-2],g=Qu(f,7)^Qu(f,18)^f>>>3,h=Qu(p,17)^Qu(p,19)^p>>>10;Af[d]=h+Af[d-7]+g+Af[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Qu(a,6)^Qu(a,11)^Qu(a,25),p=l+f+lwe(a,c,u)+vwe[d]+Af[d]|0,h=(Qu(n,2)^Qu(n,13)^Qu(n,22))+dwe(n,s,i)|0;l=u,u=c,c=a,a=o+p|0,o=i,i=s,s=n,n=p+h|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){_y(Af)}destroy(){this.set(0,0,0,0,0,0,0,0),_y(this.buffer)}};const fQ=hwe(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),_we=fQ[0],Awe=fQ[1],xf=new Uint32Array(80),Cf=new Uint32Array(80);class hQ extends dQ{constructor(e=64){super(128,e,16,!1),this.Ah=zi[0]|0,this.Al=zi[1]|0,this.Bh=zi[2]|0,this.Bl=zi[3]|0,this.Ch=zi[4]|0,this.Cl=zi[5]|0,this.Dh=zi[6]|0,this.Dl=zi[7]|0,this.Eh=zi[8]|0,this.El=zi[9]|0,this.Fh=zi[10]|0,this.Fl=zi[11]|0,this.Gh=zi[12]|0,this.Gl=zi[13]|0,this.Hh=zi[14]|0,this.Hl=zi[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:p,Gl:g,Hh:h,Hl:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=p|0,this.Gl=g|0,this.Hh=h|0,this.Hl=y|0}process(e,r){for(let C=0;C<16;C++,r+=4)xf[C]=e.getUint32(r),Cf[C]=e.getUint32(r+=4);for(let C=16;C<80;C++){const _=xf[C-15]|0,T=Cf[C-15]|0,P=Sg(_,T,1)^Sg(_,T,8)^kM(_,T,7),D=Ig(_,T,1)^Ig(_,T,8)^BM(_,T,7),L=xf[C-2]|0,I=Cf[C-2]|0,U=Sg(L,I,19)^o2(L,I,61)^kM(L,I,6),F=Ig(L,I,19)^a2(L,I,61)^BM(L,I,6),B=mwe(D,F,Cf[C-7],Cf[C-16]),A=ywe(B,P,U,xf[C-7],xf[C-16]);xf[C]=A|0,Cf[C]=B|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:p,Fl:g,Gh:h,Gl:y,Hh:E,Hl:S}=this;for(let C=0;C<80;C++){const _=Sg(d,f,14)^Sg(d,f,18)^o2(d,f,41),T=Ig(d,f,14)^Ig(d,f,18)^a2(d,f,41),P=d&p^~d&h,D=f&g^~f&y,L=bwe(S,T,D,Awe[C],Cf[C]),I=wwe(L,E,_,P,_we[C],xf[C]),U=L|0,F=Sg(n,s,28)^o2(n,s,34)^o2(n,s,39),B=Ig(n,s,28)^a2(n,s,34)^a2(n,s,39),A=n&i^n&a^i&a,m=s&o^s&c^o&c;E=h|0,S=y|0,h=p|0,y=g|0,p=d|0,g=f|0,{h:d,l:f}=rd(u|0,l|0,I|0,U|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const b=pwe(U,B,m);n=gwe(b,I,F,A),s=b|0}({h:n,l:s}=rd(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=rd(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=rd(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=rd(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=rd(this.Eh|0,this.El|0,d|0,f|0),{h:p,l:g}=rd(this.Fh|0,this.Fl|0,p|0,g|0),{h,l:y}=rd(this.Gh|0,this.Gl|0,h|0,y|0),{h:E,l:S}=rd(this.Hh|0,this.Hl|0,E|0,S|0),this.set(n,s,i,o,a,c,u,l,d,f,p,g,h,y,E,S)}roundClean(){_y(xf,Cf)}destroy(){_y(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class xwe extends hQ{constructor(){super(48),this.Ah=Hi[0]|0,this.Al=Hi[1]|0,this.Bh=Hi[2]|0,this.Bl=Hi[3]|0,this.Ch=Hi[4]|0,this.Cl=Hi[5]|0,this.Dh=Hi[6]|0,this.Dl=Hi[7]|0,this.Eh=Hi[8]|0,this.El=Hi[9]|0,this.Fh=Hi[10]|0,this.Fl=Hi[11]|0,this.Gh=Hi[12]|0,this.Gl=Hi[13]|0,this.Hh=Hi[14]|0,this.Hl=Hi[15]|0}}const Cwe=Q4(()=>new Ewe),Swe=Q4(()=>new hQ),Vet=Q4(()=>new xwe);class pQ extends YX{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,KX(e);const n=X4(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),_y(i)}update(e){return w6(this),this.iHash.update(e),this}digestInto(e){w6(this),K0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const gQ=(t,e,r)=>new pQ(t,e).update(r).digest();gQ.create=(t,e)=>new pQ(t,e);const Ay=BigInt(0),s0=BigInt(1);function _6(t,e){const r=e.negate();return t?r:e}function i0(t,e){const r=aQ(t.Fp,e.map(n=>n.Z));return e.map((n,s)=>t.fromAffine(n.toAffine(r[s])))}function mQ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function nN(t,e){mQ(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),s=2**t,i=LE(t),o=BigInt(t);return{windows:r,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function UM(t,e,r){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=r;let a=Number(t&s),c=t>>o;a>n&&(a-=i,c+=s0);const u=e*n,l=u+Math.abs(a)-1,d=a===0,f=a<0,p=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:p,offsetF:u}}function Iwe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Twe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const sN=new WeakMap,yQ=new WeakMap;function iN(t){return yQ.get(t)||1}function MM(t){if(t!==Ay)throw new Error("invalid wNAF")}class bQ{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let s=e;for(;r>Ay;)r&s0&&(n=n.add(s)),s=s.double(),r>>=s0;return n}precomputeWindow(e,r){const{windows:n,windowSize:s}=nN(r,this.bits),i=[];let o=e,a=o;for(let c=0;c<n;c++){a=o,i.push(a);for(let u=1;u<s;u++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=nN(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:u,isZero:l,isNeg:d,isNegF:f,offsetF:p}=UM(n,a,o);n=c,l?i=i.add(_6(f,r[p])):s=s.add(_6(d,r[u]))}return MM(n),{p:s,f:i}}wNAFUnsafe(e,r,n,s=this.ZERO){const i=nN(e,this.bits);for(let o=0;o<i.windows&&n!==Ay;o++){const{nextN:a,offset:c,isZero:u,isNeg:l}=UM(n,o,i);if(n=a,!u){const d=r[c];s=s.add(l?d.negate():d)}}return MM(n),s}getPrecomputes(e,r,n){let s=sN.get(r);return s||(s=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(s=n(s)),sN.set(r,s))),s}cached(e,r,n){const s=iN(e);return this.wNAF(s,this.getPrecomputes(s,e,n),r)}unsafe(e,r,n,s){const i=iN(e);return i===1?this._unsafeLadder(e,r,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),r,s)}createCache(e,r){mQ(r,this.bits),yQ.set(e,r),sN.delete(e)}hasCache(e){return iN(e)!==1}}function Nwe(t,e,r,n){let s=e,i=t.ZERO,o=t.ZERO;for(;r>Ay||n>Ay;)r&s0&&(i=i.add(s)),n&s0&&(o=o.add(s)),s=s.double(),r>>=s0,n>>=s0;return{p1:i,p2:o}}function wQ(t,e,r,n){Iwe(r,t),Twe(n,e);const s=r.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=QX(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=LE(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let p=d;p>=0;p-=c){l.fill(o);for(let h=0;h<i;h++){const y=n[h],E=Number(y>>BigInt(p)&u);l[E]=l[E].add(r[h])}let g=o;for(let h=l.length-1,y=o;h>0;h--)y=y.add(l[h]),g=g.add(y);if(f=f.add(g),p!==0)for(let h=0;h<c;h++)f=f.double()}return f}function DM(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return owe(e),e}else return Z0(t,{isLE:r})}function vQ(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>Ay))throw new Error(`CURVE.${c} must be positive bigint`)}const s=DM(e.p,r.Fp,n),i=DM(e.n,r.Fn,n),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const c of a)if(!s.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}const jM=(t,e)=>(t+(t>=0?e:-e)/EQ)/e;function Pwe(t,e,r){const[[n,s],[i,o]]=e,a=jM(o*t,r),c=jM(-s*t,r);let u=t-a*n-c*i,l=-a*s-c*o;const d=u<Wd,f=l<Wd;d&&(u=-u),f&&(l=-l);const p=LE(Math.ceil(QX(r)/2))+Xm;if(u<Wd||u>=p||l<Wd||l>=p)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}function B8(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function oN(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return P0(r.lowS,"lowS"),P0(r.prehash,"prehash"),r.format!==void 0&&B8(r.format),r}class Rwe extends Error{constructor(e=""){super(e)}}const jd={Err:Rwe,_tlv:{encode:(t,e)=>{const{Err:r}=jd;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=s2(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?s2(s.length/2|128):"";return s2(t)+i+s+e},decode(t,e){const{Err:r}=jd;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=jd;if(t<Wd)throw new e("integer: negative integers are not allowed");let r=s2(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=jd;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return jT(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=jd,s=hs("signature",t),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=jd,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}},Wd=BigInt(0),Xm=BigInt(1),EQ=BigInt(2),c2=BigInt(3),Owe=BigInt(4);function Dm(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let s=hs("private key",e);try{n=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function kwe(t,e={}){const r=vQ("weierstrass",t,e),{Fp:n,Fn:s}=r;let i=r.CURVE;const{h:o,n:a}=i;FE(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=AQ(n,s);function l(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(B,A,m){const{x:b,y:w}=A.toAffine(),x=n.toBytes(b);if(P0(m,"isCompressed"),m){l();const M=!n.isOdd(w);return bl(_Q(M),x)}else return bl(Uint8Array.of(4),x,n.toBytes(w))}function f(B){Pu(B,void 0,"Point");const{publicKey:A,publicKeyUncompressed:m}=u,b=B.length,w=B[0],x=B.subarray(1);if(b===A&&(w===2||w===3)){const M=n.fromBytes(x);if(!n.isValid(M))throw new Error("bad point: is not on curve, wrong x");const k=h(M);let j;try{j=n.sqrt(k)}catch(R){const $=R instanceof Error?": "+R.message:"";throw new Error("bad point: is not on curve, sqrt error"+$)}l();const N=n.isOdd(j);return(w&1)===1!==N&&(j=n.neg(j)),{x:M,y:j}}else if(b===m&&w===4){const M=n.BYTES,k=n.fromBytes(x.subarray(0,M)),j=n.fromBytes(x.subarray(M,M*2));if(!y(k,j))throw new Error("bad point: is not on curve");return{x:k,y:j}}else throw new Error(`bad point: got length ${b}, expected compressed=${A} or uncompressed=${m}`)}const p=e.toBytes||d,g=e.fromBytes||f;function h(B){const A=n.sqr(B),m=n.mul(A,B);return n.add(n.add(m,n.mul(B,i.a)),i.b)}function y(B,A){const m=n.sqr(A),b=h(B);return n.eql(m,b)}if(!y(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const E=n.mul(n.pow(i.a,c2),Owe),S=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(E,S)))throw new Error("bad curve params: a or b");function C(B,A,m=!1){if(!n.isValid(A)||m&&n.is0(A))throw new Error(`bad point coordinate ${B}`);return A}function _(B){if(!(B instanceof I))throw new Error("ProjectivePoint expected")}function T(B){if(!c||!c.basises)throw new Error("no endo");return Pwe(B,c.basises,s.ORDER)}const P=E6((B,A)=>{const{X:m,Y:b,Z:w}=B;if(n.eql(w,n.ONE))return{x:m,y:b};const x=B.is0();A==null&&(A=x?n.ONE:n.inv(w));const M=n.mul(m,A),k=n.mul(b,A),j=n.mul(w,A);if(x)return{x:n.ZERO,y:n.ZERO};if(!n.eql(j,n.ONE))throw new Error("invZ was invalid");return{x:M,y:k}}),D=E6(B=>{if(B.is0()){if(e.allowInfinityPoint&&!n.is0(B.Y))return;throw new Error("bad point: ZERO")}const{x:A,y:m}=B.toAffine();if(!n.isValid(A)||!n.isValid(m))throw new Error("bad point: x or y not field elements");if(!y(A,m))throw new Error("bad point: equation left != right");if(!B.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function L(B,A,m,b,w){return m=new I(n.mul(m.X,B),m.Y,m.Z),A=_6(b,A),m=_6(w,m),A.add(m)}class I{constructor(A,m,b){this.X=C("x",A),this.Y=C("y",m,!0),this.Z=C("z",b),Object.freeze(this)}static CURVE(){return i}static fromAffine(A){const{x:m,y:b}=A||{};if(!A||!n.isValid(m)||!n.isValid(b))throw new Error("invalid affine point");if(A instanceof I)throw new Error("projective point not allowed");return n.is0(m)&&n.is0(b)?I.ZERO:new I(m,b,n.ONE)}static fromBytes(A){const m=I.fromAffine(g(Pu(A,void 0,"point")));return m.assertValidity(),m}static fromHex(A){return I.fromBytes(hs("pointHex",A))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(A=8,m=!0){return F.createCache(this,A),m||this.multiply(c2),this}assertValidity(){D(this)}hasEvenY(){const{y:A}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(A)}equals(A){_(A);const{X:m,Y:b,Z:w}=this,{X:x,Y:M,Z:k}=A,j=n.eql(n.mul(m,k),n.mul(x,w)),N=n.eql(n.mul(b,k),n.mul(M,w));return j&&N}negate(){return new I(this.X,n.neg(this.Y),this.Z)}double(){const{a:A,b:m}=i,b=n.mul(m,c2),{X:w,Y:x,Z:M}=this;let k=n.ZERO,j=n.ZERO,N=n.ZERO,v=n.mul(w,w),R=n.mul(x,x),$=n.mul(M,M),O=n.mul(w,x);return O=n.add(O,O),N=n.mul(w,M),N=n.add(N,N),k=n.mul(A,N),j=n.mul(b,$),j=n.add(k,j),k=n.sub(R,j),j=n.add(R,j),j=n.mul(k,j),k=n.mul(O,k),N=n.mul(b,N),$=n.mul(A,$),O=n.sub(v,$),O=n.mul(A,O),O=n.add(O,N),N=n.add(v,v),v=n.add(N,v),v=n.add(v,$),v=n.mul(v,O),j=n.add(j,v),$=n.mul(x,M),$=n.add($,$),v=n.mul($,O),k=n.sub(k,v),N=n.mul($,R),N=n.add(N,N),N=n.add(N,N),new I(k,j,N)}add(A){_(A);const{X:m,Y:b,Z:w}=this,{X:x,Y:M,Z:k}=A;let j=n.ZERO,N=n.ZERO,v=n.ZERO;const R=i.a,$=n.mul(i.b,c2);let O=n.mul(m,x),H=n.mul(b,M),W=n.mul(w,k),G=n.add(m,b),K=n.add(x,M);G=n.mul(G,K),K=n.add(O,H),G=n.sub(G,K),K=n.add(m,w);let Q=n.add(x,k);return K=n.mul(K,Q),Q=n.add(O,W),K=n.sub(K,Q),Q=n.add(b,w),j=n.add(M,k),Q=n.mul(Q,j),j=n.add(H,W),Q=n.sub(Q,j),v=n.mul(R,K),j=n.mul($,W),v=n.add(j,v),j=n.sub(H,v),v=n.add(H,v),N=n.mul(j,v),H=n.add(O,O),H=n.add(H,O),W=n.mul(R,W),K=n.mul($,K),H=n.add(H,W),W=n.sub(O,W),W=n.mul(R,W),K=n.add(K,W),O=n.mul(H,K),N=n.add(N,O),O=n.mul(Q,K),j=n.mul(G,j),j=n.sub(j,O),O=n.mul(G,H),v=n.mul(Q,v),v=n.add(v,O),new I(j,N,v)}subtract(A){return this.add(A.negate())}is0(){return this.equals(I.ZERO)}multiply(A){const{endo:m}=e;if(!s.isValidNot0(A))throw new Error("invalid scalar: out of range");let b,w;const x=M=>F.cached(this,M,k=>i0(I,k));if(m){const{k1neg:M,k1:k,k2neg:j,k2:N}=T(A),{p:v,f:R}=x(k),{p:$,f:O}=x(N);w=R.add(O),b=L(m.beta,v,$,M,j)}else{const{p:M,f:k}=x(A);b=M,w=k}return i0(I,[b,w])[0]}multiplyUnsafe(A){const{endo:m}=e,b=this;if(!s.isValid(A))throw new Error("invalid scalar: out of range");if(A===Wd||b.is0())return I.ZERO;if(A===Xm)return b;if(F.hasCache(this))return this.multiply(A);if(m){const{k1neg:w,k1:x,k2neg:M,k2:k}=T(A),{p1:j,p2:N}=Nwe(I,b,x,k);return L(m.beta,j,N,w,M)}else return F.unsafe(b,A)}multiplyAndAddUnsafe(A,m,b){const w=this.multiplyUnsafe(m).add(A.multiplyUnsafe(b));return w.is0()?void 0:w}toAffine(A){return P(this,A)}isTorsionFree(){const{isTorsionFree:A}=e;return o===Xm?!0:A?A(I,this):F.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:A}=e;return o===Xm?this:A?A(I,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(A=!0){return P0(A,"isCompressed"),this.assertValidity(),p(I,this,A)}toHex(A=!0){return v0(this.toBytes(A))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(A=!0){return this.toBytes(A)}_setWindowSize(A){this.precompute(A)}static normalizeZ(A){return i0(I,A)}static msm(A,m){return wQ(I,s,A,m)}static fromPrivateKey(A){return I.BASE.multiply(Dm(s,A))}}I.BASE=new I(i.Gx,i.Gy,n.ONE),I.ZERO=new I(n.ZERO,n.ONE,n.ZERO),I.Fp=n,I.Fn=s;const U=s.BITS,F=new bQ(I,e.endo?Math.ceil(U/2):U);return I.BASE.precompute(8),I}function _Q(t){return Uint8Array.of(t?2:3)}function AQ(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function Bwe(t,e={}){const{Fn:r}=t,n=e.randomBytes||ek,s=Object.assign(AQ(t.Fp,r),{seed:lQ(r.ORDER)});function i(p){try{return!!Dm(r,p)}catch{return!1}}function o(p,g){const{publicKey:h,publicKeyUncompressed:y}=s;try{const E=p.length;return g===!0&&E!==h||g===!1&&E!==y?!1:!!t.fromBytes(p)}catch{return!1}}function a(p=n(s.seed)){return cwe(Pu(p,s.seed,"seed"),r.ORDER)}function c(p,g=!0){return t.BASE.multiply(Dm(r,p)).toBytes(g)}function u(p){const g=a(p);return{secretKey:g,publicKey:c(g)}}function l(p){if(typeof p=="bigint")return!1;if(p instanceof t)return!0;const{secretKey:g,publicKey:h,publicKeyUncompressed:y}=s;if(r.allowedLengths||g===h)return;const E=hs("key",p).length;return E===h||E===y}function d(p,g,h=!0){if(l(p)===!0)throw new Error("first arg must be private key");if(l(g)===!1)throw new Error("second arg must be public key");const y=Dm(r,p);return t.fromHex(g).multiply(y).toBytes(h)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:u,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:p=>Dm(r,p),precompute(p=8,g=t.BASE){return g.precompute(p,!1)}},lengths:s})}function Uwe(t,e,r={}){KX(e),FE(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||ek,s=r.hmac||((m,...b)=>gQ(e,m,bl(...b))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:p}=Bwe(t,r),g={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},h="compact";function y(m){const b=a>>Xm;return m>b}function E(m,b){if(!o.isValidNot0(b))throw new Error(`invalid signature ${m}: out of range 1..Point.Fn.ORDER`);return b}function S(m,b){B8(b);const w=p.signature,x=b==="compact"?w:b==="recovered"?w+1:void 0;return Pu(m,x,`${b} signature`)}class C{constructor(b,w,x){this.r=E("r",b),this.s=E("s",w),x!=null&&(this.recovery=x),Object.freeze(this)}static fromBytes(b,w=h){S(b,w);let x;if(w==="der"){const{r:N,s:v}=jd.toSig(Pu(b));return new C(N,v)}w==="recovered"&&(x=b[0],w="compact",b=b.subarray(1));const M=o.BYTES,k=b.subarray(0,M),j=b.subarray(M,M*2);return new C(o.fromBytes(k),o.fromBytes(j),x)}static fromHex(b,w){return this.fromBytes(v6(b),w)}addRecoveryBit(b){return new C(this.r,this.s,b)}recoverPublicKey(b){const w=i.ORDER,{r:x,s:M,recovery:k}=this;if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");if(a*EQ<w&&k>1)throw new Error("recovery id is ambiguous for h>1 curve");const N=k===2||k===3?x+a:x;if(!i.isValid(N))throw new Error("recovery id 2 or 3 invalid");const v=i.toBytes(N),R=t.fromBytes(bl(_Q((k&1)===0),v)),$=o.inv(N),O=T(hs("msgHash",b)),H=o.create(-O*$),W=o.create(M*$),G=t.BASE.multiplyUnsafe(H).add(R.multiplyUnsafe(W));if(G.is0())throw new Error("point at infinify");return G.assertValidity(),G}hasHighS(){return y(this.s)}toBytes(b=h){if(B8(b),b==="der")return v6(jd.hexFromSig(this));const w=o.toBytes(this.r),x=o.toBytes(this.s);if(b==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return bl(Uint8Array.of(this.recovery),w,x)}return bl(w,x)}toHex(b){return v0(this.toBytes(b))}assertValidity(){}static fromCompact(b){return C.fromBytes(hs("sig",b),"compact")}static fromDER(b){return C.fromBytes(hs("sig",b),"der")}normalizeS(){return this.hasHighS()?new C(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return v0(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return v0(this.toBytes("compact"))}}const _=r.bits2int||function(b){if(b.length>8192)throw new Error("input is too large");const w=jT(b),x=b.length*8-c;return x>0?w>>BigInt(x):w},T=r.bits2int_modN||function(b){return o.create(_(b))},P=LE(c);function D(m){return k8("num < 2^"+c,m,Wd,P),o.toBytes(m)}function L(m,b){return Pu(m,void 0,"message"),b?Pu(e(m),void 0,"prehashed message"):m}function I(m,b,w){if(["recovered","canonical"].some(H=>H in w))throw new Error("sign() legacy options not supported");const{lowS:x,prehash:M,extraEntropy:k}=oN(w,g);m=L(m,M);const j=T(m),N=Dm(o,b),v=[D(N),D(j)];if(k!=null&&k!==!1){const H=k===!0?n(p.secretKey):k;v.push(hs("extraEntropy",H))}const R=bl(...v),$=j;function O(H){const W=_(H);if(!o.isValidNot0(W))return;const G=o.inv(W),K=t.BASE.multiply(W).toAffine(),Q=o.create(K.x);if(Q===Wd)return;const re=o.create(G*o.create($+Q*N));if(re===Wd)return;let de=(K.x===Q?0:2)|Number(K.y&Xm),le=re;return x&&y(re)&&(le=o.neg(re),de^=1),new C(Q,le,de)}return{seed:R,k2sig:O}}function U(m,b,w={}){m=hs("message",m);const{seed:x,k2sig:M}=I(m,b,w);return Xbe(e.outputLen,o.BYTES,s)(x,M)}function F(m){let b;const w=typeof m=="string"||jE(m),x=!w&&m!==null&&typeof m=="object"&&typeof m.r=="bigint"&&typeof m.s=="bigint";if(!w&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(x)b=new C(m.r,m.s);else if(w){try{b=C.fromBytes(hs("sig",m),"der")}catch(M){if(!(M instanceof jd.Err))throw M}if(!b)try{b=C.fromBytes(hs("sig",m),"compact")}catch{return!1}}return b||!1}function B(m,b,w,x={}){const{lowS:M,prehash:k,format:j}=oN(x,g);if(w=hs("publicKey",w),b=L(hs("message",b),k),"strict"in x)throw new Error("options.strict was renamed to lowS");const N=j===void 0?F(m):C.fromBytes(hs("sig",m),j);if(N===!1)return!1;try{const v=t.fromBytes(w);if(M&&N.hasHighS())return!1;const{r:R,s:$}=N,O=T(b),H=o.inv($),W=o.create(O*H),G=o.create(R*H),K=t.BASE.multiplyUnsafe(W).add(v.multiplyUnsafe(G));return K.is0()?!1:o.create(K.x)===R}catch{return!1}}function A(m,b,w={}){const{prehash:x}=oN(w,g);return b=L(b,x),C.fromBytes(m,"recovered").recoverPublicKey(b).toBytes()}return Object.freeze({keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:p,Point:t,sign:U,verify:B,recoverPublicKey:A,Signature:C,hash:e})}function Mwe(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Z0(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),i={Fp:r,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function Dwe(t){const{CURVE:e,curveOpts:r}=Mwe(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function jwe(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,cQ(r.Fn.ORDER,r.Fn.BITS))})}function Lwe(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:s}=Dwe(t),i=kwe(e,r),o=Uwe(i,n,s);return jwe(t,o)}function Fwe(t,e){const r=n=>Lwe({...t,hash:n});return{...r(e),create:r}}const sk={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},$we={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},LM=BigInt(2);function qwe(t){const e=sk.p,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=ls(l,r,e)*l%e,f=ls(d,r,e)*l%e,p=ls(f,LM,e)*u%e,g=ls(p,s,e)*p%e,h=ls(g,i,e)*g%e,y=ls(h,a,e)*h%e,E=ls(y,c,e)*y%e,S=ls(E,a,e)*h%e,C=ls(S,r,e)*l%e,_=ls(C,o,e)*g%e,T=ls(_,n,e)*u%e,P=ls(T,LM,e);if(!U8.eql(U8.sqr(P),t))throw new Error("Cannot find square root");return P}const U8=Z0(sk.p,{sqrt:qwe}),Hwe=Fwe({...sk,Fp:U8,lowS:!0,endo:$we},Cwe);function zwe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function xQ(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(r=>typeof r=="string"):e.every(r=>Number.isSafeInteger(r)):!1}function A6(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function ik(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function M8(t){if(!Array.isArray(t))throw new Error("array expected")}function x6(t,e){if(!xQ(!0,e))throw new Error(`${t}: array of strings expected`)}function Wwe(t,e){if(!xQ(!1,e))throw new Error(`${t}: array of numbers expected`)}function Vwe(...t){const e=i=>i,r=(i,o)=>a=>i(o(a)),n=t.map(i=>i.encode).reduceRight(r,e),s=t.map(i=>i.decode).reduce(r,e);return{encode:n,decode:s}}function Gwe(t){const e=typeof t=="string"?t.split(""):t,r=e.length;x6("alphabet",e);const n=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(M8(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(M8(s),s.map(i=>{A6("alphabet.decode",i);const o=n.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function Kwe(t=""){return A6("join",t),{encode:e=>(x6("join.decode",e),e.join(t)),decode:e=>(A6("join.decode",e),e.split(t))}}function Zwe(t,e="="){return ik(t),A6("padding",e),{encode(r){for(x6("padding.encode",r);r.length*t%8;)r.push(e);return r},decode(r){x6("padding.decode",r);let n=r.length;if(n*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--)if((n-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}const CQ=(t,e)=>e===0?t:CQ(e,t%e),C6=(t,e)=>t+(e-CQ(t,e)),aN=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function FM(t,e,r,n){if(M8(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(C6(e,r)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${r} carryBits=${C6(e,r)}`);let s=0,i=0;const o=aN[e],a=aN[r]-1,c=[];for(const u of t){if(ik(u),u>=o)throw new Error(`convertRadix2: invalid data word=${u} from=${e}`);if(s=s<<e|u,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=r;i-=r)c.push((s>>i-r&a)>>>0);const l=aN[i];if(l===void 0)throw new Error("invalid carry");s&=l-1}if(s=s<<r-i&a,!n&&i>=e)throw new Error("Excess padding");if(!n&&s>0)throw new Error(`Non-zero padding: ${s}`);return n&&i>0&&c.push(s>>>0),c}function Ywe(t,e=!1){if(ik(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(C6(8,t)>32||C6(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!zwe(r))throw new Error("radix2.encode input should be Uint8Array");return FM(Array.from(r),8,t,!e)},decode:r=>(Wwe("radix2.decode",r),Uint8Array.from(FM(r,t,8,e)))}}const SQ=Vwe(Ywe(5),Gwe("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Zwe(5),Kwe(""));function Jwe(t){return mbe(Xwe(t))}function Xwe(t){const{payload:e,signature:r}=t,{r:n,s,yParity:i}=r,a=new qbe.Signature(BigInt(n),BigInt(s)).addRecoveryBit(i).recoverPublicKey(Y4(e).substring(2));return abe(a)}var cN={exports:{}},$M;function Qwe(){return $M||($M=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,l){this.fn=c,this.context=u,this.once=l||!1}function i(c,u,l,d,f){if(typeof l!="function")throw new TypeError("The listener must be a function");var p=new s(l,d||c,f),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],l,d;if(this._eventsCount===0)return u;for(d in l=this._events)e.call(l,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},a.prototype.listeners=function(u){var l=r?r+u:u,d=this._events[l];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,p=d.length,g=new Array(p);f<p;f++)g[f]=d[f].fn;return g},a.prototype.listenerCount=function(u){var l=r?r+u:u,d=this._events[l];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,l,d,f,p,g){var h=r?r+u:u;if(!this._events[h])return!1;var y=this._events[h],E=arguments.length,S,C;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),E){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,l),!0;case 3:return y.fn.call(y.context,l,d),!0;case 4:return y.fn.call(y.context,l,d,f),!0;case 5:return y.fn.call(y.context,l,d,f,p),!0;case 6:return y.fn.call(y.context,l,d,f,p,g),!0}for(C=1,S=new Array(E-1);C<E;C++)S[C-1]=arguments[C];y.fn.apply(y.context,S)}else{var _=y.length,T;for(C=0;C<_;C++)switch(y[C].once&&this.removeListener(u,y[C].fn,void 0,!0),E){case 1:y[C].fn.call(y[C].context);break;case 2:y[C].fn.call(y[C].context,l);break;case 3:y[C].fn.call(y[C].context,l,d);break;case 4:y[C].fn.call(y[C].context,l,d,f);break;default:if(!S)for(T=1,S=new Array(E-1);T<E;T++)S[T-1]=arguments[T];y[C].fn.apply(y[C].context,S)}}return!0},a.prototype.on=function(u,l,d){return i(this,u,l,d,!1)},a.prototype.once=function(u,l,d){return i(this,u,l,d,!0)},a.prototype.removeListener=function(u,l,d,f){var p=r?r+u:u;if(!this._events[p])return this;if(!l)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===l&&(!f||g.once)&&(!d||g.context===d)&&o(this,p);else{for(var h=0,y=[],E=g.length;h<E;h++)(g[h].fn!==l||f&&!g[h].once||d&&g[h].context!==d)&&y.push(g[h]);y.length?this._events[p]=y.length===1?y[0]:y:o(this,p)}return this},a.prototype.removeAllListeners=function(u){var l;return u?(l=r?r+u:u,this._events[l]&&o(this,l)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(cN)),cN.exports}var e1e=Qwe();const IQ=xa(e1e);function t1e(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){const l=t.charAt(u),d=l.charCodeAt(0);if(e[d]!==255)throw new TypeError(l+" is ambiguous");e[d]=u}const r=t.length,n=t.charAt(0),s=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let l=0,d=0,f=0;const p=u.length;for(;f!==p&&u[f]===0;)f++,l++;const g=(p-f)*i+1>>>0,h=new Uint8Array(g);for(;f!==p;){let S=u[f],C=0;for(let _=g-1;(S!==0||C<d)&&_!==-1;_--,C++)S+=256*h[_]>>>0,h[_]=S%r>>>0,S=S/r>>>0;if(S!==0)throw new Error("Non-zero carry");d=C,f++}let y=g-d;for(;y!==g&&h[y]===0;)y++;let E=n.repeat(l);for(;y<g;++y)E+=t.charAt(h[y]);return E}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let l=0,d=0,f=0;for(;u[l]===n;)d++,l++;const p=(u.length-l)*s+1>>>0,g=new Uint8Array(p);for(;l<u.length;){const S=u.charCodeAt(l);if(S>255)return;let C=e[S];if(C===255)return;let _=0;for(let T=p-1;(C!==0||_<f)&&T!==-1;T--,_++)C+=r*g[T]>>>0,g[T]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");f=_,l++}let h=p-f;for(;h!==p&&g[h]===0;)h++;const y=new Uint8Array(d+(p-h));let E=d;for(;h!==p;)y[E++]=g[h++];return y}function c(u){const l=a(u);if(l)return l;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var r1e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Zn=t1e(r1e);function n1e(t){const e=t.length;let r=0,n=0;for(;n<e;){let s=t.charCodeAt(n++);if((s&4294967168)===0){r++;continue}else if((s&4294965248)===0)r+=2;else{if(s>=55296&&s<=56319&&n<e){const i=t.charCodeAt(n);(i&64512)===56320&&(++n,s=((s&1023)<<10)+(i&1023)+65536)}(s&4294901760)===0?r+=3:r+=4}}return r}function s1e(t,e,r){const n=t.length;let s=r,i=0;for(;i<n;){let o=t.charCodeAt(i++);if((o&4294967168)===0){e[s++]=o;continue}else if((o&4294965248)===0)e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<n){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128):(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128)}e[s++]=o&63|128}}const i1e=new TextEncoder,o1e=50;function a1e(t,e,r){i1e.encodeInto(t,e.subarray(r))}function c1e(t,e,r){t.length>o1e?a1e(t,e,r):s1e(t,e,r)}const u1e=4096;function TQ(t,e,r){let n=e;const s=n+r,i=[];let o="";for(;n<s;){const a=t[n++];if((a&128)===0)i.push(a);else if((a&224)===192){const c=t[n++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[n++]&63,u=t[n++]&63;i.push((a&31)<<12|c<<6|u)}else if((a&248)===240){const c=t[n++]&63,u=t[n++]&63,l=t[n++]&63;let d=(a&7)<<18|c<<12|u<<6|l;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=u1e&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const l1e=new TextDecoder,d1e=200;function f1e(t,e,r){const n=t.subarray(e,e+r);return l1e.decode(n)}function h1e(t,e,r){return r>d1e?f1e(t,e,r):TQ(t,e,r)}class u2{constructor(e,r){this.type=e,this.data=r}}class Za extends Error{constructor(e){super(e);const r=Object.create(Za.prototype);Object.setPrototypeOf(this,r),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Za.name})}}const Bb=4294967295;function p1e(t,e,r){const n=r/4294967296,s=r;t.setUint32(e,n),t.setUint32(e+4,s)}function NQ(t,e,r){const n=Math.floor(r/4294967296),s=r;t.setUint32(e,n),t.setUint32(e+4,s)}function PQ(t,e){const r=t.getInt32(e),n=t.getUint32(e+4);return r*4294967296+n}function g1e(t,e){const r=t.getUint32(e),n=t.getUint32(e+4);return r*4294967296+n}const m1e=-1,y1e=4294967296-1,b1e=17179869184-1;function w1e({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=b1e)if(e===0&&t<=y1e){const r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}else{const r=t/4294967296,n=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|r&3),i.setUint32(4,n),s}else{const r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,e),NQ(n,4,t),r}}function v1e(t){const e=t.getTime(),r=Math.floor(e/1e3),n=(e-r*1e3)*1e6,s=Math.floor(n/1e9);return{sec:r+s,nsec:n-s*1e9}}function E1e(t){if(t instanceof Date){const e=v1e(t);return w1e(e)}else return null}function _1e(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const r=e.getUint32(0),n=e.getUint32(4),s=(r&3)*4294967296+n,i=r>>>2;return{sec:s,nsec:i}}case 12:{const r=PQ(e,4),n=e.getUint32(0);return{sec:r,nsec:n}}default:throw new Za(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function A1e(t){const e=_1e(t);return new Date(e.sec*1e3+e.nsec/1e6)}const x1e={type:m1e,encode:E1e,decode:A1e};class S6{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(x1e)}register({type:e,encode:r,decode:n}){if(e>=0)this.encoders[e]=r,this.decoders[e]=n;else{const s=-1-e;this.builtInEncoders[s]=r,this.builtInDecoders[s]=n}}tryToEncode(e,r){for(let n=0;n<this.builtInEncoders.length;n++){const s=this.builtInEncoders[n];if(s!=null){const i=s(e,r);if(i!=null){const o=-1-n;return new u2(o,i)}}}for(let n=0;n<this.encoders.length;n++){const s=this.encoders[n];if(s!=null){const i=s(e,r);if(i!=null){const o=n;return new u2(o,i)}}}return e instanceof u2?e:null}decode(e,r,n){const s=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return s?s(e,r,n):new u2(r,e)}}S6.defaultCodec=new S6;function C1e(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function D8(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):C1e(t)?new Uint8Array(t):Uint8Array.from(t)}const S1e=100,I1e=2048;let T1e=class RQ{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??S6.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??S1e,this.initialBufferSize=e?.initialBufferSize??I1e,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new RQ({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,r){if(r>this.maxDepth)throw new Error(`Too deep objects in depth ${r}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,r)}ensureBufferSizeToWrite(e){const r=this.pos+e;this.view.byteLength<r&&this.resizeBuffer(r*2)}resizeBuffer(e){const r=new ArrayBuffer(e),n=new Uint8Array(r),s=new DataView(r);n.set(this.bytes),this.view=s,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const n=n1e(e);this.ensureBufferSizeToWrite(5+n),this.writeStringHeader(n),c1e(e,this.bytes,this.pos),this.pos+=n}encodeObject(e,r){const n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,r);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,r);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const r=e.byteLength;if(r<256)this.writeU8(196),this.writeU8(r);else if(r<65536)this.writeU8(197),this.writeU16(r);else if(r<4294967296)this.writeU8(198),this.writeU32(r);else throw new Error(`Too large binary: ${r}`);const n=D8(e);this.writeU8a(n)}encodeArray(e,r){const n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(const s of e)this.doEncode(s,r+1)}countWithoutUndefined(e,r){let n=0;for(const s of r)e[s]!==void 0&&n++;return n}encodeMap(e,r){const n=Object.keys(e);this.sortKeys&&n.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of n){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,r+1))}}encodeExtension(e){if(typeof e.data=="function"){const n=e.data(this.pos+6),s=n.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(n);return}const r=e.data.length;if(r===1)this.writeU8(212);else if(r===2)this.writeU8(213);else if(r===4)this.writeU8(214);else if(r===8)this.writeU8(215);else if(r===16)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else if(r<4294967296)this.writeU8(201),this.writeU32(r);else throw new Error(`Too large extension object: ${r}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const r=e.length;this.ensureBufferSizeToWrite(r),this.bytes.set(e,this.pos),this.pos+=r}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),p1e(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),NQ(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function OQ(t,e){return new T1e(e).encodeSharedRef(t)}function uN(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const N1e=16,P1e=16;class R1e{constructor(e=N1e,r=P1e){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=r,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,r,n){const s=this.caches[n-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<n;a++)if(o[a]!==e[r+a])continue e;return i.str}return null}store(e,r){const n=this.caches[e.length-1],s={bytes:e,str:r};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=s:n.push(s)}decode(e,r,n){const s=this.find(e,r,n);if(s!=null)return this.hit++,s;this.miss++;const i=TQ(e,r,n),o=Uint8Array.prototype.slice.call(e,r,r+n);return this.store(o,i),i}}const j8="array",P1="map_key",kQ="map_value",O1e=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new Za("The type of key must be string or number but "+typeof t)};class k1e{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const r=this.getUninitializedStateFromPool();r.type=j8,r.position=0,r.size=e,r.array=new Array(e)}pushMapState(e){const r=this.getUninitializedStateFromPool();r.type=P1,r.readCount=0,r.size=e,r.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===j8){const n=e;n.size=0,n.array=void 0,n.position=0,n.type=void 0}if(e.type===P1||e.type===kQ){const n=e;n.size=0,n.map=void 0,n.readCount=0,n.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Ub=-1,ok=new DataView(new ArrayBuffer(0)),B1e=new Uint8Array(ok.buffer);try{ok.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const qM=new RangeError("Insufficient data"),U1e=new R1e;let M1e=class BQ{constructor(e){this.totalPos=0,this.pos=0,this.view=ok,this.bytes=B1e,this.headByte=Ub,this.stack=new k1e,this.entered=!1,this.extensionCodec=e?.extensionCodec??S6.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??Bb,this.maxBinLength=e?.maxBinLength??Bb,this.maxArrayLength=e?.maxArrayLength??Bb,this.maxMapLength=e?.maxMapLength??Bb,this.maxExtLength=e?.maxExtLength??Bb,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:U1e,this.mapKeyConverter=e?.mapKeyConverter??O1e}clone(){return new BQ({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Ub,this.stack.reset()}setBuffer(e){const r=D8(e);this.bytes=r,this.view=new DataView(r.buffer,r.byteOffset,r.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Ub&&!this.hasRemaining(1))this.setBuffer(e);else{const r=this.bytes.subarray(this.pos),n=D8(e),s=new Uint8Array(r.length+n.length);s.set(r),s.set(n,r.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:r,pos:n}=this;return new RangeError(`Extra ${r.byteLength-n} of ${r.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const r=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return r}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let r=!1,n;for await(const a of e){if(r)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{n=this.doDecodeSync(),r=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${uN(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,r){if(this.entered){yield*this.clone().decodeMultiAsync(e,r);return}try{this.entered=!0;let n=r,s=-1;for await(const i of e){if(r&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),n&&(s=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let r;if(e>=224)r=e-256;else if(e<192)if(e<128)r=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else{const s=e-160;r=this.decodeString(s,0)}else if(e===192)r=null;else if(e===194)r=!1;else if(e===195)r=!0;else if(e===202)r=this.readF32();else if(e===203)r=this.readF64();else if(e===204)r=this.readU8();else if(e===205)r=this.readU16();else if(e===206)r=this.readU32();else if(e===207)this.useBigInt64?r=this.readU64AsBigInt():r=this.readU64();else if(e===208)r=this.readI8();else if(e===209)r=this.readI16();else if(e===210)r=this.readI32();else if(e===211)this.useBigInt64?r=this.readI64AsBigInt():r=this.readI64();else if(e===217){const s=this.lookU8();r=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();r=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();r=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===196){const s=this.lookU8();r=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();r=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();r=this.decodeBinary(s,4)}else if(e===212)r=this.decodeExtension(1,0);else if(e===213)r=this.decodeExtension(2,0);else if(e===214)r=this.decodeExtension(4,0);else if(e===215)r=this.decodeExtension(8,0);else if(e===216)r=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();r=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();r=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();r=this.decodeExtension(s,4)}else throw new Za(`Unrecognized type byte: ${uN(e)}`);this.complete();const n=this.stack;for(;n.length>0;){const s=n.top();if(s.type===j8)if(s.array[s.position]=r,s.position++,s.position===s.size)r=s.array,n.release(s);else continue e;else if(s.type===P1){if(r==="__proto__")throw new Za("The key __proto__ is not allowed");s.key=this.mapKeyConverter(r),s.type=kQ;continue e}else if(s.map[s.key]=r,s.readCount++,s.readCount===s.size)r=s.map,n.release(s);else{s.key=null,s.type=P1;continue e}}return r}}readHeadByte(){return this.headByte===Ub&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Ub}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Za(`Unrecognized array type byte: ${uN(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Za(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Za(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,r){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,r):this.decodeBinary(e,r)}decodeUtf8String(e,r){if(e>this.maxStrLength)throw new Za(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+r+e)throw qM;const n=this.pos+r;let s;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?s=this.keyDecoder.decode(this.bytes,n,e):s=h1e(this.bytes,n,e),this.pos+=r+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===P1:!1}decodeBinary(e,r){if(e>this.maxBinLength)throw new Za(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+r))throw qM;const n=this.pos+r,s=this.bytes.subarray(n,n+e);return this.pos+=r+e,s}decodeExtension(e,r){if(e>this.maxExtLength)throw new Za(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const n=this.view.getInt8(this.pos+r),s=this.decodeBinary(e,r+1);return this.extensionCodec.decode(s,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=g1e(this.view,this.pos);return this.pos+=8,e}readI64(){const e=PQ(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function UQ(t,e){return new M1e(e).decode(t)}function ak(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function MQ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ak(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Tl(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=MQ(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return ak(r)}function D1e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var h=0,y=0,E=0,S=g.length;E!==S&&g[E]===0;)E++,h++;for(var C=(S-E)*l+1>>>0,_=new Uint8Array(C);E!==S;){for(var T=g[E],P=0,D=C-1;(T!==0||P<y)&&D!==-1;D--,P++)T+=256*_[D]>>>0,_[D]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");y=P,E++}for(var L=C-y;L!==C&&_[L]===0;)L++;for(var I=c.repeat(h);L<C;++L)I+=t.charAt(_[L]);return I}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var h=0;if(g[h]!==" "){for(var y=0,E=0;g[h]===c;)y++,h++;for(var S=(g.length-h)*u+1>>>0,C=new Uint8Array(S);g[h];){var _=r[g.charCodeAt(h)];if(_===255)return;for(var T=0,P=S-1;(_!==0||T<E)&&P!==-1;P--,T++)_+=a*C[P]>>>0,C[P]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");E=T,h++}if(g[h]!==" "){for(var D=S-E;D!==S&&C[D]===0;)D++;for(var L=new Uint8Array(y+(S-D)),I=y;D!==S;)L[I++]=C[D++];return L}}}function p(g){var h=f(g);if(h)return h;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:p}}var j1e=D1e,L1e=j1e;const F1e=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},$1e=t=>new TextEncoder().encode(t),q1e=t=>new TextDecoder().decode(t);class H1e{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class z1e{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return DQ(this,e)}}class W1e{constructor(e){this.decoders=e}or(e){return DQ(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const DQ=(t,e)=>new W1e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class V1e{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new H1e(e,r,n),this.decoder=new z1e(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const LT=({name:t,prefix:e,encode:r,decode:n})=>new V1e(t,e,r,n),$E=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=L1e(r,e);return LT({prefix:t,name:e,encode:n,decode:i=>F1e(s(i))})},G1e=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},K1e=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Di=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>LT({prefix:e,name:t,encode(s){return K1e(s,n,r)},decode(s){return G1e(s,n,r,t)}}),Z1e=LT({prefix:"\0",name:"identity",encode:t=>q1e(t),decode:t=>$1e(t)}),Y1e=Object.freeze(Object.defineProperty({__proto__:null,identity:Z1e},Symbol.toStringTag,{value:"Module"})),J1e=Di({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),X1e=Object.freeze(Object.defineProperty({__proto__:null,base2:J1e},Symbol.toStringTag,{value:"Module"})),Q1e=Di({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),eve=Object.freeze(Object.defineProperty({__proto__:null,base8:Q1e},Symbol.toStringTag,{value:"Module"})),tve=$E({prefix:"9",name:"base10",alphabet:"0123456789"}),rve=Object.freeze(Object.defineProperty({__proto__:null,base10:tve},Symbol.toStringTag,{value:"Module"})),nve=Di({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sve=Di({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ive=Object.freeze(Object.defineProperty({__proto__:null,base16:nve,base16upper:sve},Symbol.toStringTag,{value:"Module"})),ove=Di({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ave=Di({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cve=Di({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),uve=Di({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lve=Di({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dve=Di({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),fve=Di({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hve=Di({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pve=Di({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),gve=Object.freeze(Object.defineProperty({__proto__:null,base32:ove,base32hex:lve,base32hexpad:fve,base32hexpadupper:hve,base32hexupper:dve,base32pad:cve,base32padupper:uve,base32upper:ave,base32z:pve},Symbol.toStringTag,{value:"Module"})),mve=$E({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yve=$E({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),bve=Object.freeze(Object.defineProperty({__proto__:null,base36:mve,base36upper:yve},Symbol.toStringTag,{value:"Module"})),wve=$E({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vve=$E({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Eve=Object.freeze(Object.defineProperty({__proto__:null,base58btc:wve,base58flickr:vve},Symbol.toStringTag,{value:"Module"})),_ve=Di({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ave=Di({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xve=Di({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Cve=Di({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Sve=Object.freeze(Object.defineProperty({__proto__:null,base64:_ve,base64pad:Ave,base64url:xve,base64urlpad:Cve},Symbol.toStringTag,{value:"Module"})),jQ=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),Ive=jQ.reduce((t,e,r)=>(t[r]=e,t),[]),Tve=jQ.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Nve(t){return t.reduce((e,r)=>(e+=Ive[r],e),"")}function Pve(t){const e=[];for(const r of t){const n=Tve[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Rve=LT({prefix:"ðŸš€",name:"base256emoji",encode:Nve,decode:Pve}),Ove=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Rve},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const HM={...Y1e,...X1e,...eve,...rve,...ive,...gve,...bve,...Eve,...Sve,...Ove};function LQ(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const zM=LQ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),lN=LQ("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=MQ(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),FQ={utf8:zM,"utf-8":zM,hex:HM.base16,latin1:lN,ascii:lN,binary:lN,...HM};function Yn(t,e="utf8"){const r=FQ[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ak(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function _n(t,e="utf8"){const r=FQ[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}const $Q={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var dN,WM;function qQ(){if(WM)return dN;WM=1;const t="Input must be an string, Buffer or Uint8Array";function e(o){let a;if(o instanceof Uint8Array)a=o;else if(typeof o=="string")a=new TextEncoder().encode(o);else throw new Error(t);return a}function r(o){return Array.prototype.map.call(o,function(a){return(a<16?"0":"")+a.toString(16)}).join("")}function n(o){return(4294967296+o).toString(16).substring(1)}function s(o,a,c){let u=`
`+o+" = ";for(let l=0;l<a.length;l+=2){if(c===32)u+=n(a[l]).toUpperCase(),u+=" ",u+=n(a[l+1]).toUpperCase();else if(c===64)u+=n(a[l+1]).toUpperCase(),u+=n(a[l]).toUpperCase();else throw new Error("Invalid size "+c);l%6===4?u+=`
`+new Array(o.length+4).join(" "):l<a.length-2&&(u+=" ")}console.log(u)}function i(o,a,c){let u=new Date().getTime();const l=new Uint8Array(a);for(let f=0;f<a;f++)l[f]=f%256;const d=new Date().getTime();console.log("Generated random input in "+(d-u)+"ms"),u=d;for(let f=0;f<c;f++){const p=o(l),g=new Date().getTime(),h=g-u;u=g,console.log("Hashed in "+h+"ms: "+p.substring(0,20)+"..."),console.log(Math.round(a/(1<<20)/(h/1e3)*100)/100+" MB PER SECOND")}}return dN={normalizeInput:e,toHex:r,debugPrint:s,testSpeed:i},dN}var fN,VM;function kve(){if(VM)return fN;VM=1;const t=qQ();function e(E,S,C){const _=E[S]+E[C];let T=E[S+1]+E[C+1];_>=4294967296&&T++,E[S]=_,E[S+1]=T}function r(E,S,C,_){let T=E[S]+C;C<0&&(T+=4294967296);let P=E[S+1]+_;T>=4294967296&&P++,E[S]=T,E[S+1]=P}function n(E,S){return E[S]^E[S+1]<<8^E[S+2]<<16^E[S+3]<<24}function s(E,S,C,_,T,P){const D=u[T],L=u[T+1],I=u[P],U=u[P+1];e(c,E,S),r(c,E,D,L);let F=c[_]^c[E],B=c[_+1]^c[E+1];c[_]=B,c[_+1]=F,e(c,C,_),F=c[S]^c[C],B=c[S+1]^c[C+1],c[S]=F>>>24^B<<8,c[S+1]=B>>>24^F<<8,e(c,E,S),r(c,E,I,U),F=c[_]^c[E],B=c[_+1]^c[E+1],c[_]=F>>>16^B<<16,c[_+1]=B>>>16^F<<16,e(c,C,_),F=c[S]^c[C],B=c[S+1]^c[C+1],c[S]=B>>>31^F<<1,c[S+1]=F>>>31^B<<1}const i=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],a=new Uint8Array(o.map(function(E){return E*2})),c=new Uint32Array(32),u=new Uint32Array(32);function l(E,S){let C=0;for(C=0;C<16;C++)c[C]=E.h[C],c[C+16]=i[C];for(c[24]=c[24]^E.t,c[25]=c[25]^E.t/4294967296,S&&(c[28]=~c[28],c[29]=~c[29]),C=0;C<32;C++)u[C]=n(E.b,4*C);for(C=0;C<12;C++)s(0,8,16,24,a[C*16+0],a[C*16+1]),s(2,10,18,26,a[C*16+2],a[C*16+3]),s(4,12,20,28,a[C*16+4],a[C*16+5]),s(6,14,22,30,a[C*16+6],a[C*16+7]),s(0,10,20,30,a[C*16+8],a[C*16+9]),s(2,12,22,24,a[C*16+10],a[C*16+11]),s(4,14,16,26,a[C*16+12],a[C*16+13]),s(6,8,18,28,a[C*16+14],a[C*16+15]);for(C=0;C<16;C++)E.h[C]=E.h[C]^c[C]^c[C+16]}const d=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function f(E,S,C,_){if(E===0||E>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(S&&S.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(C&&C.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(_&&_.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const T={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:E};d.fill(0),d[0]=E,S&&(d[1]=S.length),d[2]=1,d[3]=1,C&&d.set(C,32),_&&d.set(_,48);for(let P=0;P<16;P++)T.h[P]=i[P]^n(d,P*4);return S&&(p(T,S),T.c=128),T}function p(E,S){for(let C=0;C<S.length;C++)E.c===128&&(E.t+=E.c,l(E,!1),E.c=0),E.b[E.c++]=S[C]}function g(E){for(E.t+=E.c;E.c<128;)E.b[E.c++]=0;l(E,!0);const S=new Uint8Array(E.outlen);for(let C=0;C<E.outlen;C++)S[C]=E.h[C>>2]>>8*(C&3);return S}function h(E,S,C,_,T){C=C||64,E=t.normalizeInput(E),_&&(_=t.normalizeInput(_)),T&&(T=t.normalizeInput(T));const P=f(C,S,_,T);return p(P,E),g(P)}function y(E,S,C,_,T){const P=h(E,S,C,_,T);return t.toHex(P)}return fN={blake2b:h,blake2bHex:y,blake2bInit:f,blake2bUpdate:p,blake2bFinal:g},fN}var hN,GM;function Bve(){if(GM)return hN;GM=1;const t=qQ();function e(g,h){return g[h]^g[h+1]<<8^g[h+2]<<16^g[h+3]<<24}function r(g,h,y,E,S,C){o[g]=o[g]+o[h]+S,o[E]=n(o[E]^o[g],16),o[y]=o[y]+o[E],o[h]=n(o[h]^o[y],12),o[g]=o[g]+o[h]+C,o[E]=n(o[E]^o[g],8),o[y]=o[y]+o[E],o[h]=n(o[h]^o[y],7)}function n(g,h){return g>>>h^g<<32-h}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),a=new Uint32Array(16);function c(g,h){let y=0;for(y=0;y<8;y++)o[y]=g.h[y],o[y+8]=s[y];for(o[12]^=g.t,o[13]^=g.t/4294967296,h&&(o[14]=~o[14]),y=0;y<16;y++)a[y]=e(g.b,4*y);for(y=0;y<10;y++)r(0,4,8,12,a[i[y*16+0]],a[i[y*16+1]]),r(1,5,9,13,a[i[y*16+2]],a[i[y*16+3]]),r(2,6,10,14,a[i[y*16+4]],a[i[y*16+5]]),r(3,7,11,15,a[i[y*16+6]],a[i[y*16+7]]),r(0,5,10,15,a[i[y*16+8]],a[i[y*16+9]]),r(1,6,11,12,a[i[y*16+10]],a[i[y*16+11]]),r(2,7,8,13,a[i[y*16+12]],a[i[y*16+13]]),r(3,4,9,14,a[i[y*16+14]],a[i[y*16+15]]);for(y=0;y<8;y++)g.h[y]^=o[y]^o[y+8]}function u(g,h){if(!(g>0&&g<=32))throw new Error("Incorrect output length, should be in [1, 32]");const y=h?h.length:0;if(h&&!(y>0&&y<=32))throw new Error("Incorrect key length, should be in [1, 32]");const E={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:g};return E.h[0]^=16842752^y<<8^g,y>0&&(l(E,h),E.c=64),E}function l(g,h){for(let y=0;y<h.length;y++)g.c===64&&(g.t+=g.c,c(g,!1),g.c=0),g.b[g.c++]=h[y]}function d(g){for(g.t+=g.c;g.c<64;)g.b[g.c++]=0;c(g,!0);const h=new Uint8Array(g.outlen);for(let y=0;y<g.outlen;y++)h[y]=g.h[y>>2]>>8*(y&3)&255;return h}function f(g,h,y){y=y||32,g=t.normalizeInput(g);const E=u(y,h);return l(E,g),d(E)}function p(g,h,y){const E=f(g,h,y);return t.toHex(E)}return hN={blake2s:f,blake2sHex:p,blake2sInit:u,blake2sUpdate:l,blake2sFinal:d},hN}var pN,KM;function Uve(){if(KM)return pN;KM=1;const t=kve(),e=Bve();return pN={blake2b:t.blake2b,blake2bHex:t.blake2bHex,blake2bInit:t.blake2bInit,blake2bUpdate:t.blake2bUpdate,blake2bFinal:t.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},pN}var HQ=Uve(),Mve={};const Dve=":";function Zd(t){const[e,r]=t.split(Dve);return{namespace:e,reference:r}}function zQ(t,e){return t.includes(":")?[t]:e.chains||[]}var jve=Object.defineProperty,Lve=Object.defineProperties,Fve=Object.getOwnPropertyDescriptors,ZM=Object.getOwnPropertySymbols,$ve=Object.prototype.hasOwnProperty,qve=Object.prototype.propertyIsEnumerable,L8=(t,e,r)=>e in t?jve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,YM=(t,e)=>{for(var r in e||(e={}))$ve.call(e,r)&&L8(t,r,e[r]);if(ZM)for(var r of ZM(e))qve.call(e,r)&&L8(t,r,e[r]);return t},Hve=(t,e)=>Lve(t,Fve(e)),JM=(t,e,r)=>L8(t,typeof e!="symbol"?e+"":e,r);const zve="ReactNative",ic={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Wve="js";function I6(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Fh(){return!di.getDocument()&&!!di.getNavigator()&&navigator.product===zve}function Vve(){return Fh()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Gve(){return Fh()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Ky(){return!I6()&&!!di.getNavigator()&&!!di.getDocument()}function qE(){return Fh()?ic.reactNative:I6()?ic.node:Ky()?ic.browser:ic.unknown}function XM(){var t;try{return Fh()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Kve(t,e){const r=new URLSearchParams(t);return Object.entries(e).sort(([n],[s])=>n.localeCompare(s)).forEach(([n,s])=>{s!=null&&r.set(n,String(s))}),r.toString()}function Zve(t){var e,r;const n=WQ();try{return t!=null&&t.url&&n.url&&new URL(t.url).host!==new URL(n.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),t.url=n.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),Hve(YM(YM({},n),t),{url:t?.url||n.url,name:t?.name||n.name,description:t?.description||n.description,icons:(r=t?.icons)!=null&&r.length&&t.icons.length>0?t.icons:n.icons})}catch(s){return console.warn("Error populating app metadata",s),t||n}}function WQ(){return fX.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function Yve(){if(qE()===ic.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=lX();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Jve(){var t;const e=qE();return e===ic.browser?[e,((t=di.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function VQ(t,e,r){const n=Yve(),s=Jve();return[[t,e].join("-"),[Wve,r].join("-"),n,s].join("/")}function Xve({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=r.split("?"),l=VQ(t,e,n),d={auth:s,ua:l,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},f=Kve(u[1]||"",d);return u[0]+"?"+f}function o0(t,e){return t.filter(r=>e.includes(r)).length===t.length}function F8(t){return Object.fromEntries(t.entries())}function $8(t){return new Map(Object.entries(t))}function qp(t=he.FIVE_MINUTES,e){const r=he.toMiliseconds(t||he.FIVE_MINUTES);let n,s,i,o;return{resolve:a=>{i&&n&&(clearTimeout(i),n(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),c(u)},r),n=a,s=c})}}function El(t,e,r){return new Promise(async(n,s)=>{const i=setTimeout(()=>s(new Error(r)),e);try{const o=await t;n(o)}catch(o){s(o)}clearTimeout(i)})}function GQ(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Qve(t){return GQ("topic",t)}function eEe(t){return GQ("id",t)}function KQ(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Ps(t,e){return he.fromMiliseconds(Date.now()+he.toMiliseconds(t))}function gl(t){return Date.now()>=he.toMiliseconds(t)}function mn(t,e){return`${t}${e?`:${e}`:""}`}function Nl(t=[],e=[]){return[...new Set([...t,...e])]}async function tEe({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r,i=s?.href;if(typeof i!="string")return;const o=rEe(i,t,e),a=qE();if(a===ic.browser){if(!((n=di.getDocument())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}nEe(o)}else a===ic.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function rEe(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${aEe(n,!0)}`}else s=`${s}/wc?${n}`;return s}function nEe(t){let e="_self";oEe()?e="_top":(iEe()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function sEe(t,e){let r="";try{if(Ky()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function QM(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function e7(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function ck(){return typeof process<"u"&&Mve.IS_VITEST==="true"}function iEe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function oEe(){try{return window.self!==window.top}catch{return!1}}function aEe(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function ZQ(t){return Buffer.from(t,"base64").toString("utf-8")}function cEe(t){return new Promise(e=>setTimeout(e,t))}let uEe=class{constructor({limit:e}){JM(this,"limit"),JM(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const r=this.set.values().next().value;r&&this.set.delete(r)}this.set.add(e)}}has(e){return this.set.has(e)}};const l2=BigInt(2**32-1),t7=BigInt(32);function YQ(t,e=!1){return e?{h:Number(t&l2),l:Number(t>>t7&l2)}:{h:Number(t>>t7&l2)|0,l:Number(t&l2)|0}}function JQ(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:o,l:a}=YQ(t[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const r7=(t,e,r)=>t>>>r,n7=(t,e,r)=>t<<32-r|e>>>r,eh=(t,e,r)=>t>>>r|e<<32-r,th=(t,e,r)=>t<<32-r|e>>>r,y1=(t,e,r)=>t<<64-r|e>>>r-32,b1=(t,e,r)=>t>>>r-32|e<<64-r,lEe=(t,e)=>e,dEe=(t,e)=>t,fEe=(t,e,r)=>t<<r|e>>>32-r,hEe=(t,e,r)=>e<<r|t>>>32-r,pEe=(t,e,r)=>e<<r-32|t>>>64-r,gEe=(t,e,r)=>t<<r-32|e>>>64-r;function vu(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const uk=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),lk=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,mEe=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),yEe=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,bEe=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),wEe=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,Tg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function FT(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function nf(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function $u(t,...e){if(!FT(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function $T(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");nf(t.outputLen),nf(t.blockLen)}function Rh(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function dk(t,e){$u(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function zv(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function zc(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function gN(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function el(t,e){return t<<32-e|t>>>e}const XQ=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function QQ(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Td=XQ?t=>t:t=>QQ(t);function vEe(t){for(let e=0;e<t.length;e++)t[e]=QQ(t[e]);return t}const rh=XQ?t=>t:vEe,eee=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",EEe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Qm(t){if($u(t),eee)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=EEe[t[r]];return e}const nd={_0:48,_9:57,A:65,F:70,a:97,f:102};function s7(t){if(t>=nd._0&&t<=nd._9)return t-nd._0;if(t>=nd.A&&t<=nd.F)return t-(nd.A-10);if(t>=nd.a&&t<=nd.f)return t-(nd.a-10)}function T6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(eee)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=s7(t.charCodeAt(i)),a=s7(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function tee(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Mu(t){return typeof t=="string"&&(t=tee(t)),$u(t),t}function uh(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];$u(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let qT=class{};function HE(t){const e=n=>t().update(Mu(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function _Ee(t){const e=(n,s)=>t(s).update(Mu(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function Y0(t=32){if(Tg&&typeof Tg.getRandomValues=="function")return Tg.getRandomValues(new Uint8Array(t));if(Tg&&typeof Tg.randomBytes=="function")return Uint8Array.from(Tg.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const AEe=BigInt(0),Mb=BigInt(1),xEe=BigInt(2),CEe=BigInt(7),SEe=BigInt(256),IEe=BigInt(113),ree=[],nee=[],see=[];for(let t=0,e=Mb,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],ree.push(2*(5*n+r)),nee.push((t+1)*(t+2)/2%64);let s=AEe;for(let i=0;i<7;i++)e=(e<<Mb^(e>>CEe)*IEe)%SEe,e&xEe&&(s^=Mb<<(Mb<<BigInt(i))-Mb);see.push(s)}const iee=JQ(see,!0),TEe=iee[0],NEe=iee[1],i7=(t,e,r)=>r>32?pEe(t,e,r):fEe(t,e,r),o7=(t,e,r)=>r>32?gEe(t,e,r):hEe(t,e,r);function PEe(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],d=i7(u,l,1)^r[a],f=o7(u,l,1)^r[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=nee[o],c=i7(s,i,a),u=o7(s,i,a),l=ree[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=TEe[n],t[1]^=NEe[n]}zc(r)}let REe=class oee extends qT{constructor(e,r,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,nf(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=zv(this.state)}clone(){return this._cloneInto()}keccak(){rh(this.state32),PEe(this.state32,this.rounds),rh(this.state32),this.posOut=0,this.pos=0}update(e){Rh(this),e=Mu(e),$u(e);const{blockLen:r,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Rh(this,!1),$u(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return nf(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(dk(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,zc(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new oee(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const OEe=(t,e,r)=>HE(()=>new REe(e,t,r)),kEe=OEe(1,136,256/8);function BEe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function UEe(t,e,r){return t&e^~t&r}function MEe(t,e,r){return t&e^t&r^e&r}let aee=class extends qT{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=gN(this.buffer)}update(e){Rh(this),e=Mu(e),$u(e);const{view:r,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=gN(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Rh(this),dk(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,zc(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;BEe(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=gN(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}};const Sf=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Wi=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Vi=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),DEe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),If=new Uint32Array(64);let jEe=class extends aee{constructor(e=32){super(64,e,8,!1),this.A=Sf[0]|0,this.B=Sf[1]|0,this.C=Sf[2]|0,this.D=Sf[3]|0,this.E=Sf[4]|0,this.F=Sf[5]|0,this.G=Sf[6]|0,this.H=Sf[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)If[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const f=If[d-15],p=If[d-2],g=el(f,7)^el(f,18)^f>>>3,h=el(p,17)^el(p,19)^p>>>10;If[d]=h+If[d-7]+g+If[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=el(a,6)^el(a,11)^el(a,25),p=l+f+UEe(a,c,u)+DEe[d]+If[d]|0,g=(el(n,2)^el(n,13)^el(n,22))+MEe(n,s,i)|0;l=u,u=c,c=a,a=o+p|0,o=i,i=s,s=n,n=p+g|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){zc(If)}destroy(){this.set(0,0,0,0,0,0,0,0),zc(this.buffer)}};const cee=JQ(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),LEe=cee[0],FEe=cee[1],Tf=new Uint32Array(80),Nf=new Uint32Array(80);let fk=class extends aee{constructor(e=64){super(128,e,16,!1),this.Ah=Vi[0]|0,this.Al=Vi[1]|0,this.Bh=Vi[2]|0,this.Bl=Vi[3]|0,this.Ch=Vi[4]|0,this.Cl=Vi[5]|0,this.Dh=Vi[6]|0,this.Dl=Vi[7]|0,this.Eh=Vi[8]|0,this.El=Vi[9]|0,this.Fh=Vi[10]|0,this.Fl=Vi[11]|0,this.Gh=Vi[12]|0,this.Gl=Vi[13]|0,this.Hh=Vi[14]|0,this.Hl=Vi[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:p,Gl:g,Hh:h,Hl:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=p|0,this.Gl=g|0,this.Hh=h|0,this.Hl=y|0}process(e,r){for(let C=0;C<16;C++,r+=4)Tf[C]=e.getUint32(r),Nf[C]=e.getUint32(r+=4);for(let C=16;C<80;C++){const _=Tf[C-15]|0,T=Nf[C-15]|0,P=eh(_,T,1)^eh(_,T,8)^r7(_,T,7),D=th(_,T,1)^th(_,T,8)^n7(_,T,7),L=Tf[C-2]|0,I=Nf[C-2]|0,U=eh(L,I,19)^y1(L,I,61)^r7(L,I,6),F=th(L,I,19)^b1(L,I,61)^n7(L,I,6),B=mEe(D,F,Nf[C-7],Nf[C-16]),A=yEe(B,P,U,Tf[C-7],Tf[C-16]);Tf[C]=A|0,Nf[C]=B|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:p,Fl:g,Gh:h,Gl:y,Hh:E,Hl:S}=this;for(let C=0;C<80;C++){const _=eh(d,f,14)^eh(d,f,18)^y1(d,f,41),T=th(d,f,14)^th(d,f,18)^b1(d,f,41),P=d&p^~d&h,D=f&g^~f&y,L=bEe(S,T,D,FEe[C],Nf[C]),I=wEe(L,E,_,P,LEe[C],Tf[C]),U=L|0,F=eh(n,s,28)^y1(n,s,34)^y1(n,s,39),B=th(n,s,28)^b1(n,s,34)^b1(n,s,39),A=n&i^n&a^i&a,m=s&o^s&c^o&c;E=h|0,S=y|0,h=p|0,y=g|0,p=d|0,g=f|0,{h:d,l:f}=vu(u|0,l|0,I|0,U|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const b=uk(U,B,m);n=lk(b,I,F,A),s=b|0}({h:n,l:s}=vu(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=vu(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=vu(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=vu(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=vu(this.Eh|0,this.El|0,d|0,f|0),{h:p,l:g}=vu(this.Fh|0,this.Fl|0,p|0,g|0),{h,l:y}=vu(this.Gh|0,this.Gl|0,h|0,y|0),{h:E,l:S}=vu(this.Hh|0,this.Hl|0,E|0,S|0),this.set(n,s,i,o,a,c,u,l,d,f,p,g,h,y,E,S)}roundClean(){zc(Tf,Nf)}destroy(){zc(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},$Ee=class extends fk{constructor(){super(48),this.Ah=Wi[0]|0,this.Al=Wi[1]|0,this.Bh=Wi[2]|0,this.Bl=Wi[3]|0,this.Ch=Wi[4]|0,this.Cl=Wi[5]|0,this.Dh=Wi[6]|0,this.Dl=Wi[7]|0,this.Eh=Wi[8]|0,this.El=Wi[9]|0,this.Fh=Wi[10]|0,this.Fl=Wi[11]|0,this.Gh=Wi[12]|0,this.Gl=Wi[13]|0,this.Hh=Wi[14]|0,this.Hl=Wi[15]|0}};const Gi=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let qEe=class extends fk{constructor(){super(32),this.Ah=Gi[0]|0,this.Al=Gi[1]|0,this.Bh=Gi[2]|0,this.Bl=Gi[3]|0,this.Ch=Gi[4]|0,this.Cl=Gi[5]|0,this.Dh=Gi[6]|0,this.Dl=Gi[7]|0,this.Eh=Gi[8]|0,this.El=Gi[9]|0,this.Fh=Gi[10]|0,this.Fl=Gi[11]|0,this.Gh=Gi[12]|0,this.Gl=Gi[13]|0,this.Hh=Gi[14]|0,this.Hl=Gi[15]|0}};const HT=HE(()=>new jEe),HEe=HE(()=>new fk),zEe=HE(()=>new $Ee),WEe=HE(()=>new qEe),VEe=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Ls=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Je=new Uint32Array(32);function Pf(t,e,r,n,s,i){const o=s[i],a=s[i+1];let c=Je[2*t],u=Je[2*t+1],l=Je[2*e],d=Je[2*e+1],f=Je[2*r],p=Je[2*r+1],g=Je[2*n],h=Je[2*n+1],y=uk(c,l,o);u=lk(y,u,d,a),c=y|0,{Dh:h,Dl:g}={Dh:h^u,Dl:g^c},{Dh:h,Dl:g}={Dh:lEe(h,g),Dl:dEe(h)},{h:p,l:f}=vu(p,f,h,g),{Bh:d,Bl:l}={Bh:d^p,Bl:l^f},{Bh:d,Bl:l}={Bh:eh(d,l,24),Bl:th(d,l,24)},Je[2*t]=c,Je[2*t+1]=u,Je[2*e]=l,Je[2*e+1]=d,Je[2*r]=f,Je[2*r+1]=p,Je[2*n]=g,Je[2*n+1]=h}function Rf(t,e,r,n,s,i){const o=s[i],a=s[i+1];let c=Je[2*t],u=Je[2*t+1],l=Je[2*e],d=Je[2*e+1],f=Je[2*r],p=Je[2*r+1],g=Je[2*n],h=Je[2*n+1],y=uk(c,l,o);u=lk(y,u,d,a),c=y|0,{Dh:h,Dl:g}={Dh:h^u,Dl:g^c},{Dh:h,Dl:g}={Dh:eh(h,g,16),Dl:th(h,g,16)},{h:p,l:f}=vu(p,f,h,g),{Bh:d,Bl:l}={Bh:d^p,Bl:l^f},{Bh:d,Bl:l}={Bh:y1(d,l,63),Bl:b1(d,l,63)},Je[2*t]=c,Je[2*t+1]=u,Je[2*e]=l,Je[2*e+1]=d,Je[2*r]=f,Je[2*r+1]=p,Je[2*n]=g,Je[2*n+1]=h}function GEe(t,e={},r,n,s){if(nf(r),t<0||t>r)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>r))throw new Error("key length must be undefined or 1.."+r);if(o!==void 0&&o.length!==n)throw new Error("salt must be undefined or "+n);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class KEe extends qT{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,nf(e),nf(r),this.blockLen=e,this.outputLen=r,this.buffer=new Uint8Array(e),this.buffer32=zv(this.buffer)}update(e){Rh(this),e=Mu(e),$u(e);const{blockLen:r,buffer:n,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===r&&(rh(s),this.compress(s,0,!1),rh(s),this.pos=0);const u=Math.min(r-this.pos,i-c),l=o+c;if(u===r&&!(l%4)&&c+u<i){const d=new Uint32Array(a,l,Math.floor((i-c)/4));rh(d);for(let f=0;c+r<i;f+=s.length,c+=r)this.length+=r,this.compress(d,f,!1);rh(d);continue}n.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){Rh(this),dk(e,this);const{pos:r,buffer32:n}=this;this.finished=!0,zc(this.buffer.subarray(r)),rh(n),this.compress(n,0,!0),rh(n);const s=zv(e);this.get().forEach((i,o)=>s[o]=Td(i))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){const{buffer:r,length:n,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(r),e.destroyed=i,e.finished=s,e.length=n,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}let ZEe=class extends KEe{constructor(e={}){const r=e.dkLen===void 0?64:e.dkLen;super(128,r),this.v0l=Ls[0]|0,this.v0h=Ls[1]|0,this.v1l=Ls[2]|0,this.v1h=Ls[3]|0,this.v2l=Ls[4]|0,this.v2h=Ls[5]|0,this.v3l=Ls[6]|0,this.v3h=Ls[7]|0,this.v4l=Ls[8]|0,this.v4h=Ls[9]|0,this.v5l=Ls[10]|0,this.v5h=Ls[11]|0,this.v6l=Ls[12]|0,this.v6h=Ls[13]|0,this.v7l=Ls[14]|0,this.v7h=Ls[15]|0,GEe(r,e,64,16,16);let{key:n,personalization:s,salt:i}=e,o=0;if(n!==void 0&&(n=Mu(n),o=n.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Mu(i);const a=zv(i);this.v4l^=Td(a[0]),this.v4h^=Td(a[1]),this.v5l^=Td(a[2]),this.v5h^=Td(a[3])}if(s!==void 0){s=Mu(s);const a=zv(s);this.v6l^=Td(a[0]),this.v6h^=Td(a[1]),this.v7l^=Td(a[2]),this.v7h^=Td(a[3])}if(n!==void 0){const a=new Uint8Array(this.blockLen);a.set(n),this.update(a)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:u,v4h:l,v5l:d,v5h:f,v6l:p,v6h:g,v7l:h,v7h:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=l|0,this.v5l=d|0,this.v5h=f|0,this.v6l=p|0,this.v6h=g|0,this.v7l=h|0,this.v7h=y|0}compress(e,r,n){this.get().forEach((c,u)=>Je[u]=c),Je.set(Ls,16);let{h:s,l:i}=YQ(BigInt(this.length));Je[24]=Ls[8]^i,Je[25]=Ls[9]^s,n&&(Je[28]=~Je[28],Je[29]=~Je[29]);let o=0;const a=VEe;for(let c=0;c<12;c++)Pf(0,4,8,12,e,r+2*a[o++]),Rf(0,4,8,12,e,r+2*a[o++]),Pf(1,5,9,13,e,r+2*a[o++]),Rf(1,5,9,13,e,r+2*a[o++]),Pf(2,6,10,14,e,r+2*a[o++]),Rf(2,6,10,14,e,r+2*a[o++]),Pf(3,7,11,15,e,r+2*a[o++]),Rf(3,7,11,15,e,r+2*a[o++]),Pf(0,5,10,15,e,r+2*a[o++]),Rf(0,5,10,15,e,r+2*a[o++]),Pf(1,6,11,12,e,r+2*a[o++]),Rf(1,6,11,12,e,r+2*a[o++]),Pf(2,7,8,13,e,r+2*a[o++]),Rf(2,7,8,13,e,r+2*a[o++]),Pf(3,4,9,14,e,r+2*a[o++]),Rf(3,4,9,14,e,r+2*a[o++]);this.v0l^=Je[0]^Je[16],this.v0h^=Je[1]^Je[17],this.v1l^=Je[2]^Je[18],this.v1h^=Je[3]^Je[19],this.v2l^=Je[4]^Je[20],this.v2h^=Je[5]^Je[21],this.v3l^=Je[6]^Je[22],this.v3h^=Je[7]^Je[23],this.v4l^=Je[8]^Je[24],this.v4h^=Je[9]^Je[25],this.v5l^=Je[10]^Je[26],this.v5h^=Je[11]^Je[27],this.v6l^=Je[12]^Je[28],this.v6h^=Je[13]^Je[29],this.v7l^=Je[14]^Je[30],this.v7h^=Je[15]^Je[31],zc(Je)}destroy(){this.destroyed=!0,zc(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const YEe=_Ee(t=>new ZEe(t)),JEe="https://rpc.walletconnect.org/v1";function uee(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(kEe(r)).toString("hex")}async function XEe(t,e,r,n,s,i){switch(r.t){case"eip191":return await QEe(t,e,r.s);case"eip1271":return await e_e(t,e,r.s,n,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function QEe(t,e,r){const n=Hbe(r);return Jwe({payload:uee(e),signature:n}).toLowerCase()===t.toLowerCase()}async function e_e(t,e,r,n,s,i){const o=Zd(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u=r.substring(2),l=(u.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:uee(e)).substring(2),f=a+d+c+l+u,p=await fetch(`${i||JEe}/?chainId=${n}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:t_e(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:f},"latest"]})}),{result:g}=await p.json();return g?g.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function t_e(){return Date.now()+Math.floor(Math.random()*1e3)}function r_e(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const s=1+n*64;if(r.length<s)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Zn.encode(i)}function n_e(t){const e=new Uint8Array(Buffer.from(t,"base64")),r=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),n=new Uint8Array(r.length+e.length);n.set(r),n.set(e,r.length);const s=YEe(n,{dkLen:32});return Zn.encode(s)}function a7(t){const e=new Uint8Array(HT(s_e(t)));return Zn.encode(e)}function s_e(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function c7(t){const e=Buffer.from(t,"base64"),r=UQ(e).txn;if(!r)throw new Error("Invalid signed transaction: missing 'txn' field");const n=OQ(r),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(n)]),o=WEe(i);return SQ.encode(o).replace(/=+$/,"")}function mN(t){const e=[];let r=BigInt(t);for(;r>=BigInt(128);)e.push(Number(r&BigInt(127)|BigInt(128))),r>>=BigInt(7);return e.push(Number(r)),Buffer.from(e)}function i_e(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),r=Buffer.from(t.signed.authInfoBytes,"base64"),n=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(mN(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(mN(r.length)),s.push(r),s.push(Buffer.from([26])),s.push(mN(n.length)),s.push(n);const i=Buffer.concat(s),o=HT(i);return Buffer.from(o).toString("hex").toUpperCase()}function o_e(t){var e,r;const n=[];try{if(typeof t=="string")return n.push(t),n;if(typeof t!="object")return n;t!=null&&t.id&&n.push(t.id);const s=(r=(e=t?.capabilities)==null?void 0:e.caip345)==null?void 0:r.transactionHashes;s&&n.push(...s)}catch(s){console.warn("getWalletSendCallsHashes failed: ",s)}return n}var a_e=Object.defineProperty,c_e=Object.defineProperties,u_e=Object.getOwnPropertyDescriptors,u7=Object.getOwnPropertySymbols,l_e=Object.prototype.hasOwnProperty,d_e=Object.prototype.propertyIsEnumerable,l7=(t,e,r)=>e in t?a_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,f_e=(t,e)=>{for(var r in e||(e={}))l_e.call(e,r)&&l7(t,r,e[r]);if(u7)for(var r of u7(e))d_e.call(e,r)&&l7(t,r,e[r]);return t},h_e=(t,e)=>c_e(t,u_e(e));const lee="did:pkh:",p_e={eip155:"Ethereum",solana:"Solana",bip122:"Bitcoin"},g_e=t=>t?p_e[t]||t:"",zT=t=>t?.split(":"),m_e=t=>{const e=t&&zT(t);if(e)return t.includes(lee)?e[3]:e[1]},y_e=t=>{const e=t&&zT(t);if(e)return t.includes(lee)?e[2]:e[0]},q8=t=>{const e=t&&zT(t);if(e)return e[2]+":"+e[3]},N6=t=>{const e=t&&zT(t);if(e)return e.pop()};async function d7(t){const{cacao:e,projectId:r}=t,{s:n,p:s}=e,i=dee(s,s.iss),o=N6(s.iss);return await XEe(o,i,n,q8(s.iss),r)}const dee=(t,e)=>{const r=y_e(e);if(!r)throw new Error("Invalid issuer: "+e);const n=`${t.domain} wants you to sign in with your ${g_e(r)} account:`,s=N6(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const o=`URI: ${t.aud||t.uri}`,a=`Version: ${t.version}`,c=`Chain ID: ${m_e(e)}`,u=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,d=t.exp?`Expiration Time: ${t.exp}`:void 0,f=t.nbf?`Not Before: ${t.nbf}`:void 0,p=t.requestId?`Request ID: ${t.requestId}`:void 0,g=t.resources?`Resources:${t.resources.map(y=>`
- ${y}`).join("")}`:void 0,h=bI(t.resources);if(h){const y=Wv(h);i=S_e(i,y)}return[n,s,"",i,"",o,a,c,u,l,d,f,p,g].filter(y=>y!=null).join(`
`)};function b_e(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function w_e(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function R0(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(s=>{const i=n[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function v_e(t,e,r,n={}){return r?.sort((s,i)=>s.localeCompare(i)),{att:{[t]:E_e(e,r,n)}}}function E_e(t,e,r={}){e=e?.sort((s,i)=>s.localeCompare(i));const n=e.map(s=>({[`${t}/${s}`]:[r]}));return Object.assign({},...n)}function fee(t){return R0(t),`urn:recap:${b_e(t).replace(/=/g,"")}`}function Wv(t){const e=w_e(t.replace("urn:recap:",""));return R0(e),e}function __e(t,e,r){const n=v_e(t,e,r);return fee(n)}function A_e(t){return t&&t.includes("urn:recap:")}function x_e(t,e){const r=Wv(t),n=Wv(e),s=C_e(r,n);return fee(s)}function C_e(t,e){R0(t),R0(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),n={att:{}};return r.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;n.att[s]=h_e(f_e({},n.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((u=e.att[s])==null?void 0:u[a])})})}),n}function S_e(t="",e){R0(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,f)=>d.action.localeCompare(f.action));const u={};c.forEach(d=>{u[d.ability]||(u[d.ability]=[]),u[d.ability].push(d.action)});const l=Object.keys(u).map(d=>(s++,`(${s}) '${d}': '${u[d].join("', '")}' for '${a}'.`));n.push(l.join(", ").replace(".,","."))});const i=n.join(" "),o=`${r}${i}`;return`${t?t+" ":""}${o}`}function f7(t){var e;const r=Wv(t);R0(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(s=>s.split("/")[1]):[]}function h7(t){const e=Wv(t);R0(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(s=>{var i;(i=s?.[0])!=null&&i.chains&&r.push(s[0].chains)})}),[...new Set(r.flat())]}function bI(t){if(!t)return;const e=t?.[t.length-1];return A_e(e)?e:void 0}function hee(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function H8(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function yN(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function fa(t,...e){if(!hee(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function p7(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function I_e(t,e){fa(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Eh(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function xy(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function T_e(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const N_e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function P_e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function z8(t){if(typeof t=="string")t=P_e(t);else if(hee(t))t=W8(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function R_e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function O_e(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const k_e=(t,e)=>{function r(n,...s){if(fa(n),!N_e)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?fa(u):fa(u,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&fa(s[1]);const o=e(n,...s),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");fa(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,fa(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(fa(u),i&&u.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(r,t),r};function g7(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!U_e(e))throw new Error("invalid output, must be aligned");return e}function m7(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function B_e(t,e,r){H8(r);const n=new Uint8Array(16),s=T_e(n);return m7(s,0,BigInt(e),r),m7(s,8,BigInt(t),r),n}function U_e(t){return t.byteOffset%4===0}function W8(t){return Uint8Array.from(t)}const pee=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),M_e=pee("expand 16-byte k"),D_e=pee("expand 32-byte k"),j_e=Eh(M_e),L_e=Eh(D_e);function Mr(t,e){return t<<e|t>>>32-e}function V8(t){return t.byteOffset%4===0}const d2=64,F_e=16,gee=2**32-1,y7=new Uint32Array;function $_e(t,e,r,n,s,i,o,a){const c=s.length,u=new Uint8Array(d2),l=Eh(u),d=V8(s)&&V8(i),f=d?Eh(s):y7,p=d?Eh(i):y7;for(let g=0;g<c;o++){if(t(e,r,n,l,o,a),o>=gee)throw new Error("arx: counter overflow");const h=Math.min(d2,c-g);if(d&&h===d2){const y=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let E=0,S;E<F_e;E++)S=y+E,p[S]=f[S]^l[E];g+=d2;continue}for(let y=0,E;y<h;y++)E=g+y,i[E]=s[E]^u[y];g+=h}}function q_e(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=R_e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return yN(s),yN(o),H8(i),H8(r),(a,c,u,l,d=0)=>{fa(a),fa(c),fa(u);const f=u.length;if(l===void 0&&(l=new Uint8Array(f)),fa(l),yN(d),d<0||d>=gee)throw new Error("arx: counter overflow");if(l.length<f)throw new Error(`arx: output (${l.length}) is shorter than data (${f})`);const p=[];let g=a.length,h,y;if(g===32)p.push(h=W8(a)),y=L_e;else if(g===16&&r)h=new Uint8Array(32),h.set(a),h.set(a,16),y=j_e,p.push(h);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);V8(c)||p.push(c=W8(c));const E=Eh(h);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(y,E,Eh(c.subarray(0,16)),E),c=c.subarray(16)}const S=16-s;if(S!==c.length)throw new Error(`arx: nonce must be ${S} or 16 bytes`);if(S!==12){const _=new Uint8Array(12);_.set(c,i?0:12-c.length),c=_,p.push(c)}const C=Eh(c);return $_e(t,y,E,C,u,l,d,o),xy(...p),l}}const pi=(t,e)=>t[e++]&255|(t[e++]&255)<<8;let H_e=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=z8(e),fa(e,32);const r=pi(e,0),n=pi(e,2),s=pi(e,4),i=pi(e,6),o=pi(e,8),a=pi(e,10),c=pi(e,12),u=pi(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=pi(e,16+2*l)}process(e,r,n=!1){const s=n?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],d=o[4],f=o[5],p=o[6],g=o[7],h=o[8],y=o[9],E=pi(e,r+0),S=pi(e,r+2),C=pi(e,r+4),_=pi(e,r+6),T=pi(e,r+8),P=pi(e,r+10),D=pi(e,r+12),L=pi(e,r+14);let I=i[0]+(E&8191),U=i[1]+((E>>>13|S<<3)&8191),F=i[2]+((S>>>10|C<<6)&8191),B=i[3]+((C>>>7|_<<9)&8191),A=i[4]+((_>>>4|T<<12)&8191),m=i[5]+(T>>>1&8191),b=i[6]+((T>>>14|P<<2)&8191),w=i[7]+((P>>>11|D<<5)&8191),x=i[8]+((D>>>8|L<<8)&8191),M=i[9]+(L>>>5|s),k=0,j=k+I*a+U*(5*y)+F*(5*h)+B*(5*g)+A*(5*p);k=j>>>13,j&=8191,j+=m*(5*f)+b*(5*d)+w*(5*l)+x*(5*u)+M*(5*c),k+=j>>>13,j&=8191;let N=k+I*c+U*a+F*(5*y)+B*(5*h)+A*(5*g);k=N>>>13,N&=8191,N+=m*(5*p)+b*(5*f)+w*(5*d)+x*(5*l)+M*(5*u),k+=N>>>13,N&=8191;let v=k+I*u+U*c+F*a+B*(5*y)+A*(5*h);k=v>>>13,v&=8191,v+=m*(5*g)+b*(5*p)+w*(5*f)+x*(5*d)+M*(5*l),k+=v>>>13,v&=8191;let R=k+I*l+U*u+F*c+B*a+A*(5*y);k=R>>>13,R&=8191,R+=m*(5*h)+b*(5*g)+w*(5*p)+x*(5*f)+M*(5*d),k+=R>>>13,R&=8191;let $=k+I*d+U*l+F*u+B*c+A*a;k=$>>>13,$&=8191,$+=m*(5*y)+b*(5*h)+w*(5*g)+x*(5*p)+M*(5*f),k+=$>>>13,$&=8191;let O=k+I*f+U*d+F*l+B*u+A*c;k=O>>>13,O&=8191,O+=m*a+b*(5*y)+w*(5*h)+x*(5*g)+M*(5*p),k+=O>>>13,O&=8191;let H=k+I*p+U*f+F*d+B*l+A*u;k=H>>>13,H&=8191,H+=m*c+b*a+w*(5*y)+x*(5*h)+M*(5*g),k+=H>>>13,H&=8191;let W=k+I*g+U*p+F*f+B*d+A*l;k=W>>>13,W&=8191,W+=m*u+b*c+w*a+x*(5*y)+M*(5*h),k+=W>>>13,W&=8191;let G=k+I*h+U*g+F*p+B*f+A*d;k=G>>>13,G&=8191,G+=m*l+b*u+w*c+x*a+M*(5*y),k+=G>>>13,G&=8191;let K=k+I*y+U*h+F*g+B*p+A*f;k=K>>>13,K&=8191,K+=m*d+b*l+w*u+x*c+M*a,k+=K>>>13,K&=8191,k=(k<<2)+k|0,k=k+j|0,j=k&8191,k=k>>>13,N+=k,i[0]=j,i[1]=N,i[2]=v,i[3]=R,i[4]=$,i[5]=O,i[6]=H,i[7]=W,i[8]=G,i[9]=K}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;xy(n)}update(e){p7(this),e=z8(e),fa(e);const{buffer:r,blockLen:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){xy(this.h,this.r,this.buffer,this.pad)}digestInto(e){p7(this),I_e(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}};function z_e(t){const e=(n,s)=>t(s).update(z8(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const W_e=z_e(t=>new H_e(t));function V_e(t,e,r,n,s,i=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],d=e[1],f=e[2],p=e[3],g=e[4],h=e[5],y=e[6],E=e[7],S=s,C=r[0],_=r[1],T=r[2],P=o,D=a,L=c,I=u,U=l,F=d,B=f,A=p,m=g,b=h,w=y,x=E,M=S,k=C,j=_,N=T;for(let R=0;R<i;R+=2)P=P+U|0,M=Mr(M^P,16),m=m+M|0,U=Mr(U^m,12),P=P+U|0,M=Mr(M^P,8),m=m+M|0,U=Mr(U^m,7),D=D+F|0,k=Mr(k^D,16),b=b+k|0,F=Mr(F^b,12),D=D+F|0,k=Mr(k^D,8),b=b+k|0,F=Mr(F^b,7),L=L+B|0,j=Mr(j^L,16),w=w+j|0,B=Mr(B^w,12),L=L+B|0,j=Mr(j^L,8),w=w+j|0,B=Mr(B^w,7),I=I+A|0,N=Mr(N^I,16),x=x+N|0,A=Mr(A^x,12),I=I+A|0,N=Mr(N^I,8),x=x+N|0,A=Mr(A^x,7),P=P+F|0,N=Mr(N^P,16),w=w+N|0,F=Mr(F^w,12),P=P+F|0,N=Mr(N^P,8),w=w+N|0,F=Mr(F^w,7),D=D+B|0,M=Mr(M^D,16),x=x+M|0,B=Mr(B^x,12),D=D+B|0,M=Mr(M^D,8),x=x+M|0,B=Mr(B^x,7),L=L+A|0,k=Mr(k^L,16),m=m+k|0,A=Mr(A^m,12),L=L+A|0,k=Mr(k^L,8),m=m+k|0,A=Mr(A^m,7),I=I+U|0,j=Mr(j^I,16),b=b+j|0,U=Mr(U^b,12),I=I+U|0,j=Mr(j^I,8),b=b+j|0,U=Mr(U^b,7);let v=0;n[v++]=o+P|0,n[v++]=a+D|0,n[v++]=c+L|0,n[v++]=u+I|0,n[v++]=l+U|0,n[v++]=d+F|0,n[v++]=f+B|0,n[v++]=p+A|0,n[v++]=g+m|0,n[v++]=h+b|0,n[v++]=y+w|0,n[v++]=E+x|0,n[v++]=S+M|0,n[v++]=C+k|0,n[v++]=_+j|0,n[v++]=T+N|0}const G_e=q_e(V_e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),K_e=new Uint8Array(16),b7=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(K_e.subarray(r))},Z_e=new Uint8Array(32);function w7(t,e,r,n,s){const i=t(e,r,Z_e),o=W_e.create(i);s&&b7(o,s),b7(o,n);const a=B_e(n.length,s?s.length:0,!0);o.update(a);const c=o.digest();return xy(i,a),c}const Y_e=t=>(e,r,n)=>({encrypt(s,i){const o=s.length;i=g7(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,r,a,a,1);const c=w7(t,e,r,a,n);return i.set(c,o),xy(c),i},decrypt(s,i){i=g7(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=w7(t,e,r,o,n);if(!O_e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,r,i,i,1),xy(c),i}}),mee=k_e({blockSize:64,nonceLength:12,tagLength:16},Y_e(G_e));let yee=class extends qT{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,$T(e);const n=Mu(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),zc(i)}update(e){return Rh(this),this.iHash.update(e),this}digestInto(e){Rh(this),$u(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const WT=(t,e,r)=>new yee(t,e).update(r).digest();WT.create=(t,e)=>new yee(t,e);function J_e(t,e,r){return $T(t),r===void 0&&(r=new Uint8Array(t.outputLen)),WT(t,Mu(r),Mu(e))}const bN=Uint8Array.from([0]),v7=Uint8Array.of();function X_e(t,e,r,n=32){$T(t),nf(n);const s=t.outputLen;if(n>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/s);r===void 0&&(r=v7);const o=new Uint8Array(i*s),a=WT.create(t,e),c=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let l=0;l<i;l++)bN[0]=l+1,c.update(l===0?v7:u).update(r).update(bN).digestInto(u),o.set(u,s*l),a._cloneInto(c);return a.destroy(),c.destroy(),zc(u,bN),o.slice(0,n)}const Q_e=(t,e,r,n,s)=>X_e(t,J_e(t,e,r),n,s),VT=HT,hk=BigInt(0),G8=BigInt(1);function P6(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function a0(t,e,r=""){const n=FT(t),s=t?.length,i=e!==void 0;if(!n||i&&s!==e){const o=r&&`"${r}" `,a=i?` of length ${e}`:"",c=n?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function f2(t){const e=t.toString(16);return e.length&1?"0"+e:e}function bee(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?hk:BigInt("0x"+t)}function GT(t){return bee(Qm(t))}function R6(t){return $u(t),bee(Qm(Uint8Array.from(t).reverse()))}function pk(t,e){return T6(t.toString(16).padStart(e*2,"0"))}function gk(t,e){return pk(t,e).reverse()}function ao(t,e,r){let n;if(typeof e=="string")try{n=T6(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(FT(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}const wN=t=>typeof t=="bigint"&&hk<=t;function e2e(t,e,r){return wN(t)&&wN(e)&&wN(r)&&e<=t&&t<r}function K8(t,e,r,n){if(!e2e(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function wee(t){let e;for(e=0;t>hk;t>>=G8,e+=1);return e}const zE=t=>(G8<<BigInt(t))-G8;function t2e(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=n(t),o=n(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...f)=>r(o,i,...f),l=(f=n(0))=>{o=u(s(0),f),i=u(),f.length!==0&&(o=u(s(1),f),i=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=u();const g=i.slice();p.push(g),f+=i.length}return uh(...p)};return(f,p)=>{c(),l(f);let g;for(;!(g=p(d()));)l();return c(),g}}function KT(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(r).forEach(([s,i])=>n(s,i,!0))}function E7(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const Ea=BigInt(0),Uo=BigInt(1),c0=BigInt(2),vee=BigInt(3),Eee=BigInt(4),_ee=BigInt(5),r2e=BigInt(7),Aee=BigInt(8),n2e=BigInt(9),xee=BigInt(16);function Ya(t,e){const r=t%e;return r>=Ea?r:e+r}function mu(t,e,r){let n=t;for(;e-- >Ea;)n*=n,n%=r;return n}function _7(t,e){if(t===Ea)throw new Error("invert: expected non-zero number");if(e<=Ea)throw new Error("invert: expected positive modulus, got "+e);let r=Ya(t,e),n=e,s=Ea,i=Uo;for(;r!==Ea;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==Uo)throw new Error("invert: does not exist");return Ya(s,e)}function mk(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function Cee(t,e){const r=(t.ORDER+Uo)/Eee,n=t.pow(e,r);return mk(t,n,e),n}function s2e(t,e){const r=(t.ORDER-_ee)/Aee,n=t.mul(e,c0),s=t.pow(n,r),i=t.mul(e,s),o=t.mul(t.mul(i,c0),s),a=t.mul(i,t.sub(o,t.ONE));return mk(t,a,e),a}function i2e(t){const e=$h(t),r=See(t),n=r(e,e.neg(e.ONE)),s=r(e,n),i=r(e,e.neg(n)),o=(t+r2e)/xee;return(a,c)=>{let u=a.pow(c,o),l=a.mul(u,n);const d=a.mul(u,s),f=a.mul(u,i),p=a.eql(a.sqr(l),c),g=a.eql(a.sqr(d),c);u=a.cmov(u,l,p),l=a.cmov(f,d,g);const h=a.eql(a.sqr(l),c),y=a.cmov(u,l,h);return mk(a,y,c),y}}function See(t){if(t<vee)throw new Error("sqrt is not defined for small field");let e=t-Uo,r=0;for(;e%c0===Ea;)e/=c0,r++;let n=c0;const s=$h(t);for(;A7(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return Cee;let i=s.pow(n,e);const o=(e+Uo)/c0;return function(a,c){if(a.is0(c))return c;if(A7(a,c)!==1)throw new Error("Cannot find square root");let u=r,l=a.mul(a.ONE,i),d=a.pow(c,e),f=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let p=1,g=a.sqr(d);for(;!a.eql(g,a.ONE);)if(p++,g=a.sqr(g),p===u)throw new Error("Cannot find square root");const h=Uo<<BigInt(u-p-1),y=a.pow(l,h);u=p,l=a.sqr(y),d=a.mul(d,l),f=a.mul(f,y)}return f}}function o2e(t){return t%Eee===vee?Cee:t%Aee===_ee?s2e:t%xee===n2e?i2e(t):See(t)}const a2e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function c2e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=a2e.reduce((n,s)=>(n[s]="function",n),e);return KT(t,r),t}function u2e(t,e,r){if(r<Ea)throw new Error("invalid exponent, negatives unsupported");if(r===Ea)return t.ONE;if(r===Uo)return e;let n=t.ONE,s=e;for(;r>Ea;)r&Uo&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Uo;return n}function Iee(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),i),n}function A7(t,e){const r=(t.ORDER-Uo)/c0,n=t.pow(e,r),s=t.eql(n,t.ONE),i=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Tee(t,e){e!==void 0&&nf(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function $h(t,e,r=!1,n={}){if(t<=Ea)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const f=e;f.BITS&&(s=f.BITS),f.sqrt&&(i=f.sqrt),typeof f.isLE=="boolean"&&(r=f.isLE),typeof f.modFromBytes=="boolean"&&(o=f.modFromBytes),a=f.allowedLengths}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:c,nByteLength:u}=Tee(t,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const d=Object.freeze({ORDER:t,isLE:r,BITS:c,BYTES:u,MASK:zE(c),ZERO:Ea,ONE:Uo,allowedLengths:a,create:f=>Ya(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return Ea<=f&&f<t},is0:f=>f===Ea,isValidNot0:f=>!d.is0(f)&&d.isValid(f),isOdd:f=>(f&Uo)===Uo,neg:f=>Ya(-f,t),eql:(f,p)=>f===p,sqr:f=>Ya(f*f,t),add:(f,p)=>Ya(f+p,t),sub:(f,p)=>Ya(f-p,t),mul:(f,p)=>Ya(f*p,t),pow:(f,p)=>u2e(d,f,p),div:(f,p)=>Ya(f*_7(p,t),t),sqrN:f=>f*f,addN:(f,p)=>f+p,subN:(f,p)=>f-p,mulN:(f,p)=>f*p,inv:f=>_7(f,t),sqrt:i||(f=>(l||(l=o2e(t)),l(d,f))),toBytes:f=>r?gk(f,u):pk(f,u),fromBytes:(f,p=!0)=>{if(a){if(!a.includes(f.length)||f.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);const h=new Uint8Array(u);h.set(f,r?0:h.length-f.length),f=h}if(f.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+f.length);let g=r?R6(f):GT(f);if(o&&(g=Ya(g,t)),!p&&!d.isValid(g))throw new Error("invalid field element: outside of range 0..ORDER");return g},invertBatch:f=>Iee(d,f),cmov:(f,p,g)=>g?p:f});return Object.freeze(d)}function Nee(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Pee(t){const e=Nee(t);return e+Math.ceil(e/2)}function l2e(t,e,r=!1){const n=t.length,s=Nee(e),i=Pee(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?R6(t):GT(t),a=Ya(o,e-Uo)+Uo;return r?gk(a,s):pk(a,s)}const Cy=BigInt(0),u0=BigInt(1);function O6(t,e){const r=e.negate();return t?r:e}function vN(t,e){const r=Iee(t.Fp,e.map(n=>n.Z));return e.map((n,s)=>t.fromAffine(n.toAffine(r[s])))}function Ree(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function EN(t,e){Ree(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),s=2**t,i=zE(t),o=BigInt(t);return{windows:r,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function x7(t,e,r){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=r;let a=Number(t&s),c=t>>o;a>n&&(a-=i,c+=u0);const u=e*n,l=u+Math.abs(a)-1,d=a===0,f=a<0,p=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:p,offsetF:u}}function d2e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function f2e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const _N=new WeakMap,Oee=new WeakMap;function AN(t){return Oee.get(t)||1}function C7(t){if(t!==Cy)throw new Error("invalid wNAF")}let h2e=class{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let s=e;for(;r>Cy;)r&u0&&(n=n.add(s)),s=s.double(),r>>=u0;return n}precomputeWindow(e,r){const{windows:n,windowSize:s}=EN(r,this.bits),i=[];let o=e,a=o;for(let c=0;c<n;c++){a=o,i.push(a);for(let u=1;u<s;u++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=EN(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:u,isZero:l,isNeg:d,isNegF:f,offsetF:p}=x7(n,a,o);n=c,l?i=i.add(O6(f,r[p])):s=s.add(O6(d,r[u]))}return C7(n),{p:s,f:i}}wNAFUnsafe(e,r,n,s=this.ZERO){const i=EN(e,this.bits);for(let o=0;o<i.windows&&n!==Cy;o++){const{nextN:a,offset:c,isZero:u,isNeg:l}=x7(n,o,i);if(n=a,!u){const d=r[c];s=s.add(l?d.negate():d)}}return C7(n),s}getPrecomputes(e,r,n){let s=_N.get(r);return s||(s=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(s=n(s)),_N.set(r,s))),s}cached(e,r,n){const s=AN(e);return this.wNAF(s,this.getPrecomputes(s,e,n),r)}unsafe(e,r,n,s){const i=AN(e);return i===1?this._unsafeLadder(e,r,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),r,s)}createCache(e,r){Ree(r,this.bits),Oee.set(e,r),_N.delete(e)}hasCache(e){return AN(e)!==1}};function p2e(t,e,r,n){let s=e,i=t.ZERO,o=t.ZERO;for(;r>Cy||n>Cy;)r&u0&&(i=i.add(s)),n&u0&&(o=o.add(s)),s=s.double(),r>>=u0,n>>=u0;return{p1:i,p2:o}}function g2e(t,e,r,n){d2e(r,t),f2e(n,e);const s=r.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=wee(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=zE(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let p=d;p>=0;p-=c){l.fill(o);for(let h=0;h<i;h++){const y=n[h],E=Number(y>>BigInt(p)&u);l[E]=l[E].add(r[h])}let g=o;for(let h=l.length-1,y=o;h>0;h--)y=y.add(l[h]),g=g.add(y);if(f=f.add(g),p!==0)for(let h=0;h<c;h++)f=f.double()}return f}function S7(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return c2e(e),e}else return $h(t,{isLE:r})}function m2e(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Cy))throw new Error(`CURVE.${a} must be positive bigint`)}const s=S7(e.p,r.Fp,n),i=S7(e.n,r.Fn,n),o=["Gx","Gy","a","b"];for(const a of o)if(!s.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),tee("HashToScalar-");const Db=BigInt(0),Ng=BigInt(1),h2=BigInt(2);function y2e(t){return KT(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function b2e(t){const e=y2e(t),{P:r,type:n,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=n==="x25519";if(!a&&n!=="x448")throw new Error("invalid type");const c=o||Y0,u=a?255:448,l=a?32:56,d=BigInt(a?9:5),f=BigInt(a?121665:39081),p=a?h2**BigInt(254):h2**BigInt(447),g=a?BigInt(8)*h2**BigInt(251)-Ng:BigInt(4)*h2**BigInt(445)-Ng,h=p+g+Ng,y=B=>Ya(B,r),E=S(d);function S(B){return gk(y(B),l)}function C(B){const A=ao("u coordinate",B,l);return a&&(A[31]&=127),y(R6(A))}function _(B){return R6(s(ao("scalar",B,l)))}function T(B,A){const m=L(C(A),_(B));if(m===Db)throw new Error("invalid private or public key received");return S(m)}function P(B){return T(B,E)}function D(B,A,m){const b=y(B*(A-m));return A=y(A-b),m=y(m+b),{x_2:A,x_3:m}}function L(B,A){K8("u",B,Db,r),K8("scalar",A,p,h);const m=A,b=B;let w=Ng,x=Db,M=B,k=Ng,j=Db;for(let v=BigInt(u-1);v>=Db;v--){const R=m>>v&Ng;j^=R,{x_2:w,x_3:M}=D(j,w,M),{x_2:x,x_3:k}=D(j,x,k),j=R;const $=w+x,O=y($*$),H=w-x,W=y(H*H),G=O-W,K=M+k,Q=M-k,re=y(Q*$),de=y(K*H),le=re+de,se=re-de;M=y(le*le),k=y(b*y(se*se)),w=y(O*W),x=y(G*(O+y(f*G)))}({x_2:w,x_3:M}=D(j,w,M)),{x_2:x,x_3:k}=D(j,x,k);const N=i(x);return y(w*N)}const I={secretKey:l,publicKey:l,seed:l},U=(B=c(l))=>($u(B,I.seed),B);function F(B){const A=U(B);return{secretKey:A,publicKey:P(A)}}return{keygen:F,getSharedSecret:(B,A)=>T(B,A),getPublicKey:B=>P(B),scalarMult:T,scalarMultBase:P,utils:{randomSecretKey:U,randomPrivateKey:U},GuBytes:E.slice(),lengths:I}}const w2e=BigInt(1),I7=BigInt(2),v2e=BigInt(3),E2e=BigInt(5);BigInt(8);const kee=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),_2e={p:kee,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function A2e(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=kee,o=t*t%i*t%i,a=mu(o,I7,i)*o%i,c=mu(a,w2e,i)*t%i,u=mu(c,E2e,i)*c%i,l=mu(u,e,i)*u%i,d=mu(l,r,i)*l%i,f=mu(d,n,i)*d%i,p=mu(f,s,i)*f%i,g=mu(p,s,i)*f%i,h=mu(g,e,i)*u%i;return{pow_p_5_8:mu(h,I7,i)*t%i,b2:o}}function x2e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const C2e=$h(_2e.p,{isLE:!0}),Z8=(()=>{const t=C2e.ORDER;return b2e({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:r,b2:n}=A2e(e);return Ya(mu(r,v2e,t)*n,t)},adjustScalarBytes:x2e})})(),T7=(t,e)=>(t+(t>=0?e:-e)/Bee)/e;function S2e(t,e,r){const[[n,s],[i,o]]=e,a=T7(o*t,r),c=T7(-s*t,r);let u=t-a*n-c*i,l=-a*s-c*o;const d=u<Vd,f=l<Vd;d&&(u=-u),f&&(l=-l);const p=zE(Math.ceil(wee(r)/2))+ey;if(u<Vd||u>=p||l<Vd||l>=p)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}function Y8(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function xN(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return P6(r.lowS,"lowS"),P6(r.prehash,"prehash"),r.format!==void 0&&Y8(r.format),r}let I2e=class extends Error{constructor(e=""){super(e)}};const Ld={Err:I2e,_tlv:{encode:(t,e)=>{const{Err:r}=Ld;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=f2(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?f2(s.length/2|128):"";return f2(t)+i+s+e},decode(t,e){const{Err:r}=Ld;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=Ld;if(t<Vd)throw new e("integer: negative integers are not allowed");let r=f2(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Ld;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return GT(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Ld,s=ao("signature",t),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=Ld,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}},Vd=BigInt(0),ey=BigInt(1),Bee=BigInt(2),p2=BigInt(3),T2e=BigInt(4);function jm(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let s=ao("private key",e);try{n=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function N2e(t,e={}){const r=m2e("weierstrass",t,e),{Fp:n,Fn:s}=r;let i=r.CURVE;const{h:o,n:a}=i;KT(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=Mee(n,s);function l(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(B,A,m){const{x:b,y:w}=A.toAffine(),x=n.toBytes(b);if(P6(m,"isCompressed"),m){l();const M=!n.isOdd(w);return uh(Uee(M),x)}else return uh(Uint8Array.of(4),x,n.toBytes(w))}function f(B){a0(B,void 0,"Point");const{publicKey:A,publicKeyUncompressed:m}=u,b=B.length,w=B[0],x=B.subarray(1);if(b===A&&(w===2||w===3)){const M=n.fromBytes(x);if(!n.isValid(M))throw new Error("bad point: is not on curve, wrong x");const k=h(M);let j;try{j=n.sqrt(k)}catch(v){const R=v instanceof Error?": "+v.message:"";throw new Error("bad point: is not on curve, sqrt error"+R)}l();const N=n.isOdd(j);return(w&1)===1!==N&&(j=n.neg(j)),{x:M,y:j}}else if(b===m&&w===4){const M=n.BYTES,k=n.fromBytes(x.subarray(0,M)),j=n.fromBytes(x.subarray(M,M*2));if(!y(k,j))throw new Error("bad point: is not on curve");return{x:k,y:j}}else throw new Error(`bad point: got length ${b}, expected compressed=${A} or uncompressed=${m}`)}const p=e.toBytes||d,g=e.fromBytes||f;function h(B){const A=n.sqr(B),m=n.mul(A,B);return n.add(n.add(m,n.mul(B,i.a)),i.b)}function y(B,A){const m=n.sqr(A),b=h(B);return n.eql(m,b)}if(!y(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const E=n.mul(n.pow(i.a,p2),T2e),S=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(E,S)))throw new Error("bad curve params: a or b");function C(B,A,m=!1){if(!n.isValid(A)||m&&n.is0(A))throw new Error(`bad point coordinate ${B}`);return A}function _(B){if(!(B instanceof I))throw new Error("ProjectivePoint expected")}function T(B){if(!c||!c.basises)throw new Error("no endo");return S2e(B,c.basises,s.ORDER)}const P=E7((B,A)=>{const{X:m,Y:b,Z:w}=B;if(n.eql(w,n.ONE))return{x:m,y:b};const x=B.is0();A==null&&(A=x?n.ONE:n.inv(w));const M=n.mul(m,A),k=n.mul(b,A),j=n.mul(w,A);if(x)return{x:n.ZERO,y:n.ZERO};if(!n.eql(j,n.ONE))throw new Error("invZ was invalid");return{x:M,y:k}}),D=E7(B=>{if(B.is0()){if(e.allowInfinityPoint&&!n.is0(B.Y))return;throw new Error("bad point: ZERO")}const{x:A,y:m}=B.toAffine();if(!n.isValid(A)||!n.isValid(m))throw new Error("bad point: x or y not field elements");if(!y(A,m))throw new Error("bad point: equation left != right");if(!B.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function L(B,A,m,b,w){return m=new I(n.mul(m.X,B),m.Y,m.Z),A=O6(b,A),m=O6(w,m),A.add(m)}class I{constructor(A,m,b){this.X=C("x",A),this.Y=C("y",m,!0),this.Z=C("z",b),Object.freeze(this)}static CURVE(){return i}static fromAffine(A){const{x:m,y:b}=A||{};if(!A||!n.isValid(m)||!n.isValid(b))throw new Error("invalid affine point");if(A instanceof I)throw new Error("projective point not allowed");return n.is0(m)&&n.is0(b)?I.ZERO:new I(m,b,n.ONE)}static fromBytes(A){const m=I.fromAffine(g(a0(A,void 0,"point")));return m.assertValidity(),m}static fromHex(A){return I.fromBytes(ao("pointHex",A))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(A=8,m=!0){return F.createCache(this,A),m||this.multiply(p2),this}assertValidity(){D(this)}hasEvenY(){const{y:A}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(A)}equals(A){_(A);const{X:m,Y:b,Z:w}=this,{X:x,Y:M,Z:k}=A,j=n.eql(n.mul(m,k),n.mul(x,w)),N=n.eql(n.mul(b,k),n.mul(M,w));return j&&N}negate(){return new I(this.X,n.neg(this.Y),this.Z)}double(){const{a:A,b:m}=i,b=n.mul(m,p2),{X:w,Y:x,Z:M}=this;let k=n.ZERO,j=n.ZERO,N=n.ZERO,v=n.mul(w,w),R=n.mul(x,x),$=n.mul(M,M),O=n.mul(w,x);return O=n.add(O,O),N=n.mul(w,M),N=n.add(N,N),k=n.mul(A,N),j=n.mul(b,$),j=n.add(k,j),k=n.sub(R,j),j=n.add(R,j),j=n.mul(k,j),k=n.mul(O,k),N=n.mul(b,N),$=n.mul(A,$),O=n.sub(v,$),O=n.mul(A,O),O=n.add(O,N),N=n.add(v,v),v=n.add(N,v),v=n.add(v,$),v=n.mul(v,O),j=n.add(j,v),$=n.mul(x,M),$=n.add($,$),v=n.mul($,O),k=n.sub(k,v),N=n.mul($,R),N=n.add(N,N),N=n.add(N,N),new I(k,j,N)}add(A){_(A);const{X:m,Y:b,Z:w}=this,{X:x,Y:M,Z:k}=A;let j=n.ZERO,N=n.ZERO,v=n.ZERO;const R=i.a,$=n.mul(i.b,p2);let O=n.mul(m,x),H=n.mul(b,M),W=n.mul(w,k),G=n.add(m,b),K=n.add(x,M);G=n.mul(G,K),K=n.add(O,H),G=n.sub(G,K),K=n.add(m,w);let Q=n.add(x,k);return K=n.mul(K,Q),Q=n.add(O,W),K=n.sub(K,Q),Q=n.add(b,w),j=n.add(M,k),Q=n.mul(Q,j),j=n.add(H,W),Q=n.sub(Q,j),v=n.mul(R,K),j=n.mul($,W),v=n.add(j,v),j=n.sub(H,v),v=n.add(H,v),N=n.mul(j,v),H=n.add(O,O),H=n.add(H,O),W=n.mul(R,W),K=n.mul($,K),H=n.add(H,W),W=n.sub(O,W),W=n.mul(R,W),K=n.add(K,W),O=n.mul(H,K),N=n.add(N,O),O=n.mul(Q,K),j=n.mul(G,j),j=n.sub(j,O),O=n.mul(G,H),v=n.mul(Q,v),v=n.add(v,O),new I(j,N,v)}subtract(A){return this.add(A.negate())}is0(){return this.equals(I.ZERO)}multiply(A){const{endo:m}=e;if(!s.isValidNot0(A))throw new Error("invalid scalar: out of range");let b,w;const x=M=>F.cached(this,M,k=>vN(I,k));if(m){const{k1neg:M,k1:k,k2neg:j,k2:N}=T(A),{p:v,f:R}=x(k),{p:$,f:O}=x(N);w=R.add(O),b=L(m.beta,v,$,M,j)}else{const{p:M,f:k}=x(A);b=M,w=k}return vN(I,[b,w])[0]}multiplyUnsafe(A){const{endo:m}=e,b=this;if(!s.isValid(A))throw new Error("invalid scalar: out of range");if(A===Vd||b.is0())return I.ZERO;if(A===ey)return b;if(F.hasCache(this))return this.multiply(A);if(m){const{k1neg:w,k1:x,k2neg:M,k2:k}=T(A),{p1:j,p2:N}=p2e(I,b,x,k);return L(m.beta,j,N,w,M)}else return F.unsafe(b,A)}multiplyAndAddUnsafe(A,m,b){const w=this.multiplyUnsafe(m).add(A.multiplyUnsafe(b));return w.is0()?void 0:w}toAffine(A){return P(this,A)}isTorsionFree(){const{isTorsionFree:A}=e;return o===ey?!0:A?A(I,this):F.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:A}=e;return o===ey?this:A?A(I,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(A=!0){return P6(A,"isCompressed"),this.assertValidity(),p(I,this,A)}toHex(A=!0){return Qm(this.toBytes(A))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(A=!0){return this.toBytes(A)}_setWindowSize(A){this.precompute(A)}static normalizeZ(A){return vN(I,A)}static msm(A,m){return g2e(I,s,A,m)}static fromPrivateKey(A){return I.BASE.multiply(jm(s,A))}}I.BASE=new I(i.Gx,i.Gy,n.ONE),I.ZERO=new I(n.ZERO,n.ONE,n.ZERO),I.Fp=n,I.Fn=s;const U=s.BITS,F=new h2e(I,e.endo?Math.ceil(U/2):U);return I.BASE.precompute(8),I}function Uee(t){return Uint8Array.of(t?2:3)}function Mee(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function P2e(t,e={}){const{Fn:r}=t,n=e.randomBytes||Y0,s=Object.assign(Mee(t.Fp,r),{seed:Pee(r.ORDER)});function i(f){try{return!!jm(r,f)}catch{return!1}}function o(f,p){const{publicKey:g,publicKeyUncompressed:h}=s;try{const y=f.length;return p===!0&&y!==g||p===!1&&y!==h?!1:!!t.fromBytes(f)}catch{return!1}}function a(f=n(s.seed)){return l2e(a0(f,s.seed,"seed"),r.ORDER)}function c(f,p=!0){return t.BASE.multiply(jm(r,f)).toBytes(p)}function u(f){const p=a(f);return{secretKey:p,publicKey:c(p)}}function l(f){if(typeof f=="bigint")return!1;if(f instanceof t)return!0;const{secretKey:p,publicKey:g,publicKeyUncompressed:h}=s;if(r.allowedLengths||p===g)return;const y=ao("key",f).length;return y===g||y===h}function d(f,p,g=!0){if(l(f)===!0)throw new Error("first arg must be private key");if(l(p)===!1)throw new Error("second arg must be public key");const h=jm(r,f);return t.fromHex(p).multiply(h).toBytes(g)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:u,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:f=>jm(r,f),precompute(f=8,p=t.BASE){return p.precompute(f,!1)}},lengths:s})}function R2e(t,e,r={}){$T(e),KT(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||Y0,s=r.hmac||((m,...b)=>WT(e,m,uh(...b))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:p}=P2e(t,r),g={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},h="compact";function y(m){const b=a>>ey;return m>b}function E(m,b){if(!o.isValidNot0(b))throw new Error(`invalid signature ${m}: out of range 1..Point.Fn.ORDER`);return b}function S(m,b){Y8(b);const w=p.signature,x=b==="compact"?w:b==="recovered"?w+1:void 0;return a0(m,x,`${b} signature`)}class C{constructor(b,w,x){this.r=E("r",b),this.s=E("s",w),x!=null&&(this.recovery=x),Object.freeze(this)}static fromBytes(b,w=h){S(b,w);let x;if(w==="der"){const{r:N,s:v}=Ld.toSig(a0(b));return new C(N,v)}w==="recovered"&&(x=b[0],w="compact",b=b.subarray(1));const M=o.BYTES,k=b.subarray(0,M),j=b.subarray(M,M*2);return new C(o.fromBytes(k),o.fromBytes(j),x)}static fromHex(b,w){return this.fromBytes(T6(b),w)}addRecoveryBit(b){return new C(this.r,this.s,b)}recoverPublicKey(b){const w=i.ORDER,{r:x,s:M,recovery:k}=this;if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");if(a*Bee<w&&k>1)throw new Error("recovery id is ambiguous for h>1 curve");const j=k===2||k===3?x+a:x;if(!i.isValid(j))throw new Error("recovery id 2 or 3 invalid");const N=i.toBytes(j),v=t.fromBytes(uh(Uee((k&1)===0),N)),R=o.inv(j),$=T(ao("msgHash",b)),O=o.create(-$*R),H=o.create(M*R),W=t.BASE.multiplyUnsafe(O).add(v.multiplyUnsafe(H));if(W.is0())throw new Error("point at infinify");return W.assertValidity(),W}hasHighS(){return y(this.s)}toBytes(b=h){if(Y8(b),b==="der")return T6(Ld.hexFromSig(this));const w=o.toBytes(this.r),x=o.toBytes(this.s);if(b==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return uh(Uint8Array.of(this.recovery),w,x)}return uh(w,x)}toHex(b){return Qm(this.toBytes(b))}assertValidity(){}static fromCompact(b){return C.fromBytes(ao("sig",b),"compact")}static fromDER(b){return C.fromBytes(ao("sig",b),"der")}normalizeS(){return this.hasHighS()?new C(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Qm(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Qm(this.toBytes("compact"))}}const _=r.bits2int||function(m){if(m.length>8192)throw new Error("input is too large");const b=GT(m),w=m.length*8-c;return w>0?b>>BigInt(w):b},T=r.bits2int_modN||function(m){return o.create(_(m))},P=zE(c);function D(m){return K8("num < 2^"+c,m,Vd,P),o.toBytes(m)}function L(m,b){return a0(m,void 0,"message"),b?a0(e(m),void 0,"prehashed message"):m}function I(m,b,w){if(["recovered","canonical"].some(H=>H in w))throw new Error("sign() legacy options not supported");const{lowS:x,prehash:M,extraEntropy:k}=xN(w,g);m=L(m,M);const j=T(m),N=jm(o,b),v=[D(N),D(j)];if(k!=null&&k!==!1){const H=k===!0?n(p.secretKey):k;v.push(ao("extraEntropy",H))}const R=uh(...v),$=j;function O(H){const W=_(H);if(!o.isValidNot0(W))return;const G=o.inv(W),K=t.BASE.multiply(W).toAffine(),Q=o.create(K.x);if(Q===Vd)return;const re=o.create(G*o.create($+Q*N));if(re===Vd)return;let de=(K.x===Q?0:2)|Number(K.y&ey),le=re;return x&&y(re)&&(le=o.neg(re),de^=1),new C(Q,le,de)}return{seed:R,k2sig:O}}function U(m,b,w={}){m=ao("message",m);const{seed:x,k2sig:M}=I(m,b,w);return t2e(e.outputLen,o.BYTES,s)(x,M)}function F(m){let b;const w=typeof m=="string"||FT(m),x=!w&&m!==null&&typeof m=="object"&&typeof m.r=="bigint"&&typeof m.s=="bigint";if(!w&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(x)b=new C(m.r,m.s);else if(w){try{b=C.fromBytes(ao("sig",m),"der")}catch(M){if(!(M instanceof Ld.Err))throw M}if(!b)try{b=C.fromBytes(ao("sig",m),"compact")}catch{return!1}}return b||!1}function B(m,b,w,x={}){const{lowS:M,prehash:k,format:j}=xN(x,g);if(w=ao("publicKey",w),b=L(ao("message",b),k),"strict"in x)throw new Error("options.strict was renamed to lowS");const N=j===void 0?F(m):C.fromBytes(ao("sig",m),j);if(N===!1)return!1;try{const v=t.fromBytes(w);if(M&&N.hasHighS())return!1;const{r:R,s:$}=N,O=T(b),H=o.inv($),W=o.create(O*H),G=o.create(R*H),K=t.BASE.multiplyUnsafe(W).add(v.multiplyUnsafe(G));return K.is0()?!1:o.create(K.x)===R}catch{return!1}}function A(m,b,w={}){const{prehash:x}=xN(w,g);return b=L(b,x),C.fromBytes(m,"recovered").recoverPublicKey(b).toBytes()}return Object.freeze({keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:p,Point:t,sign:U,verify:B,recoverPublicKey:A,Signature:C,hash:e})}function O2e(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=$h(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),i={Fp:r,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function k2e(t){const{CURVE:e,curveOpts:r}=O2e(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function B2e(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,Tee(r.Fn.ORDER,r.Fn.BITS))})}function U2e(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:s}=k2e(t),i=N2e(e,r),o=R2e(i,n,s);return B2e(t,o)}function J8(t,e){const r=n=>U2e({...t,hash:n});return{...r(e),create:r}}const Dee={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},jee={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Lee={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},M2e=$h(Dee.p),D2e=$h(jee.p),j2e=$h(Lee.p),L2e=J8({...Dee,Fp:M2e,lowS:!1},HT);J8({...jee,Fp:D2e,lowS:!1},zEe),J8({...Lee,Fp:j2e,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},HEe);const F2e=L2e,Fee="base10",Mo="base16",ha="base64pad",lh="base64url",WE="utf8",$ee=0,Yd=1,VE=2,$2e=0,N7=1,R1=12,yk=32;function q2e(){const t=Z8.utils.randomPrivateKey(),e=Z8.getPublicKey(t);return{privateKey:_n(t,Mo),publicKey:_n(e,Mo)}}function X8(){const t=Y0(yk);return _n(t,Mo)}function H2e(t,e){const r=Z8.getSharedSecret(Yn(t,Mo),Yn(e,Mo)),n=Q_e(VT,r,void 0,void 0,yk);return _n(n,Mo)}function wI(t){const e=VT(Yn(t,Mo));return _n(e,Mo)}function jc(t){const e=VT(Yn(t,WE));return _n(e,Mo)}function qee(t){return Yn(`${t}`,Fee)}function O0(t){return Number(_n(t,Fee))}function Hee(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function zee(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return e+"=".repeat(r)}function z2e(t){const e=qee(typeof t.type<"u"?t.type:$ee);if(O0(e)===Yd&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Yn(t.senderPublicKey,Mo):void 0,n=typeof t.iv<"u"?Yn(t.iv,Mo):Y0(R1),s=Yn(t.symKey,Mo),i=mee(s,n).encrypt(Yn(t.message,WE)),o=Wee({type:e,sealed:i,iv:n,senderPublicKey:r});return t.encoding===lh?Hee(o):o}function W2e(t){const e=Yn(t.symKey,Mo),{sealed:r,iv:n}=Vv({encoded:t.encoded,encoding:t.encoding}),s=mee(e,n).decrypt(r);if(s===null)throw new Error("Failed to decrypt");return _n(s,WE)}function V2e(t,e){const r=qee(VE),n=Y0(R1),s=Yn(t,WE),i=Wee({type:r,sealed:s,iv:n});return e===lh?Hee(i):i}function G2e(t,e){const{sealed:r}=Vv({encoded:t,encoding:e});return _n(r,WE)}function Wee(t){if(O0(t.type)===VE)return _n(Tl([t.type,t.sealed]),ha);if(O0(t.type)===Yd){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return _n(Tl([t.type,t.senderPublicKey,t.iv,t.sealed]),ha)}return _n(Tl([t.type,t.iv,t.sealed]),ha)}function Vv(t){const e=(t.encoding||ha)===lh?zee(t.encoded):t.encoded,r=Yn(e,ha),n=r.slice($2e,N7),s=N7;if(O0(n)===Yd){const c=s+yk,u=c+R1,l=r.slice(s,c),d=r.slice(c,u),f=r.slice(u);return{type:n,sealed:f,iv:d,senderPublicKey:l}}if(O0(n)===VE){const c=r.slice(s),u=Y0(R1);return{type:n,sealed:c,iv:u}}const i=s+R1,o=r.slice(s,i),a=r.slice(i);return{type:n,sealed:a,iv:o}}function K2e(t,e){const r=Vv({encoded:t,encoding:e?.encoding});return Vee({type:O0(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?_n(r.senderPublicKey,Mo):void 0,receiverPublicKey:e?.receiverPublicKey})}function Vee(t){const e=t?.type||$ee;if(e===Yd){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function P7(t){return t.type===Yd&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function R7(t){return t.type===VE}function Z2e(t){const e=Buffer.from(t.x,"base64"),r=Buffer.from(t.y,"base64");return Tl([new Uint8Array([4]),e,r])}function Y2e(t,e){const[r,n,s]=t.split("."),i=Buffer.from(zee(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${r}.${n}`,u=VT(c),l=Z2e(e);if(!F2e.verify(Tl([o,a]),u,l))throw new Error("Invalid signature");return wy(t).payload}const J2e="irn";function k6(t){return t?.relay||{protocol:J2e}}function Lm(t){const e=$Q[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var X2e=Object.defineProperty,Q2e=Object.defineProperties,eAe=Object.getOwnPropertyDescriptors,O7=Object.getOwnPropertySymbols,tAe=Object.prototype.hasOwnProperty,rAe=Object.prototype.propertyIsEnumerable,k7=(t,e,r)=>e in t?X2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,CN=(t,e)=>{for(var r in e||(e={}))tAe.call(e,r)&&k7(t,r,e[r]);if(O7)for(var r of O7(e))rAe.call(e,r)&&k7(t,r,e[r]);return t},nAe=(t,e)=>Q2e(t,eAe(e));function sAe(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(n)){const i=s.replace(n,""),o=t[s];r[i]=o}}),r}function B7(t){if(!t.includes("wc:")){const u=ZQ(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),s=t.substring(e+1,r).split("@"),i=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(i),a=Object.fromEntries(o.entries()),c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:iAe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:sAe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function iAe(t){return t.startsWith("//")?t.substring(2):t}function oAe(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(s=>{const i=s,o=r+e+i;t[i]&&(n[o]=t[i])}),n}function U7(t){const e=new URLSearchParams,r=CN(CN(nAe(CN({},oAe(t.relay)),{symKey:t.symKey}),t.expiryTimestamp&&{expiryTimestamp:t.expiryTimestamp.toString()}),t.methods&&{methods:t.methods.join(",")});return Object.entries(r).sort(([n],[s])=>n.localeCompare(s)).forEach(([n,s])=>{s!==void 0&&e.append(n,String(s))}),`${t.protocol}:${t.topic}@${t.version}?${e}`}function g2(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}var aAe=Object.defineProperty,cAe=Object.defineProperties,uAe=Object.getOwnPropertyDescriptors,M7=Object.getOwnPropertySymbols,lAe=Object.prototype.hasOwnProperty,dAe=Object.prototype.propertyIsEnumerable,D7=(t,e,r)=>e in t?aAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fAe=(t,e)=>{for(var r in e||(e={}))lAe.call(e,r)&&D7(t,r,e[r]);if(M7)for(var r of M7(e))dAe.call(e,r)&&D7(t,r,e[r]);return t},hAe=(t,e)=>cAe(t,uAe(e));function Zy(t){const e=[];return t.forEach(r=>{const[n,s]=r.split(":");e.push(`${n}:${s}`)}),e}function Gee(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Zy(r.accounts))}),[...new Set(e)]}function pAe(t){const e=[];return Object.values(t).forEach(r=>{e.push(...r.methods)}),[...new Set(e)]}function gAe(t){const e=[];return Object.values(t).forEach(r=>{e.push(...r.events)}),[...new Set(e)]}function mAe(t,e){const r=[];return Object.values(t).forEach(n=>{Zy(n.accounts).includes(e)&&r.push(...n.methods)}),r}function yAe(t,e){const r=[];return Object.values(t).forEach(n=>{Zy(n.accounts).includes(e)&&r.push(...n.events)}),r}function ZT(t){return t.includes(":")}function Fm(t){return ZT(t)?t.split(":")[0]:t}function j7(t){var e,r,n;const s={};if(!Pl(t))return s;for(const[i,o]of Object.entries(t)){const a=ZT(i)?[i]:o.chains,c=o.methods||[],u=o.events||[],l=Fm(i);s[l]=hAe(fAe({},s[l]),{chains:Nl(a,(e=s[l])==null?void 0:e.chains),methods:Nl(c,(r=s[l])==null?void 0:r.methods),events:Nl(u,(n=s[l])==null?void 0:n.events)})}return s}function bAe(t){const e={};return t?.forEach(r=>{var n;const[s,i]=r.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(r),(n=e[s].chains)==null||n.push(`${s}:${i}`)}),e}function L7(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=bAe(e);for(const[n,s]of Object.entries(r))s.methods?s.methods=Nl(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return r}function wAe(t,e){var r,n,s,i,o,a;const c=j7(t),u=j7(e),l={},d=Object.keys(c).concat(Object.keys(u));for(const f of d)l[f]={chains:Nl((r=c[f])==null?void 0:r.chains,(n=u[f])==null?void 0:n.chains),methods:Nl((s=c[f])==null?void 0:s.methods,(i=u[f])==null?void 0:i.methods),events:Nl((o=c[f])==null?void 0:o.events,(a=u[f])==null?void 0:a.events)};return l}const vAe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},EAe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Fe(t,e){const{message:r,code:n}=EAe[t];return{message:e?`${r} ${e}`:r,code:n}}function Gn(t,e){const{message:r,code:n}=vAe[t];return{message:e?`${r} ${e}`:r,code:n}}function Jd(t,e){return!!Array.isArray(t)}function Pl(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function si(t){return typeof t>"u"}function Bs(t,e){return e&&si(t)?!0:typeof t=="string"&&!!t.trim().length}function bk(t,e){return typeof t=="number"&&!isNaN(t)}function _Ae(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),s=Object.keys(r);let i=!0;return o0(s,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],l=Zy(a),d=r[o];(!o0(zQ(o,d),l)||!o0(d.methods,c)||!o0(d.events,u))&&(i=!1)}),i):!1}function B6(t){return Bs(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function AAe(t){if(Bs(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&B6(r)}}return!1}function xAe(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(Bs(t,!1)){if(e(t))return!0;const r=ZQ(t);return e(r)}}catch{}return!1}function CAe(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function SAe(t){return t?.topic}function IAe(t,e){let r=null;return Bs(t?.publicKey,!1)||(r=Fe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function F7(t){let e=!0;return Jd(t)?t.length&&(e=t.every(r=>Bs(r,!1))):e=!1,e}function TAe(t,e,r){let n=null;return Jd(e)&&e.length?e.forEach(s=>{n||B6(s)||(n=Gn("UNSUPPORTED_CHAINS",`${r}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):B6(t)||(n=Gn("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function NAe(t,e,r){let n=null;return Object.entries(t).forEach(([s,i])=>{if(n)return;const o=TAe(s,zQ(s,i),`${e} ${r}`);o&&(n=o)}),n}function PAe(t,e){let r=null;return Jd(t)?t.forEach(n=>{r||AAe(n)||(r=Gn("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Gn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function RAe(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=PAe(n?.accounts,`${e} namespace`);s&&(r=s)}),r}function OAe(t,e){let r=null;return F7(t?.methods)?F7(t?.events)||(r=Gn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Gn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Kee(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=OAe(n,`${e}, namespace`);s&&(r=s)}),r}function kAe(t,e,r){let n=null;if(t&&Pl(t)){const s=Kee(t,e);s&&(n=s);const i=NAe(t,e,r);i&&(n=i)}else n=Fe("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function SN(t,e){let r=null;if(t&&Pl(t)){const n=Kee(t,e);n&&(r=n);const s=RAe(t,e);s&&(r=s)}else r=Fe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function Zee(t){return Bs(t.protocol,!0)}function BAe(t,e){let r=!1;return t?t&&Jd(t)&&t.length&&t.forEach(n=>{r=Zee(n)}):r=!0,r}function UAe(t){return typeof t=="number"}function sa(t){return typeof t<"u"&&typeof t!==null}function MAe(t){return!(!t||typeof t!="object"||!t.code||!bk(t.code)||!t.message||!Bs(t.message,!1))}function DAe(t){return!(si(t)||!Bs(t.method,!1))}function jAe(t){return!(si(t)||si(t.result)&&si(t.error)||!bk(t.id)||!Bs(t.jsonrpc,!1))}function LAe(t){return!(si(t)||!Bs(t.name,!1))}function $7(t,e){return!(!B6(e)||!Gee(t).includes(e))}function FAe(t,e,r){return Bs(r,!1)?mAe(t,e).includes(r):!1}function $Ae(t,e,r){return Bs(r,!1)?yAe(t,e).includes(r):!1}function q7(t,e,r){let n=null;const s=qAe(t),i=HAe(e),o=Object.keys(s),a=Object.keys(i),c=H7(Object.keys(t)),u=H7(Object.keys(e)),l=c.filter(d=>!u.includes(d));return l.length&&(n=Fe("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(e).toString()}`)),o0(o,a)||(n=Fe("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||n)return;const f=Zy(e[d].accounts);f.includes(d)||(n=Fe("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${f.toString()}`))}),o.forEach(d=>{n||(o0(s[d].methods,i[d].methods)?o0(s[d].events,i[d].events)||(n=Fe("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${d}`)):n=Fe("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${d}`))}),n}function qAe(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(s=>{e[s]={methods:t[r].methods,events:t[r].events}})}),e}function H7(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function HAe(t){const e={};return Object.keys(t).forEach(r=>{r.includes(":")?e[r]=t[r]:Zy(t[r].accounts)?.forEach(s=>{e[s]={accounts:t[r].accounts.filter(i=>i.includes(`${s}:`)),methods:t[r].methods,events:t[r].events}})}),e}function zAe(t,e){return bk(t)&&t<=e.max&&t>=e.min}function z7(){const t=qE();return new Promise(e=>{switch(t){case ic.browser:e(WAe());break;case ic.reactNative:e(VAe());break;case ic.node:e(GAe());break;default:e(!0)}})}function WAe(){return Ky()&&navigator?.onLine}async function VAe(){return Fh()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function GAe(){return!0}function KAe(t){switch(qE()){case ic.browser:ZAe(t);break;case ic.reactNative:YAe(t);break}}function ZAe(t){!Fh()&&Ky()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function YAe(t){Fh()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function JAe(){var t;return Ky()&&di.getDocument()?((t=di.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const IN={};class jb{static get(e){return IN[e]}static set(e,r){IN[e]=r}static delete(e){delete IN[e]}}function XAe(t){const e=Zn.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function QAe({publicKey:t,signature:e,payload:r}){var n;const s=Q8(r.method),i=128|parseInt(((n=r.version)==null?void 0:n.toString())||"4"),o=rxe(r.address),a=r.era==="00"?new Uint8Array([0]):Q8(r.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(r.nonce,16),u=new Uint8Array([c&255,c>>8&255]),l=BigInt(`0x${txe(r.tip)}`),d=sxe(l),f=new Uint8Array([0,...t,o,...e,...a,...u,...d,...s]),p=nxe(f.length+1);return new Uint8Array([...p,i,...f])}function exe(t){const e=Q8(t),r=HQ.blake2b(e,void 0,32);return"0x"+Buffer.from(r).toString("hex")}function Q8(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function txe(t){return t.startsWith("0x")?t.slice(2):t}function rxe(t){const e=Zn.decode(t)[0];return e===42?0:e===60?2:1}function nxe(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function sxe(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function ixe(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),r=XAe(t.transaction.address),n=QAe({publicKey:r,signature:e,payload:t.transaction}),s=Buffer.from(n).toString("hex");return exe(s)}function wk({logger:t,name:e}){const r=typeof t=="string"?PT({opts:{level:t,name:e}}).logger:t;return r.level=typeof t=="string"?t:t.level,r}const oxe="PARSE_ERROR",axe="INVALID_REQUEST",cxe="METHOD_NOT_FOUND",uxe="INVALID_PARAMS",Yee="INTERNAL_ERROR",vk="SERVER_ERROR",lxe=[-32700,-32600,-32601,-32602,-32603],O1={[oxe]:{code:-32700,message:"Parse error"},[axe]:{code:-32600,message:"Invalid Request"},[cxe]:{code:-32601,message:"Method not found"},[uxe]:{code:-32602,message:"Invalid params"},[Yee]:{code:-32603,message:"Internal error"},[vk]:{code:-32e3,message:"Server error"}},Jee=vk;function dxe(t){return lxe.includes(t)}function W7(t){return Object.keys(O1).includes(t)?O1[t]:O1[Jee]}function fxe(t){const e=Object.values(O1).find(r=>r.code===t);return e||O1[Jee]}function Xee(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var TN={},sd={},V7;function hxe(){if(V7)return sd;V7=1,Object.defineProperty(sd,"__esModule",{value:!0}),sd.isBrowserCryptoAvailable=sd.getSubtleCrypto=sd.getBrowerCrypto=void 0;function t(){return Au?.crypto||Au?.msCrypto||{}}sd.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}sd.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return sd.isBrowserCryptoAvailable=r,sd}var id={},G7;function pxe(){if(G7)return id;G7=1,Object.defineProperty(id,"__esModule",{value:!0}),id.isBrowser=id.isNode=id.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}id.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}id.isNode=e;function r(){return!t()&&!e()}return id.isBrowser=r,id}var K7;function gxe(){return K7||(K7=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=kE;e.__exportStar(hxe(),t),e.__exportStar(pxe(),t)})(TN)),TN}var mxe=gxe();function ni(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function ko(t=6){return BigInt(ni(t))}function Ms(t,e,r){return{id:r||ni(),jsonrpc:"2.0",method:t,params:e}}function Ul(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Yy(t,e,r){return{id:t,jsonrpc:"2.0",error:yxe(e)}}function yxe(t,e){return typeof t>"u"?W7(Yee):(typeof t=="string"&&(t=Object.assign(Object.assign({},W7(vk)),{message:t})),dxe(t.code)&&(t=fxe(t.code)),t)}let bxe=class{},wxe=class extends bxe{constructor(){super()}},vxe=class extends wxe{constructor(e){super()}};const Exe="^https?:",_xe="^wss?:";function Axe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Qee(t,e){const r=Axe(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Z7(t){return Qee(t,Exe)}function Y7(t){return Qee(t,_xe)}function xxe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function ete(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Jy(t){return ete(t)&&"method"in t}function J0(t){return ete(t)&&(Vs(t)||gs(t))}function Vs(t){return"result"in t}function gs(t){return"error"in t}let qo=class extends vxe{constructor(e){super(e),this.events=new Ys.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Ms(e.method,e.params||[],e.id||ko().toString()),r)}async requestStrict(e,r){return new Promise(async(n,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{gs(i)?s(i.error):n(i.result)});try{await this.connection.send(e,r)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),J0(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Cxe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Sxe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",J7=t=>t.split("?")[0],X7=10,Ixe=Cxe();let tte=class{constructor(e){if(this.url=e,this.events=new Ys.EventEmitter,this.registering=!1,!Y7(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Hc(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!Y7(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const s=mxe.isReactNative()?void 0:{rejectUnauthorized:!xxe(e)},i=new Ixe(e,[],s);Sxe()?i.onerror=o=>{const a=o;n(this.emitError(a.error))}:i.on("error",o=>{n(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),r(i)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?rf(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=Yy(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return Xee(e,J7(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>X7&&this.events.setMaxListeners(X7)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${J7(this.url)}`));return this.events.emit("register_error",r),r}};var Txe={};const rte="wc",nte=2,eO="core",Ml=`${rte}@2:${eO}:`,Nxe={logger:"error"},Pxe={database:":memory:"},Rxe="crypto",Q7="client_ed25519_seed",Oxe=he.ONE_DAY,kxe="keychain",Bxe="0.3",Uxe="messages",Mxe="0.3",Dxe=he.SIX_HOURS,jxe="publisher",ste="irn",Lxe="error",ite="wss://relay.walletconnect.org",Fxe="relayer",Os={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},$xe="_subscription",Ac={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},qxe=.1,tO="2.23.0",qn={link_mode:"link_mode",relay:"relay"},vI={inbound:"inbound",outbound:"outbound"},Hxe="0.3",zxe="WALLETCONNECT_CLIENT_ID",eD="WALLETCONNECT_LINK_MODE_APPS",Ga={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Wxe="subscription",Vxe="0.3",Gxe="pairing",Kxe="0.3",Lb={wc_pairingDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:he.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:he.ONE_DAY,prompt:!1,tag:0},res:{ttl:he.ONE_DAY,prompt:!1,tag:0}}},Vp={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},iu={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Zxe="history",Yxe="0.3",Jxe="expirer",Uc={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Xxe="0.3",Qxe="verify-api",eCe="https://verify.walletconnect.com",ote="https://verify.walletconnect.org",k1=ote,tCe=`${k1}/v3`,rCe=[eCe,ote],nCe="echo",sCe="https://echo.walletconnect.com",dl={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Nd={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ou={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},dp={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},fp={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Fb={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},iCe=.1,oCe="event-client",aCe=86400,cCe="https://pulse.walletconnect.org/batch";function uCe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var h=0,y=0,E=0,S=g.length;E!==S&&g[E]===0;)E++,h++;for(var C=(S-E)*l+1>>>0,_=new Uint8Array(C);E!==S;){for(var T=g[E],P=0,D=C-1;(T!==0||P<y)&&D!==-1;D--,P++)T+=256*_[D]>>>0,_[D]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");y=P,E++}for(var L=C-y;L!==C&&_[L]===0;)L++;for(var I=c.repeat(h);L<C;++L)I+=t.charAt(_[L]);return I}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var h=0;if(g[h]!==" "){for(var y=0,E=0;g[h]===c;)y++,h++;for(var S=(g.length-h)*u+1>>>0,C=new Uint8Array(S);g[h];){var _=r[g.charCodeAt(h)];if(_===255)return;for(var T=0,P=S-1;(_!==0||T<E)&&P!==-1;P--,T++)_+=a*C[P]>>>0,C[P]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");E=T,h++}if(g[h]!==" "){for(var D=S-E;D!==S&&C[D]===0;)D++;for(var L=new Uint8Array(y+(S-D)),I=y;D!==S;)L[I++]=C[D++];return L}}}function p(g){var h=f(g);if(h)return h;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:p}}var lCe=uCe,dCe=lCe;const ate=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fCe=t=>new TextEncoder().encode(t),hCe=t=>new TextDecoder().decode(t);let pCe=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},gCe=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return cte(this,e)}},mCe=class{constructor(e){this.decoders=e}or(e){return cte(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const cte=(t,e)=>new mCe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let yCe=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new pCe(e,r,n),this.decoder=new gCe(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const YT=({name:t,prefix:e,encode:r,decode:n})=>new yCe(t,e,r,n),GE=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=dCe(r,e);return YT({prefix:t,name:e,encode:n,decode:i=>ate(s(i))})},bCe=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},wCe=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},ji=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>YT({prefix:e,name:t,encode(s){return wCe(s,n,r)},decode(s){return bCe(s,n,r,t)}}),vCe=YT({prefix:"\0",name:"identity",encode:t=>hCe(t),decode:t=>fCe(t)});var ECe=Object.freeze({__proto__:null,identity:vCe});const _Ce=ji({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ACe=Object.freeze({__proto__:null,base2:_Ce});const xCe=ji({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var CCe=Object.freeze({__proto__:null,base8:xCe});const SCe=GE({prefix:"9",name:"base10",alphabet:"0123456789"});var ICe=Object.freeze({__proto__:null,base10:SCe});const TCe=ji({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),NCe=ji({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var PCe=Object.freeze({__proto__:null,base16:TCe,base16upper:NCe});const RCe=ji({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),OCe=ji({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),kCe=ji({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),BCe=ji({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),UCe=ji({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),MCe=ji({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),DCe=ji({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),jCe=ji({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),LCe=ji({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var FCe=Object.freeze({__proto__:null,base32:RCe,base32upper:OCe,base32pad:kCe,base32padupper:BCe,base32hex:UCe,base32hexupper:MCe,base32hexpad:DCe,base32hexpadupper:jCe,base32z:LCe});const $Ce=GE({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),qCe=GE({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var HCe=Object.freeze({__proto__:null,base36:$Ce,base36upper:qCe});const zCe=GE({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),WCe=GE({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var VCe=Object.freeze({__proto__:null,base58btc:zCe,base58flickr:WCe});const GCe=ji({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),KCe=ji({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ZCe=ji({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),YCe=ji({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var JCe=Object.freeze({__proto__:null,base64:GCe,base64pad:KCe,base64url:ZCe,base64urlpad:YCe});const ute=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),XCe=ute.reduce((t,e,r)=>(t[r]=e,t),[]),QCe=ute.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function eSe(t){return t.reduce((e,r)=>(e+=XCe[r],e),"")}function tSe(t){const e=[];for(const r of t){const n=QCe[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const rSe=YT({prefix:"ðŸš€",name:"base256emoji",encode:eSe,decode:tSe});var nSe=Object.freeze({__proto__:null,base256emoji:rSe}),sSe=lte,tD=128,iSe=-128,oSe=Math.pow(2,31);function lte(t,e,r){e=e||[],r=r||0;for(var n=r;t>=oSe;)e[r++]=t&255|tD,t/=128;for(;t&iSe;)e[r++]=t&255|tD,t>>>=7;return e[r]=t|0,lte.bytes=r-n+1,e}var aSe=rO,cSe=128,rD=127;function rO(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw rO.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&rD)<<s:(o&rD)*Math.pow(2,s),s+=7}while(o>=cSe);return rO.bytes=i-n,r}var uSe=Math.pow(2,7),lSe=Math.pow(2,14),dSe=Math.pow(2,21),fSe=Math.pow(2,28),hSe=Math.pow(2,35),pSe=Math.pow(2,42),gSe=Math.pow(2,49),mSe=Math.pow(2,56),ySe=Math.pow(2,63),bSe=function(t){return t<uSe?1:t<lSe?2:t<dSe?3:t<fSe?4:t<hSe?5:t<pSe?6:t<gSe?7:t<mSe?8:t<ySe?9:10},wSe={encode:sSe,decode:aSe,encodingLength:bSe},dte=wSe;const nD=(t,e,r=0)=>(dte.encode(t,e,r),e),sD=t=>dte.encodingLength(t),nO=(t,e)=>{const r=e.byteLength,n=sD(t),s=n+sD(r),i=new Uint8Array(s+r);return nD(t,i,0),nD(r,i,n),i.set(e,s),new vSe(t,r,e,i)};let vSe=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};const fte=({name:t,code:e,encode:r})=>new ESe(t,e,r);let ESe=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?nO(this.code,r):r.then(n=>nO(this.code,n))}else throw Error("Unknown type, must be binary type")}};const hte=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),_Se=fte({name:"sha2-256",code:18,encode:hte("SHA-256")}),ASe=fte({name:"sha2-512",code:19,encode:hte("SHA-512")});var xSe=Object.freeze({__proto__:null,sha256:_Se,sha512:ASe});const pte=0,CSe="identity",gte=ate,SSe=t=>nO(pte,gte(t)),ISe={code:pte,name:CSe,encode:gte,digest:SSe};var TSe=Object.freeze({__proto__:null,identity:ISe});new TextEncoder,new TextDecoder;const iD={...ECe,...ACe,...CCe,...ICe,...PCe,...FCe,...HCe,...VCe,...JCe,...nSe};({...xSe,...TSe});function mte(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function NSe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?mte(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function yte(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const oD=yte("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),NN=yte("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=NSe(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),PSe={utf8:oD,"utf-8":oD,hex:iD.base16,latin1:NN,ascii:NN,binary:NN,...iD};function RSe(t,e="utf8"){const r=PSe[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?mte(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var OSe=Object.defineProperty,kSe=(t,e,r)=>e in t?OSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tl=(t,e,r)=>kSe(t,typeof e!="symbol"?e+"":e,r);let BSe=class{constructor(e,r){this.core=e,this.logger=r,tl(this,"keychain",new Map),tl(this,"name",kxe),tl(this,"version",Bxe),tl(this,"initialized",!1),tl(this,"storagePrefix",Ml),tl(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),tl(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),tl(this,"set",async(n,s)=>{this.isInitialized(),this.keychain.set(n,s),await this.persist()}),tl(this,"get",n=>{this.isInitialized();const s=this.keychain.get(n);if(typeof s>"u"){const{message:i}=Fe("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(i)}return s}),tl(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=Sa(r,this.name)}get context(){return Ca(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,F8(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?$8(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var USe=Object.defineProperty,MSe=(t,e,r)=>e in t?USe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Js=(t,e,r)=>MSe(t,typeof e!="symbol"?e+"":e,r);let DSe=class{constructor(e,r,n){this.core=e,this.logger=r,Js(this,"name",Rxe),Js(this,"keychain"),Js(this,"randomSessionIdentifier",X8()),Js(this,"initialized",!1),Js(this,"clientId"),Js(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Js(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Js(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;const s=await this.getClientSeed(),i=g6(s),o=z4(i.publicKey);return this.clientId=o,o}),Js(this,"generateKeyPair",()=>{this.isInitialized();const s=q2e();return this.setPrivateKey(s.publicKey,s.privateKey)}),Js(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=g6(i),a=this.randomSessionIdentifier;return await uX(a,s,Oxe,o)}),Js(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=H2e(a,i);return this.setSymKey(c,o)}),Js(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||wI(s);return await this.keychain.set(o,s),o}),Js(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Js(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Js(this,"encode",async(s,i,o)=>{this.isInitialized();const a=Vee(o),c=Hc(i);if(R7(a))return V2e(c,o?.encoding);if(P7(a)){const f=a.senderPublicKey,p=a.receiverPublicKey;s=await this.generateSharedKey(f,p)}const u=this.getSymKey(s),{type:l,senderPublicKey:d}=a;return z2e({type:l,symKey:u,message:c,senderPublicKey:d,encoding:o?.encoding})}),Js(this,"decode",async(s,i,o)=>{this.isInitialized();const a=K2e(i,o);if(R7(a)){const c=G2e(i,o?.encoding);return rf(c)}if(P7(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;s=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(s),u=W2e({symKey:c,encoded:i,encoding:o?.encoding});return rf(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Js(this,"getPayloadType",(s,i=ha)=>{const o=Vv({encoded:s,encoding:i});return O0(o.type)}),Js(this,"getPayloadSenderPublicKey",(s,i=ha)=>{const o=Vv({encoded:s,encoding:i});return o.senderPublicKey?_n(o.senderPublicKey,Mo):void 0}),this.core=e,this.logger=Sa(r,this.name),this.keychain=n||new BSe(this.core,this.logger)}get context(){return Ca(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Q7)}catch{e=X8(),await this.keychain.set(Q7,e)}return RSe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var jSe=Object.defineProperty,LSe=Object.defineProperties,FSe=Object.getOwnPropertyDescriptors,aD=Object.getOwnPropertySymbols,$Se=Object.prototype.hasOwnProperty,qSe=Object.prototype.propertyIsEnumerable,sO=(t,e,r)=>e in t?jSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,HSe=(t,e)=>{for(var r in e||(e={}))$Se.call(e,r)&&sO(t,r,e[r]);if(aD)for(var r of aD(e))qSe.call(e,r)&&sO(t,r,e[r]);return t},zSe=(t,e)=>LSe(t,FSe(e)),Ma=(t,e,r)=>sO(t,typeof e!="symbol"?e+"":e,r);let WSe=class extends Upe{constructor(e,r){super(e,r),this.logger=e,this.core=r,Ma(this,"messages",new Map),Ma(this,"messagesWithoutClientAck",new Map),Ma(this,"name",Uxe),Ma(this,"version",Mxe),Ma(this,"initialized",!1),Ma(this,"storagePrefix",Ml),Ma(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),Ma(this,"set",async(n,s,i)=>{this.isInitialized();const o=jc(s);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(n,a),i===vI.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,zSe(HSe({},c),{[o]:s}))}return await this.persist(),o}),Ma(this,"get",n=>{this.isInitialized();let s=this.messages.get(n);return typeof s>"u"&&(s={}),s}),Ma(this,"getWithoutAck",n=>{this.isInitialized();const s={};for(const i of n){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Ma(this,"has",(n,s)=>{this.isInitialized();const i=this.get(n),o=jc(s);return typeof i[o]<"u"}),Ma(this,"ack",async(n,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(n);if(typeof i>"u")return;const o=jc(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,i),await this.persist()}),Ma(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=Sa(e,this.name),this.core=r}get context(){return Ca(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,F8(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,F8(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?$8(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?$8(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var VSe=Object.defineProperty,GSe=Object.defineProperties,KSe=Object.getOwnPropertyDescriptors,cD=Object.getOwnPropertySymbols,ZSe=Object.prototype.hasOwnProperty,YSe=Object.prototype.propertyIsEnumerable,iO=(t,e,r)=>e in t?VSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pg=(t,e)=>{for(var r in e||(e={}))ZSe.call(e,r)&&iO(t,r,e[r]);if(cD)for(var r of cD(e))YSe.call(e,r)&&iO(t,r,e[r]);return t},uD=(t,e)=>GSe(t,KSe(e)),xc=(t,e,r)=>iO(t,typeof e!="symbol"?e+"":e,r);let JSe=class extends Mpe{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,xc(this,"events",new Ys.EventEmitter),xc(this,"name",jxe),xc(this,"queue",new Map),xc(this,"publishTimeout",he.toMiliseconds(he.ONE_MINUTE)),xc(this,"initialPublishTimeout",he.toMiliseconds(he.ONE_SECOND*15)),xc(this,"needsTransportRestart",!1),xc(this,"publish",async(n,s,i)=>{var o,a,c,u,l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:i}});const d=i?.ttl||Dxe,f=i?.prompt||!1,p=i?.tag||0,g=i?.id||ko().toString(),h=Lm(k6().protocol),y={id:g,method:i?.publishMethod||h.publish,params:Pg({topic:n,message:s,ttl:d,prompt:f,tag:p,attestation:i?.attestation},i?.tvf)},E=`Failed to publish payload, please try again. id:${g} tag:${p}`;try{si((o=y.params)==null?void 0:o.prompt)&&((a=y.params)==null||delete a.prompt),si((c=y.params)==null?void 0:c.tag)&&((u=y.params)==null||delete u.tag);const S=new Promise(async C=>{const _=({id:P})=>{var D;((D=y.id)==null?void 0:D.toString())===P.toString()&&(this.removeRequestFromQueue(P),this.relayer.events.removeListener(Os.publish,_),C())};this.relayer.events.on(Os.publish,_);const T=El(new Promise((P,D)=>{this.rpcPublish(y,i).then(P).catch(L=>{this.logger.warn(L,L?.message),D(L)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${g} tag:${p}`);try{await T,this.events.removeListener(Os.publish,_)}catch(P){this.queue.set(g,{request:y,opts:i,attempt:1}),this.logger.warn(P,P?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:g,topic:n,message:s,opts:i}}),await El(S,this.publishTimeout,E)}catch(S){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(S),(l=i?.internal)!=null&&l.throwOnFailedPublish)throw S}finally{this.queue.delete(g)}}),xc(this,"publishCustom",async n=>{var s,i,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:n});const{payload:u,opts:l={}}=n,{attestation:d,tvf:f,publishMethod:p,prompt:g,tag:h,ttl:y=he.FIVE_MINUTES}=l,E=l.id||ko().toString(),S=Lm(k6().protocol),C=p||S.publish,_={id:E,method:C,params:Pg(uD(Pg({},u),{ttl:y,prompt:g,tag:h,attestation:d}),f)},T=`Failed to publish custom payload, please try again. id:${E} tag:${h}`;try{si((s=_.params)==null?void 0:s.prompt)&&((i=_.params)==null||delete i.prompt),si((o=_.params)==null?void 0:o.tag)&&((a=_.params)==null||delete a.tag);const P=new Promise(async D=>{const L=({id:U})=>{var F;((F=_.id)==null?void 0:F.toString())===U.toString()&&(this.removeRequestFromQueue(U),this.relayer.events.removeListener(Os.publish,L),D())};this.relayer.events.on(Os.publish,L);const I=El(new Promise((U,F)=>{this.rpcPublish(_,l).then(U).catch(B=>{this.logger.warn(B,B?.message),F(B)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${C} id:${E} tag:${h}`);try{await I,this.events.removeListener(Os.publish,L)}catch(U){this.queue.set(E,{request:_,opts:l,attempt:1}),this.logger.warn(U,U?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:E,payload:u,opts:l}}),await El(P,this.publishTimeout,T)}catch(P){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(P),(c=l?.internal)!=null&&c.throwOnFailedPublish)throw P}finally{this.queue.delete(E)}}),xc(this,"on",(n,s)=>{this.events.on(n,s)}),xc(this,"once",(n,s)=>{this.events.once(n,s)}),xc(this,"off",(n,s)=>{this.events.off(n,s)}),xc(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.relayer=e,this.logger=Sa(r,this.name),this.registerEventListeners()}get context(){return Ca(this.logger)}async rpcPublish(e,r){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const n=await this.relayer.request(e);return this.relayer.events.emit(Os.publish,Pg(Pg({},e),r)),this.logger.debug("Successfully Published Payload"),n}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{var n;const s=e.attempt+1;this.queue.set(r,uD(Pg({},e),{attempt:s})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(n=e.request.params)==null?void 0:n.tag}, attempt: ${s}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(dc.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Os.connection_stalled);return}this.checkQueue()}),this.relayer.on(Os.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}};var XSe=Object.defineProperty,QSe=(t,e,r)=>e in t?XSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Rg=(t,e,r)=>QSe(t,typeof e!="symbol"?e+"":e,r);let eIe=class{constructor(){Rg(this,"map",new Map),Rg(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),Rg(this,"get",e=>this.map.get(e)||[]),Rg(this,"exists",(e,r)=>this.get(e).includes(r)),Rg(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const s=n.filter(i=>i!==r);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Rg(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}};var tIe=Object.defineProperty,rIe=Object.defineProperties,nIe=Object.getOwnPropertyDescriptors,lD=Object.getOwnPropertySymbols,sIe=Object.prototype.hasOwnProperty,iIe=Object.prototype.propertyIsEnumerable,oO=(t,e,r)=>e in t?tIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$b=(t,e)=>{for(var r in e||(e={}))sIe.call(e,r)&&oO(t,r,e[r]);if(lD)for(var r of lD(e))iIe.call(e,r)&&oO(t,r,e[r]);return t},PN=(t,e)=>rIe(t,nIe(e)),xn=(t,e,r)=>oO(t,typeof e!="symbol"?e+"":e,r);let oIe=class extends Lpe{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,xn(this,"subscriptions",new Map),xn(this,"topicMap",new eIe),xn(this,"events",new Ys.EventEmitter),xn(this,"name",Wxe),xn(this,"version",Vxe),xn(this,"pending",new Map),xn(this,"cached",[]),xn(this,"initialized",!1),xn(this,"storagePrefix",Ml),xn(this,"subscribeTimeout",he.toMiliseconds(he.ONE_MINUTE)),xn(this,"initialSubscribeTimeout",he.toMiliseconds(he.ONE_SECOND*15)),xn(this,"clientId"),xn(this,"batchSubscribeTopicsLimit",500),xn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),xn(this,"subscribe",async(n,s)=>{var i;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}});try{const o=k6(s),a={topic:n,relay:o,transportType:s?.transportType};(i=s?.internal)!=null&&i.skipSubscribe||this.pending.set(n,a);const c=await this.rpcSubscribe(n,o,s);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),xn(this,"unsubscribe",async(n,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(n,s.id,s):await this.unsubscribeByTopic(n,s)}),xn(this,"isSubscribed",n=>new Promise(s=>{s(this.topicMap.topics.includes(n))})),xn(this,"isKnownTopic",n=>new Promise(s=>{s(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(i=>i.topic===n))})),xn(this,"on",(n,s)=>{this.events.on(n,s)}),xn(this,"once",(n,s)=>{this.events.once(n,s)}),xn(this,"off",(n,s)=>{this.events.off(n,s)}),xn(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),xn(this,"start",async()=>{await this.onConnect()}),xn(this,"stop",async()=>{await this.onDisconnect()}),xn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),xn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(s=>{n.push(s)}),await this.batchSubscribe(n)}),xn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(dc.pulse,async()=>{await this.checkPending()}),this.events.on(Ga.created,async n=>{const s=Ga.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()}),this.events.on(Ga.deleted,async n=>{const s=Ga.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()})}),this.relayer=e,this.logger=Sa(r,this.name),this.clientId=""}get context(){return Ca(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async s=>await this.unsubscribeById(e,s,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const s=k6(n);await this.restartToComplete({topic:e,id:r,relay:s}),await this.rpcUnsubscribe(e,r,s);const i=Gn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,r,n){var s,i;const o=await this.getSubscriptionId(e);if((s=n?.internal)!=null&&s.skipSubscribe)return o;(!n||n?.transportType===qn.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const a={method:Lm(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(i=n?.internal)==null?void 0:i.throwOnFailedPublish;try{if(n?.transportType===qn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(d=>this.logger.warn(d))},he.toMiliseconds(he.ONE_SECOND)),o;const u=new Promise(async d=>{const f=p=>{p.topic===e&&(this.events.removeListener(Ga.created,f),d(p.id))};this.events.on(Ga.created,f);try{const p=await El(new Promise((g,h)=>{this.relayer.request(a).catch(y=>{this.logger.warn(y,y?.message),h(y)}).then(g)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ga.created,f),d(p)}catch{}}),l=await El(u,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return l?o:null}catch(u){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Os.connection_stalled),c)throw u}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Lm(r.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await El(new Promise(s=>{this.relayer.request(n).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Os.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:Lm(r.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s;try{s=await await El(new Promise((i,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Os.connection_stalled)}return s}rpcUnsubscribe(e,r,n){const s={method:Lm(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,r){this.setSubscription(e,PN($b({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,$b({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,$b({},r)),this.topicMap.set(r.topic,e),this.events.emit(Ga.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=Fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Ga.deleted,PN($b({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ga.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Ga.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(r=>{var n;return r.topic===((n=this.subscriptions.get(r.id))==null?void 0:n.topic)})){const{message:r}=Fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>PN($b({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await cEe(he.toMiliseconds(he.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return jc(e+await this.getClientId())}};var aIe=Object.defineProperty,dD=Object.getOwnPropertySymbols,cIe=Object.prototype.hasOwnProperty,uIe=Object.prototype.propertyIsEnumerable,aO=(t,e,r)=>e in t?aIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fD=(t,e)=>{for(var r in e||(e={}))cIe.call(e,r)&&aO(t,r,e[r]);if(dD)for(var r of dD(e))uIe.call(e,r)&&aO(t,r,e[r]);return t},Dr=(t,e,r)=>aO(t,typeof e!="symbol"?e+"":e,r);let lIe=class extends Dpe{constructor(e){var r;super(e),Dr(this,"protocol","wc"),Dr(this,"version",2),Dr(this,"core"),Dr(this,"logger"),Dr(this,"events",new Ys.EventEmitter),Dr(this,"provider"),Dr(this,"messages"),Dr(this,"subscriber"),Dr(this,"publisher"),Dr(this,"name",Fxe),Dr(this,"transportExplicitlyClosed",!1),Dr(this,"initialized",!1),Dr(this,"connectionAttemptInProgress",!1),Dr(this,"relayUrl"),Dr(this,"projectId"),Dr(this,"packageName"),Dr(this,"bundleId"),Dr(this,"hasExperiencedNetworkDisruption",!1),Dr(this,"pingTimeout"),Dr(this,"heartBeatTimeout",he.toMiliseconds(he.THIRTY_SECONDS+he.FIVE_SECONDS)),Dr(this,"reconnectTimeout"),Dr(this,"connectPromise"),Dr(this,"reconnectInProgress",!1),Dr(this,"requestsInFlight",[]),Dr(this,"connectTimeout",he.toMiliseconds(he.ONE_SECOND*15)),Dr(this,"request",async n=>{var s,i;this.logger.debug("Publishing Request Payload");const o=n.id||ko().toString();await this.toEstablishConnection();try{this.logger.trace({id:o,method:n.method,topic:(s=n.params)==null?void 0:s.topic},"relayer.request - publishing...");const a=`${o}:${((i=n.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(a);const c=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(u=>u!==a),c}catch(a){throw this.logger.debug(`Failed to Publish Request: ${o}`),a}}),Dr(this,"resetPingTimeout",()=>{I6()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,s,i,o;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(o=(i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null?void 0:i.terminate)==null||o.call(i)}catch(a){this.logger.warn(a,a?.message)}},this.heartBeatTimeout))}),Dr(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Dr(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected ðŸ›œ"),this.startPingTimeout(),this.events.emit(Os.connect)}),Dr(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected ðŸ›‘"),this.requestsInFlight=[],this.onProviderDisconnect()}),Dr(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Os.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Dr(this,"registerProviderListeners",()=>{this.provider.on(Ac.payload,this.onPayloadHandler),this.provider.on(Ac.connect,this.onConnectHandler),this.provider.on(Ac.disconnect,this.onDisconnectHandler),this.provider.on(Ac.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=wk({logger:(r=e.logger)!=null?r:Lxe,name:this.name}),this.messages=new WSe(this.logger,e.core),this.subscriber=new oIe(this,this.logger),this.publisher=new JSe(this,this.logger),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||ite,Vve()?this.packageName=XM():Gve()&&(this.bundleId=XM()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return Ca(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:qn.relay},vI.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,r){var n,s,i;this.isInitialized(),(!(r!=null&&r.transportType)||r?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((n=r?.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(s=r?.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const u=l=>{l.topic===e&&(this.subscriber.off(Ga.created,u),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(Ga.created,u)}),new Promise(async(l,d)=>{a=await this.subscriber.subscribe(e,fD({internal:{throwOnFailedPublish:o}},r)).catch(f=>{o&&d(f)})||a,l()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await El(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await z7())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,s)=>n.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const s=Ps(he.FIVE_MINUTES),i={topic:n,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,i)}this.events.emit(Os.message,e),await this.recordMessageEvent(e,vI.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Ac.disconnect,i),await El(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Ac.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ac.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Ac.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const s=n;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,he.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,s,i;if(I6())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new qo(new tte(Xve({sdkVersion:tO,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:s}=e;await this.messages.set(n,s,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const s=this.messages.has(r,n);return s&&this.logger.warn(`Ignoring duplicate message: ${n}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Jy(e)){if(!e.method.endsWith($xe))return;const r=e.params,{topic:n,message:s,publishedAt:i,attestation:o}=r.data,a={topic:n,message:s,publishedAt:i,transportType:qn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(fD({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else J0(e)&&this.events.emit(Os.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,vI.inbound),this.events.emit(Os.message,e))}async acknowledgePayload(e){const r=Ul(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Ac.payload,this.onPayloadHandler),this.provider.off(Ac.connect,this.onConnectHandler),this.provider.off(Ac.disconnect,this.onDisconnectHandler),this.provider.off(Ac.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await z7();KAe(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(dc.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&JAe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(r){this.logger.warn(r,r?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Os.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},he.toMiliseconds(qxe)))))}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}};function dIe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function hD(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function pD(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const fIe="[object RegExp]",hIe="[object String]",pIe="[object Number]",gIe="[object Boolean]",gD="[object Arguments]",mIe="[object Symbol]",yIe="[object Date]",bIe="[object Map]",wIe="[object Set]",vIe="[object Array]",EIe="[object Function]",_Ie="[object ArrayBuffer]",RN="[object Object]",AIe="[object Error]",xIe="[object DataView]",CIe="[object Uint8Array]",SIe="[object Uint8ClampedArray]",IIe="[object Uint16Array]",TIe="[object Uint32Array]",NIe="[object BigUint64Array]",PIe="[object Int8Array]",RIe="[object Int16Array]",OIe="[object Int32Array]",kIe="[object BigInt64Array]",BIe="[object Float32Array]",UIe="[object Float64Array]";function MIe(){}function mD(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function DIe(t,e,r){return w1(t,e,void 0,void 0,void 0,void 0,r)}function w1(t,e,r,n,s,i,o){const a=o(t,e,r,n,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return B1(t,e,i,o)}return B1(t,e,i,o)}function B1(t,e,r,n){if(Object.is(t,e))return!0;let s=pD(t),i=pD(e);if(s===gD&&(s=RN),i===gD&&(i=RN),s!==i)return!1;switch(s){case hIe:return t.toString()===e.toString();case pIe:{const c=t.valueOf(),u=e.valueOf();return dIe(c,u)}case gIe:case yIe:case mIe:return Object.is(t.valueOf(),e.valueOf());case fIe:return t.source===e.source&&t.flags===e.flags;case EIe:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(s){case bIe:{if(t.size!==e.size)return!1;for(const[c,u]of t.entries())if(!e.has(c)||!w1(u,e.get(c),c,t,e,r,n))return!1;return!0}case wIe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),u=Array.from(e.values());for(let l=0;l<c.length;l++){const d=c[l],f=u.findIndex(p=>w1(d,p,void 0,t,e,r,n));if(f===-1)return!1;u.splice(f,1)}return!0}case vIe:case CIe:case SIe:case IIe:case TIe:case NIe:case PIe:case RIe:case OIe:case kIe:case BIe:case UIe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!w1(t[c],e[c],c,t,e,r,n))return!1;return!0}case _Ie:return t.byteLength!==e.byteLength?!1:B1(new Uint8Array(t),new Uint8Array(e),r,n);case xIe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:B1(new Uint8Array(t),new Uint8Array(e),r,n);case AIe:return t.name===e.name&&t.message===e.message;case RN:{if(!(B1(t.constructor,e.constructor,r,n)||mD(t)&&mD(e)))return!1;const c=[...Object.keys(t),...hD(t)],u=[...Object.keys(e),...hD(e)];if(c.length!==u.length)return!1;for(let l=0;l<c.length;l++){const d=c[l],f=t[d];if(!Object.hasOwn(e,d))return!1;const p=e[d];if(!w1(f,p,d,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function jIe(t,e){return DIe(t,e,MIe)}var LIe=Object.defineProperty,yD=Object.getOwnPropertySymbols,FIe=Object.prototype.hasOwnProperty,$Ie=Object.prototype.propertyIsEnumerable,cO=(t,e,r)=>e in t?LIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bD=(t,e)=>{for(var r in e||(e={}))FIe.call(e,r)&&cO(t,r,e[r]);if(yD)for(var r of yD(e))$Ie.call(e,r)&&cO(t,r,e[r]);return t},Ko=(t,e,r)=>cO(t,typeof e!="symbol"?e+"":e,r);let X0=class extends jpe{constructor(e,r,n,s=Ml,i=void 0){super(e,r,n,s),this.core=e,this.logger=r,this.name=n,Ko(this,"map",new Map),Ko(this,"version",Hxe),Ko(this,"cached",[]),Ko(this,"initialized",!1),Ko(this,"getKey"),Ko(this,"storagePrefix",Ml),Ko(this,"recentlyDeleted",[]),Ko(this,"recentlyDeletedLimit",200),Ko(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!si(o)?this.map.set(this.getKey(o),o):CAe(o)?this.map.set(o.id,o):SAe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ko(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ko(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ko(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>jIe(a[c],o[c]))):this.values)),Ko(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=bD(bD({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Ko(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Sa(r,this.name),this.storagePrefix=s,this.getKey=i}get context(){return Ca(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:s}=Fe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:n}=Fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=Fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var qIe=Object.defineProperty,HIe=(t,e,r)=>e in t?qIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fr=(t,e,r)=>HIe(t,typeof e!="symbol"?e+"":e,r);let zIe=class{constructor(e,r){this.core=e,this.logger=r,fr(this,"name",Gxe),fr(this,"version",Kxe),fr(this,"events",new Vy),fr(this,"pairings"),fr(this,"initialized",!1),fr(this,"storagePrefix",Ml),fr(this,"ignoredPayloadTypes",[Yd]),fr(this,"registeredMethods",[]),fr(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),fr(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),fr(this,"create",async n=>{this.isInitialized();const s=X8(),i=await this.core.crypto.setSymKey(s),o=Ps(he.FIVE_MINUTES),a={protocol:ste},c={topic:i,expiry:o,relay:a,active:!1,methods:n?.methods},u=U7({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:n?.methods});return this.events.emit(Vp.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:n?.transportType,internal:n?.internal}),{topic:i,uri:u}}),fr(this,"pair",async n=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:n?.uri,trace:[dl.pairing_started]}});this.isValidPair(n,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:u}=B7(n.uri);s.props.properties.topic=i,s.addTrace(dl.pairing_uri_validation_success),s.addTrace(dl.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(i)){if(l=this.pairings.get(i),s.addTrace(dl.existing_pairing),l.active)throw s.setError(Nd.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(dl.pairing_not_expired)}const d=c||Ps(he.FIVE_MINUTES),f={topic:i,relay:a,expiry:d,active:!1,methods:u};this.core.expirer.set(i,d),await this.pairings.set(i,f),s.addTrace(dl.store_new_pairing),n.activatePairing&&await this.activate({topic:i}),this.events.emit(Vp.create,f),s.addTrace(dl.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(dl.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Nd.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(p){throw s.setError(Nd.subscribe_pairing_topic_failure),p}return s.addTrace(dl.subscribe_pairing_topic_success),f}),fr(this,"activate",async({topic:n})=>{this.isInitialized();const s=Ps(he.FIVE_MINUTES);this.core.expirer.set(n,s),await this.pairings.update(n,{active:!0,expiry:s})}),fr(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=n;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=qp();this.events.once(mn("pairing_ping",i),({error:u})=>{u?c(u):a()}),await o()}}),fr(this,"updateExpiry",async({topic:n,expiry:s})=>{this.isInitialized(),await this.pairings.update(n,{expiry:s})}),fr(this,"updateMetadata",async({topic:n,metadata:s})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:s})}),fr(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),fr(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Gn("USER_DISCONNECTED")),await this.deletePairing(s))}),fr(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(s);return U7({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),fr(this,"sendRequest",async(n,s,i)=>{const o=Ms(s,i),a=await this.core.crypto.encode(n,o),c=Lb[s].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),fr(this,"sendResult",async(n,s,i)=>{const o=Ul(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=Lb[c].res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),fr(this,"sendError",async(n,s,i)=>{const o=Yy(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=Lb[c]?Lb[c].res:Lb.unregistered_method.res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),fr(this,"deletePairing",async(n,s)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Gn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),s?Promise.resolve():this.core.expirer.del(n)])}),fr(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(s=>gl(s.expiry));await Promise.all(n.map(s=>this.deletePairing(s.topic)))}),fr(this,"onRelayEventRequest",async n=>{const{topic:s,payload:i}=n;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),fr(this,"onRelayEventResponse",async n=>{const{topic:s,payload:i}=n,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),fr(this,"onPairingPingRequest",async(n,s)=>{const{id:i}=s;try{this.isValidPing({topic:n}),await this.sendResult(i,n,!0),this.events.emit(Vp.ping,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),fr(this,"onPairingPingResponse",(n,s)=>{const{id:i}=s;setTimeout(()=>{Vs(s)?this.events.emit(mn("pairing_ping",i),{}):gs(s)&&this.events.emit(mn("pairing_ping",i),{error:s.error})},500)}),fr(this,"onPairingDeleteRequest",async(n,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Vp.delete,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),fr(this,"onUnknownRpcMethodRequest",async(n,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Gn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,n,a),this.logger.error(a)}catch(a){await this.sendError(i,n,a),this.logger.error(a)}}),fr(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(Gn("WC_METHOD_UNSUPPORTED",n))}),fr(this,"isValidPair",(n,s)=>{var i;if(!sa(n)){const{message:a}=Fe("MISSING_OR_INVALID",`pair() params: ${n}`);throw s.setError(Nd.malformed_pairing_uri),new Error(a)}if(!xAe(n.uri)){const{message:a}=Fe("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw s.setError(Nd.malformed_pairing_uri),new Error(a)}const o=B7(n?.uri);if(!((i=o?.relay)!=null&&i.protocol)){const{message:a}=Fe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Nd.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Fe("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Nd.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&he.toMiliseconds(o?.expiryTimestamp)<Date.now()){s.setError(Nd.pairing_expired);const{message:a}=Fe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),fr(this,"isValidPing",async n=>{if(!sa(n)){const{message:i}=Fe("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),fr(this,"isValidDisconnect",async n=>{if(!sa(n)){const{message:i}=Fe("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),fr(this,"isValidPairingTopic",async n=>{if(!Bs(n,!1)){const{message:s}=Fe("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(s)}if(!this.pairings.keys.includes(n)){const{message:s}=Fe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(s)}if(gl(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:s}=Fe("EXPIRED",`pairing topic: ${n}`);throw new Error(s)}}),this.core=e,this.logger=Sa(r,this.name),this.pairings=new X0(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ca(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Os.message,async e=>{const{topic:r,message:n,transportType:s}=e;if(this.pairings.keys.includes(r)&&s!==qn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const i=await this.core.crypto.decode(r,n);Jy(i)?(this.core.history.set(r,i),await this.onRelayEventRequest({topic:r,payload:i})):J0(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id)),await this.core.relayer.messages.ack(r,n)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Uc.expired,async e=>{const{topic:r}=KQ(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Vp.expire,{topic:r}))})}};var WIe=Object.defineProperty,VIe=(t,e,r)=>e in t?WIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gi=(t,e,r)=>VIe(t,typeof e!="symbol"?e+"":e,r);let GIe=class extends Bpe{constructor(e,r){super(e,r),this.core=e,this.logger=r,gi(this,"records",new Map),gi(this,"events",new Ys.EventEmitter),gi(this,"name",Zxe),gi(this,"version",Yxe),gi(this,"cached",[]),gi(this,"initialized",!1),gi(this,"storagePrefix",Ml),gi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),gi(this,"set",(n,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:n,request:{method:s.method,params:s.params||null},chainId:i,expiry:Ps(he.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(iu.created,o)}),gi(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const s=await this.getRecord(n.id);typeof s.response>"u"&&(s.response=gs(n)?{error:n.error}:{result:n.result},this.records.set(s.id,s),this.persist(),this.events.emit(iu.updated,s))}),gi(this,"get",async(n,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:s}),await this.getRecord(s))),gi(this,"delete",(n,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===n){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(iu.deleted,i)}}),this.persist()}),gi(this,"exists",async(n,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===n:!1)),gi(this,"on",(n,s)=>{this.events.on(n,s)}),gi(this,"once",(n,s)=>{this.events.once(n,s)}),gi(this,"off",(n,s)=>{this.events.off(n,s)}),gi(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=Sa(r,this.name)}get context(){return Ca(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Ms(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=Fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(iu.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=Fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(iu.created,e=>{const r=iu.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(iu.updated,e=>{const r=iu.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(iu.deleted,e=>{const r=iu.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(dc.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{he.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(iu.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var KIe=Object.defineProperty,ZIe=(t,e,r)=>e in t?KIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ki=(t,e,r)=>ZIe(t,typeof e!="symbol"?e+"":e,r);let YIe=class extends Fpe{constructor(e,r){super(e,r),this.core=e,this.logger=r,Ki(this,"expirations",new Map),Ki(this,"events",new Ys.EventEmitter),Ki(this,"name",Jxe),Ki(this,"version",Xxe),Ki(this,"cached",[]),Ki(this,"initialized",!1),Ki(this,"storagePrefix",Ml),Ki(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ki(this,"has",n=>{try{const s=this.formatTarget(n);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Ki(this,"set",(n,s)=>{this.isInitialized();const i=this.formatTarget(n),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Uc.created,{target:i,expiration:o})}),Ki(this,"get",n=>{this.isInitialized();const s=this.formatTarget(n);return this.getExpiration(s)}),Ki(this,"del",n=>{if(this.isInitialized(),this.has(n)){const s=this.formatTarget(n),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Uc.deleted,{target:s,expiration:i})}}),Ki(this,"on",(n,s)=>{this.events.on(n,s)}),Ki(this,"once",(n,s)=>{this.events.once(n,s)}),Ki(this,"off",(n,s)=>{this.events.off(n,s)}),Ki(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=Sa(r,this.name)}get context(){return Ca(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Qve(e);if(typeof e=="number")return eEe(e);const{message:r}=Fe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Uc.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=Fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=Fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;he.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Uc.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(dc.pulse,()=>this.checkExpirations()),this.events.on(Uc.created,e=>{const r=Uc.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Uc.expired,e=>{const r=Uc.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Uc.deleted,e=>{const r=Uc.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var JIe=Object.defineProperty,XIe=(t,e,r)=>e in t?JIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ts=(t,e,r)=>XIe(t,typeof e!="symbol"?e+"":e,r);let QIe=class extends $pe{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,Ts(this,"name",Qxe),Ts(this,"abortController"),Ts(this,"isDevEnv"),Ts(this,"verifyUrlV3",tCe),Ts(this,"storagePrefix",Ml),Ts(this,"version",nte),Ts(this,"publicKey"),Ts(this,"fetchPromise"),Ts(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&he.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Ts(this,"register",async s=>{if(!Ky()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const u=di.getDocument(),l=this.startAbortTimer(he.ONE_SECOND*5),d=await new Promise((f,p)=>{const g=()=>{window.removeEventListener("message",y),u.body.removeChild(h),p("attestation aborted")};this.abortController.signal.addEventListener("abort",g);const h=u.createElement("iframe");h.src=c,h.style.display="none",h.addEventListener("error",g,{signal:this.abortController.signal});const y=E=>{if(E.data&&typeof E.data=="string")try{const S=JSON.parse(E.data);if(S.type==="verify_attestation"){if(wy(S.attestation).payload.id!==o)return;clearInterval(l),u.body.removeChild(h),this.abortController.signal.removeEventListener("abort",g),window.removeEventListener("message",y),f(S.attestation===null?"":S.attestation)}}catch(S){this.logger.warn(S)}};u.body.appendChild(h),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug(d,"jwt attestation"),d}catch(u){this.logger.warn(u)}return""}),Ts(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(wy(i).payload.id!==a)return;const u=await this.isValidJwtAttestation(i);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const c=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(o,c)}),Ts(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(he.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Ts(this,"getVerifyUrl",s=>{let i=s||k1;return rCe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${k1}`),i=k1),i}),Ts(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(he.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Ts(this,"persistPublicKey",async s=>{this.logger.debug(s,"persisting public key to local storage"),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Ts(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Ts(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Ts(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Ts(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Ts(this,"validateAttestation",(s,i)=>{const o=Y2e(s,i.publicKey),a={hasExpired:he.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Sa(r,this.name),this.abortController=new AbortController,this.isDevEnv=ck(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Ca(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),he.toMiliseconds(e))}};var e6e=Object.defineProperty,t6e=(t,e,r)=>e in t?e6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wD=(t,e,r)=>t6e(t,typeof e!="symbol"?e+"":e,r);let r6e=class extends qpe{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,wD(this,"context",nCe),wD(this,"registerDeviceToken",async n=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=n,c=`${sCe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Sa(r,this.context)}};var n6e=Object.defineProperty,vD=Object.getOwnPropertySymbols,s6e=Object.prototype.hasOwnProperty,i6e=Object.prototype.propertyIsEnumerable,uO=(t,e,r)=>e in t?n6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qb=(t,e)=>{for(var r in e||(e={}))s6e.call(e,r)&&uO(t,r,e[r]);if(vD)for(var r of vD(e))i6e.call(e,r)&&uO(t,r,e[r]);return t},Xs=(t,e,r)=>uO(t,typeof e!="symbol"?e+"":e,r);let o6e=class extends Hpe{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,Xs(this,"context",oCe),Xs(this,"storagePrefix",Ml),Xs(this,"storageVersion",iCe),Xs(this,"events",new Map),Xs(this,"shouldPersist",!1),Xs(this,"init",async()=>{if(!ck())try{const s={eventId:e7(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:VQ(this.core.relayer.protocol,this.core.relayer.version,tO)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Xs(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,u=e7(),l=this.core.projectId||"",d=Date.now(),f=qb({eventId:u,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,f),this.shouldPersist=!0),f}),Xs(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return qb(qb({},a),this.setMethods(a.eventId))}),Xs(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Xs(this,"setEventListeners",()=>{this.core.heartbeat.on(dc.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{he.fromMiliseconds(Date.now())-he.fromMiliseconds(s.timestamp)>aCe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Xs(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Xs(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Xs(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Xs(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Xs(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,qb(qb({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Xs(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Xs(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${cCe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${tO}${i}`,{method:"POST",body:JSON.stringify(s)})}),Xs(this,"getAppDomain",()=>WQ().url),this.logger=Sa(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}};var a6e=Object.defineProperty,ED=Object.getOwnPropertySymbols,c6e=Object.prototype.hasOwnProperty,u6e=Object.prototype.propertyIsEnumerable,lO=(t,e,r)=>e in t?a6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_D=(t,e)=>{for(var r in e||(e={}))c6e.call(e,r)&&lO(t,r,e[r]);if(ED)for(var r of ED(e))u6e.call(e,r)&&lO(t,r,e[r]);return t},Rn=(t,e,r)=>lO(t,typeof e!="symbol"?e+"":e,r);let l6e=class bte extends Ppe{constructor(e){var r;super(e),Rn(this,"protocol",rte),Rn(this,"version",nte),Rn(this,"name",eO),Rn(this,"relayUrl"),Rn(this,"projectId"),Rn(this,"customStoragePrefix"),Rn(this,"events",new Ys.EventEmitter),Rn(this,"logger"),Rn(this,"heartbeat"),Rn(this,"relayer"),Rn(this,"crypto"),Rn(this,"storage"),Rn(this,"history"),Rn(this,"expirer"),Rn(this,"pairing"),Rn(this,"verify"),Rn(this,"echoClient"),Rn(this,"linkModeSupportedApps"),Rn(this,"eventClient"),Rn(this,"initialized",!1),Rn(this,"logChunkController"),Rn(this,"on",(a,c)=>this.events.on(a,c)),Rn(this,"once",(a,c)=>this.events.once(a,c)),Rn(this,"off",(a,c)=>this.events.off(a,c)),Rn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Rn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const l={topic:a,message:c,publishedAt:Date.now(),transportType:qn.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})});const n=this.getGlobalCore(e?.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||ite,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=O4({level:typeof e?.logger=="string"&&e.logger?e.logger:Nxe.logger,name:eO}),{logger:i,chunkLoggerController:o}=PT({opts:s,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Sa(i,this.name),this.heartbeat=new RJ,this.crypto=new DSe(this,this.logger,e?.keychain),this.history=new GIe(this,this.logger),this.expirer=new YIe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new BJ(_D(_D({},Pxe),e?.storageOptions)),this.relayer=new lIe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new zIe(this,this.logger),this.verify=new QIe(this,this.logger,this.storage),this.echoClient=new r6e(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new o6e(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const r=new bte(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(zxe,n),r}get context(){return Ca(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(eD,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(eD)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(e,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${e}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(e){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=e.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&Txe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const d6e=l6e,wte="wc",vte=2,Ete="client",Ek=`${wte}@${vte}:${Ete}:`,ON={name:Ete,logger:"error"},AD="WALLETCONNECT_DEEPLINK_CHOICE",f6e="proposal",xD="Proposal expired",h6e="session",Og=he.SEVEN_DAYS,p6e="engine",mi={wc_sessionPropose:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1104},res:{ttl:he.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1106},res:{ttl:he.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1112},res:{ttl:he.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1114},res:{ttl:he.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:he.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:he.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1119}}},kN={min:he.FIVE_MINUTES,max:he.SEVEN_DAYS},rl={idle:"IDLE",active:"ACTIVE"},g6e={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},m6e="request",y6e=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],b6e="wc",w6e="auth",v6e="authKeys",E6e="pairingTopics",_6e="requests",JT=`${b6e}@${1.5}:${w6e}:`,EI=`${JT}:PUB_KEY`;var A6e=Object.defineProperty,x6e=Object.defineProperties,C6e=Object.getOwnPropertyDescriptors,CD=Object.getOwnPropertySymbols,S6e=Object.prototype.hasOwnProperty,I6e=Object.prototype.propertyIsEnumerable,dO=(t,e,r)=>e in t?A6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yr=(t,e)=>{for(var r in e||(e={}))S6e.call(e,r)&&dO(t,r,e[r]);if(CD)for(var r of CD(e))I6e.call(e,r)&&dO(t,r,e[r]);return t},yi=(t,e)=>x6e(t,C6e(e)),Se=(t,e,r)=>dO(t,typeof e!="symbol"?e+"":e,r);let T6e=class extends Gpe{constructor(e){super(e),Se(this,"name",p6e),Se(this,"events",new Vy),Se(this,"initialized",!1),Se(this,"requestQueue",{state:rl.idle,queue:[]}),Se(this,"sessionRequestQueue",{state:rl.idle,queue:[]}),Se(this,"emittedSessionRequests",new uEe({limit:500})),Se(this,"requestQueueDelay",he.ONE_SECOND),Se(this,"expectedPairingMethodMap",new Map),Se(this,"recentlyDeletedMap",new Map),Se(this,"recentlyDeletedLimit",200),Se(this,"relayMessageCache",[]),Se(this,"pendingSessions",new Map),Se(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(mi)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay)))}),Se(this,"connect",async r=>{var n;this.isInitialized(),await this.confirmOnlineStateOrThrow();const s=yi(Yr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s),s.optionalNamespaces=wAe(s.requiredNamespaces,s.optionalNamespaces),s.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:o,optionalNamespaces:a,sessionProperties:c,scopedProperties:u,relays:l,authentication:d,walletPay:f}=s,p=((n=d?.[0])==null?void 0:n.ttl)||mi.wc_sessionPropose.req.ttl||he.FIVE_MINUTES;this.validateRequestExpiry(p);let g=i,h,y=!1;try{if(g){const I=this.client.core.pairing.pairings.get(g);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),y=I.active}}catch(I){throw this.client.logger.error(`connect() -> pairing.get(${g}) failed`),I}if(!g||!y){const{topic:I,uri:U}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});g=I,h=U}if(!g){const{message:I}=Fe("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error(I)}const E=await this.client.core.crypto.generateKeyPair(),S=Ps(p),C=Yr(yi(Yr(Yr({requiredNamespaces:o,optionalNamespaces:a,relays:l??[{protocol:ste}],proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:S,pairingTopic:g},c&&{sessionProperties:c}),u&&{scopedProperties:u}),{id:ni()}),(d||f)&&{requests:{authentication:d?.map(I=>{const{domain:U,chains:F,nonce:B,uri:A,exp:m,nbf:b,type:w,statement:x,requestId:M,resources:k,signatureTypes:j}=I;return{domain:U,chains:F,nonce:B,type:w??"caip122",aud:A,version:"1",iat:new Date().toISOString(),exp:m,nbf:b,statement:x,requestId:M,resources:k,signatureTypes:j}}),walletPay:f}}),_=mn("session_connect",C.id),{reject:T,resolve:P,done:D}=qp(p,xD),L=({id:I})=>{I===C.id&&(this.client.events.off("proposal_expire",L),this.pendingSessions.delete(C.id),this.events.emit(_,{error:{message:xD,code:0}}))};return this.client.events.on("proposal_expire",L),this.events.once(_,({error:I,session:U})=>{this.client.events.off("proposal_expire",L),I?T(I):U&&P(U)}),await this.setProposal(C.id,C),await this.sendProposeSession({proposal:C,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:C.id}}}).catch(I=>{throw this.deleteProposal(C.id),I}),{uri:h,approval:D}}),Se(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),Se(this,"approve",async r=>{var n,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r?.id)==null?void 0:n.toString(),trace:[ou.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(U){throw o.setError(dp.no_internet_connection),U}try{await this.isValidProposalId(r?.id)}catch(U){throw this.client.logger.error(`approve() -> proposal.get(${r?.id}) failed`),o.setError(dp.proposal_not_found),U}try{await this.isValidApprove(r)}catch(U){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(dp.session_approve_namespace_validation_failure),U}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:f,proposalRequestsResponses:p}=r,g=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:h,proposer:y,requiredNamespaces:E,optionalNamespaces:S}=g;let C=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:h});C||(C=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:ou.session_approve_started,properties:{topic:h,trace:[ou.session_approve_started,ou.session_namespaces_validation_success]}}));const _=await this.client.core.crypto.generateKeyPair(),T=y.publicKey,P=await this.client.core.crypto.generateSharedKey(_,T),D=yi(Yr(Yr(Yr({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:_,metadata:this.client.metadata},expiry:Ps(Og)},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{proposalRequestsResponses:p}),L=qn.relay;C.addTrace(ou.subscribing_session_topic);try{await this.client.core.relayer.subscribe(P,{transportType:L,internal:{skipSubscribe:!0}})}catch(U){throw C.setError(dp.subscribe_session_topic_failure),U}C.addTrace(ou.subscribe_session_topic_success);const I=yi(Yr({},D),{topic:P,requiredNamespaces:E,optionalNamespaces:S,pairingTopic:h,acknowledged:!1,self:D.controller,peer:{publicKey:y.publicKey,metadata:y.metadata},controller:_,transportType:qn.relay,authentication:p?.authentication,walletPayResult:p?.walletPay});await this.client.session.set(P,I),C.addTrace(ou.store_session);try{await this.sendApproveSession({sessionTopic:P,proposal:g,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:_},sessionSettleRequest:D,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:Yr({correlationId:a},this.getTVFApproveParams(I))}}),C.addTrace(ou.session_approve_publish_success)}catch(U){throw this.client.logger.error(U),this.client.session.delete(P,Gn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(P),U}return this.client.core.eventClient.deleteEvent({eventId:C.eventId}),await this.client.core.pairing.updateMetadata({topic:h,metadata:y.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:h}),await this.setExpiry(P,Ps(Og)),{topic:P,acknowledged:()=>Promise.resolve(this.client.session.get(P))}}),Se(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:s}=r;let i;try{i=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}i&&await this.sendError({id:n,topic:i,error:s,rpcOpts:mi.wc_sessionPropose.reject}),await this.deleteProposal(n)}),Se(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:n,namespaces:s}=r,{done:i,resolve:o,reject:a}=qp(he.FIVE_MINUTES,"Session update request expired without receiving any acknowledgement"),c=ni(),u=ko().toString(),l=this.client.session.get(n).namespaces;return this.events.once(mn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(n,{namespaces:s}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(d=>{this.client.logger.error(d),this.client.session.update(n,{namespaces:l}),a(d)}),{acknowledged:i}}),Se(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,s=ni(),{done:i,resolve:o,reject:a}=qp(he.FIVE_MINUTES,"Session extend request expired without receiving any acknowledgement");return this.events.once(mn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,Ps(Og)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),Se(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:n,request:s,topic:i,expiry:o=mi.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(i);a?.transportType===qn.relay&&await this.confirmOnlineStateOrThrow();const c=ni(),u=ko().toString(),{done:l,resolve:d,reject:f}=qp(o,"Request expired. Please try again.");this.events.once(mn("session_request",c),({error:y,result:E})=>{y?f(y):d(E)});const p="wc_sessionRequest",g=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(g)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:p,params:{request:yi(Yr({},s),{expiryTimestamp:Ps(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:g}).catch(y=>f(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),await l();const h={request:yi(Yr({},s),{expiryTimestamp:Ps(o)}),chainId:n};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:p,params:h,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,h)}).catch(E=>f(E)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),y()}),new Promise(async y=>{var E;if(!((E=a.sessionConfig)!=null&&E.disableDeepLink)){const S=await sEe(this.client.core.storage,AD);await tEe({id:c,topic:i,wcDeepLink:S})}y()}),l()]).then(y=>y[2])}),Se(this,"respond",async r=>{var n,s;this.isInitialized();const i=this.client.core.eventClient.createEvent({properties:{topic:r?.topic||((s=(n=r?.response)==null?void 0:n.id)==null?void 0:s.toString()),trace:[ou.session_request_response_started]}});try{await this.isValidRespond(r)}catch(d){throw i.addTrace(d?.message),i.setError(dp.session_request_response_validation_failure),d}i.addTrace(ou.session_request_response_validation_success);const{topic:o,response:a}=r,{id:c}=a,u=this.client.session.get(o);u.transportType===qn.relay&&await this.confirmOnlineStateOrThrow();const l=this.getAppLinkIfEnabled(u.peer.metadata,u.transportType);try{i.addTrace(ou.session_request_response_publish_started),Vs(a)?await this.sendResult({id:c,topic:o,result:a.result,throwOnFailedPublish:!0,appLink:l}):gs(a)&&await this.sendError({id:c,topic:o,error:a.error,appLink:l}),this.cleanupAfterResponse(r)}catch(d){throw i.addTrace(d?.message),i.setError(dp.session_request_response_publish_failure),d}}),Se(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:n}=r;if(this.client.session.keys.includes(n)){const s=ni(),i=ko().toString(),{done:o,resolve:a,reject:c}=qp(he.FIVE_MINUTES,"Ping request expired without receiving any acknowledgement");this.events.once(mn("session_ping",s),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),Se(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:s,chainId:i}=r,o=ko().toString(),a=ni();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),Se(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Gn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:s}=Fe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(s)}}),Se(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>_Ae(n,r)))),Se(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Se(this,"authenticate",async(r,n)=>{var s;this.isInitialized(),this.isValidAuthenticate(r);const i=n&&this.client.core.linkModeSupportedApps.includes(n)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?qn.link_mode:qn.relay;o===qn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:l,nonce:d,type:f,exp:p,nbf:g,methods:h=[],expiry:y}=r,E=[...r.resources||[]],{topic:S,uri:C}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:S,uri:C}});const _=await this.client.core.crypto.generateKeyPair(),T=wI(_);if(await Promise.all([this.client.auth.authKeys.set(EI,{responseTopic:T,publicKey:_}),this.client.auth.pairingTopics.set(T,{topic:T,pairingTopic:S})]),await this.client.core.relayer.subscribe(T,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${S}`),h.length>0){const{namespace:k}=Zd(a[0]);let j=__e(k,"request",h);bI(E)&&(j=x_e(j,E.pop())),E.push(j)}const P=y&&y>mi.wc_sessionAuthenticate.req.ttl?y:mi.wc_sessionAuthenticate.req.ttl,D={authPayload:{type:f??"caip122",chains:a,statement:c,aud:u,domain:l,version:"1",nonce:d,iat:new Date().toISOString(),exp:p,nbf:g,resources:E},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:Ps(P)},L={eip155:{chains:a,methods:[...new Set(["personal_sign",...h])],events:["chainChanged","accountsChanged"]}},I={requiredNamespaces:{},optionalNamespaces:L,relays:[{protocol:"irn"}],pairingTopic:S,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:Ps(mi.wc_sessionPropose.req.ttl),id:ni()},{done:U,resolve:F,reject:B}=qp(P,"Request expired"),A=ni(),m=mn("session_connect",I.id),b=mn("session_request",A),w=async({error:k,session:j})=>{this.events.off(b,x),k?B(k):j&&F({session:j})},x=async k=>{var j,N,v;if(await this.deletePendingAuthRequest(A,{message:"fulfilled",code:0}),k.error){const K=Gn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return k.error.code===K.code?void 0:(this.events.off(m,w),B(k.error.message))}await this.deleteProposal(I.id),this.events.off(m,w);const{cacaos:R,responder:$}=k.result,O=[],H=[];for(const K of R){await d7({cacao:K,projectId:this.client.core.projectId})||(this.client.logger.error(K,"Signature verification failed"),B(Gn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Q}=K,re=bI(Q.resources),de=[q8(Q.iss)],le=N6(Q.iss);if(re){const se=f7(re),be=h7(re);O.push(...se),de.push(...be)}for(const se of de)H.push(`${se}:${le}`)}const W=await this.client.core.crypto.generateSharedKey(_,$.publicKey);let G;O.length>0&&(G={topic:W,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:$,controller:$.publicKey,expiry:Ps(Og),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:S,namespaces:L7([...new Set(O)],[...new Set(H)]),transportType:o},await this.client.core.relayer.subscribe(W,{transportType:o}),await this.client.session.set(W,G),S&&await this.client.core.pairing.updateMetadata({topic:S,metadata:$.metadata}),G=this.client.session.get(W)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(N=$.metadata.redirect)!=null&&N.linkMode&&(v=$.metadata.redirect)!=null&&v.universal&&n&&(this.client.core.addLinkModeSupportedApp($.metadata.redirect.universal),this.client.session.update(W,{transportType:qn.link_mode})),F({auths:R,session:G})};this.events.once(m,w),this.events.once(b,x);let M;try{if(i){const k=Ms("wc_sessionAuthenticate",D,A);this.client.core.history.set(S,k);const j=await this.client.core.crypto.encode("",k,{type:VE,encoding:lh});M=g2(n,S,j)}else await Promise.all([this.sendRequest({topic:S,method:"wc_sessionAuthenticate",params:D,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:A}),this.sendRequest({topic:S,method:"wc_sessionPropose",params:I,expiry:mi.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:I.id})])}catch(k){throw this.events.off(m,w),this.events.off(b,x),k}return await this.setProposal(I.id,I),await this.setAuthRequest(A,{request:yi(Yr({},D),{verifyContext:{}}),pairingTopic:S,transportType:o}),{uri:M??C,response:U}}),Se(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:s}=r,i=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[fp.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(Fb.no_internet_connection),y}const o=this.getPendingAuthRequest(n);if(!o)throw i.setError(Fb.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||qn.relay;a===qn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=wI(c),d={type:Yd,receiverPublicKey:c,senderPublicKey:u},f=[],p=[];for(const y of s){if(!await d7({cacao:y,projectId:this.client.core.projectId})){i.setError(Fb.invalid_cacao);const T=Gn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:l,error:T,encodeOpts:d}),new Error(T.message)}i.addTrace(fp.cacaos_verified);const{p:E}=y,S=bI(E.resources),C=[q8(E.iss)],_=N6(E.iss);if(S){const T=f7(S),P=h7(S);f.push(...T),C.push(...P)}for(const T of C)p.push(`${T}:${_}`)}const g=await this.client.core.crypto.generateSharedKey(u,c);i.addTrace(fp.create_authenticated_session_topic);let h;if(f?.length>0){h={topic:g,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Ps(Og),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:L7([...new Set(f)],[...new Set(p)]),transportType:a},i.addTrace(fp.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(g,{transportType:a})}catch(y){throw i.setError(Fb.subscribe_authenticated_session_topic_failure),y}i.addTrace(fp.subscribe_authenticated_session_topic_success),await this.client.session.set(g,h),i.addTrace(fp.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(fp.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:n,result:{cacaos:s,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(Fb.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:h}}),Se(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:s}=r,i=this.getPendingAuthRequest(n);if(!i)throw new Error(`Could not find pending auth request with id ${n}`);i.transportType===qn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=wI(o),u={type:Yd,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:s,encodeOpts:u,rpcOpts:mi.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.deleteProposal(n)}),Se(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:s}=r;return dee(n,s)}),Se(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),Se(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&i.topic&&i.topic!==n.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),Se(this,"deleteSession",async r=>{var n;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Gn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(AD).catch(u=>this.client.logger.warn(u)),s===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=rl.idle),await Promise.all(this.getPendingSessionRequests().filter(u=>u.topic===s).map(u=>this.deletePendingSessionRequest(u.id,Gn("USER_DISCONNECTED")))),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),Se(this,"deleteProposal",async(r,n)=>{if(n)try{const s=this.client.proposal.get(r);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(dp.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,Gn("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),Se(this,"deletePendingSessionRequest",async(r,n,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==r),s&&(this.sessionRequestQueue.state=rl.idle,this.client.events.emit("session_request_expire",{id:r}))}),Se(this,"deletePendingAuthRequest",async(r,n,s=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)])}),Se(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),Se(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,Ps(mi.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),Se(this,"setAuthRequest",async(r,n)=>{const{request:s,pairingTopic:i,transportType:o=qn.relay}=n;this.client.core.expirer.set(r,s.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:r,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),Se(this,"setPendingSessionRequest",async r=>{const{id:n,topic:s,params:i,verifyContext:o}=r,a=i.request.expiryTimestamp||Ps(mi.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:s,params:i,verifyContext:o})}),Se(this,"sendRequest",async r=>{const{topic:n,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:l,tvf:d,publishOpts:f={}}=r,p=Ms(s,i,c);let g;const h=!!l;try{const S=h?lh:ha;g=await this.client.core.crypto.encode(n,p,{encoding:S})}catch(S){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),S}let y;if(y6e.includes(s)){const S=jc(JSON.stringify(p)),C=jc(g);y=await this.client.core.verify.register({id:C,decryptedId:S})}const E=Yr(Yr({},mi[s].req),f);if(E.attestation=y,o&&(E.ttl=o),a&&(E.id=a),this.client.core.history.set(n,p),h){const S=g2(l,n,g);await global.Linking.openURL(S,this.client.name)}else E.tvf=yi(Yr({},d),{correlationId:p.id}),u?(E.internal=yi(Yr({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,g,E)):this.client.core.relayer.publish(n,g,E).catch(S=>this.client.logger.error(S));return p.id}),Se(this,"sendProposeSession",async r=>{const{proposal:n,publishOpts:s}=r,i=Ms("wc_sessionPropose",n,n.id);this.client.core.history.set(n.pairingTopic,i);const o=await this.client.core.crypto.encode(n.pairingTopic,i,{encoding:ha}),a=jc(JSON.stringify(i)),c=jc(o),u=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:n.pairingTopic,sessionProposal:o},opts:yi(Yr({},s),{publishMethod:"wc_proposeSession",attestation:u})})}),Se(this,"sendApproveSession",async r=>{const{sessionTopic:n,pairingProposalResponse:s,proposal:i,sessionSettleRequest:o,publishOpts:a}=r,c=Ul(i.id,s),u=await this.client.core.crypto.encode(i.pairingTopic,c,{encoding:ha}),l=Ms("wc_sessionSettle",o,a?.id),d=await this.client.core.crypto.encode(n,l,{encoding:ha});this.client.core.history.set(n,l),await this.client.core.relayer.publishCustom({payload:{sessionTopic:n,pairingTopic:i.pairingTopic,sessionProposalResponse:u,sessionSettlementRequest:d},opts:yi(Yr({},a),{publishMethod:"wc_approveSession"})})}),Se(this,"sendResult",async r=>{const{id:n,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,u=Ul(n,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=d?lh:ha;l=await this.client.core.crypto.encode(s,u,yi(Yr({},a||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),g}let f,p;try{f=await this.client.core.history.get(s,n);const g=f.request;try{p=this.getTVFParams(n,g.params,i)}catch(h){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${h?.message}`)}}catch(g){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${n}) failed`),g}if(d){const g=g2(c,s,l);await global.Linking.openURL(g,this.client.name)}else{const g=f.request.method,h=mi[g].res;h.tvf=yi(Yr({},p),{correlationId:n}),o?(h.internal=yi(Yr({},h.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,l,h)):this.client.core.relayer.publish(s,l,h).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(u)}),Se(this,"sendError",async r=>{const{id:n,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=r,u=Yy(n,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?lh:ha;l=await this.client.core.crypto.encode(s,u,yi(Yr({},o||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),p}let f;try{f=await this.client.core.history.get(s,n)}catch(p){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),p}if(d){const p=g2(c,s,l);await global.Linking.openURL(p,this.client.name)}else{const p=f.request.method,g=a||mi[p].res;this.client.core.relayer.publish(s,l,g)}await this.client.core.history.resolve(u)}),Se(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(s=>{let i=!1;gl(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&r.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{gl(s.expiryTimestamp)&&n.push(s.id)}),await Promise.all([...r.map(s=>this.deleteSession({topic:s})),...n.map(s=>this.deleteProposal(s))])}),Se(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),Se(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),Se(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===rl.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=rl.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=rl.idle}),Se(this,"processRequest",async r=>{const{topic:n,payload:s,attestation:i,transportType:o,encryptedId:a}=r,c=s.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,s);case"wc_sessionPing":return await this.onSessionPingRequest(n,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),Se(this,"onRelayEventResponse",async r=>{const{topic:n,payload:s,transportType:i}=r,o=(await this.client.core.history.get(n,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,s);case"wc_sessionExtend":return this.onSessionExtendResponse(n,s);case"wc_sessionPing":return this.onSessionPingResponse(n,s);case"wc_sessionRequest":return this.onSessionRequestResponse(n,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Se(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:s}=Fe("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),Se(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:s}=r,i=this.expectedPairingMethodMap.get(n);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Se(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:s,attestation:i,encryptedId:o}=r,{params:a,id:c}=s;try{const u=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u?.setError(Nd.proposal_listener_not_found)),this.isValidConnect(Yr({},s.params));const l=a.expiryTimestamp||Ps(mi.wc_sessionPropose.req.ttl),d=Yr({id:c,pairingTopic:n,expiryTimestamp:l,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const f=await this.getVerifyContext({attestationId:i,hash:jc(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});u?.addTrace(dl.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:f})}catch(u){await this.sendError({id:c,topic:n,error:u,rpcOpts:mi.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),Se(this,"onSessionProposeResponse",async(r,n,s)=>{const{id:i}=n;if(Vs(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:r,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(l,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else if(gs(n)){await this.deleteProposal(i);const o=mn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),Se(this,"onSessionSettleRequest",async(r,n)=>{const{id:s,params:i}=n;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:f,proposalRequestsResponses:p}=n.params,g=[...this.pendingSessions.values()].find(E=>E.sessionTopic===r);if(!g)return this.client.logger.error(`Pending session not found for topic ${r}`);const h=this.client.proposal.get(g.proposalId),y=yi(Yr(Yr(Yr({topic:r,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:g.pairingTopic,requiredNamespaces:h.requiredNamespaces,optionalNamespaces:h.optionalNamespaces,controller:a.publicKey,self:{publicKey:g.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{transportType:qn.relay,authentication:p?.authentication,walletPayResult:p?.walletPay});await this.client.session.set(y.topic,y),await this.setExpiry(y.topic,y.expiry),await this.client.core.pairing.updateMetadata({topic:g.pairingTopic,metadata:y.peer.metadata}),this.pendingSessions.delete(g.proposalId),this.deleteProposal(g.proposalId,!1),this.cleanupDuplicatePairings(y),await this.sendResult({id:n.id,topic:r,throwOnFailedPublish:!0,result:!0}),this.client.events.emit("session_connect",{session:y}),this.events.emit(mn("session_connect",g.proposalId),{session:y})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),Se(this,"onSessionSettleResponse",async(r,n)=>{const{id:s}=n;Vs(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(mn("session_approve",s),{})):gs(n)&&(await this.client.session.delete(r,Gn("USER_DISCONNECTED")),this.events.emit(mn("session_approve",s),{error:n.error}))}),Se(this,"onSessionUpdateRequest",async(r,n)=>{const{params:s,id:i}=n;try{const o=`${r}_session_update`,a=jb.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:r,error:Gn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Yr({topic:r},s));try{jb.set(o,i),await this.client.session.update(r,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:r,result:!0})}catch(c){throw jb.delete(o),c}this.client.events.emit("session_update",{id:i,topic:r,params:s})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),Se(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),Se(this,"onSessionUpdateResponse",(r,n)=>{const{id:s}=n,i=mn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vs(n)?this.events.emit(mn("session_update",s),{}):gs(n)&&this.events.emit(mn("session_update",s),{error:n.error})}),Se(this,"onSessionExtendRequest",async(r,n)=>{const{id:s}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Ps(Og)),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_extend",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),Se(this,"onSessionExtendResponse",(r,n)=>{const{id:s}=n,i=mn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vs(n)?this.events.emit(mn("session_extend",s),{}):gs(n)&&this.events.emit(mn("session_extend",s),{error:n.error})}),Se(this,"onSessionPingRequest",async(r,n)=>{const{id:s}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),Se(this,"onSessionPingResponse",(r,n)=>{const{id:s}=n,i=mn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Vs(n)?this.events.emit(mn("session_ping",s),{}):gs(n)&&this.events.emit(mn("session_ping",s),{error:n.error})},500)}),Se(this,"onSessionDeleteRequest",async(r,n)=>{const{id:s}=n;try{await this.isValidDisconnect({topic:r,reason:n.params}),this.cleanupPendingSentRequestsForTopic({topic:r,error:Gn("USER_DISCONNECTED")}),await this.deleteSession({topic:r,id:s})}catch(i){this.client.logger.error(i)}}),Se(this,"onSessionRequest",async r=>{var n,s,i;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:l}=r,{id:d,params:f}=a;try{await this.isValidRequest(Yr({topic:o},f));const p=this.client.session.get(o),g=await this.getVerifyContext({attestationId:c,hash:jc(JSON.stringify(Ms("wc_sessionRequest",f,d))),encryptedId:u,metadata:p.peer.metadata,transportType:l}),h={id:d,topic:o,params:f,verifyContext:g};await this.setPendingSessionRequest(h),l===qn.link_mode&&(n=p.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((s=p.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(h):(this.addSessionRequestToSessionRequestQueue(h),this.processSessionRequestQueue())}catch(p){await this.sendError({id:d,topic:o,error:p}),this.client.logger.error(p)}}),Se(this,"onSessionRequestResponse",(r,n)=>{const{id:s}=n,i=mn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vs(n)?this.events.emit(mn("session_request",s),{result:n.result}):gs(n)&&this.events.emit(mn("session_request",s),{error:n.error})}),Se(this,"onSessionEventRequest",async(r,n)=>{const{id:s,params:i}=n;try{const o=`${r}_session_event_${i.event.name}`,a=jb.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Yr({topic:r},i)),this.client.events.emit("session_event",{id:s,topic:r,params:i}),jb.set(o,s)}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),Se(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:s}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Vs(n)?this.events.emit(mn("session_request",s),{result:n.result}):gs(n)&&this.events.emit(mn("session_request",s),{error:n.error})}),Se(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:u,authPayload:l,expiryTimestamp:d}=i.params,f=await this.getVerifyContext({attestationId:o,hash:jc(JSON.stringify(i)),encryptedId:a,metadata:u.metadata,transportType:c}),p={requester:u,pairingTopic:s,id:i.id,authPayload:l,verifyContext:f,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:p,pairingTopic:s,transportType:c}),c===qn.link_mode&&(n=u.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:f})}catch(u){this.client.logger.error(u);const l=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(i.params.requester.metadata,c),p={type:Yd,receiverPublicKey:l,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:u,encodeOpts:p,rpcOpts:mi.wc_sessionAuthenticate.autoReject,appLink:f})}}),Se(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),Se(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=rl.idle,this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay))}),Se(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===r&&i.request.method==="wc_sessionRequest").forEach(i=>{this.events.emit(mn("session_request",i.request.id),{error:n})})}),Se(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===rl.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),Se(this,"emitSessionRequest",r=>{if(this.emittedSessionRequests.has(r.id)){this.client.logger.warn({id:r.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${r.id}`);return}this.sessionRequestQueue.state=rl.active,this.emittedSessionRequests.add(r.id),this.client.events.emit("session_request",r)}),Se(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(s=>s.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:Ms("wc_sessionPropose",yi(Yr({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id),attestation:n.attestation,encryptedId:n.encryptedId})}),Se(this,"isValidConnect",async r=>{if(!sa(r)){const{message:u}=Fe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=r;if(si(n)||await this.isValidPairingTopic(n),!BAe(c)){const{message:u}=Fe("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(s&&!si(s)&&Pl(s)!==0){const u="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(u):this.client.logger.warn(u),this.validateNamespaces(s,"requiredNamespaces")}if(i&&!si(i)&&Pl(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),o&&!si(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!si(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(l=>u.includes(l.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),Se(this,"validateNamespaces",(r,n)=>{const s=kAe(r,"connect()",n);if(s)throw new Error(s.message)}),Se(this,"isValidApprove",async r=>{if(!sa(r))throw new Error(Fe("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),u=SN(s,"approve()");if(u)throw new Error(u.message);const l=q7(c.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!Bs(i,!0)){const{message:d}=Fe("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(o&&!si(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!si(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(f=>d.has(f.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),Se(this,"isValidReject",async r=>{if(!sa(r)){const{message:i}=Fe("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(i)}const{id:n,reason:s}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!MAe(s)){const{message:i}=Fe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),Se(this,"isValidSessionSettleRequest",r=>{if(!sa(r)){const{message:u}=Fe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:s,namespaces:i,expiry:o}=r;if(!Zee(n)){const{message:u}=Fe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=IAe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=SN(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(gl(o)){const{message:u}=Fe("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),Se(this,"isValidUpdate",async r=>{if(!sa(r)){const{message:c}=Fe("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:s}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const i=this.client.session.get(n),o=SN(s,"update()");if(o)throw new Error(o.message);const a=q7(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),Se(this,"isValidExtend",async r=>{if(!sa(r)){const{message:s}=Fe("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(s)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),Se(this,"isValidRequest",async r=>{if(!sa(r)){const{message:c}=Fe("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:s,chainId:i,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!$7(a,i)){const{message:c}=Fe("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!DAe(s)){const{message:c}=Fe("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!FAe(a,i,s.method)){const{message:c}=Fe("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}this.validateRequestExpiry(o)}),Se(this,"isValidRespond",async r=>{var n;if(!sa(r)){const{message:a}=Fe("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(a)}const{topic:s,response:i}=r;try{await this.isValidSessionTopic(s)}catch(a){throw(n=r?.response)!=null&&n.id&&this.cleanupAfterResponse(r),a}if(!jAe(i)){const{message:a}=Fe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(a)}const o=this.client.pendingRequest.get(i.id);if(o.topic!==s){const{message:a}=Fe("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${i.id}, expected topic: ${o.topic}, received topic: ${s}`);throw new Error(a)}}),Se(this,"isValidPing",async r=>{if(!sa(r)){const{message:s}=Fe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),Se(this,"isValidEmit",async r=>{if(!sa(r)){const{message:a}=Fe("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:s,chainId:i}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!$7(o,i)){const{message:a}=Fe("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!LAe(s)){const{message:a}=Fe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!$Ae(o,i,s.name)){const{message:a}=Fe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),Se(this,"isValidDisconnect",async r=>{if(!sa(r)){const{message:s}=Fe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),Se(this,"isValidAuthenticate",r=>{const{chains:n,uri:s,domain:i,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!Bs(s,!1))throw new Error("uri is required parameter");if(!Bs(i,!1))throw new Error("domain is required parameter");if(!Bs(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>Zd(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Zd(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Se(this,"getVerifyContext",async r=>{const{attestationId:n,hash:s,encryptedId:i,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||k1,validation:"UNKNOWN",origin:o.url||""}};try{if(a===qn.link_mode){const l=this.getAppLinkIfEnabled(o,a);return c.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:n,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),Se(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((s,i)=>{if(s==null){const{message:o}=Fe("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${s} for key ${Object.keys(r)[i]}`);throw new Error(o)}})}),Se(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),Se(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),Se(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:s}=Fe("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(s)}}),Se(this,"isLinkModeEnabled",(r,n)=>{var s,i,o,a,c,u,l,d,f;return!r||n!==qn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==""&&((l=r?.redirect)==null?void 0:l.universal)!==void 0&&((d=r?.redirect)==null?void 0:d.universal)!==""&&((f=r?.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Se(this,"getAppLinkIfEnabled",(r,n)=>{var s;return this.isLinkModeEnabled(r,n)?(s=r?.redirect)==null?void 0:s.universal:void 0}),Se(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=QM(r,"topic")||"",s=decodeURIComponent(QM(r,"wc_ev")||""),i=this.client.session.keys.includes(n);i&&this.client.session.update(n,{transportType:qn.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:s,sessionExists:i})}),Se(this,"registerLinkModeListeners",async()=>{var r;if(ck()||Fh()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await n.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),Se(this,"getTVFApproveParams",r=>{try{const n=Gee(r.namespaces),s=pAe(r.namespaces),i=gAe(r.namespaces),o=r.sessionProperties,a=r.scopedProperties;return{approvedChains:n,approvedMethods:s,approvedEvents:i,sessionProperties:o,scopedProperties:a}}catch(n){return this.client.logger.warn(n,"Error getting TVF approve params"),{}}}),Se(this,"getTVFParams",(r,n,s)=>{var i,o,a;if(!((i=n.request)!=null&&i.method))return{};const c={correlationId:r,rpcMethods:[n.request.method],chainId:n.chainId};try{const u=this.extractTxHashesFromResult(n.request,s);c.txHashes=u,c.contractAddresses=this.isValidContractData(n.request.params)?[(a=(o=n.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(u){this.client.logger.warn(u,"Error getting TVF params")}return c}),Se(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const s=r?.data||((n=r?.[0])==null?void 0:n.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),Se(this,"extractTxHashesFromResult",(r,n)=>{var s;try{if(!n)return[];const i=r.method,o=g6e[i];if(i==="sui_signTransaction")return[n_e(n.transactionBytes)];if(i==="near_signTransaction")return[a7(n)];if(i==="near_signTransactions")return n.map(c=>a7(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=n.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[ixe({transaction:r.params.transactionPayload,signature:n.signature})];if(i==="algo_signTxn")return Jd(n)?n.map(c=>c7(c)):[c7(n)];if(i==="cosmos_signDirect")return[i_e(n)];if(i==="wallet_sendCalls")return o_e(n);if(typeof n=="string")return[n];const a=n[o.key];if(Jd(a))return i==="solana_signAllTransactions"?a.map(c=>r_e(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn(i,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,s]of Object.entries(r))for(const i of s)try{await this.onProviderMessageEvent({topic:n,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${i}`)}}catch(e){this.client.logger.warn(e,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Os.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(EI)?this.client.auth.authKeys.get(EI):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:i===qn.link_mode?lh:ha});Jy(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:s,transportType:i,encryptedId:jc(n)})):J0(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:i}),this.client.core.history.delete(r,a.id)):(this.client.logger.error(`onRelayMessage() -> unknown payload: ${JSON.stringify(a)}`),await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:i})),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(`onRelayMessage() -> failed to process an inbound message: ${n}`),this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Uc.expired,async e=>{const{topic:r,id:n}=KQ(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Fe("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,Fe("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Vp.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Vp.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Bs(e,!1)){const{message:r}=Fe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=Fe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(gl(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=Fe("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Bs(e,!1)){const{message:r}=Fe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=Fe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(gl(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=Fe("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=Fe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Bs(e,!1)){const{message:r}=Fe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=Fe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!UAe(e)){const{message:r}=Fe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=Fe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(gl(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=Fe("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}validateRequestExpiry(e){if(e&&!zAe(e,kN)){const{message:r}=Fe("MISSING_OR_INVALID",`request() expiry: ${e}. Expiry must be a number (in seconds) between ${kN.min} and ${kN.max}`);throw new Error(r)}}},N6e=class extends X0{constructor(e,r){super(e,r,f6e,Ek),this.core=e,this.logger=r}},P6e=class extends X0{constructor(e,r){super(e,r,h6e,Ek),this.core=e,this.logger=r}},R6e=class extends X0{constructor(e,r){super(e,r,m6e,Ek,n=>n.id),this.core=e,this.logger=r}},O6e=class extends X0{constructor(e,r){super(e,r,v6e,JT,()=>EI),this.core=e,this.logger=r}},k6e=class extends X0{constructor(e,r){super(e,r,E6e,JT),this.core=e,this.logger=r}},B6e=class extends X0{constructor(e,r){super(e,r,_6e,JT,n=>n.id),this.core=e,this.logger=r}};var U6e=Object.defineProperty,M6e=(t,e,r)=>e in t?U6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,BN=(t,e,r)=>M6e(t,typeof e!="symbol"?e+"":e,r);let D6e=class{constructor(e,r){this.core=e,this.logger=r,BN(this,"authKeys"),BN(this,"pairingTopics"),BN(this,"requests"),this.authKeys=new O6e(this.core,this.logger),this.pairingTopics=new k6e(this.core,this.logger),this.requests=new B6e(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}};var j6e=Object.defineProperty,L6e=(t,e,r)=>e in t?j6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hr=(t,e,r)=>L6e(t,typeof e!="symbol"?e+"":e,r);let F6e=class _te extends Vpe{constructor(e){super(e),hr(this,"protocol",wte),hr(this,"version",vte),hr(this,"name",ON.name),hr(this,"metadata"),hr(this,"core"),hr(this,"logger"),hr(this,"events",new Ys.EventEmitter),hr(this,"engine"),hr(this,"session"),hr(this,"proposal"),hr(this,"pendingRequest"),hr(this,"auth"),hr(this,"signConfig"),hr(this,"on",(n,s)=>this.events.on(n,s)),hr(this,"once",(n,s)=>this.events.once(n,s)),hr(this,"off",(n,s)=>this.events.off(n,s)),hr(this,"removeListener",(n,s)=>this.events.removeListener(n,s)),hr(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),hr(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"update",async n=>{try{return await this.engine.update(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"request",async n=>{try{return await this.engine.request(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"find",n=>{try{return this.engine.find(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),hr(this,"authenticate",async(n,s)=>{try{return await this.engine.authenticate(n,s)}catch(i){throw this.logger.error(i.message),i}}),hr(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),this.name=e?.name||ON.name,this.metadata=Zve(e?.metadata),this.signConfig=e?.signConfig;const r=wk({logger:e?.logger||ON.logger,name:this.name});this.logger=r,this.core=e?.core||new d6e(e),this.session=new P6e(this.core,this.logger),this.proposal=new N6e(this.core,this.logger),this.pendingRequest=new R6e(this.core,this.logger),this.engine=new T6e(this),this.auth=new D6e(this.core,this.logger)}static async init(e){const r=new _te(e);return await r.initialize(),r}get context(){return Ca(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const $6e=F6e;var m2={exports:{}},SD;function q6e(){return SD||(SD=1,(function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Au<"u"&&Au,n=(function(){function i(){this.fetch=!1,this.DOMException=r.DOMException}return i.prototype=r,new i})();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Au<"u"&&Au||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(b){return b&&DataView.prototype.isPrototypeOf(b)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(b){return b&&l.indexOf(Object.prototype.toString.call(b))>-1};function f(b){if(typeof b!="string"&&(b=String(b)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(b)||b==="")throw new TypeError('Invalid character in header field name: "'+b+'"');return b.toLowerCase()}function p(b){return typeof b!="string"&&(b=String(b)),b}function g(b){var w={next:function(){var x=b.shift();return{done:x===void 0,value:x}}};return c.iterable&&(w[Symbol.iterator]=function(){return w}),w}function h(b){this.map={},b instanceof h?b.forEach(function(w,x){this.append(x,w)},this):Array.isArray(b)?b.forEach(function(w){if(w.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+w.length);this.append(w[0],w[1])},this):b&&Object.getOwnPropertyNames(b).forEach(function(w){this.append(w,b[w])},this)}h.prototype.append=function(b,w){b=f(b),w=p(w);var x=this.map[b];this.map[b]=x?x+", "+w:w},h.prototype.delete=function(b){delete this.map[f(b)]},h.prototype.get=function(b){return b=f(b),this.has(b)?this.map[b]:null},h.prototype.has=function(b){return this.map.hasOwnProperty(f(b))},h.prototype.set=function(b,w){this.map[f(b)]=p(w)},h.prototype.forEach=function(b,w){for(var x in this.map)this.map.hasOwnProperty(x)&&b.call(w,this.map[x],x,this)},h.prototype.keys=function(){var b=[];return this.forEach(function(w,x){b.push(x)}),g(b)},h.prototype.values=function(){var b=[];return this.forEach(function(w){b.push(w)}),g(b)},h.prototype.entries=function(){var b=[];return this.forEach(function(w,x){b.push([x,w])}),g(b)},c.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);function y(b){if(!b._noBody){if(b.bodyUsed)return Promise.reject(new TypeError("Already read"));b.bodyUsed=!0}}function E(b){return new Promise(function(w,x){b.onload=function(){w(b.result)},b.onerror=function(){x(b.error)}})}function S(b){var w=new FileReader,x=E(w);return w.readAsArrayBuffer(b),x}function C(b){var w=new FileReader,x=E(w),M=/charset=([A-Za-z0-9_-]+)/.exec(b.type),k=M?M[1]:"utf-8";return w.readAsText(b,k),x}function _(b){for(var w=new Uint8Array(b),x=new Array(w.length),M=0;M<w.length;M++)x[M]=String.fromCharCode(w[M]);return x.join("")}function T(b){if(b.slice)return b.slice(0);var w=new Uint8Array(b.byteLength);return w.set(new Uint8Array(b)),w.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(b){this.bodyUsed=this.bodyUsed,this._bodyInit=b,b?typeof b=="string"?this._bodyText=b:c.blob&&Blob.prototype.isPrototypeOf(b)?this._bodyBlob=b:c.formData&&FormData.prototype.isPrototypeOf(b)?this._bodyFormData=b:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)?this._bodyText=b.toString():c.arrayBuffer&&c.blob&&u(b)?(this._bodyArrayBuffer=T(b.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(b)||d(b))?this._bodyArrayBuffer=T(b):this._bodyText=b=Object.prototype.toString.call(b):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof b=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var b=y(this);if(b)return b;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var b=y(this);return b||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(S);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var b=y(this);if(b)return b;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(U)}),this.json=function(){return this.text().then(JSON.parse)},this}var D=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function L(b){var w=b.toUpperCase();return D.indexOf(w)>-1?w:b}function I(b,w){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');w=w||{};var x=w.body;if(b instanceof I){if(b.bodyUsed)throw new TypeError("Already read");this.url=b.url,this.credentials=b.credentials,w.headers||(this.headers=new h(b.headers)),this.method=b.method,this.mode=b.mode,this.signal=b.signal,!x&&b._bodyInit!=null&&(x=b._bodyInit,b.bodyUsed=!0)}else this.url=String(b);if(this.credentials=w.credentials||this.credentials||"same-origin",(w.headers||!this.headers)&&(this.headers=new h(w.headers)),this.method=L(w.method||this.method||"GET"),this.mode=w.mode||this.mode||null,this.signal=w.signal||this.signal||(function(){if("AbortController"in a){var j=new AbortController;return j.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&x)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(x),(this.method==="GET"||this.method==="HEAD")&&(w.cache==="no-store"||w.cache==="no-cache")){var M=/([?&])_=[^&]*/;if(M.test(this.url))this.url=this.url.replace(M,"$1_="+new Date().getTime());else{var k=/\?/;this.url+=(k.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})};function U(b){var w=new FormData;return b.trim().split("&").forEach(function(x){if(x){var M=x.split("="),k=M.shift().replace(/\+/g," "),j=M.join("=").replace(/\+/g," ");w.append(decodeURIComponent(k),decodeURIComponent(j))}}),w}function F(b){var w=new h,x=b.replace(/\r?\n[\t ]+/g," ");return x.split("\r").map(function(M){return M.indexOf(`
`)===0?M.substr(1,M.length):M}).forEach(function(M){var k=M.split(":"),j=k.shift().trim();if(j){var N=k.join(":").trim();try{w.append(j,N)}catch(v){console.warn("Response "+v.message)}}}),w}P.call(I.prototype);function B(b,w){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(w||(w={}),this.type="default",this.status=w.status===void 0?200:w.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=w.statusText===void 0?"":""+w.statusText,this.headers=new h(w.headers),this.url=w.url||"",this._initBody(b)}P.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},B.error=function(){var b=new B(null,{status:200,statusText:""});return b.ok=!1,b.status=0,b.type="error",b};var A=[301,302,303,307,308];B.redirect=function(b,w){if(A.indexOf(w)===-1)throw new RangeError("Invalid status code");return new B(null,{status:w,headers:{location:b}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(w,x){this.message=w,this.name=x;var M=Error(w);this.stack=M.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function m(b,w){return new Promise(function(x,M){var k=new I(b,w);if(k.signal&&k.signal.aborted)return M(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function N(){j.abort()}j.onload=function(){var $={statusText:j.statusText,headers:F(j.getAllResponseHeaders()||"")};k.url.indexOf("file://")===0&&(j.status<200||j.status>599)?$.status=200:$.status=j.status,$.url="responseURL"in j?j.responseURL:$.headers.get("X-Request-URL");var O="response"in j?j.response:j.responseText;setTimeout(function(){x(new B(O,$))},0)},j.onerror=function(){setTimeout(function(){M(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){M(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){M(new o.DOMException("Aborted","AbortError"))},0)};function v($){try{return $===""&&a.location.href?a.location.href:$}catch{return $}}if(j.open(k.method,v(k.url),!0),k.credentials==="include"?j.withCredentials=!0:k.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),w&&typeof w.headers=="object"&&!(w.headers instanceof h||a.Headers&&w.headers instanceof a.Headers)){var R=[];Object.getOwnPropertyNames(w.headers).forEach(function($){R.push(f($)),j.setRequestHeader($,p(w.headers[$]))}),k.headers.forEach(function($,O){R.indexOf(O)===-1&&j.setRequestHeader(O,$)})}else k.headers.forEach(function($,O){j.setRequestHeader(O,$)});k.signal&&(k.signal.addEventListener("abort",N),j.onreadystatechange=function(){j.readyState===4&&k.signal.removeEventListener("abort",N)}),j.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return m.polyfill=!0,a.fetch||(a.fetch=m,a.Headers=h,a.Request=I,a.Response=B),o.Headers=h,o.Request=I,o.Response=B,o.fetch=m,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=r.fetch?r:n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(m2,m2.exports)),m2.exports}var H6e=q6e();const ID=xa(H6e);var z6e=Object.defineProperty,W6e=Object.defineProperties,V6e=Object.getOwnPropertyDescriptors,TD=Object.getOwnPropertySymbols,G6e=Object.prototype.hasOwnProperty,K6e=Object.prototype.propertyIsEnumerable,ND=(t,e,r)=>e in t?z6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,PD=(t,e)=>{for(var r in e||(e={}))G6e.call(e,r)&&ND(t,r,e[r]);if(TD)for(var r of TD(e))K6e.call(e,r)&&ND(t,r,e[r]);return t},RD=(t,e)=>W6e(t,V6e(e));const Z6e={Accept:"application/json","Content-Type":"application/json"},Y6e="POST",OD={headers:Z6e,method:Y6e},kD=10;let fc=class{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Ys.EventEmitter,this.isAvailable=!1,this.registering=!1,!Z7(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=Hc(e),n=await(await ID(this.url,RD(PD({},OD),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!Z7(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=Hc({id:1,jsonrpc:"2.0",method:"test",params:[]});await ID(e,RD(PD({},OD),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?rf(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=Yy(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return Xee(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>kD&&this.events.setMaxListeners(kD)}};function _k(t){return t==null||typeof t!="object"&&typeof t!="function"}function Ate(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function xte(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const J6e="[object RegExp]",Cte="[object String]",Ste="[object Number]",Ite="[object Boolean]",Tte="[object Arguments]",X6e="[object Symbol]",Q6e="[object Date]",eTe="[object Map]",tTe="[object Set]",rTe="[object Array]",nTe="[object ArrayBuffer]",sTe="[object Object]",iTe="[object DataView]",oTe="[object Uint8Array]",aTe="[object Uint8ClampedArray]",cTe="[object Uint16Array]",uTe="[object Uint32Array]",lTe="[object Int8Array]",dTe="[object Int16Array]",fTe="[object Int32Array]",hTe="[object Float32Array]",pTe="[object Float64Array]";function Ak(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gTe(t,e){return $m(t,void 0,t,new Map,e)}function $m(t,e,r,n=new Map,s=void 0){const i=s?.(t,e,r,n);if(i!=null)return i;if(_k(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=$m(t[a],a,r,n,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,$m(c,a,r,n,s));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add($m(a,void 0,r,n,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(Ak(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=$m(t[a],a,r,n,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),Gp(o,t,r,n,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),Gp(o,t,r,n,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),Gp(o,t,r,n,s),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Gp(o,t,r,n,s),o}if(typeof t=="object"&&mTe(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),Gp(o,t,r,n,s),o}return t}function Gp(t,e,r=t,n,s){const i=[...Object.keys(e),...Ate(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=$m(e[a],a,r,n,s))}}function mTe(t){switch(xte(t)){case Tte:case rTe:case nTe:case iTe:case Ite:case Q6e:case hTe:case pTe:case lTe:case dTe:case fTe:case eTe:case Ste:case sTe:case J6e:case tTe:case Cte:case X6e:case oTe:case aTe:case cTe:case uTe:return!0;default:return!1}}function yTe(t,e){return gTe(t,(r,n,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case Ste:case Cte:case Ite:{const o=new t.constructor(t?.valueOf());return Gp(o,t),o}case Tte:{const o={};return Gp(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function BD(t){return yTe(t)}function UD(t){return t!==null&&typeof t=="object"&&xte(t)==="[object Arguments]"}function MD(t){return typeof t=="object"&&t!==null}function bTe(){}function wTe(t){return Ak(t)}function vTe(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function ETe(t){if(_k(t))return t;if(Array.isArray(t)||Ak(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function _Te(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let s=t;for(let i=0;i<r.length;i++){const o=r[i];s=fO(s,o,n,new Map)}return s}function fO(t,e,r,n){if(_k(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return ETe(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...Ate(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(UD(a)&&(a={...a}),UD(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=BD(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const l=[],d=Reflect.ownKeys(c);for(let f=0;f<d.length;f++){const p=d[f];l[p]=c[p]}c=l}else c=[];const u=r(c,a,o,t,e,n);u!=null?t[o]=u:Array.isArray(a)||MD(c)&&MD(a)?t[o]=fO(c,a,r,n):c==null&&vTe(a)?t[o]=fO({},a,r,n):c==null&&wTe(a)?t[o]=BD(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function ATe(t,...e){return _Te(t,...e,bTe)}const DD="error",xTe="wss://relay.walletconnect.org",CTe="wc",Nte="universal_provider",y2=`${CTe}@2:${Nte}:`,Pte="https://rpc.walletconnect.org/v1/",Rte="generic",STe=`${Pte}bundler`,ty="call_status",ITe=86400,xk={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var TTe=Object.defineProperty,NTe=Object.defineProperties,PTe=Object.getOwnPropertyDescriptors,jD=Object.getOwnPropertySymbols,RTe=Object.prototype.hasOwnProperty,OTe=Object.prototype.propertyIsEnumerable,LD=(t,e,r)=>e in t?TTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,b2=(t,e)=>{for(var r in e||(e={}))RTe.call(e,r)&&LD(t,r,e[r]);if(jD)for(var r of jD(e))OTe.call(e,r)&&LD(t,r,e[r]);return t},kTe=(t,e)=>NTe(t,PTe(e));function Ote(t,e,r){var n;const s=Zd(t);return((n=e.rpcMap)==null?void 0:n[s.reference])||`${Pte}?chainId=${s.namespace}:${s.reference}&projectId=${r}`}function BTe(t){return t.includes(":")?t.split(":")[1]:t}function kte(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function UTe(t,e){const r=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!r.length)return[];const n=[];return r.forEach(s=>{const i=e.namespaces[s].accounts;n.push(...i)}),n}function FD(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>{var n,s;return((n=r?.chains)==null?void 0:n.length)&&((s=r?.chains)==null?void 0:s.length)>0}))}function w2(t={},e={}){const r=FD($D(t)),n=FD($D(e));return ATe(r,n)}function $D(t){var e,r,n,s,i;const o={};if(!Pl(t))return o;for(const[a,c]of Object.entries(t)){const u=ZT(a)?[a]:c.chains,l=c.methods||[],d=c.events||[],f=c.rpcMap||{},p=Fm(a);o[p]=kTe(b2(b2({},o[p]),c),{chains:Nl(u,(e=o[p])==null?void 0:e.chains),methods:Nl(l,(r=o[p])==null?void 0:r.methods),events:Nl(d,(n=o[p])==null?void 0:n.events)}),(Pl(f)||Pl(((s=o[p])==null?void 0:s.rpcMap)||{}))&&(o[p].rpcMap=b2(b2({},f),(i=o[p])==null?void 0:i.rpcMap))}return o}function qD(t){return t.includes(":")?t.split(":")[2]:t}function HD(t){const e={};for(const[r,n]of Object.entries(t)){const s=n.methods||[],i=n.events||[],o=n.accounts||[],a=ZT(r)?[r]:n.chains?n.chains:kte(n.accounts);e[r]={chains:a,methods:s,events:i,accounts:o}}return e}function UN(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}function MTe(t){try{const e=JSON.parse(t);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}const Bte={},ry=t=>Bte[t],MN=(t,e)=>{Bte[t]=e};var DTe=Object.defineProperty,zD=Object.getOwnPropertySymbols,jTe=Object.prototype.hasOwnProperty,LTe=Object.prototype.propertyIsEnumerable,WD=(t,e,r)=>e in t?DTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,VD=(t,e)=>{for(var r in e||(e={}))jTe.call(e,r)&&WD(t,r,e[r]);if(zD)for(var r of zD(e))LTe.call(e,r)&&WD(t,r,e[r]);return t};const GD="eip155",FTe=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],$Te=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,DN=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,KD=t=>Object.keys(t).filter(e=>FTe.includes(e)).reduce((e,r)=>(e[r]=qTe(t[r]),e),{}),qTe=t=>typeof t=="string"&&MTe(t)?JSON.parse(t):t,HTe=(t,e,r)=>{const{sessionProperties:n={},scopedProperties:s={}}=t,i={};if(!Pl(s)&&!Pl(n))return;const o=KD(n);for(const a of r){const c=$Te(a);if(!c)continue;i[DN(c)]=o;const u=s?.[`${GD}:${c}`];if(u){const l=u?.[`${GD}:${c}:${e}`];i[DN(c)]=VD(VD({},i[DN(c)]),KD(l||u))}}for(const[a,c]of Object.entries(i))Object.keys(c).length===0&&delete i[a];return Object.keys(i).length>0?i:void 0};var zTe=Object.defineProperty,WTe=(t,e,r)=>e in t?zTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,VTe=(t,e,r)=>WTe(t,e+"",r);let jN,GTe=class Ute{constructor(e){VTe(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,r){return await this.storage.setItem(e,r)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return jN||(jN=new Ute(e)),jN}};var KTe=Object.defineProperty,ZTe=Object.defineProperties,YTe=Object.getOwnPropertyDescriptors,ZD=Object.getOwnPropertySymbols,JTe=Object.prototype.hasOwnProperty,XTe=Object.prototype.propertyIsEnumerable,YD=(t,e,r)=>e in t?KTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,QTe=(t,e)=>{for(var r in e||(e={}))JTe.call(e,r)&&YD(t,r,e[r]);if(ZD)for(var r of ZD(e))XTe.call(e,r)&&YD(t,r,e[r]);return t},e5e=(t,e)=>ZTe(t,YTe(e));async function t5e(t,e){const r=Zd(t.result.capabilities.caip345.caip2),n=t.result.capabilities.caip345.transactionHashes,s=await Promise.allSettled(n.map(d=>r5e(r.reference,d,e))),i=s.filter(d=>d.status==="fulfilled").map(d=>d.value).filter(d=>d);s.filter(d=>d.status==="rejected").forEach(d=>console.warn("Failed to fetch transaction receipt:",d.reason));const o=!i.length||i.some(d=>!d),a=i.every(d=>d?.status==="0x1"),c=i.every(d=>d?.status==="0x0"),u=i.some(d=>d?.status==="0x0");let l;return o?l=100:a?l=200:c?l=500:u&&(l=600),{id:t.result.id,version:t.request.version,atomic:t.request.atomicRequired,chainId:t.request.chainId,capabilities:t.result.capabilities,receipts:i,status:l}}async function r5e(t,e,r){return await r(parseInt(t)).request(Ms("eth_getTransactionReceipt",[e]))}async function n5e({sendCalls:t,storage:e}){const r=await e.getItem(ty);await e.setItem(ty,e5e(QTe({},r),{[t.result.id]:{request:t.request,result:t.result,expiry:Ps(ITe)}}))}async function s5e({resultId:t,storage:e}){const r=await e.getItem(ty);if(r){delete r[t],await e.setItem(ty,r);for(const n in r)gl(r[n].expiry)&&delete r[n];await e.setItem(ty,r)}}async function i5e({resultId:t,storage:e}){const r=await e.getItem(ty),n=r?.[t];if(n&&!gl(n.expiry))return n;await s5e({resultId:t,storage:e})}var o5e=Object.defineProperty,a5e=Object.defineProperties,c5e=Object.getOwnPropertyDescriptors,JD=Object.getOwnPropertySymbols,u5e=Object.prototype.hasOwnProperty,l5e=Object.prototype.propertyIsEnumerable,hO=(t,e,r)=>e in t?o5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,LN=(t,e)=>{for(var r in e||(e={}))u5e.call(e,r)&&hO(t,r,e[r]);if(JD)for(var r of JD(e))l5e.call(e,r)&&hO(t,r,e[r]);return t},FN=(t,e)=>a5e(t,c5e(e)),hp=(t,e,r)=>hO(t,typeof e!="symbol"?e+"":e,r);let d5e=class{constructor(e){hp(this,"name","eip155"),hp(this,"client"),hp(this,"chainId"),hp(this,"namespace"),hp(this,"httpProviders"),hp(this,"events"),hp(this,"storage"),this.namespace=e.namespace,this.events=ry("events"),this.client=ry("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=GTe.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r);const n=this.chainId;this.chainId=parseInt(e),this.events.emit(xk.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${n}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Ote(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qo(new fc(n,ry("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=parseInt(BTe(r));e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(e){const r=e||this.chainId;return this.httpProviders[r]||(this.httpProviders=FN(LN({},this.httpProviders),{[r]:this.createHttpProvider(r)}),this.httpProviders[r])}async handleSwitchChain(e){var r,n;let s=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,s,i,o;const a=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),l=((o=u?.sessionProperties)==null?void 0:o.capabilities)||{},d=`${a}${c.join(",")}`,f=l?.[d];if(f)return f;let p;try{p=HTe(u,a,c)}catch(h){console.warn("Failed to extract capabilities from session",h)}if(p)return p;const g=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:FN(LN({},u.sessionProperties||{}),{capabilities:FN(LN({},l||{}),{[d]:g})})})}catch(h){console.warn("Failed to update session with capabilities",h)}return g}async getCallStatus(e){var r,n,s;const i=this.client.session.get(e.topic),o=(r=i.sessionProperties)==null?void 0:r.bundler_name;if(o){const u=this.getBundlerUrl(e.chainId,o);try{return await this.getUserOperationReceipt(u,e)}catch(l){console.warn("Failed to fetch call status from bundler",l,u)}}const a=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,e)}catch(u){console.warn("Failed to fetch call status from custom bundler",u,a)}const c=await i5e({resultId:(s=e.request.params)==null?void 0:s[0],storage:this.storage});if(c)try{return await t5e(c,this.getHttpProvider.bind(this))}catch(u){console.warn("Failed to fetch call status from stored send calls",u,c)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ms("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,r){return`${STe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}async sendCalls(e){var r,n,s;const i=await this.client.request(e),o=(r=e.request.params)==null?void 0:r[0],a=i?.id,c=i?.capabilities||{},u=(n=c?.caip345)==null?void 0:n.caip2,l=(s=c?.caip345)==null?void 0:s.transactionHashes;return!a||!u||!(l!=null&&l.length)||await n5e({sendCalls:{request:o,result:i},storage:this.storage}),i}};var f5e=Object.defineProperty,h5e=(t,e,r)=>e in t?f5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kg=(t,e,r)=>h5e(t,typeof e!="symbol"?e+"":e,r);let p5e=class{constructor(e){kg(this,"name",Rte),kg(this,"client"),kg(this,"httpProviders"),kg(this,"events"),kg(this,"namespace"),kg(this,"chainId"),this.namespace=e.namespace,this.events=ry("events"),this.client=ry("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r);const n=this.chainId;this.chainId=e,this.events.emit(xk.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${n}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return Zd(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(s=>{var i,o;const a=Zd(s),c=(o=(i=this.namespace)==null?void 0:i.rpcMap)==null?void 0:o[`${a.namespace}:${a.reference}`];n[a.reference]=this.createHttpProvider(s,c)}),n}getHttpProvider(e){const r=Zd(e).reference,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ote(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qo(new fc(n,ry("disableProviderPing")))}};var g5e=Object.defineProperty,m5e=Object.defineProperties,y5e=Object.getOwnPropertyDescriptors,XD=Object.getOwnPropertySymbols,b5e=Object.prototype.hasOwnProperty,w5e=Object.prototype.propertyIsEnumerable,pO=(t,e,r)=>e in t?g5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Hb=(t,e)=>{for(var r in e||(e={}))b5e.call(e,r)&&pO(t,r,e[r]);if(XD)for(var r of XD(e))w5e.call(e,r)&&pO(t,r,e[r]);return t},v2=(t,e)=>m5e(t,y5e(e)),Da=(t,e,r)=>pO(t,typeof e!="symbol"?e+"":e,r);let v5e=class Mte{constructor(e){Da(this,"client"),Da(this,"namespaces"),Da(this,"optionalNamespaces"),Da(this,"sessionProperties"),Da(this,"scopedProperties"),Da(this,"events",new Vy),Da(this,"rpcProviders",{}),Da(this,"session"),Da(this,"providerOpts"),Da(this,"logger"),Da(this,"uri"),Da(this,"disableProviderPing",!1),Da(this,"connectParams");var r,n;this.providerOpts=e,this.logger=wk({logger:(r=e.logger)!=null?r:DD,name:(n=this.providerOpts.name)!=null?n:Nte}),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const r=new Mte(e);return await r.initialize(),r}async request(e,r,n){const[s,i]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Hb({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,s){const i=new Date().getTime();this.request(e,n,s).then(o=>r(null,Ul(i,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Gn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.connectParams=e,this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:s}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const i=await s();if(this.session=i.session,this.session){const o=HD(this.session.namespaces);this.namespaces=w2(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){var r,n;const{uri:s,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties,authentication:(r=this.connectParams)==null?void 0:r.authentication,walletPay:(n=this.connectParams)==null?void 0:n.walletPay});s&&(this.uri=s,this.events.emit("display_uri",s));const o=await i();this.session=o;const a=HD(o.namespaces);return this.namespaces=w2(this.namespaces,a),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,s]=this.validateChain(e);this.getProvider(n).setDefaultChain(s,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(!Jd(r))return;for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}catch(r){this.logger.warn(r,"Failed to cleanup pending pairings")}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await $6e.init({core:this.providerOpts.core,logger:this.providerOpts.logger||DD,relayUrl:this.providerOpts.relayUrl||xTe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error(n,"Failed to get session"),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>Fm(r)))];MN("client",this.client),MN("events",this.events),MN("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=UTe(r,this.session);if(n?.length===0)return;const s=kte(n),i=w2(this.namespaces,this.optionalNamespaces),o=v2(Hb({},i[r]),{accounts:n,chains:s});switch(r){case"eip155":this.rpcProviders[r]=new d5e({namespace:o});break;default:this.rpcProviders[r]=new p5e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:s}=e;if(s!==((r=this.session)==null?void 0:r.topic))return;const{event:i}=n;if(i.name==="accountsChanged"){const o=i.data;o&&Jd(o)&&this.events.emit("accountsChanged",o.map(qD))}else if(i.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=Fm(o),u=UN(o)!==UN(a)?`${c}:${UN(a)}`:o;this.onChainChanged({currentCaipChainId:u})}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,s;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:i}=r,o=(s=this.client)==null?void 0:s.session.get(e);this.session=v2(Hb({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",v2(Hb({},Gn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(xk.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(v2(Hb({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Rte]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r={},optionalNamespaces:n={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=w2(r,n),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[r,n]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>Fm(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const s=Fm(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged({currentCaipChainId:e,previousCaipChainId:r,internal:n=!1}){if(!this.namespaces)return;const[s,i]=this.validateChain(e);i&&(this.updateNamespaceChain(s,i),n?(this.events.emit("chainChanged",i),this.emitAccountsChangedOnChainChange({namespace:s,currentCaipChainId:e,previousCaipChainId:r})):this.getProvider(s).setDefaultChain(i),await this.persist("namespaces",this.namespaces))}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:r,previousCaipChainId:n}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(qD);if(!Jd(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn(o,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(e,r){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${r}`,s={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.connectParams=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const s=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${y2}/${e}${s}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${y2}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${y2}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(y2)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn(r,"Failed to cleanup storage")}}};const QD=2147483648,E5e={convertEVMChainIdToCoinType(t){if(t>=QD)throw new Error("Invalid chainId");return(QD|t)>>>0}},Cc=Dn({suggestions:[],loading:!1}),_5e={state:Cc,subscribe(t){return ui(Cc,()=>t(Cc))},subscribeKey(t,e){return li(Cc,t,e)},async resolveName(t){try{return await kt.lookupEnsName(t)}catch(e){const r=e;throw new Error(r?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(t){try{return await kt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Cc.loading=!0,Cc.suggestions=[];const e=await kt.getEnsNameSuggestions(t);return Cc.suggestions=e.suggestions||[],Cc.suggestions}catch(e){const r=U1.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{Cc.loading=!1}},async getNamesForAddress(t){try{if(!J.state.activeCaipNetwork)return[];const r=Ae.getEnsFromCacheForAddress(t);if(r)return r;const n=await kt.reverseLookupEnsName({address:t});return Ae.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=U1.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=J.state.activeCaipNetwork,r=J.getAccountData(e?.chainNamespace)?.address,n=Re.getAuthConnector();if(!e)throw new Error("Network not found");if(!r||!n)throw new Error("Address or auth connector not found");Cc.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});It.pushTransactionStack({onCancel(){It.replace("RegisterAccountName")}});const i=await ze.signMessage(s);Cc.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=E5e.convertEVMChainIdToCoinType(Number(o));await kt.registerEnsName({coinType:a,address:r,signature:i,message:s}),J.setAccountProp("profileName",t,e.chainNamespace),Ae.updateEnsCache({address:r,ens:[{name:t,registered_at:new Date().toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),It.replace("RegisterAccountNameSuccess")}catch(s){const i=U1.parseEnsApiError(s,`Error registering name ${t}`);throw It.replace("RegisterAccountName"),new Error(i)}finally{Cc.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){return t?.reasons?.[0]?.description||e}},U1=Kc(_5e);function gO(t){try{return new URL(t)}catch{return null}}function A5e(t){const e=t.split("/"),r=e.length>0&&e[0]!==void 0?e[0]:"",n=r.lastIndexOf(":");return n===-1?{host:r}:{host:r.slice(0,n),port:r.slice(n+1)}}function x5e(t){const e=t.indexOf("://");if(e===-1)return null;const r=t.slice(0,e),n=e+3;let s=t.indexOf("/",n);s===-1&&(s=t.length);const i=t.slice(n,s),o=i.lastIndexOf(":");return o===-1?{scheme:r,host:i}:{scheme:r,host:i.slice(0,o),port:i.slice(o+1)}}function C5e(t,e){if(e.includes("://")){const o=gO(e);return o?o.origin===t:!1}const{host:r,port:n}=A5e(e),s=t.indexOf("://");if(s!==-1){const o=s+3;let a=t.indexOf("/",o);a===-1&&(a=t.length);const c=t.slice(o,a);if(n!==void 0)return`${r}:${n}`===c;const u=c.split(":")[0];return r===u}const i=gO(t);return i?n!==void 0?r===i.hostname&&n===(i.port||void 0):r===i.hostname:!1}function S5e(t,e,r){let n=r,s;const i=n.indexOf("://");i!==-1&&(s=n.slice(0,i),n=n.slice(i+3));const o=n.indexOf("/");o!==-1&&(n=n.slice(0,o));let a=n,c;const u=a.lastIndexOf(":");u!==-1&&(c=a.slice(u+1),a=a.slice(0,u));const l=a.split(".");for(const h of l)if(h.includes("*")&&h!=="*")return!1;const d=t.protocol.replace(/:$/u,"");if(s&&s!==d||c!==void 0&&c!=="*"&&c!==t.port)return!1;const f=x5e(e),g=(f?f.host:t.hostname).split(".");if(l.length!==g.length)return!1;for(let h=l.length-1;h>=0;h-=1){const y=l[h],E=g[h];if(y!=="*"&&y!==E)return!1}return!0}const I5e={ton:["ton_sendMessage","ton_signData"],solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},go={RPC_ERROR_CODE:{USER_REJECTED:5e3,USER_REJECTED_METHODS:5002},getMethodsByChainNamespace(t){return I5e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>n.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>n.add(s)),e.events&&Object.keys(e.events).forEach(s=>n.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&n.add(i)}),n.forEach(s=>{r[s]||(r[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{r[s]&&(r[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{r[s]&&(r[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{r[s]&&(r[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!r[a]||(r[a].rpcMap||(r[a].rpcMap={}),s.has(a)||(r[a].rpcMap={},s.add(a)),r[a].rpcMap[c]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const u=`${o}:${i}`,l=n[o];switch(l.chains.push(u),u){case"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":l.chains.push("solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ");break;case"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1":l.chains.push("solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K");break}return l?.rpcMap&&c&&(l.rpcMap[i]=c),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{const e=await U1.resolveName(t);return(e?.addresses?Object.values(e.addresses):[])[0]?.address||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isUserRejectedRequestError(t){try{if(typeof t=="object"&&t!==null){const e=t,r=typeof e.code=="number",n=r&&e.code===go.RPC_ERROR_CODE.USER_REJECTED_METHODS,s=r&&e.code===go.RPC_ERROR_CODE.USER_REJECTED;return n||s}return!1}catch{return!1}},isOriginAllowed(t,e,r){const n=[...e,...r];if(e.length===0)return!0;const s=gO(t);if(!s)return n.some(i=>!i.includes("*")&&i===t);if(s.hostname==="localhost"||s.hostname==="127.0.0.1")return!0;for(const i of n)if(i.includes("*")){if(S5e(s,t,i))return!0}else if(C5e(t,i))return!0;return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:r,onDisconnect:n,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){r&&t.on("connect",()=>{const a=go.getWalletConnectAccounts(t,e);r(a)}),n&&t.on("disconnect",()=>{n()}),s&&t.on("accountsChanged",a=>{try{const c=t.session?.namespaces?.[e]?.accounts||[],u=t.rpcProviders?.[e]?.getDefaultChain(),l=a.map(d=>{const f=c.find(h=>h.includes(`${e}:${u}:${d}`));if(!f)return;const{chainId:p,chainNamespace:g}=xs.parseCaipAddress(f);return{address:d,chainId:p,chainNamespace:g}}).filter(d=>d!==void 0);l.length>0&&s(l)}catch(c){console.warn("Failed to parse accounts for namespace on accountsChanged event",e,a,c)}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){const r=new Set,n=t?.session?.namespaces?.[e]?.accounts?.map(s=>xs.parseCaipAddress(s)).filter(({address:s})=>r.has(s.toLowerCase())?!1:(r.add(s.toLowerCase()),!0));return n&&n.length>0?n:[]}},T5e=[ae.CONNECTOR_ID.AUTH,ae.CONNECTOR_ID.WALLET_CONNECT];let XT=class{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=r=>J.getCaipNetworks(r),this.getConnectorId=r=>Re.getConnectorId(r),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:r}){const n=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===r?.toString());e&&n&&this.addConnection({connectorId:ae.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:n})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:ae.CONNECTOR_ID.AUTH,type:"AUTH",name:ae.CONNECTOR_NAMES.AUTH,provider:e,imageId:void 0,chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const r=new Set;this.availableConnections=[...e,...this.availableConnections].filter(n=>r.has(n.connectorId.toLowerCase())?!1:(r.add(n.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(r=>r.connectorId.toLowerCase()!==e.toLowerCase()),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,r){J.setAccountProp("status",e,r)}on(e,r){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(s=>s(r))}async connectWalletConnect(e){try{return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}catch(r){throw go.isUserRejectedRequestError(r)?new Hy(r):r}}async switchNetwork(e){const{caipNetwork:r}=e,n=br.getProviderId(r.chainNamespace),s=br.getProvider(r.chainNamespace);if(!s)throw new Error("Provider not found");if(n==="WALLET_CONNECT"){s.setDefaultChain(r.caipNetworkId);return}if(n==="AUTH"){const i=Re.getAuthConnector()?.provider;if(!i)throw new Error("Auth provider not found");const o=ho(r.chainNamespace);await i.switchNetwork({chainId:r.caipNetworkId});const a=await i.getUser({chainId:r.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r.id==="walletConnect");if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,r){if(e.length>0){const{address:n,chainId:s}=ke.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===s?.toString()),o=this.connectors.find(a=>a.id===r);n&&(this.emit("accountChanged",{address:n,chainId:s,connector:o}),this.addConnection({connectorId:r,accounts:e.map(a=>{const{address:c}=ke.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,r,n=!0){if(e.length>0){const{address:s}=ke.getAccount(e[0]),i=this.getConnection({connectorId:r,connections:this.connections,connectors:this.connectors});s&&this.getConnectorId(ae.CHAIN.EVM)?.toLowerCase()===r.toLowerCase()&&this.emit("accountChanged",{address:s,chainId:i?.caipNetwork?.id,connector:i?.connector}),this.addConnection({connectorId:r,accounts:e.map(o=>{const{address:a}=ke.getAccount(o);return{address:a}}),caipNetwork:i?.caipNetwork})}else n&&this.onDisconnect(r)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),this.getConnectorId(ae.CHAIN.EVM)?.toLowerCase()===e.toLowerCase()&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,r){const n=typeof e=="string"&&e.startsWith("0x")?parseInt(e,16).toString():e.toString(),s=this.getConnection({connectorId:r,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(o=>o.chainNamespace===this.namespace).find(o=>o.id.toString()===n);s&&this.addConnection({connectorId:r,accounts:s.accounts,caipNetwork:i}),this.getConnectorId(ae.CHAIN.EVM)?.toLowerCase()===r.toLowerCase()&&this.emit("switchNetwork",{chainId:n})}listenProviderEvents(e,r){if(T5e.includes(e))return;const n=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(r.on("disconnect",i),r.on("accountsChanged",n),r.on("chainChanged",s),this.providerHandlers[e]={provider:r,disconnect:i,accountsChanged:n,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:r,disconnect:n,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];r.removeListener("disconnect",n),r.removeListener("accountsChanged",s),r.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){const e=this.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[r]=e.accounts;this.emit("accountChanged",{address:r?.address,chainId:e.caipNetwork?.id,connector:e.connector})}}getConnection({address:e,connectorId:r,connections:n,connectors:s}){if(r){const o=n.find(u=>u.connectorId.toLowerCase()===r.toLowerCase());if(!o)return null;const a=s.find(u=>u.id.toLowerCase()===o.connectorId.toLowerCase()),c=e?o.accounts.find(u=>u.address.toLowerCase()===e.toLowerCase()):o.accounts[0];return{...o,account:c,connector:a}}const i=n.find(o=>o.accounts.length>0&&s.some(a=>a.id.toLowerCase()===o.connectorId.toLowerCase()));if(i){const[o]=i.accounts,a=s.find(c=>c.id.toLowerCase()===i.connectorId.toLowerCase());return{...i,account:o,connector:a}}return null}},pp=null;const Po={getSIWX(){return we.state.siwx},async initializeIfEnabled(t=J.getActiveCaipAddress()){const e=we.state.siwx;if(!(e&&t))return;const[r,n,s]=t.split(":");if(J.checkIfSupportedNetwork(r,`${r}:${n}`))try{if(we.state.remoteFeatures?.emailCapture){const o=J.getAccountData(r)?.user;await dr.open({view:"DataCapture",data:{email:o?.email??void 0}});return}if(pp&&await pp,(await e.getSessions(`${r}:${n}`,s)).length)return;await dr.open({view:"SIWXSignMessage"})}catch(i){console.error("SIWXUtil:initializeIfEnabled",i),Zt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties(i)}),await ze._getClient()?.disconnect().catch(console.error),It.reset("Connect"),vl.showError("A problem occurred while trying initialize authentication")}},async isAuthenticated(t=J.getActiveCaipAddress()){if(!we.state.siwx||!t)return!0;const{chainNamespace:r,chainId:n,address:s}=xs.parseCaipAddress(t),i=`${r}:${n}`;return(await Po.getSessions({address:s,caipNetworkId:i})).length>0},async requestSignMessage(){const t=we.state.siwx,e=ke.getPlainAddress(J.getActiveCaipAddress()),r=m1();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");try{const n=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),s=n.toString();let i="";t.signMessage?i=await t.signMessage({message:s,chainId:r.caipNetworkId,accountAddress:e}):(Re.getConnectorId(r.chainNamespace)===ae.CONNECTOR_ID.AUTH&&It.pushTransactionStack({}),i=await ze.signMessage(s)||""),await t.addSession({data:n,message:s,signature:i}),J.setLastConnectedSIWECaipNetwork(r),dr.close(),Zt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(n){(!dr.state.open||It.state.view==="ApproveTransaction")&&await dr.open({view:"SIWXSignMessage"}),vl.showError("Error signing message"),Zt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties(n)}),console.error("SWIXUtil:requestSignMessage",n)}},async cancelSignMessage(){try{const t=this.getSIWX();if(t?.getRequired?.()){const r=J.getLastConnectedSIWECaipNetwork();if(r){const n=await t?.getSessions(r?.caipNetworkId,ke.getPlainAddress(J.getActiveCaipAddress())||"");n&&n.length>0?await J.switchActiveNetwork(r):await ze.disconnect()}else await ze.disconnect()}else dr.close();dr.close(),Zt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(t){console.error("SIWXUtil:cancelSignMessage",t)}},async getAllSessions(){const t=this.getSIWX(),e=J.getAllRequestedCaipNetworks(),r=[];return await Promise.all(e.map(async n=>{const s=await t?.getSessions(n.caipNetworkId,ke.getPlainAddress(J.getActiveCaipAddress())||"");s&&r.push(...s)})),r},async getSessions(t){const e=we.state.siwx;let r=t?.address;if(!r){const s=J.getActiveCaipAddress();r=ke.getPlainAddress(s)}let n=t?.caipNetworkId;return n||(n=J.getActiveCaipNetwork()?.caipNetworkId),e&&r&&n?e.getSessions(n,r):[]},async isSIWXCloseDisabled(){const t=this.getSIWX();if(t){const e=It.state.view==="ApproveTransaction",r=It.state.view==="SIWXSignMessage";if(e||r)return t.getRequired?.()&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:r,preferredAccountType:n,chainNamespace:s}){const i=Po.getSIWX(),o=m1();if(!i||!s.includes(ae.CHAIN.EVM)||we.state.remoteFeatures?.emailCapture){const d=await t.connect({chainId:e,socialUri:r,preferredAccountType:n});return{address:d.address,chainId:d.chainId,accounts:d.accounts}}const a=`${s}:${e}`,c=await i.createMessage({chainId:a,accountAddress:"<<AccountAddress>>"}),u={accountAddress:c.accountAddress,chainId:c.chainId,domain:c.domain,uri:c.uri,version:c.version,nonce:c.nonce,notBefore:c.notBefore,statement:c.statement,resources:c.resources,requestId:c.requestId,issuedAt:c.issuedAt,expirationTime:c.expirationTime,serializedMessage:c.toString()},l=await t.connect({chainId:e,socialUri:r,siwxMessage:u,preferredAccountType:n});return u.accountAddress=l.address,u.serializedMessage=l.message||"",l.signature&&l.message&&await Po.addEmbeddedWalletSession(u,l.message,l.signature),J.setLastConnectedSIWECaipNetwork(o),{address:l.address,chainId:l.chainId,accounts:l.accounts}},async addEmbeddedWalletSession(t,e,r){if(pp)return pp;const n=Po.getSIWX();return n?(pp=n.addSession({data:t,message:e,signature:r}).finally(()=>{pp=null}),pp):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){const n=Po.getSIWX(),s=m1(),i=new Set(e.map(u=>u.split(":")[0]));if(!n||i.size!==1||!i.has("eip155"))return!1;const o=await n.createMessage({chainId:m1()?.caipNetworkId||"",accountAddress:""}),a=await t.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:r,chains:[o.chainId,...e.filter(u=>u!==o.chainId)]});vl.showLoading("Authenticating...",{autoClose:!1});const c={...a.session.peer.metadata,name:a.session.peer.metadata.name,icon:a.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"};if(J.setAccountProp("connectedWalletInfo",c,Array.from(i)[0]),a?.auths?.length){const u=a.auths.map(l=>{const d=t.client.formatAuthMessage({request:l.p,iss:l.p.iss});return{data:{...l.p,accountAddress:l.p.iss.split(":").slice(-1).join(""),chainId:l.p.iss.split(":").slice(2,4).join(":"),uri:l.p.aud??"",version:l.p.version||o.version,expirationTime:l.p.exp,issuedAt:l.p.iat,notBefore:l.p.nbf},message:d,signature:l.s.s,cacao:l}});try{await n.setSessions(u),s&&J.setLastConnectedSIWECaipNetwork(s),Zt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Po.getSIWXEventProperties()})}catch(l){throw console.error("SIWX:universalProviderAuth - failed to set sessions",l),Zt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Po.getSIWXEventProperties(l)}),await t.disconnect().catch(console.error),l}finally{vl.hide()}}return!0},getSIWXEventProperties(t){const e=J.state.activeChain;if(!e)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:J.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:ho(e)===Ss.ACCOUNT_TYPES.SMART_ACCOUNT,message:t?ke.parseError(t):void 0}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};let QT=class{constructor({provider:e,namespace:r}){this.id=ae.CONNECTOR_ID.WALLET_CONNECT,this.name="WalletConnect",this.type="WALLET_CONNECT",this.imageId="ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",this.getCaipNetworks=J.getCaipNetworks.bind(J),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=r}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const r=this.getCaipNetworks(),n=we.state.universalProviderConfigOverride,s=go.createNamespaces(r,n);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return Po.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:N5e})}};const N5e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],au=Dn({message:"",variant:"info",open:!1}),P5e={state:au,subscribeKey(t,e){return li(au,t,e)},open(t,e){const{debug:r}=we.state,{code:n,displayMessage:s,debugMessage:i}=t;s&&r&&(au.message=s,au.variant=e,au.open=!0),i&&console.error(typeof i=="function"?i():i,n?{code:n}:void 0)},warn(t,e,r){au.open=!0,au.message=t,au.variant="warning",e&&console.warn(e,r)},close(){au.open=!1,au.message="",au.variant="info"}},Si=Kc(P5e),R5e={eip155:{native:{assetNamespace:"slip44",assetReference:"60"},defaultTokenNamespace:"erc20"},solana:{native:{assetNamespace:"slip44",assetReference:"501"},defaultTokenNamespace:"token"}};class O5e extends Error{}function k5e(){const{sdkType:t,sdkVersion:e,projectId:r}=we.getSnapshot(),n=new URL("https://rpc.walletconnect.org/v1/json-rpc");return n.searchParams.set("projectId",r),n.searchParams.set("st",t),n.searchParams.set("sv",e),n.searchParams.set("source","fund-wallet"),n.toString()}async function Ck(t,e){const r=k5e(),{projectId:n}=we.getSnapshot(),s={jsonrpc:"2.0",id:1,method:t,params:{...e||{},projectId:n}},o=await(await fetch(r,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}})).json();if(o.error)throw new O5e(o.error.message);return o}async function Htt(t){return(await Ck("reown_getExchanges",t)).result}async function ztt(t){return(await Ck("reown_getExchangePayUrl",t)).result}async function Wtt(t){return(await Ck("reown_getExchangeBuyStatus",t)).result}function Vtt(t,e){const{chainNamespace:r,chainId:n}=xs.parseCaipNetworkId(t),s=R5e[r];if(!s)throw new Error(`Unsupported chain namespace for CAIP-19 formatting: ${r}`);let i=s.native.assetNamespace,o=s.native.assetReference;return e!=="native"&&(i=s.defaultTokenNamespace,o=e),`${`${r}:${n}`}/${i}:${o}`}const B5e={network:"eip155:1",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},U5e={network:"eip155:8453",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},Dte={network:"eip155:8453",asset:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},M5e={asset:"0x036CbD53842c5426634e7929541eC2318f3dCF7e"},D5e={network:"eip155:84532",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},j5e={network:"eip155:1",asset:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},L5e={network:"eip155:42161",asset:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},F5e={network:"eip155:137",asset:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},$5e={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},q5e={network:"eip155:1",asset:"0xdAC17F958D2ee523a2206206994597C13D831ec7",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},H5e={network:"eip155:10",asset:"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},z5e={network:"eip155:42161",asset:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},W5e={network:"eip155:137",asset:"0xc2132d05d31c914a87c6611c10748aeb04b58e8f",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},V5e={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},G5e={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"native",metadata:{name:"Solana",symbol:"SOL",decimals:9}},K5e={ethereumETH:B5e,baseETH:U5e,baseUSDC:Dte,baseSepoliaETH:D5e,ethereumUSDC:j5e,arbitrumUSDC:L5e,polygonUSDC:F5e,solanaUSDC:$5e,ethereumUSDT:q5e,optimismUSDT:H5e,arbitrumUSDT:z5e,polygonUSDT:W5e,solanaUSDT:V5e,solanaSOL:G5e};function Gtt(t){return Object.values(K5e).filter(e=>e.network===t)}const cr={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",BINANCE_CONNECTOR_NAME:"Binance Wallet",EIP155:ae.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"AUTH",getSDKVersionWarningMessage(t,e){return`
     @@@@@@@           @@@@@@@@@@@@@@@@@@      
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@   @@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@   @@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@  @@@@@@@@@@@@@
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@   @@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@   @@@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@  @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@   @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
      @@@@@            @@@@@@@@@@@@@@@@@@  
      
AppKit SDK version ${t} is outdated. Latest version is ${e}. Please update to the latest version for bug fixes and new features.
            
Changelog: https://github.com/reown-com/appkit/releases
NPM Registry: https://www.npmjs.com/package/@reown/appkit`}},ii={ConnectorExplorerIds:{[ae.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ae.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ae.CONNECTOR_ID.BASE_ACCOUNT]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ae.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ae.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ae.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[cr.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[cr.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[cr.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[cr.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[cr.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[cr.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[cr.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[cr.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[cr.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[cr.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[cr.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13",[cr.OKX_CONNECTOR_NAME]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[cr.BINANCE_CONNECTOR_NAME]:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200","00000008819873e925422c1ff0f99f7c":"b3406e4a-bbfc-44fb-e3a6-89673c78b700","-239":"20f673c0-095e-49b2-07cf-eb5049dcf600","-3":"20f673c0-095e-49b2-07cf-eb5049dcf600"},ConnectorImageIds:{[ae.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ae.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ae.CONNECTOR_ID.BASE_ACCOUNT]:"bba2c8be-7fd1-463e-42b1-796ecb0ad200",[ae.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ae.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ae.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ae.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ae.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ae.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ae.CONNECTOR_ID.COINBASE]:"Coinbase",[ae.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ae.CONNECTOR_ID.BASE_ACCOUNT]:"Base Account",[ae.CONNECTOR_ID.LEDGER]:"Ledger",[ae.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ae.CONNECTOR_ID.INJECTED]:"INJECTED",[ae.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ae.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ae.CONNECTOR_ID.AUTH]:"AUTH",[cr.CONNECTOR_TYPE_AUTH]:"AUTH"}},po={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${cr.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return t?.toLowerCase()===e?.toLowerCase()},getActiveNamespaceConnectedToAuth(){const t=J.state.activeChain;return ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Re.getConnectorId(e)===ae.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:r}){let n=0;return new Promise(s=>{async function i(){return n+=1,await t()?s(!0):n>=r?s(!1):(setTimeout(i,e),null)}i()})},userChainIdToChainNamespace(t){if(typeof t=="number")return ae.CHAIN.EVM;const[e]=t.split(":");return e},getOtherAuthNamespaces(t){return t?ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.filter(n=>n!==t):[]},getConnectorStorageInfo(t,e){const n=Ae.getConnections()[e]??[];return{hasDisconnected:Ae.isConnectorDisconnected(t,e),hasConnected:n.some(s=>po.isLowerCaseMatch(s.connectorId,t))}}},Z5e=new AbortController,Ii={EmbeddedWalletAbortController:Z5e,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${p1()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com. [PID: ${we.state.projectId}]`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your systemâ€™s date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`},INACTIVE_NAMESPACE_NOT_CONNECTED:{code:"APKTW001",displayMessage:"Inactive Namespace Not Connected",debugMessage:(t,e)=>`An error occurred while connecting an inactive namespace ${t}: "${e}"`},INVALID_EMAIL:{code:"APKTW002",displayMessage:"Invalid Email Address",debugMessage:"Please enter a valid email address"}}},jte={TOKEN_ADDRESSES_BY_SYMBOL:{USDC:{8453:Dte.asset,84532:M5e.asset}},getTokenSymbolByAddress(t){if(!t)return;const[e]=Object.entries(jte.TOKEN_ADDRESSES_BY_SYMBOL).find(([r,n])=>Object.values(n).includes(t))??[];return e}},Y5e={createLogger(t,e="error"){const r=O4({level:e}),{logger:n}=PT({opts:r});return n.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},n}},J5e="rpc.walletconnect.org";function ej(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const $N=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","eip155:80094","eip155:80069","eip155:560048","eip155:31","eip155:2818","eip155:57054","eip155:911867","eip155:534351","eip155:1112","eip155:534352","eip155:1111","eip155:146","eip155:130","eip155:1284","eip155:30","eip155:2810","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Im={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===J5e}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ae.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ae.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){const n=t.rpcUrls?.default?.http?.[0];return $N.includes(e)?ej(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=t.rpcUrls?.default?.http?.[0],a=this.getDefaultRpcUrl(t,i,r),c=t?.rpcUrls?.chainDefault?.http?.[0]||o,u=n?.[i]?.map(f=>f.url)||[],l=[...u,...a?[a]:[]],d=[...u];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:ii.NetworkImageIds[t.id],imageUrl:e?.[t.id]},rpcUrls:{...t.rpcUrls,default:{http:l},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(s=>Im.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){const n=[];return r?.forEach(s=>{n.push(gh(s.url,s.config))}),$N.includes(t.caipNetworkId)&&n.push(gh(ej(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),t?.rpcUrls?.default?.http?.forEach(s=>{n.push(gh(s))}),u6(n)},extendWagmiTransports(t,e,r){if($N.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return u6([r,gh(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ae.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){const e=Ae.getActiveCaipNetworkId(),r=J.getAllRequestedCaipNetworks(),n=Array.from(J.state.chains?.keys()||[]),s=e?.split(":")[0],i=s?n.includes(s):!1,o=r?.find(c=>c.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||r?.[0]}};let X5e=class _I{constructor(){}static getInstance({projectId:e,chainId:r,enableLogger:n,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a}){const{metadata:c,sdkVersion:u,sdkType:l}=we.getSnapshot();return _I.instance||(_I.instance=new rfe({projectId:e,chainId:r,enableLogger:n,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:!!we.state.remoteFeatures?.emailCapture,metadata:c,sdkVersion:u,sdkType:l})),_I.instance}};var tj={};const Q5e={ACCOUNT_TABS:[{label:"Tokens"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof tj<"u"?tj.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120},VIEWS_WITH_LEGAL_FOOTER:["Connect","ConnectWallets","OnRampTokenSelect","OnRampFiatSelect","OnRampProviders"],VIEWS_WITH_DEFAULT_FOOTER:["Networks"]},e3e=[ii.ConnectorExplorerIds[ae.CONNECTOR_ID.COINBASE],ii.ConnectorExplorerIds[ae.CONNECTOR_ID.COINBASE_SDK],ii.ConnectorExplorerIds[ae.CONNECTOR_ID.BASE_ACCOUNT],ii.ConnectorExplorerIds[cr.SOLFLARE_CONNECTOR_NAME],ii.ConnectorExplorerIds[cr.PHANTOM_CONNECTOR_NAME],ii.ConnectorExplorerIds[cr.BINANCE_CONNECTOR_NAME]],v1={filterOutDuplicatesByRDNS(t){const e=we.state.enableEIP6963?Re.state.connectors:[],r=Ae.getRecentWallets(),n=e.map(a=>a.info?.rdns).filter(Boolean),s=r.map(a=>a.rdns).filter(Boolean),i=n.concat(s);if(i.includes("io.metamask.mobile")&&ke.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a?.rdns&&i.includes(String(a.rdns))||!a?.rdns&&e.some(u=>u.name===a.name)))},filterOutDuplicatesByIds(t){const e=Re.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"||a.type==="MULTI_CHAIN"),r=Ae.getRecentWallets(),n=e.map(a=>a.explorerId||a.explorerWallet?.id||a.id),s=r.map(a=>a.id),i=n.concat(s);return t.filter(a=>!i.includes(a?.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Re.state,{featuredWalletIds:r}=we.state,n=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>(a.info?.rdns&&(o[a.info.rdns]=!0),o),{});return t.map(o=>({...o,installed:!!o.rdns&&!!n[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(r?.length){const u=r.indexOf(o.id),l=r.indexOf(a.id);if(u!==-1&&l!==-1)return u-l;if(u!==-1)return-1;if(l!==-1)return 1}return 0})},getConnectOrderMethod(t,e){const r=t?.connectMethodsOrder||we.state.features?.connectMethodsOrder,n=e||Re.state.connectors;if(r)return r;const{injected:s,announced:i}=AI.getConnectorsByType(n,pt.state.recommended,pt.state.featured),o=s.filter(AI.showConnector),a=i.filter(AI.showConnector);return o.length||a.length?["wallet","email","social"]:Q5e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&pt.state.excludedWallets.some(n=>n.rdns===t.rdns),r=!!t.name&&pt.state.excludedWallets.some(n=>po.isLowerCaseMatch(n.name,t.name));return e||r},markWalletsWithDisplayIndex(t){return t.map((e,r)=>({...e,display_index:r}))},filterWalletsByWcSupport(t){return ze.state.wcBasic?t.filter(e=>e.supports_wc):ke.isMobile()?t.filter(e=>e.supports_wc||e3e.includes(e.id)):t}},AI={getConnectorsByType(t,e,r){const{customWallets:n}=we.state,s=Ae.getRecentWallets(),i=v1.filterOutDuplicateWallets(e),o=v1.filterOutDuplicateWallets(r),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),u=t.filter(d=>d.type==="INJECTED"),l=t.filter(d=>d.type==="EXTERNAL");return{custom:n,recent:s,external:l,multiChain:a,announced:c,injected:u,recommended:i,featured:o}},showConnector(t){const e=t.info?.rdns,r=!!e&&pt.state.excludedWallets.some(s=>!!s.rdns&&s.rdns===e),n=!!t.name&&pt.state.excludedWallets.some(s=>po.isLowerCaseMatch(s.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ke.isMobile()||ke.isMobile()&&!e&&!ze.checkInstalled())||r||n)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(r||n))},getIsConnectedWithWC(){return Array.from(J.state.chains.values()).some(r=>Re.getConnectorId(r.namespace)===ae.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=we.state.features?.connectorTypeOrder??[]}){const l=[{type:"walletConnect",isEnabled:!0},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(g=>g.isEnabled),d=new Set(l.map(g=>g.type)),f=c.filter(g=>d.has(g)).map(g=>({type:g,isEnabled:!0})),p=l.filter(({type:g})=>!f.some(({type:y})=>y===g));return Array.from(new Set([...f,...p].map(({type:g})=>g)))},sortConnectorsByExplorerWallet(t){return[...t].sort((e,r)=>e.explorerWallet&&r.explorerWallet?(e.explorerWallet.order??0)-(r.explorerWallet.order??0):e.explorerWallet?-1:r.explorerWallet?1:0)},getAuthName({email:t,socialUsername:e,socialProvider:r}){return e?r&&r==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){try{if(t.name==="Browser Wallet"&&!ke.isMobile())return{accounts:[],chainId:void 0};if(t.id===ae.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[e,r]=await Promise.all([t.provider?.request({method:"eth_accounts"}),t.provider?.request({method:"eth_chainId"}).then(n=>Number(n))]);return{accounts:e,chainId:r}}catch(e){return console.warn(`Failed to fetch provider data for ${t.name}`,e),{accounts:[],chainId:void 0}}},getFilteredCustomWallets(t){const e=Ae.getRecentWallets(),r=Re.state.connectors.map(o=>o.info?.rdns).filter(Boolean),n=e.map(o=>o.rdns).filter(Boolean),s=r.concat(n);if(s.includes("io.metamask.mobile")&&ke.isMobile()){const o=s.indexOf("io.metamask.mobile");s[o]="io.metamask"}return t.filter(o=>!s.includes(String(o?.rdns)))},hasWalletConnector(t){return Re.state.connectors.some(e=>e.id===t.id||e.name===t.name)},isWalletCompatibleWithCurrentChain(t){const e=J.state.activeChain;return e&&t.chains?t.chains.some(r=>{const n=r.split(":")[0];return e===n}):!0},getFilteredRecentWallets(){return Ae.getRecentWallets().filter(r=>!v1.isExcluded(r)).filter(r=>!this.hasWalletConnector(r)).filter(r=>this.isWalletCompatibleWithCurrentChain(r))},getCappedRecommendedWallets(t){const{connectors:e}=Re.state,{customWallets:r,featuredWalletIds:n}=we.state,s=e.find(S=>S.id==="walletConnect"),i=e.filter(S=>S.type==="INJECTED"||S.type==="ANNOUNCED"||S.type==="MULTI_CHAIN");if(!s&&!i.length&&!r?.length)return[];const o=l8.isEmailEnabled(),a=l8.isSocialsEnabled(),c=i.filter(S=>S.name!=="Browser Wallet"&&S.name!=="WalletConnect"),u=n?.length||0,l=r?.length||0,d=c.length||0,f=o?1:0,p=a?1:0,g=u+l+d+f+p,y=Math.max(0,4-g);return y<=0?[]:v1.filterOutDuplicateWallets(t).slice(0,y)}};const xI=globalThis,Sk=xI.ShadowRoot&&(xI.ShadyCSS===void 0||xI.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Ik=Symbol(),rj=new WeakMap;let Lte=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==Ik)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(Sk&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=rj.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&rj.set(r,e))}return e}toString(){return this.cssText}};const ds=t=>new Lte(typeof t=="string"?t:t+"",void 0,Ik),lo=(t,...e)=>{const r=t.length===1?t[0]:e.reduce(((n,s,i)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1]),t[0]);return new Lte(r,t,Ik)},t3e=(t,e)=>{if(Sk)t.adoptedStyleSheets=e.map((r=>r instanceof CSSStyleSheet?r:r.styleSheet));else for(const r of e){const n=document.createElement("style"),s=xI.litNonce;s!==void 0&&n.setAttribute("nonce",s),n.textContent=r.cssText,t.appendChild(n)}},nj=Sk?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return ds(r)})(t):t;const{is:r3e,defineProperty:n3e,getOwnPropertyDescriptor:s3e,getOwnPropertyNames:i3e,getOwnPropertySymbols:o3e,getPrototypeOf:a3e}=Object,e5=globalThis,sj=e5.trustedTypes,c3e=sj?sj.emptyScript:"",u3e=e5.reactiveElementPolyfillSupport,M1=(t,e)=>t,mO={toAttribute(t,e){switch(e){case Boolean:t=t?c3e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Fte=(t,e)=>!r3e(t,e),ij={attribute:!0,type:String,converter:mO,reflect:!1,useDefault:!1,hasChanged:Fte};Symbol.metadata??=Symbol("metadata"),e5.litPropertyMetadata??=new WeakMap;let Tm=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=ij){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),s=this.getPropertyDescriptor(e,n,r);s!==void 0&&n3e(this.prototype,e,s)}}static getPropertyDescriptor(e,r,n){const{get:s,set:i}=s3e(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get:s,set(o){const a=s?.call(this);i?.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??ij}static _$Ei(){if(this.hasOwnProperty(M1("elementProperties")))return;const e=a3e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(M1("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(M1("properties"))){const r=this.properties,n=[...i3e(r),...o3e(r)];for(const s of n)this.createProperty(s,r[s])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,s]of r)this.elementProperties.set(n,s)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const s=this._$Eu(r,n);s!==void 0&&this._$Eh.set(s,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const s of n)r.unshift(nj(s))}else e!==void 0&&r.push(nj(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return t3e(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){const n=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,n);if(s!==void 0&&n.reflect===!0){const i=(n.converter?.toAttribute!==void 0?n.converter:mO).toAttribute(r,n.type);this._$Em=e,i==null?this.removeAttribute(s):this.setAttribute(s,i),this._$Em=null}}_$AK(e,r){const n=this.constructor,s=n._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const i=n.getPropertyOptions(s),o=typeof i.converter=="function"?{fromAttribute:i.converter}:i.converter?.fromAttribute!==void 0?i.converter:mO;this._$Em=s;const a=o.fromAttribute(r,i.type);this[s]=a??this._$Ej?.get(s)??a,this._$Em=null}}requestUpdate(e,r,n){if(e!==void 0){const s=this.constructor,i=this[e];if(n??=s.getPropertyOptions(e),!((n.hasChanged??Fte)(i,r)||n.useDefault&&n.reflect&&i===this._$Ej?.get(e)&&!this.hasAttribute(s._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:s,wrapped:i},o){n&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??r??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),s===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[s,i]of this._$Ep)this[s]=i;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[s,i]of n){const{wrapped:o}=i,a=this[s];o!==!0||this._$AL.has(s)||a===void 0||this.C(s,void 0,i,a)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),this._$EO?.forEach((n=>n.hostUpdate?.())),this.update(r)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(r)}willUpdate(e){}_$AE(e){this._$EO?.forEach((r=>r.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}};Tm.elementStyles=[],Tm.shadowRootOptions={mode:"open"},Tm[M1("elementProperties")]=new Map,Tm[M1("finalized")]=new Map,u3e?.({ReactiveElement:Tm}),(e5.reactiveElementVersions??=[]).push("2.1.1");const Tk=globalThis,U6=Tk.trustedTypes,oj=U6?U6.createPolicy("lit-html",{createHTML:t=>t}):void 0,$te="$lit$",dh=`lit$${Math.random().toFixed(9).slice(2)}$`,qte="?"+dh,l3e=`<${qte}>`,k0=document,Gv=()=>k0.createComment(""),Kv=t=>t===null||typeof t!="object"&&typeof t!="function",Nk=Array.isArray,d3e=t=>Nk(t)||typeof t?.[Symbol.iterator]=="function",qN=`[ 	
\f\r]`,zb=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,aj=/-->/g,cj=/>/g,gp=RegExp(`>|${qN}(?:([^\\s"'>=/]+)(${qN}*=${qN}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),uj=/'/g,lj=/"/g,Hte=/^(?:script|style|textarea|title)$/i,zte=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),Ytt=zte(1),Jtt=zte(2),Sy=Symbol.for("lit-noChange"),oi=Symbol.for("lit-nothing"),dj=new WeakMap,l0=k0.createTreeWalker(k0,129);function Wte(t,e){if(!Nk(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return oj!==void 0?oj.createHTML(e):e}const f3e=(t,e)=>{const r=t.length-1,n=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=zb;for(let a=0;a<r;a++){const c=t[a];let u,l,d=-1,f=0;for(;f<c.length&&(o.lastIndex=f,l=o.exec(c),l!==null);)f=o.lastIndex,o===zb?l[1]==="!--"?o=aj:l[1]!==void 0?o=cj:l[2]!==void 0?(Hte.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=gp):l[3]!==void 0&&(o=gp):o===gp?l[0]===">"?(o=s??zb,d=-1):l[1]===void 0?d=-2:(d=o.lastIndex-l[2].length,u=l[1],o=l[3]===void 0?gp:l[3]==='"'?lj:uj):o===lj||o===uj?o=gp:o===aj||o===cj?o=zb:(o=gp,s=void 0);const p=o===gp&&t[a+1].startsWith("/>")?" ":"";i+=o===zb?c+l3e:d>=0?(n.push(u),c.slice(0,d)+$te+c.slice(d)+dh+p):c+dh+(d===-2?a:p)}return[Wte(t,i+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};let yO=class Vte{constructor({strings:e,_$litType$:r},n){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[u,l]=f3e(e,r);if(this.el=Vte.createElement(u,n),l0.currentNode=this.el.content,r===2||r===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=l0.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith($te)){const f=l[o++],p=s.getAttribute(d).split(dh),g=/([.?@])?(.*)/.exec(f);c.push({type:1,index:i,name:g[2],strings:p,ctor:g[1]==="."?p3e:g[1]==="?"?g3e:g[1]==="@"?m3e:t5}),s.removeAttribute(d)}else d.startsWith(dh)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(Hte.test(s.tagName)){const d=s.textContent.split(dh),f=d.length-1;if(f>0){s.textContent=U6?U6.emptyScript:"";for(let p=0;p<f;p++)s.append(d[p],Gv()),l0.nextNode(),c.push({type:2,index:++i});s.append(d[f],Gv())}}}else if(s.nodeType===8)if(s.data===qte)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(dh,d+1))!==-1;)c.push({type:7,index:i}),d+=dh.length-1}i++}}static createElement(e,r){const n=k0.createElement("template");return n.innerHTML=e,n}};function Iy(t,e,r=t,n){if(e===Sy)return e;let s=n!==void 0?r._$Co?.[n]:r._$Cl;const i=Kv(e)?void 0:e._$litDirective$;return s?.constructor!==i&&(s?._$AO?.(!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,r,n)),n!==void 0?(r._$Co??=[])[n]=s:r._$Cl=s),s!==void 0&&(e=Iy(t,s._$AS(t,e.values),s,n)),e}let h3e=class{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,s=(e?.creationScope??k0).importNode(r,!0);l0.currentNode=s;let i=l0.nextNode(),o=0,a=0,c=n[0];for(;c!==void 0;){if(o===c.index){let u;c.type===2?u=new Pk(i,i.nextSibling,this,e):c.type===1?u=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(u=new y3e(i,this,e)),this._$AV.push(u),c=n[++a]}o!==c?.index&&(i=l0.nextNode(),o++)}return l0.currentNode=k0,s}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}},Pk=class Gte{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,r,n,s){this.type=2,this._$AH=oi,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&e?.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Iy(this,e,r),Kv(e)?e===oi||e==null||e===""?(this._$AH!==oi&&this._$AR(),this._$AH=oi):e!==this._$AH&&e!==Sy&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):d3e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==oi&&Kv(this._$AH)?this._$AA.nextSibling.data=e:this.T(k0.createTextNode(e)),this._$AH=e}$(e){const{values:r,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=yO.createElement(Wte(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===s)this._$AH.p(r);else{const i=new h3e(s,this),o=i.u(this.options);i.p(r),this.T(o),this._$AH=i}}_$AC(e){let r=dj.get(e.strings);return r===void 0&&dj.set(e.strings,r=new yO(e)),r}k(e){Nk(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,s=0;for(const i of e)s===r.length?r.push(n=new Gte(this.O(Gv()),this.O(Gv()),this,this.options)):n=r[s],n._$AI(i),s++;s<r.length&&(this._$AR(n&&n._$AB.nextSibling,s),r.length=s)}_$AR(e=this._$AA.nextSibling,r){for(this._$AP?.(!1,!0,r);e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},t5=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,s,i){this.type=1,this._$AH=oi,this._$AN=void 0,this.element=e,this.name=r,this._$AM=s,this.options=i,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=oi}_$AI(e,r=this,n,s){const i=this.strings;let o=!1;if(i===void 0)e=Iy(this,e,r,0),o=!Kv(e)||e!==this._$AH&&e!==Sy,o&&(this._$AH=e);else{const a=e;let c,u;for(e=i[0],c=0;c<i.length-1;c++)u=Iy(this,a[n+c],r,c),u===Sy&&(u=this._$AH[c]),o||=!Kv(u)||u!==this._$AH[c],u===oi?e=oi:e!==oi&&(e+=(u??"")+i[c+1]),this._$AH[c]=u}o&&!s&&this.j(e)}j(e){e===oi?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},p3e=class extends t5{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===oi?void 0:e}},g3e=class extends t5{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==oi)}},m3e=class extends t5{constructor(e,r,n,s,i){super(e,r,n,s,i),this.type=5}_$AI(e,r=this){if((e=Iy(this,e,r,0)??oi)===Sy)return;const n=this._$AH,s=e===oi&&n!==oi||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==oi&&(n===oi||s);s&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},y3e=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Iy(this,e)}};const b3e=Tk.litHtmlPolyfillSupport;b3e?.(yO,Pk),(Tk.litHtmlVersions??=[]).push("3.3.1");const w3e=(t,e,r)=>{const n=r?.renderBefore??e;let s=n._$litPart$;if(s===void 0){const i=r?.renderBefore??null;n._$litPart$=s=new Pk(e.insertBefore(Gv(),i),i,void 0,r??{})}return s._$AI(t),s};const Rk=globalThis;let CI=class extends Tm{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=w3e(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Sy}};CI._$litElement$=!0,CI.finalized=!0,Rk.litElementHydrateSupport?.({LitElement:CI});const v3e=Rk.litElementPolyfillSupport;v3e?.({LitElement:CI});(Rk.litElementVersions??=[]).push("4.2.1");const E3e={black:"#202020",white:"#FFFFFF",white010:"rgba(255, 255, 255, 0.1)",accent010:"rgba(9, 136, 240, 0.1)",accent020:"rgba(9, 136, 240, 0.2)",accent030:"rgba(9, 136, 240, 0.3)",accent040:"rgba(9, 136, 240, 0.4)",accent050:"rgba(9, 136, 240, 0.5)",accent060:"rgba(9, 136, 240, 0.6)",accent070:"rgba(9, 136, 240, 0.7)",accent080:"rgba(9, 136, 240, 0.8)",accent090:"rgba(9, 136, 240, 0.9)",accent100:"rgba(9, 136, 240, 1.0)",accentSecondary010:"rgba(199, 185, 148, 0.1)",accentSecondary020:"rgba(199, 185, 148, 0.2)",accentSecondary030:"rgba(199, 185, 148, 0.3)",accentSecondary040:"rgba(199, 185, 148, 0.4)",accentSecondary050:"rgba(199, 185, 148, 0.5)",accentSecondary060:"rgba(199, 185, 148, 0.6)",accentSecondary070:"rgba(199, 185, 148, 0.7)",accentSecondary080:"rgba(199, 185, 148, 0.8)",accentSecondary090:"rgba(199, 185, 148, 0.9)",accentSecondary100:"rgba(199, 185, 148, 1.0)",productWalletKit:"#FFB800",productAppKit:"#FF573B",productCloud:"#0988F0",productDocumentation:"#008847",neutrals050:"#F6F6F6",neutrals100:"#F3F3F3",neutrals200:"#E9E9E9",neutrals300:"#D0D0D0",neutrals400:"#BBB",neutrals500:"#9A9A9A",neutrals600:"#6C6C6C",neutrals700:"#4F4F4F",neutrals800:"#363636",neutrals900:"#2A2A2A",neutrals1000:"#252525",semanticSuccess010:"rgba(48, 164, 107, 0.1)",semanticSuccess020:"rgba(48, 164, 107, 0.2)",semanticSuccess030:"rgba(48, 164, 107, 0.3)",semanticSuccess040:"rgba(48, 164, 107, 0.4)",semanticSuccess050:"rgba(48, 164, 107, 0.5)",semanticSuccess060:"rgba(48, 164, 107, 0.6)",semanticSuccess070:"rgba(48, 164, 107, 0.7)",semanticSuccess080:"rgba(48, 164, 107, 0.8)",semanticSuccess090:"rgba(48, 164, 107, 0.9)",semanticSuccess100:"rgba(48, 164, 107, 1.0)",semanticError010:"rgba(223, 74, 52, 0.1)",semanticError020:"rgba(223, 74, 52, 0.2)",semanticError030:"rgba(223, 74, 52, 0.3)",semanticError040:"rgba(223, 74, 52, 0.4)",semanticError050:"rgba(223, 74, 52, 0.5)",semanticError060:"rgba(223, 74, 52, 0.6)",semanticError070:"rgba(223, 74, 52, 0.7)",semanticError080:"rgba(223, 74, 52, 0.8)",semanticError090:"rgba(223, 74, 52, 0.9)",semanticError100:"rgba(223, 74, 52, 1.0)",semanticWarning010:"rgba(243, 161, 63, 0.1)",semanticWarning020:"rgba(243, 161, 63, 0.2)",semanticWarning030:"rgba(243, 161, 63, 0.3)",semanticWarning040:"rgba(243, 161, 63, 0.4)",semanticWarning050:"rgba(243, 161, 63, 0.5)",semanticWarning060:"rgba(243, 161, 63, 0.6)",semanticWarning070:"rgba(243, 161, 63, 0.7)",semanticWarning080:"rgba(243, 161, 63, 0.8)",semanticWarning090:"rgba(243, 161, 63, 0.9)",semanticWarning100:"rgba(243, 161, 63, 1.0)"},M6={core:{backgroundAccentPrimary:"#0988F0",backgroundAccentCertified:"#C7B994",backgroundWalletKit:"#FFB800",backgroundAppKit:"#FF573B",backgroundCloud:"#0988F0",backgroundDocumentation:"#008847",backgroundSuccess:"rgba(48, 164, 107, 0.20)",backgroundError:"rgba(223, 74, 52, 0.20)",backgroundWarning:"rgba(243, 161, 63, 0.20)",textAccentPrimary:"#0988F0",textAccentCertified:"#C7B994",textWalletKit:"#FFB800",textAppKit:"#FF573B",textCloud:"#0988F0",textDocumentation:"#008847",textSuccess:"#30A46B",textError:"#DF4A34",textWarning:"#F3A13F",borderAccentPrimary:"#0988F0",borderSecondary:"#C7B994",borderSuccess:"#30A46B",borderError:"#DF4A34",borderWarning:"#F3A13F",foregroundAccent010:"rgba(9, 136, 240, 0.1)",foregroundAccent020:"rgba(9, 136, 240, 0.2)",foregroundAccent040:"rgba(9, 136, 240, 0.4)",foregroundAccent060:"rgba(9, 136, 240, 0.6)",foregroundSecondary020:"rgba(199, 185, 148, 0.2)",foregroundSecondary040:"rgba(199, 185, 148, 0.4)",foregroundSecondary060:"rgba(199, 185, 148, 0.6)",iconAccentPrimary:"#0988F0",iconAccentCertified:"#C7B994",iconSuccess:"#30A46B",iconError:"#DF4A34",iconWarning:"#F3A13F",glass010:"rgba(255, 255, 255, 0.1)",zIndex:"9999"},dark:{overlay:"rgba(0, 0, 0, 0.50)",backgroundPrimary:"#202020",backgroundInvert:"#FFFFFF",textPrimary:"#FFFFFF",textSecondary:"#9A9A9A",textTertiary:"#BBBBBB",textInvert:"#202020",borderPrimary:"#2A2A2A",borderPrimaryDark:"#363636",borderSecondary:"#4F4F4F",foregroundPrimary:"#252525",foregroundSecondary:"#2A2A2A",foregroundTertiary:"#363636",iconDefault:"#9A9A9A",iconInverse:"#FFFFFF"},light:{overlay:"rgba(230 , 230, 230, 0.5)",backgroundPrimary:"#FFFFFF",borderPrimaryDark:"#E9E9E9",backgroundInvert:"#202020",textPrimary:"#202020",textSecondary:"#9A9A9A",textTertiary:"#6C6C6C",textInvert:"#FFFFFF",borderPrimary:"#E9E9E9",borderSecondary:"#D0D0D0",foregroundPrimary:"#F3F3F3",foregroundSecondary:"#E9E9E9",foregroundTertiary:"#D0D0D0",iconDefault:"#9A9A9A",iconInverse:"#202020"}},_3e={1:"4px",2:"8px",10:"10px",3:"12px",4:"16px",6:"24px",5:"20px",8:"32px",16:"64px",20:"80px",32:"128px",64:"256px",128:"512px",round:"9999px"},A3e={0:"0px","01":"2px",1:"4px",2:"8px",3:"12px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",9:"36px",10:"40px",12:"48px",14:"56px",16:"64px",20:"80px",32:"128px",64:"256px"},x3e={regular:"KHTeka",mono:"KHTekaMono"},C3e={regular:"400",medium:"500"},S3e={h1:"50px",h2:"44px",h3:"38px",h4:"32px",h5:"26px",h6:"20px",large:"16px",medium:"14px",small:"12px"},I3e={"h1-regular-mono":{lineHeight:"50px",letterSpacing:"-3px"},"h1-regular":{lineHeight:"50px",letterSpacing:"-1px"},"h1-medium":{lineHeight:"50px",letterSpacing:"-0.84px"},"h2-regular-mono":{lineHeight:"44px",letterSpacing:"-2.64px"},"h2-regular":{lineHeight:"44px",letterSpacing:"-0.88px"},"h2-medium":{lineHeight:"44px",letterSpacing:"-0.88px"},"h3-regular-mono":{lineHeight:"38px",letterSpacing:"-2.28px"},"h3-regular":{lineHeight:"38px",letterSpacing:"-0.76px"},"h3-medium":{lineHeight:"38px",letterSpacing:"-0.76px"},"h4-regular-mono":{lineHeight:"32px",letterSpacing:"-1.92px"},"h4-regular":{lineHeight:"32px",letterSpacing:"-0.32px"},"h4-medium":{lineHeight:"32px",letterSpacing:"-0.32px"},"h5-regular-mono":{lineHeight:"26px",letterSpacing:"-1.56px"},"h5-regular":{lineHeight:"26px",letterSpacing:"-0.26px"},"h5-medium":{lineHeight:"26px",letterSpacing:"-0.26px"},"h6-regular-mono":{lineHeight:"20px",letterSpacing:"-1.2px"},"h6-regular":{lineHeight:"20px",letterSpacing:"-0.6px"},"h6-medium":{lineHeight:"20px",letterSpacing:"-0.6px"},"lg-regular-mono":{lineHeight:"16px",letterSpacing:"-0.96px"},"lg-regular":{lineHeight:"18px",letterSpacing:"-0.16px"},"lg-medium":{lineHeight:"18px",letterSpacing:"-0.16px"},"md-regular-mono":{lineHeight:"14px",letterSpacing:"-0.84px"},"md-regular":{lineHeight:"16px",letterSpacing:"-0.14px"},"md-medium":{lineHeight:"16px",letterSpacing:"-0.14px"},"sm-regular-mono":{lineHeight:"12px",letterSpacing:"-0.72px"},"sm-regular":{lineHeight:"14px",letterSpacing:"-0.12px"},"sm-medium":{lineHeight:"14px",letterSpacing:"-0.12px"}},T3e={"ease-out-power-2":"cubic-bezier(0.23, 0.09, 0.08, 1.13)","ease-out-power-1":"cubic-bezier(0.12, 0.04, 0.2, 1.06)","ease-in-power-2":"cubic-bezier(0.92, -0.13, 0.77, 0.91)","ease-in-power-1":"cubic-bezier(0.88, -0.06, 0.8, 0.96)","ease-inout-power-2":"cubic-bezier(0.77, 0.09, 0.23, 1.13)","ease-inout-power-1":"cubic-bezier(0.88, 0.04, 0.12, 1.06)"},N3e={xl:"400ms",lg:"200ms",md:"125ms",sm:"75ms"},bO={colors:E3e,fontFamily:x3e,fontWeight:C3e,textSize:S3e,typography:I3e,tokens:{core:M6.core,theme:M6.dark},borderRadius:_3e,spacing:A3e,durations:N3e,easings:T3e},fj="--apkt";function E2(t){if(!t)return{};const e={};return e["font-family"]=t["--apkt-font-family"]??t["--w3m-font-family"]??"KHTeka",e.accent=t["--apkt-accent"]??t["--w3m-accent"]??"#0988F0",e["color-mix"]=t["--apkt-color-mix"]??t["--w3m-color-mix"]??"#000",e["color-mix-strength"]=t["--apkt-color-mix-strength"]??t["--w3m-color-mix-strength"]??0,e["font-size-master"]=t["--apkt-font-size-master"]??t["--w3m-font-size-master"]??"10px",e["border-radius-master"]=t["--apkt-border-radius-master"]??t["--w3m-border-radius-master"]??"4px",t["--apkt-z-index"]!==void 0?e["z-index"]=t["--apkt-z-index"]:t["--w3m-z-index"]!==void 0&&(e["z-index"]=t["--w3m-z-index"]),e}const Bd={createCSSVariables(t){const e={},r={};function n(i,o,a=""){for(const[c,u]of Object.entries(i)){const l=a?`${a}-${c}`:c;u&&typeof u=="object"&&Object.keys(u).length?(o[c]={},n(u,o[c],l)):typeof u=="string"&&(o[c]=`${fj}-${l}`)}}function s(i,o){for(const[a,c]of Object.entries(i))c&&typeof c=="object"?(o[a]={},s(c,o[a])):typeof c=="string"&&(o[a]=`var(${c})`)}return n(t,e),s(e,r),{cssVariables:e,cssVariablesVarPrefix:r}},assignCSSVariables(t,e){const r={};function n(s,i,o){for(const[a,c]of Object.entries(s)){const u=o?`${o}-${a}`:a,l=i[a];c&&typeof c=="object"?n(c,l,u):typeof l=="string"&&(r[`${fj}-${u}`]=l)}}return n(t,e),r},createRootStyles(t,e){const r={...bO,tokens:{...bO.tokens,theme:t==="light"?M6.light:M6.dark}},{cssVariables:n}=Bd.createCSSVariables(r),s=Bd.assignCSSVariables(n,r),i=Bd.generateW3MVariables(e),o=Bd.generateW3MOverrides(e),a=Bd.generateScaledVariables(e),c=Bd.generateBaseVariables(s),u={...s,...c,...i,...o,...a},l=Bd.applyColorMixToVariables(e,u),d={...u,...l};return`:root {${Object.entries(d).map(([p,g])=>`${p}:${g.replace("/[:;{}</>]/g","")};`).join("")}}`},generateW3MVariables(t){if(!t)return{};const e=E2(t),r={};return r["--w3m-font-family"]=e["font-family"],r["--w3m-accent"]=e.accent,r["--w3m-color-mix"]=e["color-mix"],r["--w3m-color-mix-strength"]=`${e["color-mix-strength"]}%`,r["--w3m-font-size-master"]=e["font-size-master"],r["--w3m-border-radius-master"]=e["border-radius-master"],r},generateW3MOverrides(t){if(!t)return{};const e=E2(t),r={};if(t["--apkt-accent"]||t["--w3m-accent"]){const n=e.accent;r["--apkt-tokens-core-iconAccentPrimary"]=n,r["--apkt-tokens-core-borderAccentPrimary"]=n,r["--apkt-tokens-core-textAccentPrimary"]=n,r["--apkt-tokens-core-backgroundAccentPrimary"]=n}return(t["--apkt-font-family"]||t["--w3m-font-family"])&&(r["--apkt-fontFamily-regular"]=e["font-family"]),e["z-index"]!==void 0&&(r["--apkt-tokens-core-zIndex"]=`${e["z-index"]}`),r},generateScaledVariables(t){if(!t)return{};const e=E2(t),r={};if(t["--apkt-font-size-master"]||t["--w3m-font-size-master"]){const n=parseFloat(e["font-size-master"].replace("px",""));r["--apkt-textSize-h1"]=`${Number(n)*5}px`,r["--apkt-textSize-h2"]=`${Number(n)*4.4}px`,r["--apkt-textSize-h3"]=`${Number(n)*3.8}px`,r["--apkt-textSize-h4"]=`${Number(n)*3.2}px`,r["--apkt-textSize-h5"]=`${Number(n)*2.6}px`,r["--apkt-textSize-h6"]=`${Number(n)*2}px`,r["--apkt-textSize-large"]=`${Number(n)*1.6}px`,r["--apkt-textSize-medium"]=`${Number(n)*1.4}px`,r["--apkt-textSize-small"]=`${Number(n)*1.2}px`}if(t["--apkt-border-radius-master"]||t["--w3m-border-radius-master"]){const n=parseFloat(e["border-radius-master"].replace("px",""));r["--apkt-borderRadius-1"]=`${Number(n)}px`,r["--apkt-borderRadius-2"]=`${Number(n)*2}px`,r["--apkt-borderRadius-3"]=`${Number(n)*3}px`,r["--apkt-borderRadius-4"]=`${Number(n)*4}px`,r["--apkt-borderRadius-5"]=`${Number(n)*5}px`,r["--apkt-borderRadius-6"]=`${Number(n)*6}px`,r["--apkt-borderRadius-8"]=`${Number(n)*8}px`,r["--apkt-borderRadius-16"]=`${Number(n)*16}px`,r["--apkt-borderRadius-20"]=`${Number(n)*20}px`,r["--apkt-borderRadius-32"]=`${Number(n)*32}px`,r["--apkt-borderRadius-64"]=`${Number(n)*64}px`,r["--apkt-borderRadius-128"]=`${Number(n)*128}px`}return r},generateColorMixCSS(t,e){if(!t?.["--w3m-color-mix"]||!t["--w3m-color-mix-strength"])return"";const r=t["--w3m-color-mix"],n=t["--w3m-color-mix-strength"];if(!n||n===0)return"";const s=Object.keys(e||{}).filter(o=>{const a=o.includes("-tokens-core-background")||o.includes("-tokens-core-text")||o.includes("-tokens-core-border")||o.includes("-tokens-core-foreground")||o.includes("-tokens-core-icon")||o.includes("-tokens-theme-background")||o.includes("-tokens-theme-text")||o.includes("-tokens-theme-border")||o.includes("-tokens-theme-foreground")||o.includes("-tokens-theme-icon"),c=o.includes("-borderRadius-")||o.includes("-spacing-")||o.includes("-textSize-")||o.includes("-fontFamily-")||o.includes("-fontWeight-")||o.includes("-typography-")||o.includes("-duration-")||o.includes("-ease-")||o.includes("-path-")||o.includes("-width-")||o.includes("-height-")||o.includes("-visual-size-")||o.includes("-modal-width")||o.includes("-cover");return a&&!c});return s.length===0?"":` @supports (background: color-mix(in srgb, white 50%, black)) {
      :root {
        ${s.map(o=>{const a=e?.[o]||"";return a.includes("color-mix")||a.startsWith("#")||a.startsWith("rgb")?`${o}: color-mix(in srgb, ${r} ${n}%, ${a});`:`${o}: color-mix(in srgb, ${r} ${n}%, var(${o}-base, ${a}));`}).join("")}
      }
    }`},generateBaseVariables(t){const e={},r=t["--apkt-tokens-theme-backgroundPrimary"];r&&(e["--apkt-tokens-theme-backgroundPrimary-base"]=r);const n=t["--apkt-tokens-core-backgroundAccentPrimary"];return n&&(e["--apkt-tokens-core-backgroundAccentPrimary-base"]=n),e},applyColorMixToVariables(t,e){const r={};e?.["--apkt-tokens-theme-backgroundPrimary"]&&(r["--apkt-tokens-theme-backgroundPrimary"]="var(--apkt-tokens-theme-backgroundPrimary-base)"),e?.["--apkt-tokens-core-backgroundAccentPrimary"]&&(r["--apkt-tokens-core-backgroundAccentPrimary"]="var(--apkt-tokens-core-backgroundAccentPrimary-base)");const n=E2(t),s=n["color-mix"],i=n["color-mix-strength"];if(!i||i===0)return r;const o=Object.keys(e||{}).filter(a=>{const c=a.includes("-tokens-core-background")||a.includes("-tokens-core-text")||a.includes("-tokens-core-border")||a.includes("-tokens-core-foreground")||a.includes("-tokens-core-icon")||a.includes("-tokens-theme-background")||a.includes("-tokens-theme-text")||a.includes("-tokens-theme-border")||a.includes("-tokens-theme-foreground")||a.includes("-tokens-theme-icon")||a.includes("-tokens-theme-overlay"),u=a.includes("-borderRadius-")||a.includes("-spacing-")||a.includes("-textSize-")||a.includes("-fontFamily-")||a.includes("-fontWeight-")||a.includes("-typography-")||a.includes("-duration-")||a.includes("-ease-")||a.includes("-path-")||a.includes("-width-")||a.includes("-height-")||a.includes("-visual-size-")||a.includes("-modal-width")||a.includes("-cover");return c&&!u});return o.length===0||o.forEach(a=>{const c=e?.[a]||"";a.endsWith("-base")||(a==="--apkt-tokens-theme-backgroundPrimary"||a==="--apkt-tokens-core-backgroundAccentPrimary"?r[a]=`color-mix(in srgb, ${s} ${i}%, var(${a}-base))`:c.includes("color-mix")||c.startsWith("#")||c.startsWith("rgb")?r[a]=`color-mix(in srgb, ${s} ${i}%, ${c})`:r[a]=`color-mix(in srgb, ${s} ${i}%, var(${a}-base, ${c}))`)}),r}},{cssVariablesVarPrefix:P3e}=Bd.createCSSVariables(bO);function irt(t,...e){return lo(t,...e.map(r=>ds(typeof r=="function"?r(P3e):r)))}let Kp,d0,_l,Su,D6;const Pd={"KHTeka-500-woff2":"https://fonts.reown.com/KHTeka-Medium.woff2","KHTeka-400-woff2":"https://fonts.reown.com/KHTeka-Regular.woff2","KHTeka-300-woff2":"https://fonts.reown.com/KHTeka-Light.woff2","KHTekaMono-400-woff2":"https://fonts.reown.com/KHTekaMono-Regular.woff2","KHTeka-500-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTeka-400-woff":"https://fonts.reown.com/KHTeka-Regular.woff","KHTeka-300-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTekaMono-400-woff":"https://fonts.reown.com/KHTekaMono-Regular.woff"};function j6(t,e="dark"){Kp&&document.head.removeChild(Kp),Kp=document.createElement("style"),Kp.textContent=Bd.createRootStyles(e,t),document.head.appendChild(Kp)}function ort(t,e="dark"){if(D6=t,d0=document.createElement("style"),_l=document.createElement("style"),Su=document.createElement("style"),d0.textContent=ny(t).core.cssText,_l.textContent=ny(t).dark.cssText,Su.textContent=ny(t).light.cssText,document.head.appendChild(d0),document.head.appendChild(_l),document.head.appendChild(Su),j6(t,e),wO(e),!(t?.["--apkt-font-family"]||t?.["--w3m-font-family"]))for(const[n,s]of Object.entries(Pd)){const i=document.createElement("link");i.rel="preload",i.href=s,i.as="font",i.type=n.includes("woff2")?"font/woff2":"font/woff",i.crossOrigin="anonymous",document.head.appendChild(i)}wO(e)}function wO(t="dark"){_l&&Su&&Kp&&(t==="light"?(j6(D6,t),_l.removeAttribute("media"),Su.media="enabled"):(j6(D6,t),Su.removeAttribute("media"),_l.media="enabled"))}function R3e(t){if(D6=t,d0&&_l&&Su){d0.textContent=ny(t).core.cssText,_l.textContent=ny(t).dark.cssText,Su.textContent=ny(t).light.cssText;const e=t?.["--apkt-font-family"]||t?.["--w3m-font-family"];e&&(d0.textContent=d0.textContent?.replace("font-family: KHTeka",`font-family: ${e}`),_l.textContent=_l.textContent?.replace("font-family: KHTeka",`font-family: ${e}`),Su.textContent=Su.textContent?.replace("font-family: KHTeka",`font-family: ${e}`))}if(Kp){const e=Su?.media==="enabled"?"light":"dark";j6(t,e)}}function ny(t){const e=!!(t?.["--apkt-font-family"]||t?.["--w3m-font-family"]);return{core:lo`
      ${e?lo``:lo`
            @font-face {
              font-family: 'KHTeka';
              src:
                url(${ds(Pd["KHTeka-400-woff2"])}) format('woff2'),
                url(${ds(Pd["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
              font-display: swap;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${ds(Pd["KHTeka-300-woff2"])}) format('woff2'),
                url(${ds(Pd["KHTeka-300-woff"])}) format('woff');
              font-weight: 300;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTekaMono';
              src:
                url(${ds(Pd["KHTekaMono-400-woff2"])}) format('woff2'),
                url(${ds(Pd["KHTekaMono-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${ds(Pd["KHTeka-400-woff2"])}) format('woff2'),
                url(${ds(Pd["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }
          `}

      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --apkt-modal-width: 370px;

        --apkt-visual-size-inherit: inherit;
        --apkt-visual-size-sm: 40px;
        --apkt-visual-size-md: 55px;
        --apkt-visual-size-lg: 80px;

        --apkt-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --apkt-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --apkt-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --apkt-width-network-sm: 36px;
        --apkt-width-network-md: 48px;
        --apkt-width-network-lg: 86px;

        --apkt-duration-dynamic: 0ms;
        --apkt-height-network-sm: 40px;
        --apkt-height-network-md: 54px;
        --apkt-height-network-lg: 96px;
      }
    `,dark:lo`
      :root {
      }
    `,light:lo`
      :root {
      }
    `}}const art=lo`
  div,
  span,
  iframe,
  a,
  img,
  form,
  button,
  label,
  *::after,
  *::before {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    backface-visibility: hidden;
  }

  :host {
    font-family: var(--apkt-fontFamily-regular);
  }
`,crt=lo`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;

    will-change: background-color, color, border, box-shadow, width, height, transform, opacity;
    outline: none;
    border: none;
    text-decoration: none;
    transition:
      background-color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      box-shadow var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      width var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      height var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      transform var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      opacity var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      scale var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border-radius var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2);
    will-change:
      background-color, color, border, box-shadow, width, height, transform, opacity, scale,
      border-radius;
  }

  a:active:not([disabled]),
  button:active:not([disabled]) {
    scale: 0.975;
    transform-origin: center;
  }

  button:disabled {
    cursor: default;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,mh={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603};let O3e=class extends XT{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new QT({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){const n=this.provider?.session?.namespaces?.[e]?.accounts?.map(s=>{const[,,i]=s.split(":");return i}).filter((s,i,o)=>o.indexOf(s)===i)||[];return Promise.resolve({accounts:n.map(s=>ke.createAccount(e,s,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&wr.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};const n=J.getAccountData();if(n?.balanceLoading&&e.chainId===J.state.activeCaipNetwork?.id)return{balance:n?.balance||"0.00",symbol:n?.balanceSymbol||""};const i=(await J.fetchTokenBalance()).find(o=>o.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&o.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:i?.quantity.numeric||"0.00",symbol:i?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:r,message:n,address:s}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return J.state.activeCaipNetwork?.chainNamespace===ae.CHAIN.SOLANA?i=(await r.request({method:"solana_signMessage",params:{message:Zn.encode(new TextEncoder().encode(n)),pubkey:s}},J.state.activeCaipNetwork?.caipNetworkId)).signature:i=await r.request({method:"personal_sign",params:[n,s]},J.state.activeCaipNetwork?.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===ae.CHAIN.EVM)try{await n.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:a6(r.id)}]})}catch(s){if(s.code===mh.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||s.code===mh.ERROR_INVALID_CHAIN_ID||s.code===mh.ERROR_CODE_DEFAULT||s?.data?.originalError?.code===mh.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await n.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:a6(r.id),rpcUrls:[r?.rpcUrls.chainDefault?.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[r.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(n=>n.type==="WALLET_CONNECT")?.provider}};const k3e=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication"],_2={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?wr.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(r=>r!=="email"):!1},processFallback:t=>t===void 0?wr.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?wr.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?wr.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?wr.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?wr.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?wr.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?wr.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?wr.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>wr.DEFAULT_REMOTE_FEATURES.multiWallet},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>wr.DEFAULT_REMOTE_FEATURES.payWithExchange},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>wr.DEFAULT_REMOTE_FEATURES.payments},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>typeof t>"u"?wr.DEFAULT_REMOTE_FEATURES.reownAuthentication:!!t}},B3e={localSettingsOverridden:new Set,getApiConfig(t,e){return e?.find(r=>r.id===t)},addWarning(t,e){if(t!==void 0){const r=_2[e],n=r.isLegacy?`"features.${r.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(n)}},processFeature(t,e,r,n,s){const i=_2[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(n){const a=this.getApiConfig(i.apiFeatureName,r);return a?.config===null?this.processFallbackFeature(t,o):a?.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return _2[t].processApi(e)},processFallbackFeature(t,e){return _2[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,r=t.features||{};this.localSettingsOverridden.clear();let n=null,s=!1;try{n=await pt.fetchProjectConfig(),s=n!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?wr.DEFAULT_REMOTE_FEATURES:wr.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of k3e){const a=this.processFeature(o,r,n,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),wr.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Si.open({debugMessage:Ii.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return i}};let U3e=class{constructor(e){this.chainNamespaces=[],this.features={},this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(r,n)=>{if(r){const s=J.getCaipNetworks(r)?.find(a=>a.id===n);if(s)return s;const i=J.getNetworkData(r)?.caipNetwork;return i||J.getRequestedCaipNetworks(r).filter(a=>a.chainNamespace===r)?.[0]}return J.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const r=this.getCaipNetwork();if(r)return r.id},this.getCaipNetworks=r=>J.getCaipNetworks(r),this.getActiveChainNamespace=()=>J.state.activeChain,this.setRequestedCaipNetworks=(r,n)=>{J.setRequestedCaipNetworks(r,n)},this.getApprovedCaipNetworkIds=()=>J.getAllApprovedCaipNetworkIds(),this.getCaipAddress=r=>J.state.activeChain===r||!r?J.state.activeCaipAddress:J.state.chains.get(r)?.accountState?.caipAddress,this.setClientId=r=>{kt.setClientId(r)},this.getProvider=r=>br.getProvider(r),this.getProviderType=r=>br.getProviderId(r),this.getPreferredAccountType=r=>ho(r),this.setCaipAddress=(r,n,s=!1)=>{J.setAccountProp("caipAddress",r,n,s),J.setAccountProp("address",ke.getPlainAddress(r),n,s)},this.setBalance=(r,n,s)=>{J.setAccountProp("balance",r,s),J.setAccountProp("balanceSymbol",n,s)},this.setProfileName=(r,n)=>{J.setAccountProp("profileName",r,n)},this.setProfileImage=(r,n)=>{J.setAccountProp("profileImage",r,n)},this.setUser=(r,n)=>{J.setAccountProp("user",r,n)},this.resetAccount=r=>{J.resetAccount(r)},this.setCaipNetwork=r=>{J.setActiveCaipNetwork(r)},this.setCaipNetworkOfNamespace=(r,n)=>{J.setChainNetworkData(n,{caipNetwork:r})},this.setStatus=(r,n)=>{J.setAccountProp("status",r,n),Re.isConnected()?Ae.setConnectionStatus("connected"):Ae.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=r=>J.getAccountData(r)?.address,this.setConnectors=r=>{const n=[...Re.state.allConnectors,...r];Re.setConnectors(n)},this.setConnections=(r,n)=>{Ae.setConnections(r,n),ze.setConnections(r,n)},this.fetchIdentity=r=>kt.fetchIdentity(r),this.getReownName=r=>U1.getNamesForAddress(r),this.getConnectors=()=>Re.getConnectors(),this.getConnectorImage=r=>AJ.getConnectorImage(r),this.getConnections=r=>this.remoteFeatures.multiWallet?d6.getConnectionsData(r).connections:(Si.open(ae.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=r=>this.remoteFeatures.multiWallet?d6.getConnectionsData(r).recentConnections:(Si.open(ae.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async r=>{if(!this.remoteFeatures.multiWallet){Si.open(ae.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await ze.switchConnection(r)},this.deleteConnection=r=>{if(!this.remoteFeatures.multiWallet){Si.open(ae.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}Ae.deleteAddressFromConnection(r),ze.syncStorageConnections()},this.setConnectedWalletInfo=(r,n)=>{const s=br.getProviderId(n),i=r?{...r,type:s}:void 0;J.setAccountProp("connectedWalletInfo",i,n)},this.getIsConnectedState=()=>!!J.state.activeCaipAddress,this.addAddressLabel=(r,n,s)=>{const i=J.getAccountData(s)?.addressLabels||{};J.setAccountProp("addressLabels",{...i,[r]:n},s)},this.removeAddressLabel=(r,n)=>{const s=J.getAccountData(n)?.addressLabels||{};J.setAccountProp("addressLabels",{...s,[r]:void 0},n)},this.getAddress=r=>{const n=r||J.state.activeChain;return J.getAccountData(n)?.address},this.resetNetwork=r=>{J.resetNetwork(r)},this.addConnector=r=>{Re.addConnector(r)},this.resetWcConnection=()=>{ze.resetWcConnection()},this.setAddressExplorerUrl=(r,n)=>{J.setAccountProp("addressExplorerUrl",r,n)},this.setSmartAccountDeployed=(r,n)=>{J.setAccountProp("smartAccountDeployed",r,n)},this.setPreferredAccountType=(r,n)=>{J.setAccountProp("preferredAccountType",r,n)},this.setEIP6963Enabled=r=>{we.setEIP6963Enabled(r)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,r){const n=e?.map(i=>i.namespace).filter(i=>!!i);if(n?.length)return[...new Set(n)];const s=r?.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){if(this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),we.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),!e.basic&&!e.manualWCControl&&(this.remoteFeatures=await B3e.fetchRemoteFeatures(e)),await pt.fetchUsage(),we.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&g8.setOnrampProviders(this.remoteFeatures.onramp),(we.state.remoteFeatures?.email||Array.isArray(we.state.remoteFeatures?.socials)&&we.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins(),we.state.features?.reownAuthentication||we.state.remoteFeatures?.reownAuthentication){const{ReownAuthentication:r}=await Cr(async()=>{const{ReownAuthentication:s}=await import("./features-DOk9aQsG.js");return{ReownAuthentication:s}},[]),n=we.state.siwx;n instanceof r||(n&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),we.setSIWX(new r))}}async openSend(e){const r=e.namespace||J.state.activeChain,n=this.getCaipAddress(r),s=this.getCaipNetwork(r)?.id;if(!n)throw new Error("openSend: caipAddress not found");if(s?.toString()!==e.chainId.toString()){const i=J.getCaipNetworkById(e.chainId,r);if(!i)throw new Error(`openSend: caipNetwork with chainId ${e.chainId} not found`);await this.switchNetwork(i,{throwOnFailure:!0})}try{const i=jte.getTokenSymbolByAddress(e.assetAddress);i&&await pt.fetchTokenImages([i])}catch{}return await dr.open({view:"WalletSend",data:{send:e}}),new Promise((i,o)=>{const a=tr.subscribeKey("hash",l=>{l&&(u(),i({hash:l}))}),c=dr.subscribe(l=>{l.open||(u(),o(new Error("Modal closed")))}),u=this.createCleanupHandler([a,c])})}toModalOptions(){function e(n){return n?.view==="Swap"}function r(n){return n?.view==="WalletSend"}return{isSwap:e,isSend:r}}async checkAllowedOrigins(){try{const e=await pt.fetchAllowedOrigins();if(!ke.isClient())return;const r=window.location.origin;go.isOriginAllowed(r,e,ae.DEFAULT_ALLOWED_ANCESTORS)||Si.open(Ii.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error))return;switch(e.message){case"RATE_LIMITED":Si.open(Ii.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const r=e.cause instanceof Error?e.cause:e;Si.open({displayMessage:Ii.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:Ii.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(r.message)},"error");break}}}}createCleanupHandler(e){return()=>{e.forEach(r=>{try{r()}catch{}})}}sendInitializeEvent(e){const{...r}=e;delete r.adapters,delete r.universalProvider,Zt.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(n=>n.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initAdapterController(){SJ.initialize(this.chainAdapters)}initializeThemeController(e){e.themeMode&&oa.setThemeMode(e.themeMode),e.themeVariables&&oa.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient)throw new Error("ConnectionControllerClient must be set");J.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient});const r=this.getDefaultNetwork();r&&J.setActiveCaipNetwork(r)}initializeConnectionController(e){ze.initialize(e.adapters??[]),ze.setWcBasic(e.basic??!1)}initializeConnectorController(){Re.initialize(this.chainNamespaces)}initializeProjectSettings(e){we.setProjectId(e.projectId),we.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){we.setDebug(e.debug!==!1),we.setEnableWalletGuide(e.enableWalletGuide!==!1),we.setEnableWallets(e.enableWallets!==!1),we.setEIP6963Enabled(e.enableEIP6963!==!1),we.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),we.setEnableReconnect(e.enableReconnect!==!1),we.setEnableMobileFullScreen(e.enableMobileFullScreen===!0),we.setCoinbasePreference(e.coinbasePreference),we.setEnableAuthLogger(e.enableAuthLogger!==!1),we.setCustomRpcUrls(e.customRpcUrls),we.setEnableEmbedded(e.enableEmbedded),we.setAllWallets(e.allWallets),we.setIncludeWalletIds(e.includeWalletIds),we.setExcludeWalletIds(e.excludeWalletIds),we.setFeaturedWalletIds(e.featuredWalletIds),we.setTokens(e.tokens),we.setTermsConditionsUrl(e.termsConditionsUrl),we.setPrivacyPolicyUrl(e.privacyPolicyUrl),we.setCustomWallets(e.customWallets),we.setFeatures(e.features),we.setAllowUnsupportedChain(e.allowUnsupportedChain),we.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),we.setPreferUniversalLinks(e.experimental_preferUniversalLinks),we.setDefaultAccountTypes(e.defaultAccountTypes);const r=this.getDefaultMetaData();if(!e.metadata&&r&&(e.metadata=r),we.setMetadata(e.metadata),we.setDisableAppend(e.disableAppend),we.setEnableEmbedded(e.enableEmbedded),we.setSIWX(e.siwx),this.features=we.state.features??{},!e.projectId){Si.open(Ii.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(s=>s.namespace===ae.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");we.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return ke.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=Im.getUnsupportedNetwork(`${r}:${e}`);J.setActiveCaipNetwork(n)}}getDefaultNetwork(){return Im.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return Im.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return Im.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(s=>s.id===e.defaultNetwork?.id);return r?Im.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectConnector(e,r){try{this.setLoading(!0,e);let n={connections:[]};const s=this.getAdapter(e);return(J.state.chains.get(e)?.accountState?.caipAddress||!we.state.enableReconnect)&&s?.disconnect&&(n=await s.disconnect({id:r})),this.setLoading(!1,e),n}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=J.state.activeChain,r=this.getAdapter(e),n=this.getCaipNetwork(e)?.id,s=ze.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!r)throw new Error("Adapter not found");const a=await r.connectWalletConnect(n);(!o||!i)&&this.close(),this.setClientId(a?.clientId||null),Ae.setConnectedNamespaces([...J.state.chains.keys()]),await this.syncWalletConnectAccount(),await Po.initializeIfEnabled()},connectExternal:async e=>{const r=await this.onConnectExternal(e);return await this.connectInactiveNamespaces(e,r),r?{address:r.address}:void 0},reconnectExternal:async({id:e,info:r,type:n,provider:s})=>{const i=J.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o?.reconnect&&(await o?.reconnect({id:e,info:r,type:n,provider:s,chainId:this.getCaipNetwork()?.id}),Ae.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnectConnector:async e=>{await this.disconnectConnector(e.namespace,e.id)},disconnect:async e=>{const{id:r,chainNamespace:n,initialDisconnect:s}=e||{},i=n||J.state.activeChain,o=Re.getConnectorId(i),a=r===ae.CONNECTOR_ID.AUTH||o===ae.CONNECTOR_ID.AUTH,c=r===ae.CONNECTOR_ID.WALLET_CONNECT||o===ae.CONNECTOR_ID.WALLET_CONNECT;try{const u=Array.from(J.state.chains.keys());let l=n?[n]:u;(c||a)&&(l=u);const d=l.map(async g=>{const h=Re.getConnectorId(g),y=r||h,E=await this.disconnectConnector(g,y);E&&(a&&Ae.deleteConnectedSocialProvider(),E.connections.forEach(S=>{Ae.addDisconnectedConnectorId(S.connectorId,g)})),s&&this.onDisconnectNamespace({chainNamespace:g,closeModal:!1})}),f=await Promise.allSettled(d);tr.resetSend(),ze.resetWcConnection(),Po.getSIWX()?.signOutOnDisconnect&&await Po.clearSessions(),Re.setFilterByNamespace(void 0),ze.syncStorageConnections();const p=f.filter(g=>g.status==="rejected");if(p.length>0)throw new Error(p.map(g=>g.reason.message).join(", "));Zt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:n||"all"}})}catch(u){throw new Error(`Failed to disconnect chains: ${u.message}`)}},checkInstalled:e=>e?e.some(r=>!!window.ethereum?.[String(r)]):!!window.ethereum,signMessage:async e=>{const r=J.state.activeChain,n=this.getAdapter(J.state.activeChain);if(!r)throw new Error("signMessage: namespace not found");if(!n)throw new Error("signMessage: adapter not found");const s=this.getAddress(r);if(!s)throw new Error("signMessage: address not found");return(await n?.signMessage({message:e,address:s,provider:br.getProvider(r)}))?.signature||""},sendTransaction:async e=>{const r=e.chainNamespace;if(!r)throw new Error("sendTransaction: namespace not found");if(wr.SEND_SUPPORTED_NAMESPACES.includes(r)){const n=this.getAdapter(r);if(!n)throw new Error("sendTransaction: adapter not found");const s=br.getProvider(r);return(await n?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}))?.hash||""}return""},estimateGas:async e=>{const r=e.chainNamespace;if(r===ae.CHAIN.EVM){const n=this.getAdapter(r);if(!n)throw new Error("estimateGas: adapter is required but got undefined");const s=br.getProvider(r),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");return(await n?.estimateGas({...e,provider:s,caipNetwork:i}))?.gas||0n}return 0n},getEnsAvatar:async()=>{const e=J.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");const r=this.getAddress(e);if(!r)throw new Error("getEnsAvatar: address not found");return await this.syncIdentity({address:r,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:e}),J.getAccountData()?.profileImage||!1},getEnsAddress:async e=>await go.resolveReownName(e),writeContract:async e=>{const r=J.state.activeChain,n=this.getAdapter(r);if(!r)throw new Error("writeContract: namespace is required but got undefined");if(!n)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=br.getProvider(r);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(await n?.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}))?.hash},parseUnits:(e,r)=>{const n=this.getAdapter(J.state.activeChain);if(!n)throw new Error("parseUnits: adapter is required but got undefined");return n?.parseUnits({value:e,decimals:r})??0n},formatUnits:(e,r)=>{const n=this.getAdapter(J.state.activeChain);if(!n)throw new Error("formatUnits: adapter is required but got undefined");return n?.formatUnits({value:e,decimals:r})??"0"},getCapabilities:async e=>{const r=this.getAdapter(J.state.activeChain);if(!r)throw new Error("getCapabilities: adapter is required but got undefined");return await r?.getCapabilities(e)},grantPermissions:async e=>{const r=this.getAdapter(J.state.activeChain);if(!r)throw new Error("grantPermissions: adapter is required but got undefined");return await r?.grantPermissions(e)},revokePermissions:async e=>{const r=this.getAdapter(J.state.activeChain);if(!r)throw new Error("revokePermissions: adapter is required but got undefined");return r?.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>{const r=this.getAdapter(J.state.activeChain);if(!r)throw new Error("walletGetAssets: adapter is required but got undefined");return await r?.walletGetAssets(e)??{}},updateBalance:e=>{const r=this.getAddress(e),n=this.getCaipNetwork(e);!n||!r||this.updateNativeBalance(r,n?.id,e)}},ze.setClient(this.connectionControllerClient)}async onConnectExternal(e){const r=J.state.activeChain,n=e.chain||r,s=this.getAdapter(n);let i=!0;if(e.type===cr.CONNECTOR_TYPE_AUTH&&ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(d=>Re.getConnectorId(d)===ae.CONNECTOR_ID.AUTH)&&e.chain!==r&&(i=!1),e.chain&&e.chain!==r&&!e.caipNetwork){const u=this.getCaipNetworks().find(l=>l.chainNamespace===e.chain);u&&i&&this.setCaipNetwork(u)}if(!n)throw new Error("connectExternal: namespace not found");if(!s)throw new Error("connectExternal: adapter not found");const o=this.getCaipNetwork(n),a=e.caipNetwork||o,c=await s.connect({id:e.id,address:e.address,info:e.info,type:e.type,provider:e.provider,socialUri:e.socialUri,chainId:e.caipNetwork?.id||o?.id,rpcUrl:e.caipNetwork?.rpcUrls?.default?.http?.[0]||o?.rpcUrls?.default?.http?.[0]});if(c)return Ae.addConnectedNamespace(n),this.syncProvider({...c,chainNamespace:n}),this.setStatus("connected",n),this.syncConnectedWalletInfo(n),Ae.removeDisconnectedConnectorId(e.id,n),{address:c.address,connectedCaipNetwork:a}}async connectInactiveNamespaces(e,r){const n=e.type===cr.CONNECTOR_TYPE_AUTH,s=po.getOtherAuthNamespaces(r?.connectedCaipNetwork?.chainNamespace),i=J.state.activeCaipNetwork,o=this.getAdapter(i?.chainNamespace);n&&(await Promise.all(s.map(async a=>{try{const c=br.getProvider(a),u=this.getCaipNetwork(a);await this.getAdapter(a)?.connect({...e,provider:c,socialUri:void 0,chainId:u?.id,rpcUrl:u?.rpcUrls?.default?.http?.[0]})&&(Ae.addConnectedNamespace(a),Ae.removeDisconnectedConnectorId(e.id,a),this.setStatus("connected",a),this.syncConnectedWalletInfo(a))}catch(c){Si.warn(Ii.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.displayMessage,Ii.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.debugMessage(a,c instanceof Error?c.message:void 0),Ii.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.code)}})),i&&await o?.switchNetwork({caipNetwork:i}))}getApprovedCaipNetworksData(){if(br.getProviderId(J.state.activeChain)===cr.CONNECTOR_TYPE_WALLET_CONNECT){const r=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(r)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=br.getProviderId(r);if(e.chainNamespace===J.state.activeChain)await this.getAdapter(r)?.switchNetwork({caipNetwork:e});else if(this.setCaipNetwork(e),s===cr.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const i=this.getAddressByChainNamespace(r);i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],s=r.accounts.map(i=>{const{chainId:o,chainNamespace:a}=xs.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...n,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{const s=e?.find(i=>i.namespace===n);return s?(s.construct({namespace:n,projectId:this.options?.projectId,networks:this.caipNetworks?.filter(({chainNamespace:i})=>i===n)}),r[n]=s):r[n]=new O3e({namespace:n,networks:this.getCaipNetworks()}),r},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e);const r=this.getAdapter(e);if(!r)throw new Error("adapter not found");await r.syncConnectors(),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)})),this.initAdapterController()}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=Ae.getConnectionStatus();we.state.enableReconnect===!1?this.setStatus("disconnected",e):n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(Ae.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(u=>u.id.toString()===i.toString()||u.caipNetworkId.toString()===i.toString()),a=J.state.activeChain===e,c=J.state.chains.get(e)?.accountState?.address;if(o){const u=a&&s?s:c;u&&this.syncAccount({address:u,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),r.on("disconnect",()=>{const s=this.remoteFeatures.multiWallet,i=Array.from(ze.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!s||i.length===0})}),r.on("connections",s=>{this.setConnections(s,e)}),r.on("pendingTransactions",()=>{const s=this.getAddress(e),i=J.state.activeCaipNetwork;!s||!i?.id||this.updateNativeBalance(s,i.id,i.chainNamespace)}),r.on("accountChanged",({address:s,chainId:i,connector:o})=>{this.handlePreviousConnectorConnection(o);const a=J.state.activeChain===e;o?.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o?.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e));const c=J.getNetworkData(e)?.caipNetwork?.id,u=i||c;a&&u?this.syncAccount({address:s,chainId:u,chainNamespace:e}):!a&&u?(this.syncAccountInfo(s,u,e),this.syncBalance({address:s,chainId:u,chainNamespace:e})):this.syncAccountInfo(s,i,e),Ae.addConnectedNamespace(e)})}async handlePreviousConnectorConnection(e){const r=e?.chain,n=e?.id,s=Re.getConnectorId(r),i=we.state.remoteFeatures?.multiWallet,a=r&&n&&s&&s!==n&&!i;try{a&&await ze.disconnect({id:s,namespace:r})}catch(c){console.warn("Error disconnecting previous connector",c)}}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&await this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>ze.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async reconnectWalletConnect(){await this.syncWalletConnectAccount();const e=this.getAddress();this.getCaipAddress()||Ae.deleteRecentWallet();const r=Ae.getRecentWallet();Zt.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:ke.isMobile()?"mobile":"qrcode",name:r?.name||"Unknown",reconnect:!0,view:It.state.view,walletRank:r?.order}})}async syncNamespaceConnection(e){try{e===ae.CHAIN.EVM&&ke.isSafeApp()&&Re.setConnectorId(ae.CONNECTOR_ID.SAFE,e);const r=Re.getConnectorId(e);switch(this.setStatus("connecting",e),r){case ae.CONNECTOR_ID.WALLET_CONNECT:await this.reconnectWalletConnect();break;case ae.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:r,closeModal:n}=e||{};J.resetAccount(r),J.resetNetwork(r),Ae.removeConnectedNamespace(r);const s=Array.from(J.state.chains.keys());(r?[r]:s).forEach(o=>Ae.addDisconnectedConnectorId(Re.getConnectorId(o)||"",o)),Re.removeConnectorId(r),br.resetChain(r),this.setUser(null,r),this.setStatus("disconnected",r),this.setConnectedWalletInfo(null,r),n!==!1&&dr.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const r=this.getAdapter(e),n=this.getCaipAddress(e),s=this.getCaipNetwork(e);return r?.syncConnections({connectToFirstConnector:!n,caipNetwork:s})}))}async syncAdapterConnection(e){const r=this.getAdapter(e),n=this.getCaipNetwork(e),s=Re.getConnectorId(e),o=Re.getConnectors(e).find(a=>a.id===s);try{if(!r||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!n?.id)throw new Error("CaipNetwork not found");const a=await r?.syncConnection({namespace:e,id:o.id,chainId:n.id,rpcUrl:n?.rpcUrls?.default?.http?.[0]});a?(this.syncProvider({...a,chainNamespace:e}),await this.syncAccount({...a,chainNamespace:e}),this.setStatus("connected",e),Zt.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:a.address,properties:{method:"browser",name:o.info?.name||o.name||"Unknown",reconnect:!0,view:It.state.view,walletRank:o?.explorerWallet?.order}})):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){const e=Object.keys(this.universalProvider?.session?.namespaces||{}),r=this.chainNamespaces.map(async n=>{const s=this.getAdapter(n);if(!s)return;const i=this.universalProvider?.session?.namespaces?.[n]?.accounts||[],o=J.state.activeCaipNetwork?.id,a=i.find(u=>{const{chainId:l}=xs.parseCaipAddress(u);return l===o?.toString()})||i[0];if(a){const u=xs.validateCaipAddress(a),{chainId:l,address:d}=xs.parseCaipAddress(u);if(br.setProviderId(n,cr.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&J.state.activeCaipNetwork&&s.namespace!==ae.CHAIN.EVM){const f=s.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:J.state.activeCaipNetwork});br.setProvider(n,f)}else br.setProvider(n,this.universalProvider);Re.setConnectorId(ae.CONNECTOR_ID.WALLET_CONNECT,n),Ae.addConnectedNamespace(n),await this.syncAccount({address:d,chainId:l,chainNamespace:n})}else e.includes(n)&&this.setStatus("disconnected",n);const c=this.getApprovedCaipNetworksData();this.syncConnectedWalletInfo(n),J.setApprovedCaipNetworksData(n,{approvedCaipNetworkIds:c.approvedCaipNetworkIds,supportsAllNetworks:c.supportsAllNetworks})});await Promise.all(r)}syncProvider({type:e,provider:r,id:n,chainNamespace:s}){br.setProviderId(s,e),br.setProvider(s,r),Re.setConnectorId(n,s)}async syncAccount(e){const r=e.chainNamespace===J.state.activeChain,n=J.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Ae.getActiveNetworkProps(),c=n?.id||a,u=J.state.activeCaipNetwork?.name===ae.UNSUPPORTED_NETWORK_NAME,l=J.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(u&&!l)&&c){let d=this.getCaipNetworks().find(h=>h.id.toString()===c.toString()),f=this.getCaipNetworks().find(h=>h.chainNamespace===o);if(!l&&!d&&!f){const h=this.getApprovedCaipNetworkIds()||[],y=h.find(S=>xs.parseCaipNetworkId(S)?.chainId===c.toString()),E=h.find(S=>xs.parseCaipNetworkId(S)?.chainNamespace===o);d=this.getCaipNetworks().find(S=>S.caipNetworkId===y),f=this.getCaipNetworks().find(S=>S.caipNetworkId===E||"deprecatedCaipNetworkId"in S&&S.deprecatedCaipNetworkId===E)}const p=d||f;p?.chainNamespace===J.state.activeChain?we.state.enableNetworkSwitch&&!we.state.allowUnsupportedChain&&J.state.activeCaipNetwork?.name===ae.UNSUPPORTED_NETWORK_NAME?J.showUnsupportedChainUI():this.setCaipNetwork(p):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o);const g=this.getAddress(o);po.isLowerCaseMatch(s,g)||this.syncAccountInfo(s,p?.id,o),r?await this.syncBalance({address:s,chainId:p?.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:n?.id,chainNamespace:o}),this.syncIdentity({address:s,chainId:i,chainNamespace:o})}}async syncAccountInfo(e,r,n){const s=this.getCaipAddress(n),i=r||s?.split(":")[1];if(!i)return;const o=`${n}:${i}:${e}`;this.setCaipAddress(o,n,!0),await this.syncIdentity({address:e,chainId:i,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const s=n[0];this.setProfileName(s.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){const r=Re.getConnectorId(e),n=br.getProviderId(e);if(n===cr.CONNECTOR_TYPE_ANNOUNCED||n===cr.CONNECTOR_TYPE_INJECTED){if(r){const i=this.getConnectors().find(o=>{const a=o.id===r,c=o.info?.rdns===r,u=o.connectors?.some(l=>l.id===r||l.info?.rdns===r);return a||c||!!u});if(i){const{info:o,name:a,imageUrl:c}=i,u=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:u,...o},e)}}}else if(n===cr.CONNECTOR_TYPE_WALLET_CONNECT){const s=br.getProvider(e);s?.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:s.session.peer.metadata.icons?.[0]},e)}else if(r&&(r===ae.CONNECTOR_ID.COINBASE_SDK||r===ae.CONNECTOR_ID.COINBASE)){const s=this.getConnectors().find(c=>c.id===r),i=s?.name||"Coinbase Wallet",o=s?.imageUrl||this.getConnectorImage(s),a=s?.info;this.setConnectedWalletInfo({...a,name:i,icon:o},e)}}async syncBalance(e){!FY.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(n=>n.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,r,n){const s=this.getAdapter(n),i=J.getCaipNetworkByNamespace(n,r);if(s){const o=await s.getBalance({address:e,chainId:r,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,n),o}}async initializeUniversalAdapter(){const e=Y5e.createLogger((s,...i)=>{s&&this.handleAlertError(s),console.error(...i)}),r={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};we.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await v5e.init(r);const n=this.universalProvider.disconnect.bind(this.universalProvider);this.universalProvider.disconnect=async()=>{try{return await n()}catch(s){if(s instanceof Error&&s.message.includes("Missing or invalid. Record was recently deleted"))return;throw s}},we.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{go.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:r=>{ze.setUri(r)},onConnect:r=>{const{address:n}=ke.getAccount(r[0]);ze.finalizeWcConnection(n)},onDisconnect:()=>{J.state.noAdapters&&this.resetAccount(e),ze.resetWcConnection()},onChainChanged:r=>{const n=J.state.activeChain,s=n&&Re.state.activeConnectorIds[n]===ae.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(J.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===r.toString()||a.caipNetworkId.toString()===r.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(r);return}o?.id.toString()!==i?.id.toString()&&o?.chainNamespace===i?.chainNamespace&&this.setCaipNetwork(i)}},onAccountsChanged:r=>{const n=J.state.activeChain,s=n&&Re.state.activeConnectorIds[n]===ae.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(J.state.noAdapters||s)){const i=r?.[0];i&&this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){return!this.universalProviderInitPromise&&ke.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Zt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}getDisabledCaipNetworks(){const e=J.getAllApprovedCaipNetworkIds(),r=J.getAllRequestedCaipNetworks();return ke.sortRequestedNetworks(e,r).filter(s=>J.isCaipNetworkDisabled(s))}handleAlertError(e){const r=Object.entries(Ii.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,s]=r??[],{message:i,alertErrorKey:o}=s??{};if(n&&i&&!this.reportedAlertErrors[n]){const a=Ii.ALERT_ERRORS[o];a&&(Si.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:this.options?.projectId,networks:this.caipNetworks?.filter(({chainNamespace:s})=>s===r)}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){await this.injectModalUi(),e?.uri&&ze.setUri(e.uri);const{isSwap:r,isSend:n}=this.toModalOptions();return r(e)?dr.open({...e,data:{swap:e.arguments}}):n(e)&&e.arguments?this.openSend(e.arguments):dr.open(e)}async close(){await this.injectModalUi(),dr.close()}setLoading(e,r){dr.setLoading(e,r)}async disconnect(e){await ze.disconnect({namespace:e})}getSIWX(){return we.state.siwx}getError(){return""}getChainId(){return J.state.activeCaipNetwork?.id}async switchNetwork(e,{throwOnFailure:r=!1}={}){const n=this.getCaipNetworks().find(s=>s.id===e.id);if(!n){Si.open(Ii.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await J.switchActiveNetwork(n,{throwOnFailure:r})}getWalletProvider(){return J.state.activeChain?br.state.providers[J.state.activeChain]:null}getWalletProviderType(){return br.getProviderId(J.state.activeChain)}subscribeProviders(e){return br.subscribeProviders(e)}getThemeMode(){return oa.state.themeMode}getThemeVariables(){return oa.state.themeVariables}setThemeMode(e){oa.setThemeMode(e),wO(oa.state.themeMode)}setTermsConditionsUrl(e){we.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){we.setPrivacyPolicyUrl(e)}setThemeVariables(e){oa.setThemeVariables(e),R3e(oa.state.themeVariables)}subscribeTheme(e){return oa.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?ze.subscribe(e):(Si.open(ae.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?J.state.chains.get(e)?.accountState?.connectedWalletInfo:J.getAccountData()?.connectedWalletInfo}getAccount(e){const r=e||J.state.activeChain,n=Re.getAuthConnector(r),s=J.getAccountData(r),i=Ae.getConnectedConnectorId(J.state.activeChain),o=ze.getConnections(r);if(!r)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:u,type:l,publicKey:d})=>ke.createAccount(r,u,l||"eoa",d)));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:ke.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:n&&i===ae.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:Ae.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:ho(r),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const s=this.getAccount(r);s&&e(s)};r?J.subscribeChainProp("accountState",n,r):J.subscribe(n),Re.subscribe(n)}subscribeNetwork(e){return J.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r?.id,caipNetworkId:r?.caipNetworkId})})}subscribeWalletInfo(e,r){return r?J.subscribeChainProp("accountState",n=>e(n?.connectedWalletInfo),r):J.subscribeChainProp("accountState",n=>e(n?.connectedWalletInfo))}subscribeShouldUpdateToAddress(e){J.subscribeChainProp("accountState",r=>e(r?.shouldUpdateToAddress))}subscribeCaipNetworkChange(e){J.subscribeKey("activeCaipNetwork",e)}getState(){return Nu.state}getRemoteFeatures(){return we.state.remoteFeatures}subscribeState(e){return Nu.subscribe(e)}subscribeRemoteFeatures(e){return we.subscribeKey("remoteFeatures",e)}showErrorMessage(e){vl.showError(e)}showSuccessMessage(e){vl.showSuccess(e)}getEvent(){return{...Zt.state}}subscribeEvents(e){return Zt.subscribe(e)}replace(e){It.replace(e)}redirect(e){It.push(e)}popTransactionStack(e){It.popTransactionStack(e)}isOpen(){return dr.state.open}isTransactionStackEmpty(){return It.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){we.setFeatures(e)}updateRemoteFeatures(e){we.setRemoteFeatures(e)}updateOptions(e){const n={...we.state||{},...e};we.setOptions(n)}setConnectMethodsOrder(e){we.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){we.setWalletFeaturesOrder(e)}setCollapseWallets(e){we.setCollapseWallets(e)}setSocialsOrder(e){we.setSocialsOrder(e)}getConnectMethodsOrder(){return v1.getConnectOrderMethod(we.state.features,Re.getConnectors())}addNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);this.getCaipNetworks().find(s=>s.id===n.id)||J.addNetwork(n)}removeNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===r)&&J.removeNetwork(e,r)}},hj=!1,M3e=class extends U3e{async onAuthProviderConnected(e){const r=po.userChainIdToChainNamespace(e?.chainId);if(e.message&&e.signature&&e.siwxMessage&&await Po.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature),!r)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const n=r===ae.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=we.state.defaultAccountTypes[r],i=ho(r),o=e.preferredAccountType||i||s;this.setCaipAddress(n,r);const{signature:a,siwxMessage:c,message:u,...l}=e,d=J.getAccountData(r);this.setUser({...d?.user||{},...l},r),this.setSmartAccountDeployed(!!e.smartAccountDeployed,r),this.setPreferredAccountType(o,r),await Promise.all([this.syncAuthConnectorTheme(this.authProvider),this.syncAccount({address:e.address,chainId:e.chainId,chainNamespace:r})]),this.setLoading(!1,r)}setupAuthConnectorListeners(e){e.onRpcRequest(r=>{rc.checkIfRequestExists(r)?rc.checkIfRequestIsSafe(r)||this.handleUnsafeRPCRequest():(this.open(),console.error(Ss.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:r.method}),setTimeout(()=>{this.showErrorMessage(Ss.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((r,n)=>{const s=rc.checkIfRequestIsSafe(n),i=this.getAddress(),o=J.state.activeCaipNetwork;s||(i&&o?.id&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const r=J.state.activeChain;if(!r)throw new Error("AppKit:onNotConnected - namespace is required");Re.getConnectorId(r)===ae.CONNECTOR_ID.AUTH&&(this.setCaipAddress(null,r),this.setLoading(!1,r))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:r,type:n})=>{const s=J.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");r&&this.setPreferredAccountType(n,s)})}async syncAuthConnectorTheme(e){if(!e)return;const r=oa.getSnapshot();await e.syncTheme({themeMode:r.themeMode,themeVariables:r.themeVariables,w3mThemeVariables:sv(r.themeVariables,r.themeMode)})}async syncAuthConnector(e,r){const n=ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r),s=r===J.state.activeChain;if(!n)return;this.setLoading(!0,r);const i=e.getLoginEmailUsed();this.setLoading(i,r),i&&this.setStatus("connecting",r);const o=e.getEmail(),a=e.getUsername(),c=J.getAccountData(r)?.user||{};this.setUser({...c,username:a,email:o},r),this.setupAuthConnectorListeners(e);const{isConnected:u}=await e.isConnected();if(r&&n&&s)if(u&&this.connectionControllerClient?.connectExternal){await e.init(),await this.syncAuthConnectorTheme(e),await this.connectionControllerClient?.connectExternal({id:ae.CONNECTOR_ID.AUTH,info:{name:ae.CONNECTOR_ID.AUTH},type:cr.CONNECTOR_TYPE_AUTH,provider:e,chainId:J.getNetworkData(r)?.caipNetwork?.id,chain:r}),this.setStatus("connected",r);const l=Ae.getConnectedSocialProvider();l?Zt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",address:this.getAddress(),properties:{provider:l,reconnect:!0}}):Zt.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:this.getAddress(),properties:{method:"email",name:this.universalProvider?.session?.peer?.metadata?.name||"Unknown",reconnect:!0,view:It.state.view,walletRank:void 0}})}else Re.getConnectorId(r)===ae.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",r),Ae.removeConnectedNamespace(r));this.setLoading(!1,r)}async checkExistingTelegramSocialConnection(e){try{if(!ke.isTelegram())return;const r=Ae.getTelegramSocialProvider();if(!r||!ke.isClient())return;const s=new URL(window.location.href).searchParams.get("result_uri");if(!s)return;r&&J.setAccountProp("socialProvider",r,e),await this.authProvider?.init();const i=Re.getAuthConnector();r&&i&&(this.setLoading(!0,e),await ze.connectExternal({id:i.id,type:i.type,socialUri:s},i.chain),Ae.setConnectedSocialProvider(r),Ae.removeTelegramSocialProvider(),Zt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){if(!ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const n=this.remoteFeatures?.email,s=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,i=n||s,a=po.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&this.options?.projectId&&i&&(this.authProvider=X5e.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(a)?.caipNetworkId,abortController:Ii.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Si.open(Ii.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Si.open(Ii.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Si.open(Ii.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:u=>m1(u),getCaipNetworks:u=>J.getCaipNetworks(u)}),Nu.subscribeOpen(u=>{!u&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}));const c=e===J.state.activeChain&&we.state.enableReconnect;we.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&pt.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;const r=J.state.activeChain,n=e.chainNamespace,s=this.getAddressByChainNamespace(n);if(n===r&&J.getAccountData(n)?.caipAddress)await this.getAdapter(n)?.switchNetwork({caipNetwork:e}),this.setCaipNetwork(e);else{const a=br.getProviderId(r)===cr.CONNECTOR_TYPE_AUTH,c=br.getProviderId(n),u=c===cr.CONNECTOR_TYPE_AUTH,l=ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!n)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((a&&c===void 0||u)&&l)try{J.state.activeChain=e.chainNamespace,s?await this.getAdapter(n)?.switchNetwork({caipNetwork:e}):await this.connectionControllerClient?.connectExternal?.({id:ae.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:n,chainId:e.id,type:cr.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{await this.getAdapter(n)?.switchNetwork({caipNetwork:e})}else c===cr.CONNECTOR_TYPE_WALLET_CONNECT?(J.state.noAdapters||await this.getAdapter(n)?.switchNetwork({caipNetwork:e}),this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:n}))}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Nu.set({initialized:!0})}async syncIdentity({address:e,chainId:r,chainNamespace:n}){const s=`${n}:${r}`;if(this.caipNetworks?.find(a=>a.caipNetworkId===s)?.testnet){this.setProfileName(null,n),this.setProfileImage(null,n);return}const o=Re.getConnectorId(n)===ae.CONNECTOR_ID.AUTH;try{const{name:a,avatar:c}=await this.fetchIdentity({address:e});!a&&o?await this.syncReownName(e,n):(this.setProfileName(a,n),this.setProfileImage(c,n))}catch{r!==1&&this.setProfileImage(null,n)}}syncConnectedWalletInfo(e){const r=br.getProviderId(e);if(r===cr.CONNECTOR_TYPE_AUTH){const n=this.authProvider;if(n){const s=Ae.getConnectedSocialProvider()??"email",i=n.getEmail()??n.getUsername();this.setConnectedWalletInfo({name:r,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ke.isClient()&&!hj)try{const e={...wr.DEFAULT_FEATURES,...this.options.features},r=this.remoteFeatures;if(await this.loadModalComponents(e,r),ke.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!we.state.disableAppend&&!we.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}hj=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,r){if(!ke.isClient())return;const n=[];(r.email||r.socials&&r.socials.length>0)&&n.push(Cr(()=>import("./embedded-wallet-DJmM9gaN.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),r.email&&n.push(Cr(()=>import("./email-CKVwek_g.js"),__vite__mapDeps([18,5,4,19,16,10,15,7,8,9,14,20,12]))),r.socials&&n.push(Cr(()=>import("./socials-BFRWnNY8.js"),__vite__mapDeps([21,4,7,5,22,8,9,23,15,24,14,10,25,6,26,27]))),r.swaps&&r.swaps.length>0&&n.push(Cr(()=>import("./swaps-BGFNZCTy.js"),__vite__mapDeps([28,4,5,14,10,15,7,29,30,31,27,32,6,12,8,9]))),e.send&&n.push(Cr(()=>import("./send-C8fWcGGF.js"),__vite__mapDeps([33,4,5,14,10,15,7,34,8,9,35,16,32,6,27,31,12,36,37]))),e.receive&&n.push(Cr(()=>import("./receive-CRaLc1JJ.js"),__vite__mapDeps([38,4,7,5,6,25,26]))),r.onramp&&r.onramp.length>0&&n.push(Cr(()=>import("./onramp-DzC9CWIh.js"),__vite__mapDeps([39,4,7,5,40,10,22,8,9,6,41,42,16,14,15,24,12]))),r.payWithExchange&&n.push(Cr(()=>import("./pay-with-exchange-mdriwBdj.js"),__vite__mapDeps([43,4,7,5,6,13,40,10,27,14,35,8,9,16,44,15,12,36,34]))),r.activity&&n.push(Cr(()=>import("./transactions-CbLjxml1.js"),__vite__mapDeps([45,5,4,46,47,15,7,16,6,27]))),(e.pay||r.payments)&&n.push(Cr(()=>import("./index-bN5qDOBM.js"),__vite__mapDeps([48,4,7,5,14,10,49,13,6,40,50,34,51,15,24]))),r.emailCapture&&n.push(Cr(()=>import("./data-capture-DLhRNwHj.js"),__vite__mapDeps([52,4,5,19,16,10,53]))),await Promise.all([...n,Cr(()=>import("./index-ChoWaquB.js"),__vite__mapDeps([54,4,7,5,6,10,37,15,55,42,16,11,51,13,40,14,44,46,47,27,36,29,30,34,8,9,12,50,20,22,23,24,25,26,17,41])),Cr(()=>import("./w3m-modal-Bf_ofIjs.js"),__vite__mapDeps([56,4,7,5,49,6,11,10,15,30,55,42,16,51,31,14]))])}};const D3e="1.8.14";function j3e(t){return new M3e({...t,sdkVersion:ke.generateSdkVersion(t.adapters??[],"html",D3e)})}const Of=BigInt(0),ti=BigInt(1),HN=BigInt(2),L3e=BigInt(8);function F3e(t,e,r,n){const s=t.sqr(r),i=t.sqr(n),o=t.add(t.mul(e.a,s),i),a=t.add(t.ONE,t.mul(e.d,t.mul(s,i)));return t.eql(o,a)}function $3e(t,e={}){const r=vQ("edwards",t,e,e.FpFnLE),{Fp:n,Fn:s}=r;let i=r.CURVE;const{h:o}=i;FE(e,{},{uvRatio:"function"});const a=HN<<BigInt(s.BYTES*8)-ti,c=y=>n.create(y),u=e.uvRatio||((y,E)=>{try{return{isValid:!0,value:n.sqrt(n.div(y,E))}}catch{return{isValid:!1,value:Of}}});if(!F3e(n,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function l(y,E,S=!1){const C=S?ti:Of;return k8("coordinate "+y,E,C,a),E}function d(y){if(!(y instanceof g))throw new Error("ExtendedPoint expected")}const f=E6((y,E)=>{const{X:S,Y:C,Z:_}=y,T=y.is0();E==null&&(E=T?L3e:n.inv(_));const P=c(S*E),D=c(C*E),L=n.mul(_,E);if(T)return{x:Of,y:ti};if(L!==ti)throw new Error("invZ was invalid");return{x:P,y:D}}),p=E6(y=>{const{a:E,d:S}=i;if(y.is0())throw new Error("bad point: ZERO");const{X:C,Y:_,Z:T,T:P}=y,D=c(C*C),L=c(_*_),I=c(T*T),U=c(I*I),F=c(D*E),B=c(I*c(F+L)),A=c(U+c(S*c(D*L)));if(B!==A)throw new Error("bad point: equation left != right (1)");const m=c(C*_),b=c(T*P);if(m!==b)throw new Error("bad point: equation left != right (2)");return!0});class g{constructor(E,S,C,_){this.X=l("x",E),this.Y=l("y",S),this.Z=l("z",C,!0),this.T=l("t",_),Object.freeze(this)}static CURVE(){return i}static fromAffine(E){if(E instanceof g)throw new Error("extended point not allowed");const{x:S,y:C}=E||{};return l("x",S),l("y",C),new g(S,C,ti,c(S*C))}static fromBytes(E,S=!1){const C=n.BYTES,{a:_,d:T}=i;E=NM(Pu(E,C,"point")),P0(S,"zip215");const P=NM(E),D=E[C-1];P[C-1]=D&-129;const L=Hv(P),I=S?a:n.ORDER;k8("point.y",L,Of,I);const U=c(L*L),F=c(U-ti),B=c(T*U-_);let{isValid:A,value:m}=u(F,B);if(!A)throw new Error("bad point: invalid y coordinate");const b=(m&ti)===ti,w=(D&128)!==0;if(!S&&m===Of&&w)throw new Error("bad point: x=0 and x_0=1");return w!==b&&(m=c(-m)),g.fromAffine({x:m,y:L})}static fromHex(E,S=!1){return g.fromBytes(hs("point",E),S)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(E=8,S=!0){return h.createCache(this,E),S||this.multiply(HN),this}assertValidity(){p(this)}equals(E){d(E);const{X:S,Y:C,Z:_}=this,{X:T,Y:P,Z:D}=E,L=c(S*D),I=c(T*_),U=c(C*D),F=c(P*_);return L===I&&U===F}is0(){return this.equals(g.ZERO)}negate(){return new g(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:E}=i,{X:S,Y:C,Z:_}=this,T=c(S*S),P=c(C*C),D=c(HN*c(_*_)),L=c(E*T),I=S+C,U=c(c(I*I)-T-P),F=L+P,B=F-D,A=L-P,m=c(U*B),b=c(F*A),w=c(U*A),x=c(B*F);return new g(m,b,x,w)}add(E){d(E);const{a:S,d:C}=i,{X:_,Y:T,Z:P,T:D}=this,{X:L,Y:I,Z:U,T:F}=E,B=c(_*L),A=c(T*I),m=c(D*C*F),b=c(P*U),w=c((_+T)*(L+I)-B-A),x=b-m,M=b+m,k=c(A-S*B),j=c(w*x),N=c(M*k),v=c(w*k),R=c(x*M);return new g(j,N,R,v)}subtract(E){return this.add(E.negate())}multiply(E){if(!s.isValidNot0(E))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:S,f:C}=h.cached(this,E,_=>i0(g,_));return i0(g,[S,C])[0]}multiplyUnsafe(E,S=g.ZERO){if(!s.isValid(E))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return E===Of?g.ZERO:this.is0()||E===ti?this:h.unsafe(this,E,C=>i0(g,C),S)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return h.unsafe(this,i.n).is0()}toAffine(E){return f(this,E)}clearCofactor(){return o===ti?this:this.multiplyUnsafe(o)}toBytes(){const{x:E,y:S}=this.toAffine(),C=n.toBytes(S);return C[C.length-1]|=E&ti?128:0,C}toHex(){return v0(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(E){return i0(g,E)}static msm(E,S){return wQ(g,s,E,S)}_setWindowSize(E){this.precompute(E)}toRawBytes(){return this.toBytes()}}g.BASE=new g(i.Gx,i.Gy,ti,c(i.Gx*i.Gy)),g.ZERO=new g(Of,ti,ti,Of),g.Fp=n,g.Fn=s;const h=new bQ(g,s.BITS);return g.BASE.precompute(8),g}function q3e(t,e,r={}){if(typeof e!="function")throw new Error('"hash" function param is required');FE(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=r,{BASE:s,Fp:i,Fn:o}=t,a=r.randomBytes||ek,c=r.adjustScalarBytes||(I=>I),u=r.domain||((I,U,F)=>{if(P0(F,"phflag"),U.length||F)throw new Error("Contexts/pre-hash are not supported");return I});function l(I){return o.create(Hv(I))}function d(I){const U=C.secretKey;I=hs("private key",I,U);const F=hs("hashed private key",e(I),2*U),B=c(F.slice(0,U)),A=F.slice(U,2*U),m=l(B);return{head:B,prefix:A,scalar:m}}function f(I){const{head:U,prefix:F,scalar:B}=d(I),A=s.multiply(B),m=A.toBytes();return{head:U,prefix:F,scalar:B,point:A,pointBytes:m}}function p(I){return f(I).pointBytes}function g(I=Uint8Array.of(),...U){const F=bl(...U);return l(e(u(F,hs("context",I),!!n)))}function h(I,U,F={}){I=hs("message",I),n&&(I=n(I));const{prefix:B,scalar:A,pointBytes:m}=f(U),b=g(F.context,B,I),w=s.multiply(b).toBytes(),x=g(F.context,w,m,I),M=o.create(b+x*A);if(!o.isValid(M))throw new Error("sign failed: invalid s");const k=bl(w,o.toBytes(M));return Pu(k,C.signature,"result")}const y={zip215:!0};function E(I,U,F,B=y){const{context:A,zip215:m}=B,b=C.signature;I=hs("signature",I,b),U=hs("message",U),F=hs("publicKey",F,C.publicKey),m!==void 0&&P0(m,"zip215"),n&&(U=n(U));const w=b/2,x=I.subarray(0,w),M=Hv(I.subarray(w,b));let k,j,N;try{k=t.fromBytes(F,m),j=t.fromBytes(x,m),N=s.multiplyUnsafe(M)}catch{return!1}if(!m&&k.isSmallOrder())return!1;const v=g(A,j.toBytes(),k.toBytes(),U);return j.add(k.multiplyUnsafe(v)).subtract(N).clearCofactor().is0()}const S=i.BYTES,C={secretKey:S,publicKey:S,signature:2*S,seed:S};function _(I=a(C.seed)){return Pu(I,C.seed,"seed")}function T(I){const U=L.randomSecretKey(I);return{secretKey:U,publicKey:p(U)}}function P(I){return jE(I)&&I.length===o.BYTES}function D(I,U){try{return!!t.fromBytes(I,U)}catch{return!1}}const L={getExtendedPublicKey:f,randomSecretKey:_,isValidSecretKey:P,isValidPublicKey:D,toMontgomery(I){const{y:U}=t.fromBytes(I),F=C.publicKey,B=F===32;if(!B&&F!==57)throw new Error("only defined for 25519 and 448");const A=B?i.div(ti+U,ti-U):i.div(U-ti,U+ti);return i.toBytes(A)},toMontgomerySecret(I){const U=C.secretKey;Pu(I,U);const F=e(I.subarray(0,U));return c(F).subarray(0,U)},randomPrivateKey:_,precompute(I=8,U=t.BASE){return U.precompute(I,!1)}};return Object.freeze({keygen:T,getPublicKey:p,sign:h,verify:E,utils:L,Point:t,lengths:C})}function H3e(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=Z0(e.n,t.nBitLength,!0),s={Fp:r,Fn:n,uvRatio:t.uvRatio},i={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:s,hash:t.hash,eddsaOpts:i}}function z3e(t,e){const r=e.Point;return Object.assign({},e,{ExtendedPoint:r,CURVE:t,nBitLength:r.Fn.BITS,nByteLength:r.Fn.BYTES})}function W3e(t){const{CURVE:e,curveOpts:r,hash:n,eddsaOpts:s}=H3e(t),i=$3e(e,r),o=q3e(i,n,s);return z3e(t,o)}const V3e=BigInt(1),pj=BigInt(2);BigInt(3);const G3e=BigInt(5),K3e=BigInt(8),Ok=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Kte={p:Ok,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:K3e,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Z3e(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=Ok,a=t*t%i*t%i,c=ls(a,pj,i)*a%i,u=ls(c,V3e,i)*t%i,l=ls(u,G3e,i)*u%i,d=ls(l,e,i)*l%i,f=ls(d,r,i)*d%i,p=ls(f,n,i)*f%i,g=ls(p,s,i)*p%i,h=ls(g,s,i)*p%i,y=ls(h,e,i)*l%i;return{pow_p_5_8:ls(y,pj,i)*t%i,b2:a}}function Y3e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const gj=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function J3e(t,e){const r=Ok,n=ks(e*e*e,r),s=ks(n*n*e,r),i=Z3e(t*s).pow_p_5_8;let o=ks(t*n*i,r);const a=ks(e*o*o,r),c=o,u=ks(o*gj,r),l=a===t,d=a===ks(-t,r),f=a===ks(-t*gj,r);return l&&(o=c),(d||f)&&(o=u),swe(o,r)&&(o=ks(-o,r)),{isValid:l||d,value:o}}const X3e=Z0(Kte.p,{isLE:!0}),Q3e={...Kte,Fp:X3e,hash:Swe,adjustScalarBytes:Y3e,uvRatio:J3e},KE=W3e(Q3e);var SI={exports:{}};const eNe={},tNe=Object.freeze(Object.defineProperty({__proto__:null,default:eNe},Symbol.toStringTag,{value:"Module"})),rNe=Ln(tNe);var nNe=SI.exports,mj;function Zte(){return mj||(mj=1,(function(t){(function(e,r){function n(A,m){if(!A)throw new Error(m||"Assertion failed")}function s(A,m){A.super_=m;var b=function(){};b.prototype=m.prototype,A.prototype=new b,A.prototype.constructor=A}function i(A,m,b){if(i.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((m==="le"||m==="be")&&(b=m,m=10),this._init(A||0,m||10,b||"be"))}typeof e=="object"?e.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=rNe.Buffer}catch{}i.isBN=function(m){return m instanceof i?!0:m!==null&&typeof m=="object"&&m.constructor.wordSize===i.wordSize&&Array.isArray(m.words)},i.max=function(m,b){return m.cmp(b)>0?m:b},i.min=function(m,b){return m.cmp(b)<0?m:b},i.prototype._init=function(m,b,w){if(typeof m=="number")return this._initNumber(m,b,w);if(typeof m=="object")return this._initArray(m,b,w);b==="hex"&&(b=16),n(b===(b|0)&&b>=2&&b<=36),m=m.toString().replace(/\s+/g,"");var x=0;m[0]==="-"&&(x++,this.negative=1),x<m.length&&(b===16?this._parseHex(m,x,w):(this._parseBase(m,b,x),w==="le"&&this._initArray(this.toArray(),b,w)))},i.prototype._initNumber=function(m,b,w){m<0&&(this.negative=1,m=-m),m<67108864?(this.words=[m&67108863],this.length=1):m<4503599627370496?(this.words=[m&67108863,m/67108864&67108863],this.length=2):(n(m<9007199254740992),this.words=[m&67108863,m/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),b,w)},i.prototype._initArray=function(m,b,w){if(n(typeof m.length=="number"),m.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(m.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var M,k,j=0;if(w==="be")for(x=m.length-1,M=0;x>=0;x-=3)k=m[x]|m[x-1]<<8|m[x-2]<<16,this.words[M]|=k<<j&67108863,this.words[M+1]=k>>>26-j&67108863,j+=24,j>=26&&(j-=26,M++);else if(w==="le")for(x=0,M=0;x<m.length;x+=3)k=m[x]|m[x+1]<<8|m[x+2]<<16,this.words[M]|=k<<j&67108863,this.words[M+1]=k>>>26-j&67108863,j+=24,j>=26&&(j-=26,M++);return this._strip()};function a(A,m){var b=A.charCodeAt(m);if(b>=48&&b<=57)return b-48;if(b>=65&&b<=70)return b-55;if(b>=97&&b<=102)return b-87;n(!1,"Invalid character in "+A)}function c(A,m,b){var w=a(A,b);return b-1>=m&&(w|=a(A,b-1)<<4),w}i.prototype._parseHex=function(m,b,w){this.length=Math.ceil((m.length-b)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var M=0,k=0,j;if(w==="be")for(x=m.length-1;x>=b;x-=2)j=c(m,b,x)<<M,this.words[k]|=j&67108863,M>=18?(M-=18,k+=1,this.words[k]|=j>>>26):M+=8;else{var N=m.length-b;for(x=N%2===0?b+1:b;x<m.length;x+=2)j=c(m,b,x)<<M,this.words[k]|=j&67108863,M>=18?(M-=18,k+=1,this.words[k]|=j>>>26):M+=8}this._strip()};function u(A,m,b,w){for(var x=0,M=0,k=Math.min(A.length,b),j=m;j<k;j++){var N=A.charCodeAt(j)-48;x*=w,N>=49?M=N-49+10:N>=17?M=N-17+10:M=N,n(N>=0&&M<w,"Invalid character"),x+=M}return x}i.prototype._parseBase=function(m,b,w){this.words=[0],this.length=1;for(var x=0,M=1;M<=67108863;M*=b)x++;x--,M=M/b|0;for(var k=m.length-w,j=k%x,N=Math.min(k,k-j)+w,v=0,R=w;R<N;R+=x)v=u(m,R,R+x,b),this.imuln(M),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(j!==0){var $=1;for(v=u(m,R,m.length,b),R=0;R<j;R++)$*=b;this.imuln($),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}this._strip()},i.prototype.copy=function(m){m.words=new Array(this.length);for(var b=0;b<this.length;b++)m.words[b]=this.words[b];m.length=this.length,m.negative=this.negative,m.red=this.red};function l(A,m){A.words=m.words,A.length=m.length,A.negative=m.negative,A.red=m.red}if(i.prototype._move=function(m){l(m,this)},i.prototype.clone=function(){var m=new i(null);return this.copy(m),m},i.prototype._expand=function(m){for(;this.length<m;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch{i.prototype.inspect=d}else i.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(m,b){m=m||10,b=b|0||1;var w;if(m===16||m==="hex"){w="";for(var x=0,M=0,k=0;k<this.length;k++){var j=this.words[k],N=((j<<x|M)&16777215).toString(16);M=j>>>24-x&16777215,x+=2,x>=26&&(x-=26,k--),M!==0||k!==this.length-1?w=f[6-N.length]+N+w:w=N+w}for(M!==0&&(w=M.toString(16)+w);w.length%b!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(m===(m|0)&&m>=2&&m<=36){var v=p[m],R=g[m];w="";var $=this.clone();for($.negative=0;!$.isZero();){var O=$.modrn(R).toString(m);$=$.idivn(R),$.isZero()?w=O+w:w=f[v-O.length]+O+w}for(this.isZero()&&(w="0"+w);w.length%b!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var m=this.words[0];return this.length===2?m+=this.words[1]*67108864:this.length===3&&this.words[2]===1?m+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-m:m},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(m,b){return this.toArrayLike(o,m,b)}),i.prototype.toArray=function(m,b){return this.toArrayLike(Array,m,b)};var h=function(m,b){return m.allocUnsafe?m.allocUnsafe(b):new m(b)};i.prototype.toArrayLike=function(m,b,w){this._strip();var x=this.byteLength(),M=w||Math.max(1,x);n(x<=M,"byte array longer than desired length"),n(M>0,"Requested array length <= 0");var k=h(m,M),j=b==="le"?"LE":"BE";return this["_toArrayLike"+j](k,x),k},i.prototype._toArrayLikeLE=function(m,b){for(var w=0,x=0,M=0,k=0;M<this.length;M++){var j=this.words[M]<<k|x;m[w++]=j&255,w<m.length&&(m[w++]=j>>8&255),w<m.length&&(m[w++]=j>>16&255),k===6?(w<m.length&&(m[w++]=j>>24&255),x=0,k=0):(x=j>>>24,k+=2)}if(w<m.length)for(m[w++]=x;w<m.length;)m[w++]=0},i.prototype._toArrayLikeBE=function(m,b){for(var w=m.length-1,x=0,M=0,k=0;M<this.length;M++){var j=this.words[M]<<k|x;m[w--]=j&255,w>=0&&(m[w--]=j>>8&255),w>=0&&(m[w--]=j>>16&255),k===6?(w>=0&&(m[w--]=j>>24&255),x=0,k=0):(x=j>>>24,k+=2)}if(w>=0)for(m[w--]=x;w>=0;)m[w--]=0},Math.clz32?i.prototype._countBits=function(m){return 32-Math.clz32(m)}:i.prototype._countBits=function(m){var b=m,w=0;return b>=4096&&(w+=13,b>>>=13),b>=64&&(w+=7,b>>>=7),b>=8&&(w+=4,b>>>=4),b>=2&&(w+=2,b>>>=2),w+b},i.prototype._zeroBits=function(m){if(m===0)return 26;var b=m,w=0;return(b&8191)===0&&(w+=13,b>>>=13),(b&127)===0&&(w+=7,b>>>=7),(b&15)===0&&(w+=4,b>>>=4),(b&3)===0&&(w+=2,b>>>=2),(b&1)===0&&w++,w},i.prototype.bitLength=function(){var m=this.words[this.length-1],b=this._countBits(m);return(this.length-1)*26+b};function y(A){for(var m=new Array(A.bitLength()),b=0;b<m.length;b++){var w=b/26|0,x=b%26;m[b]=A.words[w]>>>x&1}return m}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var m=0,b=0;b<this.length;b++){var w=this._zeroBits(this.words[b]);if(m+=w,w!==26)break}return m},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(m){return this.negative!==0?this.abs().inotn(m).iaddn(1):this.clone()},i.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(m){for(;this.length<m.length;)this.words[this.length++]=0;for(var b=0;b<m.length;b++)this.words[b]=this.words[b]|m.words[b];return this._strip()},i.prototype.ior=function(m){return n((this.negative|m.negative)===0),this.iuor(m)},i.prototype.or=function(m){return this.length>m.length?this.clone().ior(m):m.clone().ior(this)},i.prototype.uor=function(m){return this.length>m.length?this.clone().iuor(m):m.clone().iuor(this)},i.prototype.iuand=function(m){var b;this.length>m.length?b=m:b=this;for(var w=0;w<b.length;w++)this.words[w]=this.words[w]&m.words[w];return this.length=b.length,this._strip()},i.prototype.iand=function(m){return n((this.negative|m.negative)===0),this.iuand(m)},i.prototype.and=function(m){return this.length>m.length?this.clone().iand(m):m.clone().iand(this)},i.prototype.uand=function(m){return this.length>m.length?this.clone().iuand(m):m.clone().iuand(this)},i.prototype.iuxor=function(m){var b,w;this.length>m.length?(b=this,w=m):(b=m,w=this);for(var x=0;x<w.length;x++)this.words[x]=b.words[x]^w.words[x];if(this!==b)for(;x<b.length;x++)this.words[x]=b.words[x];return this.length=b.length,this._strip()},i.prototype.ixor=function(m){return n((this.negative|m.negative)===0),this.iuxor(m)},i.prototype.xor=function(m){return this.length>m.length?this.clone().ixor(m):m.clone().ixor(this)},i.prototype.uxor=function(m){return this.length>m.length?this.clone().iuxor(m):m.clone().iuxor(this)},i.prototype.inotn=function(m){n(typeof m=="number"&&m>=0);var b=Math.ceil(m/26)|0,w=m%26;this._expand(b),w>0&&b--;for(var x=0;x<b;x++)this.words[x]=~this.words[x]&67108863;return w>0&&(this.words[x]=~this.words[x]&67108863>>26-w),this._strip()},i.prototype.notn=function(m){return this.clone().inotn(m)},i.prototype.setn=function(m,b){n(typeof m=="number"&&m>=0);var w=m/26|0,x=m%26;return this._expand(w+1),b?this.words[w]=this.words[w]|1<<x:this.words[w]=this.words[w]&~(1<<x),this._strip()},i.prototype.iadd=function(m){var b;if(this.negative!==0&&m.negative===0)return this.negative=0,b=this.isub(m),this.negative^=1,this._normSign();if(this.negative===0&&m.negative!==0)return m.negative=0,b=this.isub(m),m.negative=1,b._normSign();var w,x;this.length>m.length?(w=this,x=m):(w=m,x=this);for(var M=0,k=0;k<x.length;k++)b=(w.words[k]|0)+(x.words[k]|0)+M,this.words[k]=b&67108863,M=b>>>26;for(;M!==0&&k<w.length;k++)b=(w.words[k]|0)+M,this.words[k]=b&67108863,M=b>>>26;if(this.length=w.length,M!==0)this.words[this.length]=M,this.length++;else if(w!==this)for(;k<w.length;k++)this.words[k]=w.words[k];return this},i.prototype.add=function(m){var b;return m.negative!==0&&this.negative===0?(m.negative=0,b=this.sub(m),m.negative^=1,b):m.negative===0&&this.negative!==0?(this.negative=0,b=m.sub(this),this.negative=1,b):this.length>m.length?this.clone().iadd(m):m.clone().iadd(this)},i.prototype.isub=function(m){if(m.negative!==0){m.negative=0;var b=this.iadd(m);return m.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(m),this.negative=1,this._normSign();var w=this.cmp(m);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var x,M;w>0?(x=this,M=m):(x=m,M=this);for(var k=0,j=0;j<M.length;j++)b=(x.words[j]|0)-(M.words[j]|0)+k,k=b>>26,this.words[j]=b&67108863;for(;k!==0&&j<x.length;j++)b=(x.words[j]|0)+k,k=b>>26,this.words[j]=b&67108863;if(k===0&&j<x.length&&x!==this)for(;j<x.length;j++)this.words[j]=x.words[j];return this.length=Math.max(this.length,j),x!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(m){return this.clone().isub(m)};function E(A,m,b){b.negative=m.negative^A.negative;var w=A.length+m.length|0;b.length=w,w=w-1|0;var x=A.words[0]|0,M=m.words[0]|0,k=x*M,j=k&67108863,N=k/67108864|0;b.words[0]=j;for(var v=1;v<w;v++){for(var R=N>>>26,$=N&67108863,O=Math.min(v,m.length-1),H=Math.max(0,v-A.length+1);H<=O;H++){var W=v-H|0;x=A.words[W]|0,M=m.words[H]|0,k=x*M+$,R+=k/67108864|0,$=k&67108863}b.words[v]=$|0,N=R|0}return N!==0?b.words[v]=N|0:b.length--,b._strip()}var S=function(m,b,w){var x=m.words,M=b.words,k=w.words,j=0,N,v,R,$=x[0]|0,O=$&8191,H=$>>>13,W=x[1]|0,G=W&8191,K=W>>>13,Q=x[2]|0,re=Q&8191,de=Q>>>13,le=x[3]|0,se=le&8191,be=le>>>13,We=x[4]|0,Ne=We&8191,Be=We>>>13,At=x[5]|0,Ee=At&8191,fe=At>>>13,Mt=x[6]|0,bt=Mt&8191,jt=Mt>>>13,ge=x[7]|0,ve=ge&8191,V=ge>>>13,q=x[8]|0,z=q&8191,X=q>>>13,ne=x[9]|0,ce=ne&8191,me=ne>>>13,Rt=M[0]|0,Tt=Rt&8191,Ct=Rt>>>13,or=M[1]|0,Et=or&8191,on=or>>>13,Qc=M[2]|0,Qr=Qc&8191,Wr=Qc>>>13,eu=M[3]|0,an=eu&8191,Vr=eu>>>13,tu=M[4]|0,Gr=tu&8191,cn=tu>>>13,vo=M[5]|0,Ir=vo&8191,un=vo>>>13,Eo=M[6]|0,Tr=Eo&8191,Kr=Eo>>>13,ru=M[7]|0,ln=ru&8191,Zr=ru>>>13,nu=M[8]|0,en=nu&8191,dn=nu>>>13,Ba=M[9]|0,tn=Ba&8191,Br=Ba>>>13;w.negative=m.negative^b.negative,w.length=19,N=Math.imul(O,Tt),v=Math.imul(O,Ct),v=v+Math.imul(H,Tt)|0,R=Math.imul(H,Ct);var yc=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(yc>>>26)|0,yc&=67108863,N=Math.imul(G,Tt),v=Math.imul(G,Ct),v=v+Math.imul(K,Tt)|0,R=Math.imul(K,Ct),N=N+Math.imul(O,Et)|0,v=v+Math.imul(O,on)|0,v=v+Math.imul(H,Et)|0,R=R+Math.imul(H,on)|0;var bc=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(bc>>>26)|0,bc&=67108863,N=Math.imul(re,Tt),v=Math.imul(re,Ct),v=v+Math.imul(de,Tt)|0,R=Math.imul(de,Ct),N=N+Math.imul(G,Et)|0,v=v+Math.imul(G,on)|0,v=v+Math.imul(K,Et)|0,R=R+Math.imul(K,on)|0,N=N+Math.imul(O,Qr)|0,v=v+Math.imul(O,Wr)|0,v=v+Math.imul(H,Qr)|0,R=R+Math.imul(H,Wr)|0;var wc=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(wc>>>26)|0,wc&=67108863,N=Math.imul(se,Tt),v=Math.imul(se,Ct),v=v+Math.imul(be,Tt)|0,R=Math.imul(be,Ct),N=N+Math.imul(re,Et)|0,v=v+Math.imul(re,on)|0,v=v+Math.imul(de,Et)|0,R=R+Math.imul(de,on)|0,N=N+Math.imul(G,Qr)|0,v=v+Math.imul(G,Wr)|0,v=v+Math.imul(K,Qr)|0,R=R+Math.imul(K,Wr)|0,N=N+Math.imul(O,an)|0,v=v+Math.imul(O,Vr)|0,v=v+Math.imul(H,an)|0,R=R+Math.imul(H,Vr)|0;var vc=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(vc>>>26)|0,vc&=67108863,N=Math.imul(Ne,Tt),v=Math.imul(Ne,Ct),v=v+Math.imul(Be,Tt)|0,R=Math.imul(Be,Ct),N=N+Math.imul(se,Et)|0,v=v+Math.imul(se,on)|0,v=v+Math.imul(be,Et)|0,R=R+Math.imul(be,on)|0,N=N+Math.imul(re,Qr)|0,v=v+Math.imul(re,Wr)|0,v=v+Math.imul(de,Qr)|0,R=R+Math.imul(de,Wr)|0,N=N+Math.imul(G,an)|0,v=v+Math.imul(G,Vr)|0,v=v+Math.imul(K,an)|0,R=R+Math.imul(K,Vr)|0,N=N+Math.imul(O,Gr)|0,v=v+Math.imul(O,cn)|0,v=v+Math.imul(H,Gr)|0,R=R+Math.imul(H,cn)|0;var Ec=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(Ec>>>26)|0,Ec&=67108863,N=Math.imul(Ee,Tt),v=Math.imul(Ee,Ct),v=v+Math.imul(fe,Tt)|0,R=Math.imul(fe,Ct),N=N+Math.imul(Ne,Et)|0,v=v+Math.imul(Ne,on)|0,v=v+Math.imul(Be,Et)|0,R=R+Math.imul(Be,on)|0,N=N+Math.imul(se,Qr)|0,v=v+Math.imul(se,Wr)|0,v=v+Math.imul(be,Qr)|0,R=R+Math.imul(be,Wr)|0,N=N+Math.imul(re,an)|0,v=v+Math.imul(re,Vr)|0,v=v+Math.imul(de,an)|0,R=R+Math.imul(de,Vr)|0,N=N+Math.imul(G,Gr)|0,v=v+Math.imul(G,cn)|0,v=v+Math.imul(K,Gr)|0,R=R+Math.imul(K,cn)|0,N=N+Math.imul(O,Ir)|0,v=v+Math.imul(O,un)|0,v=v+Math.imul(H,Ir)|0,R=R+Math.imul(H,un)|0;var mf=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(mf>>>26)|0,mf&=67108863,N=Math.imul(bt,Tt),v=Math.imul(bt,Ct),v=v+Math.imul(jt,Tt)|0,R=Math.imul(jt,Ct),N=N+Math.imul(Ee,Et)|0,v=v+Math.imul(Ee,on)|0,v=v+Math.imul(fe,Et)|0,R=R+Math.imul(fe,on)|0,N=N+Math.imul(Ne,Qr)|0,v=v+Math.imul(Ne,Wr)|0,v=v+Math.imul(Be,Qr)|0,R=R+Math.imul(Be,Wr)|0,N=N+Math.imul(se,an)|0,v=v+Math.imul(se,Vr)|0,v=v+Math.imul(be,an)|0,R=R+Math.imul(be,Vr)|0,N=N+Math.imul(re,Gr)|0,v=v+Math.imul(re,cn)|0,v=v+Math.imul(de,Gr)|0,R=R+Math.imul(de,cn)|0,N=N+Math.imul(G,Ir)|0,v=v+Math.imul(G,un)|0,v=v+Math.imul(K,Ir)|0,R=R+Math.imul(K,un)|0,N=N+Math.imul(O,Tr)|0,v=v+Math.imul(O,Kr)|0,v=v+Math.imul(H,Tr)|0,R=R+Math.imul(H,Kr)|0;var yg=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(yg>>>26)|0,yg&=67108863,N=Math.imul(ve,Tt),v=Math.imul(ve,Ct),v=v+Math.imul(V,Tt)|0,R=Math.imul(V,Ct),N=N+Math.imul(bt,Et)|0,v=v+Math.imul(bt,on)|0,v=v+Math.imul(jt,Et)|0,R=R+Math.imul(jt,on)|0,N=N+Math.imul(Ee,Qr)|0,v=v+Math.imul(Ee,Wr)|0,v=v+Math.imul(fe,Qr)|0,R=R+Math.imul(fe,Wr)|0,N=N+Math.imul(Ne,an)|0,v=v+Math.imul(Ne,Vr)|0,v=v+Math.imul(Be,an)|0,R=R+Math.imul(Be,Vr)|0,N=N+Math.imul(se,Gr)|0,v=v+Math.imul(se,cn)|0,v=v+Math.imul(be,Gr)|0,R=R+Math.imul(be,cn)|0,N=N+Math.imul(re,Ir)|0,v=v+Math.imul(re,un)|0,v=v+Math.imul(de,Ir)|0,R=R+Math.imul(de,un)|0,N=N+Math.imul(G,Tr)|0,v=v+Math.imul(G,Kr)|0,v=v+Math.imul(K,Tr)|0,R=R+Math.imul(K,Kr)|0,N=N+Math.imul(O,ln)|0,v=v+Math.imul(O,Zr)|0,v=v+Math.imul(H,ln)|0,R=R+Math.imul(H,Zr)|0;var yb=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(yb>>>26)|0,yb&=67108863,N=Math.imul(z,Tt),v=Math.imul(z,Ct),v=v+Math.imul(X,Tt)|0,R=Math.imul(X,Ct),N=N+Math.imul(ve,Et)|0,v=v+Math.imul(ve,on)|0,v=v+Math.imul(V,Et)|0,R=R+Math.imul(V,on)|0,N=N+Math.imul(bt,Qr)|0,v=v+Math.imul(bt,Wr)|0,v=v+Math.imul(jt,Qr)|0,R=R+Math.imul(jt,Wr)|0,N=N+Math.imul(Ee,an)|0,v=v+Math.imul(Ee,Vr)|0,v=v+Math.imul(fe,an)|0,R=R+Math.imul(fe,Vr)|0,N=N+Math.imul(Ne,Gr)|0,v=v+Math.imul(Ne,cn)|0,v=v+Math.imul(Be,Gr)|0,R=R+Math.imul(Be,cn)|0,N=N+Math.imul(se,Ir)|0,v=v+Math.imul(se,un)|0,v=v+Math.imul(be,Ir)|0,R=R+Math.imul(be,un)|0,N=N+Math.imul(re,Tr)|0,v=v+Math.imul(re,Kr)|0,v=v+Math.imul(de,Tr)|0,R=R+Math.imul(de,Kr)|0,N=N+Math.imul(G,ln)|0,v=v+Math.imul(G,Zr)|0,v=v+Math.imul(K,ln)|0,R=R+Math.imul(K,Zr)|0,N=N+Math.imul(O,en)|0,v=v+Math.imul(O,dn)|0,v=v+Math.imul(H,en)|0,R=R+Math.imul(H,dn)|0;var bg=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(bg>>>26)|0,bg&=67108863,N=Math.imul(ce,Tt),v=Math.imul(ce,Ct),v=v+Math.imul(me,Tt)|0,R=Math.imul(me,Ct),N=N+Math.imul(z,Et)|0,v=v+Math.imul(z,on)|0,v=v+Math.imul(X,Et)|0,R=R+Math.imul(X,on)|0,N=N+Math.imul(ve,Qr)|0,v=v+Math.imul(ve,Wr)|0,v=v+Math.imul(V,Qr)|0,R=R+Math.imul(V,Wr)|0,N=N+Math.imul(bt,an)|0,v=v+Math.imul(bt,Vr)|0,v=v+Math.imul(jt,an)|0,R=R+Math.imul(jt,Vr)|0,N=N+Math.imul(Ee,Gr)|0,v=v+Math.imul(Ee,cn)|0,v=v+Math.imul(fe,Gr)|0,R=R+Math.imul(fe,cn)|0,N=N+Math.imul(Ne,Ir)|0,v=v+Math.imul(Ne,un)|0,v=v+Math.imul(Be,Ir)|0,R=R+Math.imul(Be,un)|0,N=N+Math.imul(se,Tr)|0,v=v+Math.imul(se,Kr)|0,v=v+Math.imul(be,Tr)|0,R=R+Math.imul(be,Kr)|0,N=N+Math.imul(re,ln)|0,v=v+Math.imul(re,Zr)|0,v=v+Math.imul(de,ln)|0,R=R+Math.imul(de,Zr)|0,N=N+Math.imul(G,en)|0,v=v+Math.imul(G,dn)|0,v=v+Math.imul(K,en)|0,R=R+Math.imul(K,dn)|0,N=N+Math.imul(O,tn)|0,v=v+Math.imul(O,Br)|0,v=v+Math.imul(H,tn)|0,R=R+Math.imul(H,Br)|0;var wg=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(wg>>>26)|0,wg&=67108863,N=Math.imul(ce,Et),v=Math.imul(ce,on),v=v+Math.imul(me,Et)|0,R=Math.imul(me,on),N=N+Math.imul(z,Qr)|0,v=v+Math.imul(z,Wr)|0,v=v+Math.imul(X,Qr)|0,R=R+Math.imul(X,Wr)|0,N=N+Math.imul(ve,an)|0,v=v+Math.imul(ve,Vr)|0,v=v+Math.imul(V,an)|0,R=R+Math.imul(V,Vr)|0,N=N+Math.imul(bt,Gr)|0,v=v+Math.imul(bt,cn)|0,v=v+Math.imul(jt,Gr)|0,R=R+Math.imul(jt,cn)|0,N=N+Math.imul(Ee,Ir)|0,v=v+Math.imul(Ee,un)|0,v=v+Math.imul(fe,Ir)|0,R=R+Math.imul(fe,un)|0,N=N+Math.imul(Ne,Tr)|0,v=v+Math.imul(Ne,Kr)|0,v=v+Math.imul(Be,Tr)|0,R=R+Math.imul(Be,Kr)|0,N=N+Math.imul(se,ln)|0,v=v+Math.imul(se,Zr)|0,v=v+Math.imul(be,ln)|0,R=R+Math.imul(be,Zr)|0,N=N+Math.imul(re,en)|0,v=v+Math.imul(re,dn)|0,v=v+Math.imul(de,en)|0,R=R+Math.imul(de,dn)|0,N=N+Math.imul(G,tn)|0,v=v+Math.imul(G,Br)|0,v=v+Math.imul(K,tn)|0,R=R+Math.imul(K,Br)|0;var bb=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(bb>>>26)|0,bb&=67108863,N=Math.imul(ce,Qr),v=Math.imul(ce,Wr),v=v+Math.imul(me,Qr)|0,R=Math.imul(me,Wr),N=N+Math.imul(z,an)|0,v=v+Math.imul(z,Vr)|0,v=v+Math.imul(X,an)|0,R=R+Math.imul(X,Vr)|0,N=N+Math.imul(ve,Gr)|0,v=v+Math.imul(ve,cn)|0,v=v+Math.imul(V,Gr)|0,R=R+Math.imul(V,cn)|0,N=N+Math.imul(bt,Ir)|0,v=v+Math.imul(bt,un)|0,v=v+Math.imul(jt,Ir)|0,R=R+Math.imul(jt,un)|0,N=N+Math.imul(Ee,Tr)|0,v=v+Math.imul(Ee,Kr)|0,v=v+Math.imul(fe,Tr)|0,R=R+Math.imul(fe,Kr)|0,N=N+Math.imul(Ne,ln)|0,v=v+Math.imul(Ne,Zr)|0,v=v+Math.imul(Be,ln)|0,R=R+Math.imul(Be,Zr)|0,N=N+Math.imul(se,en)|0,v=v+Math.imul(se,dn)|0,v=v+Math.imul(be,en)|0,R=R+Math.imul(be,dn)|0,N=N+Math.imul(re,tn)|0,v=v+Math.imul(re,Br)|0,v=v+Math.imul(de,tn)|0,R=R+Math.imul(de,Br)|0;var wb=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(wb>>>26)|0,wb&=67108863,N=Math.imul(ce,an),v=Math.imul(ce,Vr),v=v+Math.imul(me,an)|0,R=Math.imul(me,Vr),N=N+Math.imul(z,Gr)|0,v=v+Math.imul(z,cn)|0,v=v+Math.imul(X,Gr)|0,R=R+Math.imul(X,cn)|0,N=N+Math.imul(ve,Ir)|0,v=v+Math.imul(ve,un)|0,v=v+Math.imul(V,Ir)|0,R=R+Math.imul(V,un)|0,N=N+Math.imul(bt,Tr)|0,v=v+Math.imul(bt,Kr)|0,v=v+Math.imul(jt,Tr)|0,R=R+Math.imul(jt,Kr)|0,N=N+Math.imul(Ee,ln)|0,v=v+Math.imul(Ee,Zr)|0,v=v+Math.imul(fe,ln)|0,R=R+Math.imul(fe,Zr)|0,N=N+Math.imul(Ne,en)|0,v=v+Math.imul(Ne,dn)|0,v=v+Math.imul(Be,en)|0,R=R+Math.imul(Be,dn)|0,N=N+Math.imul(se,tn)|0,v=v+Math.imul(se,Br)|0,v=v+Math.imul(be,tn)|0,R=R+Math.imul(be,Br)|0;var vg=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(vg>>>26)|0,vg&=67108863,N=Math.imul(ce,Gr),v=Math.imul(ce,cn),v=v+Math.imul(me,Gr)|0,R=Math.imul(me,cn),N=N+Math.imul(z,Ir)|0,v=v+Math.imul(z,un)|0,v=v+Math.imul(X,Ir)|0,R=R+Math.imul(X,un)|0,N=N+Math.imul(ve,Tr)|0,v=v+Math.imul(ve,Kr)|0,v=v+Math.imul(V,Tr)|0,R=R+Math.imul(V,Kr)|0,N=N+Math.imul(bt,ln)|0,v=v+Math.imul(bt,Zr)|0,v=v+Math.imul(jt,ln)|0,R=R+Math.imul(jt,Zr)|0,N=N+Math.imul(Ee,en)|0,v=v+Math.imul(Ee,dn)|0,v=v+Math.imul(fe,en)|0,R=R+Math.imul(fe,dn)|0,N=N+Math.imul(Ne,tn)|0,v=v+Math.imul(Ne,Br)|0,v=v+Math.imul(Be,tn)|0,R=R+Math.imul(Be,Br)|0;var vb=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(vb>>>26)|0,vb&=67108863,N=Math.imul(ce,Ir),v=Math.imul(ce,un),v=v+Math.imul(me,Ir)|0,R=Math.imul(me,un),N=N+Math.imul(z,Tr)|0,v=v+Math.imul(z,Kr)|0,v=v+Math.imul(X,Tr)|0,R=R+Math.imul(X,Kr)|0,N=N+Math.imul(ve,ln)|0,v=v+Math.imul(ve,Zr)|0,v=v+Math.imul(V,ln)|0,R=R+Math.imul(V,Zr)|0,N=N+Math.imul(bt,en)|0,v=v+Math.imul(bt,dn)|0,v=v+Math.imul(jt,en)|0,R=R+Math.imul(jt,dn)|0,N=N+Math.imul(Ee,tn)|0,v=v+Math.imul(Ee,Br)|0,v=v+Math.imul(fe,tn)|0,R=R+Math.imul(fe,Br)|0;var Eb=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(Eb>>>26)|0,Eb&=67108863,N=Math.imul(ce,Tr),v=Math.imul(ce,Kr),v=v+Math.imul(me,Tr)|0,R=Math.imul(me,Kr),N=N+Math.imul(z,ln)|0,v=v+Math.imul(z,Zr)|0,v=v+Math.imul(X,ln)|0,R=R+Math.imul(X,Zr)|0,N=N+Math.imul(ve,en)|0,v=v+Math.imul(ve,dn)|0,v=v+Math.imul(V,en)|0,R=R+Math.imul(V,dn)|0,N=N+Math.imul(bt,tn)|0,v=v+Math.imul(bt,Br)|0,v=v+Math.imul(jt,tn)|0,R=R+Math.imul(jt,Br)|0;var _b=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(_b>>>26)|0,_b&=67108863,N=Math.imul(ce,ln),v=Math.imul(ce,Zr),v=v+Math.imul(me,ln)|0,R=Math.imul(me,Zr),N=N+Math.imul(z,en)|0,v=v+Math.imul(z,dn)|0,v=v+Math.imul(X,en)|0,R=R+Math.imul(X,dn)|0,N=N+Math.imul(ve,tn)|0,v=v+Math.imul(ve,Br)|0,v=v+Math.imul(V,tn)|0,R=R+Math.imul(V,Br)|0;var Ab=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(Ab>>>26)|0,Ab&=67108863,N=Math.imul(ce,en),v=Math.imul(ce,dn),v=v+Math.imul(me,en)|0,R=Math.imul(me,dn),N=N+Math.imul(z,tn)|0,v=v+Math.imul(z,Br)|0,v=v+Math.imul(X,tn)|0,R=R+Math.imul(X,Br)|0;var xb=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(xb>>>26)|0,xb&=67108863,N=Math.imul(ce,tn),v=Math.imul(ce,Br),v=v+Math.imul(me,tn)|0,R=Math.imul(me,Br);var ap=(j+N|0)+((v&8191)<<13)|0;return j=(R+(v>>>13)|0)+(ap>>>26)|0,ap&=67108863,k[0]=yc,k[1]=bc,k[2]=wc,k[3]=vc,k[4]=Ec,k[5]=mf,k[6]=yg,k[7]=yb,k[8]=bg,k[9]=wg,k[10]=bb,k[11]=wb,k[12]=vg,k[13]=vb,k[14]=Eb,k[15]=_b,k[16]=Ab,k[17]=xb,k[18]=ap,j!==0&&(k[19]=j,w.length++),w};Math.imul||(S=E);function C(A,m,b){b.negative=m.negative^A.negative,b.length=A.length+m.length;for(var w=0,x=0,M=0;M<b.length-1;M++){var k=x;x=0;for(var j=w&67108863,N=Math.min(M,m.length-1),v=Math.max(0,M-A.length+1);v<=N;v++){var R=M-v,$=A.words[R]|0,O=m.words[v]|0,H=$*O,W=H&67108863;k=k+(H/67108864|0)|0,W=W+j|0,j=W&67108863,k=k+(W>>>26)|0,x+=k>>>26,k&=67108863}b.words[M]=j,w=k,k=x}return w!==0?b.words[M]=w:b.length--,b._strip()}function _(A,m,b){return C(A,m,b)}i.prototype.mulTo=function(m,b){var w,x=this.length+m.length;return this.length===10&&m.length===10?w=S(this,m,b):x<63?w=E(this,m,b):x<1024?w=C(this,m,b):w=_(this,m,b),w},i.prototype.mul=function(m){var b=new i(null);return b.words=new Array(this.length+m.length),this.mulTo(m,b)},i.prototype.mulf=function(m){var b=new i(null);return b.words=new Array(this.length+m.length),_(this,m,b)},i.prototype.imul=function(m){return this.clone().mulTo(m,this)},i.prototype.imuln=function(m){var b=m<0;b&&(m=-m),n(typeof m=="number"),n(m<67108864);for(var w=0,x=0;x<this.length;x++){var M=(this.words[x]|0)*m,k=(M&67108863)+(w&67108863);w>>=26,w+=M/67108864|0,w+=k>>>26,this.words[x]=k&67108863}return w!==0&&(this.words[x]=w,this.length++),this.length=m===0?1:this.length,b?this.ineg():this},i.prototype.muln=function(m){return this.clone().imuln(m)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(m){var b=y(m);if(b.length===0)return new i(1);for(var w=this,x=0;x<b.length&&b[x]===0;x++,w=w.sqr());if(++x<b.length)for(var M=w.sqr();x<b.length;x++,M=M.sqr())b[x]!==0&&(w=w.mul(M));return w},i.prototype.iushln=function(m){n(typeof m=="number"&&m>=0);var b=m%26,w=(m-b)/26,x=67108863>>>26-b<<26-b,M;if(b!==0){var k=0;for(M=0;M<this.length;M++){var j=this.words[M]&x,N=(this.words[M]|0)-j<<b;this.words[M]=N|k,k=j>>>26-b}k&&(this.words[M]=k,this.length++)}if(w!==0){for(M=this.length-1;M>=0;M--)this.words[M+w]=this.words[M];for(M=0;M<w;M++)this.words[M]=0;this.length+=w}return this._strip()},i.prototype.ishln=function(m){return n(this.negative===0),this.iushln(m)},i.prototype.iushrn=function(m,b,w){n(typeof m=="number"&&m>=0);var x;b?x=(b-b%26)/26:x=0;var M=m%26,k=Math.min((m-M)/26,this.length),j=67108863^67108863>>>M<<M,N=w;if(x-=k,x=Math.max(0,x),N){for(var v=0;v<k;v++)N.words[v]=this.words[v];N.length=k}if(k!==0)if(this.length>k)for(this.length-=k,v=0;v<this.length;v++)this.words[v]=this.words[v+k];else this.words[0]=0,this.length=1;var R=0;for(v=this.length-1;v>=0&&(R!==0||v>=x);v--){var $=this.words[v]|0;this.words[v]=R<<26-M|$>>>M,R=$&j}return N&&R!==0&&(N.words[N.length++]=R),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(m,b,w){return n(this.negative===0),this.iushrn(m,b,w)},i.prototype.shln=function(m){return this.clone().ishln(m)},i.prototype.ushln=function(m){return this.clone().iushln(m)},i.prototype.shrn=function(m){return this.clone().ishrn(m)},i.prototype.ushrn=function(m){return this.clone().iushrn(m)},i.prototype.testn=function(m){n(typeof m=="number"&&m>=0);var b=m%26,w=(m-b)/26,x=1<<b;if(this.length<=w)return!1;var M=this.words[w];return!!(M&x)},i.prototype.imaskn=function(m){n(typeof m=="number"&&m>=0);var b=m%26,w=(m-b)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(b!==0&&w++,this.length=Math.min(w,this.length),b!==0){var x=67108863^67108863>>>b<<b;this.words[this.length-1]&=x}return this._strip()},i.prototype.maskn=function(m){return this.clone().imaskn(m)},i.prototype.iaddn=function(m){return n(typeof m=="number"),n(m<67108864),m<0?this.isubn(-m):this.negative!==0?this.length===1&&(this.words[0]|0)<=m?(this.words[0]=m-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(m),this.negative=1,this):this._iaddn(m)},i.prototype._iaddn=function(m){this.words[0]+=m;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},i.prototype.isubn=function(m){if(n(typeof m=="number"),n(m<67108864),m<0)return this.iaddn(-m);if(this.negative!==0)return this.negative=0,this.iaddn(m),this.negative=1,this;if(this.words[0]-=m,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this._strip()},i.prototype.addn=function(m){return this.clone().iaddn(m)},i.prototype.subn=function(m){return this.clone().isubn(m)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(m,b,w){var x=m.length+w,M;this._expand(x);var k,j=0;for(M=0;M<m.length;M++){k=(this.words[M+w]|0)+j;var N=(m.words[M]|0)*b;k-=N&67108863,j=(k>>26)-(N/67108864|0),this.words[M+w]=k&67108863}for(;M<this.length-w;M++)k=(this.words[M+w]|0)+j,j=k>>26,this.words[M+w]=k&67108863;if(j===0)return this._strip();for(n(j===-1),j=0,M=0;M<this.length;M++)k=-(this.words[M]|0)+j,j=k>>26,this.words[M]=k&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(m,b){var w=this.length-m.length,x=this.clone(),M=m,k=M.words[M.length-1]|0,j=this._countBits(k);w=26-j,w!==0&&(M=M.ushln(w),x.iushln(w),k=M.words[M.length-1]|0);var N=x.length-M.length,v;if(b!=="mod"){v=new i(null),v.length=N+1,v.words=new Array(v.length);for(var R=0;R<v.length;R++)v.words[R]=0}var $=x.clone()._ishlnsubmul(M,1,N);$.negative===0&&(x=$,v&&(v.words[N]=1));for(var O=N-1;O>=0;O--){var H=(x.words[M.length+O]|0)*67108864+(x.words[M.length+O-1]|0);for(H=Math.min(H/k|0,67108863),x._ishlnsubmul(M,H,O);x.negative!==0;)H--,x.negative=0,x._ishlnsubmul(M,1,O),x.isZero()||(x.negative^=1);v&&(v.words[O]=H)}return v&&v._strip(),x._strip(),b!=="div"&&w!==0&&x.iushrn(w),{div:v||null,mod:x}},i.prototype.divmod=function(m,b,w){if(n(!m.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var x,M,k;return this.negative!==0&&m.negative===0?(k=this.neg().divmod(m,b),b!=="mod"&&(x=k.div.neg()),b!=="div"&&(M=k.mod.neg(),w&&M.negative!==0&&M.iadd(m)),{div:x,mod:M}):this.negative===0&&m.negative!==0?(k=this.divmod(m.neg(),b),b!=="mod"&&(x=k.div.neg()),{div:x,mod:k.mod}):(this.negative&m.negative)!==0?(k=this.neg().divmod(m.neg(),b),b!=="div"&&(M=k.mod.neg(),w&&M.negative!==0&&M.isub(m)),{div:k.div,mod:M}):m.length>this.length||this.cmp(m)<0?{div:new i(0),mod:this}:m.length===1?b==="div"?{div:this.divn(m.words[0]),mod:null}:b==="mod"?{div:null,mod:new i(this.modrn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new i(this.modrn(m.words[0]))}:this._wordDiv(m,b)},i.prototype.div=function(m){return this.divmod(m,"div",!1).div},i.prototype.mod=function(m){return this.divmod(m,"mod",!1).mod},i.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod},i.prototype.divRound=function(m){var b=this.divmod(m);if(b.mod.isZero())return b.div;var w=b.div.negative!==0?b.mod.isub(m):b.mod,x=m.ushrn(1),M=m.andln(1),k=w.cmp(x);return k<0||M===1&&k===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},i.prototype.modrn=function(m){var b=m<0;b&&(m=-m),n(m<=67108863);for(var w=(1<<26)%m,x=0,M=this.length-1;M>=0;M--)x=(w*x+(this.words[M]|0))%m;return b?-x:x},i.prototype.modn=function(m){return this.modrn(m)},i.prototype.idivn=function(m){var b=m<0;b&&(m=-m),n(m<=67108863);for(var w=0,x=this.length-1;x>=0;x--){var M=(this.words[x]|0)+w*67108864;this.words[x]=M/m|0,w=M%m}return this._strip(),b?this.ineg():this},i.prototype.divn=function(m){return this.clone().idivn(m)},i.prototype.egcd=function(m){n(m.negative===0),n(!m.isZero());var b=this,w=m.clone();b.negative!==0?b=b.umod(m):b=b.clone();for(var x=new i(1),M=new i(0),k=new i(0),j=new i(1),N=0;b.isEven()&&w.isEven();)b.iushrn(1),w.iushrn(1),++N;for(var v=w.clone(),R=b.clone();!b.isZero();){for(var $=0,O=1;(b.words[0]&O)===0&&$<26;++$,O<<=1);if($>0)for(b.iushrn($);$-- >0;)(x.isOdd()||M.isOdd())&&(x.iadd(v),M.isub(R)),x.iushrn(1),M.iushrn(1);for(var H=0,W=1;(w.words[0]&W)===0&&H<26;++H,W<<=1);if(H>0)for(w.iushrn(H);H-- >0;)(k.isOdd()||j.isOdd())&&(k.iadd(v),j.isub(R)),k.iushrn(1),j.iushrn(1);b.cmp(w)>=0?(b.isub(w),x.isub(k),M.isub(j)):(w.isub(b),k.isub(x),j.isub(M))}return{a:k,b:j,gcd:w.iushln(N)}},i.prototype._invmp=function(m){n(m.negative===0),n(!m.isZero());var b=this,w=m.clone();b.negative!==0?b=b.umod(m):b=b.clone();for(var x=new i(1),M=new i(0),k=w.clone();b.cmpn(1)>0&&w.cmpn(1)>0;){for(var j=0,N=1;(b.words[0]&N)===0&&j<26;++j,N<<=1);if(j>0)for(b.iushrn(j);j-- >0;)x.isOdd()&&x.iadd(k),x.iushrn(1);for(var v=0,R=1;(w.words[0]&R)===0&&v<26;++v,R<<=1);if(v>0)for(w.iushrn(v);v-- >0;)M.isOdd()&&M.iadd(k),M.iushrn(1);b.cmp(w)>=0?(b.isub(w),x.isub(M)):(w.isub(b),M.isub(x))}var $;return b.cmpn(1)===0?$=x:$=M,$.cmpn(0)<0&&$.iadd(m),$},i.prototype.gcd=function(m){if(this.isZero())return m.abs();if(m.isZero())return this.abs();var b=this.clone(),w=m.clone();b.negative=0,w.negative=0;for(var x=0;b.isEven()&&w.isEven();x++)b.iushrn(1),w.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;w.isEven();)w.iushrn(1);var M=b.cmp(w);if(M<0){var k=b;b=w,w=k}else if(M===0||w.cmpn(1)===0)break;b.isub(w)}while(!0);return w.iushln(x)},i.prototype.invm=function(m){return this.egcd(m).a.umod(m)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(m){return this.words[0]&m},i.prototype.bincn=function(m){n(typeof m=="number");var b=m%26,w=(m-b)/26,x=1<<b;if(this.length<=w)return this._expand(w+1),this.words[w]|=x,this;for(var M=x,k=w;M!==0&&k<this.length;k++){var j=this.words[k]|0;j+=M,M=j>>>26,j&=67108863,this.words[k]=j}return M!==0&&(this.words[k]=M,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(m){var b=m<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this._strip();var w;if(this.length>1)w=1;else{b&&(m=-m),n(m<=67108863,"Number is too big");var x=this.words[0]|0;w=x===m?0:x<m?-1:1}return this.negative!==0?-w|0:w},i.prototype.cmp=function(m){if(this.negative!==0&&m.negative===0)return-1;if(this.negative===0&&m.negative!==0)return 1;var b=this.ucmp(m);return this.negative!==0?-b|0:b},i.prototype.ucmp=function(m){if(this.length>m.length)return 1;if(this.length<m.length)return-1;for(var b=0,w=this.length-1;w>=0;w--){var x=this.words[w]|0,M=m.words[w]|0;if(x!==M){x<M?b=-1:x>M&&(b=1);break}}return b},i.prototype.gtn=function(m){return this.cmpn(m)===1},i.prototype.gt=function(m){return this.cmp(m)===1},i.prototype.gten=function(m){return this.cmpn(m)>=0},i.prototype.gte=function(m){return this.cmp(m)>=0},i.prototype.ltn=function(m){return this.cmpn(m)===-1},i.prototype.lt=function(m){return this.cmp(m)===-1},i.prototype.lten=function(m){return this.cmpn(m)<=0},i.prototype.lte=function(m){return this.cmp(m)<=0},i.prototype.eqn=function(m){return this.cmpn(m)===0},i.prototype.eq=function(m){return this.cmp(m)===0},i.red=function(m){return new F(m)},i.prototype.toRed=function(m){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),m.convertTo(this)._forceRed(m)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(m){return this.red=m,this},i.prototype.forceRed=function(m){return n(!this.red,"Already a number in reduction context"),this._forceRed(m)},i.prototype.redAdd=function(m){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,m)},i.prototype.redIAdd=function(m){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,m)},i.prototype.redSub=function(m){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,m)},i.prototype.redISub=function(m){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,m)},i.prototype.redShl=function(m){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,m)},i.prototype.redMul=function(m){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.mul(this,m)},i.prototype.redIMul=function(m){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.imul(this,m)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(m){return n(this.red&&!m.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,m)};var T={k256:null,p224:null,p192:null,p25519:null};function P(A,m){this.name=A,this.p=new i(m,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}P.prototype._tmp=function(){var m=new i(null);return m.words=new Array(Math.ceil(this.n/13)),m},P.prototype.ireduce=function(m){var b=m,w;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),w=b.bitLength();while(w>this.n);var x=w<this.n?-1:b.ucmp(this.p);return x===0?(b.words[0]=0,b.length=1):x>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},P.prototype.split=function(m,b){m.iushrn(this.n,0,b)},P.prototype.imulK=function(m){return m.imul(this.k)};function D(){P.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(D,P),D.prototype.split=function(m,b){for(var w=4194303,x=Math.min(m.length,9),M=0;M<x;M++)b.words[M]=m.words[M];if(b.length=x,m.length<=9){m.words[0]=0,m.length=1;return}var k=m.words[9];for(b.words[b.length++]=k&w,M=10;M<m.length;M++){var j=m.words[M]|0;m.words[M-10]=(j&w)<<4|k>>>22,k=j}k>>>=22,m.words[M-10]=k,k===0&&m.length>10?m.length-=10:m.length-=9},D.prototype.imulK=function(m){m.words[m.length]=0,m.words[m.length+1]=0,m.length+=2;for(var b=0,w=0;w<m.length;w++){var x=m.words[w]|0;b+=x*977,m.words[w]=b&67108863,b=x*64+(b/67108864|0)}return m.words[m.length-1]===0&&(m.length--,m.words[m.length-1]===0&&m.length--),m};function L(){P.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(L,P);function I(){P.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(I,P);function U(){P.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(U,P),U.prototype.imulK=function(m){for(var b=0,w=0;w<m.length;w++){var x=(m.words[w]|0)*19+b,M=x&67108863;x>>>=26,m.words[w]=M,b=x}return b!==0&&(m.words[m.length++]=b),m},i._prime=function(m){if(T[m])return T[m];var b;if(m==="k256")b=new D;else if(m==="p224")b=new L;else if(m==="p192")b=new I;else if(m==="p25519")b=new U;else throw new Error("Unknown prime "+m);return T[m]=b,b};function F(A){if(typeof A=="string"){var m=i._prime(A);this.m=m.p,this.prime=m}else n(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}F.prototype._verify1=function(m){n(m.negative===0,"red works only with positives"),n(m.red,"red works only with red numbers")},F.prototype._verify2=function(m,b){n((m.negative|b.negative)===0,"red works only with positives"),n(m.red&&m.red===b.red,"red works only with red numbers")},F.prototype.imod=function(m){return this.prime?this.prime.ireduce(m)._forceRed(this):(l(m,m.umod(this.m)._forceRed(this)),m)},F.prototype.neg=function(m){return m.isZero()?m.clone():this.m.sub(m)._forceRed(this)},F.prototype.add=function(m,b){this._verify2(m,b);var w=m.add(b);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},F.prototype.iadd=function(m,b){this._verify2(m,b);var w=m.iadd(b);return w.cmp(this.m)>=0&&w.isub(this.m),w},F.prototype.sub=function(m,b){this._verify2(m,b);var w=m.sub(b);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},F.prototype.isub=function(m,b){this._verify2(m,b);var w=m.isub(b);return w.cmpn(0)<0&&w.iadd(this.m),w},F.prototype.shl=function(m,b){return this._verify1(m),this.imod(m.ushln(b))},F.prototype.imul=function(m,b){return this._verify2(m,b),this.imod(m.imul(b))},F.prototype.mul=function(m,b){return this._verify2(m,b),this.imod(m.mul(b))},F.prototype.isqr=function(m){return this.imul(m,m.clone())},F.prototype.sqr=function(m){return this.mul(m,m)},F.prototype.sqrt=function(m){if(m.isZero())return m.clone();var b=this.m.andln(3);if(n(b%2===1),b===3){var w=this.m.add(new i(1)).iushrn(2);return this.pow(m,w)}for(var x=this.m.subn(1),M=0;!x.isZero()&&x.andln(1)===0;)M++,x.iushrn(1);n(!x.isZero());var k=new i(1).toRed(this),j=k.redNeg(),N=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new i(2*v*v).toRed(this);this.pow(v,N).cmp(j)!==0;)v.redIAdd(j);for(var R=this.pow(v,x),$=this.pow(m,x.addn(1).iushrn(1)),O=this.pow(m,x),H=M;O.cmp(k)!==0;){for(var W=O,G=0;W.cmp(k)!==0;G++)W=W.redSqr();n(G<H);var K=this.pow(R,new i(1).iushln(H-G-1));$=$.redMul(K),R=K.redSqr(),O=O.redMul(R),H=G}return $},F.prototype.invm=function(m){var b=m._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},F.prototype.pow=function(m,b){if(b.isZero())return new i(1).toRed(this);if(b.cmpn(1)===0)return m.clone();var w=4,x=new Array(1<<w);x[0]=new i(1).toRed(this),x[1]=m;for(var M=2;M<x.length;M++)x[M]=this.mul(x[M-1],m);var k=x[0],j=0,N=0,v=b.bitLength()%26;for(v===0&&(v=26),M=b.length-1;M>=0;M--){for(var R=b.words[M],$=v-1;$>=0;$--){var O=R>>$&1;if(k!==x[0]&&(k=this.sqr(k)),O===0&&j===0){N=0;continue}j<<=1,j|=O,N++,!(N!==w&&(M!==0||$!==0))&&(k=this.mul(k,x[j]),N=0,j=0)}v=26}return k},F.prototype.convertTo=function(m){var b=m.umod(this.m);return b===m?b.clone():b},F.prototype.convertFrom=function(m){var b=m.clone();return b.red=null,b},i.mont=function(m){return new B(m)};function B(A){F.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(B,F),B.prototype.convertTo=function(m){return this.imod(m.ushln(this.shift))},B.prototype.convertFrom=function(m){var b=this.imod(m.mul(this.rinv));return b.red=null,b},B.prototype.imul=function(m,b){if(m.isZero()||b.isZero())return m.words[0]=0,m.length=1,m;var w=m.imul(b),x=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=w.isub(x).iushrn(this.shift),k=M;return M.cmp(this.m)>=0?k=M.isub(this.m):M.cmpn(0)<0&&(k=M.iadd(this.m)),k._forceRed(this)},B.prototype.mul=function(m,b){if(m.isZero()||b.isZero())return new i(0)._forceRed(this);var w=m.mul(b),x=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=w.isub(x).iushrn(this.shift),k=M;return M.cmp(this.m)>=0?k=M.isub(this.m):M.cmpn(0)<0&&(k=M.iadd(this.m)),k._forceRed(this)},B.prototype.invm=function(m){var b=this.imod(m._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(t,nNe)})(SI)),SI.exports}var sNe=Zte();const Ft=xa(sNe);var A2={exports:{}};var yj;function Yte(){return yj||(yj=1,(function(t,e){var r=N4(),n=r.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=i);function i(o,a,c){return n(o,a,c)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=n(o);return a!==void 0?typeof c=="string"?u.fill(a,c):u.fill(a):u.fill(0),u},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(A2,A2.exports)),A2.exports}var zN,bj;function iNe(){if(bj)return zN;bj=1;var t=Yte().Buffer;function e(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(n[a]!==255)throw new TypeError(o+" is ambiguous");n[a]=i}var c=r.length,u=r.charAt(0),l=Math.log(c)/Math.log(256),d=Math.log(256)/Math.log(c);function f(h){if((Array.isArray(h)||h instanceof Uint8Array)&&(h=t.from(h)),!t.isBuffer(h))throw new TypeError("Expected Buffer");if(h.length===0)return"";for(var y=0,E=0,S=0,C=h.length;S!==C&&h[S]===0;)S++,y++;for(var _=(C-S)*d+1>>>0,T=new Uint8Array(_);S!==C;){for(var P=h[S],D=0,L=_-1;(P!==0||D<E)&&L!==-1;L--,D++)P+=256*T[L]>>>0,T[L]=P%c>>>0,P=P/c>>>0;if(P!==0)throw new Error("Non-zero carry");E=D,S++}for(var I=_-E;I!==_&&T[I]===0;)I++;for(var U=u.repeat(y);I<_;++I)U+=r.charAt(T[I]);return U}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return t.alloc(0);for(var y=0,E=0,S=0;h[y]===u;)E++,y++;for(var C=(h.length-y)*l+1>>>0,_=new Uint8Array(C);y<h.length;){var T=h.charCodeAt(y);if(T>255)return;var P=n[T];if(P===255)return;for(var D=0,L=C-1;(P!==0||D<S)&&L!==-1;L--,D++)P+=c*_[L]>>>0,_[L]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");S=D,y++}for(var I=C-S;I!==C&&_[I]===0;)I++;var U=t.allocUnsafe(E+(C-I));U.fill(0,0,E);for(var F=E;I!==C;)U[F++]=_[I++];return U}function g(h){var y=p(h);if(y)return y;throw new Error("Non-base"+c+" character")}return{encode:f,decodeUnsafe:p,decode:g}}return zN=e,zN}var WN,wj;function oNe(){if(wj)return WN;wj=1;var t=iNe(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return WN=t(e),WN}var aNe=oNe();const Oi=xa(aNe);function cNe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Jte(t,...e){if(!cNe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function vj(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function uNe(t,e){Jte(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const VN=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),nl=(t,e)=>t<<32-e|t>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function lNe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Xte(t){return typeof t=="string"&&(t=lNe(t)),Jte(t),t}let dNe=class{clone(){return this._cloneInto()}};function fNe(t){const e=n=>t().update(Xte(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function hNe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}const pNe=(t,e,r)=>t&e^~t&r,gNe=(t,e,r)=>t&e^t&r^e&r;class mNe extends dNe{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=VN(this.buffer)}update(e){vj(this);const{view:r,buffer:n,blockLen:s}=this;e=Xte(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=VN(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){vj(this),uNe(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;hNe(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=VN(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}}const yNe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Bf=new Uint32Array(64);class bNe extends mNe{constructor(){super(64,32,8,!1),this.A=kf[0]|0,this.B=kf[1]|0,this.C=kf[2]|0,this.D=kf[3]|0,this.E=kf[4]|0,this.F=kf[5]|0,this.G=kf[6]|0,this.H=kf[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)Bf[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const f=Bf[d-15],p=Bf[d-2],g=nl(f,7)^nl(f,18)^f>>>3,h=nl(p,17)^nl(p,19)^p>>>10;Bf[d]=h+Bf[d-7]+g+Bf[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=nl(a,6)^nl(a,11)^nl(a,25),p=l+f+pNe(a,c,u)+yNe[d]+Bf[d]|0,h=(nl(n,2)^nl(n,13)^nl(n,22))+gNe(n,s,i)|0;l=u,u=c,c=a,a=o+p|0,o=i,i=s,s=n,n=p+h|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){Bf.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ej=fNe(()=>new bNe);var fn={},GN,_j;function wNe(){if(_j)return GN;_j=1;var t=Yte().Buffer;function e(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(n[a]!==255)throw new TypeError(o+" is ambiguous");n[a]=i}var c=r.length,u=r.charAt(0),l=Math.log(c)/Math.log(256),d=Math.log(256)/Math.log(c);function f(h){if((Array.isArray(h)||h instanceof Uint8Array)&&(h=t.from(h)),!t.isBuffer(h))throw new TypeError("Expected Buffer");if(h.length===0)return"";for(var y=0,E=0,S=0,C=h.length;S!==C&&h[S]===0;)S++,y++;for(var _=(C-S)*d+1>>>0,T=new Uint8Array(_);S!==C;){for(var P=h[S],D=0,L=_-1;(P!==0||D<E)&&L!==-1;L--,D++)P+=256*T[L]>>>0,T[L]=P%c>>>0,P=P/c>>>0;if(P!==0)throw new Error("Non-zero carry");E=D,S++}for(var I=_-E;I!==_&&T[I]===0;)I++;for(var U=u.repeat(y);I<_;++I)U+=r.charAt(T[I]);return U}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return t.alloc(0);for(var y=0,E=0,S=0;h[y]===u;)E++,y++;for(var C=(h.length-y)*l+1>>>0,_=new Uint8Array(C);y<h.length;){var T=h.charCodeAt(y);if(T>255)return;var P=n[T];if(P===255)return;for(var D=0,L=C-1;(P!==0||D<S)&&L!==-1;L--,D++)P+=c*_[L]>>>0,_[L]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");S=D,y++}for(var I=C-S;I!==C&&_[I]===0;)I++;var U=t.allocUnsafe(E+(C-I));U.fill(0,0,E);for(var F=E;I!==C;)U[F++]=_[I++];return U}function g(h){var y=p(h);if(y)return y;throw new Error("Non-base"+c+" character")}return{encode:f,decodeUnsafe:p,decode:g}}return GN=e,GN}var KN,Aj;function vNe(){if(Aj)return KN;Aj=1;var t=wNe(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return KN=t(e),KN}function qd(t,e,r){return e<=t&&t<=r}function r5(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function ENe(t){for(var e=String(t),r=e.length,n=0,s=[];n<r;){var i=e.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===r-1)s.push(65533);else{var o=t.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=i&1023,c=o&1023;s.push(65536+(a<<10)+c),n+=1}else s.push(65533)}n+=1}return s}function _Ne(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var L6=-1;function kk(t){this.tokens=[].slice.call(t)}kk.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():L6},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var Ty=-1;function ZN(t,e){if(t)throw TypeError("Decoder error");return e||65533}var F6="utf-8";function $6(t,e){if(!(this instanceof $6))return new $6(t,e);if(t=t!==void 0?String(t).toLowerCase():F6,t!==F6)throw new Error("Encoding not supported. Only utf-8 is supported");e=r5(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}$6.prototype={decode:function(e,r){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),r=r5(r),this._streaming||(this._decoder=new ANe({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var s=new kk(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Ty);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Ty)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),_Ne(i)}};function q6(t,e){if(!(this instanceof q6))return new q6(t,e);if(t=t!==void 0?String(t).toLowerCase():F6,t!==F6)throw new Error("Encoding not supported. Only utf-8 is supported");e=r5(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}q6.prototype={encode:function(e,r){e=e?String(e):"",r=r5(r),this._streaming||(this._encoder=new xNe(this._options)),this._streaming=!!r.stream;for(var n=[],s=new kk(ENe(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Ty);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Ty;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function ANe(t){var e=t.fatal,r=0,n=0,s=0,i=128,o=191;this.handler=function(a,c){if(c===L6&&s!==0)return s=0,ZN(e);if(c===L6)return Ty;if(s===0){if(qd(c,0,127))return c;if(qd(c,194,223))s=1,r=c-192;else if(qd(c,224,239))c===224&&(i=160),c===237&&(o=159),s=2,r=c-224;else if(qd(c,240,244))c===240&&(i=144),c===244&&(o=143),s=3,r=c-240;else return ZN(e);return r=r<<6*s,null}if(!qd(c,i,o))return r=s=n=0,i=128,o=191,a.prepend(c),ZN(e);if(i=128,o=191,n+=1,r+=c-128<<6*(s-n),n!==s)return null;var u=r;return r=s=n=0,u}}function xNe(t){t.fatal,this.handler=function(e,r){if(r===L6)return Ty;if(qd(r,0,127))return r;var n,s;qd(r,128,2047)?(n=1,s=192):qd(r,2048,65535)?(n=2,s=224):qd(r,65536,1114111)&&(n=3,s=240);for(var i=[(r>>6*n)+s];n>0;){var o=r>>6*(n-1);i.push(128|o&63),n-=1}return i}}const CNe=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:$6,TextEncoder:q6},Symbol.toStringTag,{value:"Module"})),SNe=Ln(CNe);var xj;function INe(){if(xj)return fn;xj=1;var t=fn&&fn.__createBinding||(Object.create?(function(I,U,F,B){B===void 0&&(B=F),Object.defineProperty(I,B,{enumerable:!0,get:function(){return U[F]}})}):(function(I,U,F,B){B===void 0&&(B=F),I[B]=U[F]})),e=fn&&fn.__setModuleDefault||(Object.create?(function(I,U){Object.defineProperty(I,"default",{enumerable:!0,value:U})}):function(I,U){I.default=U}),r=fn&&fn.__decorate||function(I,U,F,B){var A=arguments.length,m=A<3?U:B===null?B=Object.getOwnPropertyDescriptor(U,F):B,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(I,U,F,B);else for(var w=I.length-1;w>=0;w--)(b=I[w])&&(m=(A<3?b(m):A>3?b(U,F,m):b(U,F))||m);return A>3&&m&&Object.defineProperty(U,F,m),m},n=fn&&fn.__importStar||function(I){if(I&&I.__esModule)return I;var U={};if(I!=null)for(var F in I)F!=="default"&&Object.hasOwnProperty.call(I,F)&&t(U,I,F);return e(U,I),U},s=fn&&fn.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(fn,"__esModule",{value:!0}),fn.deserializeUnchecked=fn.deserialize=fn.serialize=fn.BinaryReader=fn.BinaryWriter=fn.BorshError=fn.baseDecode=fn.baseEncode=void 0;const i=s(Zte()),o=s(vNe()),a=n(SNe),c=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,u=new c("utf-8",{fatal:!0});function l(I){return typeof I=="string"&&(I=Buffer.from(I,"utf8")),o.default.encode(Buffer.from(I))}fn.baseEncode=l;function d(I){return Buffer.from(o.default.decode(I))}fn.baseDecode=d;const f=1024;class p extends Error{constructor(U){super(U),this.fieldPath=[],this.originalMessage=U}addToFieldPath(U){this.fieldPath.splice(0,0,U),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}fn.BorshError=p;class g{constructor(){this.buf=Buffer.alloc(f),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(f)]))}writeU8(U){this.maybeResize(),this.buf.writeUInt8(U,this.length),this.length+=1}writeU16(U){this.maybeResize(),this.buf.writeUInt16LE(U,this.length),this.length+=2}writeU32(U){this.maybeResize(),this.buf.writeUInt32LE(U,this.length),this.length+=4}writeU64(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",8)))}writeU128(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",16)))}writeU256(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",32)))}writeU512(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",64)))}writeBuffer(U){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),U,Buffer.alloc(f)]),this.length+=U.length}writeString(U){this.maybeResize();const F=Buffer.from(U,"utf8");this.writeU32(F.length),this.writeBuffer(F)}writeFixedArray(U){this.writeBuffer(Buffer.from(U))}writeArray(U,F){this.maybeResize(),this.writeU32(U.length);for(const B of U)this.maybeResize(),F(B)}toArray(){return this.buf.subarray(0,this.length)}}fn.BinaryWriter=g;function h(I,U,F){const B=F.value;F.value=function(...A){try{return B.apply(this,A)}catch(m){if(m instanceof RangeError){const b=m.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(b)>=0)throw new p("Reached the end of buffer when deserializing")}throw m}}}class y{constructor(U){this.buf=U,this.offset=0}readU8(){const U=this.buf.readUInt8(this.offset);return this.offset+=1,U}readU16(){const U=this.buf.readUInt16LE(this.offset);return this.offset+=2,U}readU32(){const U=this.buf.readUInt32LE(this.offset);return this.offset+=4,U}readU64(){const U=this.readBuffer(8);return new i.default(U,"le")}readU128(){const U=this.readBuffer(16);return new i.default(U,"le")}readU256(){const U=this.readBuffer(32);return new i.default(U,"le")}readU512(){const U=this.readBuffer(64);return new i.default(U,"le")}readBuffer(U){if(this.offset+U>this.buf.length)throw new p(`Expected buffer length ${U} isn't within bounds`);const F=this.buf.slice(this.offset,this.offset+U);return this.offset+=U,F}readString(){const U=this.readU32(),F=this.readBuffer(U);try{return u.decode(F)}catch(B){throw new p(`Error decoding UTF-8 string: ${B}`)}}readFixedArray(U){return new Uint8Array(this.readBuffer(U))}readArray(U){const F=this.readU32(),B=Array();for(let A=0;A<F;++A)B.push(U());return B}}r([h],y.prototype,"readU8",null),r([h],y.prototype,"readU16",null),r([h],y.prototype,"readU32",null),r([h],y.prototype,"readU64",null),r([h],y.prototype,"readU128",null),r([h],y.prototype,"readU256",null),r([h],y.prototype,"readU512",null),r([h],y.prototype,"readString",null),r([h],y.prototype,"readFixedArray",null),r([h],y.prototype,"readArray",null),fn.BinaryReader=y;function E(I){return I.charAt(0).toUpperCase()+I.slice(1)}function S(I,U,F,B,A){try{if(typeof B=="string")A[`write${E(B)}`](F);else if(B instanceof Array)if(typeof B[0]=="number"){if(F.length!==B[0])throw new p(`Expecting byte array of length ${B[0]}, but got ${F.length} bytes`);A.writeFixedArray(F)}else if(B.length===2&&typeof B[1]=="number"){if(F.length!==B[1])throw new p(`Expecting byte array of length ${B[1]}, but got ${F.length} bytes`);for(let m=0;m<B[1];m++)S(I,null,F[m],B[0],A)}else A.writeArray(F,m=>{S(I,U,m,B[0],A)});else if(B.kind!==void 0)switch(B.kind){case"option":{F==null?A.writeU8(0):(A.writeU8(1),S(I,U,F,B.type,A));break}case"map":{A.writeU32(F.size),F.forEach((m,b)=>{S(I,U,b,B.key,A),S(I,U,m,B.value,A)});break}default:throw new p(`FieldType ${B} unrecognized`)}else C(I,F,A)}catch(m){throw m instanceof p&&m.addToFieldPath(U),m}}function C(I,U,F){if(typeof U.borshSerialize=="function"){U.borshSerialize(F);return}const B=I.get(U.constructor);if(!B)throw new p(`Class ${U.constructor.name} is missing in schema`);if(B.kind==="struct")B.fields.map(([A,m])=>{S(I,A,U[A],m,F)});else if(B.kind==="enum"){const A=U[B.field];for(let m=0;m<B.values.length;++m){const[b,w]=B.values[m];if(b===A){F.writeU8(m),S(I,b,U[b],w,F);break}}}else throw new p(`Unexpected schema kind: ${B.kind} for ${U.constructor.name}`)}function _(I,U,F=g){const B=new F;return C(I,U,B),B.toArray()}fn.serialize=_;function T(I,U,F,B){try{if(typeof F=="string")return B[`read${E(F)}`]();if(F instanceof Array){if(typeof F[0]=="number")return B.readFixedArray(F[0]);if(typeof F[1]=="number"){const A=[];for(let m=0;m<F[1];m++)A.push(T(I,null,F[0],B));return A}else return B.readArray(()=>T(I,U,F[0],B))}if(F.kind==="option")return B.readU8()?T(I,U,F.type,B):void 0;if(F.kind==="map"){let A=new Map;const m=B.readU32();for(let b=0;b<m;b++){const w=T(I,U,F.key,B),x=T(I,U,F.value,B);A.set(w,x)}return A}return P(I,F,B)}catch(A){throw A instanceof p&&A.addToFieldPath(U),A}}function P(I,U,F){if(typeof U.borshDeserialize=="function")return U.borshDeserialize(F);const B=I.get(U);if(!B)throw new p(`Class ${U.name} is missing in schema`);if(B.kind==="struct"){const A={};for(const[m,b]of I.get(U).fields)A[m]=T(I,m,b,F);return new U(A)}if(B.kind==="enum"){const A=F.readU8();if(A>=B.values.length)throw new p(`Enum index: ${A} is out of range`);const[m,b]=B.values[A],w=T(I,m,b,F);return new U({[m]:w})}throw new p(`Unexpected schema kind: ${B.kind} for ${U.constructor.name}`)}function D(I,U,F,B=y){const A=new B(F),m=P(I,U,A);if(A.offset<F.length)throw new p(`Unexpected ${F.length-A.offset} bytes after deserialized data`);return m}fn.deserialize=D;function L(I,U,F,B=y){const A=new B(F);return P(I,U,A)}return fn.deserializeUnchecked=L,fn}var YN=INe(),ye={},Cj;function TNe(){if(Cj)return ye;Cj=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.s16=ye.s8=ye.nu64be=ye.u48be=ye.u40be=ye.u32be=ye.u24be=ye.u16be=ye.nu64=ye.u48=ye.u40=ye.u32=ye.u24=ye.u16=ye.u8=ye.offset=ye.greedy=ye.Constant=ye.UTF8=ye.CString=ye.Blob=ye.Boolean=ye.BitField=ye.BitStructure=ye.VariantLayout=ye.Union=ye.UnionLayoutDiscriminator=ye.UnionDiscriminator=ye.Structure=ye.Sequence=ye.DoubleBE=ye.Double=ye.FloatBE=ye.Float=ye.NearInt64BE=ye.NearInt64=ye.NearUInt64BE=ye.NearUInt64=ye.IntBE=ye.Int=ye.UIntBE=ye.UInt=ye.OffsetLayout=ye.GreedyCount=ye.ExternalLayout=ye.bindConstructorLayout=ye.nameWithProperty=ye.Layout=ye.uint8ArrayToBuffer=ye.checkUint8Array=void 0,ye.constant=ye.utf8=ye.cstr=ye.blob=ye.unionLayoutDiscriminator=ye.union=ye.seq=ye.bits=ye.struct=ye.f64be=ye.f64=ye.f32be=ye.f32=ye.ns64be=ye.s48be=ye.s40be=ye.s32be=ye.s24be=ye.s16be=ye.ns64=ye.s48=ye.s40=ye.s32=ye.s24=void 0;const t=N4();function e(v){if(!(v instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}ye.checkUint8Array=e;function r(v){return e(v),t.Buffer.from(v.buffer,v.byteOffset,v.length)}ye.uint8ArrayToBuffer=r;let n=class{constructor(R,$){if(!Number.isInteger(R))throw new TypeError("span must be an integer");this.span=R,this.property=$}makeDestinationObject(){return{}}getSpan(R,$){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(R){const $=Object.create(this.constructor.prototype);return Object.assign($,this),$.property=R,$}fromArray(R){}};ye.Layout=n;function s(v,R){return R.property?v+"["+R.property+"]":v}ye.nameWithProperty=s;function i(v,R){if(typeof v!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(v,"layout_"))throw new Error("Class is already bound to a layout");if(!(R&&R instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(R,"boundConstructor_"))throw new Error("layout is already bound to a constructor");v.layout_=R,R.boundConstructor_=v,R.makeDestinationObject=(()=>new v),Object.defineProperty(v.prototype,"encode",{value($,O){return R.encode(this,$,O)},writable:!0}),Object.defineProperty(v,"decode",{value($,O){return R.decode($,O)},writable:!0})}ye.bindConstructorLayout=i;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}ye.ExternalLayout=o;class a extends o{constructor(R=1,$){if(!Number.isInteger(R)||0>=R)throw new TypeError("elementSpan must be a (positive) integer");super(-1,$),this.elementSpan=R}isCount(){return!0}decode(R,$=0){e(R);const O=R.length-$;return Math.floor(O/this.elementSpan)}encode(R,$,O){return 0}}ye.GreedyCount=a;class c extends o{constructor(R,$=0,O){if(!(R instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger($))throw new TypeError("offset must be integer or undefined");super(R.span,O||R.property),this.layout=R,this.offset=$}isCount(){return this.layout instanceof u||this.layout instanceof l}decode(R,$=0){return this.layout.decode(R,$+this.offset)}encode(R,$,O=0){return this.layout.encode(R,$,O+this.offset)}}ye.OffsetLayout=c;class u extends n{constructor(R,$){if(super(R,$),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(R,$=0){return r(R).readUIntLE($,this.span)}encode(R,$,O=0){return r($).writeUIntLE(R,O,this.span),this.span}}ye.UInt=u;class l extends n{constructor(R,$){if(super(R,$),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(R,$=0){return r(R).readUIntBE($,this.span)}encode(R,$,O=0){return r($).writeUIntBE(R,O,this.span),this.span}}ye.UIntBE=l;class d extends n{constructor(R,$){if(super(R,$),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(R,$=0){return r(R).readIntLE($,this.span)}encode(R,$,O=0){return r($).writeIntLE(R,O,this.span),this.span}}ye.Int=d;class f extends n{constructor(R,$){if(super(R,$),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(R,$=0){return r(R).readIntBE($,this.span)}encode(R,$,O=0){return r($).writeIntBE(R,O,this.span),this.span}}ye.IntBE=f;const p=Math.pow(2,32);function g(v){const R=Math.floor(v/p),$=v-R*p;return{hi32:R,lo32:$}}function h(v,R){return v*p+R}class y extends n{constructor(R){super(8,R)}decode(R,$=0){const O=r(R),H=O.readUInt32LE($),W=O.readUInt32LE($+4);return h(W,H)}encode(R,$,O=0){const H=g(R),W=r($);return W.writeUInt32LE(H.lo32,O),W.writeUInt32LE(H.hi32,O+4),8}}ye.NearUInt64=y;class E extends n{constructor(R){super(8,R)}decode(R,$=0){const O=r(R),H=O.readUInt32BE($),W=O.readUInt32BE($+4);return h(H,W)}encode(R,$,O=0){const H=g(R),W=r($);return W.writeUInt32BE(H.hi32,O),W.writeUInt32BE(H.lo32,O+4),8}}ye.NearUInt64BE=E;class S extends n{constructor(R){super(8,R)}decode(R,$=0){const O=r(R),H=O.readUInt32LE($),W=O.readInt32LE($+4);return h(W,H)}encode(R,$,O=0){const H=g(R),W=r($);return W.writeUInt32LE(H.lo32,O),W.writeInt32LE(H.hi32,O+4),8}}ye.NearInt64=S;class C extends n{constructor(R){super(8,R)}decode(R,$=0){const O=r(R),H=O.readInt32BE($),W=O.readUInt32BE($+4);return h(H,W)}encode(R,$,O=0){const H=g(R),W=r($);return W.writeInt32BE(H.hi32,O),W.writeUInt32BE(H.lo32,O+4),8}}ye.NearInt64BE=C;class _ extends n{constructor(R){super(4,R)}decode(R,$=0){return r(R).readFloatLE($)}encode(R,$,O=0){return r($).writeFloatLE(R,O),4}}ye.Float=_;class T extends n{constructor(R){super(4,R)}decode(R,$=0){return r(R).readFloatBE($)}encode(R,$,O=0){return r($).writeFloatBE(R,O),4}}ye.FloatBE=T;class P extends n{constructor(R){super(8,R)}decode(R,$=0){return r(R).readDoubleLE($)}encode(R,$,O=0){return r($).writeDoubleLE(R,O),8}}ye.Double=P;class D extends n{constructor(R){super(8,R)}decode(R,$=0){return r(R).readDoubleBE($)}encode(R,$,O=0){return r($).writeDoubleBE(R,O),8}}ye.DoubleBE=D;class L extends n{constructor(R,$,O){if(!(R instanceof n))throw new TypeError("elementLayout must be a Layout");if(!($ instanceof o&&$.isCount()||Number.isInteger($)&&0<=$))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let H=-1;!($ instanceof o)&&0<R.span&&(H=$*R.span),super(H,O),this.elementLayout=R,this.count=$}getSpan(R,$=0){if(0<=this.span)return this.span;let O=0,H=this.count;if(H instanceof o&&(H=H.decode(R,$)),0<this.elementLayout.span)O=H*this.elementLayout.span;else{let W=0;for(;W<H;)O+=this.elementLayout.getSpan(R,$+O),++W}return O}decode(R,$=0){const O=[];let H=0,W=this.count;for(W instanceof o&&(W=W.decode(R,$));H<W;)O.push(this.elementLayout.decode(R,$)),$+=this.elementLayout.getSpan(R,$),H+=1;return O}encode(R,$,O=0){const H=this.elementLayout,W=R.reduce((G,K)=>G+H.encode(K,$,O+G),0);return this.count instanceof o&&this.count.encode(R.length,$,O),W}}ye.Sequence=L;class I extends n{constructor(R,$,O){if(!(Array.isArray(R)&&R.reduce((W,G)=>W&&G instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof $=="boolean"&&O===void 0&&(O=$,$=void 0);for(const W of R)if(0>W.span&&W.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let H=-1;try{H=R.reduce((W,G)=>W+G.getSpan(),0)}catch{}super(H,$),this.fields=R,this.decodePrefixes=!!O}getSpan(R,$=0){if(0<=this.span)return this.span;let O=0;try{O=this.fields.reduce((H,W)=>{const G=W.getSpan(R,$);return $+=G,H+G},0)}catch{throw new RangeError("indeterminate span")}return O}decode(R,$=0){e(R);const O=this.makeDestinationObject();for(const H of this.fields)if(H.property!==void 0&&(O[H.property]=H.decode(R,$)),$+=H.getSpan(R,$),this.decodePrefixes&&R.length===$)break;return O}encode(R,$,O=0){const H=O;let W=0,G=0;for(const K of this.fields){let Q=K.span;if(G=0<Q?Q:0,K.property!==void 0){const re=R[K.property];re!==void 0&&(G=K.encode(re,$,O),0>Q&&(Q=K.getSpan($,O)))}W=O,O+=Q}return W+G-H}fromArray(R){const $=this.makeDestinationObject();for(const O of this.fields)O.property!==void 0&&0<R.length&&($[O.property]=R.shift());return $}layoutFor(R){if(typeof R!="string")throw new TypeError("property must be string");for(const $ of this.fields)if($.property===R)return $}offsetOf(R){if(typeof R!="string")throw new TypeError("property must be string");let $=0;for(const O of this.fields){if(O.property===R)return $;0>O.span?$=-1:0<=$&&($+=O.span)}}}ye.Structure=I;class U{constructor(R){this.property=R}decode(R,$){throw new Error("UnionDiscriminator is abstract")}encode(R,$,O){throw new Error("UnionDiscriminator is abstract")}}ye.UnionDiscriminator=U;class F extends U{constructor(R,$){if(!(R instanceof o&&R.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super($||R.property||"variant"),this.layout=R}decode(R,$){return this.layout.decode(R,$)}encode(R,$,O){return this.layout.encode(R,$,O)}}ye.UnionLayoutDiscriminator=F;class B extends n{constructor(R,$,O){let H;if(R instanceof u||R instanceof l)H=new F(new c(R));else if(R instanceof o&&R.isCount())H=new F(R);else if(R instanceof U)H=R;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if($===void 0&&($=null),!($===null||$ instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if($!==null){if(0>$.span)throw new Error("defaultLayout must have constant span");$.property===void 0&&($=$.replicate("content"))}let W=-1;$&&(W=$.span,0<=W&&(R instanceof u||R instanceof l)&&(W+=H.layout.span)),super(W,O),this.discriminator=H,this.usesPrefixDiscriminator=R instanceof u||R instanceof l,this.defaultLayout=$,this.registry={};let G=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(K){return G(K)},this.configGetSourceVariant=function(K){G=K.bind(this)}}getSpan(R,$=0){if(0<=this.span)return this.span;const O=this.getVariant(R,$);if(!O)throw new Error("unable to determine span for unrecognized variant");return O.getSpan(R,$)}defaultGetSourceVariant(R){if(Object.prototype.hasOwnProperty.call(R,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(R,this.defaultLayout.property))return;const $=this.registry[R[this.discriminator.property]];if($&&(!$.layout||$.property&&Object.prototype.hasOwnProperty.call(R,$.property)))return $}else for(const $ in this.registry){const O=this.registry[$];if(O.property&&Object.prototype.hasOwnProperty.call(R,O.property))return O}throw new Error("unable to infer src variant")}decode(R,$=0){let O;const H=this.discriminator,W=H.decode(R,$),G=this.registry[W];if(G===void 0){const K=this.defaultLayout;let Q=0;this.usesPrefixDiscriminator&&(Q=H.layout.span),O=this.makeDestinationObject(),O[H.property]=W,O[K.property]=K.decode(R,$+Q)}else O=G.decode(R,$);return O}encode(R,$,O=0){const H=this.getSourceVariant(R);if(H===void 0){const W=this.discriminator,G=this.defaultLayout;let K=0;return this.usesPrefixDiscriminator&&(K=W.layout.span),W.encode(R[W.property],$,O),K+G.encode(R[G.property],$,O+K)}return H.encode(R,$,O)}addVariant(R,$,O){const H=new A(this,R,$,O);return this.registry[R]=H,H}getVariant(R,$=0){let O;return R instanceof Uint8Array?O=this.discriminator.decode(R,$):O=R,this.registry[O]}}ye.Union=B;class A extends n{constructor(R,$,O,H){if(!(R instanceof B))throw new TypeError("union must be a Union");if(!Number.isInteger($)||0>$)throw new TypeError("variant must be a (non-negative) integer");if(typeof O=="string"&&H===void 0&&(H=O,O=null),O){if(!(O instanceof n))throw new TypeError("layout must be a Layout");if(R.defaultLayout!==null&&0<=O.span&&O.span>R.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof H!="string")throw new TypeError("variant must have a String property")}let W=R.span;0>R.span&&(W=O?O.span:0,0<=W&&R.usesPrefixDiscriminator&&(W+=R.discriminator.layout.span)),super(W,H),this.union=R,this.variant=$,this.layout=O||null}getSpan(R,$=0){if(0<=this.span)return this.span;let O=0;this.union.usesPrefixDiscriminator&&(O=this.union.discriminator.layout.span);let H=0;return this.layout&&(H=this.layout.getSpan(R,$+O)),O+H}decode(R,$=0){const O=this.makeDestinationObject();if(this!==this.union.getVariant(R,$))throw new Error("variant mismatch");let H=0;return this.union.usesPrefixDiscriminator&&(H=this.union.discriminator.layout.span),this.layout?O[this.property]=this.layout.decode(R,$+H):this.property?O[this.property]=!0:this.union.usesPrefixDiscriminator&&(O[this.union.discriminator.property]=this.variant),O}encode(R,$,O=0){let H=0;if(this.union.usesPrefixDiscriminator&&(H=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(R,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,$,O);let W=H;if(this.layout&&(this.layout.encode(R[this.property],$,O+H),W+=this.layout.getSpan($,O+H),0<=this.union.span&&W>this.union.span))throw new Error("encoded variant overruns containing union");return W}fromArray(R){if(this.layout)return this.layout.fromArray(R)}}ye.VariantLayout=A;function m(v){return 0>v&&(v+=4294967296),v}class b extends n{constructor(R,$,O){if(!(R instanceof u||R instanceof l))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof $=="string"&&O===void 0&&(O=$,$=!1),4<R.span)throw new RangeError("word cannot exceed 32 bits");super(R.span,O),this.word=R,this.msb=!!$,this.fields=[];let H=0;this._packedSetValue=function(W){return H=m(W),this},this._packedGetValue=function(){return H}}decode(R,$=0){const O=this.makeDestinationObject(),H=this.word.decode(R,$);this._packedSetValue(H);for(const W of this.fields)W.property!==void 0&&(O[W.property]=W.decode(R));return O}encode(R,$,O=0){const H=this.word.decode($,O);this._packedSetValue(H);for(const W of this.fields)if(W.property!==void 0){const G=R[W.property];G!==void 0&&W.encode(G)}return this.word.encode(this._packedGetValue(),$,O)}addField(R,$){const O=new w(this,R,$);return this.fields.push(O),O}addBoolean(R){const $=new x(this,R);return this.fields.push($),$}fieldFor(R){if(typeof R!="string")throw new TypeError("property must be string");for(const $ of this.fields)if($.property===R)return $}}ye.BitStructure=b;class w{constructor(R,$,O){if(!(R instanceof b))throw new TypeError("container must be a BitStructure");if(!Number.isInteger($)||0>=$)throw new TypeError("bits must be positive integer");const H=8*R.span,W=R.fields.reduce((G,K)=>G+K.bits,0);if($+W>H)throw new Error("bits too long for span remainder ("+(H-W)+" of "+H+" remain)");this.container=R,this.bits=$,this.valueMask=(1<<$)-1,$===32&&(this.valueMask=4294967295),this.start=W,this.container.msb&&(this.start=H-W-$),this.wordMask=m(this.valueMask<<this.start),this.property=O}decode(R,$){const O=this.container._packedGetValue();return m(O&this.wordMask)>>>this.start}encode(R){if(typeof R!="number"||!Number.isInteger(R)||R!==m(R&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const $=this.container._packedGetValue(),O=m(R<<this.start);this.container._packedSetValue(m($&~this.wordMask)|O)}}ye.BitField=w;class x extends w{constructor(R,$){super(R,1,$)}decode(R,$){return!!super.decode(R,$)}encode(R){typeof R=="boolean"&&(R=+R),super.encode(R)}}ye.Boolean=x;class M extends n{constructor(R,$){if(!(R instanceof o&&R.isCount()||Number.isInteger(R)&&0<=R))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let O=-1;R instanceof o||(O=R),super(O,$),this.length=R}getSpan(R,$){let O=this.span;return 0>O&&(O=this.length.decode(R,$)),O}decode(R,$=0){let O=this.span;return 0>O&&(O=this.length.decode(R,$)),r(R).slice($,$+O)}encode(R,$,O){let H=this.length;if(this.length instanceof o&&(H=R.length),!(R instanceof Uint8Array&&H===R.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+H+") Uint8Array as src");if(O+H>$.length)throw new RangeError("encoding overruns Uint8Array");const W=r(R);return r($).write(W.toString("hex"),O,H,"hex"),this.length instanceof o&&this.length.encode(H,$,O),H}}ye.Blob=M;class k extends n{constructor(R){super(-1,R)}getSpan(R,$=0){e(R);let O=$;for(;O<R.length&&R[O]!==0;)O+=1;return 1+O-$}decode(R,$=0){const O=this.getSpan(R,$);return r(R).slice($,$+O-1).toString("utf-8")}encode(R,$,O=0){typeof R!="string"&&(R=String(R));const H=t.Buffer.from(R,"utf8"),W=H.length;if(O+W>$.length)throw new RangeError("encoding overruns Buffer");const G=r($);return H.copy(G,O),G[O+W]=0,W+1}}ye.CString=k;class j extends n{constructor(R,$){if(typeof R=="string"&&$===void 0&&($=R,R=void 0),R===void 0)R=-1;else if(!Number.isInteger(R))throw new TypeError("maxSpan must be an integer");super(-1,$),this.maxSpan=R}getSpan(R,$=0){return e(R),R.length-$}decode(R,$=0){const O=this.getSpan(R,$);if(0<=this.maxSpan&&this.maxSpan<O)throw new RangeError("text length exceeds maxSpan");return r(R).slice($,$+O).toString("utf-8")}encode(R,$,O=0){typeof R!="string"&&(R=String(R));const H=t.Buffer.from(R,"utf8"),W=H.length;if(0<=this.maxSpan&&this.maxSpan<W)throw new RangeError("text length exceeds maxSpan");if(O+W>$.length)throw new RangeError("encoding overruns Buffer");return H.copy(r($),O),W}}ye.UTF8=j;class N extends n{constructor(R,$){super(0,$),this.value=R}decode(R,$){return this.value}encode(R,$,O){return 0}}return ye.Constant=N,ye.greedy=((v,R)=>new a(v,R)),ye.offset=((v,R,$)=>new c(v,R,$)),ye.u8=(v=>new u(1,v)),ye.u16=(v=>new u(2,v)),ye.u24=(v=>new u(3,v)),ye.u32=(v=>new u(4,v)),ye.u40=(v=>new u(5,v)),ye.u48=(v=>new u(6,v)),ye.nu64=(v=>new y(v)),ye.u16be=(v=>new l(2,v)),ye.u24be=(v=>new l(3,v)),ye.u32be=(v=>new l(4,v)),ye.u40be=(v=>new l(5,v)),ye.u48be=(v=>new l(6,v)),ye.nu64be=(v=>new E(v)),ye.s8=(v=>new d(1,v)),ye.s16=(v=>new d(2,v)),ye.s24=(v=>new d(3,v)),ye.s32=(v=>new d(4,v)),ye.s40=(v=>new d(5,v)),ye.s48=(v=>new d(6,v)),ye.ns64=(v=>new S(v)),ye.s16be=(v=>new f(2,v)),ye.s24be=(v=>new f(3,v)),ye.s32be=(v=>new f(4,v)),ye.s40be=(v=>new f(5,v)),ye.s48be=(v=>new f(6,v)),ye.ns64be=(v=>new C(v)),ye.f32=(v=>new _(v)),ye.f32be=(v=>new T(v)),ye.f64=(v=>new P(v)),ye.f64be=(v=>new D(v)),ye.struct=((v,R,$)=>new I(v,R,$)),ye.bits=((v,R,$)=>new b(v,R,$)),ye.seq=((v,R,$)=>new L(v,R,$)),ye.union=((v,R,$)=>new B(v,R,$)),ye.unionLayoutDiscriminator=((v,R)=>new F(v,R)),ye.blob=((v,R)=>new M(v,R)),ye.cstr=(v=>new k(v)),ye.utf8=((v,R)=>new j(v,R)),ye.constant=((v,R)=>new N(v,R)),ye}var te=TNe(),NNe=8078e3,PNe=8078001,RNe=8078004,ONe=8078005,kNe=8078006,BNe=8078011;function Qte(t){return Array.isArray(t)?"%5B"+t.map(Qte).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function UNe([t,e]){return`${t}=${Qte(e)}`}function MNe(t){const e=Object.entries(t).map(UNe).join("&");return btoa(e)}function DNe(t,e={}){{let r=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(r+=` '${MNe(e)}'`),`${r}\``}}var sy=class extends Error{cause=this.cause;context;constructor(...[t,e]){let r,n;if(e){const{cause:i,...o}=e;i&&(n={cause:i}),Object.keys(o).length>0&&(r=o)}const s=DNe(t,r);super(s,n),this.context={__code:t,...r},this.name="SolanaError"}};function jNe(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function LNe(t){return Object.freeze({...t,encode:e=>{const r=new Uint8Array(jNe(e,t));return t.write(e,r,0),r}})}function FNe(t){return Object.freeze({...t,decode:(e,r=0)=>t.read(e,r)[0]})}function Bg(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function $Ne(t,e){if(Bg(t)!==Bg(e))throw new sy(RNe);if(Bg(t)&&Bg(e)&&t.fixedSize!==e.fixedSize)throw new sy(ONe,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!Bg(t)&&!Bg(e)&&t.maxSize!==e.maxSize)throw new sy(kNe,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function qNe(t,e,r=0){if(e.length-r<=0)throw new sy(NNe,{codecDescription:t})}function HNe(t,e,r,n=0){const s=r.length-n;if(s<e)throw new sy(PNe,{bytesLength:s,codecDescription:t,expected:e})}function zNe(t,e,r,n){if(n<e||n>r)throw new sy(BNe,{codecDescription:t,max:r,min:e,value:n})}function ere(t){return t?.endian!==1}function WNe(t){return LNe({fixedSize:t.size,write(e,r,n){t.range&&zNe(t.name,t.range[0],t.range[1],e);const s=new ArrayBuffer(t.size);return t.set(new DataView(s),e,ere(t.config)),r.set(new Uint8Array(s),n),n+t.size}})}function VNe(t){return FNe({fixedSize:t.size,read(e,r=0){qNe(t.name,e,r),HNe(t.name,t.size,e,r);const n=new DataView(GNe(e,r,t.size));return[t.get(n,ere(t.config)),r+t.size]}})}function GNe(t,e,r){const n=t.byteOffset+(e??0),s=r??t.byteLength;return t.buffer.slice(n,n+s)}var KNe=(t={})=>WNe({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,r,n)=>e.setBigUint64(0,BigInt(r),n),size:8}),ZNe=(t={})=>VNe({config:t,get:(e,r)=>e.getBigUint64(0,r),name:"u64",size:8}),YNe=(t={})=>$Ne(KNe(t),ZNe(t));class JNe extends TypeError{constructor(e,r){let n;const{message:s,explanation:i,...o}=e,{path:a}=e,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}}function XNe(t){return ZE(t)&&typeof t[Symbol.iterator]=="function"}function ZE(t){return typeof t=="object"&&t!=null}function H6(t){return ZE(t)&&!Array.isArray(t)}function qu(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function QNe(t){const{done:e,value:r}=t.next();return e?void 0:r}function ePe(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:s,branch:i}=e,{type:o}=r,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${qu(n)}\``}=t;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...t,message:c}}function*Sj(t,e,r,n){XNe(t)||(t=[t]);for(const s of t){const i=ePe(s,e,r,n);i&&(yield i)}}function*Bk(t,e,r={}){const{path:n=[],branch:s=[t],coerce:i=!1,mask:o=!1}=r,a={path:n,branch:s,mask:o};i&&(t=e.coercer(t,a));let c="valid";for(const u of e.validator(t,a))u.explanation=r.message,c="not_valid",yield[u,void 0];for(let[u,l,d]of e.entries(t,a)){const f=Bk(l,d,{path:u===void 0?n:[...n,u],branch:u===void 0?s:[...s,l],coerce:i,mask:o,message:r.message});for(const p of f)p[0]?(c=p[0].refinement!=null?"not_refined":"not_valid",yield[p[0],void 0]):i&&(l=p[1],u===void 0?t=l:t instanceof Map?t.set(u,l):t instanceof Set?t.add(l):ZE(t)&&(l!==void 0||u in t)&&(t[u]=l))}if(c!=="not_valid")for(const u of e.refiner(t,a))u.explanation=r.message,c="not_refined",yield[u,void 0];c==="valid"&&(yield[void 0,t])}let Wl=class{constructor(e){const{type:r,schema:n,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=r,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(c,u)=>{const l=s(c,u);return Sj(l,u,this,c)}:this.validator=()=>[],i?this.refiner=(c,u)=>{const l=i(c,u);return Sj(l,u,this,c)}:this.refiner=()=>[]}assert(e,r){return tPe(e,this,r)}create(e,r){return He(e,this,r)}is(e){return tre(e,this)}mask(e,r){return rPe(e,this,r)}validate(e,r={}){return YE(e,this,r)}};function tPe(t,e,r){const n=YE(t,e,{message:r});if(n[0])throw n[0]}function He(t,e,r){const n=YE(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function rPe(t,e,r){const n=YE(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function tre(t,e){return!YE(t,e)[0]}function YE(t,e,r={}){const n=Bk(t,e,r),s=QNe(n);return s[0]?[new JNe(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Q0(t,e){return new Wl({type:t,schema:null,validator:e})}function nPe(){return Q0("any",()=>!0)}function Ke(t){return new Wl({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${qu(e)}`}})}function Dl(){return Q0("boolean",t=>typeof t=="boolean")}function Uk(t){return Q0("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${qu(e)}`)}function ns(t){const e=qu(t),r=typeof t;return new Wl({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${qu(n)}`}})}function sPe(){return Q0("never",()=>!1)}function Ze(t){return new Wl({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function pe(){return Q0("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${qu(t)}`)}function Pt(t){return new Wl({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function rre(t,e){return new Wl({type:"record",schema:null,*entries(r){if(ZE(r))for(const n in r){const s=r[n];yield[n,n,t],yield[n,s,e]}},validator(r){return H6(r)||`Expected an object, but received: ${qu(r)}`},coercer(r){return H6(r)?{...r}:r}})}function Le(){return Q0("string",t=>typeof t=="string"||`Expected a string, but received: ${qu(t)}`)}function Mk(t){const e=sPe();return new Wl({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let s=0;s<n;s++)yield[s,r[s],t[s]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${qu(r)}`},coercer(r){return Array.isArray(r)?r.slice():r}})}function Te(t){const e=Object.keys(t);return new Wl({type:"type",schema:t,*entries(r){if(ZE(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return H6(r)||`Expected an object, but received: ${qu(r)}`},coercer(r){return H6(r)?{...r}:r}})}function Fo(t){const e=t.map(r=>r.type).join(" | ");return new Wl({type:"union",schema:null,coercer(r,n){for(const s of t){const[i,o]=s.validate(r,{coerce:!0,mask:n.mask});if(!i)return o}return r},validator(r,n){const s=[];for(const i of t){const[...o]=Bk(r,i,n),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${qu(r)}`,...s]}})}function Xy(){return Q0("unknown",()=>!0)}function JE(t,e,r){return new Wl({...t,coercer:(n,s)=>tre(n,e)?t.coercer(r(n,s),s):t.coercer(n,s)})}var x2,iPe=new Uint8Array(16);function nre(){if(!x2&&(x2=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!x2))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x2(iPe)}const oPe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function n5(t){return typeof t=="string"&&oPe.test(t)}var Ai=[];for(var JN=0;JN<256;++JN)Ai.push((JN+256).toString(16).substr(1));function s5(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Ai[t[e+0]]+Ai[t[e+1]]+Ai[t[e+2]]+Ai[t[e+3]]+"-"+Ai[t[e+4]]+Ai[t[e+5]]+"-"+Ai[t[e+6]]+Ai[t[e+7]]+"-"+Ai[t[e+8]]+Ai[t[e+9]]+"-"+Ai[t[e+10]]+Ai[t[e+11]]+Ai[t[e+12]]+Ai[t[e+13]]+Ai[t[e+14]]+Ai[t[e+15]]).toLowerCase();if(!n5(r))throw TypeError("Stringified UUID is invalid");return r}var Ij,XN,QN=0,eP=0;function aPe(t,e,r){var n=e&&r||0,s=e||new Array(16);t=t||{};var i=t.node||Ij,o=t.clockseq!==void 0?t.clockseq:XN;if(i==null||o==null){var a=t.random||(t.rng||nre)();i==null&&(i=Ij=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=XN=(a[6]<<8|a[7])&16383)}var c=t.msecs!==void 0?t.msecs:Date.now(),u=t.nsecs!==void 0?t.nsecs:eP+1,l=c-QN+(u-eP)/1e4;if(l<0&&t.clockseq===void 0&&(o=o+1&16383),(l<0||c>QN)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");QN=c,eP=u,XN=o,c+=122192928e5;var d=((c&268435455)*1e4+u)%4294967296;s[n++]=d>>>24&255,s[n++]=d>>>16&255,s[n++]=d>>>8&255,s[n++]=d&255;var f=c/4294967296*1e4&268435455;s[n++]=f>>>8&255,s[n++]=f&255,s[n++]=f>>>24&15|16,s[n++]=f>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var p=0;p<6;++p)s[n+p]=i[p];return e||s5(s)}function sre(t){if(!n5(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function cPe(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var uPe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",lPe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ire(t,e,r){function n(s,i,o,a){if(typeof s=="string"&&(s=cPe(s)),typeof i=="string"&&(i=sre(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=r(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var u=0;u<16;++u)o[a+u]=c[u];return o}return s5(c)}try{n.name=t}catch{}return n.DNS=uPe,n.URL=lPe,n}function dPe(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return fPe(hPe(pPe(t),t.length*8))}function fPe(t){for(var e=[],r=t.length*32,n="0123456789abcdef",s=0;s<r;s+=8){var i=t[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);e.push(o)}return e}function ore(t){return(t+64>>>9<<4)+14+1}function hPe(t,e){t[e>>5]|=128<<e%32,t[ore(e)-1]=e;for(var r=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<t.length;o+=16){var a=r,c=n,u=s,l=i;r=Zi(r,n,s,i,t[o],7,-680876936),i=Zi(i,r,n,s,t[o+1],12,-389564586),s=Zi(s,i,r,n,t[o+2],17,606105819),n=Zi(n,s,i,r,t[o+3],22,-1044525330),r=Zi(r,n,s,i,t[o+4],7,-176418897),i=Zi(i,r,n,s,t[o+5],12,1200080426),s=Zi(s,i,r,n,t[o+6],17,-1473231341),n=Zi(n,s,i,r,t[o+7],22,-45705983),r=Zi(r,n,s,i,t[o+8],7,1770035416),i=Zi(i,r,n,s,t[o+9],12,-1958414417),s=Zi(s,i,r,n,t[o+10],17,-42063),n=Zi(n,s,i,r,t[o+11],22,-1990404162),r=Zi(r,n,s,i,t[o+12],7,1804603682),i=Zi(i,r,n,s,t[o+13],12,-40341101),s=Zi(s,i,r,n,t[o+14],17,-1502002290),n=Zi(n,s,i,r,t[o+15],22,1236535329),r=Yi(r,n,s,i,t[o+1],5,-165796510),i=Yi(i,r,n,s,t[o+6],9,-1069501632),s=Yi(s,i,r,n,t[o+11],14,643717713),n=Yi(n,s,i,r,t[o],20,-373897302),r=Yi(r,n,s,i,t[o+5],5,-701558691),i=Yi(i,r,n,s,t[o+10],9,38016083),s=Yi(s,i,r,n,t[o+15],14,-660478335),n=Yi(n,s,i,r,t[o+4],20,-405537848),r=Yi(r,n,s,i,t[o+9],5,568446438),i=Yi(i,r,n,s,t[o+14],9,-1019803690),s=Yi(s,i,r,n,t[o+3],14,-187363961),n=Yi(n,s,i,r,t[o+8],20,1163531501),r=Yi(r,n,s,i,t[o+13],5,-1444681467),i=Yi(i,r,n,s,t[o+2],9,-51403784),s=Yi(s,i,r,n,t[o+7],14,1735328473),n=Yi(n,s,i,r,t[o+12],20,-1926607734),r=Ji(r,n,s,i,t[o+5],4,-378558),i=Ji(i,r,n,s,t[o+8],11,-2022574463),s=Ji(s,i,r,n,t[o+11],16,1839030562),n=Ji(n,s,i,r,t[o+14],23,-35309556),r=Ji(r,n,s,i,t[o+1],4,-1530992060),i=Ji(i,r,n,s,t[o+4],11,1272893353),s=Ji(s,i,r,n,t[o+7],16,-155497632),n=Ji(n,s,i,r,t[o+10],23,-1094730640),r=Ji(r,n,s,i,t[o+13],4,681279174),i=Ji(i,r,n,s,t[o],11,-358537222),s=Ji(s,i,r,n,t[o+3],16,-722521979),n=Ji(n,s,i,r,t[o+6],23,76029189),r=Ji(r,n,s,i,t[o+9],4,-640364487),i=Ji(i,r,n,s,t[o+12],11,-421815835),s=Ji(s,i,r,n,t[o+15],16,530742520),n=Ji(n,s,i,r,t[o+2],23,-995338651),r=Xi(r,n,s,i,t[o],6,-198630844),i=Xi(i,r,n,s,t[o+7],10,1126891415),s=Xi(s,i,r,n,t[o+14],15,-1416354905),n=Xi(n,s,i,r,t[o+5],21,-57434055),r=Xi(r,n,s,i,t[o+12],6,1700485571),i=Xi(i,r,n,s,t[o+3],10,-1894986606),s=Xi(s,i,r,n,t[o+10],15,-1051523),n=Xi(n,s,i,r,t[o+1],21,-2054922799),r=Xi(r,n,s,i,t[o+8],6,1873313359),i=Xi(i,r,n,s,t[o+15],10,-30611744),s=Xi(s,i,r,n,t[o+6],15,-1560198380),n=Xi(n,s,i,r,t[o+13],21,1309151649),r=Xi(r,n,s,i,t[o+4],6,-145523070),i=Xi(i,r,n,s,t[o+11],10,-1120210379),s=Xi(s,i,r,n,t[o+2],15,718787259),n=Xi(n,s,i,r,t[o+9],21,-343485551),r=yh(r,a),n=yh(n,c),s=yh(s,u),i=yh(i,l)}return[r,n,s,i]}function pPe(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(ore(e)),n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function yh(t,e){var r=(t&65535)+(e&65535),n=(t>>16)+(e>>16)+(r>>16);return n<<16|r&65535}function gPe(t,e){return t<<e|t>>>32-e}function i5(t,e,r,n,s,i){return yh(gPe(yh(yh(e,t),yh(n,i)),s),r)}function Zi(t,e,r,n,s,i,o){return i5(e&r|~e&n,t,e,s,i,o)}function Yi(t,e,r,n,s,i,o){return i5(e&n|r&~n,t,e,s,i,o)}function Ji(t,e,r,n,s,i,o){return i5(e^r^n,t,e,s,i,o)}function Xi(t,e,r,n,s,i,o){return i5(r^(e|~n),t,e,s,i,o)}var mPe=ire("v3",48,dPe);function yPe(t,e,r){t=t||{};var n=t.random||(t.rng||nre)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=n[s];return e}return s5(n)}function bPe(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function tP(t,e){return t<<e|t>>>32-e}function wPe(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=[];for(var s=0;s<n.length;++s)t.push(n.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=t[c*64+l*4]<<24|t[c*64+l*4+1]<<16|t[c*64+l*4+2]<<8|t[c*64+l*4+3];a[c]=u}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var d=0;d<o;++d){for(var f=new Uint32Array(80),p=0;p<16;++p)f[p]=a[d][p];for(var g=16;g<80;++g)f[g]=tP(f[g-3]^f[g-8]^f[g-14]^f[g-16],1);for(var h=r[0],y=r[1],E=r[2],S=r[3],C=r[4],_=0;_<80;++_){var T=Math.floor(_/20),P=tP(h,5)+bPe(T,y,E,S)+C+e[T]+f[_]>>>0;C=S,S=E,E=tP(y,30)>>>0,y=h,h=P}r[0]=r[0]+h>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+E>>>0,r[3]=r[3]+S>>>0,r[4]=r[4]+C>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var vPe=ire("v5",80,wPe);const EPe="00000000-0000-0000-0000-000000000000";function _Pe(t){if(!n5(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const APe=Object.freeze(Object.defineProperty({__proto__:null,NIL:EPe,parse:sre,stringify:s5,v1:aPe,v3:mPe,v4:yPe,v5:vPe,validate:n5,version:_Pe},Symbol.toStringTag,{value:"Module"})),are=Ln(APe);var rP,Tj;function xPe(){if(Tj)return rP;Tj=1;const t=are.v4;return rP=function(r,n,s,i){if(typeof r!="string")throw new TypeError(r+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:r};if(o===2&&(a.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");a.params=n}if(typeof s>"u"){const c=typeof i.generator=="function"?i.generator:function(){return t()};a.id=c(a,i)}else o===2&&s===null?i.notificationIdNull&&(a.id=null):a.id=s;return a},rP}var nP,Nj;function CPe(){if(Nj)return nP;Nj=1;const t=are.v4,e=xPe(),r=function(n,s){if(!(this instanceof r))return new r(n,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return t()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=n};return nP=r,r.prototype.request=function(n,s,i,o){const a=this;let c=null;const u=Array.isArray(n)&&typeof s=="function";if(this.options.version===1&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&n&&typeof n=="object"&&typeof s=="function")o=s,c=n;else{typeof i=="function"&&(o=i,i=void 0);const f=typeof o=="function";try{c=e(n,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(p){if(f)return o(p);throw p}if(!f)return c}let d;try{d=JSON.stringify(c,this.options.replacer)}catch(f){return o(f)}return this.callServer(d,function(f,p){a._parseResponse(f,p,o)}),c},r.prototype._parseResponse=function(n,s,i){if(n){i(n);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(a){return i(a)}if(i.length===3)if(Array.isArray(o)){const a=function(u){return typeof u.error<"u"},c=function(u){return!a(u)};return i(null,o.filter(a),o.filter(c))}else return i(null,o.error,o.result);i(null,o)},nP}var SPe=CPe();const IPe=xa(SPe);var TPe=class extends IQ{socket;constructor(t,e){super(),this.socket=new window.WebSocket(t,e.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(t,e,r){const n=r||e;try{this.socket.send(t),n()}catch(s){n(s)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function NPe(t,e){return new TPe(t,e)}var PPe=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},RPe=class extends IQ{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:n=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},a,c){super(),this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new PPe,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,n){return!n&&typeof r=="object"&&(n=r,r=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(t,e),a={jsonrpc:"2.0",method:t,params:e||void 0,id:o};this.socket.send(this.dataPack.encode(a),n,c=>{if(c)return i(c);this.queue[o]={promise:[s,i]},r&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,n)=>{if(!this.ready)return n(new Error("socket not ready"));const s={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(s),i=>{if(i)return n(i);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket&&this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=nr.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const n=[r.notification];if(r.params.constructor===Object)n.push(r.params);else for(let s=0;s<r.params.length;s++)n.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,n)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r?.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",r,n),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,n),1))})}};KE.utils.randomPrivateKey;KE.getPublicKey;function Pj(t){try{return KE.ExtendedPoint.fromHex(t),!0}catch{return!1}}const cre=(t,e)=>KE.sign(t,e.slice(0,32)),OPe=KE.verify,Ti=t=>nr.Buffer.isBuffer(t)?t:t instanceof Uint8Array?nr.Buffer.from(t.buffer,t.byteOffset,t.byteLength):nr.Buffer.from(t);class kPe{constructor(e){Object.assign(this,e)}encode(){return nr.Buffer.from(YN.serialize(II,this))}static decode(e){return YN.deserialize(II,this,e)}static decodeUnchecked(e){return YN.deserializeUnchecked(II,this,e)}}const II=new Map;var ure;const BPe=32,_h=32;function UPe(t){return t._bn!==void 0}let Rj=1,dt=class Nm extends kPe{constructor(e){if(super({}),this._bn=void 0,UPe(e))this._bn=e._bn;else{if(typeof e=="string"){const r=Oi.decode(e);if(r.length!=_h)throw new Error("Invalid public key input");this._bn=new Ft(r)}else this._bn=new Ft(e);if(this._bn.byteLength()>_h)throw new Error("Invalid public key input")}}static unique(){const e=new Nm(Rj);return Rj+=1,new Nm(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Oi.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(nr.Buffer);if(e.length===_h)return e;const r=nr.Buffer.alloc(32);return e.copy(r,32-e.length),r}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,r,n){const s=nr.Buffer.concat([e.toBuffer(),nr.Buffer.from(r),n.toBuffer()]),i=Ej(s);return new Nm(i)}static createProgramAddressSync(e,r){let n=nr.Buffer.alloc(0);e.forEach(function(i){if(i.length>BPe)throw new TypeError("Max seed length exceeded");n=nr.Buffer.concat([n,Ti(i)])}),n=nr.Buffer.concat([n,r.toBuffer(),nr.Buffer.from("ProgramDerivedAddress")]);const s=Ej(n);if(Pj(s))throw new Error("Invalid seeds, address must fall off the curve");return new Nm(s)}static async createProgramAddress(e,r){return this.createProgramAddressSync(e,r)}static findProgramAddressSync(e,r){let n=255,s;for(;n!=0;){try{const i=e.concat(nr.Buffer.from([n]));s=this.createProgramAddressSync(i,r)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,r){return this.findProgramAddressSync(e,r)}static isOnCurve(e){const r=new Nm(e);return Pj(r.toBytes())}};ure=dt;dt.default=new ure("11111111111111111111111111111111");II.set(dt,{kind:"struct",fields:[["_bn","u256"]]});new dt("BPFLoader1111111111111111111111111111111111");const iy=1232,Dk=127,z6=64;class lre extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(lre.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class dre extends Error{constructor(e,r){super(`Transaction was not confirmed in ${r.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(dre.prototype,"name",{value:"TransactionExpiredTimeoutError"});class E1 extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(E1.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class W6{constructor(e,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=r}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const r of this.keySegments()){if(e<r.length)return r[e];e-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const ur=(t="publicKey")=>te.blob(32,t),MPe=(t="signature")=>te.blob(64,t),qm=(t="string")=>{const e=te.struct([te.u32("length"),te.u32("lengthPadding"),te.blob(te.offset(te.u32(),-8),"chars")],t),r=e.decode.bind(e),n=e.encode.bind(e),s=e;return s.decode=(i,o)=>r(i,o).chars.toString(),s.encode=(i,o,a)=>{const c={chars:nr.Buffer.from(i,"utf8")};return n(c,o,a)},s.alloc=i=>te.u32().span+te.u32().span+nr.Buffer.from(i,"utf8").length,s},DPe=(t="authorized")=>te.struct([ur("staker"),ur("withdrawer")],t),jPe=(t="lockup")=>te.struct([te.ns64("unixTimestamp"),te.ns64("epoch"),ur("custodian")],t),LPe=(t="voteInit")=>te.struct([ur("nodePubkey"),ur("authorizedVoter"),ur("authorizedWithdrawer"),te.u8("commission")],t),FPe=(t="voteAuthorizeWithSeedArgs")=>te.struct([te.u32("voteAuthorizationType"),ur("currentAuthorityDerivedKeyOwnerPubkey"),qm("currentAuthorityDerivedKeySeed"),ur("newAuthorized")],t);function fre(t,e){const r=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*r(s.elementLayout)}else if("fields"in s)return fre({layout:s},e[s.property]);return 0};let n=0;return t.layout.fields.forEach(s=>{n+=r(s)}),n}function Ja(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(n&127)<<r*7,r+=1,(n&128)===0)break}return e}function Xa(t,e){let r=e;for(;;){let n=r&127;if(r>>=7,r==0){t.push(n);break}else n|=128,t.push(n)}}function Kn(t,e){if(!t)throw new Error(e||"Assertion failed")}class o5{constructor(e,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=r}static compile(e,r){const n=new Map,s=o=>{const a=o.toBase58();let c=n.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,c)),c},i=s(r);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const a of o.keys){const c=s(a.pubkey);c.isSigner||=a.isSigner,c.isWritable||=a.isWritable}}return new o5(r,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Kn(e.length<=256,"Max static account keys length exceeded");const r=e.filter(([,c])=>c.isSigner&&c.isWritable),n=e.filter(([,c])=>c.isSigner&&!c.isWritable),s=e.filter(([,c])=>!c.isSigner&&c.isWritable),i=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Kn(r.length>0,"Expected at least one writable signer key");const[c]=r[0];Kn(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...r.map(([c])=>new dt(c)),...n.map(([c])=>new dt(c)),...s.map(([c])=>new dt(c)),...i.map(([c])=>new dt(c))];return[o,a]}extractTableLookup(e){const[r,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(r.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:r,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(e,r){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(r(o)){const a=new dt(i),c=e.findIndex(u=>u.equals(a));c>=0&&(Kn(c<256,"Max lookup table index exceeded"),n.push(c),s.push(a),this.keyMetaMap.delete(i))}return[n,s]}}const hre="Reached end of buffer unexpectedly";function Hd(t){if(t.length===0)throw new Error(hre);return t.shift()}function Qa(t,...e){const[r]=e;if(e.length===2?r+(e[1]??0)>t.length:r>=t.length)throw new Error(hre);return t.splice(...e)}class sf{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(r=>new dt(r)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Oi.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new W6(this.staticAccountKeys)}static compile(e){const r=o5.compile(e.instructions,e.payerKey),[n,s]=r.getMessageComponents(),o=new W6(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Oi.encode(a.data)}));return new sf({header:n,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-r,i=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=r-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,r)=>!this.isProgramId(r))}serialize(){const e=this.accountKeys.length;let r=[];Xa(r,e);const n=this.instructions.map(d=>{const{accounts:f,programIdIndex:p}=d,g=Array.from(Oi.decode(d.data));let h=[];Xa(h,f.length);let y=[];return Xa(y,g.length),{programIdIndex:p,keyIndicesCount:nr.Buffer.from(h),keyIndices:f,dataLength:nr.Buffer.from(y),data:g}});let s=[];Xa(s,n.length);let i=nr.Buffer.alloc(iy);nr.Buffer.from(s).copy(i);let o=s.length;n.forEach(d=>{const p=te.struct([te.u8("programIdIndex"),te.blob(d.keyIndicesCount.length,"keyIndicesCount"),te.seq(te.u8("keyIndex"),d.keyIndices.length,"keyIndices"),te.blob(d.dataLength.length,"dataLength"),te.seq(te.u8("userdatum"),d.data.length,"data")]).encode(d,i,o);o+=p}),i=i.slice(0,o);const a=te.struct([te.blob(1,"numRequiredSignatures"),te.blob(1,"numReadonlySignedAccounts"),te.blob(1,"numReadonlyUnsignedAccounts"),te.blob(r.length,"keyCount"),te.seq(ur("key"),e,"keys"),ur("recentBlockhash")]),c={numRequiredSignatures:nr.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:nr.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:nr.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:nr.Buffer.from(r),keys:this.accountKeys.map(d=>Ti(d.toBytes())),recentBlockhash:Oi.decode(this.recentBlockhash)};let u=nr.Buffer.alloc(2048);const l=a.encode(c,u);return i.copy(u,l),u.slice(0,l+i.length)}static from(e){let r=[...e];const n=Hd(r);if(n!==(n&Dk))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Hd(r),i=Hd(r),o=Ja(r);let a=[];for(let f=0;f<o;f++){const p=Qa(r,0,_h);a.push(new dt(nr.Buffer.from(p)))}const c=Qa(r,0,_h),u=Ja(r);let l=[];for(let f=0;f<u;f++){const p=Hd(r),g=Ja(r),h=Qa(r,0,g),y=Ja(r),E=Qa(r,0,y),S=Oi.encode(nr.Buffer.from(E));l.push({programIdIndex:p,accounts:h,data:S})}const d={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Oi.encode(nr.Buffer.from(c)),accountKeys:a,instructions:l};return new sf(d)}}class Zv{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const r of this.addressTableLookups)e+=r.readonlyIndexes.length+r.writableIndexes.length;return e}getAccountKeys(e){let r;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)r=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new W6(this.staticAccountKeys,r)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const s=e-n,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-r,o=n-r-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=r-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const r={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=e.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)r.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)r.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(e){const r=o5.compile(e.instructions,e.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const l of i){const d=r.extractTableLookup(l);if(d!==void 0){const[f,{writable:p,readonly:g}]=d;n.push(f),s.writable.push(...p),s.readonly.push(...g)}}const[o,a]=r.getMessageComponents(),u=new W6(a,s).compileInstructions(e.instructions);return new Zv({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:u,addressTableLookups:n})}serialize(){const e=Array();Xa(e,this.staticAccountKeys.length);const r=this.serializeInstructions(),n=Array();Xa(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Xa(i,this.addressTableLookups.length);const o=te.struct([te.u8("prefix"),te.struct([te.u8("numRequiredSignatures"),te.u8("numReadonlySignedAccounts"),te.u8("numReadonlyUnsignedAccounts")],"header"),te.blob(e.length,"staticAccountKeysLength"),te.seq(ur(),this.staticAccountKeys.length,"staticAccountKeys"),ur("recentBlockhash"),te.blob(n.length,"instructionsLength"),te.blob(r.length,"serializedInstructions"),te.blob(i.length,"addressTableLookupsLength"),te.blob(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(iy),u=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(l=>l.toBytes()),recentBlockhash:Oi.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,u)}serializeInstructions(){let e=0;const r=new Uint8Array(iy);for(const n of this.compiledInstructions){const s=Array();Xa(s,n.accountKeyIndexes.length);const i=Array();Xa(i,n.data.length);const o=te.struct([te.u8("programIdIndex"),te.blob(s.length,"encodedAccountKeyIndexesLength"),te.seq(te.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),te.blob(i.length,"encodedDataLength"),te.blob(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},r,e)}return r.slice(0,e)}serializeAddressTableLookups(){let e=0;const r=new Uint8Array(iy);for(const n of this.addressTableLookups){const s=Array();Xa(s,n.writableIndexes.length);const i=Array();Xa(i,n.readonlyIndexes.length);const o=te.struct([ur("accountKey"),te.blob(s.length,"encodedWritableIndexesLength"),te.seq(te.u8(),n.writableIndexes.length,"writableIndexes"),te.blob(i.length,"encodedReadonlyIndexesLength"),te.seq(te.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},r,e)}return r.slice(0,e)}static deserialize(e){let r=[...e];const n=Hd(r),s=n&Dk;Kn(n!==s,"Expected versioned message but received legacy message");const i=s;Kn(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Hd(r),numReadonlySignedAccounts:Hd(r),numReadonlyUnsignedAccounts:Hd(r)},a=[],c=Ja(r);for(let g=0;g<c;g++)a.push(new dt(Qa(r,0,_h)));const u=Oi.encode(Qa(r,0,_h)),l=Ja(r),d=[];for(let g=0;g<l;g++){const h=Hd(r),y=Ja(r),E=Qa(r,0,y),S=Ja(r),C=new Uint8Array(Qa(r,0,S));d.push({programIdIndex:h,accountKeyIndexes:E,data:C})}const f=Ja(r),p=[];for(let g=0;g<f;g++){const h=new dt(Qa(r,0,_h)),y=Ja(r),E=Qa(r,0,y),S=Ja(r),C=Qa(r,0,S);p.push({accountKey:h,writableIndexes:E,readonlyIndexes:C})}return new Zv({header:o,staticAccountKeys:a,recentBlockhash:u,compiledInstructions:d,addressTableLookups:p})}}const pre={deserializeMessageVersion(t){const e=t[0],r=e&Dk;return r===e?"legacy":r},deserialize:t=>{const e=pre.deserializeMessageVersion(t);if(e==="legacy")return sf.from(t);if(e===0)return Zv.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Uf=(function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t})({});const $Pe=nr.Buffer.alloc(z6).fill(0);class Ri{constructor(e){this.keys=void 0,this.programId=void 0,this.data=nr.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:r,isWritable:n})=>({pubkey:e.toJSON(),isSigner:r,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class ki{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:r,nonceInfo:n}=e;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:r,lastValidBlockHeight:n}=e;this.recentBlockhash=r,this.lastValidBlockHeight=n}else{const{recentBlockhash:r,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new Ri(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(e=this.recentBlockhash,r=this.instructions),!e)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let h=0;h<r.length;h++)if(r[h].programId===void 0)throw new Error(`Transaction instruction index ${h} has undefined program id`);const s=[],i=[];r.forEach(h=>{h.keys.forEach(E=>{i.push({...E})});const y=h.programId.toString();s.includes(y)||s.push(y)}),s.forEach(h=>{i.push({pubkey:new dt(h),isSigner:!1,isWritable:!1})});const o=[];i.forEach(h=>{const y=h.pubkey.toString(),E=o.findIndex(S=>S.pubkey.toString()===y);E>-1?(o[E].isWritable=o[E].isWritable||h.isWritable,o[E].isSigner=o[E].isSigner||h.isSigner):o.push(h)}),o.sort(function(h,y){if(h.isSigner!==y.isSigner)return h.isSigner?-1:1;if(h.isWritable!==y.isWritable)return h.isWritable?-1:1;const E={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return h.pubkey.toBase58().localeCompare(y.pubkey.toBase58(),"en",E)});const a=o.findIndex(h=>h.pubkey.equals(n));if(a>-1){const[h]=o.splice(a,1);h.isSigner=!0,h.isWritable=!0,o.unshift(h)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const h of this.signatures){const y=o.findIndex(E=>E.pubkey.equals(h.publicKey));if(y>-1)o[y].isSigner||(o[y].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${h.publicKey.toString()}`)}let c=0,u=0,l=0;const d=[],f=[];o.forEach(({pubkey:h,isSigner:y,isWritable:E})=>{y?(d.push(h.toString()),c+=1,E||(u+=1)):(f.push(h.toString()),E||(l+=1))});const p=d.concat(f),g=r.map(h=>{const{data:y,programId:E}=h;return{programIdIndex:p.indexOf(E.toString()),accounts:h.keys.map(S=>p.indexOf(S.pubkey.toString())),data:Oi.encode(y)}});return g.forEach(h=>{Kn(h.programIdIndex>=0),h.accounts.forEach(y=>Kn(y>=0))}),new sf({header:{numRequiredSignatures:c,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:l},accountKeys:p,recentBlockhash:e,instructions:g})}_compile(){const e=this.compileMessage(),r=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((s,i)=>r[i].equals(s.publicKey))||(this.signatures=r.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const r=new Set;this.signatures=e.filter(n=>{const s=n.toString();return r.has(s)?!1:(r.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const i of e){const o=i.publicKey.toString();r.has(o)||(r.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const i of e){const o=i.publicKey.toString();r.has(o)||(r.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(e,...r){const n=e.serialize();r.forEach(s=>{const i=cre(n,s.secretKey);this._addSignature(s.publicKey,Ti(i))})}addSignature(e,r){this._compile(),this._addSignature(e,r)}_addSignature(e,r){Kn(r.length===64);const n=this.signatures.findIndex(s=>e.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=nr.Buffer.from(r)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,r){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?r&&(n.missing||=[]).push(i):OPe(s,e,i.toBytes())||(n.invalid||=[]).push(i);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:r,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,r);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:r}=this,n=[];Xa(n,r.length);const s=n.length+r.length*64+e.length,i=nr.Buffer.alloc(s);return Kn(r.length<256),nr.Buffer.from(n).copy(i,0),r.forEach(({signature:o},a)=>{o!==null&&(Kn(o.length===64,"signature has invalid length"),nr.Buffer.from(o).copy(i,n.length+a*64))}),e.copy(i,n.length+r.length*64),Kn(i.length<=iy,`Transaction too large: ${i.length} > ${iy}`),i}get keys(){return Kn(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Kn(this.instructions.length===1),this.instructions[0].programId}get data(){return Kn(this.instructions.length===1),this.instructions[0].data}static from(e){let r=[...e];const n=Ja(r);let s=[];for(let i=0;i<n;i++){const o=Qa(r,0,z6);s.push(Oi.encode(nr.Buffer.from(o)))}return ki.populate(sf.from(r),s)}static populate(e,r=[]){const n=new ki;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),r.forEach((s,i)=>{const o={signature:s==Oi.encode($Pe)?null:Oi.decode(s),publicKey:e.accountKeys[i]};n.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new Ri({keys:i,programId:e.accountKeys[s.programIdIndex],data:Oi.decode(s.data)}))}),n._message=e,n._json=n.toJSON(),n}}class Oh{get version(){return this.message.version}constructor(e,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)Kn(r.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{const n=[];for(let s=0;s<e.header.numRequiredSignatures;s++)n.push(new Uint8Array(z6));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),r=Array();Xa(r,this.signatures.length);const n=te.struct([te.blob(r.length,"encodedSignaturesLength"),te.seq(MPe(),this.signatures.length,"signatures"),te.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let r=[...e];const n=[],s=Ja(r);for(let o=0;o<s;o++)n.push(new Uint8Array(Qa(r,0,z6)));const i=pre.deserialize(new Uint8Array(r));return new Oh(i,n)}sign(e){const r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=n.findIndex(o=>o.equals(s.publicKey));Kn(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=cre(r,s.secretKey)}}addSignature(e,r){Kn(r.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));Kn(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=r}}const qPe=160,HPe=64,zPe=qPe/HPe,WPe=1e3/zPe;new dt("SysvarC1ock11111111111111111111111111111111");new dt("SysvarEpochSchedu1e111111111111111111111111");new dt("Sysvar1nstructions1111111111111111111111111");const sP=new dt("SysvarRecentB1ockHashes11111111111111111111"),Oj=new dt("SysvarRent111111111111111111111111111111111");new dt("SysvarRewards111111111111111111111111111111");new dt("SysvarS1otHashes111111111111111111111111111");new dt("SysvarS1otHistory11111111111111111111111111");new dt("SysvarStakeHistory1111111111111111111111111");class vO extends Error{constructor({action:e,signature:r,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${r} resulted in an error. 
${n}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=r,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((r,n)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,r(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class _t extends Error{constructor({code:e,message:r,data:n},s){super(s!=null?`${s}: ${r}`:r),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}function Pm(t){return new Promise(e=>setTimeout(e,t))}function io(t,e){const r=t.layout.span>=0?t.layout.span:fre(t,e),n=nr.Buffer.alloc(r),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,n),n}const VPe=te.nu64("lamportsPerSignature"),gre=te.struct([te.u32("version"),te.u32("state"),ur("authorizedPubkey"),ur("nonce"),te.struct([VPe],"feeCalculator")]),kj=gre.span;class jk{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const r=gre.decode(Ti(e),0);return new jk({authorizedPubkey:new dt(r.authorizedPubkey),nonce:new dt(r.nonce).toString(),feeCalculator:r.feeCalculator})}}function Ny(t){const e=te.blob(8,t),r=e.decode.bind(e),n=e.encode.bind(e),s=e,i=YNe();return s.decode=(o,a)=>{const c=r(o,a);return i.decode(c)},s.encode=(o,a,c)=>{const u=i.encode(o);return n(u,a,c)},s}const Sc=Object.freeze({Create:{index:0,layout:te.struct([te.u32("instruction"),te.ns64("lamports"),te.ns64("space"),ur("programId")])},Assign:{index:1,layout:te.struct([te.u32("instruction"),ur("programId")])},Transfer:{index:2,layout:te.struct([te.u32("instruction"),Ny("lamports")])},CreateWithSeed:{index:3,layout:te.struct([te.u32("instruction"),ur("base"),qm("seed"),te.ns64("lamports"),te.ns64("space"),ur("programId")])},AdvanceNonceAccount:{index:4,layout:te.struct([te.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:te.struct([te.u32("instruction"),te.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:te.struct([te.u32("instruction"),ur("authorized")])},AuthorizeNonceAccount:{index:7,layout:te.struct([te.u32("instruction"),ur("authorized")])},Allocate:{index:8,layout:te.struct([te.u32("instruction"),te.ns64("space")])},AllocateWithSeed:{index:9,layout:te.struct([te.u32("instruction"),ur("base"),qm("seed"),te.ns64("space"),ur("programId")])},AssignWithSeed:{index:10,layout:te.struct([te.u32("instruction"),ur("base"),qm("seed"),ur("programId")])},TransferWithSeed:{index:11,layout:te.struct([te.u32("instruction"),Ny("lamports"),qm("seed"),ur("programId")])},UpgradeNonceAccount:{index:12,layout:te.struct([te.u32("instruction")])}});class Py{constructor(){}static createAccount(e){const r=Sc.Create,n=io(r,{lamports:e.lamports,space:e.space,programId:Ti(e.programId.toBuffer())});return new Ri({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let r,n;if("basePubkey"in e){const s=Sc.TransferWithSeed;r=io(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:Ti(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Sc.Transfer;r=io(s,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Ri({keys:n,programId:this.programId,data:r})}static assign(e){let r,n;if("basePubkey"in e){const s=Sc.AssignWithSeed;r=io(s,{base:Ti(e.basePubkey.toBuffer()),seed:e.seed,programId:Ti(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Sc.Assign;r=io(s,{programId:Ti(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ri({keys:n,programId:this.programId,data:r})}static createAccountWithSeed(e){const r=Sc.CreateWithSeed,n=io(r,{base:Ti(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Ti(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Ri({keys:s,programId:this.programId,data:n})}static createNonceAccount(e){const r=new ki;"basePubkey"in e&&"seed"in e?r.add(Py.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:kj,programId:this.programId})):r.add(Py.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:kj,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}static nonceInitialize(e){const r=Sc.InitializeNonceAccount,n=io(r,{authorized:Ti(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:sP,isSigner:!1,isWritable:!1},{pubkey:Oj,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Ri(s)}static nonceAdvance(e){const r=Sc.AdvanceNonceAccount,n=io(r),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:sP,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Ri(s)}static nonceWithdraw(e){const r=Sc.WithdrawNonceAccount,n=io(r,{lamports:e.lamports});return new Ri({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:sP,isSigner:!1,isWritable:!1},{pubkey:Oj,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const r=Sc.AuthorizeNonceAccount,n=io(r,{authorized:Ti(e.newAuthorizedPubkey.toBuffer())});return new Ri({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let r,n;if("basePubkey"in e){const s=Sc.AllocateWithSeed;r=io(s,{base:Ti(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Ti(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Sc.Allocate;r=io(s,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ri({keys:n,programId:this.programId,data:r})}}Py.programId=new dt("11111111111111111111111111111111");new dt("BPFLoader2111111111111111111111111111111111");function GPe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var iP,Bj;function KPe(){if(Bj)return iP;Bj=1;var t=Object.prototype.toString,e=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function r(n,s){var i,o,a,c,u,l,d;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return r(n.toJSON(),s);if(d=t.call(n),d==="[object Array]"){for(a="[",o=n.length-1,i=0;i<o;i++)a+=r(n[i],!0)+",";return o>-1&&(a+=r(n[i],!0)),a+"]"}else if(d==="[object Object]"){for(c=e(n).sort(),o=c.length,a="",i=0;i<o;)u=c[i],l=r(n[u],!1),l!==void 0&&(a&&(a+=","),a+=JSON.stringify(u)+":"+l),i++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return iP=function(n){var s=r(n,!1);if(s!==void 0)return""+s},iP}var ZPe=KPe(),Uj=GPe(ZPe);const Wb=32;function oP(t){let e=0;for(;t>1;)t/=2,e++;return e}function YPe(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class JPe{constructor(e,r,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const r=oP(YPe(e+Wb+1))-oP(Wb)-1,n=this.getSlotsInEpoch(r),s=e-(n-Wb);return[r,s]}else{const r=e-this.firstNormalSlot,n=Math.floor(r/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=r%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Wb:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+oP(Wb)):this.slotsPerEpoch}}var XPe=globalThis.fetch;class QPe extends RPe{constructor(e,r,n){const s=i=>{const o=NPe(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...r});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,r,n),this.underlyingSocket=void 0}call(...e){const r=this.underlyingSocket?.readyState;return r===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...e){const r=this.underlyingSocket?.readyState;return r===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}}function eRe(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}const Mj=56;class Dj{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const r=eRe(tRe,e),n=e.length-Mj;Kn(n>=0,"lookup table is invalid"),Kn(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=te.struct([te.seq(ur(),s,"addresses")]).decode(e.slice(Mj));return{deactivationSlot:r.deactivationSlot,lastExtendedSlot:r.lastExtendedSlot,lastExtendedSlotStartIndex:r.lastExtendedStartIndex,authority:r.authority.length!==0?new dt(r.authority[0]):void 0,addresses:i.map(o=>new dt(o))}}}const tRe={index:1,layout:te.struct([te.u32("typeIndex"),Ny("deactivationSlot"),te.nu64("lastExtendedSlot"),te.u8("lastExtendedStartIndex"),te.u8(),te.seq(ur(),te.offset(te.u8(),-1),"authority")])},rRe=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function nRe(t){const e=t.match(rRe);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[r,n,s,i]=e,o=t.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${n}${c}${i}`}const ss=JE(Uk(dt),Le(),t=>new dt(t)),mre=Mk([Le(),ns("base64")]),Lk=JE(Uk(nr.Buffer),mre,t=>nr.Buffer.from(t[0],"base64")),sRe=30*1e3;function iRe(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function On(t){let e,r;if(typeof t=="string")e=t;else if(t){const{commitment:n,...s}=t;e=n,r=s}return{commitment:e,config:r}}function jj(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function yre(t){return Fo([Te({jsonrpc:ns("2.0"),id:Le(),result:t}),Te({jsonrpc:ns("2.0"),id:Le(),error:Te({code:Xy(),message:Le(),data:Pt(nPe())})})])}const oRe=yre(Xy());function rr(t){return JE(yre(t),oRe,e=>"error"in e?e:{...e,result:He(e.result,t)})}function ws(t){return rr(Te({context:Te({slot:pe()}),value:t}))}function a5(t){return Te({context:Te({slot:pe()}),value:t})}function aP(t,e){return t===0?new Zv({header:e.header,staticAccountKeys:e.accountKeys.map(r=>new dt(r)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(r=>({programIdIndex:r.programIdIndex,accountKeyIndexes:r.accounts,data:Oi.decode(r.data)})),addressTableLookups:e.addressTableLookups}):new sf(e)}const aRe=Te({foundation:pe(),foundationTerm:pe(),initial:pe(),taper:pe(),terminal:pe()}),cRe=rr(Ke(Ze(Te({epoch:pe(),effectiveSlot:pe(),amount:pe(),postBalance:pe(),commission:Pt(Ze(pe()))})))),uRe=Ke(Te({slot:pe(),prioritizationFee:pe()})),lRe=Te({total:pe(),validator:pe(),foundation:pe(),epoch:pe()}),dRe=Te({epoch:pe(),slotIndex:pe(),slotsInEpoch:pe(),absoluteSlot:pe(),blockHeight:Pt(pe()),transactionCount:Pt(pe())}),fRe=Te({slotsPerEpoch:pe(),leaderScheduleSlotOffset:pe(),warmup:Dl(),firstNormalEpoch:pe(),firstNormalSlot:pe()}),hRe=rre(Le(),Ke(pe())),eg=Ze(Fo([Te({}),Le()])),pRe=Te({err:eg}),gRe=ns("receivedSignature"),mRe=Te({"solana-core":Le(),"feature-set":Pt(pe())}),yRe=Te({program:Le(),programId:ss,parsed:Xy()}),bRe=Te({programId:ss,accounts:Ke(ss),data:Le()}),Lj=ws(Te({err:Ze(Fo([Te({}),Le()])),logs:Ze(Ke(Le())),accounts:Pt(Ze(Ke(Ze(Te({executable:Dl(),owner:Le(),lamports:pe(),data:Ke(Le()),rentEpoch:Pt(pe())}))))),unitsConsumed:Pt(pe()),returnData:Pt(Ze(Te({programId:Le(),data:Mk([Le(),ns("base64")])}))),innerInstructions:Pt(Ze(Ke(Te({index:pe(),instructions:Ke(Fo([yRe,bRe]))}))))})),wRe=ws(Te({byIdentity:rre(Le(),Ke(pe())),range:Te({firstSlot:pe(),lastSlot:pe()})}));function vRe(t,e,r,n,s,i){const o=r||XPe;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(l,d)=>{const f=await new Promise((p,g)=>{try{n(l,d,(h,y)=>p([h,y]))}catch(h){g(h)}});return await o(...f)}),new IPe(async(l,d)=>{const f={method:"POST",body:l,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},v8e)};try{let p=5,g,h=500;for(;c?g=await c(t,f):g=await o(t,f),!(g.status!==429||s===!0||(p-=1,p===0));)console.error(`Server responded with ${g.status} ${g.statusText}.  Retrying after ${h}ms delay...`),await Pm(h),h*=2;const y=await g.text();g.ok?d(null,y):d(new Error(`${g.status} ${g.statusText}: ${y}`))}catch(p){p instanceof Error&&d(p)}},{})}function ERe(t){return(e,r)=>new Promise((n,s)=>{t.request(e,r,(i,o)=>{if(i){s(i);return}n(o)})})}function _Re(t){return e=>new Promise((r,n)=>{e.length===0&&r([]);const s=e.map(i=>t.request(i.methodName,i.args));t.request(s,(i,o)=>{if(i){n(i);return}r(o)})})}const ARe=rr(aRe),xRe=rr(lRe),CRe=rr(uRe),SRe=rr(dRe),IRe=rr(fRe),TRe=rr(hRe),NRe=rr(pe()),PRe=ws(Te({total:pe(),circulating:pe(),nonCirculating:pe(),nonCirculatingAccounts:Ke(ss)})),EO=Te({amount:Le(),uiAmount:Ze(pe()),decimals:pe(),uiAmountString:Pt(Le())}),RRe=ws(Ke(Te({address:ss,amount:Le(),uiAmount:Ze(pe()),decimals:pe(),uiAmountString:Pt(Le())}))),ORe=ws(Ke(Te({pubkey:ss,account:Te({executable:Dl(),owner:ss,lamports:pe(),data:Lk,rentEpoch:pe()})}))),_O=Te({program:Le(),parsed:Xy(),space:pe()}),kRe=ws(Ke(Te({pubkey:ss,account:Te({executable:Dl(),owner:ss,lamports:pe(),data:_O,rentEpoch:pe()})}))),BRe=ws(Ke(Te({lamports:pe(),address:ss}))),Yv=Te({executable:Dl(),owner:ss,lamports:pe(),data:Lk,rentEpoch:pe()}),URe=Te({pubkey:ss,account:Yv}),MRe=JE(Fo([Uk(nr.Buffer),_O]),Fo([mre,_O]),t=>Array.isArray(t)?He(t,Lk):t),AO=Te({executable:Dl(),owner:ss,lamports:pe(),data:MRe,rentEpoch:pe()}),DRe=Te({pubkey:ss,account:AO}),jRe=Te({state:Fo([ns("active"),ns("inactive"),ns("activating"),ns("deactivating")]),active:pe(),inactive:pe()}),LRe=rr(Ke(Te({signature:Le(),slot:pe(),err:eg,memo:Ze(Le()),blockTime:Pt(Ze(pe()))}))),FRe=rr(Ke(Te({signature:Le(),slot:pe(),err:eg,memo:Ze(Le()),blockTime:Pt(Ze(pe()))}))),$Re=Te({subscription:pe(),result:a5(Yv)}),qRe=Te({pubkey:ss,account:Yv}),HRe=Te({subscription:pe(),result:a5(qRe)}),zRe=Te({parent:pe(),slot:pe(),root:pe()}),WRe=Te({subscription:pe(),result:zRe}),VRe=Fo([Te({type:Fo([ns("firstShredReceived"),ns("completed"),ns("optimisticConfirmation"),ns("root")]),slot:pe(),timestamp:pe()}),Te({type:ns("createdBank"),parent:pe(),slot:pe(),timestamp:pe()}),Te({type:ns("frozen"),slot:pe(),timestamp:pe(),stats:Te({numTransactionEntries:pe(),numSuccessfulTransactions:pe(),numFailedTransactions:pe(),maxTransactionsPerEntry:pe()})}),Te({type:ns("dead"),slot:pe(),timestamp:pe(),err:Le()})]),GRe=Te({subscription:pe(),result:VRe}),KRe=Te({subscription:pe(),result:a5(Fo([pRe,gRe]))}),ZRe=Te({subscription:pe(),result:pe()}),YRe=Te({pubkey:Le(),gossip:Ze(Le()),tpu:Ze(Le()),rpc:Ze(Le()),version:Ze(Le())}),Fj=Te({votePubkey:Le(),nodePubkey:Le(),activatedStake:pe(),epochVoteAccount:Dl(),epochCredits:Ke(Mk([pe(),pe(),pe()])),commission:pe(),lastVote:pe(),rootSlot:Ze(pe())}),JRe=rr(Te({current:Ke(Fj),delinquent:Ke(Fj)})),XRe=Fo([ns("processed"),ns("confirmed"),ns("finalized")]),QRe=Te({slot:pe(),confirmations:Ze(pe()),err:eg,confirmationStatus:Pt(XRe)}),e8e=ws(Ke(Ze(QRe))),t8e=rr(pe()),bre=Te({accountKey:ss,writableIndexes:Ke(pe()),readonlyIndexes:Ke(pe())}),Fk=Te({signatures:Ke(Le()),message:Te({accountKeys:Ke(Le()),header:Te({numRequiredSignatures:pe(),numReadonlySignedAccounts:pe(),numReadonlyUnsignedAccounts:pe()}),instructions:Ke(Te({accounts:Ke(pe()),data:Le(),programIdIndex:pe()})),recentBlockhash:Le(),addressTableLookups:Pt(Ke(bre))})}),wre=Te({pubkey:ss,signer:Dl(),writable:Dl(),source:Pt(Fo([ns("transaction"),ns("lookupTable")]))}),vre=Te({accountKeys:Ke(wre),signatures:Ke(Le())}),Ere=Te({parsed:Xy(),program:Le(),programId:ss}),_re=Te({accounts:Ke(ss),data:Le(),programId:ss}),r8e=Fo([_re,Ere]),n8e=Fo([Te({parsed:Xy(),program:Le(),programId:Le()}),Te({accounts:Ke(Le()),data:Le(),programId:Le()})]),Are=JE(r8e,n8e,t=>"accounts"in t?He(t,_re):He(t,Ere)),xre=Te({signatures:Ke(Le()),message:Te({accountKeys:Ke(wre),instructions:Ke(Are),recentBlockhash:Le(),addressTableLookups:Pt(Ze(Ke(bre)))})}),V6=Te({accountIndex:pe(),mint:Le(),owner:Pt(Le()),programId:Pt(Le()),uiTokenAmount:EO}),Cre=Te({writable:Ke(ss),readonly:Ke(ss)}),c5=Te({err:eg,fee:pe(),innerInstructions:Pt(Ze(Ke(Te({index:pe(),instructions:Ke(Te({accounts:Ke(pe()),data:Le(),programIdIndex:pe()}))})))),preBalances:Ke(pe()),postBalances:Ke(pe()),logMessages:Pt(Ze(Ke(Le()))),preTokenBalances:Pt(Ze(Ke(V6))),postTokenBalances:Pt(Ze(Ke(V6))),loadedAddresses:Pt(Cre),computeUnitsConsumed:Pt(pe()),costUnits:Pt(pe())}),$k=Te({err:eg,fee:pe(),innerInstructions:Pt(Ze(Ke(Te({index:pe(),instructions:Ke(Are)})))),preBalances:Ke(pe()),postBalances:Ke(pe()),logMessages:Pt(Ze(Ke(Le()))),preTokenBalances:Pt(Ze(Ke(V6))),postTokenBalances:Pt(Ze(Ke(V6))),loadedAddresses:Pt(Cre),computeUnitsConsumed:Pt(pe()),costUnits:Pt(pe())}),Qy=Fo([ns(0),ns("legacy")]),tg=Te({pubkey:Le(),lamports:pe(),postBalance:Ze(pe()),rewardType:Ze(Le()),commission:Pt(Ze(pe()))}),s8e=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),transactions:Ke(Te({transaction:Fk,meta:Ze(c5),version:Pt(Qy)})),rewards:Pt(Ke(tg)),blockTime:Ze(pe()),blockHeight:Ze(pe())}))),i8e=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),rewards:Pt(Ke(tg)),blockTime:Ze(pe()),blockHeight:Ze(pe())}))),o8e=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),transactions:Ke(Te({transaction:vre,meta:Ze(c5),version:Pt(Qy)})),rewards:Pt(Ke(tg)),blockTime:Ze(pe()),blockHeight:Ze(pe())}))),a8e=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),transactions:Ke(Te({transaction:xre,meta:Ze($k),version:Pt(Qy)})),rewards:Pt(Ke(tg)),blockTime:Ze(pe()),blockHeight:Ze(pe())}))),c8e=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),transactions:Ke(Te({transaction:vre,meta:Ze($k),version:Pt(Qy)})),rewards:Pt(Ke(tg)),blockTime:Ze(pe()),blockHeight:Ze(pe())}))),u8e=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),rewards:Pt(Ke(tg)),blockTime:Ze(pe()),blockHeight:Ze(pe())}))),l8e=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),transactions:Ke(Te({transaction:Fk,meta:Ze(c5)})),rewards:Pt(Ke(tg)),blockTime:Ze(pe())}))),$j=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),signatures:Ke(Le()),blockTime:Ze(pe())}))),cP=rr(Ze(Te({slot:pe(),meta:Ze(c5),blockTime:Pt(Ze(pe())),transaction:Fk,version:Pt(Qy)}))),C2=rr(Ze(Te({slot:pe(),transaction:xre,meta:Ze($k),blockTime:Pt(Ze(pe())),version:Pt(Qy)}))),d8e=ws(Te({blockhash:Le(),lastValidBlockHeight:pe()})),f8e=ws(Dl()),h8e=Te({slot:pe(),numTransactions:pe(),numSlots:pe(),samplePeriodSecs:pe()}),p8e=rr(Ke(h8e)),g8e=ws(Ze(Te({feeCalculator:Te({lamportsPerSignature:pe()})}))),m8e=rr(Le()),y8e=rr(Le()),b8e=Te({err:eg,logs:Ke(Le()),signature:Le()}),w8e=Te({result:a5(b8e),subscription:pe()}),v8e={"solana-client":"js/1.0.0-maintenance"};class Vb{constructor(e,r){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const u={};return async l=>{const{commitment:d,config:f}=On(l),p=this._buildArgs([],d,void 0,f),g=Uj(p);return u[g]=u[g]??(async()=>{try{const h=await this._rpcRequest("getBlockHeight",p),y=He(h,rr(pe()));if("error"in y)throw new _t(y.error,"failed to get block height information");return y.result}finally{delete u[g]}})(),await u[g]}})();let n,s,i,o,a,c;r&&typeof r=="string"?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,n=r.wsEndpoint,s=r.httpHeaders,i=r.fetch,o=r.fetchMiddleware,a=r.disableRetryOnRateLimit,c=r.httpAgent),this._rpcEndpoint=iRe(e),this._rpcWsEndpoint=n||nRe(e),this._rpcClient=vRe(e,s,i,o,a,c),this._rpcRequest=ERe(this._rpcClient),this._rpcBatchRequest=_Re(this._rpcClient),this._rpcWebSocket=new QPe(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgs([e.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),a=He(o,ws(pe()));if("error"in a)throw new _t(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,r){return await this.getBalanceAndContext(e,r).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const r=await this._rpcRequest("getBlockTime",[e]),n=He(r,rr(Ze(pe())));if("error"in n)throw new _t(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),r=He(e,rr(pe()));if("error"in r)throw new _t(r.error,"failed to get minimum ledger slot");return r.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),r=He(e,NRe);if("error"in r)throw new _t(r.error,"failed to get first available block");return r.result}async getSupply(e){let r={};typeof e=="string"?r={commitment:e}:e?r={...e,commitment:e&&e.commitment||this.commitment}:r={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[r]),s=He(n,PRe);if("error"in s)throw new _t(s.error,"failed to get supply");return s.result}async getTokenSupply(e,r){const n=this._buildArgs([e.toBase58()],r),s=await this._rpcRequest("getTokenSupply",n),i=He(s,ws(EO));if("error"in i)throw new _t(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,r){const n=this._buildArgs([e.toBase58()],r),s=await this._rpcRequest("getTokenAccountBalance",n),i=He(s,ws(EO));if("error"in i)throw new _t(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,r,n){const{commitment:s,config:i}=On(n);let o=[e.toBase58()];"mint"in r?o.push({mint:r.mint.toBase58()}):o.push({programId:r.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),c=await this._rpcRequest("getTokenAccountsByOwner",a),u=He(c,ORe);if("error"in u)throw new _t(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(e,r,n){let s=[e.toBase58()];"mint"in r?s.push({mint:r.mint.toBase58()}):s.push({programId:r.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=He(o,kRe);if("error"in a)throw new _t(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const r={...e,commitment:e&&e.commitment||this.commitment},n=r.filter||r.commitment?[r]:[],s=await this._rpcRequest("getLargestAccounts",n),i=He(s,BRe);if("error"in i)throw new _t(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,r){const n=this._buildArgs([e.toBase58()],r),s=await this._rpcRequest("getTokenLargestAccounts",n),i=He(s,RRe);if("error"in i)throw new _t(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgs([e.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=He(o,ws(Ze(Yv)));if("error"in a)throw new _t(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=He(o,ws(Ze(AO)));if("error"in a)throw new _t(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,r){try{return(await this.getAccountInfoAndContext(e,r)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,r){const{commitment:n,config:s}=On(r),i=e.map(u=>u.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),c=He(a,ws(Ke(Ze(AO))));if("error"in c)throw new _t(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfoAndContext(e,r){const{commitment:n,config:s}=On(r),i=e.map(u=>u.toBase58()),o=this._buildArgs([i],n,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),c=He(a,ws(Ke(Ze(Yv))));if("error"in c)throw new _t(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfo(e,r){return(await this.getMultipleAccountsInfoAndContext(e,r)).value}async getStakeActivation(e,r,n){const{commitment:s,config:i}=On(r),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:n??i?.epoch}),a=await this._rpcRequest("getStakeActivation",o),c=He(a,rr(jRe));if("error"in c)throw new _t(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,r){const{commitment:n,config:s}=On(r),{encoding:i,...o}=s||{},a=this._buildArgs([e.toBase58()],n,i||"base64",{...o,...o.filters?{filters:jj(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),u=Ke(URe),l=o.withContext===!0?He(c,ws(u)):He(c,rr(u));if("error"in l)throw new _t(l.error,`failed to get accounts owned by program ${e.toBase58()}`);return l.result}async getParsedProgramAccounts(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=He(o,rr(Ke(DRe)));if("error"in a)throw new _t(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,r){let n;if(typeof e=="string")n=e;else{const i=e;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);n=i.signature}let s;try{s=Oi.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Kn(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((r,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:r}){let n,s,i=!1;const o=new Promise((c,u)=>{try{n=this.onSignature(r,(d,f)=>{n=void 0;const p={context:f,value:d};c({__type:Uf.PROCESSED,response:p})},e);const l=new Promise(d=>{n==null?d():s=this._onSubscriptionStateChange(n,f=>{f==="subscribed"&&d()})});(async()=>{if(await l,i)return;const d=await this.getSignatureStatus(r);if(i||d==null)return;const{context:f,value:p}=d;if(p!=null)if(p?.err)u(p.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(p.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(p.confirmationStatus==="processed"||p.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,c({__type:Uf.PROCESSED,response:{context:f,value:p}})}})()}catch(l){u(l)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:r,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(d=>{const f=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let p=await f();if(!i){for(;p<=n;)if(await Pm(1e3),i||(p=await f(),i))return;d({__type:Uf.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),u=this.getCancellationPromise(r);let l;try{const d=await Promise.race([u,c,o]);if(d.__type===Uf.PROCESSED)l=d.response;else throw new lre(s)}finally{i=!0,a()}return l}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:r,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const c=new Promise(p=>{let g=i,h=null;const y=async()=>{try{const{context:E,value:S}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:n});return h=E.slot,S?.nonce}catch{return g}};(async()=>{if(g=await y(),!a)for(;;){if(i!==g){p({__type:Uf.NONCE_INVALID,slotInWhichNonceDidAdvance:h});return}if(await Pm(2e3),a||(g=await y(),a))return}})()}),{abortConfirmation:u,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),d=this.getCancellationPromise(r);let f;try{const p=await Promise.race([d,l,c]);if(p.__type===Uf.PROCESSED)f=p.response;else{let g;for(;;){const h=await this.getSignatureStatus(o);if(h==null)break;if(h.context.slot<(p.slotInWhichNonceDidAdvance??n)){await Pm(400);continue}g=h;break}if(g?.value){const h=e||"finalized",{confirmationStatus:y}=g.value;switch(h){case"processed":case"recent":if(y!=="processed"&&y!=="confirmed"&&y!=="finalized")throw new E1(o);break;case"confirmed":case"single":case"singleGossip":if(y!=="confirmed"&&y!=="finalized")throw new E1(o);break;case"finalized":case"max":case"root":if(y!=="finalized")throw new E1(o);break;default:}f={context:g.context,value:{err:g.value.err}}}else throw new E1(o)}}finally{a=!0,u()}return f}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:r}){let n;const s=new Promise(c=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:Uf.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:r});let a;try{const c=await Promise.race([o,s]);if(c.__type===Uf.PROCESSED)a=c.response;else throw new dre(r,c.timeoutMs/1e3)}finally{clearTimeout(n),i()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),r=He(e,rr(Ke(YRe)));if("error"in r)throw new _t(r.error,"failed to get cluster nodes");return r.result}async getVoteAccounts(e){const r=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",r),s=He(n,JRe);if("error"in s)throw new _t(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:r,config:n}=On(e),s=this._buildArgs([],r,void 0,n),i=await this._rpcRequest("getSlot",s),o=He(i,rr(pe()));if("error"in o)throw new _t(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:r,config:n}=On(e),s=this._buildArgs([],r,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=He(i,rr(Le()));if("error"in o)throw new _t(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,r){const n=[e,r],s=await this._rpcRequest("getSlotLeaders",n),i=He(s,rr(Ke(ss)));if("error"in i)throw new _t(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,r){const{context:n,value:s}=await this.getSignatureStatuses([e],r);Kn(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(e,r){const n=[e];r&&n.push(r);const s=await this._rpcRequest("getSignatureStatuses",n),i=He(s,e8e);if("error"in i)throw new _t(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:r,config:n}=On(e),s=this._buildArgs([],r,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=He(i,rr(pe()));if("error"in o)throw new _t(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const r=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",r),s=He(n,ARe);if("error"in s)throw new _t(s.error,"failed to get inflation");return s.result}async getInflationReward(e,r,n){const{commitment:s,config:i}=On(n),o=this._buildArgs([e.map(u=>u.toBase58())],s,void 0,{...i,epoch:r??i?.epoch}),a=await this._rpcRequest("getInflationReward",o),c=He(a,cRe);if("error"in c)throw new _t(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),r=He(e,xRe);if("error"in r)throw new _t(r.error,"failed to get inflation rate");return r.result}async getEpochInfo(e){const{commitment:r,config:n}=On(e),s=this._buildArgs([],r,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=He(i,SRe);if("error"in o)throw new _t(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),r=He(e,IRe);if("error"in r)throw new _t(r.error,"failed to get epoch schedule");const n=r.result;return new JPe(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),r=He(e,TRe);if("error"in r)throw new _t(r.error,"failed to get leader schedule");return r.result}async getMinimumBalanceForRentExemption(e,r){const n=this._buildArgs([e],r),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=He(s,t8e);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:r,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:r,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const r=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=He(r,p8e);if("error"in n)throw new _t(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,r){const n=this._buildArgs([e],r),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=He(s,g8e);if("error"in i)throw new _t(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,r){const n=Ti(e.serialize()).toString("base64"),s=this._buildArgs([n],r),i=await this._rpcRequest("getFeeForMessage",s),o=He(i,ws(Ze(pe())));if("error"in o)throw new _t(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){const r=e?.lockedWritableAccounts?.map(o=>o.toBase58()),n=r?.length?[r]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=He(s,CRe);if("error"in i)throw new _t(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhashAndContext(e){const{commitment:r,config:n}=On(e),s=this._buildArgs([],r,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=He(i,d8e);if("error"in o)throw new _t(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgs([e],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=He(o,f8e);if("error"in a)throw new _t(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),r=He(e,rr(mRe));if("error"in r)throw new _t(r.error,"failed to get version");return r.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),r=He(e,rr(Le()));if("error"in r)throw new _t(r.error,"failed to get genesis hash");return r.result}async getBlock(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=He(o,o8e);if("error"in a)throw a.error;return a.result}case"none":{const a=He(o,i8e);if("error"in a)throw a.error;return a.result}default:{const a=He(o,s8e);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:u,meta:l,version:d})=>({meta:l,transaction:{...u,message:aP(d,u.message)},version:d}))}:null}}}catch(a){throw new _t(a,"failed to get confirmed block")}}async getParsedBlock(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=He(o,c8e);if("error"in a)throw a.error;return a.result}case"none":{const a=He(o,u8e);if("error"in a)throw a.error;return a.result}default:{const a=He(o,a8e);if("error"in a)throw a.error;return a.result}}}catch(a){throw new _t(a,"failed to get block")}}async getBlockProduction(e){let r,n;if(typeof e=="string")n=e;else if(e){const{commitment:a,...c}=e;n=a,r=c}const s=this._buildArgs([],n,"base64",r),i=await this._rpcRequest("getBlockProduction",s),o=He(i,wRe);if("error"in o)throw new _t(o.error,"failed to get block production information");return o.result}async getTransaction(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getTransaction",i),a=He(o,cP);if("error"in a)throw new _t(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:aP(c.version,c.transaction.message)}}}async getParsedTransaction(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=He(o,C2);if("error"in a)throw new _t(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,r){const{commitment:n,config:s}=On(r),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(c=>{const u=He(c,C2);if("error"in u)throw new _t(u.error,"failed to get transactions");return u.result})}async getTransactions(e,r){const{commitment:n,config:s}=On(r),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(c=>{const u=He(c,cP);if("error"in u)throw new _t(u.error,"failed to get transactions");const l=u.result;return l&&{...l,transaction:{...l.transaction,message:aP(l.version,l.transaction.message)}}})}async getConfirmedBlock(e,r){const n=this._buildArgsAtLeastConfirmed([e],r),s=await this._rpcRequest("getBlock",n),i=He(s,l8e);if("error"in i)throw new _t(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:u})=>{const l=new sf(c.message);return{meta:u,transaction:{...c,message:l}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:u})=>({meta:u,transaction:ki.populate(c.message,c.signatures)}))}}async getBlocks(e,r,n){const s=this._buildArgsAtLeastConfirmed(r!==void 0?[e,r]:[e],n),i=await this._rpcRequest("getBlocks",s),o=He(i,rr(Ke(pe())));if("error"in o)throw new _t(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,r){const n=this._buildArgsAtLeastConfirmed([e],r,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=He(s,$j);if("error"in i)throw new _t(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,r){const n=this._buildArgsAtLeastConfirmed([e],r,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=He(s,$j);if("error"in i)throw new _t(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,r){const n=this._buildArgsAtLeastConfirmed([e],r),s=await this._rpcRequest("getTransaction",n),i=He(s,cP);if("error"in i)throw new _t(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new sf(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:ki.populate(a,c)}}async getParsedConfirmedTransaction(e,r){const n=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=He(s,C2);if("error"in i)throw new _t(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,r){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],r,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=He(o,C2);if("error"in a)throw new _t(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,r,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(r--,!(r<=0||r<i));)try{const c=await this.getConfirmedBlockSignatures(r,"finalized");c.signatures.length>0&&(s.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(s.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,r,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,r),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=He(i,LRe);if("error"in o)throw new _t(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,r,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,r),i=await this._rpcRequest("getSignaturesForAddress",s),o=He(i,FRe);if("error"in o)throw new _t(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,r){const{context:n,value:s}=await this.getAccountInfoAndContext(e,r);let i=null;return s!==null&&(i=new Dj({key:e,state:Dj.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(e,r){const{context:n,value:s}=await this.getAccountInfoAndContext(e,r);let i=null;return s!==null&&(i=jk.fromAccountData(s.data)),{context:n,value:i}}async getNonce(e,r){return await this.getNonceAndContext(e,r).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,r){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),r]),s=He(n,m8e);if("error"in s)throw new _t(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Pm(100);const n=Date.now()-this._blockhashInfo.lastFetch>=sRe;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),r=this._blockhashInfo.latestBlockhash,n=r?r.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Pm(WPe/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:r,config:n}=On(e),s=this._buildArgs([],r,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=He(i,ws(pe()));if("error"in o)throw new _t(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,r,n){if("message"in e){const h=e.serialize(),y=nr.Buffer.from(h).toString("base64");if(Array.isArray(r)||n!==void 0)throw new Error("Invalid arguments");const E=r||{};E.encoding="base64","commitment"in E||(E.commitment=this.commitment),r&&typeof r=="object"&&"innerInstructions"in r&&(E.innerInstructions=r.innerInstructions);const S=[y,E],C=await this._rpcRequest("simulateTransaction",S),_=He(C,Lj);if("error"in _)throw new Error("failed to simulate transaction: "+_.error.message);return _.result}let s;if(e instanceof ki){let g=e;s=new ki,s.feePayer=g.feePayer,s.instructions=e.instructions,s.nonceInfo=g.nonceInfo,s.signatures=g.signatures}else s=ki.populate(e),s._message=s._json=void 0;if(r!==void 0&&!Array.isArray(r))throw new Error("Invalid arguments");const i=r;if(s.nonceInfo&&i)s.sign(...i);else{let g=this._disableBlockhashCaching;for(;;){const h=await this._blockhashWithExpiryBlockHeight(g);if(s.lastValidBlockHeight=h.lastValidBlockHeight,s.recentBlockhash=h.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const y=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(y)&&!this._blockhashInfo.transactionSignatures.includes(y)){this._blockhashInfo.simulatedSignatures.push(y);break}else g=!0}}const o=s._compile(),a=o.serialize(),u=s._serialize(a).toString("base64"),l={encoding:"base64",commitment:this.commitment};if(n){const g=(Array.isArray(n)?n:o.nonProgramIds()).map(h=>h.toBase58());l.accounts={encoding:"base64",addresses:g}}i&&(l.sigVerify=!0),r&&typeof r=="object"&&"innerInstructions"in r&&(l.innerInstructions=r.innerInstructions);const d=[u,l],f=await this._rpcRequest("simulateTransaction",d),p=He(f,Lj);if("error"in p){let g;if("data"in p.error&&(g=p.error.data.logs,g&&Array.isArray(g))){const h=`
    `,y=h+g.join(h);console.error(p.error.message,y)}throw new vO({action:"simulate",signature:"",transactionMessage:p.error.message,logs:g})}return p.result}async sendTransaction(e,r,n){if("version"in e){if(r&&Array.isArray(r))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,r)}if(r===void 0||!Array.isArray(r))throw new Error("Invalid arguments");const s=r;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const i=e.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(e,r){const n=Ti(e).toString("base64");return await this.sendEncodedTransaction(n,r)}async sendEncodedTransaction(e,r){const n={encoding:"base64"},s=r&&r.skipPreflight,i=s===!0?"processed":r&&r.preflightCommitment||this.commitment;r&&r.maxRetries!=null&&(n.maxRetries=r.maxRetries),r&&r.minContextSlot!=null&&(n.minContextSlot=r.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[e,n],a=await this._rpcRequest("sendTransaction",o),c=He(a,y8e);if("error"in c){let u;throw"data"in c.error&&(u=c.error.data.logs),new vO({action:s?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:u})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([r,n])=>{this._setSubscription(r,{...n,state:"pending"})})}_setSubscription(e,r){const n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=r,n!==r.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(i=>{try{i(r.state)}catch{}})}}_onSubscriptionStateChange(e,r){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return s.add(r),()=>{s.delete(r),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,r=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!r())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!r())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,r){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(s=>{try{s(...r)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:r,subscription:n}=He(e,$Re);this._handleServerNotification(n,[r.value,r.context])}_makeSubscription(e,r){const n=this._nextClientSubscriptionId++,s=Uj([e.method,r]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:r,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Kn(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,r,n){const{commitment:s,config:i}=On(n),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:r,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:r,subscription:n}=He(e,HRe);this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}onProgramAccountChange(e,r,n,s){const{commitment:i,config:o}=On(n),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:jj(s)}:void 0));return this._makeSubscription({callback:r,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,r,n){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:r,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:r,subscription:n}=He(e,w8e);this._handleServerNotification(n,[r.value,r.context])}_wsOnSlotNotification(e){const{result:r,subscription:n}=He(e,WRe);this._handleServerNotification(n,[r])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:r,subscription:n}=He(e,GRe);this._handleServerNotification(n,[r])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,r){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${r}' events could not be found.`)}_buildArgs(e,r,n,s){const i=r||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,r,n,s){const i=r||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,r,n,s)}_wsOnSignatureNotification(e){const{result:r,subscription:n}=He(e,KRe);r.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,r.value==="receivedSignature"?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}onSignature(e,r,n){const s=this._buildArgs([e],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){r(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,r,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),a=this._makeSubscription({callback:(c,u)=>{r(c,u);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:r,subscription:n}=He(e,ZRe);this._handleServerNotification(n,[r])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:te.struct([te.u32("instruction"),Ny("recentSlot"),te.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:te.struct([te.u32("instruction")])},ExtendLookupTable:{index:2,layout:te.struct([te.u32("instruction"),Ny(),te.seq(ur(),te.offset(te.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:te.struct([te.u32("instruction")])},CloseLookupTable:{index:4,layout:te.struct([te.u32("instruction")])}});new dt("AddressLookupTab1e1111111111111111111111111");const S2=Object.freeze({RequestUnits:{index:0,layout:te.struct([te.u8("instruction"),te.u32("units"),te.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:te.struct([te.u8("instruction"),te.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:te.struct([te.u8("instruction"),te.u32("units")])},SetComputeUnitPrice:{index:3,layout:te.struct([te.u8("instruction"),Ny("microLamports")])}});class Jv{constructor(){}static requestUnits(e){const r=S2.RequestUnits,n=io(r,e);return new Ri({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const r=S2.RequestHeapFrame,n=io(r,e);return new Ri({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const r=S2.SetComputeUnitLimit,n=io(r,e);return new Ri({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const r=S2.SetComputeUnitPrice,n=io(r,{microLamports:BigInt(e.microLamports)});return new Ri({keys:[],programId:this.programId,data:n})}}Jv.programId=new dt("ComputeBudget111111111111111111111111111111");te.struct([te.u8("numSignatures"),te.u8("padding"),te.u16("signatureOffset"),te.u16("signatureInstructionIndex"),te.u16("publicKeyOffset"),te.u16("publicKeyInstructionIndex"),te.u16("messageDataOffset"),te.u16("messageDataSize"),te.u16("messageInstructionIndex")]);new dt("Ed25519SigVerify111111111111111111111111111");Hwe.utils.isValidPrivateKey;te.struct([te.u8("numSignatures"),te.u16("signatureOffset"),te.u8("signatureInstructionIndex"),te.u16("ethAddressOffset"),te.u8("ethAddressInstructionIndex"),te.u16("messageDataOffset"),te.u16("messageDataSize"),te.u8("messageInstructionIndex"),te.blob(20,"ethAddress"),te.blob(64,"signature"),te.u8("recoveryId")]);new dt("KeccakSecp256k11111111111111111111111111111");var Sre;new dt("StakeConfig11111111111111111111111111111111");class Ire{constructor(e,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=r,this.custodian=n}}Sre=Ire;Ire.default=new Sre(0,0,dt.default);Object.freeze({Initialize:{index:0,layout:te.struct([te.u32("instruction"),DPe(),jPe()])},Authorize:{index:1,layout:te.struct([te.u32("instruction"),ur("newAuthorized"),te.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:te.struct([te.u32("instruction")])},Split:{index:3,layout:te.struct([te.u32("instruction"),te.ns64("lamports")])},Withdraw:{index:4,layout:te.struct([te.u32("instruction"),te.ns64("lamports")])},Deactivate:{index:5,layout:te.struct([te.u32("instruction")])},Merge:{index:7,layout:te.struct([te.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:te.struct([te.u32("instruction"),ur("newAuthorized"),te.u32("stakeAuthorizationType"),qm("authoritySeed"),ur("authorityOwner")])}});new dt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:te.struct([te.u32("instruction"),LPe()])},Authorize:{index:1,layout:te.struct([te.u32("instruction"),ur("newAuthorized"),te.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:te.struct([te.u32("instruction"),te.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:te.struct([te.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:te.struct([te.u32("instruction"),FPe()])}});new dt("Vote111111111111111111111111111111111111111");new dt("Va1idator1nfo111111111111111111111111111111");Te({name:Le(),website:Pt(Le()),details:Pt(Le()),iconUrl:Pt(Le()),keybaseUsername:Pt(Le())});new dt("Vote111111111111111111111111111111111111111");te.struct([ur("nodePubkey"),ur("authorizedWithdrawer"),te.u8("commission"),te.nu64(),te.seq(te.struct([te.nu64("slot"),te.u32("confirmationCount")]),te.offset(te.u32(),-8),"votes"),te.u8("rootSlotValid"),te.nu64("rootSlot"),te.nu64(),te.seq(te.struct([te.nu64("epoch"),ur("authorizedVoter")]),te.offset(te.u32(),-8),"authorizedVoters"),te.struct([te.seq(te.struct([ur("authorizedPubkey"),te.nu64("epochOfLastAuthorizedSwitch"),te.nu64("targetEpoch")]),32,"buf"),te.nu64("idx"),te.u8("isEmpty")],"priorVoters"),te.nu64(),te.seq(te.struct([te.nu64("epoch"),te.nu64("credits"),te.nu64("prevCredits")]),te.offset(te.u32(),-8),"epochCredits"),te.struct([te.nu64("slot"),te.nu64("timestamp")],"lastTimestamp")]);const E8e=1e9,yu={UNIVERSAL_PROVIDER_RELAY_URL:"wss://relay.walletconnect.org",HASH_PREFIX:"SPL Name Service",ROOT_DOMAIN_ACCOUNT:new dt("58PwtjSDuFHuUkYjH9BYnnQKHfwo9reZhC2zMJv9JPkx"),NAME_PROGRAM_ID:new dt("namesLPneVptA9Z5rqUDD9tMTWEJwofgaYwp8cawRkX"),REVERSE_LOOKUP_CLASS:new dt("33m47vH6Eav6jr5Ry86XjhRft2jRBLDnDgPSHoquXi2Z"),DEFAULT_CHAIN:{id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",chainNamespace:ae.CHAIN.SOLANA,nativeCurrency:{name:"Solana",decimals:9,symbol:"SOL"},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},rpcUrls:{default:{http:[`${ae.BLOCKCHAIN_API_RPC_URL}/v1`]}}},CHAIN_IDS:{Mainnet:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Devnet:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Testnet:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",Deprecated_Mainnet:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",Deprecated_Devnet:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"},LAMPORTS_PER_SOL:1e9},uP={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT_TRANSFER_ONLY:3e5,UNIT_LIMIT_WITH_ATA_CREATION:4e5};class u5 extends Error{constructor(e,r){super(e),this.error=r}}class _8e extends u5{constructor(){super(...arguments),this.name="WalletAccountError"}}class A8e extends u5{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class qj extends u5{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class x8e extends u5{constructor(){super(...arguments),this.name="WalletSignMessageError"}}function E0(t){return"version"in t}const Tre="solana:signAndSendTransaction",C8e="solana:signMessage",xO="solana:signTransaction",Nre="standard:connect",S8e="standard:disconnect",Pre="standard:events";function I8e(t){return Nre in t.features&&Pre in t.features&&(Tre in t.features||xO in t.features)}function T8e(t){if(typeof t=="string")return`solana:${t}`}let l5=class{constructor(){this.listeners={accountsChanged:[],chainChanged:[],connect:[],disconnect:[],pendingTransaction:[],auth_rpcRequest:[],auth_rpcSuccess:[],auth_rpcError:[]}}on(e,r){this.listeners[e].push(r)}removeListener(e,r){this.listeners[e]=this.listeners[e].filter(n=>n!==r)}emit(e,r){this.listeners[e].forEach(n=>n(r))}};class N8e extends l5{constructor(e){super(),this.id=ae.CONNECTOR_ID.AUTH,this.name=ae.CONNECTOR_NAMES.AUTH,this.type="AUTH",this.chain=ae.CHAIN.SOLANA,this.provider=e.w3mFrameProvider,this.requestedChains=e.chains,this.getActiveChain=e.getActiveChain}get publicKey(){const e=J.state.chains.get(ae.CHAIN.SOLANA)?.accountState?.address;return e?new dt(e):void 0}get chains(){const e=this.provider.getAvailableChainIds();return this.requestedChains.filter(r=>e.includes(r.caipNetworkId))}async connect(e={}){const r=e.chainId||this.getActiveChain()?.id,n=ho("solana");if(await Po.authConnectorAuthenticate({authConnector:this.provider,chainId:T8e(r),socialUri:e.socialUri,preferredAccountType:n,chainNamespace:ae.CHAIN.SOLANA}),!this.publicKey)throw new Error("Failed to connect to the wallet");return this.emit("connect",this.publicKey),this.publicKey.toBase58()}async disconnect(){await this.provider.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){if(!this.publicKey)throw new Error("Wallet not connected");const r=await this.provider.request({method:"solana_signMessage",params:{message:Zn.encode(e),pubkey:this.publicKey.toBase58()},chainNamespace:this.chain});return Zn.decode(r.signature)}async signTransaction(e){const r=await this.provider.request({method:"solana_signTransaction",params:{transaction:this.serializeTransaction(e)},chainNamespace:this.chain}),n=Zn.decode(r.transaction);return E0(e)?Oh.deserialize(n):ki.from(n)}async signAndSendTransaction(e,r){const n=this.serializeTransaction(e);return(await this.provider.request({method:"solana_signAndSendTransaction",params:{transaction:n,options:r},chainNamespace:this.chain})).signature}async sendTransaction(e,r,n){const s=await this.signTransaction(e);return await r.sendRawTransaction(s.serialize(),n)}async signAllTransactions(e){return(await this.provider.request({method:"solana_signAllTransactions",params:{transactions:e.map(n=>this.serializeTransaction(n))},chainNamespace:this.chain})).transactions.map((n,s)=>{const i=e[s];if(!i)throw new Error("Invalid solana_signAllTransactions response");const o=Zn.decode(n);return E0(i)?Oh.deserialize(o):ki.from(o)})}async request(e){return this.provider.request({method:e.method,params:e.params,chainNamespace:this.chain})}async getAccounts(){return this.publicKey?Promise.resolve([{namespace:this.chain,address:this.publicKey.toBase58(),type:"eoa"}]):Promise.resolve([])}serializeTransaction(e){return Zn.encode(new Uint8Array(e.serialize({verifySignatures:!1})))}}const P8e=OE({id:56,name:"BNB Smart Chain",blockTime:750,nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}}),R8e=OE({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:23085558},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),O8e=OE({id:143,name:"Monad",blockTime:400,nativeCurrency:{name:"Monad",symbol:"MON",decimals:18},rpcUrls:{default:{http:["https://rpc.monad.xyz","https://rpc1.monad.xyz"],webSocket:["wss://rpc.monad.xyz","wss://rpc1.monad.xyz"]}},blockExplorers:{default:{name:"MonadVision",url:"https://monadvision.com"},monadscan:{name:"Monadscan",url:"https://monadscan.com",apiUrl:"https://api.monadscan.com/api"}},testnet:!1,contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:9248132}}}),k8e=OE({id:137,name:"Polygon",blockTime:2e3,nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}}),B8e=OE({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://11155111.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:8928790}},testnet:!0});function qh(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const qk=qh({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),Rre=qh({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),Ore=qh({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});qh({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});qh({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});qh({id:"00000008819873e925422c1ff0f99f7c",caipNetworkId:"bip122:00000008819873e925422c1ff0f99f7c",chainNamespace:"bip122",name:"Bitcoin Signet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const U8e=qh({id:"-239",name:"TON",network:"ton-mainnet",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Tonscan",url:"https://tonscan.org"}},testnet:!1,chainNamespace:"ton",caipNetworkId:"ton:-239"}),M8e=qh({id:"-3",name:"TON Testnet",network:"ton-testnet",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Tonscan",url:"https://testnet.tonscan.org"}},testnet:!0,chainNamespace:"ton",caipNetworkId:"ton:-3"});class D8e extends l5{constructor(e){super(),this.name="Coinbase Wallet",this.id=ii.ConnectorExplorerIds[ae.CONNECTOR_ID.COINBASE_SDK],this.explorerId=ii.ConnectorExplorerIds[ae.CONNECTOR_ID.COINBASE_SDK],this.type="ANNOUNCED",this.imageUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",this.chain=ae.CHAIN.SOLANA,this.provider=this,this.coinbase=e.provider,this.requestedChains=e.chains}get chains(){return this.requestedChains.filter(e=>e.id===qk.id)}get publicKey(){return this.coinbase.publicKey}get imageId(){return ii.ConnectorImageIds[ae.CONNECTOR_ID.COINBASE]}async connect(){try{await this.coinbase.connect();const e=this.getAccount(!0);return this.coinbase.emit("connect",this.coinbase.publicKey),this.emit("connect",e),e.toBase58()}catch(e){throw this.coinbase.emit("error",e),new Hy(e)}}async disconnect(){await this.coinbase.disconnect(),this.coinbase.emit("disconnect",void 0),this.emit("disconnect",void 0)}async signMessage(e){return(await this.coinbase.signMessage(e)).signature}async signTransaction(e){return this.coinbase.signTransaction(e)}async signAndSendTransaction(e,r){return(await this.coinbase.signAndSendTransaction(e,r)).signature}async sendTransaction(e,r,n){const s=await this.signTransaction(e);return await r.sendRawTransaction(s.serialize(),n)}async signAllTransactions(e){return await this.coinbase.signAllTransactions(e)}async request(e){return Promise.reject(new Error('The "request" method is not supported on Coinbase Wallet'))}async getAccounts(){const e=this.getAccount();return e?Promise.resolve([{namespace:this.chain,address:e.toBase58(),type:"eoa"}]):Promise.resolve([])}getAccount(e){const r=this.coinbase.publicKey;if(e&&!r)throw new Error("Not connected");return r}}class Hj extends Error{constructor(e){super(`The wallet does not support the "${e}" feature`)}}class zj extends Error{constructor(e){super(`The method "${e}" is not supported by the wallet`)}}var j8e=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},CO;class Wj extends QT{constructor({provider:e,chains:r,getActiveChain:n}){super({caipNetworks:r,namespace:"solana",provider:e}),this.eventEmitter=new l5,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter),CO.set(this,"1.0.0"),this.getActiveChain=n}get session(){return this.provider.session}get chains(){return this.sessionChains.map(e=>{let r=e;return r===yu.CHAIN_IDS.Deprecated_Mainnet?r=yu.CHAIN_IDS.Mainnet:r===yu.CHAIN_IDS.Deprecated_Devnet&&(r=yu.CHAIN_IDS.Devnet),this.caipNetworks.find(n=>n.caipNetworkId===r)}).filter(Boolean)}get icon(){return la.state.connectorImages[this.id]}get version(){return j8e(this,CO,"f")}get publicKey(){const e=this.getAccount(!1);if(e)return new dt(e.publicKey)}async connect(){await super.connectWalletConnect();const e=this.getAccount(!0);return this.emit("connect",new dt(e.publicKey)),e.address}async disconnect(){await super.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){this.checkIfMethodIsSupported("solana_signMessage");const r=await this.internalRequest("solana_signMessage",{message:Zn.encode(e),pubkey:this.getAccount(!0).address});return Zn.decode(r.signature)}async signTransaction(e){this.checkIfMethodIsSupported("solana_signTransaction");const r=this.serializeTransaction(e),n=await this.internalRequest("solana_signTransaction",{transaction:r,pubkey:this.getAccount(!0).address,...this.getRawRPCParams(e)});if("signature"in n){const i=Zn.decode(n.signature);return e.addSignature(new dt(this.getAccount(!0).publicKey),Buffer.from(i)),e}const s=Buffer.from(n.transaction,"base64");return E0(e)?Oh.deserialize(new Uint8Array(s)):ki.from(s)}async signAndSendTransaction(e,r){this.checkIfMethodIsSupported("solana_signAndSendTransaction");const n=this.serializeTransaction(e),s=await this.internalRequest("solana_signAndSendTransaction",{transaction:n,pubkey:this.getAccount(!0).address,sendOptions:r});return this.emit("pendingTransaction",void 0),s.signature}async sendTransaction(e,r,n){const s=await this.signTransaction(e),i=await r.sendRawTransaction(s.serialize(),n);return this.emit("pendingTransaction",void 0),i}async signAllTransactions(e){try{return this.checkIfMethodIsSupported("solana_signAllTransactions"),(await this.internalRequest("solana_signAllTransactions",{transactions:e.map(n=>this.serializeTransaction(n))})).transactions.map((n,s)=>{const i=e[s];if(!i)throw new Error("Invalid transactions response");const o=Buffer.from(n,"base64");return E0(i)?Oh.deserialize(new Uint8Array(o)):(this.emit("pendingTransaction",void 0),ki.from(o))})}catch(r){if(r instanceof zj){const n=[];for(const s of e)n.push(await this.signTransaction(s));return n}throw r}}request(e){return this.internalRequest(e.method,e.params)}async getAccounts(){const e=this.session?.namespaces.solana?.accounts||[];return Promise.resolve(e.map(r=>({namespace:this.chain,address:xs.parseCaipAddress(r).address,type:"eoa"})))}setDefaultChain(e){this.provider.setDefaultChain(e)}internalRequest(e,r){let s=this.chains.find(i=>this.getActiveChain()?.id===i.id)?.caipNetworkId;switch(s){case yu.CHAIN_IDS.Mainnet:this.sessionChains.includes(yu.CHAIN_IDS.Mainnet)||(s=yu.CHAIN_IDS.Deprecated_Mainnet);break;case yu.CHAIN_IDS.Devnet:this.sessionChains.includes(yu.CHAIN_IDS.Devnet)||(s=yu.CHAIN_IDS.Deprecated_Devnet);break}return this.provider?.request({method:e,params:r},s)}get sessionChains(){return go.getChainsFromNamespaces(this.session?.namespaces)}serializeTransaction(e){return Buffer.from(new Uint8Array(e.serialize({verifySignatures:!1}))).toString("base64")}getAccount(e){const r=this.session?.namespaces.solana?.accounts[0];if(!r){if(e)throw new Error("Account not found");return}const n=r.split(":")[2];if(!n){if(e)throw new Error("Address not found");return}return{address:n,publicKey:Zn.decode(n)}}getRawRPCParams(e){return E0(e)?{}:{feePayer:e.feePayer?.toBase58()??"",instructions:e.instructions.map(r=>({data:Zn.encode(new Uint8Array(r.data)),keys:r.keys.map(n=>({isWritable:n.isWritable,isSigner:n.isSigner,pubkey:n.pubkey.toBase58()})),programId:r.programId.toBase58()})),recentBlockhash:e.recentBlockhash??""}}checkIfMethodIsSupported(e){if(!this.session?.namespaces.solana?.methods.includes(e))throw new zj(e)}}CO=new WeakMap;const Gb=Dn({connection:null}),Ug={state:Gb,subscribeKey(t,e){return li(Gb,t,e)},subscribe(t){return ui(Gb,()=>t(Gb))},setConnection(t){Gb.connection=dy(t)}},jl=new dt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),Vj=new dt("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),Hk=new dt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new dt("So11111111111111111111111111111111111111112");new dt("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const zk=t=>{const e=t.decode.bind(t),r=t.encode.bind(t);return{decode:e,encode:r}};var mp={},Gj;function L8e(){if(Gj)return mp;Gj=1,Object.defineProperty(mp,"__esModule",{value:!0});function t(s){{const i=Buffer.from(s);i.reverse();const o=i.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}mp.toBigIntLE=t;function e(s){{const i=s.toString("hex");return i.length===0?BigInt(0):BigInt(`0x${i}`)}}mp.toBigIntBE=e;function r(s,i){{const o=s.toString(16),a=Buffer.from(o.padStart(i*2,"0").slice(0,i*2),"hex");return a.reverse(),a}}mp.toBufferLE=r;function n(s,i){{const o=s.toString(16);return Buffer.from(o.padStart(i*2,"0").slice(0,i*2),"hex")}}return mp.toBufferBE=n,mp}var Kj=L8e();const F8e=t=>e=>{const r=te.blob(t,e),{encode:n,decode:s}=zk(r),i=r;return i.decode=(o,a)=>{const c=s(o,a);return Kj.toBigIntLE(Buffer.from(c))},i.encode=(o,a,c)=>{const u=Kj.toBufferLE(o,t);return n(u,a,c)},i},D1=F8e(8),kre=t=>{const e=te.u8(t),{encode:r,decode:n}=zk(e),s=e;return s.decode=(i,o)=>!!n(i,o),s.encode=(i,o,a)=>{const c=Number(i);return r(c,o,a)},s},Ni=t=>{const e=te.blob(32,t),{encode:r,decode:n}=zk(e),s=e;return s.decode=(i,o)=>{const a=n(i,o);return new dt(a)},s.encode=(i,o,a)=>{const c=i.toBuffer();return r(c,o,a)},s};class eb extends Error{constructor(e){super(e)}}class G6 extends eb{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class $8e extends eb{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class Bre extends eb{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class j1 extends eb{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class q8e extends eb{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class H8e extends eb{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var SO;(function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",t[t.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",t[t.PausableExtension=44]="PausableExtension"})(SO||(SO={}));var K6;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Mint=1]="Mint",t[t.Account=2]="Account"})(K6||(K6={}));const Ure=1,z8e=te.struct([te.u8("m"),te.u8("n"),kre("isInitialized"),Ni("signer1"),Ni("signer2"),Ni("signer3"),Ni("signer4"),Ni("signer5"),Ni("signer6"),Ni("signer7"),Ni("signer8"),Ni("signer9"),Ni("signer10"),Ni("signer11")]),Mre=z8e.span;var Z6;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initialized=1]="Initialized",t[t.Frozen=2]="Frozen"})(Z6||(Z6={}));const Dre=te.struct([Ni("mint"),Ni("owner"),D1("amount"),te.u32("delegateOption"),Ni("delegate"),te.u8("state"),te.u32("isNativeOption"),D1("isNative"),D1("delegatedAmount"),te.u32("closeAuthorityOption"),Ni("closeAuthority")]),fh=Dre.span;async function Zj(t,e,r,n=jl){const s=await t.getAccountInfo(e,r);return W8e(e,s,n)}function W8e(t,e,r=jl){if(!e)throw new G6;if(!e.owner.equals(r))throw new Bre;if(e.data.length<fh)throw new j1;const n=Dre.decode(e.data.slice(0,fh));let s=Buffer.alloc(0);if(e.data.length>fh){if(e.data.length===Mre)throw new j1;if(e.data[fh]!=K6.Account)throw new $8e;s=e.data.slice(fh+Ure)}return{address:t,mint:n.mint,owner:n.owner,amount:n.amount,delegate:n.delegateOption?n.delegate:null,delegatedAmount:n.delegatedAmount,isInitialized:n.state!==Z6.Uninitialized,isFrozen:n.state===Z6.Frozen,isNative:!!n.isNativeOption,rentExemptReserve:n.isNativeOption?n.isNative:null,closeAuthority:n.closeAuthorityOption?n.closeAuthority:null,tlvData:s}}function V8e(t,e,r){if(r.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const n of r)t.push({pubkey:n instanceof dt?n:n.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}const Yj=te.struct([te.u8("instruction"),D1("amount"),te.u8("decimals")]);function G8e(t,e,r,n,s,i,o=[],a=jl){const c=V8e([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0}],n,o),u=Buffer.alloc(Yj.span);return Yj.encode({instruction:SO.TransferChecked,amount:BigInt(s),decimals:i},u),new Ri({keys:c,programId:a,data:u})}const jre=te.struct([te.u32("mintAuthorityOption"),Ni("mintAuthority"),D1("supply"),te.u8("decimals"),kre("isInitialized"),te.u32("freezeAuthorityOption"),Ni("freezeAuthority")]),lP=jre.span;async function K8e(t,e,r,n=jl){const s=await t.getAccountInfo(e,r);return Z8e(e,s,n)}function Z8e(t,e,r=jl){if(!e)throw new G6;if(!e.owner.equals(r))throw new Bre;if(e.data.length<lP)throw new j1;const n=jre.decode(e.data.slice(0,lP));let s=Buffer.alloc(0);if(e.data.length>lP){if(e.data.length<=fh)throw new j1;if(e.data.length===Mre)throw new j1;if(e.data[fh]!=K6.Mint)throw new q8e;s=e.data.slice(fh+Ure)}return{address:t,mintAuthority:n.mintAuthorityOption?n.mintAuthority:null,supply:n.supply,decimals:n.decimals,isInitialized:n.isInitialized,freezeAuthority:n.freezeAuthorityOption?n.freezeAuthority:null,tlvData:s}}function Jj(t,e,r=!1,n=jl,s=Hk){if(!r&&!dt.isOnCurve(e.toBuffer()))throw new H8e;const[i]=dt.findProgramAddressSync([e.toBuffer(),n.toBuffer(),t.toBuffer()],s);return i}function Y8e(t,e,r,n,s=jl,i=Hk){return J8e(t,e,r,n,Buffer.alloc(0),s,i)}function J8e(t,e,r,n,s,i=jl,o=Hk){const a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Py.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return new Ri({keys:a,programId:o,data:s})}async function X8e(t,e){const r=await t.getAccountInfo(e);if(!r)throw new Error("Mint account not found");if(r.owner.equals(jl))return jl;if(r.owner.equals(Vj))return Vj;throw new Error("Unknown mint owner program")}async function Q8e({provider:t,to:e,amount:r,tokenMint:n,connection:s}){if(!t.publicKey)throw new Error("No public key found");if(r<=0)throw new Error("Amount must be greater than 0");try{const i=t.publicKey,o=new dt(e),a=new dt(n),c=await X8e(s,a),l=(await K8e(s,a,void 0,c)).decimals;if(l<0)throw new Error("Invalid token decimals");const d=Math.floor(r*10**l),f=Jj(a,i,!1,c),p=Jj(a,o,!1,c);try{if((await Zj(s,f,void 0,c)).amount<BigInt(d))throw new Error("Insufficient token balance")}catch(C){throw C instanceof G6?new Error("Sender does not have a token account for this mint"):C}let g=!1;try{await Zj(s,p,void 0,c)}catch(C){if(C instanceof G6)g=!0;else throw C}const h=[],y=g?uP.UNIT_LIMIT_WITH_ATA_CREATION:uP.UNIT_LIMIT_TRANSFER_ONLY;h.push(Jv.setComputeUnitPrice({microLamports:uP.UNIT_PRICE_MICRO_LAMPORTS}),Jv.setComputeUnitLimit({units:y})),g&&h.push(Y8e(i,p,o,a,c)),h.push(G8e(f,a,p,i,d,l,[],c));const{blockhash:E,lastValidBlockHeight:S}=await s.getLatestBlockhash();return new ki({feePayer:i,blockhash:E,lastValidBlockHeight:S}).add(...h)}catch(i){throw new Error(`Failed to create SPL token transaction: ${i instanceof Error?i.message:"Unknown error"}`)}}const Xj={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT:500};async function Qj({provider:t,to:e,value:r,connection:n}){if(!t.publicKey)throw Error("No public key found");const s=new dt(e),i=Math.floor(r*E8e),{blockhash:o,lastValidBlockHeight:a}=await n.getLatestBlockhash(),c=[Jv.setComputeUnitPrice({microLamports:Xj.UNIT_PRICE_MICRO_LAMPORTS}),Jv.setComputeUnitLimit({units:Xj.UNIT_LIMIT}),Py.transfer({fromPubkey:t.publicKey,toPubkey:s,lamports:i})];return new ki({feePayer:t.publicKey,blockhash:o,lastValidBlockHeight:a}).add(...c)}var eOe=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},tOe=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},TI;let Kb;const d5=new Set;function rOe(t){L1=void 0,d5.add(t)}function nOe(t){L1=void 0,d5.delete(t)}const Hm={};function sOe(){if(Kb||(Kb=Object.freeze({register:eL,get:iOe,on:oOe}),typeof window>"u"))return Kb;const t=Object.freeze({register:eL});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new aOe(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Kb}function eL(...t){return t=t.filter(e=>!d5.has(e)),t.length?(t.forEach(e=>rOe(e)),Hm.register?.forEach(e=>tL(()=>e(...t))),function(){t.forEach(r=>nOe(r)),Hm.unregister?.forEach(r=>tL(()=>r(...t)))}):()=>{}}let L1;function iOe(){return L1||(L1=[...d5]),L1}function oOe(t,e){return Hm[t]?.push(e)||(Hm[t]=[e]),function(){Hm[t]=Hm[t]?.filter(n=>e!==n)}}function tL(t){try{t()}catch(e){console.error(e)}}class aOe extends Event{get detail(){return eOe(this,TI,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),TI.set(this,void 0),tOe(this,TI,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}TI=new WeakMap;function cOe(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const rL={"solana:mainnet":qk,"solana:testnet":Ore,"solana:devnet":Rre};class uOe extends l5{constructor({wallet:e,getActiveChain:r,requestedChains:n}){super(),this.type="ANNOUNCED",this.chain=ae.CHAIN.SOLANA,this.provider=this,this.wallet=e,this.getActiveChain=r,this.requestedChains=n,this.name=Re.getConnectorName(e.name)||e.name,this.id=ii.ConnectorExplorerIds[this.name]||this.name,this.explorerId=ii.ConnectorExplorerIds[this.name],this.imageUrl=this.wallet.icon,this.bindEvents()}get chains(){return this.wallet.chains.map(e=>this.requestedChains.find(r=>r.id===e||r.id===rL[e]?.id)).filter(Boolean)}get publicKey(){const e=this.getAccount(!1);if(e)return new dt(e.publicKey)}async connect(){await this.getWalletFeature(Nre).connect().catch(s=>{throw new Hy(s)});const r=this.getAccount(!0),n=new dt(r.publicKey);return this.emit("connect",n),r.address}async disconnect(){await this.getWalletFeature(S8e).disconnect(),this.emit("disconnect",void 0)}async signMessage(e){const r=this.getWalletFeature(C8e),n=this.getAccount(!0),[s]=await r.signMessage({message:e,account:n});if(!s)throw new x8e("Empty result");return s.signature}async signTransaction(e){const r=this.getWalletFeature(xO),n=this.getAccount(!0),s=this.serializeTransaction(e),[i]=await r.signTransaction({account:n,transaction:new Uint8Array(s),chain:this.getActiveChainName()});if(!i)throw new qj("Empty result");return this.emit("pendingTransaction",void 0),E0(e)?Oh.deserialize(i.signedTransaction):ki.from(i.signedTransaction)}async signAndSendTransaction(e,r){const n=this.getWalletFeature(Tre),s=this.getAccount(!0),[i]=await n.signAndSendTransaction({account:s,transaction:new Uint8Array(this.serializeTransaction(e)),options:{...r,preflightCommitment:cOe(r?.preflightCommitment)},chain:this.getActiveChainName()});if(!i)throw new A8e("Empty result");return this.emit("pendingTransaction",void 0),Zn.encode(i.signature)}async sendTransaction(e,r,n){const s=await this.signTransaction(e);return await r.sendRawTransaction(s.serialize(),n)}async signAllTransactions(e){const r=this.getWalletFeature(xO),n=this.getAccount(!0),s=this.getActiveChainName();return(await r.signTransaction(...e.map(o=>({transaction:new Uint8Array(this.serializeTransaction(o)),account:n,chain:s})))).map(({signedTransaction:o},a)=>{const c=e[a];if(!c)throw new qj("Invalid transaction signature response");return this.emit("pendingTransaction",void 0),E0(c)?Oh.deserialize(o):ki.from(o)})}async request(e){return Promise.reject(new Hj("request"))}async getAccounts(){return Promise.resolve(this.wallet.accounts.map(e=>({namespace:this.chain,address:e.address,type:"eoa"})))}serializeTransaction(e){return e.serialize({verifySignatures:!1})}getAccount(e){const r=this.wallet.accounts[0];if(e&&!r)throw new _8e;return r}getWalletFeature(e){if(!(e in this.wallet.features))throw new Hj(e);return this.wallet.features[e]}getActiveChainName(){const e=Object.entries(rL).find(([,r])=>r.id===this.getActiveChain()?.id);if(!e)throw new Error("Invalid chain id");return e[0]}bindEvents(){this.getWalletFeature(Pre).on("change",r=>{if(r.accounts){const n=r.accounts[0];n&&this.emit("accountsChanged",new dt(n.publicKey))}})}}const{get:lOe,on:nL}=sOe();let Mf=[];function dOe(t,e,r){const n=[nL("register",(...s)=>{Mf=[...Mf,...sL(s,t,e)],r(...Mf)}),nL("unregister",(...s)=>{Mf=Mf.filter(i=>s.some(o=>o.name===i.wallet.name)),r(...Mf)})];return Mf=sL(lOe(),t,e),r(...Mf),()=>n.forEach(s=>s())}function sL(t,e,r){return t.filter(n=>n.name!=="WalletConnect"&&I8e(n)).map(n=>new uOe({wallet:n,requestedChains:e,getActiveChain:r}))}const fOe=[ae.CONNECTOR_ID.AUTH,ae.CONNECTOR_ID.WALLET_CONNECT],hOe=[{pattern:/Attempt to debit an account but found no record of a prior credit/iu,message:"Not enough SOL to cover fees or rent"},{pattern:/Insufficient funds for fee/iu,message:"Not enough SOL to cover fees or rent"},{pattern:/Transfer: insufficient lamports/iu,message:"Not enough SOL to cover this transfer"}];class pOe extends XT{constructor(e={}){super({adapterType:ae.ADAPTER_TYPES.SOLANA,namespace:ae.CHAIN.SOLANA}),this.balancePromises={},this.connectionSettings=e.connectionSettings||"confirmed",this.wallets=e.wallets,this.registerWalletStandard=e.registerWalletStandard}construct(e){super.construct(e);const r=Ae.getActiveCaipNetworkId(),s=(e.networks?.find(i=>i.caipNetworkId===r)||e.networks?.[0])?.rpcUrls.default.http[0];s&&Ug.setConnection(new Vb(s,this.connectionSettings))}setAuthProvider(e){this.addConnector(new N8e({w3mFrameProvider:e,getActiveChain:()=>J.getCaipNetworkByNamespace(this.namespace),chains:this.getCaipNetworks()}))}syncConnectors(){we.state.projectId||Si.open(Ii.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");const e=()=>J.getActiveCaipNetwork(this.namespace);ke.isClient()&&"coinbaseSolana"in window&&this.addConnector(new D8e({provider:window.coinbaseSolana,chains:this.getCaipNetworks(),getActiveChain:e})),dOe(this.getCaipNetworks(),e,this.addConnector.bind(this))}async writeContract(){return Promise.resolve({hash:""})}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async walletGetAssets(e){return Promise.resolve({})}async getAccounts(e){const r=this.connectors.find(n=>n.id===e.id);return r?{accounts:await r.getAccounts()}:{accounts:[]}}async signMessage(e){const r=e.provider;if(!r)throw new Error("connectionControllerClient:signMessage - provider is undefined");const n=await r.signMessage(new TextEncoder().encode(e.message));return{signature:Zn.encode(n)}}async estimateGas(e){const r=Ug.state.connection;if(!r||!e.provider)throw new Error("Connection is not set");const s=await(await Qj({provider:e.provider,connection:r,to:"11111111111111111111111111111111",value:1})).getEstimatedFee(r);return{gas:BigInt(s||0)}}async sendTransaction(e){const r=Ug.state.connection;if(!r||!e.provider)throw new Error("Connection is not set");const n=e.provider,s=e.tokenMint?await Q8e({provider:n,connection:r,to:e.to,amount:Number(e.value),tokenMint:e.tokenMint}):await Qj({provider:n,connection:r,to:e.to,value:Number.isNaN(Number(e.value))?0:Number(e.value)}),i=await n.sendTransaction(s,r).catch(o=>{if(o instanceof vO){const a=o?.transactionError?.message??o?.message??"",c=o?.logs?.join(" ")??"",u=`${a} ${c}`;for(const{pattern:l,message:d}of hOe)if(l.test(u))throw new Error(d)}throw o});return await new Promise(o=>{const a=setInterval(async()=>{(await r.getSignatureStatus(i))?.value&&(clearInterval(a),o())},1e3)}),{hash:i}}parseUnits(){return 0n}formatUnits(){return""}async connect(e){const r=this.connectors.find(u=>u.id===e.id);if(!r)throw new Error("Provider not found");const n={...r,...e.id===ae.CONNECTOR_ID.AUTH?{provider:r}:{}},s=e.rpcUrl||this.getCaipNetworks()?.find(u=>u.id===e.chainId)?.rpcUrls.default.http[0];if(!s)throw new Error(`RPC URL not found for chainId: ${e.chainId}`);const i=this.getConnection({address:e.address,connectorId:r.id,connections:this.connections,connectors:this.connectors});if(i?.account)return this.emit("accountChanged",{address:i.account.address,chainId:i.caipNetwork?.id,connector:n}),{id:r.id,address:i.account.address,chainId:e.chainId,provider:r,type:r.type};const o=await r.connect({chainId:e.chainId,socialUri:e.socialUri});Ug.setConnection(new Vb(s,this.connectionSettings)),this.emit("accountChanged",{address:o,chainId:e.chainId,connector:n});const a=r.id===ae.CONNECTOR_ID.AUTH,c=this.getCaipNetworks()?.find(u=>u.id===e.chainId);return this.addConnection({connectorId:r.id,accounts:[{address:o}],caipNetwork:c,auth:a?{name:Ae.getConnectedSocialProvider(),username:Ae.getConnectedSocialUsername()}:void 0}),r.id!==ae.CONNECTOR_ID.WALLET_CONNECT&&this.listenSolanaProviderEvents(r.id,r.provider),{id:r.id,address:o,chainId:e.chainId,provider:r,type:r.type}}async getBalance(e){const r=e.address,n=this.getCaipNetworks()?.find(c=>c.id===e.chainId);if(!r)return Promise.resolve({balance:"0.00",symbol:"SOL"});const s=new Vb(n?.rpcUrls?.default?.http?.[0],this.connectionSettings),i=`${n?.caipNetworkId}:${e.address}`,o=this.balancePromises[i];if(o)return o;const a=Ae.getNativeBalanceCacheForCaipAddress(i);return a?{balance:a.balance,symbol:a.symbol}:(this.balancePromises[i]=new Promise(async c=>{try{const l=(await s.getBalance(new dt(r))/yu.LAMPORTS_PER_SOL).toString();if(Ae.updateNativeBalanceCache({caipAddress:i,balance:l,symbol:e.caipNetwork?.nativeCurrency.symbol||"SOL",timestamp:Date.now()}),!e.caipNetwork)throw new Error("caipNetwork is required");c({balance:l,symbol:e.caipNetwork?.nativeCurrency.symbol})}catch{c({balance:"0.00",symbol:"SOL"})}}).finally(()=>{delete this.balancePromises[i]}),this.balancePromises[i]||{balance:"0.00",symbol:"SOL"})}async switchNetwork(e){await super.switchNetwork(e);const{caipNetwork:r}=e;r?.rpcUrls?.default?.http?.[0]&&Ug.setConnection(new Vb(r.rpcUrls.default.http[0],this.connectionSettings))}listenProviderEvents(){}listenSolanaProviderEvents(e,r){if(fOe.includes(e))return;const n=i=>{this.onAccountsChanged([i.toBase58()],e,!1)},s=()=>this.onDisconnect(e);this.providerHandlers[e]||(r.on("disconnect",s),r.on("accountsChanged",n),r.on("connect",n),this.providerHandlers[e]={provider:r,disconnect:s,accountsChanged:n,chainChanged:()=>{}})}async setUniversalProvider(e){this.universalProvider=e;const r=ae.CONNECTOR_ID.WALLET_CONNECT;go.listenWcProvider({universalProvider:e,namespace:ae.CHAIN.SOLANA,onConnect:s=>this.onConnect(s,r),onDisconnect:()=>this.onDisconnect(r),onAccountsChanged:s=>this.onAccountsChanged(s,r,!1)});const n=new Wj({provider:e,chains:this.getCaipNetworks(),getActiveChain:()=>J.getCaipNetworkByNamespace(this.namespace)});if(this.registerWalletStandard){const{SolanaWalletConnectStandardWallet:s}=await Cr(async()=>{const{SolanaWalletConnectStandardWallet:i}=await import("./wallet-standard-COGF2d1P.js");return{SolanaWalletConnectStandardWallet:i}},[]);s.register(e)}return this.addConnector(n),Promise.resolve()}async connectWalletConnect(e){const r=await super.connectWalletConnect(e),n=this.getCaipNetworks()?.find(i=>i.id===e)?.rpcUrls.default.http[0],s=new Vb(n,this.connectionSettings);return Ug.setConnection(s),r}async disconnect(e){if(e.id){const r=this.connectors.find(s=>s.id===e.id);if(!r)throw new Error("Provider not found");const n=this.connections.find(s=>po.isLowerCaseMatch(s.connectorId,e.id));return await r.provider.disconnect(),this.deleteConnection(r.id),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:n?[n]:[]}}return this.disconnectAll()}async syncConnection(e){return this.connect({...e,type:""})}async syncConnections({connectToFirstConnector:e,caipNetwork:r}){await Promise.all(this.connectors.filter(n=>{const{hasDisconnected:s,hasConnected:i}=po.getConnectorStorageInfo(n.id,this.namespace);return!s&&i}).map(async n=>{if(n.id===ae.CONNECTOR_ID.WALLET_CONNECT){const s=go.getWalletConnectAccounts(this.universalProvider,this.namespace);s.length>0&&this.addConnection({connectorId:n.id,accounts:s.map(i=>({address:i.address})),caipNetwork:r})}else{const s=await n.connect({chainId:r?.id});s&&(this.addConnection({connectorId:n.id,accounts:[{address:s}],caipNetwork:r}),this.listenSolanaProviderEvents(n.id,n.provider))}})),e&&this.emitFirstAvailableConnection()}getWalletConnectProvider(e){return new Wj({provider:e.provider,chains:e.caipNetworks,getActiveChain:()=>J.getCaipNetworkByNamespace(this.namespace)})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async r=>{const n=this.connectors.find(s=>po.isLowerCaseMatch(s.id,r.connectorId));if(!n)throw new Error("Connector not found");return await this.disconnect({id:n.id}),r}))}}}const gOe="logger/5.8.0";let iL=!1,oL=!1;const NI={debug:1,default:2,info:2,warning:3,error:4,off:5};let aL=NI.default,dP=null;function mOe(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("Ã©".normalize("NFD")!=="eÌ")throw new Error("broken implementation")}catch(t){return t.message}return null}const cL=mOe();var Y6;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(Y6||(Y6={}));var Lc;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(Lc||(Lc={}));const uL="0123456789abcdef";class ue{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();NI[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(aL>NI[n])&&console.log.apply(console,r)}debug(...e){this._log(ue.levels.DEBUG,e)}info(...e){this._log(ue.levels.INFO,e)}warn(...e){this._log(ue.levels.WARNING,e)}makeError(e,r,n){if(oL)return this.makeError("censored error",r,{});r||(r=ue.errors.UNKNOWN_ERROR),n||(n={});const s=[];Object.keys(n).forEach(c=>{const u=n[c];try{if(u instanceof Uint8Array){let l="";for(let d=0;d<u.length;d++)l+=uL[u[d]>>4],l+=uL[u[d]&15];s.push(c+"=Uint8Array(0x"+l+")")}else s.push(c+"="+JSON.stringify(u))}catch{s.push(c+"="+JSON.stringify(n[c].toString()))}}),s.push(`code=${r}`),s.push(`version=${this.version}`);const i=e;let o="";switch(r){case Lc.NUMERIC_FAULT:{o="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":o+="-"+c;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case Lc.CALL_EXCEPTION:case Lc.INSUFFICIENT_FUNDS:case Lc.MISSING_NEW:case Lc.NONCE_EXPIRED:case Lc.REPLACEMENT_UNDERPRICED:case Lc.TRANSACTION_REPLACED:case Lc.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),s.length&&(e+=" ("+s.join(", ")+")");const a=new Error(e);return a.reason=i,a.code=r,Object.keys(n).forEach(function(c){a[c]=n[c]}),a}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,ue.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,s){e||this.throwError(r,n,s)}assertArgument(e,r,n,s){e||this.throwArgumentError(r,n,s)}checkNormalize(e){cL&&this.throwError("platform missing String.prototype.normalize",ue.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:cL})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,ue.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,ue.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,ue.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,ue.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",ue.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",ue.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",ue.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return dP||(dP=new ue(gOe)),dP}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",ue.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),iL){if(!e)return;this.globalLogger().throwError("error censorship permanent",ue.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}oL=!!e,iL=!!r}static setLogLevel(e){const r=NI[e.toLowerCase()];if(r==null){ue.globalLogger().warn("invalid log level - "+e);return}aL=r}static from(e){return new ue(e)}}ue.errors=Lc;ue.levels=Y6;const yOe=Object.freeze(Object.defineProperty({__proto__:null,get ErrorCode(){return Lc},get LogLevel(){return Y6},Logger:ue},Symbol.toStringTag,{value:"Module"})),bOe="bytes/5.8.0",fs=new ue(bOe);function Lre(t){return!!t.toHexString}function oy(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return oy(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function XE(t){return Er(t)&&!(t.length%2)||rg(t)}function lL(t){return typeof t=="number"&&t==t&&t%1===0}function rg(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!lL(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!lL(r)||r<0||r>=256)return!1}return!0}function Oe(t,e){if(e||(e={}),typeof t=="number"){fs.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),oy(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Lre(t)&&(t=t.toHexString()),Er(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":fs.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let s=0;s<r.length;s+=2)n.push(parseInt(r.substring(s,s+2),16));return oy(new Uint8Array(n))}return rg(t)?oy(new Uint8Array(t)):fs.throwArgumentError("invalid arrayify value","value",t)}function Mn(t){const e=t.map(s=>Oe(s)),r=e.reduce((s,i)=>s+i.length,0),n=new Uint8Array(r);return e.reduce((s,i)=>(n.set(i,s),s+i.length),0),oy(n)}function Rl(t){let e=Oe(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function F1(t,e){t=Oe(t),t.length>e&&fs.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),oy(r)}function Er(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const fP="0123456789abcdef";function je(t,e){if(e||(e={}),typeof t=="number"){fs.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=fP[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Lre(t))return t.toHexString();if(Er(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":fs.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(rg(t)){let r="0x";for(let n=0;n<t.length;n++){let s=t[n];r+=fP[(s&240)>>4]+fP[s&15]}return r}return fs.throwArgumentError("invalid hexlify value","value",t)}function Ll(t){if(typeof t!="string")t=je(t);else if(!Er(t)||t.length%2)return null;return(t.length-2)/2}function As(t,e,r){return typeof t!="string"?t=je(t):(!Er(t)||t.length%2)&&fs.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function Ro(t){let e="0x";return t.forEach(r=>{e+=je(r).substring(2)}),e}function f5(t){const e=Fre(je(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function Fre(t){typeof t!="string"&&(t=je(t)),Er(t)||fs.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function Nn(t,e){for(typeof t!="string"?t=je(t):Er(t)||fs.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&fs.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function ng(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(XE(t)){let r=Oe(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=je(r.slice(0,32)),e.s=je(r.slice(32,64))):r.length===65?(e.r=je(r.slice(0,32)),e.s=je(r.slice(32,64)),e.v=r[64]):fs.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:fs.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=je(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const s=F1(Oe(e._vs),32);e._vs=je(s);const i=s[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=i:e.recoveryParam!==i&&fs.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),s[0]&=127;const o=je(s);e.s==null?e.s=o:e.s!==o&&fs.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?fs.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const s=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==s&&fs.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!Er(e.r)?fs.throwArgumentError("signature missing or invalid r","signature",t):e.r=Nn(e.r,32),e.s==null||!Er(e.s)?fs.throwArgumentError("signature missing or invalid s","signature",t):e.s=Nn(e.s,32);const r=Oe(e.s);r[0]>=128&&fs.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=je(r);e._vs&&(Er(e._vs)||fs.throwArgumentError("signature invalid _vs","signature",t),e._vs=Nn(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&fs.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function IO(t){return t=ng(t),je(Mn([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}const wOe=Object.freeze(Object.defineProperty({__proto__:null,arrayify:Oe,concat:Mn,hexConcat:Ro,hexDataLength:Ll,hexDataSlice:As,hexStripZeros:Fre,hexValue:f5,hexZeroPad:Nn,hexlify:je,isBytes:rg,isBytesLike:XE,isHexString:Er,joinSignature:IO,splitSignature:ng,stripZeros:Rl,zeroPad:F1},Symbol.toStringTag,{value:"Module"})),$re="bignumber/5.8.0";var Xv=Ft.BN;const Ud=new ue($re),hP={},dL=9007199254740991;function vOe(t){return t!=null&&(Ue.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||Er(t)||typeof t=="bigint"||rg(t))}let fL=!1;class Ue{constructor(e,r){e!==hP&&Ud.throwError("cannot call constructor directly; use BigNumber.from",ue.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Zo(lr(this).fromTwos(e))}toTwos(e){return Zo(lr(this).toTwos(e))}abs(){return this._hex[0]==="-"?Ue.from(this._hex.substring(1)):this}add(e){return Zo(lr(this).add(lr(e)))}sub(e){return Zo(lr(this).sub(lr(e)))}div(e){return Ue.from(e).isZero()&&Ic("division-by-zero","div"),Zo(lr(this).div(lr(e)))}mul(e){return Zo(lr(this).mul(lr(e)))}mod(e){const r=lr(e);return r.isNeg()&&Ic("division-by-zero","mod"),Zo(lr(this).umod(r))}pow(e){const r=lr(e);return r.isNeg()&&Ic("negative-power","pow"),Zo(lr(this).pow(r))}and(e){const r=lr(e);return(this.isNegative()||r.isNeg())&&Ic("unbound-bitwise-result","and"),Zo(lr(this).and(r))}or(e){const r=lr(e);return(this.isNegative()||r.isNeg())&&Ic("unbound-bitwise-result","or"),Zo(lr(this).or(r))}xor(e){const r=lr(e);return(this.isNegative()||r.isNeg())&&Ic("unbound-bitwise-result","xor"),Zo(lr(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&Ic("negative-width","mask"),Zo(lr(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Ic("negative-width","shl"),Zo(lr(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Ic("negative-width","shr"),Zo(lr(this).shrn(e))}eq(e){return lr(this).eq(lr(e))}lt(e){return lr(this).lt(lr(e))}lte(e){return lr(this).lte(lr(e))}gt(e){return lr(this).gt(lr(e))}gte(e){return lr(this).gte(lr(e))}isNegative(){return this._hex[0]==="-"}isZero(){return lr(this).isZero()}toNumber(){try{return lr(this).toNumber()}catch{Ic("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Ud.throwError("this platform does not support BigInt",ue.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?fL||(fL=!0,Ud.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Ud.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",ue.errors.UNEXPECTED_ARGUMENT,{}):Ud.throwError("BigNumber.toString does not accept parameters",ue.errors.UNEXPECTED_ARGUMENT,{})),lr(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Ue)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new Ue(hP,Qv(e)):e.match(/^-?[0-9]+$/)?new Ue(hP,Qv(new Xv(e))):Ud.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Ic("underflow","BigNumber.from",e),(e>=dL||e<=-dL)&&Ic("overflow","BigNumber.from",e),Ue.from(String(e));const r=e;if(typeof r=="bigint")return Ue.from(r.toString());if(rg(r))return Ue.from(je(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return Ue.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(Er(n)||n[0]==="-"&&Er(n.substring(1))))return Ue.from(n)}return Ud.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Qv(t){if(typeof t!="string")return Qv(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&Ud.throwArgumentError("invalid hex","value",t),t=Qv(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function Zo(t){return Ue.from(Qv(t))}function lr(t){const e=Ue.from(t).toHexString();return e[0]==="-"?new Xv("-"+e.substring(3),16):new Xv(e.substring(2),16)}function Ic(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),Ud.throwError(t,ue.errors.NUMERIC_FAULT,n)}function EOe(t){return new Xv(t,36).toString(16)}function _Oe(t){return new Xv(t,16).toString(36)}const Oo=new ue($re),$1={},qre=Ue.from(0),Hre=Ue.from(-1);function zre(t,e,r,n){const s={fault:e,operation:r};return n!==void 0&&(s.value=n),Oo.throwError(t,ue.errors.NUMERIC_FAULT,s)}let q1="0";for(;q1.length<256;)q1+=q1;function Wk(t){if(typeof t!="number")try{t=Ue.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+q1.substring(0,t):Oo.throwArgumentError("invalid decimal size","decimals",t)}function PI(t,e){e==null&&(e=0);const r=Wk(e);t=Ue.from(t);const n=t.lt(qre);n&&(t=t.mul(Hre));let s=t.mod(r).toString();for(;s.length<r.length-1;)s="0"+s;s=s.match(/^([0-9]*[1-9]|0)(0*)/)[1];const i=t.div(r).toString();return r.length===1?t=i:t=i+"."+s,n&&(t="-"+t),t}function fl(t,e){e==null&&(e=0);const r=Wk(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&Oo.throwArgumentError("invalid decimal value","value",t);const n=t.substring(0,1)==="-";n&&(t=t.substring(1)),t==="."&&Oo.throwArgumentError("missing value","value",t);const s=t.split(".");s.length>2&&Oo.throwArgumentError("too many decimal points","value",t);let i=s[0],o=s[1];for(i||(i="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>r.length-1&&zre("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<r.length-1;)o+="0";const a=Ue.from(i),c=Ue.from(o);let u=a.mul(r).add(c);return n&&(u=u.mul(Hre)),u}class ay{constructor(e,r,n,s){e!==$1&&Oo.throwError("cannot use FixedFormat constructor; use FixedFormat.from",ue.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=n,this.decimals=s,this.name=(r?"":"u")+"fixed"+String(n)+"x"+String(s),this._multiplier=Wk(s),Object.freeze(this)}static from(e){if(e instanceof ay)return e;typeof e=="number"&&(e=`fixed128x${e}`);let r=!0,n=128,s=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")r=!1;else{const i=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);i||Oo.throwArgumentError("invalid fixed format","format",e),r=i[1]!=="u",n=parseInt(i[2]),s=parseInt(i[3])}}else if(e){const i=(o,a,c)=>e[o]==null?c:(typeof e[o]!==a&&Oo.throwArgumentError("invalid fixed format ("+o+" not "+a+")","format."+o,e[o]),e[o]);r=i("signed","boolean",r),n=i("width","number",n),s=i("decimals","number",s)}return n%8&&Oo.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),s>80&&Oo.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",s),new ay($1,r,n,s)}}class Ci{constructor(e,r,n,s){e!==$1&&Oo.throwError("cannot use FixedNumber constructor; use FixedNumber.from",ue.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=s,this._hex=r,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Oo.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const r=fl(this._value,this.format.decimals),n=fl(e._value,e.format.decimals);return Ci.fromValue(r.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const r=fl(this._value,this.format.decimals),n=fl(e._value,e.format.decimals);return Ci.fromValue(r.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const r=fl(this._value,this.format.decimals),n=fl(e._value,e.format.decimals);return Ci.fromValue(r.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const r=fl(this._value,this.format.decimals),n=fl(e._value,e.format.decimals);return Ci.fromValue(r.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=Ci.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(r=r.subUnsafe(hL.toFormat(r.format))),r}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=Ci.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(r=r.addUnsafe(hL.toFormat(r.format))),r}round(e){e==null&&(e=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(e<0||e>80||e%1)&&Oo.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;const n=Ci.from("1"+q1.substring(0,e),this.format),s=AOe.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(s).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Oo.throwArgumentError("invalid byte width","width",e);const r=Ue.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Nn(r,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Ci.fromString(this._value,e)}static fromValue(e,r,n){return n==null&&r!=null&&!vOe(r)&&(n=r,r=null),r==null&&(r=0),n==null&&(n="fixed"),Ci.fromString(PI(e,r),ay.from(n))}static fromString(e,r){r==null&&(r="fixed");const n=ay.from(r),s=fl(e,n.decimals);!n.signed&&s.lt(qre)&&zre("unsigned value cannot be negative","overflow","value",e);let i=null;n.signed?i=s.toTwos(n.width).toHexString():(i=s.toHexString(),i=Nn(i,n.width/8));const o=PI(s,n.decimals);return new Ci($1,i,o,n)}static fromBytes(e,r){r==null&&(r="fixed");const n=ay.from(r);if(Oe(e).length>n.width/8)throw new Error("overflow");let s=Ue.from(e);n.signed&&(s=s.fromTwos(n.width));const i=s.toTwos((n.signed?0:1)+n.width).toHexString(),o=PI(s,n.decimals);return new Ci($1,i,o,n)}static from(e,r){if(typeof e=="string")return Ci.fromString(e,r);if(rg(e))return Ci.fromBytes(e,r);try{return Ci.fromValue(e,0,r)}catch(n){if(n.code!==ue.errors.INVALID_ARGUMENT)throw n}return Oo.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const hL=Ci.from(1),AOe=Ci.from("0.5"),xOe="properties/5.8.0";var COe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const J6=new ue(xOe);function xe(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function Ru(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function ps(t){return COe(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const s=t[n];return Promise.resolve(s).then(i=>({key:n,value:i}))});return(yield Promise.all(e)).reduce((n,s)=>(n[s.key]=s.value,n),{})})}function Vk(t,e){(!t||typeof t!="object")&&J6.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||J6.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function Ds(t){const e={};for(const r in t)e[r]=t[r];return e}const SOe={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Wre(t){if(t==null||SOe[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!Wre(n))return!1}return!0}return J6.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function IOe(t){if(Wre(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>Fl(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&xe(e,r,Fl(n))}return e}return J6.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Fl(t){return IOe(t)}class Hh{constructor(e){for(const r in e)this[r]=Fl(e[r])}}const TOe=Object.freeze(Object.defineProperty({__proto__:null,Description:Hh,checkProperties:Vk,deepCopy:Fl,defineReadOnly:xe,getStatic:Ru,resolveProperties:ps,shallowCopy:Ds},Symbol.toStringTag,{value:"Module"})),QE="abi/5.8.0",_r=new ue(QE),B0={};let pL={calldata:!0,memory:!0,storage:!0},NOe={calldata:!0,memory:!0};function I2(t,e){if(t==="bytes"||t==="string"){if(pL[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&NOe[e])return!0;return(pL[e]||e==="payable")&&_r.throwArgumentError("invalid modifier","name",e),!1}function POe(t,e){let r=t;function n(a){_r.throwArgumentError(`unexpected character at position ${a}`,"param",t)}t=t.replace(/\s/g," ");function s(a){let c={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(c.indexed=!1),c}let i={type:"",name:"",state:{allowType:!0}},o=i;for(let a=0;a<t.length;a++){let c=t[a];switch(c){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||n(a),o.state.allowType=!1,o.type=Rm(o.type),o.components=[s(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),I2(o.type,o.name)&&(o.name=""),o.type=Rm(o.type);let u=o;o=o.parent,o||n(a),delete u.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),I2(o.type,o.name)&&(o.name=""),o.type=Rm(o.type);let l=s(o.parent);o.parent.components.push(l),delete o.parent,o=l;break;case" ":o.state.allowType&&o.type!==""&&(o.type=Rm(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||n(a),o.indexed&&n(a),o.indexed=!0,o.name=""):I2(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(a),o.type+=c,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(a),o.type+=c,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=c,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=c,delete o.state.allowArray):o.state.readArray?o.type+=c:n(a)}}return o.parent&&_r.throwArgumentError("unexpected eof","param",t),delete i.state,o.name==="indexed"?(e||n(r.length-7),o.indexed&&n(r.length-7),o.indexed=!0,o.name=""):I2(o.type,o.name)&&(o.name=""),i.type=Rm(i.type),i}function RI(t,e){for(let r in e)xe(t,r,e[r])}const Rr=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),ROe=new RegExp(/^(.*)\[([0-9]*)\]$/);class Gs{constructor(e,r){e!==B0&&_r.throwError("use fromString",ue.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),RI(this,r);let n=this.type.match(ROe);n?RI(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:Gs.fromObject({type:n[1],components:this.components}),baseType:"array"}):RI(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Rr.sighash),Rr[e]||_r.throwArgumentError("invalid format type","format",e),e===Rr.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(n)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Rr.sighash&&(r+=this.type),r+="("+this.components.map(n=>n.format(e)).join(e===Rr.full?", ":",")+")"):r+=this.type,e!==Rr.sighash&&(this.indexed===!0&&(r+=" indexed"),e===Rr.full&&this.name&&(r+=" "+this.name)),r}static from(e,r){return typeof e=="string"?Gs.fromString(e,r):Gs.fromObject(e)}static fromObject(e){return Gs.isParamType(e)?e:new Gs(B0,{name:e.name||null,type:Rm(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(Gs.fromObject):null})}static fromString(e,r){function n(s){return Gs.fromObject({name:s.name,type:s.type,indexed:s.indexed,components:s.components})}return n(POe(e,!!r))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function eE(t,e){return kOe(t).map(r=>Gs.fromString(r,e))}class Al{constructor(e,r){e!==B0&&_r.throwError("use a static from method",ue.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),RI(this,r),this._isFragment=!0,Object.freeze(this)}static from(e){return Al.isFragment(e)?e:typeof e=="string"?Al.fromString(e):Al.fromObject(e)}static fromObject(e){if(Al.isFragment(e))return e;switch(e.type){case"function":return Tu.fromObject(e);case"event":return wl.fromObject(e);case"constructor":return Iu.fromObject(e);case"error":return zd.fromObject(e);case"fallback":case"receive":return null}return _r.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?wl.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?Tu.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Iu.fromString(e.trim()):e.split(" ")[0]==="error"?zd.fromString(e.substring(5).trim()):_r.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class wl extends Al{format(e){if(e||(e=Rr.sighash),Rr[e]||_r.throwArgumentError("invalid format type","format",e),e===Rr.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Rr.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Rr.full?", ":",")+") ",e!==Rr.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(e){return typeof e=="string"?wl.fromString(e):wl.fromObject(e)}static fromObject(e){if(wl.isEventFragment(e))return e;e.type!=="event"&&_r.throwArgumentError("invalid event object","value",e);const r={name:tE(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Gs.fromObject):[],type:"event"};return new wl(B0,r)}static fromString(e){let r=e.match(rE);r||_r.throwArgumentError("invalid event string","value",e);let n=!1;return r[3].split(" ").forEach(s=>{switch(s.trim()){case"anonymous":n=!0;break;case"":break;default:_r.warn("unknown modifier: "+s)}}),wl.fromObject({name:r[1].trim(),anonymous:n,inputs:eE(r[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function Vre(t,e){e.gas=null;let r=t.split("@");return r.length!==1?(r.length>2&&_r.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||_r.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=Ue.from(r[1]),r[0]):t}function Gre(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(r=>{switch(r.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function Kre(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&_r.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&_r.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&_r.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&_r.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&_r.throwArgumentError("unable to determine stateMutability","value",t),e}class Iu extends Al{format(e){if(e||(e=Rr.sighash),Rr[e]||_r.throwArgumentError("invalid format type","format",e),e===Rr.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===Rr.sighash&&_r.throwError("cannot format a constructor for sighash",ue.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(n=>n.format(e)).join(e===Rr.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(e){return typeof e=="string"?Iu.fromString(e):Iu.fromObject(e)}static fromObject(e){if(Iu.isConstructorFragment(e))return e;e.type!=="constructor"&&_r.throwArgumentError("invalid constructor object","value",e);let r=Kre(e);r.constant&&_r.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Gs.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?Ue.from(e.gas):null};return new Iu(B0,n)}static fromString(e){let r={type:"constructor"};e=Vre(e,r);let n=e.match(rE);return(!n||n[1].trim()!=="constructor")&&_r.throwArgumentError("invalid constructor string","value",e),r.inputs=eE(n[2].trim(),!1),Gre(n[3].trim(),r),Iu.fromObject(r)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class Tu extends Iu{format(e){if(e||(e=Rr.sighash),Rr[e]||_r.throwArgumentError("invalid format type","format",e),e===Rr.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Rr.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Rr.full?", ":",")+") ",e!==Rr.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(e){return typeof e=="string"?Tu.fromString(e):Tu.fromObject(e)}static fromObject(e){if(Tu.isFunctionFragment(e))return e;e.type!=="function"&&_r.throwArgumentError("invalid function object","value",e);let r=Kre(e);const n={type:e.type,name:tE(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(Gs.fromObject):[],outputs:e.outputs?e.outputs.map(Gs.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?Ue.from(e.gas):null};return new Tu(B0,n)}static fromString(e){let r={type:"function"};e=Vre(e,r);let n=e.split(" returns ");n.length>2&&_r.throwArgumentError("invalid function string","value",e);let s=n[0].match(rE);if(s||_r.throwArgumentError("invalid function signature","value",e),r.name=s[1].trim(),r.name&&tE(r.name),r.inputs=eE(s[2],!1),Gre(s[3].trim(),r),n.length>1){let i=n[1].match(rE);(i[1].trim()!=""||i[3].trim()!="")&&_r.throwArgumentError("unexpected tokens","value",e),r.outputs=eE(i[2],!1)}else r.outputs=[];return Tu.fromObject(r)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function gL(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&_r.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class zd extends Al{format(e){if(e||(e=Rr.sighash),Rr[e]||_r.throwArgumentError("invalid format type","format",e),e===Rr.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Rr.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Rr.full?", ":",")+") ",r.trim()}static from(e){return typeof e=="string"?zd.fromString(e):zd.fromObject(e)}static fromObject(e){if(zd.isErrorFragment(e))return e;e.type!=="error"&&_r.throwArgumentError("invalid error object","value",e);const r={type:e.type,name:tE(e.name),inputs:e.inputs?e.inputs.map(Gs.fromObject):[]};return gL(new zd(B0,r))}static fromString(e){let r={type:"error"},n=e.match(rE);return n||_r.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&tE(r.name),r.inputs=eE(n[2],!1),gL(zd.fromObject(r))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Rm(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const OOe=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function tE(t){return(!t||!t.match(OOe))&&_r.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const rE=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function kOe(t){t=t.trim();let e=[],r="",n=0;for(let s=0;s<t.length;s++){let i=t[s];i===","&&n===0?(e.push(r),r=""):(r+=i,i==="("?n++:i===")"&&(n--,n===-1&&_r.throwArgumentError("unbalanced parenthesis","value",t)))}return r&&e.push(r),e}const Gk=new ue(QE);function Zre(t){const e=[],r=function(n,s){if(Array.isArray(s))for(let i in s){const o=n.slice();o.push(i);try{r(o,s[i])}catch(a){e.push({path:o,error:a})}}};return r([],t),e}class uf{constructor(e,r,n,s){this.name=e,this.type=r,this.localName=n,this.dynamic=s}_throwError(e,r){Gk.throwArgumentError(e,this.localName,r)}}class TO{constructor(e){xe(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Ro(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(Mn(e._data))}writeBytes(e){let r=Oe(e);const n=r.length%this.wordSize;return n&&(r=Mn([r,this._padding.slice(n)])),this._writeData(r)}_getValue(e){let r=Oe(Ue.from(e));return r.length>this.wordSize&&Gk.throwError("value out-of-bounds",ue.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=Mn([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[e]=this._getValue(r)}}}class X6{constructor(e,r,n,s){xe(this,"_data",Oe(e)),xe(this,"wordSize",r||32),xe(this,"_coerceFunc",n),xe(this,"allowLoose",s),this._offset=0}get data(){return je(this._data)}get consumed(){return this._offset}static coerce(e,r){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(r=r.toNumber()),r}coerce(e,r){return this._coerceFunc?this._coerceFunc(e,r):X6.coerce(e,r)}_peekBytes(e,r,n){let s=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+s>this._data.length&&(this.allowLoose&&n&&this._offset+r<=this._data.length?s=r:Gk.throwError("data out-of-bounds",ue.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+s})),this._data.slice(this._offset,this._offset+s)}subReader(e){return new X6(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,r){let n=this._peekBytes(0,e,!!r);return this._offset+=n.length,n.slice(0,e)}readValue(){return Ue.from(this.readBytes(this.wordSize))}}var pP={exports:{}};var mL;function BOe(){return mL||(mL=1,(function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",s=n?window:{};s.JS_SHA3_NO_WINDOW&&(n=!1);var i=!n&&typeof self=="object",o=!s.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?s=Au:i&&(s=self);var a=!s.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,c=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),l=[31,7936,2031616,520093696],d=[4,1024,262144,67108864],f=[1,256,65536,16777216],p=[6,1536,393216,100663296],g=[0,8,16,24],h=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],y=[224,256,384,512],E=[128,256],S=["hex","buffer","arrayBuffer","array","digest"],C={128:168,256:136};(s.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(O){return Object.prototype.toString.call(O)==="[object Array]"}),c&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(O){return typeof O=="object"&&O.buffer&&O.buffer.constructor===ArrayBuffer});for(var _=function(O,H,W){return function(G){return new v(O,H,O).update(G)[W]()}},T=function(O,H,W){return function(G,K){return new v(O,H,K).update(G)[W]()}},P=function(O,H,W){return function(G,K,Q,re){return m["cshake"+O].update(G,K,Q,re)[W]()}},D=function(O,H,W){return function(G,K,Q,re){return m["kmac"+O].update(G,K,Q,re)[W]()}},L=function(O,H,W,G){for(var K=0;K<S.length;++K){var Q=S[K];O[Q]=H(W,G,Q)}return O},I=function(O,H){var W=_(O,H,"hex");return W.create=function(){return new v(O,H,O)},W.update=function(G){return W.create().update(G)},L(W,_,O,H)},U=function(O,H){var W=T(O,H,"hex");return W.create=function(G){return new v(O,H,G)},W.update=function(G,K){return W.create(K).update(G)},L(W,T,O,H)},F=function(O,H){var W=C[O],G=P(O,H,"hex");return G.create=function(K,Q,re){return!Q&&!re?m["shake"+O].create(K):new v(O,H,K).bytepad([Q,re],W)},G.update=function(K,Q,re,de){return G.create(Q,re,de).update(K)},L(G,P,O,H)},B=function(O,H){var W=C[O],G=D(O,H,"hex");return G.create=function(K,Q,re){return new R(O,H,Q).bytepad(["KMAC",re],W).bytepad([K],W)},G.update=function(K,Q,re,de){return G.create(K,re,de).update(Q)},L(G,D,O,H)},A=[{name:"keccak",padding:f,bits:y,createMethod:I},{name:"sha3",padding:p,bits:y,createMethod:I},{name:"shake",padding:l,bits:E,createMethod:U},{name:"cshake",padding:d,bits:E,createMethod:F},{name:"kmac",padding:d,bits:E,createMethod:B}],m={},b=[],w=0;w<A.length;++w)for(var x=A[w],M=x.bits,k=0;k<M.length;++k){var j=x.name+"_"+M[k];if(b.push(j),m[j]=x.createMethod(M[k],x.padding),x.name!=="sha3"){var N=x.name+M[k];b.push(N),m[N]=m[j]}}function v(O,H,W){this.blocks=[],this.s=[],this.padding=H,this.outputBits=W,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(O<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=W>>5,this.extraBytes=(W&31)>>3;for(var G=0;G<50;++G)this.s[G]=0}v.prototype.update=function(O){if(this.finalized)throw new Error(r);var H,W=typeof O;if(W!=="string"){if(W==="object"){if(O===null)throw new Error(e);if(c&&O.constructor===ArrayBuffer)O=new Uint8Array(O);else if(!Array.isArray(O)&&(!c||!ArrayBuffer.isView(O)))throw new Error(e)}else throw new Error(e);H=!0}for(var G=this.blocks,K=this.byteCount,Q=O.length,re=this.blockCount,de=0,le=this.s,se,be;de<Q;){if(this.reset)for(this.reset=!1,G[0]=this.block,se=1;se<re+1;++se)G[se]=0;if(H)for(se=this.start;de<Q&&se<K;++de)G[se>>2]|=O[de]<<g[se++&3];else for(se=this.start;de<Q&&se<K;++de)be=O.charCodeAt(de),be<128?G[se>>2]|=be<<g[se++&3]:be<2048?(G[se>>2]|=(192|be>>6)<<g[se++&3],G[se>>2]|=(128|be&63)<<g[se++&3]):be<55296||be>=57344?(G[se>>2]|=(224|be>>12)<<g[se++&3],G[se>>2]|=(128|be>>6&63)<<g[se++&3],G[se>>2]|=(128|be&63)<<g[se++&3]):(be=65536+((be&1023)<<10|O.charCodeAt(++de)&1023),G[se>>2]|=(240|be>>18)<<g[se++&3],G[se>>2]|=(128|be>>12&63)<<g[se++&3],G[se>>2]|=(128|be>>6&63)<<g[se++&3],G[se>>2]|=(128|be&63)<<g[se++&3]);if(this.lastByteIndex=se,se>=K){for(this.start=se-K,this.block=G[re],se=0;se<re;++se)le[se]^=G[se];$(le),this.reset=!0}else this.start=se}return this},v.prototype.encode=function(O,H){var W=O&255,G=1,K=[W];for(O=O>>8,W=O&255;W>0;)K.unshift(W),O=O>>8,W=O&255,++G;return H?K.push(G):K.unshift(G),this.update(K),K.length},v.prototype.encodeString=function(O){var H,W=typeof O;if(W!=="string"){if(W==="object"){if(O===null)throw new Error(e);if(c&&O.constructor===ArrayBuffer)O=new Uint8Array(O);else if(!Array.isArray(O)&&(!c||!ArrayBuffer.isView(O)))throw new Error(e)}else throw new Error(e);H=!0}var G=0,K=O.length;if(H)G=K;else for(var Q=0;Q<O.length;++Q){var re=O.charCodeAt(Q);re<128?G+=1:re<2048?G+=2:re<55296||re>=57344?G+=3:(re=65536+((re&1023)<<10|O.charCodeAt(++Q)&1023),G+=4)}return G+=this.encode(G*8),this.update(O),G},v.prototype.bytepad=function(O,H){for(var W=this.encode(H),G=0;G<O.length;++G)W+=this.encodeString(O[G]);var K=H-W%H,Q=[];return Q.length=K,this.update(Q),this},v.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var O=this.blocks,H=this.lastByteIndex,W=this.blockCount,G=this.s;if(O[H>>2]|=this.padding[H&3],this.lastByteIndex===this.byteCount)for(O[0]=O[W],H=1;H<W+1;++H)O[H]=0;for(O[W-1]|=2147483648,H=0;H<W;++H)G[H]^=O[H];$(G)}},v.prototype.toString=v.prototype.hex=function(){this.finalize();for(var O=this.blockCount,H=this.s,W=this.outputBlocks,G=this.extraBytes,K=0,Q=0,re="",de;Q<W;){for(K=0;K<O&&Q<W;++K,++Q)de=H[K],re+=u[de>>4&15]+u[de&15]+u[de>>12&15]+u[de>>8&15]+u[de>>20&15]+u[de>>16&15]+u[de>>28&15]+u[de>>24&15];Q%O===0&&($(H),K=0)}return G&&(de=H[K],re+=u[de>>4&15]+u[de&15],G>1&&(re+=u[de>>12&15]+u[de>>8&15]),G>2&&(re+=u[de>>20&15]+u[de>>16&15])),re},v.prototype.arrayBuffer=function(){this.finalize();var O=this.blockCount,H=this.s,W=this.outputBlocks,G=this.extraBytes,K=0,Q=0,re=this.outputBits>>3,de;G?de=new ArrayBuffer(W+1<<2):de=new ArrayBuffer(re);for(var le=new Uint32Array(de);Q<W;){for(K=0;K<O&&Q<W;++K,++Q)le[Q]=H[K];Q%O===0&&$(H)}return G&&(le[K]=H[K],de=de.slice(0,re)),de},v.prototype.buffer=v.prototype.arrayBuffer,v.prototype.digest=v.prototype.array=function(){this.finalize();for(var O=this.blockCount,H=this.s,W=this.outputBlocks,G=this.extraBytes,K=0,Q=0,re=[],de,le;Q<W;){for(K=0;K<O&&Q<W;++K,++Q)de=Q<<2,le=H[K],re[de]=le&255,re[de+1]=le>>8&255,re[de+2]=le>>16&255,re[de+3]=le>>24&255;Q%O===0&&$(H)}return G&&(de=Q<<2,le=H[K],re[de]=le&255,G>1&&(re[de+1]=le>>8&255),G>2&&(re[de+2]=le>>16&255)),re};function R(O,H,W){v.call(this,O,H,W)}R.prototype=new v,R.prototype.finalize=function(){return this.encode(this.outputBits,!0),v.prototype.finalize.call(this)};var $=function(O){var H,W,G,K,Q,re,de,le,se,be,We,Ne,Be,At,Ee,fe,Mt,bt,jt,ge,ve,V,q,z,X,ne,ce,me,Rt,Tt,Ct,or,Et,on,Qc,Qr,Wr,eu,an,Vr,tu,Gr,cn,vo,Ir,un,Eo,Tr,Kr,ru,ln,Zr,nu,en,dn,Ba,tn,Br,yc,bc,wc,vc,Ec;for(G=0;G<48;G+=2)K=O[0]^O[10]^O[20]^O[30]^O[40],Q=O[1]^O[11]^O[21]^O[31]^O[41],re=O[2]^O[12]^O[22]^O[32]^O[42],de=O[3]^O[13]^O[23]^O[33]^O[43],le=O[4]^O[14]^O[24]^O[34]^O[44],se=O[5]^O[15]^O[25]^O[35]^O[45],be=O[6]^O[16]^O[26]^O[36]^O[46],We=O[7]^O[17]^O[27]^O[37]^O[47],Ne=O[8]^O[18]^O[28]^O[38]^O[48],Be=O[9]^O[19]^O[29]^O[39]^O[49],H=Ne^(re<<1|de>>>31),W=Be^(de<<1|re>>>31),O[0]^=H,O[1]^=W,O[10]^=H,O[11]^=W,O[20]^=H,O[21]^=W,O[30]^=H,O[31]^=W,O[40]^=H,O[41]^=W,H=K^(le<<1|se>>>31),W=Q^(se<<1|le>>>31),O[2]^=H,O[3]^=W,O[12]^=H,O[13]^=W,O[22]^=H,O[23]^=W,O[32]^=H,O[33]^=W,O[42]^=H,O[43]^=W,H=re^(be<<1|We>>>31),W=de^(We<<1|be>>>31),O[4]^=H,O[5]^=W,O[14]^=H,O[15]^=W,O[24]^=H,O[25]^=W,O[34]^=H,O[35]^=W,O[44]^=H,O[45]^=W,H=le^(Ne<<1|Be>>>31),W=se^(Be<<1|Ne>>>31),O[6]^=H,O[7]^=W,O[16]^=H,O[17]^=W,O[26]^=H,O[27]^=W,O[36]^=H,O[37]^=W,O[46]^=H,O[47]^=W,H=be^(K<<1|Q>>>31),W=We^(Q<<1|K>>>31),O[8]^=H,O[9]^=W,O[18]^=H,O[19]^=W,O[28]^=H,O[29]^=W,O[38]^=H,O[39]^=W,O[48]^=H,O[49]^=W,At=O[0],Ee=O[1],un=O[11]<<4|O[10]>>>28,Eo=O[10]<<4|O[11]>>>28,me=O[20]<<3|O[21]>>>29,Rt=O[21]<<3|O[20]>>>29,bc=O[31]<<9|O[30]>>>23,wc=O[30]<<9|O[31]>>>23,Gr=O[40]<<18|O[41]>>>14,cn=O[41]<<18|O[40]>>>14,on=O[2]<<1|O[3]>>>31,Qc=O[3]<<1|O[2]>>>31,fe=O[13]<<12|O[12]>>>20,Mt=O[12]<<12|O[13]>>>20,Tr=O[22]<<10|O[23]>>>22,Kr=O[23]<<10|O[22]>>>22,Tt=O[33]<<13|O[32]>>>19,Ct=O[32]<<13|O[33]>>>19,vc=O[42]<<2|O[43]>>>30,Ec=O[43]<<2|O[42]>>>30,en=O[5]<<30|O[4]>>>2,dn=O[4]<<30|O[5]>>>2,Qr=O[14]<<6|O[15]>>>26,Wr=O[15]<<6|O[14]>>>26,bt=O[25]<<11|O[24]>>>21,jt=O[24]<<11|O[25]>>>21,ru=O[34]<<15|O[35]>>>17,ln=O[35]<<15|O[34]>>>17,or=O[45]<<29|O[44]>>>3,Et=O[44]<<29|O[45]>>>3,z=O[6]<<28|O[7]>>>4,X=O[7]<<28|O[6]>>>4,Ba=O[17]<<23|O[16]>>>9,tn=O[16]<<23|O[17]>>>9,eu=O[26]<<25|O[27]>>>7,an=O[27]<<25|O[26]>>>7,ge=O[36]<<21|O[37]>>>11,ve=O[37]<<21|O[36]>>>11,Zr=O[47]<<24|O[46]>>>8,nu=O[46]<<24|O[47]>>>8,vo=O[8]<<27|O[9]>>>5,Ir=O[9]<<27|O[8]>>>5,ne=O[18]<<20|O[19]>>>12,ce=O[19]<<20|O[18]>>>12,Br=O[29]<<7|O[28]>>>25,yc=O[28]<<7|O[29]>>>25,Vr=O[38]<<8|O[39]>>>24,tu=O[39]<<8|O[38]>>>24,V=O[48]<<14|O[49]>>>18,q=O[49]<<14|O[48]>>>18,O[0]=At^~fe&bt,O[1]=Ee^~Mt&jt,O[10]=z^~ne&me,O[11]=X^~ce&Rt,O[20]=on^~Qr&eu,O[21]=Qc^~Wr&an,O[30]=vo^~un&Tr,O[31]=Ir^~Eo&Kr,O[40]=en^~Ba&Br,O[41]=dn^~tn&yc,O[2]=fe^~bt&ge,O[3]=Mt^~jt&ve,O[12]=ne^~me&Tt,O[13]=ce^~Rt&Ct,O[22]=Qr^~eu&Vr,O[23]=Wr^~an&tu,O[32]=un^~Tr&ru,O[33]=Eo^~Kr&ln,O[42]=Ba^~Br&bc,O[43]=tn^~yc&wc,O[4]=bt^~ge&V,O[5]=jt^~ve&q,O[14]=me^~Tt&or,O[15]=Rt^~Ct&Et,O[24]=eu^~Vr&Gr,O[25]=an^~tu&cn,O[34]=Tr^~ru&Zr,O[35]=Kr^~ln&nu,O[44]=Br^~bc&vc,O[45]=yc^~wc&Ec,O[6]=ge^~V&At,O[7]=ve^~q&Ee,O[16]=Tt^~or&z,O[17]=Ct^~Et&X,O[26]=Vr^~Gr&on,O[27]=tu^~cn&Qc,O[36]=ru^~Zr&vo,O[37]=ln^~nu&Ir,O[46]=bc^~vc&en,O[47]=wc^~Ec&dn,O[8]=V^~At&fe,O[9]=q^~Ee&Mt,O[18]=or^~z&ne,O[19]=Et^~X&ce,O[28]=Gr^~on&Qr,O[29]=cn^~Qc&Wr,O[38]=Zr^~vo&un,O[39]=nu^~Ir&Eo,O[48]=vc^~en&Ba,O[49]=Ec^~dn&tn,O[0]^=h[G],O[1]^=h[G+1]};if(a)t.exports=m;else for(w=0;w<b.length;++w)s[b[w]]=m[b[w]]})()})(pP)),pP.exports}var UOe=BOe();const MOe=xa(UOe);function En(t){return"0x"+MOe.keccak_256(Oe(t))}const DOe=Object.freeze(Object.defineProperty({__proto__:null,keccak256:En},Symbol.toStringTag,{value:"Module"})),jOe="rlp/5.8.0",pl=new ue(jOe);function yL(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function bL(t,e,r){let n=0;for(let s=0;s<r;s++)n=n*256+t[e+s];return n}function Yre(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(i){n=n.concat(Yre(i))}),n.length<=55)return n.unshift(192+n.length),n;const s=yL(n.length);return s.unshift(247+s.length),s.concat(n)}XE(t)||pl.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(Oe(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=yL(e.length);return r.unshift(183+r.length),r.concat(e)}function U0(t){return je(Yre(t))}function wL(t,e,r,n){const s=[];for(;r<e+1+n;){const i=Jre(t,r);s.push(i.result),r+=i.consumed,r>e+1+n&&pl.throwError("child data too short",ue.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:s}}function Jre(t,e){if(t.length===0&&pl.throwError("data too short",ue.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&pl.throwError("data short segment too short",ue.errors.BUFFER_OVERRUN,{});const n=bL(t,e+1,r);return e+1+r+n>t.length&&pl.throwError("data long segment too short",ue.errors.BUFFER_OVERRUN,{}),wL(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&pl.throwError("data array too short",ue.errors.BUFFER_OVERRUN,{}),wL(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&pl.throwError("data array too short",ue.errors.BUFFER_OVERRUN,{});const n=bL(t,e+1,r);e+1+r+n>t.length&&pl.throwError("data array too short",ue.errors.BUFFER_OVERRUN,{});const s=je(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:s}}else if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&pl.throwError("data too short",ue.errors.BUFFER_OVERRUN,{});const n=je(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:je(t[e])}}function h5(t){const e=Oe(t),r=Jre(e,0);return r.consumed!==e.length&&pl.throwArgumentError("invalid rlp data","data",t),r.result}const LOe=Object.freeze(Object.defineProperty({__proto__:null,decode:h5,encode:U0},Symbol.toStringTag,{value:"Module"})),FOe="address/5.8.0",bh=new ue(FOe);function vL(t){Er(t,20)||bh.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let s=0;s<40;s++)r[s]=e[s].charCodeAt(0);const n=Oe(En(r));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(n[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const $Oe=9007199254740991;function qOe(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Kk={};for(let t=0;t<10;t++)Kk[String(t)]=String(t);for(let t=0;t<26;t++)Kk[String.fromCharCode(65+t)]=String(10+t);const EL=Math.floor(qOe($Oe));function Xre(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>Kk[n]).join("");for(;e.length>=EL;){let n=e.substring(0,EL);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function sn(t){let e=null;if(typeof t!="string"&&bh.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=vL(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&bh.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==Xre(t)&&bh.throwArgumentError("bad icap checksum","address",t),e=EOe(t.substring(4));e.length<40;)e="0"+e;e=vL("0x"+e)}else bh.throwArgumentError("invalid address","address",t);return e}function HOe(t){try{return sn(t),!0}catch{}return!1}function zOe(t){let e=_Oe(sn(t).substring(2)).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+Xre("XE00"+e)+e}function Zk(t){let e=null;try{e=sn(t.from)}catch{bh.throwArgumentError("missing from address","transaction",t)}const r=Rl(Oe(Ue.from(t.nonce).toHexString()));return sn(As(En(U0([e,r])),12))}function WOe(t,e,r){return Ll(e)!==32&&bh.throwArgumentError("salt must be 32 bytes","salt",e),Ll(r)!==32&&bh.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),sn(As(En(Mn(["0xff",sn(t),e,r])),12))}const VOe=Object.freeze(Object.defineProperty({__proto__:null,getAddress:sn,getContractAddress:Zk,getCreate2Address:WOe,getIcapAddress:zOe,isAddress:HOe},Symbol.toStringTag,{value:"Module"}));class GOe extends uf{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){try{r=sn(r)}catch(n){this._throwError(n.message,r)}return e.writeValue(r)}decode(e){return sn(Nn(e.readValue().toHexString(),20))}}class KOe extends uf{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}const zm=new ue(QE);function Qre(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let c={};n=e.map(u=>{const l=u.localName;return l||zm.throwError("cannot encode object for signature with missing names",ue.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:r}),c[l]&&zm.throwError("cannot encode object for signature with duplicate names",ue.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:r}),c[l]=!0,r[l]})}else zm.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&zm.throwArgumentError("types/value length mismatch","tuple",r);let s=new TO(t.wordSize),i=new TO(t.wordSize),o=[];e.forEach((c,u)=>{let l=n[u];if(c.dynamic){let d=i.length;c.encode(i,l);let f=s.writeUpdatableValue();o.push(p=>{f(p+d)})}else c.encode(s,l)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function ene(t,e){let r=[],n=t.subReader(0);e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readValue(),c=n.subReader(a.toNumber());try{o=i.decode(c)}catch(u){if(u.code===ue.errors.BUFFER_OVERRUN)throw u;o=u,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(a.code===ue.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}o!=null&&r.push(o)});const s=e.reduce((i,o)=>{const a=o.localName;return a&&(i[a]||(i[a]=0),i[a]++),i},{});e.forEach((i,o)=>{let a=i.localName;if(!a||s[a]!==1||(a==="length"&&(a="_length"),r[a]!=null))return;const c=r[o];c instanceof Error?Object.defineProperty(r,a,{enumerable:!0,get:()=>{throw c}}):r[a]=c});for(let i=0;i<r.length;i++){const o=r[i];o instanceof Error&&Object.defineProperty(r,i,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(r)}class ZOe extends uf{constructor(e,r,n){const s=e.type+"["+(r>=0?r:"")+"]",i=r===-1||e.dynamic;super("array",s,n,i),this.coder=e,this.length=r}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;n===-1&&(n=r.length,e.writeValue(r.length)),zm.checkArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let i=0;i<r.length;i++)s.push(this.coder);return Qre(e,s,r)}decode(e){let r=this.length;r===-1&&(r=e.readValue().toNumber(),r*32>e._data.length&&zm.throwError("insufficient data length",ue.errors.BUFFER_OVERRUN,{length:e._data.length,count:r}));let n=[];for(let s=0;s<r;s++)n.push(new KOe(this.coder));return e.coerce(this.name,ene(e,n))}}class YOe extends uf{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){return e.writeValue(r?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class tne extends uf{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=Oe(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class JOe extends tne{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,je(super.decode(e)))}}class XOe extends uf{constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=Oe(r);return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return e.coerce(this.name,je(e.readBytes(this.size)))}}class QOe extends uf{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const e4e="0x0000000000000000000000000000000000000000",t4e=Ue.from(-1),rne=Ue.from(0),r4e=Ue.from(1),n4e=Ue.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),nne="0x0000000000000000000000000000000000000000000000000000000000000000";class s4e extends uf{constructor(e,r,n){const s=(r?"int":"uint")+e*8;super(s,s,n,!1),this.size=e,this.signed=r}defaultValue(){return 0}encode(e,r){let n=Ue.from(r),s=n4e.mask(e.wordSize*8);if(this.signed){let i=s.mask(this.size*8-1);(n.gt(i)||n.lt(i.add(r4e).mul(t4e)))&&this._throwError("value out-of-bounds",r)}else(n.lt(rne)||n.gt(s.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let r=e.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),e.coerce(this.name,r)}}const i4e="strings/5.8.0",sne=new ue(i4e);var $l;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})($l||($l={}));var pa;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(pa||(pa={}));function o4e(t,e,r,n,s){return sne.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function ine(t,e,r,n,s){if(t===pa.BAD_PREFIX||t===pa.UNEXPECTED_CONTINUE){let i=0;for(let o=e+1;o<r.length&&r[o]>>6===2;o++)i++;return i}return t===pa.OVERRUN?r.length-e-1:0}function a4e(t,e,r,n,s){return t===pa.OVERLONG?(n.push(s),0):(n.push(65533),ine(t,e,r))}const one=Object.freeze({error:o4e,ignore:ine,replace:a4e});function Yk(t,e){e==null&&(e=one.error),t=Oe(t);const r=[];let n=0;for(;n<t.length;){const s=t[n++];if(s>>7===0){r.push(s);continue}let i=null,o=null;if((s&224)===192)i=1,o=127;else if((s&240)===224)i=2,o=2047;else if((s&248)===240)i=3,o=65535;else{(s&192)===128?n+=e(pa.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(pa.BAD_PREFIX,n-1,t,r);continue}if(n-1+i>=t.length){n+=e(pa.OVERRUN,n-1,t,r);continue}let a=s&(1<<8-i-1)-1;for(let c=0;c<i;c++){let u=t[n];if((u&192)!=128){n+=e(pa.MISSING_CONTINUE,n,t,r),a=null;break}a=a<<6|u&63,n++}if(a!==null){if(a>1114111){n+=e(pa.OUT_OF_RANGE,n-1-i,t,r,a);continue}if(a>=55296&&a<=57343){n+=e(pa.UTF16_SURROGATE,n-1-i,t,r,a);continue}if(a<=o){n+=e(pa.OVERLONG,n-1-i,t,r,a);continue}r.push(a)}}return r}function ms(t,e=$l.current){e!=$l.current&&(sne.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);if(s<128)r.push(s);else if(s<2048)r.push(s>>6|192),r.push(s&63|128);else if((s&64512)==55296){n++;const i=t.charCodeAt(n);if(n>=t.length||(i&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((s&1023)<<10)+(i&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128)}return Oe(r)}function gP(t){const e="0000"+t.toString(16);return"\\u"+e.substring(e.length-4)}function c4e(t,e){return'"'+Yk(t,e).map(r=>{if(r<256){switch(r){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(r>=32&&r<127)return String.fromCharCode(r)}return r<=65535?gP(r):(r-=65536,gP((r>>10&1023)+55296)+gP((r&1023)+56320))}).join("")+'"'}function NO(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function zh(t,e){return NO(Yk(t,e))}function Q6(t,e=$l.current){return Yk(ms(t,e))}function u4e(t){const e=ms(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return je(Mn([e,nne]).slice(0,32))}function l4e(t){const e=Oe(t);if(e.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(e[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;e[r-1]===0;)r--;return zh(e.slice(0,r))}function d4e(t){if(t.length%4!==0)throw new Error("bad data");let e=[];for(let r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e}function Jk(t,e){e||(e=function(s){return[parseInt(s,16)]});let r=0,n={};return t.split(",").forEach(s=>{let i=s.split(":");r+=parseInt(i[0],16),n[r]=e(i[1])}),n}function ane(t){let e=0;return t.split(",").map(r=>{let n=r.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");let s=e+parseInt(n[0],16);return e=parseInt(n[1],16),{l:s,h:e}})}function Xk(t,e){let r=0;for(let n=0;n<e.length;n++){let s=e[n];if(r+=s.l,t>=r&&t<=r+s.h&&(t-r)%(s.d||1)===0){if(s.e&&s.e.indexOf(t-r)!==-1)continue;return s}}return null}const f4e=ane("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),h4e="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(t=>parseInt(t,16)),p4e=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],g4e=Jk("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),m4e=Jk("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),y4e=Jk("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",d4e),b4e=ane("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function w4e(t){return t.reduce((e,r)=>(r.forEach(n=>{e.push(n)}),e),[])}function v4e(t){return!!Xk(t,f4e)}function E4e(t){let e=Xk(t,p4e);if(e)return[t+e.s];let r=g4e[t];if(r)return r;let n=m4e[t];if(n)return[t+n[0]];let s=y4e[t];return s||null}function _4e(t){return!!Xk(t,b4e)}function A4e(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();let e=Q6(t);e=w4e(e.map(n=>{if(h4e.indexOf(n)>=0)return[];if(n>=65024&&n<=65039)return[];let s=E4e(n);return s||[n]})),e=Q6(NO(e),$l.NFKC),e.forEach(n=>{if(_4e(n))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),e.forEach(n=>{if(v4e(n))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});let r=NO(e);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-")throw new Error("invalid hyphen");return r}const x4e=Object.freeze(Object.defineProperty({__proto__:null,get UnicodeNormalizationForm(){return $l},Utf8ErrorFuncs:one,get Utf8ErrorReason(){return pa},_toEscapedUtf8String:c4e,formatBytes32String:u4e,nameprep:A4e,parseBytes32String:l4e,toUtf8Bytes:ms,toUtf8CodePoints:Q6,toUtf8String:zh},Symbol.toStringTag,{value:"Module"}));class C4e extends tne{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,ms(r))}decode(e){return zh(super.decode(e))}}class T2 extends uf{constructor(e,r){let n=!1;const s=[];e.forEach(o=>{o.dynamic&&(n=!0),s.push(o.type)});const i="tuple("+s.join(",")+")";super("tuple",i,r,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,s)=>{const i=s.localName;return i&&(n[i]||(n[i]=0),n[i]++),n},{});return this.coders.forEach((n,s)=>{let i=n.localName;!i||r[i]!==1||(i==="length"&&(i="_length"),e[i]==null&&(e[i]=e[s]))}),Object.freeze(e)}encode(e,r){return Qre(e,this.coders,r)}decode(e){return e.coerce(this.name,ene(e,this.coders))}}const N2=new ue(QE),S4e=new RegExp(/^bytes([0-9]*)$/),I4e=new RegExp(/^(u?int)([0-9]*)$/);class cne{constructor(e){xe(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new GOe(e.name);case"bool":return new YOe(e.name);case"string":return new C4e(e.name);case"bytes":return new JOe(e.name);case"array":return new ZOe(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new T2((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new QOe(e.name)}let r=e.type.match(I4e);if(r){let n=parseInt(r[2]||"256");return(n===0||n>256||n%8!==0)&&N2.throwArgumentError("invalid "+r[1]+" bit length","param",e),new s4e(n/8,r[1]==="int",e.name)}if(r=e.type.match(S4e),r){let n=parseInt(r[1]);return(n===0||n>32)&&N2.throwArgumentError("invalid bytes length","param",e),new XOe(n,e.name)}return N2.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,r){return new X6(e,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new TO(this._getWordSize())}getDefaultValue(e){const r=e.map(s=>this._getCoder(Gs.from(s)));return new T2(r,"_").defaultValue()}encode(e,r){e.length!==r.length&&N2.throwError("types/values length mismatch",ue.errors.INVALID_ARGUMENT,{count:{types:e.length,values:r.length},value:{types:e,values:r}});const n=e.map(o=>this._getCoder(Gs.from(o))),s=new T2(n,"_"),i=this._getWriter();return s.encode(i,r),i.data}decode(e,r,n){const s=e.map(o=>this._getCoder(Gs.from(o)));return new T2(s,"_").decode(this._getReader(Oe(r),n))}}const une=new cne;function wh(t){return En(ms(t))}const lne="hash/5.8.0";function Qk(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return Oe(e)}function eB(t){t=Oe(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}const T4e=Object.freeze(Object.defineProperty({__proto__:null,decode:Qk,encode:eB},Symbol.toStringTag,{value:"Module"}));function dne(t,e){e==null&&(e=1);const r=[],n=r.forEach,s=function(i,o){n.call(i,function(a){o>0&&Array.isArray(a)?s(a,o-1):r.push(a)})};return s(t,e),r}function N4e(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[n[0]]=n[1]}return e}function P4e(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),s=1,i=[0,1];for(let T=1;T<n;T++)i.push(s+=r());let o=r(),a=e;e+=o;let c=0,u=0;function l(){return c==0&&(u=u<<8|t[e++],c=8),u>>--c&1}const d=31,f=Math.pow(2,d),p=f>>>1,g=p>>1,h=f-1;let y=0;for(let T=0;T<d;T++)y=y<<1|l();let E=[],S=0,C=f;for(;;){let T=Math.floor(((y-S+1)*s-1)/C),P=0,D=n;for(;D-P>1;){let U=P+D>>>1;T<i[U]?D=U:P=U}if(P==0)break;E.push(P);let L=S+Math.floor(C*i[P]/s),I=S+Math.floor(C*i[P+1]/s)-1;for(;((L^I)&p)==0;)y=y<<1&h|l(),L=L<<1&h,I=I<<1&h|1;for(;L&~I&g;)y=y&p|y<<1&h>>>1|l(),L=L<<1^p,I=(I^p)<<1|p|1;S=L,C=1+I-L}let _=n-4;return E.map(T=>{switch(T-_){case 3:return _+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return _+256+(t[a++]<<8|t[a++]);case 1:return _+t[a++];default:return T-1}})}function R4e(t){let e=0;return()=>t[e++]}function O4e(t){return R4e(P4e(t))}function k4e(t){return t&1?~t>>1:t>>1}function B4e(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}function _L(t,e){let r=Array(t);for(let n=0,s=-1;n<t;n++)r[n]=s+=1+e();return r}function U4e(t,e){let r=Array(t);for(let n=0,s=0;n<t;n++)r[n]=s+=k4e(e());return r}function eT(t,e){let r=_L(t(),t),n=t(),s=_L(n,t),i=B4e(n,t);for(let o=0;o<n;o++)for(let a=0;a<i[o];a++)r.push(s[o]+a);return e?r.map(o=>e[o]):r}function M4e(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(j4e(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(L4e(r,t))}return N4e(dne(e))}function D4e(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(r)}return e}function fne(t,e,r){let n=Array(t).fill(void 0).map(()=>[]);for(let s=0;s<e;s++)U4e(t,r).forEach((i,o)=>n[o].push(i));return n}function j4e(t,e){let r=1+e(),n=e(),s=D4e(e),i=fne(s.length,1+t,e);return dne(i.map((o,a)=>{const c=o[0],u=o.slice(1);return Array(s[a]).fill(void 0).map((l,d)=>{let f=d*n;return[c+d*r,u.map(p=>p+f)]})}))}function L4e(t,e){let r=1+e();return fne(r,1+t,e).map(s=>[s[0],s.slice(1)])}function F4e(t){let e=eT(t).sort((n,s)=>n-s);return r();function r(){let n=[];for(;;){let u=eT(t,e);if(u.length==0)break;n.push({set:new Set(u),node:r()})}n.sort((u,l)=>l.set.size-u.set.size);let s=t(),i=s%3;s=s/3|0;let o=!!(s&1);s>>=1;let a=s==1,c=s==2;return{branches:n,valid:i,fe0f:o,save:a,check:c}}}function $4e(){return O4e(Qk("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const p5=$4e(),q4e=new Set(eT(p5)),H4e=new Set(eT(p5)),z4e=M4e(p5),W4e=F4e(p5),AL=45,xL=95;function hne(t){return Q6(t)}function V4e(t){return t.filter(e=>e!=65039)}function pne(t){for(let e of t.split(".")){let r=hne(e);try{for(let n=r.lastIndexOf(xL)-1;n>=0;n--)if(r[n]!==xL)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every(n=>n<128)&&r[2]===AL&&r[3]===AL)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return t}function G4e(t){return pne(K4e(t,V4e))}function K4e(t,e){let r=hne(t).reverse(),n=[];for(;r.length;){let s=Y4e(r);if(s){n.push(...e(s));continue}let i=r.pop();if(q4e.has(i)){n.push(i);continue}if(H4e.has(i))continue;let o=z4e[i];if(o){n.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${i.toString(16).toUpperCase()}`)}return pne(Z4e(String.fromCodePoint(...n)))}function Z4e(t){return t.normalize("NFC")}function Y4e(t,e){var r;let n=W4e,s,i,o=[],a=t.length;for(;a;){let c=t[--a];if(n=(r=n.branches.find(u=>u.set.has(c)))===null||r===void 0?void 0:r.node,!n)break;if(n.save)i=c;else if(n.check&&c===i)break;o.push(c),n.fe0f&&(o.push(65039),a>0&&t[a-1]==65039&&a--),n.valid&&(s=o.slice(),n.valid==2&&s.splice(1,1),t.length=a)}return s}const J4e=new ue(lne),gne=new Uint8Array(32);gne.fill(0);function CL(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function g5(t){const e=ms(G4e(t)),r=[];if(t.length===0)return r;let n=0;for(let s=0;s<e.length;s++)e[s]===46&&(r.push(CL(e.slice(n,s))),n=s+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(CL(e.slice(n))),r}function X4e(t){return g5(t).map(e=>zh(e)).join(".")}function Q4e(t){try{return g5(t).length!==0}catch{}return!1}function H1(t){typeof t!="string"&&J4e.throwArgumentError("invalid ENS name; not a string","name",t);let e=gne;const r=g5(t);for(;r.length;)e=En(Mn([e,En(r.pop())]));return je(e)}function mne(t){return je(Mn(g5(t).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const r=new Uint8Array(e.length+1);return r.set(e,1),r[0]=r.length-1,r})))+"00"}const yne=`Ethereum Signed Message:
`;function tB(t){return typeof t=="string"&&(t=ms(t)),En(Mn([ms(yne),ms(String(t.length)),t]))}var eke=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const ts=new ue(lne),bne=new Uint8Array(32);bne.fill(0);const tke=Ue.from(-1),wne=Ue.from(0),vne=Ue.from(1),rke=Ue.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function nke(t){const e=Oe(t),r=e.length%32;return r?Ro([e,bne.slice(r)]):je(e)}const ske=Nn(vne.toHexString(),32),ike=Nn(wne.toHexString(),32),SL={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},mP=["name","version","chainId","verifyingContract","salt"];function IL(t){return function(e){return typeof e!="string"&&ts.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const oke={name:IL("name"),version:IL("version"),chainId:function(t){try{return Ue.from(t).toString()}catch{}return ts.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return sn(t).toLowerCase()}catch{}return ts.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=Oe(t);if(e.length!==32)throw new Error("bad length");return je(e)}catch{}return ts.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function yP(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&ts.throwArgumentError("invalid numeric width","type",t);const s=rke.mask(r?n-1:n),i=r?s.add(vne).mul(tke):wne;return function(o){const a=Ue.from(o);return(a.lt(i)||a.gt(s))&&ts.throwArgumentError(`value out-of-bounds for ${t}`,"value",o),Nn(a.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&ts.throwArgumentError("invalid bytes width","type",t),function(n){return Oe(n).length!==r&&ts.throwArgumentError(`invalid length for ${t}`,"value",n),nke(n)}}}switch(t){case"address":return function(e){return Nn(sn(e),32)};case"bool":return function(e){return e?ske:ike};case"bytes":return function(e){return En(e)};case"string":return function(e){return wh(e)}}return null}function TL(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class Pi{constructor(e){xe(this,"types",Object.freeze(Fl(e))),xe(this,"_encoderCache",{}),xe(this,"_types",{});const r={},n={},s={};Object.keys(e).forEach(a=>{r[a]={},n[a]=[],s[a]={}});for(const a in e){const c={};e[a].forEach(u=>{c[u.name]&&ts.throwArgumentError(`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(a)}`,"types",e),c[u.name]=!0;const l=u.type.match(/^([^\x5b]*)(\x5b|$)/)[1];l===a&&ts.throwArgumentError(`circular type reference to ${JSON.stringify(l)}`,"types",e),!yP(l)&&(n[l]||ts.throwArgumentError(`unknown type ${JSON.stringify(l)}`,"types",e),n[l].push(a),r[a][l]=!0)})}const i=Object.keys(n).filter(a=>n[a].length===0);i.length===0?ts.throwArgumentError("missing primary type","types",e):i.length>1&&ts.throwArgumentError(`ambiguous primary types or unused types: ${i.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),xe(this,"primaryType",i[0]);function o(a,c){c[a]&&ts.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),c[a]=!0,Object.keys(r[a]).forEach(u=>{n[u]&&(o(u,c),Object.keys(c).forEach(l=>{s[l][u]=!0}))}),delete c[a]}o(this.primaryType,{});for(const a in s){const c=Object.keys(s[a]);c.sort(),this._types[a]=TL(a,e[a])+c.map(u=>TL(u,e[u])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const s=yP(e);if(s)return s}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const s=r[1],i=this.getEncoder(s),o=parseInt(r[3]);return a=>{o>=0&&a.length!==o&&ts.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let c=a.map(i);return this._types[s]&&(c=c.map(En)),En(Ro(c))}}const n=this.types[e];if(n){const s=wh(this._types[e]);return i=>{const o=n.map(({name:a,type:c})=>{const u=this.getEncoder(c)(i[a]);return this._types[c]?En(u):u});return o.unshift(s),Ro(o)}}return ts.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||ts.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return En(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(yP(e))return n(e,r);const s=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(s){const o=s[1],a=parseInt(s[3]);return a>=0&&r.length!==a&&ts.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(c=>this._visit(o,c,n))}const i=this.types[e];return i?i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,r[a],n),o),{}):ts.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new Pi(e)}static getPrimaryType(e){return Pi.from(e).primaryType}static hashStruct(e,r,n){return Pi.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const s=SL[n];s||ts.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:s})}return r.sort((n,s)=>mP.indexOf(n.name)-mP.indexOf(s.name)),Pi.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return Ro(["0x1901",Pi.hashDomain(e),Pi.from(r).hash(n)])}static hash(e,r,n){return En(Pi.encode(e,r,n))}static resolveNames(e,r,n,s){return eke(this,void 0,void 0,function*(){e=Ds(e);const i={};e.verifyingContract&&!Er(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Pi.from(r);o.visit(n,(a,c)=>(a==="address"&&!Er(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=yield s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:n}})}static getPayload(e,r,n){Pi.hashDomain(e);const s={},i=[];mP.forEach(c=>{const u=e[c];u!=null&&(s[c]=oke[c](u),i.push({name:c,type:SL[c]}))});const o=Pi.from(r),a=Ds(r);return a.EIP712Domain?ts.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):a.EIP712Domain=i,o.encode(n),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(n,(c,u)=>{if(c.match(/^bytes(\d*)/))return je(Oe(u));if(c.match(/^u?int/))return Ue.from(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return typeof u!="string"&&ts.throwArgumentError("invalid string","value",u),u}return ts.throwArgumentError("unsupported type","type",c)})}}}const ake=Object.freeze(Object.defineProperty({__proto__:null,_TypedDataEncoder:Pi,dnsEncode:mne,ensNormalize:X4e,hashMessage:tB,id:wh,isValidName:Q4e,messagePrefix:yne,namehash:H1},Symbol.toStringTag,{value:"Module"})),Xn=new ue(QE);class Ene extends Hh{}class _ne extends Hh{}class cke extends Hh{}class tT extends Hh{static isIndexed(e){return!!(e&&e._isIndexed)}}const uke={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function NL(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class PO{constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,xe(this,"fragments",r.map(n=>Al.from(n)).filter(n=>n!=null)),xe(this,"_abiCoder",Ru(new.target,"getAbiCoder")()),xe(this,"functions",{}),xe(this,"errors",{}),xe(this,"events",{}),xe(this,"structs",{}),this.fragments.forEach(n=>{let s=null;switch(n.type){case"constructor":if(this.deploy){Xn.warn("duplicate definition - constructor");return}xe(this,"deploy",n);return;case"function":s=this.functions;break;case"event":s=this.events;break;case"error":s=this.errors;break;default:return}let i=n.format();if(s[i]){Xn.warn("duplicate definition - "+i);return}s[i]=n}),this.deploy||xe(this,"deploy",Iu.from({payable:!1,type:"constructor"})),xe(this,"_isInterface",!0)}format(e){e||(e=Rr.full),e===Rr.sighash&&Xn.throwArgumentError("interface does not support formatting sighash","format",e);const r=this.fragments.map(n=>n.format(e));return e===Rr.json?JSON.stringify(r.map(n=>JSON.parse(n))):r}static getAbiCoder(){return une}static getAddress(e){return sn(e)}static getSighash(e){return As(wh(e.format()),0,4)}static getEventTopic(e){return wh(e.format())}getFunction(e){if(Er(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];Xn.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),s=Object.keys(this.functions).filter(i=>i.split("(")[0]===n);return s.length===0?Xn.throwArgumentError("no matching function","name",n):s.length>1&&Xn.throwArgumentError("multiple matching functions","name",n),this.functions[s[0]]}const r=this.functions[Tu.fromString(e).format()];return r||Xn.throwArgumentError("no matching function","signature",e),r}getEvent(e){if(Er(e)){const n=e.toLowerCase();for(const s in this.events)if(n===this.getEventTopic(s))return this.events[s];Xn.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),s=Object.keys(this.events).filter(i=>i.split("(")[0]===n);return s.length===0?Xn.throwArgumentError("no matching event","name",n):s.length>1&&Xn.throwArgumentError("multiple matching events","name",n),this.events[s[0]]}const r=this.events[wl.fromString(e).format()];return r||Xn.throwArgumentError("no matching event","signature",e),r}getError(e){if(Er(e)){const n=Ru(this.constructor,"getSighash");for(const s in this.errors){const i=this.errors[s];if(e===n(i))return this.errors[s]}Xn.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),s=Object.keys(this.errors).filter(i=>i.split("(")[0]===n);return s.length===0?Xn.throwArgumentError("no matching error","name",n):s.length>1&&Xn.throwArgumentError("multiple matching errors","name",n),this.errors[s[0]]}const r=this.errors[Tu.fromString(e).format()];return r||Xn.throwArgumentError("no matching error","signature",e),r}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch{throw r}}return Ru(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),Ru(this.constructor,"getEventTopic")(e)}_decodeParams(e,r){return this._abiCoder.decode(e,r)}_encodeParams(e,r){return this._abiCoder.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){typeof e=="string"&&(e=this.getError(e));const n=Oe(r);return je(n.slice(0,4))!==this.getSighash(e)&&Xn.throwArgumentError(`data signature does not match error ${e.name}.`,"data",je(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,r){return typeof e=="string"&&(e=this.getError(e)),je(Mn([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionData(e,r){typeof e=="string"&&(e=this.getFunction(e));const n=Oe(r);return je(n.slice(0,4))!==this.getSighash(e)&&Xn.throwArgumentError(`data signature does not match function ${e.name}.`,"data",je(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,r){return typeof e=="string"&&(e=this.getFunction(e)),je(Mn([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionResult(e,r){typeof e=="string"&&(e=this.getFunction(e));let n=Oe(r),s=null,i="",o=null,a=null,c=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const u=je(n.slice(0,4)),l=uke[u];if(l)o=this._abiCoder.decode(l.inputs,n.slice(4)),a=l.name,c=l.signature,l.reason&&(s=o[0]),a==="Error"?i=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(i=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const d=this.getError(u);o=this._abiCoder.decode(d.inputs,n.slice(4)),a=d.name,c=d.format()}catch{}break}}return Xn.throwError("call revert exception"+i,ue.errors.CALL_EXCEPTION,{method:e.format(),data:je(r),errorArgs:o,errorName:a,errorSignature:c,reason:s})}encodeFunctionResult(e,r){return typeof e=="string"&&(e=this.getFunction(e)),je(this._abiCoder.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){typeof e=="string"&&(e=this.getEvent(e)),r.length>e.inputs.length&&Xn.throwError("too many arguments for "+e.format(),ue.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let n=[];e.anonymous||n.push(this.getEventTopic(e));const s=(i,o)=>i.type==="string"?wh(o):i.type==="bytes"?En(je(o)):(i.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),i.type.match(/^u?int/)&&(o=Ue.from(o).toHexString()),i.type==="address"&&this._abiCoder.encode(["address"],[o]),Nn(je(o),32));for(r.forEach((i,o)=>{let a=e.inputs[o];if(!a.indexed){i!=null&&Xn.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?Xn.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?n.push(i.map(c=>s(a,c))):n.push(s(a,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){typeof e=="string"&&(e=this.getEvent(e));const n=[],s=[],i=[];return e.anonymous||n.push(this.getEventTopic(e)),r.length!==e.inputs.length&&Xn.throwArgumentError("event arguments/values mismatch","values",r),e.inputs.forEach((o,a)=>{const c=r[a];if(o.indexed)if(o.type==="string")n.push(wh(c));else if(o.type==="bytes")n.push(En(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:this._abiCoder.encode(s,i),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let f=this.getEventTopic(e);(!Er(n[0],32)||n[0].toLowerCase()!==f)&&Xn.throwError("fragment/topic mismatch",ue.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:f,value:n[0]}),n=n.slice(1)}let s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Gs.fromObject({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});let a=n!=null?this._abiCoder.decode(s,Mn(n)):null,c=this._abiCoder.decode(i,r,!0),u=[],l=0,d=0;e.inputs.forEach((f,p)=>{if(f.indexed)if(a==null)u[p]=new tT({_isIndexed:!0,hash:null});else if(o[p])u[p]=new tT({_isIndexed:!0,hash:a[d++]});else try{u[p]=a[d++]}catch(g){u[p]=g}else try{u[p]=c[l++]}catch(g){u[p]=g}if(f.name&&u[f.name]==null){const g=u[p];g instanceof Error?Object.defineProperty(u,f.name,{enumerable:!0,get:()=>{throw NL(`property ${JSON.stringify(f.name)}`,g)}}):u[f.name]=g}});for(let f=0;f<u.length;f++){const p=u[f];p instanceof Error&&Object.defineProperty(u,f,{enumerable:!0,get:()=>{throw NL(`index ${f}`,p)}})}return Object.freeze(u)}parseTransaction(e){let r=this.getFunction(e.data.substring(0,10).toLowerCase());return r?new _ne({args:this._abiCoder.decode(r.inputs,"0x"+e.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:Ue.from(e.value||"0")}):null}parseLog(e){let r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new Ene({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,e.data,e.topics)})}parseError(e){const r=je(e);let n=this.getError(r.substring(0,10).toLowerCase());return n?new cke({args:this._abiCoder.decode(n.inputs,"0x"+r.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const lke=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:cne,ConstructorFragment:Iu,ErrorFragment:zd,EventFragment:wl,FormatTypes:Rr,Fragment:Al,FunctionFragment:Tu,Indexed:tT,Interface:PO,LogDescription:Ene,ParamType:Gs,TransactionDescription:_ne,checkResultErrors:Zre,defaultAbiCoder:une},Symbol.toStringTag,{value:"Module"})),dke="abstract-provider/5.8.0";var fke=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const hke=new ue(dke);class pke extends Hh{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class e_{constructor(){hke.checkAbstract(new.target,e_),xe(this,"_isProvider",!0)}getFeeData(){return fke(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield ps({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let n=null,s=null,i=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,i=Ue.from("1500000000"),s=e.baseFeePerGas.mul(2).add(i)),{lastBaseFeePerGas:n,maxFeePerGas:s,maxPriorityFeePerGas:i,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}}const gke="abstract-signer/5.8.0";var cu=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const kc=new ue(gke),mke=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],yke=[ue.errors.INSUFFICIENT_FUNDS,ue.errors.NONCE_EXPIRED,ue.errors.REPLACEMENT_UNDERPRICED];class tb{constructor(){kc.checkAbstract(new.target,tb),xe(this,"_isSigner",!0)}getBalance(e){return cu(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return cu(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return cu(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield ps(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return cu(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield ps(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return cu(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return cu(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return cu(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return cu(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return cu(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)mke.indexOf(n)===-1&&kc.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=Ds(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&kc.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return cu(this,void 0,void 0,function*(){const r=yield ps(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(s=>cu(this,void 0,void 0,function*(){if(s==null)return null;const i=yield this.resolveName(s);return i==null&&kc.throwArgumentError("provided ENS name resolves to null","tx.to",s),i})),r.to.catch(s=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?kc.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&kc.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const s=yield this.getFeeData();if(r.type==null)if(s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const i=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=i,r.maxPriorityFeePerGas=i}else r.maxFeePerGas==null&&(r.maxFeePerGas=s.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=s.maxPriorityFeePerGas);else s.gasPrice!=null?(n&&kc.throwError("network does not support EIP-1559",ue.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=s.gasPrice),r.type=0):kc.throwError("failed to get consistent fee data",ue.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=s.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=s.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(s=>{if(yke.indexOf(s.code)>=0)throw s;return kc.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ue.errors.UNPREDICTABLE_GAS_LIMIT,{error:s,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(s=>(s[1]!==0&&s[0]!==s[1]&&kc.throwArgumentError("chainId address mismatch","transaction",e),s[0])),yield ps(r)})}_checkProvider(e){this.provider||kc.throwError("missing provider",ue.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class rB extends tb{constructor(e,r){super(),xe(this,"address",e),xe(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{kc.throwError(e,ue.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new rB(this.address,e)}}var bP={},bn={},wP,PL;function t_(){if(PL)return wP;PL=1,wP=t;function t(e,r){if(!e)throw new Error(r||"Assertion failed")}return t.equal=function(r,n,s){if(r!=n)throw new Error(s||"Assertion failed: "+r+" != "+n)},wP}var P2={exports:{}},RL;function bke(){return RL||(RL=1,typeof Object.create=="function"?P2.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:P2.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}),P2.exports}var OL;function Vl(){if(OL)return bn;OL=1;var t=t_(),e=bke();bn.inherits=e;function r(B,A){return(B.charCodeAt(A)&64512)!==55296||A<0||A+1>=B.length?!1:(B.charCodeAt(A+1)&64512)===56320}function n(B,A){if(Array.isArray(B))return B.slice();if(!B)return[];var m=[];if(typeof B=="string")if(A){if(A==="hex")for(B=B.replace(/[^a-z0-9]+/ig,""),B.length%2!==0&&(B="0"+B),w=0;w<B.length;w+=2)m.push(parseInt(B[w]+B[w+1],16))}else for(var b=0,w=0;w<B.length;w++){var x=B.charCodeAt(w);x<128?m[b++]=x:x<2048?(m[b++]=x>>6|192,m[b++]=x&63|128):r(B,w)?(x=65536+((x&1023)<<10)+(B.charCodeAt(++w)&1023),m[b++]=x>>18|240,m[b++]=x>>12&63|128,m[b++]=x>>6&63|128,m[b++]=x&63|128):(m[b++]=x>>12|224,m[b++]=x>>6&63|128,m[b++]=x&63|128)}else for(w=0;w<B.length;w++)m[w]=B[w]|0;return m}bn.toArray=n;function s(B){for(var A="",m=0;m<B.length;m++)A+=a(B[m].toString(16));return A}bn.toHex=s;function i(B){var A=B>>>24|B>>>8&65280|B<<8&16711680|(B&255)<<24;return A>>>0}bn.htonl=i;function o(B,A){for(var m="",b=0;b<B.length;b++){var w=B[b];A==="little"&&(w=i(w)),m+=c(w.toString(16))}return m}bn.toHex32=o;function a(B){return B.length===1?"0"+B:B}bn.zero2=a;function c(B){return B.length===7?"0"+B:B.length===6?"00"+B:B.length===5?"000"+B:B.length===4?"0000"+B:B.length===3?"00000"+B:B.length===2?"000000"+B:B.length===1?"0000000"+B:B}bn.zero8=c;function u(B,A,m,b){var w=m-A;t(w%4===0);for(var x=new Array(w/4),M=0,k=A;M<x.length;M++,k+=4){var j;b==="big"?j=B[k]<<24|B[k+1]<<16|B[k+2]<<8|B[k+3]:j=B[k+3]<<24|B[k+2]<<16|B[k+1]<<8|B[k],x[M]=j>>>0}return x}bn.join32=u;function l(B,A){for(var m=new Array(B.length*4),b=0,w=0;b<B.length;b++,w+=4){var x=B[b];A==="big"?(m[w]=x>>>24,m[w+1]=x>>>16&255,m[w+2]=x>>>8&255,m[w+3]=x&255):(m[w+3]=x>>>24,m[w+2]=x>>>16&255,m[w+1]=x>>>8&255,m[w]=x&255)}return m}bn.split32=l;function d(B,A){return B>>>A|B<<32-A}bn.rotr32=d;function f(B,A){return B<<A|B>>>32-A}bn.rotl32=f;function p(B,A){return B+A>>>0}bn.sum32=p;function g(B,A,m){return B+A+m>>>0}bn.sum32_3=g;function h(B,A,m,b){return B+A+m+b>>>0}bn.sum32_4=h;function y(B,A,m,b,w){return B+A+m+b+w>>>0}bn.sum32_5=y;function E(B,A,m,b){var w=B[A],x=B[A+1],M=b+x>>>0,k=(M<b?1:0)+m+w;B[A]=k>>>0,B[A+1]=M}bn.sum64=E;function S(B,A,m,b){var w=A+b>>>0,x=(w<A?1:0)+B+m;return x>>>0}bn.sum64_hi=S;function C(B,A,m,b){var w=A+b;return w>>>0}bn.sum64_lo=C;function _(B,A,m,b,w,x,M,k){var j=0,N=A;N=N+b>>>0,j+=N<A?1:0,N=N+x>>>0,j+=N<x?1:0,N=N+k>>>0,j+=N<k?1:0;var v=B+m+w+M+j;return v>>>0}bn.sum64_4_hi=_;function T(B,A,m,b,w,x,M,k){var j=A+b+x+k;return j>>>0}bn.sum64_4_lo=T;function P(B,A,m,b,w,x,M,k,j,N){var v=0,R=A;R=R+b>>>0,v+=R<A?1:0,R=R+x>>>0,v+=R<x?1:0,R=R+k>>>0,v+=R<k?1:0,R=R+N>>>0,v+=R<N?1:0;var $=B+m+w+M+j+v;return $>>>0}bn.sum64_5_hi=P;function D(B,A,m,b,w,x,M,k,j,N){var v=A+b+x+k+N;return v>>>0}bn.sum64_5_lo=D;function L(B,A,m){var b=A<<32-m|B>>>m;return b>>>0}bn.rotr64_hi=L;function I(B,A,m){var b=B<<32-m|A>>>m;return b>>>0}bn.rotr64_lo=I;function U(B,A,m){return B>>>m}bn.shr64_hi=U;function F(B,A,m){var b=B<<32-m|A>>>m;return b>>>0}return bn.shr64_lo=F,bn}var vP={},kL;function r_(){if(kL)return vP;kL=1;var t=Vl(),e=t_();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return vP.BlockHash=r,r.prototype.update=function(s,i){if(s=t.toArray(s,i),this.pending?this.pending=this.pending.concat(s):this.pending=s,this.pendingTotal+=s.length,this.pending.length>=this._delta8){s=this.pending;var o=s.length%this._delta8;this.pending=s.slice(s.length-o,s.length),this.pending.length===0&&(this.pending=null),s=t.join32(s,0,s.length-o,this.endian);for(var a=0;a<s.length;a+=this._delta32)this._update(s,a,a+this._delta32)}return this},r.prototype.digest=function(s){return this.update(this._pad()),e(this.pending===null),this._digest(s)},r.prototype._pad=function(){var s=this.pendingTotal,i=this._delta8,o=i-(s+this.padLength)%i,a=new Array(o+this.padLength);a[0]=128;for(var c=1;c<o;c++)a[c]=0;if(s<<=3,this.endian==="big"){for(var u=8;u<this.padLength;u++)a[c++]=0;a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=s>>>24&255,a[c++]=s>>>16&255,a[c++]=s>>>8&255,a[c++]=s&255}else for(a[c++]=s&255,a[c++]=s>>>8&255,a[c++]=s>>>16&255,a[c++]=s>>>24&255,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,u=8;u<this.padLength;u++)a[c++]=0;return a},vP}var yp={},sl={},BL;function Ane(){if(BL)return sl;BL=1;var t=Vl(),e=t.rotr32;function r(l,d,f,p){if(l===0)return n(d,f,p);if(l===1||l===3)return i(d,f,p);if(l===2)return s(d,f,p)}sl.ft_1=r;function n(l,d,f){return l&d^~l&f}sl.ch32=n;function s(l,d,f){return l&d^l&f^d&f}sl.maj32=s;function i(l,d,f){return l^d^f}sl.p32=i;function o(l){return e(l,2)^e(l,13)^e(l,22)}sl.s0_256=o;function a(l){return e(l,6)^e(l,11)^e(l,25)}sl.s1_256=a;function c(l){return e(l,7)^e(l,18)^l>>>3}sl.g0_256=c;function u(l){return e(l,17)^e(l,19)^l>>>10}return sl.g1_256=u,sl}var EP,UL;function wke(){if(UL)return EP;UL=1;var t=Vl(),e=r_(),r=Ane(),n=t.rotl32,s=t.sum32,i=t.sum32_5,o=r.ft_1,a=e.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function u(){if(!(this instanceof u))return new u;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(u,a),EP=u,u.blockSize=512,u.outSize=160,u.hmacStrength=80,u.padLength=64,u.prototype._update=function(d,f){for(var p=this.W,g=0;g<16;g++)p[g]=d[f+g];for(;g<p.length;g++)p[g]=n(p[g-3]^p[g-8]^p[g-14]^p[g-16],1);var h=this.h[0],y=this.h[1],E=this.h[2],S=this.h[3],C=this.h[4];for(g=0;g<p.length;g++){var _=~~(g/20),T=i(n(h,5),o(_,y,E,S),C,p[g],c[_]);C=S,S=E,E=n(y,30),y=h,h=T}this.h[0]=s(this.h[0],h),this.h[1]=s(this.h[1],y),this.h[2]=s(this.h[2],E),this.h[3]=s(this.h[3],S),this.h[4]=s(this.h[4],C)},u.prototype._digest=function(d){return d==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},EP}var _P,ML;function xne(){if(ML)return _P;ML=1;var t=Vl(),e=r_(),r=Ane(),n=t_(),s=t.sum32,i=t.sum32_4,o=t.sum32_5,a=r.ch32,c=r.maj32,u=r.s0_256,l=r.s1_256,d=r.g0_256,f=r.g1_256,p=e.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function h(){if(!(this instanceof h))return new h;p.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}return t.inherits(h,p),_P=h,h.blockSize=512,h.outSize=256,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(E,S){for(var C=this.W,_=0;_<16;_++)C[_]=E[S+_];for(;_<C.length;_++)C[_]=i(f(C[_-2]),C[_-7],d(C[_-15]),C[_-16]);var T=this.h[0],P=this.h[1],D=this.h[2],L=this.h[3],I=this.h[4],U=this.h[5],F=this.h[6],B=this.h[7];for(n(this.k.length===C.length),_=0;_<C.length;_++){var A=o(B,l(I),a(I,U,F),this.k[_],C[_]),m=s(u(T),c(T,P,D));B=F,F=U,U=I,I=s(L,A),L=D,D=P,P=T,T=s(A,m)}this.h[0]=s(this.h[0],T),this.h[1]=s(this.h[1],P),this.h[2]=s(this.h[2],D),this.h[3]=s(this.h[3],L),this.h[4]=s(this.h[4],I),this.h[5]=s(this.h[5],U),this.h[6]=s(this.h[6],F),this.h[7]=s(this.h[7],B)},h.prototype._digest=function(E){return E==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},_P}var AP,DL;function vke(){if(DL)return AP;DL=1;var t=Vl(),e=xne();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(r,e),AP=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(s){return s==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},AP}var xP,jL;function Cne(){if(jL)return xP;jL=1;var t=Vl(),e=r_(),r=t_(),n=t.rotr64_hi,s=t.rotr64_lo,i=t.shr64_hi,o=t.shr64_lo,a=t.sum64,c=t.sum64_hi,u=t.sum64_lo,l=t.sum64_4_hi,d=t.sum64_4_lo,f=t.sum64_5_hi,p=t.sum64_5_lo,g=e.BlockHash,h=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=h,this.W=new Array(160)}t.inherits(y,g),xP=y,y.blockSize=1024,y.outSize=512,y.hmacStrength=192,y.padLength=128,y.prototype._prepareBlock=function(m,b){for(var w=this.W,x=0;x<32;x++)w[x]=m[b+x];for(;x<w.length;x+=2){var M=F(w[x-4],w[x-3]),k=B(w[x-4],w[x-3]),j=w[x-14],N=w[x-13],v=I(w[x-30],w[x-29]),R=U(w[x-30],w[x-29]),$=w[x-32],O=w[x-31];w[x]=l(M,k,j,N,v,R,$,O),w[x+1]=d(M,k,j,N,v,R,$,O)}},y.prototype._update=function(m,b){this._prepareBlock(m,b);var w=this.W,x=this.h[0],M=this.h[1],k=this.h[2],j=this.h[3],N=this.h[4],v=this.h[5],R=this.h[6],$=this.h[7],O=this.h[8],H=this.h[9],W=this.h[10],G=this.h[11],K=this.h[12],Q=this.h[13],re=this.h[14],de=this.h[15];r(this.k.length===w.length);for(var le=0;le<w.length;le+=2){var se=re,be=de,We=D(O,H),Ne=L(O,H),Be=E(O,H,W,G,K),At=S(O,H,W,G,K,Q),Ee=this.k[le],fe=this.k[le+1],Mt=w[le],bt=w[le+1],jt=f(se,be,We,Ne,Be,At,Ee,fe,Mt,bt),ge=p(se,be,We,Ne,Be,At,Ee,fe,Mt,bt);se=T(x,M),be=P(x,M),We=C(x,M,k,j,N),Ne=_(x,M,k,j,N,v);var ve=c(se,be,We,Ne),V=u(se,be,We,Ne);re=K,de=Q,K=W,Q=G,W=O,G=H,O=c(R,$,jt,ge),H=u($,$,jt,ge),R=N,$=v,N=k,v=j,k=x,j=M,x=c(jt,ge,ve,V),M=u(jt,ge,ve,V)}a(this.h,0,x,M),a(this.h,2,k,j),a(this.h,4,N,v),a(this.h,6,R,$),a(this.h,8,O,H),a(this.h,10,W,G),a(this.h,12,K,Q),a(this.h,14,re,de)},y.prototype._digest=function(m){return m==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function E(A,m,b,w,x){var M=A&b^~A&x;return M<0&&(M+=4294967296),M}function S(A,m,b,w,x,M){var k=m&w^~m&M;return k<0&&(k+=4294967296),k}function C(A,m,b,w,x){var M=A&b^A&x^b&x;return M<0&&(M+=4294967296),M}function _(A,m,b,w,x,M){var k=m&w^m&M^w&M;return k<0&&(k+=4294967296),k}function T(A,m){var b=n(A,m,28),w=n(m,A,2),x=n(m,A,7),M=b^w^x;return M<0&&(M+=4294967296),M}function P(A,m){var b=s(A,m,28),w=s(m,A,2),x=s(m,A,7),M=b^w^x;return M<0&&(M+=4294967296),M}function D(A,m){var b=n(A,m,14),w=n(A,m,18),x=n(m,A,9),M=b^w^x;return M<0&&(M+=4294967296),M}function L(A,m){var b=s(A,m,14),w=s(A,m,18),x=s(m,A,9),M=b^w^x;return M<0&&(M+=4294967296),M}function I(A,m){var b=n(A,m,1),w=n(A,m,8),x=i(A,m,7),M=b^w^x;return M<0&&(M+=4294967296),M}function U(A,m){var b=s(A,m,1),w=s(A,m,8),x=o(A,m,7),M=b^w^x;return M<0&&(M+=4294967296),M}function F(A,m){var b=n(A,m,19),w=n(m,A,29),x=i(A,m,6),M=b^w^x;return M<0&&(M+=4294967296),M}function B(A,m){var b=s(A,m,19),w=s(m,A,29),x=o(A,m,6),M=b^w^x;return M<0&&(M+=4294967296),M}return xP}var CP,LL;function Eke(){if(LL)return CP;LL=1;var t=Vl(),e=Cne();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(r,e),CP=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(s){return s==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},CP}var FL;function _ke(){return FL||(FL=1,yp.sha1=wke(),yp.sha224=vke(),yp.sha256=xne(),yp.sha384=Eke(),yp.sha512=Cne()),yp}var SP={},$L;function Ake(){if($L)return SP;$L=1;var t=Vl(),e=r_(),r=t.rotl32,n=t.sum32,s=t.sum32_3,i=t.sum32_4,o=e.BlockHash;function a(){if(!(this instanceof a))return new a;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(a,o),SP.ripemd160=a,a.blockSize=512,a.outSize=160,a.hmacStrength=192,a.padLength=64,a.prototype._update=function(y,E){for(var S=this.h[0],C=this.h[1],_=this.h[2],T=this.h[3],P=this.h[4],D=S,L=C,I=_,U=T,F=P,B=0;B<80;B++){var A=n(r(i(S,c(B,C,_,T),y[d[B]+E],u(B)),p[B]),P);S=P,P=T,T=r(_,10),_=C,C=A,A=n(r(i(D,c(79-B,L,I,U),y[f[B]+E],l(B)),g[B]),F),D=F,F=U,U=r(I,10),I=L,L=A}A=s(this.h[1],_,U),this.h[1]=s(this.h[2],T,F),this.h[2]=s(this.h[3],P,D),this.h[3]=s(this.h[4],S,L),this.h[4]=s(this.h[0],C,I),this.h[0]=A},a.prototype._digest=function(y){return y==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function c(h,y,E,S){return h<=15?y^E^S:h<=31?y&E|~y&S:h<=47?(y|~E)^S:h<=63?y&S|E&~S:y^(E|~S)}function u(h){return h<=15?0:h<=31?1518500249:h<=47?1859775393:h<=63?2400959708:2840853838}function l(h){return h<=15?1352829926:h<=31?1548603684:h<=47?1836072691:h<=63?2053994217:0}var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return SP}var IP,qL;function xke(){if(qL)return IP;qL=1;var t=Vl(),e=t_();function r(n,s,i){if(!(this instanceof r))return new r(n,s,i);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(s,i))}return IP=r,r.prototype._init=function(s){s.length>this.blockSize&&(s=new this.Hash().update(s).digest()),e(s.length<=this.blockSize);for(var i=s.length;i<this.blockSize;i++)s.push(0);for(i=0;i<s.length;i++)s[i]^=54;for(this.inner=new this.Hash().update(s),i=0;i<s.length;i++)s[i]^=106;this.outer=new this.Hash().update(s)},r.prototype.update=function(s,i){return this.inner.update(s,i),this},r.prototype.digest=function(s){return this.outer.update(this.inner.digest()),this.outer.digest(s)},IP}var HL;function Cke(){return HL||(HL=1,(function(t){var e=t;e.utils=Vl(),e.common=r_(),e.sha=_ke(),e.ripemd=Ake(),e.hmac=xke(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(bP)),bP}var Ske=Cke();const ua=xa(Ske);function rb(t,e,r){return r={path:e,exports:{},require:function(n,s){return Ike(n,s??r.path)}},t(r,r.exports),r.exports}function Ike(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var nB=Sne;function Sne(t,e){if(!t)throw new Error(e||"Assertion failed")}Sne.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Ou=rb(function(t,e){var r=e;function n(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var c=[];if(typeof o!="string"){for(var u=0;u<o.length;u++)c[u]=o[u]|0;return c}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var u=0;u<o.length;u+=2)c.push(parseInt(o[u]+o[u+1],16))}else for(var u=0;u<o.length;u++){var l=o.charCodeAt(u),d=l>>8,f=l&255;d?c.push(d,f):c.push(f)}return c}r.toArray=n;function s(o){return o.length===1?"0"+o:o}r.zero2=s;function i(o){for(var a="",c=0;c<o.length;c++)a+=s(o[c].toString(16));return a}r.toHex=i,r.encode=function(a,c){return c==="hex"?i(a):a}}),hc=rb(function(t,e){var r=e;r.assert=nB,r.toArray=Ou.toArray,r.zero2=Ou.zero2,r.toHex=Ou.toHex,r.encode=Ou.encode;function n(c,u,l){var d=new Array(Math.max(c.bitLength(),l)+1),f;for(f=0;f<d.length;f+=1)d[f]=0;var p=1<<u+1,g=c.clone();for(f=0;f<d.length;f++){var h,y=g.andln(p-1);g.isOdd()?(y>(p>>1)-1?h=(p>>1)-y:h=y,g.isubn(h)):h=0,d[f]=h,g.iushrn(1)}return d}r.getNAF=n;function s(c,u){var l=[[],[]];c=c.clone(),u=u.clone();for(var d=0,f=0,p;c.cmpn(-d)>0||u.cmpn(-f)>0;){var g=c.andln(3)+d&3,h=u.andln(3)+f&3;g===3&&(g=-1),h===3&&(h=-1);var y;(g&1)===0?y=0:(p=c.andln(7)+d&7,(p===3||p===5)&&h===2?y=-g:y=g),l[0].push(y);var E;(h&1)===0?E=0:(p=u.andln(7)+f&7,(p===3||p===5)&&g===2?E=-h:E=h),l[1].push(E),2*d===y+1&&(d=1-d),2*f===E+1&&(f=1-f),c.iushrn(1),u.iushrn(1)}return l}r.getJSF=s;function i(c,u,l){var d="_"+u;c.prototype[u]=function(){return this[d]!==void 0?this[d]:this[d]=l.call(this)}}r.cachedProperty=i;function o(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=o;function a(c){return new Ft(c,"hex","le")}r.intFromLE=a}),rT=hc.getNAF,Tke=hc.getJSF,nT=hc.assert;function Wh(t,e){this.type=t,this.p=new Ft(e.p,16),this.red=e.prime?Ft.red(e.prime):Ft.mont(this.p),this.zero=new Ft(0).toRed(this.red),this.one=new Ft(1).toRed(this.red),this.two=new Ft(2).toRed(this.red),this.n=e.n&&new Ft(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var sg=Wh;Wh.prototype.point=function(){throw new Error("Not implemented")};Wh.prototype.validate=function(){throw new Error("Not implemented")};Wh.prototype._fixedNafMul=function(e,r){nT(e.precomputed);var n=e._getDoubles(),s=rT(r,1,this._bitLength),i=(1<<n.step+1)-(n.step%2===0?2:1);i/=3;var o=[],a,c;for(a=0;a<s.length;a+=n.step){c=0;for(var u=a+n.step-1;u>=a;u--)c=(c<<1)+s[u];o.push(c)}for(var l=this.jpoint(null,null,null),d=this.jpoint(null,null,null),f=i;f>0;f--){for(a=0;a<o.length;a++)c=o[a],c===f?d=d.mixedAdd(n.points[a]):c===-f&&(d=d.mixedAdd(n.points[a].neg()));l=l.add(d)}return l.toP()};Wh.prototype._wnafMul=function(e,r){var n=4,s=e._getNAFPoints(n);n=s.wnd;for(var i=s.points,o=rT(r,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var u=0;c>=0&&o[c]===0;c--)u++;if(c>=0&&u++,a=a.dblp(u),c<0)break;var l=o[c];nT(l!==0),e.type==="affine"?l>0?a=a.mixedAdd(i[l-1>>1]):a=a.mixedAdd(i[-l-1>>1].neg()):l>0?a=a.add(i[l-1>>1]):a=a.add(i[-l-1>>1].neg())}return e.type==="affine"?a.toP():a};Wh.prototype._wnafMulAdd=function(e,r,n,s,i){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,u=0,l,d,f;for(l=0;l<s;l++){f=r[l];var p=f._getNAFPoints(e);o[l]=p.wnd,a[l]=p.points}for(l=s-1;l>=1;l-=2){var g=l-1,h=l;if(o[g]!==1||o[h]!==1){c[g]=rT(n[g],o[g],this._bitLength),c[h]=rT(n[h],o[h],this._bitLength),u=Math.max(c[g].length,u),u=Math.max(c[h].length,u);continue}var y=[r[g],null,null,r[h]];r[g].y.cmp(r[h].y)===0?(y[1]=r[g].add(r[h]),y[2]=r[g].toJ().mixedAdd(r[h].neg())):r[g].y.cmp(r[h].y.redNeg())===0?(y[1]=r[g].toJ().mixedAdd(r[h]),y[2]=r[g].add(r[h].neg())):(y[1]=r[g].toJ().mixedAdd(r[h]),y[2]=r[g].toJ().mixedAdd(r[h].neg()));var E=[-3,-1,-5,-7,0,7,5,1,3],S=Tke(n[g],n[h]);for(u=Math.max(S[0].length,u),c[g]=new Array(u),c[h]=new Array(u),d=0;d<u;d++){var C=S[0][d]|0,_=S[1][d]|0;c[g][d]=E[(C+1)*3+(_+1)],c[h][d]=0,a[g]=y}}var T=this.jpoint(null,null,null),P=this._wnafT4;for(l=u;l>=0;l--){for(var D=0;l>=0;){var L=!0;for(d=0;d<s;d++)P[d]=c[d][l]|0,P[d]!==0&&(L=!1);if(!L)break;D++,l--}if(l>=0&&D++,T=T.dblp(D),l<0)break;for(d=0;d<s;d++){var I=P[d];I!==0&&(I>0?f=a[d][I-1>>1]:I<0&&(f=a[d][-I-1>>1].neg()),f.type==="affine"?T=T.mixedAdd(f):T=T.add(f))}}for(l=0;l<s;l++)a[l]=null;return i?T:T.toP()};function Zc(t,e){this.curve=t,this.type=e,this.precomputed=null}Wh.BasePoint=Zc;Zc.prototype.eq=function(){throw new Error("Not implemented")};Zc.prototype.validate=function(){return this.curve.validate(this)};Wh.prototype.decodePoint=function(e,r){e=hc.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?nT(e[e.length-1]%2===0):e[0]===7&&nT(e[e.length-1]%2===1);var s=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return s}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Zc.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Zc.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Zc.prototype.encode=function(e,r){return hc.encode(this._encode(r),e)};Zc.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Zc.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Zc.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],s=this,i=0;i<r;i+=e){for(var o=0;o<e;o++)s=s.dbl();n.push(s)}return{step:e,points:n}};Zc.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,s=n===1?null:this.dbl(),i=1;i<n;i++)r[i]=r[i-1].add(s);return{wnd:e,points:r}};Zc.prototype._getBeta=function(){return null};Zc.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var sB=rb(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var s=function(){};s.prototype=n.prototype,r.prototype=new s,r.prototype.constructor=r}}}),Nke=hc.assert;function Yc(t){sg.call(this,"short",t),this.a=new Ft(t.a,16).toRed(this.red),this.b=new Ft(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}sB(Yc,sg);var Pke=Yc;Yc.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Ft(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);r=s[0].cmp(s[1])<0?s[0]:s[1],r=r.toRed(this.red)}if(e.lambda)n=new Ft(e.lambda,16);else{var i=this._getEndoRoots(this.n);this.g.mul(i[0]).x.cmp(this.g.x.redMul(r))===0?n=i[0]:(n=i[1],Nke(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new Ft(a.a,16),b:new Ft(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};Yc.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Ft.mont(e),n=new Ft(2).toRed(r).redInvm(),s=n.redNeg(),i=new Ft(3).toRed(r).redNeg().redSqrt().redMul(n),o=s.redAdd(i).fromRed(),a=s.redSub(i).fromRed();return[o,a]};Yc.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,s=this.n.clone(),i=new Ft(1),o=new Ft(0),a=new Ft(0),c=new Ft(1),u,l,d,f,p,g,h,y=0,E,S;n.cmpn(0)!==0;){var C=s.div(n);E=s.sub(C.mul(n)),S=a.sub(C.mul(i));var _=c.sub(C.mul(o));if(!d&&E.cmp(r)<0)u=h.neg(),l=i,d=E.neg(),f=S;else if(d&&++y===2)break;h=E,s=n,n=E,a=i,i=S,c=o,o=_}p=E.neg(),g=S;var T=d.sqr().add(f.sqr()),P=p.sqr().add(g.sqr());return P.cmp(T)>=0&&(p=u,g=l),d.negative&&(d=d.neg(),f=f.neg()),p.negative&&(p=p.neg(),g=g.neg()),[{a:d,b:f},{a:p,b:g}]};Yc.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],s=r[1],i=s.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=i.mul(n.a),c=o.mul(s.a),u=i.mul(n.b),l=o.mul(s.b),d=e.sub(a).sub(c),f=u.add(l).neg();return{k1:d,k2:f}};Yc.prototype.pointFromX=function(e,r){e=new Ft(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=n.redSqrt();if(s.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var i=s.fromRed().isOdd();return(r&&!i||!r&&i)&&(s=s.redNeg()),this.point(e,s)};Yc.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,s=this.a.redMul(r),i=r.redSqr().redMul(r).redIAdd(s).redIAdd(this.b);return n.redSqr().redISub(i).cmpn(0)===0};Yc.prototype._endoWnafMulAdd=function(e,r,n){for(var s=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],u=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),s[o*2]=c,s[o*2+1]=u,i[o*2]=a.k1,i[o*2+1]=a.k2}for(var l=this._wnafMulAdd(1,s,i,o*2,n),d=0;d<o*2;d++)s[d]=null,i[d]=null;return l};function fi(t,e,r,n){sg.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Ft(e,16),this.y=new Ft(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}sB(fi,sg.BasePoint);Yc.prototype.point=function(e,r,n){return new fi(this,e,r,n)};Yc.prototype.pointFromJSON=function(e,r){return fi.fromJSON(this,e,r)};fi.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,s=function(i){return n.point(i.x.redMul(n.endo.beta),i.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return r}};fi.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};fi.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var s=e.point(r[0],r[1],n);if(!r[2])return s;function i(a){return e.point(a[0],a[1],n)}var o=r[2];return s.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[s].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[s].concat(o.naf.points.map(i))}},s};fi.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};fi.prototype.isInfinity=function(){return this.inf};fi.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),s=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,s)};fi.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),s=e.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(s),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};fi.prototype.getX=function(){return this.x.fromRed()};fi.prototype.getY=function(){return this.y.fromRed()};fi.prototype.mul=function(e){return e=new Ft(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};fi.prototype.mulAdd=function(e,r,n){var s=[this,r],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(s,i):this.curve._wnafMulAdd(1,s,i,2)};fi.prototype.jmulAdd=function(e,r,n){var s=[this,r],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(s,i,!0):this.curve._wnafMulAdd(1,s,i,2,!0)};fi.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};fi.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,s=function(i){return i.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(s)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(s)}}}return r};fi.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Li(t,e,r,n){sg.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Ft(0)):(this.x=new Ft(e,16),this.y=new Ft(r,16),this.z=new Ft(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}sB(Li,sg.BasePoint);Yc.prototype.jpoint=function(e,r,n){return new Li(this,e,r,n)};Li.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),s=this.y.redMul(r).redMul(e);return this.curve.point(n,s)};Li.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Li.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),s=this.x.redMul(r),i=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=s.redSub(i),u=o.redSub(a);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=c.redSqr(),d=l.redMul(c),f=s.redMul(l),p=u.redSqr().redIAdd(d).redISub(f).redISub(f),g=u.redMul(f.redISub(p)).redISub(o.redMul(d)),h=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(p,g,h)};Li.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,s=e.x.redMul(r),i=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(s),c=i.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),l=u.redMul(a),d=n.redMul(u),f=c.redSqr().redIAdd(l).redISub(d).redISub(d),p=c.redMul(d.redISub(f)).redISub(i.redMul(l)),g=this.z.redMul(a);return this.curve.jpoint(f,p,g)};Li.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var s=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,c=this.z,u=c.redSqr().redSqr(),l=a.redAdd(a);for(r=0;r<e;r++){var d=o.redSqr(),f=l.redSqr(),p=f.redSqr(),g=d.redAdd(d).redIAdd(d).redIAdd(s.redMul(u)),h=o.redMul(f),y=g.redSqr().redISub(h.redAdd(h)),E=h.redISub(y),S=g.redMul(E);S=S.redIAdd(S).redISub(p);var C=l.redMul(c);r+1<e&&(u=u.redMul(p)),o=y,c=C,l=S}return this.curve.jpoint(o,l.redMul(i),c)};Li.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Li.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var s=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(s).redISub(o);a=a.redIAdd(a);var c=s.redAdd(s).redIAdd(s),u=c.redSqr().redISub(a).redISub(a),l=o.redIAdd(o);l=l.redIAdd(l),l=l.redIAdd(l),e=u,r=c.redMul(a.redISub(u)).redISub(l),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),f=this.y.redSqr(),p=f.redSqr(),g=this.x.redAdd(f).redSqr().redISub(d).redISub(p);g=g.redIAdd(g);var h=d.redAdd(d).redIAdd(d),y=h.redSqr(),E=p.redIAdd(p);E=E.redIAdd(E),E=E.redIAdd(E),e=y.redISub(g).redISub(g),r=h.redMul(g.redISub(e)).redISub(E),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Li.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var s=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(s).redISub(o);a=a.redIAdd(a);var c=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),u=c.redSqr().redISub(a).redISub(a);e=u;var l=o.redIAdd(o);l=l.redIAdd(l),l=l.redIAdd(l),r=c.redMul(a.redISub(u)).redISub(l),n=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),f=this.y.redSqr(),p=this.x.redMul(f),g=this.x.redSub(d).redMul(this.x.redAdd(d));g=g.redAdd(g).redIAdd(g);var h=p.redIAdd(p);h=h.redIAdd(h);var y=h.redAdd(h);e=g.redSqr().redISub(y),n=this.y.redAdd(this.z).redSqr().redISub(f).redISub(d);var E=f.redSqr();E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E),r=g.redMul(h.redISub(e)).redISub(E)}return this.curve.jpoint(e,r,n)};Li.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,s=this.z,i=s.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),u=r.redAdd(r);u=u.redIAdd(u);var l=u.redMul(a),d=c.redSqr().redISub(l.redAdd(l)),f=l.redISub(d),p=a.redSqr();p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var g=c.redMul(f).redISub(p),h=n.redAdd(n).redMul(s);return this.curve.jpoint(d,g,h)};Li.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),s=r.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(s);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),u=s.redIAdd(s);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var l=i.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(u),d=r.redMul(l);d=d.redIAdd(d),d=d.redIAdd(d);var f=this.x.redMul(c).redISub(d);f=f.redIAdd(f),f=f.redIAdd(f);var p=this.y.redMul(l.redMul(u.redISub(l)).redISub(a.redMul(c)));p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var g=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(f,p,g)};Li.prototype.mul=function(e,r){return e=new Ft(e,r),this.curve._wnafMul(this,e)};Li.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var s=r.redMul(this.z),i=n.redMul(e.z);return this.y.redMul(i).redISub(e.y.redMul(s)).cmpn(0)===0};Li.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var s=e.clone(),i=this.curve.redN.redMul(r);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),this.x.cmp(n)===0)return!0}};Li.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Li.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var OI=rb(function(t,e){var r=e;r.base=sg,r.short=Pke,r.mont=null,r.edwards=null}),kI=rb(function(t,e){var r=e,n=hc.assert;function s(a){a.type==="short"?this.curve=new OI.short(a):a.type==="edwards"?this.curve=new OI.edwards(a):this.curve=new OI.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=s;function i(a,c){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var u=new s(c);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:u}),u}})}i("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:ua.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),i("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:ua.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),i("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:ua.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),i("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:ua.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),i("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:ua.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),i("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ua.sha256,gRed:!1,g:["9"]}),i("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ua.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}i("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:ua.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function kh(t){if(!(this instanceof kh))return new kh(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ou.toArray(t.entropy,t.entropyEnc||"hex"),r=Ou.toArray(t.nonce,t.nonceEnc||"hex"),n=Ou.toArray(t.pers,t.persEnc||"hex");nB(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var Ine=kh;kh.prototype._init=function(e,r,n){var s=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656};kh.prototype._hmac=function(){return new ua.hmac(this.hash,this.K)};kh.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};kh.prototype.reseed=function(e,r,n,s){typeof r!="string"&&(s=n,n=r,r=null),e=Ou.toArray(e,r),n=Ou.toArray(n,s),nB(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};kh.prototype.generate=function(e,r,n,s){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(s=n,n=r,r=null),n&&(n=Ou.toArray(n,s||"hex"),this._update(n));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(n),this._reseed++,Ou.encode(o,r)};var RO=hc.assert;function mo(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var iB=mo;mo.fromPublic=function(e,r,n){return r instanceof mo?r:new mo(e,{pub:r,pubEnc:n})};mo.fromPrivate=function(e,r,n){return r instanceof mo?r:new mo(e,{priv:r,privEnc:n})};mo.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};mo.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};mo.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};mo.prototype._importPrivate=function(e,r){this.priv=new Ft(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};mo.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?RO(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&RO(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};mo.prototype.derive=function(e){return e.validate()||RO(e.validate(),"public point not validated"),e.mul(this.priv).getX()};mo.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};mo.prototype.verify=function(e,r,n){return this.ec.verify(e,r,this,void 0,n)};mo.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Rke=hc.assert;function m5(t,e){if(t instanceof m5)return t;this._importDER(t,e)||(Rke(t.r&&t.s,"Signature without r or s"),this.r=new Ft(t.r,16),this.s=new Ft(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var y5=m5;function Oke(){this.place=0}function TP(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4||t[e.place]===0)return!1;for(var s=0,i=0,o=e.place;i<n;i++,o++)s<<=8,s|=t[o],s>>>=0;return s<=127?!1:(e.place=o,s)}function zL(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}m5.prototype._importDER=function(e,r){e=hc.toArray(e,r);var n=new Oke;if(e[n.place++]!==48)return!1;var s=TP(e,n);if(s===!1||s+n.place!==e.length||e[n.place++]!==2)return!1;var i=TP(e,n);if(i===!1||(e[n.place]&128)!==0)return!1;var o=e.slice(n.place,i+n.place);if(n.place+=i,e[n.place++]!==2)return!1;var a=TP(e,n);if(a===!1||e.length!==a+n.place||(e[n.place]&128)!==0)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Ft(o),this.s=new Ft(c),this.recoveryParam=null,!0};function NP(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}m5.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=zL(r),n=zL(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var s=[2];NP(s,r.length),s=s.concat(r),s.push(2),NP(s,n.length);var i=s.concat(n),o=[48];return NP(o,i.length),o=o.concat(i),hc.encode(o,e)};var kke=(function(){throw new Error("unsupported")}),Zp=hc.assert;function Wc(t){if(!(this instanceof Wc))return new Wc(t);typeof t=="string"&&(Zp(Object.prototype.hasOwnProperty.call(kI,t),"Unknown curve "+t),t=kI[t]),t instanceof kI.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var Bke=Wc;Wc.prototype.keyPair=function(e){return new iB(this,e)};Wc.prototype.keyFromPrivate=function(e,r){return iB.fromPrivate(this,e,r)};Wc.prototype.keyFromPublic=function(e,r){return iB.fromPublic(this,e,r)};Wc.prototype.genKeyPair=function(e){e||(e={});for(var r=new Ine({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||kke(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),s=this.n.sub(new Ft(2));;){var i=new Ft(r.generate(n));if(!(i.cmp(s)>0))return i.iaddn(1),this.keyFromPrivate(i)}};Wc.prototype._truncateToN=function(e,r,n){var s;if(Ft.isBN(e)||typeof e=="number")e=new Ft(e,16),s=e.byteLength();else if(typeof e=="object")s=e.length,e=new Ft(e,16);else{var i=e.toString();s=i.length+1>>>1,e=new Ft(i,16)}typeof n!="number"&&(n=s*8);var o=n-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Wc.prototype.sign=function(e,r,n,s){if(typeof n=="object"&&(s=n,n=null),s||(s={}),typeof e!="string"&&typeof e!="number"&&!Ft.isBN(e)){Zp(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),Zp(e.length>>>0===e.length);for(var i=0;i<e.length;i++)Zp((e[i]&255)===e[i])}r=this.keyFromPrivate(r,n),e=this._truncateToN(e,!1,s.msgBitLength),Zp(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),a=r.getPrivate().toArray("be",o),c=e.toArray("be",o);Zp(new Ft(c).eq(e),"Can not sign message");for(var u=new Ine({hash:this.hash,entropy:a,nonce:c,pers:s.pers,persEnc:s.persEnc||"utf8"}),l=this.n.sub(new Ft(1)),d=0;;d++){var f=s.k?s.k(d):new Ft(u.generate(this.n.byteLength()));if(f=this._truncateToN(f,!0),!(f.cmpn(1)<=0||f.cmp(l)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var g=p.getX(),h=g.umod(this.n);if(h.cmpn(0)!==0){var y=f.invm(this.n).mul(h.mul(r.getPrivate()).iadd(e));if(y=y.umod(this.n),y.cmpn(0)!==0){var E=(p.getY().isOdd()?1:0)|(g.cmp(h)!==0?2:0);return s.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),E^=1),new y5({r:h,s:y,recoveryParam:E})}}}}}};Wc.prototype.verify=function(e,r,n,s,i){i||(i={}),e=this._truncateToN(e,!1,i.msgBitLength),n=this.keyFromPublic(n,s),r=new y5(r,"hex");var o=r.r,a=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var c=a.invm(this.n),u=c.mul(e).umod(this.n),l=c.mul(o).umod(this.n),d;return this.curve._maxwellTrick?(d=this.g.jmulAdd(u,n.getPublic(),l),d.isInfinity()?!1:d.eqXToP(o)):(d=this.g.mulAdd(u,n.getPublic(),l),d.isInfinity()?!1:d.getX().umod(this.n).cmp(o)===0)};Wc.prototype.recoverPubKey=function(t,e,r,n){Zp((3&r)===r,"The recovery param is more than two bits"),e=new y5(e,n);var s=this.n,i=new Ft(t),o=e.r,a=e.s,c=r&1,u=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var l=e.r.invm(s),d=s.sub(i).mul(l).umod(s),f=a.mul(l).umod(s);return this.g.mulAdd(d,o,f)};Wc.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new y5(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var i;try{i=this.recoverPubKey(t,e,s)}catch{continue}if(i.eq(r))return s}throw new Error("Unable to find valid recovery factor")};var Uke=rb(function(t,e){var r=e;r.version="6.6.1",r.utils=hc,r.rand=(function(){throw new Error("unsupported")}),r.curve=OI,r.curves=kI,r.ec=Bke,r.eddsa=null}),Mke=Uke.ec;const Dke="signing-key/5.8.0",OO=new ue(Dke);let PP=null;function ml(){return PP||(PP=new Mke("secp256k1")),PP}class _0{constructor(e){xe(this,"curve","secp256k1"),xe(this,"privateKey",je(e)),Ll(this.privateKey)!==32&&OO.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=ml().keyFromPrivate(Oe(this.privateKey));xe(this,"publicKey","0x"+r.getPublic(!1,"hex")),xe(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),xe(this,"_isSigningKey",!0)}_addPoint(e){const r=ml().keyFromPublic(Oe(this.publicKey)),n=ml().keyFromPublic(Oe(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=ml().keyFromPrivate(Oe(this.privateKey)),n=Oe(e);n.length!==32&&OO.throwArgumentError("bad digest length","digest",e);const s=r.sign(n,{canonical:!0});return ng({recoveryParam:s.recoveryParam,r:Nn("0x"+s.r.toString(16),32),s:Nn("0x"+s.s.toString(16),32)})}computeSharedSecret(e){const r=ml().keyFromPrivate(Oe(this.privateKey)),n=ml().keyFromPublic(Oe(oB(e)));return Nn("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function Tne(t,e){const r=ng(e),n={r:Oe(r.r),s:Oe(r.s)};return"0x"+ml().recoverPubKey(Oe(t),n,r.recoveryParam).encode("hex",!1)}function oB(t,e){const r=Oe(t);if(r.length===32){const n=new _0(r);return e?"0x"+ml().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?je(r):"0x"+ml().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+ml().keyFromPublic(r).getPublic(!0,"hex"):je(r)}return OO.throwArgumentError("invalid public or private key","key","[REDACTED]")}const jke=Object.freeze(Object.defineProperty({__proto__:null,SigningKey:_0,computePublicKey:oB,recoverPublicKey:Tne},Symbol.toStringTag,{value:"Module"})),Lke="transactions/5.8.0",fo=new ue(Lke);var kO;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(kO||(kO={}));function aB(t){return t==="0x"?null:sn(t)}function uo(t){return t==="0x"?rne:Ue.from(t)}const Fke=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],$ke={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Ah(t){const e=oB(t);return sn(As(En(As(e,1)),12))}function n_(t,e){return Ah(Tne(Oe(t),e))}function ec(t,e){const r=Rl(Ue.from(t).toHexString());return r.length>32&&fo.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function RP(t,e){return{address:sn(t),storageKeys:(e||[]).map((r,n)=>(Ll(r)!==32&&fo.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function ig(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&fo.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),RP(r[0],r[1])):RP(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((s,i)=>(s[i]=!0,s),{});return RP(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function Nne(t){return ig(t).map(e=>[e.address,e.storageKeys])}function Pne(t,e){if(t.gasPrice!=null){const n=Ue.from(t.gasPrice),s=Ue.from(t.maxFeePerGas||0);n.eq(s)||fo.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:s})}const r=[ec(t.chainId||0,"chainId"),ec(t.nonce||0,"nonce"),ec(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ec(t.maxFeePerGas||0,"maxFeePerGas"),ec(t.gasLimit||0,"gasLimit"),t.to!=null?sn(t.to):"0x",ec(t.value||0,"value"),t.data||"0x",Nne(t.accessList||[])];if(e){const n=ng(e);r.push(ec(n.recoveryParam,"recoveryParam")),r.push(Rl(n.r)),r.push(Rl(n.s))}return Ro(["0x02",U0(r)])}function Rne(t,e){const r=[ec(t.chainId||0,"chainId"),ec(t.nonce||0,"nonce"),ec(t.gasPrice||0,"gasPrice"),ec(t.gasLimit||0,"gasLimit"),t.to!=null?sn(t.to):"0x",ec(t.value||0,"value"),t.data||"0x",Nne(t.accessList||[])];if(e){const n=ng(e);r.push(ec(n.recoveryParam,"recoveryParam")),r.push(Rl(n.r)),r.push(Rl(n.s))}return Ro(["0x01",U0(r)])}function qke(t,e){Vk(t,$ke);const r=[];Fke.forEach(function(o){let a=t[o.name]||[];const c={};o.numeric&&(c.hexPad="left"),a=Oe(je(a,c)),o.length&&a.length!==o.length&&a.length>0&&fo.throwArgumentError("invalid length for "+o.name,"transaction:"+o.name,a),o.maxLength&&(a=Rl(a),a.length>o.maxLength&&fo.throwArgumentError("invalid length for "+o.name,"transaction:"+o.name,a)),r.push(je(a))});let n=0;if(t.chainId!=null?(n=t.chainId,typeof n!="number"&&fo.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!XE(e)&&e.v>28&&(n=Math.floor((e.v-35)/2)),n!==0&&(r.push(je(n)),r.push("0x"),r.push("0x")),!e)return U0(r);const s=ng(e);let i=27+s.recoveryParam;return n!==0?(r.pop(),r.pop(),r.pop(),i+=n*2+8,s.v>28&&s.v!==i&&fo.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):s.v!==i&&fo.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),r.push(je(i)),r.push(Rl(Oe(s.r))),r.push(Rl(Oe(s.s))),U0(r)}function BO(t,e){if(t.type==null||t.type===0)return t.accessList!=null&&fo.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),qke(t,e);switch(t.type){case 1:return Rne(t,e);case 2:return Pne(t,e)}return fo.throwError(`unsupported transaction type: ${t.type}`,ue.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}function One(t,e,r){try{const n=uo(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");t.v=n}catch{fo.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=Nn(e[1],32),t.s=Nn(e[2],32);try{const n=En(r(t));t.from=n_(n,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function Hke(t){const e=h5(t.slice(1));e.length!==9&&e.length!==12&&fo.throwArgumentError("invalid component count for transaction type: 2","payload",je(t));const r=uo(e[2]),n=uo(e[3]),s={type:2,chainId:uo(e[0]).toNumber(),nonce:uo(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:uo(e[4]),to:aB(e[5]),value:uo(e[6]),data:e[7],accessList:ig(e[8])};return e.length===9||(s.hash=En(t),One(s,e.slice(9),Pne)),s}function zke(t){const e=h5(t.slice(1));e.length!==8&&e.length!==11&&fo.throwArgumentError("invalid component count for transaction type: 1","payload",je(t));const r={type:1,chainId:uo(e[0]).toNumber(),nonce:uo(e[1]).toNumber(),gasPrice:uo(e[2]),gasLimit:uo(e[3]),to:aB(e[4]),value:uo(e[5]),data:e[6],accessList:ig(e[7])};return e.length===8||(r.hash=En(t),One(r,e.slice(8),Rne)),r}function Wke(t){const e=h5(t);e.length!==9&&e.length!==6&&fo.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:uo(e[0]).toNumber(),gasPrice:uo(e[1]),gasLimit:uo(e[2]),to:aB(e[3]),value:uo(e[4]),data:e[5],chainId:0};if(e.length===6)return r;try{r.v=Ue.from(e[6]).toNumber()}catch{return r}if(r.r=Nn(e[7],32),r.s=Nn(e[8],32),Ue.from(r.r).isZero()&&Ue.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const s=e.slice(0,6);r.chainId!==0&&(s.push(je(r.chainId)),s.push("0x"),s.push("0x"),n-=r.chainId*2+8);const i=En(U0(s));try{r.from=n_(i,{r:je(r.r),s:je(r.s),recoveryParam:n})}catch{}r.hash=En(t)}return r.type=null,r}function kne(t){const e=Oe(t);if(e[0]>127)return Wke(e);switch(e[0]){case 1:return zke(e);case 2:return Hke(e)}return fo.throwError(`unsupported transaction type: ${e[0]}`,ue.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const Vke=Object.freeze(Object.defineProperty({__proto__:null,get TransactionTypes(){return kO},accessListify:ig,computeAddress:Ah,parse:kne,recoverAddress:n_,serialize:BO},Symbol.toStringTag,{value:"Module"})),Gke="contracts/5.8.0";var M0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const vs=new ue(Gke);function sT(t,e){return M0(this,void 0,void 0,function*(){const r=yield e;typeof r!="string"&&vs.throwArgumentError("invalid address or ENS name","name",r);try{return sn(r)}catch{}t||vs.throwError("a provider or signer is needed to resolve ENS names",ue.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return n==null&&vs.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function BI(t,e,r){return M0(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((n,s)=>BI(t,Array.isArray(e)?e[s]:e[n.name],n))):r.type==="address"?yield sT(t,e):r.type==="tuple"?yield BI(t,e,r.components):r.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>BI(t,n,r.arrayChildren))):Promise.reject(vs.makeError("invalid value for array",ue.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function b5(t,e,r){return M0(this,void 0,void 0,function*(){let n={};r.length===e.inputs.length+1&&typeof r[r.length-1]=="object"&&(n=Ds(r.pop())),vs.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=ps({override:sT(t.signer,n.from),signer:t.signer.getAddress()}).then(u=>M0(this,void 0,void 0,function*(){return sn(u.signer)!==u.override&&vs.throwError("Contract with a Signer cannot override from",ue.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),u.override})):n.from=t.signer.getAddress():n.from&&(n.from=sT(t.provider,n.from));const s=yield ps({args:BI(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:ps(n)||{}}),i=t.interface.encodeFunctionData(e,s.args),o={data:i,to:s.address},a=s.overrides;if(a.nonce!=null&&(o.nonce=Ue.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=Ue.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=Ue.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=Ue.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=Ue.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=ig(a.accessList)),o.gasLimit==null&&e.gas!=null){let u=21e3;const l=Oe(i);for(let d=0;d<l.length;d++)u+=4,l[d]&&(u+=64);o.gasLimit=Ue.from(e.gas).add(u)}if(a.value){const u=Ue.from(a.value);!u.isZero()&&!e.payable&&vs.throwError("non-payable method cannot override value",ue.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),o.value=u}a.customData&&(o.customData=Ds(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const c=Object.keys(n).filter(u=>n[u]!=null);return c.length&&vs.throwError(`cannot override ${c.map(u=>JSON.stringify(u)).join(",")}`,ue.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:c}),o})}function Kke(t,e){return function(...r){return b5(t,e,r)}}function Zke(t,e){const r=t.signer||t.provider;return function(...n){return M0(this,void 0,void 0,function*(){r||vs.throwError("estimate require a provider or signer",ue.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const s=yield b5(t,e,n);return yield r.estimateGas(s)})}}function Yke(t,e){const r=e.wait.bind(e);e.wait=n=>r(n).then(s=>(s.events=s.logs.map(i=>{let o=Fl(i),a=null;try{a=t.interface.parseLog(i)}catch{}return a&&(o.args=a.args,o.decode=(c,u)=>t.interface.decodeEventLog(a.eventFragment,c,u),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>t.provider,o.getBlock=()=>t.provider.getBlock(s.blockHash),o.getTransaction=()=>t.provider.getTransaction(s.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(s),o}),s))}function Bne(t,e,r){const n=t.signer||t.provider;return function(...s){return M0(this,void 0,void 0,function*(){let i;if(s.length===e.inputs.length+1&&typeof s[s.length-1]=="object"){const c=Ds(s.pop());c.blockTag!=null&&(i=yield c.blockTag),delete c.blockTag,s.push(c)}t.deployTransaction!=null&&(yield t._deployed(i));const o=yield b5(t,e,s),a=yield n.call(o,i);try{let c=t.interface.decodeFunctionResult(e,a);return r&&e.outputs.length===1&&(c=c[0]),c}catch(c){throw c.code===ue.errors.CALL_EXCEPTION&&(c.address=t.address,c.args=s,c.transaction=o),c}})}}function Jke(t,e){return function(...r){return M0(this,void 0,void 0,function*(){t.signer||vs.throwError("sending a transaction requires a signer",ue.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const n=yield b5(t,e,r),s=yield t.signer.sendTransaction(n);return Yke(t,s),s})}}function WL(t,e,r){return e.constant?Bne(t,e,r):Jke(t,e)}function Une(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class nE{constructor(e,r){xe(this,"tag",e),xe(this,"filter",r),this._listeners=[]}addListener(e,r){this._listeners.push({listener:e,once:r})}removeListener(e){let r=!1;this._listeners=this._listeners.filter(n=>r||n.listener!==e?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const r=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const s=e.slice();return setTimeout(()=>{n.listener.apply(this,s)},0),!n.once}),r}prepareEvent(e){}getEmit(e){return[e]}}class Xke extends nE{constructor(){super("error",null)}}class VL extends nE{constructor(e,r,n,s){const i={address:e};let o=r.getEventTopic(n);s?(o!==s[0]&&vs.throwArgumentError("topic mismatch","topics",s),i.topics=s.slice()):i.topics=[o],super(Une(i),i),xe(this,"address",e),xe(this,"interface",r),xe(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(r,n)=>this.interface.decodeEventLog(this.fragment,r,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(r){e.args=null,e.decodeError=r}}getEmit(e){const r=Zre(e.args);if(r.length)throw r[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class GL extends nE{constructor(e,r){super("*",{address:e}),xe(this,"address",e),xe(this,"interface",r)}prepareEvent(e){super.prepareEvent(e);try{const r=this.interface.parseLog(e);e.event=r.name,e.eventSignature=r.signature,e.decode=(n,s)=>this.interface.decodeEventLog(r.eventFragment,n,s),e.args=r.args}catch{}}}class Qke{constructor(e,r,n){xe(this,"interface",Ru(new.target,"getInterface")(r)),n==null?(xe(this,"provider",null),xe(this,"signer",null)):tb.isSigner(n)?(xe(this,"provider",n.provider||null),xe(this,"signer",n)):e_.isProvider(n)?(xe(this,"provider",n),xe(this,"signer",null)):vs.throwArgumentError("invalid signer or provider","signerOrProvider",n),xe(this,"callStatic",{}),xe(this,"estimateGas",{}),xe(this,"functions",{}),xe(this,"populateTransaction",{}),xe(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const c=this.interface.events[a];xe(this.filters,a,(...u)=>({address:this.address,topics:this.interface.encodeFilterTopics(c,u)})),o[c.name]||(o[c.name]=[]),o[c.name].push(a)}),Object.keys(o).forEach(a=>{const c=o[a];c.length===1?xe(this.filters,a,this.filters[c[0]]):vs.warn(`Duplicate definition of ${a} (${c.join(", ")})`)})}if(xe(this,"_runningEvents",{}),xe(this,"_wrappedEmits",{}),e==null&&vs.throwArgumentError("invalid contract address or ENS name","addressOrName",e),xe(this,"address",e),this.provider)xe(this,"resolvedAddress",sT(this.provider,e));else try{xe(this,"resolvedAddress",Promise.resolve(sn(e)))}catch{vs.throwError("provider is required to use ENS name as contract address",ue.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const s={},i={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(i[o]){vs.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}i[o]=!0;{const c=a.name;s[`%${c}`]||(s[`%${c}`]=[]),s[`%${c}`].push(o)}this[o]==null&&xe(this,o,WL(this,a,!0)),this.functions[o]==null&&xe(this.functions,o,WL(this,a,!1)),this.callStatic[o]==null&&xe(this.callStatic,o,Bne(this,a,!0)),this.populateTransaction[o]==null&&xe(this.populateTransaction,o,Kke(this,a)),this.estimateGas[o]==null&&xe(this.estimateGas,o,Zke(this,a))}),Object.keys(s).forEach(o=>{const a=s[o];if(a.length>1)return;o=o.substring(1);const c=a[0];try{this[o]==null&&xe(this,o,this[c])}catch{}this.functions[o]==null&&xe(this.functions,o,this.functions[c]),this.callStatic[o]==null&&xe(this.callStatic,o,this.callStatic[c]),this.populateTransaction[o]==null&&xe(this.populateTransaction,o,this.populateTransaction[c]),this.estimateGas[o]==null&&xe(this.estimateGas,o,this.estimateGas[c])})}static getContractAddress(e){return Zk(e)}static getInterface(e){return PO.isInterface(e)?e:new PO(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(r=>(r==="0x"&&vs.throwError("contract not deployed",ue.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||vs.throwError("sending a transactions require a signer",ue.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=Ds(e||{});return["from","to"].forEach(function(n){r[n]!=null&&vs.throwError("cannot override "+n,ue.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(e){typeof e=="string"&&(e=new rB(e,this.provider));const r=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&xe(r,"deployTransaction",this.deployTransaction),r}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return tT.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new Xke);if(e==="event")return this._normalizeRunningEvent(new nE("event",null));if(e==="*")return this._normalizeRunningEvent(new GL(this.address,this.interface));const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new VL(this.address,this.interface,r))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const s=this.interface.getEvent(n);return this._normalizeRunningEvent(new VL(this.address,this.interface,s,e.topics))}catch{}const r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new nE(Une(r),r))}return this._normalizeRunningEvent(new GL(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const r=this._wrappedEmits[e.tag];r&&e.filter&&(this.provider.off(e.filter,r),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,r,n){const s=Fl(r);return s.removeListener=()=>{n&&(e.removeListener(n),this._checkRunningEvents(e))},s.getBlock=()=>this.provider.getBlock(r.blockHash),s.getTransaction=()=>this.provider.getTransaction(r.transactionHash),s.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),e.prepareEvent(s),s}_addEventListener(e,r,n){if(this.provider||vs.throwError("events require a provider or a signer with a provider",ue.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(r,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const s=i=>{let o=this._wrapEvent(e,i,r);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=s,e.filter!=null&&this.provider.on(e.filter,s)}}queryFilter(e,r,n){const s=this._getRunningEvent(e),i=Ds(s.filter);return typeof r=="string"&&Er(r,32)?(n!=null&&vs.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),i.blockHash=r):(i.fromBlock=r??0,i.toBlock=n??"latest"),this.provider.getLogs(i).then(o=>o.map(a=>this._wrapEvent(s,a,null)))}on(e,r){return this._addEventListener(this._getRunningEvent(e),r,!1),this}once(e,r){return this._addEventListener(this._getRunningEvent(e),r,!0),this}emit(e,...r){if(!this.provider)return!1;const n=this._getRunningEvent(e),s=n.run(r)>0;return this._checkRunningEvents(n),s}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((r,n)=>r+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const r=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(s=>{r.push(s)});return r}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const s=this._runningEvents[n];s.removeAllListeners(),this._checkRunningEvents(s)}return this}const r=this._getRunningEvent(e);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(e,r){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(r),this._checkRunningEvents(n),this}removeListener(e,r){return this.off(e,r)}}class eBe extends Qke{}class cB{constructor(e){xe(this,"alphabet",e),xe(this,"base",e.length),xe(this,"_alphabetMap",{}),xe(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=Oe(e);if(r.length===0)return"";let n=[0];for(let i=0;i<r.length;++i){let o=r[i];for(let a=0;a<n.length;++a)o+=n[a]<<8,n[a]=o%this.base,o=o/this.base|0;for(;o>0;)n.push(o%this.base),o=o/this.base|0}let s="";for(let i=0;r[i]===0&&i<r.length-1;++i)s+=this._leader;for(let i=n.length-1;i>=0;--i)s+=this.alphabet[n[i]];return s}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let s=this._alphabetMap[e[n]];if(s===void 0)throw new Error("Non-base"+this.base+" character");let i=s;for(let o=0;o<r.length;++o)i+=r[o]*this.base,r[o]=i&255,i>>=8;for(;i>0;)r.push(i&255),i>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return Oe(new Uint8Array(r.reverse()))}}const tBe=new cB("abcdefghijklmnopqrstuvwxyz234567"),Ry=new cB("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),rBe=Object.freeze(Object.defineProperty({__proto__:null,Base32:tBe,Base58:Ry,BaseX:cB},Symbol.toStringTag,{value:"Module"}));var Oy;(function(t){t.sha256="sha256",t.sha512="sha512"})(Oy||(Oy={}));const nBe="sha2/5.8.0",sBe=new ue(nBe);function Mne(t){return"0x"+ua.ripemd160().update(Oe(t)).digest("hex")}function of(t){return"0x"+ua.sha256().update(Oe(t)).digest("hex")}function iBe(t){return"0x"+ua.sha512().update(Oe(t)).digest("hex")}function sE(t,e,r){return Oy[t]||sBe.throwError("unsupported algorithm "+t,ue.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+ua.hmac(ua[t],Oe(e)).update(Oe(r)).digest("hex")}const oBe=Object.freeze(Object.defineProperty({__proto__:null,get SupportedAlgorithm(){return Oy},computeHmac:sE,ripemd160:Mne,sha256:of,sha512:iBe},Symbol.toStringTag,{value:"Module"}));function uB(t,e,r,n,s){t=Oe(t),e=Oe(e);let i,o=1;const a=new Uint8Array(n),c=new Uint8Array(e.length+4);c.set(e);let u,l;for(let d=1;d<=o;d++){c[e.length]=d>>24&255,c[e.length+1]=d>>16&255,c[e.length+2]=d>>8&255,c[e.length+3]=d&255;let f=Oe(sE(s,t,c));i||(i=f.length,l=new Uint8Array(i),o=Math.ceil(n/i),u=n-(o-1)*i),l.set(f);for(let h=1;h<r;h++){f=Oe(sE(s,t,f));for(let y=0;y<i;y++)l[y]^=f[y]}const p=(d-1)*i,g=d===o?u:i;a.set(Oe(l).slice(0,g),p)}return je(a)}const aBe="wordlists/5.8.0",cBe=new ue(aBe);class s_{constructor(e){cBe.checkAbstract(new.target,s_),xe(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const r=[];for(let n=0;n<2048;n++){const s=e.getWord(n);if(n!==e.getWordIndex(s))return"0x";r.push(s)}return wh(r.join(`
`)+`
`)}static register(e,r){r||(r=e.locale)}}const uBe="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let z1=null;function KL(t){if(z1==null&&(z1=uBe.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),s_.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw z1=null,new Error("BIP39 Wordlist for en (English) FAILED")}class lBe extends s_{constructor(){super("en")}getWord(e){return KL(this),z1[e]}getWordIndex(e){return KL(this),z1.indexOf(e)}}const Dne=new lBe;s_.register(Dne);const ZL={en:Dne},dBe="hdnode/5.8.0",iE=new ue(dBe),fBe=Ue.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),hBe=ms("Bitcoin seed"),Om=2147483648;function jne(t){return(1<<t)-1<<8-t}function pBe(t){return(1<<t)-1}function R2(t){return Nn(je(t),32)}function YL(t){return Ry.encode(Mn([t,As(of(of(t)),0,4)]))}function lB(t){if(t==null)return ZL.en;if(typeof t=="string"){const e=ZL[t];return e==null&&iE.throwArgumentError("unknown locale","wordlist",t),e}return t}const Mg={},ky="m/44'/60'/0'/0/0";class tc{constructor(e,r,n,s,i,o,a,c){if(e!==Mg)throw new Error("HDNode constructor cannot be called directly");if(r){const u=new _0(r);xe(this,"privateKey",u.privateKey),xe(this,"publicKey",u.compressedPublicKey)}else xe(this,"privateKey",null),xe(this,"publicKey",je(n));xe(this,"parentFingerprint",s),xe(this,"fingerprint",As(Mne(of(this.publicKey)),0,4)),xe(this,"address",Ah(this.publicKey)),xe(this,"chainCode",i),xe(this,"index",o),xe(this,"depth",a),c==null?(xe(this,"mnemonic",null),xe(this,"path",null)):typeof c=="string"?(xe(this,"mnemonic",null),xe(this,"path",c)):(xe(this,"mnemonic",c),xe(this,"path",c.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return YL(Mn([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",je(this.depth),this.parentFingerprint,Nn(je(this.index),4),this.chainCode,this.privateKey!=null?Mn(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new tc(Mg,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let r=this.path;r&&(r+="/"+(e&~Om));const n=new Uint8Array(37);if(e&Om){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(Oe(this.privateKey),1),r&&(r+="'")}else n.set(Oe(this.publicKey));for(let d=24;d>=0;d-=8)n[33+(d>>3)]=e>>24-d&255;const s=Oe(sE(Oy.sha512,this.chainCode,n)),i=s.slice(0,32),o=s.slice(32);let a=null,c=null;this.privateKey?a=R2(Ue.from(i).add(this.privateKey).mod(fBe)):c=new _0(je(i))._addPoint(this.publicKey);let u=r;const l=this.mnemonic;return l&&(u=Object.freeze({phrase:l.phrase,path:r,locale:l.locale||"en"})),new tc(Mg,a,c,this.fingerprint,R2(o),e,this.depth+1,u)}derivePath(e){const r=e.split("/");if(r.length===0||r[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);r[0]==="m"&&r.shift();let n=this;for(let s=0;s<r.length;s++){const i=r[s];if(i.match(/^[0-9]+'$/)){const o=parseInt(i.substring(0,i.length-1));if(o>=Om)throw new Error("invalid path index - "+i);n=n._derive(Om+o)}else if(i.match(/^[0-9]+$/)){const o=parseInt(i);if(o>=Om)throw new Error("invalid path index - "+i);n=n._derive(o)}else throw new Error("invalid path component - "+i)}return n}static _fromSeed(e,r){const n=Oe(e);if(n.length<16||n.length>64)throw new Error("invalid seed");const s=Oe(sE(Oy.sha512,hBe,n));return new tc(Mg,R2(s.slice(0,32)),null,"0x00000000",R2(s.slice(32)),0,0,r)}static fromMnemonic(e,r,n){return n=lB(n),e=v5(w5(e,n),n),tc._fromSeed(Lne(e,r),{phrase:e,path:"m",locale:n.locale})}static fromSeed(e){return tc._fromSeed(e,null)}static fromExtendedKey(e){const r=Ry.decode(e);(r.length!==82||YL(r.slice(0,78))!==e)&&iE.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const n=r[4],s=je(r.slice(5,9)),i=parseInt(je(r.slice(9,13)).substring(2),16),o=je(r.slice(13,45)),a=r.slice(45,78);switch(je(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new tc(Mg,null,je(a),s,o,i,n,null);case"0x0488ade4":case"0x04358394 ":if(a[0]!==0)break;return new tc(Mg,je(a.slice(1)),null,s,o,i,n,null)}return iE.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function Lne(t,e){e||(e="");const r=ms("mnemonic"+e,$l.NFKD);return uB(ms(t,$l.NFKD),r,2048,64,"sha512")}function w5(t,e){e=lB(e),iE.checkNormalize();const r=e.split(t);if(r.length%3!==0)throw new Error("invalid mnemonic");const n=Oe(new Uint8Array(Math.ceil(11*r.length/8)));let s=0;for(let u=0;u<r.length;u++){let l=e.getWordIndex(r[u].normalize("NFKD"));if(l===-1)throw new Error("invalid mnemonic");for(let d=0;d<11;d++)l&1<<10-d&&(n[s>>3]|=1<<7-s%8),s++}const i=32*r.length/3,o=r.length/3,a=jne(o);if((Oe(of(n.slice(0,i/8)))[0]&a)!==(n[n.length-1]&a))throw new Error("invalid checksum");return je(n.slice(0,i/8))}function v5(t,e){if(e=lB(e),t=Oe(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let o=0;o<t.length;o++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[o],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[o]>>8-n,r.push(t[o]&pBe(8-n)),n+=3);const s=t.length/4,i=Oe(of(t))[0]&jne(s);return r[r.length-1]<<=s,r[r.length-1]|=i>>8-s,e.join(r.map(o=>e.getWord(o)))}function gBe(t,e){try{return w5(t,e),!0}catch{}return!1}function mBe(t){return(typeof t!="number"||t<0||t>=Om||t%1)&&iE.throwArgumentError("invalid account index","index",t),`m/44'/60'/${t}'/0/0`}const yBe=Object.freeze(Object.defineProperty({__proto__:null,HDNode:tc,defaultPath:ky,entropyToMnemonic:v5,getAccountPath:mBe,isValidMnemonic:gBe,mnemonicToEntropy:w5,mnemonicToSeed:Lne},Symbol.toStringTag,{value:"Module"})),bBe="random/5.8.0",UO=new ue(bBe);function wBe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const JL=wBe();let UI=JL.crypto||JL.msCrypto;(!UI||!UI.getRandomValues)&&(UO.warn("WARNING: Missing strong random number source"),UI={getRandomValues:function(t){return UO.throwError("no secure random source avaialble",ue.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function Wm(t){(t<=0||t>1024||t%1||t!=t)&&UO.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return UI.getRandomValues(e),Oe(e)}function vBe(t){t=t.slice();for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}const EBe=Object.freeze(Object.defineProperty({__proto__:null,randomBytes:Wm,shuffled:vBe},Symbol.toStringTag,{value:"Module"}));var OP={exports:{}},XL;function _Be(){return XL||(XL=1,(function(t,e){(function(r){function n(N){return parseInt(N)===N}function s(N){if(!n(N.length))return!1;for(var v=0;v<N.length;v++)if(!n(N[v])||N[v]<0||N[v]>255)return!1;return!0}function i(N,v){if(N.buffer&&ArrayBuffer.isView(N)&&N.name==="Uint8Array")return v&&(N.slice?N=N.slice():N=Array.prototype.slice.call(N)),N;if(Array.isArray(N)){if(!s(N))throw new Error("Array contains invalid value: "+N);return new Uint8Array(N)}if(n(N.length)&&s(N))return new Uint8Array(N);throw new Error("unsupported array-like object")}function o(N){return new Uint8Array(N)}function a(N,v,R,$,O){($!=null||O!=null)&&(N.slice?N=N.slice($,O):N=Array.prototype.slice.call(N,$,O)),v.set(N,R)}var c=(function(){function N(R){var $=[],O=0;for(R=encodeURI(R);O<R.length;){var H=R.charCodeAt(O++);H===37?($.push(parseInt(R.substr(O,2),16)),O+=2):$.push(H)}return i($)}function v(R){for(var $=[],O=0;O<R.length;){var H=R[O];H<128?($.push(String.fromCharCode(H)),O++):H>191&&H<224?($.push(String.fromCharCode((H&31)<<6|R[O+1]&63)),O+=2):($.push(String.fromCharCode((H&15)<<12|(R[O+1]&63)<<6|R[O+2]&63)),O+=3)}return $.join("")}return{toBytes:N,fromBytes:v}})(),u=(function(){function N($){for(var O=[],H=0;H<$.length;H+=2)O.push(parseInt($.substr(H,2),16));return O}var v="0123456789abcdef";function R($){for(var O=[],H=0;H<$.length;H++){var W=$[H];O.push(v[(W&240)>>4]+v[W&15])}return O.join("")}return{toBytes:N,fromBytes:R}})(),l={16:10,24:12,32:14},d=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],f=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],p=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],g=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],h=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],y=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],E=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],S=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],C=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],_=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],T=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],P=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],D=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],L=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],I=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function U(N){for(var v=[],R=0;R<N.length;R+=4)v.push(N[R]<<24|N[R+1]<<16|N[R+2]<<8|N[R+3]);return v}var F=function(N){if(!(this instanceof F))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:i(N,!0)}),this._prepare()};F.prototype._prepare=function(){var N=l[this.key.length];if(N==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var v=0;v<=N;v++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var R=(N+1)*4,$=this.key.length/4,O=U(this.key),H,v=0;v<$;v++)H=v>>2,this._Ke[H][v%4]=O[v],this._Kd[N-H][v%4]=O[v];for(var W=0,G=$,K;G<R;){if(K=O[$-1],O[0]^=f[K>>16&255]<<24^f[K>>8&255]<<16^f[K&255]<<8^f[K>>24&255]^d[W]<<24,W+=1,$!=8)for(var v=1;v<$;v++)O[v]^=O[v-1];else{for(var v=1;v<$/2;v++)O[v]^=O[v-1];K=O[$/2-1],O[$/2]^=f[K&255]^f[K>>8&255]<<8^f[K>>16&255]<<16^f[K>>24&255]<<24;for(var v=$/2+1;v<$;v++)O[v]^=O[v-1]}for(var v=0,Q,re;v<$&&G<R;)Q=G>>2,re=G%4,this._Ke[Q][re]=O[v],this._Kd[N-Q][re]=O[v++],G++}for(var Q=1;Q<N;Q++)for(var re=0;re<4;re++)K=this._Kd[Q][re],this._Kd[Q][re]=P[K>>24&255]^D[K>>16&255]^L[K>>8&255]^I[K&255]},F.prototype.encrypt=function(N){if(N.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var v=this._Ke.length-1,R=[0,0,0,0],$=U(N),O=0;O<4;O++)$[O]^=this._Ke[0][O];for(var H=1;H<v;H++){for(var O=0;O<4;O++)R[O]=g[$[O]>>24&255]^h[$[(O+1)%4]>>16&255]^y[$[(O+2)%4]>>8&255]^E[$[(O+3)%4]&255]^this._Ke[H][O];$=R.slice()}for(var W=o(16),G,O=0;O<4;O++)G=this._Ke[v][O],W[4*O]=(f[$[O]>>24&255]^G>>24)&255,W[4*O+1]=(f[$[(O+1)%4]>>16&255]^G>>16)&255,W[4*O+2]=(f[$[(O+2)%4]>>8&255]^G>>8)&255,W[4*O+3]=(f[$[(O+3)%4]&255]^G)&255;return W},F.prototype.decrypt=function(N){if(N.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var v=this._Kd.length-1,R=[0,0,0,0],$=U(N),O=0;O<4;O++)$[O]^=this._Kd[0][O];for(var H=1;H<v;H++){for(var O=0;O<4;O++)R[O]=S[$[O]>>24&255]^C[$[(O+3)%4]>>16&255]^_[$[(O+2)%4]>>8&255]^T[$[(O+1)%4]&255]^this._Kd[H][O];$=R.slice()}for(var W=o(16),G,O=0;O<4;O++)G=this._Kd[v][O],W[4*O]=(p[$[O]>>24&255]^G>>24)&255,W[4*O+1]=(p[$[(O+3)%4]>>16&255]^G>>16)&255,W[4*O+2]=(p[$[(O+2)%4]>>8&255]^G>>8)&255,W[4*O+3]=(p[$[(O+1)%4]&255]^G)&255;return W};var B=function(N){if(!(this instanceof B))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new F(N)};B.prototype.encrypt=function(N){if(N=i(N),N.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var v=o(N.length),R=o(16),$=0;$<N.length;$+=16)a(N,R,0,$,$+16),R=this._aes.encrypt(R),a(R,v,$);return v},B.prototype.decrypt=function(N){if(N=i(N),N.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var v=o(N.length),R=o(16),$=0;$<N.length;$+=16)a(N,R,0,$,$+16),R=this._aes.decrypt(R),a(R,v,$);return v};var A=function(N,v){if(!(this instanceof A))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!v)v=o(16);else if(v.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=i(v,!0),this._aes=new F(N)};A.prototype.encrypt=function(N){if(N=i(N),N.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var v=o(N.length),R=o(16),$=0;$<N.length;$+=16){a(N,R,0,$,$+16);for(var O=0;O<16;O++)R[O]^=this._lastCipherblock[O];this._lastCipherblock=this._aes.encrypt(R),a(this._lastCipherblock,v,$)}return v},A.prototype.decrypt=function(N){if(N=i(N),N.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var v=o(N.length),R=o(16),$=0;$<N.length;$+=16){a(N,R,0,$,$+16),R=this._aes.decrypt(R);for(var O=0;O<16;O++)v[$+O]=R[O]^this._lastCipherblock[O];a(N,this._lastCipherblock,0,$,$+16)}return v};var m=function(N,v,R){if(!(this instanceof m))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!v)v=o(16);else if(v.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");R||(R=1),this.segmentSize=R,this._shiftRegister=i(v,!0),this._aes=new F(N)};m.prototype.encrypt=function(N){if(N.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var v=i(N,!0),R,$=0;$<v.length;$+=this.segmentSize){R=this._aes.encrypt(this._shiftRegister);for(var O=0;O<this.segmentSize;O++)v[$+O]^=R[O];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(v,this._shiftRegister,16-this.segmentSize,$,$+this.segmentSize)}return v},m.prototype.decrypt=function(N){if(N.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var v=i(N,!0),R,$=0;$<v.length;$+=this.segmentSize){R=this._aes.encrypt(this._shiftRegister);for(var O=0;O<this.segmentSize;O++)v[$+O]^=R[O];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(N,this._shiftRegister,16-this.segmentSize,$,$+this.segmentSize)}return v};var b=function(N,v){if(!(this instanceof b))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!v)v=o(16);else if(v.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=i(v,!0),this._lastPrecipherIndex=16,this._aes=new F(N)};b.prototype.encrypt=function(N){for(var v=i(N,!0),R=0;R<v.length;R++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),v[R]^=this._lastPrecipher[this._lastPrecipherIndex++];return v},b.prototype.decrypt=b.prototype.encrypt;var w=function(N){if(!(this instanceof w))throw Error("Counter must be instanitated with `new`");N!==0&&!N&&(N=1),typeof N=="number"?(this._counter=o(16),this.setValue(N)):this.setBytes(N)};w.prototype.setValue=function(N){if(typeof N!="number"||parseInt(N)!=N)throw new Error("invalid counter value (must be an integer)");for(var v=15;v>=0;--v)this._counter[v]=N%256,N=N>>8},w.prototype.setBytes=function(N){if(N=i(N,!0),N.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=N},w.prototype.increment=function(){for(var N=15;N>=0;N--)if(this._counter[N]===255)this._counter[N]=0;else{this._counter[N]++;break}};var x=function(N,v){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",v instanceof w||(v=new w(v)),this._counter=v,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new F(N)};x.prototype.encrypt=function(N){for(var v=i(N,!0),R=0;R<v.length;R++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),v[R]^=this._remainingCounter[this._remainingCounterIndex++];return v},x.prototype.decrypt=x.prototype.encrypt;function M(N){N=i(N,!0);var v=16-N.length%16,R=o(N.length+v);a(N,R);for(var $=N.length;$<R.length;$++)R[$]=v;return R}function k(N){if(N=i(N,!0),N.length<16)throw new Error("PKCS#7 invalid length");var v=N[N.length-1];if(v>16)throw new Error("PKCS#7 padding byte out of range");for(var R=N.length-v,$=0;$<v;$++)if(N[R+$]!==v)throw new Error("PKCS#7 invalid padding byte");var O=o(R);return a(N,O,0,0,R),O}var j={AES:F,Counter:w,ModeOfOperation:{ecb:B,cbc:A,cfb:m,ofb:b,ctr:x},utils:{hex:u,utf8:c},padding:{pkcs7:{pad:M,strip:k}},_arrayTest:{coerceArray:i,createArray:o,copyArray:a}};t.exports=j})()})(OP)),OP.exports}var ABe=_Be();const xl=xa(ABe),Fne="json-wallets/5.8.0";function A0(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Oe(t)}function Zb(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function dB(t){return typeof t=="string"?ms(t,$l.NFKC):Oe(t)}function Es(t,e){let r=t;const n=e.toLowerCase().split("/");for(let s=0;s<n.length;s++){let i=null;for(const o in r)if(o.toLowerCase()===n[s]){i=r[o];break}if(i===null)return null;r=i}return r}function xBe(t){const e=Oe(t);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const r=je(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const CBe=new ue(Fne);class SBe extends Hh{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function fB(t,e){const r=JSON.parse(t);e=dB(e);const n=sn(Es(r,"ethaddr")),s=A0(Es(r,"encseed"));(!s||s.length%16!==0)&&CBe.throwArgumentError("invalid encseed","json",t);const i=Oe(uB(e,e,2e3,32,"sha256")).slice(0,16),o=s.slice(0,16),a=s.slice(16),c=new xl.ModeOfOperation.cbc(i,o),u=xl.padding.pkcs7.strip(Oe(c.decrypt(a)));let l="";for(let p=0;p<u.length;p++)l+=String.fromCharCode(u[p]);const d=ms(l),f=En(d);return new SBe({_isCrowdsaleAccount:!0,address:n,privateKey:f})}function E5(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return e.encseed&&e.ethaddr}function _5(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}function IBe(t){if(E5(t))try{return sn(JSON.parse(t).ethaddr)}catch{return null}if(_5(t))try{return sn(JSON.parse(t).address)}catch{return null}return null}var kP={exports:{}},QL;function TBe(){return QL||(QL=1,(function(t,e){(function(r){function s(h){const y=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let E=1779033703,S=3144134277,C=1013904242,_=2773480762,T=1359893119,P=2600822924,D=528734635,L=1541459225;const I=new Uint32Array(64);function U(x){let M=0,k=x.length;for(;k>=64;){let j=E,N=S,v=C,R=_,$=T,O=P,H=D,W=L,G,K,Q,re,de;for(K=0;K<16;K++)Q=M+K*4,I[K]=(x[Q]&255)<<24|(x[Q+1]&255)<<16|(x[Q+2]&255)<<8|x[Q+3]&255;for(K=16;K<64;K++)G=I[K-2],re=(G>>>17|G<<15)^(G>>>19|G<<13)^G>>>10,G=I[K-15],de=(G>>>7|G<<25)^(G>>>18|G<<14)^G>>>3,I[K]=(re+I[K-7]|0)+(de+I[K-16]|0)|0;for(K=0;K<64;K++)re=((($>>>6|$<<26)^($>>>11|$<<21)^($>>>25|$<<7))+($&O^~$&H)|0)+(W+(y[K]+I[K]|0)|0)|0,de=((j>>>2|j<<30)^(j>>>13|j<<19)^(j>>>22|j<<10))+(j&N^j&v^N&v)|0,W=H,H=O,O=$,$=R+re|0,R=v,v=N,N=j,j=re+de|0;E=E+j|0,S=S+N|0,C=C+v|0,_=_+R|0,T=T+$|0,P=P+O|0,D=D+H|0,L=L+W|0,M+=64,k-=64}}U(h);let F,B=h.length%64,A=h.length/536870912|0,m=h.length<<3,b=B<56?56:120,w=h.slice(h.length-B,h.length);for(w.push(128),F=B+1;F<b;F++)w.push(0);return w.push(A>>>24&255),w.push(A>>>16&255),w.push(A>>>8&255),w.push(A>>>0&255),w.push(m>>>24&255),w.push(m>>>16&255),w.push(m>>>8&255),w.push(m>>>0&255),U(w),[E>>>24&255,E>>>16&255,E>>>8&255,E>>>0&255,S>>>24&255,S>>>16&255,S>>>8&255,S>>>0&255,C>>>24&255,C>>>16&255,C>>>8&255,C>>>0&255,_>>>24&255,_>>>16&255,_>>>8&255,_>>>0&255,T>>>24&255,T>>>16&255,T>>>8&255,T>>>0&255,P>>>24&255,P>>>16&255,P>>>8&255,P>>>0&255,D>>>24&255,D>>>16&255,D>>>8&255,D>>>0&255,L>>>24&255,L>>>16&255,L>>>8&255,L>>>0&255]}function i(h,y,E){h=h.length<=64?h:s(h);const S=64+y.length+4,C=new Array(S),_=new Array(64);let T,P=[];for(T=0;T<64;T++)C[T]=54;for(T=0;T<h.length;T++)C[T]^=h[T];for(T=0;T<y.length;T++)C[64+T]=y[T];for(T=S-4;T<S;T++)C[T]=0;for(T=0;T<64;T++)_[T]=92;for(T=0;T<h.length;T++)_[T]^=h[T];function D(){for(let L=S-1;L>=S-4;L--){if(C[L]++,C[L]<=255)return;C[L]=0}}for(;E>=32;)D(),P=P.concat(s(_.concat(s(C)))),E-=32;return E>0&&(D(),P=P.concat(s(_.concat(s(C))).slice(0,E))),P}function o(h,y,E,S,C){let _;for(l(h,(2*E-1)*16,C,0,16),_=0;_<2*E;_++)u(h,_*16,C,16),c(C,S),l(C,0,h,y+_*16,16);for(_=0;_<E;_++)l(h,y+_*2*16,h,_*16,16);for(_=0;_<E;_++)l(h,y+(_*2+1)*16,h,(_+E)*16,16)}function a(h,y){return h<<y|h>>>32-y}function c(h,y){l(h,0,y,0,16);for(let E=8;E>0;E-=2)y[4]^=a(y[0]+y[12],7),y[8]^=a(y[4]+y[0],9),y[12]^=a(y[8]+y[4],13),y[0]^=a(y[12]+y[8],18),y[9]^=a(y[5]+y[1],7),y[13]^=a(y[9]+y[5],9),y[1]^=a(y[13]+y[9],13),y[5]^=a(y[1]+y[13],18),y[14]^=a(y[10]+y[6],7),y[2]^=a(y[14]+y[10],9),y[6]^=a(y[2]+y[14],13),y[10]^=a(y[6]+y[2],18),y[3]^=a(y[15]+y[11],7),y[7]^=a(y[3]+y[15],9),y[11]^=a(y[7]+y[3],13),y[15]^=a(y[11]+y[7],18),y[1]^=a(y[0]+y[3],7),y[2]^=a(y[1]+y[0],9),y[3]^=a(y[2]+y[1],13),y[0]^=a(y[3]+y[2],18),y[6]^=a(y[5]+y[4],7),y[7]^=a(y[6]+y[5],9),y[4]^=a(y[7]+y[6],13),y[5]^=a(y[4]+y[7],18),y[11]^=a(y[10]+y[9],7),y[8]^=a(y[11]+y[10],9),y[9]^=a(y[8]+y[11],13),y[10]^=a(y[9]+y[8],18),y[12]^=a(y[15]+y[14],7),y[13]^=a(y[12]+y[15],9),y[14]^=a(y[13]+y[12],13),y[15]^=a(y[14]+y[13],18);for(let E=0;E<16;++E)h[E]+=y[E]}function u(h,y,E,S){for(let C=0;C<S;C++)E[C]^=h[y+C]}function l(h,y,E,S,C){for(;C--;)E[S++]=h[y++]}function d(h){if(!h||typeof h.length!="number")return!1;for(let y=0;y<h.length;y++){const E=h[y];if(typeof E!="number"||E%1||E<0||E>=256)return!1}return!0}function f(h,y){if(typeof h!="number"||h%1)throw new Error("invalid "+y);return h}function p(h,y,E,S,C,_,T){if(E=f(E,"N"),S=f(S,"r"),C=f(C,"p"),_=f(_,"dkLen"),E===0||(E&E-1)!==0)throw new Error("N must be power of 2");if(E>2147483647/128/S)throw new Error("N too large");if(S>2147483647/128/C)throw new Error("r too large");if(!d(h))throw new Error("password must be an array or buffer");if(h=Array.prototype.slice.call(h),!d(y))throw new Error("salt must be an array or buffer");y=Array.prototype.slice.call(y);let P=i(h,y,C*128*S);const D=new Uint32Array(C*32*S);for(let $=0;$<D.length;$++){const O=$*4;D[$]=(P[O+3]&255)<<24|(P[O+2]&255)<<16|(P[O+1]&255)<<8|(P[O+0]&255)<<0}const L=new Uint32Array(64*S),I=new Uint32Array(32*S*E),U=32*S,F=new Uint32Array(16),B=new Uint32Array(16),A=C*E*2;let m=0,b=null,w=!1,x=0,M=0,k,j;const N=T?parseInt(1e3/S):4294967295,v=typeof setImmediate<"u"?setImmediate:setTimeout,R=function(){if(w)return T(new Error("cancelled"),m/A);let $;switch(x){case 0:j=M*32*S,l(D,j,L,0,U),x=1,k=0;case 1:$=E-k,$>N&&($=N);for(let H=0;H<$;H++)l(L,0,I,(k+H)*U,U),o(L,U,S,F,B);if(k+=$,m+=$,T){const H=parseInt(1e3*m/A);if(H!==b){if(w=T(null,m/A),w)break;b=H}}if(k<E)break;k=0,x=2;case 2:$=E-k,$>N&&($=N);for(let H=0;H<$;H++){const W=(2*S-1)*16,G=L[W]&E-1;u(I,G*U,L,U),o(L,U,S,F,B)}if(k+=$,m+=$,T){const H=parseInt(1e3*m/A);if(H!==b){if(w=T(null,m/A),w)break;b=H}}if(k<E)break;if(l(L,0,D,j,U),M++,M<C){x=0;break}P=[];for(let H=0;H<D.length;H++)P.push(D[H]>>0&255),P.push(D[H]>>8&255),P.push(D[H]>>16&255),P.push(D[H]>>24&255);const O=i(h,P,_);return T&&T(null,1,O),O}T&&v(R)};if(!T)for(;;){const $=R();if($!=null)return $}R()}const g={scrypt:function(h,y,E,S,C,_,T){return new Promise(function(P,D){let L=0;T&&T(0),p(h,y,E,S,C,_,function(I,U,F){if(I)D(I);else if(F)T&&L!==1&&T(1),P(new Uint8Array(F));else if(T&&U!==L)return L=U,T(U)})})},syncScrypt:function(h,y,E,S,C,_){return new Uint8Array(p(h,y,E,S,C,_))}};t.exports=g})()})(kP)),kP.exports}var NBe=TBe();const hB=xa(NBe);var PBe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const MO=new ue(Fne);function eF(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class RBe extends Hh{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function OBe(t,e,r){if(Es(t,"crypto/cipher")==="aes-128-ctr"){const s=A0(Es(t,"crypto/cipherparams/iv")),i=new xl.Counter(s),o=new xl.ModeOfOperation.ctr(e,i);return Oe(o.decrypt(r))}return null}function $ne(t,e){const r=A0(Es(t,"crypto/ciphertext"));if(je(En(Mn([e.slice(16,32),r]))).substring(2)!==Es(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const s=OBe(t,e.slice(0,16),r);s||MO.throwError("unsupported cipher",ue.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const i=e.slice(32,64),o=Ah(s);if(t.address){let c=t.address.toLowerCase();if(c.substring(0,2)!=="0x"&&(c="0x"+c),sn(c)!==o)throw new Error("address mismatch")}const a={_isKeystoreAccount:!0,address:o,privateKey:je(s)};if(Es(t,"x-ethers/version")==="0.1"){const c=A0(Es(t,"x-ethers/mnemonicCiphertext")),u=A0(Es(t,"x-ethers/mnemonicCounter")),l=new xl.Counter(u),d=new xl.ModeOfOperation.ctr(i,l),f=Es(t,"x-ethers/path")||ky,p=Es(t,"x-ethers/locale")||"en",g=Oe(d.decrypt(c));try{const h=v5(g,p),y=tc.fromMnemonic(h,null,p).derivePath(f);if(y.privateKey!=a.privateKey)throw new Error("mnemonic mismatch");a.mnemonic=y.mnemonic}catch(h){if(h.code!==ue.errors.INVALID_ARGUMENT||h.argument!=="wordlist")throw h}}return new RBe(a)}function qne(t,e,r,n,s){return Oe(uB(t,e,r,n,s))}function kBe(t,e,r,n,s){return Promise.resolve(qne(t,e,r,n,s))}function Hne(t,e,r,n,s){const i=dB(e),o=Es(t,"crypto/kdf");if(o&&typeof o=="string"){const a=function(c,u){return MO.throwArgumentError("invalid key-derivation function parameters",c,u)};if(o.toLowerCase()==="scrypt"){const c=A0(Es(t,"crypto/kdfparams/salt")),u=parseInt(Es(t,"crypto/kdfparams/n")),l=parseInt(Es(t,"crypto/kdfparams/r")),d=parseInt(Es(t,"crypto/kdfparams/p"));(!u||!l||!d)&&a("kdf",o),(u&u-1)!==0&&a("N",u);const f=parseInt(Es(t,"crypto/kdfparams/dklen"));return f!==32&&a("dklen",f),n(i,c,u,l,d,64,s)}else if(o.toLowerCase()==="pbkdf2"){const c=A0(Es(t,"crypto/kdfparams/salt"));let u=null;const l=Es(t,"crypto/kdfparams/prf");l==="hmac-sha256"?u="sha256":l==="hmac-sha512"?u="sha512":a("prf",l);const d=parseInt(Es(t,"crypto/kdfparams/c")),f=parseInt(Es(t,"crypto/kdfparams/dklen"));return f!==32&&a("dklen",f),r(i,c,d,f,u)}}return MO.throwArgumentError("unsupported key-derivation function","kdf",o)}function zne(t,e){const r=JSON.parse(t),n=Hne(r,e,qne,hB.syncScrypt);return $ne(r,n)}function Wne(t,e,r){return PBe(this,void 0,void 0,function*(){const n=JSON.parse(t),s=yield Hne(n,e,kBe,hB.scrypt,r);return $ne(n,s)})}function Vne(t,e,r,n){try{if(sn(t.address)!==Ah(t.privateKey))throw new Error("address/privateKey mismatch");if(eF(t)){const y=t.mnemonic;if(tc.fromMnemonic(y.phrase,null,y.locale).derivePath(y.path||ky).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(y){return Promise.reject(y)}typeof r=="function"&&!n&&(n=r,r={}),r||(r={});const s=Oe(t.privateKey),i=dB(e);let o=null,a=null,c=null;if(eF(t)){const y=t.mnemonic;o=Oe(w5(y.phrase,y.locale||"en")),a=y.path||ky,c=y.locale||"en"}let u=r.client;u||(u="ethers.js");let l=null;r.salt?l=Oe(r.salt):l=Wm(32);let d=null;if(r.iv){if(d=Oe(r.iv),d.length!==16)throw new Error("invalid iv")}else d=Wm(16);let f=null;if(r.uuid){if(f=Oe(r.uuid),f.length!==16)throw new Error("invalid uuid")}else f=Wm(16);let p=1<<17,g=8,h=1;return r.scrypt&&(r.scrypt.N&&(p=r.scrypt.N),r.scrypt.r&&(g=r.scrypt.r),r.scrypt.p&&(h=r.scrypt.p)),hB.scrypt(i,l,p,g,h,64,n).then(y=>{y=Oe(y);const E=y.slice(0,16),S=y.slice(16,32),C=y.slice(32,64),_=new xl.Counter(d),T=new xl.ModeOfOperation.ctr(E,_),P=Oe(T.encrypt(s)),D=En(Mn([S,P])),L={address:t.address.substring(2).toLowerCase(),id:xBe(f),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:je(d).substring(2)},ciphertext:je(P).substring(2),kdf:"scrypt",kdfparams:{salt:je(l).substring(2),n:p,dklen:32,p:h,r:g},mac:D.substring(2)}};if(o){const I=Wm(16),U=new xl.Counter(I),F=new xl.ModeOfOperation.ctr(C,U),B=Oe(F.encrypt(o)),A=new Date,m=A.getUTCFullYear()+"-"+Zb(A.getUTCMonth()+1,2)+"-"+Zb(A.getUTCDate(),2)+"T"+Zb(A.getUTCHours(),2)+"-"+Zb(A.getUTCMinutes(),2)+"-"+Zb(A.getUTCSeconds(),2)+".0Z";L["x-ethers"]={client:u,gethFilename:"UTC--"+m+"--"+L.address,mnemonicCounter:je(I).substring(2),mnemonicCiphertext:je(B).substring(2),path:a,locale:c,version:"0.1"}}return JSON.stringify(L)})}function Gne(t,e,r){if(E5(t)){r&&r(0);const n=fB(t,e);return r&&r(1),Promise.resolve(n)}return _5(t)?Wne(t,e,r):Promise.reject(new Error("invalid JSON wallet"))}function Kne(t,e){if(E5(t))return fB(t,e);if(_5(t))return zne(t,e);throw new Error("invalid JSON wallet")}const BBe=Object.freeze(Object.defineProperty({__proto__:null,decryptCrowdsale:fB,decryptJsonWallet:Gne,decryptJsonWalletSync:Kne,decryptKeystore:Wne,decryptKeystoreSync:zne,encryptKeystore:Vne,getJsonWalletAddress:IBe,isCrowdsaleWallet:E5,isKeystoreWallet:_5},Symbol.toStringTag,{value:"Module"})),UBe="wallet/5.8.0";var tF=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const Dg=new ue(UBe);function MBe(t){return t!=null&&Er(t.privateKey,32)&&t.address!=null}function DBe(t){const e=t.mnemonic;return e&&e.phrase}class Yp extends tb{constructor(e,r){if(super(),MBe(e)){const n=new _0(e.privateKey);if(xe(this,"_signingKey",()=>n),xe(this,"address",Ah(this.publicKey)),this.address!==sn(e.address)&&Dg.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),DBe(e)){const s=e.mnemonic;xe(this,"_mnemonic",()=>({phrase:s.phrase,path:s.path||ky,locale:s.locale||"en"}));const i=this.mnemonic,o=tc.fromMnemonic(i.phrase,null,i.locale).derivePath(i.path);Ah(o.privateKey)!==this.address&&Dg.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else xe(this,"_mnemonic",()=>null)}else{if(_0.isSigningKey(e))e.curve!=="secp256k1"&&Dg.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),xe(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const n=new _0(e);xe(this,"_signingKey",()=>n)}xe(this,"_mnemonic",()=>null),xe(this,"address",Ah(this.publicKey))}r&&!e_.isProvider(r)&&Dg.throwArgumentError("invalid provider","provider",r),xe(this,"provider",r||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Yp(this,e)}signTransaction(e){return ps(e).then(r=>{r.from!=null&&(sn(r.from)!==this.address&&Dg.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete r.from);const n=this._signingKey().signDigest(En(BO(r)));return BO(r,n)})}signMessage(e){return tF(this,void 0,void 0,function*(){return IO(this._signingKey().signDigest(tB(e)))})}_signTypedData(e,r,n){return tF(this,void 0,void 0,function*(){const s=yield Pi.resolveNames(e,r,n,i=>(this.provider==null&&Dg.throwError("cannot resolve ENS names without a provider",ue.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:i}),this.provider.resolveName(i)));return IO(this._signingKey().signDigest(Pi.hash(s.domain,r,s.value)))})}encrypt(e,r,n){if(typeof r=="function"&&!n&&(n=r,r={}),n&&typeof n!="function")throw new Error("invalid callback");return r||(r={}),Vne(this,e,r,n)}static createRandom(e){let r=Wm(16);e||(e={}),e.extraEntropy&&(r=Oe(As(En(Mn([r,e.extraEntropy])),0,16)));const n=v5(r,e.locale);return Yp.fromMnemonic(n,e.path,e.locale)}static fromEncryptedJson(e,r,n){return Gne(e,r,n).then(s=>new Yp(s))}static fromEncryptedJsonSync(e,r){return new Yp(Kne(e,r))}static fromMnemonic(e,r,n){return r||(r=ky),new Yp(tc.fromMnemonic(e,null,n).derivePath(r))}}function jBe(t,e){return n_(tB(t),e)}function LBe(t,e,r,n){return n_(Pi.hash(t,e,r),n)}const FBe=Object.freeze(Object.defineProperty({__proto__:null,Wallet:Yp,verifyMessage:jBe,verifyTypedData:LBe},Symbol.toStringTag,{value:"Module"})),$Be="networks/5.8.0",rF=new ue($Be);function qBe(t){return t&&typeof t.renetwork=="function"}function _u(t){const e=function(r,n){n==null&&(n={});const s=[];if(r.InfuraProvider&&n.infura!=="-")try{s.push(new r.InfuraProvider(t,n.infura))}catch{}if(r.EtherscanProvider&&n.etherscan!=="-")try{s.push(new r.EtherscanProvider(t,n.etherscan))}catch{}if(r.AlchemyProvider&&n.alchemy!=="-")try{s.push(new r.AlchemyProvider(t,n.alchemy))}catch{}if(r.PocketProvider&&n.pocket!=="-"){const i=["goerli","ropsten","rinkeby","sepolia"];try{const o=new r.PocketProvider(t,n.pocket);o.network&&i.indexOf(o.network.name)===-1&&s.push(o)}catch{}}if(r.CloudflareProvider&&n.cloudflare!=="-")try{s.push(new r.CloudflareProvider(t))}catch{}if(r.AnkrProvider&&n.ankr!=="-")try{const i=["ropsten"],o=new r.AnkrProvider(t,n.ankr);o.network&&i.indexOf(o.network.name)===-1&&s.push(o)}catch{}if(r.QuickNodeProvider&&n.quicknode!=="-")try{s.push(new r.QuickNodeProvider(t,n.quicknode))}catch{}if(s.length===0)return null;if(r.FallbackProvider){let i=1;return n.quorum!=null?i=n.quorum:t==="homestead"&&(i=2),new r.FallbackProvider(s,i)}return s[0]};return e.renetwork=function(r){return _u(r)},e}function iT(t,e){const r=function(n,s){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null};return r.renetwork=function(n){return iT(t,n)},r}const nF={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:_u("homestead")},sF={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:_u("ropsten")},iF={chainId:63,name:"classicMordor",_defaultProvider:iT("https://www.ethercluster.com/mordor","classicMordor")},O2={unspecified:{chainId:0,name:"unspecified"},homestead:nF,mainnet:nF,morden:{chainId:2,name:"morden"},ropsten:sF,testnet:sF,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:_u("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:_u("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:_u("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:_u("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:_u("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:iT("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:iF,classicTestnet:iF,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:iT("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:_u("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:_u("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:_u("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function HBe(t){if(t==null)return null;if(typeof t=="number"){for(const n in O2){const s=O2[n];if(s.chainId===t)return{name:s.name,chainId:s.chainId,ensAddress:s.ensAddress||null,_defaultProvider:s._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const n=O2[t];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=O2[t.name];if(!e)return typeof t.chainId!="number"&&rF.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&rF.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return r==null&&e._defaultProvider&&(qBe(e._defaultProvider)?r=e._defaultProvider.renetwork(t):r=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}const zBe="web/5.8.0";var WBe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};function VBe(t,e){return WBe(this,void 0,void 0,function*(){e==null&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(r.mode=o.mode),o.cache&&(r.cache=o.cache),o.credentials&&(r.credentials=o.credentials),o.redirect&&(r.redirect=o.redirect),o.referrer&&(r.referrer=o.referrer)}const n=yield fetch(t,r),s=yield n.arrayBuffer(),i={};return n.headers.forEach?n.headers.forEach((o,a)=>{i[a.toLowerCase()]=o}):n.headers.keys().forEach(o=>{i[o.toLowerCase()]=n.headers.get(o)}),{headers:i,statusCode:n.status,statusMessage:n.statusText,body:Oe(new Uint8Array(s))}})}var GBe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const bu=new ue(zBe);function oF(t){return new Promise(e=>{setTimeout(e,t)})}function Df(t,e){if(t==null)return null;if(typeof t=="string")return t;if(XE(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return zh(t)}catch{}return je(t)}return t}function KBe(t){return ms(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function Zne(t,e,r){const n=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;bu.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const s=typeof t=="object"?t.throttleCallback:null,i=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;bu.assertArgument(i>0&&i%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",i);const o=typeof t=="object"?!!t.errorPassThrough:!1,a={};let c=null;const u={method:"GET"};let l=!1,d=120*1e3;if(typeof t=="string")c=t;else if(typeof t=="object"){if((t==null||t.url==null)&&bu.throwArgumentError("missing URL","connection.url",t),c=t.url,typeof t.timeout=="number"&&t.timeout>0&&(d=t.timeout),t.headers)for(const E in t.headers)a[E.toLowerCase()]={key:E,value:String(t.headers[E])},["if-none-match","if-modified-since"].indexOf(E.toLowerCase())>=0&&(l=!0);if(u.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){c.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&bu.throwError("basic authentication requires a secure https url",ue.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:t.user,password:"[REDACTED]"});const E=t.user+":"+t.password;a.authorization={key:"Authorization",value:"Basic "+eB(ms(E))}}t.skipFetchSetup!=null&&(u.skipFetchSetup=!!t.skipFetchSetup),t.fetchOptions!=null&&(u.fetchOptions=Ds(t.fetchOptions))}const f=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),p=c?c.match(f):null;if(p)try{const E={statusCode:200,statusMessage:"OK",headers:{"content-type":p[1]||"text/plain"},body:p[2]?Qk(p[3]):KBe(p[3])};let S=E.body;return r&&(S=r(E.body,E)),Promise.resolve(S)}catch(E){bu.throwError("processing response error",ue.errors.SERVER_ERROR,{body:Df(p[1],p[2]),error:E,requestBody:null,requestMethod:"GET",url:c})}e&&(u.method="POST",u.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const g={};Object.keys(a).forEach(E=>{const S=a[E];g[S.key]=S.value}),u.headers=g;const h=(function(){let E=null;return{promise:new Promise(function(_,T){d&&(E=setTimeout(()=>{E!=null&&(E=null,T(bu.makeError("timeout",ue.errors.TIMEOUT,{requestBody:Df(u.body,g["content-type"]),requestMethod:u.method,timeout:d,url:c})))},d))}),cancel:function(){E!=null&&(clearTimeout(E),E=null)}}})(),y=(function(){return GBe(this,void 0,void 0,function*(){for(let E=0;E<n;E++){let S=null;try{if(S=yield VBe(c,u),E<n){if(S.statusCode===301||S.statusCode===302){const _=S.headers.location||"";if(u.method==="GET"&&_.match(/^https:/)){c=S.headers.location;continue}}else if(S.statusCode===429){let _=!0;if(s&&(_=yield s(E,c)),_){let T=0;const P=S.headers["retry-after"];typeof P=="string"&&P.match(/^[1-9][0-9]*$/)?T=parseInt(P)*1e3:T=i*parseInt(String(Math.random()*Math.pow(2,E))),yield oF(T);continue}}}}catch(_){S=_.response,S==null&&(h.cancel(),bu.throwError("missing response",ue.errors.SERVER_ERROR,{requestBody:Df(u.body,g["content-type"]),requestMethod:u.method,serverError:_,url:c}))}let C=S.body;if(l&&S.statusCode===304?C=null:!o&&(S.statusCode<200||S.statusCode>=300)&&(h.cancel(),bu.throwError("bad response",ue.errors.SERVER_ERROR,{status:S.statusCode,headers:S.headers,body:Df(C,S.headers?S.headers["content-type"]:null),requestBody:Df(u.body,g["content-type"]),requestMethod:u.method,url:c})),r)try{const _=yield r(C,S);return h.cancel(),_}catch(_){if(_.throttleRetry&&E<n){let T=!0;if(s&&(T=yield s(E,c)),T){const P=i*parseInt(String(Math.random()*Math.pow(2,E)));yield oF(P);continue}}h.cancel(),bu.throwError("processing response error",ue.errors.SERVER_ERROR,{body:Df(C,S.headers?S.headers["content-type"]:null),error:_,requestBody:Df(u.body,g["content-type"]),requestMethod:u.method,url:c})}return h.cancel(),C}return bu.throwError("failed response",ue.errors.SERVER_ERROR,{requestBody:Df(u.body,g["content-type"]),requestMethod:u.method,url:c})})})();return Promise.race([h.promise,y])}function A5(t,e,r){let n=(i,o)=>{let a=null;if(i!=null)try{a=JSON.parse(zh(i))}catch(c){bu.throwError("invalid JSON",ue.errors.SERVER_ERROR,{body:i,error:c})}return r&&(a=r(a,o)),a},s=null;if(e!=null){s=ms(e);const i=typeof t=="string"?{url:t}:Ds(t);i.headers?Object.keys(i.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(i.headers=Ds(i.headers),i.headers["content-type"]="application/json"):i.headers={"content-type":"application/json"},t=i}return Zne(t,s,n)}function Vm(t,e){return e||(e={}),e=Ds(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(r,n){let s=null,i=!1;const o=()=>i?!1:(i=!0,s&&clearTimeout(s),!0);e.timeout&&(s=setTimeout(()=>{o()&&n(new Error("timeout"))},e.timeout));const a=e.retryLimit;let c=0;function u(){return t().then(function(l){if(l!==void 0)o()&&r(l);else if(e.oncePoll)e.oncePoll.once("poll",u);else if(e.onceBlock)e.onceBlock.once("block",u);else if(!i){if(c++,c>a){o()&&n(new Error("retry limit reached"));return}let d=e.interval*parseInt(String(Math.random()*Math.pow(2,c)));d<e.floor&&(d=e.floor),d>e.ceiling&&(d=e.ceiling),setTimeout(u,d)}return null},function(l){o()&&n(l)})}u()})}const ZBe=Object.freeze(Object.defineProperty({__proto__:null,_fetchData:Zne,fetchJson:A5,poll:Vm},Symbol.toStringTag,{value:"Module"}));var BP,aF;function YBe(){if(aF)return BP;aF=1;for(var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",e={},r=0;r<t.length;r++){var n=t.charAt(r);if(e[n]!==void 0)throw new TypeError(n+" is ambiguous");e[n]=r}function s(h){var y=h>>25;return(h&33554431)<<5^-(y>>0&1)&996825010^-(y>>1&1)&642813549^-(y>>2&1)&513874426^-(y>>3&1)&1027748829^-(y>>4&1)&705979059}function i(h){for(var y=1,E=0;E<h.length;++E){var S=h.charCodeAt(E);if(S<33||S>126)return"Invalid prefix ("+h+")";y=s(y)^S>>5}for(y=s(y),E=0;E<h.length;++E){var C=h.charCodeAt(E);y=s(y)^C&31}return y}function o(h,y,E){if(E=E||90,h.length+7+y.length>E)throw new TypeError("Exceeds length limit");h=h.toLowerCase();var S=i(h);if(typeof S=="string")throw new Error(S);for(var C=h+"1",_=0;_<y.length;++_){var T=y[_];if(T>>5!==0)throw new Error("Non 5-bit word");S=s(S)^T,C+=t.charAt(T)}for(_=0;_<6;++_)S=s(S);for(S^=1,_=0;_<6;++_){var P=S>>(5-_)*5&31;C+=t.charAt(P)}return C}function a(h,y){if(y=y||90,h.length<8)return h+" too short";if(h.length>y)return"Exceeds length limit";var E=h.toLowerCase(),S=h.toUpperCase();if(h!==E&&h!==S)return"Mixed-case string "+h;h=E;var C=h.lastIndexOf("1");if(C===-1)return"No separator character for "+h;if(C===0)return"Missing prefix for "+h;var _=h.slice(0,C),T=h.slice(C+1);if(T.length<6)return"Data too short";var P=i(_);if(typeof P=="string")return P;for(var D=[],L=0;L<T.length;++L){var I=T.charAt(L),U=e[I];if(U===void 0)return"Unknown character "+I;P=s(P)^U,!(L+6>=T.length)&&D.push(U)}return P!==1?"Invalid checksum for "+h:{prefix:_,words:D}}function c(){var h=a.apply(null,arguments);if(typeof h=="object")return h}function u(h){var y=a.apply(null,arguments);if(typeof y=="object")return y;throw new Error(y)}function l(h,y,E,S){for(var C=0,_=0,T=(1<<E)-1,P=[],D=0;D<h.length;++D)for(C=C<<y|h[D],_+=y;_>=E;)_-=E,P.push(C>>_&T);if(S)_>0&&P.push(C<<E-_&T);else{if(_>=y)return"Excess padding";if(C<<E-_&T)return"Non-zero padding"}return P}function d(h){var y=l(h,8,5,!0);if(Array.isArray(y))return y}function f(h){var y=l(h,8,5,!0);if(Array.isArray(y))return y;throw new Error(y)}function p(h){var y=l(h,5,8,!1);if(Array.isArray(y))return y}function g(h){var y=l(h,5,8,!1);if(Array.isArray(y))return y;throw new Error(y)}return BP={decodeUnsafe:c,decode:u,encode:o,toWordsUnsafe:d,toWords:f,fromWordsUnsafe:p,fromWords:g},BP}var JBe=YBe();const cF=xa(JBe),x5="providers/5.8.0",Yb=new ue(x5);class ht{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},r=this.address.bind(this),n=this.bigNumber.bind(this),s=this.blockTag.bind(this),i=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),c=this.number.bind(this),u=this.type.bind(this),l=d=>this.data(d,!0);return e.transaction={hash:o,type:u,accessList:ht.allowNull(this.accessList.bind(this),null),blockHash:ht.allowNull(o,null),blockNumber:ht.allowNull(c,null),transactionIndex:ht.allowNull(c,null),confirmations:ht.allowNull(c,null),from:r,gasPrice:ht.allowNull(n),maxPriorityFeePerGas:ht.allowNull(n),maxFeePerGas:ht.allowNull(n),gasLimit:n,to:ht.allowNull(r,null),value:n,nonce:c,data:i,r:ht.allowNull(this.uint256),s:ht.allowNull(this.uint256),v:ht.allowNull(c),creates:ht.allowNull(r,null),raw:ht.allowNull(i)},e.transactionRequest={from:ht.allowNull(r),nonce:ht.allowNull(c),gasLimit:ht.allowNull(n),gasPrice:ht.allowNull(n),maxPriorityFeePerGas:ht.allowNull(n),maxFeePerGas:ht.allowNull(n),to:ht.allowNull(r),value:ht.allowNull(n),data:ht.allowNull(l),type:ht.allowNull(c),accessList:ht.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:c,blockNumber:c,transactionHash:o,address:r,topics:ht.arrayOf(o),data:i,logIndex:c,blockHash:o},e.receipt={to:ht.allowNull(this.address,null),from:ht.allowNull(this.address,null),contractAddress:ht.allowNull(r,null),transactionIndex:c,root:ht.allowNull(a),gasUsed:n,logsBloom:ht.allowNull(i),blockHash:o,transactionHash:o,logs:ht.arrayOf(this.receiptLog.bind(this)),blockNumber:c,confirmations:ht.allowNull(c,null),cumulativeGasUsed:n,effectiveGasPrice:ht.allowNull(n),status:ht.allowNull(c),type:u},e.block={hash:ht.allowNull(o),parentHash:o,number:c,timestamp:c,nonce:ht.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:ht.allowNull(r),extraData:i,transactions:ht.allowNull(ht.arrayOf(o)),baseFeePerGas:ht.allowNull(n)},e.blockWithTransactions=Ds(e.block),e.blockWithTransactions.transactions=ht.allowNull(ht.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:ht.allowNull(s,void 0),toBlock:ht.allowNull(s,void 0),blockHash:ht.allowNull(o,void 0),address:ht.allowNull(r,void 0),topics:ht.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:ht.allowNull(c),blockHash:ht.allowNull(o),transactionIndex:c,removed:ht.allowNull(this.boolean.bind(this)),address:r,data:ht.allowFalsish(i,"0x"),topics:ht.arrayOf(o),transactionHash:o,logIndex:c},e}accessList(e){return ig(e||[])}number(e){return e==="0x"?0:Ue.from(e).toNumber()}type(e){return e==="0x"||e==null?0:Ue.from(e).toNumber()}bigNumber(e){return Ue.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,r){return typeof e=="string"&&(!r&&e.substring(0,2)!=="0x"&&(e="0x"+e),Er(e))?e.toLowerCase():Yb.throwArgumentError("invalid hash","value",e)}data(e,r){const n=this.hex(e,r);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return sn(e)}callAddress(e){if(!Er(e,32))return null;const r=sn(As(e,12));return r===e4e?null:r}contractAddress(e){return Zk(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||Er(e))return f5(e);throw new Error("invalid blockTag")}hash(e,r){const n=this.hex(e,r);return Ll(n)!==32?Yb.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const r=Ue.from(e);try{return r.toNumber()}catch{}return null}uint256(e){if(!Er(e))throw new Error("invalid uint256");return Nn(e,32)}_block(e,r){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,s=ht.check(r,e);return s._difficulty=n==null?null:Ue.from(n),s}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return ht.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&Ue.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const r=ht.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;Er(n)&&(n=Ue.from(n).toNumber()),r.chainId=n}else{let n=e.networkId;n==null&&r.v==null&&(n=e.chainId),Er(n)&&(n=Ue.from(n).toNumber()),typeof n!="number"&&r.v!=null&&(n=(r.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),r.chainId=n}return r.blockHash&&r.blockHash.replace(/0/g,"")==="x"&&(r.blockHash=null),r}transaction(e){return kne(e)}receiptLog(e){return ht.check(this.formats.receiptLog,e)}receipt(e){const r=ht.check(this.formats.receipt,e);if(r.root!=null)if(r.root.length<=4){const n=Ue.from(r.root).toNumber();n===0||n===1?(r.status!=null&&r.status!==n&&Yb.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):Yb.throwArgumentError("invalid alt-root-status","value.root",r.root)}else r.root.length!==66&&Yb.throwArgumentError("invalid root hash","value.root",r.root);return r.status!=null&&(r.byzantium=!0),r}topics(e){return Array.isArray(e)?e.map(r=>this.topics(r)):e!=null?this.hash(e,!0):null}filter(e){return ht.check(this.formats.filter,e)}filterLog(e){return ht.check(this.formats.filterLog,e)}static check(e,r){const n={};for(const s in e)try{const i=e[s](r[s]);i!==void 0&&(n[s]=i)}catch(i){throw i.checkKey=s,i.checkValue=r[s],i}return n}static allowNull(e,r){return(function(n){return n==null?r:e(n)})}static allowFalsish(e,r){return(function(n){return n?e(n):r})}static arrayOf(e){return(function(r){if(!Array.isArray(r))throw new Error("not an array");const n=[];return r.forEach(function(s){n.push(e(s))}),n})}}var Wt=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const ar=new ue(x5),XBe=10;function uF(t){return t==null?"null":(Ll(t)!==32&&ar.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function lF(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const r={};e.forEach(s=>{r[uF(s)]=!0});const n=Object.keys(r);return n.sort(),n.join("|")}else return uF(e)}).join("&")}function QBe(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const r=e.split("|").map(n=>n==="null"?null:n);return r.length===1?r[0]:r})}function jg(t){if(typeof t=="string"){if(t=t.toLowerCase(),Ll(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+lF(t);if(pke.isForkEvent(t))throw ar.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+lF(t.topics||[])}throw new Error("invalid event - "+t)}function Jb(){return new Date().getTime()}function dF(t){return new Promise(e=>{setTimeout(e,t)})}const e9e=["block","network","pending","poll"];let t9e=class{constructor(e,r,n){xe(this,"tag",e),xe(this,"listener",r),xe(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const r=e[1],n=QBe(e[2]),s={};return n.length>0&&(s.topics=n),r&&r!=="*"&&(s.address=r),s}pollable(){return this.tag.indexOf(":")>=0||e9e.indexOf(this.tag)>=0}};const r9e={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function UP(t){return Nn(Ue.from(t).toHexString(),32)}function fF(t){return Ry.encode(Mn([t,As(of(of(t)),0,4)]))}const Yne=new RegExp("^(ipfs)://(.*)$","i"),hF=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Yne,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function MI(t,e){try{return zh(oE(t,e))}catch{}return null}function oE(t,e){if(t==="0x")return null;const r=Ue.from(As(t,e,e+32)).toNumber(),n=Ue.from(As(t,r,r+32)).toNumber();return As(t,r+32,r+32+n)}function MP(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):ar.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function pF(t){const e=Oe(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function n9e(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}function Jne(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(null),r+=32;for(let n=0;n<t.length;n++){const s=Oe(t[n]);e[n]=pF(r),e.push(pF(s.length)),e.push(n9e(s)),r+=32+Math.ceil(s.length/32)*32}return Ro(e)}class gF{constructor(e,r,n,s){xe(this,"provider",e),xe(this,"name",n),xe(this,"address",e.formatter.address(r)),xe(this,"_resolvedAddress",s)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>Ue.from(e).eq(1)).catch(e=>{if(e.code===ue.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,r){return Wt(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:Ro([e,H1(this.name),r||"0x"])};let s=!1;(yield this.supportsWildcard())&&(s=!0,n.data=Ro(["0x9061b923",Jne([mne(this.name),n.data])]));try{let i=yield this.provider.call(n);return Oe(i).length%32===4&&ar.throwError("resolver threw error",ue.errors.CALL_EXCEPTION,{transaction:n,data:i}),s&&(i=oE(i,0)),i}catch(i){if(i.code===ue.errors.CALL_EXCEPTION)return null;throw i}})}_fetchBytes(e,r){return Wt(this,void 0,void 0,function*(){const n=yield this._fetch(e,r);return n!=null?oE(n,0):null})}_getAddress(e,r){const n=r9e[String(e)];if(n==null&&ar.throwError(`unsupported coin type: ${e}`,ue.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(r);const s=Oe(r);if(n.p2pkh!=null){const i=r.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(i){const o=parseInt(i[1],16);if(i[2].length===o*2&&o>=1&&o<=75)return fF(Mn([[n.p2pkh],"0x"+i[2]]))}}if(n.p2sh!=null){const i=r.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(i){const o=parseInt(i[1],16);if(i[2].length===o*2&&o>=1&&o<=75)return fF(Mn([[n.p2sh],"0x"+i[2]]))}}if(n.prefix!=null){const i=s[1];let o=s[0];if(o===0?i!==20&&i!==32&&(o=-1):o=-1,o>=0&&s.length===2+i&&i>=1&&i<=75){const a=cF.toWords(s.slice(2));return a.unshift(o),cF.encode(n.prefix,a)}}return null}getAddress(e){return Wt(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const s=yield this._fetch("0x3b3b57de");return s==="0x"||s===nne?null:this.provider.formatter.callAddress(s)}catch(s){if(s.code===ue.errors.CALL_EXCEPTION)return null;throw s}const r=yield this._fetchBytes("0xf1cb7e06",UP(e));if(r==null||r==="0x")return null;const n=this._getAddress(e,r);return n==null&&ar.throwError("invalid or unsupported coin data",ue.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:r}),n})}getAvatar(){return Wt(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const r=yield this.getText("avatar");if(r==null)return null;for(let n=0;n<hF.length;n++){const s=r.match(hF[n]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":return e.push({type:"url",content:r}),{linkage:e,url:r};case"data":return e.push({type:"data",content:r}),{linkage:e,url:r};case"ipfs":return e.push({type:"ipfs",content:r}),{linkage:e,url:MP(r)};case"erc721":case"erc1155":{const o=i==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:i,content:r});const a=this._resolvedAddress||(yield this.getAddress()),c=(s[2]||"").split("/");if(c.length!==2)return null;const u=yield this.provider.formatter.address(c[0]),l=Nn(Ue.from(c[1]).toHexString(),32);if(i==="erc721"){const h=this.provider.formatter.callAddress(yield this.provider.call({to:u,data:Ro(["0x6352211e",l])}));if(a!==h)return null;e.push({type:"owner",content:h})}else if(i==="erc1155"){const h=Ue.from(yield this.provider.call({to:u,data:Ro(["0x00fdd58e",Nn(a,32),l])}));if(h.isZero())return null;e.push({type:"balance",content:h.toString()})}const d={to:this.provider.formatter.address(c[0]),data:Ro([o,l])};let f=MI(yield this.provider.call(d),0);if(f==null)return null;e.push({type:"metadata-url-base",content:f}),i==="erc1155"&&(f=f.replace("{id}",l.substring(2)),e.push({type:"metadata-url-expanded",content:f})),f.match(/^ipfs:/i)&&(f=MP(f)),e.push({type:"metadata-url",content:f});const p=yield A5(f);if(!p)return null;e.push({type:"metadata",content:JSON.stringify(p)});let g=p.image;if(typeof g!="string")return null;if(!g.match(/^(https:\/\/|data:)/i)){if(g.match(Yne)==null)return null;e.push({type:"url-ipfs",content:g}),g=MP(g)}return e.push({type:"url",content:g}),{linkage:e,url:g}}}}}catch{}return null})}getContentHash(){return Wt(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const r=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipfs://"+Ry.encode("0x"+r[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const o=parseInt(n[3],16);if(n[4].length===o*2)return"ipns://"+Ry.encode("0x"+n[1])}const s=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(s&&s[1].length===64)return"bzz://"+s[1];const i=e.match(/^0x90b2c605([0-9a-f]*)$/);if(i&&i[1].length===68){const o={"=":"","+":"-","/":"_"};return"sia://"+eB("0x"+i[1]).replace(/[=+\/]/g,c=>o[c])}return ar.throwError("invalid or unsupported content hash data",ue.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return Wt(this,void 0,void 0,function*(){let r=ms(e);r=Mn([UP(64),UP(r.length),r]),r.length%32!==0&&(r=Mn([r,Nn("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",je(r));return n==null||n==="0x"?null:zh(n)})}}let DP=null,s9e=1,i9e=class extends e_{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),xe(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(r=>{}),this._ready().catch(r=>{});else{const r=Ru(new.target,"getNetwork")(e);r?(xe(this,"_network",r),this.emit("network",r,null)):ar.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Wt(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||ar.throwError("no network detected",ue.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:xe(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Vm(()=>this._ready().then(e=>e,e=>{if(!(e.code===ue.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return DP==null&&(DP=new ht),DP}static getNetwork(e){return HBe(e??"homestead")}ccipReadFetch(e,r,n){return Wt(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const s=e.to.toLowerCase(),i=r.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],u=c.replace("{sender}",s).replace("{data}",i),l=c.indexOf("{data}")>=0?null:JSON.stringify({data:i,sender:s}),d=yield A5({url:u,errorPassThrough:!0},l,(p,g)=>(p.status=g.statusCode,p));if(d.data)return d.data;const f=d.message||"unknown error";if(d.status>=400&&d.status<500)return ar.throwError(`response not found during CCIP fetch: ${f}`,ue.errors.SERVER_ERROR,{url:c,errorMessage:f});o.push(f)}return ar.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,ue.errors.SERVER_ERROR,{urls:n,errorMessages:o})})}_getInternalBlockNumber(e){return Wt(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const s=this._internalBlockNumber;try{const i=yield s;if(Jb()-i.respTime<=e)return i.blockNumber;break}catch{if(this._internalBlockNumber===s)break}}const r=Jb(),n=ps({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(s=>null,s=>s)}).then(({blockNumber:s,networkError:i})=>{if(i)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),i;const o=Jb();return s=Ue.from(s).toNumber(),s<this._maxInternalBlockNumber&&(s=this._maxInternalBlockNumber),this._maxInternalBlockNumber=s,this._setFastBlockNumber(s),{blockNumber:s,reqTime:r,respTime:o}});return this._internalBlockNumber=n,n.catch(s=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return Wt(this,void 0,void 0,function*(){const e=s9e++,r=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(s){this.emit("error",s);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)ar.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",ar.makeError("network block skew detected",ue.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let s=this._emitted.block+1;s<=n;s++)this.emit("block",s);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(s=>{if(s==="block")return;const i=this._emitted[s];i!=="pending"&&n-i>12&&delete this._emitted[s]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(s=>{switch(s.type){case"tx":{const i=s.hash;let o=this.getTransactionReceipt(i).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+i]=a.blockNumber,this.emit(i,a)),null)).catch(a=>{this.emit("error",a)});r.push(o);break}case"filter":{if(!s._inflight){s._inflight=!0,s._lastBlockNumber===-2&&(s._lastBlockNumber=n-1);const i=s.filter;i.fromBlock=s._lastBlockNumber+1,i.toBlock=n;const o=i.toBlock-this._maxFilterBlockRange;o>i.fromBlock&&(i.fromBlock=o),i.fromBlock<0&&(i.fromBlock=0);const a=this.getLogs(i).then(c=>{s._inflight=!1,c.length!==0&&c.forEach(u=>{u.blockNumber>s._lastBlockNumber&&(s._lastBlockNumber=u.blockNumber),this._emitted["b:"+u.blockHash]=u.blockNumber,this._emitted["t:"+u.transactionHash]=u.blockNumber,this.emit(i,u)})}).catch(c=>{this.emit("error",c),s._inflight=!1});r.push(a)}break}}}),this._lastBlockNumber=n,Promise.all(r).then(()=>{this.emit("didPoll",e)}).catch(s=>{this.emit("error",s)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Wt(this,void 0,void 0,function*(){return ar.throwError("provider does not support network detection",ue.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return Wt(this,void 0,void 0,function*(){const e=yield this._ready(),r=yield this.detectNetwork();if(e.chainId!==r.chainId){if(this.anyNetwork)return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,e),yield dF(0),this._network;const n=ar.makeError("underlying network changed",ue.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:r});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Jb();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(r=>((this._fastBlockNumber==null||r>this._fastBlockNumber)&&(this._fastBlockNumber=r),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Jb(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,r,n){return Wt(this,void 0,void 0,function*(){return this._waitForTransaction(e,r??1,n||0,null)})}_waitForTransaction(e,r,n,s){return Wt(this,void 0,void 0,function*(){const i=yield this.getTransactionReceipt(e);return(i?i.confirmations:0)>=r?i:new Promise((o,a)=>{const c=[];let u=!1;const l=function(){return u?!0:(u=!0,c.forEach(f=>{f()}),!1)},d=f=>{f.confirmations<r||l()||o(f)};if(this.on(e,d),c.push(()=>{this.removeListener(e,d)}),s){let f=s.startBlock,p=null;const g=h=>Wt(this,void 0,void 0,function*(){u||(yield dF(1e3),this.getTransactionCount(s.from).then(y=>Wt(this,void 0,void 0,function*(){if(!u){if(y<=s.nonce)f=h;else{{const E=yield this.getTransaction(e);if(E&&E.blockNumber!=null)return}for(p==null&&(p=f-3,p<s.startBlock&&(p=s.startBlock));p<=h;){if(u)return;const E=yield this.getBlockWithTransactions(p);for(let S=0;S<E.transactions.length;S++){const C=E.transactions[S];if(C.hash===e)return;if(C.from===s.from&&C.nonce===s.nonce){if(u)return;const _=yield this.waitForTransaction(C.hash,r);if(l())return;let T="replaced";C.data===s.data&&C.to===s.to&&C.value.eq(s.value)?T="repriced":C.data==="0x"&&C.from===C.to&&C.value.isZero()&&(T="cancelled"),a(ar.makeError("transaction was replaced",ue.errors.TRANSACTION_REPLACED,{cancelled:T==="replaced"||T==="cancelled",reason:T,replacement:this._wrapTransaction(C),hash:e,receipt:_}));return}}p++}}u||this.once("block",g)}}),y=>{u||this.once("block",g)}))});if(u)return;this.once("block",g),c.push(()=>{this.removeListener("block",g)})}if(typeof n=="number"&&n>0){const f=setTimeout(()=>{l()||a(ar.makeError("timeout exceeded",ue.errors.TIMEOUT,{timeout:n}))},n);f.unref&&f.unref(),c.push(()=>{clearTimeout(f)})}})})}getBlockNumber(){return Wt(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return Ue.from(e)}catch(r){return ar.throwError("bad result from backend",ue.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:r})}})}getBalance(e,r){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield ps({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),s=yield this.perform("getBalance",n);try{return Ue.from(s)}catch(i){return ar.throwError("bad result from backend",ue.errors.SERVER_ERROR,{method:"getBalance",params:n,result:s,error:i})}})}getTransactionCount(e,r){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield ps({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),s=yield this.perform("getTransactionCount",n);try{return Ue.from(s).toNumber()}catch(i){return ar.throwError("bad result from backend",ue.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:s,error:i})}})}getCode(e,r){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield ps({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),s=yield this.perform("getCode",n);try{return je(s)}catch(i){return ar.throwError("bad result from backend",ue.errors.SERVER_ERROR,{method:"getCode",params:n,result:s,error:i})}})}getStorageAt(e,r,n){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const s=yield ps({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(r).then(o=>f5(o))}),i=yield this.perform("getStorageAt",s);try{return je(i)}catch(o){return ar.throwError("bad result from backend",ue.errors.SERVER_ERROR,{method:"getStorageAt",params:s,result:i,error:o})}})}_wrapTransaction(e,r,n){if(r!=null&&Ll(r)!==32)throw new Error("invalid response - sendTransaction");const s=e;return r!=null&&e.hash!==r&&ar.throwError("Transaction hash mismatch from Provider.sendTransaction.",ue.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:r}),s.wait=(i,o)=>Wt(this,void 0,void 0,function*(){i==null&&(i=1),o==null&&(o=0);let a;i!==0&&n!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const c=yield this._waitForTransaction(e.hash,i,o,a);return c==null&&i===0?null:(this._emitted["t:"+e.hash]=c.blockNumber,c.status===0&&ar.throwError("transaction failed",ue.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:c}),c)}),s}sendTransaction(e){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Promise.resolve(e).then(i=>je(i)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const s=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const i=yield this.perform("sendTransaction",{signedTransaction:r});return this._wrapTransaction(n,i,s)}catch(i){throw i.transaction=n,i.transactionHash=n.hash,i}})}_getTransactionRequest(e){return Wt(this,void 0,void 0,function*(){const r=yield e,n={};return["from","to"].forEach(s=>{r[s]!=null&&(n[s]=Promise.resolve(r[s]).then(i=>i?this._getAddress(i):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(s=>{r[s]!=null&&(n[s]=Promise.resolve(r[s]).then(i=>i?Ue.from(i):null))}),["type"].forEach(s=>{r[s]!=null&&(n[s]=Promise.resolve(r[s]).then(i=>i??null))}),r.accessList&&(n.accessList=this.formatter.accessList(r.accessList)),["data"].forEach(s=>{r[s]!=null&&(n[s]=Promise.resolve(r[s]).then(i=>i?je(i):null))}),this.formatter.transactionRequest(yield ps(n))})}_getFilter(e){return Wt(this,void 0,void 0,function*(){e=yield e;const r={};return e.address!=null&&(r.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(r[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(r[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield ps(r))})}_call(e,r,n){return Wt(this,void 0,void 0,function*(){n>=XBe&&ar.throwError("CCIP read exceeded maximum redirections",ue.errors.SERVER_ERROR,{redirects:n,transaction:e});const s=e.to,i=yield this.perform("call",{transaction:e,blockTag:r});if(n>=0&&r==="latest"&&s!=null&&i.substring(0,10)==="0x556f1830"&&Ll(i)%32===4)try{const o=As(i,4),a=As(o,0,32);Ue.from(a).eq(s)||ar.throwError("CCIP Read sender did not match",ue.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const c=[],u=Ue.from(As(o,32,64)).toNumber(),l=Ue.from(As(o,u,u+32)).toNumber(),d=As(o,u+32);for(let E=0;E<l;E++){const S=MI(d,E*32);S==null&&ar.throwError("CCIP Read contained corrupt URL string",ue.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i}),c.push(S)}const f=oE(o,64);Ue.from(As(o,100,128)).isZero()||ar.throwError("CCIP Read callback selector included junk",ue.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const p=As(o,96,100),g=oE(o,128),h=yield this.ccipReadFetch(e,f,c);h==null&&ar.throwError("CCIP Read disabled or provided no URLs",ue.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const y={to:s,data:Ro([p,Jne([h,g])])};return this._call(y,r,n+1)}catch(o){if(o.code===ue.errors.SERVER_ERROR)throw o}try{return je(i)}catch(o){return ar.throwError("bad result from backend",ue.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:r},result:i,error:o})}})}call(e,r){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield ps({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(r),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield ps({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",r);try{return Ue.from(n)}catch(s){return ar.throwError("bad result from backend",ue.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:n,error:s})}})}_getAddress(e){return Wt(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&ar.throwArgumentError("invalid address or ENS name","name",e);const r=yield this.resolveName(e);return r==null&&ar.throwError("ENS name not configured",ue.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),r})}_getBlock(e,r){return Wt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const s={includeTransactions:!!r};if(Er(e,32))s.blockHash=e;else try{s.blockTag=yield this._getBlockTag(e),Er(s.blockTag)&&(n=parseInt(s.blockTag.substring(2),16))}catch{ar.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Vm(()=>Wt(this,void 0,void 0,function*(){const i=yield this.perform("getBlock",s);if(i==null)return s.blockHash!=null&&this._emitted["b:"+s.blockHash]==null||s.blockTag!=null&&n>this._emitted.block?null:void 0;if(r){let o=null;for(let c=0;c<i.transactions.length;c++){const u=i.transactions[c];if(u.blockNumber==null)u.confirmations=0;else if(u.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let l=o-u.blockNumber+1;l<=0&&(l=1),u.confirmations=l}}const a=this.formatter.blockWithTransactions(i);return a.transactions=a.transactions.map(c=>this._wrapTransaction(c)),a}return this.formatter.block(i)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Wt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return Vm(()=>Wt(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const s=this.formatter.transactionResponse(n);if(s.blockNumber==null)s.confirmations=0;else if(s.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-s.blockNumber+1;o<=0&&(o=1),s.confirmations=o}return this._wrapTransaction(s)}),{oncePoll:this})})}getTransactionReceipt(e){return Wt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return Vm(()=>Wt(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const s=this.formatter.receipt(n);if(s.blockNumber==null)s.confirmations=0;else if(s.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-s.blockNumber+1;o<=0&&(o=1),s.confirmations=o}return s}),{oncePoll:this})})}getLogs(e){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield ps({filter:this._getFilter(e)}),n=yield this.perform("getLogs",r);return n.forEach(s=>{s.removed==null&&(s.removed=!1)}),ht.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return Wt(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return Wt(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&ar.throwArgumentError("invalid BlockTag","blockTag",e);let r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return r+=e,r<0&&(r=0),this.formatter.blockTag(r)}return this.formatter.blockTag(e)})}getResolver(e){return Wt(this,void 0,void 0,function*(){let r=e;for(;;){if(r===""||r==="."||e!=="eth"&&r==="eth")return null;const n=yield this._getResolver(r,"getResolver");if(n!=null){const s=new gF(this,n,e);return r!==e&&!(yield s.supportsWildcard())?null:s}r=r.split(".").slice(1).join(".")}})}_getResolver(e,r){return Wt(this,void 0,void 0,function*(){r==null&&(r="ENS");const n=yield this.getNetwork();n.ensAddress||ar.throwError("network does not support ENS",ue.errors.UNSUPPORTED_OPERATION,{operation:r,network:n.name});try{const s=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+H1(e).substring(2)});return this.formatter.callAddress(s)}catch{}return null})}resolveName(e){return Wt(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(Er(e))throw n}typeof e!="string"&&ar.throwArgumentError("invalid ENS name","name",e);const r=yield this.getResolver(e);return r?yield r.getAddress():null})}lookupAddress(e){return Wt(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const r=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"lookupAddress");if(n==null)return null;const s=MI(yield this.call({to:n,data:"0x691f3431"+H1(r).substring(2)}),0);return(yield this.resolveName(s))!=e?null:s})}getAvatar(e){return Wt(this,void 0,void 0,function*(){let r=null;if(Er(e)){const i=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(i,"getAvatar");if(!o)return null;r=new gF(this,o,i);try{const a=yield r.getAvatar();if(a)return a.url}catch(a){if(a.code!==ue.errors.CALL_EXCEPTION)throw a}try{const a=MI(yield this.call({to:o,data:"0x691f3431"+H1(i).substring(2)}),0);r=yield this.getResolver(a)}catch(a){if(a.code!==ue.errors.CALL_EXCEPTION)throw a;return null}}else if(r=yield this.getResolver(e),!r)return null;const n=yield r.getAvatar();return n==null?null:n.url})}perform(e,r){return ar.throwError(e+" not implemented",ue.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_addEventListener(e,r,n){const s=new t9e(jg(e),r,n);return this._events.push(s),this._startEvent(s),this}on(e,r){return this._addEventListener(e,r,!1)}once(e,r){return this._addEventListener(e,r,!0)}emit(e,...r){let n=!1,s=[],i=jg(e);return this._events=this._events.filter(o=>o.tag!==i?!0:(setTimeout(()=>{o.listener.apply(this,r)},0),n=!0,o.once?(s.push(o),!1):!0)),s.forEach(o=>{this._stopEvent(o)}),n}listenerCount(e){if(!e)return this._events.length;let r=jg(e);return this._events.filter(n=>n.tag===r).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let r=jg(e);return this._events.filter(n=>n.tag===r).map(n=>n.listener)}off(e,r){if(r==null)return this.removeAllListeners(e);const n=[];let s=!1,i=jg(e);return this._events=this._events.filter(o=>o.tag!==i||o.listener!=r||s?!0:(s=!0,n.push(o),!1)),n.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let r=[];if(e==null)r=this._events,this._events=[];else{const n=jg(e);this._events=this._events.filter(s=>s.tag!==n?!0:(r.push(s),!1))}return r.forEach(n=>{this._stopEvent(n)}),this}};var Md=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const Rs=new ue(x5),o9e=["call","estimateGas"];function W1(t,e){if(t==null)return null;if(typeof t.message=="string"&&t.message.match("reverted")){const r=Er(t.data)?t.data:null;if(!e||r)return{message:t.message,data:r}}if(typeof t=="object"){for(const r in t){const n=W1(t[r],e);if(n)return n}return null}if(typeof t=="string")try{return W1(JSON.parse(t),e)}catch{}return null}function Xne(t,e,r){const n=r.transaction||r.signedTransaction;if(t==="call"){const i=W1(e,!0);if(i)return i.data;Rs.throwError("missing revert data in call exception; Transaction reverted without a reason string",ue.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(t==="estimateGas"){let i=W1(e.body,!1);i==null&&(i=W1(e,!1)),i&&Rs.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ue.errors.UNPREDICTABLE_GAS_LIMIT,{reason:i.message,method:t,transaction:n,error:e})}let s=e.message;throw e.code===ue.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?s=e.error.message:typeof e.body=="string"?s=e.body:typeof e.responseText=="string"&&(s=e.responseText),s=(s||"").toLowerCase(),s.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Rs.throwError("insufficient funds for intrinsic transaction cost",ue.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),s.match(/nonce (is )?too low/i)&&Rs.throwError("nonce has already been used",ue.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),s.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Rs.throwError("replacement fee too low",ue.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),s.match(/only replay-protected/i)&&Rs.throwError("legacy pre-eip-155 transactions not supported",ue.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),o9e.indexOf(t)>=0&&s.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Rs.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ue.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function mF(t){return new Promise(function(e){setTimeout(e,t)})}function a9e(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Xb(t){return t&&t.toLowerCase()}const DO={};class Qne extends tb{constructor(e,r,n){if(super(),e!==DO)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");xe(this,"provider",r),n==null&&(n=0),typeof n=="string"?(xe(this,"_address",this.provider.formatter.address(n)),xe(this,"_index",null)):typeof n=="number"?(xe(this,"_index",n),xe(this,"_address",null)):Rs.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return Rs.throwError("cannot alter JSON-RPC Signer connection",ue.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new c9e(DO,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&Rs.throwError("unknown account #"+this._index,ue.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Ds(e);const r=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=Ds(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>Md(this,void 0,void 0,function*(){if(n==null)return null;const s=yield this.provider.resolveName(n);return s==null&&Rs.throwArgumentError("provided ENS name resolves to null","tx.to",n),s}))),ps({tx:ps(e),sender:r}).then(({tx:n,sender:s})=>{n.from!=null?n.from.toLowerCase()!==s&&Rs.throwArgumentError("from address mismatch","transaction",e):n.from=s;const i=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[i]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&Rs.throwError("user rejected transaction",ue.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),Xne("sendTransaction",o,i)))})}signTransaction(e){return Rs.throwError("signing transactions is unsupported",ue.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Md(this,void 0,void 0,function*(){const r=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield Vm(()=>Md(this,void 0,void 0,function*(){const s=yield this.provider.getTransaction(n);if(s!==null)return this.provider._wrapTransaction(s,n,r)}),{oncePoll:this.provider})}catch(s){throw s.transactionHash=n,s}})}signMessage(e){return Md(this,void 0,void 0,function*(){const r=typeof e=="string"?ms(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[je(r),n.toLowerCase()])}catch(s){throw typeof s.message=="string"&&s.message.match(/user denied/i)&&Rs.throwError("user rejected signing",ue.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),s}})}_legacySignMessage(e){return Md(this,void 0,void 0,function*(){const r=typeof e=="string"?ms(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),je(r)])}catch(s){throw typeof s.message=="string"&&s.message.match(/user denied/i)&&Rs.throwError("user rejected signing",ue.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),s}})}_signTypedData(e,r,n){return Md(this,void 0,void 0,function*(){const s=yield Pi.resolveNames(e,r,n,o=>this.provider.resolveName(o)),i=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(Pi.getPayload(s.domain,r,s.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&Rs.throwError("user rejected signing",ue.errors.ACTION_REJECTED,{action:"_signTypedData",from:i,messageData:{domain:s.domain,types:r,value:s.value}}),o}})}unlock(e){return Md(this,void 0,void 0,function*(){const r=this.provider,n=yield this.getAddress();return r.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class c9e extends Qne{sendTransaction(e){return this.sendUncheckedTransaction(e).then(r=>({hash:r,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(r,n)}))}}const u9e={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class ese extends i9e{constructor(e,r){let n=r;n==null&&(n=new Promise((s,i)=>{setTimeout(()=>{this.detectNetwork().then(o=>{s(o)},o=>{i(o)})},0)})),super(n),e||(e=Ru(this.constructor,"defaultUrl")()),typeof e=="string"?xe(this,"connection",Object.freeze({url:e})):xe(this,"connection",Object.freeze(Ds(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Md(this,void 0,void 0,function*(){yield mF(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const r=Ru(this.constructor,"getNetwork");try{return r(Ue.from(e).toNumber())}catch(n){return Rs.throwError("could not detect network",ue.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return Rs.throwError("could not detect network",ue.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new Qne(DO,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(r=>this.formatter.address(r)))}send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Fl(n),provider:this});const s=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(s&&this._cache[e])return this._cache[e];const i=A5(this.connection,JSON.stringify(n),a9e).then(o=>(this.emit("debug",{action:"response",request:n,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:n,provider:this}),o});return s&&(this._cache[e]=i,setTimeout(()=>{this._cache[e]=null},0)),i}prepareRequest(e,r){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Xb(r.address),r.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Xb(r.address),r.blockTag]];case"getCode":return["eth_getCode",[Xb(r.address),r.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Xb(r.address),Nn(r.position,32),r.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[r.signedTransaction]];case"getBlock":return r.blockTag?["eth_getBlockByNumber",[r.blockTag,!!r.includeTransactions]]:r.blockHash?["eth_getBlockByHash",[r.blockHash,!!r.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[r.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[r.transactionHash]];case"call":return["eth_call",[Ru(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0}),r.blockTag]];case"estimateGas":return["eth_estimateGas",[Ru(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0})]];case"getLogs":return r.filter&&r.filter.address!=null&&(r.filter.address=Xb(r.filter.address)),["eth_getLogs",[r.filter]]}return null}perform(e,r){return Md(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const s=r.transaction;if(s&&s.type!=null&&Ue.from(s.type).isZero()&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=yield this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(r=Ds(r),r.transaction=Ds(s),delete r.transaction.type)}}const n=this.prepareRequest(e,r);n==null&&Rs.throwError(e+" not implemented",ue.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(s){return Xne(e,s,r)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,r=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=r,r.then(function(n){function s(){e.send("eth_getFilterChanges",[n]).then(function(i){if(e._pendingFilter!=r)return null;let o=Promise.resolve();return i.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(c){return e.emit("pending",c),null})})}),o.then(function(){return mF(1e3)})}).then(function(){if(e._pendingFilter!=r){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){s()},0),null}).catch(i=>{})}return s(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,r){const n=Ds(u9e);if(r)for(const i in r)r[i]&&(n[i]=!0);Vk(e,n);const s={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(i){if(e[i]==null)return;const o=f5(Ue.from(e[i]));i==="gasLimit"&&(i="gas"),s[i]=o}),["from","to","data"].forEach(function(i){e[i]!=null&&(s[i]=je(e[i]))}),e.accessList&&(s.accessList=ig(e.accessList)),s}}const yF=new ue(x5);let l9e=1;function bF(t,e){const r="Web3LegacyFetcher";return function(n,s){const i={method:n,params:s,id:l9e++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:r,request:Fl(i),provider:this}),e(i,(c,u)=>{if(c)return this.emit("debug",{action:"response",fetcher:r,error:c,request:i,provider:this}),a(c);if(this.emit("debug",{action:"response",fetcher:r,request:i,response:u,provider:this}),u.error){const l=new Error(u.error.message);return l.code=u.error.code,l.data=u.error.data,a(l)}o(u.result)})})}}function d9e(t){return function(e,r){r==null&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Fl(n),provider:this}),t.request(n).then(s=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:s,provider:this}),s),s=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:s,provider:this}),s})}}class jP extends ese{constructor(e,r){e==null&&yF.throwArgumentError("missing provider","provider",e);let n=null,s=null,i=null;typeof e=="function"?(n="unknown:",s=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),i=e,e.request?(n===""&&(n="eip-1193:"),s=d9e(e)):e.sendAsync?s=bF(e,e.sendAsync.bind(e)):e.send?s=bF(e,e.send.bind(e)):yF.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,r),xe(this,"jsonRpcFetchFunc",s),xe(this,"provider",i)}send(e,r){return this.jsonRpcFetchFunc(e,r)}}const f9e="solidity/5.8.0",h9e=new RegExp("^bytes([0-9]+)$"),p9e=new RegExp("^(u?int)([0-9]*)$"),g9e=new RegExp("^(.*)\\[([0-9]*)\\]$"),m9e="0000000000000000000000000000000000000000000000000000000000000000",km=new ue(f9e);function tse(t,e,r){switch(t){case"address":return r?F1(e,32):Oe(e);case"string":return ms(e);case"bytes":return Oe(e);case"bool":return e=e?"0x01":"0x00",r?F1(e,32):Oe(e)}let n=t.match(p9e);if(n){let s=parseInt(n[2]||"256");return(n[2]&&String(s)!==n[2]||s%8!==0||s===0||s>256)&&km.throwArgumentError("invalid number type","type",t),r&&(s=256),e=Ue.from(e).toTwos(s),F1(e,s/8)}if(n=t.match(h9e),n){const s=parseInt(n[1]);return(String(s)!==n[1]||s===0||s>32)&&km.throwArgumentError("invalid bytes type","type",t),Oe(e).byteLength!==s&&km.throwArgumentError(`invalid value for ${t}`,"value",e),r?Oe((e+m9e).substring(0,66)):e}if(n=t.match(g9e),n&&Array.isArray(e)){const s=n[1];parseInt(n[2]||String(e.length))!=e.length&&km.throwArgumentError(`invalid array length for ${t}`,"value",e);const o=[];return e.forEach(function(a){o.push(tse(s,a,!0))}),Mn(o)}return km.throwArgumentError("invalid type","type",t)}function pB(t,e){t.length!=e.length&&km.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const r=[];return t.forEach(function(n,s){r.push(tse(n,e[s]))}),je(Mn(r))}function y9e(t,e){return En(pB(t,e))}function b9e(t,e){return of(pB(t,e))}const w9e=Object.freeze(Object.defineProperty({__proto__:null,keccak256:y9e,pack:pB,sha256:b9e},Symbol.toStringTag,{value:"Module"})),v9e="units/5.8.0",rse=new ue(v9e),nse=["wei","kwei","mwei","gwei","szabo","finney","ether"];function E9e(t){const e=String(t).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||t==="."||t==="-.")&&rse.throwArgumentError("invalid value","value",t);let r=e[0],n="";for(r.substring(0,1)==="-"&&(n="-",r=r.substring(1));r.substring(0,1)==="0";)r=r.substring(1);r===""&&(r="0");let s="";for(e.length===2&&(s="."+(e[1]||"0"));s.length>2&&s[s.length-1]==="0";)s=s.substring(0,s.length-1);const i=[];for(;r.length;)if(r.length<=3){i.unshift(r);break}else{const o=r.length-3;i.unshift(r.substring(o)),r=r.substring(0,o)}return n+i.join(",")+s}function gB(t,e){if(typeof e=="string"){const r=nse.indexOf(e);r!==-1&&(e=3*r)}return PI(t,e??18)}function mB(t,e){if(typeof t!="string"&&rse.throwArgumentError("value must be a string","value",t),typeof e=="string"){const r=nse.indexOf(e);r!==-1&&(e=3*r)}return fl(t,e??18)}function _9e(t){return gB(t,18)}function A9e(t){return mB(t,18)}const x9e=Object.freeze(Object.defineProperty({__proto__:null,commify:E9e,formatEther:_9e,formatUnits:gB,parseEther:A9e,parseUnits:mB},Symbol.toStringTag,{value:"Module"}));var od={};const C9e=Ln(lke),S9e=Ln(VOe),I9e=Ln(T4e),T9e=Ln(rBe),N9e=Ln(wOe),P9e=Ln(ake),R9e=Ln(yBe),O9e=Ln(BBe),k9e=Ln(DOe),B9e=Ln(yOe),wF=Ln(oBe),U9e=Ln(w9e),M9e=Ln(EBe),D9e=Ln(TOe),j9e=Ln(LOe),L9e=Ln(jke),vF=Ln(x4e),F9e=Ln(Vke),$9e=Ln(x9e),q9e=Ln(FBe),H9e=Ln(ZBe);var EF;function z9e(){return EF||(EF=1,(function(t){var e=od&&od.__createBinding||(Object.create?(function(F,B,A,m){m===void 0&&(m=A),Object.defineProperty(F,m,{enumerable:!0,get:function(){return B[A]}})}):(function(F,B,A,m){m===void 0&&(m=A),F[m]=B[A]})),r=od&&od.__setModuleDefault||(Object.create?(function(F,B){Object.defineProperty(F,"default",{enumerable:!0,value:B})}):function(F,B){F.default=B}),n=od&&od.__importStar||function(F){if(F&&F.__esModule)return F;var B={};if(F!=null)for(var A in F)A!=="default"&&Object.prototype.hasOwnProperty.call(F,A)&&e(B,F,A);return r(B,F),B};Object.defineProperty(t,"__esModule",{value:!0}),t.formatBytes32String=t.Utf8ErrorFuncs=t.toUtf8String=t.toUtf8CodePoints=t.toUtf8Bytes=t._toEscapedUtf8String=t.nameprep=t.hexDataSlice=t.hexDataLength=t.hexZeroPad=t.hexValue=t.hexStripZeros=t.hexConcat=t.isHexString=t.hexlify=t.base64=t.base58=t.TransactionDescription=t.LogDescription=t.Interface=t.SigningKey=t.HDNode=t.defaultPath=t.isBytesLike=t.isBytes=t.zeroPad=t.stripZeros=t.concat=t.arrayify=t.shallowCopy=t.resolveProperties=t.getStatic=t.defineReadOnly=t.deepCopy=t.checkProperties=t.poll=t.fetchJson=t._fetchData=t.RLP=t.Logger=t.checkResultErrors=t.FormatTypes=t.ParamType=t.FunctionFragment=t.EventFragment=t.ErrorFragment=t.ConstructorFragment=t.Fragment=t.defaultAbiCoder=t.AbiCoder=void 0,t.Indexed=t.Utf8ErrorReason=t.UnicodeNormalizationForm=t.SupportedAlgorithm=t.mnemonicToSeed=t.isValidMnemonic=t.entropyToMnemonic=t.mnemonicToEntropy=t.getAccountPath=t.verifyTypedData=t.verifyMessage=t.recoverPublicKey=t.computePublicKey=t.recoverAddress=t.computeAddress=t.getJsonWalletAddress=t.TransactionTypes=t.serializeTransaction=t.parseTransaction=t.accessListify=t.joinSignature=t.splitSignature=t.soliditySha256=t.solidityKeccak256=t.solidityPack=t.shuffled=t.randomBytes=t.sha512=t.sha256=t.ripemd160=t.keccak256=t.computeHmac=t.commify=t.parseUnits=t.formatUnits=t.parseEther=t.formatEther=t.isAddress=t.getCreate2Address=t.getContractAddress=t.getIcapAddress=t.getAddress=t._TypedDataEncoder=t.id=t.isValidName=t.namehash=t.hashMessage=t.dnsEncode=t.parseBytes32String=void 0;var s=C9e;Object.defineProperty(t,"AbiCoder",{enumerable:!0,get:function(){return s.AbiCoder}}),Object.defineProperty(t,"checkResultErrors",{enumerable:!0,get:function(){return s.checkResultErrors}}),Object.defineProperty(t,"ConstructorFragment",{enumerable:!0,get:function(){return s.ConstructorFragment}}),Object.defineProperty(t,"defaultAbiCoder",{enumerable:!0,get:function(){return s.defaultAbiCoder}}),Object.defineProperty(t,"ErrorFragment",{enumerable:!0,get:function(){return s.ErrorFragment}}),Object.defineProperty(t,"EventFragment",{enumerable:!0,get:function(){return s.EventFragment}}),Object.defineProperty(t,"FormatTypes",{enumerable:!0,get:function(){return s.FormatTypes}}),Object.defineProperty(t,"Fragment",{enumerable:!0,get:function(){return s.Fragment}}),Object.defineProperty(t,"FunctionFragment",{enumerable:!0,get:function(){return s.FunctionFragment}}),Object.defineProperty(t,"Indexed",{enumerable:!0,get:function(){return s.Indexed}}),Object.defineProperty(t,"Interface",{enumerable:!0,get:function(){return s.Interface}}),Object.defineProperty(t,"LogDescription",{enumerable:!0,get:function(){return s.LogDescription}}),Object.defineProperty(t,"ParamType",{enumerable:!0,get:function(){return s.ParamType}}),Object.defineProperty(t,"TransactionDescription",{enumerable:!0,get:function(){return s.TransactionDescription}});var i=S9e;Object.defineProperty(t,"getAddress",{enumerable:!0,get:function(){return i.getAddress}}),Object.defineProperty(t,"getCreate2Address",{enumerable:!0,get:function(){return i.getCreate2Address}}),Object.defineProperty(t,"getContractAddress",{enumerable:!0,get:function(){return i.getContractAddress}}),Object.defineProperty(t,"getIcapAddress",{enumerable:!0,get:function(){return i.getIcapAddress}}),Object.defineProperty(t,"isAddress",{enumerable:!0,get:function(){return i.isAddress}});var o=n(I9e);t.base64=o;var a=T9e;Object.defineProperty(t,"base58",{enumerable:!0,get:function(){return a.Base58}});var c=N9e;Object.defineProperty(t,"arrayify",{enumerable:!0,get:function(){return c.arrayify}}),Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return c.concat}}),Object.defineProperty(t,"hexConcat",{enumerable:!0,get:function(){return c.hexConcat}}),Object.defineProperty(t,"hexDataSlice",{enumerable:!0,get:function(){return c.hexDataSlice}}),Object.defineProperty(t,"hexDataLength",{enumerable:!0,get:function(){return c.hexDataLength}}),Object.defineProperty(t,"hexlify",{enumerable:!0,get:function(){return c.hexlify}}),Object.defineProperty(t,"hexStripZeros",{enumerable:!0,get:function(){return c.hexStripZeros}}),Object.defineProperty(t,"hexValue",{enumerable:!0,get:function(){return c.hexValue}}),Object.defineProperty(t,"hexZeroPad",{enumerable:!0,get:function(){return c.hexZeroPad}}),Object.defineProperty(t,"isBytes",{enumerable:!0,get:function(){return c.isBytes}}),Object.defineProperty(t,"isBytesLike",{enumerable:!0,get:function(){return c.isBytesLike}}),Object.defineProperty(t,"isHexString",{enumerable:!0,get:function(){return c.isHexString}}),Object.defineProperty(t,"joinSignature",{enumerable:!0,get:function(){return c.joinSignature}}),Object.defineProperty(t,"zeroPad",{enumerable:!0,get:function(){return c.zeroPad}}),Object.defineProperty(t,"splitSignature",{enumerable:!0,get:function(){return c.splitSignature}}),Object.defineProperty(t,"stripZeros",{enumerable:!0,get:function(){return c.stripZeros}});var u=P9e;Object.defineProperty(t,"_TypedDataEncoder",{enumerable:!0,get:function(){return u._TypedDataEncoder}}),Object.defineProperty(t,"dnsEncode",{enumerable:!0,get:function(){return u.dnsEncode}}),Object.defineProperty(t,"hashMessage",{enumerable:!0,get:function(){return u.hashMessage}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return u.id}}),Object.defineProperty(t,"isValidName",{enumerable:!0,get:function(){return u.isValidName}}),Object.defineProperty(t,"namehash",{enumerable:!0,get:function(){return u.namehash}});var l=R9e;Object.defineProperty(t,"defaultPath",{enumerable:!0,get:function(){return l.defaultPath}}),Object.defineProperty(t,"entropyToMnemonic",{enumerable:!0,get:function(){return l.entropyToMnemonic}}),Object.defineProperty(t,"getAccountPath",{enumerable:!0,get:function(){return l.getAccountPath}}),Object.defineProperty(t,"HDNode",{enumerable:!0,get:function(){return l.HDNode}}),Object.defineProperty(t,"isValidMnemonic",{enumerable:!0,get:function(){return l.isValidMnemonic}}),Object.defineProperty(t,"mnemonicToEntropy",{enumerable:!0,get:function(){return l.mnemonicToEntropy}}),Object.defineProperty(t,"mnemonicToSeed",{enumerable:!0,get:function(){return l.mnemonicToSeed}});var d=O9e;Object.defineProperty(t,"getJsonWalletAddress",{enumerable:!0,get:function(){return d.getJsonWalletAddress}});var f=k9e;Object.defineProperty(t,"keccak256",{enumerable:!0,get:function(){return f.keccak256}});var p=B9e;Object.defineProperty(t,"Logger",{enumerable:!0,get:function(){return p.Logger}});var g=wF;Object.defineProperty(t,"computeHmac",{enumerable:!0,get:function(){return g.computeHmac}}),Object.defineProperty(t,"ripemd160",{enumerable:!0,get:function(){return g.ripemd160}}),Object.defineProperty(t,"sha256",{enumerable:!0,get:function(){return g.sha256}}),Object.defineProperty(t,"sha512",{enumerable:!0,get:function(){return g.sha512}});var h=U9e;Object.defineProperty(t,"solidityKeccak256",{enumerable:!0,get:function(){return h.keccak256}}),Object.defineProperty(t,"solidityPack",{enumerable:!0,get:function(){return h.pack}}),Object.defineProperty(t,"soliditySha256",{enumerable:!0,get:function(){return h.sha256}});var y=M9e;Object.defineProperty(t,"randomBytes",{enumerable:!0,get:function(){return y.randomBytes}}),Object.defineProperty(t,"shuffled",{enumerable:!0,get:function(){return y.shuffled}});var E=D9e;Object.defineProperty(t,"checkProperties",{enumerable:!0,get:function(){return E.checkProperties}}),Object.defineProperty(t,"deepCopy",{enumerable:!0,get:function(){return E.deepCopy}}),Object.defineProperty(t,"defineReadOnly",{enumerable:!0,get:function(){return E.defineReadOnly}}),Object.defineProperty(t,"getStatic",{enumerable:!0,get:function(){return E.getStatic}}),Object.defineProperty(t,"resolveProperties",{enumerable:!0,get:function(){return E.resolveProperties}}),Object.defineProperty(t,"shallowCopy",{enumerable:!0,get:function(){return E.shallowCopy}});var S=n(j9e);t.RLP=S;var C=L9e;Object.defineProperty(t,"computePublicKey",{enumerable:!0,get:function(){return C.computePublicKey}}),Object.defineProperty(t,"recoverPublicKey",{enumerable:!0,get:function(){return C.recoverPublicKey}}),Object.defineProperty(t,"SigningKey",{enumerable:!0,get:function(){return C.SigningKey}});var _=vF;Object.defineProperty(t,"formatBytes32String",{enumerable:!0,get:function(){return _.formatBytes32String}}),Object.defineProperty(t,"nameprep",{enumerable:!0,get:function(){return _.nameprep}}),Object.defineProperty(t,"parseBytes32String",{enumerable:!0,get:function(){return _.parseBytes32String}}),Object.defineProperty(t,"_toEscapedUtf8String",{enumerable:!0,get:function(){return _._toEscapedUtf8String}}),Object.defineProperty(t,"toUtf8Bytes",{enumerable:!0,get:function(){return _.toUtf8Bytes}}),Object.defineProperty(t,"toUtf8CodePoints",{enumerable:!0,get:function(){return _.toUtf8CodePoints}}),Object.defineProperty(t,"toUtf8String",{enumerable:!0,get:function(){return _.toUtf8String}}),Object.defineProperty(t,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return _.Utf8ErrorFuncs}});var T=F9e;Object.defineProperty(t,"accessListify",{enumerable:!0,get:function(){return T.accessListify}}),Object.defineProperty(t,"computeAddress",{enumerable:!0,get:function(){return T.computeAddress}}),Object.defineProperty(t,"parseTransaction",{enumerable:!0,get:function(){return T.parse}}),Object.defineProperty(t,"recoverAddress",{enumerable:!0,get:function(){return T.recoverAddress}}),Object.defineProperty(t,"serializeTransaction",{enumerable:!0,get:function(){return T.serialize}}),Object.defineProperty(t,"TransactionTypes",{enumerable:!0,get:function(){return T.TransactionTypes}});var P=$9e;Object.defineProperty(t,"commify",{enumerable:!0,get:function(){return P.commify}}),Object.defineProperty(t,"formatEther",{enumerable:!0,get:function(){return P.formatEther}}),Object.defineProperty(t,"parseEther",{enumerable:!0,get:function(){return P.parseEther}}),Object.defineProperty(t,"formatUnits",{enumerable:!0,get:function(){return P.formatUnits}}),Object.defineProperty(t,"parseUnits",{enumerable:!0,get:function(){return P.parseUnits}});var D=q9e;Object.defineProperty(t,"verifyMessage",{enumerable:!0,get:function(){return D.verifyMessage}}),Object.defineProperty(t,"verifyTypedData",{enumerable:!0,get:function(){return D.verifyTypedData}});var L=H9e;Object.defineProperty(t,"_fetchData",{enumerable:!0,get:function(){return L._fetchData}}),Object.defineProperty(t,"fetchJson",{enumerable:!0,get:function(){return L.fetchJson}}),Object.defineProperty(t,"poll",{enumerable:!0,get:function(){return L.poll}});var I=wF;Object.defineProperty(t,"SupportedAlgorithm",{enumerable:!0,get:function(){return I.SupportedAlgorithm}});var U=vF;Object.defineProperty(t,"UnicodeNormalizationForm",{enumerable:!0,get:function(){return U.UnicodeNormalizationForm}}),Object.defineProperty(t,"Utf8ErrorReason",{enumerable:!0,get:function(){return U.Utf8ErrorReason}})})(od)),od}var W9e=z9e();const cy={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,r]=await Promise.all([cy.getAddresses(t),cy.getChainId(t)]);return{chainId:r,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){const r=e.rpcUrls.chainDefault?.http||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:cy.numberToHexString(e.id),rpcUrls:[...r],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[e.blockExplorers?.default.url],iconUrls:[ii.NetworkImageIds[e.id]]}]})}};class yB{constructor(){this.initialized=!1}async getProvider(){return Promise.resolve(this.provider)}}class V9e extends yB{async initialize(){const e=J.getCaipNetworks(),{metadata:r,coinbasePreference:n}=we.state;try{const{createBaseAccountSDK:s}=await Cr(async()=>{const{createBaseAccountSDK:o}=await import("./index-Blr2TCnh.js");return{createBaseAccountSDK:o}},__vite__mapDeps([57,1,2]));if(typeof window>"u")return Promise.resolve();const i=s({appName:r?.name,appLogoUrl:r?.icons[0],appChainIds:e?.map(o=>o.id)||[1,84532],preference:{options:n??"all"}});return this.provider=i.getProvider(),this.initialized=!0,Promise.resolve()}catch(s){return console.error("Failed to import Coinbase Wallet SDK:",s),Promise.resolve()}}async getProvider(){return Promise.resolve(this.provider)}}var LP={},Qb={},ad={},Lg={},bp={},ew={},tw={},_F;function sse(){if(_F)return tw;_F=1,Object.defineProperty(tw,"__esModule",{value:!0}),tw.getSDKVersion=void 0;const t=()=>"9.1.0";return tw.getSDKVersion=t,tw}var rw={},AF;function G9e(){if(AF)return rw;AF=1,Object.defineProperty(rw,"__esModule",{value:!0}),rw.generateRequestId=void 0;const t=n=>n.toString(16).padStart(2,"0"),e=n=>{const s=new Uint8Array(n/2);return window.crypto.getRandomValues(s),Array.from(s,t).join("")},r=()=>typeof window<"u"?e(10):new Date().getTime().toString(36);return rw.generateRequestId=r,rw}var xF;function ise(){if(xF)return ew;xF=1,Object.defineProperty(ew,"__esModule",{value:!0}),ew.MessageFormatter=void 0;const t=sse(),e=G9e();class r{}return ew.MessageFormatter=r,r.makeRequest=(n,s)=>({id:(0,e.generateRequestId)(),method:n,params:s,env:{sdkVersion:(0,t.getSDKVersion)()}}),r.makeResponse=(n,s,i)=>({id:n,success:!0,version:i,data:s}),r.makeErrorResponse=(n,s,i)=>({id:n,success:!1,error:s,version:i}),ew}var wp={},CF;function og(){if(CF)return wp;CF=1,Object.defineProperty(wp,"__esModule",{value:!0}),wp.RestrictedMethods=wp.Methods=void 0;var t;(function(r){r.sendTransactions="sendTransactions",r.rpcCall="rpcCall",r.getChainInfo="getChainInfo",r.getSafeInfo="getSafeInfo",r.getTxBySafeTxHash="getTxBySafeTxHash",r.getSafeBalances="getSafeBalances",r.signMessage="signMessage",r.signTypedMessage="signTypedMessage",r.getEnvironmentInfo="getEnvironmentInfo",r.getOffChainSignature="getOffChainSignature",r.requestAddressBook="requestAddressBook",r.wallet_getPermissions="wallet_getPermissions",r.wallet_requestPermissions="wallet_requestPermissions"})(t||(wp.Methods=t={}));var e;return(function(r){r.requestAddressBook="requestAddressBook"})(e||(wp.RestrictedMethods=e={})),wp}var SF;function K9e(){return SF||(SF=1,(function(t){var e=bp&&bp.__createBinding||(Object.create?(function(i,o,a,c){c===void 0&&(c=a);var u=Object.getOwnPropertyDescriptor(o,a);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(i,c,u)}):(function(i,o,a,c){c===void 0&&(c=a),i[c]=o[a]})),r=bp&&bp.__exportStar||function(i,o){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,i,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=ise();class s{constructor(o=null,a=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:c,data:u,source:l})=>{const d=!u,f=!this.isServer&&l===window.parent,p=typeof u.version<"u"&&parseInt(u.version.split(".")[0]),g=typeof p=="number"&&p>=1;let h=!0;return Array.isArray(this.allowedOrigins)&&(h=this.allowedOrigins.find(y=>y.test(c))!==void 0),!d&&f&&g&&h},this.logIncomingMessage=c=>{console.info(`Safe Apps SDK v1: A message was received from origin ${c.origin}. `,c.data)},this.onParentMessage=c=>{this.isValidMessage(c)&&(this.debugMode&&this.logIncomingMessage(c),this.handleIncomingMessage(c.data))},this.handleIncomingMessage=c=>{const{id:u}=c,l=this.callbacks.get(u);l&&(l(c),this.callbacks.delete(u))},this.send=(c,u)=>{const l=n.MessageFormatter.makeRequest(c,u);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(l,"*"),new Promise((d,f)=>{this.callbacks.set(l.id,p=>{if(!p.success){f(new Error(p.error));return}d(p)})})},this.allowedOrigins=o,this.debugMode=a,this.isServer||window.addEventListener("message",this.onParentMessage)}}t.default=s,r(og(),t)})(bp)),bp}var nw={},vp={},sw={},IF;function Z9e(){if(IF)return sw;IF=1,Object.defineProperty(sw,"__esModule",{value:!0}),sw.isObjectEIP712TypedData=void 0;const t=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;return sw.isObjectEIP712TypedData=t,sw}var FP={},TF;function Y9e(){return TF||(TF=1,Object.defineProperty(FP,"__esModule",{value:!0})),FP}var $P={},Ep={},_p={},cd={},NF;function J9e(){if(NF)return cd;NF=1;var t=cd&&cd.__awaiter||function(c,u,l,d){function f(p){return p instanceof l?p:new l(function(g){g(p)})}return new(l||(l=Promise))(function(p,g){function h(S){try{E(d.next(S))}catch(C){g(C)}}function y(S){try{E(d.throw(S))}catch(C){g(C)}}function E(S){S.done?p(S.value):f(S.value).then(h,y)}E((d=d.apply(c,u||[])).next())})};Object.defineProperty(cd,"__esModule",{value:!0}),cd.insertParams=n,cd.stringifyQuery=s,cd.fetchData=o,cd.getData=a;const e=c=>typeof c=="object"&&c!==null&&("code"in c||"statusCode"in c)&&"message"in c;function r(c,u,l){return c.replace(new RegExp(`\\{${u}\\}`,"g"),l)}function n(c,u){return u?Object.keys(u).reduce((l,d)=>r(l,d,String(u[d])),c):c}function s(c){if(!c)return"";const u=new URLSearchParams;Object.keys(c).forEach(d=>{c[d]!=null&&u.append(d,String(c[d]))});const l=u.toString();return l?`?${l}`:""}function i(c){return t(this,void 0,void 0,function*(){var u;let l;try{l=yield c.json()}catch{l={}}if(!c.ok){const d=e(l)?`CGW error - ${(u=l.code)!==null&&u!==void 0?u:l.statusCode}: ${l.message}`:`CGW error - status ${c.statusText}`;throw new Error(d)}return l})}function o(c,u,l,d,f){return t(this,void 0,void 0,function*(){const p=Object.assign({"Content-Type":"application/json"},d),g={method:u??"POST",headers:p};f&&(g.credentials=f),l!=null&&(g.body=typeof l=="string"?l:JSON.stringify(l));const h=yield fetch(c,g);return i(h)})}function a(c,u,l){return t(this,void 0,void 0,function*(){const d={method:"GET"};u&&(d.headers=Object.assign(Object.assign({},u),{"Content-Type":"application/json"})),l&&(d.credentials=l);const f=yield fetch(c,d);return i(f)})}return cd}var PF;function X9e(){if(PF)return _p;PF=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.postEndpoint=r,_p.putEndpoint=n,_p.deleteEndpoint=s,_p.getEndpoint=i;const t=J9e();function e(o,a,c,u){const l=(0,t.insertParams)(a,c),d=(0,t.stringifyQuery)(u);return`${o}${l}${d}`}function r(o,a,c){const u=e(o,a,c?.path,c?.query);return(0,t.fetchData)(u,"POST",c?.body,c?.headers,c?.credentials)}function n(o,a,c){const u=e(o,a,c?.path,c?.query);return(0,t.fetchData)(u,"PUT",c?.body,c?.headers,c?.credentials)}function s(o,a,c){const u=e(o,a,c?.path,c?.query);return(0,t.fetchData)(u,"DELETE",c?.body,c?.headers,c?.credentials)}function i(o,a,c,u){if(u)return(0,t.getData)(u,void 0,c?.credentials);const l=e(o,a,c?.path,c?.query);return(0,t.getData)(l,c?.headers,c?.credentials)}return _p}var iw={},RF;function Q9e(){return RF||(RF=1,Object.defineProperty(iw,"__esModule",{value:!0}),iw.DEFAULT_BASE_URL=void 0,iw.DEFAULT_BASE_URL="https://safe-client.safe.global"),iw}var ow={},OF;function eUe(){if(OF)return ow;OF=1,Object.defineProperty(ow,"__esModule",{value:!0}),ow.ImplementationVersionState=void 0;var t;return(function(e){e.UP_TO_DATE="UP_TO_DATE",e.OUTDATED="OUTDATED",e.UNKNOWN="UNKNOWN"})(t||(ow.ImplementationVersionState=t={})),ow}var ud={},kF;function tUe(){if(kF)return ud;kF=1,Object.defineProperty(ud,"__esModule",{value:!0}),ud.SafeAppSocialPlatforms=ud.SafeAppFeatures=ud.SafeAppAccessPolicyTypes=void 0;var t;(function(n){n.NoRestrictions="NO_RESTRICTIONS",n.DomainAllowlist="DOMAIN_ALLOWLIST"})(t||(ud.SafeAppAccessPolicyTypes=t={}));var e;(function(n){n.BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS"})(e||(ud.SafeAppFeatures=e={}));var r;return(function(n){n.TWITTER="TWITTER",n.GITHUB="GITHUB",n.DISCORD="DISCORD",n.TELEGRAM="TELEGRAM"})(r||(ud.SafeAppSocialPlatforms=r={})),ud}var Cn={},BF;function rUe(){if(BF)return Cn;BF=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.LabelValue=Cn.StartTimeValue=Cn.DurationType=Cn.DetailedExecutionInfoType=Cn.TransactionListItemType=Cn.ConflictType=Cn.TransactionInfoType=Cn.SettingsInfoType=Cn.TransactionTokenType=Cn.TransferDirection=Cn.TransactionStatus=Cn.Operation=void 0;var t;(function(f){f[f.CALL=0]="CALL",f[f.DELEGATE=1]="DELEGATE"})(t||(Cn.Operation=t={}));var e;(function(f){f.AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",f.AWAITING_EXECUTION="AWAITING_EXECUTION",f.CANCELLED="CANCELLED",f.FAILED="FAILED",f.SUCCESS="SUCCESS"})(e||(Cn.TransactionStatus=e={}));var r;(function(f){f.INCOMING="INCOMING",f.OUTGOING="OUTGOING",f.UNKNOWN="UNKNOWN"})(r||(Cn.TransferDirection=r={}));var n;(function(f){f.ERC20="ERC20",f.ERC721="ERC721",f.NATIVE_COIN="NATIVE_COIN"})(n||(Cn.TransactionTokenType=n={}));var s;(function(f){f.SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",f.ADD_OWNER="ADD_OWNER",f.REMOVE_OWNER="REMOVE_OWNER",f.SWAP_OWNER="SWAP_OWNER",f.CHANGE_THRESHOLD="CHANGE_THRESHOLD",f.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",f.ENABLE_MODULE="ENABLE_MODULE",f.DISABLE_MODULE="DISABLE_MODULE",f.SET_GUARD="SET_GUARD",f.DELETE_GUARD="DELETE_GUARD"})(s||(Cn.SettingsInfoType=s={}));var i;(function(f){f.TRANSFER="Transfer",f.SETTINGS_CHANGE="SettingsChange",f.CUSTOM="Custom",f.CREATION="Creation",f.SWAP_ORDER="SwapOrder",f.TWAP_ORDER="TwapOrder",f.SWAP_TRANSFER="SwapTransfer",f.NATIVE_STAKING_DEPOSIT="NativeStakingDeposit",f.NATIVE_STAKING_VALIDATORS_EXIT="NativeStakingValidatorsExit",f.NATIVE_STAKING_WITHDRAW="NativeStakingWithdraw"})(i||(Cn.TransactionInfoType=i={}));var o;(function(f){f.NONE="None",f.HAS_NEXT="HasNext",f.END="End"})(o||(Cn.ConflictType=o={}));var a;(function(f){f.TRANSACTION="TRANSACTION",f.LABEL="LABEL",f.CONFLICT_HEADER="CONFLICT_HEADER",f.DATE_LABEL="DATE_LABEL"})(a||(Cn.TransactionListItemType=a={}));var c;(function(f){f.MULTISIG="MULTISIG",f.MODULE="MODULE"})(c||(Cn.DetailedExecutionInfoType=c={}));var u;(function(f){f.AUTO="AUTO",f.LIMIT_DURATION="LIMIT_DURATION"})(u||(Cn.DurationType=u={}));var l;(function(f){f.AT_MINING_TIME="AT_MINING_TIME",f.AT_EPOCH="AT_EPOCH"})(l||(Cn.StartTimeValue=l={}));var d;return(function(f){f.Queued="Queued",f.Next="Next"})(d||(Cn.LabelValue=d={})),Cn}var ld={},UF;function nUe(){if(UF)return ld;UF=1,Object.defineProperty(ld,"__esModule",{value:!0}),ld.FEATURES=ld.GAS_PRICE_TYPE=ld.RPC_AUTHENTICATION=void 0;var t;(function(n){n.API_KEY_PATH="API_KEY_PATH",n.NO_AUTHENTICATION="NO_AUTHENTICATION",n.UNKNOWN="UNKNOWN"})(t||(ld.RPC_AUTHENTICATION=t={}));var e;(function(n){n.ORACLE="ORACLE",n.FIXED="FIXED",n.FIXED_1559="FIXED1559",n.UNKNOWN="UNKNOWN"})(e||(ld.GAS_PRICE_TYPE=e={}));var r;return(function(n){n.ERC721="ERC721",n.SAFE_APPS="SAFE_APPS",n.CONTRACT_INTERACTION="CONTRACT_INTERACTION",n.DOMAIN_LOOKUP="DOMAIN_LOOKUP",n.SPENDING_LIMIT="SPENDING_LIMIT",n.EIP1559="EIP1559",n.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",n.TX_SIMULATION="TX_SIMULATION",n.EIP1271="EIP1271"})(r||(ld.FEATURES=r={})),ld}var aw={},MF;function sUe(){if(MF)return aw;MF=1,Object.defineProperty(aw,"__esModule",{value:!0}),aw.TokenType=void 0;var t;return(function(e){e.ERC20="ERC20",e.ERC721="ERC721",e.NATIVE_TOKEN="NATIVE_TOKEN",e.UNKNOWN="UNKNOWN"})(t||(aw.TokenType=t={})),aw}var qP={},DF;function iUe(){return DF||(DF=1,Object.defineProperty(qP,"__esModule",{value:!0})),qP}var Ap={},jF;function oUe(){if(jF)return Ap;jF=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.NativeStakingStatus=Ap.ConfirmationViewTypes=void 0;var t;(function(r){r.GENERIC="GENERIC",r.COW_SWAP_ORDER="COW_SWAP_ORDER",r.COW_SWAP_TWAP_ORDER="COW_SWAP_TWAP_ORDER",r.KILN_NATIVE_STAKING_DEPOSIT="KILN_NATIVE_STAKING_DEPOSIT",r.KILN_NATIVE_STAKING_VALIDATORS_EXIT="KILN_NATIVE_STAKING_VALIDATORS_EXIT",r.KILN_NATIVE_STAKING_WITHDRAW="KILN_NATIVE_STAKING_WITHDRAW"})(t||(Ap.ConfirmationViewTypes=t={}));var e;return(function(r){r.NOT_STAKED="NOT_STAKED",r.ACTIVATING="ACTIVATING",r.DEPOSIT_IN_PROGRESS="DEPOSIT_IN_PROGRESS",r.ACTIVE="ACTIVE",r.EXIT_REQUESTED="EXIT_REQUESTED",r.EXITING="EXITING",r.EXITED="EXITED",r.SLASHED="SLASHED"})(e||(Ap.NativeStakingStatus=e={})),Ap}var xp={},LF;function aUe(){if(LF)return xp;LF=1,Object.defineProperty(xp,"__esModule",{value:!0}),xp.SafeMessageStatus=xp.SafeMessageListItemType=void 0;var t;(function(r){r.DATE_LABEL="DATE_LABEL",r.MESSAGE="MESSAGE"})(t||(xp.SafeMessageListItemType=t={}));var e;return(function(r){r.NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",r.CONFIRMED="CONFIRMED"})(e||(xp.SafeMessageStatus=e={})),xp}var cw={},FF;function cUe(){if(FF)return cw;FF=1,Object.defineProperty(cw,"__esModule",{value:!0}),cw.DeviceType=void 0;var t;return(function(e){e.ANDROID="ANDROID",e.IOS="IOS",e.WEB="WEB"})(t||(cw.DeviceType=t={})),cw}var HP={},$F;function uUe(){return $F||($F=1,Object.defineProperty(HP,"__esModule",{value:!0})),HP}var qF;function lUe(){return qF||(qF=1,(function(t){var e=Ep&&Ep.__createBinding||(Object.create?(function(ge,ve,V,q){q===void 0&&(q=V);var z=Object.getOwnPropertyDescriptor(ve,V);(!z||("get"in z?!ve.__esModule:z.writable||z.configurable))&&(z={enumerable:!0,get:function(){return ve[V]}}),Object.defineProperty(ge,q,z)}):(function(ge,ve,V,q){q===void 0&&(q=V),ge[q]=ve[V]})),r=Ep&&Ep.__exportStar||function(ge,ve){for(var V in ge)V!=="default"&&!Object.prototype.hasOwnProperty.call(ve,V)&&e(ve,ge,V)};Object.defineProperty(t,"__esModule",{value:!0}),t.setBaseUrl=void 0,t.relayTransaction=a,t.getRelayCount=c,t.getSafeInfo=u,t.getIncomingTransfers=l,t.getModuleTransactions=d,t.getMultisigTransactions=f,t.getBalances=p,t.getFiatCurrencies=g,t.getOwnedSafes=h,t.getAllOwnedSafes=y,t.getCollectibles=E,t.getCollectiblesPage=S,t.getTransactionHistory=C,t.getTransactionQueue=_,t.getTransactionDetails=T,t.deleteTransaction=P,t.postSafeGasEstimation=D,t.getNonces=L,t.proposeTransaction=I,t.getConfirmationView=U,t.getTxPreview=F,t.getChainsConfig=B,t.getChainConfig=A,t.getSafeApps=m,t.getMasterCopies=b,t.getDecodedData=w,t.getSafeMessages=x,t.getSafeMessage=M,t.proposeSafeMessage=k,t.confirmSafeMessage=j,t.getDelegates=N,t.registerDevice=v,t.unregisterSafe=R,t.unregisterDevice=$,t.registerEmail=O,t.changeEmail=H,t.resendEmailVerificationCode=W,t.verifyEmail=G,t.getRegisteredEmail=K,t.deleteRegisteredEmail=Q,t.registerRecoveryModule=re,t.unsubscribeSingle=de,t.unsubscribeAll=le,t.getSafeOverviews=se,t.getContract=be,t.getAuthNonce=We,t.verifyAuth=Ne,t.createAccount=Be,t.getAccount=At,t.deleteAccount=Ee,t.getAccountDataTypes=fe,t.getAccountDataSettings=Mt,t.putAccountDataSettings=bt,t.getIndexingStatus=jt;const n=X9e(),s=Q9e();r(eUe(),t),r(tUe(),t),r(rUe(),t),r(nUe(),t),r(sUe(),t),r(iUe(),t),r(oUe(),t),r(aUe(),t),r(cUe(),t),r(uUe(),t);let i=s.DEFAULT_BASE_URL;const o=ge=>{i=ge};t.setBaseUrl=o;function a(ge,ve){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/relay",{path:{chainId:ge},body:ve})}function c(ge,ve){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/relay/{address}",{path:{chainId:ge,address:ve}})}function u(ge,ve){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:ge,address:ve}})}function l(ge,ve,V,q){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:ge,address:ve},query:V},q)}function d(ge,ve,V,q){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:ge,address:ve},query:V},q)}function f(ge,ve,V,q){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:ge,address:ve},query:V},q)}function p(ge,ve,V="usd",q={}){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:ge,address:ve,currency:V},query:q})}function g(){return(0,n.getEndpoint)(i,"/v1/balances/supported-fiat-codes")}function h(ge,ve){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:ge,address:ve}})}function y(ge){return(0,n.getEndpoint)(i,"/v1/owners/{address}/safes",{path:{address:ge}})}function E(ge,ve,V={}){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:ge,address:ve},query:V})}function S(ge,ve,V={},q){return(0,n.getEndpoint)(i,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:ge,address:ve},query:V},q)}function C(ge,ve,V={},q){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:ge,safe_address:ve},query:V},q)}function _(ge,ve,V={},q){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:ge,safe_address:ve},query:V},q)}function T(ge,ve){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:ge,transactionId:ve}})}function P(ge,ve,V){return(0,n.deleteEndpoint)(i,"/v1/chains/{chainId}/transactions/{safeTxHash}",{path:{chainId:ge,safeTxHash:ve},body:{signature:V}})}function D(ge,ve,V){return(0,n.postEndpoint)(i,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:ge,safe_address:ve},body:V})}function L(ge,ve){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/nonces",{path:{chainId:ge,safe_address:ve}})}function I(ge,ve,V){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:ge,safe_address:ve},body:V})}function U(ge,ve,V,q,z,X){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/views/transaction-confirmation",{path:{chainId:ge,safe_address:ve},body:{operation:V,data:q,to:z,value:X}})}function F(ge,ve,V,q,z,X){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/transactions/{safe_address}/preview",{path:{chainId:ge,safe_address:ve},body:{operation:V,data:q,to:z,value:X}})}function B(ge){return(0,n.getEndpoint)(i,"/v1/chains",{query:ge})}function A(ge){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}",{path:{chainId:ge}})}function m(ge,ve={}){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safe-apps",{path:{chainId:ge},query:ve})}function b(ge){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:ge}})}function w(ge,ve,V,q){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/data-decoder",{path:{chainId:ge},body:{operation:ve,data:V,to:q}})}function x(ge,ve,V){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:ge,safe_address:ve},query:{}},V)}function M(ge,ve){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:ge,message_hash:ve}})}function k(ge,ve,V){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:ge,safe_address:ve},body:V})}function j(ge,ve,V){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:ge,message_hash:ve},body:V})}function N(ge,ve={}){return(0,n.getEndpoint)(i,"/v2/chains/{chainId}/delegates",{path:{chainId:ge},query:ve})}function v(ge){return(0,n.postEndpoint)(i,"/v1/register/notifications",{body:ge})}function R(ge,ve,V){return(0,n.deleteEndpoint)(i,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:ge,safe_address:ve,uuid:V}})}function $(ge,ve){return(0,n.deleteEndpoint)(i,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:ge,uuid:ve}})}function O(ge,ve,V,q){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails",{path:{chainId:ge,safe_address:ve},body:V,headers:q})}function H(ge,ve,V,q,z){return(0,n.putEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:ge,safe_address:ve,signer:V},body:q,headers:z})}function W(ge,ve,V){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify-resend",{path:{chainId:ge,safe_address:ve,signer:V},body:""})}function G(ge,ve,V,q){return(0,n.putEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify",{path:{chainId:ge,safe_address:ve,signer:V},body:q})}function K(ge,ve,V,q){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:ge,safe_address:ve,signer:V},headers:q})}function Q(ge,ve,V,q){return(0,n.deleteEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:ge,safe_address:ve,signer:V},headers:q})}function re(ge,ve,V){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/recovery",{path:{chainId:ge,safe_address:ve},body:V})}function de(ge){return(0,n.deleteEndpoint)(i,"/v1/subscriptions",{query:ge})}function le(ge){return(0,n.deleteEndpoint)(i,"/v1/subscriptions/all",{query:ge})}function se(ge,ve){return(0,n.getEndpoint)(i,"/v1/safes",{query:Object.assign(Object.assign({},ve),{safes:ge.join(",")})})}function be(ge,ve){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/contracts/{contractAddress}",{path:{chainId:ge,contractAddress:ve}})}function We(){return(0,n.getEndpoint)(i,"/v1/auth/nonce",{credentials:"include"})}function Ne(ge){return(0,n.postEndpoint)(i,"/v1/auth/verify",{body:ge,credentials:"include"})}function Be(ge){return(0,n.postEndpoint)(i,"/v1/accounts",{body:ge,credentials:"include"})}function At(ge){return(0,n.getEndpoint)(i,"/v1/accounts/{address}",{path:{address:ge},credentials:"include"})}function Ee(ge){return(0,n.deleteEndpoint)(i,"/v1/accounts/{address}",{path:{address:ge},credentials:"include"})}function fe(){return(0,n.getEndpoint)(i,"/v1/accounts/data-types")}function Mt(ge){return(0,n.getEndpoint)(i,"/v1/accounts/{address}/data-settings",{path:{address:ge},credentials:"include"})}function bt(ge,ve){return(0,n.putEndpoint)(i,"/v1/accounts/{address}/data-settings",{path:{address:ge},body:ve,credentials:"include"})}function jt(ge){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/about/indexing",{path:{chainId:ge}})}})(Ep)),Ep}var HF;function dUe(){return HF||(HF=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TransferDirection=t.TransactionStatus=t.TokenType=t.Operation=void 0;var e=lUe();Object.defineProperty(t,"Operation",{enumerable:!0,get:function(){return e.Operation}}),Object.defineProperty(t,"TokenType",{enumerable:!0,get:function(){return e.TokenType}}),Object.defineProperty(t,"TransactionStatus",{enumerable:!0,get:function(){return e.TransactionStatus}}),Object.defineProperty(t,"TransferDirection",{enumerable:!0,get:function(){return e.TransferDirection}})})($P)),$P}var zP={},zF;function fUe(){return zF||(zF=1,Object.defineProperty(zP,"__esModule",{value:!0}),og()),zP}var WF;function bB(){return WF||(WF=1,(function(t){var e=vp&&vp.__createBinding||(Object.create?(function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}):(function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]})),r=vp&&vp.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(Z9e(),t),r(Y9e(),t),r(dUe(),t),r(fUe(),t)})(vp)),vp}var VF;function hUe(){if(VF)return nw;VF=1,Object.defineProperty(nw,"__esModule",{value:!0}),nw.TXs=void 0;const t=og(),e=bB();class r{constructor(s){this.communicator=s}async getBySafeTxHash(s){if(!s)throw new Error("Invalid safeTxHash");return(await this.communicator.send(t.Methods.getTxBySafeTxHash,{safeTxHash:s})).data}async signMessage(s){const i={message:s};return(await this.communicator.send(t.Methods.signMessage,i)).data}async signTypedMessage(s){if(!(0,e.isObjectEIP712TypedData)(s))throw new Error("Invalid typed data");return(await this.communicator.send(t.Methods.signTypedMessage,{typedData:s})).data}async send({txs:s,params:i}){if(!s||!s.length)throw new Error("No transactions were passed");const o={txs:s,params:i};return(await this.communicator.send(t.Methods.sendTransactions,o)).data}}return nw.TXs=r,nw}var uw={},lw={},GF;function wB(){return GF||(GF=1,Object.defineProperty(lw,"__esModule",{value:!0}),lw.RPC_CALLS=void 0,lw.RPC_CALLS={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"}),lw}var KF;function pUe(){if(KF)return uw;KF=1,Object.defineProperty(uw,"__esModule",{value:!0}),uw.Eth=void 0;const t=wB(),e=og(),r={defaultBlockParam:(s="latest")=>s,returnFullTxObjectParam:(s=!1)=>s,blockNumberToHex:s=>Number.isInteger(s)?`0x${s.toString(16)}`:s};class n{constructor(i){this.communicator=i,this.call=this.buildRequest({call:t.RPC_CALLS.eth_call,formatters:[null,r.defaultBlockParam]}),this.getBalance=this.buildRequest({call:t.RPC_CALLS.eth_getBalance,formatters:[null,r.defaultBlockParam]}),this.getCode=this.buildRequest({call:t.RPC_CALLS.eth_getCode,formatters:[null,r.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:t.RPC_CALLS.eth_getStorageAt,formatters:[null,r.blockNumberToHex,r.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:t.RPC_CALLS.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:t.RPC_CALLS.eth_getBlockByHash,formatters:[null,r.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:t.RPC_CALLS.eth_getBlockByNumber,formatters:[r.blockNumberToHex,r.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:t.RPC_CALLS.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:t.RPC_CALLS.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:t.RPC_CALLS.eth_getTransactionCount,formatters:[null,r.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:t.RPC_CALLS.eth_gasPrice}),this.getEstimateGas=o=>this.buildRequest({call:t.RPC_CALLS.eth_estimateGas})([o]),this.setSafeSettings=this.buildRequest({call:t.RPC_CALLS.safe_setSettings})}buildRequest(i){const{call:o,formatters:a}=i;return async c=>{a&&Array.isArray(c)&&a.forEach((d,f)=>{d&&(c[f]=d(c[f]))});const u={call:o,params:c||[]};return(await this.communicator.send(e.Methods.rpcCall,u)).data}}}return uw.Eth=n,uw}var dd={},WP={},VP={},dw={},fw={},ZF;function gUe(){return ZF||(ZF=1,Object.defineProperty(fw,"__esModule",{value:!0}),fw.version=void 0,fw.version="1.1.0"),fw}var YF;function nb(){if(YF)return dw;YF=1,Object.defineProperty(dw,"__esModule",{value:!0}),dw.BaseError=void 0;const t=gUe();class e extends Error{constructor(n,s={}){const i=s.cause instanceof e?s.cause.details:s.cause?.message?s.cause.message:s.details,o=s.cause instanceof e&&s.cause.docsPath||s.docsPath,a=[n||"An error occurred.","",...s.metaMessages?[...s.metaMessages,""]:[],...o?[`Docs: https://abitype.dev${o}`]:[],...i?[`Details: ${i}`]:[],`Version: abitype@${t.version}`].join(`
`);super(a),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),s.cause&&(this.cause=s.cause),this.details=i,this.docsPath=o,this.metaMessages=s.metaMessages,this.shortMessage=n}}return dw.BaseError=e,dw}var k2={},JF;function mUe(){if(JF)return k2;JF=1,Object.defineProperty(k2,"__esModule",{value:!0}),k2.narrow=t;function t(e){return e}return k2}var B2={},U2={},M2={},D2={},il={},XF;function C5(){if(XF)return il;XF=1,Object.defineProperty(il,"__esModule",{value:!0}),il.isTupleRegex=il.integerRegex=il.bytesRegex=void 0,il.execTyped=t;function t(e,r){return e.exec(r)?.groups}return il.bytesRegex=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,il.integerRegex=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,il.isTupleRegex=/^\(.+?\).*?$/,il}var QF;function ose(){if(QF)return D2;QF=1,Object.defineProperty(D2,"__esModule",{value:!0}),D2.formatAbiParameter=r;const t=C5(),e=/^tuple(?<array>(\[(\d*)\])*)$/;function r(n){let s=n.type;if(e.test(n.type)&&"components"in n){s="(";const i=n.components.length;for(let a=0;a<i;a++){const c=n.components[a];s+=r(c),a<i-1&&(s+=", ")}const o=(0,t.execTyped)(e,n.type);return s+=`)${o?.array??""}`,r({...n,type:s})}return"indexed"in n&&n.indexed&&(s=`${s} indexed`),n.name?`${s} ${n.name}`:s}return D2}var e$;function ase(){if(e$)return M2;e$=1,Object.defineProperty(M2,"__esModule",{value:!0}),M2.formatAbiParameters=e;const t=ose();function e(r){let n="";const s=r.length;for(let i=0;i<s;i++){const o=r[i];n+=(0,t.formatAbiParameter)(o),i!==s-1&&(n+=", ")}return n}return M2}var t$;function cse(){if(t$)return U2;t$=1,Object.defineProperty(U2,"__esModule",{value:!0}),U2.formatAbiItem=e;const t=ase();function e(r){return r.type==="function"?`function ${r.name}(${(0,t.formatAbiParameters)(r.inputs)})${r.stateMutability&&r.stateMutability!=="nonpayable"?` ${r.stateMutability}`:""}${r.outputs?.length?` returns (${(0,t.formatAbiParameters)(r.outputs)})`:""}`:r.type==="event"?`event ${r.name}(${(0,t.formatAbiParameters)(r.inputs)})`:r.type==="error"?`error ${r.name}(${(0,t.formatAbiParameters)(r.inputs)})`:r.type==="constructor"?`constructor(${(0,t.formatAbiParameters)(r.inputs)})${r.stateMutability==="payable"?" payable":""}`:r.type==="fallback"?`fallback() external${r.stateMutability==="payable"?" payable":""}`:"receive() external payable"}return U2}var r$;function yUe(){if(r$)return B2;r$=1,Object.defineProperty(B2,"__esModule",{value:!0}),B2.formatAbi=e;const t=cse();function e(r){const n=[],s=r.length;for(let i=0;i<s;i++){const o=r[i],a=(0,t.formatAbiItem)(o);n.push(a)}return n}return B2}var j2={},cs={},n$;function sb(){if(n$)return cs;n$=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.functionModifiers=cs.eventModifiers=cs.modifiers=void 0,cs.isErrorSignature=r,cs.execErrorSignature=n,cs.isEventSignature=i,cs.execEventSignature=o,cs.isFunctionSignature=c,cs.execFunctionSignature=u,cs.isStructSignature=d,cs.execStructSignature=f,cs.isConstructorSignature=g,cs.execConstructorSignature=h,cs.isFallbackSignature=E,cs.execFallbackSignature=S,cs.isReceiveSignature=_;const t=C5(),e=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function r(T){return e.test(T)}function n(T){return(0,t.execTyped)(e,T)}const s=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function i(T){return s.test(T)}function o(T){return(0,t.execTyped)(s,T)}const a=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function c(T){return a.test(T)}function u(T){return(0,t.execTyped)(a,T)}const l=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function d(T){return l.test(T)}function f(T){return(0,t.execTyped)(l,T)}const p=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function g(T){return p.test(T)}function h(T){return(0,t.execTyped)(p,T)}const y=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function E(T){return y.test(T)}function S(T){return(0,t.execTyped)(y,T)}const C=/^receive\(\) external payable$/;function _(T){return C.test(T)}return cs.modifiers=new Set(["memory","indexed","storage","calldata"]),cs.eventModifiers=new Set(["indexed"]),cs.functionModifiers=new Set(["calldata","memory","storage"]),cs}var L2={},fd={},s$;function S5(){if(s$)return fd;s$=1,Object.defineProperty(fd,"__esModule",{value:!0}),fd.UnknownSolidityTypeError=fd.UnknownTypeError=fd.InvalidAbiItemError=void 0;const t=nb();class e extends t.BaseError{constructor({signature:i}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(i,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}fd.InvalidAbiItemError=e;class r extends t.BaseError{constructor({type:i}){super("Unknown type.",{metaMessages:[`Type "${i}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}fd.UnknownTypeError=r;class n extends t.BaseError{constructor({type:i}){super("Unknown type.",{metaMessages:[`Type "${i}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}return fd.UnknownSolidityTypeError=n,fd}var bi={},i$;function i_(){if(i$)return bi;i$=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.InvalidAbiTypeParameterError=bi.InvalidFunctionModifierError=bi.InvalidModifierError=bi.SolidityProtectedKeywordError=bi.InvalidParameterError=bi.InvalidAbiParametersError=bi.InvalidAbiParameterError=void 0;const t=nb();class e extends t.BaseError{constructor({param:u}){super("Failed to parse ABI parameter.",{details:`parseAbiParameter(${JSON.stringify(u,null,2)})`,docsPath:"/api/human#parseabiparameter-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParameterError"})}}bi.InvalidAbiParameterError=e;class r extends t.BaseError{constructor({params:u}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(u,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}bi.InvalidAbiParametersError=r;class n extends t.BaseError{constructor({param:u}){super("Invalid ABI parameter.",{details:u}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}bi.InvalidParameterError=n;class s extends t.BaseError{constructor({param:u,name:l}){super("Invalid ABI parameter.",{details:u,metaMessages:[`"${l}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}bi.SolidityProtectedKeywordError=s;class i extends t.BaseError{constructor({param:u,type:l,modifier:d}){super("Invalid ABI parameter.",{details:u,metaMessages:[`Modifier "${d}" not allowed${l?` in "${l}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}bi.InvalidModifierError=i;class o extends t.BaseError{constructor({param:u,type:l,modifier:d}){super("Invalid ABI parameter.",{details:u,metaMessages:[`Modifier "${d}" not allowed${l?` in "${l}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${d}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}bi.InvalidFunctionModifierError=o;class a extends t.BaseError{constructor({abiParameter:u}){super("Invalid ABI parameter.",{details:JSON.stringify(u,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}return bi.InvalidAbiTypeParameterError=a,bi}var hd={},o$;function vB(){if(o$)return hd;o$=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.InvalidStructSignatureError=hd.UnknownSignatureError=hd.InvalidSignatureError=void 0;const t=nb();class e extends t.BaseError{constructor({signature:i,type:o}){super(`Invalid ${o} signature.`,{details:i}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}hd.InvalidSignatureError=e;class r extends t.BaseError{constructor({signature:i}){super("Unknown signature.",{details:i}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}hd.UnknownSignatureError=r;class n extends t.BaseError{constructor({signature:i}){super("Invalid struct signature.",{details:i,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}return hd.InvalidStructSignatureError=n,hd}var hw={},a$;function use(){if(a$)return hw;a$=1,Object.defineProperty(hw,"__esModule",{value:!0}),hw.CircularReferenceError=void 0;const t=nb();class e extends t.BaseError{constructor({type:n}){super("Circular reference detected.",{metaMessages:[`Struct "${n}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}return hw.CircularReferenceError=e,hw}var Yo={},pw={},c$;function lse(){if(c$)return pw;c$=1,Object.defineProperty(pw,"__esModule",{value:!0}),pw.InvalidParenthesisError=void 0;const t=nb();class e extends t.BaseError{constructor({current:n,depth:s}){super("Unbalanced parentheses.",{metaMessages:[`"${n.trim()}" has too many ${s>0?"opening":"closing"} parentheses.`],details:`Depth "${s}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}return pw.InvalidParenthesisError=e,pw}var Fg={},u$;function bUe(){if(u$)return Fg;u$=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.parameterCache=void 0,Fg.getParameterCacheKey=t;function t(e,r,n){let s="";if(n)for(const i of Object.entries(n)){if(!i)continue;let o="";for(const a of i[1])o+=`[${a.type}${a.name?`:${a.name}`:""}]`;s+=`(${i[0]}{${o}})`}return r?`${r}:${e}${s}`:e}return Fg.parameterCache=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]),Fg}var l$;function By(){if(l$)return Yo;l$=1,Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.parseSignature=a,Yo.parseFunctionSignature=c,Yo.parseEventSignature=u,Yo.parseErrorSignature=l,Yo.parseConstructorSignature=d,Yo.parseFallbackSignature=f,Yo.parseAbiParameter=y,Yo.splitParameters=E,Yo.isSolidityType=S,Yo.isSolidityKeyword=_,Yo.isValidDataLocation=T;const t=C5(),e=S5(),r=i_(),n=vB(),s=lse(),i=bUe(),o=sb();function a(P,D={}){if((0,o.isFunctionSignature)(P))return c(P,D);if((0,o.isEventSignature)(P))return u(P,D);if((0,o.isErrorSignature)(P))return l(P,D);if((0,o.isConstructorSignature)(P))return d(P,D);if((0,o.isFallbackSignature)(P))return f(P);if((0,o.isReceiveSignature)(P))return{type:"receive",stateMutability:"payable"};throw new n.UnknownSignatureError({signature:P})}function c(P,D={}){const L=(0,o.execFunctionSignature)(P);if(!L)throw new n.InvalidSignatureError({signature:P,type:"function"});const I=E(L.parameters),U=[],F=I.length;for(let A=0;A<F;A++)U.push(y(I[A],{modifiers:o.functionModifiers,structs:D,type:"function"}));const B=[];if(L.returns){const A=E(L.returns),m=A.length;for(let b=0;b<m;b++)B.push(y(A[b],{modifiers:o.functionModifiers,structs:D,type:"function"}))}return{name:L.name,type:"function",stateMutability:L.stateMutability??"nonpayable",inputs:U,outputs:B}}function u(P,D={}){const L=(0,o.execEventSignature)(P);if(!L)throw new n.InvalidSignatureError({signature:P,type:"event"});const I=E(L.parameters),U=[],F=I.length;for(let B=0;B<F;B++)U.push(y(I[B],{modifiers:o.eventModifiers,structs:D,type:"event"}));return{name:L.name,type:"event",inputs:U}}function l(P,D={}){const L=(0,o.execErrorSignature)(P);if(!L)throw new n.InvalidSignatureError({signature:P,type:"error"});const I=E(L.parameters),U=[],F=I.length;for(let B=0;B<F;B++)U.push(y(I[B],{structs:D,type:"error"}));return{name:L.name,type:"error",inputs:U}}function d(P,D={}){const L=(0,o.execConstructorSignature)(P);if(!L)throw new n.InvalidSignatureError({signature:P,type:"constructor"});const I=E(L.parameters),U=[],F=I.length;for(let B=0;B<F;B++)U.push(y(I[B],{structs:D,type:"constructor"}));return{type:"constructor",stateMutability:L.stateMutability??"nonpayable",inputs:U}}function f(P){const D=(0,o.execFallbackSignature)(P);if(!D)throw new n.InvalidSignatureError({signature:P,type:"fallback"});return{type:"fallback",stateMutability:D.stateMutability??"nonpayable"}}const p=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,g=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,h=/^u?int$/;function y(P,D){const L=(0,i.getParameterCacheKey)(P,D?.type,D?.structs);if(i.parameterCache.has(L))return i.parameterCache.get(L);const I=t.isTupleRegex.test(P),U=(0,t.execTyped)(I?g:p,P);if(!U)throw new r.InvalidParameterError({param:P});if(U.name&&_(U.name))throw new r.SolidityProtectedKeywordError({param:P,name:U.name});const F=U.name?{name:U.name}:{},B=U.modifier==="indexed"?{indexed:!0}:{},A=D?.structs??{};let m,b={};if(I){m="tuple";const x=E(U.type),M=[],k=x.length;for(let j=0;j<k;j++)M.push(y(x[j],{structs:A}));b={components:M}}else if(U.type in A)m="tuple",b={components:A[U.type]};else if(h.test(U.type))m=`${U.type}256`;else if(U.type==="address payable")m="address";else if(m=U.type,D?.type!=="struct"&&!S(m))throw new e.UnknownSolidityTypeError({type:m});if(U.modifier){if(!D?.modifiers?.has?.(U.modifier))throw new r.InvalidModifierError({param:P,type:D?.type,modifier:U.modifier});if(o.functionModifiers.has(U.modifier)&&!T(m,!!U.array))throw new r.InvalidFunctionModifierError({param:P,type:D?.type,modifier:U.modifier})}const w={type:`${m}${U.array??""}`,...F,...B,...b};return i.parameterCache.set(L,w),w}function E(P,D=[],L="",I=0){const U=P.trim().length;for(let F=0;F<U;F++){const B=P[F],A=P.slice(F+1);switch(B){case",":return I===0?E(A,[...D,L.trim()]):E(A,D,`${L}${B}`,I);case"(":return E(A,D,`${L}${B}`,I+1);case")":return E(A,D,`${L}${B}`,I-1);default:return E(A,D,`${L}${B}`,I)}}if(L==="")return D;if(I!==0)throw new s.InvalidParenthesisError({current:L,depth:I});return D.push(L.trim()),D}function S(P){return P==="address"||P==="bool"||P==="function"||P==="string"||t.bytesRegex.test(P)||t.integerRegex.test(P)}const C=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function _(P){return P==="address"||P==="bool"||P==="function"||P==="string"||P==="tuple"||t.bytesRegex.test(P)||t.integerRegex.test(P)||C.test(P)}function T(P,D){return D||P==="bytes"||P==="string"||P==="tuple"}return Yo}var d$;function I5(){if(d$)return L2;d$=1,Object.defineProperty(L2,"__esModule",{value:!0}),L2.parseStructs=a;const t=C5(),e=S5(),r=i_(),n=vB(),s=use(),i=sb(),o=By();function a(l){const d={},f=l.length;for(let y=0;y<f;y++){const E=l[y];if(!(0,i.isStructSignature)(E))continue;const S=(0,i.execStructSignature)(E);if(!S)throw new n.InvalidSignatureError({signature:E,type:"struct"});const C=S.properties.split(";"),_=[],T=C.length;for(let P=0;P<T;P++){const L=C[P].trim();if(!L)continue;const I=(0,o.parseAbiParameter)(L,{type:"struct"});_.push(I)}if(!_.length)throw new n.InvalidStructSignatureError({signature:E});d[S.name]=_}const p={},g=Object.entries(d),h=g.length;for(let y=0;y<h;y++){const[E,S]=g[y];p[E]=u(S,d)}return p}const c=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function u(l,d,f=new Set){const p=[],g=l.length;for(let h=0;h<g;h++){const y=l[h];if(t.isTupleRegex.test(y.type))p.push(y);else{const S=(0,t.execTyped)(c,y.type);if(!S?.type)throw new r.InvalidAbiTypeParameterError({abiParameter:y});const{array:C,type:_}=S;if(_ in d){if(f.has(_))throw new s.CircularReferenceError({type:_});p.push({...y,type:`tuple${C??""}`,components:u(d[_]??[],d,new Set([...f,_]))})}else if((0,o.isSolidityType)(_))p.push(y);else throw new e.UnknownTypeError({type:_})}}return p}return L2}var f$;function wUe(){if(f$)return j2;f$=1,Object.defineProperty(j2,"__esModule",{value:!0}),j2.parseAbi=n;const t=sb(),e=I5(),r=By();function n(s){const i=(0,e.parseStructs)(s),o=[],a=s.length;for(let c=0;c<a;c++){const u=s[c];(0,t.isStructSignature)(u)||o.push((0,r.parseSignature)(u,i))}return o}return j2}var F2={},h$;function vUe(){if(h$)return F2;h$=1,Object.defineProperty(F2,"__esModule",{value:!0}),F2.parseAbiItem=s;const t=S5(),e=sb(),r=I5(),n=By();function s(i){let o;if(typeof i=="string")o=(0,n.parseSignature)(i);else{const a=(0,r.parseStructs)(i),c=i.length;for(let u=0;u<c;u++){const l=i[u];if(!(0,e.isStructSignature)(l)){o=(0,n.parseSignature)(l,a);break}}}if(!o)throw new t.InvalidAbiItemError({signature:i});return o}return F2}var $2={},p$;function EUe(){if(p$)return $2;p$=1,Object.defineProperty($2,"__esModule",{value:!0}),$2.parseAbiParameter=s;const t=i_(),e=sb(),r=I5(),n=By();function s(i){let o;if(typeof i=="string")o=(0,n.parseAbiParameter)(i,{modifiers:e.modifiers});else{const a=(0,r.parseStructs)(i),c=i.length;for(let u=0;u<c;u++){const l=i[u];if(!(0,e.isStructSignature)(l)){o=(0,n.parseAbiParameter)(l,{modifiers:e.modifiers,structs:a});break}}}if(!o)throw new t.InvalidAbiParameterError({param:i});return o}return $2}var q2={},g$;function _Ue(){if(g$)return q2;g$=1,Object.defineProperty(q2,"__esModule",{value:!0}),q2.parseAbiParameters=i;const t=i_(),e=sb(),r=I5(),n=By(),s=By();function i(o){const a=[];if(typeof o=="string"){const c=(0,n.splitParameters)(o),u=c.length;for(let l=0;l<u;l++)a.push((0,s.parseAbiParameter)(c[l],{modifiers:e.modifiers}))}else{const c=(0,r.parseStructs)(o),u=o.length;for(let l=0;l<u;l++){const d=o[l];if((0,e.isStructSignature)(d))continue;const f=(0,n.splitParameters)(d),p=f.length;for(let g=0;g<p;g++)a.push((0,s.parseAbiParameter)(f[g],{modifiers:e.modifiers,structs:c}))}}if(a.length===0)throw new t.InvalidAbiParametersError({params:o});return a}return q2}var m$;function Vh(){return m$||(m$=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CircularReferenceError=t.InvalidParenthesisError=t.UnknownSignatureError=t.InvalidSignatureError=t.InvalidStructSignatureError=t.InvalidAbiParameterError=t.InvalidAbiParametersError=t.InvalidParameterError=t.SolidityProtectedKeywordError=t.InvalidModifierError=t.InvalidFunctionModifierError=t.InvalidAbiTypeParameterError=t.UnknownSolidityTypeError=t.InvalidAbiItemError=t.UnknownTypeError=t.parseAbiParameters=t.parseAbiParameter=t.parseAbiItem=t.parseAbi=t.formatAbiParameters=t.formatAbiParameter=t.formatAbiItem=t.formatAbi=t.narrow=t.BaseError=void 0;var e=nb();Object.defineProperty(t,"BaseError",{enumerable:!0,get:function(){return e.BaseError}});var r=mUe();Object.defineProperty(t,"narrow",{enumerable:!0,get:function(){return r.narrow}});var n=yUe();Object.defineProperty(t,"formatAbi",{enumerable:!0,get:function(){return n.formatAbi}});var s=cse();Object.defineProperty(t,"formatAbiItem",{enumerable:!0,get:function(){return s.formatAbiItem}});var i=ose();Object.defineProperty(t,"formatAbiParameter",{enumerable:!0,get:function(){return i.formatAbiParameter}});var o=ase();Object.defineProperty(t,"formatAbiParameters",{enumerable:!0,get:function(){return o.formatAbiParameters}});var a=wUe();Object.defineProperty(t,"parseAbi",{enumerable:!0,get:function(){return a.parseAbi}});var c=vUe();Object.defineProperty(t,"parseAbiItem",{enumerable:!0,get:function(){return c.parseAbiItem}});var u=EUe();Object.defineProperty(t,"parseAbiParameter",{enumerable:!0,get:function(){return u.parseAbiParameter}});var l=_Ue();Object.defineProperty(t,"parseAbiParameters",{enumerable:!0,get:function(){return l.parseAbiParameters}});var d=S5();Object.defineProperty(t,"UnknownTypeError",{enumerable:!0,get:function(){return d.UnknownTypeError}}),Object.defineProperty(t,"InvalidAbiItemError",{enumerable:!0,get:function(){return d.InvalidAbiItemError}}),Object.defineProperty(t,"UnknownSolidityTypeError",{enumerable:!0,get:function(){return d.UnknownSolidityTypeError}});var f=i_();Object.defineProperty(t,"InvalidAbiTypeParameterError",{enumerable:!0,get:function(){return f.InvalidAbiTypeParameterError}}),Object.defineProperty(t,"InvalidFunctionModifierError",{enumerable:!0,get:function(){return f.InvalidFunctionModifierError}}),Object.defineProperty(t,"InvalidModifierError",{enumerable:!0,get:function(){return f.InvalidModifierError}}),Object.defineProperty(t,"SolidityProtectedKeywordError",{enumerable:!0,get:function(){return f.SolidityProtectedKeywordError}}),Object.defineProperty(t,"InvalidParameterError",{enumerable:!0,get:function(){return f.InvalidParameterError}}),Object.defineProperty(t,"InvalidAbiParametersError",{enumerable:!0,get:function(){return f.InvalidAbiParametersError}}),Object.defineProperty(t,"InvalidAbiParameterError",{enumerable:!0,get:function(){return f.InvalidAbiParameterError}});var p=vB();Object.defineProperty(t,"InvalidStructSignatureError",{enumerable:!0,get:function(){return p.InvalidStructSignatureError}}),Object.defineProperty(t,"InvalidSignatureError",{enumerable:!0,get:function(){return p.InvalidSignatureError}}),Object.defineProperty(t,"UnknownSignatureError",{enumerable:!0,get:function(){return p.UnknownSignatureError}});var g=lse();Object.defineProperty(t,"InvalidParenthesisError",{enumerable:!0,get:function(){return g.InvalidParenthesisError}});var h=use();Object.defineProperty(t,"CircularReferenceError",{enumerable:!0,get:function(){return h.CircularReferenceError}})})(VP)),VP}var $g={},H2={},y$;function kr(){if(y$)return H2;y$=1,Object.defineProperty(H2,"__esModule",{value:!0}),H2.getAction=t;function t(e,r,n){const s=e[r.name];if(typeof s=="function")return s;const i=e[n];return typeof i=="function"?i:o=>r(e,o)}return H2}var z2={},W2={},St={},gw={},b$;function lf(){if(b$)return gw;b$=1,Object.defineProperty(gw,"__esModule",{value:!0}),gw.formatAbiItem=e,gw.formatAbiParams=r;const t=Jn();function e(s,{includeName:i=!1}={}){if(s.type!=="function"&&s.type!=="event"&&s.type!=="error")throw new t.InvalidDefinitionTypeError(s.type);return`${s.name}(${r(s.inputs,{includeName:i})})`}function r(s,{includeName:i=!1}={}){return s?s.map(o=>n(o,{includeName:i})).join(i?", ":","):""}function n(s,{includeName:i}){return s.type.startsWith("tuple")?`(${r(s.components,{includeName:i})})${s.type.slice(5)}`:s.type+(i&&s.name?` ${s.name}`:"")}return gw}var V2={},G2={},w$;function Ho(){if(w$)return G2;w$=1,Object.defineProperty(G2,"__esModule",{value:!0}),G2.isHex=t;function t(e,{strict:r=!0}={}){return!e||typeof e!="string"?!1:r?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}return G2}var v$;function Ta(){if(v$)return V2;v$=1,Object.defineProperty(V2,"__esModule",{value:!0}),V2.size=e;const t=Ho();function e(r){return(0,t.isHex)(r,{strict:!1})?Math.ceil((r.length-2)/2):r.length}return V2}var qg={},mw={},E$;function AUe(){return E$||(E$=1,Object.defineProperty(mw,"__esModule",{value:!0}),mw.version=void 0,mw.version="2.40.2"),mw}var _$;function Kt(){if(_$)return qg;_$=1,Object.defineProperty(qg,"__esModule",{value:!0}),qg.BaseError=void 0,qg.setErrorConfig=r;const t=AUe();let e={getDocsUrl:({docsBaseUrl:i,docsPath:o="",docsSlug:a})=>o?`${i??"https://viem.sh"}${o}${a?`#${a}`:""}`:void 0,version:`viem@${t.version}`};function r(i){e=i}class n extends Error{constructor(o,a={}){const c=a.cause instanceof n?a.cause.details:a.cause?.message?a.cause.message:a.details,u=a.cause instanceof n&&a.cause.docsPath||a.docsPath,l=e.getDocsUrl?.({...a,docsPath:u}),d=[o||"An error occurred.","",...a.metaMessages?[...a.metaMessages,""]:[],...l?[`Docs: ${l}`]:[],...c?[`Details: ${c}`]:[],...e.version?[`Version: ${e.version}`]:[]].join(`
`);super(d,a.cause?{cause:a.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=c,this.docsPath=u,this.metaMessages=a.metaMessages,this.name=a.name??this.name,this.shortMessage=o,this.version=t.version}walk(o){return s(this,o)}}qg.BaseError=n;function s(i,o){return o?.(i)?i:i&&typeof i=="object"&&"cause"in i&&i.cause!==void 0?s(i.cause,o):o?null:i}return qg}var A$;function Jn(){if(A$)return St;A$=1,Object.defineProperty(St,"__esModule",{value:!0}),St.UnsupportedPackedAbiType=St.InvalidDefinitionTypeError=St.InvalidArrayError=St.InvalidAbiDecodingTypeError=St.InvalidAbiEncodingTypeError=St.DecodeLogTopicsMismatch=St.DecodeLogDataMismatch=St.BytesSizeMismatchError=St.AbiItemAmbiguityError=St.AbiFunctionSignatureNotFoundError=St.AbiFunctionOutputsNotFoundError=St.AbiFunctionNotFoundError=St.AbiEventNotFoundError=St.AbiEventSignatureNotFoundError=St.AbiEventSignatureEmptyTopicsError=St.AbiErrorSignatureNotFoundError=St.AbiErrorNotFoundError=St.AbiErrorInputsNotFoundError=St.AbiEncodingLengthMismatchError=St.AbiEncodingBytesSizeMismatchError=St.AbiEncodingArrayLengthMismatchError=St.AbiDecodingZeroDataError=St.AbiDecodingDataSizeTooSmallError=St.AbiDecodingDataSizeInvalidError=St.AbiConstructorParamsNotFoundError=St.AbiConstructorNotFoundError=void 0;const t=lf(),e=Ta(),r=Kt();class n extends r.BaseError{constructor({docsPath:m}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:m,name:"AbiConstructorNotFoundError"})}}St.AbiConstructorNotFoundError=n;class s extends r.BaseError{constructor({docsPath:m}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:m,name:"AbiConstructorParamsNotFoundError"})}}St.AbiConstructorParamsNotFoundError=s;class i extends r.BaseError{constructor({data:m,size:b}){super([`Data size of ${b} bytes is invalid.`,"Size must be in increments of 32 bytes (size % 32 === 0)."].join(`
`),{metaMessages:[`Data: ${m} (${b} bytes)`],name:"AbiDecodingDataSizeInvalidError"})}}St.AbiDecodingDataSizeInvalidError=i;class o extends r.BaseError{constructor({data:m,params:b,size:w}){super([`Data size of ${w} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${(0,t.formatAbiParams)(b,{includeName:!0})})`,`Data:   ${m} (${w} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=m,this.params=b,this.size=w}}St.AbiDecodingDataSizeTooSmallError=o;class a extends r.BaseError{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}St.AbiDecodingZeroDataError=a;class c extends r.BaseError{constructor({expectedLength:m,givenLength:b,type:w}){super([`ABI encoding array length mismatch for type ${w}.`,`Expected length: ${m}`,`Given length: ${b}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}St.AbiEncodingArrayLengthMismatchError=c;class u extends r.BaseError{constructor({expectedSize:m,value:b}){super(`Size of bytes "${b}" (bytes${(0,e.size)(b)}) does not match expected size (bytes${m}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}St.AbiEncodingBytesSizeMismatchError=u;class l extends r.BaseError{constructor({expectedLength:m,givenLength:b}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${m}`,`Given length (values): ${b}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}St.AbiEncodingLengthMismatchError=l;class d extends r.BaseError{constructor(m,{docsPath:b}){super([`Arguments (\`args\`) were provided to "${m}", but "${m}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:b,name:"AbiErrorInputsNotFoundError"})}}St.AbiErrorInputsNotFoundError=d;class f extends r.BaseError{constructor(m,{docsPath:b}={}){super([`Error ${m?`"${m}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:b,name:"AbiErrorNotFoundError"})}}St.AbiErrorNotFoundError=f;class p extends r.BaseError{constructor(m,{docsPath:b}){super([`Encoded error signature "${m}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${m}.`].join(`
`),{docsPath:b,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=m}}St.AbiErrorSignatureNotFoundError=p;class g extends r.BaseError{constructor({docsPath:m}){super("Cannot extract event signature from empty topics.",{docsPath:m,name:"AbiEventSignatureEmptyTopicsError"})}}St.AbiEventSignatureEmptyTopicsError=g;class h extends r.BaseError{constructor(m,{docsPath:b}){super([`Encoded event signature "${m}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${m}.`].join(`
`),{docsPath:b,name:"AbiEventSignatureNotFoundError"})}}St.AbiEventSignatureNotFoundError=h;class y extends r.BaseError{constructor(m,{docsPath:b}={}){super([`Event ${m?`"${m}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:b,name:"AbiEventNotFoundError"})}}St.AbiEventNotFoundError=y;class E extends r.BaseError{constructor(m,{docsPath:b}={}){super([`Function ${m?`"${m}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:b,name:"AbiFunctionNotFoundError"})}}St.AbiFunctionNotFoundError=E;class S extends r.BaseError{constructor(m,{docsPath:b}){super([`Function "${m}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:b,name:"AbiFunctionOutputsNotFoundError"})}}St.AbiFunctionOutputsNotFoundError=S;class C extends r.BaseError{constructor(m,{docsPath:b}){super([`Encoded function signature "${m}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${m}.`].join(`
`),{docsPath:b,name:"AbiFunctionSignatureNotFoundError"})}}St.AbiFunctionSignatureNotFoundError=C;class _ extends r.BaseError{constructor(m,b){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${m.type}\` in \`${(0,t.formatAbiItem)(m.abiItem)}\`, and`,`\`${b.type}\` in \`${(0,t.formatAbiItem)(b.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}St.AbiItemAmbiguityError=_;class T extends r.BaseError{constructor({expectedSize:m,givenSize:b}){super(`Expected bytes${m}, got bytes${b}.`,{name:"BytesSizeMismatchError"})}}St.BytesSizeMismatchError=T;class P extends r.BaseError{constructor({abiItem:m,data:b,params:w,size:x}){super([`Data size of ${x} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${(0,t.formatAbiParams)(w,{includeName:!0})})`,`Data:   ${b} (${x} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=m,this.data=b,this.params=w,this.size=x}}St.DecodeLogDataMismatch=P;class D extends r.BaseError{constructor({abiItem:m,param:b}){super([`Expected a topic for indexed event parameter${b.name?` "${b.name}"`:""} on event "${(0,t.formatAbiItem)(m,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=m}}St.DecodeLogTopicsMismatch=D;class L extends r.BaseError{constructor(m,{docsPath:b}){super([`Type "${m}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:b,name:"InvalidAbiEncodingType"})}}St.InvalidAbiEncodingTypeError=L;class I extends r.BaseError{constructor(m,{docsPath:b}){super([`Type "${m}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:b,name:"InvalidAbiDecodingType"})}}St.InvalidAbiDecodingTypeError=I;class U extends r.BaseError{constructor(m){super([`Value "${m}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}St.InvalidArrayError=U;class F extends r.BaseError{constructor(m){super([`"${m}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}St.InvalidDefinitionTypeError=F;class B extends r.BaseError{constructor(m){super(`Type "${m}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}return St.UnsupportedPackedAbiType=B,St}var yw={},x$;function dse(){if(x$)return yw;x$=1,Object.defineProperty(yw,"__esModule",{value:!0}),yw.FilterTypeNotSupportedError=void 0;const t=Kt();class e extends t.BaseError{constructor(n){super(`Filter type "${n}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}return yw.FilterTypeNotSupportedError=e,yw}var jf={},Hg={},pd={},C$;function T5(){if(C$)return pd;C$=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.InvalidBytesLengthError=pd.SizeExceedsPaddingSizeError=pd.SliceOffsetOutOfBoundsError=void 0;const t=Kt();class e extends t.BaseError{constructor({offset:i,position:o,size:a}){super(`Slice ${o==="start"?"starting":"ending"} at offset "${i}" is out-of-bounds (size: ${a}).`,{name:"SliceOffsetOutOfBoundsError"})}}pd.SliceOffsetOutOfBoundsError=e;class r extends t.BaseError{constructor({size:i,targetSize:o,type:a}){super(`${a.charAt(0).toUpperCase()}${a.slice(1).toLowerCase()} size (${i}) exceeds padding size (${o}).`,{name:"SizeExceedsPaddingSizeError"})}}pd.SizeExceedsPaddingSizeError=r;class n extends t.BaseError{constructor({size:i,targetSize:o,type:a}){super(`${a.charAt(0).toUpperCase()}${a.slice(1).toLowerCase()} is expected to be ${o} ${a} long, but is ${i} ${a} long.`,{name:"InvalidBytesLengthError"})}}return pd.InvalidBytesLengthError=n,pd}var S$;function Gh(){if(S$)return Hg;S$=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.pad=e,Hg.padHex=r,Hg.padBytes=n;const t=T5();function e(s,{dir:i,size:o=32}={}){return typeof s=="string"?r(s,{dir:i,size:o}):n(s,{dir:i,size:o})}function r(s,{dir:i,size:o=32}={}){if(o===null)return s;const a=s.replace("0x","");if(a.length>o*2)throw new t.SizeExceedsPaddingSizeError({size:Math.ceil(a.length/2),targetSize:o,type:"hex"});return`0x${a[i==="right"?"padEnd":"padStart"](o*2,"0")}`}function n(s,{dir:i,size:o=32}={}){if(o===null)return s;if(s.length>o)throw new t.SizeExceedsPaddingSizeError({size:s.length,targetSize:o,type:"bytes"});const a=new Uint8Array(o);for(let c=0;c<o;c++){const u=i==="right";a[u?c:o-c-1]=s[u?c:s.length-c-1]}return a}return Hg}var gd={},ja={},I$;function ib(){if(I$)return ja;I$=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.SizeOverflowError=ja.InvalidHexValueError=ja.InvalidHexBooleanError=ja.InvalidBytesBooleanError=ja.IntegerOutOfRangeError=void 0;const t=Kt();class e extends t.BaseError{constructor({max:a,min:c,signed:u,size:l,value:d}){super(`Number "${d}" is not in safe ${l?`${l*8}-bit ${u?"signed":"unsigned"} `:""}integer range ${a?`(${c} to ${a})`:`(above ${c})`}`,{name:"IntegerOutOfRangeError"})}}ja.IntegerOutOfRangeError=e;class r extends t.BaseError{constructor(a){super(`Bytes value "${a}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}ja.InvalidBytesBooleanError=r;class n extends t.BaseError{constructor(a){super(`Hex value "${a}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}ja.InvalidHexBooleanError=n;class s extends t.BaseError{constructor(a){super(`Hex value "${a}" is an odd length (${a.length}). It must be an even length.`,{name:"InvalidHexValueError"})}}ja.InvalidHexValueError=s;class i extends t.BaseError{constructor({givenSize:a,maxSize:c}){super(`Size cannot exceed ${c} bytes. Given size: ${a} bytes.`,{name:"SizeOverflowError"})}}return ja.SizeOverflowError=i,ja}var K2={},T$;function df(){if(T$)return K2;T$=1,Object.defineProperty(K2,"__esModule",{value:!0}),K2.trim=t;function t(e,{dir:r="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,s=0;for(let i=0;i<n.length-1&&n[r==="left"?i:n.length-i-1].toString()==="0";i++)s++;return n=r==="left"?n.slice(s):n.slice(0,n.length-s),typeof e=="string"?(n.length===1&&r==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}return K2}var N$;function ys(){if(N$)return gd;N$=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.assertSize=s,gd.fromHex=i,gd.hexToBigInt=o,gd.hexToBool=a,gd.hexToNumber=c,gd.hexToString=u;const t=ib(),e=Ta(),r=df(),n=Pn();function s(l,{size:d}){if((0,e.size)(l)>d)throw new t.SizeOverflowError({givenSize:(0,e.size)(l),maxSize:d})}function i(l,d){const f=typeof d=="string"?{to:d}:d,p=f.to;return p==="number"?c(l,f):p==="bigint"?o(l,f):p==="string"?u(l,f):p==="boolean"?a(l,f):(0,n.hexToBytes)(l,f)}function o(l,d={}){const{signed:f}=d;d.size&&s(l,{size:d.size});const p=BigInt(l);if(!f)return p;const g=(l.length-2)/2,h=(1n<<BigInt(g)*8n-1n)-1n;return p<=h?p:p-BigInt(`0x${"f".padStart(g*2,"f")}`)-1n}function a(l,d={}){let f=l;if(d.size&&(s(f,{size:d.size}),f=(0,r.trim)(f)),(0,r.trim)(f)==="0x00")return!1;if((0,r.trim)(f)==="0x01")return!0;throw new t.InvalidHexBooleanError(f)}function c(l,d={}){return Number(o(l,d))}function u(l,d={}){let f=(0,n.hexToBytes)(l);return d.size&&(s(f,{size:d.size}),f=(0,r.trim)(f,{dir:"right"})),new TextDecoder().decode(f)}return gd}var Lf={},P$;function tt(){if(P$)return Lf;P$=1,Object.defineProperty(Lf,"__esModule",{value:!0}),Lf.toHex=s,Lf.boolToHex=i,Lf.bytesToHex=o,Lf.numberToHex=a,Lf.stringToHex=u;const t=ib(),e=Gh(),r=ys(),n=Array.from({length:256},(l,d)=>d.toString(16).padStart(2,"0"));function s(l,d={}){return typeof l=="number"||typeof l=="bigint"?a(l,d):typeof l=="string"?u(l,d):typeof l=="boolean"?i(l,d):o(l,d)}function i(l,d={}){const f=`0x${Number(l)}`;return typeof d.size=="number"?((0,r.assertSize)(f,{size:d.size}),(0,e.pad)(f,{size:d.size})):f}function o(l,d={}){let f="";for(let g=0;g<l.length;g++)f+=n[l[g]];const p=`0x${f}`;return typeof d.size=="number"?((0,r.assertSize)(p,{size:d.size}),(0,e.pad)(p,{dir:"right",size:d.size})):p}function a(l,d={}){const{signed:f,size:p}=d,g=BigInt(l);let h;p?f?h=(1n<<BigInt(p)*8n-1n)-1n:h=2n**(BigInt(p)*8n)-1n:typeof l=="number"&&(h=BigInt(Number.MAX_SAFE_INTEGER));const y=typeof h=="bigint"&&f?-h-1n:0;if(h&&g>h||g<y){const S=typeof l=="bigint"?"n":"";throw new t.IntegerOutOfRangeError({max:h?`${h}${S}`:void 0,min:`${y}${S}`,signed:f,size:p,value:`${l}${S}`})}const E=`0x${(f&&g<0?(1n<<BigInt(p*8))+BigInt(g):g).toString(16)}`;return p?(0,e.pad)(E,{size:p}):E}const c=new TextEncoder;function u(l,d={}){const f=c.encode(l);return o(f,d)}return Lf}var R$;function Pn(){if(R$)return jf;R$=1,Object.defineProperty(jf,"__esModule",{value:!0}),jf.toBytes=o,jf.boolToBytes=a,jf.hexToBytes=l,jf.numberToBytes=d,jf.stringToBytes=f;const t=Kt(),e=Ho(),r=Gh(),n=ys(),s=tt(),i=new TextEncoder;function o(p,g={}){return typeof p=="number"||typeof p=="bigint"?d(p,g):typeof p=="boolean"?a(p,g):(0,e.isHex)(p)?l(p,g):f(p,g)}function a(p,g={}){const h=new Uint8Array(1);return h[0]=Number(p),typeof g.size=="number"?((0,n.assertSize)(h,{size:g.size}),(0,r.pad)(h,{size:g.size})):h}const c={zero:48,nine:57,A:65,F:70,a:97,f:102};function u(p){if(p>=c.zero&&p<=c.nine)return p-c.zero;if(p>=c.A&&p<=c.F)return p-(c.A-10);if(p>=c.a&&p<=c.f)return p-(c.a-10)}function l(p,g={}){let h=p;g.size&&((0,n.assertSize)(h,{size:g.size}),h=(0,r.pad)(h,{dir:"right",size:g.size}));let y=h.slice(2);y.length%2&&(y=`0${y}`);const E=y.length/2,S=new Uint8Array(E);for(let C=0,_=0;C<E;C++){const T=u(y.charCodeAt(_++)),P=u(y.charCodeAt(_++));if(T===void 0||P===void 0)throw new t.BaseError(`Invalid byte sequence ("${y[_-2]}${y[_-1]}" in "${y}").`);S[C]=T*16+P}return S}function d(p,g){const h=(0,s.numberToHex)(p,g);return l(h)}function f(p,g={}){const h=i.encode(p);return typeof g.size=="number"?((0,n.assertSize)(h,{size:g.size}),(0,r.pad)(h,{dir:"right",size:g.size})):h}return jf}var Z2={},kn={},zt={},O$;function fse(){if(O$)return zt;O$=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.toBig=zt.shrSL=zt.shrSH=zt.rotrSL=zt.rotrSH=zt.rotrBL=zt.rotrBH=zt.rotr32L=zt.rotr32H=zt.rotlSL=zt.rotlSH=zt.rotlBL=zt.rotlBH=zt.add5L=zt.add5H=zt.add4L=zt.add4H=zt.add3L=zt.add3H=void 0,zt.add=E,zt.fromBig=r,zt.split=n;const t=BigInt(2**32-1),e=BigInt(32);function r(I,U=!1){return U?{h:Number(I&t),l:Number(I>>e&t)}:{h:Number(I>>e&t)|0,l:Number(I&t)|0}}function n(I,U=!1){const F=I.length;let B=new Uint32Array(F),A=new Uint32Array(F);for(let m=0;m<F;m++){const{h:b,l:w}=r(I[m],U);[B[m],A[m]]=[b,w]}return[B,A]}const s=(I,U)=>BigInt(I>>>0)<<e|BigInt(U>>>0);zt.toBig=s;const i=(I,U,F)=>I>>>F;zt.shrSH=i;const o=(I,U,F)=>I<<32-F|U>>>F;zt.shrSL=o;const a=(I,U,F)=>I>>>F|U<<32-F;zt.rotrSH=a;const c=(I,U,F)=>I<<32-F|U>>>F;zt.rotrSL=c;const u=(I,U,F)=>I<<64-F|U>>>F-32;zt.rotrBH=u;const l=(I,U,F)=>I>>>F-32|U<<64-F;zt.rotrBL=l;const d=(I,U)=>U;zt.rotr32H=d;const f=(I,U)=>I;zt.rotr32L=f;const p=(I,U,F)=>I<<F|U>>>32-F;zt.rotlSH=p;const g=(I,U,F)=>U<<F|I>>>32-F;zt.rotlSL=g;const h=(I,U,F)=>U<<F-32|I>>>64-F;zt.rotlBH=h;const y=(I,U,F)=>I<<F-32|U>>>64-F;zt.rotlBL=y;function E(I,U,F,B){const A=(U>>>0)+(B>>>0);return{h:I+F+(A/2**32|0)|0,l:A|0}}const S=(I,U,F)=>(I>>>0)+(U>>>0)+(F>>>0);zt.add3L=S;const C=(I,U,F,B)=>U+F+B+(I/2**32|0)|0;zt.add3H=C;const _=(I,U,F,B)=>(I>>>0)+(U>>>0)+(F>>>0)+(B>>>0);zt.add4L=_;const T=(I,U,F,B,A)=>U+F+B+A+(I/2**32|0)|0;zt.add4H=T;const P=(I,U,F,B,A)=>(I>>>0)+(U>>>0)+(F>>>0)+(B>>>0)+(A>>>0);zt.add5L=P;const D=(I,U,F,B,A,m)=>U+F+B+A+m+(I/2**32|0)|0;zt.add5H=D;const L={fromBig:r,split:n,toBig:s,shrSH:i,shrSL:o,rotrSH:a,rotrSL:c,rotrBH:u,rotrBL:l,rotr32H:d,rotr32L:f,rotlSH:p,rotlSL:g,rotlBH:h,rotlBL:y,add:E,add3L:S,add3H:C,add4L:_,add4H:T,add5H:D,add5L:P};return zt.default=L,zt}var GP={},bw={},k$;function xUe(){return k$||(k$=1,Object.defineProperty(bw,"__esModule",{value:!0}),bw.crypto=void 0,bw.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),bw}var B$;function Kh(){return B$||(B$=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=r,t.anumber=n,t.abytes=s,t.ahash=i,t.aexists=o,t.aoutput=a,t.u8=c,t.u32=u,t.clean=l,t.createView=d,t.rotr=f,t.rotl=p,t.byteSwap=g,t.byteSwap32=h,t.bytesToHex=S,t.hexToBytes=T,t.asyncLoop=D,t.utf8ToBytes=L,t.bytesToUtf8=I,t.toBytes=U,t.kdfInputToBytes=F,t.concatBytes=B,t.checkOpts=A,t.createHasher=b,t.createOptHasher=w,t.createXOFer=x,t.randomBytes=M;const e=xUe();function r(k){return k instanceof Uint8Array||ArrayBuffer.isView(k)&&k.constructor.name==="Uint8Array"}function n(k){if(!Number.isSafeInteger(k)||k<0)throw new Error("positive integer expected, got "+k)}function s(k,...j){if(!r(k))throw new Error("Uint8Array expected");if(j.length>0&&!j.includes(k.length))throw new Error("Uint8Array expected of length "+j+", got length="+k.length)}function i(k){if(typeof k!="function"||typeof k.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");n(k.outputLen),n(k.blockLen)}function o(k,j=!0){if(k.destroyed)throw new Error("Hash instance has been destroyed");if(j&&k.finished)throw new Error("Hash#digest() has already been called")}function a(k,j){s(k);const N=j.outputLen;if(k.length<N)throw new Error("digestInto() expects output buffer of length at least "+N)}function c(k){return new Uint8Array(k.buffer,k.byteOffset,k.byteLength)}function u(k){return new Uint32Array(k.buffer,k.byteOffset,Math.floor(k.byteLength/4))}function l(...k){for(let j=0;j<k.length;j++)k[j].fill(0)}function d(k){return new DataView(k.buffer,k.byteOffset,k.byteLength)}function f(k,j){return k<<32-j|k>>>j}function p(k,j){return k<<j|k>>>32-j>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function g(k){return k<<24&4278190080|k<<8&16711680|k>>>8&65280|k>>>24&255}t.swap8IfBE=t.isLE?k=>k:k=>g(k),t.byteSwapIfBE=t.swap8IfBE;function h(k){for(let j=0;j<k.length;j++)k[j]=g(k[j]);return k}t.swap32IfBE=t.isLE?k=>k:h;const y=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",E=Array.from({length:256},(k,j)=>j.toString(16).padStart(2,"0"));function S(k){if(s(k),y)return k.toHex();let j="";for(let N=0;N<k.length;N++)j+=E[k[N]];return j}const C={_0:48,_9:57,A:65,F:70,a:97,f:102};function _(k){if(k>=C._0&&k<=C._9)return k-C._0;if(k>=C.A&&k<=C.F)return k-(C.A-10);if(k>=C.a&&k<=C.f)return k-(C.a-10)}function T(k){if(typeof k!="string")throw new Error("hex string expected, got "+typeof k);if(y)return Uint8Array.fromHex(k);const j=k.length,N=j/2;if(j%2)throw new Error("hex string expected, got unpadded hex of length "+j);const v=new Uint8Array(N);for(let R=0,$=0;R<N;R++,$+=2){const O=_(k.charCodeAt($)),H=_(k.charCodeAt($+1));if(O===void 0||H===void 0){const W=k[$]+k[$+1];throw new Error('hex string expected, got non-hex character "'+W+'" at index '+$)}v[R]=O*16+H}return v}const P=async()=>{};t.nextTick=P;async function D(k,j,N){let v=Date.now();for(let R=0;R<k;R++){N(R);const $=Date.now()-v;$>=0&&$<j||(await(0,t.nextTick)(),v+=$)}}function L(k){if(typeof k!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(k))}function I(k){return new TextDecoder().decode(k)}function U(k){return typeof k=="string"&&(k=L(k)),s(k),k}function F(k){return typeof k=="string"&&(k=L(k)),s(k),k}function B(...k){let j=0;for(let v=0;v<k.length;v++){const R=k[v];s(R),j+=R.length}const N=new Uint8Array(j);for(let v=0,R=0;v<k.length;v++){const $=k[v];N.set($,R),R+=$.length}return N}function A(k,j){if(j!==void 0&&{}.toString.call(j)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(k,j)}class m{}t.Hash=m;function b(k){const j=v=>k().update(U(v)).digest(),N=k();return j.outputLen=N.outputLen,j.blockLen=N.blockLen,j.create=()=>k(),j}function w(k){const j=(v,R)=>k(R).update(U(v)).digest(),N=k({});return j.outputLen=N.outputLen,j.blockLen=N.blockLen,j.create=v=>k(v),j}function x(k){const j=(v,R)=>k(R).update(U(v)).digest(),N=k({});return j.outputLen=N.outputLen,j.blockLen=N.blockLen,j.create=v=>k(v),j}t.wrapConstructor=b,t.wrapConstructorWithOpts=w,t.wrapXOFConstructorWithOpts=x;function M(k=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(k));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(k));throw new Error("crypto.getRandomValues must be defined")}})(GP)),GP}var U$;function hse(){if(U$)return kn;U$=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.shake256=kn.shake128=kn.keccak_512=kn.keccak_384=kn.keccak_256=kn.keccak_224=kn.sha3_512=kn.sha3_384=kn.sha3_256=kn.sha3_224=kn.Keccak=void 0,kn.keccakP=y;const t=fse(),e=Kh(),r=BigInt(0),n=BigInt(1),s=BigInt(2),i=BigInt(7),o=BigInt(256),a=BigInt(113),c=[],u=[],l=[];for(let _=0,T=n,P=1,D=0;_<24;_++){[P,D]=[D,(2*P+3*D)%5],c.push(2*(5*D+P)),u.push((_+1)*(_+2)/2%64);let L=r;for(let I=0;I<7;I++)T=(T<<n^(T>>i)*a)%o,T&s&&(L^=n<<(n<<BigInt(I))-n);l.push(L)}const d=(0,t.split)(l,!0),f=d[0],p=d[1],g=(_,T,P)=>P>32?(0,t.rotlBH)(_,T,P):(0,t.rotlSH)(_,T,P),h=(_,T,P)=>P>32?(0,t.rotlBL)(_,T,P):(0,t.rotlSL)(_,T,P);function y(_,T=24){const P=new Uint32Array(10);for(let D=24-T;D<24;D++){for(let U=0;U<10;U++)P[U]=_[U]^_[U+10]^_[U+20]^_[U+30]^_[U+40];for(let U=0;U<10;U+=2){const F=(U+8)%10,B=(U+2)%10,A=P[B],m=P[B+1],b=g(A,m,1)^P[F],w=h(A,m,1)^P[F+1];for(let x=0;x<50;x+=10)_[U+x]^=b,_[U+x+1]^=w}let L=_[2],I=_[3];for(let U=0;U<24;U++){const F=u[U],B=g(L,I,F),A=h(L,I,F),m=c[U];L=_[m],I=_[m+1],_[m]=B,_[m+1]=A}for(let U=0;U<50;U+=10){for(let F=0;F<10;F++)P[F]=_[U+F];for(let F=0;F<10;F++)_[U+F]^=~P[(F+2)%10]&P[(F+4)%10]}_[0]^=f[D],_[1]^=p[D]}(0,e.clean)(P)}class E extends e.Hash{constructor(T,P,D,L=!1,I=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=T,this.suffix=P,this.outputLen=D,this.enableXOF=L,this.rounds=I,(0,e.anumber)(D),!(0<T&&T<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,e.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,e.swap32IfBE)(this.state32),y(this.state32,this.rounds),(0,e.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(T){(0,e.aexists)(this),T=(0,e.toBytes)(T),(0,e.abytes)(T);const{blockLen:P,state:D}=this,L=T.length;for(let I=0;I<L;){const U=Math.min(P-this.pos,L-I);for(let F=0;F<U;F++)D[this.pos++]^=T[I++];this.pos===P&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:T,suffix:P,pos:D,blockLen:L}=this;T[D]^=P,(P&128)!==0&&D===L-1&&this.keccak(),T[L-1]^=128,this.keccak()}writeInto(T){(0,e.aexists)(this,!1),(0,e.abytes)(T),this.finish();const P=this.state,{blockLen:D}=this;for(let L=0,I=T.length;L<I;){this.posOut>=D&&this.keccak();const U=Math.min(D-this.posOut,I-L);T.set(P.subarray(this.posOut,this.posOut+U),L),this.posOut+=U,L+=U}return T}xofInto(T){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(T)}xof(T){return(0,e.anumber)(T),this.xofInto(new Uint8Array(T))}digestInto(T){if((0,e.aoutput)(T,this),this.finished)throw new Error("digest() was already called");return this.writeInto(T),this.destroy(),T}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,e.clean)(this.state)}_cloneInto(T){const{blockLen:P,suffix:D,outputLen:L,rounds:I,enableXOF:U}=this;return T||(T=new E(P,D,L,U,I)),T.state32.set(this.state32),T.pos=this.pos,T.posOut=this.posOut,T.finished=this.finished,T.rounds=I,T.suffix=D,T.outputLen=L,T.enableXOF=U,T.destroyed=this.destroyed,T}}kn.Keccak=E;const S=(_,T,P)=>(0,e.createHasher)(()=>new E(T,_,P));kn.sha3_224=S(6,144,224/8),kn.sha3_256=S(6,136,256/8),kn.sha3_384=S(6,104,384/8),kn.sha3_512=S(6,72,512/8),kn.keccak_224=S(1,144,224/8),kn.keccak_256=S(1,136,256/8),kn.keccak_384=S(1,104,384/8),kn.keccak_512=S(1,72,512/8);const C=(_,T,P)=>(0,e.createXOFer)((D={})=>new E(T,_,D.dkLen===void 0?P:D.dkLen,!0));return kn.shake128=C(31,168,128/8),kn.shake256=C(31,136,256/8),kn}var M$;function Na(){if(M$)return Z2;M$=1,Object.defineProperty(Z2,"__esModule",{value:!0}),Z2.keccak256=s;const t=hse(),e=Ho(),r=Pn(),n=tt();function s(i,o){const a=o||"hex",c=(0,t.keccak_256)((0,e.isHex)(i,{strict:!1})?(0,r.toBytes)(i):i);return a==="bytes"?c:(0,n.toHex)(c)}return Z2}var ww={},Y2={},J2={},D$;function CUe(){if(D$)return J2;D$=1,Object.defineProperty(J2,"__esModule",{value:!0}),J2.hashSignature=n;const t=Pn(),e=Na(),r=s=>(0,e.keccak256)((0,t.toBytes)(s));function n(s){return r(s)}return J2}var vw={},X2={},j$;function SUe(){if(j$)return X2;j$=1,Object.defineProperty(X2,"__esModule",{value:!0}),X2.normalizeSignature=e;const t=Kt();function e(r){let n=!0,s="",i=0,o="",a=!1;for(let c=0;c<r.length;c++){const u=r[c];if(["(",")",","].includes(u)&&(n=!0),u==="("&&i++,u===")"&&i--,!!n){if(i===0){if(u===" "&&["event","function",""].includes(o))o="";else if(o+=u,u===")"){a=!0;break}continue}if(u===" "){r[c-1]!==","&&s!==","&&s!==",("&&(s="",n=!1);continue}o+=u,s+=u}}if(!a)throw new t.BaseError("Unable to normalize signature.");return o}return X2}var L$;function EB(){if(L$)return vw;L$=1,Object.defineProperty(vw,"__esModule",{value:!0}),vw.toSignature=void 0;const t=Vh(),e=SUe(),r=n=>{const s=typeof n=="string"?n:(0,t.formatAbiItem)(n);return(0,e.normalizeSignature)(s)};return vw.toSignature=r,vw}var F$;function N5(){if(F$)return Y2;F$=1,Object.defineProperty(Y2,"__esModule",{value:!0}),Y2.toSignatureHash=r;const t=CUe(),e=EB();function r(n){return(0,t.hashSignature)((0,e.toSignature)(n))}return Y2}var $$;function ob(){if($$)return ww;$$=1,Object.defineProperty(ww,"__esModule",{value:!0}),ww.toEventSelector=void 0;const t=N5();return ww.toEventSelector=t.toSignatureHash,ww}var Ew={},_w={},q$;function Wu(){if(q$)return _w;q$=1,Object.defineProperty(_w,"__esModule",{value:!0}),_w.InvalidAddressError=void 0;const t=Kt();class e extends t.BaseError{constructor({address:n}){super(`Address "${n}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}return _w.InvalidAddressError=e,_w}var KP={},Aw={},H$;function ag(){if(H$)return Aw;H$=1,Object.defineProperty(Aw,"__esModule",{value:!0}),Aw.LruMap=void 0;class t extends Map{constructor(r){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=r}get(r){const n=super.get(r);return super.has(r)&&n!==void 0&&(this.delete(r),super.set(r,n)),n}set(r,n){if(super.set(r,n),this.maxSize&&this.size>this.maxSize){const s=this.keys().next().value;s&&this.delete(s)}return this}}return Aw.LruMap=t,Aw}var xw={},z$;function pc(){if(z$)return xw;z$=1,Object.defineProperty(xw,"__esModule",{value:!0}),xw.checksumAddress=o,xw.getAddress=a;const t=Wu(),e=Pn(),r=Na(),n=ag(),s=Pa(),i=new n.LruMap(8192);function o(c,u){if(i.has(`${c}.${u}`))return i.get(`${c}.${u}`);const l=u?`${u}${c.toLowerCase()}`:c.substring(2).toLowerCase(),d=(0,r.keccak256)((0,e.stringToBytes)(l),"bytes"),f=(u?l.substring(`${u}0x`.length):l).split("");for(let g=0;g<40;g+=2)d[g>>1]>>4>=8&&f[g]&&(f[g]=f[g].toUpperCase()),(d[g>>1]&15)>=8&&f[g+1]&&(f[g+1]=f[g+1].toUpperCase());const p=`0x${f.join("")}`;return i.set(`${c}.${u}`,p),p}function a(c,u){if(!(0,s.isAddress)(c,{strict:!1}))throw new t.InvalidAddressError({address:c});return o(c,u)}return xw}var W$;function Pa(){return W$||(W$=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isAddressCache=void 0,t.isAddress=s;const e=ag(),r=pc(),n=/^0x[a-fA-F0-9]{40}$/;t.isAddressCache=new e.LruMap(8192);function s(i,o){const{strict:a=!0}=o??{},c=`${i}.${a}`;if(t.isAddressCache.has(c))return t.isAddressCache.get(c);const u=n.test(i)?i.toLowerCase()===i?!0:a?(0,r.checksumAddress)(i)===i:!0:!1;return t.isAddressCache.set(c,u),u}})(KP)),KP}var zg={},V$;function hi(){if(V$)return zg;V$=1,Object.defineProperty(zg,"__esModule",{value:!0}),zg.concat=t,zg.concatBytes=e,zg.concatHex=r;function t(n){return typeof n[0]=="string"?r(n):e(n)}function e(n){let s=0;for(const a of n)s+=a.length;const i=new Uint8Array(s);let o=0;for(const a of n)i.set(a,o),o+=a.length;return i}function r(n){return`0x${n.reduce((s,i)=>s+i.replace("0x",""),"")}`}return zg}var Wg={},G$;function Jc(){if(G$)return Wg;G$=1,Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.slice=n,Wg.sliceBytes=o,Wg.sliceHex=a;const t=T5(),e=Ho(),r=Ta();function n(c,u,l,{strict:d}={}){return(0,e.isHex)(c,{strict:!1})?a(c,u,l,{strict:d}):o(c,u,l,{strict:d})}function s(c,u){if(typeof u=="number"&&u>0&&u>(0,r.size)(c)-1)throw new t.SliceOffsetOutOfBoundsError({offset:u,position:"start",size:(0,r.size)(c)})}function i(c,u,l){if(typeof u=="number"&&typeof l=="number"&&(0,r.size)(c)!==l-u)throw new t.SliceOffsetOutOfBoundsError({offset:l,position:"end",size:(0,r.size)(c)})}function o(c,u,l,{strict:d}={}){s(c,u);const f=c.slice(u,l);return d&&i(f,u,l),f}function a(c,u,l,{strict:d}={}){s(c,u);const f=`0x${c.replace("0x","").slice((u??0)*2,(l??c.length)*2)}`;return d&&i(f,u,l),f}return Wg}var md={},K$;function P5(){return K$||(K$=1,Object.defineProperty(md,"__esModule",{value:!0}),md.integerRegex=md.bytesRegex=md.arrayRegex=void 0,md.arrayRegex=/^(.*)\[([0-9]*)\]$/,md.bytesRegex=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,md.integerRegex=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/),md}var Z$;function Vu(){if(Z$)return Ew;Z$=1,Object.defineProperty(Ew,"__esModule",{value:!0}),Ew.encodeAbiParameters=d,Ew.getArrayComponents=P;const t=Jn(),e=Wu(),r=Kt(),n=ib(),s=Pa(),i=hi(),o=Gh(),a=Ta(),c=Jc(),u=tt(),l=P5();function d(D,L){if(D.length!==L.length)throw new t.AbiEncodingLengthMismatchError({expectedLength:D.length,givenLength:L.length});const I=f({params:D,values:L}),U=g(I);return U.length===0?"0x":U}function f({params:D,values:L}){const I=[];for(let U=0;U<D.length;U++)I.push(p({param:D[U],value:L[U]}));return I}function p({param:D,value:L}){const I=P(D.type);if(I){const[U,F]=I;return y(L,{length:U,param:{...D,type:F}})}if(D.type==="tuple")return T(L,{param:D});if(D.type==="address")return h(L);if(D.type==="bool")return S(L);if(D.type.startsWith("uint")||D.type.startsWith("int")){const U=D.type.startsWith("int"),[,,F="256"]=l.integerRegex.exec(D.type)??[];return C(L,{signed:U,size:Number(F)})}if(D.type.startsWith("bytes"))return E(L,{param:D});if(D.type==="string")return _(L);throw new t.InvalidAbiEncodingTypeError(D.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function g(D){let L=0;for(let B=0;B<D.length;B++){const{dynamic:A,encoded:m}=D[B];A?L+=32:L+=(0,a.size)(m)}const I=[],U=[];let F=0;for(let B=0;B<D.length;B++){const{dynamic:A,encoded:m}=D[B];A?(I.push((0,u.numberToHex)(L+F,{size:32})),U.push(m),F+=(0,a.size)(m)):I.push(m)}return(0,i.concat)([...I,...U])}function h(D){if(!(0,s.isAddress)(D))throw new e.InvalidAddressError({address:D});return{dynamic:!1,encoded:(0,o.padHex)(D.toLowerCase())}}function y(D,{length:L,param:I}){const U=L===null;if(!Array.isArray(D))throw new t.InvalidArrayError(D);if(!U&&D.length!==L)throw new t.AbiEncodingArrayLengthMismatchError({expectedLength:L,givenLength:D.length,type:`${I.type}[${L}]`});let F=!1;const B=[];for(let A=0;A<D.length;A++){const m=p({param:I,value:D[A]});m.dynamic&&(F=!0),B.push(m)}if(U||F){const A=g(B);if(U){const m=(0,u.numberToHex)(B.length,{size:32});return{dynamic:!0,encoded:B.length>0?(0,i.concat)([m,A]):m}}if(F)return{dynamic:!0,encoded:A}}return{dynamic:!1,encoded:(0,i.concat)(B.map(({encoded:A})=>A))}}function E(D,{param:L}){const[,I]=L.type.split("bytes"),U=(0,a.size)(D);if(!I){let F=D;return U%32!==0&&(F=(0,o.padHex)(F,{dir:"right",size:Math.ceil((D.length-2)/2/32)*32})),{dynamic:!0,encoded:(0,i.concat)([(0,o.padHex)((0,u.numberToHex)(U,{size:32})),F])}}if(U!==Number.parseInt(I,10))throw new t.AbiEncodingBytesSizeMismatchError({expectedSize:Number.parseInt(I,10),value:D});return{dynamic:!1,encoded:(0,o.padHex)(D,{dir:"right"})}}function S(D){if(typeof D!="boolean")throw new r.BaseError(`Invalid boolean value: "${D}" (type: ${typeof D}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:(0,o.padHex)((0,u.boolToHex)(D))}}function C(D,{signed:L,size:I=256}){if(typeof I=="number"){const U=2n**(BigInt(I)-(L?1n:0n))-1n,F=L?-U-1n:0n;if(D>U||D<F)throw new n.IntegerOutOfRangeError({max:U.toString(),min:F.toString(),signed:L,size:I/8,value:D.toString()})}return{dynamic:!1,encoded:(0,u.numberToHex)(D,{size:32,signed:L})}}function _(D){const L=(0,u.stringToHex)(D),I=Math.ceil((0,a.size)(L)/32),U=[];for(let F=0;F<I;F++)U.push((0,o.padHex)((0,c.slice)(L,F*32,(F+1)*32),{dir:"right"}));return{dynamic:!0,encoded:(0,i.concat)([(0,o.padHex)((0,u.numberToHex)((0,a.size)(L),{size:32})),...U])}}function T(D,{param:L}){let I=!1;const U=[];for(let F=0;F<L.components.length;F++){const B=L.components[F],A=Array.isArray(D)?F:B.name,m=p({param:B,value:D[A]});U.push(m),m.dynamic&&(I=!0)}return{dynamic:I,encoded:I?g(U):(0,i.concat)(U.map(({encoded:F})=>F))}}function P(D){const L=D.match(/^(.*)\[(\d+)?\]$/);return L?[L[2]?Number(L[2]):null,L[1]]:void 0}return Ew}var Vg={},Cw={},Y$;function cg(){if(Y$)return Cw;Y$=1,Object.defineProperty(Cw,"__esModule",{value:!0}),Cw.toFunctionSelector=void 0;const t=Jc(),e=N5(),r=n=>(0,t.slice)((0,e.toSignatureHash)(n),0,4);return Cw.toFunctionSelector=r,Cw}var J$;function ff(){if(J$)return Vg;J$=1,Object.defineProperty(Vg,"__esModule",{value:!0}),Vg.getAbiItem=i,Vg.isArgOfType=o,Vg.getAmbiguousTypes=a;const t=Jn(),e=Ho(),r=Pa(),n=ob(),s=cg();function i(c){const{abi:u,args:l=[],name:d}=c,f=(0,e.isHex)(d,{strict:!1}),p=u.filter(h=>f?h.type==="function"?(0,s.toFunctionSelector)(h)===d:h.type==="event"?(0,n.toEventSelector)(h)===d:!1:"name"in h&&h.name===d);if(p.length===0)return;if(p.length===1)return p[0];let g;for(const h of p){if(!("inputs"in h))continue;if(!l||l.length===0){if(!h.inputs||h.inputs.length===0)return h;continue}if(!h.inputs||h.inputs.length===0||h.inputs.length!==l.length)continue;if(l.every((E,S)=>{const C="inputs"in h&&h.inputs[S];return C?o(E,C):!1})){if(g&&"inputs"in g&&g.inputs){const E=a(h.inputs,g.inputs,l);if(E)throw new t.AbiItemAmbiguityError({abiItem:h,type:E[0]},{abiItem:g,type:E[1]})}g=h}}return g||p[0]}function o(c,u){const l=typeof c,d=u.type;switch(d){case"address":return(0,r.isAddress)(c,{strict:!1});case"bool":return l==="boolean";case"function":return l==="string";case"string":return l==="string";default:return d==="tuple"&&"components"in u?Object.values(u.components).every((f,p)=>o(Object.values(c)[p],f)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(d)?l==="number"||l==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(d)?l==="string"||c instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(d)?Array.isArray(c)&&c.every(f=>o(f,{...u,type:d.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function a(c,u,l){for(const d in c){const f=c[d],p=u[d];if(f.type==="tuple"&&p.type==="tuple"&&"components"in f&&"components"in p)return a(f.components,p.components,l[d]);const g=[f.type,p.type];if(g.includes("address")&&g.includes("bytes20")?!0:g.includes("address")&&g.includes("string")?(0,r.isAddress)(l[d],{strict:!1}):g.includes("address")&&g.includes("bytes")?(0,r.isAddress)(l[d],{strict:!1}):!1)return g}}return Vg}var X$;function ug(){if(X$)return W2;X$=1,Object.defineProperty(W2,"__esModule",{value:!0}),W2.encodeEventTopics=u;const t=Jn(),e=dse(),r=Pn(),n=Na(),s=ob(),i=Vu(),o=lf(),a=ff(),c="/docs/contract/encodeEventTopics";function u(d){const{abi:f,eventName:p,args:g}=d;let h=f[0];if(p){const C=(0,a.getAbiItem)({abi:f,name:p});if(!C)throw new t.AbiEventNotFoundError(p,{docsPath:c});h=C}if(h.type!=="event")throw new t.AbiEventNotFoundError(void 0,{docsPath:c});const y=(0,o.formatAbiItem)(h),E=(0,s.toEventSelector)(y);let S=[];if(g&&"inputs"in h){const C=h.inputs?.filter(T=>"indexed"in T&&T.indexed),_=Array.isArray(g)?g:Object.values(g).length>0?C?.map(T=>g[T.name])??[]:[];_.length>0&&(S=C?.map((T,P)=>Array.isArray(_[P])?_[P].map((D,L)=>l({param:T,value:_[P][L]})):typeof _[P]<"u"&&_[P]!==null?l({param:T,value:_[P]}):null)??[])}return[E,...S]}function l({param:d,value:f}){if(d.type==="string"||d.type==="bytes")return(0,n.keccak256)((0,r.toBytes)(f));if(d.type==="tuple"||d.type.match(/^(.*)\[(\d+)?\]$/))throw new e.FilterTypeNotSupportedError(d.type);return(0,i.encodeAbiParameters)([d],[f])}return W2}var Q2={},Q$;function R5(){if(Q$)return Q2;Q$=1,Object.defineProperty(Q2,"__esModule",{value:!0}),Q2.createFilterRequestScope=t;function t(e,{method:r}){const n={};return e.transport.type==="fallback"&&e.transport.onResponse?.(({method:s,response:i,status:o,transport:a})=>{o==="success"&&r===s&&(n[i]=a.request)}),(s=>n[s]||e.request)}return Q2}var eq;function _B(){if(eq)return z2;eq=1,Object.defineProperty(z2,"__esModule",{value:!0}),z2.createContractEventFilter=n;const t=ug(),e=tt(),r=R5();async function n(s,i){const{address:o,abi:a,args:c,eventName:u,fromBlock:l,strict:d,toBlock:f}=i,p=(0,r.createFilterRequestScope)(s,{method:"eth_newFilter"}),g=u?(0,t.encodeEventTopics)({abi:a,args:c,eventName:u}):void 0,h=await s.request({method:"eth_newFilter",params:[{address:o,fromBlock:typeof l=="bigint"?(0,e.numberToHex)(l):l,toBlock:typeof f=="bigint"?(0,e.numberToHex)(f):f,topics:g}]});return{abi:a,args:c,eventName:u,id:h,request:p(h),strict:!!d,type:"event"}}return z2}var eA={},tA={},tq;function is(){if(tq)return tA;tq=1,Object.defineProperty(tA,"__esModule",{value:!0}),tA.parseAccount=t;function t(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}return tA}var rA={},nA={},rq;function pse(){if(rq)return nA;rq=1,Object.defineProperty(nA,"__esModule",{value:!0}),nA.prepareEncodeFunctionData=i;const t=Jn(),e=cg(),r=lf(),n=ff(),s="/docs/contract/encodeFunctionData";function i(o){const{abi:a,args:c,functionName:u}=o;let l=a[0];if(u){const d=(0,n.getAbiItem)({abi:a,args:c,name:u});if(!d)throw new t.AbiFunctionNotFoundError(u,{docsPath:s});l=d}if(l.type!=="function")throw new t.AbiFunctionNotFoundError(void 0,{docsPath:s});return{abi:[l],functionName:(0,e.toFunctionSelector)((0,r.formatAbiItem)(l))}}return nA}var nq;function Ra(){if(nq)return rA;nq=1,Object.defineProperty(rA,"__esModule",{value:!0}),rA.encodeFunctionData=n;const t=hi(),e=Vu(),r=pse();function n(s){const{args:i}=s,{abi:o,functionName:a}=s.abi.length===1&&s.functionName?.startsWith("0x")?s:(0,r.prepareEncodeFunctionData)(s),c=o[0],u=a,l="inputs"in c&&c.inputs?(0,e.encodeAbiParameters)(c.inputs,i??[]):void 0;return(0,t.concatHex)([u,l??"0x"])}return rA}var sA={},xo={},yd={},sq;function AB(){return sq||(sq=1,Object.defineProperty(yd,"__esModule",{value:!0}),yd.solidityPanic=yd.solidityError=yd.panicReasons=void 0,yd.panicReasons={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},yd.solidityError={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},yd.solidityPanic={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}),yd}var iA={},oA={},aA={},bd={},iq;function gse(){if(iq)return bd;iq=1,Object.defineProperty(bd,"__esModule",{value:!0}),bd.RecursiveReadLimitExceededError=bd.PositionOutOfBoundsError=bd.NegativeOffsetError=void 0;const t=Kt();class e extends t.BaseError{constructor({offset:i}){super(`Offset \`${i}\` cannot be negative.`,{name:"NegativeOffsetError"})}}bd.NegativeOffsetError=e;class r extends t.BaseError{constructor({length:i,position:o}){super(`Position \`${o}\` is out of bounds (\`0 < position < ${i}\`).`,{name:"PositionOutOfBoundsError"})}}bd.PositionOutOfBoundsError=r;class n extends t.BaseError{constructor({count:i,limit:o}){super(`Recursive read limit of \`${o}\` exceeded (recursive read count: \`${i}\`).`,{name:"RecursiveReadLimitExceededError"})}}return bd.RecursiveReadLimitExceededError=n,bd}var oq;function o_(){if(oq)return aA;oq=1,Object.defineProperty(aA,"__esModule",{value:!0}),aA.createCursor=r;const t=gse(),e={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new t.RecursiveReadLimitExceededError({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(n){if(n<0||n>this.bytes.length-1)throw new t.PositionOutOfBoundsError({length:this.bytes.length,position:n})},decrementPosition(n){if(n<0)throw new t.NegativeOffsetError({offset:n});const s=this.position-n;this.assertPosition(s),this.position=s},getReadCount(n){return this.positionReadCount.get(n||this.position)||0},incrementPosition(n){if(n<0)throw new t.NegativeOffsetError({offset:n});const s=this.position+n;this.assertPosition(s),this.position=s},inspectByte(n){const s=n??this.position;return this.assertPosition(s),this.bytes[s]},inspectBytes(n,s){const i=s??this.position;return this.assertPosition(i+n-1),this.bytes.subarray(i,i+n)},inspectUint8(n){const s=n??this.position;return this.assertPosition(s),this.bytes[s]},inspectUint16(n){const s=n??this.position;return this.assertPosition(s+1),this.dataView.getUint16(s)},inspectUint24(n){const s=n??this.position;return this.assertPosition(s+2),(this.dataView.getUint16(s)<<8)+this.dataView.getUint8(s+2)},inspectUint32(n){const s=n??this.position;return this.assertPosition(s+3),this.dataView.getUint32(s)},pushByte(n){this.assertPosition(this.position),this.bytes[this.position]=n,this.position++},pushBytes(n){this.assertPosition(this.position+n.length-1),this.bytes.set(n,this.position),this.position+=n.length},pushUint8(n){this.assertPosition(this.position),this.bytes[this.position]=n,this.position++},pushUint16(n){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,n),this.position+=2},pushUint24(n){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,n>>8),this.dataView.setUint8(this.position+2,n&255),this.position+=3},pushUint32(n){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,n),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const n=this.inspectByte();return this.position++,n},readBytes(n,s){this.assertReadLimit(),this._touch();const i=this.inspectBytes(n);return this.position+=s??n,i},readUint8(){this.assertReadLimit(),this._touch();const n=this.inspectUint8();return this.position+=1,n},readUint16(){this.assertReadLimit(),this._touch();const n=this.inspectUint16();return this.position+=2,n},readUint24(){this.assertReadLimit(),this._touch();const n=this.inspectUint24();return this.position+=3,n},readUint32(){this.assertReadLimit(),this._touch();const n=this.inspectUint32();return this.position+=4,n},get remaining(){return this.bytes.length-this.position},setPosition(n){const s=this.position;return this.assertPosition(n),this.position=n,()=>this.position=s},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const n=this.getReadCount();this.positionReadCount.set(this.position,n+1),n>0&&this.recursiveReadCount++}};function r(n,{recursiveReadLimit:s=8192}={}){const i=Object.create(e);return i.bytes=n,i.dataView=new DataView(n.buffer,n.byteOffset,n.byteLength),i.positionReadCount=new Map,i.recursiveReadLimit=s,i}return aA}var Ff={},aq;function xB(){if(aq)return Ff;aq=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.fromBytes=s,Ff.bytesToBigInt=i,Ff.bytesToBool=o,Ff.bytesToNumber=a,Ff.bytesToString=c;const t=ib(),e=df(),r=ys(),n=tt();function s(u,l){const d=typeof l=="string"?{to:l}:l,f=d.to;return f==="number"?a(u,d):f==="bigint"?i(u,d):f==="boolean"?o(u,d):f==="string"?c(u,d):(0,n.bytesToHex)(u,d)}function i(u,l={}){typeof l.size<"u"&&(0,r.assertSize)(u,{size:l.size});const d=(0,n.bytesToHex)(u,l);return(0,r.hexToBigInt)(d,l)}function o(u,l={}){let d=u;if(typeof l.size<"u"&&((0,r.assertSize)(d,{size:l.size}),d=(0,e.trim)(d)),d.length>1||d[0]>1)throw new t.InvalidBytesBooleanError(d);return!!d[0]}function a(u,l={}){typeof l.size<"u"&&(0,r.assertSize)(u,{size:l.size});const d=(0,n.bytesToHex)(u,l);return(0,r.hexToNumber)(d,l)}function c(u,l={}){let d=u;return typeof l.size<"u"&&((0,r.assertSize)(d,{size:l.size}),d=(0,e.trim)(d,{dir:"right"})),new TextDecoder().decode(d)}return Ff}var cq;function Zh(){if(cq)return oA;cq=1,Object.defineProperty(oA,"__esModule",{value:!0}),oA.decodeAbiParameters=l;const t=Jn(),e=pc(),r=o_(),n=Ta(),s=Jc(),i=df(),o=xB(),a=Pn(),c=tt(),u=Vu();function l(P,D){const L=typeof D=="string"?(0,a.hexToBytes)(D):D,I=(0,r.createCursor)(L);if((0,n.size)(L)===0&&P.length>0)throw new t.AbiDecodingZeroDataError;if((0,n.size)(D)&&(0,n.size)(D)<32)throw new t.AbiDecodingDataSizeTooSmallError({data:typeof D=="string"?D:(0,c.bytesToHex)(D),params:P,size:(0,n.size)(D)});let U=0;const F=[];for(let B=0;B<P.length;++B){const A=P[B];I.setPosition(U);const[m,b]=d(I,A,{staticPosition:0});U+=b,F.push(m)}return F}function d(P,D,{staticPosition:L}){const I=(0,u.getArrayComponents)(D.type);if(I){const[U,F]=I;return h(P,{...D,type:F},{length:U,staticPosition:L})}if(D.type==="tuple")return C(P,D,{staticPosition:L});if(D.type==="address")return g(P);if(D.type==="bool")return y(P);if(D.type.startsWith("bytes"))return E(P,D,{staticPosition:L});if(D.type.startsWith("uint")||D.type.startsWith("int"))return S(P,D);if(D.type==="string")return _(P,{staticPosition:L});throw new t.InvalidAbiDecodingTypeError(D.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const f=32,p=32;function g(P){const D=P.readBytes(32);return[(0,e.checksumAddress)((0,c.bytesToHex)((0,s.sliceBytes)(D,-20))),32]}function h(P,D,{length:L,staticPosition:I}){if(!L){const B=(0,o.bytesToNumber)(P.readBytes(p)),A=I+B,m=A+f;P.setPosition(A);const b=(0,o.bytesToNumber)(P.readBytes(f)),w=T(D);let x=0;const M=[];for(let k=0;k<b;++k){P.setPosition(m+(w?k*32:x));const[j,N]=d(P,D,{staticPosition:m});x+=N,M.push(j)}return P.setPosition(I+32),[M,32]}if(T(D)){const B=(0,o.bytesToNumber)(P.readBytes(p)),A=I+B,m=[];for(let b=0;b<L;++b){P.setPosition(A+b*32);const[w]=d(P,D,{staticPosition:A});m.push(w)}return P.setPosition(I+32),[m,32]}let U=0;const F=[];for(let B=0;B<L;++B){const[A,m]=d(P,D,{staticPosition:I+U});U+=m,F.push(A)}return[F,U]}function y(P){return[(0,o.bytesToBool)(P.readBytes(32),{size:32}),32]}function E(P,D,{staticPosition:L}){const[I,U]=D.type.split("bytes");if(!U){const B=(0,o.bytesToNumber)(P.readBytes(32));P.setPosition(L+B);const A=(0,o.bytesToNumber)(P.readBytes(32));if(A===0)return P.setPosition(L+32),["0x",32];const m=P.readBytes(A);return P.setPosition(L+32),[(0,c.bytesToHex)(m),32]}return[(0,c.bytesToHex)(P.readBytes(Number.parseInt(U,10),32)),32]}function S(P,D){const L=D.type.startsWith("int"),I=Number.parseInt(D.type.split("int")[1]||"256",10),U=P.readBytes(32);return[I>48?(0,o.bytesToBigInt)(U,{signed:L}):(0,o.bytesToNumber)(U,{signed:L}),32]}function C(P,D,{staticPosition:L}){const I=D.components.length===0||D.components.some(({name:B})=>!B),U=I?[]:{};let F=0;if(T(D)){const B=(0,o.bytesToNumber)(P.readBytes(p)),A=L+B;for(let m=0;m<D.components.length;++m){const b=D.components[m];P.setPosition(A+F);const[w,x]=d(P,b,{staticPosition:A});F+=x,U[I?m:b?.name]=w}return P.setPosition(L+32),[U,32]}for(let B=0;B<D.components.length;++B){const A=D.components[B],[m,b]=d(P,A,{staticPosition:L});U[I?B:A?.name]=m,F+=b}return[U,F]}function _(P,{staticPosition:D}){const L=(0,o.bytesToNumber)(P.readBytes(32)),I=D+L;P.setPosition(I);const U=(0,o.bytesToNumber)(P.readBytes(32));if(U===0)return P.setPosition(D+32),["",32];const F=P.readBytes(U,32),B=(0,o.bytesToString)((0,i.trim)(F));return P.setPosition(D+32),[B,32]}function T(P){const{type:D}=P;if(D==="string"||D==="bytes"||D.endsWith("[]"))return!0;if(D==="tuple")return P.components?.some(T);const L=(0,u.getArrayComponents)(P.type);return!!(L&&T({...P,type:L[1]}))}return oA}var uq;function O5(){if(uq)return iA;uq=1,Object.defineProperty(iA,"__esModule",{value:!0}),iA.decodeErrorResult=o;const t=AB(),e=Jn(),r=Jc(),n=cg(),s=Zh(),i=lf();function o(a){const{abi:c,data:u}=a,l=(0,r.slice)(u,0,4);if(l==="0x")throw new e.AbiDecodingZeroDataError;const f=[...c||[],t.solidityError,t.solidityPanic].find(p=>p.type==="error"&&l===(0,n.toFunctionSelector)((0,i.formatAbiItem)(p)));if(!f)throw new e.AbiErrorSignatureNotFoundError(l,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:f,args:"inputs"in f&&f.inputs&&f.inputs.length>0?(0,s.decodeAbiParameters)(f.inputs,(0,r.slice)(u,4)):void 0,errorName:f.name}}return iA}var cA={},Sw={},lq;function Fi(){if(lq)return Sw;lq=1,Object.defineProperty(Sw,"__esModule",{value:!0}),Sw.stringify=void 0;const t=(e,r,n)=>JSON.stringify(e,(s,i)=>{const o=typeof i=="bigint"?i.toString():i;return typeof r=="function"?r(s,o):o},n);return Sw.stringify=t,Sw}var dq;function mse(){if(dq)return cA;dq=1,Object.defineProperty(cA,"__esModule",{value:!0}),cA.formatAbiItemWithArgs=e;const t=Fi();function e({abiItem:r,args:n,includeFunctionName:s=!0,includeName:i=!1}){if("name"in r&&"inputs"in r&&r.inputs)return`${s?r.name:""}(${r.inputs.map((o,a)=>`${i&&o.name?`${o.name}: `:""}${typeof n[a]=="object"?(0,t.stringify)(n[a]):n[a]}`).join(", ")})`}return cA}var uA={},wd={},fq;function a_(){return fq||(fq=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.weiUnits=wd.gweiUnits=wd.etherUnits=void 0,wd.etherUnits={gwei:9,wei:18},wd.gweiUnits={ether:-9,wei:9},wd.weiUnits={ether:-18,gwei:-9}),wd}var lA={},hq;function k5(){if(hq)return lA;hq=1,Object.defineProperty(lA,"__esModule",{value:!0}),lA.formatUnits=t;function t(e,r){let n=e.toString();const s=n.startsWith("-");s&&(n=n.slice(1)),n=n.padStart(r,"0");let[i,o]=[n.slice(0,n.length-r),n.slice(n.length-r)];return o=o.replace(/(0+)$/,""),`${s?"-":""}${i||"0"}${o?`.${o}`:""}`}return lA}var pq;function c_(){if(pq)return uA;pq=1,Object.defineProperty(uA,"__esModule",{value:!0}),uA.formatEther=r;const t=a_(),e=k5();function r(n,s="wei"){return(0,e.formatUnits)(n,t.etherUnits[s])}return uA}var dA={},gq;function lg(){if(gq)return dA;gq=1,Object.defineProperty(dA,"__esModule",{value:!0}),dA.formatGwei=r;const t=a_(),e=k5();function r(n,s="wei"){return(0,e.formatUnits)(n,t.gweiUnits[s])}return dA}var vd={},mq;function CB(){if(mq)return vd;mq=1,Object.defineProperty(vd,"__esModule",{value:!0}),vd.StateAssignmentConflictError=vd.AccountStateConflictError=void 0,vd.prettyStateMapping=n,vd.prettyStateOverride=s;const t=Kt();class e extends t.BaseError{constructor({address:o}){super(`State for account "${o}" is set multiple times.`,{name:"AccountStateConflictError"})}}vd.AccountStateConflictError=e;class r extends t.BaseError{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}vd.StateAssignmentConflictError=r;function n(i){return i.reduce((o,{slot:a,value:c})=>`${o}        ${a}: ${c}
`,"")}function s(i){return i.reduce((o,{address:a,...c})=>{let u=`${o}    ${a}:
`;return c.nonce&&(u+=`      nonce: ${c.nonce}
`),c.balance&&(u+=`      balance: ${c.balance}
`),c.code&&(u+=`      code: ${c.code}
`),c.state&&(u+=`      state:
`,u+=n(c.state)),c.stateDiff&&(u+=`      stateDiff:
`,u+=n(c.stateDiff)),u},`  State Override:
`).slice(0,-1)}return vd}var Bn={},yq;function Oa(){if(yq)return Bn;yq=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.WaitForTransactionReceiptTimeoutError=Bn.TransactionReceiptRevertedError=Bn.TransactionReceiptNotFoundError=Bn.TransactionNotFoundError=Bn.TransactionExecutionError=Bn.InvalidStorageKeySizeError=Bn.InvalidSerializedTransactionError=Bn.InvalidSerializedTransactionTypeError=Bn.InvalidSerializableTransactionError=Bn.InvalidLegacyVError=Bn.FeeConflictError=void 0,Bn.prettyPrint=n;const t=c_(),e=lg(),r=Kt();function n(h){const y=Object.entries(h).map(([S,C])=>C===void 0||C===!1?null:[S,C]).filter(Boolean),E=y.reduce((S,[C])=>Math.max(S,C.length),0);return y.map(([S,C])=>`  ${`${S}:`.padEnd(E+1)}  ${C}`).join(`
`)}class s extends r.BaseError{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}Bn.FeeConflictError=s;class i extends r.BaseError{constructor({v:y}){super(`Invalid \`v\` value "${y}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}Bn.InvalidLegacyVError=i;class o extends r.BaseError{constructor({transaction:y}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",n(y),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}Bn.InvalidSerializableTransactionError=o;class a extends r.BaseError{constructor({serializedType:y}){super(`Serialized transaction type "${y}" is invalid.`,{name:"InvalidSerializedTransactionType"}),Object.defineProperty(this,"serializedType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.serializedType=y}}Bn.InvalidSerializedTransactionTypeError=a;class c extends r.BaseError{constructor({attributes:y,serializedTransaction:E,type:S}){const C=Object.entries(y).map(([_,T])=>typeof T>"u"?_:void 0).filter(Boolean);super(`Invalid serialized transaction of type "${S}" was provided.`,{metaMessages:[`Serialized Transaction: "${E}"`,C.length>0?`Missing Attributes: ${C.join(", ")}`:""].filter(Boolean),name:"InvalidSerializedTransactionError"}),Object.defineProperty(this,"serializedTransaction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.serializedTransaction=E,this.type=S}}Bn.InvalidSerializedTransactionError=c;class u extends r.BaseError{constructor({storageKey:y}){super(`Size for storage key "${y}" is invalid. Expected 32 bytes. Got ${Math.floor((y.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}Bn.InvalidStorageKeySizeError=u;class l extends r.BaseError{constructor(y,{account:E,docsPath:S,chain:C,data:_,gas:T,gasPrice:P,maxFeePerGas:D,maxPriorityFeePerGas:L,nonce:I,to:U,value:F}){const B=n({chain:C&&`${C?.name} (id: ${C?.id})`,from:E?.address,to:U,value:typeof F<"u"&&`${(0,t.formatEther)(F)} ${C?.nativeCurrency?.symbol||"ETH"}`,data:_,gas:T,gasPrice:typeof P<"u"&&`${(0,e.formatGwei)(P)} gwei`,maxFeePerGas:typeof D<"u"&&`${(0,e.formatGwei)(D)} gwei`,maxPriorityFeePerGas:typeof L<"u"&&`${(0,e.formatGwei)(L)} gwei`,nonce:I});super(y.shortMessage,{cause:y,docsPath:S,metaMessages:[...y.metaMessages?[...y.metaMessages," "]:[],"Request Arguments:",B].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=y}}Bn.TransactionExecutionError=l;class d extends r.BaseError{constructor({blockHash:y,blockNumber:E,blockTag:S,hash:C,index:_}){let T="Transaction";S&&_!==void 0&&(T=`Transaction at block time "${S}" at index "${_}"`),y&&_!==void 0&&(T=`Transaction at block hash "${y}" at index "${_}"`),E&&_!==void 0&&(T=`Transaction at block number "${E}" at index "${_}"`),C&&(T=`Transaction with hash "${C}"`),super(`${T} could not be found.`,{name:"TransactionNotFoundError"})}}Bn.TransactionNotFoundError=d;class f extends r.BaseError{constructor({hash:y}){super(`Transaction receipt with hash "${y}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}Bn.TransactionReceiptNotFoundError=f;class p extends r.BaseError{constructor({receipt:y}){super(`Transaction with hash "${y.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=y}}Bn.TransactionReceiptRevertedError=p;class g extends r.BaseError{constructor({hash:y}){super(`Timed out while waiting for transaction with hash "${y}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}return Bn.WaitForTransactionReceiptTimeoutError=g,Bn}var Cp={},bq;function SB(){if(bq)return Cp;bq=1,Object.defineProperty(Cp,"__esModule",{value:!0}),Cp.getUrl=Cp.getContractAddress=void 0;const t=r=>r;Cp.getContractAddress=t;const e=r=>r;return Cp.getUrl=e,Cp}var wq;function Yh(){if(wq)return xo;wq=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.RawContractError=xo.CounterfactualDeploymentFailedError=xo.ContractFunctionZeroDataError=xo.ContractFunctionRevertedError=xo.ContractFunctionExecutionError=xo.CallExecutionError=void 0;const t=is(),e=AB(),r=O5(),n=lf(),s=mse(),i=ff(),o=c_(),a=lg(),c=Jn(),u=Kt(),l=CB(),d=Oa(),f=SB();class p extends u.BaseError{constructor(_,{account:T,docsPath:P,chain:D,data:L,gas:I,gasPrice:U,maxFeePerGas:F,maxPriorityFeePerGas:B,nonce:A,to:m,value:b,stateOverride:w}){const x=T?(0,t.parseAccount)(T):void 0;let M=(0,d.prettyPrint)({from:x?.address,to:m,value:typeof b<"u"&&`${(0,o.formatEther)(b)} ${D?.nativeCurrency?.symbol||"ETH"}`,data:L,gas:I,gasPrice:typeof U<"u"&&`${(0,a.formatGwei)(U)} gwei`,maxFeePerGas:typeof F<"u"&&`${(0,a.formatGwei)(F)} gwei`,maxPriorityFeePerGas:typeof B<"u"&&`${(0,a.formatGwei)(B)} gwei`,nonce:A});w&&(M+=`
${(0,l.prettyStateOverride)(w)}`),super(_.shortMessage,{cause:_,docsPath:P,metaMessages:[..._.metaMessages?[..._.metaMessages," "]:[],"Raw Call Arguments:",M].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=_}}xo.CallExecutionError=p;class g extends u.BaseError{constructor(_,{abi:T,args:P,contractAddress:D,docsPath:L,functionName:I,sender:U}){const F=(0,i.getAbiItem)({abi:T,args:P,name:I}),B=F?(0,s.formatAbiItemWithArgs)({abiItem:F,args:P,includeFunctionName:!1,includeName:!1}):void 0,A=F?(0,n.formatAbiItem)(F,{includeName:!0}):void 0,m=(0,d.prettyPrint)({address:D&&(0,f.getContractAddress)(D),function:A,args:B&&B!=="()"&&`${[...Array(I?.length??0).keys()].map(()=>" ").join("")}${B}`,sender:U});super(_.shortMessage||`An unknown error occurred while executing the contract function "${I}".`,{cause:_,docsPath:L,metaMessages:[..._.metaMessages?[..._.metaMessages," "]:[],m&&"Contract Call:",m].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=T,this.args=P,this.cause=_,this.contractAddress=D,this.functionName=I,this.sender=U}}xo.ContractFunctionExecutionError=g;class h extends u.BaseError{constructor({abi:_,data:T,functionName:P,message:D}){let L,I,U,F;if(T&&T!=="0x")try{I=(0,r.decodeErrorResult)({abi:_,data:T});const{abiItem:A,errorName:m,args:b}=I;if(m==="Error")F=b[0];else if(m==="Panic"){const[w]=b;F=e.panicReasons[w]}else{const w=A?(0,n.formatAbiItem)(A,{includeName:!0}):void 0,x=A&&b?(0,s.formatAbiItemWithArgs)({abiItem:A,args:b,includeFunctionName:!1,includeName:!1}):void 0;U=[w?`Error: ${w}`:"",x&&x!=="()"?`       ${[...Array(m?.length??0).keys()].map(()=>" ").join("")}${x}`:""]}}catch(A){L=A}else D&&(F=D);let B;L instanceof c.AbiErrorSignatureNotFoundError&&(B=L.signature,U=[`Unable to decode signature "${B}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${B}.`]),super(F&&F!=="execution reverted"||B?[`The contract function "${P}" reverted with the following ${B?"signature":"reason"}:`,F||B].join(`
`):`The contract function "${P}" reverted.`,{cause:L,metaMessages:U,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=I,this.raw=T,this.reason=F,this.signature=B}}xo.ContractFunctionRevertedError=h;class y extends u.BaseError{constructor({functionName:_}){super(`The contract function "${_}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${_}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}xo.ContractFunctionZeroDataError=y;class E extends u.BaseError{constructor({factory:_}){super(`Deployment for counterfactual contract call failed${_?` for factory "${_}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}xo.CounterfactualDeploymentFailedError=E;class S extends u.BaseError{constructor({data:_,message:T}){super(T||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=_}}return xo.RawContractError=S,xo}var La={},vq;function Gu(){if(vq)return La;vq=1,Object.defineProperty(La,"__esModule",{value:!0}),La.TimeoutError=La.SocketClosedError=La.RpcRequestError=La.WebSocketRequestError=La.HttpRequestError=void 0;const t=Fi(),e=Kt(),r=SB();class n extends e.BaseError{constructor({body:u,cause:l,details:d,headers:f,status:p,url:g}){super("HTTP request failed.",{cause:l,details:d,metaMessages:[p&&`Status: ${p}`,`URL: ${(0,r.getUrl)(g)}`,u&&`Request body: ${(0,t.stringify)(u)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=u,this.headers=f,this.status=p,this.url=g}}La.HttpRequestError=n;class s extends e.BaseError{constructor({body:u,cause:l,details:d,url:f}){super("WebSocket request failed.",{cause:l,details:d,metaMessages:[`URL: ${(0,r.getUrl)(f)}`,u&&`Request body: ${(0,t.stringify)(u)}`].filter(Boolean),name:"WebSocketRequestError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=f}}La.WebSocketRequestError=s;class i extends e.BaseError{constructor({body:u,error:l,url:d}){super("RPC Request failed.",{cause:l,details:l.message,metaMessages:[`URL: ${(0,r.getUrl)(d)}`,`Request body: ${(0,t.stringify)(u)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=l.code,this.data=l.data,this.url=d}}La.RpcRequestError=i;class o extends e.BaseError{constructor({url:u}={}){super("The socket has been closed.",{metaMessages:[u&&`URL: ${(0,r.getUrl)(u)}`].filter(Boolean),name:"SocketClosedError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=u}}La.SocketClosedError=o;class a extends e.BaseError{constructor({body:u,url:l}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${(0,r.getUrl)(l)}`,`Request body: ${(0,t.stringify)(u)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=l}}return La.TimeoutError=a,La}var wt={},Eq;function Jh(){if(Eq)return wt;Eq=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.UnknownRpcError=wt.AtomicityNotSupportedError=wt.AtomicReadyWalletRejectedUpgradeError=wt.BundleTooLargeError=wt.UnknownBundleIdError=wt.DuplicateIdError=wt.UnsupportedChainIdError=wt.UnsupportedNonOptionalCapabilityError=wt.SwitchChainError=wt.ChainDisconnectedError=wt.ProviderDisconnectedError=wt.UnsupportedProviderMethodError=wt.UnauthorizedProviderError=wt.UserRejectedRequestError=wt.JsonRpcVersionUnsupportedError=wt.LimitExceededRpcError=wt.MethodNotSupportedRpcError=wt.TransactionRejectedRpcError=wt.ResourceUnavailableRpcError=wt.ResourceNotFoundRpcError=wt.InvalidInputRpcError=wt.InternalRpcError=wt.InvalidParamsRpcError=wt.MethodNotFoundRpcError=wt.InvalidRequestRpcError=wt.ParseRpcError=wt.ProviderRpcError=wt.RpcError=void 0;const t=Kt(),e=Gu(),r=-1;class n extends t.BaseError{constructor(w,{code:x,docsPath:M,metaMessages:k,name:j,shortMessage:N}){super(N,{cause:w,docsPath:M,metaMessages:k||w?.metaMessages,name:j||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=j||w.name,this.code=w instanceof e.RpcRequestError?w.code:x??r}}wt.RpcError=n;class s extends n{constructor(w,x){super(w,x),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=x.data}}wt.ProviderRpcError=s;class i extends n{constructor(w){super(w,{code:i.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}wt.ParseRpcError=i,Object.defineProperty(i,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class o extends n{constructor(w){super(w,{code:o.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}wt.InvalidRequestRpcError=o,Object.defineProperty(o,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class a extends n{constructor(w,{method:x}={}){super(w,{code:a.code,name:"MethodNotFoundRpcError",shortMessage:`The method${x?` "${x}"`:""} does not exist / is not available.`})}}wt.MethodNotFoundRpcError=a,Object.defineProperty(a,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class c extends n{constructor(w){super(w,{code:c.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}wt.InvalidParamsRpcError=c,Object.defineProperty(c,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class u extends n{constructor(w){super(w,{code:u.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}wt.InternalRpcError=u,Object.defineProperty(u,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class l extends n{constructor(w){super(w,{code:l.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}wt.InvalidInputRpcError=l,Object.defineProperty(l,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class d extends n{constructor(w){super(w,{code:d.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}wt.ResourceNotFoundRpcError=d,Object.defineProperty(d,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class f extends n{constructor(w){super(w,{code:f.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}wt.ResourceUnavailableRpcError=f,Object.defineProperty(f,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class p extends n{constructor(w){super(w,{code:p.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}wt.TransactionRejectedRpcError=p,Object.defineProperty(p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class g extends n{constructor(w,{method:x}={}){super(w,{code:g.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${x?` "${x}"`:""} is not supported.`})}}wt.MethodNotSupportedRpcError=g,Object.defineProperty(g,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class h extends n{constructor(w){super(w,{code:h.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}wt.LimitExceededRpcError=h,Object.defineProperty(h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class y extends n{constructor(w){super(w,{code:y.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}wt.JsonRpcVersionUnsupportedError=y,Object.defineProperty(y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class E extends s{constructor(w){super(w,{code:E.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}wt.UserRejectedRequestError=E,Object.defineProperty(E,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class S extends s{constructor(w){super(w,{code:S.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}wt.UnauthorizedProviderError=S,Object.defineProperty(S,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class C extends s{constructor(w,{method:x}={}){super(w,{code:C.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${x?` " ${x}"`:""}.`})}}wt.UnsupportedProviderMethodError=C,Object.defineProperty(C,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class _ extends s{constructor(w){super(w,{code:_.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}wt.ProviderDisconnectedError=_,Object.defineProperty(_,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class T extends s{constructor(w){super(w,{code:T.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}wt.ChainDisconnectedError=T,Object.defineProperty(T,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class P extends s{constructor(w){super(w,{code:P.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}wt.SwitchChainError=P,Object.defineProperty(P,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class D extends s{constructor(w){super(w,{code:D.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}wt.UnsupportedNonOptionalCapabilityError=D,Object.defineProperty(D,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class L extends s{constructor(w){super(w,{code:L.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}wt.UnsupportedChainIdError=L,Object.defineProperty(L,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class I extends s{constructor(w){super(w,{code:I.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}wt.DuplicateIdError=I,Object.defineProperty(I,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class U extends s{constructor(w){super(w,{code:U.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}wt.UnknownBundleIdError=U,Object.defineProperty(U,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class F extends s{constructor(w){super(w,{code:F.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}wt.BundleTooLargeError=F,Object.defineProperty(F,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class B extends s{constructor(w){super(w,{code:B.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}wt.AtomicReadyWalletRejectedUpgradeError=B,Object.defineProperty(B,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class A extends s{constructor(w){super(w,{code:A.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}wt.AtomicityNotSupportedError=A,Object.defineProperty(A,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class m extends n{constructor(w){super(w,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}return wt.UnknownRpcError=m,wt}var _q;function Xh(){if(_q)return sA;_q=1,Object.defineProperty(sA,"__esModule",{value:!0}),sA.getContractError=o;const t=Jn(),e=Kt(),r=Yh(),n=Gu(),s=Jh(),i=3;function o(a,{abi:c,address:u,args:l,docsPath:d,functionName:f,sender:p}){const g=a instanceof r.RawContractError?a:a instanceof e.BaseError?a.walk(T=>"data"in T)||a.walk():{},{code:h,data:y,details:E,message:S,shortMessage:C}=g,_=a instanceof t.AbiDecodingZeroDataError?new r.ContractFunctionZeroDataError({functionName:f}):[i,s.InternalRpcError.code].includes(h)&&(y||E||S||C)||h===s.InvalidInputRpcError.code&&E==="execution reverted"&&y?new r.ContractFunctionRevertedError({abi:c,data:typeof y=="object"?y.data:y,functionName:f,message:g instanceof n.RpcRequestError?E:C??S}):a;return new r.ContractFunctionExecutionError(_,{abi:c,args:l,contractAddress:u,docsPath:d,functionName:f,sender:p})}return sA}var fA={},hA={},pA={},gA={},Aq;function yse(){if(Aq)return gA;Aq=1,Object.defineProperty(gA,"__esModule",{value:!0}),gA.publicKeyToAddress=r;const t=pc(),e=Na();function r(n){const s=(0,e.keccak256)(`0x${n.substring(4)}`).substring(26);return(0,t.checksumAddress)(`0x${s}`)}return gA}var mA={},ZP={},Sn={},Qi={},xq;function bse(){if(xq)return Qi;xq=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.SHA512_IV=Qi.SHA384_IV=Qi.SHA224_IV=Qi.SHA256_IV=Qi.HashMD=void 0,Qi.setBigUint64=e,Qi.Chi=r,Qi.Maj=n;const t=Kh();function e(i,o,a,c){if(typeof i.setBigUint64=="function")return i.setBigUint64(o,a,c);const u=BigInt(32),l=BigInt(4294967295),d=Number(a>>u&l),f=Number(a&l),p=c?4:0,g=c?0:4;i.setUint32(o+p,d,c),i.setUint32(o+g,f,c)}function r(i,o,a){return i&o^~i&a}function n(i,o,a){return i&o^i&a^o&a}class s extends t.Hash{constructor(o,a,c,u){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=o,this.outputLen=a,this.padOffset=c,this.isLE=u,this.buffer=new Uint8Array(o),this.view=(0,t.createView)(this.buffer)}update(o){(0,t.aexists)(this),o=(0,t.toBytes)(o),(0,t.abytes)(o);const{view:a,buffer:c,blockLen:u}=this,l=o.length;for(let d=0;d<l;){const f=Math.min(u-this.pos,l-d);if(f===u){const p=(0,t.createView)(o);for(;u<=l-d;d+=u)this.process(p,d);continue}c.set(o.subarray(d,d+f),this.pos),this.pos+=f,d+=f,this.pos===u&&(this.process(a,0),this.pos=0)}return this.length+=o.length,this.roundClean(),this}digestInto(o){(0,t.aexists)(this),(0,t.aoutput)(o,this),this.finished=!0;const{buffer:a,view:c,blockLen:u,isLE:l}=this;let{pos:d}=this;a[d++]=128,(0,t.clean)(this.buffer.subarray(d)),this.padOffset>u-d&&(this.process(c,0),d=0);for(let y=d;y<u;y++)a[y]=0;e(c,u-8,BigInt(this.length*8),l),this.process(c,0);const f=(0,t.createView)(o),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=p/4,h=this.get();if(g>h.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<g;y++)f.setUint32(4*y,h[y],l)}digest(){const{buffer:o,outputLen:a}=this;this.digestInto(o);const c=o.slice(0,a);return this.destroy(),c}_cloneInto(o){o||(o=new this.constructor),o.set(...this.get());const{blockLen:a,buffer:c,length:u,finished:l,destroyed:d,pos:f}=this;return o.destroyed=d,o.finished=l,o.length=u,o.pos=f,u%a&&o.buffer.set(c),o}clone(){return this._cloneInto()}}return Qi.HashMD=s,Qi.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qi.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),Qi.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Qi.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Qi}var Cq;function wse(){if(Cq)return Sn;Cq=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.sha512_224=Sn.sha512_256=Sn.sha384=Sn.sha512=Sn.sha224=Sn.sha256=Sn.SHA512_256=Sn.SHA512_224=Sn.SHA384=Sn.SHA512=Sn.SHA224=Sn.SHA256=void 0;const t=bse(),e=fse(),r=Kh(),n=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array(64);class i extends t.HashMD{constructor(C=32){super(64,C,8,!1),this.A=t.SHA256_IV[0]|0,this.B=t.SHA256_IV[1]|0,this.C=t.SHA256_IV[2]|0,this.D=t.SHA256_IV[3]|0,this.E=t.SHA256_IV[4]|0,this.F=t.SHA256_IV[5]|0,this.G=t.SHA256_IV[6]|0,this.H=t.SHA256_IV[7]|0}get(){const{A:C,B:_,C:T,D:P,E:D,F:L,G:I,H:U}=this;return[C,_,T,P,D,L,I,U]}set(C,_,T,P,D,L,I,U){this.A=C|0,this.B=_|0,this.C=T|0,this.D=P|0,this.E=D|0,this.F=L|0,this.G=I|0,this.H=U|0}process(C,_){for(let A=0;A<16;A++,_+=4)s[A]=C.getUint32(_,!1);for(let A=16;A<64;A++){const m=s[A-15],b=s[A-2],w=(0,r.rotr)(m,7)^(0,r.rotr)(m,18)^m>>>3,x=(0,r.rotr)(b,17)^(0,r.rotr)(b,19)^b>>>10;s[A]=x+s[A-7]+w+s[A-16]|0}let{A:T,B:P,C:D,D:L,E:I,F:U,G:F,H:B}=this;for(let A=0;A<64;A++){const m=(0,r.rotr)(I,6)^(0,r.rotr)(I,11)^(0,r.rotr)(I,25),b=B+m+(0,t.Chi)(I,U,F)+n[A]+s[A]|0,x=((0,r.rotr)(T,2)^(0,r.rotr)(T,13)^(0,r.rotr)(T,22))+(0,t.Maj)(T,P,D)|0;B=F,F=U,U=I,I=L+b|0,L=D,D=P,P=T,T=b+x|0}T=T+this.A|0,P=P+this.B|0,D=D+this.C|0,L=L+this.D|0,I=I+this.E|0,U=U+this.F|0,F=F+this.G|0,B=B+this.H|0,this.set(T,P,D,L,I,U,F,B)}roundClean(){(0,r.clean)(s)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,r.clean)(this.buffer)}}Sn.SHA256=i;class o extends i{constructor(){super(28),this.A=t.SHA224_IV[0]|0,this.B=t.SHA224_IV[1]|0,this.C=t.SHA224_IV[2]|0,this.D=t.SHA224_IV[3]|0,this.E=t.SHA224_IV[4]|0,this.F=t.SHA224_IV[5]|0,this.G=t.SHA224_IV[6]|0,this.H=t.SHA224_IV[7]|0}}Sn.SHA224=o;const a=e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(S=>BigInt(S))),c=a[0],u=a[1],l=new Uint32Array(80),d=new Uint32Array(80);class f extends t.HashMD{constructor(C=64){super(128,C,16,!1),this.Ah=t.SHA512_IV[0]|0,this.Al=t.SHA512_IV[1]|0,this.Bh=t.SHA512_IV[2]|0,this.Bl=t.SHA512_IV[3]|0,this.Ch=t.SHA512_IV[4]|0,this.Cl=t.SHA512_IV[5]|0,this.Dh=t.SHA512_IV[6]|0,this.Dl=t.SHA512_IV[7]|0,this.Eh=t.SHA512_IV[8]|0,this.El=t.SHA512_IV[9]|0,this.Fh=t.SHA512_IV[10]|0,this.Fl=t.SHA512_IV[11]|0,this.Gh=t.SHA512_IV[12]|0,this.Gl=t.SHA512_IV[13]|0,this.Hh=t.SHA512_IV[14]|0,this.Hl=t.SHA512_IV[15]|0}get(){const{Ah:C,Al:_,Bh:T,Bl:P,Ch:D,Cl:L,Dh:I,Dl:U,Eh:F,El:B,Fh:A,Fl:m,Gh:b,Gl:w,Hh:x,Hl:M}=this;return[C,_,T,P,D,L,I,U,F,B,A,m,b,w,x,M]}set(C,_,T,P,D,L,I,U,F,B,A,m,b,w,x,M){this.Ah=C|0,this.Al=_|0,this.Bh=T|0,this.Bl=P|0,this.Ch=D|0,this.Cl=L|0,this.Dh=I|0,this.Dl=U|0,this.Eh=F|0,this.El=B|0,this.Fh=A|0,this.Fl=m|0,this.Gh=b|0,this.Gl=w|0,this.Hh=x|0,this.Hl=M|0}process(C,_){for(let N=0;N<16;N++,_+=4)l[N]=C.getUint32(_),d[N]=C.getUint32(_+=4);for(let N=16;N<80;N++){const v=l[N-15]|0,R=d[N-15]|0,$=e.rotrSH(v,R,1)^e.rotrSH(v,R,8)^e.shrSH(v,R,7),O=e.rotrSL(v,R,1)^e.rotrSL(v,R,8)^e.shrSL(v,R,7),H=l[N-2]|0,W=d[N-2]|0,G=e.rotrSH(H,W,19)^e.rotrBH(H,W,61)^e.shrSH(H,W,6),K=e.rotrSL(H,W,19)^e.rotrBL(H,W,61)^e.shrSL(H,W,6),Q=e.add4L(O,K,d[N-7],d[N-16]),re=e.add4H(Q,$,G,l[N-7],l[N-16]);l[N]=re|0,d[N]=Q|0}let{Ah:T,Al:P,Bh:D,Bl:L,Ch:I,Cl:U,Dh:F,Dl:B,Eh:A,El:m,Fh:b,Fl:w,Gh:x,Gl:M,Hh:k,Hl:j}=this;for(let N=0;N<80;N++){const v=e.rotrSH(A,m,14)^e.rotrSH(A,m,18)^e.rotrBH(A,m,41),R=e.rotrSL(A,m,14)^e.rotrSL(A,m,18)^e.rotrBL(A,m,41),$=A&b^~A&x,O=m&w^~m&M,H=e.add5L(j,R,O,u[N],d[N]),W=e.add5H(H,k,v,$,c[N],l[N]),G=H|0,K=e.rotrSH(T,P,28)^e.rotrBH(T,P,34)^e.rotrBH(T,P,39),Q=e.rotrSL(T,P,28)^e.rotrBL(T,P,34)^e.rotrBL(T,P,39),re=T&D^T&I^D&I,de=P&L^P&U^L&U;k=x|0,j=M|0,x=b|0,M=w|0,b=A|0,w=m|0,{h:A,l:m}=e.add(F|0,B|0,W|0,G|0),F=I|0,B=U|0,I=D|0,U=L|0,D=T|0,L=P|0;const le=e.add3L(G,Q,de);T=e.add3H(le,W,K,re),P=le|0}({h:T,l:P}=e.add(this.Ah|0,this.Al|0,T|0,P|0)),{h:D,l:L}=e.add(this.Bh|0,this.Bl|0,D|0,L|0),{h:I,l:U}=e.add(this.Ch|0,this.Cl|0,I|0,U|0),{h:F,l:B}=e.add(this.Dh|0,this.Dl|0,F|0,B|0),{h:A,l:m}=e.add(this.Eh|0,this.El|0,A|0,m|0),{h:b,l:w}=e.add(this.Fh|0,this.Fl|0,b|0,w|0),{h:x,l:M}=e.add(this.Gh|0,this.Gl|0,x|0,M|0),{h:k,l:j}=e.add(this.Hh|0,this.Hl|0,k|0,j|0),this.set(T,P,D,L,I,U,F,B,A,m,b,w,x,M,k,j)}roundClean(){(0,r.clean)(l,d)}destroy(){(0,r.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Sn.SHA512=f;class p extends f{constructor(){super(48),this.Ah=t.SHA384_IV[0]|0,this.Al=t.SHA384_IV[1]|0,this.Bh=t.SHA384_IV[2]|0,this.Bl=t.SHA384_IV[3]|0,this.Ch=t.SHA384_IV[4]|0,this.Cl=t.SHA384_IV[5]|0,this.Dh=t.SHA384_IV[6]|0,this.Dl=t.SHA384_IV[7]|0,this.Eh=t.SHA384_IV[8]|0,this.El=t.SHA384_IV[9]|0,this.Fh=t.SHA384_IV[10]|0,this.Fl=t.SHA384_IV[11]|0,this.Gh=t.SHA384_IV[12]|0,this.Gl=t.SHA384_IV[13]|0,this.Hh=t.SHA384_IV[14]|0,this.Hl=t.SHA384_IV[15]|0}}Sn.SHA384=p;const g=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),h=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class y extends f{constructor(){super(28),this.Ah=g[0]|0,this.Al=g[1]|0,this.Bh=g[2]|0,this.Bl=g[3]|0,this.Ch=g[4]|0,this.Cl=g[5]|0,this.Dh=g[6]|0,this.Dl=g[7]|0,this.Eh=g[8]|0,this.El=g[9]|0,this.Fh=g[10]|0,this.Fl=g[11]|0,this.Gh=g[12]|0,this.Gl=g[13]|0,this.Hh=g[14]|0,this.Hl=g[15]|0}}Sn.SHA512_224=y;class E extends f{constructor(){super(32),this.Ah=h[0]|0,this.Al=h[1]|0,this.Bh=h[2]|0,this.Bl=h[3]|0,this.Ch=h[4]|0,this.Cl=h[5]|0,this.Dh=h[6]|0,this.Dl=h[7]|0,this.Eh=h[8]|0,this.El=h[9]|0,this.Fh=h[10]|0,this.Fl=h[11]|0,this.Gh=h[12]|0,this.Gl=h[13]|0,this.Hh=h[14]|0,this.Hl=h[15]|0}}return Sn.SHA512_256=E,Sn.sha256=(0,r.createHasher)(()=>new i),Sn.sha224=(0,r.createHasher)(()=>new o),Sn.sha512=(0,r.createHasher)(()=>new f),Sn.sha384=(0,r.createHasher)(()=>new p),Sn.sha512_256=(0,r.createHasher)(()=>new E),Sn.sha512_224=(0,r.createHasher)(()=>new y),Sn}var Iw={},YP={},Sq;function IUe(){return Sq||(Sq=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=Kh();class r extends e.Hash{constructor(i,o){super(),this.finished=!1,this.destroyed=!1,(0,e.ahash)(i);const a=(0,e.toBytes)(o);if(this.iHash=i.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,u=new Uint8Array(c);u.set(a.length>c?i.create().update(a).digest():a);for(let l=0;l<u.length;l++)u[l]^=54;this.iHash.update(u),this.oHash=i.create();for(let l=0;l<u.length;l++)u[l]^=106;this.oHash.update(u),(0,e.clean)(u)}update(i){return(0,e.aexists)(this),this.iHash.update(i),this}digestInto(i){(0,e.aexists)(this),(0,e.abytes)(i,this.outputLen),this.finished=!0,this.iHash.digestInto(i),this.oHash.update(i),this.oHash.digestInto(i),this.destroy()}digest(){const i=new Uint8Array(this.oHash.outputLen);return this.digestInto(i),i}_cloneInto(i){i||(i=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:a,finished:c,destroyed:u,blockLen:l,outputLen:d}=this;return i=i,i.finished=c,i.destroyed=u,i.blockLen=l,i.outputLen=d,i.oHash=o._cloneInto(i.oHash),i.iHash=a._cloneInto(i.iHash),i}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=r;const n=(s,i,o)=>new r(s,i).update(o).digest();t.hmac=n,t.hmac.create=(s,i)=>new r(s,i)})(YP)),YP}var JP={},Sp={},$n={},Jr={},Iq;function dg(){if(Iq)return Jr;Iq=1;Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.notImplemented=Jr.bitMask=void 0,Jr.isBytes=r,Jr.abytes=n,Jr.abool=s,Jr.numberToHexUnpadded=i,Jr.hexToNumber=o,Jr.bytesToHex=u,Jr.hexToBytes=f,Jr.bytesToNumberBE=p,Jr.bytesToNumberLE=g,Jr.numberToBytesBE=h,Jr.numberToBytesLE=y,Jr.numberToVarBytesBE=E,Jr.ensureBytes=S,Jr.concatBytes=C,Jr.equalBytes=_,Jr.utf8ToBytes=T,Jr.inRange=D,Jr.aInRange=L,Jr.bitLen=I,Jr.bitGet=U,Jr.bitSet=F,Jr.createHmacDrbg=b,Jr.validateObject=x,Jr.memoized=k;const t=BigInt(0),e=BigInt(1);function r(j){return j instanceof Uint8Array||ArrayBuffer.isView(j)&&j.constructor.name==="Uint8Array"}function n(j){if(!r(j))throw new Error("Uint8Array expected")}function s(j,N){if(typeof N!="boolean")throw new Error(j+" boolean expected, got "+N)}function i(j){const N=j.toString(16);return N.length&1?"0"+N:N}function o(j){if(typeof j!="string")throw new Error("hex string expected, got "+typeof j);return j===""?t:BigInt("0x"+j)}const a=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",c=Array.from({length:256},(j,N)=>N.toString(16).padStart(2,"0"));function u(j){if(n(j),a)return j.toHex();let N="";for(let v=0;v<j.length;v++)N+=c[j[v]];return N}const l={_0:48,_9:57,A:65,F:70,a:97,f:102};function d(j){if(j>=l._0&&j<=l._9)return j-l._0;if(j>=l.A&&j<=l.F)return j-(l.A-10);if(j>=l.a&&j<=l.f)return j-(l.a-10)}function f(j){if(typeof j!="string")throw new Error("hex string expected, got "+typeof j);if(a)return Uint8Array.fromHex(j);const N=j.length,v=N/2;if(N%2)throw new Error("hex string expected, got unpadded hex of length "+N);const R=new Uint8Array(v);for(let $=0,O=0;$<v;$++,O+=2){const H=d(j.charCodeAt(O)),W=d(j.charCodeAt(O+1));if(H===void 0||W===void 0){const G=j[O]+j[O+1];throw new Error('hex string expected, got non-hex character "'+G+'" at index '+O)}R[$]=H*16+W}return R}function p(j){return o(u(j))}function g(j){return n(j),o(u(Uint8Array.from(j).reverse()))}function h(j,N){return f(j.toString(16).padStart(N*2,"0"))}function y(j,N){return h(j,N).reverse()}function E(j){return f(i(j))}function S(j,N,v){let R;if(typeof N=="string")try{R=f(N)}catch(O){throw new Error(j+" must be hex string or Uint8Array, cause: "+O)}else if(r(N))R=Uint8Array.from(N);else throw new Error(j+" must be hex string or Uint8Array");const $=R.length;if(typeof v=="number"&&$!==v)throw new Error(j+" of length "+v+" expected, got "+$);return R}function C(...j){let N=0;for(let R=0;R<j.length;R++){const $=j[R];n($),N+=$.length}const v=new Uint8Array(N);for(let R=0,$=0;R<j.length;R++){const O=j[R];v.set(O,$),$+=O.length}return v}function _(j,N){if(j.length!==N.length)return!1;let v=0;for(let R=0;R<j.length;R++)v|=j[R]^N[R];return v===0}function T(j){if(typeof j!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(j))}const P=j=>typeof j=="bigint"&&t<=j;function D(j,N,v){return P(j)&&P(N)&&P(v)&&N<=j&&j<v}function L(j,N,v,R){if(!D(N,v,R))throw new Error("expected valid "+j+": "+v+" <= n < "+R+", got "+N)}function I(j){let N;for(N=0;j>t;j>>=e,N+=1);return N}function U(j,N){return j>>BigInt(N)&e}function F(j,N,v){return j|(v?e:t)<<BigInt(N)}const B=j=>(e<<BigInt(j))-e;Jr.bitMask=B;const A=j=>new Uint8Array(j),m=j=>Uint8Array.from(j);function b(j,N,v){if(typeof j!="number"||j<2)throw new Error("hashLen must be a number");if(typeof N!="number"||N<2)throw new Error("qByteLen must be a number");if(typeof v!="function")throw new Error("hmacFn must be a function");let R=A(j),$=A(j),O=0;const H=()=>{R.fill(1),$.fill(0),O=0},W=(...re)=>v($,R,...re),G=(re=A(0))=>{$=W(m([0]),re),R=W(),re.length!==0&&($=W(m([1]),re),R=W())},K=()=>{if(O++>=1e3)throw new Error("drbg: tried 1000 values");let re=0;const de=[];for(;re<N;){R=W();const le=R.slice();de.push(le),re+=R.length}return C(...de)};return(re,de)=>{H(),G(re);let le;for(;!(le=de(K()));)G();return H(),le}}const w={bigint:j=>typeof j=="bigint",function:j=>typeof j=="function",boolean:j=>typeof j=="boolean",string:j=>typeof j=="string",stringOrUint8Array:j=>typeof j=="string"||r(j),isSafeInteger:j=>Number.isSafeInteger(j),array:j=>Array.isArray(j),field:(j,N)=>N.Fp.isValid(j),hash:j=>typeof j=="function"&&Number.isSafeInteger(j.outputLen)};function x(j,N,v={}){const R=($,O,H)=>{const W=w[O];if(typeof W!="function")throw new Error("invalid validator function");const G=j[$];if(!(H&&G===void 0)&&!W(G,j))throw new Error("param "+String($)+" is invalid. Expected "+O+", got "+G)};for(const[$,O]of Object.entries(N))R($,O,!1);for(const[$,O]of Object.entries(v))R($,O,!0);return j}const M=()=>{throw new Error("not implemented")};Jr.notImplemented=M;function k(j){const N=new WeakMap;return(v,...R)=>{const $=N.get(v);if($!==void 0)return $;const O=j(v,...R);return N.set(v,O),O}}return Jr}var Tq;function B5(){if(Tq)return $n;Tq=1,Object.defineProperty($n,"__esModule",{value:!0}),$n.isNegativeLE=void 0,$n.mod=u,$n.pow=l,$n.pow2=d,$n.invert=f,$n.tonelliShanks=h,$n.FpSqrt=y,$n.validateField=C,$n.FpPow=_,$n.FpInvertBatch=T,$n.FpDiv=P,$n.FpLegendre=D,$n.FpIsSquare=L,$n.nLength=I,$n.Field=U,$n.FpSqrtOdd=F,$n.FpSqrtEven=B,$n.hashToPrivateScalar=A,$n.getFieldBytesLength=m,$n.getMinHashLength=b,$n.mapHashToField=w;const t=Kh(),e=dg(),r=BigInt(0),n=BigInt(1),s=BigInt(2),i=BigInt(3),o=BigInt(4),a=BigInt(5),c=BigInt(8);function u(x,M){const k=x%M;return k>=r?k:M+k}function l(x,M,k){return _(U(k),x,M)}function d(x,M,k){let j=x;for(;M-- >r;)j*=j,j%=k;return j}function f(x,M){if(x===r)throw new Error("invert: expected non-zero number");if(M<=r)throw new Error("invert: expected positive modulus, got "+M);let k=u(x,M),j=M,N=r,v=n;for(;k!==r;){const $=j/k,O=j%k,H=N-v*$;j=k,k=O,N=v,v=H}if(j!==n)throw new Error("invert: does not exist");return u(N,M)}function p(x,M){const k=(x.ORDER+n)/o,j=x.pow(M,k);if(!x.eql(x.sqr(j),M))throw new Error("Cannot find square root");return j}function g(x,M){const k=(x.ORDER-a)/c,j=x.mul(M,s),N=x.pow(j,k),v=x.mul(M,N),R=x.mul(x.mul(v,s),N),$=x.mul(v,x.sub(R,x.ONE));if(!x.eql(x.sqr($),M))throw new Error("Cannot find square root");return $}function h(x){if(x<BigInt(3))throw new Error("sqrt is not defined for small field");let M=x-n,k=0;for(;M%s===r;)M/=s,k++;let j=s;const N=U(x);for(;D(N,j)===1;)if(j++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(k===1)return p;let v=N.pow(j,M);const R=(M+n)/s;return function(O,H){if(O.is0(H))return H;if(D(O,H)!==1)throw new Error("Cannot find square root");let W=k,G=O.mul(O.ONE,v),K=O.pow(H,M),Q=O.pow(H,R);for(;!O.eql(K,O.ONE);){if(O.is0(K))return O.ZERO;let re=1,de=O.sqr(K);for(;!O.eql(de,O.ONE);)if(re++,de=O.sqr(de),re===W)throw new Error("Cannot find square root");const le=n<<BigInt(W-re-1),se=O.pow(G,le);W=re,G=O.sqr(se),K=O.mul(K,G),Q=O.mul(Q,se)}return Q}}function y(x){return x%o===i?p:x%c===a?g:h(x)}const E=(x,M)=>(u(x,M)&n)===n;$n.isNegativeLE=E;const S=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function C(x){const M={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},k=S.reduce((j,N)=>(j[N]="function",j),M);return(0,e.validateObject)(x,k)}function _(x,M,k){if(k<r)throw new Error("invalid exponent, negatives unsupported");if(k===r)return x.ONE;if(k===n)return M;let j=x.ONE,N=M;for(;k>r;)k&n&&(j=x.mul(j,N)),N=x.sqr(N),k>>=n;return j}function T(x,M,k=!1){const j=new Array(M.length).fill(k?x.ZERO:void 0),N=M.reduce((R,$,O)=>x.is0($)?R:(j[O]=R,x.mul(R,$)),x.ONE),v=x.inv(N);return M.reduceRight((R,$,O)=>x.is0($)?R:(j[O]=x.mul(R,j[O]),x.mul(R,$)),v),j}function P(x,M,k){return x.mul(M,typeof k=="bigint"?f(k,x.ORDER):x.inv(k))}function D(x,M){const k=(x.ORDER-n)/s,j=x.pow(M,k),N=x.eql(j,x.ONE),v=x.eql(j,x.ZERO),R=x.eql(j,x.neg(x.ONE));if(!N&&!v&&!R)throw new Error("invalid Legendre symbol result");return N?1:v?0:-1}function L(x,M){return D(x,M)===1}function I(x,M){M!==void 0&&(0,t.anumber)(M);const k=M!==void 0?M:x.toString(2).length,j=Math.ceil(k/8);return{nBitLength:k,nByteLength:j}}function U(x,M,k=!1,j={}){if(x<=r)throw new Error("invalid field: expected ORDER > 0, got "+x);const{nBitLength:N,nByteLength:v}=I(x,M);if(v>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let R;const $=Object.freeze({ORDER:x,isLE:k,BITS:N,BYTES:v,MASK:(0,e.bitMask)(N),ZERO:r,ONE:n,create:O=>u(O,x),isValid:O=>{if(typeof O!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof O);return r<=O&&O<x},is0:O=>O===r,isOdd:O=>(O&n)===n,neg:O=>u(-O,x),eql:(O,H)=>O===H,sqr:O=>u(O*O,x),add:(O,H)=>u(O+H,x),sub:(O,H)=>u(O-H,x),mul:(O,H)=>u(O*H,x),pow:(O,H)=>_($,O,H),div:(O,H)=>u(O*f(H,x),x),sqrN:O=>O*O,addN:(O,H)=>O+H,subN:(O,H)=>O-H,mulN:(O,H)=>O*H,inv:O=>f(O,x),sqrt:j.sqrt||(O=>(R||(R=y(x)),R($,O))),toBytes:O=>k?(0,e.numberToBytesLE)(O,v):(0,e.numberToBytesBE)(O,v),fromBytes:O=>{if(O.length!==v)throw new Error("Field.fromBytes: expected "+v+" bytes, got "+O.length);return k?(0,e.bytesToNumberLE)(O):(0,e.bytesToNumberBE)(O)},invertBatch:O=>T($,O),cmov:(O,H,W)=>W?H:O});return Object.freeze($)}function F(x,M){if(!x.isOdd)throw new Error("Field doesn't have isOdd");const k=x.sqrt(M);return x.isOdd(k)?k:x.neg(k)}function B(x,M){if(!x.isOdd)throw new Error("Field doesn't have isOdd");const k=x.sqrt(M);return x.isOdd(k)?x.neg(k):k}function A(x,M,k=!1){x=(0,e.ensureBytes)("privateHash",x);const j=x.length,N=I(M).nByteLength+8;if(N<24||j<N||j>1024)throw new Error("hashToPrivateScalar: expected "+N+"-1024 bytes of input, got "+j);const v=k?(0,e.bytesToNumberLE)(x):(0,e.bytesToNumberBE)(x);return u(v,M-n)+n}function m(x){if(typeof x!="bigint")throw new Error("field order must be bigint");const M=x.toString(2).length;return Math.ceil(M/8)}function b(x){const M=m(x);return M+Math.ceil(M/2)}function w(x,M,k=!1){const j=x.length,N=m(M),v=b(M);if(j<16||j<v||j>1024)throw new Error("expected "+v+"-1024 bytes of input, got "+j);const R=k?(0,e.bytesToNumberLE)(x):(0,e.bytesToNumberBE)(x),$=u(R,M-n)+n;return k?(0,e.numberToBytesLE)($,N):(0,e.numberToBytesBE)($,N)}return $n}var Nq;function TUe(){if(Nq)return Sp;Nq=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.wNAF=p,Sp.pippenger=g,Sp.precomputeMSMUnsafe=h,Sp.validateBasic=y;const t=B5(),e=dg(),r=BigInt(0),n=BigInt(1);function s(E,S){const C=S.negate();return E?C:S}function i(E,S){if(!Number.isSafeInteger(E)||E<=0||E>S)throw new Error("invalid window size, expected [1.."+S+"], got W="+E)}function o(E,S){i(E,S);const C=Math.ceil(S/E)+1,_=2**(E-1),T=2**E,P=(0,e.bitMask)(E),D=BigInt(E);return{windows:C,windowSize:_,mask:P,maxNumber:T,shiftBy:D}}function a(E,S,C){const{windowSize:_,mask:T,maxNumber:P,shiftBy:D}=C;let L=Number(E&T),I=E>>D;L>_&&(L-=P,I+=n);const U=S*_,F=U+Math.abs(L)-1,B=L===0,A=L<0,m=S%2!==0;return{nextN:I,offset:F,isZero:B,isNeg:A,isNegF:m,offsetF:U}}function c(E,S){if(!Array.isArray(E))throw new Error("array expected");E.forEach((C,_)=>{if(!(C instanceof S))throw new Error("invalid point at index "+_)})}function u(E,S){if(!Array.isArray(E))throw new Error("array of scalars expected");E.forEach((C,_)=>{if(!S.isValid(C))throw new Error("invalid scalar at index "+_)})}const l=new WeakMap,d=new WeakMap;function f(E){return d.get(E)||1}function p(E,S){return{constTimeNegate:s,hasPrecomputes(C){return f(C)!==1},unsafeLadder(C,_,T=E.ZERO){let P=C;for(;_>r;)_&n&&(T=T.add(P)),P=P.double(),_>>=n;return T},precomputeWindow(C,_){const{windows:T,windowSize:P}=o(_,S),D=[];let L=C,I=L;for(let U=0;U<T;U++){I=L,D.push(I);for(let F=1;F<P;F++)I=I.add(L),D.push(I);L=I.double()}return D},wNAF(C,_,T){let P=E.ZERO,D=E.BASE;const L=o(C,S);for(let I=0;I<L.windows;I++){const{nextN:U,offset:F,isZero:B,isNeg:A,isNegF:m,offsetF:b}=a(T,I,L);T=U,B?D=D.add(s(m,_[b])):P=P.add(s(A,_[F]))}return{p:P,f:D}},wNAFUnsafe(C,_,T,P=E.ZERO){const D=o(C,S);for(let L=0;L<D.windows&&T!==r;L++){const{nextN:I,offset:U,isZero:F,isNeg:B}=a(T,L,D);if(T=I,!F){const A=_[U];P=P.add(B?A.negate():A)}}return P},getPrecomputes(C,_,T){let P=l.get(_);return P||(P=this.precomputeWindow(_,C),C!==1&&l.set(_,T(P))),P},wNAFCached(C,_,T){const P=f(C);return this.wNAF(P,this.getPrecomputes(P,C,T),_)},wNAFCachedUnsafe(C,_,T,P){const D=f(C);return D===1?this.unsafeLadder(C,_,P):this.wNAFUnsafe(D,this.getPrecomputes(D,C,T),_,P)},setWindowSize(C,_){i(_,S),d.set(C,_),l.delete(C)}}}function g(E,S,C,_){c(C,E),u(_,S);const T=C.length,P=_.length;if(T!==P)throw new Error("arrays of points and scalars must have equal length");const D=E.ZERO,L=(0,e.bitLen)(BigInt(T));let I=1;L>12?I=L-3:L>4?I=L-2:L>0&&(I=2);const U=(0,e.bitMask)(I),F=new Array(Number(U)+1).fill(D),B=Math.floor((S.BITS-1)/I)*I;let A=D;for(let m=B;m>=0;m-=I){F.fill(D);for(let w=0;w<P;w++){const x=_[w],M=Number(x>>BigInt(m)&U);F[M]=F[M].add(C[w])}let b=D;for(let w=F.length-1,x=D;w>0;w--)x=x.add(F[w]),b=b.add(x);if(A=A.add(b),m!==0)for(let w=0;w<I;w++)A=A.double()}return A}function h(E,S,C,_){i(_,S.BITS),c(C,E);const T=E.ZERO,P=2**_-1,D=Math.ceil(S.BITS/_),L=(0,e.bitMask)(_),I=C.map(U=>{const F=[];for(let B=0,A=U;B<P;B++)F.push(A),A=A.add(U);return F});return U=>{if(u(U,S),U.length>C.length)throw new Error("array of scalars must be smaller than array of points");let F=T;for(let B=0;B<D;B++){if(F!==T)for(let m=0;m<_;m++)F=F.double();const A=BigInt(D*_-(B+1)*_);for(let m=0;m<U.length;m++){const b=U[m],w=Number(b>>A&L);w&&(F=F.add(I[m][w-1]))}}return F}}function y(E){return(0,t.validateField)(E.Fp),(0,e.validateObject)(E,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,t.nLength)(E.n,E.nBitLength),...E,p:E.Fp.ORDER})}return Sp}var Pq;function vse(){return Pq||(Pq=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=t.DERErr=void 0,t.weierstrassPoints=p,t.weierstrass=h,t.SWUFpSqrtRatio=y,t.mapToCurveSimpleSWU=E;const e=TUe(),r=B5(),n=dg();function s(S){S.lowS!==void 0&&(0,n.abool)("lowS",S.lowS),S.prehash!==void 0&&(0,n.abool)("prehash",S.prehash)}function i(S){const C=(0,e.validateBasic)(S);(0,n.validateObject)(C,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:_,Fp:T,a:P}=C;if(_){if(!T.eql(P,T.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof _!="object"||typeof _.beta!="bigint"||typeof _.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...C})}class o extends Error{constructor(C=""){super(C)}}t.DERErr=o,t.DER={Err:o,_tlv:{encode:(S,C)=>{const{Err:_}=t.DER;if(S<0||S>256)throw new _("tlv.encode: wrong tag");if(C.length&1)throw new _("tlv.encode: unpadded data");const T=C.length/2,P=(0,n.numberToHexUnpadded)(T);if(P.length/2&128)throw new _("tlv.encode: long form length too big");const D=T>127?(0,n.numberToHexUnpadded)(P.length/2|128):"";return(0,n.numberToHexUnpadded)(S)+D+P+C},decode(S,C){const{Err:_}=t.DER;let T=0;if(S<0||S>256)throw new _("tlv.encode: wrong tag");if(C.length<2||C[T++]!==S)throw new _("tlv.decode: wrong tlv");const P=C[T++],D=!!(P&128);let L=0;if(!D)L=P;else{const U=P&127;if(!U)throw new _("tlv.decode(long): indefinite length not supported");if(U>4)throw new _("tlv.decode(long): byte length is too big");const F=C.subarray(T,T+U);if(F.length!==U)throw new _("tlv.decode: length bytes not complete");if(F[0]===0)throw new _("tlv.decode(long): zero leftmost byte");for(const B of F)L=L<<8|B;if(T+=U,L<128)throw new _("tlv.decode(long): not minimal encoding")}const I=C.subarray(T,T+L);if(I.length!==L)throw new _("tlv.decode: wrong value length");return{v:I,l:C.subarray(T+L)}}},_int:{encode(S){const{Err:C}=t.DER;if(S<c)throw new C("integer: negative integers are not allowed");let _=(0,n.numberToHexUnpadded)(S);if(Number.parseInt(_[0],16)&8&&(_="00"+_),_.length&1)throw new C("unexpected DER parsing assertion: unpadded hex");return _},decode(S){const{Err:C}=t.DER;if(S[0]&128)throw new C("invalid signature integer: negative");if(S[0]===0&&!(S[1]&128))throw new C("invalid signature integer: unnecessary leading zero");return(0,n.bytesToNumberBE)(S)}},toSig(S){const{Err:C,_int:_,_tlv:T}=t.DER,P=(0,n.ensureBytes)("signature",S),{v:D,l:L}=T.decode(48,P);if(L.length)throw new C("invalid signature: left bytes after parsing");const{v:I,l:U}=T.decode(2,D),{v:F,l:B}=T.decode(2,U);if(B.length)throw new C("invalid signature: left bytes after parsing");return{r:_.decode(I),s:_.decode(F)}},hexFromSig(S){const{_tlv:C,_int:_}=t.DER,T=C.encode(2,_.encode(S.r)),P=C.encode(2,_.encode(S.s)),D=T+P;return C.encode(48,D)}};function a(S,C){return(0,n.bytesToHex)((0,n.numberToBytesBE)(S,C))}const c=BigInt(0),u=BigInt(1),l=BigInt(2),d=BigInt(3),f=BigInt(4);function p(S){const C=i(S),{Fp:_}=C,T=(0,r.Field)(C.n,C.nBitLength),P=C.toBytes||((N,v,R)=>{const $=v.toAffine();return(0,n.concatBytes)(Uint8Array.from([4]),_.toBytes($.x),_.toBytes($.y))}),D=C.fromBytes||(N=>{const v=N.subarray(1),R=_.fromBytes(v.subarray(0,_.BYTES)),$=_.fromBytes(v.subarray(_.BYTES,2*_.BYTES));return{x:R,y:$}});function L(N){const{a:v,b:R}=C,$=_.sqr(N),O=_.mul($,N);return _.add(_.add(O,_.mul(N,v)),R)}function I(N,v){const R=_.sqr(v),$=L(N);return _.eql(R,$)}if(!I(C.Gx,C.Gy))throw new Error("bad curve params: generator point");const U=_.mul(_.pow(C.a,d),f),F=_.mul(_.sqr(C.b),BigInt(27));if(_.is0(_.add(U,F)))throw new Error("bad curve params: a or b");function B(N){return(0,n.inRange)(N,u,C.n)}function A(N){const{allowedPrivateKeyLengths:v,nByteLength:R,wrapPrivateKey:$,n:O}=C;if(v&&typeof N!="bigint"){if((0,n.isBytes)(N)&&(N=(0,n.bytesToHex)(N)),typeof N!="string"||!v.includes(N.length))throw new Error("invalid private key");N=N.padStart(R*2,"0")}let H;try{H=typeof N=="bigint"?N:(0,n.bytesToNumberBE)((0,n.ensureBytes)("private key",N,R))}catch{throw new Error("invalid private key, expected hex or "+R+" bytes, got "+typeof N)}return $&&(H=(0,r.mod)(H,O)),(0,n.aInRange)("private key",H,u,O),H}function m(N){if(!(N instanceof x))throw new Error("ProjectivePoint expected")}const b=(0,n.memoized)((N,v)=>{const{px:R,py:$,pz:O}=N;if(_.eql(O,_.ONE))return{x:R,y:$};const H=N.is0();v==null&&(v=H?_.ONE:_.inv(O));const W=_.mul(R,v),G=_.mul($,v),K=_.mul(O,v);if(H)return{x:_.ZERO,y:_.ZERO};if(!_.eql(K,_.ONE))throw new Error("invZ was invalid");return{x:W,y:G}}),w=(0,n.memoized)(N=>{if(N.is0()){if(C.allowInfinityPoint&&!_.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:v,y:R}=N.toAffine();if(!_.isValid(v)||!_.isValid(R))throw new Error("bad point: x or y not FE");if(!I(v,R))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class x{constructor(v,R,$){if(v==null||!_.isValid(v))throw new Error("x required");if(R==null||!_.isValid(R)||_.is0(R))throw new Error("y required");if($==null||!_.isValid($))throw new Error("z required");this.px=v,this.py=R,this.pz=$,Object.freeze(this)}static fromAffine(v){const{x:R,y:$}=v||{};if(!v||!_.isValid(R)||!_.isValid($))throw new Error("invalid affine point");if(v instanceof x)throw new Error("projective point not allowed");const O=H=>_.eql(H,_.ZERO);return O(R)&&O($)?x.ZERO:new x(R,$,_.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const R=(0,r.FpInvertBatch)(_,v.map($=>$.pz));return v.map(($,O)=>$.toAffine(R[O])).map(x.fromAffine)}static fromHex(v){const R=x.fromAffine(D((0,n.ensureBytes)("pointHex",v)));return R.assertValidity(),R}static fromPrivateKey(v){return x.BASE.multiply(A(v))}static msm(v,R){return(0,e.pippenger)(x,T,v,R)}_setWindowSize(v){j.setWindowSize(this,v)}assertValidity(){w(this)}hasEvenY(){const{y:v}=this.toAffine();if(_.isOdd)return!_.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){m(v);const{px:R,py:$,pz:O}=this,{px:H,py:W,pz:G}=v,K=_.eql(_.mul(R,G),_.mul(H,O)),Q=_.eql(_.mul($,G),_.mul(W,O));return K&&Q}negate(){return new x(this.px,_.neg(this.py),this.pz)}double(){const{a:v,b:R}=C,$=_.mul(R,d),{px:O,py:H,pz:W}=this;let G=_.ZERO,K=_.ZERO,Q=_.ZERO,re=_.mul(O,O),de=_.mul(H,H),le=_.mul(W,W),se=_.mul(O,H);return se=_.add(se,se),Q=_.mul(O,W),Q=_.add(Q,Q),G=_.mul(v,Q),K=_.mul($,le),K=_.add(G,K),G=_.sub(de,K),K=_.add(de,K),K=_.mul(G,K),G=_.mul(se,G),Q=_.mul($,Q),le=_.mul(v,le),se=_.sub(re,le),se=_.mul(v,se),se=_.add(se,Q),Q=_.add(re,re),re=_.add(Q,re),re=_.add(re,le),re=_.mul(re,se),K=_.add(K,re),le=_.mul(H,W),le=_.add(le,le),re=_.mul(le,se),G=_.sub(G,re),Q=_.mul(le,de),Q=_.add(Q,Q),Q=_.add(Q,Q),new x(G,K,Q)}add(v){m(v);const{px:R,py:$,pz:O}=this,{px:H,py:W,pz:G}=v;let K=_.ZERO,Q=_.ZERO,re=_.ZERO;const de=C.a,le=_.mul(C.b,d);let se=_.mul(R,H),be=_.mul($,W),We=_.mul(O,G),Ne=_.add(R,$),Be=_.add(H,W);Ne=_.mul(Ne,Be),Be=_.add(se,be),Ne=_.sub(Ne,Be),Be=_.add(R,O);let At=_.add(H,G);return Be=_.mul(Be,At),At=_.add(se,We),Be=_.sub(Be,At),At=_.add($,O),K=_.add(W,G),At=_.mul(At,K),K=_.add(be,We),At=_.sub(At,K),re=_.mul(de,Be),K=_.mul(le,We),re=_.add(K,re),K=_.sub(be,re),re=_.add(be,re),Q=_.mul(K,re),be=_.add(se,se),be=_.add(be,se),We=_.mul(de,We),Be=_.mul(le,Be),be=_.add(be,We),We=_.sub(se,We),We=_.mul(de,We),Be=_.add(Be,We),se=_.mul(be,Be),Q=_.add(Q,se),se=_.mul(At,Be),K=_.mul(Ne,K),K=_.sub(K,se),se=_.mul(Ne,be),re=_.mul(At,re),re=_.add(re,se),new x(K,Q,re)}subtract(v){return this.add(v.negate())}is0(){return this.equals(x.ZERO)}wNAF(v){return j.wNAFCached(this,v,x.normalizeZ)}multiplyUnsafe(v){const{endo:R,n:$}=C;(0,n.aInRange)("scalar",v,c,$);const O=x.ZERO;if(v===c)return O;if(this.is0()||v===u)return this;if(!R||j.hasPrecomputes(this))return j.wNAFCachedUnsafe(this,v,x.normalizeZ);let{k1neg:H,k1:W,k2neg:G,k2:K}=R.splitScalar(v),Q=O,re=O,de=this;for(;W>c||K>c;)W&u&&(Q=Q.add(de)),K&u&&(re=re.add(de)),de=de.double(),W>>=u,K>>=u;return H&&(Q=Q.negate()),G&&(re=re.negate()),re=new x(_.mul(re.px,R.beta),re.py,re.pz),Q.add(re)}multiply(v){const{endo:R,n:$}=C;(0,n.aInRange)("scalar",v,u,$);let O,H;if(R){const{k1neg:W,k1:G,k2neg:K,k2:Q}=R.splitScalar(v);let{p:re,f:de}=this.wNAF(G),{p:le,f:se}=this.wNAF(Q);re=j.constTimeNegate(W,re),le=j.constTimeNegate(K,le),le=new x(_.mul(le.px,R.beta),le.py,le.pz),O=re.add(le),H=de.add(se)}else{const{p:W,f:G}=this.wNAF(v);O=W,H=G}return x.normalizeZ([O,H])[0]}multiplyAndAddUnsafe(v,R,$){const O=x.BASE,H=(G,K)=>K===c||K===u||!G.equals(O)?G.multiplyUnsafe(K):G.multiply(K),W=H(this,R).add(H(v,$));return W.is0()?void 0:W}toAffine(v){return b(this,v)}isTorsionFree(){const{h:v,isTorsionFree:R}=C;if(v===u)return!0;if(R)return R(x,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:R}=C;return v===u?this:R?R(x,this):this.multiplyUnsafe(C.h)}toRawBytes(v=!0){return(0,n.abool)("isCompressed",v),this.assertValidity(),P(x,this,v)}toHex(v=!0){return(0,n.abool)("isCompressed",v),(0,n.bytesToHex)(this.toRawBytes(v))}}x.BASE=new x(C.Gx,C.Gy,_.ONE),x.ZERO=new x(_.ZERO,_.ONE,_.ZERO);const{endo:M,nBitLength:k}=C,j=(0,e.wNAF)(x,M?Math.ceil(k/2):k);return{CURVE:C,ProjectivePoint:x,normPrivateKeyToScalar:A,weierstrassEquation:L,isWithinCurveOrder:B}}function g(S){const C=(0,e.validateBasic)(S);return(0,n.validateObject)(C,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...C})}function h(S){const C=g(S),{Fp:_,n:T,nByteLength:P,nBitLength:D}=C,L=_.BYTES+1,I=2*_.BYTES+1;function U(le){return(0,r.mod)(le,T)}function F(le){return(0,r.invert)(le,T)}const{ProjectivePoint:B,normPrivateKeyToScalar:A,weierstrassEquation:m,isWithinCurveOrder:b}=p({...C,toBytes(le,se,be){const We=se.toAffine(),Ne=_.toBytes(We.x),Be=n.concatBytes;return(0,n.abool)("isCompressed",be),be?Be(Uint8Array.from([se.hasEvenY()?2:3]),Ne):Be(Uint8Array.from([4]),Ne,_.toBytes(We.y))},fromBytes(le){const se=le.length,be=le[0],We=le.subarray(1);if(se===L&&(be===2||be===3)){const Ne=(0,n.bytesToNumberBE)(We);if(!(0,n.inRange)(Ne,u,_.ORDER))throw new Error("Point is not on curve");const Be=m(Ne);let At;try{At=_.sqrt(Be)}catch(Mt){const bt=Mt instanceof Error?": "+Mt.message:"";throw new Error("Point is not on curve"+bt)}const Ee=(At&u)===u;return(be&1)===1!==Ee&&(At=_.neg(At)),{x:Ne,y:At}}else if(se===I&&be===4){const Ne=_.fromBytes(We.subarray(0,_.BYTES)),Be=_.fromBytes(We.subarray(_.BYTES,2*_.BYTES));return{x:Ne,y:Be}}else{const Ne=L,Be=I;throw new Error("invalid Point, expected length of "+Ne+", or uncompressed "+Be+", got "+se)}}});function w(le){const se=T>>u;return le>se}function x(le){return w(le)?U(-le):le}const M=(le,se,be)=>(0,n.bytesToNumberBE)(le.slice(se,be));class k{constructor(se,be,We){(0,n.aInRange)("r",se,u,T),(0,n.aInRange)("s",be,u,T),this.r=se,this.s=be,We!=null&&(this.recovery=We),Object.freeze(this)}static fromCompact(se){const be=P;return se=(0,n.ensureBytes)("compactSignature",se,be*2),new k(M(se,0,be),M(se,be,2*be))}static fromDER(se){const{r:be,s:We}=t.DER.toSig((0,n.ensureBytes)("DER",se));return new k(be,We)}assertValidity(){}addRecoveryBit(se){return new k(this.r,this.s,se)}recoverPublicKey(se){const{r:be,s:We,recovery:Ne}=this,Be=O((0,n.ensureBytes)("msgHash",se));if(Ne==null||![0,1,2,3].includes(Ne))throw new Error("recovery id invalid");const At=Ne===2||Ne===3?be+C.n:be;if(At>=_.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ee=(Ne&1)===0?"02":"03",fe=B.fromHex(Ee+a(At,_.BYTES)),Mt=F(At),bt=U(-Be*Mt),jt=U(We*Mt),ge=B.BASE.multiplyAndAddUnsafe(fe,bt,jt);if(!ge)throw new Error("point at infinify");return ge.assertValidity(),ge}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new k(this.r,U(-this.s),this.recovery):this}toDERRawBytes(){return(0,n.hexToBytes)(this.toDERHex())}toDERHex(){return t.DER.hexFromSig(this)}toCompactRawBytes(){return(0,n.hexToBytes)(this.toCompactHex())}toCompactHex(){const se=P;return a(this.r,se)+a(this.s,se)}}const j={isValidPrivateKey(le){try{return A(le),!0}catch{return!1}},normPrivateKeyToScalar:A,randomPrivateKey:()=>{const le=(0,r.getMinHashLength)(C.n);return(0,r.mapHashToField)(C.randomBytes(le),C.n)},precompute(le=8,se=B.BASE){return se._setWindowSize(le),se.multiply(BigInt(3)),se}};function N(le,se=!0){return B.fromPrivateKey(le).toRawBytes(se)}function v(le){if(typeof le=="bigint")return!1;if(le instanceof B)return!0;const be=(0,n.ensureBytes)("key",le).length,We=_.BYTES,Ne=We+1,Be=2*We+1;if(!(C.allowedPrivateKeyLengths||P===Ne))return be===Ne||be===Be}function R(le,se,be=!0){if(v(le)===!0)throw new Error("first arg must be private key");if(v(se)===!1)throw new Error("second arg must be public key");return B.fromHex(se).multiply(A(le)).toRawBytes(be)}const $=C.bits2int||function(le){if(le.length>8192)throw new Error("input is too large");const se=(0,n.bytesToNumberBE)(le),be=le.length*8-D;return be>0?se>>BigInt(be):se},O=C.bits2int_modN||function(le){return U($(le))},H=(0,n.bitMask)(D);function W(le){return(0,n.aInRange)("num < 2^"+D,le,c,H),(0,n.numberToBytesBE)(le,P)}function G(le,se,be=K){if(["recovered","canonical"].some(V=>V in be))throw new Error("sign() legacy options not supported");const{hash:We,randomBytes:Ne}=C;let{lowS:Be,prehash:At,extraEntropy:Ee}=be;Be==null&&(Be=!0),le=(0,n.ensureBytes)("msgHash",le),s(be),At&&(le=(0,n.ensureBytes)("prehashed msgHash",We(le)));const fe=O(le),Mt=A(se),bt=[W(Mt),W(fe)];if(Ee!=null&&Ee!==!1){const V=Ee===!0?Ne(_.BYTES):Ee;bt.push((0,n.ensureBytes)("extraEntropy",V))}const jt=(0,n.concatBytes)(...bt),ge=fe;function ve(V){const q=$(V);if(!b(q))return;const z=F(q),X=B.BASE.multiply(q).toAffine(),ne=U(X.x);if(ne===c)return;const ce=U(z*U(ge+ne*Mt));if(ce===c)return;let me=(X.x===ne?0:2)|Number(X.y&u),Rt=ce;return Be&&w(ce)&&(Rt=x(ce),me^=1),new k(ne,Rt,me)}return{seed:jt,k2sig:ve}}const K={lowS:C.lowS,prehash:!1},Q={lowS:C.lowS,prehash:!1};function re(le,se,be=K){const{seed:We,k2sig:Ne}=G(le,se,be),Be=C;return(0,n.createHmacDrbg)(Be.hash.outputLen,Be.nByteLength,Be.hmac)(We,Ne)}B.BASE._setWindowSize(8);function de(le,se,be,We=Q){const Ne=le;se=(0,n.ensureBytes)("msgHash",se),be=(0,n.ensureBytes)("publicKey",be);const{lowS:Be,prehash:At,format:Ee}=We;if(s(We),"strict"in We)throw new Error("options.strict was renamed to lowS");if(Ee!==void 0&&Ee!=="compact"&&Ee!=="der")throw new Error("format must be compact or der");const fe=typeof Ne=="string"||(0,n.isBytes)(Ne),Mt=!fe&&!Ee&&typeof Ne=="object"&&Ne!==null&&typeof Ne.r=="bigint"&&typeof Ne.s=="bigint";if(!fe&&!Mt)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let bt,jt;try{if(Mt&&(bt=new k(Ne.r,Ne.s)),fe){try{Ee!=="compact"&&(bt=k.fromDER(Ne))}catch(me){if(!(me instanceof t.DER.Err))throw me}!bt&&Ee!=="der"&&(bt=k.fromCompact(Ne))}jt=B.fromHex(be)}catch{return!1}if(!bt||Be&&bt.hasHighS())return!1;At&&(se=C.hash(se));const{r:ge,s:ve}=bt,V=O(se),q=F(ve),z=U(V*q),X=U(ge*q),ne=B.BASE.multiplyAndAddUnsafe(jt,z,X)?.toAffine();return ne?U(ne.x)===ge:!1}return{CURVE:C,getPublicKey:N,getSharedSecret:R,sign:re,verify:de,ProjectivePoint:B,Signature:k,utils:j}}function y(S,C){const _=S.ORDER;let T=c;for(let w=_-u;w%l===c;w/=l)T+=u;const P=T,D=l<<P-u-u,L=D*l,I=(_-u)/L,U=(I-u)/l,F=L-u,B=D,A=S.pow(C,I),m=S.pow(C,(I+u)/l);let b=(w,x)=>{let M=A,k=S.pow(x,F),j=S.sqr(k);j=S.mul(j,x);let N=S.mul(w,j);N=S.pow(N,U),N=S.mul(N,k),k=S.mul(N,x),j=S.mul(N,w);let v=S.mul(j,k);N=S.pow(v,B);let R=S.eql(N,S.ONE);k=S.mul(j,m),N=S.mul(v,M),j=S.cmov(k,j,R),v=S.cmov(N,v,R);for(let $=P;$>u;$--){let O=$-l;O=l<<O-u;let H=S.pow(v,O);const W=S.eql(H,S.ONE);k=S.mul(j,M),M=S.mul(M,M),H=S.mul(v,M),j=S.cmov(k,j,W),v=S.cmov(H,v,W)}return{isValid:R,value:j}};if(S.ORDER%f===d){const w=(S.ORDER-d)/f,x=S.sqrt(S.neg(C));b=(M,k)=>{let j=S.sqr(k);const N=S.mul(M,k);j=S.mul(j,N);let v=S.pow(j,w);v=S.mul(v,N);const R=S.mul(v,x),$=S.mul(S.sqr(v),k),O=S.eql($,M);let H=S.cmov(R,v,O);return{isValid:O,value:H}}}return b}function E(S,C){if((0,r.validateField)(S),!S.isValid(C.A)||!S.isValid(C.B)||!S.isValid(C.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const _=y(S,C.Z);if(!S.isOdd)throw new Error("Fp.isOdd is not implemented!");return T=>{let P,D,L,I,U,F,B,A;P=S.sqr(T),P=S.mul(P,C.Z),D=S.sqr(P),D=S.add(D,P),L=S.add(D,S.ONE),L=S.mul(L,C.B),I=S.cmov(C.Z,S.neg(D),!S.eql(D,S.ZERO)),I=S.mul(I,C.A),D=S.sqr(L),F=S.sqr(I),U=S.mul(F,C.A),D=S.add(D,U),D=S.mul(D,L),F=S.mul(F,I),U=S.mul(F,C.B),D=S.add(D,U),B=S.mul(P,L);const{isValid:m,value:b}=_(D,F);A=S.mul(P,T),A=S.mul(A,b),B=S.cmov(B,L,m),A=S.cmov(A,b,m);const w=S.isOdd(T)===S.isOdd(A);A=S.cmov(S.neg(A),A,w);const x=(0,r.FpInvertBatch)(S,[I],!0)[0];return B=S.mul(B,x),{x:B,y:A}}}})(JP)),JP}var Rq;function NUe(){if(Rq)return Iw;Rq=1,Object.defineProperty(Iw,"__esModule",{value:!0}),Iw.getHash=n,Iw.createCurve=s;const t=IUe(),e=Kh(),r=vse();function n(i){return{hash:i,hmac:(o,...a)=>(0,t.hmac)(i,o,(0,e.concatBytes)(...a)),randomBytes:e.randomBytes}}function s(i,o){const a=c=>(0,r.weierstrass)({...i,...n(c)});return{...a(o),create:a}}return Iw}var $f={},Oq;function PUe(){if(Oq)return $f;Oq=1,Object.defineProperty($f,"__esModule",{value:!0}),$f.expand_message_xmd=o,$f.expand_message_xof=a,$f.hash_to_field=c,$f.isogenyMap=u,$f.createHasher=l;const t=B5(),e=dg(),r=e.bytesToNumberBE;function n(d,f){if(i(d),i(f),d<0||d>=1<<8*f)throw new Error("invalid I2OSP input: "+d);const p=Array.from({length:f}).fill(0);for(let g=f-1;g>=0;g--)p[g]=d&255,d>>>=8;return new Uint8Array(p)}function s(d,f){const p=new Uint8Array(d.length);for(let g=0;g<d.length;g++)p[g]=d[g]^f[g];return p}function i(d){if(!Number.isSafeInteger(d))throw new Error("number expected")}function o(d,f,p,g){(0,e.abytes)(d),(0,e.abytes)(f),i(p),f.length>255&&(f=g((0,e.concatBytes)((0,e.utf8ToBytes)("H2C-OVERSIZE-DST-"),f)));const{outputLen:h,blockLen:y}=g,E=Math.ceil(p/h);if(p>65535||E>255)throw new Error("expand_message_xmd: invalid lenInBytes");const S=(0,e.concatBytes)(f,n(f.length,1)),C=n(0,y),_=n(p,2),T=new Array(E),P=g((0,e.concatBytes)(C,d,_,n(0,1),S));T[0]=g((0,e.concatBytes)(P,n(1,1),S));for(let L=1;L<=E;L++){const I=[s(P,T[L-1]),n(L+1,1),S];T[L]=g((0,e.concatBytes)(...I))}return(0,e.concatBytes)(...T).slice(0,p)}function a(d,f,p,g,h){if((0,e.abytes)(d),(0,e.abytes)(f),i(p),f.length>255){const y=Math.ceil(2*g/8);f=h.create({dkLen:y}).update((0,e.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(f).digest()}if(p>65535||f.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return h.create({dkLen:p}).update(d).update(n(p,2)).update(f).update(n(f.length,1)).digest()}function c(d,f,p){(0,e.validateObject)(p,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:g,k:h,m:y,hash:E,expand:S,DST:C}=p;(0,e.abytes)(d),i(f);const _=typeof C=="string"?(0,e.utf8ToBytes)(C):C,T=g.toString(2).length,P=Math.ceil((T+h)/8),D=f*y*P;let L;if(S==="xmd")L=o(d,_,D,E);else if(S==="xof")L=a(d,_,D,h,E);else if(S==="_internal_pass")L=d;else throw new Error('expand must be "xmd" or "xof"');const I=new Array(f);for(let U=0;U<f;U++){const F=new Array(y);for(let B=0;B<y;B++){const A=P*(B+U*y),m=L.subarray(A,A+P);F[B]=(0,t.mod)(r(m),g)}I[U]=F}return I}function u(d,f){const p=f.map(g=>Array.from(g).reverse());return(g,h)=>{const[y,E,S,C]=p.map(P=>P.reduce((D,L)=>d.add(d.mul(D,g),L))),[_,T]=(0,t.FpInvertBatch)(d,[E,C],!0);return g=d.mul(y,_),h=d.mul(h,d.mul(S,T)),{x:g,y:h}}}function l(d,f,p){if(typeof f!="function")throw new Error("mapToCurve() must be defined");function g(y){return d.fromAffine(f(y))}function h(y){const E=y.clearCofactor();return E.equals(d.ZERO)?d.ZERO:(E.assertValidity(),E)}return{defaults:p,hashToCurve(y,E){const S=c(y,2,{...p,DST:p.DST,...E}),C=g(S[0]),_=g(S[1]);return h(C.add(_))},encodeToCurve(y,E){const S=c(y,1,{...p,DST:p.encodeDST,...E});return h(g(S[0]))},mapToCurve(y){if(!Array.isArray(y))throw new Error("expected array of bigints");for(const E of y)if(typeof E!="bigint")throw new Error("expected array of bigints");return h(g(y))}}}return $f}var kq;function fg(){return kq||(kq=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.secp256k1_hasher=t.schnorr=t.secp256k1=void 0;const e=wse(),r=Kh(),n=NUe(),s=PUe(),i=B5(),o=dg(),a=vse(),c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),u=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),l=BigInt(0),d=BigInt(1),f=BigInt(2),p=(x,M)=>(x+M/f)/M;function g(x){const M=c,k=BigInt(3),j=BigInt(6),N=BigInt(11),v=BigInt(22),R=BigInt(23),$=BigInt(44),O=BigInt(88),H=x*x*x%M,W=H*H*x%M,G=(0,i.pow2)(W,k,M)*W%M,K=(0,i.pow2)(G,k,M)*W%M,Q=(0,i.pow2)(K,f,M)*H%M,re=(0,i.pow2)(Q,N,M)*Q%M,de=(0,i.pow2)(re,v,M)*re%M,le=(0,i.pow2)(de,$,M)*de%M,se=(0,i.pow2)(le,O,M)*le%M,be=(0,i.pow2)(se,$,M)*de%M,We=(0,i.pow2)(be,k,M)*W%M,Ne=(0,i.pow2)(We,R,M)*re%M,Be=(0,i.pow2)(Ne,j,M)*H%M,At=(0,i.pow2)(Be,f,M);if(!h.eql(h.sqr(At),x))throw new Error("Cannot find square root");return At}const h=(0,i.Field)(c,void 0,void 0,{sqrt:g});t.secp256k1=(0,n.createCurve)({a:l,b:BigInt(7),Fp:h,n:u,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:x=>{const M=u,k=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),j=-d*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),N=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),v=k,R=BigInt("0x100000000000000000000000000000000"),$=p(v*x,M),O=p(-j*x,M);let H=(0,i.mod)(x-$*k-O*N,M),W=(0,i.mod)(-$*j-O*v,M);const G=H>R,K=W>R;if(G&&(H=M-H),K&&(W=M-W),H>R||W>R)throw new Error("splitScalar: Endomorphism failed, k="+x);return{k1neg:G,k1:H,k2neg:K,k2:W}}}},e.sha256);const y={};function E(x,...M){let k=y[x];if(k===void 0){const j=(0,e.sha256)(Uint8Array.from(x,N=>N.charCodeAt(0)));k=(0,o.concatBytes)(j,j),y[x]=k}return(0,e.sha256)((0,o.concatBytes)(k,...M))}const S=x=>x.toRawBytes(!0).slice(1),C=x=>(0,o.numberToBytesBE)(x,32),_=x=>(0,i.mod)(x,c),T=x=>(0,i.mod)(x,u),P=t.secp256k1.ProjectivePoint,D=(x,M,k)=>P.BASE.multiplyAndAddUnsafe(x,M,k);function L(x){let M=t.secp256k1.utils.normPrivateKeyToScalar(x),k=P.fromPrivateKey(M);return{scalar:k.hasEvenY()?M:T(-M),bytes:S(k)}}function I(x){(0,o.aInRange)("x",x,d,c);const M=_(x*x),k=_(M*x+BigInt(7));let j=g(k);j%f!==l&&(j=_(-j));const N=new P(x,j,d);return N.assertValidity(),N}const U=o.bytesToNumberBE;function F(...x){return T(U(E("BIP0340/challenge",...x)))}function B(x){return L(x).bytes}function A(x,M,k=(0,r.randomBytes)(32)){const j=(0,o.ensureBytes)("message",x),{bytes:N,scalar:v}=L(M),R=(0,o.ensureBytes)("auxRand",k,32),$=C(v^U(E("BIP0340/aux",R))),O=E("BIP0340/nonce",$,N,j),H=T(U(O));if(H===l)throw new Error("sign failed: k is zero");const{bytes:W,scalar:G}=L(H),K=F(W,N,j),Q=new Uint8Array(64);if(Q.set(W,0),Q.set(C(T(G+K*v)),32),!m(Q,j,N))throw new Error("sign: Invalid signature produced");return Q}function m(x,M,k){const j=(0,o.ensureBytes)("signature",x,64),N=(0,o.ensureBytes)("message",M),v=(0,o.ensureBytes)("publicKey",k,32);try{const R=I(U(v)),$=U(j.subarray(0,32));if(!(0,o.inRange)($,d,c))return!1;const O=U(j.subarray(32,64));if(!(0,o.inRange)(O,d,u))return!1;const H=F(C($),S(R),N),W=D(R,O,T(-H));return!(!W||!W.hasEvenY()||W.toAffine().x!==$)}catch{return!1}}t.schnorr={getPublicKey:B,sign:A,verify:m,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:I,pointToBytes:S,numberToBytesBE:o.numberToBytesBE,bytesToNumberBE:o.bytesToNumberBE,taggedHash:E,mod:i.mod}};const b=(0,s.isogenyMap)(h,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(x=>x.map(M=>BigInt(M)))),w=(0,a.mapToCurveSimpleSWU)(h,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:h.create(BigInt("-11"))});t.secp256k1_hasher=(0,s.createHasher)(t.secp256k1.ProjectivePoint,x=>{const{x:M,y:k}=w(h.create(x[0]));return b(M,k)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:h.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256}),t.hashToCurve=t.secp256k1_hasher.hashToCurve,t.encodeToCurve=t.secp256k1_hasher.encodeToCurve})(ZP)),ZP}var Bq;function IB(){if(Bq)return mA;Bq=1,Object.defineProperty(mA,"__esModule",{value:!0}),mA.recoverPublicKey=s;const t=Ho(),e=Ta(),r=ys(),n=tt();async function s({hash:o,signature:a}){const c=(0,t.isHex)(o)?o:(0,n.toHex)(o),{secp256k1:u}=await Promise.resolve().then(()=>fg());return`0x${(()=>{if(typeof a=="object"&&"r"in a&&"s"in a){const{r:h,s:y,v:E,yParity:S}=a,C=Number(S??E),_=i(C);return new u.Signature((0,r.hexToBigInt)(h),(0,r.hexToBigInt)(y)).addRecoveryBit(_)}const f=(0,t.isHex)(a)?a:(0,n.toHex)(a);if((0,e.size)(f)!==65)throw new Error("invalid signature length");const p=(0,r.hexToNumber)(`0x${f.slice(130)}`),g=i(p);return u.Signature.fromCompact(f.substring(2,130)).addRecoveryBit(g)})().recoverPublicKey(c.substring(2)).toHex(!1)}`}function i(o){if(o===0||o===1)return o;if(o===27)return 0;if(o===28)return 1;throw new Error("Invalid yParityOrV value")}return mA}var Uq;function Qh(){if(Uq)return pA;Uq=1,Object.defineProperty(pA,"__esModule",{value:!0}),pA.recoverAddress=r;const t=yse(),e=IB();async function r({hash:n,signature:s}){return(0,t.publicKeyToAddress)(await(0,e.recoverPublicKey)({hash:n,signature:s}))}return pA}var yA={},Gg={},Mq;function u_(){if(Mq)return Gg;Mq=1,Object.defineProperty(Gg,"__esModule",{value:!0}),Gg.toRlp=s,Gg.bytesToRlp=i,Gg.hexToRlp=o;const t=Kt(),e=o_(),r=Pn(),n=tt();function s(d,f="hex"){const p=a(d),g=(0,e.createCursor)(new Uint8Array(p.length));return p.encode(g),f==="hex"?(0,n.bytesToHex)(g.bytes):g.bytes}function i(d,f="bytes"){return s(d,f)}function o(d,f="hex"){return s(d,f)}function a(d){return Array.isArray(d)?c(d.map(f=>a(f))):u(d)}function c(d){const f=d.reduce((h,y)=>h+y.length,0),p=l(f);return{length:f<=55?1+f:1+p+f,encode(h){f<=55?h.pushByte(192+f):(h.pushByte(247+p),p===1?h.pushUint8(f):p===2?h.pushUint16(f):p===3?h.pushUint24(f):h.pushUint32(f));for(const{encode:y}of d)y(h)}}}function u(d){const f=typeof d=="string"?(0,r.hexToBytes)(d):d,p=l(f.length);return{length:f.length===1&&f[0]<128?1:f.length<=55?1+f.length:1+p+f.length,encode(h){f.length===1&&f[0]<128?h.pushBytes(f):f.length<=55?(h.pushByte(128+f.length),h.pushBytes(f)):(h.pushByte(183+p),p===1?h.pushUint8(f.length):p===2?h.pushUint16(f.length):p===3?h.pushUint24(f.length):h.pushUint32(f.length),h.pushBytes(f))}}}function l(d){if(d<2**8)return 1;if(d<2**16)return 2;if(d<2**24)return 3;if(d<2**32)return 4;throw new t.BaseError("Length is too large.")}return Gg}var Dq;function Ese(){if(Dq)return yA;Dq=1,Object.defineProperty(yA,"__esModule",{value:!0}),yA.hashAuthorization=i;const t=hi(),e=Pn(),r=tt(),n=u_(),s=Na();function i(o){const{chainId:a,nonce:c,to:u}=o,l=o.contractAddress??o.address,d=(0,s.keccak256)((0,t.concatHex)(["0x05",(0,n.toRlp)([a?(0,r.numberToHex)(a):"0x",l,c?(0,r.numberToHex)(c):"0x"])]));return u==="bytes"?(0,e.hexToBytes)(d):d}return yA}var jq;function l_(){if(jq)return hA;jq=1,Object.defineProperty(hA,"__esModule",{value:!0}),hA.recoverAuthorizationAddress=r;const t=Qh(),e=Ese();async function r(n){const{authorization:s,signature:i}=n;return(0,t.recoverAddress)({hash:(0,e.hashAuthorization)(s),signature:i??s})}return hA}var bA={},Tw={},Lq;function _se(){if(Lq)return Tw;Lq=1,Object.defineProperty(Tw,"__esModule",{value:!0}),Tw.EstimateGasExecutionError=void 0;const t=c_(),e=lg(),r=Kt(),n=Oa();class s extends r.BaseError{constructor(o,{account:a,docsPath:c,chain:u,data:l,gas:d,gasPrice:f,maxFeePerGas:p,maxPriorityFeePerGas:g,nonce:h,to:y,value:E}){const S=(0,n.prettyPrint)({from:a?.address,to:y,value:typeof E<"u"&&`${(0,t.formatEther)(E)} ${u?.nativeCurrency?.symbol||"ETH"}`,data:l,gas:d,gasPrice:typeof f<"u"&&`${(0,e.formatGwei)(f)} gwei`,maxFeePerGas:typeof p<"u"&&`${(0,e.formatGwei)(p)} gwei`,maxPriorityFeePerGas:typeof g<"u"&&`${(0,e.formatGwei)(g)} gwei`,nonce:h});super(o.shortMessage,{cause:o,docsPath:c,metaMessages:[...o.metaMessages?[...o.metaMessages," "]:[],"Estimate Gas Arguments:",S].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=o}}return Tw.EstimateGasExecutionError=s,Tw}var In={},Fq;function hf(){if(Fq)return In;Fq=1,Object.defineProperty(In,"__esModule",{value:!0}),In.UnknownNodeError=In.TipAboveFeeCapError=In.TransactionTypeNotSupportedError=In.IntrinsicGasTooLowError=In.IntrinsicGasTooHighError=In.InsufficientFundsError=In.NonceMaxValueError=In.NonceTooLowError=In.NonceTooHighError=In.FeeCapTooLowError=In.FeeCapTooHighError=In.ExecutionRevertedError=void 0;const t=lg(),e=Kt();class r extends e.BaseError{constructor({cause:h,message:y}={}){const E=y?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${E?`with reason: ${E}`:"for an unknown reason"}.`,{cause:h,name:"ExecutionRevertedError"})}}In.ExecutionRevertedError=r,Object.defineProperty(r,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(r,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class n extends e.BaseError{constructor({cause:h,maxFeePerGas:y}={}){super(`The fee cap (\`maxFeePerGas\`${y?` = ${(0,t.formatGwei)(y)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:h,name:"FeeCapTooHighError"})}}In.FeeCapTooHighError=n,Object.defineProperty(n,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class s extends e.BaseError{constructor({cause:h,maxFeePerGas:y}={}){super(`The fee cap (\`maxFeePerGas\`${y?` = ${(0,t.formatGwei)(y)}`:""} gwei) cannot be lower than the block base fee.`,{cause:h,name:"FeeCapTooLowError"})}}In.FeeCapTooLowError=s,Object.defineProperty(s,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class i extends e.BaseError{constructor({cause:h,nonce:y}={}){super(`Nonce provided for the transaction ${y?`(${y}) `:""}is higher than the next one expected.`,{cause:h,name:"NonceTooHighError"})}}In.NonceTooHighError=i,Object.defineProperty(i,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class o extends e.BaseError{constructor({cause:h,nonce:y}={}){super([`Nonce provided for the transaction ${y?`(${y}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:h,name:"NonceTooLowError"})}}In.NonceTooLowError=o,Object.defineProperty(o,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class a extends e.BaseError{constructor({cause:h,nonce:y}={}){super(`Nonce provided for the transaction ${y?`(${y}) `:""}exceeds the maximum allowed nonce.`,{cause:h,name:"NonceMaxValueError"})}}In.NonceMaxValueError=a,Object.defineProperty(a,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class c extends e.BaseError{constructor({cause:h}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:h,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}In.InsufficientFundsError=c,Object.defineProperty(c,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class u extends e.BaseError{constructor({cause:h,gas:y}={}){super(`The amount of gas ${y?`(${y}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:h,name:"IntrinsicGasTooHighError"})}}In.IntrinsicGasTooHighError=u,Object.defineProperty(u,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class l extends e.BaseError{constructor({cause:h,gas:y}={}){super(`The amount of gas ${y?`(${y}) `:""}provided for the transaction is too low.`,{cause:h,name:"IntrinsicGasTooLowError"})}}In.IntrinsicGasTooLowError=l,Object.defineProperty(l,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class d extends e.BaseError{constructor({cause:h}){super("The transaction type is not supported for this chain.",{cause:h,name:"TransactionTypeNotSupportedError"})}}In.TransactionTypeNotSupportedError=d,Object.defineProperty(d,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class f extends e.BaseError{constructor({cause:h,maxPriorityFeePerGas:y,maxFeePerGas:E}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${y?` = ${(0,t.formatGwei)(y)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${E?` = ${(0,t.formatGwei)(E)} gwei`:""}).`].join(`
`),{cause:h,name:"TipAboveFeeCapError"})}}In.TipAboveFeeCapError=f,Object.defineProperty(f,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class p extends e.BaseError{constructor({cause:h}){super(`An error occurred while executing: ${h?.shortMessage}`,{cause:h,name:"UnknownNodeError"})}}return In.UnknownNodeError=p,In}var Nw={},$q;function d_(){if($q)return Nw;$q=1,Object.defineProperty(Nw,"__esModule",{value:!0}),Nw.containsNodeError=s,Nw.getNodeError=i;const t=Kt(),e=hf(),r=Gu(),n=Jh();function s(o){return o instanceof n.TransactionRejectedRpcError||o instanceof n.InvalidInputRpcError||o instanceof r.RpcRequestError&&o.code===e.ExecutionRevertedError.code}function i(o,a){const c=(o.details||"").toLowerCase(),u=o instanceof t.BaseError?o.walk(l=>l?.code===e.ExecutionRevertedError.code):o;return u instanceof t.BaseError?new e.ExecutionRevertedError({cause:o,message:u.details}):e.ExecutionRevertedError.nodeMessage.test(c)?new e.ExecutionRevertedError({cause:o,message:o.details}):e.FeeCapTooHighError.nodeMessage.test(c)?new e.FeeCapTooHighError({cause:o,maxFeePerGas:a?.maxFeePerGas}):e.FeeCapTooLowError.nodeMessage.test(c)?new e.FeeCapTooLowError({cause:o,maxFeePerGas:a?.maxFeePerGas}):e.NonceTooHighError.nodeMessage.test(c)?new e.NonceTooHighError({cause:o,nonce:a?.nonce}):e.NonceTooLowError.nodeMessage.test(c)?new e.NonceTooLowError({cause:o,nonce:a?.nonce}):e.NonceMaxValueError.nodeMessage.test(c)?new e.NonceMaxValueError({cause:o,nonce:a?.nonce}):e.InsufficientFundsError.nodeMessage.test(c)?new e.InsufficientFundsError({cause:o}):e.IntrinsicGasTooHighError.nodeMessage.test(c)?new e.IntrinsicGasTooHighError({cause:o,gas:a?.gas}):e.IntrinsicGasTooLowError.nodeMessage.test(c)?new e.IntrinsicGasTooLowError({cause:o,gas:a?.gas}):e.TransactionTypeNotSupportedError.nodeMessage.test(c)?new e.TransactionTypeNotSupportedError({cause:o}):e.TipAboveFeeCapError.nodeMessage.test(c)?new e.TipAboveFeeCapError({cause:o,maxFeePerGas:a?.maxFeePerGas,maxPriorityFeePerGas:a?.maxPriorityFeePerGas}):new e.UnknownNodeError({cause:o})}return Nw}var qq;function Ase(){if(qq)return bA;qq=1,Object.defineProperty(bA,"__esModule",{value:!0}),bA.getEstimateGasError=n;const t=_se(),e=hf(),r=d_();function n(s,{docsPath:i,...o}){const a=(()=>{const c=(0,r.getNodeError)(s,o);return c instanceof e.UnknownNodeError?s:c})();return new t.EstimateGasExecutionError(a,{docsPath:i,...o})}return bA}var wA={},Hq;function ep(){if(Hq)return wA;Hq=1,Object.defineProperty(wA,"__esModule",{value:!0}),wA.extract=t;function t(e,{format:r}){if(!r)return{};const n={};function s(o){const a=Object.keys(o);for(const c of a)c in e&&(n[c]=e[c]),o[c]&&typeof o[c]=="object"&&!Array.isArray(o[c])&&s(o[c])}const i=r(e||{});return s(i),n}return wA}var XP={},vA={},zq;function f_(){if(zq)return vA;zq=1,Object.defineProperty(vA,"__esModule",{value:!0}),vA.defineFormatter=t;function t(e,r){return({exclude:n,format:s})=>({exclude:n,format:(i,o)=>{const a=r(i,o);if(n)for(const c of n)delete a[c];return{...a,...s(i,o)}},type:e})}return vA}var Wq;function Ku(){return Wq||(Wq=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defineTransactionRequest=t.rpcTransactionType=void 0,t.formatTransactionRequest=n;const e=tt(),r=f_();t.rpcTransactionType={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function n(i,o){const a={};return typeof i.authorizationList<"u"&&(a.authorizationList=s(i.authorizationList)),typeof i.accessList<"u"&&(a.accessList=i.accessList),typeof i.blobVersionedHashes<"u"&&(a.blobVersionedHashes=i.blobVersionedHashes),typeof i.blobs<"u"&&(typeof i.blobs[0]!="string"?a.blobs=i.blobs.map(c=>(0,e.bytesToHex)(c)):a.blobs=i.blobs),typeof i.data<"u"&&(a.data=i.data),i.account&&(a.from=i.account.address),typeof i.from<"u"&&(a.from=i.from),typeof i.gas<"u"&&(a.gas=(0,e.numberToHex)(i.gas)),typeof i.gasPrice<"u"&&(a.gasPrice=(0,e.numberToHex)(i.gasPrice)),typeof i.maxFeePerBlobGas<"u"&&(a.maxFeePerBlobGas=(0,e.numberToHex)(i.maxFeePerBlobGas)),typeof i.maxFeePerGas<"u"&&(a.maxFeePerGas=(0,e.numberToHex)(i.maxFeePerGas)),typeof i.maxPriorityFeePerGas<"u"&&(a.maxPriorityFeePerGas=(0,e.numberToHex)(i.maxPriorityFeePerGas)),typeof i.nonce<"u"&&(a.nonce=(0,e.numberToHex)(i.nonce)),typeof i.to<"u"&&(a.to=i.to),typeof i.type<"u"&&(a.type=t.rpcTransactionType[i.type]),typeof i.value<"u"&&(a.value=(0,e.numberToHex)(i.value)),a}t.defineTransactionRequest=(0,r.defineFormatter)("transactionRequest",n);function s(i){return i.map(o=>({address:o.address,r:o.r?(0,e.numberToHex)(BigInt(o.r)):o.r,s:o.s?(0,e.numberToHex)(BigInt(o.s)):o.s,chainId:(0,e.numberToHex)(o.chainId),nonce:(0,e.numberToHex)(o.nonce),...typeof o.yParity<"u"?{yParity:(0,e.numberToHex)(o.yParity)}:{},...typeof o.v<"u"&&typeof o.yParity>"u"?{v:(0,e.numberToHex)(o.v)}:{}}))}})(XP)),XP}var Kg={},Vq;function TB(){if(Vq)return Kg;Vq=1,Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.serializeStateMapping=i,Kg.serializeAccountStateOverride=o,Kg.serializeStateOverride=a;const t=Wu(),e=T5(),r=CB(),n=Pa(),s=tt();function i(c){if(!(!c||c.length===0))return c.reduce((u,{slot:l,value:d})=>{if(l.length!==66)throw new e.InvalidBytesLengthError({size:l.length,targetSize:66,type:"hex"});if(d.length!==66)throw new e.InvalidBytesLengthError({size:d.length,targetSize:66,type:"hex"});return u[l]=d,u},{})}function o(c){const{balance:u,nonce:l,state:d,stateDiff:f,code:p}=c,g={};if(p!==void 0&&(g.code=p),u!==void 0&&(g.balance=(0,s.numberToHex)(u)),l!==void 0&&(g.nonce=(0,s.numberToHex)(l)),d!==void 0&&(g.state=i(d)),f!==void 0){if(g.state)throw new r.StateAssignmentConflictError;g.stateDiff=i(f)}return g}function a(c){if(!c)return;const u={};for(const{address:l,...d}of c){if(!(0,n.isAddress)(l,{strict:!1}))throw new t.InvalidAddressError({address:l});if(u[l])throw new r.AccountStateConflictError({address:l});u[l]=o(d)}return u}return Kg}var EA={},oe={},Gq;function NB(){return Gq||(Gq=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.minInt144=oe.minInt136=oe.minInt128=oe.minInt120=oe.minInt112=oe.minInt104=oe.minInt96=oe.minInt88=oe.minInt80=oe.minInt72=oe.minInt64=oe.minInt56=oe.minInt48=oe.minInt40=oe.minInt32=oe.minInt24=oe.minInt16=oe.minInt8=oe.maxInt256=oe.maxInt248=oe.maxInt240=oe.maxInt232=oe.maxInt224=oe.maxInt216=oe.maxInt208=oe.maxInt200=oe.maxInt192=oe.maxInt184=oe.maxInt176=oe.maxInt168=oe.maxInt160=oe.maxInt152=oe.maxInt144=oe.maxInt136=oe.maxInt128=oe.maxInt120=oe.maxInt112=oe.maxInt104=oe.maxInt96=oe.maxInt88=oe.maxInt80=oe.maxInt72=oe.maxInt64=oe.maxInt56=oe.maxInt48=oe.maxInt40=oe.maxInt32=oe.maxInt24=oe.maxInt16=oe.maxInt8=void 0,oe.maxUint256=oe.maxUint248=oe.maxUint240=oe.maxUint232=oe.maxUint224=oe.maxUint216=oe.maxUint208=oe.maxUint200=oe.maxUint192=oe.maxUint184=oe.maxUint176=oe.maxUint168=oe.maxUint160=oe.maxUint152=oe.maxUint144=oe.maxUint136=oe.maxUint128=oe.maxUint120=oe.maxUint112=oe.maxUint104=oe.maxUint96=oe.maxUint88=oe.maxUint80=oe.maxUint72=oe.maxUint64=oe.maxUint56=oe.maxUint48=oe.maxUint40=oe.maxUint32=oe.maxUint24=oe.maxUint16=oe.maxUint8=oe.minInt256=oe.minInt248=oe.minInt240=oe.minInt232=oe.minInt224=oe.minInt216=oe.minInt208=oe.minInt200=oe.minInt192=oe.minInt184=oe.minInt176=oe.minInt168=oe.minInt160=oe.minInt152=void 0,oe.maxInt8=2n**(8n-1n)-1n,oe.maxInt16=2n**(16n-1n)-1n,oe.maxInt24=2n**(24n-1n)-1n,oe.maxInt32=2n**(32n-1n)-1n,oe.maxInt40=2n**(40n-1n)-1n,oe.maxInt48=2n**(48n-1n)-1n,oe.maxInt56=2n**(56n-1n)-1n,oe.maxInt64=2n**(64n-1n)-1n,oe.maxInt72=2n**(72n-1n)-1n,oe.maxInt80=2n**(80n-1n)-1n,oe.maxInt88=2n**(88n-1n)-1n,oe.maxInt96=2n**(96n-1n)-1n,oe.maxInt104=2n**(104n-1n)-1n,oe.maxInt112=2n**(112n-1n)-1n,oe.maxInt120=2n**(120n-1n)-1n,oe.maxInt128=2n**(128n-1n)-1n,oe.maxInt136=2n**(136n-1n)-1n,oe.maxInt144=2n**(144n-1n)-1n,oe.maxInt152=2n**(152n-1n)-1n,oe.maxInt160=2n**(160n-1n)-1n,oe.maxInt168=2n**(168n-1n)-1n,oe.maxInt176=2n**(176n-1n)-1n,oe.maxInt184=2n**(184n-1n)-1n,oe.maxInt192=2n**(192n-1n)-1n,oe.maxInt200=2n**(200n-1n)-1n,oe.maxInt208=2n**(208n-1n)-1n,oe.maxInt216=2n**(216n-1n)-1n,oe.maxInt224=2n**(224n-1n)-1n,oe.maxInt232=2n**(232n-1n)-1n,oe.maxInt240=2n**(240n-1n)-1n,oe.maxInt248=2n**(248n-1n)-1n,oe.maxInt256=2n**(256n-1n)-1n,oe.minInt8=-(2n**(8n-1n)),oe.minInt16=-(2n**(16n-1n)),oe.minInt24=-(2n**(24n-1n)),oe.minInt32=-(2n**(32n-1n)),oe.minInt40=-(2n**(40n-1n)),oe.minInt48=-(2n**(48n-1n)),oe.minInt56=-(2n**(56n-1n)),oe.minInt64=-(2n**(64n-1n)),oe.minInt72=-(2n**(72n-1n)),oe.minInt80=-(2n**(80n-1n)),oe.minInt88=-(2n**(88n-1n)),oe.minInt96=-(2n**(96n-1n)),oe.minInt104=-(2n**(104n-1n)),oe.minInt112=-(2n**(112n-1n)),oe.minInt120=-(2n**(120n-1n)),oe.minInt128=-(2n**(128n-1n)),oe.minInt136=-(2n**(136n-1n)),oe.minInt144=-(2n**(144n-1n)),oe.minInt152=-(2n**(152n-1n)),oe.minInt160=-(2n**(160n-1n)),oe.minInt168=-(2n**(168n-1n)),oe.minInt176=-(2n**(176n-1n)),oe.minInt184=-(2n**(184n-1n)),oe.minInt192=-(2n**(192n-1n)),oe.minInt200=-(2n**(200n-1n)),oe.minInt208=-(2n**(208n-1n)),oe.minInt216=-(2n**(216n-1n)),oe.minInt224=-(2n**(224n-1n)),oe.minInt232=-(2n**(232n-1n)),oe.minInt240=-(2n**(240n-1n)),oe.minInt248=-(2n**(248n-1n)),oe.minInt256=-(2n**(256n-1n)),oe.maxUint8=2n**8n-1n,oe.maxUint16=2n**16n-1n,oe.maxUint24=2n**24n-1n,oe.maxUint32=2n**32n-1n,oe.maxUint40=2n**40n-1n,oe.maxUint48=2n**48n-1n,oe.maxUint56=2n**56n-1n,oe.maxUint64=2n**64n-1n,oe.maxUint72=2n**72n-1n,oe.maxUint80=2n**80n-1n,oe.maxUint88=2n**88n-1n,oe.maxUint96=2n**96n-1n,oe.maxUint104=2n**104n-1n,oe.maxUint112=2n**112n-1n,oe.maxUint120=2n**120n-1n,oe.maxUint128=2n**128n-1n,oe.maxUint136=2n**136n-1n,oe.maxUint144=2n**144n-1n,oe.maxUint152=2n**152n-1n,oe.maxUint160=2n**160n-1n,oe.maxUint168=2n**168n-1n,oe.maxUint176=2n**176n-1n,oe.maxUint184=2n**184n-1n,oe.maxUint192=2n**192n-1n,oe.maxUint200=2n**200n-1n,oe.maxUint208=2n**208n-1n,oe.maxUint216=2n**216n-1n,oe.maxUint224=2n**224n-1n,oe.maxUint232=2n**232n-1n,oe.maxUint240=2n**240n-1n,oe.maxUint248=2n**248n-1n,oe.maxUint256=2n**256n-1n),oe}var Kq;function Zu(){if(Kq)return EA;Kq=1,Object.defineProperty(EA,"__esModule",{value:!0}),EA.assertRequest=i;const t=is(),e=NB(),r=Wu(),n=hf(),s=Pa();function i(o){const{account:a,maxFeePerGas:c,maxPriorityFeePerGas:u,to:l}=o,d=a?(0,t.parseAccount)(a):void 0;if(d&&!(0,s.isAddress)(d.address))throw new r.InvalidAddressError({address:d.address});if(l&&!(0,s.isAddress)(l))throw new r.InvalidAddressError({address:l});if(c&&c>e.maxUint256)throw new n.FeeCapTooHighError({maxFeePerGas:c});if(u&&c&&u>c)throw new n.TipAboveFeeCapError({maxFeePerGas:c,maxPriorityFeePerGas:u})}return EA}var QP={},Pw={},Ed={},Zq;function h_(){if(Zq)return Ed;Zq=1,Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.MaxFeePerGasTooLowError=Ed.Eip1559FeesNotSupportedError=Ed.BaseFeeScalarError=void 0;const t=lg(),e=Kt();class r extends e.BaseError{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}Ed.BaseFeeScalarError=r;class n extends e.BaseError{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}Ed.Eip1559FeesNotSupportedError=n;class s extends e.BaseError{constructor({maxPriorityFeePerGas:o}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${(0,t.formatGwei)(o)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}return Ed.MaxFeePerGasTooLowError=s,Ed}var Rw={},_A={},Ow={},Yq;function PB(){if(Yq)return Ow;Yq=1,Object.defineProperty(Ow,"__esModule",{value:!0}),Ow.BlockNotFoundError=void 0;const t=Kt();class e extends t.BaseError{constructor({blockHash:n,blockNumber:s}){let i="Block";n&&(i=`Block at hash "${n}"`),s&&(i=`Block at number "${s}"`),super(`${i} could not be found.`,{name:"BlockNotFoundError"})}}return Ow.BlockNotFoundError=e,Ow}var Zg={},eR={},Jq;function ab(){return Jq||(Jq=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defineTransaction=t.transactionType=void 0,t.formatTransaction=n;const e=ys(),r=f_();t.transactionType={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function n(i,o){const a={...i,blockHash:i.blockHash?i.blockHash:null,blockNumber:i.blockNumber?BigInt(i.blockNumber):null,chainId:i.chainId?(0,e.hexToNumber)(i.chainId):void 0,gas:i.gas?BigInt(i.gas):void 0,gasPrice:i.gasPrice?BigInt(i.gasPrice):void 0,maxFeePerBlobGas:i.maxFeePerBlobGas?BigInt(i.maxFeePerBlobGas):void 0,maxFeePerGas:i.maxFeePerGas?BigInt(i.maxFeePerGas):void 0,maxPriorityFeePerGas:i.maxPriorityFeePerGas?BigInt(i.maxPriorityFeePerGas):void 0,nonce:i.nonce?(0,e.hexToNumber)(i.nonce):void 0,to:i.to?i.to:null,transactionIndex:i.transactionIndex?Number(i.transactionIndex):null,type:i.type?t.transactionType[i.type]:void 0,typeHex:i.type?i.type:void 0,value:i.value?BigInt(i.value):void 0,v:i.v?BigInt(i.v):void 0};return i.authorizationList&&(a.authorizationList=s(i.authorizationList)),a.yParity=(()=>{if(i.yParity)return Number(i.yParity);if(typeof a.v=="bigint"){if(a.v===0n||a.v===27n)return 0;if(a.v===1n||a.v===28n)return 1;if(a.v>=35n)return a.v%2n===0n?1:0}})(),a.type==="legacy"&&(delete a.accessList,delete a.maxFeePerBlobGas,delete a.maxFeePerGas,delete a.maxPriorityFeePerGas,delete a.yParity),a.type==="eip2930"&&(delete a.maxFeePerBlobGas,delete a.maxFeePerGas,delete a.maxPriorityFeePerGas),a.type==="eip1559"&&delete a.maxFeePerBlobGas,a}t.defineTransaction=(0,r.defineFormatter)("transaction",n);function s(i){return i.map(o=>({address:o.address,chainId:Number(o.chainId),nonce:Number(o.nonce),r:o.r,s:o.s,yParity:Number(o.yParity)}))}})(eR)),eR}var Xq;function U5(){if(Xq)return Zg;Xq=1,Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.defineBlock=void 0,Zg.formatBlock=r;const t=f_(),e=ab();function r(n,s){const i=(n.transactions??[]).map(o=>typeof o=="string"?o:(0,e.formatTransaction)(o));return{...n,baseFeePerGas:n.baseFeePerGas?BigInt(n.baseFeePerGas):null,blobGasUsed:n.blobGasUsed?BigInt(n.blobGasUsed):void 0,difficulty:n.difficulty?BigInt(n.difficulty):void 0,excessBlobGas:n.excessBlobGas?BigInt(n.excessBlobGas):void 0,gasLimit:n.gasLimit?BigInt(n.gasLimit):void 0,gasUsed:n.gasUsed?BigInt(n.gasUsed):void 0,hash:n.hash?n.hash:null,logsBloom:n.logsBloom?n.logsBloom:null,nonce:n.nonce?n.nonce:null,number:n.number?BigInt(n.number):null,size:n.size?BigInt(n.size):void 0,timestamp:n.timestamp?BigInt(n.timestamp):void 0,transactions:i,totalDifficulty:n.totalDifficulty?BigInt(n.totalDifficulty):null}}return Zg.defineBlock=(0,t.defineFormatter)("block",r),Zg}var Qq;function hg(){if(Qq)return _A;Qq=1,Object.defineProperty(_A,"__esModule",{value:!0}),_A.getBlock=n;const t=PB(),e=tt(),r=U5();async function n(s,{blockHash:i,blockNumber:o,blockTag:a=s.experimental_blockTag??"latest",includeTransactions:c}={}){const u=c??!1,l=o!==void 0?(0,e.numberToHex)(o):void 0;let d=null;if(i?d=await s.request({method:"eth_getBlockByHash",params:[i,u]},{dedupe:!0}):d=await s.request({method:"eth_getBlockByNumber",params:[l||a,u]},{dedupe:!!l}),!d)throw new t.BlockNotFoundError({blockHash:i,blockNumber:o});return(s.chain?.formatters?.block?.format||r.formatBlock)(d,"getBlock")}return _A}var AA={},eH;function RB(){if(eH)return AA;eH=1,Object.defineProperty(AA,"__esModule",{value:!0}),AA.getGasPrice=t;async function t(e){const r=await e.request({method:"eth_gasPrice"});return BigInt(r)}return AA}var tH;function xse(){if(tH)return Rw;tH=1,Object.defineProperty(Rw,"__esModule",{value:!0}),Rw.estimateMaxPriorityFeePerGas=i,Rw.internal_estimateMaxPriorityFeePerGas=o;const t=h_(),e=ys(),r=kr(),n=hg(),s=RB();async function i(a,c){return o(a,c)}async function o(a,c){const{block:u,chain:l=a.chain,request:d}=c||{};try{const f=l?.fees?.maxPriorityFeePerGas??l?.fees?.defaultPriorityFee;if(typeof f=="function"){const g=u||await(0,r.getAction)(a,n.getBlock,"getBlock")({}),h=await f({block:g,client:a,request:d});if(h===null)throw new Error;return h}if(typeof f<"u")return f;const p=await a.request({method:"eth_maxPriorityFeePerGas"});return(0,e.hexToBigInt)(p)}catch{const[f,p]=await Promise.all([u?Promise.resolve(u):(0,r.getAction)(a,n.getBlock,"getBlock")({}),(0,r.getAction)(a,s.getGasPrice,"getGasPrice")({})]);if(typeof f.baseFeePerGas!="bigint")throw new t.Eip1559FeesNotSupportedError;const g=p-f.baseFeePerGas;return g<0n?0n:g}}return Rw}var rH;function Cse(){if(rH)return Pw;rH=1,Object.defineProperty(Pw,"__esModule",{value:!0}),Pw.estimateFeesPerGas=i,Pw.internal_estimateFeesPerGas=o;const t=h_(),e=kr(),r=xse(),n=hg(),s=RB();async function i(a,c){return o(a,c)}async function o(a,c){const{block:u,chain:l=a.chain,request:d,type:f="eip1559"}=c||{},p=await(async()=>typeof l?.fees?.baseFeeMultiplier=="function"?l.fees.baseFeeMultiplier({block:u,client:a,request:d}):l?.fees?.baseFeeMultiplier??1.2)();if(p<1)throw new t.BaseFeeScalarError;const h=10**(p.toString().split(".")[1]?.length??0),y=C=>C*BigInt(Math.ceil(p*h))/BigInt(h),E=u||await(0,e.getAction)(a,n.getBlock,"getBlock")({});if(typeof l?.fees?.estimateFeesPerGas=="function"){const C=await l.fees.estimateFeesPerGas({block:u,client:a,multiply:y,request:d,type:f});if(C!==null)return C}if(f==="eip1559"){if(typeof E.baseFeePerGas!="bigint")throw new t.Eip1559FeesNotSupportedError;const C=typeof d?.maxPriorityFeePerGas=="bigint"?d.maxPriorityFeePerGas:await(0,r.internal_estimateMaxPriorityFeePerGas)(a,{block:E,chain:l,request:d}),_=y(E.baseFeePerGas);return{maxFeePerGas:d?.maxFeePerGas??_+C,maxPriorityFeePerGas:C}}return{gasPrice:d?.gasPrice??y(await(0,e.getAction)(a,s.getGasPrice,"getGasPrice")({}))}}return Pw}var xA={},nH;function M5(){if(nH)return xA;nH=1,Object.defineProperty(xA,"__esModule",{value:!0}),xA.getTransactionCount=r;const t=ys(),e=tt();async function r(n,{address:s,blockTag:i="latest",blockNumber:o}){const a=await n.request({method:"eth_getTransactionCount",params:[s,typeof o=="bigint"?(0,e.numberToHex)(o):i]},{dedupe:!!o});return(0,t.hexToNumber)(a)}return xA}var CA={},sH;function D5(){if(sH)return CA;sH=1,Object.defineProperty(CA,"__esModule",{value:!0}),CA.blobsToCommitments=r;const t=Pn(),e=tt();function r(n){const{kzg:s}=n,i=n.to??(typeof n.blobs[0]=="string"?"hex":"bytes"),o=typeof n.blobs[0]=="string"?n.blobs.map(c=>(0,t.hexToBytes)(c)):n.blobs,a=[];for(const c of o)a.push(Uint8Array.from(s.blobToKzgCommitment(c)));return i==="bytes"?a:a.map(c=>(0,e.bytesToHex)(c))}return CA}var SA={},iH;function j5(){if(iH)return SA;iH=1,Object.defineProperty(SA,"__esModule",{value:!0}),SA.blobsToProofs=r;const t=Pn(),e=tt();function r(n){const{kzg:s}=n,i=n.to??(typeof n.blobs[0]=="string"?"hex":"bytes"),o=typeof n.blobs[0]=="string"?n.blobs.map(u=>(0,t.hexToBytes)(u)):n.blobs,a=typeof n.commitments[0]=="string"?n.commitments.map(u=>(0,t.hexToBytes)(u)):n.commitments,c=[];for(let u=0;u<o.length;u++){const l=o[u],d=a[u];c.push(Uint8Array.from(s.computeBlobKzgProof(l,d)))}return i==="bytes"?c:c.map(u=>(0,e.bytesToHex)(u))}return SA}var IA={},TA={},NA={},uu={},oH;function Sse(){if(oH)return uu;oH=1,Object.defineProperty(uu,"__esModule",{value:!0}),uu.sha224=uu.SHA224=uu.sha256=uu.SHA256=void 0;const t=wse();return uu.SHA256=t.SHA256,uu.sha256=t.sha256,uu.SHA224=t.SHA224,uu.sha224=t.sha224,uu}var aH;function OB(){if(aH)return NA;aH=1,Object.defineProperty(NA,"__esModule",{value:!0}),NA.sha256=s;const t=Sse(),e=Ho(),r=Pn(),n=tt();function s(i,o){const a=o||"hex",c=(0,t.sha256)((0,e.isHex)(i,{strict:!1})?(0,r.toBytes)(i):i);return a==="bytes"?c:(0,n.toHex)(c)}return NA}var cH;function kB(){if(cH)return TA;cH=1,Object.defineProperty(TA,"__esModule",{value:!0}),TA.commitmentToVersionedHash=r;const t=tt(),e=OB();function r(n){const{commitment:s,version:i=1}=n,o=n.to??(typeof s=="string"?"hex":"bytes"),a=(0,e.sha256)(s,"bytes");return a.set([i],0),o==="bytes"?a:(0,t.bytesToHex)(a)}return TA}var uH;function BB(){if(uH)return IA;uH=1,Object.defineProperty(IA,"__esModule",{value:!0}),IA.commitmentsToVersionedHashes=e;const t=kB();function e(r){const{commitments:n,version:s}=r,i=r.to??(typeof n[0]=="string"?"hex":"bytes"),o=[];for(const a of n)o.push((0,t.commitmentToVersionedHash)({commitment:a,to:i,version:s}));return o}return IA}var PA={},RA={},tR={},lH;function RUe(){return lH||(lH=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.maxBytesPerTransaction=t.bytesPerBlob=t.fieldElementsPerBlob=t.bytesPerFieldElement=void 0;const e=6;t.bytesPerFieldElement=32,t.fieldElementsPerBlob=4096,t.bytesPerBlob=t.bytesPerFieldElement*t.fieldElementsPerBlob,t.maxBytesPerTransaction=t.bytesPerBlob*e-1-1*t.fieldElementsPerBlob*e})(tR)),tR}var lu={},kw={},dH;function Ise(){return dH||(dH=1,Object.defineProperty(kw,"__esModule",{value:!0}),kw.versionedHashVersionKzg=void 0,kw.versionedHashVersionKzg=1),kw}var fH;function Tse(){if(fH)return lu;fH=1,Object.defineProperty(lu,"__esModule",{value:!0}),lu.InvalidVersionedHashVersionError=lu.InvalidVersionedHashSizeError=lu.EmptyBlobError=lu.BlobSizeTooLargeError=void 0;const t=Ise(),e=Kt();class r extends e.BaseError{constructor({maxSize:a,size:c}){super("Blob size is too large.",{metaMessages:[`Max: ${a} bytes`,`Given: ${c} bytes`],name:"BlobSizeTooLargeError"})}}lu.BlobSizeTooLargeError=r;class n extends e.BaseError{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}lu.EmptyBlobError=n;class s extends e.BaseError{constructor({hash:a,size:c}){super(`Versioned hash "${a}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${c}`],name:"InvalidVersionedHashSizeError"})}}lu.InvalidVersionedHashSizeError=s;class i extends e.BaseError{constructor({hash:a,version:c}){super(`Versioned hash "${a}" version is invalid.`,{metaMessages:[`Expected: ${t.versionedHashVersionKzg}`,`Received: ${c}`],name:"InvalidVersionedHashVersionError"})}}return lu.InvalidVersionedHashVersionError=i,lu}var hH;function Nse(){if(hH)return RA;hH=1,Object.defineProperty(RA,"__esModule",{value:!0}),RA.toBlobs=o;const t=RUe(),e=Tse(),r=o_(),n=Ta(),s=Pn(),i=tt();function o(a){const c=a.to??(typeof a.data=="string"?"hex":"bytes"),u=typeof a.data=="string"?(0,s.hexToBytes)(a.data):a.data,l=(0,n.size)(u);if(!l)throw new e.EmptyBlobError;if(l>t.maxBytesPerTransaction)throw new e.BlobSizeTooLargeError({maxSize:t.maxBytesPerTransaction,size:l});const d=[];let f=!0,p=0;for(;f;){const g=(0,r.createCursor)(new Uint8Array(t.bytesPerBlob));let h=0;for(;h<t.fieldElementsPerBlob;){const y=u.slice(p,p+(t.bytesPerFieldElement-1));if(g.pushByte(0),g.pushBytes(y),y.length<31){g.pushByte(128),f=!1;break}h++,p+=31}d.push(g)}return c==="bytes"?d.map(g=>g.bytes):d.map(g=>(0,i.bytesToHex)(g.bytes))}return RA}var pH;function L5(){if(pH)return PA;pH=1,Object.defineProperty(PA,"__esModule",{value:!0}),PA.toBlobSidecars=n;const t=D5(),e=j5(),r=Nse();function n(s){const{data:i,kzg:o,to:a}=s,c=s.blobs??(0,r.toBlobs)({data:i,to:a}),u=s.commitments??(0,t.blobsToCommitments)({blobs:c,kzg:o,to:a}),l=s.proofs??(0,e.blobsToProofs)({blobs:c,commitments:u,kzg:o,to:a}),d=[];for(let f=0;f<c.length;f++)d.push({blob:c[f],commitment:u[f],proof:l[f]});return d}return PA}var OA={},gH;function F5(){if(gH)return OA;gH=1,Object.defineProperty(OA,"__esModule",{value:!0}),OA.getTransactionType=e;const t=Oa();function e(r){if(r.type)return r.type;if(typeof r.authorizationList<"u")return"eip7702";if(typeof r.blobs<"u"||typeof r.blobVersionedHashes<"u"||typeof r.maxFeePerBlobGas<"u"||typeof r.sidecars<"u")return"eip4844";if(typeof r.maxFeePerGas<"u"||typeof r.maxPriorityFeePerGas<"u")return"eip1559";if(typeof r.gasPrice<"u")return typeof r.accessList<"u"?"eip2930":"legacy";throw new t.InvalidSerializableTransactionError({transaction:r})}return OA}var kA={},BA={},mH;function p_(){if(mH)return BA;mH=1,Object.defineProperty(BA,"__esModule",{value:!0}),BA.getTransactionError=n;const t=hf(),e=Oa(),r=d_();function n(s,{docsPath:i,...o}){const a=(()=>{const c=(0,r.getNodeError)(s,o);return c instanceof t.UnknownNodeError?s:c})();return new e.TransactionExecutionError(a,{docsPath:i,...o})}return BA}var UA={},yH;function tp(){if(yH)return UA;yH=1,Object.defineProperty(UA,"__esModule",{value:!0}),UA.getChainId=e;const t=ys();async function e(r){const n=await r.request({method:"eth_chainId"},{dedupe:!0});return(0,t.hexToNumber)(n)}return UA}var bH;function UB(){if(bH)return kA;bH=1,Object.defineProperty(kA,"__esModule",{value:!0}),kA.fillTransaction=l;const t=is(),e=h_(),r=p_(),n=ep(),s=ab(),i=Ku(),o=kr(),a=Zu(),c=hg(),u=tp();async function l(d,f){const{account:p=d.account,accessList:g,authorizationList:h,chain:y=d.chain,blobVersionedHashes:E,blobs:S,data:C,gas:_,gasPrice:T,maxFeePerBlobGas:P,maxFeePerGas:D,maxPriorityFeePerGas:L,nonce:I,nonceManager:U,to:F,type:B,value:A,...m}=f,b=await(async()=>{if(!p||!U)return I;const k=(0,t.parseAccount)(p),j=y?y.id:await(0,o.getAction)(d,u.getChainId,"getChainId")({});return await U.consume({address:k.address,chainId:j,client:d})})();(0,a.assertRequest)(f);const w=y?.formatters?.transactionRequest?.format,M=(w||i.formatTransactionRequest)({...(0,n.extract)(m,{format:w}),account:p?(0,t.parseAccount)(p):void 0,accessList:g,authorizationList:h,blobs:S,blobVersionedHashes:E,data:C,gas:_,gasPrice:T,maxFeePerBlobGas:P,maxFeePerGas:D,maxPriorityFeePerGas:L,nonce:b,to:F,type:B,value:A},"fillTransaction");try{const k=await d.request({method:"eth_fillTransaction",params:[M]}),N=(y?.formatters?.transaction?.format||s.formatTransaction)(k.tx);delete N.blockHash,delete N.blockNumber,delete N.r,delete N.s,delete N.transactionIndex,delete N.v,delete N.yParity,N.data=N.input,N.gas&&(N.gas=f.gas??N.gas),N.gasPrice&&(N.gasPrice=f.gasPrice??N.gasPrice),N.maxFeePerBlobGas&&(N.maxFeePerBlobGas=f.maxFeePerBlobGas??N.maxFeePerBlobGas),N.maxFeePerGas&&(N.maxFeePerGas=f.maxFeePerGas??N.maxFeePerGas),N.maxPriorityFeePerGas&&(N.maxPriorityFeePerGas=f.maxPriorityFeePerGas??N.maxPriorityFeePerGas),N.nonce&&(N.nonce=f.nonce??N.nonce);const v=await(async()=>{if(typeof y?.fees?.baseFeeMultiplier=="function"){const H=await(0,o.getAction)(d,c.getBlock,"getBlock")({});return y.fees.baseFeeMultiplier({block:H,client:d,request:f})}return y?.fees?.baseFeeMultiplier??1.2})();if(v<1)throw new e.BaseFeeScalarError;const $=10**(v.toString().split(".")[1]?.length??0),O=H=>H*BigInt(Math.ceil(v*$))/BigInt($);return N.maxFeePerGas&&!f.maxFeePerGas&&(N.maxFeePerGas=O(N.maxFeePerGas)),N.gasPrice&&!f.gasPrice&&(N.gasPrice=O(N.gasPrice)),{raw:k.raw,transaction:{from:M.from,...N}}}catch(k){throw(0,r.getTransactionError)(k,{...f,chain:d.chain})}}return kA}var wH;function g_(){return wH||(wH=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.eip1559NetworkCache=t.defaultParameters=void 0,t.prepareTransactionRequest=S;const e=is(),r=Cse(),n=MB(),s=hg(),i=M5(),o=h_(),a=D5(),c=j5(),u=BB(),l=L5(),d=kr(),f=ag(),p=Zu(),g=F5(),h=UB(),y=tp();t.defaultParameters=["blobVersionedHashes","chainId","fees","gas","nonce","type"],t.eip1559NetworkCache=new Map;const E=new f.LruMap(128);async function S(C,_){const P=E.get(C.uid)!==!1&&["fees","gas"].some(v=>_.parameters?.includes(v))?await(0,d.getAction)(C,h.fillTransaction,"fillTransaction")(_).then(v=>{const{chainId:R,from:$,gas:O,gasPrice:H,nonce:W,maxFeePerBlobGas:G,maxFeePerGas:K,maxPriorityFeePerGas:Q,type:re}=v.transaction;return E.set(C.uid,!0),{..._,chainId:R,from:$,gas:O,gasPrice:H,nonce:W,maxFeePerBlobGas:G,maxFeePerGas:K,maxPriorityFeePerGas:Q,type:re}}).catch(v=>{const R=v;return(R.cause.name==="MethodNotFoundRpcError"||R.cause.name==="MethodNotSupportedRpcError")&&E.set(C.uid,!1),_}):_,{account:D=C.account,blobs:L,chain:I,gas:U,kzg:F,nonce:B,nonceManager:A,parameters:m=t.defaultParameters,type:b}=P,w=D&&(0,e.parseAccount)(D),x={...P,...w?{from:w?.address}:{}};let M;async function k(){return M||(M=await(0,d.getAction)(C,s.getBlock,"getBlock")({blockTag:"latest"}),M)}let j;async function N(){return j||(I?I.id:typeof x.chainId<"u"?x.chainId:(j=await(0,d.getAction)(C,y.getChainId,"getChainId")({}),j))}if(m.includes("nonce")&&typeof B>"u"&&w)if(A){const v=await N();x.nonce=await A.consume({address:w.address,chainId:v,client:C})}else x.nonce=await(0,d.getAction)(C,i.getTransactionCount,"getTransactionCount")({address:w.address,blockTag:"pending"});if((m.includes("blobVersionedHashes")||m.includes("sidecars"))&&L&&F){const v=(0,a.blobsToCommitments)({blobs:L,kzg:F});if(m.includes("blobVersionedHashes")){const R=(0,u.commitmentsToVersionedHashes)({commitments:v,to:"hex"});x.blobVersionedHashes=R}if(m.includes("sidecars")){const R=(0,c.blobsToProofs)({blobs:L,commitments:v,kzg:F}),$=(0,l.toBlobSidecars)({blobs:L,commitments:v,proofs:R,to:"hex"});x.sidecars=$}}if(m.includes("chainId")&&(x.chainId=await N()),(m.includes("fees")||m.includes("type"))&&typeof b>"u")try{x.type=(0,g.getTransactionType)(x)}catch{let v=t.eip1559NetworkCache.get(C.uid);typeof v>"u"&&(v=typeof(await k())?.baseFeePerGas=="bigint",t.eip1559NetworkCache.set(C.uid,v)),x.type=v?"eip1559":"legacy"}if(m.includes("fees"))if(x.type!=="legacy"&&x.type!=="eip2930"){if(typeof x.maxFeePerGas>"u"||typeof x.maxPriorityFeePerGas>"u"){const v=await k(),{maxFeePerGas:R,maxPriorityFeePerGas:$}=await(0,r.internal_estimateFeesPerGas)(C,{block:v,chain:I,request:x});if(typeof x.maxPriorityFeePerGas>"u"&&x.maxFeePerGas&&x.maxFeePerGas<$)throw new o.MaxFeePerGasTooLowError({maxPriorityFeePerGas:$});x.maxPriorityFeePerGas=$,x.maxFeePerGas=R}}else{if(typeof x.maxFeePerGas<"u"||typeof x.maxPriorityFeePerGas<"u")throw new o.Eip1559FeesNotSupportedError;if(typeof x.gasPrice>"u"){const v=await k(),{gasPrice:R}=await(0,r.internal_estimateFeesPerGas)(C,{block:v,chain:I,request:x,type:"legacy"});x.gasPrice=R}}return m.includes("gas")&&typeof U>"u"&&(x.gas=await(0,d.getAction)(C,n.estimateGas,"estimateGas")({...x,account:w,prepare:w?.type==="local"?[]:["blobVersionedHashes"]})),(0,p.assertRequest)(x),delete x.parameters,x}})(QP)),QP}var vH;function MB(){if(vH)return fA;vH=1,Object.defineProperty(fA,"__esModule",{value:!0}),fA.estimateGas=l;const t=is(),e=Kt(),r=l_(),n=tt(),s=Ase(),i=ep(),o=Ku(),a=TB(),c=Zu(),u=g_();async function l(d,f){const{account:p=d.account,prepare:g=!0}=f,h=p?(0,t.parseAccount)(p):void 0,y=(()=>{if(Array.isArray(g))return g;if(h?.type!=="local")return["blobVersionedHashes"]})();try{const{accessList:E,authorizationList:S,blobs:C,blobVersionedHashes:_,blockNumber:T,blockTag:P,data:D,gas:L,gasPrice:I,maxFeePerBlobGas:U,maxFeePerGas:F,maxPriorityFeePerGas:B,nonce:A,value:m,stateOverride:b,...w}=g?await(0,u.prepareTransactionRequest)(d,{...f,parameters:y}):f,M=(typeof T=="bigint"?(0,n.numberToHex)(T):void 0)||P,k=(0,a.serializeStateOverride)(b),j=await(async()=>{if(w.to)return w.to;if(S&&S.length>0)return await(0,r.recoverAuthorizationAddress)({authorization:S[0]}).catch(()=>{throw new e.BaseError("`to` is required. Could not infer from `authorizationList`")})})();(0,c.assertRequest)(f);const N=d.chain?.formatters?.transactionRequest?.format,R=(N||o.formatTransactionRequest)({...(0,i.extract)(w,{format:N}),account:h,accessList:E,authorizationList:S,blobs:C,blobVersionedHashes:_,data:D,gas:L,gasPrice:I,maxFeePerBlobGas:U,maxFeePerGas:F,maxPriorityFeePerGas:B,nonce:A,to:j,value:m},"estimateGas");return BigInt(await d.request({method:"eth_estimateGas",params:k?[R,M??d.experimental_blockTag??"latest",k]:M?[R,M]:[R]}))}catch(E){throw(0,s.getEstimateGasError)(E,{...f,account:h,chain:d.chain})}}return fA}var EH;function Pse(){if(EH)return eA;EH=1,Object.defineProperty(eA,"__esModule",{value:!0}),eA.estimateContractGas=i;const t=is(),e=Ra(),r=Xh(),n=kr(),s=MB();async function i(o,a){const{abi:c,address:u,args:l,functionName:d,dataSuffix:f,...p}=a,g=(0,e.encodeFunctionData)({abi:c,args:l,functionName:d});try{return await(0,n.getAction)(o,s.estimateGas,"estimateGas")({data:`${g}${f?f.replace("0x",""):""}`,to:u,...p})}catch(h){const y=p.account?(0,t.parseAccount)(p.account):void 0;throw(0,r.getContractError)(h,{abi:c,address:u,args:l,docsPath:"/docs/contract/estimateContractGas",functionName:d,sender:y?.address})}}return eA}var MA={},DA={},jA={},LA={},_H;function Yu(){if(_H)return LA;_H=1,Object.defineProperty(LA,"__esModule",{value:!0}),LA.isAddressEqual=r;const t=Wu(),e=Pa();function r(n,s){if(!(0,e.isAddress)(n,{strict:!1}))throw new t.InvalidAddressError({address:n});if(!(0,e.isAddress)(s,{strict:!1}))throw new t.InvalidAddressError({address:s});return n.toLowerCase()===s.toLowerCase()}return LA}var FA={},AH;function m_(){if(AH)return FA;AH=1,Object.defineProperty(FA,"__esModule",{value:!0}),FA.decodeEventLog=a;const t=Jn(),e=gse(),r=Ta(),n=ob(),s=Zh(),i=lf(),o="/docs/contract/decodeEventLog";function a(u){const{abi:l,data:d,strict:f,topics:p}=u,g=f??!0,[h,...y]=p;if(!h)throw new t.AbiEventSignatureEmptyTopicsError({docsPath:o});const E=l.find(L=>L.type==="event"&&h===(0,n.toEventSelector)((0,i.formatAbiItem)(L)));if(!(E&&"name"in E)||E.type!=="event")throw new t.AbiEventSignatureNotFoundError(h,{docsPath:o});const{name:S,inputs:C}=E,_=C?.some(L=>!("name"in L&&L.name)),T=_?[]:{},P=C.map((L,I)=>[L,I]).filter(([L])=>"indexed"in L&&L.indexed);for(let L=0;L<P.length;L++){const[I,U]=P[L],F=y[L];if(!F)throw new t.DecodeLogTopicsMismatch({abiItem:E,param:I});T[_?U:I.name||U]=c({param:I,value:F})}const D=C.filter(L=>!("indexed"in L&&L.indexed));if(D.length>0){if(d&&d!=="0x")try{const L=(0,s.decodeAbiParameters)(D,d);if(L)if(_)for(let I=0;I<C.length;I++)T[I]=T[I]??L.shift();else for(let I=0;I<D.length;I++)T[D[I].name]=L[I]}catch(L){if(g)throw L instanceof t.AbiDecodingDataSizeTooSmallError||L instanceof e.PositionOutOfBoundsError?new t.DecodeLogDataMismatch({abiItem:E,data:d,params:D,size:(0,r.size)(d)}):L}else if(g)throw new t.DecodeLogDataMismatch({abiItem:E,data:"0x",params:D,size:0})}return{eventName:S,args:Object.values(T).length>0?T:void 0}}function c({param:u,value:l}){return u.type==="string"||u.type==="bytes"||u.type==="tuple"||u.type.match(/^(.*)\[(\d+)?\]$/)?l:((0,s.decodeAbiParameters)([u],l)||[])[0]}return FA}var xH;function y_(){if(xH)return jA;xH=1,Object.defineProperty(jA,"__esModule",{value:!0}),jA.parseEventLogs=o;const t=Jn(),e=Yu(),r=Pn(),n=Na(),s=ob(),i=m_();function o(c){const{abi:u,args:l,logs:d,strict:f=!0}=c,p=(()=>{if(c.eventName)return Array.isArray(c.eventName)?c.eventName:[c.eventName]})();return d.map(g=>{try{const h=u.find(E=>E.type==="event"&&g.topics[0]===(0,s.toEventSelector)(E));if(!h)return null;const y=(0,i.decodeEventLog)({...g,abi:[h],strict:f});return p&&!p.includes(y.eventName)||!a({args:y.args,inputs:h.inputs,matchArgs:l})?null:{...y,...g}}catch(h){let y,E;if(h instanceof t.AbiEventSignatureNotFoundError)return null;if(h instanceof t.DecodeLogDataMismatch||h instanceof t.DecodeLogTopicsMismatch){if(f)return null;y=h.abiItem.name,E=h.abiItem.inputs?.some(S=>!("name"in S&&S.name))}return{...g,args:E?[]:{},eventName:y}}}).filter(Boolean)}function a(c){const{args:u,inputs:l,matchArgs:d}=c;if(!d)return!0;if(!u)return!1;function f(p,g,h){try{return p.type==="address"?(0,e.isAddressEqual)(g,h):p.type==="string"||p.type==="bytes"?(0,n.keccak256)((0,r.toBytes)(g))===h:g===h}catch{return!1}}return Array.isArray(u)&&Array.isArray(d)?d.every((p,g)=>{if(p==null)return!0;const h=l[g];return h?(Array.isArray(p)?p:[p]).some(E=>f(h,E,u[g])):!1}):typeof u=="object"&&!Array.isArray(u)&&typeof d=="object"&&!Array.isArray(d)?Object.entries(d).every(([p,g])=>{if(g==null)return!0;const h=l.find(E=>E.name===p);return h?(Array.isArray(g)?g:[g]).some(E=>f(h,E,u[p])):!1}):!1}return jA}var $A={},CH;function pf(){if(CH)return $A;CH=1,Object.defineProperty($A,"__esModule",{value:!0}),$A.formatLog=t;function t(e,{args:r,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:r,eventName:n}:{}}}return $A}var SH;function DB(){if(SH)return DA;SH=1,Object.defineProperty(DA,"__esModule",{value:!0}),DA.getLogs=s;const t=ug(),e=y_(),r=tt(),n=pf();async function s(i,{address:o,blockHash:a,fromBlock:c,toBlock:u,event:l,events:d,args:f,strict:p}={}){const g=p??!1,h=d??(l?[l]:void 0);let y=[];h&&(y=[h.flatMap(_=>(0,t.encodeEventTopics)({abi:[_],eventName:_.name,args:d?void 0:f}))],l&&(y=y[0]));let E;a?E=await i.request({method:"eth_getLogs",params:[{address:o,topics:y,blockHash:a}]}):E=await i.request({method:"eth_getLogs",params:[{address:o,topics:y,fromBlock:typeof c=="bigint"?(0,r.numberToHex)(c):c,toBlock:typeof u=="bigint"?(0,r.numberToHex)(u):u}]});const S=E.map(C=>(0,n.formatLog)(C));return h?(0,e.parseEventLogs)({abi:h,args:f,logs:S,strict:g}):S}return DA}var IH;function jB(){if(IH)return MA;IH=1,Object.defineProperty(MA,"__esModule",{value:!0}),MA.getContractEvents=n;const t=ff(),e=kr(),r=DB();async function n(s,i){const{abi:o,address:a,args:c,blockHash:u,eventName:l,fromBlock:d,toBlock:f,strict:p}=i,g=l?(0,t.getAbiItem)({abi:o,name:l}):void 0,h=g?void 0:o.filter(y=>y.type==="event");return(0,e.getAction)(s,r.getLogs,"getLogs")({address:a,args:c,blockHash:u,event:g,events:h,fromBlock:d,toBlock:f,strict:p})}return MA}var qA={},HA={},TH;function gf(){if(TH)return HA;TH=1,Object.defineProperty(HA,"__esModule",{value:!0}),HA.decodeFunctionResult=s;const t=Jn(),e=Zh(),r=ff(),n="/docs/contract/decodeFunctionResult";function s(i){const{abi:o,args:a,functionName:c,data:u}=i;let l=o[0];if(c){const f=(0,r.getAbiItem)({abi:o,args:a,name:c});if(!f)throw new t.AbiFunctionNotFoundError(c,{docsPath:n});l=f}if(l.type!=="function")throw new t.AbiFunctionNotFoundError(void 0,{docsPath:n});if(!l.outputs)throw new t.AbiFunctionOutputsNotFoundError(l.name,{docsPath:n});const d=(0,e.decodeAbiParameters)(l.outputs,u);if(d&&d.length>1)return d;if(d&&d.length===1)return d[0]}return HA}var Bw={},Uw={},Qt={},pr={},Mw={},Yg={},Dw={},NH;function OUe(){return NH||(NH=1,Object.defineProperty(Dw,"__esModule",{value:!0}),Dw.version=void 0,Dw.version="0.1.1"),Dw}var PH;function kUe(){if(PH)return Yg;PH=1,Object.defineProperty(Yg,"__esModule",{value:!0}),Yg.getUrl=e,Yg.getVersion=r,Yg.prettyPrint=n;const t=OUe();function e(s){return s}function r(){return t.version}function n(s){if(!s)return"";const i=Object.entries(s).map(([a,c])=>c===void 0||c===!1?null:[a,c]).filter(Boolean),o=i.reduce((a,[c])=>Math.max(a,c.length),0);return i.map(([a,c])=>`  ${`${a}:`.padEnd(o+1)}  ${c}`).join(`
`)}return Yg}var RH;function gc(){if(RH)return Mw;RH=1,Object.defineProperty(Mw,"__esModule",{value:!0}),Mw.BaseError=void 0;const t=kUe();class e extends Error{constructor(s,i={}){const o=(()=>{if(i.cause instanceof e){if(i.cause.details)return i.cause.details;if(i.cause.shortMessage)return i.cause.shortMessage}return i.cause&&"details"in i.cause&&typeof i.cause.details=="string"?i.cause.details:i.cause?.message?i.cause.message:i.details})(),a=i.cause instanceof e&&i.cause.docsPath||i.docsPath,u=`https://oxlib.sh${a??""}`,l=[s||"An error occurred.",...i.metaMessages?["",...i.metaMessages]:[],...o||a?["",o?`Details: ${o}`:void 0,a?`See: ${u}`:void 0]:[]].filter(d=>typeof d=="string").join(`
`);super(l,i.cause?{cause:i.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${(0,t.getVersion)()}`}),this.cause=i.cause,this.details=o,this.docs=u,this.docsPath=a,this.shortMessage=s}walk(s){return r(this,s)}}Mw.BaseError=e;function r(n,s){return s?.(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause?r(n.cause,s):s?null:n}return Mw}var rR={},OH;function Rse(){return OH||(OH=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.charCodeMap=void 0,t.assertSize=r,t.assertStartOffset=n,t.assertEndOffset=s,t.charCodeToBase16=i,t.pad=o,t.trim=a;const e=Gl();function r(c,u){if(e.size(c)>u)throw new e.SizeOverflowError({givenSize:e.size(c),maxSize:u})}function n(c,u){if(typeof u=="number"&&u>0&&u>e.size(c)-1)throw new e.SliceOffsetOutOfBoundsError({offset:u,position:"start",size:e.size(c)})}function s(c,u,l){if(typeof u=="number"&&typeof l=="number"&&e.size(c)!==l-u)throw new e.SliceOffsetOutOfBoundsError({offset:l,position:"end",size:e.size(c)})}t.charCodeMap={zero:48,nine:57,A:65,F:70,a:97,f:102};function i(c){if(c>=t.charCodeMap.zero&&c<=t.charCodeMap.nine)return c-t.charCodeMap.zero;if(c>=t.charCodeMap.A&&c<=t.charCodeMap.F)return c-(t.charCodeMap.A-10);if(c>=t.charCodeMap.a&&c<=t.charCodeMap.f)return c-(t.charCodeMap.a-10)}function o(c,u={}){const{dir:l,size:d=32}=u;if(d===0)return c;if(c.length>d)throw new e.SizeExceedsPaddingSizeError({size:c.length,targetSize:d,type:"Bytes"});const f=new Uint8Array(d);for(let p=0;p<d;p++){const g=l==="right";f[g?p:d-p-1]=c[g?p:c.length-p-1]}return f}function a(c,u={}){const{dir:l="left"}=u;let d=c,f=0;for(let p=0;p<d.length-1&&d[l==="left"?p:d.length-p-1].toString()==="0";p++)f++;return d=l==="left"?d.slice(f):d.slice(0,d.length-f),d}})(rR)),rR}var qf={},kH;function Ose(){if(kH)return qf;kH=1,Object.defineProperty(qf,"__esModule",{value:!0}),qf.assertSize=e,qf.assertStartOffset=r,qf.assertEndOffset=n,qf.pad=s,qf.trim=i;const t=$i();function e(o,a){if(t.size(o)>a)throw new t.SizeOverflowError({givenSize:t.size(o),maxSize:a})}function r(o,a){if(typeof a=="number"&&a>0&&a>t.size(o)-1)throw new t.SliceOffsetOutOfBoundsError({offset:a,position:"start",size:t.size(o)})}function n(o,a,c){if(typeof a=="number"&&typeof c=="number"&&t.size(o)!==c-a)throw new t.SliceOffsetOutOfBoundsError({offset:c,position:"end",size:t.size(o)})}function s(o,a={}){const{dir:c,size:u=32}=a;if(u===0)return o;const l=o.replace("0x","");if(l.length>u*2)throw new t.SizeExceedsPaddingSizeError({size:Math.ceil(l.length/2),targetSize:u,type:"Hex"});return`0x${l[c==="right"?"padEnd":"padStart"](u*2,"0")}`}function i(o,a={}){const{dir:c="left"}=a;let u=o.replace("0x",""),l=0;for(let d=0;d<u.length-1&&u[c==="left"?d:u.length-d-1].toString()==="0";d++)l++;return u=c==="left"?u.slice(l):u.slice(0,u.length-l),u==="0"?"0x":c==="right"&&u.length%2===1?`0x${u}0`:`0x${u}`}return qf}var jw={},BH;function $5(){if(BH)return jw;BH=1,Object.defineProperty(jw,"__esModule",{value:!0}),jw.parse=e,jw.stringify=r;const t="#__bigint";function e(n,s){return JSON.parse(n,(i,o)=>{const a=o;return typeof a=="string"&&a.endsWith(t)?BigInt(a.slice(0,-t.length)):typeof s=="function"?s(i,a):a})}function r(n,s,i){return JSON.stringify(n,(o,a)=>typeof s=="function"?s(o,a):typeof a=="bigint"?a.toString()+t:a,i)}return jw}var UH;function Gl(){if(UH)return pr;UH=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.SizeExceedsPaddingSizeError=pr.SliceOffsetOutOfBoundsError=pr.SizeOverflowError=pr.InvalidBytesTypeError=pr.InvalidBytesBooleanError=void 0,pr.assert=c,pr.concat=u,pr.from=l,pr.fromArray=d,pr.fromBoolean=f,pr.fromHex=p,pr.fromNumber=g,pr.fromString=h,pr.isEqual=y,pr.padLeft=E,pr.padRight=S,pr.random=C,pr.size=_,pr.slice=T,pr.toBigInt=P,pr.toBoolean=D,pr.toHex=L,pr.toNumber=I,pr.toString=U,pr.trimLeft=F,pr.trimRight=B,pr.validate=A;const t=dg(),e=gc(),r=$i(),n=Rse(),s=Ose(),i=$5(),o=new TextDecoder,a=new TextEncoder;function c(k){if(!(k instanceof Uint8Array)){if(!k)throw new b(k);if(typeof k!="object")throw new b(k);if(!("BYTES_PER_ELEMENT"in k))throw new b(k);if(k.BYTES_PER_ELEMENT!==1||k.constructor.name!=="Uint8Array")throw new b(k)}}function u(...k){let j=0;for(const v of k)j+=v.length;const N=new Uint8Array(j);for(let v=0,R=0;v<k.length;v++){const $=k[v];N.set($,R),R+=$.length}return N}function l(k){return k instanceof Uint8Array?k:typeof k=="string"?p(k):d(k)}function d(k){return k instanceof Uint8Array?k:new Uint8Array(k)}function f(k,j={}){const{size:N}=j,v=new Uint8Array(1);return v[0]=Number(k),typeof N=="number"?(n.assertSize(v,N),E(v,N)):v}function p(k,j={}){const{size:N}=j;let v=k;N&&(s.assertSize(k,N),v=r.padRight(k,N));let R=v.slice(2);R.length%2&&(R=`0${R}`);const $=R.length/2,O=new Uint8Array($);for(let H=0,W=0;H<$;H++){const G=n.charCodeToBase16(R.charCodeAt(W++)),K=n.charCodeToBase16(R.charCodeAt(W++));if(G===void 0||K===void 0)throw new e.BaseError(`Invalid byte sequence ("${R[W-2]}${R[W-1]}" in "${R}").`);O[H]=G*16+K}return O}function g(k,j){const N=r.fromNumber(k,j);return p(N)}function h(k,j={}){const{size:N}=j,v=a.encode(k);return typeof N=="number"?(n.assertSize(v,N),S(v,N)):v}function y(k,j){return(0,t.equalBytes)(k,j)}function E(k,j){return n.pad(k,{dir:"left",size:j})}function S(k,j){return n.pad(k,{dir:"right",size:j})}function C(k){return crypto.getRandomValues(new Uint8Array(k))}function _(k){return k.length}function T(k,j,N,v={}){const{strict:R}=v;n.assertStartOffset(k,j);const $=k.slice(j,N);return R&&n.assertEndOffset($,j,N),$}function P(k,j={}){const{size:N}=j;typeof N<"u"&&n.assertSize(k,N);const v=r.fromBytes(k,j);return r.toBigInt(v,j)}function D(k,j={}){const{size:N}=j;let v=k;if(typeof N<"u"&&(n.assertSize(v,N),v=F(v)),v.length>1||v[0]>1)throw new m(v);return!!v[0]}function L(k,j={}){return r.fromBytes(k,j)}function I(k,j={}){const{size:N}=j;typeof N<"u"&&n.assertSize(k,N);const v=r.fromBytes(k,j);return r.toNumber(v,j)}function U(k,j={}){const{size:N}=j;let v=k;return typeof N<"u"&&(n.assertSize(v,N),v=B(v)),o.decode(v)}function F(k){return n.trim(k,{dir:"left"})}function B(k){return n.trim(k,{dir:"right"})}function A(k){try{return c(k),!0}catch{return!1}}class m extends e.BaseError{constructor(j){super(`Bytes value \`${j}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}pr.InvalidBytesBooleanError=m;class b extends e.BaseError{constructor(j){super(`Value \`${typeof j=="object"?i.stringify(j):j}\` of type \`${typeof j}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}pr.InvalidBytesTypeError=b;class w extends e.BaseError{constructor({givenSize:j,maxSize:N}){super(`Size cannot exceed \`${N}\` bytes. Given size: \`${j}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}pr.SizeOverflowError=w;class x extends e.BaseError{constructor({offset:j,position:N,size:v}){super(`Slice ${N==="start"?"starting":"ending"} at offset \`${j}\` is out-of-bounds (size: \`${v}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}pr.SliceOffsetOutOfBoundsError=x;class M extends e.BaseError{constructor({size:j,targetSize:N,type:v}){super(`${v.charAt(0).toUpperCase()}${v.slice(1).toLowerCase()} size (\`${j}\`) exceeds padding size (\`${N}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}return pr.SizeExceedsPaddingSizeError=M,pr}var MH;function $i(){if(MH)return Qt;MH=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.SizeExceedsPaddingSizeError=Qt.SliceOffsetOutOfBoundsError=Qt.SizeOverflowError=Qt.InvalidLengthError=Qt.InvalidHexValueError=Qt.InvalidHexTypeError=Qt.InvalidHexBooleanError=Qt.IntegerOutOfRangeError=void 0,Qt.assert=c,Qt.concat=u,Qt.from=l,Qt.fromBoolean=d,Qt.fromBytes=f,Qt.fromNumber=p,Qt.fromString=g,Qt.isEqual=h,Qt.padLeft=y,Qt.padRight=E,Qt.random=S,Qt.slice=C,Qt.size=_,Qt.trimLeft=T,Qt.trimRight=P,Qt.toBigInt=D,Qt.toBoolean=L,Qt.toBytes=I,Qt.toNumber=U,Qt.toString=F,Qt.validate=B;const t=dg(),e=Gl(),r=gc(),n=Rse(),s=Ose(),i=$5(),o=new TextEncoder,a=Array.from({length:256},(N,v)=>v.toString(16).padStart(2,"0"));function c(N,v={}){const{strict:R=!1}=v;if(!N)throw new b(N);if(typeof N!="string")throw new b(N);if(R&&!/^0x[0-9a-fA-F]*$/.test(N))throw new w(N);if(!N.startsWith("0x"))throw new w(N)}function u(...N){return`0x${N.reduce((v,R)=>v+R.replace("0x",""),"")}`}function l(N){return N instanceof Uint8Array?f(N):Array.isArray(N)?f(new Uint8Array(N)):N}function d(N,v={}){const R=`0x${Number(N)}`;return typeof v.size=="number"?(s.assertSize(R,v.size),y(R,v.size)):R}function f(N,v={}){let R="";for(let O=0;O<N.length;O++)R+=a[N[O]];const $=`0x${R}`;return typeof v.size=="number"?(s.assertSize($,v.size),E($,v.size)):$}function p(N,v={}){const{signed:R,size:$}=v,O=BigInt(N);let H;$?R?H=(1n<<BigInt($)*8n-1n)-1n:H=2n**(BigInt($)*8n)-1n:typeof N=="number"&&(H=BigInt(Number.MAX_SAFE_INTEGER));const W=typeof H=="bigint"&&R?-H-1n:0;if(H&&O>H||O<W){const Q=typeof N=="bigint"?"n":"";throw new A({max:H?`${H}${Q}`:void 0,min:`${W}${Q}`,signed:R,size:$,value:`${N}${Q}`})}const K=`0x${(R&&O<0?(1n<<BigInt($*8))+BigInt(O):O).toString(16)}`;return $?y(K,$):K}function g(N,v={}){return f(o.encode(N),v)}function h(N,v){return(0,t.equalBytes)(e.fromHex(N),e.fromHex(v))}function y(N,v){return s.pad(N,{dir:"left",size:v})}function E(N,v){return s.pad(N,{dir:"right",size:v})}function S(N){return f(e.random(N))}function C(N,v,R,$={}){const{strict:O}=$;s.assertStartOffset(N,v);const H=`0x${N.replace("0x","").slice((v??0)*2,(R??N.length)*2)}`;return O&&s.assertEndOffset(H,v,R),H}function _(N){return Math.ceil((N.length-2)/2)}function T(N){return s.trim(N,{dir:"left"})}function P(N){return s.trim(N,{dir:"right"})}function D(N,v={}){const{signed:R}=v;v.size&&s.assertSize(N,v.size);const $=BigInt(N);if(!R)return $;const O=(N.length-2)/2,H=(1n<<BigInt(O)*8n)-1n,W=H>>1n;return $<=W?$:$-H-1n}function L(N,v={}){v.size&&s.assertSize(N,v.size);const R=T(N);if(R==="0x")return!1;if(R==="0x1")return!0;throw new m(N)}function I(N,v={}){return e.fromHex(N,v)}function U(N,v={}){const{signed:R,size:$}=v;return Number(!R&&!$?N:D(N,v))}function F(N,v={}){const{size:R}=v;let $=e.fromHex(N);return R&&(n.assertSize($,R),$=e.trimRight($)),new TextDecoder().decode($)}function B(N,v={}){const{strict:R=!1}=v;try{return c(N,{strict:R}),!0}catch{return!1}}class A extends r.BaseError{constructor({max:v,min:R,signed:$,size:O,value:H}){super(`Number \`${H}\` is not in safe${O?` ${O*8}-bit`:""}${$?" signed":" unsigned"} integer range ${v?`(\`${R}\` to \`${v}\`)`:`(above \`${R}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}Qt.IntegerOutOfRangeError=A;class m extends r.BaseError{constructor(v){super(`Hex value \`"${v}"\` is not a valid boolean.`,{metaMessages:['The hex value must be `"0x0"` (false) or `"0x1"` (true).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexBooleanError"})}}Qt.InvalidHexBooleanError=m;class b extends r.BaseError{constructor(v){super(`Value \`${typeof v=="object"?i.stringify(v):v}\` of type \`${typeof v}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}Qt.InvalidHexTypeError=b;class w extends r.BaseError{constructor(v){super(`Value \`${v}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}Qt.InvalidHexValueError=w;class x extends r.BaseError{constructor(v){super(`Hex value \`"${v}"\` is an odd length (${v.length-2} nibbles).`,{metaMessages:["It must be an even length."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidLengthError"})}}Qt.InvalidLengthError=x;class M extends r.BaseError{constructor({givenSize:v,maxSize:R}){super(`Size cannot exceed \`${R}\` bytes. Given size: \`${v}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}Qt.SizeOverflowError=M;class k extends r.BaseError{constructor({offset:v,position:R,size:$}){super(`Slice ${R==="start"?"starting":"ending"} at offset \`${v}\` is out-of-bounds (size: \`${$}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}Qt.SliceOffsetOutOfBoundsError=k;class j extends r.BaseError{constructor({size:v,targetSize:R,type:$}){super(`${$.charAt(0).toUpperCase()}${$.slice(1).toLowerCase()} size (\`${v}\`) exceeds padding size (\`${R}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}return Qt.SizeExceedsPaddingSizeError=j,Qt}var Lw={},DH;function BUe(){if(DH)return Lw;DH=1,Object.defineProperty(Lw,"__esModule",{value:!0}),Lw.fromRpc=e,Lw.toRpc=r;const t=$i();function e(n){return{...n,amount:BigInt(n.amount),index:Number(n.index),validatorIndex:Number(n.validatorIndex)}}function r(n){return{address:n.address,amount:t.fromNumber(n.amount),index:t.fromNumber(n.index),validatorIndex:t.fromNumber(n.validatorIndex)}}return Lw}var jH;function kse(){if(jH)return Uw;jH=1,Object.defineProperty(Uw,"__esModule",{value:!0}),Uw.fromRpc=r,Uw.toRpc=n;const t=$i(),e=BUe();function r(s){return{...s.baseFeePerGas&&{baseFeePerGas:BigInt(s.baseFeePerGas)},...s.blobBaseFee&&{blobBaseFee:BigInt(s.blobBaseFee)},...s.feeRecipient&&{feeRecipient:s.feeRecipient},...s.gasLimit&&{gasLimit:BigInt(s.gasLimit)},...s.number&&{number:BigInt(s.number)},...s.prevRandao&&{prevRandao:BigInt(s.prevRandao)},...s.time&&{time:BigInt(s.time)},...s.withdrawals&&{withdrawals:s.withdrawals.map(e.fromRpc)}}}function n(s){return{...typeof s.baseFeePerGas=="bigint"&&{baseFeePerGas:t.fromNumber(s.baseFeePerGas)},...typeof s.blobBaseFee=="bigint"&&{blobBaseFee:t.fromNumber(s.blobBaseFee)},...typeof s.feeRecipient=="string"&&{feeRecipient:s.feeRecipient},...typeof s.gasLimit=="bigint"&&{gasLimit:t.fromNumber(s.gasLimit)},...typeof s.number=="bigint"&&{number:t.fromNumber(s.number)},...typeof s.prevRandao=="bigint"&&{prevRandao:t.fromNumber(s.prevRandao)},...typeof s.time=="bigint"&&{time:t.fromNumber(s.time)},...s.withdrawals&&{withdrawals:s.withdrawals.map(e.toRpc)}}}return Uw}var hn={},LH;function rp(){if(LH)return hn;LH=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.erc4626Abi=hn.erc721Abi=hn.erc1155Abi=hn.erc20Abi_bytes32=hn.erc20Abi=hn.erc6492SignatureValidatorAbi=hn.erc1271Abi=hn.addressResolverAbi=hn.textResolverAbi=hn.universalResolverReverseAbi=hn.universalResolverResolveAbi=hn.batchGatewayAbi=hn.multicall3Abi=void 0,hn.multicall3Abi=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],hn.batchGatewayAbi=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}];const t=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}];return hn.universalResolverResolveAbi=[...t,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],hn.universalResolverReverseAbi=[...t,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],hn.textResolverAbi=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],hn.addressResolverAbi=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],hn.erc1271Abi=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],hn.erc6492SignatureValidatorAbi=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],hn.erc20Abi=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],hn.erc20Abi_bytes32=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"bytes32"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"bytes32"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],hn.erc1155Abi=[{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC1155InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC1155InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"idsLength",type:"uint256"},{internalType:"uint256",name:"valuesLength",type:"uint256"}],name:"ERC1155InvalidArrayLength",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC1155InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC1155InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC1155InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC1155MissingApprovalForAll",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],hn.erc721Abi=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"event",name:"ApprovalForAll",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"operator",type:"address"},{indexed:!1,name:"approved",type:"bool"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"payable",inputs:[{name:"spender",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"getApproved",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"address"}]},{type:"function",name:"isApprovedForAll",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"operator",type:"address"}],outputs:[{type:"bool"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"ownerOf",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"owner",type:"address"}]},{type:"function",name:"safeTransferFrom",stateMutability:"payable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"safeTransferFrom",stateMutability:"nonpayable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"id",type:"uint256"},{name:"data",type:"bytes"}],outputs:[]},{type:"function",name:"setApprovalForAll",stateMutability:"nonpayable",inputs:[{name:"operator",type:"address"},{name:"approved",type:"bool"}],outputs:[]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"index",type:"uint256"}],outputs:[{type:"uint256"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"index",type:"uint256"}],outputs:[{name:"tokenId",type:"uint256"}]},{type:"function",name:"tokenURI",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transferFrom",stateMutability:"payable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]}],hn.erc4626Abi=[{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"receiver",type:"address"},{indexed:!1,name:"assets",type:"uint256"},{indexed:!1,name:"shares",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"receiver",type:"address"},{indexed:!0,name:"owner",type:"address"},{indexed:!1,name:"assets",type:"uint256"},{indexed:!1,name:"shares",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],name:"approve",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"asset",outputs:[{name:"assetTokenAddress",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"convertToAssets",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"convertToShares",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"},{name:"receiver",type:"address"}],name:"deposit",outputs:[{name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"caller",type:"address"}],name:"maxDeposit",outputs:[{name:"maxAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"caller",type:"address"}],name:"maxMint",outputs:[{name:"maxShares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"maxRedeem",outputs:[{name:"maxShares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"maxWithdraw",outputs:[{name:"maxAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"},{name:"receiver",type:"address"}],name:"mint",outputs:[{name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"previewDeposit",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"previewMint",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"previewRedeem",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"previewWithdraw",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"},{name:"receiver",type:"address"},{name:"owner",type:"address"}],name:"redeem",outputs:[{name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalAssets",outputs:[{name:"totalManagedAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"transfer",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"assets",type:"uint256"},{name:"receiver",type:"address"},{name:"owner",type:"address"}],name:"withdraw",outputs:[{name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],hn}var Fw={},FH;function UUe(){return FH||(FH=1,Object.defineProperty(Fw,"__esModule",{value:!0}),Fw.aggregate3Signature=void 0,Fw.aggregate3Signature="0x82ad56cb"),Fw}var du={},$H;function b_(){return $H||($H=1,Object.defineProperty(du,"__esModule",{value:!0}),du.multicall3Bytecode=du.erc6492SignatureValidatorByteCode=du.deploylessCallViaFactoryBytecode=du.deploylessCallViaBytecodeBytecode=void 0,du.deploylessCallViaBytecodeBytecode="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",du.deploylessCallViaFactoryBytecode="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",du.erc6492SignatureValidatorByteCode="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",du.multicall3Bytecode="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033"),du}var Fa={},qH;function w_(){if(qH)return Fa;qH=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.InvalidChainIdError=Fa.ClientChainNotConfiguredError=Fa.ChainNotFoundError=Fa.ChainMismatchError=Fa.ChainDoesNotSupportContract=void 0;const t=Kt();class e extends t.BaseError{constructor({blockNumber:a,chain:c,contract:u}){super(`Chain "${c.name}" does not support contract "${u.name}".`,{metaMessages:["This could be due to any of the following:",...a&&u.blockCreated&&u.blockCreated>a?[`- The contract "${u.name}" was not deployed until block ${u.blockCreated} (current block ${a}).`]:[`- The chain does not have the contract "${u.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}Fa.ChainDoesNotSupportContract=e;class r extends t.BaseError{constructor({chain:a,currentChainId:c}){super(`The current chain of the wallet (id: ${c}) does not match the target chain for the transaction (id: ${a.id} â€“ ${a.name}).`,{metaMessages:[`Current Chain ID:  ${c}`,`Expected Chain ID: ${a.id} â€“ ${a.name}`],name:"ChainMismatchError"})}}Fa.ChainMismatchError=r;class n extends t.BaseError{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}Fa.ChainNotFoundError=n;class s extends t.BaseError{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}Fa.ClientChainNotConfiguredError=s;class i extends t.BaseError{constructor({chainId:a}){super(typeof a=="number"?`Chain ID "${a}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}return Fa.InvalidChainIdError=i,Fa}var zA={},HH;function v_(){if(HH)return zA;HH=1,Object.defineProperty(zA,"__esModule",{value:!0}),zA.encodeDeployData=s;const t=Jn(),e=hi(),r=Vu(),n="/docs/contract/encodeDeployData";function s(i){const{abi:o,args:a,bytecode:c}=i;if(!a||a.length===0)return c;const u=o.find(d=>"type"in d&&d.type==="constructor");if(!u)throw new t.AbiConstructorNotFoundError({docsPath:n});if(!("inputs"in u))throw new t.AbiConstructorParamsNotFoundError({docsPath:n});if(!u.inputs||u.inputs.length===0)throw new t.AbiConstructorParamsNotFoundError({docsPath:n});const l=(0,r.encodeAbiParameters)(u.inputs,a);return(0,e.concatHex)([c,l])}return zA}var WA={},zH;function np(){if(zH)return WA;zH=1,Object.defineProperty(WA,"__esModule",{value:!0}),WA.getChainContractAddress=e;const t=w_();function e({blockNumber:r,chain:n,contract:s}){const i=n?.contracts?.[s];if(!i)throw new t.ChainDoesNotSupportContract({chain:n,contract:{name:s}});if(r&&i.blockCreated&&i.blockCreated>r)throw new t.ChainDoesNotSupportContract({blockNumber:r,chain:n,contract:{name:s,blockCreated:i.blockCreated}});return i.address}return WA}var VA={},WH;function LB(){if(WH)return VA;WH=1,Object.defineProperty(VA,"__esModule",{value:!0}),VA.getCallError=n;const t=Yh(),e=hf(),r=d_();function n(s,{docsPath:i,...o}){const a=(()=>{const c=(0,r.getNodeError)(s,o);return c instanceof e.UnknownNodeError?s:c})();return new t.CallExecutionError(a,{docsPath:i,...o})}return VA}var GA={},KA={},VH;function FB(){if(VH)return KA;VH=1,Object.defineProperty(KA,"__esModule",{value:!0}),KA.withResolvers=t;function t(){let e=()=>{},r=()=>{};return{promise:new Promise((s,i)=>{e=s,r=i}),resolve:e,reject:r}}return KA}var GH;function $B(){if(GH)return GA;GH=1,Object.defineProperty(GA,"__esModule",{value:!0}),GA.createBatchScheduler=r;const t=FB(),e=new Map;function r({fn:n,id:s,shouldSplitBatch:i,wait:o=0,sort:a}){const c=async()=>{const p=d();u();const g=p.map(({args:h})=>h);g.length!==0&&n(g).then(h=>{a&&Array.isArray(h)&&h.sort(a);for(let y=0;y<p.length;y++){const{resolve:E}=p[y];E?.([h[y],h])}}).catch(h=>{for(let y=0;y<p.length;y++){const{reject:E}=p[y];E?.(h)}})},u=()=>e.delete(s),l=()=>d().map(({args:p})=>p),d=()=>e.get(s)||[],f=p=>e.set(s,[...d(),p]);return{flush:u,async schedule(p){const{promise:g,resolve:h,reject:y}=(0,t.withResolvers)();return i?.([...l(),p])&&c(),d().length>0?(f({args:p,resolve:h,reject:y}),g):(f({args:p,resolve:h,reject:y}),setTimeout(c,o),g)}}}return GA}var nR={},_d={},KH;function MUe(){if(KH)return _d;KH=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.OffchainLookupSenderMismatchError=_d.OffchainLookupResponseMalformedError=_d.OffchainLookupError=void 0;const t=Fi(),e=Kt(),r=SB();class n extends e.BaseError{constructor({callbackSelector:a,cause:c,data:u,extraData:l,sender:d,urls:f}){super(c.shortMessage||"An error occurred while fetching for an offchain result.",{cause:c,metaMessages:[...c.metaMessages||[],c.metaMessages?.length?"":[],"Offchain Gateway Call:",f&&["  Gateway URL(s):",...f.map(p=>`    ${(0,r.getUrl)(p)}`)],`  Sender: ${d}`,`  Data: ${u}`,`  Callback selector: ${a}`,`  Extra data: ${l}`].flat(),name:"OffchainLookupError"})}}_d.OffchainLookupError=n;class s extends e.BaseError{constructor({result:a,url:c}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${(0,r.getUrl)(c)}`,`Response: ${(0,t.stringify)(a)}`],name:"OffchainLookupResponseMalformedError"})}}_d.OffchainLookupResponseMalformedError=s;class i extends e.BaseError{constructor({sender:a,to:c}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${c}`,`OffchainLookup sender address: ${a}`],name:"OffchainLookupSenderMismatchError"})}}return _d.OffchainLookupSenderMismatchError=i,_d}var sR={},ZA={},ZH;function qB(){if(ZH)return ZA;ZH=1,Object.defineProperty(ZA,"__esModule",{value:!0}),ZA.decodeFunctionData=i;const t=Jn(),e=Jc(),r=cg(),n=Zh(),s=lf();function i(o){const{abi:a,data:c}=o,u=(0,e.slice)(c,0,4),l=a.find(d=>d.type==="function"&&u===(0,r.toFunctionSelector)((0,s.formatAbiItem)(d)));if(!l)throw new t.AbiFunctionSignatureNotFoundError(u,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:l.name,args:"inputs"in l&&l.inputs&&l.inputs.length>0?(0,n.decodeAbiParameters)(l.inputs,(0,e.slice)(c,4)):void 0}}return ZA}var YA={},YH;function HB(){if(YH)return YA;YH=1,Object.defineProperty(YA,"__esModule",{value:!0}),YA.encodeErrorResult=a;const t=Jn(),e=hi(),r=cg(),n=Vu(),s=lf(),i=ff(),o="/docs/contract/encodeErrorResult";function a(c){const{abi:u,errorName:l,args:d}=c;let f=u[0];if(l){const y=(0,i.getAbiItem)({abi:u,args:d,name:l});if(!y)throw new t.AbiErrorNotFoundError(l,{docsPath:o});f=y}if(f.type!=="error")throw new t.AbiErrorNotFoundError(void 0,{docsPath:o});const p=(0,s.formatAbiItem)(f),g=(0,r.toFunctionSelector)(p);let h="0x";if(d&&d.length>0){if(!f.inputs)throw new t.AbiErrorInputsNotFoundError(f.name,{docsPath:o});h=(0,n.encodeAbiParameters)(f.inputs,d)}return(0,e.concatHex)([g,h])}return YA}var JA={},JH;function zB(){if(JH)return JA;JH=1,Object.defineProperty(JA,"__esModule",{value:!0}),JA.encodeFunctionResult=s;const t=Jn(),e=Vu(),r=ff(),n="/docs/contract/encodeFunctionResult";function s(i){const{abi:o,functionName:a,result:c}=i;let u=o[0];if(a){const d=(0,r.getAbiItem)({abi:o,name:a});if(!d)throw new t.AbiFunctionNotFoundError(a,{docsPath:n});u=d}if(u.type!=="function")throw new t.AbiFunctionNotFoundError(void 0,{docsPath:n});if(!u.outputs)throw new t.AbiFunctionOutputsNotFoundError(u.name,{docsPath:n});const l=(()=>{if(u.outputs.length===0)return[];if(u.outputs.length===1)return[c];if(Array.isArray(c))return c;throw new t.InvalidArrayError(c)})();return(0,e.encodeAbiParameters)(u.outputs,l)}return JA}var XH;function q5(){return XH||(XH=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.localBatchGatewayUrl=void 0,t.localBatchGatewayRequest=o;const e=rp(),r=AB(),n=qB(),s=HB(),i=zB();t.localBatchGatewayUrl="x-batch-gateway:true";async function o(c){const{data:u,ccipRequest:l}=c,{args:[d]}=(0,n.decodeFunctionData)({abi:e.batchGatewayAbi,data:u}),f=[],p=[];return await Promise.all(d.map(async(g,h)=>{try{p[h]=g.urls.includes(t.localBatchGatewayUrl)?await o({data:g.data,ccipRequest:l}):await l(g),f[h]=!1}catch(y){f[h]=!0,p[h]=a(y)}})),(0,i.encodeFunctionResult)({abi:e.batchGatewayAbi,functionName:"query",result:[f,p]})}function a(c){return c.name==="HttpRequestError"&&c.status?(0,s.encodeErrorResult)({abi:e.batchGatewayAbi,errorName:"HttpError",args:[c.status,c.shortMessage]}):(0,s.encodeErrorResult)({abi:[r.solidityError],errorName:"Error",args:["shortMessage"in c?c.shortMessage:c.message]})}})(sR)),sR}var QH;function WB(){return QH||(QH=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.offchainLookupAbiItem=t.offchainLookupSignature=void 0,t.offchainLookup=d,t.ccipRequest=f;const e=E_(),r=MUe(),n=Gu(),s=O5(),i=Vu(),o=Yu(),a=hi(),c=Ho(),u=q5(),l=Fi();t.offchainLookupSignature="0x556f1830",t.offchainLookupAbiItem={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function d(p,{blockNumber:g,blockTag:h,data:y,to:E}){const{args:S}=(0,s.decodeErrorResult)({data:y,abi:[t.offchainLookupAbiItem]}),[C,_,T,P,D]=S,{ccipRead:L}=p,I=L&&typeof L?.request=="function"?L.request:f;try{if(!(0,o.isAddressEqual)(E,C))throw new r.OffchainLookupSenderMismatchError({sender:C,to:E});const U=_.includes(u.localBatchGatewayUrl)?await(0,u.localBatchGatewayRequest)({data:T,ccipRequest:I}):await I({data:T,sender:C,urls:_}),{data:F}=await(0,e.call)(p,{blockNumber:g,blockTag:h,data:(0,a.concat)([P,(0,i.encodeAbiParameters)([{type:"bytes"},{type:"bytes"}],[U,D])]),to:E});return F}catch(U){throw new r.OffchainLookupError({callbackSelector:P,cause:U,data:y,extraData:D,sender:C,urls:_})}}async function f({data:p,sender:g,urls:h}){let y=new Error("An unknown error occurred.");for(let E=0;E<h.length;E++){const S=h[E],C=S.includes("{data}")?"GET":"POST",_=C==="POST"?{data:p,sender:g}:void 0,T=C==="POST"?{"Content-Type":"application/json"}:{};try{const P=await fetch(S.replace("{sender}",g.toLowerCase()).replace("{data}",p),{body:JSON.stringify(_),headers:T,method:C});let D;if(P.headers.get("Content-Type")?.startsWith("application/json")?D=(await P.json()).data:D=await P.text(),!P.ok){y=new n.HttpRequestError({body:_,details:D?.error?(0,l.stringify)(D.error):P.statusText,headers:P.headers,status:P.status,url:S});continue}if(!(0,c.isHex)(D)){y=new r.OffchainLookupResponseMalformedError({result:D,url:S});continue}return D}catch(P){y=new n.HttpRequestError({body:_,details:P.message,url:S})}}throw y}})(nR)),nR}var ez;function E_(){if(ez)return Bw;ez=1,Object.defineProperty(Bw,"__esModule",{value:!0}),Bw.call=_,Bw.getRevertErrorData=I;const t=Vh(),e=kse(),r=is(),n=rp(),s=UUe(),i=b_(),o=Kt(),a=w_(),c=Yh(),u=gf(),l=v_(),d=Ra(),f=np(),p=tt(),g=LB(),h=ep(),y=Ku(),E=$B(),S=TB(),C=Zu();async function _(U,F){const{account:B=U.account,authorizationList:A,batch:m=!!U.batch?.multicall,blockNumber:b,blockTag:w=U.experimental_blockTag??"latest",accessList:x,blobs:M,blockOverrides:k,code:j,data:N,factory:v,factoryData:R,gas:$,gasPrice:O,maxFeePerBlobGas:H,maxFeePerGas:W,maxPriorityFeePerGas:G,nonce:K,to:Q,value:re,stateOverride:de,...le}=F,se=B?(0,r.parseAccount)(B):void 0;if(j&&(v||R))throw new o.BaseError("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(j&&Q)throw new o.BaseError("Cannot provide both `code` & `to` as parameters.");const be=j&&N,We=v&&R&&Q&&N,Ne=be||We,Be=be?D({code:j,data:N}):We?L({data:N,factory:v,factoryData:R,to:Q}):N;try{(0,C.assertRequest)(F);const Ee=(typeof b=="bigint"?(0,p.numberToHex)(b):void 0)||w,fe=k?e.toRpc(k):void 0,Mt=(0,S.serializeStateOverride)(de),bt=U.chain?.formatters?.transactionRequest?.format,ge=(bt||y.formatTransactionRequest)({...(0,h.extract)(le,{format:bt}),accessList:x,account:se,authorizationList:A,blobs:M,data:Be,gas:$,gasPrice:O,maxFeePerBlobGas:H,maxFeePerGas:W,maxPriorityFeePerGas:G,nonce:K,to:Ne?void 0:Q,value:re},"call");if(m&&T({request:ge})&&!Mt&&!fe)try{return await P(U,{...ge,blockNumber:b,blockTag:w})}catch(q){if(!(q instanceof a.ClientChainNotConfiguredError)&&!(q instanceof a.ChainDoesNotSupportContract))throw q}const ve=(()=>{const q=[ge,Ee];return Mt&&fe?[...q,Mt,fe]:Mt?[...q,Mt]:fe?[...q,{},fe]:q})(),V=await U.request({method:"eth_call",params:ve});return V==="0x"?{data:void 0}:{data:V}}catch(At){const Ee=I(At),{offchainLookup:fe,offchainLookupSignature:Mt}=await Promise.resolve().then(()=>WB());if(U.ccipRead!==!1&&Ee?.slice(0,10)===Mt&&Q)return{data:await fe(U,{data:Ee,to:Q})};throw Ne&&Ee?.slice(0,10)==="0x101bb98d"?new c.CounterfactualDeploymentFailedError({factory:v}):(0,g.getCallError)(At,{...F,account:se,chain:U.chain})}}function T({request:U}){const{data:F,to:B,...A}=U;return!(!F||F.startsWith(s.aggregate3Signature)||!B||Object.values(A).filter(m=>typeof m<"u").length>0)}async function P(U,F){const{batchSize:B=1024,deployless:A=!1,wait:m=0}=typeof U.batch?.multicall=="object"?U.batch.multicall:{},{blockNumber:b,blockTag:w=U.experimental_blockTag??"latest",data:x,to:M}=F,k=(()=>{if(A)return null;if(F.multicallAddress)return F.multicallAddress;if(U.chain)return(0,f.getChainContractAddress)({blockNumber:b,chain:U.chain,contract:"multicall3"});throw new a.ClientChainNotConfiguredError})(),N=(typeof b=="bigint"?(0,p.numberToHex)(b):void 0)||w,{schedule:v}=(0,E.createBatchScheduler)({id:`${U.uid}.${N}`,wait:m,shouldSplitBatch(O){return O.reduce((W,{data:G})=>W+(G.length-2),0)>B*2},fn:async O=>{const H=O.map(K=>({allowFailure:!0,callData:K.data,target:K.to})),W=(0,d.encodeFunctionData)({abi:n.multicall3Abi,args:[H],functionName:"aggregate3"}),G=await U.request({method:"eth_call",params:[{...k===null?{data:D({code:i.multicall3Bytecode,data:W})}:{to:k,data:W}},N]});return(0,u.decodeFunctionResult)({abi:n.multicall3Abi,args:[H],functionName:"aggregate3",data:G||"0x"})}}),[{returnData:R,success:$}]=await v({data:x,to:M});if(!$)throw new c.RawContractError({data:R});return R==="0x"?{data:void 0}:{data:R}}function D(U){const{code:F,data:B}=U;return(0,l.encodeDeployData)({abi:(0,t.parseAbi)(["constructor(bytes, bytes)"]),bytecode:i.deploylessCallViaBytecodeBytecode,args:[F,B]})}function L(U){const{data:F,factory:B,factoryData:A,to:m}=U;return(0,l.encodeDeployData)({abi:(0,t.parseAbi)(["constructor(address, bytes, address, bytes)"]),bytecode:i.deploylessCallViaFactoryBytecode,args:[m,F,B,A]})}function I(U){if(!(U instanceof o.BaseError))return;const F=U.walk();return typeof F?.data=="object"?F.data?.data:F.data}return Bw}var tz;function Kl(){if(tz)return qA;tz=1,Object.defineProperty(qA,"__esModule",{value:!0}),qA.readContract=i;const t=gf(),e=Ra(),r=Xh(),n=kr(),s=E_();async function i(o,a){const{abi:c,address:u,args:l,functionName:d,...f}=a,p=(0,e.encodeFunctionData)({abi:c,args:l,functionName:d});try{const{data:g}=await(0,n.getAction)(o,s.call,"call")({...f,data:p,to:u});return(0,t.decodeFunctionResult)({abi:c,args:l,functionName:d,data:g||"0x"})}catch(g){throw(0,r.getContractError)(g,{abi:c,address:u,args:l,docsPath:"/docs/contract/readContract",functionName:d})}}return qA}var XA={},rz;function Bse(){if(rz)return XA;rz=1,Object.defineProperty(XA,"__esModule",{value:!0}),XA.simulateContract=o;const t=is(),e=gf(),r=Ra(),n=Xh(),s=kr(),i=E_();async function o(a,c){const{abi:u,address:l,args:d,dataSuffix:f,functionName:p,...g}=c,h=g.account?(0,t.parseAccount)(g.account):a.account,y=(0,r.encodeFunctionData)({abi:u,args:d,functionName:p});try{const{data:E}=await(0,s.getAction)(a,i.call,"call")({batch:!1,data:`${y}${f?f.replace("0x",""):""}`,to:l,...g,account:h}),S=(0,e.decodeFunctionResult)({abi:u,args:d,functionName:p,data:E||"0x"}),C=u.filter(_=>"name"in _&&_.name===c.functionName);return{result:S,request:{abi:C,address:l,args:d,dataSuffix:f,functionName:p,...g,account:h}}}catch(E){throw(0,n.getContractError)(E,{abi:u,address:l,args:d,docsPath:"/docs/contract/simulateContract",functionName:p,sender:h?.address})}}return XA}var QA={},iR={},nz;function pg(){return nz||(nz=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.cleanupCache=t.listenersCache=void 0,t.observe=r,t.listenersCache=new Map,t.cleanupCache=new Map;let e=0;function r(n,s,i){const o=++e,a=()=>t.listenersCache.get(n)||[],c=()=>{const p=a();t.listenersCache.set(n,p.filter(g=>g.id!==o))},u=()=>{const p=a();if(!p.some(h=>h.id===o))return;const g=t.cleanupCache.get(n);if(p.length===1&&g){const h=g();h instanceof Promise&&h.catch(()=>{})}c()},l=a();if(t.listenersCache.set(n,[...l,{id:o,fns:s}]),l&&l.length>0)return u;const d={};for(const p in s)d[p]=((...g)=>{const h=a();if(h.length!==0)for(const y of h)y.fns[p]?.(...g)});const f=i(d);return typeof f=="function"&&t.cleanupCache.set(n,f),u}})(iR)),iR}var ex={},tx={},sz;function VB(){if(sz)return tx;sz=1,Object.defineProperty(tx,"__esModule",{value:!0}),tx.wait=t;async function t(e){return new Promise(r=>setTimeout(r,e))}return tx}var iz;function cb(){if(iz)return ex;iz=1,Object.defineProperty(ex,"__esModule",{value:!0}),ex.poll=e;const t=VB();function e(r,{emitOnBegin:n,initialWaitTime:s,interval:i}){let o=!0;const a=()=>o=!1;return(async()=>{let u;n&&(u=await r({unpoll:a}));const l=await s?.(u)??i;await(0,t.wait)(l);const d=async()=>{o&&(await r({unpoll:a}),await(0,t.wait)(i),d())};d()})(),a}return ex}var $w={},oR={},oz;function Use(){return oz||(oz=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.responseCache=t.promiseCache=void 0,t.getCache=e,t.withCache=r,t.promiseCache=new Map,t.responseCache=new Map;function e(n){const s=(a,c)=>({clear:()=>c.delete(a),get:()=>c.get(a),set:u=>c.set(a,u)}),i=s(n,t.promiseCache),o=s(n,t.responseCache);return{clear:()=>{i.clear(),o.clear()},promise:i,response:o}}async function r(n,{cacheKey:s,cacheTime:i=Number.POSITIVE_INFINITY}){const o=e(s),a=o.response.get();if(a&&i>0&&Date.now()-a.created.getTime()<i)return a.data;let c=o.promise.get();c||(c=n(),o.promise.set(c));try{const u=await c;return o.response.set({created:new Date,data:u}),u}finally{o.promise.clear()}}})(oR)),oR}var az;function __(){if(az)return $w;az=1,Object.defineProperty($w,"__esModule",{value:!0}),$w.getBlockNumberCache=r,$w.getBlockNumber=n;const t=Use(),e=s=>`blockNumber.${s}`;function r(s){return(0,t.getCache)(e(s))}async function n(s,{cacheTime:i=s.cacheTime}={}){const o=await(0,t.withCache)(()=>s.request({method:"eth_blockNumber"}),{cacheKey:e(s.uid),cacheTime:i});return BigInt(o)}return $w}var rx={},cz;function H5(){if(cz)return rx;cz=1,Object.defineProperty(rx,"__esModule",{value:!0}),rx.getFilterChanges=r;const t=y_(),e=pf();async function r(n,{filter:s}){const i="strict"in s&&s.strict,o=await s.request({method:"eth_getFilterChanges",params:[s.id]});if(typeof o[0]=="string")return o;const a=o.map(c=>(0,e.formatLog)(c));return!("abi"in s)||!s.abi?a:(0,t.parseEventLogs)({abi:s.abi,logs:a,strict:i})}return rx}var nx={},uz;function z5(){if(uz)return nx;uz=1,Object.defineProperty(nx,"__esModule",{value:!0}),nx.uninstallFilter=t;async function t(e,{filter:r}){return r.request({method:"eth_uninstallFilter",params:[r.id]})}return nx}var lz;function Mse(){if(lz)return QA;lz=1,Object.defineProperty(QA,"__esModule",{value:!0}),QA.watchContractEvent=g;const t=Jn(),e=Jh(),r=m_(),n=ug(),s=pf(),i=kr(),o=pg(),a=cb(),c=Fi(),u=_B(),l=__(),d=jB(),f=H5(),p=z5();function g(h,y){const{abi:E,address:S,args:C,batch:_=!0,eventName:T,fromBlock:P,onError:D,onLogs:L,poll:I,pollingInterval:U=h.pollingInterval,strict:F}=y;return(typeof I<"u"?I:typeof P=="bigint"?!0:!(h.transport.type==="webSocket"||h.transport.type==="ipc"||h.transport.type==="fallback"&&(h.transport.transports[0].config.type==="webSocket"||h.transport.transports[0].config.type==="ipc")))?(()=>{const b=F??!1,w=(0,c.stringify)(["watchContractEvent",S,C,_,h.uid,T,U,b,P]);return(0,o.observe)(w,{onLogs:L,onError:D},x=>{let M;P!==void 0&&(M=P-1n);let k,j=!1;const N=(0,a.poll)(async()=>{if(!j){try{k=await(0,i.getAction)(h,u.createContractEventFilter,"createContractEventFilter")({abi:E,address:S,args:C,eventName:T,strict:b,fromBlock:P})}catch{}j=!0;return}try{let v;if(k)v=await(0,i.getAction)(h,f.getFilterChanges,"getFilterChanges")({filter:k});else{const R=await(0,i.getAction)(h,l.getBlockNumber,"getBlockNumber")({});M&&M<R?v=await(0,i.getAction)(h,d.getContractEvents,"getContractEvents")({abi:E,address:S,args:C,eventName:T,fromBlock:M+1n,toBlock:R,strict:b}):v=[],M=R}if(v.length===0)return;if(_)x.onLogs(v);else for(const R of v)x.onLogs([R])}catch(v){k&&v instanceof e.InvalidInputRpcError&&(j=!1),x.onError?.(v)}},{emitOnBegin:!0,interval:U});return async()=>{k&&await(0,i.getAction)(h,p.uninstallFilter,"uninstallFilter")({filter:k}),N()}})})():(()=>{const b=F??!1,w=(0,c.stringify)(["watchContractEvent",S,C,_,h.uid,T,U,b]);let x=!0,M=()=>x=!1;return(0,o.observe)(w,{onLogs:L,onError:D},k=>((async()=>{try{const j=(()=>{if(h.transport.type==="fallback"){const R=h.transport.transports.find($=>$.config.type==="webSocket"||$.config.type==="ipc");return R?R.value:h.transport}return h.transport})(),N=T?(0,n.encodeEventTopics)({abi:E,eventName:T,args:C}):[],{unsubscribe:v}=await j.subscribe({params:["logs",{address:S,topics:N}],onData(R){if(!x)return;const $=R.result;try{const{eventName:O,args:H}=(0,r.decodeEventLog)({abi:E,data:$.data,topics:$.topics,strict:F}),W=(0,s.formatLog)($,{args:H,eventName:O});k.onLogs([W])}catch(O){let H,W;if(O instanceof t.DecodeLogDataMismatch||O instanceof t.DecodeLogTopicsMismatch){if(F)return;H=O.abiItem.name,W=O.abiItem.inputs?.some(K=>!("name"in K&&K.name))}const G=(0,s.formatLog)($,{args:W?[]:{},eventName:H});k.onLogs([G])}},onError(R){k.onError?.(R)}});M=v,x||M()}catch(j){D?.(j)}})(),()=>M()))})()}return QA}var qw={},Ip={},dz;function sp(){if(dz)return Ip;dz=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.AccountTypeNotSupportedError=Ip.AccountNotFoundError=void 0;const t=Kt();class e extends t.BaseError{constructor({docsPath:s}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:s,docsSlug:"account",name:"AccountNotFoundError"})}}Ip.AccountNotFoundError=e;class r extends t.BaseError{constructor({docsPath:s,metaMessages:i,type:o}){super(`Account type "${o}" is not supported.`,{docsPath:s,metaMessages:i,name:"AccountTypeNotSupportedError"})}}return Ip.AccountTypeNotSupportedError=r,Ip}var sx={},ix={},fz;function A_(){if(fz)return ix;fz=1,Object.defineProperty(ix,"__esModule",{value:!0}),ix.assertCurrentChain=e;const t=w_();function e({chain:r,currentChainId:n}){if(!r)throw new t.ChainNotFoundError;if(n!==r.id)throw new t.ChainMismatchError({chain:r,currentChainId:n})}return ix}var ox={},hz;function GB(){if(hz)return ox;hz=1,Object.defineProperty(ox,"__esModule",{value:!0}),ox.sendRawTransaction=t;async function t(e,{serializedTransaction:r}){return e.request({method:"eth_sendRawTransaction",params:[r]},{retryCount:0})}return ox}var pz;function W5(){if(pz)return sx;pz=1,Object.defineProperty(sx,"__esModule",{value:!0}),sx.sendTransaction=h;const t=is(),e=sp(),r=Kt(),n=l_(),s=A_(),i=p_(),o=ep(),a=Ku(),c=kr(),u=ag(),l=Zu(),d=tp(),f=g_(),p=GB(),g=new u.LruMap(128);async function h(y,E){const{account:S=y.account,chain:C=y.chain,accessList:_,authorizationList:T,blobs:P,data:D,gas:L,gasPrice:I,maxFeePerBlobGas:U,maxFeePerGas:F,maxPriorityFeePerGas:B,nonce:A,type:m,value:b,...w}=E;if(typeof S>"u")throw new e.AccountNotFoundError({docsPath:"/docs/actions/wallet/sendTransaction"});const x=S?(0,t.parseAccount)(S):null;try{(0,l.assertRequest)(E);const M=await(async()=>{if(E.to)return E.to;if(E.to!==null&&T&&T.length>0)return await(0,n.recoverAuthorizationAddress)({authorization:T[0]}).catch(()=>{throw new r.BaseError("`to` is required. Could not infer from `authorizationList`.")})})();if(x?.type==="json-rpc"||x===null){let k;C!==null&&(k=await(0,c.getAction)(y,d.getChainId,"getChainId")({}),(0,s.assertCurrentChain)({currentChainId:k,chain:C}));const j=y.chain?.formatters?.transactionRequest?.format,v=(j||a.formatTransactionRequest)({...(0,o.extract)(w,{format:j}),accessList:_,account:x,authorizationList:T,blobs:P,chainId:k,data:D,gas:L,gasPrice:I,maxFeePerBlobGas:U,maxFeePerGas:F,maxPriorityFeePerGas:B,nonce:A,to:M,type:m,value:b},"sendTransaction"),R=g.get(y.uid),$=R?"wallet_sendTransaction":"eth_sendTransaction";try{return await y.request({method:$,params:[v]},{retryCount:0})}catch(O){if(R===!1)throw O;const H=O;if(H.name==="InvalidInputRpcError"||H.name==="InvalidParamsRpcError"||H.name==="MethodNotFoundRpcError"||H.name==="MethodNotSupportedRpcError")return await y.request({method:"wallet_sendTransaction",params:[v]},{retryCount:0}).then(W=>(g.set(y.uid,!0),W)).catch(W=>{const G=W;throw G.name==="MethodNotFoundRpcError"||G.name==="MethodNotSupportedRpcError"?(g.set(y.uid,!1),H):G});throw H}}if(x?.type==="local"){const k=await(0,c.getAction)(y,f.prepareTransactionRequest,"prepareTransactionRequest")({account:x,accessList:_,authorizationList:T,blobs:P,chain:C,data:D,gas:L,gasPrice:I,maxFeePerBlobGas:U,maxFeePerGas:F,maxPriorityFeePerGas:B,nonce:A,nonceManager:x.nonceManager,parameters:[...f.defaultParameters,"sidecars"],type:m,value:b,...w,to:M}),j=C?.serializers?.transaction,N=await x.signTransaction(k,{serializer:j});return await(0,c.getAction)(y,p.sendRawTransaction,"sendRawTransaction")({serializedTransaction:N})}throw x?.type==="smart"?new e.AccountTypeNotSupportedError({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new e.AccountTypeNotSupportedError({docsPath:"/docs/actions/wallet/sendTransaction",type:x?.type})}catch(M){throw M instanceof e.AccountTypeNotSupportedError?M:(0,i.getTransactionError)(M,{...E,account:x,chain:E.chain||void 0})}}return sx}var gz;function KB(){if(gz)return qw;gz=1,Object.defineProperty(qw,"__esModule",{value:!0}),qw.writeContract=o;const t=is(),e=sp(),r=Ra(),n=Xh(),s=kr(),i=W5();async function o(a,c){return o.internal(a,i.sendTransaction,"sendTransaction",c)}return(function(a){async function c(u,l,d,f){const{abi:p,account:g=u.account,address:h,args:y,dataSuffix:E,functionName:S,...C}=f;if(typeof g>"u")throw new e.AccountNotFoundError({docsPath:"/docs/contract/writeContract"});const _=g?(0,t.parseAccount)(g):null,T=(0,r.encodeFunctionData)({abi:p,args:y,functionName:S});try{return await(0,s.getAction)(u,l,d)({data:`${T}${E?E.replace("0x",""):""}`,to:h,account:_,...C})}catch(P){throw(0,n.getContractError)(P,{abi:p,address:h,args:y,docsPath:"/docs/contract/writeContract",functionName:S,sender:_?.address})}}a.internal=c})(o||(qw.writeContract=o={})),qw}var mz;function DUe(){if(mz)return $g;mz=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.getContract=c,$g.getFunctionParameters=u,$g.getEventParameters=l;const t=kr(),e=_B(),r=Pse(),n=jB(),s=Kl(),i=Bse(),o=Mse(),a=KB();function c({abi:d,address:f,client:p}){const g=p,[h,y]=g?"public"in g&&"wallet"in g?[g.public,g.wallet]:"public"in g?[g.public,void 0]:"wallet"in g?[void 0,g.wallet]:[g,g]:[void 0,void 0],E=h!=null,S=y!=null,C={};let _=!1,T=!1,P=!1;for(const D of d)if(D.type==="function"?D.stateMutability==="view"||D.stateMutability==="pure"?_=!0:T=!0:D.type==="event"&&(P=!0),_&&T&&P)break;return E&&(_&&(C.read=new Proxy({},{get(D,L){return(...I)=>{const{args:U,options:F}=u(I);return(0,t.getAction)(h,s.readContract,"readContract")({abi:d,address:f,functionName:L,args:U,...F})}}})),T&&(C.simulate=new Proxy({},{get(D,L){return(...I)=>{const{args:U,options:F}=u(I);return(0,t.getAction)(h,i.simulateContract,"simulateContract")({abi:d,address:f,functionName:L,args:U,...F})}}})),P&&(C.createEventFilter=new Proxy({},{get(D,L){return(...I)=>{const U=d.find(A=>A.type==="event"&&A.name===L),{args:F,options:B}=l(I,U);return(0,t.getAction)(h,e.createContractEventFilter,"createContractEventFilter")({abi:d,address:f,eventName:L,args:F,...B})}}}),C.getEvents=new Proxy({},{get(D,L){return(...I)=>{const U=d.find(A=>A.type==="event"&&A.name===L),{args:F,options:B}=l(I,U);return(0,t.getAction)(h,n.getContractEvents,"getContractEvents")({abi:d,address:f,eventName:L,args:F,...B})}}}),C.watchEvent=new Proxy({},{get(D,L){return(...I)=>{const U=d.find(A=>A.type==="event"&&A.name===L),{args:F,options:B}=l(I,U);return(0,t.getAction)(h,o.watchContractEvent,"watchContractEvent")({abi:d,address:f,eventName:L,args:F,...B})}}}))),S&&T&&(C.write=new Proxy({},{get(D,L){return(...I)=>{const{args:U,options:F}=u(I);return(0,t.getAction)(y,a.writeContract,"writeContract")({abi:d,address:f,functionName:L,args:U,...F})}}})),(E||S)&&T&&(C.estimateGas=new Proxy({},{get(D,L){return(...I)=>{const{args:U,options:F}=u(I),B=h??y;return(0,t.getAction)(B,r.estimateContractGas,"estimateContractGas")({abi:d,address:f,functionName:L,args:U,...F,account:F.account??y.account})}}})),C.address=f,C.abi=d,C}function u(d){const f=d.length&&Array.isArray(d[0]),p=f?d[0]:[],g=(f?d[1]:d[0])??{};return{args:p,options:g}}function l(d,f){let p=!1;Array.isArray(d[0])?p=!0:d.length===1?p=f.inputs.some(y=>y.indexed):d.length===2&&(p=!0);const g=p?d[0]:void 0,h=(p?d[1]:d[0])??{};return{args:g,options:h}}return $g}var Jg={},Hw={},yz;function Dse(){if(yz)return Hw;yz=1,Object.defineProperty(Hw,"__esModule",{value:!0}),Hw.BundleFailedError=void 0;const t=Kt();class e extends t.BaseError{constructor(n){super(`Call bundle failed with status: ${n.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=n}}return Hw.BundleFailedError=e,Hw}var ax={},bz;function V5(){if(bz)return ax;bz=1,Object.defineProperty(ax,"__esModule",{value:!0}),ax.withRetry=e;const t=VB();function e(r,{delay:n=100,retryCount:s=2,shouldRetry:i=()=>!0}={}){return new Promise((o,a)=>{const c=async({count:u=0}={})=>{const l=async({error:d})=>{const f=typeof n=="function"?n({count:u,error:d}):n;f&&await(0,t.wait)(f),c({count:u+1})};try{const d=await r();o(d)}catch(d){if(u<s&&await i({count:u,error:d}))return l({error:d});a(d)}};c()})}return ax}var cx={},aR={},wz;function x_(){return wz||(wz=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defineTransactionReceipt=t.receiptStatuses=void 0,t.formatTransactionReceipt=i;const e=ys(),r=f_(),n=pf(),s=ab();t.receiptStatuses={"0x0":"reverted","0x1":"success"};function i(o,a){const c={...o,blockNumber:o.blockNumber?BigInt(o.blockNumber):null,contractAddress:o.contractAddress?o.contractAddress:null,cumulativeGasUsed:o.cumulativeGasUsed?BigInt(o.cumulativeGasUsed):null,effectiveGasPrice:o.effectiveGasPrice?BigInt(o.effectiveGasPrice):null,gasUsed:o.gasUsed?BigInt(o.gasUsed):null,logs:o.logs?o.logs.map(u=>(0,n.formatLog)(u)):null,to:o.to?o.to:null,transactionIndex:o.transactionIndex?(0,e.hexToNumber)(o.transactionIndex):null,status:o.status?t.receiptStatuses[o.status]:null,type:o.type?s.transactionType[o.type]||o.type:null};return o.blobGasPrice&&(c.blobGasPrice=BigInt(o.blobGasPrice)),o.blobGasUsed&&(c.blobGasUsed=BigInt(o.blobGasUsed)),c}t.defineTransactionReceipt=(0,r.defineFormatter)("transactionReceipt",i)})(aR)),aR}var cR={},vz;function ZB(){return vz||(vz=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fallbackTransactionErrorMagicIdentifier=t.fallbackMagicIdentifier=void 0,t.sendCalls=l;const e=is(),r=Kt(),n=Jh(),s=Ra(),i=hi(),o=ys(),a=tt(),c=p_(),u=W5();t.fallbackMagicIdentifier="0x5792579257925792579257925792579257925792579257925792579257925792",t.fallbackTransactionErrorMagicIdentifier=(0,a.numberToHex)(0,{size:32});async function l(d,f){const{account:p=d.account,capabilities:g,chain:h=d.chain,experimental_fallback:y,experimental_fallbackDelay:E=32,forceAtomic:S=!1,id:C,version:_="2.0.0"}=f,T=p?(0,e.parseAccount)(p):null,P=f.calls.map(D=>{const L=D,I=L.abi?(0,s.encodeFunctionData)({abi:L.abi,functionName:L.functionName,args:L.args}):L.data;return{data:L.dataSuffix&&I?(0,i.concat)([I,L.dataSuffix]):I,to:L.to,value:L.value?(0,a.numberToHex)(L.value):void 0}});try{const D=await d.request({method:"wallet_sendCalls",params:[{atomicRequired:S,calls:P,capabilities:g,chainId:(0,a.numberToHex)(h.id),from:T?.address,id:C,version:_}]},{retryCount:0});return typeof D=="string"?{id:D}:D}catch(D){const L=D;if(y&&(L.name==="MethodNotFoundRpcError"||L.name==="MethodNotSupportedRpcError"||L.name==="UnknownRpcError"||L.details.toLowerCase().includes("does not exist / is not available")||L.details.toLowerCase().includes("missing or invalid. request()")||L.details.toLowerCase().includes("did not match any variant of untagged enum")||L.details.toLowerCase().includes("account upgraded to unsupported contract")||L.details.toLowerCase().includes("eip-7702 not supported")||L.details.toLowerCase().includes("unsupported wc_ method")||L.details.toLowerCase().includes("feature toggled misconfigured")||L.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(g&&Object.values(g).some(A=>!A.optional)){const A="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new n.UnsupportedNonOptionalCapabilityError(new r.BaseError(A,{details:A}))}if(S&&P.length>1){const B="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new n.AtomicityNotSupportedError(new r.BaseError(B,{details:B}))}const I=[];for(const B of P){const A=(0,u.sendTransaction)(d,{account:T,chain:h,data:B.data,to:B.to,value:B.value?(0,o.hexToBigInt)(B.value):void 0});I.push(A),E>0&&await new Promise(m=>setTimeout(m,E))}const U=await Promise.allSettled(I);if(U.every(B=>B.status==="rejected"))throw U[0].reason;const F=U.map(B=>B.status==="fulfilled"?B.value:t.fallbackTransactionErrorMagicIdentifier);return{id:(0,i.concat)([...F,(0,a.numberToHex)(h.id,{size:32}),t.fallbackMagicIdentifier])}}throw(0,c.getTransactionError)(D,{...f,account:T,chain:f.chain})}}})(cR)),cR}var Ez;function jse(){if(Ez)return cx;Ez=1,Object.defineProperty(cx,"__esModule",{value:!0}),cx.getCallsStatus=i;const t=Jc(),e=df(),r=ys(),n=x_(),s=ZB();async function i(o,a){async function c(y){if(y.endsWith(s.fallbackMagicIdentifier.slice(2))){const S=(0,e.trim)((0,t.sliceHex)(y,-64,-32)),C=(0,t.sliceHex)(y,0,-64).slice(2).match(/.{1,64}/g),_=await Promise.all(C.map(P=>s.fallbackTransactionErrorMagicIdentifier.slice(2)!==P?o.request({method:"eth_getTransactionReceipt",params:[`0x${P}`]},{dedupe:!0}):void 0)),T=_.some(P=>P===null)?100:_.every(P=>P?.status==="0x1")?200:_.every(P=>P?.status==="0x0")?500:600;return{atomic:!1,chainId:(0,r.hexToNumber)(S),receipts:_.filter(Boolean),status:T,version:"2.0.0"}}return o.request({method:"wallet_getCallsStatus",params:[y]})}const{atomic:u=!1,chainId:l,receipts:d,version:f="2.0.0",...p}=await c(a.id),[g,h]=(()=>{const y=p.status;return y>=100&&y<200?["pending",y]:y>=200&&y<300?["success",y]:y>=300&&y<700?["failure",y]:y==="CONFIRMED"?["success",200]:y==="PENDING"?["pending",100]:[void 0,y]})();return{...p,atomic:u,chainId:l?(0,r.hexToNumber)(l):void 0,receipts:d?.map(y=>({...y,blockNumber:(0,r.hexToBigInt)(y.blockNumber),gasUsed:(0,r.hexToBigInt)(y.gasUsed),status:n.receiptStatuses[y.status]}))??[],statusCode:h,status:g,version:f}}return cx}var _z;function YB(){if(_z)return Jg;_z=1,Object.defineProperty(Jg,"__esModule",{value:!0}),Jg.WaitForCallsStatusTimeoutError=void 0,Jg.waitForCallsStatus=u;const t=Kt(),e=Dse(),r=kr(),n=pg(),s=cb(),i=FB(),o=V5(),a=Fi(),c=jse();async function u(d,f){const{id:p,pollingInterval:g=d.pollingInterval,status:h=({statusCode:U})=>U===200||U>=300,retryCount:y=4,retryDelay:E=({count:U})=>~~(1<<U)*200,timeout:S=6e4,throwOnFailure:C=!1}=f,_=(0,a.stringify)(["waitForCallsStatus",d.uid,p]),{promise:T,resolve:P,reject:D}=(0,i.withResolvers)();let L;const I=(0,n.observe)(_,{resolve:P,reject:D},U=>{const F=(0,s.poll)(async()=>{const B=A=>{clearTimeout(L),F(),A(),I()};try{const A=await(0,o.withRetry)(async()=>{const m=await(0,r.getAction)(d,c.getCallsStatus,"getCallsStatus")({id:p});if(C&&m.status==="failure")throw new e.BundleFailedError(m);return m},{retryCount:y,delay:E});if(!h(A))return;B(()=>U.resolve(A))}catch(A){B(()=>U.reject(A))}},{interval:g,emitOnBegin:!0});return F});return L=S?setTimeout(()=>{I(),clearTimeout(L),D(new l({id:p}))},S):void 0,await T}class l extends t.BaseError{constructor({id:f}){super(`Timed out while waiting for call bundle with id "${f}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}return Jg.WaitForCallsStatusTimeoutError=l,Jg}var zw={},ux={},Az;function Lse(){if(Az)return ux;Az=1,Object.defineProperty(ux,"__esModule",{value:!0}),ux.uid=n;const t=256;let e=t,r;function n(s=11){if(!r||e+s>t*2){r="",e=0;for(let i=0;i<t;i++)r+=(256+Math.random()*256|0).toString(16).substring(1)}return r.substring(e,e+++s)}return ux}var xz;function G5(){if(xz)return zw;xz=1,Object.defineProperty(zw,"__esModule",{value:!0}),zw.createClient=r,zw.rpcSchema=n;const t=is(),e=Lse();function r(s){const{batch:i,chain:o,ccipRead:a,key:c="base",name:u="Base Client",type:l="base"}=s,d=s.experimental_blockTag??(typeof o?.experimental_preconfirmationTime=="number"?"pending":void 0),f=o?.blockTime??12e3,p=Math.min(Math.max(Math.floor(f/2),500),4e3),g=s.pollingInterval??p,h=s.cacheTime??g,y=s.account?(0,t.parseAccount)(s.account):void 0,{config:E,request:S,value:C}=s.transport({account:y,chain:o,pollingInterval:g}),_={...E,...C},T={account:y,batch:i,cacheTime:h,ccipRead:a,chain:o,key:c,name:u,pollingInterval:g,request:S,transport:_,type:l,uid:(0,e.uid)(),...d?{experimental_blockTag:d}:{}};function P(D){return L=>{const I=L(D);for(const F in T)delete I[F];const U={...D,...I};return Object.assign(U,{extend:P(U)})}}return Object.assign(T,{extend:P(T)})}function n(){return null}return zw}var lx={},dx={},fx={},hx={},Cz;function JB(){if(Cz)return hx;Cz=1,Object.defineProperty(hx,"__esModule",{value:!0}),hx.isNullUniversalResolverError=r;const t=Kt(),e=Yh();function r(n){if(!(n instanceof t.BaseError))return!1;const s=n.walk(i=>i instanceof e.ContractFunctionRevertedError);return s instanceof e.ContractFunctionRevertedError?s.data?.errorName==="HttpError"||s.data?.errorName==="ResolverError"||s.data?.errorName==="ResolverNotContract"||s.data?.errorName==="ResolverNotFound"||s.data?.errorName==="ReverseAddressMismatch"||s.data?.errorName==="UnsupportedResolverProfile":!1}return hx}var px={},gx={},Sz;function Fse(){if(Sz)return gx;Sz=1,Object.defineProperty(gx,"__esModule",{value:!0}),gx.encodedLabelToLabelhash=e;const t=Ho();function e(r){if(r.length!==66||r.indexOf("[")!==0||r.indexOf("]")!==65)return null;const n=`0x${r.slice(1,65)}`;return(0,t.isHex)(n)?n:null}return gx}var Iz;function XB(){if(Iz)return px;Iz=1,Object.defineProperty(px,"__esModule",{value:!0}),px.namehash=i;const t=hi(),e=Pn(),r=tt(),n=Na(),s=Fse();function i(o){let a=new Uint8Array(32).fill(0);if(!o)return(0,r.bytesToHex)(a);const c=o.split(".");for(let u=c.length-1;u>=0;u-=1){const l=(0,s.encodedLabelToLabelhash)(c[u]),d=l?(0,e.toBytes)(l):(0,n.keccak256)((0,e.stringToBytes)(c[u]),"bytes");a=(0,n.keccak256)((0,t.concat)([a,d]),"bytes")}return(0,r.bytesToHex)(a)}return px}var mx={},yx={},Tz;function jUe(){if(Tz)return yx;Tz=1,Object.defineProperty(yx,"__esModule",{value:!0}),yx.encodeLabelhash=t;function t(e){return`[${e.slice(2)}]`}return yx}var bx={},Nz;function $se(){if(Nz)return bx;Nz=1,Object.defineProperty(bx,"__esModule",{value:!0}),bx.labelhash=s;const t=Pn(),e=tt(),r=Na(),n=Fse();function s(i){const o=new Uint8Array(32).fill(0);return i?(0,n.encodedLabelToLabelhash)(i)||(0,r.keccak256)((0,t.stringToBytes)(i)):(0,e.bytesToHex)(o)}return bx}var Pz;function QB(){if(Pz)return mx;Pz=1,Object.defineProperty(mx,"__esModule",{value:!0}),mx.packetToBytes=n;const t=Pn(),e=jUe(),r=$se();function n(s){const i=s.replace(/^\.|\.$/gm,"");if(i.length===0)return new Uint8Array(1);const o=new Uint8Array((0,t.stringToBytes)(i).byteLength+2);let a=0;const c=i.split(".");for(let u=0;u<c.length;u++){let l=(0,t.stringToBytes)(c[u]);l.byteLength>255&&(l=(0,t.stringToBytes)((0,e.encodeLabelhash)((0,r.labelhash)(c[u])))),o[a]=l.length,o.set(l,a+1),a+=l.length+1}return o.byteLength!==a+1?o.slice(0,a+1):o}return mx}var Rz;function LUe(){if(Rz)return fx;Rz=1,Object.defineProperty(fx,"__esModule",{value:!0}),fx.getEnsAddress=f;const t=rp(),e=gf(),r=Ra(),n=np(),s=df(),i=tt(),o=JB(),a=q5(),c=XB(),u=QB(),l=kr(),d=Kl();async function f(p,g){const{blockNumber:h,blockTag:y,coinType:E,name:S,gatewayUrls:C,strict:_}=g,{chain:T}=p,P=(()=>{if(g.universalResolverAddress)return g.universalResolverAddress;if(!T)throw new Error("client chain not configured. universalResolverAddress is required.");return(0,n.getChainContractAddress)({blockNumber:h,chain:T,contract:"ensUniversalResolver"})})(),D=T?.ensTlds;if(D&&!D.some(I=>S.endsWith(I)))return null;const L=E!=null?[(0,c.namehash)(S),BigInt(E)]:[(0,c.namehash)(S)];try{const I=(0,r.encodeFunctionData)({abi:t.addressResolverAbi,functionName:"addr",args:L}),U={address:P,abi:t.universalResolverResolveAbi,functionName:"resolveWithGateways",args:[(0,i.toHex)((0,u.packetToBytes)(S)),I,C??[a.localBatchGatewayUrl]],blockNumber:h,blockTag:y},B=await(0,l.getAction)(p,d.readContract,"readContract")(U);if(B[0]==="0x")return null;const A=(0,e.decodeFunctionResult)({abi:t.addressResolverAbi,args:L,functionName:"addr",data:B[0]});return A==="0x"||(0,s.trim)(A)==="0x00"?null:A}catch(I){if(_)throw I;if((0,o.isNullUniversalResolverError)(I))return null;throw I}}return fx}var wx={},vx={},fu={},$a={},Oz;function e9(){if(Oz)return $a;Oz=1,Object.defineProperty($a,"__esModule",{value:!0}),$a.EnsInvalidChainIdError=$a.EnsAvatarUnsupportedNamespaceError=$a.EnsAvatarUriResolutionError=$a.EnsAvatarInvalidNftUriError=$a.EnsAvatarInvalidMetadataError=void 0;const t=Kt();class e extends t.BaseError{constructor({data:a}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(a)}`],name:"EnsAvatarInvalidMetadataError"})}}$a.EnsAvatarInvalidMetadataError=e;class r extends t.BaseError{constructor({reason:a}){super(`ENS NFT avatar URI is invalid. ${a}`,{name:"EnsAvatarInvalidNftUriError"})}}$a.EnsAvatarInvalidNftUriError=r;class n extends t.BaseError{constructor({uri:a}){super(`Unable to resolve ENS avatar URI "${a}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}$a.EnsAvatarUriResolutionError=n;class s extends t.BaseError{constructor({namespace:a}){super(`ENS NFT avatar namespace "${a}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}$a.EnsAvatarUnsupportedNamespaceError=s;class i extends t.BaseError{constructor({chainId:a}){super(`Invalid ENSIP-11 chainId: ${a}. Must be between 0 and 0x7fffffff, or 1.`,{name:"EnsInvalidChainIdError"})}}return $a.EnsInvalidChainIdError=i,$a}var kz;function FUe(){if(kz)return fu;kz=1,Object.defineProperty(fu,"__esModule",{value:!0}),fu.isImageUri=o,fu.getGateway=a,fu.resolveAvatarUri=c,fu.getJsonImage=u,fu.getMetadataAvatarUri=l,fu.parseAvatarUri=d,fu.parseNftUri=f,fu.getNftTokenUri=p;const t=Kl(),e=e9(),r=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,n=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,s=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,i=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function o(g){try{const h=await fetch(g,{method:"HEAD"});return h.status===200?h.headers.get("content-type")?.startsWith("image/"):!1}catch(h){return typeof h=="object"&&typeof h.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(y=>{const E=new Image;E.onload=()=>{y(!0)},E.onerror=()=>{y(!1)},E.src=g})}}function a(g,h){return g?g.endsWith("/")?g.slice(0,-1):g:h}function c({uri:g,gatewayUrls:h}){const y=s.test(g);if(y)return{uri:g,isOnChain:!0,isEncoded:y};const E=a(h?.ipfs,"https://ipfs.io"),S=a(h?.arweave,"https://arweave.net"),C=g.match(r),{protocol:_,subpath:T,target:P,subtarget:D=""}=C?.groups||{},L=_==="ipns:/"||T==="ipns/",I=_==="ipfs:/"||T==="ipfs/"||n.test(g);if(g.startsWith("http")&&!L&&!I){let F=g;return h?.arweave&&(F=g.replace(/https:\/\/arweave.net/g,h?.arweave)),{uri:F,isOnChain:!1,isEncoded:!1}}if((L||I)&&P)return{uri:`${E}/${L?"ipns":"ipfs"}/${P}${D}`,isOnChain:!1,isEncoded:!1};if(_==="ar:/"&&P)return{uri:`${S}/${P}${D||""}`,isOnChain:!1,isEncoded:!1};let U=g.replace(i,"");if(U.startsWith("<svg")&&(U=`data:image/svg+xml;base64,${btoa(U)}`),U.startsWith("data:")||U.startsWith("{"))return{uri:U,isOnChain:!0,isEncoded:!1};throw new e.EnsAvatarUriResolutionError({uri:g})}function u(g){if(typeof g!="object"||!("image"in g)&&!("image_url"in g)&&!("image_data"in g))throw new e.EnsAvatarInvalidMetadataError({data:g});return g.image||g.image_url||g.image_data}async function l({gatewayUrls:g,uri:h}){try{const y=await fetch(h).then(S=>S.json());return await d({gatewayUrls:g,uri:u(y)})}catch{throw new e.EnsAvatarUriResolutionError({uri:h})}}async function d({gatewayUrls:g,uri:h}){const{uri:y,isOnChain:E}=c({uri:h,gatewayUrls:g});if(E||await o(y))return y;throw new e.EnsAvatarUriResolutionError({uri:h})}function f(g){let h=g;h.startsWith("did:nft:")&&(h=h.replace("did:nft:","").replace(/_/g,"/"));const[y,E,S]=h.split("/"),[C,_]=y.split(":"),[T,P]=E.split(":");if(!C||C.toLowerCase()!=="eip155")throw new e.EnsAvatarInvalidNftUriError({reason:"Only EIP-155 supported"});if(!_)throw new e.EnsAvatarInvalidNftUriError({reason:"Chain ID not found"});if(!P)throw new e.EnsAvatarInvalidNftUriError({reason:"Contract address not found"});if(!S)throw new e.EnsAvatarInvalidNftUriError({reason:"Token ID not found"});if(!T)throw new e.EnsAvatarInvalidNftUriError({reason:"ERC namespace not found"});return{chainID:Number.parseInt(_,10),namespace:T.toLowerCase(),contractAddress:P,tokenID:S}}async function p(g,{nft:h}){if(h.namespace==="erc721")return(0,t.readContract)(g,{address:h.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(h.tokenID)]});if(h.namespace==="erc1155")return(0,t.readContract)(g,{address:h.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(h.tokenID)]});throw new e.EnsAvatarUnsupportedNamespaceError({namespace:h.namespace})}return fu}var Bz;function $Ue(){if(Bz)return vx;Bz=1,Object.defineProperty(vx,"__esModule",{value:!0}),vx.parseAvatarRecord=e;const t=FUe();async function e(n,{gatewayUrls:s,record:i}){return/eip155:/i.test(i)?r(n,{gatewayUrls:s,record:i}):(0,t.parseAvatarUri)({uri:i,gatewayUrls:s})}async function r(n,{gatewayUrls:s,record:i}){const o=(0,t.parseNftUri)(i),a=await(0,t.getNftTokenUri)(n,{nft:o}),{uri:c,isOnChain:u,isEncoded:l}=(0,t.resolveAvatarUri)({uri:a,gatewayUrls:s});if(u&&(c.includes("data:application/json;base64,")||c.startsWith("{"))){const f=l?atob(c.replace("data:application/json;base64,","")):c,p=JSON.parse(f);return(0,t.parseAvatarUri)({uri:(0,t.getJsonImage)(p),gatewayUrls:s})}let d=o.tokenID;return o.namespace==="erc1155"&&(d=d.replace("0x","").padStart(64,"0")),(0,t.getMetadataAvatarUri)({gatewayUrls:s,uri:c.replace(/(?:0x)?{id}/,d)})}return vx}var Ex={},Uz;function qse(){if(Uz)return Ex;Uz=1,Object.defineProperty(Ex,"__esModule",{value:!0}),Ex.getEnsText=d;const t=rp(),e=gf(),r=Ra(),n=np(),s=tt(),i=JB(),o=q5(),a=XB(),c=QB(),u=kr(),l=Kl();async function d(f,p){const{blockNumber:g,blockTag:h,key:y,name:E,gatewayUrls:S,strict:C}=p,{chain:_}=f,T=(()=>{if(p.universalResolverAddress)return p.universalResolverAddress;if(!_)throw new Error("client chain not configured. universalResolverAddress is required.");return(0,n.getChainContractAddress)({blockNumber:g,chain:_,contract:"ensUniversalResolver"})})(),P=_?.ensTlds;if(P&&!P.some(D=>E.endsWith(D)))return null;try{const D={address:T,abi:t.universalResolverResolveAbi,args:[(0,s.toHex)((0,c.packetToBytes)(E)),(0,r.encodeFunctionData)({abi:t.textResolverAbi,functionName:"text",args:[(0,a.namehash)(E),y]}),S??[o.localBatchGatewayUrl]],functionName:"resolveWithGateways",blockNumber:g,blockTag:h},I=await(0,u.getAction)(f,l.readContract,"readContract")(D);if(I[0]==="0x")return null;const U=(0,e.decodeFunctionResult)({abi:t.textResolverAbi,functionName:"text",data:I[0]});return U===""?null:U}catch(D){if(C)throw D;if((0,i.isNullUniversalResolverError)(D))return null;throw D}}return Ex}var Mz;function qUe(){if(Mz)return wx;Mz=1,Object.defineProperty(wx,"__esModule",{value:!0}),wx.getEnsAvatar=n;const t=$Ue(),e=kr(),r=qse();async function n(s,{blockNumber:i,blockTag:o,assetGatewayUrls:a,name:c,gatewayUrls:u,strict:l,universalResolverAddress:d}){const f=await(0,e.getAction)(s,r.getEnsText,"getEnsText")({blockNumber:i,blockTag:o,key:"avatar",name:c,universalResolverAddress:d,gatewayUrls:u,strict:l});if(!f)return null;try{return await(0,t.parseAvatarRecord)(s,{record:f,gatewayUrls:a})}catch{return null}}return wx}var _x={},Dz;function HUe(){if(Dz)return _x;Dz=1,Object.defineProperty(_x,"__esModule",{value:!0}),_x.getEnsName=o;const t=rp(),e=np(),r=JB(),n=q5(),s=kr(),i=Kl();async function o(a,c){const{address:u,blockNumber:l,blockTag:d,coinType:f=60n,gatewayUrls:p,strict:g}=c,{chain:h}=a,y=(()=>{if(c.universalResolverAddress)return c.universalResolverAddress;if(!h)throw new Error("client chain not configured. universalResolverAddress is required.");return(0,e.getChainContractAddress)({blockNumber:l,chain:h,contract:"ensUniversalResolver"})})();try{const E={address:y,abi:t.universalResolverReverseAbi,args:[u,f,p??[n.localBatchGatewayUrl]],functionName:"reverseWithGateways",blockNumber:l,blockTag:d},S=(0,s.getAction)(a,i.readContract,"readContract"),[C]=await S(E);return C||null}catch(E){if(g)throw E;if((0,r.isNullUniversalResolverError)(E))return null;throw E}}return _x}var Ax={},jz;function zUe(){if(jz)return Ax;jz=1,Object.defineProperty(Ax,"__esModule",{value:!0}),Ax.getEnsResolver=i;const t=np(),e=tt(),r=QB(),n=kr(),s=Kl();async function i(o,a){const{blockNumber:c,blockTag:u,name:l}=a,{chain:d}=o,f=(()=>{if(a.universalResolverAddress)return a.universalResolverAddress;if(!d)throw new Error("client chain not configured. universalResolverAddress is required.");return(0,t.getChainContractAddress)({blockNumber:c,chain:d,contract:"ensUniversalResolver"})})(),p=d?.ensTlds;if(p&&!p.some(h=>l.endsWith(h)))throw new Error(`${l} is not a valid ENS TLD (${p?.join(", ")}) for chain "${d.name}" (id: ${d.id}).`);const[g]=await(0,n.getAction)(o,s.readContract,"readContract")({address:f,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[(0,e.toHex)((0,r.packetToBytes)(l))],blockNumber:c,blockTag:u});return g}return Ax}var xx={},Lz;function Hse(){if(Lz)return xx;Lz=1,Object.defineProperty(xx,"__esModule",{value:!0}),xx.createAccessList=o;const t=is(),e=tt(),r=LB(),n=ep(),s=Ku(),i=Zu();async function o(a,c){const{account:u=a.account,blockNumber:l,blockTag:d="latest",blobs:f,data:p,gas:g,gasPrice:h,maxFeePerBlobGas:y,maxFeePerGas:E,maxPriorityFeePerGas:S,to:C,value:_,...T}=c,P=u?(0,t.parseAccount)(u):void 0;try{(0,i.assertRequest)(c);const L=(typeof l=="bigint"?(0,e.numberToHex)(l):void 0)||d,I=a.chain?.formatters?.transactionRequest?.format,F=(I||s.formatTransactionRequest)({...(0,n.extract)(T,{format:I}),account:P,blobs:f,data:p,gas:g,gasPrice:h,maxFeePerBlobGas:y,maxFeePerGas:E,maxPriorityFeePerGas:S,to:C,value:_},"createAccessList"),B=await a.request({method:"eth_createAccessList",params:[F,L]});return{accessList:B.accessList,gasUsed:BigInt(B.gasUsed)}}catch(D){throw(0,r.getCallError)(D,{...c,account:P,chain:a.chain})}}return xx}var Cx={},Fz;function WUe(){if(Fz)return Cx;Fz=1,Object.defineProperty(Cx,"__esModule",{value:!0}),Cx.createBlockFilter=e;const t=R5();async function e(r){const n=(0,t.createFilterRequestScope)(r,{method:"eth_newBlockFilter"}),s=await r.request({method:"eth_newBlockFilter"});return{id:s,request:n(s),type:"block"}}return Cx}var Sx={},$z;function zse(){if($z)return Sx;$z=1,Object.defineProperty(Sx,"__esModule",{value:!0}),Sx.createEventFilter=n;const t=ug(),e=tt(),r=R5();async function n(s,{address:i,args:o,event:a,events:c,fromBlock:u,strict:l,toBlock:d}={}){const f=c??(a?[a]:void 0),p=(0,r.createFilterRequestScope)(s,{method:"eth_newFilter"});let g=[];f&&(g=[f.flatMap(E=>(0,t.encodeEventTopics)({abi:[E],eventName:E.name,args:o}))],a&&(g=g[0]));const h=await s.request({method:"eth_newFilter",params:[{address:i,fromBlock:typeof u=="bigint"?(0,e.numberToHex)(u):u,toBlock:typeof d=="bigint"?(0,e.numberToHex)(d):d,...g.length?{topics:g}:{}}]});return{abi:f,args:o,eventName:a?a.name:void 0,fromBlock:u,id:h,request:p(h),strict:!!l,toBlock:d,type:"event"}}return Sx}var Ix={},qz;function Wse(){if(qz)return Ix;qz=1,Object.defineProperty(Ix,"__esModule",{value:!0}),Ix.createPendingTransactionFilter=e;const t=R5();async function e(r){const n=(0,t.createFilterRequestScope)(r,{method:"eth_newPendingTransactionFilter"}),s=await r.request({method:"eth_newPendingTransactionFilter"});return{id:s,request:n(s),type:"transaction"}}return Ix}var Tx={},Hz;function VUe(){if(Hz)return Tx;Hz=1,Object.defineProperty(Tx,"__esModule",{value:!0}),Tx.getBalance=e;const t=tt();async function e(r,{address:n,blockNumber:s,blockTag:i=r.experimental_blockTag??"latest"}){const o=typeof s=="bigint"?(0,t.numberToHex)(s):void 0,a=await r.request({method:"eth_getBalance",params:[n,o||i]});return BigInt(a)}return Tx}var Nx={},zz;function GUe(){if(zz)return Nx;zz=1,Object.defineProperty(Nx,"__esModule",{value:!0}),Nx.getBlobBaseFee=t;async function t(e){const r=await e.request({method:"eth_blobBaseFee"});return BigInt(r)}return Nx}var Px={},Wz;function KUe(){if(Wz)return Px;Wz=1,Object.defineProperty(Px,"__esModule",{value:!0}),Px.getBlockTransactionCount=r;const t=ys(),e=tt();async function r(n,{blockHash:s,blockNumber:i,blockTag:o="latest"}={}){const a=i!==void 0?(0,e.numberToHex)(i):void 0;let c;return s?c=await n.request({method:"eth_getBlockTransactionCountByHash",params:[s]},{dedupe:!0}):c=await n.request({method:"eth_getBlockTransactionCountByNumber",params:[a||o]},{dedupe:!!a}),(0,t.hexToNumber)(c)}return Px}var Rx={},Vz;function Vse(){if(Vz)return Rx;Vz=1,Object.defineProperty(Rx,"__esModule",{value:!0}),Rx.getCode=e;const t=tt();async function e(r,{address:n,blockNumber:s,blockTag:i="latest"}){const o=s!==void 0?(0,t.numberToHex)(s):void 0,a=await r.request({method:"eth_getCode",params:[n,o||i]},{dedupe:!!o});if(a!=="0x")return a}return Rx}var Ox={},Ww={},Gz;function ZUe(){if(Gz)return Ww;Gz=1,Object.defineProperty(Ww,"__esModule",{value:!0}),Ww.Eip712DomainNotFoundError=void 0;const t=Kt();class e extends t.BaseError{constructor({address:n}){super(`No EIP-712 domain found on contract "${n}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${n}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}return Ww.Eip712DomainNotFoundError=e,Ww}var Kz;function YUe(){if(Kz)return Ox;Kz=1,Object.defineProperty(Ox,"__esModule",{value:!0}),Ox.getEip712Domain=n;const t=ZUe(),e=kr(),r=Kl();async function n(i,o){const{address:a,factory:c,factoryData:u}=o;try{const[l,d,f,p,g,h,y]=await(0,e.getAction)(i,r.readContract,"readContract")({abi:s,address:a,functionName:"eip712Domain",factory:c,factoryData:u});return{domain:{name:d,version:f,chainId:Number(p),verifyingContract:g,salt:h},extensions:y,fields:l}}catch(l){const d=l;throw d.name==="ContractFunctionExecutionError"&&d.cause.name==="ContractFunctionZeroDataError"?new t.Eip712DomainNotFoundError({address:a}):d}}const s=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];return Ox}var kx={},Bx={},Zz;function JUe(){if(Zz)return Bx;Zz=1,Object.defineProperty(Bx,"__esModule",{value:!0}),Bx.formatFeeHistory=t;function t(e){return{baseFeePerGas:e.baseFeePerGas.map(r=>BigInt(r)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map(r=>r.map(n=>BigInt(n)))}}return Bx}var Yz;function XUe(){if(Yz)return kx;Yz=1,Object.defineProperty(kx,"__esModule",{value:!0}),kx.getFeeHistory=r;const t=tt(),e=JUe();async function r(n,{blockCount:s,blockNumber:i,blockTag:o="latest",rewardPercentiles:a}){const c=typeof i=="bigint"?(0,t.numberToHex)(i):void 0,u=await n.request({method:"eth_feeHistory",params:[(0,t.numberToHex)(s),c||o,a]},{dedupe:!!c});return(0,e.formatFeeHistory)(u)}return kx}var Ux={},Jz;function QUe(){if(Jz)return Ux;Jz=1,Object.defineProperty(Ux,"__esModule",{value:!0}),Ux.getFilterLogs=r;const t=y_(),e=pf();async function r(n,{filter:s}){const i=s.strict??!1,a=(await s.request({method:"eth_getFilterLogs",params:[s.id]})).map(c=>(0,e.formatLog)(c));return s.abi?(0,t.parseEventLogs)({abi:s.abi,logs:a,strict:i}):a}return Ux}var Mx={},Dx={},uR={},jx={},Xz;function Gse(){if(Xz)return jx;Xz=1,Object.defineProperty(jx,"__esModule",{value:!0}),jx.encodePacked=a;const t=Jn(),e=Wu(),r=Pa(),n=hi(),s=Gh(),i=tt(),o=P5();function a(u,l){if(u.length!==l.length)throw new t.AbiEncodingLengthMismatchError({expectedLength:u.length,givenLength:l.length});const d=[];for(let f=0;f<u.length;f++){const p=u[f],g=l[f];d.push(c(p,g))}return(0,n.concatHex)(d)}function c(u,l,d=!1){if(u==="address"){const h=l;if(!(0,r.isAddress)(h))throw new e.InvalidAddressError({address:h});return(0,s.pad)(h.toLowerCase(),{size:d?32:null})}if(u==="string")return(0,i.stringToHex)(l);if(u==="bytes")return l;if(u==="bool")return(0,s.pad)((0,i.boolToHex)(l),{size:d?32:1});const f=u.match(o.integerRegex);if(f){const[h,y,E="256"]=f,S=Number.parseInt(E,10)/8;return(0,i.numberToHex)(l,{size:d?32:S,signed:y==="int"})}const p=u.match(o.bytesRegex);if(p){const[h,y]=p;if(Number.parseInt(y,10)!==(l.length-2)/2)throw new t.BytesSizeMismatchError({expectedSize:Number.parseInt(y,10),givenSize:(l.length-2)/2});return(0,s.pad)(l,{dir:"right",size:d?32:null})}const g=u.match(o.arrayRegex);if(g&&Array.isArray(l)){const[h,y]=g,E=[];for(let S=0;S<l.length;S++)E.push(c(y,l[S],!0));return E.length===0?"0x":(0,n.concatHex)(E)}throw new t.UnsupportedPackedAbiType(u)}return jx}var Xg={},Lx={},Qz;function t9(){if(Qz)return Lx;Qz=1,Object.defineProperty(Lx,"__esModule",{value:!0}),Lx.isBytes=t;function t(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}return Lx}var eW;function Kse(){if(eW)return Xg;eW=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.getContractAddress=c,Xg.getCreateAddress=u,Xg.getCreate2Address=l;const t=hi(),e=t9(),r=Gh(),n=Jc(),s=Pn(),i=u_(),o=Na(),a=pc();function c(d){return d.opcode==="CREATE2"?l(d):u(d)}function u(d){const f=(0,s.toBytes)((0,a.getAddress)(d.from));let p=(0,s.toBytes)(d.nonce);return p[0]===0&&(p=new Uint8Array([])),(0,a.getAddress)(`0x${(0,o.keccak256)((0,i.toRlp)([f,p],"bytes")).slice(26)}`)}function l(d){const f=(0,s.toBytes)((0,a.getAddress)(d.from)),p=(0,r.pad)((0,e.isBytes)(d.salt)?d.salt:(0,s.toBytes)(d.salt),{size:32}),g="bytecodeHash"in d?(0,e.isBytes)(d.bytecodeHash)?d.bytecodeHash:(0,s.toBytes)(d.bytecodeHash):(0,o.keccak256)(d.bytecode,"bytes");return(0,a.getAddress)((0,n.slice)((0,o.keccak256)((0,t.concat)([(0,s.toBytes)("0xff"),f,p,g])),12))}return Xg}var Fx={},Vw={},Hf={},tW;function K5(){if(tW)return Hf;tW=1,Object.defineProperty(Hf,"__esModule",{value:!0}),Hf.assertTransactionEIP7702=d,Hf.assertTransactionEIP4844=f,Hf.assertTransactionEIP1559=p,Hf.assertTransactionEIP2930=g,Hf.assertTransactionLegacy=h;const t=Ise(),e=NB(),r=Wu(),n=Kt(),s=Tse(),i=w_(),o=hf(),a=Pa(),c=Ta(),u=Jc(),l=ys();function d(y){const{authorizationList:E}=y;if(E)for(const S of E){const{chainId:C}=S,_=S.address;if(!(0,a.isAddress)(_))throw new r.InvalidAddressError({address:_});if(C<0)throw new i.InvalidChainIdError({chainId:C})}p(y)}function f(y){const{blobVersionedHashes:E}=y;if(E){if(E.length===0)throw new s.EmptyBlobError;for(const S of E){const C=(0,c.size)(S),_=(0,l.hexToNumber)((0,u.slice)(S,0,1));if(C!==32)throw new s.InvalidVersionedHashSizeError({hash:S,size:C});if(_!==t.versionedHashVersionKzg)throw new s.InvalidVersionedHashVersionError({hash:S,version:_})}}p(y)}function p(y){const{chainId:E,maxPriorityFeePerGas:S,maxFeePerGas:C,to:_}=y;if(E<=0)throw new i.InvalidChainIdError({chainId:E});if(_&&!(0,a.isAddress)(_))throw new r.InvalidAddressError({address:_});if(C&&C>e.maxUint256)throw new o.FeeCapTooHighError({maxFeePerGas:C});if(S&&C&&S>C)throw new o.TipAboveFeeCapError({maxFeePerGas:C,maxPriorityFeePerGas:S})}function g(y){const{chainId:E,maxPriorityFeePerGas:S,gasPrice:C,maxFeePerGas:_,to:T}=y;if(E<=0)throw new i.InvalidChainIdError({chainId:E});if(T&&!(0,a.isAddress)(T))throw new r.InvalidAddressError({address:T});if(S||_)throw new n.BaseError("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(C&&C>e.maxUint256)throw new o.FeeCapTooHighError({maxFeePerGas:C})}function h(y){const{chainId:E,maxPriorityFeePerGas:S,gasPrice:C,maxFeePerGas:_,to:T}=y;if(T&&!(0,a.isAddress)(T))throw new r.InvalidAddressError({address:T});if(typeof E<"u"&&E<=0)throw new i.InvalidChainIdError({chainId:E});if(S||_)throw new n.BaseError("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(C&&C>e.maxUint256)throw new o.FeeCapTooHighError({maxFeePerGas:C})}return Hf}var $x={},rW;function r9(){if(rW)return $x;rW=1,Object.defineProperty($x,"__esModule",{value:!0}),$x.serializeAccessList=n;const t=Wu(),e=Oa(),r=Pa();function n(s){if(!s||s.length===0)return[];const i=[];for(let o=0;o<s.length;o++){const{address:a,storageKeys:c}=s[o];for(let u=0;u<c.length;u++)if(c[u].length-2!==64)throw new e.InvalidStorageKeySizeError({storageKey:c[u]});if(!(0,r.isAddress)(a,{strict:!1}))throw new t.InvalidAddressError({address:a});i.push([a,c])}return i}return $x}var nW;function Z5(){if(nW)return Vw;nW=1,Object.defineProperty(Vw,"__esModule",{value:!0}),Vw.serializeTransaction=p,Vw.toYParitySignatureArray=C;const t=Oa(),e=Zse(),r=D5(),n=j5(),s=BB(),i=L5(),o=hi(),a=df(),c=tt(),u=u_(),l=K5(),d=F5(),f=r9();function p(_,T){const P=(0,d.getTransactionType)(_);return P==="eip1559"?y(_,T):P==="eip2930"?E(_,T):P==="eip4844"?h(_,T):P==="eip7702"?g(_,T):S(_,T)}function g(_,T){const{authorizationList:P,chainId:D,gas:L,nonce:I,to:U,value:F,maxFeePerGas:B,maxPriorityFeePerGas:A,accessList:m,data:b}=_;(0,l.assertTransactionEIP7702)(_);const w=(0,f.serializeAccessList)(m),x=(0,e.serializeAuthorizationList)(P);return(0,o.concatHex)(["0x04",(0,u.toRlp)([(0,c.numberToHex)(D),I?(0,c.numberToHex)(I):"0x",A?(0,c.numberToHex)(A):"0x",B?(0,c.numberToHex)(B):"0x",L?(0,c.numberToHex)(L):"0x",U??"0x",F?(0,c.numberToHex)(F):"0x",b??"0x",w,x,...C(_,T)])])}function h(_,T){const{chainId:P,gas:D,nonce:L,to:I,value:U,maxFeePerBlobGas:F,maxFeePerGas:B,maxPriorityFeePerGas:A,accessList:m,data:b}=_;(0,l.assertTransactionEIP4844)(_);let w=_.blobVersionedHashes,x=_.sidecars;if(_.blobs&&(typeof w>"u"||typeof x>"u")){const R=typeof _.blobs[0]=="string"?_.blobs:_.blobs.map(H=>(0,c.bytesToHex)(H)),$=_.kzg,O=(0,r.blobsToCommitments)({blobs:R,kzg:$});if(typeof w>"u"&&(w=(0,s.commitmentsToVersionedHashes)({commitments:O})),typeof x>"u"){const H=(0,n.blobsToProofs)({blobs:R,commitments:O,kzg:$});x=(0,i.toBlobSidecars)({blobs:R,commitments:O,proofs:H})}}const M=(0,f.serializeAccessList)(m),k=[(0,c.numberToHex)(P),L?(0,c.numberToHex)(L):"0x",A?(0,c.numberToHex)(A):"0x",B?(0,c.numberToHex)(B):"0x",D?(0,c.numberToHex)(D):"0x",I??"0x",U?(0,c.numberToHex)(U):"0x",b??"0x",M,F?(0,c.numberToHex)(F):"0x",w??[],...C(_,T)],j=[],N=[],v=[];if(x)for(let R=0;R<x.length;R++){const{blob:$,commitment:O,proof:H}=x[R];j.push($),N.push(O),v.push(H)}return(0,o.concatHex)(["0x03",x?(0,u.toRlp)([k,j,N,v]):(0,u.toRlp)(k)])}function y(_,T){const{chainId:P,gas:D,nonce:L,to:I,value:U,maxFeePerGas:F,maxPriorityFeePerGas:B,accessList:A,data:m}=_;(0,l.assertTransactionEIP1559)(_);const b=(0,f.serializeAccessList)(A),w=[(0,c.numberToHex)(P),L?(0,c.numberToHex)(L):"0x",B?(0,c.numberToHex)(B):"0x",F?(0,c.numberToHex)(F):"0x",D?(0,c.numberToHex)(D):"0x",I??"0x",U?(0,c.numberToHex)(U):"0x",m??"0x",b,...C(_,T)];return(0,o.concatHex)(["0x02",(0,u.toRlp)(w)])}function E(_,T){const{chainId:P,gas:D,data:L,nonce:I,to:U,value:F,accessList:B,gasPrice:A}=_;(0,l.assertTransactionEIP2930)(_);const m=(0,f.serializeAccessList)(B),b=[(0,c.numberToHex)(P),I?(0,c.numberToHex)(I):"0x",A?(0,c.numberToHex)(A):"0x",D?(0,c.numberToHex)(D):"0x",U??"0x",F?(0,c.numberToHex)(F):"0x",L??"0x",m,...C(_,T)];return(0,o.concatHex)(["0x01",(0,u.toRlp)(b)])}function S(_,T){const{chainId:P=0,gas:D,data:L,nonce:I,to:U,value:F,gasPrice:B}=_;(0,l.assertTransactionLegacy)(_);let A=[I?(0,c.numberToHex)(I):"0x",B?(0,c.numberToHex)(B):"0x",D?(0,c.numberToHex)(D):"0x",U??"0x",F?(0,c.numberToHex)(F):"0x",L??"0x"];if(T){const m=(()=>{if(T.v>=35n)return(T.v-35n)/2n>0?T.v:27n+(T.v===35n?0n:1n);if(P>0)return BigInt(P*2)+BigInt(35n+T.v-27n);const x=27n+(T.v===27n?0n:1n);if(T.v!==x)throw new t.InvalidLegacyVError({v:T.v});return x})(),b=(0,a.trim)(T.r),w=(0,a.trim)(T.s);A=[...A,(0,c.numberToHex)(m),b==="0x00"?"0x":b,w==="0x00"?"0x":w]}else P>0&&(A=[...A,(0,c.numberToHex)(P),"0x","0x"]);return(0,u.toRlp)(A)}function C(_,T){const P=T??_,{v:D,yParity:L}=P;if(typeof P.r>"u")return[];if(typeof P.s>"u")return[];if(typeof D>"u"&&typeof L>"u")return[];const I=(0,a.trim)(P.r),U=(0,a.trim)(P.s);return[typeof L=="number"?L?(0,c.numberToHex)(1):"0x":D===0n?"0x":D===1n?(0,c.numberToHex)(1):D===27n?"0x":(0,c.numberToHex)(1),I==="0x00"?"0x":I,U==="0x00"?"0x":U]}return Vw}var sW;function Zse(){if(sW)return Fx;sW=1,Object.defineProperty(Fx,"__esModule",{value:!0}),Fx.serializeAuthorizationList=r;const t=tt(),e=Z5();function r(n){if(!n||n.length===0)return[];const s=[];for(const i of n){const{chainId:o,nonce:a,...c}=i,u=i.address;s.push([o?(0,t.toHex)(o):"0x",u,a?(0,t.toHex)(a):"0x",...(0,e.toYParitySignatureArray)({},c)])}return s}return Fx}var qx={},iW;function Yse(){if(iW)return qx;iW=1,Object.defineProperty(qx,"__esModule",{value:!0}),qx.verifyAuthorization=n;const t=pc(),e=Yu(),r=l_();async function n({address:s,authorization:i,signature:o}){return(0,e.isAddressEqual)((0,t.getAddress)(s),await(0,r.recoverAuthorizationAddress)({authorization:i,signature:o}))}return qx}var Gw={},lR={},oW;function eMe(){return oW||(oW=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.promiseCache=void 0,t.withDedupe=r;const e=ag();t.promiseCache=new e.LruMap(8192);function r(n,{enabled:s=!0,id:i}){if(!s||!i)return n();if(t.promiseCache.get(i))return t.promiseCache.get(i);const o=n().finally(()=>t.promiseCache.delete(i));return t.promiseCache.set(i,o),o}})(lR)),lR}var aW;function Jse(){if(aW)return Gw;aW=1,Object.defineProperty(Gw,"__esModule",{value:!0}),Gw.buildRequest=a,Gw.shouldRetry=c;const t=Kt(),e=Gu(),r=Jh(),n=tt(),s=eMe(),i=V5(),o=Fi();function a(u,l={}){return async(d,f={})=>{const{dedupe:p=!1,methods:g,retryDelay:h=150,retryCount:y=3,uid:E}={...l,...f},{method:S}=d;if(g?.exclude?.includes(S))throw new r.MethodNotSupportedRpcError(new Error("method not supported"),{method:S});if(g?.include&&!g.include.includes(S))throw new r.MethodNotSupportedRpcError(new Error("method not supported"),{method:S});const C=p?(0,n.stringToHex)(`${E}.${(0,o.stringify)(d)}`):void 0;return(0,s.withDedupe)(()=>(0,i.withRetry)(async()=>{try{return await u(d)}catch(_){const T=_;switch(T.code){case r.ParseRpcError.code:throw new r.ParseRpcError(T);case r.InvalidRequestRpcError.code:throw new r.InvalidRequestRpcError(T);case r.MethodNotFoundRpcError.code:throw new r.MethodNotFoundRpcError(T,{method:d.method});case r.InvalidParamsRpcError.code:throw new r.InvalidParamsRpcError(T);case r.InternalRpcError.code:throw new r.InternalRpcError(T);case r.InvalidInputRpcError.code:throw new r.InvalidInputRpcError(T);case r.ResourceNotFoundRpcError.code:throw new r.ResourceNotFoundRpcError(T);case r.ResourceUnavailableRpcError.code:throw new r.ResourceUnavailableRpcError(T);case r.TransactionRejectedRpcError.code:throw new r.TransactionRejectedRpcError(T);case r.MethodNotSupportedRpcError.code:throw new r.MethodNotSupportedRpcError(T,{method:d.method});case r.LimitExceededRpcError.code:throw new r.LimitExceededRpcError(T);case r.JsonRpcVersionUnsupportedError.code:throw new r.JsonRpcVersionUnsupportedError(T);case r.UserRejectedRequestError.code:throw new r.UserRejectedRequestError(T);case r.UnauthorizedProviderError.code:throw new r.UnauthorizedProviderError(T);case r.UnsupportedProviderMethodError.code:throw new r.UnsupportedProviderMethodError(T);case r.ProviderDisconnectedError.code:throw new r.ProviderDisconnectedError(T);case r.ChainDisconnectedError.code:throw new r.ChainDisconnectedError(T);case r.SwitchChainError.code:throw new r.SwitchChainError(T);case r.UnsupportedNonOptionalCapabilityError.code:throw new r.UnsupportedNonOptionalCapabilityError(T);case r.UnsupportedChainIdError.code:throw new r.UnsupportedChainIdError(T);case r.DuplicateIdError.code:throw new r.DuplicateIdError(T);case r.UnknownBundleIdError.code:throw new r.UnknownBundleIdError(T);case r.BundleTooLargeError.code:throw new r.BundleTooLargeError(T);case r.AtomicReadyWalletRejectedUpgradeError.code:throw new r.AtomicReadyWalletRejectedUpgradeError(T);case r.AtomicityNotSupportedError.code:throw new r.AtomicityNotSupportedError(T);case 5e3:throw new r.UserRejectedRequestError(T);default:throw _ instanceof t.BaseError?_:new r.UnknownRpcError(T)}}},{delay:({count:_,error:T})=>{if(T&&T instanceof e.HttpRequestError){const P=T?.headers?.get("Retry-After");if(P?.match(/\d/))return Number.parseInt(P,10)*1e3}return~~(1<<_)*h},retryCount:y,shouldRetry:({error:_})=>c(_)}),{enabled:p,id:C})}}function c(u){return"code"in u&&typeof u.code=="number"?u.code===-1||u.code===r.LimitExceededRpcError.code||u.code===r.InternalRpcError.code:u instanceof e.HttpRequestError&&u.status?u.status===403||u.status===408||u.status===413||u.status===429||u.status===500||u.status===502||u.status===503||u.status===504:!0}return Gw}var Hx={},cW;function Xse(){if(cW)return Hx;cW=1,Object.defineProperty(Hx,"__esModule",{value:!0}),Hx.defineChain=t;function t(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}return Hx}var zx={},uW;function Qse(){if(uW)return zx;uW=1,Object.defineProperty(zx,"__esModule",{value:!0}),zx.extractChain=t;function t({chains:e,id:r}){return e.find(n=>n.id===r)}return zx}var Wx={},lW;function n9(){if(lW)return Wx;lW=1,Object.defineProperty(Wx,"__esModule",{value:!0}),Wx.fromRlp=i;const t=Kt(),e=ib(),r=o_(),n=Pn(),s=tt();function i(u,l="hex"){const d=(()=>{if(typeof u=="string"){if(u.length>3&&u.length%2!==0)throw new e.InvalidHexValueError(u);return(0,n.hexToBytes)(u)}return u})(),f=(0,r.createCursor)(d,{recursiveReadLimit:Number.POSITIVE_INFINITY});return o(f,l)}function o(u,l="hex"){if(u.bytes.length===0)return l==="hex"?(0,s.bytesToHex)(u.bytes):u.bytes;const d=u.readByte();if(d<128&&u.decrementPosition(1),d<192){const p=a(u,d,128),g=u.readBytes(p);return l==="hex"?(0,s.bytesToHex)(g):g}const f=a(u,d,192);return c(u,f,l)}function a(u,l,d){if(d===128&&l<128)return 1;if(l<=d+55)return l-d;if(l===d+55+1)return u.readUint8();if(l===d+55+2)return u.readUint16();if(l===d+55+3)return u.readUint24();if(l===d+55+4)return u.readUint32();throw new t.BaseError("Invalid RLP prefix")}function c(u,l,d){const f=u.position,p=[];for(;u.position-f<l;)p.push(o(u,d));return p}return Wx}var Vx={},dW;function s9(){if(dW)return Vx;dW=1,Object.defineProperty(Vx,"__esModule",{value:!0}),Vx.isHash=r;const t=Ho(),e=Ta();function r(n){return(0,t.isHex)(n)&&(0,e.size)(n)===32}return Vx}var Gx={},Tp={},Co={},fW;function tMe(){if(fW)return Co;fW=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.ripemd160=Co.RIPEMD160=Co.md5=Co.MD5=Co.sha1=Co.SHA1=void 0;const t=bse(),e=Kh(),r=Uint32Array.from([1732584193,4023233417,2562383102,271733878,3285377520]),n=new Uint32Array(80);class s extends t.HashMD{constructor(){super(64,20,8,!1),this.A=r[0]|0,this.B=r[1]|0,this.C=r[2]|0,this.D=r[3]|0,this.E=r[4]|0}get(){const{A:I,B:U,C:F,D:B,E:A}=this;return[I,U,F,B,A]}set(I,U,F,B,A){this.A=I|0,this.B=U|0,this.C=F|0,this.D=B|0,this.E=A|0}process(I,U){for(let w=0;w<16;w++,U+=4)n[w]=I.getUint32(U,!1);for(let w=16;w<80;w++)n[w]=(0,e.rotl)(n[w-3]^n[w-8]^n[w-14]^n[w-16],1);let{A:F,B,C:A,D:m,E:b}=this;for(let w=0;w<80;w++){let x,M;w<20?(x=(0,t.Chi)(B,A,m),M=1518500249):w<40?(x=B^A^m,M=1859775393):w<60?(x=(0,t.Maj)(B,A,m),M=2400959708):(x=B^A^m,M=3395469782);const k=(0,e.rotl)(F,5)+x+b+M+n[w]|0;b=m,m=A,A=(0,e.rotl)(B,30),B=F,F=k}F=F+this.A|0,B=B+this.B|0,A=A+this.C|0,m=m+this.D|0,b=b+this.E|0,this.set(F,B,A,m,b)}roundClean(){(0,e.clean)(n)}destroy(){this.set(0,0,0,0,0),(0,e.clean)(this.buffer)}}Co.SHA1=s,Co.sha1=(0,e.createHasher)(()=>new s);const i=Math.pow(2,32),o=Array.from({length:64},(L,I)=>Math.floor(i*Math.abs(Math.sin(I+1)))),a=r.slice(0,4),c=new Uint32Array(16);class u extends t.HashMD{constructor(){super(64,16,8,!0),this.A=a[0]|0,this.B=a[1]|0,this.C=a[2]|0,this.D=a[3]|0}get(){const{A:I,B:U,C:F,D:B}=this;return[I,U,F,B]}set(I,U,F,B){this.A=I|0,this.B=U|0,this.C=F|0,this.D=B|0}process(I,U){for(let b=0;b<16;b++,U+=4)c[b]=I.getUint32(U,!0);let{A:F,B,C:A,D:m}=this;for(let b=0;b<64;b++){let w,x,M;b<16?(w=(0,t.Chi)(B,A,m),x=b,M=[7,12,17,22]):b<32?(w=(0,t.Chi)(m,B,A),x=(5*b+1)%16,M=[5,9,14,20]):b<48?(w=B^A^m,x=(3*b+5)%16,M=[4,11,16,23]):(w=A^(B|~m),x=7*b%16,M=[6,10,15,21]),w=w+F+o[b]+c[x],F=m,m=A,A=B,B=B+(0,e.rotl)(w,M[b%4])}F=F+this.A|0,B=B+this.B|0,A=A+this.C|0,m=m+this.D|0,this.set(F,B,A,m)}roundClean(){(0,e.clean)(c)}destroy(){this.set(0,0,0,0),(0,e.clean)(this.buffer)}}Co.MD5=u,Co.md5=(0,e.createHasher)(()=>new u);const l=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),d=Uint8Array.from(new Array(16).fill(0).map((L,I)=>I)),f=d.map(L=>(9*L+5)%16),p=(()=>{const U=[[d],[f]];for(let F=0;F<4;F++)for(let B of U)B.push(B[F].map(A=>l[A]));return U})(),g=p[0],h=p[1],y=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(L=>Uint8Array.from(L)),E=g.map((L,I)=>L.map(U=>y[I][U])),S=h.map((L,I)=>L.map(U=>y[I][U])),C=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),_=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function T(L,I,U,F){return L===0?I^U^F:L===1?I&U|~I&F:L===2?(I|~U)^F:L===3?I&F|U&~F:I^(U|~F)}const P=new Uint32Array(16);class D extends t.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:I,h1:U,h2:F,h3:B,h4:A}=this;return[I,U,F,B,A]}set(I,U,F,B,A){this.h0=I|0,this.h1=U|0,this.h2=F|0,this.h3=B|0,this.h4=A|0}process(I,U){for(let N=0;N<16;N++,U+=4)P[N]=I.getUint32(U,!0);let F=this.h0|0,B=F,A=this.h1|0,m=A,b=this.h2|0,w=b,x=this.h3|0,M=x,k=this.h4|0,j=k;for(let N=0;N<5;N++){const v=4-N,R=C[N],$=_[N],O=g[N],H=h[N],W=E[N],G=S[N];for(let K=0;K<16;K++){const Q=(0,e.rotl)(F+T(N,A,b,x)+P[O[K]]+R,W[K])+k|0;F=k,k=x,x=(0,e.rotl)(b,10)|0,b=A,A=Q}for(let K=0;K<16;K++){const Q=(0,e.rotl)(B+T(v,m,w,M)+P[H[K]]+$,G[K])+j|0;B=j,j=M,M=(0,e.rotl)(w,10)|0,w=m,m=Q}}this.set(this.h1+b+M|0,this.h2+x+j|0,this.h3+k+B|0,this.h4+F+m|0,this.h0+A+w|0)}roundClean(){(0,e.clean)(P)}destroy(){this.destroyed=!0,(0,e.clean)(this.buffer),this.set(0,0,0,0,0)}}return Co.RIPEMD160=D,Co.ripemd160=(0,e.createHasher)(()=>new D),Co}var hW;function eie(){if(hW)return Tp;hW=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.ripemd160=Tp.RIPEMD160=void 0;const t=tMe();return Tp.RIPEMD160=t.RIPEMD160,Tp.ripemd160=t.ripemd160,Tp}var pW;function tie(){if(pW)return Gx;pW=1,Object.defineProperty(Gx,"__esModule",{value:!0}),Gx.ripemd160=s;const t=eie(),e=Ho(),r=Pn(),n=tt();function s(i,o){const a=o||"hex",c=(0,t.ripemd160)((0,e.isHex)(i,{strict:!1})?(0,r.toBytes)(i):i);return a==="bytes"?c:(0,n.toHex)(c)}return Gx}var dR={},gW;function rie(){return gW||(gW=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toEventHash=void 0;var e=N5();Object.defineProperty(t,"toEventHash",{enumerable:!0,get:function(){return e.toSignatureHash}})})(dR)),dR}var fR={},mW;function nie(){return mW||(mW=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toEventSignature=void 0;var e=EB();Object.defineProperty(t,"toEventSignature",{enumerable:!0,get:function(){return e.toSignature}})})(fR)),fR}var hR={},yW;function sie(){return yW||(yW=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toFunctionHash=void 0;var e=N5();Object.defineProperty(t,"toFunctionHash",{enumerable:!0,get:function(){return e.toSignatureHash}})})(hR)),hR}var pR={},bW;function iie(){return bW||(bW=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toFunctionSignature=void 0;var e=EB();Object.defineProperty(t,"toFunctionSignature",{enumerable:!0,get:function(){return e.toSignature}})})(pR)),pR}var Np={},wW;function oie(){if(wW)return Np;wW=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.nonceManager=void 0,Np.createNonceManager=r,Np.jsonRpc=n;const t=M5(),e=ag();function r(s){const{source:i}=s,o=new Map,a=new e.LruMap(8192),c=new Map,u=({address:l,chainId:d})=>`${l}.${d}`;return{async consume({address:l,chainId:d,client:f}){const p=u({address:l,chainId:d}),g=this.get({address:l,chainId:d,client:f});this.increment({address:l,chainId:d});const h=await g;return await i.set({address:l,chainId:d},h),a.set(p,h),h},async increment({address:l,chainId:d}){const f=u({address:l,chainId:d}),p=o.get(f)??0;o.set(f,p+1)},async get({address:l,chainId:d,client:f}){const p=u({address:l,chainId:d});let g=c.get(p);return g||(g=(async()=>{try{const y=await i.get({address:l,chainId:d,client:f}),E=a.get(p)??0;return E>0&&y<=E?E+1:(a.delete(p),y)}finally{this.reset({address:l,chainId:d})}})(),c.set(p,g)),(o.get(p)??0)+await g},reset({address:l,chainId:d}){const f=u({address:l,chainId:d});o.delete(f),c.delete(f)}}}function n(){return{async get(s){const{address:i,client:o}=s;return(0,t.getTransactionCount)(o,{address:i,blockTag:"pending"})},set(){}}}return Np.nonceManager=r({source:n()}),Np}var Qg={},Kx={},Zx={},vW;function i9(){if(vW)return Zx;vW=1,Object.defineProperty(Zx,"__esModule",{value:!0}),Zx.withTimeout=t;function t(e,{errorInstance:r=new Error("timed out"),timeout:n,signal:s}){return new Promise((i,o)=>{(async()=>{let a;try{const c=new AbortController;n>0&&(a=setTimeout(()=>{s?c.abort():o(r)},n)),i(await e({signal:c?.signal||null}))}catch(c){c?.name==="AbortError"&&o(r),o(c)}finally{clearTimeout(a)}})()})}return Zx}var Kw={},EW;function aie(){if(EW)return Kw;EW=1,Object.defineProperty(Kw,"__esModule",{value:!0}),Kw.idCache=void 0;function t(){return{current:0,take(){return this.current++},reset(){this.current=0}}}return Kw.idCache=t(),Kw}var _W;function o9(){if(_W)return Kx;_W=1,Object.defineProperty(Kx,"__esModule",{value:!0}),Kx.getHttpRpcClient=s;const t=Gu(),e=i9(),r=Fi(),n=aie();function s(i,o={}){return{async request(a){const{body:c,fetchFn:u=o.fetchFn??fetch,onRequest:l=o.onRequest,onResponse:d=o.onResponse,timeout:f=o.timeout??1e4}=a,p={...o.fetchOptions??{},...a.fetchOptions??{}},{headers:g,method:h,signal:y}=p;try{const E=await(0,e.withTimeout)(async({signal:C})=>{const _={...p,body:Array.isArray(c)?(0,r.stringify)(c.map(L=>({jsonrpc:"2.0",id:L.id??n.idCache.take(),...L}))):(0,r.stringify)({jsonrpc:"2.0",id:c.id??n.idCache.take(),...c}),headers:{"Content-Type":"application/json",...g},method:h||"POST",signal:y||(f>0?C:null)},T=new Request(i,_),P=await l?.(T,_)??{..._,url:i};return await u(P.url??i,P)},{errorInstance:new t.TimeoutError({body:c,url:i}),timeout:f,signal:!0});d&&await d(E);let S;if(E.headers.get("Content-Type")?.startsWith("application/json"))S=await E.json();else{S=await E.text();try{S=JSON.parse(S||"{}")}catch(C){if(E.ok)throw C;S={error:S}}}if(!E.ok)throw new t.HttpRequestError({body:c,details:(0,r.stringify)(S.error)||E.statusText,headers:E.headers,status:E.status,url:i});return S}catch(E){throw E instanceof t.HttpRequestError||E instanceof t.TimeoutError?E:new t.HttpRequestError({body:c,cause:E,url:i})}}}}return Kx}var Yx={},gR={},AW;function cie(){return AW||(AW=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.socketClientCache=void 0,t.getSocketRpcClient=i;const e=Gu(),r=$B(),n=i9(),s=aie();t.socketClientCache=new Map;async function i(o){const{getSocket:a,keepAlive:c=!0,key:u="socket",reconnect:l=!0,url:d}=o,{interval:f=3e4}=typeof c=="object"?c:{},{attempts:p=5,delay:g=2e3}=typeof l=="object"?l:{},h=JSON.stringify({keepAlive:c,key:u,url:d,reconnect:l});let y=t.socketClientCache.get(h);if(y)return y;let E=0;const{schedule:S}=(0,r.createBatchScheduler)({id:h,fn:async()=>{const T=new Map,P=new Map;let D,L,I,U=!1;function F(){if(l&&E<p){if(U)return;U=!0,E++,L?.close(),setTimeout(async()=>{await B().catch(console.error),U=!1},g)}else T.clear(),P.clear()}async function B(){const A=await a({onClose(){for(const m of T.values())m.onError?.(new e.SocketClosedError({url:d}));for(const m of P.values())m.onError?.(new e.SocketClosedError({url:d}));F()},onError(m){D=m;for(const b of T.values())b.onError?.(D);for(const b of P.values())b.onError?.(D);F()},onOpen(){D=void 0,E=0},onResponse(m){const b=m.method==="eth_subscription",w=b?m.params.subscription:m.id,x=b?P:T,M=x.get(w);M&&M.onResponse(m),b||x.delete(w)}});if(L=A,c&&(I&&clearInterval(I),I=setInterval(()=>L.ping?.(),f)),l&&P.size>0){const m=P.entries();for(const[b,{onResponse:w,body:x,onError:M}]of m)x&&(P.delete(b),y?.request({body:x,onResponse:w,onError:M}))}return A}return await B(),D=void 0,y={close(){I&&clearInterval(I),L.close(),t.socketClientCache.delete(h)},get socket(){return L},request({body:A,onError:m,onResponse:b}){D&&m&&m(D);const w=A.id??s.idCache.take(),x=M=>{typeof M.id=="number"&&w!==M.id||(A.method==="eth_subscribe"&&typeof M.result=="string"&&P.set(M.result,{onResponse:x,onError:m,body:A}),A.method==="eth_unsubscribe"&&P.delete(A.params?.[0]),b(M))};T.set(w,{onResponse:x,onError:m});try{L.request({body:{jsonrpc:"2.0",id:w,...A}})}catch(M){m?.(M)}},requestAsync({body:A,timeout:m=1e4}){return(0,n.withTimeout)(()=>new Promise((b,w)=>this.request({body:A,onError:w,onResponse:b})),{errorInstance:new e.TimeoutError({body:A,url:d}),timeout:m})},requests:T,subscriptions:P,url:d},t.socketClientCache.set(h,y),[y]}}),[C,[_]]=await S();return _}})(gR)),gR}function rMe(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const nMe=rMe(),sMe=Object.freeze(Object.defineProperty({__proto__:null,WebSocket:nMe},Symbol.toStringTag,{value:"Module"})),iMe=Ln(sMe);var xW;function a9(){if(xW)return Yx;xW=1,Object.defineProperty(Yx,"__esModule",{value:!0}),Yx.getWebSocketRpcClient=r;const t=Gu(),e=cie();async function r(n,s={}){const{keepAlive:i,reconnect:o}=s;return(0,e.getSocketRpcClient)({async getSocket({onClose:a,onError:c,onOpen:u,onResponse:l}){const d=await Promise.resolve().then(()=>iMe).then(y=>y.WebSocket),f=new d(n);function p(){f.removeEventListener("close",p),f.removeEventListener("message",g),f.removeEventListener("error",c),f.removeEventListener("open",u),a()}function g({data:y}){if(!(typeof y=="string"&&y.trim().length===0))try{const E=JSON.parse(y);l(E)}catch(E){c(E)}}f.addEventListener("close",p),f.addEventListener("message",g),f.addEventListener("error",c),f.addEventListener("open",u),f.readyState===d.CONNECTING&&await new Promise((y,E)=>{f&&(f.onopen=y,f.onerror=E)});const{close:h}=f;return Object.assign(f,{close(){h.bind(f)(),p()},ping(){try{if(f.readyState===f.CLOSED||f.readyState===f.CLOSING)throw new t.WebSocketRequestError({url:f.url,cause:new t.SocketClosedError({url:f.url})});const y={jsonrpc:"2.0",id:null,method:"net_version",params:[]};f.send(JSON.stringify(y))}catch(y){c(y)}},request({body:y}){if(f.readyState===f.CLOSED||f.readyState===f.CLOSING)throw new t.WebSocketRequestError({body:y,url:f.url,cause:new t.SocketClosedError({url:f.url})});return f.send(JSON.stringify(y))}})},keepAlive:i,reconnect:o,url:n})}return Yx}var CW;function uie(){if(CW)return Qg;CW=1,Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.rpc=void 0,Qg.getSocket=s;const t=o9(),e=a9();function r(i,{body:o,onError:a,onResponse:c}){return i.request({body:o,onError:a,onResponse:c}),i}async function n(i,{body:o,timeout:a=1e4}){return i.requestAsync({body:o,timeout:a})}async function s(i){const o=await(0,e.getWebSocketRpcClient)(i);return Object.assign(o.socket,{requests:o.requests,subscriptions:o.subscriptions})}return Qg.rpc={http(i,o){return(0,t.getHttpRpcClient)(i).request(o)},webSocket:r,webSocketAsync:n},Qg}var Jx={},Xx={},Zw={},SW;function lie(){return SW||(SW=1,Object.defineProperty(Zw,"__esModule",{value:!0}),Zw.presignMessagePrefix=void 0,Zw.presignMessagePrefix=`Ethereum Signed Message:
`),Zw}var IW;function die(){if(IW)return Xx;IW=1,Object.defineProperty(Xx,"__esModule",{value:!0}),Xx.toPrefixedMessage=s;const t=lie(),e=hi(),r=Ta(),n=tt();function s(i){const o=typeof i=="string"?(0,n.stringToHex)(i):typeof i.raw=="string"?i.raw:(0,n.bytesToHex)(i.raw),a=(0,n.stringToHex)(`${t.presignMessagePrefix}${(0,r.size)(o)}`);return(0,e.concat)([a,o])}return Xx}var TW;function C_(){if(TW)return Jx;TW=1,Object.defineProperty(Jx,"__esModule",{value:!0}),Jx.hashMessage=r;const t=Na(),e=die();function r(n,s){return(0,t.keccak256)((0,e.toPrefixedMessage)(n),s)}return Jx}var Pp={},Rp={},Ad={},NW;function fie(){if(NW)return Ad;NW=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.InvalidStructTypeError=Ad.InvalidPrimaryTypeError=Ad.InvalidDomainError=void 0;const t=Fi(),e=Kt();class r extends e.BaseError{constructor({domain:o}){super(`Invalid domain "${(0,t.stringify)(o)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}Ad.InvalidDomainError=r;class n extends e.BaseError{constructor({primaryType:o,types:a}){super(`Invalid primary type \`${o}\` must be one of \`${JSON.stringify(Object.keys(a))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}Ad.InvalidPrimaryTypeError=n;class s extends e.BaseError{constructor({type:o}){super(`Struct type "${o}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}return Ad.InvalidStructTypeError=s,Ad}var PW;function Y5(){if(PW)return Rp;PW=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.serializeTypedData=u,Rp.validateTypedData=l,Rp.getTypesForEIP712Domain=d,Rp.domainSeparator=f;const t=Jn(),e=Wu(),r=fie(),n=Pa(),s=Ta(),i=tt(),o=P5(),a=S_(),c=Fi();function u(g){const{domain:h,message:y,primaryType:E,types:S}=g,C=(P,D)=>{const L={...D};for(const I of P){const{name:U,type:F}=I;F==="address"&&(L[U]=L[U].toLowerCase())}return L},_=S.EIP712Domain?h?C(S.EIP712Domain,h):{}:{},T=(()=>{if(E!=="EIP712Domain")return C(S[E],y)})();return(0,c.stringify)({domain:_,message:T,primaryType:E,types:S})}function l(g){const{domain:h,message:y,primaryType:E,types:S}=g,C=(_,T)=>{for(const P of _){const{name:D,type:L}=P,I=T[D],U=L.match(o.integerRegex);if(U&&(typeof I=="number"||typeof I=="bigint")){const[A,m,b]=U;(0,i.numberToHex)(I,{signed:m==="int",size:Number.parseInt(b,10)/8})}if(L==="address"&&typeof I=="string"&&!(0,n.isAddress)(I))throw new e.InvalidAddressError({address:I});const F=L.match(o.bytesRegex);if(F){const[A,m]=F;if(m&&(0,s.size)(I)!==Number.parseInt(m,10))throw new t.BytesSizeMismatchError({expectedSize:Number.parseInt(m,10),givenSize:(0,s.size)(I)})}const B=S[L];B&&(p(L),C(B,I))}};if(S.EIP712Domain&&h){if(typeof h!="object")throw new r.InvalidDomainError({domain:h});C(S.EIP712Domain,h)}if(E!=="EIP712Domain")if(S[E])C(S[E],y);else throw new r.InvalidPrimaryTypeError({primaryType:E,types:S})}function d({domain:g}){return[typeof g?.name=="string"&&{name:"name",type:"string"},g?.version&&{name:"version",type:"string"},(typeof g?.chainId=="number"||typeof g?.chainId=="bigint")&&{name:"chainId",type:"uint256"},g?.verifyingContract&&{name:"verifyingContract",type:"address"},g?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function f({domain:g}){return(0,a.hashDomain)({domain:g,types:{EIP712Domain:d({domain:g})}})}function p(g){if(g==="address"||g==="bool"||g==="string"||g.startsWith("bytes")||g.startsWith("uint")||g.startsWith("int"))throw new r.InvalidStructTypeError({type:g})}return Rp}var RW;function S_(){if(RW)return Pp;RW=1,Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.hashTypedData=i,Pp.hashDomain=o,Pp.hashStruct=a,Pp.encodeType=l;const t=Vu(),e=hi(),r=tt(),n=Na(),s=Y5();function i(p){const{domain:g={},message:h,primaryType:y}=p,E={EIP712Domain:(0,s.getTypesForEIP712Domain)({domain:g}),...p.types};(0,s.validateTypedData)({domain:g,message:h,primaryType:y,types:E});const S=["0x1901"];return g&&S.push(o({domain:g,types:E})),y!=="EIP712Domain"&&S.push(a({data:h,primaryType:y,types:E})),(0,n.keccak256)((0,e.concat)(S))}function o({domain:p,types:g}){return a({data:p,primaryType:"EIP712Domain",types:g})}function a({data:p,primaryType:g,types:h}){const y=c({data:p,primaryType:g,types:h});return(0,n.keccak256)(y)}function c({data:p,primaryType:g,types:h}){const y=[{type:"bytes32"}],E=[u({primaryType:g,types:h})];for(const S of h[g]){const[C,_]=f({types:h,name:S.name,type:S.type,value:p[S.name]});y.push(C),E.push(_)}return(0,t.encodeAbiParameters)(y,E)}function u({primaryType:p,types:g}){const h=(0,r.toHex)(l({primaryType:p,types:g}));return(0,n.keccak256)(h)}function l({primaryType:p,types:g}){let h="";const y=d({primaryType:p,types:g});y.delete(p);const E=[p,...Array.from(y).sort()];for(const S of E)h+=`${S}(${g[S].map(({name:C,type:_})=>`${_} ${C}`).join(",")})`;return h}function d({primaryType:p,types:g},h=new Set){const E=p.match(/^\w*/u)?.[0];if(h.has(E)||g[E]===void 0)return h;h.add(E);for(const S of g[E])d({primaryType:S.type,types:g},h);return h}function f({types:p,name:g,type:h,value:y}){if(p[h]!==void 0)return[{type:"bytes32"},(0,n.keccak256)(c({data:y,primaryType:h,types:p}))];if(h==="bytes")return[{type:"bytes32"},(0,n.keccak256)(y)];if(h==="string")return[{type:"bytes32"},(0,n.keccak256)((0,r.toHex)(y))];if(h.lastIndexOf("]")===h.length-1){const E=h.slice(0,h.lastIndexOf("[")),S=y.map(C=>f({name:g,type:E,types:p,value:C}));return[{type:"bytes32"},(0,n.keccak256)((0,t.encodeAbiParameters)(S.map(([C])=>C),S.map(([,C])=>C)))]}return[{type:h},y]}return Pp}var Qx={},Op={},OW;function c9(){return OW||(OW=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.zeroHash=Op.erc6492MagicBytes=void 0,Op.erc6492MagicBytes="0x6492649264926492649264926492649264926492649264926492649264926492",Op.zeroHash="0x0000000000000000000000000000000000000000000000000000000000000000"),Op}var kW;function u9(){if(kW)return Qx;kW=1,Object.defineProperty(Qx,"__esModule",{value:!0}),Qx.isErc6492Signature=r;const t=c9(),e=Jc();function r(n){return(0,e.sliceHex)(n,-32)===t.erc6492MagicBytes}return Qx}var eC={},Yw={},mR={},Qn={},So={},em={},Jw={},BW;function oMe(){if(BW)return Jw;BW=1,Object.defineProperty(Jw,"__esModule",{value:!0}),Jw.LruMap=void 0;class t extends Map{constructor(r){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=r}get(r){const n=super.get(r);return super.has(r)&&n!==void 0&&(this.delete(r),super.set(r,n)),n}set(r,n){if(super.set(r,n),this.maxSize&&this.size>this.maxSize){const s=this.keys().next().value;s&&this.delete(s)}return this}}return Jw.LruMap=t,Jw}var UW;function aMe(){if(UW)return em;UW=1,Object.defineProperty(em,"__esModule",{value:!0}),em.checksum=void 0,em.clear=r;const t=oMe(),e={checksum:new t.LruMap(8192)};em.checksum=e.checksum;function r(){for(const n of Object.values(e))n.clear()}return em}var kp={},MW;function l9(){if(MW)return kp;MW=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.keccak256=i,kp.ripemd160=o,kp.sha256=a,kp.validate=c;const t=eie(),e=hse(),r=Sse(),n=Gl(),s=$i();function i(u,l={}){const{as:d=typeof u=="string"?"Hex":"Bytes"}=l,f=(0,e.keccak_256)(n.from(u));return d==="Bytes"?f:s.fromBytes(f)}function o(u,l={}){const{as:d=typeof u=="string"?"Hex":"Bytes"}=l,f=(0,t.ripemd160)(n.from(u));return d==="Bytes"?f:s.fromBytes(f)}function a(u,l={}){const{as:d=typeof u=="string"?"Hex":"Bytes"}=l,f=(0,r.sha256)(n.from(u));return d==="Bytes"?f:s.fromBytes(f)}function c(u){return s.validate(u)&&s.size(u)===32}return kp}var bs={},DW;function hie(){if(DW)return bs;DW=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.InvalidSerializedSizeError=bs.InvalidUncompressedPrefixError=bs.InvalidCompressedPrefixError=bs.InvalidPrefixError=bs.InvalidError=void 0,bs.assert=s,bs.compress=i,bs.from=o,bs.fromBytes=a,bs.fromHex=c,bs.toBytes=u,bs.toHex=l,bs.validate=d;const t=Gl(),e=gc(),r=$i(),n=$5();function s(E,S={}){const{compressed:C}=S,{prefix:_,x:T,y:P}=E;if(C===!1||typeof T=="bigint"&&typeof P=="bigint"){if(_!==4)throw new p({prefix:_,cause:new h});return}if(C===!0||typeof T=="bigint"&&typeof P>"u"){if(_!==3&&_!==2)throw new p({prefix:_,cause:new g});return}throw new f({publicKey:E})}function i(E){const{x:S,y:C}=E;return{prefix:C%2n===0n?2:3,x:S}}function o(E){const S=(()=>{if(r.validate(E))return c(E);if(t.validate(E))return a(E);const{prefix:C,x:_,y:T}=E;return typeof _=="bigint"&&typeof T=="bigint"?{prefix:C??4,x:_,y:T}:{prefix:C,x:_}})();return s(S),S}function a(E){return c(r.fromBytes(E))}function c(E){if(E.length!==132&&E.length!==130&&E.length!==68)throw new y({publicKey:E});if(E.length===130){const _=BigInt(r.slice(E,0,32)),T=BigInt(r.slice(E,32,64));return{prefix:4,x:_,y:T}}if(E.length===132){const _=Number(r.slice(E,0,1)),T=BigInt(r.slice(E,1,33)),P=BigInt(r.slice(E,33,65));return{prefix:_,x:T,y:P}}const S=Number(r.slice(E,0,1)),C=BigInt(r.slice(E,1,33));return{prefix:S,x:C}}function u(E,S={}){return t.fromHex(l(E,S))}function l(E,S={}){s(E);const{prefix:C,x:_,y:T}=E,{includePrefix:P=!0}=S;return r.concat(P?r.fromNumber(C,{size:1}):"0x",r.fromNumber(_,{size:32}),typeof T=="bigint"?r.fromNumber(T,{size:32}):"0x")}function d(E,S={}){try{return s(E,S),!0}catch{return!1}}class f extends e.BaseError{constructor({publicKey:S}){super(`Value \`${n.stringify(S)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}bs.InvalidError=f;class p extends e.BaseError{constructor({prefix:S,cause:C}){super(`Prefix "${S}" is invalid.`,{cause:C}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}bs.InvalidPrefixError=p;class g extends e.BaseError{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}bs.InvalidCompressedPrefixError=g;class h extends e.BaseError{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}bs.InvalidUncompressedPrefixError=h;class y extends e.BaseError{constructor({publicKey:S}){super(`Value \`${S}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${r.size(r.from(S))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}return bs.InvalidSerializedSizeError=y,bs}var jW;function J5(){if(jW)return So;jW=1,Object.defineProperty(So,"__esModule",{value:!0}),So.InvalidChecksumError=So.InvalidInputError=So.InvalidAddressError=void 0,So.assert=o,So.checksum=a,So.from=c,So.fromPublicKey=u,So.isEqual=l,So.validate=d;const t=Gl(),e=aMe(),r=gc(),n=l9(),s=hie(),i=/^0x[a-fA-F0-9]{40}$/;function o(h,y={}){const{strict:E=!0}=y;if(!i.test(h))throw new f({address:h,cause:new p});if(E){if(h.toLowerCase()===h)return;if(a(h)!==h)throw new f({address:h,cause:new g})}}function a(h){if(e.checksum.has(h))return e.checksum.get(h);o(h,{strict:!1});const y=h.substring(2).toLowerCase(),E=n.keccak256(t.fromString(y),{as:"Bytes"}),S=y.split("");for(let _=0;_<40;_+=2)E[_>>1]>>4>=8&&S[_]&&(S[_]=S[_].toUpperCase()),(E[_>>1]&15)>=8&&S[_+1]&&(S[_+1]=S[_+1].toUpperCase());const C=`0x${S.join("")}`;return e.checksum.set(h,C),C}function c(h,y={}){const{checksum:E=!1}=y;return o(h),E?a(h):h}function u(h,y={}){const E=n.keccak256(`0x${s.toHex(h).slice(4)}`).substring(26);return c(`0x${E}`,y)}function l(h,y){return o(h,{strict:!1}),o(y,{strict:!1}),h.toLowerCase()===y.toLowerCase()}function d(h,y={}){const{strict:E=!0}=y??{};try{return o(h,{strict:E}),!0}catch{return!1}}class f extends r.BaseError{constructor({address:y,cause:E}){super(`Address "${y}" is invalid.`,{cause:E}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}So.InvalidAddressError=f;class p extends r.BaseError{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}So.InvalidInputError=p;class g extends r.BaseError{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}return So.InvalidChecksumError=g,So}var es={},ie={},LW;function d9(){return LW||(LW=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.minInt120=ie.minInt112=ie.minInt104=ie.minInt96=ie.minInt88=ie.minInt80=ie.minInt72=ie.minInt64=ie.minInt56=ie.minInt48=ie.minInt40=ie.minInt32=ie.minInt24=ie.minInt16=ie.minInt8=ie.maxInt256=ie.maxInt248=ie.maxInt240=ie.maxInt232=ie.maxInt224=ie.maxInt216=ie.maxInt208=ie.maxInt200=ie.maxInt192=ie.maxInt184=ie.maxInt176=ie.maxInt168=ie.maxInt160=ie.maxInt152=ie.maxInt144=ie.maxInt136=ie.maxInt128=ie.maxInt120=ie.maxInt112=ie.maxInt104=ie.maxInt96=ie.maxInt88=ie.maxInt80=ie.maxInt72=ie.maxInt64=ie.maxInt56=ie.maxInt48=ie.maxInt40=ie.maxInt32=ie.maxInt24=ie.maxInt16=ie.maxInt8=ie.integerRegex=ie.bytesRegex=ie.arrayRegex=void 0,ie.maxUint256=ie.maxUint248=ie.maxUint240=ie.maxUint232=ie.maxUint224=ie.maxUint216=ie.maxUint208=ie.maxUint200=ie.maxUint192=ie.maxUint184=ie.maxUint176=ie.maxUint168=ie.maxUint160=ie.maxUint152=ie.maxUint144=ie.maxUint136=ie.maxUint128=ie.maxUint120=ie.maxUint112=ie.maxUint104=ie.maxUint96=ie.maxUint88=ie.maxUint80=ie.maxUint72=ie.maxUint64=ie.maxUint56=ie.maxUint48=ie.maxUint40=ie.maxUint32=ie.maxUint24=ie.maxUint16=ie.maxUint8=ie.minInt256=ie.minInt248=ie.minInt240=ie.minInt232=ie.minInt224=ie.minInt216=ie.minInt208=ie.minInt200=ie.minInt192=ie.minInt184=ie.minInt176=ie.minInt168=ie.minInt160=ie.minInt152=ie.minInt144=ie.minInt136=ie.minInt128=void 0,ie.arrayRegex=/^(.*)\[([0-9]*)\]$/,ie.bytesRegex=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,ie.integerRegex=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,ie.maxInt8=2n**(8n-1n)-1n,ie.maxInt16=2n**(16n-1n)-1n,ie.maxInt24=2n**(24n-1n)-1n,ie.maxInt32=2n**(32n-1n)-1n,ie.maxInt40=2n**(40n-1n)-1n,ie.maxInt48=2n**(48n-1n)-1n,ie.maxInt56=2n**(56n-1n)-1n,ie.maxInt64=2n**(64n-1n)-1n,ie.maxInt72=2n**(72n-1n)-1n,ie.maxInt80=2n**(80n-1n)-1n,ie.maxInt88=2n**(88n-1n)-1n,ie.maxInt96=2n**(96n-1n)-1n,ie.maxInt104=2n**(104n-1n)-1n,ie.maxInt112=2n**(112n-1n)-1n,ie.maxInt120=2n**(120n-1n)-1n,ie.maxInt128=2n**(128n-1n)-1n,ie.maxInt136=2n**(136n-1n)-1n,ie.maxInt144=2n**(144n-1n)-1n,ie.maxInt152=2n**(152n-1n)-1n,ie.maxInt160=2n**(160n-1n)-1n,ie.maxInt168=2n**(168n-1n)-1n,ie.maxInt176=2n**(176n-1n)-1n,ie.maxInt184=2n**(184n-1n)-1n,ie.maxInt192=2n**(192n-1n)-1n,ie.maxInt200=2n**(200n-1n)-1n,ie.maxInt208=2n**(208n-1n)-1n,ie.maxInt216=2n**(216n-1n)-1n,ie.maxInt224=2n**(224n-1n)-1n,ie.maxInt232=2n**(232n-1n)-1n,ie.maxInt240=2n**(240n-1n)-1n,ie.maxInt248=2n**(248n-1n)-1n,ie.maxInt256=2n**(256n-1n)-1n,ie.minInt8=-(2n**(8n-1n)),ie.minInt16=-(2n**(16n-1n)),ie.minInt24=-(2n**(24n-1n)),ie.minInt32=-(2n**(32n-1n)),ie.minInt40=-(2n**(40n-1n)),ie.minInt48=-(2n**(48n-1n)),ie.minInt56=-(2n**(56n-1n)),ie.minInt64=-(2n**(64n-1n)),ie.minInt72=-(2n**(72n-1n)),ie.minInt80=-(2n**(80n-1n)),ie.minInt88=-(2n**(88n-1n)),ie.minInt96=-(2n**(96n-1n)),ie.minInt104=-(2n**(104n-1n)),ie.minInt112=-(2n**(112n-1n)),ie.minInt120=-(2n**(120n-1n)),ie.minInt128=-(2n**(128n-1n)),ie.minInt136=-(2n**(136n-1n)),ie.minInt144=-(2n**(144n-1n)),ie.minInt152=-(2n**(152n-1n)),ie.minInt160=-(2n**(160n-1n)),ie.minInt168=-(2n**(168n-1n)),ie.minInt176=-(2n**(176n-1n)),ie.minInt184=-(2n**(184n-1n)),ie.minInt192=-(2n**(192n-1n)),ie.minInt200=-(2n**(200n-1n)),ie.minInt208=-(2n**(208n-1n)),ie.minInt216=-(2n**(216n-1n)),ie.minInt224=-(2n**(224n-1n)),ie.minInt232=-(2n**(232n-1n)),ie.minInt240=-(2n**(240n-1n)),ie.minInt248=-(2n**(248n-1n)),ie.minInt256=-(2n**(256n-1n)),ie.maxUint8=2n**8n-1n,ie.maxUint16=2n**16n-1n,ie.maxUint24=2n**24n-1n,ie.maxUint32=2n**32n-1n,ie.maxUint40=2n**40n-1n,ie.maxUint48=2n**48n-1n,ie.maxUint56=2n**56n-1n,ie.maxUint64=2n**64n-1n,ie.maxUint72=2n**72n-1n,ie.maxUint80=2n**80n-1n,ie.maxUint88=2n**88n-1n,ie.maxUint96=2n**96n-1n,ie.maxUint104=2n**104n-1n,ie.maxUint112=2n**112n-1n,ie.maxUint120=2n**120n-1n,ie.maxUint128=2n**128n-1n,ie.maxUint136=2n**136n-1n,ie.maxUint144=2n**144n-1n,ie.maxUint152=2n**152n-1n,ie.maxUint160=2n**160n-1n,ie.maxUint168=2n**168n-1n,ie.maxUint176=2n**176n-1n,ie.maxUint184=2n**184n-1n,ie.maxUint192=2n**192n-1n,ie.maxUint200=2n**200n-1n,ie.maxUint208=2n**208n-1n,ie.maxUint216=2n**216n-1n,ie.maxUint224=2n**224n-1n,ie.maxUint232=2n**232n-1n,ie.maxUint240=2n**240n-1n,ie.maxUint248=2n**248n-1n,ie.maxUint256=2n**256n-1n),ie}var FW;function cMe(){if(FW)return es;FW=1,Object.defineProperty(es,"__esModule",{value:!0}),es.decodeParameter=o,es.decodeAddress=u,es.decodeArray=l,es.decodeBool=d,es.decodeBytes=f,es.decodeNumber=p,es.decodeTuple=g,es.decodeString=h,es.prepareParameters=y,es.prepareParameter=E,es.encode=S,es.encodeAddress=C,es.encodeArray=_,es.encodeBytes=T,es.encodeBoolean=P,es.encodeNumber=D,es.encodeString=L,es.encodeTuple=I,es.getArrayComponents=U,es.hasDynamicChild=F;const t=I_(),e=J5(),r=Gl(),n=gc(),s=$i(),i=d9();function o(B,A,m){const{checksumAddress:b,staticPosition:w}=m,x=U(A.type);if(x){const[M,k]=x;return l(B,{...A,type:k},{checksumAddress:b,length:M,staticPosition:w})}if(A.type==="tuple")return g(B,A,{checksumAddress:b,staticPosition:w});if(A.type==="address")return u(B,{checksum:b});if(A.type==="bool")return d(B);if(A.type.startsWith("bytes"))return f(B,A,{staticPosition:w});if(A.type.startsWith("uint")||A.type.startsWith("int"))return p(B,A);if(A.type==="string")return h(B,{staticPosition:w});throw new t.InvalidTypeError(A.type)}const a=32,c=32;function u(B,A={}){const{checksum:m=!1}=A,b=B.readBytes(32);return[(x=>m?e.checksum(x):x)(s.fromBytes(r.slice(b,-20))),32]}function l(B,A,m){const{checksumAddress:b,length:w,staticPosition:x}=m;if(!w){const j=r.toNumber(B.readBytes(c)),N=x+j,v=N+a;B.setPosition(N);const R=r.toNumber(B.readBytes(a)),$=F(A);let O=0;const H=[];for(let W=0;W<R;++W){B.setPosition(v+($?W*32:O));const[G,K]=o(B,A,{checksumAddress:b,staticPosition:v});O+=K,H.push(G)}return B.setPosition(x+32),[H,32]}if(F(A)){const j=r.toNumber(B.readBytes(c)),N=x+j,v=[];for(let R=0;R<w;++R){B.setPosition(N+R*32);const[$]=o(B,A,{checksumAddress:b,staticPosition:N});v.push($)}return B.setPosition(x+32),[v,32]}let M=0;const k=[];for(let j=0;j<w;++j){const[N,v]=o(B,A,{checksumAddress:b,staticPosition:x+M});M+=v,k.push(N)}return[k,M]}function d(B){return[r.toBoolean(B.readBytes(32),{size:32}),32]}function f(B,A,{staticPosition:m}){const[b,w]=A.type.split("bytes");if(!w){const M=r.toNumber(B.readBytes(32));B.setPosition(m+M);const k=r.toNumber(B.readBytes(32));if(k===0)return B.setPosition(m+32),["0x",32];const j=B.readBytes(k);return B.setPosition(m+32),[s.fromBytes(j),32]}return[s.fromBytes(B.readBytes(Number.parseInt(w,10),32)),32]}function p(B,A){const m=A.type.startsWith("int"),b=Number.parseInt(A.type.split("int")[1]||"256",10),w=B.readBytes(32);return[b>48?r.toBigInt(w,{signed:m}):r.toNumber(w,{signed:m}),32]}function g(B,A,m){const{checksumAddress:b,staticPosition:w}=m,x=A.components.length===0||A.components.some(({name:j})=>!j),M=x?[]:{};let k=0;if(F(A)){const j=r.toNumber(B.readBytes(c)),N=w+j;for(let v=0;v<A.components.length;++v){const R=A.components[v];B.setPosition(N+k);const[$,O]=o(B,R,{checksumAddress:b,staticPosition:N});k+=O,M[x?v:R?.name]=$}return B.setPosition(w+32),[M,32]}for(let j=0;j<A.components.length;++j){const N=A.components[j],[v,R]=o(B,N,{checksumAddress:b,staticPosition:w});M[x?j:N?.name]=v,k+=R}return[M,k]}function h(B,{staticPosition:A}){const m=r.toNumber(B.readBytes(32)),b=A+m;B.setPosition(b);const w=r.toNumber(B.readBytes(32));if(w===0)return B.setPosition(A+32),["",32];const x=B.readBytes(w,32),M=r.toString(r.trimLeft(x));return B.setPosition(A+32),[M,32]}function y({checksumAddress:B,parameters:A,values:m}){const b=[];for(let w=0;w<A.length;w++)b.push(E({checksumAddress:B,parameter:A[w],value:m[w]}));return b}function E({checksumAddress:B=!1,parameter:A,value:m}){const b=A,w=U(b.type);if(w){const[x,M]=w;return _(m,{checksumAddress:B,length:x,parameter:{...b,type:M}})}if(b.type==="tuple")return I(m,{checksumAddress:B,parameter:b});if(b.type==="address")return C(m,{checksum:B});if(b.type==="bool")return P(m);if(b.type.startsWith("uint")||b.type.startsWith("int")){const x=b.type.startsWith("int"),[,,M="256"]=i.integerRegex.exec(b.type)??[];return D(m,{signed:x,size:Number(M)})}if(b.type.startsWith("bytes"))return T(m,{type:b.type});if(b.type==="string")return L(m);throw new t.InvalidTypeError(b.type)}function S(B){let A=0;for(let x=0;x<B.length;x++){const{dynamic:M,encoded:k}=B[x];M?A+=32:A+=s.size(k)}const m=[],b=[];let w=0;for(let x=0;x<B.length;x++){const{dynamic:M,encoded:k}=B[x];M?(m.push(s.fromNumber(A+w,{size:32})),b.push(k),w+=s.size(k)):m.push(k)}return s.concat(...m,...b)}function C(B,A){const{checksum:m=!1}=A;return e.assert(B,{strict:m}),{dynamic:!1,encoded:s.padLeft(B.toLowerCase())}}function _(B,A){const{checksumAddress:m,length:b,parameter:w}=A,x=b===null;if(!Array.isArray(B))throw new t.InvalidArrayError(B);if(!x&&B.length!==b)throw new t.ArrayLengthMismatchError({expectedLength:b,givenLength:B.length,type:`${w.type}[${b}]`});let M=!1;const k=[];for(let j=0;j<B.length;j++){const N=E({checksumAddress:m,parameter:w,value:B[j]});N.dynamic&&(M=!0),k.push(N)}if(x||M){const j=S(k);if(x){const N=s.fromNumber(k.length,{size:32});return{dynamic:!0,encoded:k.length>0?s.concat(N,j):N}}if(M)return{dynamic:!0,encoded:j}}return{dynamic:!1,encoded:s.concat(...k.map(({encoded:j})=>j))}}function T(B,{type:A}){const[,m]=A.split("bytes"),b=s.size(B);if(!m){let w=B;return b%32!==0&&(w=s.padRight(w,Math.ceil((B.length-2)/2/32)*32)),{dynamic:!0,encoded:s.concat(s.padLeft(s.fromNumber(b,{size:32})),w)}}if(b!==Number.parseInt(m,10))throw new t.BytesSizeMismatchError({expectedSize:Number.parseInt(m,10),value:B});return{dynamic:!1,encoded:s.padRight(B)}}function P(B){if(typeof B!="boolean")throw new n.BaseError(`Invalid boolean value: "${B}" (type: ${typeof B}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:s.padLeft(s.fromBoolean(B))}}function D(B,{signed:A,size:m}){if(typeof m=="number"){const b=2n**(BigInt(m)-(A?1n:0n))-1n,w=A?-b-1n:0n;if(B>b||B<w)throw new s.IntegerOutOfRangeError({max:b.toString(),min:w.toString(),signed:A,size:m/8,value:B.toString()})}return{dynamic:!1,encoded:s.fromNumber(B,{size:32,signed:A})}}function L(B){const A=s.fromString(B),m=Math.ceil(s.size(A)/32),b=[];for(let w=0;w<m;w++)b.push(s.padRight(s.slice(A,w*32,(w+1)*32)));return{dynamic:!0,encoded:s.concat(s.padRight(s.fromNumber(s.size(A),{size:32})),...b)}}function I(B,A){const{checksumAddress:m,parameter:b}=A;let w=!1;const x=[];for(let M=0;M<b.components.length;M++){const k=b.components[M],j=Array.isArray(B)?M:k.name,N=E({checksumAddress:m,parameter:k,value:B[j]});x.push(N),N.dynamic&&(w=!0)}return{dynamic:w,encoded:w?S(x):s.concat(...x.map(({encoded:M})=>M))}}function U(B){const A=B.match(/^(.*)\[(\d+)?\]$/);return A?[A[2]?Number(A[2]):null,A[1]]:void 0}function F(B){const{type:A}=B;if(A==="string"||A==="bytes"||A.endsWith("[]"))return!0;if(A==="tuple")return B.components?.some(F);const m=U(B.type);return!!(m&&F({...B,type:m[1]}))}return es}var ol={},$W;function pie(){if($W)return ol;$W=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.RecursiveReadLimitExceededError=ol.PositionOutOfBoundsError=ol.NegativeOffsetError=void 0,ol.create=r;const t=gc(),e={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new i({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(o){if(o<0||o>this.bytes.length-1)throw new s({length:this.bytes.length,position:o})},decrementPosition(o){if(o<0)throw new n({offset:o});const a=this.position-o;this.assertPosition(a),this.position=a},getReadCount(o){return this.positionReadCount.get(o||this.position)||0},incrementPosition(o){if(o<0)throw new n({offset:o});const a=this.position+o;this.assertPosition(a),this.position=a},inspectByte(o){const a=o??this.position;return this.assertPosition(a),this.bytes[a]},inspectBytes(o,a){const c=a??this.position;return this.assertPosition(c+o-1),this.bytes.subarray(c,c+o)},inspectUint8(o){const a=o??this.position;return this.assertPosition(a),this.bytes[a]},inspectUint16(o){const a=o??this.position;return this.assertPosition(a+1),this.dataView.getUint16(a)},inspectUint24(o){const a=o??this.position;return this.assertPosition(a+2),(this.dataView.getUint16(a)<<8)+this.dataView.getUint8(a+2)},inspectUint32(o){const a=o??this.position;return this.assertPosition(a+3),this.dataView.getUint32(a)},pushByte(o){this.assertPosition(this.position),this.bytes[this.position]=o,this.position++},pushBytes(o){this.assertPosition(this.position+o.length-1),this.bytes.set(o,this.position),this.position+=o.length},pushUint8(o){this.assertPosition(this.position),this.bytes[this.position]=o,this.position++},pushUint16(o){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,o),this.position+=2},pushUint24(o){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,o>>8),this.dataView.setUint8(this.position+2,o&255),this.position+=3},pushUint32(o){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,o),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const o=this.inspectByte();return this.position++,o},readBytes(o,a){this.assertReadLimit(),this._touch();const c=this.inspectBytes(o);return this.position+=a??o,c},readUint8(){this.assertReadLimit(),this._touch();const o=this.inspectUint8();return this.position+=1,o},readUint16(){this.assertReadLimit(),this._touch();const o=this.inspectUint16();return this.position+=2,o},readUint24(){this.assertReadLimit(),this._touch();const o=this.inspectUint24();return this.position+=3,o},readUint32(){this.assertReadLimit(),this._touch();const o=this.inspectUint32();return this.position+=4,o},get remaining(){return this.bytes.length-this.position},setPosition(o){const a=this.position;return this.assertPosition(o),this.position=o,()=>this.position=a},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const o=this.getReadCount();this.positionReadCount.set(this.position,o+1),o>0&&this.recursiveReadCount++}};function r(o,{recursiveReadLimit:a=8192}={}){const c=Object.create(e);return c.bytes=o,c.dataView=new DataView(o.buffer,o.byteOffset,o.byteLength),c.positionReadCount=new Map,c.recursiveReadLimit=a,c}class n extends t.BaseError{constructor({offset:a}){super(`Offset \`${a}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}ol.NegativeOffsetError=n;class s extends t.BaseError{constructor({length:a,position:c}){super(`Position \`${c}\` is out of bounds (\`0 < position < ${a}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}ol.PositionOutOfBoundsError=s;class i extends t.BaseError{constructor({count:a,limit:c}){super(`Recursive read limit of \`${c}\` exceeded (recursive read count: \`${a}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}return ol.RecursiveReadLimitExceededError=i,ol}var qW;function I_(){if(qW)return Qn;qW=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.InvalidTypeError=Qn.InvalidArrayError=Qn.LengthMismatchError=Qn.BytesSizeMismatchError=Qn.ArrayLengthMismatchError=Qn.ZeroDataError=Qn.DataSizeTooSmallError=void 0,Qn.decode=c,Qn.encode=u,Qn.encodePacked=l,Qn.format=d,Qn.from=f;const t=Vh(),e=J5(),r=Gl(),n=gc(),s=$i(),i=cMe(),o=pie(),a=d9();function c(_,T,P={}){const{as:D="Array",checksumAddress:L=!1}=P,I=typeof T=="string"?r.fromHex(T):T,U=o.create(I);if(r.size(I)===0&&_.length>0)throw new g;if(r.size(I)&&r.size(I)<32)throw new p({data:typeof T=="string"?T:s.fromBytes(T),parameters:_,size:r.size(I)});let F=0;const B=D==="Array"?[]:{};for(let A=0;A<_.length;++A){const m=_[A];U.setPosition(F);const[b,w]=i.decodeParameter(U,m,{checksumAddress:L,staticPosition:0});F+=w,D==="Array"?B.push(b):B[m.name??A]=b}return B}function u(_,T,P){const{checksumAddress:D=!1}=P??{};if(_.length!==T.length)throw new E({expectedLength:_.length,givenLength:T.length});const L=i.prepareParameters({checksumAddress:D,parameters:_,values:T}),I=i.encode(L);return I.length===0?"0x":I}function l(_,T){if(_.length!==T.length)throw new E({expectedLength:_.length,givenLength:T.length});const P=[];for(let D=0;D<_.length;D++){const L=_[D],I=T[D];P.push(l.encode(L,I))}return s.concat(...P)}(function(_){function T(P,D,L=!1){if(P==="address"){const B=D;return e.assert(B),s.padLeft(B.toLowerCase(),L?32:0)}if(P==="string")return s.fromString(D);if(P==="bytes")return D;if(P==="bool")return s.padLeft(s.fromBoolean(D),L?32:1);const I=P.match(a.integerRegex);if(I){const[B,A,m="256"]=I,b=Number.parseInt(m,10)/8;return s.fromNumber(D,{size:L?32:b,signed:A==="int"})}const U=P.match(a.bytesRegex);if(U){const[B,A]=U;if(Number.parseInt(A,10)!==(D.length-2)/2)throw new y({expectedSize:Number.parseInt(A,10),value:D});return s.padRight(D,L?32:0)}const F=P.match(a.arrayRegex);if(F&&Array.isArray(D)){const[B,A]=F,m=[];for(let b=0;b<D.length;b++)m.push(T(A,D[b],!0));return m.length===0?"0x":s.concat(...m)}throw new C(P)}_.encode=T})(l||(Qn.encodePacked=l={}));function d(_){return t.formatAbiParameters(_)}function f(_){return Array.isArray(_)&&typeof _[0]=="string"||typeof _=="string"?t.parseAbiParameters(_):_}class p extends n.BaseError{constructor({data:T,parameters:P,size:D}){super(`Data size of ${D} bytes is too small for given parameters.`,{metaMessages:[`Params: (${t.formatAbiParameters(P)})`,`Data:   ${T} (${D} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}Qn.DataSizeTooSmallError=p;class g extends n.BaseError{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}Qn.ZeroDataError=g;class h extends n.BaseError{constructor({expectedLength:T,givenLength:P,type:D}){super(`Array length mismatch for type \`${D}\`. Expected: \`${T}\`. Given: \`${P}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}Qn.ArrayLengthMismatchError=h;class y extends n.BaseError{constructor({expectedSize:T,value:P}){super(`Size of bytes "${P}" (bytes${s.size(P)}) does not match expected size (bytes${T}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}Qn.BytesSizeMismatchError=y;class E extends n.BaseError{constructor({expectedLength:T,givenLength:P}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${T}`,`Given length (values): ${P}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}Qn.LengthMismatchError=E;class S extends n.BaseError{constructor(T){super(`Value \`${T}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}Qn.InvalidArrayError=S;class C extends n.BaseError{constructor(T){super(`Type \`${T}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}return Qn.InvalidTypeError=C,Qn}var Jo={},Tc={},HW;function uMe(){if(HW)return Tc;HW=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.toBytes=s,Tc.toHex=i,Tc.to=o,Tc.decodeRlpCursor=a,Tc.readLength=c,Tc.readList=u,Tc.from=l,Tc.fromBytes=d,Tc.fromHex=f;const t=Gl(),e=gc(),r=$i(),n=pie();function s(E){return o(E,"Bytes")}function i(E){return o(E,"Hex")}function o(E,S){const C=S??(typeof E=="string"?"Hex":"Bytes"),_=(()=>{if(typeof E=="string"){if(E.length>3&&E.length%2!==0)throw new r.InvalidLengthError(E);return t.fromHex(E)}return E})(),T=n.create(_,{recursiveReadLimit:Number.POSITIVE_INFINITY});return a(T,C)}function a(E,S="Hex"){if(E.bytes.length===0)return S==="Hex"?r.fromBytes(E.bytes):E.bytes;const C=E.readByte();if(C<128&&E.decrementPosition(1),C<192){const T=c(E,C,128),P=E.readBytes(T);return S==="Hex"?r.fromBytes(P):P}const _=c(E,C,192);return u(E,_,S)}function c(E,S,C){if(C===128&&S<128)return 1;if(S<=C+55)return S-C;if(S===C+55+1)return E.readUint8();if(S===C+55+2)return E.readUint16();if(S===C+55+3)return E.readUint24();if(S===C+55+4)return E.readUint32();throw new e.BaseError("Invalid RLP prefix")}function u(E,S,C){const _=E.position,T=[];for(;E.position-_<S;)T.push(a(E,C));return T}function l(E,S){const{as:C}=S,_=p(E),T=n.create(new Uint8Array(_.length));return _.encode(T),C==="Hex"?r.fromBytes(T.bytes):T.bytes}function d(E,S={}){const{as:C="Bytes"}=S;return l(E,{as:C})}function f(E,S={}){const{as:C="Hex"}=S;return l(E,{as:C})}function p(E){return Array.isArray(E)?g(E.map(S=>p(S))):h(E)}function g(E){const S=E.reduce((T,P)=>T+P.length,0),C=y(S);return{length:S<=55?1+S:1+C+S,encode(T){S<=55?T.pushByte(192+S):(T.pushByte(247+C),C===1?T.pushUint8(S):C===2?T.pushUint16(S):C===3?T.pushUint24(S):T.pushUint32(S));for(const{encode:P}of E)P(T)}}}function h(E){const S=typeof E=="string"?t.fromHex(E):E,C=y(S.length);return{length:S.length===1&&S[0]<128?1:S.length<=55?1+S.length:1+C+S.length,encode(T){S.length===1&&S[0]<128?T.pushBytes(S):S.length<=55?(T.pushByte(128+S.length),T.pushBytes(S)):(T.pushByte(183+C),C===1?T.pushUint8(S.length):C===2?T.pushUint16(S.length):C===3?T.pushUint24(S.length):T.pushUint32(S.length),T.pushBytes(S))}}}function y(E){if(E<2**8)return 1;if(E<2**16)return 2;if(E<2**24)return 3;if(E<2**32)return 4;throw new e.BaseError("Length is too large.")}return Tc}var gr={},zW;function gie(){if(zW)return gr;zW=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.InvalidVError=gr.InvalidYParityError=gr.InvalidSError=gr.InvalidRError=gr.MissingPropertiesError=gr.InvalidSerializedSizeError=void 0,gr.assert=o,gr.fromBytes=a,gr.fromHex=c,gr.extract=u,gr.from=l,gr.fromDerBytes=d,gr.fromDerHex=f,gr.fromLegacy=p,gr.fromRpc=g,gr.fromTuple=h,gr.toBytes=y,gr.toHex=E,gr.toDerBytes=S,gr.toDerHex=C,gr.toLegacy=_,gr.toRpc=T,gr.toTuple=P,gr.validate=D,gr.vToYParity=L,gr.yParityToV=I;const t=fg(),e=Gl(),r=gc(),n=$i(),s=$5(),i=d9();function o(w,x={}){const{recovered:M}=x;if(typeof w.r>"u")throw new F({signature:w});if(typeof w.s>"u")throw new F({signature:w});if(M&&typeof w.yParity>"u")throw new F({signature:w});if(w.r<0n||w.r>i.maxUint256)throw new B({value:w.r});if(w.s<0n||w.s>i.maxUint256)throw new A({value:w.s});if(typeof w.yParity=="number"&&w.yParity!==0&&w.yParity!==1)throw new m({value:w.yParity})}function a(w){return c(n.fromBytes(w))}function c(w){if(w.length!==130&&w.length!==132)throw new U({signature:w});const x=BigInt(n.slice(w,0,32)),M=BigInt(n.slice(w,32,64)),k=(()=>{const j=+`0x${w.slice(130)}`;if(!Number.isNaN(j))try{return L(j)}catch{throw new m({value:j})}})();return typeof k>"u"?{r:x,s:M}:{r:x,s:M,yParity:k}}function u(w){if(!(typeof w.r>"u")&&!(typeof w.s>"u"))return l(w)}function l(w){const x=typeof w=="string"?c(w):w instanceof Uint8Array?a(w):typeof w.r=="string"?g(w):w.v?p(w):{r:w.r,s:w.s,...typeof w.yParity<"u"?{yParity:w.yParity}:{}};return o(x),x}function d(w){return f(n.fromBytes(w))}function f(w){const{r:x,s:M}=t.secp256k1.Signature.fromDER(n.from(w).slice(2));return{r:x,s:M}}function p(w){return{r:w.r,s:w.s,yParity:L(w.v)}}function g(w){const x=(()=>{const M=w.v?Number(w.v):void 0;let k=w.yParity?Number(w.yParity):void 0;if(typeof M=="number"&&typeof k!="number"&&(k=L(M)),typeof k!="number")throw new m({value:w.yParity});return k})();return{r:BigInt(w.r),s:BigInt(w.s),yParity:x}}function h(w){const[x,M,k]=w;return l({r:M==="0x"?0n:BigInt(M),s:k==="0x"?0n:BigInt(k),yParity:x==="0x"?0:Number(x)})}function y(w){return e.fromHex(E(w))}function E(w){o(w);const x=w.r,M=w.s;return n.concat(n.fromNumber(x,{size:32}),n.fromNumber(M,{size:32}),typeof w.yParity=="number"?n.fromNumber(I(w.yParity),{size:1}):"0x")}function S(w){return new t.secp256k1.Signature(w.r,w.s).toDERRawBytes()}function C(w){return`0x${new t.secp256k1.Signature(w.r,w.s).toDERHex()}`}function _(w){return{r:w.r,s:w.s,v:I(w.yParity)}}function T(w){const{r:x,s:M,yParity:k}=w;return{r:n.fromNumber(x,{size:32}),s:n.fromNumber(M,{size:32}),yParity:k===0?"0x0":"0x1"}}function P(w){const{r:x,s:M,yParity:k}=w;return[k?"0x01":"0x",x===0n?"0x":n.trimLeft(n.fromNumber(x)),M===0n?"0x":n.trimLeft(n.fromNumber(M))]}function D(w,x={}){try{return o(w,x),!0}catch{return!1}}function L(w){if(w===0||w===27)return 0;if(w===1||w===28)return 1;if(w>=35)return w%2===0?1:0;throw new b({value:w})}function I(w){if(w===0)return 27;if(w===1)return 28;throw new m({value:w})}class U extends r.BaseError{constructor({signature:x}){super(`Value \`${x}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${n.size(n.from(x))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}gr.InvalidSerializedSizeError=U;class F extends r.BaseError{constructor({signature:x}){super(`Signature \`${s.stringify(x)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}gr.MissingPropertiesError=F;class B extends r.BaseError{constructor({value:x}){super(`Value \`${x}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}gr.InvalidRError=B;class A extends r.BaseError{constructor({value:x}){super(`Value \`${x}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}gr.InvalidSError=A;class m extends r.BaseError{constructor({value:x}){super(`Value \`${x}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}gr.InvalidYParityError=m;class b extends r.BaseError{constructor({value:x}){super(`Value \`${x}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}return gr.InvalidVError=b,gr}var WW;function lMe(){if(WW)return Jo;WW=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.from=s,Jo.fromRpc=i,Jo.fromRpcList=o,Jo.fromTuple=a,Jo.fromTupleList=c,Jo.getSignPayload=u,Jo.hash=l,Jo.toRpc=d,Jo.toRpcList=f,Jo.toTuple=p,Jo.toTupleList=g;const t=l9(),e=$i(),r=uMe(),n=gie();function s(h,y={}){return typeof h.chainId=="string"?i(h):{...h,...y.signature}}function i(h){const{address:y,chainId:E,nonce:S}=h,C=n.extract(h);return{address:y,chainId:Number(E),nonce:BigInt(S),...C}}function o(h){return h.map(i)}function a(h){const[y,E,S,C,_,T]=h;let P={address:E,chainId:y==="0x"?0:Number(y),nonce:S==="0x"?0n:BigInt(S)};return C&&_&&T&&(P={...P,...n.fromTuple([C,_,T])}),s(P)}function c(h){const y=[];for(const E of h)y.push(a(E));return y}function u(h){return l(h,{presign:!0})}function l(h,y={}){const{presign:E}=y;return t.keccak256(e.concat("0x05",r.fromHex(p(E?{address:h.address,chainId:h.chainId,nonce:h.nonce}:h))))}function d(h){const{address:y,chainId:E,nonce:S,...C}=h;return{address:y,chainId:e.fromNumber(E),nonce:e.fromNumber(S),...n.toRpc(C)}}function f(h){return h.map(d)}function p(h){const{address:y,chainId:E,nonce:S}=h,C=n.extract(h);return[E?e.fromNumber(E):"0x",y,S?e.fromNumber(S):"0x",...C?n.toTuple(C):[]]}function g(h){if(!h||h.length===0)return[];const y=[];for(const E of h)y.push(p(E));return y}return Jo}var qa={},Bp={},VW;function dMe(){if(VW)return Bp;VW=1,Object.defineProperty(Bp,"__esModule",{value:!0}),Bp.extraEntropy=void 0,Bp.setExtraEntropy=t,Bp.extraEntropy=!1;function t(e){Bp.extraEntropy=e}return Bp}var GW;function fMe(){if(GW)return qa;GW=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.noble=void 0,qa.createKeyPair=o,qa.getPublicKey=a,qa.getSharedSecret=c,qa.randomPrivateKey=u,qa.recoverAddress=l,qa.recoverPublicKey=d,qa.sign=f,qa.verify=p;const t=fg(),e=J5(),r=Gl(),n=$i(),s=dMe(),i=hie();qa.noble=t.secp256k1;function o(g={}){const{as:h="Hex"}=g,y=u({as:h}),E=a({privateKey:y});return{privateKey:y,publicKey:E}}function a(g){const{privateKey:h}=g,y=t.secp256k1.ProjectivePoint.fromPrivateKey(n.from(h).slice(2));return i.from(y)}function c(g){const{as:h="Hex",privateKey:y,publicKey:E}=g,_=t.secp256k1.ProjectivePoint.fromHex(i.toHex(E).slice(2)).multiply(t.secp256k1.utils.normPrivateKeyToScalar(n.from(y).slice(2))).toRawBytes(!0);return h==="Hex"?n.fromBytes(_):_}function u(g={}){const{as:h="Hex"}=g,y=t.secp256k1.utils.randomPrivateKey();return h==="Hex"?n.fromBytes(y):y}function l(g){return e.fromPublicKey(d(g))}function d(g){const{payload:h,signature:y}=g,{r:E,s:S,yParity:C}=y,T=new t.secp256k1.Signature(BigInt(E),BigInt(S)).addRecoveryBit(C).recoverPublicKey(n.from(h).substring(2));return i.from(T)}function f(g){const{extraEntropy:h=s.extraEntropy,hash:y,payload:E,privateKey:S}=g,{r:C,s:_,recovery:T}=t.secp256k1.sign(r.from(E),r.from(S),{extraEntropy:typeof h=="boolean"?h:n.from(h).slice(2),lowS:!0,...y?{prehash:!0}:{}});return{r:C,s:_,yParity:T}}function p(g){const{address:h,hash:y,payload:E,publicKey:S,signature:C}=g;return h?e.isEqual(h,l({payload:E,signature:C})):t.secp256k1.verify(C,r.from(E),i.toBytes(S),...y?[{prehash:!0,lowS:!0}]:[])}return qa}var KW;function hMe(){return KW||(KW=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidWrappedSignatureError=t.suffixParameters=t.magicBytes=void 0,t.assert=a,t.from=c,t.unwrap=u,t.wrap=l,t.validate=d;const e=I_(),r=lMe(),n=gc(),s=$i(),i=fMe(),o=gie();t.magicBytes="0x8010801080108010801080108010801080108010801080108010801080108010",t.suffixParameters=e.from("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function a(p){if(typeof p=="string"){if(s.slice(p,-32)!==t.magicBytes)throw new f(p)}else o.assert(p.authorization)}function c(p){return typeof p=="string"?u(p):p}function u(p){a(p);const g=s.toNumber(s.slice(p,-64,-32)),h=s.slice(p,-g-64,-64),y=s.slice(p,0,-g-64),[E,S,C]=e.decode(t.suffixParameters,h);return{authorization:r.from({address:E.delegation,chainId:Number(E.chainId),nonce:E.nonce,yParity:E.yParity,r:E.r,s:E.s}),signature:y,...C&&C!=="0x"?{data:C,to:S}:{}}}function l(p){const{data:g,signature:h}=p;a(p);const y=i.recoverAddress({payload:r.getSignPayload(p.authorization),signature:o.from(p.authorization)}),E=e.encode(t.suffixParameters,[{...p.authorization,delegation:p.authorization.address,chainId:BigInt(p.authorization.chainId)},p.to??y,g??"0x"]),S=s.fromNumber(s.size(E),{size:32});return s.concat(h,E,S,t.magicBytes)}function d(p){try{return a(p),!0}catch{return!1}}class f extends n.BaseError{constructor(g){super(`Value \`${g}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}}t.InvalidWrappedSignatureError=f})(mR)),mR}var ZW;function X5(){return ZW||(ZW=1,Object.defineProperty(Yw,"__esModule",{value:!0}),Yw.SignatureErc8010=void 0,Yw.SignatureErc8010=hMe()),Yw}var YW;function f9(){if(YW)return eC;YW=1,Object.defineProperty(eC,"__esModule",{value:!0}),eC.isErc8010Signature=e;const t=X5();function e(r){return t.SignatureErc8010.validate(r)}return eC}var tC={},JW;function mie(){if(JW)return tC;JW=1,Object.defineProperty(tC,"__esModule",{value:!0}),tC.parseErc6492Signature=r;const t=Zh(),e=u9();function r(n){if(!(0,e.isErc6492Signature)(n))return{signature:n};const[s,i,o]=(0,t.decodeAbiParameters)([{type:"address"},{type:"bytes"},{type:"bytes"}],n);return{address:s,data:i,signature:o}}return tC}var rC={},XW;function yie(){if(XW)return rC;XW=1,Object.defineProperty(rC,"__esModule",{value:!0}),rC.parseErc8010Signature=n;const t=X5(),e=tt(),r=f9();function n(s){if(!(0,r.isErc8010Signature)(s))return{signature:s};const{authorization:i,to:o,...a}=t.SignatureErc8010.unwrap(s);return{authorization:{address:i.address,chainId:i.chainId,nonce:Number(i.nonce),r:(0,e.numberToHex)(i.r,{size:32}),s:(0,e.numberToHex)(i.s,{size:32}),yParity:i.yParity},...o?{address:o}:{},...a}}return rC}var nC={},QW;function h9(){if(QW)return nC;QW=1,Object.defineProperty(nC,"__esModule",{value:!0}),nC.recoverMessageAddress=r;const t=C_(),e=Qh();async function r({message:n,signature:s}){return(0,e.recoverAddress)({hash:(0,t.hashMessage)(n),signature:s})}return nC}var sC={},eV;function p9(){if(eV)return sC;eV=1,Object.defineProperty(sC,"__esModule",{value:!0}),sC.recoverTypedDataAddress=r;const t=S_(),e=Qh();async function r(n){const{domain:s,message:i,primaryType:o,signature:a,types:c}=n;return(0,e.recoverAddress)({hash:(0,t.hashTypedData)({domain:s,message:i,primaryType:o,types:c}),signature:a})}return sC}var iC={},tV;function bie(){if(tV)return iC;tV=1,Object.defineProperty(iC,"__esModule",{value:!0}),iC.serializeErc6492Signature=s;const t=c9(),e=Vu(),r=hi(),n=Pn();function s(i){const{address:o,data:a,signature:c,to:u="hex"}=i,l=(0,r.concatHex)([(0,e.encodeAbiParameters)([{type:"address"},{type:"bytes"},{type:"bytes"}],[o,a,c]),t.erc6492MagicBytes]);return u==="hex"?l:(0,n.hexToBytes)(l)}return iC}var oC={},rV;function wie(){if(rV)return oC;rV=1,Object.defineProperty(oC,"__esModule",{value:!0}),oC.serializeErc8010Signature=r;const t=X5(),e=Pn();function r(n){const{address:s,data:i,signature:o,to:a="hex"}=n,c=t.SignatureErc8010.wrap({authorization:{address:n.authorization.address,chainId:n.authorization.chainId,nonce:BigInt(n.authorization.nonce),r:BigInt(n.authorization.r),s:BigInt(n.authorization.s),yParity:n.authorization.yParity},data:i,signature:o,to:s});return a==="hex"?c:(0,e.hexToBytes)(c)}return oC}var aC={},nV;function vie(){if(nV)return aC;nV=1,Object.defineProperty(aC,"__esModule",{value:!0}),aC.verifyHash=n;const t=pc(),e=Yu(),r=Qh();async function n({address:s,hash:i,signature:o}){return(0,e.isAddressEqual)((0,t.getAddress)(s),await(0,r.recoverAddress)({hash:i,signature:o}))}return aC}var cC={},sV;function Eie(){if(sV)return cC;sV=1,Object.defineProperty(cC,"__esModule",{value:!0}),cC.verifyMessage=n;const t=pc(),e=Yu(),r=h9();async function n({address:s,message:i,signature:o}){return(0,e.isAddressEqual)((0,t.getAddress)(s),await(0,r.recoverMessageAddress)({message:i,signature:o}))}return cC}var uC={},iV;function _ie(){if(iV)return uC;iV=1,Object.defineProperty(uC,"__esModule",{value:!0}),uC.verifyTypedData=n;const t=pc(),e=Yu(),r=p9();async function n(s){const{address:i,domain:o,message:a,primaryType:c,signature:u,types:l}=s;return(0,e.isAddressEqual)((0,t.getAddress)(i),await(0,r.recoverTypedDataAddress)({domain:o,message:a,primaryType:c,signature:u,types:l}))}return uC}var lC={},oV;function g9(){if(oV)return lC;oV=1,Object.defineProperty(lC,"__esModule",{value:!0}),lC.getSerializedTransactionType=n;const t=Oa(),e=Jc(),r=ys();function n(s){const i=(0,e.sliceHex)(s,0,1);if(i==="0x04")return"eip7702";if(i==="0x03")return"eip4844";if(i==="0x02")return"eip1559";if(i==="0x01")return"eip2930";if(i!=="0x"&&(0,r.hexToNumber)(i)>=192)return"legacy";throw new t.InvalidSerializedTransactionTypeError({serializedType:i})}return lC}var tm={},aV;function m9(){if(aV)return tm;aV=1,Object.defineProperty(tm,"__esModule",{value:!0}),tm.parseTransaction=f,tm.toTransactionArray=S,tm.parseAccessList=C;const t=Wu(),e=Oa(),r=Pa(),n=L5(),s=Ho(),i=Gh(),o=df(),a=ys(),c=n9(),u=s9(),l=K5(),d=g9();function f(P){const D=(0,d.getSerializedTransactionType)(P);return D==="eip1559"?h(P):D==="eip2930"?y(P):D==="eip4844"?g(P):D==="eip7702"?p(P):E(P)}function p(P){const D=S(P),[L,I,U,F,B,A,m,b,w,x,M,k,j]=D;if(D.length!==10&&D.length!==13)throw new e.InvalidSerializedTransactionError({attributes:{chainId:L,nonce:I,maxPriorityFeePerGas:U,maxFeePerGas:F,gas:B,to:A,value:m,data:b,accessList:w,authorizationList:x,...D.length>9?{v:M,r:k,s:j}:{}},serializedTransaction:P,type:"eip7702"});const N={chainId:(0,a.hexToNumber)(L),type:"eip7702"};return(0,s.isHex)(A)&&A!=="0x"&&(N.to=A),(0,s.isHex)(B)&&B!=="0x"&&(N.gas=(0,a.hexToBigInt)(B)),(0,s.isHex)(b)&&b!=="0x"&&(N.data=b),(0,s.isHex)(I)&&(N.nonce=I==="0x"?0:(0,a.hexToNumber)(I)),(0,s.isHex)(m)&&m!=="0x"&&(N.value=(0,a.hexToBigInt)(m)),(0,s.isHex)(F)&&F!=="0x"&&(N.maxFeePerGas=(0,a.hexToBigInt)(F)),(0,s.isHex)(U)&&U!=="0x"&&(N.maxPriorityFeePerGas=(0,a.hexToBigInt)(U)),w.length!==0&&w!=="0x"&&(N.accessList=C(w)),x.length!==0&&x!=="0x"&&(N.authorizationList=_(x)),(0,l.assertTransactionEIP7702)(N),{...D.length===13?T(D):void 0,...N}}function g(P){const D=S(P),L=D.length===4,I=L?D[0]:D,U=L?D.slice(1):[],[F,B,A,m,b,w,x,M,k,j,N,v,R,$]=I,[O,H,W]=U;if(!(I.length===11||I.length===14))throw new e.InvalidSerializedTransactionError({attributes:{chainId:F,nonce:B,maxPriorityFeePerGas:A,maxFeePerGas:m,gas:b,to:w,value:x,data:M,accessList:k,...I.length>9?{v,r:R,s:$}:{}},serializedTransaction:P,type:"eip4844"});const G={blobVersionedHashes:N,chainId:(0,a.hexToNumber)(F),to:w,type:"eip4844"};return(0,s.isHex)(b)&&b!=="0x"&&(G.gas=(0,a.hexToBigInt)(b)),(0,s.isHex)(M)&&M!=="0x"&&(G.data=M),(0,s.isHex)(B)&&(G.nonce=B==="0x"?0:(0,a.hexToNumber)(B)),(0,s.isHex)(x)&&x!=="0x"&&(G.value=(0,a.hexToBigInt)(x)),(0,s.isHex)(j)&&j!=="0x"&&(G.maxFeePerBlobGas=(0,a.hexToBigInt)(j)),(0,s.isHex)(m)&&m!=="0x"&&(G.maxFeePerGas=(0,a.hexToBigInt)(m)),(0,s.isHex)(A)&&A!=="0x"&&(G.maxPriorityFeePerGas=(0,a.hexToBigInt)(A)),k.length!==0&&k!=="0x"&&(G.accessList=C(k)),O&&H&&W&&(G.sidecars=(0,n.toBlobSidecars)({blobs:O,commitments:H,proofs:W})),(0,l.assertTransactionEIP4844)(G),{...I.length===14?T(I):void 0,...G}}function h(P){const D=S(P),[L,I,U,F,B,A,m,b,w,x,M,k]=D;if(!(D.length===9||D.length===12))throw new e.InvalidSerializedTransactionError({attributes:{chainId:L,nonce:I,maxPriorityFeePerGas:U,maxFeePerGas:F,gas:B,to:A,value:m,data:b,accessList:w,...D.length>9?{v:x,r:M,s:k}:{}},serializedTransaction:P,type:"eip1559"});const j={chainId:(0,a.hexToNumber)(L),type:"eip1559"};return(0,s.isHex)(A)&&A!=="0x"&&(j.to=A),(0,s.isHex)(B)&&B!=="0x"&&(j.gas=(0,a.hexToBigInt)(B)),(0,s.isHex)(b)&&b!=="0x"&&(j.data=b),(0,s.isHex)(I)&&(j.nonce=I==="0x"?0:(0,a.hexToNumber)(I)),(0,s.isHex)(m)&&m!=="0x"&&(j.value=(0,a.hexToBigInt)(m)),(0,s.isHex)(F)&&F!=="0x"&&(j.maxFeePerGas=(0,a.hexToBigInt)(F)),(0,s.isHex)(U)&&U!=="0x"&&(j.maxPriorityFeePerGas=(0,a.hexToBigInt)(U)),w.length!==0&&w!=="0x"&&(j.accessList=C(w)),(0,l.assertTransactionEIP1559)(j),{...D.length===12?T(D):void 0,...j}}function y(P){const D=S(P),[L,I,U,F,B,A,m,b,w,x,M]=D;if(!(D.length===8||D.length===11))throw new e.InvalidSerializedTransactionError({attributes:{chainId:L,nonce:I,gasPrice:U,gas:F,to:B,value:A,data:m,accessList:b,...D.length>8?{v:w,r:x,s:M}:{}},serializedTransaction:P,type:"eip2930"});const k={chainId:(0,a.hexToNumber)(L),type:"eip2930"};return(0,s.isHex)(B)&&B!=="0x"&&(k.to=B),(0,s.isHex)(F)&&F!=="0x"&&(k.gas=(0,a.hexToBigInt)(F)),(0,s.isHex)(m)&&m!=="0x"&&(k.data=m),(0,s.isHex)(I)&&(k.nonce=I==="0x"?0:(0,a.hexToNumber)(I)),(0,s.isHex)(A)&&A!=="0x"&&(k.value=(0,a.hexToBigInt)(A)),(0,s.isHex)(U)&&U!=="0x"&&(k.gasPrice=(0,a.hexToBigInt)(U)),b.length!==0&&b!=="0x"&&(k.accessList=C(b)),(0,l.assertTransactionEIP2930)(k),{...D.length===11?T(D):void 0,...k}}function E(P){const D=(0,c.fromRlp)(P,"hex"),[L,I,U,F,B,A,m,b,w]=D;if(!(D.length===6||D.length===9))throw new e.InvalidSerializedTransactionError({attributes:{nonce:L,gasPrice:I,gas:U,to:F,value:B,data:A,...D.length>6?{v:m,r:b,s:w}:{}},serializedTransaction:P,type:"legacy"});const x={type:"legacy"};if((0,s.isHex)(F)&&F!=="0x"&&(x.to=F),(0,s.isHex)(U)&&U!=="0x"&&(x.gas=(0,a.hexToBigInt)(U)),(0,s.isHex)(A)&&A!=="0x"&&(x.data=A),(0,s.isHex)(L)&&(x.nonce=L==="0x"?0:(0,a.hexToNumber)(L)),(0,s.isHex)(B)&&B!=="0x"&&(x.value=(0,a.hexToBigInt)(B)),(0,s.isHex)(I)&&I!=="0x"&&(x.gasPrice=(0,a.hexToBigInt)(I)),(0,l.assertTransactionLegacy)(x),D.length===6)return x;const M=(0,s.isHex)(m)&&m!=="0x"?(0,a.hexToBigInt)(m):0n;if(w==="0x"&&b==="0x")return M>0&&(x.chainId=Number(M)),x;const k=M,j=Number((k-35n)/2n);if(j>0)x.chainId=j;else if(k!==27n&&k!==28n)throw new e.InvalidLegacyVError({v:k});return x.v=k,x.s=w,x.r=b,x.yParity=k%2n===0n?1:0,x}function S(P){return(0,c.fromRlp)(`0x${P.slice(4)}`,"hex")}function C(P){const D=[];for(let L=0;L<P.length;L++){const[I,U]=P[L];if(!(0,r.isAddress)(I,{strict:!1}))throw new t.InvalidAddressError({address:I});D.push({address:I,storageKeys:U.map(F=>(0,u.isHash)(F)?F:(0,o.trim)(F))})}return D}function _(P){const D=[];for(let L=0;L<P.length;L++){const[I,U,F,B,A,m]=P[L];D.push({address:U,chainId:I==="0x"?0:(0,a.hexToNumber)(I),nonce:F==="0x"?0:(0,a.hexToNumber)(F),...T([B,A,m])})}return D}function T(P){const D=P.slice(-3),L=D[0]==="0x"||(0,a.hexToBigInt)(D[0])===0n?27n:28n;return{r:(0,i.padHex)(D[1],{size:32}),s:(0,i.padHex)(D[2],{size:32}),v:L,yParity:L===27n?0:1}}return tm}var dC={},fC={},Xw={},cV;function Aie(){if(cV)return Xw;cV=1,Object.defineProperty(Xw,"__esModule",{value:!0}),Xw.InvalidDecimalNumberError=void 0;const t=Kt();class e extends t.BaseError{constructor({value:n}){super(`Number \`${n}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}return Xw.InvalidDecimalNumberError=e,Xw}var uV;function Q5(){if(uV)return fC;uV=1,Object.defineProperty(fC,"__esModule",{value:!0}),fC.parseUnits=e;const t=Aie();function e(r,n){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(r))throw new t.InvalidDecimalNumberError({value:r});let[s,i="0"]=r.split(".");const o=s.startsWith("-");if(o&&(s=s.slice(1)),i=i.replace(/(0+)$/,""),n===0)Math.round(+`.${i}`)===1&&(s=`${BigInt(s)+1n}`),i="";else if(i.length>n){const[a,c,u]=[i.slice(0,n-1),i.slice(n-1,n),i.slice(n)],l=Math.round(+`${c}.${u}`);l>9?i=`${BigInt(a)+BigInt(1)}0`.padStart(a.length+1,"0"):i=`${a}${l}`,i.length>n&&(i=i.slice(1),s=`${BigInt(s)+1n}`),i=i.slice(0,n)}else i=i.padEnd(n,"0");return BigInt(`${o?"-":""}${s}${i}`)}return fC}var lV;function xie(){if(lV)return dC;lV=1,Object.defineProperty(dC,"__esModule",{value:!0}),dC.parseEther=r;const t=a_(),e=Q5();function r(n,s="wei"){return(0,e.parseUnits)(n,t.etherUnits[s])}return dC}var hC={},dV;function Cie(){if(dV)return hC;dV=1,Object.defineProperty(hC,"__esModule",{value:!0}),hC.parseGwei=r;const t=a_(),e=Q5();function r(n,s="wei"){return(0,e.parseUnits)(n,t.gweiUnits[s])}return hC}var fV;function y9(){return fV||(fV=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.padBytes=t.pad=t.isHex=t.isBytes=t.concatHex=t.concatBytes=t.concat=t.getChainContractAddress=t.extractChain=t.defineChain=t.assertCurrentChain=t.offchainLookupSignature=t.offchainLookupAbiItem=t.offchainLookup=t.ccipFetch=t.ccipRequest=t.buildRequest=t.verifyAuthorization=t.serializeAuthorizationList=t.recoverAuthorizationAddress=t.hashAuthorization=t.isAddressEqual=t.isAddress=t.getCreateAddress=t.getCreate2Address=t.getContractAddress=t.getAddress=t.parseEventLogs=t.getAbiItem=t.formatAbiItemWithArgs=t.formatAbiParams=t.formatAbiItem=t.encodePacked=t.encodeFunctionResult=t.encodeFunctionData=t.encodeEventTopics=t.encodeErrorResult=t.encodeDeployData=t.encodeAbiParameters=t.decodeFunctionResult=t.decodeFunctionData=t.decodeEventLog=t.decodeErrorResult=t.decodeAbiParameters=t.publicKeyToAddress=t.parseAccount=t.parseAbiParameters=t.parseAbiParameter=t.parseAbiItem=t.parseAbi=void 0,t.ripemd160=t.keccak256=t.isHash=t.getAction=t.formatTransactionRequest=t.defineTransactionRequest=t.defineTransactionReceipt=t.transactionType=t.formatTransaction=t.defineTransaction=t.formatLog=t.defineFormatter=t.extract=t.formatBlock=t.defineBlock=t.getTransactionError=t.getNodeError=t.containsNodeError=t.getEstimateGasError=t.getContractError=t.getCallError=t.toRlp=t.toHex=t.stringToHex=t.numberToHex=t.bytesToHex=t.boolToHex=t.toBytes=t.stringToBytes=t.numberToBytes=t.hexToBytes=t.boolToBytes=t.fromRlp=t.hexToString=t.hexToNumber=t.hexToBool=t.hexToBigInt=t.fromHex=t.fromBytes=t.bytesToString=t.bytesToNumber=t.bytesToBool=t.bytesToBigint=t.bytesToBigInt=t.trim=t.sliceHex=t.sliceBytes=t.slice=t.size=t.padHex=void 0,t.validateTypedData=t.serializeTypedData=t.serializeTransaction=t.serializeAccessList=t.parseTransaction=t.getTransactionType=t.getSerializedTransactionType=t.assertTransactionLegacy=t.assertTransactionEIP2930=t.assertTransactionEIP1559=t.assertRequest=t.stringify=t.verifyTypedData=t.verifyMessage=t.verifyHash=t.serializeErc8010Signature=t.serializeErc6492Signature=t.recoverTypedDataAddress=t.recoverPublicKey=t.recoverMessageAddress=t.recoverAddress=t.parseErc8010Signature=t.parseErc6492Signature=t.isErc8010Signature=t.isErc6492Signature=t.hashTypedData=t.hashStruct=t.hashMessage=t.getWebSocketRpcClient=t.socketClientCache=t.getSocketRpcClient=t.getHttpRpcClient=t.rpc=t.getSocket=t.integerRegex=t.bytesRegex=t.arrayRegex=t.nonceManager=t.createNonceManager=t.getFunctionSignature=t.toFunctionSignature=t.getFunctionSelector=t.toFunctionSelector=t.toFunctionHash=t.getEventSignature=t.toEventSignature=t.getEventSelector=t.toEventSelector=t.toEventHash=t.sha256=void 0,t.parseUnits=t.parseGwei=t.parseEther=t.formatUnits=t.formatGwei=t.formatEther=void 0;var e=Vh();Object.defineProperty(t,"parseAbi",{enumerable:!0,get:function(){return e.parseAbi}}),Object.defineProperty(t,"parseAbiItem",{enumerable:!0,get:function(){return e.parseAbiItem}}),Object.defineProperty(t,"parseAbiParameter",{enumerable:!0,get:function(){return e.parseAbiParameter}}),Object.defineProperty(t,"parseAbiParameters",{enumerable:!0,get:function(){return e.parseAbiParameters}});var r=is();Object.defineProperty(t,"parseAccount",{enumerable:!0,get:function(){return r.parseAccount}});var n=yse();Object.defineProperty(t,"publicKeyToAddress",{enumerable:!0,get:function(){return n.publicKeyToAddress}});var s=Zh();Object.defineProperty(t,"decodeAbiParameters",{enumerable:!0,get:function(){return s.decodeAbiParameters}});var i=O5();Object.defineProperty(t,"decodeErrorResult",{enumerable:!0,get:function(){return i.decodeErrorResult}});var o=m_();Object.defineProperty(t,"decodeEventLog",{enumerable:!0,get:function(){return o.decodeEventLog}});var a=qB();Object.defineProperty(t,"decodeFunctionData",{enumerable:!0,get:function(){return a.decodeFunctionData}});var c=gf();Object.defineProperty(t,"decodeFunctionResult",{enumerable:!0,get:function(){return c.decodeFunctionResult}});var u=Vu();Object.defineProperty(t,"encodeAbiParameters",{enumerable:!0,get:function(){return u.encodeAbiParameters}});var l=v_();Object.defineProperty(t,"encodeDeployData",{enumerable:!0,get:function(){return l.encodeDeployData}});var d=HB();Object.defineProperty(t,"encodeErrorResult",{enumerable:!0,get:function(){return d.encodeErrorResult}});var f=ug();Object.defineProperty(t,"encodeEventTopics",{enumerable:!0,get:function(){return f.encodeEventTopics}});var p=Ra();Object.defineProperty(t,"encodeFunctionData",{enumerable:!0,get:function(){return p.encodeFunctionData}});var g=zB();Object.defineProperty(t,"encodeFunctionResult",{enumerable:!0,get:function(){return g.encodeFunctionResult}});var h=Gse();Object.defineProperty(t,"encodePacked",{enumerable:!0,get:function(){return h.encodePacked}});var y=lf();Object.defineProperty(t,"formatAbiItem",{enumerable:!0,get:function(){return y.formatAbiItem}}),Object.defineProperty(t,"formatAbiParams",{enumerable:!0,get:function(){return y.formatAbiParams}});var E=mse();Object.defineProperty(t,"formatAbiItemWithArgs",{enumerable:!0,get:function(){return E.formatAbiItemWithArgs}});var S=ff();Object.defineProperty(t,"getAbiItem",{enumerable:!0,get:function(){return S.getAbiItem}});var C=y_();Object.defineProperty(t,"parseEventLogs",{enumerable:!0,get:function(){return C.parseEventLogs}});var _=pc();Object.defineProperty(t,"getAddress",{enumerable:!0,get:function(){return _.getAddress}});var T=Kse();Object.defineProperty(t,"getContractAddress",{enumerable:!0,get:function(){return T.getContractAddress}}),Object.defineProperty(t,"getCreate2Address",{enumerable:!0,get:function(){return T.getCreate2Address}}),Object.defineProperty(t,"getCreateAddress",{enumerable:!0,get:function(){return T.getCreateAddress}});var P=Pa();Object.defineProperty(t,"isAddress",{enumerable:!0,get:function(){return P.isAddress}});var D=Yu();Object.defineProperty(t,"isAddressEqual",{enumerable:!0,get:function(){return D.isAddressEqual}});var L=Ese();Object.defineProperty(t,"hashAuthorization",{enumerable:!0,get:function(){return L.hashAuthorization}});var I=l_();Object.defineProperty(t,"recoverAuthorizationAddress",{enumerable:!0,get:function(){return I.recoverAuthorizationAddress}});var U=Zse();Object.defineProperty(t,"serializeAuthorizationList",{enumerable:!0,get:function(){return U.serializeAuthorizationList}});var F=Yse();Object.defineProperty(t,"verifyAuthorization",{enumerable:!0,get:function(){return F.verifyAuthorization}});var B=Jse();Object.defineProperty(t,"buildRequest",{enumerable:!0,get:function(){return B.buildRequest}});var A=WB();Object.defineProperty(t,"ccipRequest",{enumerable:!0,get:function(){return A.ccipRequest}}),Object.defineProperty(t,"ccipFetch",{enumerable:!0,get:function(){return A.ccipRequest}}),Object.defineProperty(t,"offchainLookup",{enumerable:!0,get:function(){return A.offchainLookup}}),Object.defineProperty(t,"offchainLookupAbiItem",{enumerable:!0,get:function(){return A.offchainLookupAbiItem}}),Object.defineProperty(t,"offchainLookupSignature",{enumerable:!0,get:function(){return A.offchainLookupSignature}});var m=A_();Object.defineProperty(t,"assertCurrentChain",{enumerable:!0,get:function(){return m.assertCurrentChain}});var b=Xse();Object.defineProperty(t,"defineChain",{enumerable:!0,get:function(){return b.defineChain}});var w=Qse();Object.defineProperty(t,"extractChain",{enumerable:!0,get:function(){return w.extractChain}});var x=np();Object.defineProperty(t,"getChainContractAddress",{enumerable:!0,get:function(){return x.getChainContractAddress}});var M=hi();Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return M.concat}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return M.concatBytes}}),Object.defineProperty(t,"concatHex",{enumerable:!0,get:function(){return M.concatHex}});var k=t9();Object.defineProperty(t,"isBytes",{enumerable:!0,get:function(){return k.isBytes}});var j=Ho();Object.defineProperty(t,"isHex",{enumerable:!0,get:function(){return j.isHex}});var N=Gh();Object.defineProperty(t,"pad",{enumerable:!0,get:function(){return N.pad}}),Object.defineProperty(t,"padBytes",{enumerable:!0,get:function(){return N.padBytes}}),Object.defineProperty(t,"padHex",{enumerable:!0,get:function(){return N.padHex}});var v=Ta();Object.defineProperty(t,"size",{enumerable:!0,get:function(){return v.size}});var R=Jc();Object.defineProperty(t,"slice",{enumerable:!0,get:function(){return R.slice}}),Object.defineProperty(t,"sliceBytes",{enumerable:!0,get:function(){return R.sliceBytes}}),Object.defineProperty(t,"sliceHex",{enumerable:!0,get:function(){return R.sliceHex}});var $=df();Object.defineProperty(t,"trim",{enumerable:!0,get:function(){return $.trim}});var O=xB();Object.defineProperty(t,"bytesToBigInt",{enumerable:!0,get:function(){return O.bytesToBigInt}}),Object.defineProperty(t,"bytesToBigint",{enumerable:!0,get:function(){return O.bytesToBigInt}}),Object.defineProperty(t,"bytesToBool",{enumerable:!0,get:function(){return O.bytesToBool}}),Object.defineProperty(t,"bytesToNumber",{enumerable:!0,get:function(){return O.bytesToNumber}}),Object.defineProperty(t,"bytesToString",{enumerable:!0,get:function(){return O.bytesToString}}),Object.defineProperty(t,"fromBytes",{enumerable:!0,get:function(){return O.fromBytes}});var H=ys();Object.defineProperty(t,"fromHex",{enumerable:!0,get:function(){return H.fromHex}}),Object.defineProperty(t,"hexToBigInt",{enumerable:!0,get:function(){return H.hexToBigInt}}),Object.defineProperty(t,"hexToBool",{enumerable:!0,get:function(){return H.hexToBool}}),Object.defineProperty(t,"hexToNumber",{enumerable:!0,get:function(){return H.hexToNumber}}),Object.defineProperty(t,"hexToString",{enumerable:!0,get:function(){return H.hexToString}});var W=n9();Object.defineProperty(t,"fromRlp",{enumerable:!0,get:function(){return W.fromRlp}});var G=Pn();Object.defineProperty(t,"boolToBytes",{enumerable:!0,get:function(){return G.boolToBytes}}),Object.defineProperty(t,"hexToBytes",{enumerable:!0,get:function(){return G.hexToBytes}}),Object.defineProperty(t,"numberToBytes",{enumerable:!0,get:function(){return G.numberToBytes}}),Object.defineProperty(t,"stringToBytes",{enumerable:!0,get:function(){return G.stringToBytes}}),Object.defineProperty(t,"toBytes",{enumerable:!0,get:function(){return G.toBytes}});var K=tt();Object.defineProperty(t,"boolToHex",{enumerable:!0,get:function(){return K.boolToHex}}),Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return K.bytesToHex}}),Object.defineProperty(t,"numberToHex",{enumerable:!0,get:function(){return K.numberToHex}}),Object.defineProperty(t,"stringToHex",{enumerable:!0,get:function(){return K.stringToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return K.toHex}});var Q=u_();Object.defineProperty(t,"toRlp",{enumerable:!0,get:function(){return Q.toRlp}});var re=LB();Object.defineProperty(t,"getCallError",{enumerable:!0,get:function(){return re.getCallError}});var de=Xh();Object.defineProperty(t,"getContractError",{enumerable:!0,get:function(){return de.getContractError}});var le=Ase();Object.defineProperty(t,"getEstimateGasError",{enumerable:!0,get:function(){return le.getEstimateGasError}});var se=d_();Object.defineProperty(t,"containsNodeError",{enumerable:!0,get:function(){return se.containsNodeError}}),Object.defineProperty(t,"getNodeError",{enumerable:!0,get:function(){return se.getNodeError}});var be=p_();Object.defineProperty(t,"getTransactionError",{enumerable:!0,get:function(){return be.getTransactionError}});var We=U5();Object.defineProperty(t,"defineBlock",{enumerable:!0,get:function(){return We.defineBlock}}),Object.defineProperty(t,"formatBlock",{enumerable:!0,get:function(){return We.formatBlock}});var Ne=ep();Object.defineProperty(t,"extract",{enumerable:!0,get:function(){return Ne.extract}});var Be=f_();Object.defineProperty(t,"defineFormatter",{enumerable:!0,get:function(){return Be.defineFormatter}});var At=pf();Object.defineProperty(t,"formatLog",{enumerable:!0,get:function(){return At.formatLog}});var Ee=ab();Object.defineProperty(t,"defineTransaction",{enumerable:!0,get:function(){return Ee.defineTransaction}}),Object.defineProperty(t,"formatTransaction",{enumerable:!0,get:function(){return Ee.formatTransaction}}),Object.defineProperty(t,"transactionType",{enumerable:!0,get:function(){return Ee.transactionType}});var fe=x_();Object.defineProperty(t,"defineTransactionReceipt",{enumerable:!0,get:function(){return fe.defineTransactionReceipt}});var Mt=Ku();Object.defineProperty(t,"defineTransactionRequest",{enumerable:!0,get:function(){return Mt.defineTransactionRequest}}),Object.defineProperty(t,"formatTransactionRequest",{enumerable:!0,get:function(){return Mt.formatTransactionRequest}});var bt=kr();Object.defineProperty(t,"getAction",{enumerable:!0,get:function(){return bt.getAction}});var jt=s9();Object.defineProperty(t,"isHash",{enumerable:!0,get:function(){return jt.isHash}});var ge=Na();Object.defineProperty(t,"keccak256",{enumerable:!0,get:function(){return ge.keccak256}});var ve=tie();Object.defineProperty(t,"ripemd160",{enumerable:!0,get:function(){return ve.ripemd160}});var V=OB();Object.defineProperty(t,"sha256",{enumerable:!0,get:function(){return V.sha256}});var q=rie();Object.defineProperty(t,"toEventHash",{enumerable:!0,get:function(){return q.toEventHash}});var z=ob();Object.defineProperty(t,"toEventSelector",{enumerable:!0,get:function(){return z.toEventSelector}}),Object.defineProperty(t,"getEventSelector",{enumerable:!0,get:function(){return z.toEventSelector}});var X=nie();Object.defineProperty(t,"toEventSignature",{enumerable:!0,get:function(){return X.toEventSignature}}),Object.defineProperty(t,"getEventSignature",{enumerable:!0,get:function(){return X.toEventSignature}});var ne=sie();Object.defineProperty(t,"toFunctionHash",{enumerable:!0,get:function(){return ne.toFunctionHash}});var ce=cg();Object.defineProperty(t,"toFunctionSelector",{enumerable:!0,get:function(){return ce.toFunctionSelector}}),Object.defineProperty(t,"getFunctionSelector",{enumerable:!0,get:function(){return ce.toFunctionSelector}});var me=iie();Object.defineProperty(t,"toFunctionSignature",{enumerable:!0,get:function(){return me.toFunctionSignature}}),Object.defineProperty(t,"getFunctionSignature",{enumerable:!0,get:function(){return me.toFunctionSignature}});var Rt=oie();Object.defineProperty(t,"createNonceManager",{enumerable:!0,get:function(){return Rt.createNonceManager}}),Object.defineProperty(t,"nonceManager",{enumerable:!0,get:function(){return Rt.nonceManager}});var Tt=P5();Object.defineProperty(t,"arrayRegex",{enumerable:!0,get:function(){return Tt.arrayRegex}}),Object.defineProperty(t,"bytesRegex",{enumerable:!0,get:function(){return Tt.bytesRegex}}),Object.defineProperty(t,"integerRegex",{enumerable:!0,get:function(){return Tt.integerRegex}});var Ct=uie();Object.defineProperty(t,"getSocket",{enumerable:!0,get:function(){return Ct.getSocket}}),Object.defineProperty(t,"rpc",{enumerable:!0,get:function(){return Ct.rpc}});var or=o9();Object.defineProperty(t,"getHttpRpcClient",{enumerable:!0,get:function(){return or.getHttpRpcClient}});var Et=cie();Object.defineProperty(t,"getSocketRpcClient",{enumerable:!0,get:function(){return Et.getSocketRpcClient}}),Object.defineProperty(t,"socketClientCache",{enumerable:!0,get:function(){return Et.socketClientCache}});var on=a9();Object.defineProperty(t,"getWebSocketRpcClient",{enumerable:!0,get:function(){return on.getWebSocketRpcClient}});var Qc=C_();Object.defineProperty(t,"hashMessage",{enumerable:!0,get:function(){return Qc.hashMessage}});var Qr=S_();Object.defineProperty(t,"hashStruct",{enumerable:!0,get:function(){return Qr.hashStruct}}),Object.defineProperty(t,"hashTypedData",{enumerable:!0,get:function(){return Qr.hashTypedData}});var Wr=u9();Object.defineProperty(t,"isErc6492Signature",{enumerable:!0,get:function(){return Wr.isErc6492Signature}});var eu=f9();Object.defineProperty(t,"isErc8010Signature",{enumerable:!0,get:function(){return eu.isErc8010Signature}});var an=mie();Object.defineProperty(t,"parseErc6492Signature",{enumerable:!0,get:function(){return an.parseErc6492Signature}});var Vr=yie();Object.defineProperty(t,"parseErc8010Signature",{enumerable:!0,get:function(){return Vr.parseErc8010Signature}});var tu=Qh();Object.defineProperty(t,"recoverAddress",{enumerable:!0,get:function(){return tu.recoverAddress}});var Gr=h9();Object.defineProperty(t,"recoverMessageAddress",{enumerable:!0,get:function(){return Gr.recoverMessageAddress}});var cn=IB();Object.defineProperty(t,"recoverPublicKey",{enumerable:!0,get:function(){return cn.recoverPublicKey}});var vo=p9();Object.defineProperty(t,"recoverTypedDataAddress",{enumerable:!0,get:function(){return vo.recoverTypedDataAddress}});var Ir=bie();Object.defineProperty(t,"serializeErc6492Signature",{enumerable:!0,get:function(){return Ir.serializeErc6492Signature}});var un=wie();Object.defineProperty(t,"serializeErc8010Signature",{enumerable:!0,get:function(){return un.serializeErc8010Signature}});var Eo=vie();Object.defineProperty(t,"verifyHash",{enumerable:!0,get:function(){return Eo.verifyHash}});var Tr=Eie();Object.defineProperty(t,"verifyMessage",{enumerable:!0,get:function(){return Tr.verifyMessage}});var Kr=_ie();Object.defineProperty(t,"verifyTypedData",{enumerable:!0,get:function(){return Kr.verifyTypedData}});var ru=Fi();Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return ru.stringify}});var ln=Zu();Object.defineProperty(t,"assertRequest",{enumerable:!0,get:function(){return ln.assertRequest}});var Zr=K5();Object.defineProperty(t,"assertTransactionEIP1559",{enumerable:!0,get:function(){return Zr.assertTransactionEIP1559}}),Object.defineProperty(t,"assertTransactionEIP2930",{enumerable:!0,get:function(){return Zr.assertTransactionEIP2930}}),Object.defineProperty(t,"assertTransactionLegacy",{enumerable:!0,get:function(){return Zr.assertTransactionLegacy}});var nu=g9();Object.defineProperty(t,"getSerializedTransactionType",{enumerable:!0,get:function(){return nu.getSerializedTransactionType}});var en=F5();Object.defineProperty(t,"getTransactionType",{enumerable:!0,get:function(){return en.getTransactionType}});var dn=m9();Object.defineProperty(t,"parseTransaction",{enumerable:!0,get:function(){return dn.parseTransaction}});var Ba=r9();Object.defineProperty(t,"serializeAccessList",{enumerable:!0,get:function(){return Ba.serializeAccessList}});var tn=Z5();Object.defineProperty(t,"serializeTransaction",{enumerable:!0,get:function(){return tn.serializeTransaction}});var Br=Y5();Object.defineProperty(t,"serializeTypedData",{enumerable:!0,get:function(){return Br.serializeTypedData}}),Object.defineProperty(t,"validateTypedData",{enumerable:!0,get:function(){return Br.validateTypedData}});var yc=c_();Object.defineProperty(t,"formatEther",{enumerable:!0,get:function(){return yc.formatEther}});var bc=lg();Object.defineProperty(t,"formatGwei",{enumerable:!0,get:function(){return bc.formatGwei}});var wc=k5();Object.defineProperty(t,"formatUnits",{enumerable:!0,get:function(){return wc.formatUnits}});var vc=xie();Object.defineProperty(t,"parseEther",{enumerable:!0,get:function(){return vc.parseEther}});var Ec=Cie();Object.defineProperty(t,"parseGwei",{enumerable:!0,get:function(){return Ec.parseGwei}});var mf=Q5();Object.defineProperty(t,"parseUnits",{enumerable:!0,get:function(){return mf.parseUnits}})})(uR)),uR}var hV;function pMe(){if(hV)return Dx;hV=1,Object.defineProperty(Dx,"__esModule",{value:!0}),Dx.formatProof=r;const t=y9();function e(n){return n.map(s=>({...s,value:BigInt(s.value)}))}function r(n){return{...n,balance:n.balance?BigInt(n.balance):void 0,nonce:n.nonce?(0,t.hexToNumber)(n.nonce):void 0,storageProof:n.storageProof?e(n.storageProof):void 0}}return Dx}var pV;function gMe(){if(pV)return Mx;pV=1,Object.defineProperty(Mx,"__esModule",{value:!0}),Mx.getProof=r;const t=tt(),e=pMe();async function r(n,{address:s,blockNumber:i,blockTag:o,storageKeys:a}){const c=o??"latest",u=i!==void 0?(0,t.numberToHex)(i):void 0,l=await n.request({method:"eth_getProof",params:[s,a,u||c]});return(0,e.formatProof)(l)}return Mx}var pC={},gV;function mMe(){if(gV)return pC;gV=1,Object.defineProperty(pC,"__esModule",{value:!0}),pC.getStorageAt=e;const t=tt();async function e(r,{address:n,blockNumber:s,blockTag:i="latest",slot:o}){const a=s!==void 0?(0,t.numberToHex)(s):void 0;return await r.request({method:"eth_getStorageAt",params:[n,o,a||i]})}return pC}var gC={},mV;function b9(){if(mV)return gC;mV=1,Object.defineProperty(gC,"__esModule",{value:!0}),gC.getTransaction=n;const t=Oa(),e=tt(),r=ab();async function n(s,{blockHash:i,blockNumber:o,blockTag:a,hash:c,index:u,sender:l,nonce:d}){const f=a||"latest",p=o!==void 0?(0,e.numberToHex)(o):void 0;let g=null;if(c?g=await s.request({method:"eth_getTransactionByHash",params:[c]},{dedupe:!0}):i?g=await s.request({method:"eth_getTransactionByBlockHashAndIndex",params:[i,(0,e.numberToHex)(u)]},{dedupe:!0}):typeof u=="number"?g=await s.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[p||f,(0,e.numberToHex)(u)]},{dedupe:!!p}):l&&typeof d=="number"&&(g=await s.request({method:"eth_getTransactionBySenderAndNonce",params:[l,(0,e.numberToHex)(d)]},{dedupe:!0})),!g)throw new t.TransactionNotFoundError({blockHash:i,blockNumber:o,blockTag:f,hash:c,index:u});return(s.chain?.formatters?.transaction?.format||r.formatTransaction)(g,"getTransaction")}return gC}var mC={},yV;function yMe(){if(yV)return mC;yV=1,Object.defineProperty(mC,"__esModule",{value:!0}),mC.getTransactionConfirmations=n;const t=kr(),e=__(),r=b9();async function n(s,{hash:i,transactionReceipt:o}){const[a,c]=await Promise.all([(0,t.getAction)(s,e.getBlockNumber,"getBlockNumber")({}),i?(0,t.getAction)(s,r.getTransaction,"getTransaction")({hash:i}):void 0]),u=o?.blockNumber||c?.blockNumber;return u?a-u+1n:0n}return mC}var yC={},bV;function Sie(){if(bV)return yC;bV=1,Object.defineProperty(yC,"__esModule",{value:!0}),yC.getTransactionReceipt=r;const t=Oa(),e=x_();async function r(n,{hash:s}){const i=await n.request({method:"eth_getTransactionReceipt",params:[s]},{dedupe:!0});if(!i)throw new t.TransactionReceiptNotFoundError({hash:s});return(n.chain?.formatters?.transactionReceipt?.format||e.formatTransactionReceipt)(i,"getTransactionReceipt")}return yC}var bC={},wV;function bMe(){if(wV)return bC;wV=1,Object.defineProperty(bC,"__esModule",{value:!0}),bC.multicall=d;const t=rp(),e=b_(),r=Jn(),n=Kt(),s=Yh(),i=gf(),o=Ra(),a=np(),c=Xh(),u=kr(),l=Kl();async function d(f,p){const{account:g,authorizationList:h,allowFailure:y=!0,blockNumber:E,blockOverrides:S,blockTag:C,stateOverride:_}=p,T=p.contracts,{batchSize:P=p.batchSize??1024,deployless:D=p.deployless??!1}=typeof f.batch?.multicall=="object"?f.batch.multicall:{},L=(()=>{if(p.multicallAddress)return p.multicallAddress;if(D)return null;if(f.chain)return(0,a.getChainContractAddress)({blockNumber:E,chain:f.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),I=[[]];let U=0,F=0;for(let m=0;m<T.length;m++){const{abi:b,address:w,args:x,functionName:M}=T[m];try{const k=(0,o.encodeFunctionData)({abi:b,args:x,functionName:M});F+=(k.length-2)/2,P>0&&F>P&&I[U].length>0&&(U++,F=(k.length-2)/2,I[U]=[]),I[U]=[...I[U],{allowFailure:!0,callData:k,target:w}]}catch(k){const j=(0,c.getContractError)(k,{abi:b,address:w,args:x,docsPath:"/docs/contract/multicall",functionName:M,sender:g});if(!y)throw j;I[U]=[...I[U],{allowFailure:!0,callData:"0x",target:w}]}}const B=await Promise.allSettled(I.map(m=>(0,u.getAction)(f,l.readContract,"readContract")({...L===null?{code:e.multicall3Bytecode}:{address:L},abi:t.multicall3Abi,account:g,args:[m],authorizationList:h,blockNumber:E,blockOverrides:S,blockTag:C,functionName:"aggregate3",stateOverride:_}))),A=[];for(let m=0;m<B.length;m++){const b=B[m];if(b.status==="rejected"){if(!y)throw b.reason;for(let x=0;x<I[m].length;x++)A.push({status:"failure",error:b.reason,result:void 0});continue}const w=b.value;for(let x=0;x<w.length;x++){const{returnData:M,success:k}=w[x],{callData:j}=I[m][x],{abi:N,address:v,functionName:R,args:$}=T[A.length];try{if(j==="0x")throw new r.AbiDecodingZeroDataError;if(!k)throw new s.RawContractError({data:M});const O=(0,i.decodeFunctionResult)({abi:N,args:$,data:M,functionName:R});A.push(y?{result:O,status:"success"}:O)}catch(O){const H=(0,c.getContractError)(O,{abi:N,address:v,args:$,docsPath:"/docs/contract/multicall",functionName:R});if(!y)throw H;A.push({error:H,result:void 0,status:"failure"})}}}if(A.length!==T.length)throw new n.BaseError("multicall results mismatch");return A}return bC}var wC={},vV;function Iie(){if(vV)return wC;vV=1,Object.defineProperty(wC,"__esModule",{value:!0}),wC.simulateBlocks=y;const t=kse(),e=is(),r=Jn(),n=Yh(),s=hf(),i=gf(),o=Ra(),a=hi(),c=tt(),u=Xh(),l=d_(),d=U5(),f=pf(),p=Ku(),g=TB(),h=Zu();async function y(E,S){const{blockNumber:C,blockTag:_=E.experimental_blockTag??"latest",blocks:T,returnFullTransactions:P,traceTransfers:D,validation:L}=S;try{const I=[];for(const A of T){const m=A.blockOverrides?t.toRpc(A.blockOverrides):void 0,b=A.calls.map(x=>{const M=x,k=M.account?(0,e.parseAccount)(M.account):void 0,j=M.abi?(0,o.encodeFunctionData)(M):M.data,N={...M,account:k,data:M.dataSuffix?(0,a.concat)([j||"0x",M.dataSuffix]):j,from:M.from??k?.address};return(0,h.assertRequest)(N),(0,p.formatTransactionRequest)(N)}),w=A.stateOverrides?(0,g.serializeStateOverride)(A.stateOverrides):void 0;I.push({blockOverrides:m,calls:b,stateOverrides:w})}const F=(typeof C=="bigint"?(0,c.numberToHex)(C):void 0)||_;return(await E.request({method:"eth_simulateV1",params:[{blockStateCalls:I,returnFullTransactions:P,traceTransfers:D,validation:L},F]})).map((A,m)=>({...(0,d.formatBlock)(A),calls:A.calls.map((b,w)=>{const{abi:x,args:M,functionName:k,to:j}=T[m].calls[w],N=b.error?.data??b.returnData,v=BigInt(b.gasUsed),R=b.logs?.map(W=>(0,f.formatLog)(W)),$=b.status==="0x1"?"success":"failure",O=x&&$==="success"&&N!=="0x"?(0,i.decodeFunctionResult)({abi:x,data:N,functionName:k}):null,H=(()=>{if($==="success")return;let W;if(b.error?.data==="0x"?W=new r.AbiDecodingZeroDataError:b.error&&(W=new n.RawContractError(b.error)),!!W)return(0,u.getContractError)(W,{abi:x??[],address:j??"0x",args:M,functionName:k??"<unknown>"})})();return{data:N,gasUsed:v,logs:R,status:$,...$==="success"?{result:O}:{error:H}}})}))}catch(I){const U=I,F=(0,l.getNodeError)(U,{});throw F instanceof s.UnknownNodeError?U:F}}return wC}var vC={},zf={},Io={},rm={},EV;function wMe(){if(EV)return rm;EV=1,Object.defineProperty(rm,"__esModule",{value:!0}),rm.normalizeSignature=r,rm.isArgOfType=n,rm.getAmbiguousTypes=s;const t=J5(),e=gc();function r(i){let o=!0,a="",c=0,u="",l=!1;for(let d=0;d<i.length;d++){const f=i[d];if(["(",")",","].includes(f)&&(o=!0),f==="("&&c++,f===")"&&c--,!!o){if(c===0){if(f===" "&&["event","function","error",""].includes(u))u="";else if(u+=f,f===")"){l=!0;break}continue}if(f===" "){i[d-1]!==","&&a!==","&&a!==",("&&(a="",o=!1);continue}u+=f,a+=f}}if(!l)throw new e.BaseError("Unable to normalize signature.");return u}function n(i,o){const a=typeof i,c=o.type;switch(c){case"address":return t.validate(i,{strict:!1});case"bool":return a==="boolean";case"function":return a==="string";case"string":return a==="string";default:return c==="tuple"&&"components"in o?Object.values(o.components).every((u,l)=>n(Object.values(i)[l],u)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(c)?a==="number"||a==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(c)?a==="string"||i instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(c)?Array.isArray(i)&&i.every(u=>n(u,{...o,type:c.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function s(i,o,a){for(const c in i){const u=i[c],l=o[c];if(u.type==="tuple"&&l.type==="tuple"&&"components"in u&&"components"in l)return s(u.components,l.components,a[c]);const d=[u.type,l.type];if(d.includes("address")&&d.includes("bytes20")?!0:d.includes("address")&&d.includes("string")?t.validate(a[c],{strict:!1}):d.includes("address")&&d.includes("bytes")?t.validate(a[c],{strict:!1}):!1)return d}}return rm}var _V;function Tie(){if(_V)return Io;_V=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.InvalidSelectorSizeError=Io.NotFoundError=Io.AmbiguityError=void 0,Io.format=i,Io.from=o,Io.fromAbi=a,Io.getSelector=c,Io.getSignature=u,Io.getSignatureHash=l;const t=Vh(),e=gc(),r=l9(),n=$i(),s=wMe();function i(g){return t.formatAbiItem(g)}function o(g,h={}){const{prepare:y=!0}=h,E=Array.isArray(g)||typeof g=="string"?t.parseAbiItem(g):g;return{...E,...y?{hash:l(E)}:{}}}function a(g,h,y){const{args:E=[],prepare:S=!0}=y??{},C=n.validate(h,{strict:!1}),_=g.filter(D=>C?D.type==="function"||D.type==="error"?c(D)===n.slice(h,0,4):D.type==="event"?l(D)===h:!1:"name"in D&&D.name===h);if(_.length===0)throw new f({name:h});if(_.length===1)return{..._[0],...S?{hash:l(_[0])}:{}};let T;for(const D of _){if(!("inputs"in D))continue;if(!E||E.length===0){if(!D.inputs||D.inputs.length===0)return{...D,...S?{hash:l(D)}:{}};continue}if(!D.inputs||D.inputs.length===0||D.inputs.length!==E.length)continue;if(E.every((I,U)=>{const F="inputs"in D&&D.inputs[U];return F?s.isArgOfType(I,F):!1})){if(T&&"inputs"in T&&T.inputs){const I=s.getAmbiguousTypes(D.inputs,T.inputs,E);if(I)throw new d({abiItem:D,type:I[0]},{abiItem:T,type:I[1]})}T=D}}const P=(()=>{if(T)return T;const[D,...L]=_;return{...D,overloads:L}})();if(!P)throw new f({name:h});return{...P,...S?{hash:l(P)}:{}}}function c(...g){const h=(()=>{if(Array.isArray(g[0])){const[y,E]=g;return a(y,E)}return g[0]})();return n.slice(l(h),0,4)}function u(...g){const h=(()=>{if(Array.isArray(g[0])){const[E,S]=g;return a(E,S)}return g[0]})(),y=typeof h=="string"?h:t.formatAbiItem(h);return s.normalizeSignature(y)}function l(...g){const h=(()=>{if(Array.isArray(g[0])){const[y,E]=g;return a(y,E)}return g[0]})();return typeof h!="string"&&"hash"in h&&h.hash?h.hash:r.keccak256(n.fromString(u(h)))}class d extends e.BaseError{constructor(h,y){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${h.type}\` in \`${s.normalizeSignature(t.formatAbiItem(h.abiItem))}\`, and`,`\`${y.type}\` in \`${s.normalizeSignature(t.formatAbiItem(y.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}Io.AmbiguityError=d;class f extends e.BaseError{constructor({name:h,data:y,type:E="item"}){const S=h?` with name "${h}"`:y?` with data "${y}"`:"";super(`ABI ${E}${S} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}Io.NotFoundError=f;class p extends e.BaseError{constructor({data:h}){super(`Selector size is invalid. Expected 4 bytes. Received ${n.size(h)} bytes ("${h}").`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.InvalidSelectorSizeError"})}}return Io.InvalidSelectorSizeError=p,Io}var AV;function vMe(){if(AV)return zf;AV=1,Object.defineProperty(zf,"__esModule",{value:!0}),zf.decode=s,zf.encode=i,zf.format=o,zf.from=a,zf.fromAbi=c;const t=Vh(),e=Tie(),r=I_(),n=$i();function s(...u){const[l,d]=(()=>{if(Array.isArray(u[0])){const[g,h]=u;return[c(g),h]}return u})(),{bytecode:f}=d;if(l.inputs.length===0)return;const p=d.data.replace(f,"0x");return r.decode(l.inputs,p)}function i(...u){const[l,d]=(()=>{if(Array.isArray(u[0])){const[g,h]=u;return[c(g),h]}return u})(),{bytecode:f,args:p}=d;return n.concat(f,l.inputs?.length&&p?.length?r.encode(l.inputs,p):"0x")}function o(u){return t.formatAbiItem(u)}function a(u){return e.from(u)}function c(u){const l=u.find(d=>d.type==="constructor");if(!l)throw new e.NotFoundError({name:"constructor"});return l}return zf}var hu={},xV;function EMe(){if(xV)return hu;xV=1,Object.defineProperty(hu,"__esModule",{value:!0}),hu.decodeData=s,hu.decodeResult=i,hu.encodeData=o,hu.encodeResult=a,hu.format=c,hu.from=u,hu.fromAbi=l,hu.getSelector=d;const t=Vh(),e=Tie(),r=I_(),n=$i();function s(...f){const[p,g]=(()=>{if(Array.isArray(f[0])){const[E,S,C]=f;return[l(E,S),C]}return f})(),{overloads:h}=p;if(n.size(g)<4)throw new e.InvalidSelectorSizeError({data:g});if(p.inputs.length===0)return;const y=h?l([p,...h],g):p;if(!(n.size(g)<=4))return r.decode(y.inputs,n.slice(g,4))}function i(...f){const[p,g,h={}]=(()=>{if(Array.isArray(f[0])){const[E,S,C,_]=f;return[l(E,S),C,_]}return f})(),y=r.decode(p.outputs,g,h);if(!(y&&Object.keys(y).length===0))return y&&Object.keys(y).length===1?Array.isArray(y)?y[0]:Object.values(y)[0]:y}function o(...f){const[p,g=[]]=(()=>{if(Array.isArray(f[0])){const[T,P,D]=f;return[l(T,P,{args:D}),D]}const[C,_]=f;return[C,_]})(),{overloads:h}=p,y=h?l([p,...h],p.name,{args:g}):p,E=d(y),S=g.length>0?r.encode(y.inputs,g):void 0;return S?n.concat(E,S):E}function a(...f){const[p,g,h={}]=(()=>{if(Array.isArray(f[0])){const[S,C,_,T]=f;return[l(S,C),_,T]}return f})(),{as:y="Array"}=h,E=p.outputs.length===1?[g]:Array.isArray(g)?g:y==="Object"?Object.values(g):[g];return r.encode(p.outputs,E)}function c(f){return t.formatAbiItem(f)}function u(f,p={}){return e.from(f,p)}function l(f,p,g){const h=e.fromAbi(f,p,g);if(h.type!=="function")throw new e.NotFoundError({name:p,type:"function"});return h}function d(f){return e.getSelector(f)}return hu}var Ha={},CV;function Nie(){return CV||(CV=1,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.zeroAddress=Ha.ethAddress=Ha.entryPoint08Address=Ha.entryPoint07Address=Ha.entryPoint06Address=void 0,Ha.entryPoint06Address="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",Ha.entryPoint07Address="0x0000000071727De22E5E9d8BAf0edAc6f37da032",Ha.entryPoint08Address="0x4337084D9E255Ff0702461CF8895CE9E3b5Ff108",Ha.ethAddress="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Ha.zeroAddress="0x0000000000000000000000000000000000000000"),Ha}var SV;function _Me(){if(SV)return vC;SV=1,Object.defineProperty(vC,"__esModule",{value:!0}),vC.simulateCalls=d;const t=vMe(),e=EMe(),r=is(),n=Nie(),s=b_(),i=Kt(),o=Ra(),a=y9(),c=Hse(),u=Iie(),l="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function d(f,p){const{blockNumber:g,blockTag:h,calls:y,stateOverrides:E,traceAssetChanges:S,traceTransfers:C,validation:_}=p,T=p.account?(0,r.parseAccount)(p.account):void 0;if(S&&!T)throw new i.BaseError("`account` is required when `traceAssetChanges` is true");const P=T?t.encode(t.from("constructor(bytes, bytes)"),{bytecode:s.deploylessCallViaBytecodeBytecode,args:[l,e.encodeData(e.from("function getBalance(address)"),[T.address])]}):void 0,D=S?await Promise.all(p.calls.map(async Q=>{if(!Q.data&&!Q.abi)return;const{accessList:re}=await(0,c.createAccessList)(f,{account:T.address,...Q,data:Q.abi?(0,o.encodeFunctionData)(Q):Q.data});return re.map(({address:de,storageKeys:le})=>le.length>0?de:null)})).then(Q=>Q.flat().filter(Boolean)):[],L=await(0,u.simulateBlocks)(f,{blockNumber:g,blockTag:h,blocks:[...S?[{calls:[{data:P}],stateOverrides:E},{calls:D.map((Q,re)=>({abi:[e.from("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[T.address],to:Q,from:n.zeroAddress,nonce:re})),stateOverrides:[{address:n.zeroAddress,nonce:0}]}]:[],{calls:[...y,{}].map(Q=>({...Q,from:T?.address})),stateOverrides:E},...S?[{calls:[{data:P}]},{calls:D.map((Q,re)=>({abi:[e.from("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[T.address],to:Q,from:n.zeroAddress,nonce:re})),stateOverrides:[{address:n.zeroAddress,nonce:0}]},{calls:D.map((Q,re)=>({to:Q,abi:[e.from("function decimals() returns (uint256)")],functionName:"decimals",from:n.zeroAddress,nonce:re})),stateOverrides:[{address:n.zeroAddress,nonce:0}]},{calls:D.map((Q,re)=>({to:Q,abi:[e.from("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:n.zeroAddress,nonce:re})),stateOverrides:[{address:n.zeroAddress,nonce:0}]},{calls:D.map((Q,re)=>({to:Q,abi:[e.from("function symbol() returns (string)")],functionName:"symbol",from:n.zeroAddress,nonce:re})),stateOverrides:[{address:n.zeroAddress,nonce:0}]}]:[]],traceTransfers:C,validation:_}),I=S?L[2]:L[0],[U,F,,B,A,m,b,w]=S?L:[],{calls:x,...M}=I,k=x.slice(0,-1)??[],j=U?.calls??[],N=F?.calls??[],v=[...j,...N].map(Q=>Q.status==="success"?(0,a.hexToBigInt)(Q.data):null),R=B?.calls??[],$=A?.calls??[],O=[...R,...$].map(Q=>Q.status==="success"?(0,a.hexToBigInt)(Q.data):null),H=(m?.calls??[]).map(Q=>Q.status==="success"?Q.result:null),W=(w?.calls??[]).map(Q=>Q.status==="success"?Q.result:null),G=(b?.calls??[]).map(Q=>Q.status==="success"?Q.result:null),K=[];for(const[Q,re]of O.entries()){const de=v[Q];if(typeof re!="bigint"||typeof de!="bigint")continue;const le=H[Q-1],se=W[Q-1],be=G[Q-1],We=Q===0?{address:n.ethAddress,decimals:18,symbol:"ETH"}:{address:D[Q-1],decimals:be||le?Number(le??1):void 0,symbol:se??void 0};K.some(Ne=>Ne.token.address===We.address)||K.push({token:We,value:{pre:de,post:re,diff:re-de}})}return{assetChanges:K,block:M,results:k}}return vC}var nm={},Qw={},yR={},IV;function AMe(){return IV||(IV=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidWrappedSignatureError=t.universalSignatureValidatorAbi=t.universalSignatureValidatorBytecode=t.magicBytes=void 0,t.assert=s,t.from=i,t.unwrap=o,t.wrap=a,t.validate=c;const e=I_(),r=gc(),n=$i();t.magicBytes="0x6492649264926492649264926492649264926492649264926492649264926492",t.universalSignatureValidatorBytecode="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",t.universalSignatureValidatorAbi=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function s(l){if(n.slice(l,-32)!==t.magicBytes)throw new u(l)}function i(l){return typeof l=="string"?o(l):l}function o(l){s(l);const[d,f,p]=e.decode(e.from("address, bytes, bytes"),l);return{data:f,signature:p,to:d}}function a(l){const{data:d,signature:f,to:p}=l;return n.concat(e.encode(e.from("address, bytes, bytes"),[p,d,f]),t.magicBytes)}function c(l){try{return s(l),!0}catch{return!1}}class u extends r.BaseError{constructor(d){super(`Value \`${d}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}t.InvalidWrappedSignatureError=u})(yR)),yR}var TV;function xMe(){return TV||(TV=1,Object.defineProperty(Qw,"__esModule",{value:!0}),Qw.SignatureErc6492=void 0,Qw.SignatureErc6492=AMe()),Qw}var EC={},NV;function Pie(){if(NV)return EC;NV=1,Object.defineProperty(EC,"__esModule",{value:!0}),EC.serializeSignature=n;const t=fg(),e=ys(),r=Pn();function n({r:s,s:i,to:o="hex",v:a,yParity:c}){const u=(()=>{if(c===0||c===1)return c;if(a&&(a===27n||a===28n||a>=35n))return a%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),l=`0x${new t.secp256k1.Signature((0,e.hexToBigInt)(s),(0,e.hexToBigInt)(i)).toCompactHex()}${u===0?"1b":"1c"}`;return o==="hex"?l:(0,r.hexToBytes)(l)}return EC}var PV;function e3(){if(PV)return nm;PV=1,Object.defineProperty(nm,"__esModule",{value:!0}),nm.verifyHash=_,nm.verifyErc8010=T,nm.verifyErc1271=D;const t=xMe(),e=X5(),r=rp(),n=b_(),s=Yh(),i=v_(),o=Ra(),a=pc(),c=Yu(),u=Yse(),l=hi(),d=Ho(),f=ys(),p=tt(),g=kr(),h=Qh(),y=Pie(),E=E_(),S=Vse(),C=Kl();async function _(I,U){const{address:F,hash:B,erc6492VerifierAddress:A=U.universalSignatureVerifierAddress??I.chain?.contracts?.erc6492Verifier?.address,multicallAddress:m=U.multicallAddress??I.chain?.contracts?.multicall3?.address}=U,b=(()=>{const w=U.signature;return(0,d.isHex)(w)?w:typeof w=="object"&&"r"in w&&"s"in w?(0,y.serializeSignature)(w):(0,p.bytesToHex)(w)})();try{return e.SignatureErc8010.validate(b)?await T(I,{...U,multicallAddress:m,signature:b}):await P(I,{...U,verifierAddress:A,signature:b})}catch(w){try{if((0,c.isAddressEqual)((0,a.getAddress)(F),await(0,h.recoverAddress)({hash:B,signature:b})))return!0}catch{}if(w instanceof L)return!1;throw w}}async function T(I,U){const{address:F,blockNumber:B,blockTag:A,hash:m,multicallAddress:b}=U,{authorization:w,data:x,signature:M,to:k}=e.SignatureErc8010.unwrap(U.signature);if(await(0,S.getCode)(I,{address:F,blockNumber:B,blockTag:A})===(0,l.concatHex)(["0xef0100",w.address]))return await D(I,{address:F,blockNumber:B,blockTag:A,hash:m,signature:M});const N={address:w.address,chainId:Number(w.chainId),nonce:Number(w.nonce),r:(0,p.numberToHex)(w.r,{size:32}),s:(0,p.numberToHex)(w.s,{size:32}),yParity:w.yParity};if(!await(0,u.verifyAuthorization)({address:F,authorization:N}))throw new L;const R=await(0,g.getAction)(I,C.readContract,"readContract")({...b?{address:b}:{code:n.multicall3Bytecode},authorizationList:[N],abi:r.multicall3Abi,blockNumber:B,blockTag:"pending",functionName:"aggregate3",args:[[...x?[{allowFailure:!0,target:k??F,callData:x}]:[],{allowFailure:!0,target:F,callData:(0,o.encodeFunctionData)({abi:r.erc1271Abi,functionName:"isValidSignature",args:[m,M]})}]]});if(R[R.length-1]?.returnData?.startsWith("0x1626ba7e"))return!0;throw new L}async function P(I,U){const{address:F,factory:B,factoryData:A,hash:m,signature:b,verifierAddress:w,...x}=U,M=await(async()=>!B&&!A||t.SignatureErc6492.validate(b)?b:t.SignatureErc6492.wrap({data:A,signature:b,to:B}))(),k=w?{to:w,data:(0,o.encodeFunctionData)({abi:r.erc6492SignatureValidatorAbi,functionName:"isValidSig",args:[F,m,M]}),...x}:{data:(0,i.encodeDeployData)({abi:r.erc6492SignatureValidatorAbi,args:[F,m,M],bytecode:n.erc6492SignatureValidatorByteCode}),...x},{data:j}=await(0,g.getAction)(I,E.call,"call")(k).catch(N=>{throw N instanceof s.CallExecutionError?new L:N});if((0,f.hexToBool)(j??"0x0"))return!0;throw new L}async function D(I,U){const{address:F,blockNumber:B,blockTag:A,hash:m,signature:b}=U;if((await(0,g.getAction)(I,C.readContract,"readContract")({address:F,abi:r.erc1271Abi,args:[m,b],blockNumber:B,blockTag:A,functionName:"isValidSignature"}).catch(x=>{throw x instanceof s.ContractFunctionExecutionError?new L:x})).startsWith("0x1626ba7e"))return!0;throw new L}class L extends Error{}return nm}var _C={},RV;function CMe(){if(RV)return _C;RV=1,Object.defineProperty(_C,"__esModule",{value:!0}),_C.verifyMessage=n;const t=kr(),e=C_(),r=e3();async function n(s,{address:i,message:o,factory:a,factoryData:c,signature:u,...l}){const d=(0,e.hashMessage)(o);return(0,t.getAction)(s,r.verifyHash,"verifyHash")({address:i,factory:a,factoryData:c,hash:d,signature:u,...l})}return _C}var AC={},OV;function SMe(){if(OV)return AC;OV=1,Object.defineProperty(AC,"__esModule",{value:!0}),AC.verifyTypedData=n;const t=kr(),e=S_(),r=e3();async function n(s,i){const{address:o,factory:a,factoryData:c,signature:u,message:l,primaryType:d,types:f,domain:p,...g}=i,h=(0,e.hashTypedData)({message:l,primaryType:d,types:f,domain:p});return(0,t.getAction)(s,r.verifyHash,"verifyHash")({address:o,factory:a,factoryData:c,hash:h,signature:u,...g})}return AC}var xC={},CC={},kV;function Rie(){if(kV)return CC;kV=1,Object.defineProperty(CC,"__esModule",{value:!0}),CC.watchBlockNumber=o;const t=ys(),e=kr(),r=pg(),n=cb(),s=Fi(),i=__();function o(a,{emitOnBegin:c=!1,emitMissed:u=!1,onBlockNumber:l,onError:d,poll:f,pollingInterval:p=a.pollingInterval}){const g=typeof f<"u"?f:!(a.transport.type==="webSocket"||a.transport.type==="ipc"||a.transport.type==="fallback"&&(a.transport.transports[0].config.type==="webSocket"||a.transport.transports[0].config.type==="ipc"));let h;return g?(()=>{const S=(0,s.stringify)(["watchBlockNumber",a.uid,c,u,p]);return(0,r.observe)(S,{onBlockNumber:l,onError:d},C=>(0,n.poll)(async()=>{try{const _=await(0,e.getAction)(a,i.getBlockNumber,"getBlockNumber")({cacheTime:0});if(h!==void 0){if(_===h)return;if(_-h>1&&u)for(let T=h+1n;T<_;T++)C.onBlockNumber(T,h),h=T}(h===void 0||_>h)&&(C.onBlockNumber(_,h),h=_)}catch(_){C.onError?.(_)}},{emitOnBegin:c,interval:p}))})():(()=>{const S=(0,s.stringify)(["watchBlockNumber",a.uid,c,u]);return(0,r.observe)(S,{onBlockNumber:l,onError:d},C=>{let _=!0,T=()=>_=!1;return(async()=>{try{const P=(()=>{if(a.transport.type==="fallback"){const L=a.transport.transports.find(I=>I.config.type==="webSocket"||I.config.type==="ipc");return L?L.value:a.transport}return a.transport})(),{unsubscribe:D}=await P.subscribe({params:["newHeads"],onData(L){if(!_)return;const I=(0,t.hexToBigInt)(L.result?.number);C.onBlockNumber(I,h),h=I},onError(L){C.onError?.(L)}});T=D,_||T()}catch(P){d?.(P)}})(),()=>T()})})()}return CC}var BV;function Oie(){if(BV)return xC;BV=1,Object.defineProperty(xC,"__esModule",{value:!0}),xC.waitForTransactionReceipt=d;const t=PB(),e=Oa(),r=kr(),n=pg(),s=FB(),i=V5(),o=Fi(),a=hg(),c=b9(),u=Sie(),l=Rie();async function d(f,p){const{checkReplacement:g=!0,confirmations:h=1,hash:y,onReplaced:E,retryCount:S=6,retryDelay:C=({count:x})=>~~(1<<x)*200,timeout:_=18e4}=p,T=(0,o.stringify)(["waitForTransactionReceipt",f.uid,y]),P=p.pollingInterval?p.pollingInterval:f.chain?.experimental_preconfirmationTime?f.chain.experimental_preconfirmationTime:f.pollingInterval;let D,L,I,U=!1,F,B;const{promise:A,resolve:m,reject:b}=(0,s.withResolvers)(),w=_?setTimeout(()=>{B?.(),F?.(),b(new e.WaitForTransactionReceiptTimeoutError({hash:y}))},_):void 0;return F=(0,n.observe)(T,{onReplaced:E,resolve:m,reject:b},async x=>{if(I=await(0,r.getAction)(f,u.getTransactionReceipt,"getTransactionReceipt")({hash:y}).catch(()=>{}),I&&h<=1){clearTimeout(w),x.resolve(I),F?.();return}B=(0,r.getAction)(f,l.watchBlockNumber,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:P,async onBlockNumber(M){const k=N=>{clearTimeout(w),B?.(),N(),F?.()};let j=M;if(!U)try{if(I){if(h>1&&(!I.blockNumber||j-I.blockNumber+1n<h))return;k(()=>x.resolve(I));return}if(g&&!D&&(U=!0,await(0,i.withRetry)(async()=>{D=await(0,r.getAction)(f,c.getTransaction,"getTransaction")({hash:y}),D.blockNumber&&(j=D.blockNumber)},{delay:C,retryCount:S}),U=!1),I=await(0,r.getAction)(f,u.getTransactionReceipt,"getTransactionReceipt")({hash:y}),h>1&&(!I.blockNumber||j-I.blockNumber+1n<h))return;k(()=>x.resolve(I))}catch(N){if(N instanceof e.TransactionNotFoundError||N instanceof e.TransactionReceiptNotFoundError){if(!D){U=!1;return}try{L=D,U=!0;const v=await(0,i.withRetry)(()=>(0,r.getAction)(f,a.getBlock,"getBlock")({blockNumber:j,includeTransactions:!0}),{delay:C,retryCount:S,shouldRetry:({error:O})=>O instanceof t.BlockNotFoundError});U=!1;const R=v.transactions.find(({from:O,nonce:H})=>O===L.from&&H===L.nonce);if(!R||(I=await(0,r.getAction)(f,u.getTransactionReceipt,"getTransactionReceipt")({hash:R.hash}),h>1&&(!I.blockNumber||j-I.blockNumber+1n<h)))return;let $="replaced";R.to===L.to&&R.value===L.value&&R.input===L.input?$="repriced":R.from===R.to&&R.value===0n&&($="cancelled"),k(()=>{x.onReplaced?.({reason:$,replacedTransaction:L,transaction:R,transactionReceipt:I}),x.resolve(I)})}catch(v){k(()=>x.reject(v))}}else k(()=>x.reject(N))}}})}),A}return xC}var SC={},UV;function IMe(){if(UV)return SC;UV=1,Object.defineProperty(SC,"__esModule",{value:!0}),SC.watchBlocks=i;const t=kr(),e=pg(),r=cb(),n=Fi(),s=hg();function i(o,{blockTag:a=o.experimental_blockTag??"latest",emitMissed:c=!1,emitOnBegin:u=!1,onBlock:l,onError:d,includeTransactions:f,poll:p,pollingInterval:g=o.pollingInterval}){const h=typeof p<"u"?p:!(o.transport.type==="webSocket"||o.transport.type==="ipc"||o.transport.type==="fallback"&&(o.transport.transports[0].config.type==="webSocket"||o.transport.transports[0].config.type==="ipc")),y=f??!1;let E;return h?(()=>{const _=(0,n.stringify)(["watchBlocks",o.uid,a,c,u,y,g]);return(0,e.observe)(_,{onBlock:l,onError:d},T=>(0,r.poll)(async()=>{try{const P=await(0,t.getAction)(o,s.getBlock,"getBlock")({blockTag:a,includeTransactions:y});if(P.number!==null&&E?.number!=null){if(P.number===E.number)return;if(P.number-E.number>1&&c)for(let D=E?.number+1n;D<P.number;D++){const L=await(0,t.getAction)(o,s.getBlock,"getBlock")({blockNumber:D,includeTransactions:y});T.onBlock(L,E),E=L}}(E?.number==null||a==="pending"&&P?.number==null||P.number!==null&&P.number>E.number)&&(T.onBlock(P,E),E=P)}catch(P){T.onError?.(P)}},{emitOnBegin:u,interval:g}))})():(()=>{let _=!0,T=!0,P=()=>_=!1;return(async()=>{try{u&&(0,t.getAction)(o,s.getBlock,"getBlock")({blockTag:a,includeTransactions:y}).then(I=>{_&&T&&(l(I,void 0),T=!1)}).catch(d);const D=(()=>{if(o.transport.type==="fallback"){const I=o.transport.transports.find(U=>U.config.type==="webSocket"||U.config.type==="ipc");return I?I.value:o.transport}return o.transport})(),{unsubscribe:L}=await D.subscribe({params:["newHeads"],async onData(I){if(!_)return;const U=await(0,t.getAction)(o,s.getBlock,"getBlock")({blockNumber:I.result?.number,includeTransactions:y}).catch(()=>{});_&&(l(U,E),T=!1,E=U)},onError(I){d?.(I)}});P=L,_||P()}catch(D){d?.(D)}})(),()=>P()})()}return SC}var IC={},MV;function TMe(){if(MV)return IC;MV=1,Object.defineProperty(IC,"__esModule",{value:!0}),IC.watchEvent=g;const t=Jn(),e=Jh(),r=m_(),n=ug(),s=pf(),i=kr(),o=pg(),a=cb(),c=Fi(),u=zse(),l=__(),d=H5(),f=DB(),p=z5();function g(h,{address:y,args:E,batch:S=!0,event:C,events:_,fromBlock:T,onError:P,onLogs:D,poll:L,pollingInterval:I=h.pollingInterval,strict:U}){const F=typeof L<"u"?L:typeof T=="bigint"?!0:!(h.transport.type==="webSocket"||h.transport.type==="ipc"||h.transport.type==="fallback"&&(h.transport.transports[0].config.type==="webSocket"||h.transport.transports[0].config.type==="ipc")),B=U??!1;return F?(()=>{const b=(0,c.stringify)(["watchEvent",y,E,S,h.uid,C,I,T]);return(0,o.observe)(b,{onLogs:D,onError:P},w=>{let x;T!==void 0&&(x=T-1n);let M,k=!1;const j=(0,a.poll)(async()=>{if(!k){try{M=await(0,i.getAction)(h,u.createEventFilter,"createEventFilter")({address:y,args:E,event:C,events:_,strict:B,fromBlock:T})}catch{}k=!0;return}try{let N;if(M)N=await(0,i.getAction)(h,d.getFilterChanges,"getFilterChanges")({filter:M});else{const v=await(0,i.getAction)(h,l.getBlockNumber,"getBlockNumber")({});x&&x!==v?N=await(0,i.getAction)(h,f.getLogs,"getLogs")({address:y,args:E,event:C,events:_,fromBlock:x+1n,toBlock:v}):N=[],x=v}if(N.length===0)return;if(S)w.onLogs(N);else for(const v of N)w.onLogs([v])}catch(N){M&&N instanceof e.InvalidInputRpcError&&(k=!1),w.onError?.(N)}},{emitOnBegin:!0,interval:I});return async()=>{M&&await(0,i.getAction)(h,p.uninstallFilter,"uninstallFilter")({filter:M}),j()}})})():(()=>{let b=!0,w=()=>b=!1;return(async()=>{try{const x=(()=>{if(h.transport.type==="fallback"){const N=h.transport.transports.find(v=>v.config.type==="webSocket"||v.config.type==="ipc");return N?N.value:h.transport}return h.transport})(),M=_??(C?[C]:void 0);let k=[];M&&(k=[M.flatMap(v=>(0,n.encodeEventTopics)({abi:[v],eventName:v.name,args:E}))],C&&(k=k[0]));const{unsubscribe:j}=await x.subscribe({params:["logs",{address:y,topics:k}],onData(N){if(!b)return;const v=N.result;try{const{eventName:R,args:$}=(0,r.decodeEventLog)({abi:M??[],data:v.data,topics:v.topics,strict:B}),O=(0,s.formatLog)(v,{args:$,eventName:R});D([O])}catch(R){let $,O;if(R instanceof t.DecodeLogDataMismatch||R instanceof t.DecodeLogTopicsMismatch){if(U)return;$=R.abiItem.name,O=R.abiItem.inputs?.some(W=>!("name"in W&&W.name))}const H=(0,s.formatLog)(v,{args:O?[]:{},eventName:$});D([H])}},onError(N){P?.(N)}});w=j,b||w()}catch(x){P?.(x)}})(),()=>w()})()}return IC}var TC={},DV;function NMe(){if(DV)return TC;DV=1,Object.defineProperty(TC,"__esModule",{value:!0}),TC.watchPendingTransactions=a;const t=kr(),e=pg(),r=cb(),n=Fi(),s=Wse(),i=H5(),o=z5();function a(c,{batch:u=!0,onError:l,onTransactions:d,poll:f,pollingInterval:p=c.pollingInterval}){return(typeof f<"u"?f:c.transport.type!=="webSocket"&&c.transport.type!=="ipc")?(()=>{const E=(0,n.stringify)(["watchPendingTransactions",c.uid,u,p]);return(0,e.observe)(E,{onTransactions:d,onError:l},S=>{let C;const _=(0,r.poll)(async()=>{try{if(!C)try{C=await(0,t.getAction)(c,s.createPendingTransactionFilter,"createPendingTransactionFilter")({});return}catch(P){throw _(),P}const T=await(0,t.getAction)(c,i.getFilterChanges,"getFilterChanges")({filter:C});if(T.length===0)return;if(u)S.onTransactions(T);else for(const P of T)S.onTransactions([P])}catch(T){S.onError?.(T)}},{emitOnBegin:!0,interval:p});return async()=>{C&&await(0,t.getAction)(c,o.uninstallFilter,"uninstallFilter")({filter:C}),_()}})})():(()=>{let E=!0,S=()=>E=!1;return(async()=>{try{const{unsubscribe:C}=await c.transport.subscribe({params:["newPendingTransactions"],onData(_){if(!E)return;const T=_.result;d([T])},onError(_){l?.(_)}});S=C,E||S()}catch(C){l?.(C)}})(),()=>S()})()}return TC}var NC={},PC={},jV;function PMe(){if(jV)return PC;jV=1,Object.defineProperty(PC,"__esModule",{value:!0}),PC.parseSiweMessage=t;function t(n){const{scheme:s,statement:i,...o}=n.match(e)?.groups??{},{chainId:a,expirationTime:c,issuedAt:u,notBefore:l,requestId:d,...f}=n.match(r)?.groups??{},p=n.split("Resources:")[1]?.split(`
- `).slice(1);return{...o,...f,...a?{chainId:Number(a)}:{},...c?{expirationTime:new Date(c)}:{},...u?{issuedAt:new Date(u)}:{},...l?{notBefore:new Date(l)}:{},...d?{requestId:d}:{},...p?{resources:p}:{},...s?{scheme:s}:{},...i?{statement:i}:{}}}const e=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,r=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;return PC}var RC={},LV;function RMe(){if(LV)return RC;LV=1,Object.defineProperty(RC,"__esModule",{value:!0}),RC.validateSiweMessage=r;const t=Pa(),e=Yu();function r(n){const{address:s,domain:i,message:o,nonce:a,scheme:c,time:u=new Date}=n;if(i&&o.domain!==i||a&&o.nonce!==a||c&&o.scheme!==c||o.expirationTime&&u>=o.expirationTime||o.notBefore&&u<o.notBefore)return!1;try{if(!o.address||!(0,t.isAddress)(o.address,{strict:!1})||s&&!(0,e.isAddressEqual)(o.address,s))return!1}catch{return!1}return!0}return RC}var FV;function OMe(){if(FV)return NC;FV=1,Object.defineProperty(NC,"__esModule",{value:!0}),NC.verifySiweMessage=s;const t=C_(),e=PMe(),r=RMe(),n=e3();async function s(i,o){const{address:a,domain:c,message:u,nonce:l,scheme:d,signature:f,time:p=new Date,...g}=o,h=(0,e.parseSiweMessage)(u);if(!h.address||!(0,r.validateSiweMessage)({address:a,domain:c,message:h,nonce:l,scheme:d,time:p}))return!1;const E=(0,t.hashMessage)(u);return(0,n.verifyHash)(i,{address:h.address,hash:E,signature:f,...g})}return NC}var OC={},$V;function w9(){if($V)return OC;$V=1,Object.defineProperty(OC,"__esModule",{value:!0}),OC.sendRawTransactionSync=n;const t=Oa(),e=x_(),r=y9();async function n(s,{serializedTransaction:i,throwOnReceiptRevert:o,timeout:a}){const c=await s.request({method:"eth_sendRawTransactionSync",params:a?[i,(0,r.numberToHex)(a)]:[i]},{retryCount:0}),l=(s.chain?.formatters?.transactionReceipt?.format||e.formatTransactionReceipt)(c);if(l.status==="reverted"&&o)throw new t.TransactionReceiptRevertedError({receipt:l});return l}return OC}var qV;function kie(){if(qV)return dx;qV=1,Object.defineProperty(dx,"__esModule",{value:!0}),dx.publicActions=At;const t=LUe(),e=qUe(),r=HUe(),n=zUe(),s=qse(),i=E_(),o=Hse(),a=WUe(),c=_B(),u=zse(),l=Wse(),d=Pse(),f=Cse(),p=MB(),g=xse(),h=UB(),y=VUe(),E=GUe(),S=hg(),C=__(),_=KUe(),T=tp(),P=Vse(),D=jB(),L=YUe(),I=XUe(),U=H5(),F=QUe(),B=RB(),A=DB(),m=gMe(),b=mMe(),w=b9(),x=yMe(),M=M5(),k=Sie(),j=bMe(),N=Kl(),v=Iie(),R=_Me(),$=Bse(),O=z5(),H=e3(),W=CMe(),G=SMe(),K=Oie(),Q=Rie(),re=IMe(),de=Mse(),le=TMe(),se=NMe(),be=OMe(),We=g_(),Ne=GB(),Be=w9();function At(Ee){return{call:fe=>(0,i.call)(Ee,fe),createAccessList:fe=>(0,o.createAccessList)(Ee,fe),createBlockFilter:()=>(0,a.createBlockFilter)(Ee),createContractEventFilter:fe=>(0,c.createContractEventFilter)(Ee,fe),createEventFilter:fe=>(0,u.createEventFilter)(Ee,fe),createPendingTransactionFilter:()=>(0,l.createPendingTransactionFilter)(Ee),estimateContractGas:fe=>(0,d.estimateContractGas)(Ee,fe),estimateGas:fe=>(0,p.estimateGas)(Ee,fe),getBalance:fe=>(0,y.getBalance)(Ee,fe),getBlobBaseFee:()=>(0,E.getBlobBaseFee)(Ee),getBlock:fe=>(0,S.getBlock)(Ee,fe),getBlockNumber:fe=>(0,C.getBlockNumber)(Ee,fe),getBlockTransactionCount:fe=>(0,_.getBlockTransactionCount)(Ee,fe),getBytecode:fe=>(0,P.getCode)(Ee,fe),getChainId:()=>(0,T.getChainId)(Ee),getCode:fe=>(0,P.getCode)(Ee,fe),getContractEvents:fe=>(0,D.getContractEvents)(Ee,fe),getEip712Domain:fe=>(0,L.getEip712Domain)(Ee,fe),getEnsAddress:fe=>(0,t.getEnsAddress)(Ee,fe),getEnsAvatar:fe=>(0,e.getEnsAvatar)(Ee,fe),getEnsName:fe=>(0,r.getEnsName)(Ee,fe),getEnsResolver:fe=>(0,n.getEnsResolver)(Ee,fe),getEnsText:fe=>(0,s.getEnsText)(Ee,fe),getFeeHistory:fe=>(0,I.getFeeHistory)(Ee,fe),estimateFeesPerGas:fe=>(0,f.estimateFeesPerGas)(Ee,fe),getFilterChanges:fe=>(0,U.getFilterChanges)(Ee,fe),getFilterLogs:fe=>(0,F.getFilterLogs)(Ee,fe),getGasPrice:()=>(0,B.getGasPrice)(Ee),getLogs:fe=>(0,A.getLogs)(Ee,fe),getProof:fe=>(0,m.getProof)(Ee,fe),estimateMaxPriorityFeePerGas:fe=>(0,g.estimateMaxPriorityFeePerGas)(Ee,fe),fillTransaction:fe=>(0,h.fillTransaction)(Ee,fe),getStorageAt:fe=>(0,b.getStorageAt)(Ee,fe),getTransaction:fe=>(0,w.getTransaction)(Ee,fe),getTransactionConfirmations:fe=>(0,x.getTransactionConfirmations)(Ee,fe),getTransactionCount:fe=>(0,M.getTransactionCount)(Ee,fe),getTransactionReceipt:fe=>(0,k.getTransactionReceipt)(Ee,fe),multicall:fe=>(0,j.multicall)(Ee,fe),prepareTransactionRequest:fe=>(0,We.prepareTransactionRequest)(Ee,fe),readContract:fe=>(0,N.readContract)(Ee,fe),sendRawTransaction:fe=>(0,Ne.sendRawTransaction)(Ee,fe),sendRawTransactionSync:fe=>(0,Be.sendRawTransactionSync)(Ee,fe),simulate:fe=>(0,v.simulateBlocks)(Ee,fe),simulateBlocks:fe=>(0,v.simulateBlocks)(Ee,fe),simulateCalls:fe=>(0,R.simulateCalls)(Ee,fe),simulateContract:fe=>(0,$.simulateContract)(Ee,fe),verifyHash:fe=>(0,H.verifyHash)(Ee,fe),verifyMessage:fe=>(0,W.verifyMessage)(Ee,fe),verifySiweMessage:fe=>(0,be.verifySiweMessage)(Ee,fe),verifyTypedData:fe=>(0,G.verifyTypedData)(Ee,fe),uninstallFilter:fe=>(0,O.uninstallFilter)(Ee,fe),waitForTransactionReceipt:fe=>(0,K.waitForTransactionReceipt)(Ee,fe),watchBlocks:fe=>(0,re.watchBlocks)(Ee,fe),watchBlockNumber:fe=>(0,Q.watchBlockNumber)(Ee,fe),watchContractEvent:fe=>(0,de.watchContractEvent)(Ee,fe),watchEvent:fe=>(0,le.watchEvent)(Ee,fe),watchPendingTransactions:fe=>(0,se.watchPendingTransactions)(Ee,fe)}}return dx}var HV;function kMe(){if(HV)return lx;HV=1,Object.defineProperty(lx,"__esModule",{value:!0}),lx.createPublicClient=r;const t=G5(),e=kie();function r(n){const{key:s="public",name:i="Public Client"}=n;return(0,t.createClient)({...n,key:s,name:i,type:"publicClient"}).extend(e.publicActions)}return lx}var kC={},BC={},UC={},zV;function BMe(){if(zV)return UC;zV=1,Object.defineProperty(UC,"__esModule",{value:!0}),UC.dropTransaction=t;async function t(e,{hash:r}){await e.request({method:`${e.mode}_dropTransaction`,params:[r]})}return UC}var MC={},WV;function UMe(){if(WV)return MC;WV=1,Object.defineProperty(MC,"__esModule",{value:!0}),MC.dumpState=t;async function t(e){return e.request({method:`${e.mode}_dumpState`})}return MC}var DC={},VV;function MMe(){if(VV)return DC;VV=1,Object.defineProperty(DC,"__esModule",{value:!0}),DC.getAutomine=t;async function t(e){return e.mode==="ganache"?await e.request({method:"eth_mining"}):await e.request({method:`${e.mode}_getAutomine`})}return DC}var jC={},GV;function DMe(){if(GV)return jC;GV=1,Object.defineProperty(jC,"__esModule",{value:!0}),jC.getTxpoolContent=t;async function t(e){return await e.request({method:"txpool_content"})}return jC}var LC={},KV;function jMe(){if(KV)return LC;KV=1,Object.defineProperty(LC,"__esModule",{value:!0}),LC.getTxpoolStatus=e;const t=ys();async function e(r){const{pending:n,queued:s}=await r.request({method:"txpool_status"});return{pending:(0,t.hexToNumber)(n),queued:(0,t.hexToNumber)(s)}}return LC}var FC={},ZV;function LMe(){if(ZV)return FC;ZV=1,Object.defineProperty(FC,"__esModule",{value:!0}),FC.impersonateAccount=t;async function t(e,{address:r}){await e.request({method:`${e.mode}_impersonateAccount`,params:[r]})}return FC}var $C={},YV;function FMe(){if(YV)return $C;YV=1,Object.defineProperty($C,"__esModule",{value:!0}),$C.increaseTime=e;const t=tt();async function e(r,{seconds:n}){return await r.request({method:"evm_increaseTime",params:[(0,t.numberToHex)(n)]})}return $C}var qC={},JV;function $Me(){if(JV)return qC;JV=1,Object.defineProperty(qC,"__esModule",{value:!0}),qC.inspectTxpool=t;async function t(e){return await e.request({method:"txpool_inspect"})}return qC}var HC={},XV;function qMe(){if(XV)return HC;XV=1,Object.defineProperty(HC,"__esModule",{value:!0}),HC.loadState=t;async function t(e,{state:r}){await e.request({method:`${e.mode}_loadState`,params:[r]})}return HC}var zC={},QV;function HMe(){if(QV)return zC;QV=1,Object.defineProperty(zC,"__esModule",{value:!0}),zC.mine=e;const t=tt();async function e(r,{blocks:n,interval:s}){r.mode==="ganache"?await r.request({method:"evm_mine",params:[{blocks:(0,t.numberToHex)(n)}]}):await r.request({method:`${r.mode}_mine`,params:[(0,t.numberToHex)(n),(0,t.numberToHex)(s||0)]})}return zC}var WC={},eG;function zMe(){if(eG)return WC;eG=1,Object.defineProperty(WC,"__esModule",{value:!0}),WC.removeBlockTimestampInterval=t;async function t(e){await e.request({method:`${e.mode}_removeBlockTimestampInterval`})}return WC}var VC={},tG;function WMe(){if(tG)return VC;tG=1,Object.defineProperty(VC,"__esModule",{value:!0}),VC.reset=t;async function t(e,{blockNumber:r,jsonRpcUrl:n}={}){await e.request({method:`${e.mode}_reset`,params:[{forking:{blockNumber:Number(r),jsonRpcUrl:n}}]})}return VC}var GC={},rG;function VMe(){if(rG)return GC;rG=1,Object.defineProperty(GC,"__esModule",{value:!0}),GC.revert=t;async function t(e,{id:r}){await e.request({method:"evm_revert",params:[r]})}return GC}var KC={},nG;function GMe(){if(nG)return KC;nG=1,Object.defineProperty(KC,"__esModule",{value:!0}),KC.sendUnsignedTransaction=r;const t=ep(),e=Ku();async function r(n,s){const{accessList:i,data:o,from:a,gas:c,gasPrice:u,maxFeePerGas:l,maxPriorityFeePerGas:d,nonce:f,to:p,value:g,...h}=s,y=n.chain?.formatters?.transactionRequest?.format,S=(y||e.formatTransactionRequest)({...(0,t.extract)(h,{format:y}),accessList:i,data:o,from:a,gas:c,gasPrice:u,maxFeePerGas:l,maxPriorityFeePerGas:d,nonce:f,to:p,value:g},"sendUnsignedTransaction");return await n.request({method:"eth_sendUnsignedTransaction",params:[S]})}return KC}var ZC={},sG;function KMe(){if(sG)return ZC;sG=1,Object.defineProperty(ZC,"__esModule",{value:!0}),ZC.setAutomine=t;async function t(e,r){e.mode==="ganache"?r?await e.request({method:"miner_start"}):await e.request({method:"miner_stop"}):await e.request({method:"evm_setAutomine",params:[r]})}return ZC}var YC={},iG;function ZMe(){if(iG)return YC;iG=1,Object.defineProperty(YC,"__esModule",{value:!0}),YC.setBalance=e;const t=tt();async function e(r,{address:n,value:s}){r.mode==="ganache"?await r.request({method:"evm_setAccountBalance",params:[n,(0,t.numberToHex)(s)]}):await r.request({method:`${r.mode}_setBalance`,params:[n,(0,t.numberToHex)(s)]})}return YC}var JC={},oG;function YMe(){if(oG)return JC;oG=1,Object.defineProperty(JC,"__esModule",{value:!0}),JC.setBlockGasLimit=e;const t=tt();async function e(r,{gasLimit:n}){await r.request({method:"evm_setBlockGasLimit",params:[(0,t.numberToHex)(n)]})}return JC}var XC={},aG;function JMe(){if(aG)return XC;aG=1,Object.defineProperty(XC,"__esModule",{value:!0}),XC.setBlockTimestampInterval=t;async function t(e,{interval:r}){const n=e.mode==="hardhat"?r*1e3:r;await e.request({method:`${e.mode}_setBlockTimestampInterval`,params:[n]})}return XC}var QC={},cG;function XMe(){if(cG)return QC;cG=1,Object.defineProperty(QC,"__esModule",{value:!0}),QC.setCode=t;async function t(e,{address:r,bytecode:n}){e.mode==="ganache"?await e.request({method:"evm_setAccountCode",params:[r,n]}):await e.request({method:`${e.mode}_setCode`,params:[r,n]})}return QC}var eS={},uG;function QMe(){if(uG)return eS;uG=1,Object.defineProperty(eS,"__esModule",{value:!0}),eS.setCoinbase=t;async function t(e,{address:r}){await e.request({method:`${e.mode}_setCoinbase`,params:[r]})}return eS}var tS={},lG;function e7e(){if(lG)return tS;lG=1,Object.defineProperty(tS,"__esModule",{value:!0}),tS.setIntervalMining=t;async function t(e,{interval:r}){const n=e.mode==="hardhat"?r*1e3:r;await e.request({method:"evm_setIntervalMining",params:[n]})}return tS}var rS={},dG;function t7e(){if(dG)return rS;dG=1,Object.defineProperty(rS,"__esModule",{value:!0}),rS.setLoggingEnabled=t;async function t(e,r){await e.request({method:`${e.mode}_setLoggingEnabled`,params:[r]})}return rS}var nS={},fG;function r7e(){if(fG)return nS;fG=1,Object.defineProperty(nS,"__esModule",{value:!0}),nS.setMinGasPrice=e;const t=tt();async function e(r,{gasPrice:n}){await r.request({method:`${r.mode}_setMinGasPrice`,params:[(0,t.numberToHex)(n)]})}return nS}var sS={},hG;function n7e(){if(hG)return sS;hG=1,Object.defineProperty(sS,"__esModule",{value:!0}),sS.setNextBlockBaseFeePerGas=e;const t=tt();async function e(r,{baseFeePerGas:n}){await r.request({method:`${r.mode}_setNextBlockBaseFeePerGas`,params:[(0,t.numberToHex)(n)]})}return sS}var iS={},pG;function s7e(){if(pG)return iS;pG=1,Object.defineProperty(iS,"__esModule",{value:!0}),iS.setNextBlockTimestamp=e;const t=tt();async function e(r,{timestamp:n}){await r.request({method:"evm_setNextBlockTimestamp",params:[(0,t.numberToHex)(n)]})}return iS}var oS={},gG;function i7e(){if(gG)return oS;gG=1,Object.defineProperty(oS,"__esModule",{value:!0}),oS.setNonce=e;const t=tt();async function e(r,{address:n,nonce:s}){await r.request({method:`${r.mode}_setNonce`,params:[n,(0,t.numberToHex)(s)]})}return oS}var aS={},mG;function o7e(){if(mG)return aS;mG=1,Object.defineProperty(aS,"__esModule",{value:!0}),aS.setRpcUrl=t;async function t(e,r){await e.request({method:`${e.mode}_setRpcUrl`,params:[r]})}return aS}var cS={},yG;function a7e(){if(yG)return cS;yG=1,Object.defineProperty(cS,"__esModule",{value:!0}),cS.setStorageAt=e;const t=tt();async function e(r,{address:n,index:s,value:i}){await r.request({method:`${r.mode}_setStorageAt`,params:[n,typeof s=="number"?(0,t.numberToHex)(s):s,i]})}return cS}var uS={},bG;function c7e(){if(bG)return uS;bG=1,Object.defineProperty(uS,"__esModule",{value:!0}),uS.snapshot=t;async function t(e){return await e.request({method:"evm_snapshot"})}return uS}var lS={},wG;function u7e(){if(wG)return lS;wG=1,Object.defineProperty(lS,"__esModule",{value:!0}),lS.stopImpersonatingAccount=t;async function t(e,{address:r}){await e.request({method:`${e.mode}_stopImpersonatingAccount`,params:[r]})}return lS}var vG;function Bie(){if(vG)return BC;vG=1,Object.defineProperty(BC,"__esModule",{value:!0}),BC.testActions=m;const t=BMe(),e=UMe(),r=MMe(),n=DMe(),s=jMe(),i=LMe(),o=FMe(),a=$Me(),c=qMe(),u=HMe(),l=zMe(),d=WMe(),f=VMe(),p=GMe(),g=KMe(),h=ZMe(),y=YMe(),E=JMe(),S=XMe(),C=QMe(),_=e7e(),T=t7e(),P=r7e(),D=n7e(),L=s7e(),I=i7e(),U=o7e(),F=a7e(),B=c7e(),A=u7e();function m({mode:b}){return w=>{const x=w.extend(()=>({mode:b}));return{dropTransaction:M=>(0,t.dropTransaction)(x,M),dumpState:()=>(0,e.dumpState)(x),getAutomine:()=>(0,r.getAutomine)(x),getTxpoolContent:()=>(0,n.getTxpoolContent)(x),getTxpoolStatus:()=>(0,s.getTxpoolStatus)(x),impersonateAccount:M=>(0,i.impersonateAccount)(x,M),increaseTime:M=>(0,o.increaseTime)(x,M),inspectTxpool:()=>(0,a.inspectTxpool)(x),loadState:M=>(0,c.loadState)(x,M),mine:M=>(0,u.mine)(x,M),removeBlockTimestampInterval:()=>(0,l.removeBlockTimestampInterval)(x),reset:M=>(0,d.reset)(x,M),revert:M=>(0,f.revert)(x,M),sendUnsignedTransaction:M=>(0,p.sendUnsignedTransaction)(x,M),setAutomine:M=>(0,g.setAutomine)(x,M),setBalance:M=>(0,h.setBalance)(x,M),setBlockGasLimit:M=>(0,y.setBlockGasLimit)(x,M),setBlockTimestampInterval:M=>(0,E.setBlockTimestampInterval)(x,M),setCode:M=>(0,S.setCode)(x,M),setCoinbase:M=>(0,C.setCoinbase)(x,M),setIntervalMining:M=>(0,_.setIntervalMining)(x,M),setLoggingEnabled:M=>(0,T.setLoggingEnabled)(x,M),setMinGasPrice:M=>(0,P.setMinGasPrice)(x,M),setNextBlockBaseFeePerGas:M=>(0,D.setNextBlockBaseFeePerGas)(x,M),setNextBlockTimestamp:M=>(0,L.setNextBlockTimestamp)(x,M),setNonce:M=>(0,I.setNonce)(x,M),setRpcUrl:M=>(0,U.setRpcUrl)(x,M),setStorageAt:M=>(0,F.setStorageAt)(x,M),snapshot:()=>(0,B.snapshot)(x),stopImpersonatingAccount:M=>(0,A.stopImpersonatingAccount)(x,M)}}}return BC}var EG;function l7e(){if(EG)return kC;EG=1,Object.defineProperty(kC,"__esModule",{value:!0}),kC.createTestClient=r;const t=G5(),e=Bie();function r(n){const{key:s="test",name:i="Test Client",mode:o}=n;return(0,t.createClient)({...n,key:s,name:i,type:"testClient"}).extend(c=>({mode:o,...(0,e.testActions)({mode:o})(c)}))}return kC}var dS={},fS={},hS={},_G;function d7e(){if(_G)return hS;_G=1,Object.defineProperty(hS,"__esModule",{value:!0}),hS.addChain=e;const t=tt();async function e(r,{chain:n}){const{id:s,name:i,nativeCurrency:o,rpcUrls:a,blockExplorers:c}=n;await r.request({method:"wallet_addEthereumChain",params:[{chainId:(0,t.numberToHex)(s),chainName:i,nativeCurrency:o,rpcUrls:a.default.http,blockExplorerUrls:c?Object.values(c).map(({url:u})=>u):void 0}]},{dedupe:!0,retryCount:0})}return hS}var pS={},AG;function f7e(){if(AG)return pS;AG=1,Object.defineProperty(pS,"__esModule",{value:!0}),pS.deployContract=r;const t=v_(),e=W5();function r(n,s){const{abi:i,args:o,bytecode:a,...c}=s,u=(0,t.encodeDeployData)({abi:i,args:o,bytecode:a});return(0,e.sendTransaction)(n,{...c,...c.authorizationList?{to:null}:{},data:u})}return pS}var gS={},xG;function h7e(){if(xG)return gS;xG=1,Object.defineProperty(gS,"__esModule",{value:!0}),gS.getAddresses=e;const t=pc();async function e(r){return r.account?.type==="local"?[r.account.address]:(await r.request({method:"eth_accounts"},{dedupe:!0})).map(s=>(0,t.checksumAddress)(s))}return gS}var mS={},CG;function p7e(){if(CG)return mS;CG=1,Object.defineProperty(mS,"__esModule",{value:!0}),mS.getCapabilities=r;const t=is(),e=tt();async function r(n,s={}){const{account:i=n.account,chainId:o}=s,a=i?(0,t.parseAccount)(i):void 0,c=o?[a?.address,[(0,e.numberToHex)(o)]]:[a?.address],u=await n.request({method:"wallet_getCapabilities",params:c}),l={};for(const[d,f]of Object.entries(u)){l[Number(d)]={};for(let[p,g]of Object.entries(f))p==="addSubAccount"&&(p="unstable_addSubAccount"),l[Number(d)][p]=g}return typeof o=="number"?l[o]:l}return mS}var yS={},SG;function g7e(){if(SG)return yS;SG=1,Object.defineProperty(yS,"__esModule",{value:!0}),yS.getPermissions=t;async function t(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}return yS}var bS={},IG;function Uie(){if(IG)return bS;IG=1,Object.defineProperty(bS,"__esModule",{value:!0}),bS.prepareAuthorization=o;const t=is(),e=sp(),r=Yu(),n=kr(),s=tp(),i=M5();async function o(a,c){const{account:u=a.account,chainId:l,nonce:d}=c;if(!u)throw new e.AccountNotFoundError({docsPath:"/docs/eip7702/prepareAuthorization"});const f=(0,t.parseAccount)(u),p=(()=>{if(c.executor)return c.executor==="self"?c.executor:(0,t.parseAccount)(c.executor)})(),g={address:c.contractAddress??c.address,chainId:l,nonce:d};return typeof g.chainId>"u"&&(g.chainId=a.chain?.id??await(0,n.getAction)(a,s.getChainId,"getChainId")({})),typeof g.nonce>"u"&&(g.nonce=await(0,n.getAction)(a,i.getTransactionCount,"getTransactionCount")({address:f.address,blockTag:"pending"}),(p==="self"||p?.address&&(0,r.isAddressEqual)(p.address,f.address))&&(g.nonce+=1)),g}return bS}var wS={},TG;function m7e(){if(TG)return wS;TG=1,Object.defineProperty(wS,"__esModule",{value:!0}),wS.requestAddresses=e;const t=pc();async function e(r){return(await r.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(s=>(0,t.getAddress)(s))}return wS}var vS={},NG;function y7e(){if(NG)return vS;NG=1,Object.defineProperty(vS,"__esModule",{value:!0}),vS.requestPermissions=t;async function t(e,r){return e.request({method:"wallet_requestPermissions",params:[r]},{retryCount:0})}return vS}var ES={},PG;function b7e(){if(PG)return ES;PG=1,Object.defineProperty(ES,"__esModule",{value:!0}),ES.sendCallsSync=r;const t=ZB(),e=YB();async function r(n,s){const{chain:i=n.chain}=s,o=s.timeout??Math.max((i?.blockTime??0)*3,5e3),a=await(0,t.sendCalls)(n,s);return await(0,e.waitForCallsStatus)(n,{...s,id:a.id,timeout:o})}return ES}var _S={},RG;function Mie(){if(RG)return _S;RG=1,Object.defineProperty(_S,"__esModule",{value:!0}),_S.sendTransactionSync=E;const t=is(),e=sp(),r=Kt(),n=Oa(),s=l_(),i=A_(),o=p_(),a=ep(),c=Ku(),u=kr(),l=ag(),d=Zu(),f=tp(),p=Oie(),g=g_(),h=w9(),y=new l.LruMap(128);async function E(S,C){const{account:_=S.account,chain:T=S.chain,accessList:P,authorizationList:D,blobs:L,data:I,gas:U,gasPrice:F,maxFeePerBlobGas:B,maxFeePerGas:A,maxPriorityFeePerGas:m,nonce:b,pollingInterval:w,throwOnReceiptRevert:x,type:M,value:k,...j}=C,N=C.timeout??Math.max((T?.blockTime??0)*3,5e3);if(typeof _>"u")throw new e.AccountNotFoundError({docsPath:"/docs/actions/wallet/sendTransactionSync"});const v=_?(0,t.parseAccount)(_):null;try{(0,d.assertRequest)(C);const R=await(async()=>{if(C.to)return C.to;if(C.to!==null&&D&&D.length>0)return await(0,s.recoverAuthorizationAddress)({authorization:D[0]}).catch(()=>{throw new r.BaseError("`to` is required. Could not infer from `authorizationList`.")})})();if(v?.type==="json-rpc"||v===null){let $;T!==null&&($=await(0,u.getAction)(S,f.getChainId,"getChainId")({}),(0,i.assertCurrentChain)({currentChainId:$,chain:T}));const O=S.chain?.formatters?.transactionRequest?.format,W=(O||c.formatTransactionRequest)({...(0,a.extract)(j,{format:O}),accessList:P,account:v,authorizationList:D,blobs:L,chainId:$,data:I,gas:U,gasPrice:F,maxFeePerBlobGas:B,maxFeePerGas:A,maxPriorityFeePerGas:m,nonce:b,to:R,type:M,value:k},"sendTransaction"),G=y.get(S.uid),K=G?"wallet_sendTransaction":"eth_sendTransaction",Q=await(async()=>{try{return await S.request({method:K,params:[W]},{retryCount:0})}catch(de){if(G===!1)throw de;const le=de;if(le.name==="InvalidInputRpcError"||le.name==="InvalidParamsRpcError"||le.name==="MethodNotFoundRpcError"||le.name==="MethodNotSupportedRpcError")return await S.request({method:"wallet_sendTransaction",params:[W]},{retryCount:0}).then(se=>(y.set(S.uid,!0),se)).catch(se=>{const be=se;throw be.name==="MethodNotFoundRpcError"||be.name==="MethodNotSupportedRpcError"?(y.set(S.uid,!1),le):be});throw le}})(),re=await(0,u.getAction)(S,p.waitForTransactionReceipt,"waitForTransactionReceipt")({checkReplacement:!1,hash:Q,pollingInterval:w,timeout:N});if(x&&re.status==="reverted")throw new n.TransactionReceiptRevertedError({receipt:re});return re}if(v?.type==="local"){const $=await(0,u.getAction)(S,g.prepareTransactionRequest,"prepareTransactionRequest")({account:v,accessList:P,authorizationList:D,blobs:L,chain:T,data:I,gas:U,gasPrice:F,maxFeePerBlobGas:B,maxFeePerGas:A,maxPriorityFeePerGas:m,nonce:b,nonceManager:v.nonceManager,parameters:[...g.defaultParameters,"sidecars"],type:M,value:k,...j,to:R}),O=T?.serializers?.transaction,H=await v.signTransaction($,{serializer:O});return await(0,u.getAction)(S,h.sendRawTransactionSync,"sendRawTransactionSync")({serializedTransaction:H,throwOnReceiptRevert:x})}throw v?.type==="smart"?new e.AccountTypeNotSupportedError({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new e.AccountTypeNotSupportedError({docsPath:"/docs/actions/wallet/sendTransactionSync",type:v?.type})}catch(R){throw R instanceof e.AccountTypeNotSupportedError?R:(0,o.getTransactionError)(R,{...C,account:v,chain:C.chain||void 0})}}return _S}var AS={},OG;function w7e(){if(OG)return AS;OG=1,Object.defineProperty(AS,"__esModule",{value:!0}),AS.showCallsStatus=t;async function t(e,r){const{id:n}=r;await e.request({method:"wallet_showCallsStatus",params:[n]})}return AS}var xS={},kG;function v7e(){if(kG)return xS;kG=1,Object.defineProperty(xS,"__esModule",{value:!0}),xS.signAuthorization=n;const t=is(),e=sp(),r=Uie();async function n(s,i){const{account:o=s.account}=i;if(!o)throw new e.AccountNotFoundError({docsPath:"/docs/eip7702/signAuthorization"});const a=(0,t.parseAccount)(o);if(!a.signAuthorization)throw new e.AccountTypeNotSupportedError({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:a.type});const c=await(0,r.prepareAuthorization)(s,i);return a.signAuthorization(c)}return xS}var CS={},BG;function E7e(){if(BG)return CS;BG=1,Object.defineProperty(CS,"__esModule",{value:!0}),CS.signMessage=n;const t=is(),e=sp(),r=tt();async function n(s,{account:i=s.account,message:o}){if(!i)throw new e.AccountNotFoundError({docsPath:"/docs/actions/wallet/signMessage"});const a=(0,t.parseAccount)(i);if(a.signMessage)return a.signMessage({message:o});const c=typeof o=="string"?(0,r.stringToHex)(o):o.raw instanceof Uint8Array?(0,r.toHex)(o.raw):o.raw;return s.request({method:"personal_sign",params:[c,a.address]},{retryCount:0})}return CS}var SS={},UG;function _7e(){if(UG)return SS;UG=1,Object.defineProperty(SS,"__esModule",{value:!0}),SS.signTransaction=c;const t=is(),e=sp(),r=A_(),n=tt(),s=Ku(),i=kr(),o=Zu(),a=tp();async function c(u,l){const{account:d=u.account,chain:f=u.chain,...p}=l;if(!d)throw new e.AccountNotFoundError({docsPath:"/docs/actions/wallet/signTransaction"});const g=(0,t.parseAccount)(d);(0,o.assertRequest)({account:g,...l});const h=await(0,i.getAction)(u,a.getChainId,"getChainId")({});f!==null&&(0,r.assertCurrentChain)({currentChainId:h,chain:f});const E=(f?.formatters||u.chain?.formatters)?.transactionRequest?.format||s.formatTransactionRequest;return g.signTransaction?g.signTransaction({...p,chainId:h},{serializer:u.chain?.serializers?.transaction}):await u.request({method:"eth_signTransaction",params:[{...E({...p,account:g},"signTransaction"),chainId:(0,n.numberToHex)(h),from:g.address}]},{retryCount:0})}return SS}var IS={},MG;function A7e(){if(MG)return IS;MG=1,Object.defineProperty(IS,"__esModule",{value:!0}),IS.signTypedData=n;const t=is(),e=sp(),r=Y5();async function n(s,i){const{account:o=s.account,domain:a,message:c,primaryType:u}=i;if(!o)throw new e.AccountNotFoundError({docsPath:"/docs/actions/wallet/signTypedData"});const l=(0,t.parseAccount)(o),d={EIP712Domain:(0,r.getTypesForEIP712Domain)({domain:a}),...i.types};if((0,r.validateTypedData)({domain:a,message:c,primaryType:u,types:d}),l.signTypedData)return l.signTypedData({domain:a,message:c,primaryType:u,types:d});const f=(0,r.serializeTypedData)({domain:a,message:c,primaryType:u,types:d});return s.request({method:"eth_signTypedData_v4",params:[l.address,f]},{retryCount:0})}return IS}var TS={},DG;function x7e(){if(DG)return TS;DG=1,Object.defineProperty(TS,"__esModule",{value:!0}),TS.switchChain=e;const t=tt();async function e(r,{id:n}){await r.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,t.numberToHex)(n)}]},{retryCount:0})}return TS}var NS={},jG;function C7e(){if(jG)return NS;jG=1,Object.defineProperty(NS,"__esModule",{value:!0}),NS.watchAsset=t;async function t(e,r){return await e.request({method:"wallet_watchAsset",params:r},{retryCount:0})}return NS}var PS={},LG;function S7e(){if(LG)return PS;LG=1,Object.defineProperty(PS,"__esModule",{value:!0}),PS.writeContractSync=r;const t=Mie(),e=KB();async function r(n,s){return e.writeContract.internal(n,t.sendTransactionSync,"sendTransactionSync",s)}return PS}var FG;function Die(){if(FG)return fS;FG=1,Object.defineProperty(fS,"__esModule",{value:!0}),fS.walletActions=B;const t=UB(),e=tp(),r=d7e(),n=f7e(),s=h7e(),i=jse(),o=p7e(),a=g7e(),c=Uie(),u=g_(),l=m7e(),d=y7e(),f=ZB(),p=b7e(),g=GB(),h=w9(),y=W5(),E=Mie(),S=w7e(),C=v7e(),_=E7e(),T=_7e(),P=A7e(),D=x7e(),L=YB(),I=C7e(),U=KB(),F=S7e();function B(A){return{addChain:m=>(0,r.addChain)(A,m),deployContract:m=>(0,n.deployContract)(A,m),fillTransaction:m=>(0,t.fillTransaction)(A,m),getAddresses:()=>(0,s.getAddresses)(A),getCallsStatus:m=>(0,i.getCallsStatus)(A,m),getCapabilities:m=>(0,o.getCapabilities)(A,m),getChainId:()=>(0,e.getChainId)(A),getPermissions:()=>(0,a.getPermissions)(A),prepareAuthorization:m=>(0,c.prepareAuthorization)(A,m),prepareTransactionRequest:m=>(0,u.prepareTransactionRequest)(A,m),requestAddresses:()=>(0,l.requestAddresses)(A),requestPermissions:m=>(0,d.requestPermissions)(A,m),sendCalls:m=>(0,f.sendCalls)(A,m),sendCallsSync:m=>(0,p.sendCallsSync)(A,m),sendRawTransaction:m=>(0,g.sendRawTransaction)(A,m),sendRawTransactionSync:m=>(0,h.sendRawTransactionSync)(A,m),sendTransaction:m=>(0,y.sendTransaction)(A,m),sendTransactionSync:m=>(0,E.sendTransactionSync)(A,m),showCallsStatus:m=>(0,S.showCallsStatus)(A,m),signAuthorization:m=>(0,C.signAuthorization)(A,m),signMessage:m=>(0,_.signMessage)(A,m),signTransaction:m=>(0,T.signTransaction)(A,m),signTypedData:m=>(0,P.signTypedData)(A,m),switchChain:m=>(0,D.switchChain)(A,m),waitForCallsStatus:m=>(0,L.waitForCallsStatus)(A,m),watchAsset:m=>(0,I.watchAsset)(A,m),writeContract:m=>(0,U.writeContract)(A,m),writeContractSync:m=>(0,F.writeContractSync)(A,m)}}return fS}var $G;function I7e(){if($G)return dS;$G=1,Object.defineProperty(dS,"__esModule",{value:!0}),dS.createWalletClient=r;const t=G5(),e=Die();function r(n){const{key:s="wallet",name:i="Wallet Client",transport:o}=n;return(0,t.createClient)({...n,key:s,name:i,transport:o,type:"walletClient"}).extend(e.walletActions)}return dS}var RS={},qG;function T_(){if(qG)return RS;qG=1,Object.defineProperty(RS,"__esModule",{value:!0}),RS.createTransport=r;const t=Jse(),e=Lse();function r({key:n,methods:s,name:i,request:o,retryCount:a=3,retryDelay:c=150,timeout:u,type:l},d){const f=(0,e.uid)();return{config:{key:n,methods:s,name:i,request:o,retryCount:a,retryDelay:c,timeout:u,type:l},request:(0,t.buildRequest)(o,{methods:s,retryCount:a,retryDelay:c,uid:f}),value:d}}return RS}var OS={},HG;function T7e(){if(HG)return OS;HG=1,Object.defineProperty(OS,"__esModule",{value:!0}),OS.custom=e;const t=T_();function e(r,n={}){const{key:s="custom",methods:i,name:o="Custom Provider",retryDelay:a}=n;return({retryCount:c})=>(0,t.createTransport)({key:s,methods:i,name:o,request:r.request.bind(r),retryCount:n.retryCount??c,retryDelay:a,type:"custom"})}return OS}var sm={},zG;function N7e(){if(zG)return sm;zG=1,Object.defineProperty(sm,"__esModule",{value:!0}),sm.fallback=s,sm.shouldThrow=i,sm.rankTransports=o;const t=hf(),e=Jh(),r=VB(),n=T_();function s(a,c={}){const{key:u="fallback",name:l="Fallback",rank:d=!1,shouldThrow:f=i,retryCount:p,retryDelay:g}=c;return(({chain:h,pollingInterval:y=4e3,timeout:E,...S})=>{let C=a,_=()=>{};const T=(0,n.createTransport)({key:u,name:l,async request({method:P,params:D}){let L;const I=async(U=0)=>{const F=C[U]({...S,chain:h,retryCount:0,timeout:E});try{const B=await F.request({method:P,params:D});return _({method:P,params:D,response:B,transport:F,status:"success"}),B}catch(B){if(_({error:B,method:P,params:D,transport:F,status:"error"}),f(B)||U===C.length-1||(L??=C.slice(U+1).some(A=>{const{include:m,exclude:b}=A({chain:h}).config.methods||{};return m?m.includes(P):b?!b.includes(P):!0}),!L))throw B;return I(U+1)}};return I()},retryCount:p,retryDelay:g,type:"fallback"},{onResponse:P=>_=P,transports:C.map(P=>P({chain:h,retryCount:0}))});if(d){const P=typeof d=="object"?d:{};o({chain:h,interval:P.interval??y,onTransports:D=>C=D,ping:P.ping,sampleCount:P.sampleCount,timeout:P.timeout,transports:C,weights:P.weights})}return T})}function i(a){return!!("code"in a&&typeof a.code=="number"&&(a.code===e.TransactionRejectedRpcError.code||a.code===e.UserRejectedRequestError.code||t.ExecutionRevertedError.nodeMessage.test(a.message)||a.code===5e3))}function o({chain:a,interval:c=4e3,onTransports:u,ping:l,sampleCount:d=10,timeout:f=1e3,transports:p,weights:g={}}){const{stability:h=.7,latency:y=.3}=g,E=[],S=async()=>{const C=await Promise.all(p.map(async P=>{const D=P({chain:a,retryCount:0,timeout:f}),L=Date.now();let I,U;try{await(l?l({transport:D}):D.request({method:"net_listening"})),U=1}catch{U=0}finally{I=Date.now()}return{latency:I-L,success:U}}));E.push(C),E.length>d&&E.shift();const _=Math.max(...E.map(P=>Math.max(...P.map(({latency:D})=>D)))),T=p.map((P,D)=>{const L=E.map(A=>A[D].latency),U=1-L.reduce((A,m)=>A+m,0)/L.length/_,F=E.map(A=>A[D].success),B=F.reduce((A,m)=>A+m,0)/F.length;return B===0?[0,D]:[y*U+h*B,D]}).sort((P,D)=>D[0]-P[0]);u(T.map(([,P])=>p[P])),await(0,r.wait)(c),S()};S()}return sm}var kS={},e1={},WG;function v9(){if(WG)return e1;WG=1,Object.defineProperty(e1,"__esModule",{value:!0}),e1.UrlRequiredError=void 0;const t=Kt();class e extends t.BaseError{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}return e1.UrlRequiredError=e,e1}var VG;function P7e(){if(VG)return kS;VG=1,Object.defineProperty(kS,"__esModule",{value:!0}),kS.http=i;const t=Gu(),e=v9(),r=$B(),n=o9(),s=T_();function i(o,a={}){const{batch:c,fetchFn:u,fetchOptions:l,key:d="http",methods:f,name:p="HTTP JSON-RPC",onFetchRequest:g,onFetchResponse:h,retryDelay:y,raw:E}=a;return({chain:S,retryCount:C,timeout:_})=>{const{batchSize:T=1e3,wait:P=0}=typeof c=="object"?c:{},D=a.retryCount??C,L=_??a.timeout??1e4,I=o||S?.rpcUrls.default.http[0];if(!I)throw new e.UrlRequiredError;const U=(0,n.getHttpRpcClient)(I,{fetchFn:u,fetchOptions:l,onRequest:g,onResponse:h,timeout:L});return(0,s.createTransport)({key:d,methods:f,name:p,async request({method:F,params:B}){const A={method:F,params:B},{schedule:m}=(0,r.createBatchScheduler)({id:I,wait:P,shouldSplitBatch(M){return M.length>T},fn:M=>U.request({body:M}),sort:(M,k)=>M.id-k.id}),b=async M=>c?m(M):[await U.request({body:M})],[{error:w,result:x}]=await b(A);if(E)return{error:w,result:x};if(w)throw new t.RpcRequestError({body:A,error:w,url:I});return x},retryCount:D,retryDelay:y,timeout:L,type:"http"},{fetchOptions:l,url:I})}}return kS}var BS={},GG;function R7e(){if(GG)return BS;GG=1,Object.defineProperty(BS,"__esModule",{value:!0}),BS.webSocket=i;const t=Gu(),e=v9(),r=uie(),n=a9(),s=T_();function i(o,a={}){const{keepAlive:c,key:u="webSocket",methods:l,name:d="WebSocket JSON-RPC",reconnect:f,retryDelay:p}=a;return({chain:g,retryCount:h,timeout:y})=>{const E=a.retryCount??h,S=y??a.timeout??1e4,C=o||g?.rpcUrls.default.webSocket?.[0],_={keepAlive:c,reconnect:f};if(!C)throw new e.UrlRequiredError;return(0,s.createTransport)({key:u,methods:l,name:d,async request({method:T,params:P}){const D={method:T,params:P},L=await(0,n.getWebSocketRpcClient)(C,_),{error:I,result:U}=await L.requestAsync({body:D,timeout:S});if(I)throw new t.RpcRequestError({body:D,error:I,url:C});return U},retryCount:E,retryDelay:p,timeout:S,type:"webSocket"},{getSocket(){return(0,r.getSocket)(C)},getRpcClient(){return(0,n.getWebSocketRpcClient)(C,_)},async subscribe({params:T,onData:P,onError:D}){const L=await(0,n.getWebSocketRpcClient)(C,_),{result:I}=await new Promise((U,F)=>L.request({body:{method:"eth_subscribe",params:T},onError(B){F(B),D?.(B)},onResponse(B){if(B.error){F(B.error),D?.(B.error);return}if(typeof B.id=="number"){U(B);return}B.method==="eth_subscription"&&P(B.params)}}));return{subscriptionId:I,async unsubscribe(){return new Promise(U=>L.request({body:{method:"eth_unsubscribe",params:[I]},onResponse:U}))}}}})}}return BS}var t1={},KG;function O7e(){if(KG)return t1;KG=1,Object.defineProperty(t1,"__esModule",{value:!0}),t1.ProviderRpcError=void 0;class t extends Error{constructor(r,n){super(n),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r,this.details=n}}return t1.ProviderRpcError=t,t1}var US={},ZG;function k7e(){if(ZG)return US;ZG=1,Object.defineProperty(US,"__esModule",{value:!0}),US.decodeDeployData=n;const t=Jn(),e=Zh(),r="/docs/contract/decodeDeployData";function n(s){const{abi:i,bytecode:o,data:a}=s;if(a===o)return{bytecode:o};const c=i.find(l=>"type"in l&&l.type==="constructor");if(!c)throw new t.AbiConstructorNotFoundError({docsPath:r});if(!("inputs"in c))throw new t.AbiConstructorParamsNotFoundError({docsPath:r});if(!c.inputs||c.inputs.length===0)throw new t.AbiConstructorParamsNotFoundError({docsPath:r});return{args:(0,e.decodeAbiParameters)(c.inputs,`0x${a.replace(o,"")}`),bytecode:o}}return US}var MS={},YG;function B7e(){if(YG)return MS;YG=1,Object.defineProperty(MS,"__esModule",{value:!0}),MS.fromBlobs=n;const t=o_(),e=Pn(),r=tt();function n(s){const i=s.to??(typeof s.blobs[0]=="string"?"hex":"bytes"),o=typeof s.blobs[0]=="string"?s.blobs.map(d=>(0,e.hexToBytes)(d)):s.blobs,a=o.reduce((d,f)=>d+f.length,0),c=(0,t.createCursor)(new Uint8Array(a));let u=!0;for(const d of o){const f=(0,t.createCursor)(d);for(;u&&f.position<d.length;){f.incrementPosition(1);let p=31;d.length-f.position<31&&(p=d.length-f.position);for(const g in Array.from({length:p})){const h=f.readByte();if(h===128&&!f.inspectBytes(f.remaining).includes(128)){u=!1;break}c.pushByte(h)}}}const l=c.bytes.slice(0,c.position);return i==="hex"?(0,r.bytesToHex)(l):l}return MS}var DS={},JG;function U7e(){if(JG)return DS;JG=1,Object.defineProperty(DS,"__esModule",{value:!0}),DS.sidecarsToVersionedHashes=e;const t=kB();function e(r){const{sidecars:n,version:s}=r,i=r.to??(typeof n[0].blob=="string"?"hex":"bytes"),o=[];for(const{commitment:a}of n)o.push((0,t.commitmentToVersionedHash)({commitment:a,to:i,version:s}));return o}return DS}var jS={},XG;function M7e(){if(XG)return jS;XG=1,Object.defineProperty(jS,"__esModule",{value:!0}),jS.toCoinType=r;const t=e9(),e=2147483648;function r(n){if(n===1)return 60n;if(n>=e||n<0)throw new t.EnsInvalidChainIdError({chainId:n});return BigInt((2147483648|n)>>>0)}return jS}var LS={},QG;function jie(){if(QG)return LS;QG=1,Object.defineProperty(LS,"__esModule",{value:!0}),LS.defineKzg=t;function t({blobToKzgCommitment:e,computeBlobKzgProof:r}){return{blobToKzgCommitment:e,computeBlobKzgProof:r}}return LS}var FS={},eK;function D7e(){if(eK)return FS;eK=1,Object.defineProperty(FS,"__esModule",{value:!0}),FS.setupKzg=e;const t=jie();function e(r,n){try{r.loadTrustedSetup(n)}catch(s){const i=s;if(!i.message.includes("trusted setup is already loaded"))throw i}return(0,t.defineKzg)(r)}return FS}var $S={},tK;function j7e(){if(tK)return $S;tK=1,Object.defineProperty($S,"__esModule",{value:!0}),$S.compactSignatureToSignature=r;const t=Pn(),e=tt();function r({r:n,yParityAndS:s}){const i=(0,t.hexToBytes)(s),o=i[0]&128?1:0,a=i;return o===1&&(a[0]&=127),{r:n,s:(0,e.bytesToHex)(a),yParity:o}}return $S}var qS={},rK;function L7e(){if(rK)return qS;rK=1,Object.defineProperty(qS,"__esModule",{value:!0}),qS.parseCompactSignature=r;const t=fg(),e=tt();function r(n){const{r:s,s:i}=t.secp256k1.Signature.fromCompact(n.slice(2,130));return{r:(0,e.numberToHex)(s,{size:32}),yParityAndS:(0,e.numberToHex)(i,{size:32})}}return qS}var HS={},nK;function F7e(){if(nK)return HS;nK=1,Object.defineProperty(HS,"__esModule",{value:!0}),HS.parseSignature=r;const t=fg(),e=tt();function r(n){const{r:s,s:i}=t.secp256k1.Signature.fromCompact(n.slice(2,130)),o=+`0x${n.slice(130)}`,[a,c]=(()=>{if(o===0||o===1)return[void 0,o];if(o===27)return[BigInt(o),0];if(o===28)return[BigInt(o),1];throw new Error("Invalid yParityOrV value")})();return typeof a<"u"?{r:(0,e.numberToHex)(s,{size:32}),s:(0,e.numberToHex)(i,{size:32}),v:a,yParity:c}:{r:(0,e.numberToHex)(s,{size:32}),s:(0,e.numberToHex)(i,{size:32}),yParity:c}}return HS}var zS={},sK;function $7e(){if(sK)return zS;sK=1,Object.defineProperty(zS,"__esModule",{value:!0}),zS.recoverTransactionAddress=s;const t=Na(),e=m9(),r=Z5(),n=Qh();async function s(i){const{serializedTransaction:o,signature:a}=i,c=(0,e.parseTransaction)(o),u=a??{r:c.r,s:c.s,v:c.v,yParity:c.yParity},l=(0,r.serializeTransaction)({...c,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await(0,n.recoverAddress)({hash:(0,t.keccak256)(l),signature:u})}return zS}var WS={},iK;function q7e(){if(iK)return WS;iK=1,Object.defineProperty(WS,"__esModule",{value:!0}),WS.serializeCompactSignature=r;const t=fg(),e=ys();function r({r:n,yParityAndS:s}){return`0x${new t.secp256k1.Signature((0,e.hexToBigInt)(n),(0,e.hexToBigInt)(s)).toCompactHex()}`}return WS}var VS={},oK;function H7e(){if(oK)return VS;oK=1,Object.defineProperty(VS,"__esModule",{value:!0}),VS.signatureToCompactSignature=r;const t=Pn(),e=tt();function r(n){const{r:s,s:i,v:o,yParity:a}=n,c=Number(a??o-27n);let u=i;if(c===1){const l=(0,t.hexToBytes)(i);l[0]|=128,u=(0,e.bytesToHex)(l)}return{r:s,yParityAndS:u}}return VS}var aK;function z7e(){return aK||(aK=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.maxInt8=t.universalSignatureValidatorByteCode=t.erc6492SignatureValidatorByteCode=t.deploylessCallViaFactoryBytecode=t.deploylessCallViaBytecodeBytecode=t.zeroHash=t.zeroAddress=t.ethAddress=t.multicall3Abi=t.universalSignatureValidatorAbi=t.erc6492SignatureValidatorAbi=t.erc4626Abi=t.erc1155Abi=t.erc721Abi=t.erc20Abi_bytes32=t.erc20Abi=t.webSocket=t.http=t.shouldThrow=t.fallback=t.custom=t.createTransport=t.walletActions=t.testActions=t.publicActions=t.createWalletClient=t.createTestClient=t.createPublicClient=t.rpcSchema=t.createClient=t.WaitForCallsStatusTimeoutError=t.getContract=t.UnknownTypeError=t.UnknownSignatureError=t.SolidityProtectedKeywordError=t.parseAbiParameters=t.parseAbiParameter=t.parseAbiItem=t.parseAbi=t.InvalidStructSignatureError=t.InvalidSignatureError=t.InvalidParenthesisError=t.InvalidParameterError=t.InvalidModifierError=t.InvalidFunctionModifierError=t.InvalidAbiTypeParameterError=t.InvalidAbiParametersError=t.InvalidAbiParameterError=t.InvalidAbiItemError=t.CircularReferenceError=void 0,t.maxUint152=t.maxUint144=t.maxUint136=t.maxUint128=t.maxUint120=t.maxUint112=t.maxUint104=t.maxUint96=t.maxUint88=t.maxUint80=t.maxUint72=t.maxUint64=t.maxUint56=t.maxUint48=t.maxUint40=t.maxUint32=t.maxUint24=t.maxUint16=t.maxUint8=t.maxInt256=t.maxInt248=t.maxInt240=t.maxInt232=t.maxInt224=t.maxInt216=t.maxInt208=t.maxInt200=t.maxInt192=t.maxInt184=t.maxInt176=t.maxInt168=t.maxInt160=t.maxInt152=t.maxInt144=t.maxInt136=t.maxInt128=t.maxInt120=t.maxInt112=t.maxInt104=t.maxInt96=t.maxInt88=t.maxInt80=t.maxInt72=t.maxInt64=t.maxInt56=t.maxInt48=t.maxInt40=t.maxInt32=t.maxInt24=t.maxInt16=void 0,t.AbiConstructorNotFoundError=t.weiUnits=t.gweiUnits=t.etherUnits=t.presignMessagePrefix=t.minInt256=t.minInt248=t.minInt240=t.minInt232=t.minInt224=t.minInt216=t.minInt208=t.minInt200=t.minInt192=t.minInt184=t.minInt176=t.minInt168=t.minInt160=t.minInt152=t.minInt144=t.minInt136=t.minInt128=t.minInt120=t.minInt112=t.minInt104=t.minInt96=t.minInt88=t.minInt80=t.minInt72=t.minInt64=t.minInt56=t.minInt48=t.minInt40=t.minInt32=t.minInt24=t.minInt16=t.minInt8=t.maxUint256=t.maxUint248=t.maxUint240=t.maxUint232=t.maxUint224=t.maxUint216=t.maxUint208=t.maxUint200=t.maxUint192=t.maxUint184=t.maxUint176=t.maxUint168=t.maxUint160=void 0,t.EnsAvatarUriResolutionError=t.EnsAvatarUnsupportedNamespaceError=t.EnsAvatarInvalidNftUriError=t.SizeOverflowError=t.InvalidHexValueError=t.InvalidHexBooleanError=t.InvalidBytesBooleanError=t.IntegerOutOfRangeError=t.SliceOffsetOutOfBoundsError=t.SizeExceedsPaddingSizeError=t.RawContractError=t.CounterfactualDeploymentFailedError=t.ContractFunctionZeroDataError=t.ContractFunctionRevertedError=t.ContractFunctionExecutionError=t.CallExecutionError=t.InvalidChainIdError=t.ClientChainNotConfiguredError=t.ChainNotFoundError=t.ChainMismatchError=t.ChainDoesNotSupportContract=t.BundleFailedError=t.BlockNotFoundError=t.setErrorConfig=t.BaseError=t.InvalidAddressError=t.UnsupportedPackedAbiType=t.InvalidDefinitionTypeError=t.InvalidArrayError=t.InvalidAbiEncodingTypeError=t.InvalidAbiDecodingTypeError=t.DecodeLogTopicsMismatch=t.DecodeLogDataMismatch=t.BytesSizeMismatchError=t.AbiFunctionSignatureNotFoundError=t.AbiFunctionOutputsNotFoundError=t.AbiFunctionNotFoundError=t.AbiEventSignatureNotFoundError=t.AbiEventSignatureEmptyTopicsError=t.AbiEventNotFoundError=t.AbiErrorSignatureNotFoundError=t.AbiErrorNotFoundError=t.AbiErrorInputsNotFoundError=t.AbiEncodingLengthMismatchError=t.AbiEncodingBytesSizeMismatchError=t.AbiEncodingArrayLengthMismatchError=t.AbiDecodingZeroDataError=t.AbiDecodingDataSizeTooSmallError=t.AbiDecodingDataSizeInvalidError=t.AbiConstructorParamsNotFoundError=void 0,t.UnsupportedProviderMethodError=t.UnsupportedNonOptionalCapabilityError=t.UnsupportedChainIdError=t.UnknownRpcError=t.UnknownBundleIdError=t.UnauthorizedProviderError=t.TransactionRejectedRpcError=t.SwitchChainError=t.RpcError=t.ResourceUnavailableRpcError=t.ResourceNotFoundRpcError=t.ProviderRpcError=t.ProviderDisconnectedError=t.ParseRpcError=t.MethodNotSupportedRpcError=t.MethodNotFoundRpcError=t.LimitExceededRpcError=t.JsonRpcVersionUnsupportedError=t.InvalidRequestRpcError=t.InvalidParamsRpcError=t.InvalidInputRpcError=t.InternalRpcError=t.DuplicateIdError=t.ChainDisconnectedError=t.BundleTooLargeError=t.AtomicReadyWalletRejectedUpgradeError=t.AtomicityNotSupportedError=t.WebSocketRequestError=t.TimeoutError=t.SocketClosedError=t.RpcRequestError=t.HttpRequestError=t.UnknownNodeError=t.TransactionTypeNotSupportedError=t.TipAboveFeeCapError=t.NonceTooLowError=t.NonceTooHighError=t.NonceMaxValueError=t.IntrinsicGasTooLowError=t.IntrinsicGasTooHighError=t.InsufficientFundsError=t.FeeCapTooLowError=t.FeeCapTooHighError=t.ExecutionRevertedError=t.FilterTypeNotSupportedError=t.MaxFeePerGasTooLowError=t.Eip1559FeesNotSupportedError=t.BaseFeeScalarError=t.EstimateGasExecutionError=t.EnsInvalidChainIdError=void 0,t.toBlobs=t.toBlobSidecars=t.sidecarsToVersionedHashes=t.fromBlobs=t.commitmentToVersionedHash=t.commitmentsToVersionedHashes=t.blobsToProofs=t.blobsToCommitments=t.isAddressEqual=t.isAddress=t.getCreateAddress=t.getCreate2Address=t.getContractAddress=t.getAddress=t.checksumAddress=t.prepareEncodeFunctionData=t.parseEventLogs=t.getAbiItem=t.encodePacked=t.encodeFunctionResult=t.encodeFunctionData=t.encodeEventTopics=t.encodeErrorResult=t.encodeDeployData=t.encodeAbiParameters=t.decodeFunctionResult=t.decodeFunctionData=t.decodeEventLog=t.decodeErrorResult=t.decodeDeployData=t.decodeAbiParameters=t.EIP1193ProviderRpcError=t.InvalidDecimalNumberError=t.InvalidStructTypeError=t.InvalidPrimaryTypeError=t.InvalidDomainError=t.UrlRequiredError=t.WaitForTransactionReceiptTimeoutError=t.TransactionReceiptNotFoundError=t.TransactionNotFoundError=t.TransactionExecutionError=t.InvalidStorageKeySizeError=t.InvalidSerializedTransactionTypeError=t.InvalidSerializedTransactionError=t.InvalidSerializableTransactionError=t.InvalidLegacyVError=t.FeeConflictError=t.StateAssignmentConflictError=t.AccountStateConflictError=t.UserRejectedRequestError=void 0,t.getContractError=t.toCoinType=t.namehash=t.labelhash=t.toRlp=t.hexToRlp=t.bytesToRlp=t.toHex=t.stringToHex=t.numberToHex=t.bytesToHex=t.boolToHex=t.toBytes=t.stringToBytes=t.numberToBytes=t.hexToBytes=t.boolToBytes=t.fromRlp=t.hexToString=t.hexToNumber=t.hexToBool=t.hexToBigInt=t.fromHex=t.fromBytes=t.bytesToString=t.bytesToNumber=t.bytesToBool=t.bytesToBigInt=t.trim=t.sliceHex=t.sliceBytes=t.slice=t.size=t.padHex=t.padBytes=t.pad=t.isHex=t.isBytes=t.concatHex=t.concatBytes=t.concat=t.getChainContractAddress=t.extractChain=t.defineChain=t.assertCurrentChain=t.offchainLookupSignature=t.offchainLookupAbiItem=t.offchainLookup=t.ccipFetch=t.ccipRequest=void 0,t.recoverTypedDataAddress=t.recoverTransactionAddress=t.recoverPublicKey=t.recoverMessageAddress=t.recoverAddress=t.parseSignature=t.hexToSignature=t.parseErc8010Signature=t.parseErc6492Signature=t.parseCompactSignature=t.hexToCompactSignature=t.isErc8010Signature=t.isErc6492Signature=t.hashTypedData=t.hashStruct=t.hashDomain=t.hashMessage=t.compactSignatureToSignature=t.withTimeout=t.withRetry=t.withCache=t.nonceManager=t.createNonceManager=t.setupKzg=t.defineKzg=t.getFunctionSignature=t.toFunctionSignature=t.getFunctionSelector=t.toFunctionSelector=t.toFunctionHash=t.getEventSignature=t.toEventSignature=t.getEventSelector=t.toEventSelector=t.toEventHash=t.sha256=t.ripemd160=t.keccak256=t.isHash=t.rpcTransactionType=t.formatTransactionRequest=t.defineTransactionRequest=t.formatTransactionReceipt=t.defineTransactionReceipt=t.transactionType=t.formatTransaction=t.defineTransaction=t.formatLog=t.formatBlock=t.defineBlock=void 0,t.parseUnits=t.parseGwei=t.parseEther=t.formatUnits=t.formatGwei=t.formatEther=t.validateTypedData=t.serializeTypedData=t.getTypesForEIP712Domain=t.domainSeparator=t.serializeTransaction=t.serializeAccessList=t.parseTransaction=t.getTransactionType=t.getSerializedTransactionType=t.assertTransactionLegacy=t.assertTransactionEIP2930=t.assertTransactionEIP1559=t.assertRequest=t.stringify=t.verifyTypedData=t.verifyMessage=t.verifyHash=t.toPrefixedMessage=t.signatureToCompactSignature=t.serializeSignature=t.signatureToHex=t.serializeErc8010Signature=t.serializeErc6492Signature=t.serializeCompactSignature=t.compactSignatureToHex=void 0;var e=Vh();Object.defineProperty(t,"CircularReferenceError",{enumerable:!0,get:function(){return e.CircularReferenceError}}),Object.defineProperty(t,"InvalidAbiItemError",{enumerable:!0,get:function(){return e.InvalidAbiItemError}}),Object.defineProperty(t,"InvalidAbiParameterError",{enumerable:!0,get:function(){return e.InvalidAbiParameterError}}),Object.defineProperty(t,"InvalidAbiParametersError",{enumerable:!0,get:function(){return e.InvalidAbiParametersError}}),Object.defineProperty(t,"InvalidAbiTypeParameterError",{enumerable:!0,get:function(){return e.InvalidAbiTypeParameterError}}),Object.defineProperty(t,"InvalidFunctionModifierError",{enumerable:!0,get:function(){return e.InvalidFunctionModifierError}}),Object.defineProperty(t,"InvalidModifierError",{enumerable:!0,get:function(){return e.InvalidModifierError}}),Object.defineProperty(t,"InvalidParameterError",{enumerable:!0,get:function(){return e.InvalidParameterError}}),Object.defineProperty(t,"InvalidParenthesisError",{enumerable:!0,get:function(){return e.InvalidParenthesisError}}),Object.defineProperty(t,"InvalidSignatureError",{enumerable:!0,get:function(){return e.InvalidSignatureError}}),Object.defineProperty(t,"InvalidStructSignatureError",{enumerable:!0,get:function(){return e.InvalidStructSignatureError}}),Object.defineProperty(t,"parseAbi",{enumerable:!0,get:function(){return e.parseAbi}}),Object.defineProperty(t,"parseAbiItem",{enumerable:!0,get:function(){return e.parseAbiItem}}),Object.defineProperty(t,"parseAbiParameter",{enumerable:!0,get:function(){return e.parseAbiParameter}}),Object.defineProperty(t,"parseAbiParameters",{enumerable:!0,get:function(){return e.parseAbiParameters}}),Object.defineProperty(t,"SolidityProtectedKeywordError",{enumerable:!0,get:function(){return e.SolidityProtectedKeywordError}}),Object.defineProperty(t,"UnknownSignatureError",{enumerable:!0,get:function(){return e.UnknownSignatureError}}),Object.defineProperty(t,"UnknownTypeError",{enumerable:!0,get:function(){return e.UnknownTypeError}});var r=DUe();Object.defineProperty(t,"getContract",{enumerable:!0,get:function(){return r.getContract}});var n=YB();Object.defineProperty(t,"WaitForCallsStatusTimeoutError",{enumerable:!0,get:function(){return n.WaitForCallsStatusTimeoutError}});var s=G5();Object.defineProperty(t,"createClient",{enumerable:!0,get:function(){return s.createClient}}),Object.defineProperty(t,"rpcSchema",{enumerable:!0,get:function(){return s.rpcSchema}});var i=kMe();Object.defineProperty(t,"createPublicClient",{enumerable:!0,get:function(){return i.createPublicClient}});var o=l7e();Object.defineProperty(t,"createTestClient",{enumerable:!0,get:function(){return o.createTestClient}});var a=I7e();Object.defineProperty(t,"createWalletClient",{enumerable:!0,get:function(){return a.createWalletClient}});var c=kie();Object.defineProperty(t,"publicActions",{enumerable:!0,get:function(){return c.publicActions}});var u=Bie();Object.defineProperty(t,"testActions",{enumerable:!0,get:function(){return u.testActions}});var l=Die();Object.defineProperty(t,"walletActions",{enumerable:!0,get:function(){return l.walletActions}});var d=T_();Object.defineProperty(t,"createTransport",{enumerable:!0,get:function(){return d.createTransport}});var f=T7e();Object.defineProperty(t,"custom",{enumerable:!0,get:function(){return f.custom}});var p=N7e();Object.defineProperty(t,"fallback",{enumerable:!0,get:function(){return p.fallback}}),Object.defineProperty(t,"shouldThrow",{enumerable:!0,get:function(){return p.shouldThrow}});var g=P7e();Object.defineProperty(t,"http",{enumerable:!0,get:function(){return g.http}});var h=R7e();Object.defineProperty(t,"webSocket",{enumerable:!0,get:function(){return h.webSocket}});var y=rp();Object.defineProperty(t,"erc20Abi",{enumerable:!0,get:function(){return y.erc20Abi}}),Object.defineProperty(t,"erc20Abi_bytes32",{enumerable:!0,get:function(){return y.erc20Abi_bytes32}}),Object.defineProperty(t,"erc721Abi",{enumerable:!0,get:function(){return y.erc721Abi}}),Object.defineProperty(t,"erc1155Abi",{enumerable:!0,get:function(){return y.erc1155Abi}}),Object.defineProperty(t,"erc4626Abi",{enumerable:!0,get:function(){return y.erc4626Abi}}),Object.defineProperty(t,"erc6492SignatureValidatorAbi",{enumerable:!0,get:function(){return y.erc6492SignatureValidatorAbi}}),Object.defineProperty(t,"universalSignatureValidatorAbi",{enumerable:!0,get:function(){return y.erc6492SignatureValidatorAbi}}),Object.defineProperty(t,"multicall3Abi",{enumerable:!0,get:function(){return y.multicall3Abi}});var E=Nie();Object.defineProperty(t,"ethAddress",{enumerable:!0,get:function(){return E.ethAddress}}),Object.defineProperty(t,"zeroAddress",{enumerable:!0,get:function(){return E.zeroAddress}});var S=c9();Object.defineProperty(t,"zeroHash",{enumerable:!0,get:function(){return S.zeroHash}});var C=b_();Object.defineProperty(t,"deploylessCallViaBytecodeBytecode",{enumerable:!0,get:function(){return C.deploylessCallViaBytecodeBytecode}}),Object.defineProperty(t,"deploylessCallViaFactoryBytecode",{enumerable:!0,get:function(){return C.deploylessCallViaFactoryBytecode}}),Object.defineProperty(t,"erc6492SignatureValidatorByteCode",{enumerable:!0,get:function(){return C.erc6492SignatureValidatorByteCode}}),Object.defineProperty(t,"universalSignatureValidatorByteCode",{enumerable:!0,get:function(){return C.erc6492SignatureValidatorByteCode}});var _=NB();Object.defineProperty(t,"maxInt8",{enumerable:!0,get:function(){return _.maxInt8}}),Object.defineProperty(t,"maxInt16",{enumerable:!0,get:function(){return _.maxInt16}}),Object.defineProperty(t,"maxInt24",{enumerable:!0,get:function(){return _.maxInt24}}),Object.defineProperty(t,"maxInt32",{enumerable:!0,get:function(){return _.maxInt32}}),Object.defineProperty(t,"maxInt40",{enumerable:!0,get:function(){return _.maxInt40}}),Object.defineProperty(t,"maxInt48",{enumerable:!0,get:function(){return _.maxInt48}}),Object.defineProperty(t,"maxInt56",{enumerable:!0,get:function(){return _.maxInt56}}),Object.defineProperty(t,"maxInt64",{enumerable:!0,get:function(){return _.maxInt64}}),Object.defineProperty(t,"maxInt72",{enumerable:!0,get:function(){return _.maxInt72}}),Object.defineProperty(t,"maxInt80",{enumerable:!0,get:function(){return _.maxInt80}}),Object.defineProperty(t,"maxInt88",{enumerable:!0,get:function(){return _.maxInt88}}),Object.defineProperty(t,"maxInt96",{enumerable:!0,get:function(){return _.maxInt96}}),Object.defineProperty(t,"maxInt104",{enumerable:!0,get:function(){return _.maxInt104}}),Object.defineProperty(t,"maxInt112",{enumerable:!0,get:function(){return _.maxInt112}}),Object.defineProperty(t,"maxInt120",{enumerable:!0,get:function(){return _.maxInt120}}),Object.defineProperty(t,"maxInt128",{enumerable:!0,get:function(){return _.maxInt128}}),Object.defineProperty(t,"maxInt136",{enumerable:!0,get:function(){return _.maxInt136}}),Object.defineProperty(t,"maxInt144",{enumerable:!0,get:function(){return _.maxInt144}}),Object.defineProperty(t,"maxInt152",{enumerable:!0,get:function(){return _.maxInt152}}),Object.defineProperty(t,"maxInt160",{enumerable:!0,get:function(){return _.maxInt160}}),Object.defineProperty(t,"maxInt168",{enumerable:!0,get:function(){return _.maxInt168}}),Object.defineProperty(t,"maxInt176",{enumerable:!0,get:function(){return _.maxInt176}}),Object.defineProperty(t,"maxInt184",{enumerable:!0,get:function(){return _.maxInt184}}),Object.defineProperty(t,"maxInt192",{enumerable:!0,get:function(){return _.maxInt192}}),Object.defineProperty(t,"maxInt200",{enumerable:!0,get:function(){return _.maxInt200}}),Object.defineProperty(t,"maxInt208",{enumerable:!0,get:function(){return _.maxInt208}}),Object.defineProperty(t,"maxInt216",{enumerable:!0,get:function(){return _.maxInt216}}),Object.defineProperty(t,"maxInt224",{enumerable:!0,get:function(){return _.maxInt224}}),Object.defineProperty(t,"maxInt232",{enumerable:!0,get:function(){return _.maxInt232}}),Object.defineProperty(t,"maxInt240",{enumerable:!0,get:function(){return _.maxInt240}}),Object.defineProperty(t,"maxInt248",{enumerable:!0,get:function(){return _.maxInt248}}),Object.defineProperty(t,"maxInt256",{enumerable:!0,get:function(){return _.maxInt256}}),Object.defineProperty(t,"maxUint8",{enumerable:!0,get:function(){return _.maxUint8}}),Object.defineProperty(t,"maxUint16",{enumerable:!0,get:function(){return _.maxUint16}}),Object.defineProperty(t,"maxUint24",{enumerable:!0,get:function(){return _.maxUint24}}),Object.defineProperty(t,"maxUint32",{enumerable:!0,get:function(){return _.maxUint32}}),Object.defineProperty(t,"maxUint40",{enumerable:!0,get:function(){return _.maxUint40}}),Object.defineProperty(t,"maxUint48",{enumerable:!0,get:function(){return _.maxUint48}}),Object.defineProperty(t,"maxUint56",{enumerable:!0,get:function(){return _.maxUint56}}),Object.defineProperty(t,"maxUint64",{enumerable:!0,get:function(){return _.maxUint64}}),Object.defineProperty(t,"maxUint72",{enumerable:!0,get:function(){return _.maxUint72}}),Object.defineProperty(t,"maxUint80",{enumerable:!0,get:function(){return _.maxUint80}}),Object.defineProperty(t,"maxUint88",{enumerable:!0,get:function(){return _.maxUint88}}),Object.defineProperty(t,"maxUint96",{enumerable:!0,get:function(){return _.maxUint96}}),Object.defineProperty(t,"maxUint104",{enumerable:!0,get:function(){return _.maxUint104}}),Object.defineProperty(t,"maxUint112",{enumerable:!0,get:function(){return _.maxUint112}}),Object.defineProperty(t,"maxUint120",{enumerable:!0,get:function(){return _.maxUint120}}),Object.defineProperty(t,"maxUint128",{enumerable:!0,get:function(){return _.maxUint128}}),Object.defineProperty(t,"maxUint136",{enumerable:!0,get:function(){return _.maxUint136}}),Object.defineProperty(t,"maxUint144",{enumerable:!0,get:function(){return _.maxUint144}}),Object.defineProperty(t,"maxUint152",{enumerable:!0,get:function(){return _.maxUint152}}),Object.defineProperty(t,"maxUint160",{enumerable:!0,get:function(){return _.maxUint160}}),Object.defineProperty(t,"maxUint168",{enumerable:!0,get:function(){return _.maxUint168}}),Object.defineProperty(t,"maxUint176",{enumerable:!0,get:function(){return _.maxUint176}}),Object.defineProperty(t,"maxUint184",{enumerable:!0,get:function(){return _.maxUint184}}),Object.defineProperty(t,"maxUint192",{enumerable:!0,get:function(){return _.maxUint192}}),Object.defineProperty(t,"maxUint200",{enumerable:!0,get:function(){return _.maxUint200}}),Object.defineProperty(t,"maxUint208",{enumerable:!0,get:function(){return _.maxUint208}}),Object.defineProperty(t,"maxUint216",{enumerable:!0,get:function(){return _.maxUint216}}),Object.defineProperty(t,"maxUint224",{enumerable:!0,get:function(){return _.maxUint224}}),Object.defineProperty(t,"maxUint232",{enumerable:!0,get:function(){return _.maxUint232}}),Object.defineProperty(t,"maxUint240",{enumerable:!0,get:function(){return _.maxUint240}}),Object.defineProperty(t,"maxUint248",{enumerable:!0,get:function(){return _.maxUint248}}),Object.defineProperty(t,"maxUint256",{enumerable:!0,get:function(){return _.maxUint256}}),Object.defineProperty(t,"minInt8",{enumerable:!0,get:function(){return _.minInt8}}),Object.defineProperty(t,"minInt16",{enumerable:!0,get:function(){return _.minInt16}}),Object.defineProperty(t,"minInt24",{enumerable:!0,get:function(){return _.minInt24}}),Object.defineProperty(t,"minInt32",{enumerable:!0,get:function(){return _.minInt32}}),Object.defineProperty(t,"minInt40",{enumerable:!0,get:function(){return _.minInt40}}),Object.defineProperty(t,"minInt48",{enumerable:!0,get:function(){return _.minInt48}}),Object.defineProperty(t,"minInt56",{enumerable:!0,get:function(){return _.minInt56}}),Object.defineProperty(t,"minInt64",{enumerable:!0,get:function(){return _.minInt64}}),Object.defineProperty(t,"minInt72",{enumerable:!0,get:function(){return _.minInt72}}),Object.defineProperty(t,"minInt80",{enumerable:!0,get:function(){return _.minInt80}}),Object.defineProperty(t,"minInt88",{enumerable:!0,get:function(){return _.minInt88}}),Object.defineProperty(t,"minInt96",{enumerable:!0,get:function(){return _.minInt96}}),Object.defineProperty(t,"minInt104",{enumerable:!0,get:function(){return _.minInt104}}),Object.defineProperty(t,"minInt112",{enumerable:!0,get:function(){return _.minInt112}}),Object.defineProperty(t,"minInt120",{enumerable:!0,get:function(){return _.minInt120}}),Object.defineProperty(t,"minInt128",{enumerable:!0,get:function(){return _.minInt128}}),Object.defineProperty(t,"minInt136",{enumerable:!0,get:function(){return _.minInt136}}),Object.defineProperty(t,"minInt144",{enumerable:!0,get:function(){return _.minInt144}}),Object.defineProperty(t,"minInt152",{enumerable:!0,get:function(){return _.minInt152}}),Object.defineProperty(t,"minInt160",{enumerable:!0,get:function(){return _.minInt160}}),Object.defineProperty(t,"minInt168",{enumerable:!0,get:function(){return _.minInt168}}),Object.defineProperty(t,"minInt176",{enumerable:!0,get:function(){return _.minInt176}}),Object.defineProperty(t,"minInt184",{enumerable:!0,get:function(){return _.minInt184}}),Object.defineProperty(t,"minInt192",{enumerable:!0,get:function(){return _.minInt192}}),Object.defineProperty(t,"minInt200",{enumerable:!0,get:function(){return _.minInt200}}),Object.defineProperty(t,"minInt208",{enumerable:!0,get:function(){return _.minInt208}}),Object.defineProperty(t,"minInt216",{enumerable:!0,get:function(){return _.minInt216}}),Object.defineProperty(t,"minInt224",{enumerable:!0,get:function(){return _.minInt224}}),Object.defineProperty(t,"minInt232",{enumerable:!0,get:function(){return _.minInt232}}),Object.defineProperty(t,"minInt240",{enumerable:!0,get:function(){return _.minInt240}}),Object.defineProperty(t,"minInt248",{enumerable:!0,get:function(){return _.minInt248}}),Object.defineProperty(t,"minInt256",{enumerable:!0,get:function(){return _.minInt256}});var T=lie();Object.defineProperty(t,"presignMessagePrefix",{enumerable:!0,get:function(){return T.presignMessagePrefix}});var P=a_();Object.defineProperty(t,"etherUnits",{enumerable:!0,get:function(){return P.etherUnits}}),Object.defineProperty(t,"gweiUnits",{enumerable:!0,get:function(){return P.gweiUnits}}),Object.defineProperty(t,"weiUnits",{enumerable:!0,get:function(){return P.weiUnits}});var D=Jn();Object.defineProperty(t,"AbiConstructorNotFoundError",{enumerable:!0,get:function(){return D.AbiConstructorNotFoundError}}),Object.defineProperty(t,"AbiConstructorParamsNotFoundError",{enumerable:!0,get:function(){return D.AbiConstructorParamsNotFoundError}}),Object.defineProperty(t,"AbiDecodingDataSizeInvalidError",{enumerable:!0,get:function(){return D.AbiDecodingDataSizeInvalidError}}),Object.defineProperty(t,"AbiDecodingDataSizeTooSmallError",{enumerable:!0,get:function(){return D.AbiDecodingDataSizeTooSmallError}}),Object.defineProperty(t,"AbiDecodingZeroDataError",{enumerable:!0,get:function(){return D.AbiDecodingZeroDataError}}),Object.defineProperty(t,"AbiEncodingArrayLengthMismatchError",{enumerable:!0,get:function(){return D.AbiEncodingArrayLengthMismatchError}}),Object.defineProperty(t,"AbiEncodingBytesSizeMismatchError",{enumerable:!0,get:function(){return D.AbiEncodingBytesSizeMismatchError}}),Object.defineProperty(t,"AbiEncodingLengthMismatchError",{enumerable:!0,get:function(){return D.AbiEncodingLengthMismatchError}}),Object.defineProperty(t,"AbiErrorInputsNotFoundError",{enumerable:!0,get:function(){return D.AbiErrorInputsNotFoundError}}),Object.defineProperty(t,"AbiErrorNotFoundError",{enumerable:!0,get:function(){return D.AbiErrorNotFoundError}}),Object.defineProperty(t,"AbiErrorSignatureNotFoundError",{enumerable:!0,get:function(){return D.AbiErrorSignatureNotFoundError}}),Object.defineProperty(t,"AbiEventNotFoundError",{enumerable:!0,get:function(){return D.AbiEventNotFoundError}}),Object.defineProperty(t,"AbiEventSignatureEmptyTopicsError",{enumerable:!0,get:function(){return D.AbiEventSignatureEmptyTopicsError}}),Object.defineProperty(t,"AbiEventSignatureNotFoundError",{enumerable:!0,get:function(){return D.AbiEventSignatureNotFoundError}}),Object.defineProperty(t,"AbiFunctionNotFoundError",{enumerable:!0,get:function(){return D.AbiFunctionNotFoundError}}),Object.defineProperty(t,"AbiFunctionOutputsNotFoundError",{enumerable:!0,get:function(){return D.AbiFunctionOutputsNotFoundError}}),Object.defineProperty(t,"AbiFunctionSignatureNotFoundError",{enumerable:!0,get:function(){return D.AbiFunctionSignatureNotFoundError}}),Object.defineProperty(t,"BytesSizeMismatchError",{enumerable:!0,get:function(){return D.BytesSizeMismatchError}}),Object.defineProperty(t,"DecodeLogDataMismatch",{enumerable:!0,get:function(){return D.DecodeLogDataMismatch}}),Object.defineProperty(t,"DecodeLogTopicsMismatch",{enumerable:!0,get:function(){return D.DecodeLogTopicsMismatch}}),Object.defineProperty(t,"InvalidAbiDecodingTypeError",{enumerable:!0,get:function(){return D.InvalidAbiDecodingTypeError}}),Object.defineProperty(t,"InvalidAbiEncodingTypeError",{enumerable:!0,get:function(){return D.InvalidAbiEncodingTypeError}}),Object.defineProperty(t,"InvalidArrayError",{enumerable:!0,get:function(){return D.InvalidArrayError}}),Object.defineProperty(t,"InvalidDefinitionTypeError",{enumerable:!0,get:function(){return D.InvalidDefinitionTypeError}}),Object.defineProperty(t,"UnsupportedPackedAbiType",{enumerable:!0,get:function(){return D.UnsupportedPackedAbiType}});var L=Wu();Object.defineProperty(t,"InvalidAddressError",{enumerable:!0,get:function(){return L.InvalidAddressError}});var I=Kt();Object.defineProperty(t,"BaseError",{enumerable:!0,get:function(){return I.BaseError}}),Object.defineProperty(t,"setErrorConfig",{enumerable:!0,get:function(){return I.setErrorConfig}});var U=PB();Object.defineProperty(t,"BlockNotFoundError",{enumerable:!0,get:function(){return U.BlockNotFoundError}});var F=Dse();Object.defineProperty(t,"BundleFailedError",{enumerable:!0,get:function(){return F.BundleFailedError}});var B=w_();Object.defineProperty(t,"ChainDoesNotSupportContract",{enumerable:!0,get:function(){return B.ChainDoesNotSupportContract}}),Object.defineProperty(t,"ChainMismatchError",{enumerable:!0,get:function(){return B.ChainMismatchError}}),Object.defineProperty(t,"ChainNotFoundError",{enumerable:!0,get:function(){return B.ChainNotFoundError}}),Object.defineProperty(t,"ClientChainNotConfiguredError",{enumerable:!0,get:function(){return B.ClientChainNotConfiguredError}}),Object.defineProperty(t,"InvalidChainIdError",{enumerable:!0,get:function(){return B.InvalidChainIdError}});var A=Yh();Object.defineProperty(t,"CallExecutionError",{enumerable:!0,get:function(){return A.CallExecutionError}}),Object.defineProperty(t,"ContractFunctionExecutionError",{enumerable:!0,get:function(){return A.ContractFunctionExecutionError}}),Object.defineProperty(t,"ContractFunctionRevertedError",{enumerable:!0,get:function(){return A.ContractFunctionRevertedError}}),Object.defineProperty(t,"ContractFunctionZeroDataError",{enumerable:!0,get:function(){return A.ContractFunctionZeroDataError}}),Object.defineProperty(t,"CounterfactualDeploymentFailedError",{enumerable:!0,get:function(){return A.CounterfactualDeploymentFailedError}}),Object.defineProperty(t,"RawContractError",{enumerable:!0,get:function(){return A.RawContractError}});var m=T5();Object.defineProperty(t,"SizeExceedsPaddingSizeError",{enumerable:!0,get:function(){return m.SizeExceedsPaddingSizeError}}),Object.defineProperty(t,"SliceOffsetOutOfBoundsError",{enumerable:!0,get:function(){return m.SliceOffsetOutOfBoundsError}});var b=ib();Object.defineProperty(t,"IntegerOutOfRangeError",{enumerable:!0,get:function(){return b.IntegerOutOfRangeError}}),Object.defineProperty(t,"InvalidBytesBooleanError",{enumerable:!0,get:function(){return b.InvalidBytesBooleanError}}),Object.defineProperty(t,"InvalidHexBooleanError",{enumerable:!0,get:function(){return b.InvalidHexBooleanError}}),Object.defineProperty(t,"InvalidHexValueError",{enumerable:!0,get:function(){return b.InvalidHexValueError}}),Object.defineProperty(t,"SizeOverflowError",{enumerable:!0,get:function(){return b.SizeOverflowError}});var w=e9();Object.defineProperty(t,"EnsAvatarInvalidNftUriError",{enumerable:!0,get:function(){return w.EnsAvatarInvalidNftUriError}}),Object.defineProperty(t,"EnsAvatarUnsupportedNamespaceError",{enumerable:!0,get:function(){return w.EnsAvatarUnsupportedNamespaceError}}),Object.defineProperty(t,"EnsAvatarUriResolutionError",{enumerable:!0,get:function(){return w.EnsAvatarUriResolutionError}}),Object.defineProperty(t,"EnsInvalidChainIdError",{enumerable:!0,get:function(){return w.EnsInvalidChainIdError}});var x=_se();Object.defineProperty(t,"EstimateGasExecutionError",{enumerable:!0,get:function(){return x.EstimateGasExecutionError}});var M=h_();Object.defineProperty(t,"BaseFeeScalarError",{enumerable:!0,get:function(){return M.BaseFeeScalarError}}),Object.defineProperty(t,"Eip1559FeesNotSupportedError",{enumerable:!0,get:function(){return M.Eip1559FeesNotSupportedError}}),Object.defineProperty(t,"MaxFeePerGasTooLowError",{enumerable:!0,get:function(){return M.MaxFeePerGasTooLowError}});var k=dse();Object.defineProperty(t,"FilterTypeNotSupportedError",{enumerable:!0,get:function(){return k.FilterTypeNotSupportedError}});var j=hf();Object.defineProperty(t,"ExecutionRevertedError",{enumerable:!0,get:function(){return j.ExecutionRevertedError}}),Object.defineProperty(t,"FeeCapTooHighError",{enumerable:!0,get:function(){return j.FeeCapTooHighError}}),Object.defineProperty(t,"FeeCapTooLowError",{enumerable:!0,get:function(){return j.FeeCapTooLowError}}),Object.defineProperty(t,"InsufficientFundsError",{enumerable:!0,get:function(){return j.InsufficientFundsError}}),Object.defineProperty(t,"IntrinsicGasTooHighError",{enumerable:!0,get:function(){return j.IntrinsicGasTooHighError}}),Object.defineProperty(t,"IntrinsicGasTooLowError",{enumerable:!0,get:function(){return j.IntrinsicGasTooLowError}}),Object.defineProperty(t,"NonceMaxValueError",{enumerable:!0,get:function(){return j.NonceMaxValueError}}),Object.defineProperty(t,"NonceTooHighError",{enumerable:!0,get:function(){return j.NonceTooHighError}}),Object.defineProperty(t,"NonceTooLowError",{enumerable:!0,get:function(){return j.NonceTooLowError}}),Object.defineProperty(t,"TipAboveFeeCapError",{enumerable:!0,get:function(){return j.TipAboveFeeCapError}}),Object.defineProperty(t,"TransactionTypeNotSupportedError",{enumerable:!0,get:function(){return j.TransactionTypeNotSupportedError}}),Object.defineProperty(t,"UnknownNodeError",{enumerable:!0,get:function(){return j.UnknownNodeError}});var N=Gu();Object.defineProperty(t,"HttpRequestError",{enumerable:!0,get:function(){return N.HttpRequestError}}),Object.defineProperty(t,"RpcRequestError",{enumerable:!0,get:function(){return N.RpcRequestError}}),Object.defineProperty(t,"SocketClosedError",{enumerable:!0,get:function(){return N.SocketClosedError}}),Object.defineProperty(t,"TimeoutError",{enumerable:!0,get:function(){return N.TimeoutError}}),Object.defineProperty(t,"WebSocketRequestError",{enumerable:!0,get:function(){return N.WebSocketRequestError}});var v=Jh();Object.defineProperty(t,"AtomicityNotSupportedError",{enumerable:!0,get:function(){return v.AtomicityNotSupportedError}}),Object.defineProperty(t,"AtomicReadyWalletRejectedUpgradeError",{enumerable:!0,get:function(){return v.AtomicReadyWalletRejectedUpgradeError}}),Object.defineProperty(t,"BundleTooLargeError",{enumerable:!0,get:function(){return v.BundleTooLargeError}}),Object.defineProperty(t,"ChainDisconnectedError",{enumerable:!0,get:function(){return v.ChainDisconnectedError}}),Object.defineProperty(t,"DuplicateIdError",{enumerable:!0,get:function(){return v.DuplicateIdError}}),Object.defineProperty(t,"InternalRpcError",{enumerable:!0,get:function(){return v.InternalRpcError}}),Object.defineProperty(t,"InvalidInputRpcError",{enumerable:!0,get:function(){return v.InvalidInputRpcError}}),Object.defineProperty(t,"InvalidParamsRpcError",{enumerable:!0,get:function(){return v.InvalidParamsRpcError}}),Object.defineProperty(t,"InvalidRequestRpcError",{enumerable:!0,get:function(){return v.InvalidRequestRpcError}}),Object.defineProperty(t,"JsonRpcVersionUnsupportedError",{enumerable:!0,get:function(){return v.JsonRpcVersionUnsupportedError}}),Object.defineProperty(t,"LimitExceededRpcError",{enumerable:!0,get:function(){return v.LimitExceededRpcError}}),Object.defineProperty(t,"MethodNotFoundRpcError",{enumerable:!0,get:function(){return v.MethodNotFoundRpcError}}),Object.defineProperty(t,"MethodNotSupportedRpcError",{enumerable:!0,get:function(){return v.MethodNotSupportedRpcError}}),Object.defineProperty(t,"ParseRpcError",{enumerable:!0,get:function(){return v.ParseRpcError}}),Object.defineProperty(t,"ProviderDisconnectedError",{enumerable:!0,get:function(){return v.ProviderDisconnectedError}}),Object.defineProperty(t,"ProviderRpcError",{enumerable:!0,get:function(){return v.ProviderRpcError}}),Object.defineProperty(t,"ResourceNotFoundRpcError",{enumerable:!0,get:function(){return v.ResourceNotFoundRpcError}}),Object.defineProperty(t,"ResourceUnavailableRpcError",{enumerable:!0,get:function(){return v.ResourceUnavailableRpcError}}),Object.defineProperty(t,"RpcError",{enumerable:!0,get:function(){return v.RpcError}}),Object.defineProperty(t,"SwitchChainError",{enumerable:!0,get:function(){return v.SwitchChainError}}),Object.defineProperty(t,"TransactionRejectedRpcError",{enumerable:!0,get:function(){return v.TransactionRejectedRpcError}}),Object.defineProperty(t,"UnauthorizedProviderError",{enumerable:!0,get:function(){return v.UnauthorizedProviderError}}),Object.defineProperty(t,"UnknownBundleIdError",{enumerable:!0,get:function(){return v.UnknownBundleIdError}}),Object.defineProperty(t,"UnknownRpcError",{enumerable:!0,get:function(){return v.UnknownRpcError}}),Object.defineProperty(t,"UnsupportedChainIdError",{enumerable:!0,get:function(){return v.UnsupportedChainIdError}}),Object.defineProperty(t,"UnsupportedNonOptionalCapabilityError",{enumerable:!0,get:function(){return v.UnsupportedNonOptionalCapabilityError}}),Object.defineProperty(t,"UnsupportedProviderMethodError",{enumerable:!0,get:function(){return v.UnsupportedProviderMethodError}}),Object.defineProperty(t,"UserRejectedRequestError",{enumerable:!0,get:function(){return v.UserRejectedRequestError}});var R=CB();Object.defineProperty(t,"AccountStateConflictError",{enumerable:!0,get:function(){return R.AccountStateConflictError}}),Object.defineProperty(t,"StateAssignmentConflictError",{enumerable:!0,get:function(){return R.StateAssignmentConflictError}});var $=Oa();Object.defineProperty(t,"FeeConflictError",{enumerable:!0,get:function(){return $.FeeConflictError}}),Object.defineProperty(t,"InvalidLegacyVError",{enumerable:!0,get:function(){return $.InvalidLegacyVError}}),Object.defineProperty(t,"InvalidSerializableTransactionError",{enumerable:!0,get:function(){return $.InvalidSerializableTransactionError}}),Object.defineProperty(t,"InvalidSerializedTransactionError",{enumerable:!0,get:function(){return $.InvalidSerializedTransactionError}}),Object.defineProperty(t,"InvalidSerializedTransactionTypeError",{enumerable:!0,get:function(){return $.InvalidSerializedTransactionTypeError}}),Object.defineProperty(t,"InvalidStorageKeySizeError",{enumerable:!0,get:function(){return $.InvalidStorageKeySizeError}}),Object.defineProperty(t,"TransactionExecutionError",{enumerable:!0,get:function(){return $.TransactionExecutionError}}),Object.defineProperty(t,"TransactionNotFoundError",{enumerable:!0,get:function(){return $.TransactionNotFoundError}}),Object.defineProperty(t,"TransactionReceiptNotFoundError",{enumerable:!0,get:function(){return $.TransactionReceiptNotFoundError}}),Object.defineProperty(t,"WaitForTransactionReceiptTimeoutError",{enumerable:!0,get:function(){return $.WaitForTransactionReceiptTimeoutError}});var O=v9();Object.defineProperty(t,"UrlRequiredError",{enumerable:!0,get:function(){return O.UrlRequiredError}});var H=fie();Object.defineProperty(t,"InvalidDomainError",{enumerable:!0,get:function(){return H.InvalidDomainError}}),Object.defineProperty(t,"InvalidPrimaryTypeError",{enumerable:!0,get:function(){return H.InvalidPrimaryTypeError}}),Object.defineProperty(t,"InvalidStructTypeError",{enumerable:!0,get:function(){return H.InvalidStructTypeError}});var W=Aie();Object.defineProperty(t,"InvalidDecimalNumberError",{enumerable:!0,get:function(){return W.InvalidDecimalNumberError}});var G=O7e();Object.defineProperty(t,"EIP1193ProviderRpcError",{enumerable:!0,get:function(){return G.ProviderRpcError}});var K=Zh();Object.defineProperty(t,"decodeAbiParameters",{enumerable:!0,get:function(){return K.decodeAbiParameters}});var Q=k7e();Object.defineProperty(t,"decodeDeployData",{enumerable:!0,get:function(){return Q.decodeDeployData}});var re=O5();Object.defineProperty(t,"decodeErrorResult",{enumerable:!0,get:function(){return re.decodeErrorResult}});var de=m_();Object.defineProperty(t,"decodeEventLog",{enumerable:!0,get:function(){return de.decodeEventLog}});var le=qB();Object.defineProperty(t,"decodeFunctionData",{enumerable:!0,get:function(){return le.decodeFunctionData}});var se=gf();Object.defineProperty(t,"decodeFunctionResult",{enumerable:!0,get:function(){return se.decodeFunctionResult}});var be=Vu();Object.defineProperty(t,"encodeAbiParameters",{enumerable:!0,get:function(){return be.encodeAbiParameters}});var We=v_();Object.defineProperty(t,"encodeDeployData",{enumerable:!0,get:function(){return We.encodeDeployData}});var Ne=HB();Object.defineProperty(t,"encodeErrorResult",{enumerable:!0,get:function(){return Ne.encodeErrorResult}});var Be=ug();Object.defineProperty(t,"encodeEventTopics",{enumerable:!0,get:function(){return Be.encodeEventTopics}});var At=Ra();Object.defineProperty(t,"encodeFunctionData",{enumerable:!0,get:function(){return At.encodeFunctionData}});var Ee=zB();Object.defineProperty(t,"encodeFunctionResult",{enumerable:!0,get:function(){return Ee.encodeFunctionResult}});var fe=Gse();Object.defineProperty(t,"encodePacked",{enumerable:!0,get:function(){return fe.encodePacked}});var Mt=ff();Object.defineProperty(t,"getAbiItem",{enumerable:!0,get:function(){return Mt.getAbiItem}});var bt=y_();Object.defineProperty(t,"parseEventLogs",{enumerable:!0,get:function(){return bt.parseEventLogs}});var jt=pse();Object.defineProperty(t,"prepareEncodeFunctionData",{enumerable:!0,get:function(){return jt.prepareEncodeFunctionData}});var ge=pc();Object.defineProperty(t,"checksumAddress",{enumerable:!0,get:function(){return ge.checksumAddress}}),Object.defineProperty(t,"getAddress",{enumerable:!0,get:function(){return ge.getAddress}});var ve=Kse();Object.defineProperty(t,"getContractAddress",{enumerable:!0,get:function(){return ve.getContractAddress}}),Object.defineProperty(t,"getCreate2Address",{enumerable:!0,get:function(){return ve.getCreate2Address}}),Object.defineProperty(t,"getCreateAddress",{enumerable:!0,get:function(){return ve.getCreateAddress}});var V=Pa();Object.defineProperty(t,"isAddress",{enumerable:!0,get:function(){return V.isAddress}});var q=Yu();Object.defineProperty(t,"isAddressEqual",{enumerable:!0,get:function(){return q.isAddressEqual}});var z=D5();Object.defineProperty(t,"blobsToCommitments",{enumerable:!0,get:function(){return z.blobsToCommitments}});var X=j5();Object.defineProperty(t,"blobsToProofs",{enumerable:!0,get:function(){return X.blobsToProofs}});var ne=BB();Object.defineProperty(t,"commitmentsToVersionedHashes",{enumerable:!0,get:function(){return ne.commitmentsToVersionedHashes}});var ce=kB();Object.defineProperty(t,"commitmentToVersionedHash",{enumerable:!0,get:function(){return ce.commitmentToVersionedHash}});var me=B7e();Object.defineProperty(t,"fromBlobs",{enumerable:!0,get:function(){return me.fromBlobs}});var Rt=U7e();Object.defineProperty(t,"sidecarsToVersionedHashes",{enumerable:!0,get:function(){return Rt.sidecarsToVersionedHashes}});var Tt=L5();Object.defineProperty(t,"toBlobSidecars",{enumerable:!0,get:function(){return Tt.toBlobSidecars}});var Ct=Nse();Object.defineProperty(t,"toBlobs",{enumerable:!0,get:function(){return Ct.toBlobs}});var or=WB();Object.defineProperty(t,"ccipRequest",{enumerable:!0,get:function(){return or.ccipRequest}}),Object.defineProperty(t,"ccipFetch",{enumerable:!0,get:function(){return or.ccipRequest}}),Object.defineProperty(t,"offchainLookup",{enumerable:!0,get:function(){return or.offchainLookup}}),Object.defineProperty(t,"offchainLookupAbiItem",{enumerable:!0,get:function(){return or.offchainLookupAbiItem}}),Object.defineProperty(t,"offchainLookupSignature",{enumerable:!0,get:function(){return or.offchainLookupSignature}});var Et=A_();Object.defineProperty(t,"assertCurrentChain",{enumerable:!0,get:function(){return Et.assertCurrentChain}});var on=Xse();Object.defineProperty(t,"defineChain",{enumerable:!0,get:function(){return on.defineChain}});var Qc=Qse();Object.defineProperty(t,"extractChain",{enumerable:!0,get:function(){return Qc.extractChain}});var Qr=np();Object.defineProperty(t,"getChainContractAddress",{enumerable:!0,get:function(){return Qr.getChainContractAddress}});var Wr=hi();Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return Wr.concat}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return Wr.concatBytes}}),Object.defineProperty(t,"concatHex",{enumerable:!0,get:function(){return Wr.concatHex}});var eu=t9();Object.defineProperty(t,"isBytes",{enumerable:!0,get:function(){return eu.isBytes}});var an=Ho();Object.defineProperty(t,"isHex",{enumerable:!0,get:function(){return an.isHex}});var Vr=Gh();Object.defineProperty(t,"pad",{enumerable:!0,get:function(){return Vr.pad}}),Object.defineProperty(t,"padBytes",{enumerable:!0,get:function(){return Vr.padBytes}}),Object.defineProperty(t,"padHex",{enumerable:!0,get:function(){return Vr.padHex}});var tu=Ta();Object.defineProperty(t,"size",{enumerable:!0,get:function(){return tu.size}});var Gr=Jc();Object.defineProperty(t,"slice",{enumerable:!0,get:function(){return Gr.slice}}),Object.defineProperty(t,"sliceBytes",{enumerable:!0,get:function(){return Gr.sliceBytes}}),Object.defineProperty(t,"sliceHex",{enumerable:!0,get:function(){return Gr.sliceHex}});var cn=df();Object.defineProperty(t,"trim",{enumerable:!0,get:function(){return cn.trim}});var vo=xB();Object.defineProperty(t,"bytesToBigInt",{enumerable:!0,get:function(){return vo.bytesToBigInt}}),Object.defineProperty(t,"bytesToBool",{enumerable:!0,get:function(){return vo.bytesToBool}}),Object.defineProperty(t,"bytesToNumber",{enumerable:!0,get:function(){return vo.bytesToNumber}}),Object.defineProperty(t,"bytesToString",{enumerable:!0,get:function(){return vo.bytesToString}}),Object.defineProperty(t,"fromBytes",{enumerable:!0,get:function(){return vo.fromBytes}});var Ir=ys();Object.defineProperty(t,"fromHex",{enumerable:!0,get:function(){return Ir.fromHex}}),Object.defineProperty(t,"hexToBigInt",{enumerable:!0,get:function(){return Ir.hexToBigInt}}),Object.defineProperty(t,"hexToBool",{enumerable:!0,get:function(){return Ir.hexToBool}}),Object.defineProperty(t,"hexToNumber",{enumerable:!0,get:function(){return Ir.hexToNumber}}),Object.defineProperty(t,"hexToString",{enumerable:!0,get:function(){return Ir.hexToString}});var un=n9();Object.defineProperty(t,"fromRlp",{enumerable:!0,get:function(){return un.fromRlp}});var Eo=Pn();Object.defineProperty(t,"boolToBytes",{enumerable:!0,get:function(){return Eo.boolToBytes}}),Object.defineProperty(t,"hexToBytes",{enumerable:!0,get:function(){return Eo.hexToBytes}}),Object.defineProperty(t,"numberToBytes",{enumerable:!0,get:function(){return Eo.numberToBytes}}),Object.defineProperty(t,"stringToBytes",{enumerable:!0,get:function(){return Eo.stringToBytes}}),Object.defineProperty(t,"toBytes",{enumerable:!0,get:function(){return Eo.toBytes}});var Tr=tt();Object.defineProperty(t,"boolToHex",{enumerable:!0,get:function(){return Tr.boolToHex}}),Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return Tr.bytesToHex}}),Object.defineProperty(t,"numberToHex",{enumerable:!0,get:function(){return Tr.numberToHex}}),Object.defineProperty(t,"stringToHex",{enumerable:!0,get:function(){return Tr.stringToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return Tr.toHex}});var Kr=u_();Object.defineProperty(t,"bytesToRlp",{enumerable:!0,get:function(){return Kr.bytesToRlp}}),Object.defineProperty(t,"hexToRlp",{enumerable:!0,get:function(){return Kr.hexToRlp}}),Object.defineProperty(t,"toRlp",{enumerable:!0,get:function(){return Kr.toRlp}});var ru=$se();Object.defineProperty(t,"labelhash",{enumerable:!0,get:function(){return ru.labelhash}});var ln=XB();Object.defineProperty(t,"namehash",{enumerable:!0,get:function(){return ln.namehash}});var Zr=M7e();Object.defineProperty(t,"toCoinType",{enumerable:!0,get:function(){return Zr.toCoinType}});var nu=Xh();Object.defineProperty(t,"getContractError",{enumerable:!0,get:function(){return nu.getContractError}});var en=U5();Object.defineProperty(t,"defineBlock",{enumerable:!0,get:function(){return en.defineBlock}}),Object.defineProperty(t,"formatBlock",{enumerable:!0,get:function(){return en.formatBlock}});var dn=pf();Object.defineProperty(t,"formatLog",{enumerable:!0,get:function(){return dn.formatLog}});var Ba=ab();Object.defineProperty(t,"defineTransaction",{enumerable:!0,get:function(){return Ba.defineTransaction}}),Object.defineProperty(t,"formatTransaction",{enumerable:!0,get:function(){return Ba.formatTransaction}}),Object.defineProperty(t,"transactionType",{enumerable:!0,get:function(){return Ba.transactionType}});var tn=x_();Object.defineProperty(t,"defineTransactionReceipt",{enumerable:!0,get:function(){return tn.defineTransactionReceipt}}),Object.defineProperty(t,"formatTransactionReceipt",{enumerable:!0,get:function(){return tn.formatTransactionReceipt}});var Br=Ku();Object.defineProperty(t,"defineTransactionRequest",{enumerable:!0,get:function(){return Br.defineTransactionRequest}}),Object.defineProperty(t,"formatTransactionRequest",{enumerable:!0,get:function(){return Br.formatTransactionRequest}}),Object.defineProperty(t,"rpcTransactionType",{enumerable:!0,get:function(){return Br.rpcTransactionType}});var yc=s9();Object.defineProperty(t,"isHash",{enumerable:!0,get:function(){return yc.isHash}});var bc=Na();Object.defineProperty(t,"keccak256",{enumerable:!0,get:function(){return bc.keccak256}});var wc=tie();Object.defineProperty(t,"ripemd160",{enumerable:!0,get:function(){return wc.ripemd160}});var vc=OB();Object.defineProperty(t,"sha256",{enumerable:!0,get:function(){return vc.sha256}});var Ec=rie();Object.defineProperty(t,"toEventHash",{enumerable:!0,get:function(){return Ec.toEventHash}});var mf=ob();Object.defineProperty(t,"toEventSelector",{enumerable:!0,get:function(){return mf.toEventSelector}}),Object.defineProperty(t,"getEventSelector",{enumerable:!0,get:function(){return mf.toEventSelector}});var yg=nie();Object.defineProperty(t,"toEventSignature",{enumerable:!0,get:function(){return yg.toEventSignature}}),Object.defineProperty(t,"getEventSignature",{enumerable:!0,get:function(){return yg.toEventSignature}});var yb=sie();Object.defineProperty(t,"toFunctionHash",{enumerable:!0,get:function(){return yb.toFunctionHash}});var bg=cg();Object.defineProperty(t,"toFunctionSelector",{enumerable:!0,get:function(){return bg.toFunctionSelector}}),Object.defineProperty(t,"getFunctionSelector",{enumerable:!0,get:function(){return bg.toFunctionSelector}});var wg=iie();Object.defineProperty(t,"toFunctionSignature",{enumerable:!0,get:function(){return wg.toFunctionSignature}}),Object.defineProperty(t,"getFunctionSignature",{enumerable:!0,get:function(){return wg.toFunctionSignature}});var bb=jie();Object.defineProperty(t,"defineKzg",{enumerable:!0,get:function(){return bb.defineKzg}});var wb=D7e();Object.defineProperty(t,"setupKzg",{enumerable:!0,get:function(){return wb.setupKzg}});var vg=oie();Object.defineProperty(t,"createNonceManager",{enumerable:!0,get:function(){return vg.createNonceManager}}),Object.defineProperty(t,"nonceManager",{enumerable:!0,get:function(){return vg.nonceManager}});var vb=Use();Object.defineProperty(t,"withCache",{enumerable:!0,get:function(){return vb.withCache}});var Eb=V5();Object.defineProperty(t,"withRetry",{enumerable:!0,get:function(){return Eb.withRetry}});var _b=i9();Object.defineProperty(t,"withTimeout",{enumerable:!0,get:function(){return _b.withTimeout}});var Ab=j7e();Object.defineProperty(t,"compactSignatureToSignature",{enumerable:!0,get:function(){return Ab.compactSignatureToSignature}});var xb=C_();Object.defineProperty(t,"hashMessage",{enumerable:!0,get:function(){return xb.hashMessage}});var ap=S_();Object.defineProperty(t,"hashDomain",{enumerable:!0,get:function(){return ap.hashDomain}}),Object.defineProperty(t,"hashStruct",{enumerable:!0,get:function(){return ap.hashStruct}}),Object.defineProperty(t,"hashTypedData",{enumerable:!0,get:function(){return ap.hashTypedData}});var tce=u9();Object.defineProperty(t,"isErc6492Signature",{enumerable:!0,get:function(){return tce.isErc6492Signature}});var rce=f9();Object.defineProperty(t,"isErc8010Signature",{enumerable:!0,get:function(){return rce.isErc8010Signature}});var W9=L7e();Object.defineProperty(t,"hexToCompactSignature",{enumerable:!0,get:function(){return W9.parseCompactSignature}}),Object.defineProperty(t,"parseCompactSignature",{enumerable:!0,get:function(){return W9.parseCompactSignature}});var nce=mie();Object.defineProperty(t,"parseErc6492Signature",{enumerable:!0,get:function(){return nce.parseErc6492Signature}});var sce=yie();Object.defineProperty(t,"parseErc8010Signature",{enumerable:!0,get:function(){return sce.parseErc8010Signature}});var V9=F7e();Object.defineProperty(t,"hexToSignature",{enumerable:!0,get:function(){return V9.parseSignature}}),Object.defineProperty(t,"parseSignature",{enumerable:!0,get:function(){return V9.parseSignature}});var ice=Qh();Object.defineProperty(t,"recoverAddress",{enumerable:!0,get:function(){return ice.recoverAddress}});var oce=h9();Object.defineProperty(t,"recoverMessageAddress",{enumerable:!0,get:function(){return oce.recoverMessageAddress}});var ace=IB();Object.defineProperty(t,"recoverPublicKey",{enumerable:!0,get:function(){return ace.recoverPublicKey}});var cce=$7e();Object.defineProperty(t,"recoverTransactionAddress",{enumerable:!0,get:function(){return cce.recoverTransactionAddress}});var uce=p9();Object.defineProperty(t,"recoverTypedDataAddress",{enumerable:!0,get:function(){return uce.recoverTypedDataAddress}});var G9=q7e();Object.defineProperty(t,"compactSignatureToHex",{enumerable:!0,get:function(){return G9.serializeCompactSignature}}),Object.defineProperty(t,"serializeCompactSignature",{enumerable:!0,get:function(){return G9.serializeCompactSignature}});var lce=bie();Object.defineProperty(t,"serializeErc6492Signature",{enumerable:!0,get:function(){return lce.serializeErc6492Signature}});var dce=wie();Object.defineProperty(t,"serializeErc8010Signature",{enumerable:!0,get:function(){return dce.serializeErc8010Signature}});var K9=Pie();Object.defineProperty(t,"signatureToHex",{enumerable:!0,get:function(){return K9.serializeSignature}}),Object.defineProperty(t,"serializeSignature",{enumerable:!0,get:function(){return K9.serializeSignature}});var fce=H7e();Object.defineProperty(t,"signatureToCompactSignature",{enumerable:!0,get:function(){return fce.signatureToCompactSignature}});var hce=die();Object.defineProperty(t,"toPrefixedMessage",{enumerable:!0,get:function(){return hce.toPrefixedMessage}});var pce=vie();Object.defineProperty(t,"verifyHash",{enumerable:!0,get:function(){return pce.verifyHash}});var gce=Eie();Object.defineProperty(t,"verifyMessage",{enumerable:!0,get:function(){return gce.verifyMessage}});var mce=_ie();Object.defineProperty(t,"verifyTypedData",{enumerable:!0,get:function(){return mce.verifyTypedData}});var yce=Fi();Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return yce.stringify}});var bce=Zu();Object.defineProperty(t,"assertRequest",{enumerable:!0,get:function(){return bce.assertRequest}});var p3=K5();Object.defineProperty(t,"assertTransactionEIP1559",{enumerable:!0,get:function(){return p3.assertTransactionEIP1559}}),Object.defineProperty(t,"assertTransactionEIP2930",{enumerable:!0,get:function(){return p3.assertTransactionEIP2930}}),Object.defineProperty(t,"assertTransactionLegacy",{enumerable:!0,get:function(){return p3.assertTransactionLegacy}});var wce=g9();Object.defineProperty(t,"getSerializedTransactionType",{enumerable:!0,get:function(){return wce.getSerializedTransactionType}});var vce=F5();Object.defineProperty(t,"getTransactionType",{enumerable:!0,get:function(){return vce.getTransactionType}});var Ece=m9();Object.defineProperty(t,"parseTransaction",{enumerable:!0,get:function(){return Ece.parseTransaction}});var _ce=r9();Object.defineProperty(t,"serializeAccessList",{enumerable:!0,get:function(){return _ce.serializeAccessList}});var Ace=Z5();Object.defineProperty(t,"serializeTransaction",{enumerable:!0,get:function(){return Ace.serializeTransaction}});var L_=Y5();Object.defineProperty(t,"domainSeparator",{enumerable:!0,get:function(){return L_.domainSeparator}}),Object.defineProperty(t,"getTypesForEIP712Domain",{enumerable:!0,get:function(){return L_.getTypesForEIP712Domain}}),Object.defineProperty(t,"serializeTypedData",{enumerable:!0,get:function(){return L_.serializeTypedData}}),Object.defineProperty(t,"validateTypedData",{enumerable:!0,get:function(){return L_.validateTypedData}});var xce=c_();Object.defineProperty(t,"formatEther",{enumerable:!0,get:function(){return xce.formatEther}});var Cce=lg();Object.defineProperty(t,"formatGwei",{enumerable:!0,get:function(){return Cce.formatGwei}});var Sce=k5();Object.defineProperty(t,"formatUnits",{enumerable:!0,get:function(){return Sce.formatUnits}});var Ice=xie();Object.defineProperty(t,"parseEther",{enumerable:!0,get:function(){return Ice.parseEther}});var Tce=Cie();Object.defineProperty(t,"parseGwei",{enumerable:!0,get:function(){return Tce.parseGwei}});var Nce=Q5();Object.defineProperty(t,"parseUnits",{enumerable:!0,get:function(){return Nce.parseUnits}})})(WP)),WP}var Up={},cK;function W7e(){if(cK)return Up;cK=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.MAGIC_VALUE_BYTES=Up.MAGIC_VALUE=void 0;const t="0x1626ba7e";Up.MAGIC_VALUE=t;const e="0x20c13b0b";return Up.MAGIC_VALUE_BYTES=e,Up}var GS={},r1={},Mp={},uK;function Lie(){if(uK)return Mp;uK=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.PermissionsError=Mp.PERMISSIONS_REQUEST_REJECTED=void 0,Mp.PERMISSIONS_REQUEST_REJECTED=4001;class t extends Error{constructor(r,n,s){super(r),this.code=n,this.data=s,Object.setPrototypeOf(this,t.prototype)}}return Mp.PermissionsError=t,Mp}var lK;function Fie(){if(lK)return r1;lK=1,Object.defineProperty(r1,"__esModule",{value:!0}),r1.Wallet=void 0;const t=og(),e=Lie();class r{constructor(s){this.communicator=s}async getPermissions(){return(await this.communicator.send(t.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(s){if(!this.isPermissionRequestValid(s))throw new e.PermissionsError("Permissions request is invalid",e.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(t.Methods.wallet_requestPermissions,s)).data}catch{throw new e.PermissionsError("Permissions rejected",e.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(s){return s.every(i=>typeof i=="object"?Object.keys(i).every(o=>!!Object.values(t.RestrictedMethods).includes(o)):!1)}}return r1.Wallet=r,r1}var dK;function V7e(){if(dK)return GS;dK=1,Object.defineProperty(GS,"__esModule",{value:!0});const t=Fie(),e=Lie(),r=(s,i)=>i.some(o=>o.parentCapability===s),n=()=>(s,i,o)=>{const a=o.value;return o.value=async function(){const c=new t.Wallet(this.communicator);let u=await c.getPermissions();if(r(i,u)||(u=await c.requestPermissions([{[i]:{}}])),!r(i,u))throw new e.PermissionsError("Permissions rejected",e.PERMISSIONS_REQUEST_REJECTED);return a.apply(this)},o};return GS.default=n,GS}var fK;function G7e(){if(fK)return dd;fK=1;var t=dd&&dd.__decorate||function(u,l,d,f){var p=arguments.length,g=p<3?l:f===null?f=Object.getOwnPropertyDescriptor(l,d):f,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(u,l,d,f);else for(var y=u.length-1;y>=0;y--)(h=u[y])&&(g=(p<3?h(g):p>3?h(l,d,g):h(l,d))||g);return p>3&&g&&Object.defineProperty(l,d,g),g},e=dd&&dd.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(dd,"__esModule",{value:!0}),dd.Safe=void 0;const r=z7e(),n=W7e(),s=og(),i=wB(),o=bB(),a=e(V7e());class c{constructor(l){this.communicator=l}async getChainInfo(){return(await this.communicator.send(s.Methods.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(s.Methods.getSafeInfo,void 0)).data}async experimental_getBalances({currency:l="usd"}={}){return(await this.communicator.send(s.Methods.getSafeBalances,{currency:l})).data}async check1271Signature(l,d="0x"){const f=await this.getInfo(),p=(0,r.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[l,d]}),g={call:i.RPC_CALLS.eth_call,params:[{to:f.safeAddress,data:p},"latest"]};try{return(await this.communicator.send(s.Methods.rpcCall,g)).data.slice(0,10).toLowerCase()===n.MAGIC_VALUE}catch{return!1}}async check1271SignatureBytes(l,d="0x"){const f=await this.getInfo(),p=(0,r.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[l,d]}),g={call:i.RPC_CALLS.eth_call,params:[{to:f.safeAddress,data:p},"latest"]};try{return(await this.communicator.send(s.Methods.rpcCall,g)).data.slice(0,10).toLowerCase()===n.MAGIC_VALUE_BYTES}catch{return!1}}calculateMessageHash(l){return(0,r.hashMessage)(l)}calculateTypedMessageHash(l){const d=typeof l.domain.chainId=="object"?l.domain.chainId.toNumber():Number(l.domain.chainId);let f=l.primaryType;if(!f){const p=Object.values(l.types),g=Object.keys(l.types).filter(h=>p.every(y=>y.every(({type:E})=>E.replace("[","").replace("]","")!==h)));if(g.length===0||g.length>1)throw new Error("Please specify primaryType");f=g[0]}return(0,r.hashTypedData)({message:l.message,domain:{...l.domain,chainId:d,verifyingContract:l.domain.verifyingContract,salt:l.domain.salt},types:l.types,primaryType:f})}async getOffChainSignature(l){return(await this.communicator.send(s.Methods.getOffChainSignature,l)).data}async isMessageSigned(l,d="0x"){let f;if(typeof l=="string"&&(f=async()=>{const p=this.calculateMessageHash(l);return await this.isMessageHashSigned(p,d)}),(0,o.isObjectEIP712TypedData)(l)&&(f=async()=>{const p=this.calculateTypedMessageHash(l);return await this.isMessageHashSigned(p,d)}),f)return await f();throw new Error("Invalid message type")}async isMessageHashSigned(l,d="0x"){const f=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const p of f)if(await p(l,d))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(s.Methods.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(s.Methods.requestAddressBook,void 0)).data}}return dd.Safe=c,t([(0,a.default)()],c.prototype,"requestAddressBook",null),dd}var hK;function pK(){if(hK)return Lg;hK=1;var t=Lg&&Lg.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Lg,"__esModule",{value:!0});const e=t(K9e()),r=hUe(),n=pUe(),s=G7e(),i=Fie();class o{constructor(c={}){const{allowedDomains:u=null,debug:l=!1}=c;this.communicator=new e.default(u,l),this.eth=new n.Eth(this.communicator),this.txs=new r.TXs(this.communicator),this.safe=new s.Safe(this.communicator),this.wallet=new i.Wallet(this.communicator)}}return Lg.default=o,Lg}var gK;function K7e(){return gK||(gK=1,(function(t){var e=ad&&ad.__createBinding||(Object.create?(function(o,a,c,u){u===void 0&&(u=c);var l=Object.getOwnPropertyDescriptor(a,c);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,u,l)}):(function(o,a,c,u){u===void 0&&(u=c),o[u]=a[c]})),r=ad&&ad.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,o,c)},n=ad&&ad.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSDKVersion=void 0;const s=n(pK());t.default=s.default,r(pK(),t),r(bB(),t),r(og(),t),r(ise(),t);var i=sse();Object.defineProperty(t,"getSDKVersion",{enumerable:!0,get:function(){return i.getSDKVersion}}),r(wB(),t)})(ad)),ad}var Dp={},mK;function Z7e(){if(mK)return Dp;mK=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.numberToHex=Dp.getLowerCase=void 0;function t(r){return r&&r.toLowerCase()}Dp.getLowerCase=t;function e(r){return`0x${r.toString(16)}`}return Dp.numberToHex=e,Dp}var yK;function Y7e(){if(yK)return Qb;yK=1,Object.defineProperty(Qb,"__esModule",{value:!0}),Qb.SafeAppProvider=void 0;const t=K7e(),e=TJ(),r=Z7e();class n extends e.EventEmitter{constructor(i,o){super(),this.submittedTxs=new Map,this.safe=i,this.sdk=o}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(i){const{method:o,params:a=[]}=i;switch(o){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,r.numberToHex)(this.chainId);case"personal_sign":{const[f,p]=a;if(this.safe.safeAddress.toLowerCase()!==p.toLowerCase())throw new Error("The address or message hash is invalid");const g=await this.sdk.txs.signMessage(f);return("signature"in g?g.signature:void 0)||"0x"}case"eth_sign":{const[f,p]=a;if(this.safe.safeAddress.toLowerCase()!==f.toLowerCase()||!p.startsWith("0x"))throw new Error("The address or message hash is invalid");const g=await this.sdk.txs.signMessage(p);return("signature"in g?g.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[f,p]=a,g=typeof p=="string"?JSON.parse(p):p;if(this.safe.safeAddress.toLowerCase()!==f.toLowerCase())throw new Error("The address is invalid");const h=await this.sdk.txs.signTypedMessage(g);return("signature"in h?h.signature:void 0)||"0x"}case"eth_sendTransaction":const c={...a[0],value:a[0].value||"0",data:a[0].data||"0x"};typeof c.gas=="string"&&c.gas.startsWith("0x")&&(c.gas=parseInt(c.gas,16));const u=await this.sdk.txs.send({txs:[c],params:{safeTxGas:c.gas}});return this.submittedTxs.set(u.safeTxHash,{from:this.safe.safeAddress,hash:u.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:c.data,value:c.value,to:c.to,blockHash:null,blockNumber:null,transactionIndex:null}),u.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,r.getLowerCase)(a[0]),a[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,r.getLowerCase)(a[0]),a[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,r.getLowerCase)(a[0]),a[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,r.getLowerCase)(a[0]),a[1],a[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([a[0],a[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([a[0],a[1]]);case"eth_getTransactionByHash":let d=a[0];try{d=(await this.sdk.txs.getBySafeTxHash(d)).txHash||d}catch{}return this.submittedTxs.has(d)?this.submittedTxs.get(d):this.sdk.eth.getTransactionByHash([d]).then(f=>(f&&(f.hash=a[0]),f));case"eth_getTransactionReceipt":{let f=a[0];try{f=(await this.sdk.txs.getBySafeTxHash(f)).txHash||f}catch{}return this.sdk.eth.getTransactionReceipt([f]).then(p=>(p&&(p.transactionHash=a[0]),p))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(a[0]);case"eth_call":return this.sdk.eth.call([a[0],a[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([a[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(a[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([a[0]]);case"wallet_sendCalls":{const{from:f,calls:p,chainId:g}=a[0];if(g!==(0,r.numberToHex)(this.chainId))throw new Error(`Safe is not on chain ${g}`);if(f!==this.safe.safeAddress)throw Error("Invalid from address");const h=p.map((S,C)=>{if(!S.to)throw new Error(`Invalid call #${C}: missing "to" field`);return{to:S.to,data:S.data??"0x",value:S.value??(0,r.numberToHex)(0)}}),{safeTxHash:y}=await this.sdk.txs.send({txs:h});return{id:y}}case"wallet_getCallsStatus":{const f=a[0],p={[t.TransactionStatus.AWAITING_CONFIRMATIONS]:100,[t.TransactionStatus.AWAITING_EXECUTION]:100,[t.TransactionStatus.SUCCESS]:200,[t.TransactionStatus.CANCELLED]:400,[t.TransactionStatus.FAILED]:500},g=await this.sdk.txs.getBySafeTxHash(f),h={version:"1.0",id:f,chainId:(0,r.numberToHex)(this.chainId),status:p[g.txStatus]};if(!g.txHash)return h;const y=await this.sdk.eth.getTransactionReceipt([g.txHash]);if(!y)return h;const E=g.txData?.dataDecoded?.method!=="multiSend"?1:g.txData.dataDecoded.parameters?.[0].valueDecoded?.length??1,S=Number(y.blockNumber),C=Number(y.gasUsed);return h.receipts=Array(E).fill({logs:y.logs,status:(0,r.numberToHex)(g.txStatus===t.TransactionStatus.SUCCESS?1:0),blockHash:y.blockHash,blockNumber:(0,r.numberToHex)(S),gasUsed:(0,r.numberToHex)(C),transactionHash:g.txHash}),h}case"wallet_showCallsStatus":throw new Error(`"${i.method}" not supported`);case"wallet_getCapabilities":return{[(0,r.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${i.method}" not implemented`)}}send(i,o){i||o("Undefined request"),this.request(i).then(a=>o(null,{jsonrpc:"2.0",id:i.id,result:a})).catch(a=>o(a,null))}}return Qb.SafeAppProvider=n,Qb}var bK;function J7e(){return bK||(bK=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SafeAppProvider=void 0;var e=Y7e();Object.defineProperty(t,"SafeAppProvider",{enumerable:!0,get:function(){return e.SafeAppProvider}})})(LP)),LP}var X7e=J7e();class Q7e extends X7e.SafeAppProvider{request(e){return e.method==="eth_requestAccounts"?this.request({method:"eth_accounts",params:[]}):super.request(e)}}class eDe extends yB{async initialize(){const{default:e}=await Cr(async()=>{const{default:i}=await import("./index-DRicxQIX.js");return{default:i}},__vite__mapDeps([58,2])),r=new e,n=await r.safe.getInfo(),s=new Q7e(n,r);await s.connect().catch(i=>{console.info("Failed to auto-connect to Safe:",i)}),this.provider=s,this.initialized=!0}async getProvider(){return Promise.resolve(this.provider)}}class tDe extends yB{async initialize(){if(!(typeof window>"u")&&window.ethereum)return this.provider=window.ethereum,this.initialized=!0,Promise.resolve()}}const im={signMessage:async(t,e,r)=>{if(!e)throw new Error("signMessage - provider is undefined");const n=Er(t)?t:je(ms(t));return await e.request({method:"personal_sign",params:[n,r]})},estimateGas:async(t,e,r,n)=>{if(!e)throw new Error("estimateGas - provider is undefined");if(!r)throw new Error("estimateGas - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("estimateGas - chainNamespace is not eip155");const s={from:t.address,to:t.to,data:t.data,type:0};return(await new jP(e,n).getSigner(r).estimateGas(s)).toBigInt()},sendTransaction:async(t,e,r,n)=>{if(!e)throw new Error("sendTransaction - provider is undefined");if(!r)throw new Error("sendTransaction - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("sendTransaction - chainNamespace is not eip155");const s={to:t.to,value:t.value,gasLimit:t.gas,gasPrice:t.gasPrice,data:t.data,type:0};return(await(await new jP(e,n).getSigner(r).sendTransaction(s)).wait())?.blockHash||null},writeContract:async(t,e,r,n)=>{if(!e)throw new Error("writeContract - provider is undefined");if(!r)throw new Error("writeContract - address is undefined");const i=new jP(e,n).getSigner(r),o=new eBe(t.tokenAddress,t.abi,i);if(!o||!t.method)throw new Error("Contract method is undefined");const a=o[t.method];if(a)return await a(...t.args);throw new Error("Contract method is undefined")},parseWalletCapabilities:t=>{try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}},parseUnits:(t,e)=>mB(t,e).toBigInt(),formatUnits:gB};class rDe extends XT{constructor(){super({adapterType:ae.ADAPTER_TYPES.ETHERS5,namespace:ae.CHAIN.EVM}),this.balancePromises={},this.ethersProviders={}}async createEthersConfig(){const{metadata:e,enableCoinbase:r,enableInjected:n,enableEIP6963:s}=we.state;if(e){if(n!==!1){const i=new tDe;await i.initialize(),this.ethersProviders.injected=i}if(r!==!1&&(this.ethersProviders.baseAccount=new V9e),ke.isSafeApp()){const i=new eDe;await i.initialize(),this.ethersProviders.safe=i}return{...this.ethersProviders,EIP6963:s!==!1,metadata:e}}}async signMessage(e){const{message:r,address:n,provider:s}=e;if(!s)throw new Error("Provider is undefined");try{return{signature:await im.signMessage(r,s,n)}}catch{throw new Error("EthersAdapter:signMessage - Sign message failed")}}async sendTransaction(e){if(!e.provider)throw new Error("Provider is undefined");const r=J.getAccountData(ae.CHAIN.EVM)?.address;if(!r)throw new Error("Address is undefined");return{hash:await im.sendTransaction({value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),to:e.to,data:e.data?e.data:"0x",gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,address:r},e.provider,r,Number(e.caipNetwork?.id))}}async writeContract(e){if(!e.provider)throw new Error("Provider is undefined");const{address:r}=xs.parseCaipAddress(e.caipAddress);return{hash:await im.writeContract(e,e.provider,r,Number(e.caipNetwork?.id))}}async estimateGas(e){const{provider:r,caipNetwork:n,address:s}=e;if(!r)throw new Error("Provider is undefined");try{return{gas:await im.estimateGas({data:e.data,to:e.to,address:s},r,s,Number(n?.id))}}catch{throw new Error("EthersAdapter:estimateGas - Estimate gas failed")}}parseUnits(e){return im.parseUnits(e.value,e.decimals)}formatUnits(e){return im.formatUnits(e.value,e.decimals)}async syncConnection(e){const{id:r,chainId:n}=e,s=this.connectors.find(c=>c.id===r),i=s?.provider;if(!i)throw new Error("Provider not found");const o=await i.request({method:"eth_requestAccounts"}),a=await i.request({method:"eth_chainId"});if(this.listenProviderEvents(r,i),!o[0])throw new Error("No accounts found");if(!s?.type)throw new Error("Connector type not found");return{address:this.toChecksummedAddress(o[0]),chainId:Number(a)||Number(n),provider:i,type:s.type,id:r}}async syncConnectors(){this.ethersConfig=await this.createEthersConfig(),this.ethersConfig?.EIP6963&&this.listenInjectedConnector(!0),Object.keys(this.ethersConfig||{}).filter(r=>r!=="metadata"&&r!=="EIP6963").forEach(async r=>{const n=r===ae.CONNECTOR_ID.INJECTED;if(this.namespace){const s=this.ethersProviders[r];this.addConnector({id:r,explorerId:ii.ConnectorExplorerIds[r],imageUrl:la.state.connectorImages?.[r],name:ii.ConnectorNamesMap[r]||"Unknown",imageId:ii.ConnectorImageIds[r],type:ii.ConnectorTypesMap[r]??"EXTERNAL",info:n?void 0:{rdns:r},chain:this.namespace,chains:[],provider:await s?.getProvider()})}})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async r=>{const n=this.connectors.find(s=>po.isLowerCaseMatch(s.id,r.connectorId));if(!n)throw new Error("Connector not found");return await this.disconnect({id:n.id}),r}))}}async syncConnections({connectToFirstConnector:e}){const r=this.getCaipNetworks();await Promise.all(this.connectors.filter(n=>{const{hasDisconnected:s,hasConnected:i}=po.getConnectorStorageInfo(n.id,this.namespace);return!s&&i}).map(async n=>{if(n.id===ae.CONNECTOR_ID.WALLET_CONNECT){const s=go.getWalletConnectAccounts(this.universalProvider,this.namespace),i=r.find(o=>o.chainNamespace===this.namespace&&o.id.toString()===s[0]?.chainId?.toString());s.length>0&&this.addConnection({connectorId:n.id,accounts:s.map(o=>({address:o.address})),caipNetwork:i})}else{const{accounts:s,chainId:i}=await AI.fetchProviderData(n);if(s.length>0&&i){const o=r.find(a=>a.chainNamespace===this.namespace&&a.id.toString()===i.toString());this.addConnection({connectorId:n.id,accounts:s.map(a=>({address:a})),caipNetwork:o}),n.provider&&n.id!==ae.CONNECTOR_ID.AUTH&&n.id!==ae.CONNECTOR_ID.WALLET_CONNECT&&this.listenProviderEvents(n.id,n.provider)}}})),e&&this.emitFirstAvailableConnection()}async setUniversalProvider(e){this.universalProvider=e;const r=ae.CONNECTOR_ID.WALLET_CONNECT;return go.listenWcProvider({universalProvider:e,namespace:ae.CHAIN.EVM,onConnect:n=>this.onConnect(n,r),onDisconnect:()=>this.onDisconnect(r),onAccountsChanged:n=>this.onAccountsChanged(n,r,!1),onChainChanged:n=>this.onChainChanged(n,r)}),this.addConnector(new QT({provider:e,caipNetworks:this.getCaipNetworks(),namespace:ae.CHAIN.EVM})),Promise.resolve()}eip6963EventHandler(e){if(e.detail){const{info:r,provider:n}=e.detail;if(!this.connectors?.find(i=>i.name===r?.name)){const i=ii.ConnectorTypesMap[ae.CONNECTOR_ID.EIP6963],o=r?.rdns||r?.name||r?.uuid;this.namespace&&o&&this.addConnector({id:o,type:i,imageUrl:r?.icon,name:r?.name||"Unknown",provider:n,info:r,chain:this.namespace,chains:[]})}}}listenInjectedConnector(e){if(typeof window<"u"&&e){const r=this.eip6963EventHandler.bind(this);window.addEventListener(cr.EIP6963_ANNOUNCE_EVENT,r),window.dispatchEvent(new Event(cr.EIP6963_REQUEST_EVENT))}}async connect({id:e,address:r,type:n,chainId:s,socialUri:i}){try{const o=this.connectors.find(f=>po.isLowerCaseMatch(f.id,e));if(!o)throw new Error("Connector not found");const a=this.getConnection({address:r,connectorId:e,connections:this.connections,connectors:this.connectors});if(a){const f=a.caipNetwork;if(!f)throw new Error("Ethers5Adapter:connect - could not find the caipNetwork to connect");if(a.account)return this.emit("accountChanged",{address:this.toChecksummedAddress(a.account.address),chainId:f.id,connector:o}),{address:this.toChecksummedAddress(a.account.address),chainId:f.id,provider:o.provider,type:o.type,id:e}}let c=o?.provider;const u=this.ethersProviders[o.id];if(u&&(await u.initialize(),c=await u.getProvider()),!c)throw new Error("Provider not found");o.provider=c;let l=[],d;if(n==="AUTH"){const{address:f,accounts:p}=await Po.authConnectorAuthenticate({authConnector:c,chainNamespace:ae.CHAIN.EVM,chainId:s,socialUri:i,preferredAccountType:ho("eip155")}),g=this.getCaipNetworks().find(h=>h.id.toString()===s?.toString());l=[f],this.addConnection({connectorId:e,accounts:p?p.map(h=>({address:h.address})):l.map(h=>({address:h})),caipNetwork:g,auth:{name:Ae.getConnectedSocialProvider(),username:Ae.getConnectedSocialUsername()}}),this.emit("accountChanged",{address:this.toChecksummedAddress(l[0]),chainId:Number(s),connector:o})}else{l=await c.request({method:"eth_requestAccounts"}),d=await c.request({method:"eth_chainId"});const f=this.getCaipNetworks().find(p=>p.id.toString()===s?.toString());if(d!==s){if(!f)throw new Error("Ethers5Adapter:connect - could not find the caipNetwork to switch");try{await c?.request({method:"wallet_switchEthereumChain",params:[{chainId:cy.numberToHexString(f.id)}]})}catch{throw new Error("Ethers5Adapter:connect - Switch network failed")}}this.emit("accountChanged",{address:this.toChecksummedAddress(l[0]),chainId:Number(s),connector:o}),this.addConnection({connectorId:e,accounts:l.map(p=>({address:p})),caipNetwork:f}),o.id!==ae.CONNECTOR_ID.WALLET_CONNECT&&this.listenProviderEvents(e,c)}return{address:this.toChecksummedAddress(l[0]),chainId:Number(s),provider:c,type:n,id:e}}catch(o){throw yl.isUserRejectedRequestError(o)?new Hy(o):o}}async getAccounts(e){const r=this.connectors.find(o=>o.id===e.id),n=r?.provider;if(!n||!r)throw new Error("Provider not found");const s=this.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});if(s)return{accounts:s.accounts.map(({address:o})=>ke.createAccount(ae.CHAIN.EVM,o,"eoa"))};if(e.id===ae.CONNECTOR_ID.AUTH){const o=r.provider;if(!o.user)return{accounts:[]};const{accounts:a,address:c}=o.user;return Promise.resolve({accounts:(a||[{address:c,type:"eoa"}]).map(u=>ke.createAccount(ae.CHAIN.EVM,u.address,u.type))})}return{accounts:(await n.request({method:"eth_requestAccounts"})).map(o=>ke.createAccount(ae.CHAIN.EVM,o,"eoa"))}}async reconnect(e){const{id:r,chainId:n}=e,s=this.connectors.find(i=>i.id===r);s&&s.type==="AUTH"&&n&&await Po.authConnectorAuthenticate({authConnector:s.provider,chainNamespace:ae.CHAIN.EVM,chainId:n,preferredAccountType:ho("eip155")})}async disconnect(e){if(e.id){const r=this.connectors.find(s=>po.isLowerCaseMatch(s.id,e.id));if(!r)throw new Error("Connector not found");const n=this.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});switch(r.type){case cr.CONNECTOR_TYPE_WALLET_CONNECT:r.provider.session&&r.provider.disconnect();break;case cr.CONNECTOR_TYPE_AUTH:await r.provider?.disconnect();break;case cr.CONNECTOR_TYPE_ANNOUNCED:case cr.CONNECTOR_TYPE_EXTERNAL:await this.revokeProviderPermissions(r.provider);break;default:throw new Error("Unsupported provider type")}return r.id&&(this.removeProviderListeners(r.id),this.deleteConnection(r.id)),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:n?[n]:[]}}return this.disconnectAll()}async getBalance(e){const r=e.address,n=this.getCaipNetworks().find(s=>s.id.toString()===e.chainId?.toString());if(!r)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(n){const s=`${n.caipNetworkId}:${r}`,i=this.balancePromises[s];if(i)return i;const o=Ae.getNativeBalanceCacheForCaipAddress(s);if(o)return{balance:o.balance,symbol:o.symbol};const a=new ese(n.rpcUrls.default.http[0],{chainId:n.id,name:n.name});if(a)try{return this.balancePromises[s]=new Promise(async c=>{try{const u=await a.getBalance(r),l=W9e.formatEther(u);Ae.updateNativeBalanceCache({caipAddress:s,balance:l,symbol:n.nativeCurrency.symbol,timestamp:Date.now()}),c({balance:l,symbol:n.nativeCurrency.symbol})}catch{c({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"}}catch{return{balance:"0.00",symbol:"ETH"}}}return{balance:"0.00",symbol:"ETH"}}async switchNetwork(e){const{caipNetwork:r}=e,n=br.getProviderId(r.chainNamespace),s=br.getProvider(r.chainNamespace);if(n==="AUTH"||n==="WALLET_CONNECT"){await super.switchNetwork(e);return}if(!s)throw new Error("Provider not found");try{await s.request({method:"wallet_switchEthereumChain",params:[{chainId:cy.numberToHexString(r.id)}]})}catch(i){if(i.code===mh.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||i.code===mh.ERROR_INVALID_CHAIN_ID||i.code===mh.ERROR_CODE_DEFAULT||i?.data?.originalError?.code===mh.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)await cy.addEthereumChain(s,r);else if(n==="ANNOUNCED"||n==="EXTERNAL"||n==="INJECTED")throw new Error("Chain is not supported")}}getWalletConnectProvider(){return this.connectors.find(e=>e.type==="WALLET_CONNECT")?.provider}async revokeProviderPermissions(e){try{(await e.request({method:"wallet_getPermissions"})).find(s=>s.parentCapability==="eth_accounts")&&await e.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch(r){console.info("Could not revoke permissions from wallet. Disconnecting...",r)}}async getCapabilities(e){const r=br.getProvider(ae.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){const r=br.getProvider(ae.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){const r=br.getProvider(ae.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_revokePermissions",params:[e]})}async walletGetAssets(e){const r=br.getProvider(ae.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_getAssets",params:[e]})}toChecksummedAddress(e){try{return sn(e.toLowerCase())}catch{return e}}}class $ie{constructor(){this.listeners={accountsChanged:[],chainChanged:[],connect:[],disconnect:[],display_uri:[],message:[]}}on(e,r){this.listeners[e].push(r)}removeListener(e,r){e in this.listeners&&(this.listeners[e]=this.listeners[e].filter(n=>n!==r))}emit(e,r){e in this.listeners&&this.listeners[e].forEach(n=>n(r))}}const nDe="https://api.reown.com/ton/v1/manifest",Va={getTonConnectManifestUrl(){const{metadata:t,projectId:e}=we.state,{st:r,sv:n}=kt.getSdkProperties(),s=t?.url||(typeof window>"u"?"":window.location.origin),i=t?.name||"",o=t?.icons?.[0]||"",a=new URL(nDe);return a.searchParams.set("projectId",e),a.searchParams.set("st",r),a.searchParams.set("sv",n),a.searchParams.set("url",s),a.searchParams.set("name",i),a.searchParams.set("iconUrl",o),a.toString()},async connectInjected(t,e){if(!ke.isClient())return Promise.resolve("");const r=this.getTonConnect(t);if(!r)throw new Error(`TonConnectConnector.connectInjected: Injected wallet "${t}" not available`);const n=this.getTonConnectManifestUrl(),s=this.createConnectRequest(n,e),i=2;try{if(typeof r.restoreConnection=="function"){const o=await r.restoreConnection();if(o?.event==="connect"){const a=o?.payload?.items?.find?.(c=>c?.name==="ton_addr")?.address;if(a)return a}}}catch{}return await new Promise((o,a)=>{let c=!1,u;const d=setTimeout(()=>{if(!c){c=!0;try{u?.()}catch{}a(new Error("TON connect timeout"))}},12e3);function f(g){if(!c){c=!0,clearTimeout(d);try{u?.()}catch{}g()}}function p(g){if(g?.event==="connect"){const h=g?.payload?.items?.find?.(y=>y?.name==="ton_addr")?.address;h&&f(()=>o(h))}else if(g?.event==="connect_error"){const h=g?.payload?.message||"TON connect error";f(()=>a(new Error(h)))}}typeof r.listen=="function"&&(u=r.listen(p));try{const g=typeof r.connect=="function"?r.connect(i,s):void 0;g&&typeof g.then=="function"&&g.then(h=>{if(!c){if(h?.event==="connect"){const y=h?.payload?.items?.find?.(E=>E?.name==="ton_addr")?.address;y&&f(()=>o(y))}else if(h?.event==="connect_error"){const y=h?.payload?.message||"TON connect error";f(()=>a(new Error(y)))}}}).catch(()=>{})}catch(g){f(()=>a(g))}})},createConnectRequest(t,e){const r=[{name:"ton_addr"}];return e&&r.push({name:"ton_proof",payload:e}),{manifestUrl:t,items:r}},normalizeBase64(t){if(typeof t!="string")return;const e=t.length+(4-t.length%4)%4;return t.replace(/-/gu,"+").replace(/_/gu,"/").padEnd(e,"=")},async getInjectedWallets(){const t=await this.fetchWalletsListDTO(),e=new Map;for(const s of t)for(const i of s.bridge??[])i.type==="js"&&e.set(i.key,s);const r=ke.getWindow(),n=[];if(r){let s=[];try{s=Object.entries(r)}catch{s=[]}for(const[i,o]of s)try{const a=o;if(!!!(a&&typeof a=="object"&&a.tonconnect))continue;const u=a?.tonconnect,l=u?.walletInfo,d=e.get(i),f=l?.name||d?.name||i,p=l?.app_name||d?.app_name||f,g=l?.image||d?.image||"",h=l?.about_url||d?.about_url||"",y=l?.tondns||d?.tondns,E=l?.platforms||d?.platforms||[],S=l?.features||d?.features;n.push({name:f,appName:p,imageUrl:g,aboutUrl:h,tondns:y,platforms:E,features:S,jsBridgeKey:i,injected:!0,embedded:!!u?.isWalletBrowser})}catch{}}return n},isWalletInjected(t){const e=ke.getWindow();if(!e)return!1;try{const r=e[t];return!!this.isJSBridgeWithMetadata(r)}catch{return!1}},isInsideWalletBrowser(t){const e=ke.getWindow();if(!e)return!1;try{const r=e[t];return this.isJSBridgeWithMetadata(r)?!!r.tonconnect.isWalletBrowser:!1}catch{return!1}},getCurrentlyInjectedWallets(){const t=ke.getWindow();if(!t)return[];let e=[];try{e=Object.entries(t)}catch{return[]}const r=[];for(const[n,s]of e)try{if(s&&typeof s=="object"&&s.tonconnect&&!this.isJSBridgeWithMetadata(s)||!this.isJSBridgeWithMetadata(s))continue;const i=s.tonconnect.walletInfo;r.push({name:i.name,appName:i.app_name,imageUrl:i.image,aboutUrl:i.about_url,tondns:i.tondns,jsBridgeKey:n,injected:!0,embedded:!!s.tonconnect.isWalletBrowser,platforms:i.platforms,features:i.features})}catch{}return r},async fetchWalletsListDTO(){const t=new Wy({baseUrl:ke.getApiUrl(),clientId:null}),e=Ae.getTonWalletsCache();if(e)return e.wallets.filter(this.isCorrectWalletInfoDTO);const r=await t.get({path:"/ton/v1/wallets",params:pt._getSdkProperties()});return Ae.updateTonWalletsCache(r),r.filter(this.isCorrectWalletInfoDTO)},isCorrectWalletInfoDTO(t){if(!t||typeof t!="object")return!1;const e=t;if(!e.name||!e.app_name||!e.image||!e.about_url||!Array.isArray(e.platforms)||!Array.isArray(e.bridge)||e.bridge.length===0)return!1;for(const r of e.bridge)if(!r||typeof r!="object"||!("type"in r)||r.type==="sse"&&(!("url"in r)||!e.universal_url)||r.type==="js"&&(!("key"in r)||!r.key))return!1;return!0},isJSBridgeWithMetadata(t){try{return!!(t&&typeof t=="object"&&"tonconnect"in t&&t.tonconnect&&typeof t.tonconnect=="object"&&"walletInfo"in t.tonconnect&&t.tonconnect.walletInfo&&typeof t.tonconnect.walletInfo=="object"&&"name"in t.tonconnect.walletInfo&&typeof t.tonconnect.walletInfo.name=="string"&&"app_name"in t.tonconnect.walletInfo&&typeof t.tonconnect.walletInfo.app_name=="string"&&"image"in t.tonconnect.walletInfo&&typeof t.tonconnect.walletInfo.image=="string"&&"about_url"in t.tonconnect.walletInfo&&typeof t.tonconnect.walletInfo.about_url=="string"&&"platforms"in t.tonconnect.walletInfo&&Array.isArray(t.tonconnect.walletInfo.platforms))}catch{return!1}},getWalletFeatures(t){const e=t?.features;return Array.isArray(e)?e:void 0},assertSendTransactionSupported(t,e,r){const n=this.getWalletFeatures(t);if(!n)return;const s=n.includes?.("SendTransaction"),i=n.find?.(o=>o&&typeof o=="object"&&o.name==="SendTransaction");if(!s&&!i)throw new Error("Wallet doesn't support SendTransaction feature.");if(r&&(!i||typeof i=="string"||i.name!=="SendTransaction"||!i.extraCurrencySupported))throw new Error("Wallet is not able to handle such SendTransaction request. Extra currencies support is required.");if(i&&typeof i!="string"&&i.name==="SendTransaction"&&typeof i.maxMessages=="number"&&i.maxMessages<e)throw new Error(`Wallet is not able to handle such SendTransaction request. Max support messages number is ${i.maxMessages}, but ${e} is required.`)},assertSignDataSupported(t,e){const r=this.getWalletFeatures(t);if(!r)return;const n=r.find?.(o=>o&&typeof o=="object"&&o.name==="SignData");if(!n||typeof n=="string"||n.name!=="SignData")throw new Error("Wallet doesn't support SignData feature.");const s=Array.isArray(n.types)?n.types:[],i=e.filter(o=>!s.includes(o));if(i.length)throw new Error(`Wallet doesn't support required SignData types: ${i.join(", ")}.`)},getJSBridgeKey(t){return t?.jsBridgeKey},getTonConnect(t){if(t)return window[t]?.tonconnect}};var DI={exports:{}},sDe=DI.exports,wK;function iDe(){return wK||(wK=1,(function(t){(function(e,r){t.exports?t.exports=r():(e.nacl||(e.nacl={}),e.nacl.util=r())})(sDe,function(){var e={};function r(n){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(n))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(n){if(typeof n!="string")throw new TypeError("expected string");var s,i=unescape(encodeURIComponent(n)),o=new Uint8Array(i.length);for(s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return o},e.encodeUTF8=function(n){var s,i=[];for(s=0;s<n.length;s++)i.push(String.fromCharCode(n[s]));return decodeURIComponent(escape(i.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(n){return Buffer.from(n).toString("base64")},e.decodeBase64=function(n){return r(n),new Uint8Array(Array.prototype.slice.call(Buffer.from(n,"base64"),0))}):(e.encodeBase64=function(n){return new Buffer(n).toString("base64")},e.decodeBase64=function(n){return r(n),new Uint8Array(Array.prototype.slice.call(new Buffer(n,"base64"),0))}):(e.encodeBase64=function(n){var s,i=[],o=n.length;for(s=0;s<o;s++)i.push(String.fromCharCode(n[s]));return btoa(i.join(""))},e.decodeBase64=function(n){r(n);var s,i=atob(n),o=new Uint8Array(i.length);for(s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return o}),e})})(DI)),DI.exports}var oDe=iDe();const aE=xa(oDe);function aDe(t,e){const r=aE.encodeBase64(t);return e?encodeURIComponent(r):r}function cDe(t,e){const r=e?decodeURIComponent(t):t;return aE.decodeBase64(r)}function uDe(t,e=!1){let r;if(t instanceof Uint8Array)r=t;else{const n=typeof t=="string"?t:JSON.stringify(t);r=aE.decodeUTF8(n)}return aDe(r,e)}function lDe(t,e=!1){const r=cDe(t,e);return{toString(){return aE.encodeUTF8(r)},toObject(){try{return JSON.parse(aE.encodeUTF8(r))}catch{return null}},toUint8Array(){return r}}}const qie={encode:uDe,decode:lDe},vK=17,Hie=81,jO=128;function dDe(t,e=!1){const{wc:r,hex:n}=fDe(t);let s=Hie;e&&(s|=jO);const i=new Int8Array(34);i[0]=s,i[1]=r,i.set(n,2);const o=new Uint8Array(36);return o.set(i),o.set(zie(Uint8Array.from(i)),34),qie.encode(o).replace(/\+/gu,"-").replace(/\//gu,"_")}function fDe(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid address (expected "wc:hex"): ${t}`);const r=e[0];if(!r)throw new Error("Missing workchain");const n=parseInt(r,10);if(n!==0&&n!==-1)throw new Error(`Invalid workchain: ${n}`);const s=e[1];if(!s)throw new Error("Missing hex part");const i=s.toLowerCase();if(!/^[0-9a-f]{64}$/u.test(i))throw new Error(`Hex must be 64 chars (32 bytes): ${i}`);return{wc:n,hex:hDe(i)}}const LO={};for(let t=0;t<=255;t+=1){let e=t.toString(16);e.length<2&&(e=`0${e}`),LO[e]=t}function hDe(t){const e=t.toLowerCase(),r=e.length;if(r%2!==0)throw new Error(`Hex string must have length a multiple of 2: ${e}`);const n=r/2,s=new Uint8Array(n);for(let i=0;i<n;i+=1){const o=i*2,a=e.substring(o,o+2);if(!Object.hasOwn(LO,a))throw new Error(`Invalid hex character: ${a}`);const c=LO[a];if(c===void 0)throw new Error(`Invalid hex character: ${a}`);s[i]=c}return s}function zie(t){let r=0;const n=new Uint8Array(t.length+2);n.set(t);for(const s of n){let i=128;for(;i;)r<<=1,s&i&&(r+=1),i>>=1,r>65535&&(r&=65535,r^=4129)}return new Uint8Array([Math.floor(r/256),r%256])}function pDe(t){const e=t.replace(/-/gu,"+").replace(/_/gu,"/");let r;try{r=qie.decode(e).toUint8Array()}catch{throw new Error(`Invalid base64 encoding in address: ${t}`)}if(r.length!==36)throw new Error(`Invalid address length: ${t}`);const n=r.slice(0,34),s=r.slice(34,36),i=zie(n);if(!s.every((f,p)=>f===i[p]))throw new Error(`Invalid checksum in address: ${t}`);const o=n[0];if(o===void 0)throw new Error("Invalid address: missing tag byte");let a=o,c=!1,u=!1;if(a&jO&&(c=!0,a^=jO),a!==vK&&a!==Hie)throw new Error(`Unknown address tag: ${a}`);u=a===vK;let l=null;n[1]===255?l=-1:l=n[1];const d=n.slice(2);if(l!==0&&l!==-1)throw new Error(`Invalid workchain: ${l}`);return{wc:l,hex:Array.from(d).map(f=>f.toString(16).padStart(2,"0")).join(""),testOnly:c,isBounceable:u}}class gDe{constructor({wallet:e,chains:r}){this.chain="ton",this.type="INJECTED",this.eventEmitter=new $ie,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter),this.wallet=e,this.requestedChains=r}request(e){return this.internalRequest(e)}get id(){return this.name}get name(){return this.wallet.name}get imageUrl(){return this.wallet.imageUrl}get chains(){return this.requestedChains}async connect(){if("jsBridgeKey"in this.wallet&&this.wallet.jsBridgeKey){const e=await Va.connectInjected(this.wallet.jsBridgeKey);if(!e)throw new Error("No address available");return this.currentAddress=dDe(e),this.emit("accountsChanged",[this.currentAddress]),this.currentAddress}throw new Error("TON remote connect (bridge) not implemented")}async disconnect(){try{if(!ke.isClient())return;const e=Va.getJSBridgeKey(this.wallet),r=Va.getTonConnect(e);if(!r)return;if(typeof r.disconnect=="function"&&await r.disconnect(),typeof r.send=="function"){const n=String(ke.getUUID());r.send({method:"disconnect",params:[],id:n})}this.clearSession()}catch{}}async signData(e){if(!ke.isClient())return Promise.resolve("");const r=Va.getJSBridgeKey(this.wallet);if(!r)throw new Error("TON signData over bridge not implemented");const n=Va.getTonConnect(r);if(!n||typeof n.send!="function")throw new Error("Injected wallet not available");const s=e||{},{wc:i,hex:o}=pDe(s.from||this.currentAddress||""),a=`${i}:${o}`,c={...s,from:a};let u={};c?.type==="cell"?u={...c,cell:Va.normalizeBase64(c.cell)}:c?.type==="binary"?u={...c,bytes:Va.normalizeBase64(c.bytes)}:u={...c,network:c.network||"-239"};const l=String(u.type||"");if(l==="text"||l==="binary"||l==="cell")try{Va.assertSignDataSupported(this.wallet,[l])}catch(f){const p=f instanceof Error?f.message:`Wallet does not support SignData type: ${l}`;throw new Error(p)}const d=await n.send({method:"signData",params:[JSON.stringify(u)],id:ke.getUUID()});return d?.signature||d?.result?.signature||""}async sendMessage(e){if(!ke.isClient())return Promise.resolve("");if(!("jsBridgeKey"in this.wallet)||!this.wallet.jsBridgeKey)throw new Error("TON sendMessage over bridge not implemented");const r=Va.getTonConnect(this.wallet.jsBridgeKey);if(!r||typeof r.send!="function")throw new Error(`TonConnectConnector.sendMessage: Injected wallet "${this.wallet.jsBridgeKey}" not available`);const n=e||{},s=(n.messages||[]).map((p,g)=>{const h=String(p?.amount??"");if(!/^[0-9]+$/u.test(h))throw new Error(`messages[${g}].amount must be a string of digits`);if(!p?.address)throw new Error(`messages[${g}].address is required (user-friendly)`);return{address:p.address,amount:h,payload:Va.normalizeBase64(p.payload),stateInit:Va.normalizeBase64(p.stateInit),extra_currency:p.extraCurrency}});if(s.length===0)throw new Error("messages must contain at least 1 item");const i=(n.messages||[]).some(p=>p?.extraCurrency&&Object.keys(p.extraCurrency).length>0);try{Va.assertSendTransactionSupported(this.wallet,s.length,i)}catch(p){const g=p instanceof Error?p.message:"Wallet does not support SendTransaction";throw new Error(g)}const o=this,a=n.from??o.account?.address??void 0,c=n.network??o.account?.chain??void 0,u={valid_until:n.validUntil??Math.floor(Date.now()/1e3)+60,network:c,from:a,messages:(n.messages||[]).map(p=>({address:p.address,amount:String(p.amount??"0")}))},l={method:"sendTransaction",params:[JSON.stringify(u)],id:ke.getUUID()},d=await r.send(l);if(d?.error)throw new Error(d.error.message||`sendTransaction failed (code ${d.error.code})`);const f=d?.result??d?.boc;if(!f)throw new Error("No boc in response");return f}async switchNetwork(){return Promise.resolve()}clearSession(){this.currentAddress=void 0}}class EK extends QT{constructor({provider:e,chains:r}){super({provider:e,caipNetworks:r,namespace:ae.CHAIN.TON}),this.chain=ae.CHAIN.TON,this.eventEmitter=new $ie,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter)}get imageUrl(){}get info(){}get chainsList(){return this.chains}get chains(){return this.sessionChains.map(e=>this.caipNetworks.find(r=>r.caipNetworkId===e)).filter(Boolean)}async connect(){return Promise.reject(new Error("Connection of WalletConnectProvider should be done via UniversalAdapter"))}async signData(e){const r=J.getCaipNetworkByNamespace(ae.CHAIN.TON);if(!r)throw new Error("Chain not found");const n={method:"ton_signData",params:[e]},s=await this.provider.request(n,r.caipNetworkId);return s?.signature||s?.result?.signature||""}async sendMessage(e){const r=J.getCaipNetworkByNamespace(ae.CHAIN.TON);if(!r)throw new Error("Chain not found");const n={method:"ton_sendMessage",params:[e]},s=await this.provider.request(n,r.caipNetworkId);return s?.boc||s?.result||""}async switchNetwork(){return Promise.resolve()}request(e){return this.internalRequest(e)}setDefaultChain(e){this.provider.setDefaultChain(e)}get sessionChains(){return go.getChainsFromNamespaces(this.provider.session?.namespaces)}}class mDe extends XT{constructor(e){super({namespace:ae.CHAIN.TON,adapterType:ae.ADAPTER_TYPES.TON,...e}),this.universalProvider=void 0}async syncConnectors(){const e=await Va.getInjectedWallets(),r=J.getCaipNetworks();e.forEach(n=>this.addConnector(new gDe({wallet:n,chains:r})))}async connect(e){const r=this.connectors.find(o=>o.id===e.id);if(!r)throw new Error("Connector not found");const n=r.chains.find(o=>o.id===e.chainId)||r.chains[0];if(!n)throw new Error("The connector does not support any of the requested chains");const s=this.getConnection({address:e.address,connectorId:r.id,connections:this.connections,connectors:this.connectors});if(s?.account)return this.emit("accountChanged",{address:s.account.address,chainId:s.caipNetwork?.id,connector:r}),{id:r.id,type:r.type,address:s.account.address,chainId:n.id,provider:r};const i=await r.connect().catch(o=>{throw new Hy(o)});return this.emit("accountChanged",{address:i,chainId:n.id,connector:r}),this.addConnection({connectorId:r.id,accounts:[{address:i,type:"eoa"}],caipNetwork:n}),r.id!==ae.CONNECTOR_ID.WALLET_CONNECT&&this.listenProviderEvents(r.id,r),{id:r.id,type:r.type,address:i,chainId:n.id,provider:r}}getActiveConnector(){return this.connector}async getAccounts(){return Promise.resolve({accounts:[]})}async signMessage(){return Promise.resolve({signature:""})}async sendTransaction(){return Promise.resolve({hash:""})}async disconnect(e){if(e?.id){const r=this.connectors.find(s=>s.id===e.id);if(!r)throw new Error("TonAdapter:disconnect - connector not found");const n=this.getConnection({connectorId:r.id,connections:this.connections,connectors:this.connectors});try{await r.disconnect()}catch(s){console.error("TonAdapter:disconnect - error",s)}return this.removeProviderListeners(r.id),this.deleteConnection(r.id),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:n?[n]:[]}}return this.disconnectAll()}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async r=>{const n=this.connectors.find(s=>po.isLowerCaseMatch(s.id,r.connectorId));if(!n)throw new Error("Connector not found");return await this.disconnect({id:n.id}),r}))}}async switchNetwork(e){const r=br.getProviderId(e.caipNetwork.chainNamespace),n=br.getProvider(e.caipNetwork.chainNamespace);if(r==="WALLET_CONNECT"||r==="AUTH")return await super.switchNetwork(e);if(!n)throw new Error("Provider not found");return await n.switchNetwork(e.caipNetwork.caipNetworkId)}async setUniversalProvider(e){this.universalProvider=e;const r=ae.CONNECTOR_ID.WALLET_CONNECT;return go.listenWcProvider({universalProvider:e,namespace:ae.CHAIN.TON,onConnect:n=>this.onConnect(n,r),onDisconnect:()=>this.onDisconnect(r),onAccountsChanged:n=>super.onAccountsChanged(n,r,!1)}),this.addConnector(new EK({provider:e,chains:J.getCaipNetworks()})),Promise.resolve()}async getBalance(e){const r=e.caipNetwork?.caipNetworkId,n=e.address;if(!n||!r)return{balance:"0",symbol:"TON"};const s=await kt.getAddressBalance({caipNetworkId:r,address:n});return{balance:zY.bigNumber(s).div(10**9).toString(),symbol:"TON"}}parseUnits(){return BigInt(0)}formatUnits(){return""}async syncConnections({connectToFirstConnector:e,caipNetwork:r}){await Promise.all(this.connectors.filter(n=>{const{hasDisconnected:s,hasConnected:i}=po.getConnectorStorageInfo(n.id,this.namespace);return!s&&i}).map(async n=>{if(n.id===ae.CONNECTOR_ID.WALLET_CONNECT){const s=go.getWalletConnectAccounts(this.universalProvider,this.namespace);s.length>0&&this.addConnection({connectorId:n.id,accounts:s.map(i=>({address:i.address})),caipNetwork:r})}else{const s=await n.connect({});s&&(this.addConnection({connectorId:n.id,accounts:[{address:s}],caipNetwork:r}),this.listenProviderEvents(n.id,n))}})),e&&this.emitFirstAvailableConnection()}async syncConnection(e){const r=this.connectors.find(n=>n.id===e.id);return r?this.connect({id:r.id,chainId:e.chainId,type:r.type}):{id:"",address:"",chainId:"",provider:void 0,type:"EXTERNAL"}}async estimateGas(e){return Promise.resolve({gas:BigInt(0)})}async writeContract(e){return Promise.resolve({hash:""})}async grantPermissions(e){return Promise.resolve({})}async getCapabilities(e){return Promise.resolve({})}async revokePermissions(e){return Promise.resolve("0x0000000000000000000000000000000000000000")}async walletGetAssets(e){return Promise.resolve({})}getWalletConnectProvider(e){return new EK({provider:e.provider,chains:e.caipNetworks})}}const E9=new rDe,Wie=new pOe,Vie=new mDe,yDe="a5498791a3ace64d6c1fb542a5a659bf",bDe={name:"zEnvelope",description:"zEnvelope App",url:"https://zenvelope.app",icons:["https://avatars.githubusercontent.com/u/179229932"]};console.log("Initializing AppKit with adapters:",{ethersAdapter:E9,solanaWeb3JsAdapter:Wie,tonAdapter:Vie});const Jp=j3e({adapters:[E9,Wie,Vie],networks:[R8e,B8e,P8e,k8e,O8e,qk,Ore,Rre,U8e,M8e],metadata:bDe,projectId:yDe,features:{analytics:!0,email:!1,socials:[]}}),wDe=Object.freeze(Object.defineProperty({__proto__:null,ethersAdapter:E9,modal:Jp},Symbol.toStringTag,{value:"Module"})),oT={},_9=t=>typeof t=="object"&&t!==null,vDe=t=>_9(t)&&!N_.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),Gie=(t,e)=>{const r=FO.get(t);if(r?.[0]===e)return r[1];const n=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return GI(n,!0),FO.set(t,[e,n]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(n,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(N_.has(i))GI(i,!1);else if(Bh.has(i)){const[c,u]=Bh.get(i);a.value=Gie(c,u())}Object.defineProperty(n,s,a)}),Object.preventExtensions(n)},EDe=(t,e,r,n)=>({deleteProperty(s,i){const o=Reflect.get(s,i);r(i);const a=Reflect.deleteProperty(s,i);return a&&n(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),u=Reflect.get(s,i,a);if(c&&(_K(u,o)||cE.has(o)&&_K(u,cE.get(o))))return!0;r(i),_9(o)&&(o=jY(o)||o);const l=!Bh.has(o)&&ADe(o)?jn(o):o;return e(i,l),Reflect.set(s,i,l,a),n(["set",[i],o,u]),!0}}),Bh=new WeakMap,N_=new WeakSet,FO=new WeakMap,_1=[1,1],cE=new WeakMap;let _K=Object.is,_De=(t,e)=>new Proxy(t,e),ADe=vDe,xDe=Gie,CDe=EDe;function jn(t={}){if(!_9(t))throw new Error("object required");const e=cE.get(t);if(e)return e;let r=_1[0];const n=new Set,s=(y,E=++_1[0])=>{r!==E&&(r=E,n.forEach(S=>S(y,E)))};let i=_1[1];const o=(y=++_1[1])=>(i!==y&&!n.size&&(i=y,c.forEach(([E])=>{const S=E[1](y);S>r&&(r=S)})),r),a=y=>(E,S)=>{const C=[...E];C[1]=[y,...C[1]],s(C,S)},c=new Map,u=(y,E)=>{const S=!N_.has(E)&&Bh.get(E);if(S){if((oT?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(n.size){const C=S[2](a(y));c.set(y,[S,C])}else c.set(y,[S])}},l=y=>{var E;const S=c.get(y);S&&(c.delete(y),(E=S[1])==null||E.call(S))},d=y=>(n.add(y),n.size===1&&c.forEach(([S,C],_)=>{if((oT?"production":void 0)!=="production"&&C)throw new Error("remove already exists");const T=S[2](a(_));c.set(_,[S,T])}),()=>{n.delete(y),n.size===0&&c.forEach(([S,C],_)=>{C&&(C(),c.set(_,[S]))})});let f=!0;const p=CDe(()=>f,u,l,s),g=_De(t,p);cE.set(t,g);const h=[t,o,d];return Bh.set(g,h),Reflect.ownKeys(t).forEach(y=>{const E=Object.getOwnPropertyDescriptor(t,y);"value"in E&&E.writable&&(g[y]=t[y])}),f=!1,g}function Ui(t,e,r){const n=Bh.get(t);(oT?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let s;const i=[],o=n[2];let a=!1;const u=o(l=>{i.push(l),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,u()}}function uE(t){const e=Bh.get(t);(oT?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[r,n]=e;return xDe(r,n())}function D0(t){return N_.add(t),t}function SDe(){return{proxyStateMap:Bh,refSet:N_,snapCache:FO,versionHolder:_1,proxyCache:cE}}function bo(t,e,r,n){let s=t[e];return Ui(t,()=>{const i=t[e];Object.is(s,i)||r(s=i)})}const{proxyStateMap:IDe,snapCache:TDe}=SDe(),KS=t=>IDe.has(t);function NDe(t){const e=[];let r=0;const n=new Map,s=new WeakMap,i=()=>{const u=TDe.get(a),l=u?.[1];if(l&&!s.has(l)){const d=new Map(n);s.set(l,d)}},o=u=>s.get(u)||n,a={data:e,index:r,epoch:0,get size(){return KS(this)||i(),o(this).size},get(u){const d=o(this).get(u);if(d===void 0){this.epoch;return}return this.data[d]},has(u){const l=o(this);return this.epoch,l.has(u)},set(u,l){if(!KS(this))throw new Error("Cannot perform mutations on a snapshot");const d=n.get(u);return d===void 0?(n.set(u,this.index),this.data[this.index++]=l):this.data[d]=l,this.epoch++,this},delete(u){if(!KS(this))throw new Error("Cannot perform mutations on a snapshot");const l=n.get(u);return l===void 0?!1:(delete this.data[l],n.delete(u),this.epoch++,!0)},clear(){if(!KS(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,n.clear()},forEach(u){this.epoch,o(this).forEach((d,f)=>{u(this.data[d],f,this)})},*entries(){this.epoch;const u=o(this);for(const[l,d]of u)yield[l,this.data[d]]},*keys(){this.epoch;const u=o(this);for(const l of u.keys())yield l},*values(){this.epoch;const u=o(this);for(const l of u.values())yield this.data[l]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=jn(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var AK={};const _e={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof AK<"u"?AK.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},Kie={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return t?.filter(r=>r.chainNamespace===e)||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){if(!e)return;const r=t.find(s=>s.caipNetworkId===e);if(r)return r.name;const[n]=e.split(":");return _e.CHAIN_NAME_MAP?.[n]||void 0}},Zie=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"],PDe={bigNumber(t){return t?new co(t):new co(0)},multiply(t,e){if(t===void 0||e===void 0)return new co(0);const r=new co(t),n=new co(e);return r.times(n)},toFixed(t,e=2){return t===void 0||t===""?new co(0).toFixed(e):new co(t).toFixed(e)},formatNumberToLocalString(t,e=2){return t===void 0||t===""?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"})},parseLocalStringToNumber(t){if(t===void 0||t==="")return 0;const e=t.replace(/,/gu,"");return new co(e).toNumber()}},RDe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],ODe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],kDe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],BDe={getERC20Abi:t=>_e.USDT_CONTRACT_ADDRESSES.includes(t)?kDe:RDe,getSwapAbi:()=>ODe},ya={validateCaipAddress(t){if(t.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,s]=e;if(!r||!n||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},Ot={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails"};function bR(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const xt={setItem(t,e){Gm()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Gm())return localStorage.getItem(t)||void 0},removeItem(t){Gm()&&localStorage.removeItem(t)},clear(){Gm()&&localStorage.clear()}};function Gm(){return typeof window<"u"&&typeof localStorage<"u"}function Gd(t,e){return e==="light"?{"--w3m-accent":t?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":t?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var xK={};const wR=(typeof process<"u"&&typeof xK<"u"?xK.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",Yie=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],UDe="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Sr={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:wR,SECURE_SITE_DASHBOARD:`${wR}/dashboard`,SECURE_SITE_FAVICON:`${wR}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[_e.CHAIN.EVM,_e.CHAIN.SOLANA],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[_e.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[_e.CHAIN.EVM,_e.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[_e.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[_e.CHAIN.EVM,_e.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},Pe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Pe.getActiveNamespace(),e=Pe.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{xt.setItem(Ot.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=xt.getItem(Ot.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{xt.removeItem(Ot.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{xt.setItem(Ot.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{xt.setItem(Ot.ACTIVE_CAIP_NETWORK_ID,t),Pe.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return xt.getItem(Ot.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{xt.removeItem(Ot.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=bR(t);xt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Pe.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),xt.setItem(Ot.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=xt.getItem(Ot.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const r=bR(t);xt.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return xt.getItem(Ot.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=bR(t);return xt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{xt.setItem(Ot.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return xt.getItem(Ot.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{xt.removeItem(Ot.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return xt.getItem(Ot.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return xt.getItem(Ot.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(t){try{xt.setItem(Ot.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return xt.getItem(Ot.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=xt.getItem(Ot.CONNECTED_NAMESPACES);return t?.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));xt.setItem(Ot.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Pe.getConnectedNamespaces();e.includes(t)||(e.push(t),Pe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Pe.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),Pe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return xt.getItem(Ot.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{xt.setItem(Ot.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{xt.removeItem(Ot.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=xt.getItem(Ot.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Pe.getBalanceCache();xt.setItem(Ot.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=Pe.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;Pe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Pe.getBalanceCache();e[t.caipAddress]=t,xt.setItem(Ot.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=xt.getItem(Ot.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Pe.getBalanceCache();xt.setItem(Ot.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=Pe.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),Pe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Pe.getNativeBalanceCache();e[t.caipAddress]=t,xt.setItem(Ot.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=xt.getItem(Ot.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=Pe.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;Pe.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Pe.getEnsCache();e[t.address]=t,xt.setItem(Ot.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Pe.getEnsCache();xt.setItem(Ot.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=xt.getItem(Ot.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=Pe.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;Pe.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Pe.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},xt.setItem(Ot.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Pe.getIdentityCache();xt.setItem(Ot.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{xt.removeItem(Ot.PORTFOLIO_CACHE),xt.removeItem(Ot.NATIVE_BALANCE_CACHE),xt.removeItem(Ot.ENS_CACHE),xt.removeItem(Ot.IDENTITY_CACHE),xt.removeItem(Ot.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{xt.setItem(Ot.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=xt.getItem(Ot.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const r=Pe.getConnections(),n=r[e]??[],s=new Map;for(const o of n)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===_e.CONNECTOR_ID.AUTH;if(a&&!c){const u=new Set(a.accounts.map(d=>d.address.toLowerCase())),l=o.accounts.filter(d=>!u.has(d.address.toLowerCase()));a.accounts.push(...l)}else s.set(o.connectorId,{...o})}const i={...r,[e]:Array.from(s.values())};xt.setItem(Ot.CONNECTIONS,JSON.stringify(i))}catch(r){console.error("Unable to sync connections to storage",r)}},getConnections(){try{const t=xt.getItem(Ot.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:r}){try{const n=Pe.getConnections(),s=n[r]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),xt.setItem(Ot.CONNECTIONS,JSON.stringify({...n,[r]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${r}"`)}},getDisconnectedConnectorIds(){try{const t=xt.getItem(Ot.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const r=Pe.getDisconnectedConnectorIds(),n=r[e]??[];n.push(t),xt.setItem(Ot.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...r,[e]:Array.from(new Set(n))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const r=Pe.getDisconnectedConnectorIds();let n=r[e]??[];n=n.filter(s=>s.toLowerCase()!==t.toLowerCase()),xt.setItem(Ot.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...r,[e]:Array.from(new Set(n))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(Pe.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=xt.getItem(Ot.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){try{const n=Pe.getTransactionsCache()[t]?.[e];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.transactionsHistory))return n.transactions;Pe.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:r,transactions:n}){try{const s=Pe.getTransactionsCache();s[t]={...s[t],[e]:{timestamp:r,transactions:n}},xt.setItem(Ot.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:r,transactions:n})}},removeTransactionsCache({address:t,chainId:e}){try{const r=Pe.getTransactionsCache(),n=r?.[t]||{},{[e]:s,...i}=n;xt.setItem(Ot.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...r,[t]:i}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=xt.getItem(Ot.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const r=Pe.getTokenPriceCache()[t.join(",")];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.tokenPrice))return r.tokenPrice;Pe.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=Pe.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},xt.setItem(Ot.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=Pe.getTokenPriceCache();xt.setItem(Ot.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}}},gt={isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return gt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Sr.TEN_SEC_MS:!0},isAllowedRetry(t,e=Sr.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(gt.isClient()&&window.self!==window.top)try{const t=window?.location?.ancestorOrigins?.[0],e="https://app.safe.global";if(t){const r=new URL(t),n=new URL(e);return r.hostname===n.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Sr.FOUR_MINUTES_MS},getNetworkId(t){return t?.split(":")[1]},getPlainAddress(t){return t?.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function s(){t(...n)}r&&clearTimeout(r),r=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,r=null){if(gt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let n=t,s=r;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),s&&!s?.endsWith("/")&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${n}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:n}},formatUniversalUrl(t,e){if(!gt.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Pe.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window?.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window?.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;const t=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,e=window?.navigator?.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((r,n)=>{const s=new Image;s.onload=r,s.onerror=n,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,gt.wait(2e3)])},formatBalance(t,e){let r="0.000";if(typeof t=="string"){const n=Number(t);if(n){const s=Math.floor(n*1e3)/1e3;s&&(r=s.toString())}}return`${r}${e?` ${e}`:""}`},getApiUrl(){return _e.W3M_API_URL},getBlockchainApiUrl(){return _e.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return _e.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){return typeof t=="string"?t:typeof t?.issues?.[0]?.message=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,s)=>{r[n]=s}),e.sort((n,s)=>{const i=r[n.id],o=r[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const s=n[e];return r.has(s)?!1:(r.add(s),!0)})},generateSdkVersion(t,e,r){const s=t.length===0?Sr.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${r}`},createAccount(t,e,r,n,s){return{namespace:t,address:e,type:r,publicKey:n,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in _e.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window?.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window?.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),r,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",n),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,n+i),c=t.substring(n+i,o),u=t.substring(s),l=c+r;return a+l+u}};async function n1(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class P_{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...s}){const i=this.createUrl(s);return(await n1(i,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const s=this.createUrl(n);return(await n1(s,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await n1(i,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await n1(i,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await n1(i,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([s,i])=>{i&&n.searchParams.append(s,i)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}}const MDe={getFeatureValue(t,e){const r=e?.[t];return r===void 0?Sr.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(gt.isTelegram()){if(gt.isIos())return t.filter(e=>e!=="google");if(gt.isMac())return t.filter(e=>e!=="x");if(gt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},vt=jn({features:Sr.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Sr.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),Ce={state:vt,subscribeKey(t,e){return bo(vt,t,e)},setOptions(t){Object.assign(vt,t)},setRemoteFeatures(t){if(!t)return;const e={...vt.remoteFeatures,...t};vt.remoteFeatures=e,vt.remoteFeatures?.socials&&(vt.remoteFeatures.socials=MDe.filterSocialsByPlatform(vt.remoteFeatures.socials)),vt.features?.pay&&(vt.remoteFeatures.email=!1,vt.remoteFeatures.socials=!1)},setFeatures(t){if(!t)return;vt.features||(vt.features=Sr.DEFAULT_FEATURES);const e={...vt.features,...t};vt.features=e,vt.features?.pay&&vt.remoteFeatures&&(vt.remoteFeatures.email=!1,vt.remoteFeatures.socials=!1)},setProjectId(t){vt.projectId=t},setCustomRpcUrls(t){vt.customRpcUrls=t},setAllWallets(t){vt.allWallets=t},setIncludeWalletIds(t){vt.includeWalletIds=t},setExcludeWalletIds(t){vt.excludeWalletIds=t},setFeaturedWalletIds(t){vt.featuredWalletIds=t},setTokens(t){vt.tokens=t},setTermsConditionsUrl(t){vt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){vt.privacyPolicyUrl=t},setCustomWallets(t){vt.customWallets=t},setIsSiweEnabled(t){vt.isSiweEnabled=t},setIsUniversalProvider(t){vt.isUniversalProvider=t},setSdkVersion(t){vt.sdkVersion=t},setMetadata(t){vt.metadata=t},setDisableAppend(t){vt.disableAppend=t},setEIP6963Enabled(t){vt.enableEIP6963=t},setDebug(t){vt.debug=t},setEnableWalletConnect(t){vt.enableWalletConnect=t},setEnableWalletGuide(t){vt.enableWalletGuide=t},setEnableAuthLogger(t){vt.enableAuthLogger=t},setEnableWallets(t){vt.enableWallets=t},setPreferUniversalLinks(t){vt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,r]of Object.entries(Sr.SIWX_DEFAULTS))t[e]??=r;vt.siwx=t},setConnectMethodsOrder(t){vt.features={...vt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){vt.features={...vt.features,walletFeaturesOrder:t}},setSocialsOrder(t){vt.remoteFeatures={...vt.remoteFeatures,socials:t}},setCollapseWallets(t){vt.features={...vt.features,collapseWallets:t}},setEnableEmbedded(t){vt.enableEmbedded=t},setAllowUnsupportedChain(t){vt.allowUnsupportedChain=t},setManualWCControl(t){vt.manualWCControl=t},setEnableNetworkSwitch(t){vt.enableNetworkSwitch=t},setEnableReconnect(t){vt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(vt.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){vt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return vt.universalProviderConfigOverride},getSnapshot(){return uE(vt)}},DDe=Object.freeze({enabled:!0,events:[]}),jDe=new P_({baseUrl:gt.getAnalyticsUrl(),clientId:null}),LDe=5,FDe=60*1e3,Wf=jn({...DDe}),$De={state:Wf,subscribeKey(t,e){return bo(Wf,t,e)},async sendError(t,e){if(!Wf.enabled)return;const r=Date.now();if(Wf.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return r-o<FDe}).length>=LDe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Wf.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=Ce.state;await jDe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:gt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Wf.enabled=!0},disable(){Wf.enabled=!1},clearEvents(){Wf.events=[]}};class Uy extends Error{constructor(e,r,n){super(e),this.name="AppKitError",this.category=r,this.originalError=n,Object.setPrototypeOf(this,Uy.prototype);let s=!1;if(n instanceof Error&&typeof n.stack=="string"&&n.stack){const i=n.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Uy):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function CK(t,e){let r="";try{t instanceof Error?r=t.message:typeof t=="string"?r=t:typeof t=="object"&&t!==null?r=JSON.stringify(t):r=String(t)}catch(s){r="Unknown error",console.error("Error parsing error message",s)}const n=t instanceof Uy?t:new Uy(r,e,t);throw $De.sendError(n,n.category),n}function mc(t,e="INTERNAL_SDK_ERROR"){const r={};return Object.keys(t).forEach(n=>{const s=t[n];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return CK(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return CK(a,e)}},r[n]=i}else r[n]=s}),r}var My={};const qDe="https://secure.walletconnect.org/sdk",HDe=(typeof process<"u"&&typeof My<"u"?My.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||qDe,zDe=(typeof process<"u"&&typeof My<"u"?My.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",WDe=(typeof process<"u"&&typeof My<"u"?My.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",ut={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Zs={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},To={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},VDe={handleMobileDeeplinkRedirect(t,e){const r=window.location.href,n=encodeURIComponent(r);if(t===To.PHANTOM.id&&!("phantom"in window)){const s=r.startsWith("https")?"https":"http",i=r.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${To.PHANTOM.url}/ul/browse/${n}?ref=${o}`}if(t===To.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${To.SOLFLARE.url}/ul/v1/browse/${n}?ref=${n}`),e===_e.CHAIN.SOLANA&&t===To.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${To.COINBASE.url}/dapp?cb_url=${n}`),e===_e.CHAIN.BITCOIN&&t===To.BINANCE.id&&!("binancew3w"in window)){const s=ee.state.activeCaipNetwork,i=window.btoa("/pages/browser/index"),o=window.btoa(`url=${n}&defaultChainId=${s?.id??1}`),a=new URL(To.BINANCE.deeplink);a.searchParams.set("appId",To.BINANCE.appId),a.searchParams.set("startPagePath",i),a.searchParams.set("startPageQuery",o);const c=new URL(To.BINANCE.url);c.searchParams.set("_dp",window.btoa(a.toString())),window.location.href=c.toString()}}},za=jn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),GDe={state:za,subscribeNetworkImages(t){return Ui(za.networkImages,()=>t(za.networkImages))},subscribeKey(t,e){return bo(za,t,e)},subscribe(t){return Ui(za,()=>t(za))},setWalletImage(t,e){za.walletImages[t]=e},setNetworkImage(t,e){za.networkImages[t]=e},setChainImage(t,e){za.chainImages[t]=e},setConnectorImage(t,e){za.connectorImages={...za.connectorImages,[t]:e}},setTokenImage(t,e){za.tokenImages[t]=e},setCurrencyImage(t,e){za.currencyImages[t]=e}},xu=mc(GDe),KDe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:""},vR=jn({networkImagePromises:{}}),Jie={async fetchWalletImage(t){if(t)return await Nt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(vR.networkImagePromises[t]||(vR.networkImagePromises[t]=Nt._fetchNetworkImage(t)),await vR.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return xu.state.walletImages[t]},getWalletImage(t){if(t?.image_url)return t?.image_url;if(t?.image_id)return xu.state.walletImages[t.image_id]},getNetworkImage(t){if(t?.assets?.imageUrl)return t?.assets?.imageUrl;if(t?.assets?.imageId)return xu.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return xu.state.networkImages[t]},getConnectorImage(t){if(t?.imageUrl)return t.imageUrl;if(t?.info?.icon)return t.info.icon;if(t?.imageId)return xu.state.connectorImages[t.imageId]},getChainImage(t){return xu.state.networkImages[KDe[t]]}},Vf=jn({message:"",variant:"info",open:!1}),ZDe={state:Vf,subscribeKey(t,e){return bo(Vf,t,e)},open(t,e){const{debug:r}=Ce.state,{code:n,displayMessage:s,debugMessage:i}=t;s&&r&&(Vf.message=s,Vf.variant=e,Vf.open=!0),i&&console.error(typeof i=="function"?i():i,n?{code:n}:void 0)},close(){Vf.open=!1,Vf.message="",Vf.variant="info"}},Hs=mc(ZDe),YDe=gt.getAnalyticsUrl(),JDe=new P_({baseUrl:YDe,clientId:null}),XDe=["MODAL_CREATED"],xd=jn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Or={state:xd,subscribe(t){return Ui(xd,()=>t(xd))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=Ce.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{let e=lt.state.address;if("address"in t.data&&t.data.address&&(e=t.data.address),XDe.includes(t.data.event)||typeof window>"u")return;const r=ee.getActiveCaipNetwork()?.caipNetworkId;await JDe.post({path:"/e",params:Or.getSdkProperties(),body:{eventId:gt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e,properties:{..."properties"in t.data?t.data.properties:{},caipNetworkId:r}}}}),xd.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===_e.HTTP_STATUS_CODES.FORBIDDEN&&!xd.reportedErrors.FORBIDDEN&&(Hs.open({displayMessage:"Invalid App Configuration",debugMessage:`Origin ${Gm()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),xd.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){xd.timestamp=Date.now(),xd.data=t;const e=["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"];(Ce.state.features?.analytics||e.includes(t.event))&&Or._sendAnalyticsEvent(xd)}},QDe=gt.getApiUrl(),Xo=new P_({baseUrl:QDe,clientId:null}),eje=40,SK=4,tje=20,Yt=jn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Nt={state:Yt,subscribeKey(t,e){return bo(Yt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=Ce.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return Ce.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Xo.baseUrl}/getWalletImage/${t}`,r=await Xo.getBlob({path:e,params:Nt._getSdkProperties()});xu.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${Xo.baseUrl}/public/getAssetImage/${t}`,r=await Xo.getBlob({path:e,params:Nt._getSdkProperties()});xu.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${Xo.baseUrl}/public/getAssetImage/${t}`,r=await Xo.getBlob({path:e,params:Nt._getSdkProperties()});xu.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${Xo.baseUrl}/public/getCurrencyImage/${t}`,r=await Xo.getBlob({path:e,params:Nt._getSdkProperties()});xu.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${Xo.baseUrl}/public/getTokenImage/${t}`,r=await Xo.getBlob({path:e,params:Nt._getSdkProperties()});xu.setTokenImage(t,URL.createObjectURL(r))},_filterWalletsByPlatform(t){return gt.isMobile()?t?.filter(r=>r.mobile_link||r.id===To.COINBASE.id||r.id===To.BINANCE.id?!0:ee.state.activeChain==="solana"&&(r.id===To.SOLFLARE.id||r.id===To.PHANTOM.id)):t},async fetchProjectConfig(){return(await Xo.get({path:"/appkit/v1/config",params:Nt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Xo.get({path:"/projects/v1/origins",params:Nt._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===_e.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=_e.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const e=ee.getAllRequestedCaipNetworks()?.map(({assets:r})=>r?.imageId).filter(Boolean).filter(r=>!Jie.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>Nt._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=qe.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>Nt._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Nt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Nt._fetchTokenImage(e)))},async fetchWallets(t){const e=t.exclude??[];Nt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(To).map(i=>i.id));const n=await Xo.get({path:"/getWallets",params:{...Nt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:t.include?.join(","),exclude:e.join(",")}});return{data:Nt._filterWalletsByPlatform(n?.data)||[],count:n?.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=Ce.state;if(t?.length){const e={...Nt._getSdkProperties(),page:1,entries:t?.length??SK,include:t},{data:r}=await Nt.fetchWallets(e),n=[...r].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=n.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Nt._fetchWalletImage(i))),Yt.featured=n,Yt.allFeatured=n}},async fetchRecommendedWallets(){try{Yt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=Ce.state,n=[...e??[],...r??[]].filter(Boolean),s=ee.getRequestedCaipNetworkIds().join(","),i={page:1,entries:SK,include:t,exclude:n,chains:s},{data:o,count:a}=await Nt.fetchWallets(i),c=Pe.getRecentWallets(),u=o.map(d=>d.image_id).filter(Boolean),l=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...u,...l].map(d=>Nt._fetchWalletImage(d))),Yt.recommended=o,Yt.allRecommended=o,Yt.count=a??0}catch{}finally{Yt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=Ce.state,s=ee.getRequestedCaipNetworkIds().join(","),i=[...Yt.recommended.map(({id:l})=>l),...r??[],...n??[]].filter(Boolean),o={page:t,entries:eje,include:e,exclude:i,chains:s},{data:a,count:c}=await Nt.fetchWallets(o),u=a.slice(0,tje).map(l=>l.image_id).filter(Boolean);await Promise.allSettled(u.map(l=>Nt._fetchWalletImage(l))),Yt.wallets=gt.uniqueBy([...Yt.wallets,...Nt._filterOutExtensions(a)],"id").filter(l=>l.chains?.some(d=>s.includes(d))),Yt.count=c>Yt.count?c:Yt.count,Yt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:r}=await Nt.fetchWallets(e);r&&r.forEach(n=>{Yt.excludedWallets.push({rdns:n.rdns,name:n.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=Ce.state,s=ee.getRequestedCaipNetworkIds().join(",");Yt.search=[];const i={page:1,entries:100,search:t?.trim(),badge_type:e,include:r,exclude:n,chains:s},{data:o}=await Nt.fetchWallets(i);Or.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Nt._fetchWalletImage(c)),gt.wait(300)]),Yt.search=Nt._filterOutExtensions(o)},initPromise(t,e){const r=Yt.promises[t];return r||(Yt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0}={}){const s=[t&&Nt.initPromise("connectorImages",Nt.fetchConnectorImages),e&&Nt.initPromise("featuredWallets",Nt.fetchFeaturedWallets),r&&Nt.initPromise("recommendedWallets",Nt.fetchRecommendedWallets),n&&Nt.initPromise("networkImages",Nt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){Ce.state.features?.analytics&&Nt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Xo.get({path:"/getAnalyticsConfig",params:Nt._getSdkProperties()});Ce.setFeatures({analytics:t})}catch{Ce.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!t?.length){Yt.featured=Yt.allFeatured,Yt.recommended=Yt.allRecommended;return}const e=ee.getRequestedCaipNetworkIds().join(",");Yt.featured=Yt.allFeatured.filter(r=>r.chains?.some(n=>e.includes(n))),Yt.recommended=Yt.allRecommended.filter(r=>r.chains?.some(n=>e.includes(n))),Yt.filteredWallets=Yt.wallets.filter(r=>r.chains?.some(n=>e.includes(n)))},clearFilterByNamespaces(){Yt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Yt.featured=Yt.allFeatured,Yt.recommended=Yt.allRecommended;return}const e=ee.getRequestedCaipNetworkIds().join(",");Yt.featured=Yt.allFeatured.filter(r=>r.chains?.some(n=>e.includes(n))),Yt.recommended=Yt.allRecommended.filter(r=>r.chains?.some(n=>e.includes(n))),Yt.filteredWallets=Yt.wallets.filter(r=>r.chains?.some(n=>e.includes(n)))}},wn=jn({view:"Connect",history:["Connect"],transactionStack:[]}),rje={state:wn,subscribeKey(t,e){return bo(wn,t,e)},pushTransactionStack(t){wn.transactionStack.push(t)},popTransactionStack(t){const e=wn.transactionStack.pop();if(!e)return;const{onSuccess:r,onError:n,onCancel:s}=e;switch(t){case"success":r?.();break;case"error":n?.(),Lt.goBack();break;case"cancel":s?.(),Lt.goBack();break}},push(t,e){t!==wn.view&&(wn.view=t,wn.history.push(t),wn.data=e)},reset(t,e){wn.view=t,wn.history=[t],wn.data=e},replace(t,e){wn.history.at(-1)===t||(wn.view=t,wn.history[wn.history.length-1]=t,wn.data=e)},goBack(){const t=ee.state.activeCaipAddress,e=Lt.state.view==="ConnectingFarcaster",r=!t&&e;if(wn.history.length>1){wn.history.pop();const[n]=wn.history.slice(-1);n&&(t&&n==="Connect"?wn.view="Account":wn.view=n)}else vr.close();wn.data?.wallet&&(wn.data.wallet=void 0),setTimeout(()=>{if(r){lt.setFarcasterUrl(void 0,ee.state.activeChain);const n=qe.getAuthConnector();n?.provider?.reload();const s=uE(Ce.state);n?.provider?.syncDappData?.({metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType})}},100)},goBackToIndex(t){if(wn.history.length>1){wn.history=wn.history.slice(0,t+1);const[e]=wn.history.slice(-1);e&&(wn.view=e)}},goBackOrCloseModal(){Lt.state.history.length>1?Lt.goBack():vr.close()}},Lt=mc(rje),Cd=jn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),$O={state:Cd,subscribe(t){return Ui(Cd,()=>t(Cd))},setThemeMode(t){Cd.themeMode=t;try{const e=qe.getAuthConnector();if(e){const r=$O.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:Gd(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Cd.themeVariables={...Cd.themeVariables,...t};try{const e=qe.getAuthConnector();if(e){const r=$O.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:Gd(Cd.themeVariables,Cd.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return uE(Cd)}},aa=mc($O),Xie=Object.fromEntries(Zie.map(t=>[t,void 0])),nje=Object.fromEntries(Zie.map(t=>[t,!0])),jr=jn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:Xie,filterByNamespaceMap:nje}),sje={state:jr,subscribe(t){return Ui(jr,()=>{t(jr)})},subscribeKey(t,e){return bo(jr,t,e)},initialize(t){t.forEach(e=>{const r=Pe.getConnectedConnectorId(e);r&&qe.setConnectorId(r,e)})},setActiveConnector(t){t&&(jr.activeConnector=D0(t))},setConnectors(t){t.filter(s=>!jr.allConnectors.some(i=>i.id===s.id&&qe.getConnectorName(i.name)===qe.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&jr.allConnectors.push(D0(s))});const r=qe.getEnabledNamespaces(),n=qe.getEnabledConnectors(r);jr.connectors=qe.mergeMultiChainConnectors(n)},filterByNamespaces(t){Object.keys(jr.filterByNamespaceMap).forEach(e=>{jr.filterByNamespaceMap[e]=!1}),t.forEach(e=>{jr.filterByNamespaceMap[e]=!0}),qe.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){jr.filterByNamespaceMap[t]=e,qe.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=qe.getEnabledNamespaces(),e=qe.getEnabledConnectors(t),r=qe.areAllNamespacesEnabled();jr.connectors=qe.mergeMultiChainConnectors(e),r?Nt.clearFilterByNamespaces():Nt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(jr.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return jr.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(jr.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=qe.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const s=n[0],i=s?.id===_e.CONNECTOR_ID.AUTH;n.length>1&&s?r.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...n],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:s?.id||""}):s&&r.push(s)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,s=qe.getConnectorName(n);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===r.chain)||i.push(r),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){if(t.id===_e.CONNECTOR_ID.AUTH){const e=t,r=uE(Ce.state),n=aa.getSnapshot().themeMode,s=aa.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e?.provider?.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:Gd(s,n)}),qe.setConnectors([t])}else qe.setConnectors([t])},getAuthConnector(t){const e=t||ee.state.activeChain,r=jr.connectors.find(n=>n.id===_e.CONNECTOR_ID.AUTH);if(r)return r?.connectors?.length?r.connectors.find(s=>s.chain===e):r},getAnnouncedConnectorRdns(){return jr.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>t.info?.rdns)},getConnectorById(t){return jr.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:r}){const n=r||ee.state.activeChain;return jr.allConnectors.filter(i=>i.chain===n).find(i=>i.explorerId===t||i.info?.rdns===e)},syncIfAuthConnector(t){if(t.id!=="ID_AUTH")return;const e=t,r=uE(Ce.state),n=aa.getSnapshot().themeMode,s=aa.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:Gd(s,n)})},getConnectorsByNamespace(t){const e=jr.allConnectors.filter(r=>r.chain===t);return qe.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return ee.checkIfSmartAccountEnabled()&&Hu(t)===Zs.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=qe.getConnector({id:t.id,rdns:t.rdns});VDe.handleMobileDeeplinkRedirect(e?.explorerId||t.id,ee.state.activeChain),e?Lt.push("ConnectingExternal",{connector:e,wallet:t}):Lt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?qe.getConnectorsByNamespace(t):qe.mergeMultiChainConnectors(jr.allConnectors)},setFilterByNamespace(t){jr.filterByNamespace=t,jr.connectors=qe.getConnectors(t),Nt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(jr.activeConnectorIds={...jr.activeConnectorIds,[e]:t},Pe.setConnectedConnectorId(e,t))},removeConnectorId(t){jr.activeConnectorIds={...jr.activeConnectorIds,[t]:void 0},Pe.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return jr.activeConnectorIds[t]},isConnected(t){return t?!!jr.activeConnectorIds[t]:Object.values(jr.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){jr.activeConnectorIds={...Xie}}},qe=mc(sje),ije=1e3,s1={checkNamespaceConnectorId(t,e){return qe.getConnectorId(t)===e},isSocialProvider(t){return Sr.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:r=!0,redirectViewOnModalClose:n="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&qe.setActiveConnector(e),s?.(gt.isMobile()&&t),n){const u=vr.subscribeKey("open",l=>{l||(Lt.state.view!==n&&Lt.replace(n),u(),a(new Error("Modal closed")))})}const c=ee.subscribeKey("activeCaipAddress",u=>{u&&(i?.(),r&&vr.close(),c(),o(ya.parseCaipAddress(u)))})})},connectExternal(t){return new Promise((e,r)=>{const n=ee.subscribeKey("activeCaipAddress",s=>{s&&(vr.close(),n(),e(ya.parseCaipAddress(s)))});Ge.connectExternal(t,t.chain).catch(()=>{n(),r(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:r=!0,onOpenFarcaster:n,onConnect:s}){let i=lt.state.socialWindow,o=lt.state.socialProvider,a=!1,c=null;const u=e||ee.state.activeChain,l=ee.subscribeKey("activeCaipAddress",d=>{d&&(r&&vr.close(),l())});return new Promise((d,f)=>{async function p(h){if(h.data?.resultUri)if(h.origin===_e.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",p,!1);try{const y=qe.getAuthConnector(u);if(y&&!a){i&&(i.close(),lt.setSocialWindow(void 0,u),i=lt.state.socialWindow),a=!0;const E=h.data.resultUri;if(o&&Or.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:o}}),o){Pe.setConnectedSocialProvider(o),await Ge.connectExternal({id:y.id,type:y.type,socialUri:E},y.chain);const S=ee.state.activeCaipAddress;if(!S){f(new Error("Failed to connect"));return}d(ya.parseCaipAddress(S)),Or.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:o}})}}}catch{o&&Or.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}}),f(new Error("Failed to connect"))}}else o&&Or.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}})}async function g(){if(t&&(lt.setSocialProvider(t,u),o=lt.state.socialProvider,Or.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:o}})),o==="farcaster"){n?.();const h=vr.subscribeKey("open",E=>{!E&&t==="farcaster"&&(f(new Error("Popup closed")),s?.(),h())}),y=qe.getAuthConnector();if(y&&!lt.state.farcasterUrl)try{const{url:E}=await y.provider.getFarcasterUri();lt.setFarcasterUrl(E,u)}catch{f(new Error("Failed to connect to farcaster"))}}else{const h=qe.getAuthConnector();c=gt.returnOpenHref(`${_e.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(h&&o){const{uri:y}=await h.provider.getSocialRedirectUri({provider:o});if(c&&y){lt.setSocialWindow(c,u),i=lt.state.socialWindow,c.location.href=y;const E=setInterval(()=>{i?.closed&&!a&&(f(new Error("Popup closed")),clearInterval(E))},1e3);window.addEventListener("message",p,!1)}else c?.close(),f(new Error("Failed to initiate social connection"))}}catch{f(new Error("Failed to initiate social connection")),c?.close()}}}g()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:r,onConnect:n}){return new Promise((s,i)=>{if(r?.(),e){const a=vr.subscribeKey("open",c=>{c||(Lt.state.view!==e&&Lt.replace(e),a(),i(new Error("Modal closed")))})}const o=ee.subscribeKey("activeCaipAddress",a=>{a&&(n?.(),t&&vr.close(),o(),s(ya.parseCaipAddress(a)))})})},async updateEmail(){const t=Pe.getConnectedConnectorId(ee.state.activeChain),e=qe.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==_e.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const r=e.provider.getEmail()??"";return await vr.open({view:"UpdateEmailWallet",data:{email:r,redirectView:void 0}}),new Promise((n,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==r&&(vr.close(),clearInterval(i),o(),n({email:a}))},ije),o=vr.subscribeKey("open",a=>{a||(Lt.state.view!=="Connect"&&Lt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return ee.checkIfSmartAccountEnabled()&&Hu(t)===Zs.ACCOUNT_TYPES.EOA}};function Qie(){const t=ee.state.activeCaipNetwork?.chainNamespace||"eip155",e=ee.state.activeCaipNetwork?.id||1,r=Sr.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`}function Hu(t){return ee.getAccountData(t)?.preferredAccountType}function A1(t){return t?ee.state.chains.get(t)?.networkState?.caipNetwork:ee.state.activeCaipNetwork}const aT={getConnectionStatus(t,e){const r=qe.state.activeConnectorIds[e],n=Ge.getConnections(e);return!!r&&t.connectorId===r?"connected":n.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:r}){return t.map(n=>{if((e?n.connectorId.toLowerCase()===e.toLowerCase():!1)&&r){const i=n.accounts.filter(o=>!r.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...n,accounts:i}}return n})},excludeExistingConnections(t,e){const r=new Set(t);return e.filter(n=>!r.has(n.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(r=>r.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){const e=!!Ce.state.remoteFeatures?.multiWallet,r=qe.state.activeConnectorIds[t],n=Ge.getConnections(t),i=(Ge.state.recentConnections.get(t)??[]).filter(a=>qe.getConnectorById(a.connectorId)),o=aT.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return e?{connections:n,recentConnections:o}:{connections:n.filter(a=>a.connectorId.toLowerCase()===r?.toLowerCase()),recentConnections:[]}}},Hp=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Fs=jn({...Hp}),oje={state:Fs,subscribeKey(t,e){return bo(Fs,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=gt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Fs.message=Hp.message,Fs.variant=Hp.variant,Fs.svg=Hp.svg,Fs.open=Hp.open,Fs.autoClose=Hp.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=Hp.autoClose}){Fs.open?(Fs.open=!1,setTimeout(()=>{Fs.message=t,Fs.variant=r,Fs.svg=e,Fs.open=!0,Fs.autoClose=n},150)):(Fs.message=t,Fs.variant=r,Fs.svg=e,Fs.open=!0,Fs.autoClose=n)}},Cl=oje,Vn=jn({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),aje={state:Vn,subscribe(t){return Ui(Vn,()=>t(Vn))},setLastNetworkInView(t){Vn.lastNetworkInView=t},async fetchTransactions(t){if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Vn.loading=!0;try{const e=await Dt.fetchTransactions({account:t,cursor:Vn.next,chainId:ee.state.activeCaipNetwork?.caipNetworkId}),r=jI.filterSpamTransactions(e.data),n=jI.filterByConnectedChain(r),s=[...Vn.transactions,...n];Vn.loading=!1,Vn.transactions=s,Vn.transactionsByYear=jI.groupTransactionsByYearAndMonth(Vn.transactionsByYear,n),Vn.empty=s.length===0,Vn.next=e.next?e.next:void 0}catch{const r=ee.state.activeChain;Or.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:Ce.state.projectId,cursor:Vn.next,isSmartAccount:Hu(r)===Zs.ACCOUNT_TYPES.SMART_ACCOUNT}}),Cl.showError("Failed to fetch transactions"),Vn.loading=!1,Vn.empty=!0,Vn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const s=new Date(n.metadata.minedAt).getFullYear(),i=new Date(n.metadata.minedAt).getMonth(),o=r[s]??{},c=(o[i]??[]).filter(u=>u.id!==n.id);r[s]={...o,[i]:[...c,n].sort((u,l)=>new Date(l.metadata.minedAt).getTime()-new Date(u.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>n.nft_info?.flags.is_spam===!0))},filterByConnectedChain(t){const e=ee.state.activeCaipNetwork?.caipNetworkId;return t.filter(n=>n.metadata.chain===e)},clearCursor(){Vn.next=void 0},resetTransactions(){Vn.transactions=[],Vn.transactionsByYear={},Vn.lastNetworkInView=void 0,Vn.loading=!1,Vn.empty=!1,Vn.next=void 0}},jI=mc(aje,"API_ERROR"),Lr=jn({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let jp;const cje={state:Lr,subscribe(t){return Ui(Lr,()=>t(Lr))},subscribeKey(t,e){return bo(Lr,t,e)},_getClient(){return Lr._client},setClient(t){Lr._client=D0(t)},initialize(t){const e=t.filter(r=>!!r.namespace).map(r=>r.namespace);Ge.syncStorageConnections(e)},syncStorageConnections(t){const e=Pe.getConnections(),r=t??Array.from(ee.state.chains.keys());for(const n of r){const s=e[n]??[],i=new Map(Lr.recentConnections);i.set(n,s),Lr.recentConnections=i}},getConnections(t){return t?Lr.connections.get(t)??[]:[]},hasAnyConnection(t){const e=Ge.state.connections;return Array.from(e.values()).flatMap(r=>r).some(({connectorId:r})=>r===t)},async connectWalletConnect({cache:t="auto"}={}){const e=gt.isTelegram()||gt.isSafari()&&gt.isIos();if(t==="always"||t==="auto"&&e){if(jp){await jp,jp=void 0;return}if(!gt.isPairingExpired(Lr?.wcPairingExpiry)){const r=Lr.wcUri;Lr.wcUri=r;return}jp=Ge._getClient()?.connectWalletConnect?.().catch(()=>{}),Ge.state.status="connecting",await jp,jp=void 0,Lr.wcPairingExpiry=void 0,Ge.state.status="connected"}else await Ge._getClient()?.connectWalletConnect?.()},async connectExternal(t,e,r=!0){const n=await Ge._getClient()?.connectExternal?.(t);return r&&ee.setActiveNamespace(e),n},async reconnectExternal(t){await Ge._getClient()?.reconnectExternal?.(t);const e=t.chain||ee.state.activeChain;e&&qe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){if(!e)return;vr.setLoading(!0,ee.state.activeChain);const r=qe.getAuthConnector();r&&(lt.setPreferredAccountType(t,e),await r.provider.setPreferredAccount(t),Pe.setPreferredAccountTypes(Object.entries(ee.state.chains).reduce((n,[s,i])=>{const o=s,a=Hu(o);return a!==void 0&&(n[o]=a),n},{})),await Ge.reconnectExternal(r),vr.setLoading(!1,ee.state.activeChain),Or.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:ee.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(t){return Ge._getClient()?.signMessage(t)},parseUnits(t,e){return Ge._getClient()?.parseUnits(t,e)},formatUnits(t,e){return Ge._getClient()?.formatUnits(t,e)},async sendTransaction(t){return Ge._getClient()?.sendTransaction(t)},async getCapabilities(t){return Ge._getClient()?.getCapabilities(t)},async grantPermissions(t){return Ge._getClient()?.grantPermissions(t)},async walletGetAssets(t){return Ge._getClient()?.walletGetAssets(t)??{}},async estimateGas(t){return Ge._getClient()?.estimateGas(t)},async writeContract(t){return Ge._getClient()?.writeContract(t)},async getEnsAddress(t){return Ge._getClient()?.getEnsAddress(t)},async getEnsAvatar(t){return Ge._getClient()?.getEnsAvatar(t)},checkInstalled(t){return Ge._getClient()?.checkInstalled?.(t)||!1},resetWcConnection(){Lr.wcUri=void 0,Lr.wcPairingExpiry=void 0,Lr.wcLinking=void 0,Lr.recentWallet=void 0,Lr.status="disconnected",jI.resetTransactions(),Pe.deleteWalletConnectDeepLink()},resetUri(){Lr.wcUri=void 0,Lr.wcPairingExpiry=void 0,jp=void 0},finalizeWcConnection(t){const{wcLinking:e,recentWallet:r}=Ge.state;e&&Pe.setWalletConnectDeepLink(e),r&&Pe.setAppKitRecent(r),Or.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:t,properties:{method:e?"mobile":"qrcode",name:Lt.state.data?.wallet?.name||"Unknown"}})},setWcBasic(t){Lr.wcBasic=t},setUri(t){Lr.wcUri=t,Lr.wcPairingExpiry=gt.getPairingExpiry()},setWcLinking(t){Lr.wcLinking=t},setWcError(t){Lr.wcError=t,Lr.buffering=!1},setRecentWallet(t){Lr.recentWallet=t},setBuffering(t){Lr.buffering=t},setStatus(t){Lr.status=t},setIsSwitchingConnection(t){Lr.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:r}={}){try{await Ge._getClient()?.disconnect({id:t,chainNamespace:e,initialDisconnect:r})}catch(n){throw new Uy("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){const r=new Map(Lr.connections);r.set(e,t),Lr.connections=r},async handleAuthAccountSwitch({address:t,namespace:e}){const r=lt.state.user?.accounts?.find(s=>s.type==="smartAccount"),n=r&&r.address.toLowerCase()===t.toLowerCase()&&s1.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await Ge.setPreferredAccountType(n,e)},async handleActiveConnection({connection:t,namespace:e,address:r}){const n=qe.getConnectorById(t.connectorId),s=t.connectorId===_e.CONNECTOR_ID.AUTH;if(!n)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&r&&await Ge.handleAuthAccountSwitch({address:r,namespace:e});else return(await Ge.connectExternal({id:n.id,type:n.type,provider:n.provider,address:r,chain:e},e))?.address;return r},async handleDisconnectedConnection({connection:t,namespace:e,address:r,closeModalOnConnect:n}){const s=qe.getConnectorById(t.connectorId),i=t.auth?.name?.toLowerCase(),o=t.connectorId===_e.CONNECTOR_ID.AUTH,a=t.connectorId===_e.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&s1.isSocialProvider(i)){const{address:u}=await s1.connectSocial({social:i,closeModalOnConnect:n,onOpenFarcaster(){vr.open({view:"ConnectingFarcaster"})},onConnect(){Lt.replace("ProfileWallets")}});c=u}else{const{address:u}=await s1.connectEmail({closeModalOnConnect:n,onOpen(){vr.open({view:"EmailLogin"})},onConnect(){Lt.replace("ProfileWallets")}});c=u}else if(a){const{address:u}=await s1.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:n,onOpen(l){const d=l?"AllWallets":"ConnectingWalletConnect";vr.state.open?Lt.push(d):vr.open({view:d})},onConnect(){Lt.replace("ProfileWallets")}});c=u}else{const u=await Ge.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);u&&(c=u.address)}return o&&r&&await Ge.handleAuthAccountSwitch({address:r,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:r,closeModalOnConnect:n,onChange:s}){let i;const o=lt.getCaipAddress(r);if(o){const{address:c}=ya.parseCaipAddress(o);i=c}const a=aT.getConnectionStatus(t,r);switch(a){case"connected":case"active":{const c=await Ge.handleActiveConnection({connection:t,namespace:r,address:e});if(i&&c){const u=c.toLowerCase()!==i.toLowerCase();s?.({address:c,namespace:r,hasSwitchedAccount:u,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Ge.handleDisconnectedConnection({connection:t,namespace:r,address:e,closeModalOnConnect:n});c&&s?.({address:c,namespace:r,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${a}`)}}},Ge=mc(cje),om=jn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),ku={state:om,subscribe(t){return Ui(om,()=>t(om))},subscribeOpen(t){return bo(om,"open",t)},set(t){Object.assign(om,{...om,...t})}},uje={async getTokenList(t){return(await Dt.fetchSwapTokens({chainId:t}))?.tokens?.map(n=>({...n,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){const t=ee.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const e=(await Ge?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e};case"eip155":default:return await Dt.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:r,sourceTokenDecimals:n}){const s=await Dt.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s?.allowance&&r&&n){const i=Ge.parseUnits(r,n)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await A9.getMyTokensWithBalance(t);return lt.setTokenBalance(e,ee.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return t?.map(e=>({...e,address:e?.address?e.address:Qie(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]}},pn=jn({tokenBalances:[],loading:!1}),lje={state:pn,subscribe(t){return Ui(pn,()=>t(pn))},subscribeKey(t,e){return bo(pn,t,e)},setToken(t){t&&(pn.token=D0(t))},setTokenAmount(t){pn.sendTokenAmount=t},setReceiverAddress(t){pn.receiverAddress=t},setReceiverProfileImageUrl(t){pn.receiverProfileImageUrl=t},setReceiverProfileName(t){pn.receiverProfileName=t},setNetworkBalanceInUsd(t){pn.networkBalanceInUSD=t},setLoading(t){pn.loading=t},async sendToken(){try{switch(Xr.setLoading(!0),ee.state.activeCaipNetwork?.chainNamespace){case"eip155":await Xr.sendEvmToken();return;case"solana":await Xr.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Xr.setLoading(!1)}},async sendEvmToken(){const t=ee.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Hu(t);if(!Xr.state.sendTokenAmount||!Xr.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Xr.state.token)throw new Error("A token is required");Xr.state.token?.address?(Or.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Zs.ACCOUNT_TYPES.SMART_ACCOUNT,token:Xr.state.token.address,amount:Xr.state.sendTokenAmount,network:ee.state.activeCaipNetwork?.caipNetworkId||""}}),await Xr.sendERC20Token({receiverAddress:Xr.state.receiverAddress,tokenAddress:Xr.state.token.address,sendTokenAmount:Xr.state.sendTokenAmount,decimals:Xr.state.token.quantity.decimals})):(Or.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Zs.ACCOUNT_TYPES.SMART_ACCOUNT,token:Xr.state.token.symbol||"",amount:Xr.state.sendTokenAmount,network:ee.state.activeCaipNetwork?.caipNetworkId||""}}),await Xr.sendNativeToken({receiverAddress:Xr.state.receiverAddress,sendTokenAmount:Xr.state.sendTokenAmount,decimals:Xr.state.token.quantity.decimals}))},async fetchTokenBalance(t){pn.loading=!0;const e=ee.state.activeChain,r=ee.state.activeCaipNetwork?.caipNetworkId,n=ee.state.activeCaipNetwork?.chainNamespace,s=lt.getCaipAddress(e)??ee.state.activeCaipAddress,i=s?gt.getPlainAddress(s):void 0;if(pn.lastRetry&&!gt.isAllowedRetry(pn.lastRetry,30*Sr.ONE_SEC_MS))return pn.loading=!1,[];try{if(i&&r&&n){const o=await A9.getMyTokensWithBalance();return pn.tokenBalances=o,pn.lastRetry=void 0,o}}catch(o){pn.lastRetry=Date.now(),t?.(o),Cl.showError("Token Balance Unavailable")}finally{pn.loading=!1}return[]},fetchNetworkBalance(){if(pn.tokenBalances.length===0)return;const t=uje.mapBalancesToSwapTokens(pn.tokenBalances);if(!t)return;const e=t.find(r=>r.address===Qie());e&&(pn.networkBalanceInUSD=e?PDe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){Lt.pushTransactionStack({});const e=t.receiverAddress,r=lt.state.address,n=Ge.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Ge.sendTransaction({chainNamespace:_e.CHAIN.EVM,to:e,address:r,data:"0x",value:n??BigInt(0)}),Or.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Hu("eip155")===Zs.ACCOUNT_TYPES.SMART_ACCOUNT,token:Xr.state.token?.symbol||"",amount:t.sendTokenAmount,network:ee.state.activeCaipNetwork?.caipNetworkId||""}}),Ge._getClient()?.updateBalance("eip155"),Xr.resetSend()},async sendERC20Token(t){Lt.pushTransactionStack({onSuccess(){Lt.replace("Account")}});const e=Ge.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(lt.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const r=gt.getPlainAddress(t.tokenAddress);if(!r)throw new Error("SendController:sendERC20Token - tokenAddress is required");await Ge.writeContract({fromAddress:lt.state.address,tokenAddress:r,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:BDe.getERC20Abi(r),chainNamespace:_e.CHAIN.EVM}),Xr.resetSend()}},async sendSolanaToken(){if(!Xr.state.sendTokenAmount||!Xr.state.receiverAddress)throw new Error("An amount and receiver address are required");Lt.pushTransactionStack({onSuccess(){Lt.replace("Account")}}),await Ge.sendTransaction({chainNamespace:"solana",to:Xr.state.receiverAddress,value:Xr.state.sendTokenAmount}),Ge._getClient()?.updateBalance("solana"),Xr.resetSend()},resetSend(){pn.token=void 0,pn.sendTokenAmount=void 0,pn.receiverAddress=void 0,pn.receiverProfileImageUrl=void 0,pn.receiverProfileName=void 0,pn.loading=!1,pn.tokenBalances=[]}},Xr=mc(lje),ER={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},ZS={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ye=jn({chains:NDe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),dje={state:Ye,subscribe(t){return Ui(Ye,()=>{t(Ye)})},subscribeKey(t,e){return bo(Ye,t,e)},subscribeChainProp(t,e,r){let n;return Ui(Ye.chains,()=>{const s=r||Ye.activeChain;if(s){const i=Ye.chains.get(s)?.[t];n!==i&&(n=i,e(i))}})},initialize(t,e,r){const{chainId:n,namespace:s}=Pe.getActiveNetworkProps(),i=e?.find(l=>l.id.toString()===n?.toString()),a=t.find(l=>l?.namespace===s)||t?.[0],c=t.map(l=>l.namespace).filter(l=>l!==void 0),u=Ce.state.enableEmbedded?new Set([...c]):new Set([...e?.map(l=>l.chainNamespace)??[]]);(t?.length===0||!a)&&(Ye.noAdapters=!0),Ye.noAdapters||(Ye.activeChain=a?.namespace,Ye.activeCaipNetwork=i,ee.setChainNetworkData(a?.namespace,{caipNetwork:i}),Ye.activeChain&&ku.set({activeChain:a?.namespace})),u.forEach(l=>{const d=e?.filter(g=>g.chainNamespace===l),f=Pe.getPreferredAccountTypes()||{},p={...Ce.state.defaultAccountTypes,...f};ee.state.chains.set(l,{namespace:l,networkState:jn({...ZS,caipNetwork:d?.[0]}),accountState:jn({...ER,preferredAccountType:p[l]}),caipNetworks:d??[],...r}),ee.setRequestedCaipNetworks(d??[],l)})},removeAdapter(t){if(Ye.activeChain===t){const e=Array.from(Ye.chains.entries()).find(([r])=>r!==t);if(e){const r=e[1]?.caipNetworks?.[0];r&&ee.setActiveCaipNetwork(r)}}Ye.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:r},n){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Ye.chains.set(t.namespace,{namespace:t.namespace,networkState:{...ZS,caipNetwork:n[0]},accountState:ER,caipNetworks:n,connectionControllerClient:r,networkControllerClient:e}),ee.setRequestedCaipNetworks(n?.filter(s=>s.chainNamespace===t.namespace)??[],t.namespace)},addNetwork(t){const e=Ye.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];e.caipNetworks?.find(n=>n.id===t.id)||r.push(t),Ye.chains.set(t.chainNamespace,{...e,caipNetworks:r}),ee.setRequestedCaipNetworks(r,t.chainNamespace),qe.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){const r=Ye.chains.get(t);if(r){const n=Ye.activeCaipNetwork?.id===e,s=[...r.caipNetworks?.filter(i=>i.id!==e)||[]];n&&r?.caipNetworks?.[0]&&ee.setActiveCaipNetwork(r.caipNetworks[0]),Ye.chains.set(t,{...r,caipNetworks:s}),ee.setRequestedCaipNetworks(s||[],t),s.length===0&&qe.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const r=Ye.chains.get(t);r&&(r.networkState={...r.networkState||ZS,...e},Ye.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=Ye.chains.get(t);if(n){const s={...n.accountState||ER,...e};Ye.chains.set(t,{...n,accountState:s}),(Ye.chains.size===1||Ye.activeChain===t)&&(e.caipAddress&&(Ye.activeCaipAddress=e.caipAddress),lt.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const r=Ye.chains.get(t);if(r){const n={...r.networkState||ZS,...e};Ye.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){ee.setChainAccountData(r,{[t]:e},n)},setActiveNamespace(t){Ye.activeChain=t;const e=t?Ye.chains.get(t):void 0,r=e?.networkState?.caipNetwork;r?.id&&t&&(Ye.activeCaipAddress=e?.accountState?.caipAddress,Ye.activeCaipNetwork=r,ee.setChainNetworkData(t,{caipNetwork:r}),Pe.setActiveCaipNetworkId(r?.caipNetworkId),ku.set({activeChain:t,selectedNetworkId:r?.caipNetworkId}))},setActiveCaipNetwork(t){if(!t)return;Ye.activeChain!==t.chainNamespace&&ee.setIsSwitchingNamespace(!0);const e=Ye.chains.get(t.chainNamespace);Ye.activeChain=t.chainNamespace,Ye.activeCaipNetwork=t,ee.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),e?.accountState?.address?Ye.activeCaipAddress=`${t.chainNamespace}:${t.id}:${e?.accountState?.address}`:Ye.activeCaipAddress=void 0,ee.setAccountProp("caipAddress",Ye.activeCaipAddress,t.chainNamespace),e&&lt.replaceState(e.accountState),Xr.resetSend(),ku.set({activeChain:Ye.activeChain,selectedNetworkId:Ye.activeCaipNetwork?.caipNetworkId}),Pe.setActiveCaipNetworkId(t.caipNetworkId),!ee.checkIfSupportedNetwork(t.chainNamespace)&&Ce.state.enableNetworkSwitch&&!Ce.state.allowUnsupportedChain&&!Ge.state.wcBasic&&ee.showUnsupportedChainUI()},addCaipNetwork(t){if(!t)return;const e=Ye.chains.get(t.chainNamespace);e&&e?.caipNetworks?.push(t)},async switchActiveNamespace(t){if(!t)return;const e=t!==ee.state.activeChain,r=ee.getNetworkData(t)?.caipNetwork,n=ee.getCaipNetworkByNamespace(t,r?.id);e&&n&&await ee.switchActiveNetwork(n)},async switchActiveNetwork(t){const e=ee.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=!ee.state.chains.get(e)?.caipNetworks?.some(i=>i.id===Ye.activeCaipNetwork?.id),s=ee.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),n&&vr.close()}catch{Lt.goBack()}Or.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Ye.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const r=Ye.chains.get(e);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(t){const e=t||Ye.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=Ye.chains.get(e);if(!r?.connectionControllerClient)throw new Error("ConnectionController client not set");return r.connectionControllerClient},getNetworkProp(t,e){const r=Ye.chains.get(e)?.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=Ye.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=e?.networkState||{};return gt.sortRequestedNetworks(r,n).filter(o=>o?.id)},getAllRequestedCaipNetworks(){const t=[];return Ye.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const r=ee.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){ee.setAdapterNetworkState(e,{requestedCaipNetworks:t});const n=ee.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(n));qe.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Ye.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const r=ee.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(t){return t?Ye.chains.get(t)?.networkState?.caipNetwork:Ye.activeCaipNetwork},getActiveCaipAddress(){return Ye.activeCaipAddress},getApprovedCaipNetworkIds(t){return Ye.chains.get(t)?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(t){const r=await ee.getNetworkControllerClient()?.getApprovedCaipNetworksData();ee.setAdapterNetworkState(t,{approvedCaipNetworkIds:r?.approvedCaipNetworkIds,supportsAllNetworks:r?.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const r=e||Ye.activeCaipNetwork?.caipNetworkId,n=ee.getRequestedCaipNetworks(t);return n.length?n?.some(s=>s.caipNetworkId===r):!0},checkIfSupportedChainId(t){return Ye.activeChain?ee.getRequestedCaipNetworks(Ye.activeChain)?.some(r=>r.id===t):!0},setSmartAccountEnabledNetworks(t,e){ee.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){const t=Kie.caipNetworkIdToNumber(Ye.activeCaipNetwork?.caipNetworkId),e=Ye.activeChain;return!e||!t?!1:!!ee.getNetworkProp("smartAccountEnabledNetworks",e)?.includes(Number(t))},showUnsupportedChainUI(){vr.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Ye.activeCaipNetwork;return!!(t?.chainNamespace&&Sr.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){ee.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const r=ee.state.chains.get(e)?.accountState?.preferredAccountType,n=Ce.state.defaultAccountTypes[e];Ye.activeCaipAddress=void 0,ee.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),qe.removeConnectorId(e)},setIsSwitchingNamespace(t){Ye.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){const t=[];let e;if(Ye.chains.forEach(r=>{_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(n=>n===r.namespace)&&r.namespace&&t.push(r.namespace)}),t.length>0){const r=t[0];return e=r?Ye.chains.get(r)?.caipNetworks?.[0]:void 0,e}},getAccountData(t){const e=t||Ye.activeChain;if(e)return ee.state.chains.get(e)?.accountState},getNetworkData(t){const e=t||Ye.activeChain;if(e)return ee.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(t,e){if(!t)return;const r=ee.state.chains.get(t),n=r?.caipNetworks?.find(s=>s.id===e);return n||r?.networkState?.caipNetwork||r?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const t=qe.state.filterByNamespace;return(t?[Ye.chains.get(t)]:Array.from(Ye.chains.values())).flatMap(r=>r?.caipNetworks||[]).map(r=>r.caipNetworkId)},getCaipNetworks(t){return t?ee.getRequestedCaipNetworks(t):ee.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Ye.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Ye.lastConnectedSIWECaipNetwork}},ee=mc(dje),fje={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},eoe=gt.getBlockchainApiUrl(),Qo=jn({clientId:null,api:new P_({baseUrl:eoe,clientId:null}),supportedChains:{http:[],ws:[]}}),Dt={state:Qo,async get(t){const{st:e,sv:r}=Dt.getSdkProperties(),n=Ce.state.projectId,s={...t.params||{},st:e,sv:r,projectId:n};return Qo.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=Ce.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Qo.supportedChains.http.length||await Dt.getSupportedNetworks()}catch{return!1}return Qo.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Dt.get({path:"v1/supported-chains"});return Qo.supportedChains=t,t}catch{return Qo.supportedChains}},async fetchIdentity({address:t}){const e=Pe.getIdentityFromCacheForAddress(t);if(e)return e;const r=await Dt.get({path:`/v1/identity/${t}`,params:{sender:ee.state.activeCaipAddress?gt.getPlainAddress(ee.state.activeCaipAddress):void 0}});return Pe.updateIdentityCache({address:t,identity:r,timestamp:Date.now()}),r},async fetchTransactions({account:t,cursor:e,signal:r,cache:n,chainId:s}){if(!await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))return{data:[],next:void 0};const o=Pe.getTransactionsCacheForAddress({address:t,chainId:s});if(o)return o;const a=await Dt.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:r,cache:n});return Pe.updateTransactionsCache({address:t,chainId:s,timestamp:Date.now(),transactions:a}),a},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:s}){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Dt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Dt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){if(!await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))return{fungibles:[]};const r=Pe.getTokenPriceCacheForAddresses(t);if(r)return r;const n=await Qo.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:Ce.state.projectId},headers:{"Content-Type":"application/json"}});return Pe.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:n}),n},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Dt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){const{st:e,sv:r}=Dt.getSdkProperties();if(!await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return Dt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:s}){if(!await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return Qo.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Sr.CONVERT_SLIPPAGE_TOLERANCE},projectId:Ce.state.projectId,from:e,to:r,userAddress:n,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){const{st:n,sv:s}=Dt.getSdkProperties();if(!await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return Dt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:s}})},async getBalance(t,e,r){const{st:n,sv:s}=Dt.getSdkProperties();if(!await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))return Cl.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Pe.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Dt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:s}});return Pe.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Dt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Dt.get({path:`/v1/profile/reverse/${t}`,params:{sender:lt.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Dt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Qo.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:s}){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?(await Qo.api.post({path:"/v1/generators/onrampurl",params:{projectId:Ce.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:s}})).url:""},async getOnrampOptions(){if(!await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Dt.get({path:"/v1/onramp/options"})}catch{return fje}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){try{return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?await Qo.api.post({path:"/v1/onramp/quote",params:{projectId:Ce.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Dt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Qo.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:Ce.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){Qo.clientId=t,Qo.api=new P_({baseUrl:eoe,clientId:t})}},_R={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return RT(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},A9={async getMyTokensWithBalance(t){const e=lt.state.address,r=ee.state.activeCaipNetwork,n=qe.getConnectorId("eip155")===_e.CONNECTOR_ID.AUTH;if(!e||!r)return[];const s=`${r.caipNetworkId}:${e}`,i=Pe.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(r.chainNamespace===_e.CHAIN.EVM&&n){const a=await this.getEIP155Balances(e,r);if(a)return this.filterLowQualityTokens(a)}const o=await Dt.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){try{const r=_R.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await Ge.getCapabilities(t))?.[r]?.assetDiscovery?.supported)return null;const s=await Ge.walletGetAssets({account:t,chainFilter:[r]});if(!_R.isWalletGetAssetsResponse(s))return null;const o=(s[r]||[]).map(a=>_R.createBalance(a,e.caipNetworkId));return Pe.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:o},timestamp:Date.now()}),o}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},al=jn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),hje={state:al,replaceState(t){t&&Object.assign(al,D0(t))},subscribe(t){return ee.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,r){let n;return ee.subscribeChainProp("accountState",s=>{if(s){const i=s[t];n!==i&&(n=i,e(i))}},r)},setStatus(t,e){ee.setAccountProp("status",t,e)},getCaipAddress(t){if(t)return ee.state.chains.get(t)?.accountState?.caipAddress},setCaipAddress(t,e){const r=t?gt.getPlainAddress(t):void 0;e===ee.state.activeChain&&(ee.state.activeCaipAddress=t),ee.setAccountProp("caipAddress",t,e),ee.setAccountProp("address",r,e)},setBalance(t,e,r){ee.setAccountProp("balance",t,r),ee.setAccountProp("balanceSymbol",e,r)},setProfileName(t,e){ee.setAccountProp("profileName",t,e)},setProfileImage(t,e){ee.setAccountProp("profileImage",t,e)},setUser(t,e){ee.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){ee.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){ee.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){ee.setAccountProp("currentTab",t,ee.state.activeChain)},setTokenBalance(t,e){t&&ee.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){ee.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,r){if(!r)return;const n=ee.state.chains.get(r)?.accountState?.addressLabels||new Map;n.set(t,e),ee.setAccountProp("addressLabels",n,r)},removeAddressLabel(t,e){if(!e)return;const r=ee.state.chains.get(e)?.accountState?.addressLabels||new Map;r.delete(t),ee.setAccountProp("addressLabels",r,e)},setConnectedWalletInfo(t,e){ee.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){ee.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&ee.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){ee.setAccountProp("socialWindow",t?D0(t):void 0,e)},setFarcasterUrl(t,e){ee.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){al.balanceLoading=!0;const e=ee.state.activeCaipNetwork?.caipNetworkId,r=ee.state.activeCaipNetwork?.chainNamespace,n=ee.state.activeCaipAddress,s=n?gt.getPlainAddress(n):void 0;if(al.lastRetry&&!gt.isAllowedRetry(al.lastRetry,30*Sr.ONE_SEC_MS))return al.balanceLoading=!1,[];try{if(s&&e&&r){const i=await A9.getMyTokensWithBalance();return lt.setTokenBalance(i,r),al.lastRetry=void 0,al.balanceLoading=!1,i}}catch(i){al.lastRetry=Date.now(),t?.(i),Cl.showError("Token Balance Unavailable")}finally{al.balanceLoading=!1}return[]},resetAccount(t){ee.resetAccount(t)}},lt=mc(hje),pje={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const r=ee.state.activeCaipNetwork,n=Lt.state.data;if(t.id===r?.id)return;const i=lt.getCaipAddress(ee.state.activeChain),o=t.chainNamespace!==ee.state.activeChain,a=lt.getCaipAddress(t.chainNamespace),u=qe.getConnectorId(ee.state.activeChain)===_e.CONNECTOR_ID.AUTH,l=_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||u&&l?Lt.push("SwitchNetwork",{...n,network:t}):i&&o&&!a?Lt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Lt.push("SwitchNetwork",{...n,network:t})}},ea=jn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),gje={state:ea,subscribe(t){return Ui(ea,()=>t(ea))},subscribeKey(t,e){return bo(ea,t,e)},async open(t){const e=t?.namespace,r=ee.state.activeChain,n=e&&e!==r,s=ee.getAccountData(t?.namespace)?.caipAddress;if(Ge.state.wcBasic?Nt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Nt.prefetch(),qe.setFilterByNamespace(t?.namespace),vr.setLoading(!0,e),e&&n){const i=ee.getNetworkData(e)?.caipNetwork||ee.getRequestedCaipNetworks(e)[0];i&&pje.onSwitchNetwork({network:i,ignoreSwitchConfirmation:!0})}else{const i=ee.state.noAdapters;Ce.state.manualWCControl||i&&!s?gt.isMobile()?Lt.reset("AllWallets"):Lt.reset("ConnectingWalletConnectBasic"):t?.view?Lt.reset(t.view,t.data):s?Lt.reset("Account"):Lt.reset("Connect")}ea.open=!0,ku.set({open:!0}),Or.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=Ce.state.enableEmbedded,e=!!ee.state.activeCaipAddress;ea.open&&Or.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),ea.open=!1,Lt.reset("Connect"),vr.clearLoading(),t?e?Lt.replace("Account"):Lt.push("Connect"):ku.set({open:!1}),Ge.resetUri()},setLoading(t,e){e&&ea.loadingNamespaceMap.set(e,t),ea.loading=t,ku.set({loading:t})},clearLoading(){ea.loadingNamespaceMap.clear(),ea.loading=!1,ku.set({loading:!1})},shake(){ea.shake||(ea.shake=!0,setTimeout(()=>{ea.shake=!1},500))}},vr=mc(gje),V1={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},qO={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},mje={providers:Yie,selectedProvider:null,error:null,purchaseCurrency:V1,paymentCurrency:qO,purchaseCurrencies:[V1],paymentCurrencies:[],quotesLoading:!1},Pr=jn(mje),yje={state:Pr,subscribe(t){return Ui(Pr,()=>t(Pr))},subscribeKey(t,e){return bo(Pr,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=ee.state.activeChain,r=e===_e.CHAIN.SOLANA?"SOL":"USDC",n=e?ee.state.chains.get(e)?.accountState?.address??"":"",s=new URL(t.url);s.searchParams.append("publicKey",UDe),s.searchParams.append("destinationCurrencyCode",r),s.searchParams.append("walletAddress",n),s.searchParams.append("externalCustomerId",Ce.state.projectId),Pr.selectedProvider={...t,url:s.toString()}}else Pr.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,r=Yie.filter(n=>e.includes(n.name));Pr.providers=r}else Pr.providers=[]},setPurchaseCurrency(t){Pr.purchaseCurrency=t},setPaymentCurrency(t){Pr.paymentCurrency=t},setPurchaseAmount(t){HO.state.purchaseAmount=t},setPaymentAmount(t){HO.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Dt.getOnrampOptions();Pr.purchaseCurrencies=t.purchaseCurrencies,Pr.paymentCurrencies=t.paymentCurrencies,Pr.paymentCurrency=t.paymentCurrencies[0]||qO,Pr.purchaseCurrency=t.purchaseCurrencies[0]||V1,await Nt.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Nt.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){Pr.quotesLoading=!0;try{const t=await Dt.getOnrampQuote({purchaseCurrency:Pr.purchaseCurrency,paymentCurrency:Pr.paymentCurrency,amount:Pr.paymentAmount?.toString()||"0",network:Pr.purchaseCurrency?.symbol});return Pr.quotesLoading=!1,Pr.purchaseAmount=Number(t?.purchaseAmount.amount),t}catch(t){return Pr.error=t.message,Pr.quotesLoading=!1,null}finally{Pr.quotesLoading=!1}},resetState(){Pr.selectedProvider=null,Pr.error=null,Pr.purchaseCurrency=V1,Pr.paymentCurrency=qO,Pr.purchaseCurrencies=[V1],Pr.paymentCurrencies=[],Pr.paymentAmount=void 0,Pr.purchaseAmount=void 0,Pr.quotesLoading=!1}},HO=mc(yje),IK=2147483648,bje={convertEVMChainIdToCoinType(t){if(t>=IK)throw new Error("Invalid chainId");return(IK|t)>>>0}},Nc=jn({suggestions:[],loading:!1}),wje={state:Nc,subscribe(t){return Ui(Nc,()=>t(Nc))},subscribeKey(t,e){return bo(Nc,t,e)},async resolveName(t){try{return await Dt.lookupEnsName(t)}catch(e){const r=e;throw new Error(r?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(t){try{return await Dt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Nc.loading=!0,Nc.suggestions=[];const e=await Dt.getEnsNameSuggestions(t);return Nc.suggestions=e.suggestions||[],Nc.suggestions}catch(e){const r=G1.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{Nc.loading=!1}},async getNamesForAddress(t){try{if(!ee.state.activeCaipNetwork)return[];const r=Pe.getEnsFromCacheForAddress(t);if(r)return r;const n=await Dt.reverseLookupEnsName({address:t});return Pe.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=G1.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=ee.state.activeCaipNetwork,r=lt.state.address,n=qe.getAuthConnector();if(!e)throw new Error("Network not found");if(!r||!n)throw new Error("Address or auth connector not found");Nc.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Lt.pushTransactionStack({onCancel(){Lt.replace("RegisterAccountName")}});const i=await Ge.signMessage(s);Nc.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=bje.convertEVMChainIdToCoinType(Number(o));await Dt.registerEnsName({coinType:a,address:r,signature:i,message:s}),lt.setProfileName(t,e.chainNamespace),Pe.updateEnsCache({address:r,ens:[{name:t,registered_at:new Date().toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),Lt.replace("RegisterAccountNameSuccess")}catch(s){const i=G1.parseEnsApiError(s,`Error registering name ${t}`);throw Lt.replace("RegisterAccountName"),new Error(i)}finally{Nc.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){return t?.reasons?.[0]?.description||e}},G1=mc(wje);var AR,TK;function vje(){if(TK)return AR;TK=1;const t=cJ();AR=s;const e=T().console||{},r={mapHttpRequest:g,mapHttpResponse:g,wrapRequestSerializer:h,wrapResponseSerializer:h,wrapErrorSerializer:h,req:g,res:g,err:f};function n(P,D){return Array.isArray(P)?P.filter(function(I){return I!=="!stdSerializers.err"}):P===!0?Object.keys(D):!1}function s(P){P=P||{},P.browser=P.browser||{};const D=P.browser.transmit;if(D&&typeof D.send!="function")throw Error("pino: transmit option must have a send function");const L=P.browser.write||e;P.browser.write&&(P.browser.asObject=!0);const I=P.serializers||{},U=n(P.browser.serialize,I);let F=P.browser.serialize;Array.isArray(P.browser.serialize)&&P.browser.serialize.indexOf("!stdSerializers.err")>-1&&(F=!1);const B=["error","fatal","warn","info","debug","trace"];typeof L=="function"&&(L.error=L.fatal=L.warn=L.info=L.debug=L.trace=L),P.enabled===!1&&(P.level="silent");const A=P.level||"info",m=Object.create(L);m.log||(m.log=y),Object.defineProperty(m,"levelVal",{get:w}),Object.defineProperty(m,"level",{get:x,set:M});const b={transmit:D,serialize:U,asObject:P.browser.asObject,levels:B,timestamp:p(P)};m.levels=s.levels,m.level=A,m.setMaxListeners=m.getMaxListeners=m.emit=m.addListener=m.on=m.prependListener=m.once=m.prependOnceListener=m.removeListener=m.removeAllListeners=m.listeners=m.listenerCount=m.eventNames=m.write=m.flush=y,m.serializers=I,m._serialize=U,m._stdErrSerialize=F,m.child=k,D&&(m._logEvent=d());function w(){return this.level==="silent"?1/0:this.levels.values[this.level]}function x(){return this._level}function M(j){if(j!=="silent"&&!this.levels.values[j])throw Error("unknown level "+j);this._level=j,i(b,m,"error","log"),i(b,m,"fatal","error"),i(b,m,"warn","error"),i(b,m,"info","log"),i(b,m,"debug","log"),i(b,m,"trace","log")}function k(j,N){if(!j)throw new Error("missing bindings for child Pino");N=N||{},U&&j.serializers&&(N.serializers=j.serializers);const v=N.serializers;if(U&&v){var R=Object.assign({},I,v),$=P.browser.serialize===!0?Object.keys(R):U;delete j.serializers,c([j],$,R,this._stdErrSerialize)}function O(H){this._childLevel=(H._childLevel|0)+1,this.error=u(H,j,"error"),this.fatal=u(H,j,"fatal"),this.warn=u(H,j,"warn"),this.info=u(H,j,"info"),this.debug=u(H,j,"debug"),this.trace=u(H,j,"trace"),R&&(this.serializers=R,this._serialize=$),D&&(this._logEvent=d([].concat(H._logEvent.bindings,j)))}return O.prototype=this,new O(this)}return m}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=r,s.stdTimeFunctions=Object.assign({},{nullTime:E,epochTime:S,unixTime:C,isoTime:_});function i(P,D,L,I){const U=Object.getPrototypeOf(D);D[L]=D.levelVal>D.levels.values[L]?y:U[L]?U[L]:e[L]||e[I]||y,o(P,D,L)}function o(P,D,L){!P.transmit&&D[L]===y||(D[L]=(function(I){return function(){const F=P.timestamp(),B=new Array(arguments.length),A=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var m=0;m<B.length;m++)B[m]=arguments[m];if(P.serialize&&!P.asObject&&c(B,this._serialize,this.serializers,this._stdErrSerialize),P.asObject?I.call(A,a(this,L,B,F)):I.apply(A,B),P.transmit){const b=P.transmit.level||D.level,w=s.levels.values[b],x=s.levels.values[L];if(x<w)return;l(this,{ts:F,methodLevel:L,methodValue:x,transmitValue:s.levels.values[P.transmit.level||D.level],send:P.transmit.send,val:D.levelVal},B)}}})(D[L]))}function a(P,D,L,I){P._serialize&&c(L,P._serialize,P.serializers,P._stdErrSerialize);const U=L.slice();let F=U[0];const B={};I&&(B.time=I),B.level=s.levels.values[D];let A=(P._childLevel|0)+1;if(A<1&&(A=1),F!==null&&typeof F=="object"){for(;A--&&typeof U[0]=="object";)Object.assign(B,U.shift());F=U.length?t(U.shift(),U):void 0}else typeof F=="string"&&(F=t(U.shift(),U));return F!==void 0&&(B.msg=F),B}function c(P,D,L,I){for(const U in P)if(I&&P[U]instanceof Error)P[U]=s.stdSerializers.err(P[U]);else if(typeof P[U]=="object"&&!Array.isArray(P[U]))for(const F in P[U])D&&D.indexOf(F)>-1&&F in L&&(P[U][F]=L[F](P[U][F]))}function u(P,D,L){return function(){const I=new Array(1+arguments.length);I[0]=D;for(var U=1;U<I.length;U++)I[U]=arguments[U-1];return P[L].apply(this,I)}}function l(P,D,L){const I=D.send,U=D.ts,F=D.methodLevel,B=D.methodValue,A=D.val,m=P._logEvent.bindings;c(L,P._serialize||Object.keys(P.serializers),P.serializers,P._stdErrSerialize===void 0?!0:P._stdErrSerialize),P._logEvent.ts=U,P._logEvent.messages=L.filter(function(b){return m.indexOf(b)===-1}),P._logEvent.level.label=F,P._logEvent.level.value=B,I(F,P._logEvent,A),P._logEvent=d(m)}function d(P){return{ts:0,messages:[],bindings:P||[],level:{label:"",value:0}}}function f(P){const D={type:P.constructor.name,msg:P.message,stack:P.stack};for(const L in P)D[L]===void 0&&(D[L]=P[L]);return D}function p(P){return typeof P.timestamp=="function"?P.timestamp:P.timestamp===!1?E:S}function g(){return{}}function h(P){return P}function y(){}function E(){return!1}function S(){return Date.now()}function C(){return Math.round(Date.now()/1e3)}function _(){return new Date(Date.now()).toISOString()}function T(){function P(D){return typeof D<"u"&&D}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return P(self)||P(window)||P(this)||{}}}return AR}var Bm=vje();const R_=xa(Bm),Eje={level:"info"},O_="custom_context",x9=1e3*1024;let _je=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},NK=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new _je(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},toe=class{constructor(e,r=x9){this.level=e??"error",this.levelValue=Bm.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new NK(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===Bm.levels.values.error?console.error(e):r===Bm.levels.values.warn?console.warn(e):r===Bm.levels.values.debug?console.debug(e):r===Bm.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Hc({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new NK(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(Hc({extraMetadata:e})),new Blob(r,{type:"application/json"})}},Aje=class{constructor(e,r=x9){this.baseChunkLogger=new toe(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},xje=class{constructor(e,r=x9){this.baseChunkLogger=new toe(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Cje=Object.defineProperty,Sje=Object.defineProperties,Ije=Object.getOwnPropertyDescriptors,PK=Object.getOwnPropertySymbols,Tje=Object.prototype.hasOwnProperty,Nje=Object.prototype.propertyIsEnumerable,RK=(t,e,r)=>e in t?Cje(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cT=(t,e)=>{for(var r in e||(e={}))Tje.call(e,r)&&RK(t,r,e[r]);if(PK)for(var r of PK(e))Nje.call(e,r)&&RK(t,r,e[r]);return t},uT=(t,e)=>Sje(t,Ije(e));function ub(t){return uT(cT({},t),{level:t?.level||Eje.level})}function Pje(t,e=O_){return t[e]||""}function Rje(t,e,r=O_){return t[r]=e,t}function ka(t,e=O_){let r="";return typeof t.bindings>"u"?r=Pje(t,e):r=t.bindings().context||"",r}function Oje(t,e,r=O_){const n=ka(t,r);return n.trim()?`${n}/${e}`:e}function wo(t,e,r=O_){const n=Oje(t,e,r),s=t.child({context:n});return Rje(s,n,r)}function kje(t){var e,r;const n=new Aje((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:R_(uT(cT({},t.opts),{level:"trace",browser:uT(cT({},(r=t.opts)==null?void 0:r.browser),{write:s=>n.write(s)})})),chunkLoggerController:n}}function Bje(t){var e;const r=new xje((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:R_(uT(cT({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function C9(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?kje(t):Bje(t)}var Uje=Object.defineProperty,Mje=(t,e,r)=>e in t?Uje(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,OK=(t,e,r)=>Mje(t,typeof e!="symbol"?e+"":e,r);let Dje=class extends lc{constructor(e){super(),this.opts=e,OK(this,"protocol","wc"),OK(this,"version",2)}};var jje=Object.defineProperty,Lje=(t,e,r)=>e in t?jje(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fje=(t,e,r)=>Lje(t,e+"",r);let $je=class extends lc{constructor(e,r){super(),this.core=e,this.logger=r,Fje(this,"records",new Map)}},qje=class{constructor(e,r){this.logger=e,this.core=r}};class Hje extends lc{constructor(e,r){super(),this.relayer=e,this.logger=r}}let zje=class extends lc{constructor(e){super()}},Wje=class{constructor(e,r,n,s){this.core=e,this.logger=r,this.name=n}},Vje=class extends lc{constructor(e,r){super(),this.relayer=e,this.logger=r}},Gje=class extends lc{constructor(e,r){super(),this.core=e,this.logger=r}},Kje=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},Zje=class{constructor(e,r){this.projectId=e,this.logger=r}},Yje=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};var Jje=Object.defineProperty,Xje=(t,e,r)=>e in t?Jje(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kK=(t,e,r)=>Xje(t,typeof e!="symbol"?e+"":e,r);let Qje=class{constructor(e){this.opts=e,kK(this,"protocol","wc"),kK(this,"version",2)}},eLe=class{constructor(e){this.client=e}};function lE(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function zO(t){return lE(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const roe="2.31.0";let xR={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${roe}`};class j0 extends Error{constructor(e,r={}){const n=r.cause instanceof j0?r.cause.details:r.cause?.message?r.cause.message:r.details,s=r.cause instanceof j0&&r.cause.docsPath||r.docsPath,i=xR.getDocsUrl?.({...r,docsPath:s}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...xR.version?[`Version: ${xR.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=roe}walk(e){return noe(this,e)}}function noe(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?noe(t.cause,e):e?null:t}class soe extends j0{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function lb(t,{dir:e,size:r=32}={}){return typeof t=="string"?tLe(t,{dir:e,size:r}):rLe(t,{dir:e,size:r})}function tLe(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new soe({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function rLe(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new soe({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let s=0;s<r;s++){const i=e==="right";n[i?s:r-s-1]=t[i?s:t.length-s-1]}return n}class nLe extends j0{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class sLe extends j0{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function db(t,{size:e}){if(zO(t)>e)throw new sLe({givenSize:zO(t),maxSize:e})}function WO(t,e={}){const{signed:r}=e;e.size&&db(t,{size:e.size});const n=BigInt(t);if(!r)return n;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return n<=i?n:n-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function iLe(t,e={}){return Number(WO(t,e))}const oLe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function VO(t,e={}){return typeof t=="number"||typeof t=="bigint"?ooe(t,e):typeof t=="string"?uLe(t,e):typeof t=="boolean"?aLe(t,e):ioe(t,e)}function aLe(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(db(r,{size:e.size}),lb(r,{size:e.size})):r}function ioe(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=oLe[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(db(n,{size:e.size}),lb(n,{dir:"right",size:e.size})):n}function ooe(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new nLe({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?lb(a,{size:n}):a}const cLe=new TextEncoder;function uLe(t,e={}){const r=cLe.encode(t);return ioe(r,e)}const lLe=new TextEncoder;function dLe(t,e={}){return typeof t=="number"||typeof t=="bigint"?hLe(t,e):typeof t=="boolean"?fLe(t,e):lE(t)?aoe(t,e):coe(t,e)}function fLe(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(db(r,{size:e.size}),lb(r,{size:e.size})):r}const Sd={zero:48,nine:57,A:65,F:70,a:97,f:102};function BK(t){if(t>=Sd.zero&&t<=Sd.nine)return t-Sd.zero;if(t>=Sd.A&&t<=Sd.F)return t-(Sd.A-10);if(t>=Sd.a&&t<=Sd.f)return t-(Sd.a-10)}function aoe(t,e={}){let r=t;e.size&&(db(r,{size:e.size}),r=lb(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const s=n.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=BK(n.charCodeAt(a++)),u=BK(n.charCodeAt(a++));if(c===void 0||u===void 0)throw new j0(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);i[o]=c*16+u}return i}function hLe(t,e){const r=ooe(t,e);return aoe(r)}function coe(t,e={}){const r=lLe.encode(t);return typeof e.size=="number"?(db(r,{size:e.size}),lb(r,{dir:"right",size:e.size})):r}const YS=BigInt(2**32-1),UK=BigInt(32);function pLe(t,e=!1){return e?{h:Number(t&YS),l:Number(t>>UK&YS)}:{h:Number(t>>UK&YS)|0,l:Number(t&YS)|0}}function gLe(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:o,l:a}=pLe(t[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const mLe=(t,e,r)=>t<<r|e>>>32-r,yLe=(t,e,r)=>e<<r|t>>>32-r,bLe=(t,e,r)=>e<<r-32|t>>>64-r,wLe=(t,e,r)=>t<<r-32|e>>>64-r,am=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function vLe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function lT(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function dE(t,...e){if(!vLe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Urt(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");lT(t.outputLen),lT(t.blockLen)}function MK(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ELe(t,e){dE(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function _Le(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function uoe(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Mrt(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Drt(t,e){return t<<32-e|t>>>e}const ALe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function xLe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function CLe(t){for(let e=0;e<t.length;e++)t[e]=xLe(t[e]);return t}const DK=ALe?t=>t:CLe;function SLe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function loe(t){return typeof t=="string"&&(t=SLe(t)),dE(t),t}function jrt(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];dE(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}class ILe{}function TLe(t){const e=n=>t().update(loe(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Lrt(t=32){if(am&&typeof am.getRandomValues=="function")return am.getRandomValues(new Uint8Array(t));if(am&&typeof am.randomBytes=="function")return Uint8Array.from(am.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const NLe=BigInt(0),i1=BigInt(1),PLe=BigInt(2),RLe=BigInt(7),OLe=BigInt(256),kLe=BigInt(113),doe=[],foe=[],hoe=[];for(let t=0,e=i1,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],doe.push(2*(5*n+r)),foe.push((t+1)*(t+2)/2%64);let s=NLe;for(let i=0;i<7;i++)e=(e<<i1^(e>>RLe)*kLe)%OLe,e&PLe&&(s^=i1<<(i1<<BigInt(i))-i1);hoe.push(s)}const poe=gLe(hoe,!0),BLe=poe[0],ULe=poe[1],jK=(t,e,r)=>r>32?bLe(t,e,r):mLe(t,e,r),LK=(t,e,r)=>r>32?wLe(t,e,r):yLe(t,e,r);function MLe(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],d=jK(u,l,1)^r[a],f=LK(u,l,1)^r[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=foe[o],c=jK(s,i,a),u=LK(s,i,a),l=doe[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=BLe[n],t[1]^=ULe[n]}uoe(r)}class S9 extends ILe{constructor(e,r,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,lT(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=_Le(this.state)}clone(){return this._cloneInto()}keccak(){DK(this.state32),MLe(this.state32,this.rounds),DK(this.state32),this.posOut=0,this.pos=0}update(e){MK(this),e=loe(e),dE(e);const{blockLen:r,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){MK(this,!1),dE(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return lT(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ELe(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,uoe(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new S9(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const DLe=(t,e,r)=>TLe(()=>new S9(e,t,r)),jLe=DLe(1,136,256/8);function goe(t,e){const r=e||"hex",n=jLe(lE(t,{strict:!1})?dLe(t):t);return r==="bytes"?n:VO(n)}class LLe extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const CR=new LLe(8192);function FLe(t,e){if(CR.has(`${t}.${e}`))return CR.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=goe(coe(r),"bytes"),s=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(n[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return CR.set(`${t}.${e}`,i),i}function $Le(t){const e=goe(`0x${t.substring(4)}`).substring(26);return FLe(`0x${e}`)}async function qLe({hash:t,signature:e}){const r=lE(t)?t:VO(t),{secp256k1:n}=await Cr(async()=>{const{secp256k1:o}=await import("./secp256k1-CTlSnTcS.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:d,yParity:f}=e,p=Number(f??d),g=FK(p);return new n.Signature(WO(u),WO(l)).addRecoveryBit(g)}const o=lE(e)?e:VO(e);if(zO(o)!==65)throw new Error("invalid signature length");const a=iLe(`0x${o.slice(130)}`),c=FK(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function FK(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function HLe({hash:t,signature:e}){return $Le(await qLe({hash:t,signature:e}))}var zLe={};const WLe=":";function x0(t){const[e,r]=t.split(WLe);return{namespace:e,reference:r}}function moe(t,e){return t.includes(":")?[t]:e.chains||[]}var VLe=Object.defineProperty,GLe=Object.defineProperties,KLe=Object.getOwnPropertyDescriptors,$K=Object.getOwnPropertySymbols,ZLe=Object.prototype.hasOwnProperty,YLe=Object.prototype.propertyIsEnumerable,GO=(t,e,r)=>e in t?VLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qK=(t,e)=>{for(var r in e||(e={}))ZLe.call(e,r)&&GO(t,r,e[r]);if($K)for(var r of $K(e))YLe.call(e,r)&&GO(t,r,e[r]);return t},JLe=(t,e)=>GLe(t,KLe(e)),HK=(t,e,r)=>GO(t,typeof e!="symbol"?e+"":e,r);const XLe="ReactNative",oc={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},QLe="js";function dT(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ip(){return!di.getDocument()&&!!di.getNavigator()&&navigator.product===XLe}function eFe(){return ip()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function tFe(){return ip()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function fb(){return!dT()&&!!di.getNavigator()&&!!di.getDocument()}function k_(){return ip()?oc.reactNative:dT()?oc.node:fb()?oc.browser:oc.unknown}function zK(){var t;try{return ip()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function rFe(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const s=e[n];s!==void 0&&r.set(n,s)}return r.toString()}function nFe(t){var e,r;const n=yoe();try{return t!=null&&t.url&&n.url&&new URL(t.url).host!==new URL(n.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),t.url=n.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),JLe(qK(qK({},n),t),{url:t?.url||n.url,name:t?.name||n.name,description:t?.description||n.description,icons:(r=t?.icons)!=null&&r.length&&t.icons.length>0?t.icons:n.icons})}catch(s){return console.warn("Error populating app metadata",s),t||n}}function yoe(){return fX.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function sFe(){if(k_()===oc.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=lX();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function iFe(){var t;const e=k_();return e===oc.browser?[e,((t=di.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function boe(t,e,r){const n=sFe(),s=iFe();return[[t,e].join("-"),[QLe,r].join("-"),n,s].join("/")}function oFe({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=r.split("?"),l=boe(t,e,n),d={auth:s,ua:l,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},f=rFe(u[1]||"",d);return u[0]+"?"+f}function f0(t,e){return t.filter(r=>e.includes(r)).length===t.length}function KO(t){return Object.fromEntries(t.entries())}function ZO(t){return new Map(Object.entries(t))}function zp(t=he.FIVE_MINUTES,e){const r=he.toMiliseconds(t||he.FIVE_MINUTES);let n,s,i,o;return{resolve:a=>{i&&n&&(clearTimeout(i),n(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),c(u)},r),n=a,s=c})}}function Sl(t,e,r){return new Promise(async(n,s)=>{const i=setTimeout(()=>s(new Error(r)),e);try{const o=await t;n(o)}catch(o){s(o)}clearTimeout(i)})}function woe(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function aFe(t){return woe("topic",t)}function cFe(t){return woe("id",t)}function voe(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function zs(t,e){return he.fromMiliseconds(Date.now()+he.toMiliseconds(t))}function nh(t){return Date.now()>=he.toMiliseconds(t)}function nn(t,e){return`${t}${e?`:${e}`:""}`}function Ol(t=[],e=[]){return[...new Set([...t,...e])]}async function uFe({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r,i=s?.href;if(typeof i!="string")return;const o=lFe(i,t,e),a=k_();if(a===oc.browser){if(!((n=di.getDocument())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}dFe(o)}else a===oc.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function lFe(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${gFe(n,!0)}`}else s=`${s}/wc?${n}`;return s}function dFe(t){let e="_self";pFe()?e="_top":(hFe()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function fFe(t,e){let r="";try{if(fb()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function WK(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function VK(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function I9(){return typeof process<"u"&&zLe.IS_VITEST==="true"}function hFe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function pFe(){try{return window.self!==window.top}catch{return!1}}function gFe(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function Eoe(t){return Buffer.from(t,"base64").toString("utf-8")}function mFe(t){return new Promise(e=>setTimeout(e,t))}let yFe=class{constructor({limit:e}){HK(this,"limit"),HK(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const r=this.set.values().next().value;r&&this.set.delete(r)}this.set.add(e)}}has(e){return this.set.has(e)}};const JS=BigInt(2**32-1),GK=BigInt(32);function _oe(t,e=!1){return e?{h:Number(t&JS),l:Number(t>>GK&JS)}:{h:Number(t>>GK&JS)|0,l:Number(t&JS)|0}}function Aoe(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:o,l:a}=_oe(t[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const KK=(t,e,r)=>t>>>r,ZK=(t,e,r)=>t<<32-r|e>>>r,sh=(t,e,r)=>t>>>r|e<<32-r,ih=(t,e,r)=>t<<32-r|e>>>r,x1=(t,e,r)=>t<<64-r|e>>>r-32,C1=(t,e,r)=>t>>>r-32|e<<64-r,bFe=(t,e)=>e,wFe=(t,e)=>t,vFe=(t,e,r)=>t<<r|e>>>32-r,EFe=(t,e,r)=>e<<r|t>>>32-r,_Fe=(t,e,r)=>e<<r-32|t>>>64-r,AFe=(t,e,r)=>t<<r-32|e>>>64-r;function Eu(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const T9=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),N9=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,xFe=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),CFe=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,SFe=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),IFe=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,cm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function P9(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function af(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Vc(t,...e){if(!P9(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function R9(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");af(t.outputLen),af(t.blockLen)}function Uh(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function O9(t,e){Vc(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function fE(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Gc(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function SR(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function cl(t,e){return t<<32-e|t>>>e}const xoe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Coe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Rd=xoe?t=>t:t=>Coe(t);function TFe(t){for(let e=0;e<t.length;e++)t[e]=Coe(t[e]);return t}const oh=xoe?t=>t:TFe,Soe=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",NFe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function hE(t){if(Vc(t),Soe)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=NFe[t[r]];return e}const Id={_0:48,_9:57,A:65,F:70,a:97,f:102};function YK(t){if(t>=Id._0&&t<=Id._9)return t-Id._0;if(t>=Id.A&&t<=Id.F)return t-(Id.A-10);if(t>=Id.a&&t<=Id.f)return t-(Id.a-10)}function k9(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Soe)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=YK(t.charCodeAt(i)),a=YK(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function PFe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Du(t){return typeof t=="string"&&(t=PFe(t)),Vc(t),t}function h0(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];Vc(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let t3=class{};function B_(t){const e=n=>t().update(Du(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function RFe(t){const e=(n,s)=>t(s).update(Du(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function hb(t=32){if(cm&&typeof cm.getRandomValues=="function")return cm.getRandomValues(new Uint8Array(t));if(cm&&typeof cm.randomBytes=="function")return Uint8Array.from(cm.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const OFe=BigInt(0),o1=BigInt(1),kFe=BigInt(2),BFe=BigInt(7),UFe=BigInt(256),MFe=BigInt(113),Ioe=[],Toe=[],Noe=[];for(let t=0,e=o1,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Ioe.push(2*(5*n+r)),Toe.push((t+1)*(t+2)/2%64);let s=OFe;for(let i=0;i<7;i++)e=(e<<o1^(e>>BFe)*MFe)%UFe,e&kFe&&(s^=o1<<(o1<<BigInt(i))-o1);Noe.push(s)}const Poe=Aoe(Noe,!0),DFe=Poe[0],jFe=Poe[1],JK=(t,e,r)=>r>32?_Fe(t,e,r):vFe(t,e,r),XK=(t,e,r)=>r>32?AFe(t,e,r):EFe(t,e,r);function LFe(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],d=JK(u,l,1)^r[a],f=XK(u,l,1)^r[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Toe[o],c=JK(s,i,a),u=XK(s,i,a),l=Ioe[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=DFe[n],t[1]^=jFe[n]}Gc(r)}let FFe=class Roe extends t3{constructor(e,r,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,af(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=fE(this.state)}clone(){return this._cloneInto()}keccak(){oh(this.state32),LFe(this.state32,this.rounds),oh(this.state32),this.posOut=0,this.pos=0}update(e){Uh(this),e=Du(e),Vc(e);const{blockLen:r,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Uh(this,!1),Vc(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return af(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(O9(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Gc(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Roe(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const $Fe=(t,e,r)=>B_(()=>new FFe(e,t,r)),qFe=$Fe(1,136,256/8);function HFe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function zFe(t,e,r){return t&e^~t&r}function WFe(t,e,r){return t&e^t&r^e&r}let Ooe=class extends t3{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=SR(this.buffer)}update(e){Uh(this),e=Du(e),Vc(e);const{view:r,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=SR(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Uh(this),O9(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,Gc(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;HFe(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=SR(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}};const Gf=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),eo=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),to=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),VFe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Kf=new Uint32Array(64);let GFe=class extends Ooe{constructor(e=32){super(64,e,8,!1),this.A=Gf[0]|0,this.B=Gf[1]|0,this.C=Gf[2]|0,this.D=Gf[3]|0,this.E=Gf[4]|0,this.F=Gf[5]|0,this.G=Gf[6]|0,this.H=Gf[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)Kf[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const f=Kf[d-15],p=Kf[d-2],g=cl(f,7)^cl(f,18)^f>>>3,h=cl(p,17)^cl(p,19)^p>>>10;Kf[d]=h+Kf[d-7]+g+Kf[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=cl(a,6)^cl(a,11)^cl(a,25),p=l+f+zFe(a,c,u)+VFe[d]+Kf[d]|0,g=(cl(n,2)^cl(n,13)^cl(n,22))+WFe(n,s,i)|0;l=u,u=c,c=a,a=o+p|0,o=i,i=s,s=n,n=p+g|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){Gc(Kf)}destroy(){this.set(0,0,0,0,0,0,0,0),Gc(this.buffer)}};const koe=Aoe(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),KFe=koe[0],ZFe=koe[1],Zf=new Uint32Array(80),Yf=new Uint32Array(80);let B9=class extends Ooe{constructor(e=64){super(128,e,16,!1),this.Ah=to[0]|0,this.Al=to[1]|0,this.Bh=to[2]|0,this.Bl=to[3]|0,this.Ch=to[4]|0,this.Cl=to[5]|0,this.Dh=to[6]|0,this.Dl=to[7]|0,this.Eh=to[8]|0,this.El=to[9]|0,this.Fh=to[10]|0,this.Fl=to[11]|0,this.Gh=to[12]|0,this.Gl=to[13]|0,this.Hh=to[14]|0,this.Hl=to[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:p,Gl:g,Hh:h,Hl:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=p|0,this.Gl=g|0,this.Hh=h|0,this.Hl=y|0}process(e,r){for(let C=0;C<16;C++,r+=4)Zf[C]=e.getUint32(r),Yf[C]=e.getUint32(r+=4);for(let C=16;C<80;C++){const _=Zf[C-15]|0,T=Yf[C-15]|0,P=sh(_,T,1)^sh(_,T,8)^KK(_,T,7),D=ih(_,T,1)^ih(_,T,8)^ZK(_,T,7),L=Zf[C-2]|0,I=Yf[C-2]|0,U=sh(L,I,19)^x1(L,I,61)^KK(L,I,6),F=ih(L,I,19)^C1(L,I,61)^ZK(L,I,6),B=xFe(D,F,Yf[C-7],Yf[C-16]),A=CFe(B,P,U,Zf[C-7],Zf[C-16]);Zf[C]=A|0,Yf[C]=B|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:p,Fl:g,Gh:h,Gl:y,Hh:E,Hl:S}=this;for(let C=0;C<80;C++){const _=sh(d,f,14)^sh(d,f,18)^x1(d,f,41),T=ih(d,f,14)^ih(d,f,18)^C1(d,f,41),P=d&p^~d&h,D=f&g^~f&y,L=SFe(S,T,D,ZFe[C],Yf[C]),I=IFe(L,E,_,P,KFe[C],Zf[C]),U=L|0,F=sh(n,s,28)^x1(n,s,34)^x1(n,s,39),B=ih(n,s,28)^C1(n,s,34)^C1(n,s,39),A=n&i^n&a^i&a,m=s&o^s&c^o&c;E=h|0,S=y|0,h=p|0,y=g|0,p=d|0,g=f|0,{h:d,l:f}=Eu(u|0,l|0,I|0,U|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const b=T9(U,B,m);n=N9(b,I,F,A),s=b|0}({h:n,l:s}=Eu(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Eu(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Eu(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=Eu(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=Eu(this.Eh|0,this.El|0,d|0,f|0),{h:p,l:g}=Eu(this.Fh|0,this.Fl|0,p|0,g|0),{h,l:y}=Eu(this.Gh|0,this.Gl|0,h|0,y|0),{h:E,l:S}=Eu(this.Hh|0,this.Hl|0,E|0,S|0),this.set(n,s,i,o,a,c,u,l,d,f,p,g,h,y,E,S)}roundClean(){Gc(Zf,Yf)}destroy(){Gc(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},YFe=class extends B9{constructor(){super(48),this.Ah=eo[0]|0,this.Al=eo[1]|0,this.Bh=eo[2]|0,this.Bl=eo[3]|0,this.Ch=eo[4]|0,this.Cl=eo[5]|0,this.Dh=eo[6]|0,this.Dl=eo[7]|0,this.Eh=eo[8]|0,this.El=eo[9]|0,this.Fh=eo[10]|0,this.Fl=eo[11]|0,this.Gh=eo[12]|0,this.Gl=eo[13]|0,this.Hh=eo[14]|0,this.Hl=eo[15]|0}};const ro=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class JFe extends B9{constructor(){super(32),this.Ah=ro[0]|0,this.Al=ro[1]|0,this.Bh=ro[2]|0,this.Bl=ro[3]|0,this.Ch=ro[4]|0,this.Cl=ro[5]|0,this.Dh=ro[6]|0,this.Dl=ro[7]|0,this.Eh=ro[8]|0,this.El=ro[9]|0,this.Fh=ro[10]|0,this.Fl=ro[11]|0,this.Gh=ro[12]|0,this.Gl=ro[13]|0,this.Hh=ro[14]|0,this.Hl=ro[15]|0}}const r3=B_(()=>new GFe),XFe=B_(()=>new B9),QFe=B_(()=>new YFe),e$e=B_(()=>new JFe),t$e=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),$s=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Xe=new Uint32Array(32);function Jf(t,e,r,n,s,i){const o=s[i],a=s[i+1];let c=Xe[2*t],u=Xe[2*t+1],l=Xe[2*e],d=Xe[2*e+1],f=Xe[2*r],p=Xe[2*r+1],g=Xe[2*n],h=Xe[2*n+1],y=T9(c,l,o);u=N9(y,u,d,a),c=y|0,{Dh:h,Dl:g}={Dh:h^u,Dl:g^c},{Dh:h,Dl:g}={Dh:bFe(h,g),Dl:wFe(h)},{h:p,l:f}=Eu(p,f,h,g),{Bh:d,Bl:l}={Bh:d^p,Bl:l^f},{Bh:d,Bl:l}={Bh:sh(d,l,24),Bl:ih(d,l,24)},Xe[2*t]=c,Xe[2*t+1]=u,Xe[2*e]=l,Xe[2*e+1]=d,Xe[2*r]=f,Xe[2*r+1]=p,Xe[2*n]=g,Xe[2*n+1]=h}function Xf(t,e,r,n,s,i){const o=s[i],a=s[i+1];let c=Xe[2*t],u=Xe[2*t+1],l=Xe[2*e],d=Xe[2*e+1],f=Xe[2*r],p=Xe[2*r+1],g=Xe[2*n],h=Xe[2*n+1],y=T9(c,l,o);u=N9(y,u,d,a),c=y|0,{Dh:h,Dl:g}={Dh:h^u,Dl:g^c},{Dh:h,Dl:g}={Dh:sh(h,g,16),Dl:ih(h,g,16)},{h:p,l:f}=Eu(p,f,h,g),{Bh:d,Bl:l}={Bh:d^p,Bl:l^f},{Bh:d,Bl:l}={Bh:x1(d,l,63),Bl:C1(d,l,63)},Xe[2*t]=c,Xe[2*t+1]=u,Xe[2*e]=l,Xe[2*e+1]=d,Xe[2*r]=f,Xe[2*r+1]=p,Xe[2*n]=g,Xe[2*n+1]=h}function r$e(t,e={},r,n,s){if(af(r),t<0||t>r)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>r))throw new Error("key length must be undefined or 1.."+r);if(o!==void 0&&o.length!==n)throw new Error("salt must be undefined or "+n);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class n$e extends t3{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,af(e),af(r),this.blockLen=e,this.outputLen=r,this.buffer=new Uint8Array(e),this.buffer32=fE(this.buffer)}update(e){Uh(this),e=Du(e),Vc(e);const{blockLen:r,buffer:n,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===r&&(oh(s),this.compress(s,0,!1),oh(s),this.pos=0);const u=Math.min(r-this.pos,i-c),l=o+c;if(u===r&&!(l%4)&&c+u<i){const d=new Uint32Array(a,l,Math.floor((i-c)/4));oh(d);for(let f=0;c+r<i;f+=s.length,c+=r)this.length+=r,this.compress(d,f,!1);oh(d);continue}n.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){Uh(this),O9(e,this);const{pos:r,buffer32:n}=this;this.finished=!0,Gc(this.buffer.subarray(r)),oh(n),this.compress(n,0,!0),oh(n);const s=fE(e);this.get().forEach((i,o)=>s[o]=Rd(i))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){const{buffer:r,length:n,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(r),e.destroyed=i,e.finished=s,e.length=n,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class s$e extends n$e{constructor(e={}){const r=e.dkLen===void 0?64:e.dkLen;super(128,r),this.v0l=$s[0]|0,this.v0h=$s[1]|0,this.v1l=$s[2]|0,this.v1h=$s[3]|0,this.v2l=$s[4]|0,this.v2h=$s[5]|0,this.v3l=$s[6]|0,this.v3h=$s[7]|0,this.v4l=$s[8]|0,this.v4h=$s[9]|0,this.v5l=$s[10]|0,this.v5h=$s[11]|0,this.v6l=$s[12]|0,this.v6h=$s[13]|0,this.v7l=$s[14]|0,this.v7h=$s[15]|0,r$e(r,e,64,16,16);let{key:n,personalization:s,salt:i}=e,o=0;if(n!==void 0&&(n=Du(n),o=n.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Du(i);const a=fE(i);this.v4l^=Rd(a[0]),this.v4h^=Rd(a[1]),this.v5l^=Rd(a[2]),this.v5h^=Rd(a[3])}if(s!==void 0){s=Du(s);const a=fE(s);this.v6l^=Rd(a[0]),this.v6h^=Rd(a[1]),this.v7l^=Rd(a[2]),this.v7h^=Rd(a[3])}if(n!==void 0){const a=new Uint8Array(this.blockLen);a.set(n),this.update(a)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:u,v4h:l,v5l:d,v5h:f,v6l:p,v6h:g,v7l:h,v7h:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=l|0,this.v5l=d|0,this.v5h=f|0,this.v6l=p|0,this.v6h=g|0,this.v7l=h|0,this.v7h=y|0}compress(e,r,n){this.get().forEach((c,u)=>Xe[u]=c),Xe.set($s,16);let{h:s,l:i}=_oe(BigInt(this.length));Xe[24]=$s[8]^i,Xe[25]=$s[9]^s,n&&(Xe[28]=~Xe[28],Xe[29]=~Xe[29]);let o=0;const a=t$e;for(let c=0;c<12;c++)Jf(0,4,8,12,e,r+2*a[o++]),Xf(0,4,8,12,e,r+2*a[o++]),Jf(1,5,9,13,e,r+2*a[o++]),Xf(1,5,9,13,e,r+2*a[o++]),Jf(2,6,10,14,e,r+2*a[o++]),Xf(2,6,10,14,e,r+2*a[o++]),Jf(3,7,11,15,e,r+2*a[o++]),Xf(3,7,11,15,e,r+2*a[o++]),Jf(0,5,10,15,e,r+2*a[o++]),Xf(0,5,10,15,e,r+2*a[o++]),Jf(1,6,11,12,e,r+2*a[o++]),Xf(1,6,11,12,e,r+2*a[o++]),Jf(2,7,8,13,e,r+2*a[o++]),Xf(2,7,8,13,e,r+2*a[o++]),Jf(3,4,9,14,e,r+2*a[o++]),Xf(3,4,9,14,e,r+2*a[o++]);this.v0l^=Xe[0]^Xe[16],this.v0h^=Xe[1]^Xe[17],this.v1l^=Xe[2]^Xe[18],this.v1h^=Xe[3]^Xe[19],this.v2l^=Xe[4]^Xe[20],this.v2h^=Xe[5]^Xe[21],this.v3l^=Xe[6]^Xe[22],this.v3h^=Xe[7]^Xe[23],this.v4l^=Xe[8]^Xe[24],this.v4h^=Xe[9]^Xe[25],this.v5l^=Xe[10]^Xe[26],this.v5h^=Xe[11]^Xe[27],this.v6l^=Xe[12]^Xe[28],this.v6h^=Xe[13]^Xe[29],this.v7l^=Xe[14]^Xe[30],this.v7h^=Xe[15]^Xe[31],Gc(Xe)}destroy(){this.destroyed=!0,Gc(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const i$e=RFe(t=>new s$e(t)),o$e="https://rpc.walletconnect.org/v1";function Boe(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(qFe(r)).toString("hex")}async function a$e(t,e,r,n,s,i){switch(r.t){case"eip191":return await c$e(t,e,r.s);case"eip1271":return await u$e(t,e,r.s,n,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function c$e(t,e,r){return(await HLe({hash:Boe(e),signature:r})).toLowerCase()===t.toLowerCase()}async function u$e(t,e,r,n,s,i){const o=x0(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u=r.substring(2),l=(u.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:Boe(e)).substring(2),f=a+d+c+l+u,p=await fetch(`${i||o$e}/?chainId=${n}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:l$e(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:f},"latest"]})}),{result:g}=await p.json();return g?g.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function l$e(){return Date.now()+Math.floor(Math.random()*1e3)}function d$e(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const s=1+n*64;if(r.length<s)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Zn.encode(i)}function f$e(t){const e=new Uint8Array(Buffer.from(t,"base64")),r=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),n=new Uint8Array(r.length+e.length);n.set(r),n.set(e,r.length);const s=i$e(n,{dkLen:32});return Zn.encode(s)}function QK(t){const e=new Uint8Array(r3(h$e(t)));return Zn.encode(e)}function h$e(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function eZ(t){const e=Buffer.from(t,"base64"),r=UQ(e).txn;if(!r)throw new Error("Invalid signed transaction: missing 'txn' field");const n=OQ(r),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(n)]),o=e$e(i);return SQ.encode(o).replace(/=+$/,"")}function IR(t){const e=[];let r=BigInt(t);for(;r>=BigInt(128);)e.push(Number(r&BigInt(127)|BigInt(128))),r>>=BigInt(7);return e.push(Number(r)),Buffer.from(e)}function p$e(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),r=Buffer.from(t.signed.authInfoBytes,"base64"),n=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(IR(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(IR(r.length)),s.push(r),s.push(Buffer.from([26])),s.push(IR(n.length)),s.push(n);const i=Buffer.concat(s),o=r3(i);return Buffer.from(o).toString("hex").toUpperCase()}var g$e=Object.defineProperty,m$e=Object.defineProperties,y$e=Object.getOwnPropertyDescriptors,tZ=Object.getOwnPropertySymbols,b$e=Object.prototype.hasOwnProperty,w$e=Object.prototype.propertyIsEnumerable,rZ=(t,e,r)=>e in t?g$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,v$e=(t,e)=>{for(var r in e||(e={}))b$e.call(e,r)&&rZ(t,r,e[r]);if(tZ)for(var r of tZ(e))w$e.call(e,r)&&rZ(t,r,e[r]);return t},E$e=(t,e)=>m$e(t,y$e(e));const _$e="did:pkh:",U9=t=>t?.split(":"),A$e=t=>{const e=t&&U9(t);if(e)return t.includes(_$e)?e[3]:e[1]},YO=t=>{const e=t&&U9(t);if(e)return e[2]+":"+e[3]},fT=t=>{const e=t&&U9(t);if(e)return e.pop()};async function nZ(t){const{cacao:e,projectId:r}=t,{s:n,p:s}=e,i=Uoe(s,s.iss),o=fT(s.iss);return await a$e(o,i,n,YO(s.iss),r)}const Uoe=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=fT(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${A$e(e)}`,c=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,l=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,f=t.requestId?`Request ID: ${t.requestId}`:void 0,p=t.resources?`Resources:${t.resources.map(h=>`
- ${h}`).join("")}`:void 0,g=LI(t.resources);if(g){const h=pE(g);s=O$e(s,h)}return[r,n,"",s,"",i,o,a,c,u,l,d,f,p].filter(h=>h!=null).join(`
`)};function x$e(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function C$e(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function L0(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(s=>{const i=n[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function S$e(t,e,r,n={}){return r?.sort((s,i)=>s.localeCompare(i)),{att:{[t]:I$e(e,r,n)}}}function I$e(t,e,r={}){e=e?.sort((s,i)=>s.localeCompare(i));const n=e.map(s=>({[`${t}/${s}`]:[r]}));return Object.assign({},...n)}function Moe(t){return L0(t),`urn:recap:${x$e(t).replace(/=/g,"")}`}function pE(t){const e=C$e(t.replace("urn:recap:",""));return L0(e),e}function T$e(t,e,r){const n=S$e(t,e,r);return Moe(n)}function N$e(t){return t&&t.includes("urn:recap:")}function P$e(t,e){const r=pE(t),n=pE(e),s=R$e(r,n);return Moe(s)}function R$e(t,e){L0(t),L0(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),n={att:{}};return r.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;n.att[s]=E$e(v$e({},n.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((u=e.att[s])==null?void 0:u[a])})})}),n}function O$e(t="",e){L0(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,f)=>d.action.localeCompare(f.action));const u={};c.forEach(d=>{u[d.ability]||(u[d.ability]=[]),u[d.ability].push(d.action)});const l=Object.keys(u).map(d=>(s++,`(${s}) '${d}': '${u[d].join("', '")}' for '${a}'.`));n.push(l.join(", ").replace(".,","."))});const i=n.join(" "),o=`${r}${i}`;return`${t?t+" ":""}${o}`}function sZ(t){var e;const r=pE(t);L0(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(s=>s.split("/")[1]):[]}function iZ(t){const e=pE(t);L0(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(s=>{var i;(i=s?.[0])!=null&&i.chains&&r.push(s[0].chains)})}),[...new Set(r.flat())]}function LI(t){if(!t)return;const e=t?.[t.length-1];return N$e(e)?e:void 0}function Doe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function JO(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function TR(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ga(t,...e){if(!Doe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function oZ(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function k$e(t,e){ga(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function xh(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Dy(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function B$e(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const U$e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function M$e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function XO(t){if(typeof t=="string")t=M$e(t);else if(Doe(t))t=QO(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function D$e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function j$e(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const L$e=(t,e)=>{function r(n,...s){if(ga(n),!U$e)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?ga(u):ga(u,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&ga(s[1]);const o=e(n,...s),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");ga(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,ga(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(ga(u),i&&u.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(r,t),r};function aZ(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!$$e(e))throw new Error("invalid output, must be aligned");return e}function cZ(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function F$e(t,e,r){JO(r);const n=new Uint8Array(16),s=B$e(n);return cZ(s,0,BigInt(e),r),cZ(s,8,BigInt(t),r),n}function $$e(t){return t.byteOffset%4===0}function QO(t){return Uint8Array.from(t)}const joe=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),q$e=joe("expand 16-byte k"),H$e=joe("expand 32-byte k"),z$e=xh(q$e),W$e=xh(H$e);function Fr(t,e){return t<<e|t>>>32-e}function e4(t){return t.byteOffset%4===0}const XS=64,V$e=16,Loe=2**32-1,uZ=new Uint32Array;function G$e(t,e,r,n,s,i,o,a){const c=s.length,u=new Uint8Array(XS),l=xh(u),d=e4(s)&&e4(i),f=d?xh(s):uZ,p=d?xh(i):uZ;for(let g=0;g<c;o++){if(t(e,r,n,l,o,a),o>=Loe)throw new Error("arx: counter overflow");const h=Math.min(XS,c-g);if(d&&h===XS){const y=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let E=0,S;E<V$e;E++)S=y+E,p[S]=f[S]^l[E];g+=XS;continue}for(let y=0,E;y<h;y++)E=g+y,i[E]=s[E]^u[y];g+=h}}function K$e(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=D$e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return TR(s),TR(o),JO(i),JO(r),(a,c,u,l,d=0)=>{ga(a),ga(c),ga(u);const f=u.length;if(l===void 0&&(l=new Uint8Array(f)),ga(l),TR(d),d<0||d>=Loe)throw new Error("arx: counter overflow");if(l.length<f)throw new Error(`arx: output (${l.length}) is shorter than data (${f})`);const p=[];let g=a.length,h,y;if(g===32)p.push(h=QO(a)),y=W$e;else if(g===16&&r)h=new Uint8Array(32),h.set(a),h.set(a,16),y=z$e,p.push(h);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);e4(c)||p.push(c=QO(c));const E=xh(h);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(y,E,xh(c.subarray(0,16)),E),c=c.subarray(16)}const S=16-s;if(S!==c.length)throw new Error(`arx: nonce must be ${S} or 16 bytes`);if(S!==12){const _=new Uint8Array(12);_.set(c,i?0:12-c.length),c=_,p.push(c)}const C=xh(c);return G$e(t,y,E,C,u,l,d,o),Dy(...p),l}}const wi=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Z$e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=XO(e),ga(e,32);const r=wi(e,0),n=wi(e,2),s=wi(e,4),i=wi(e,6),o=wi(e,8),a=wi(e,10),c=wi(e,12),u=wi(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=wi(e,16+2*l)}process(e,r,n=!1){const s=n?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],d=o[4],f=o[5],p=o[6],g=o[7],h=o[8],y=o[9],E=wi(e,r+0),S=wi(e,r+2),C=wi(e,r+4),_=wi(e,r+6),T=wi(e,r+8),P=wi(e,r+10),D=wi(e,r+12),L=wi(e,r+14);let I=i[0]+(E&8191),U=i[1]+((E>>>13|S<<3)&8191),F=i[2]+((S>>>10|C<<6)&8191),B=i[3]+((C>>>7|_<<9)&8191),A=i[4]+((_>>>4|T<<12)&8191),m=i[5]+(T>>>1&8191),b=i[6]+((T>>>14|P<<2)&8191),w=i[7]+((P>>>11|D<<5)&8191),x=i[8]+((D>>>8|L<<8)&8191),M=i[9]+(L>>>5|s),k=0,j=k+I*a+U*(5*y)+F*(5*h)+B*(5*g)+A*(5*p);k=j>>>13,j&=8191,j+=m*(5*f)+b*(5*d)+w*(5*l)+x*(5*u)+M*(5*c),k+=j>>>13,j&=8191;let N=k+I*c+U*a+F*(5*y)+B*(5*h)+A*(5*g);k=N>>>13,N&=8191,N+=m*(5*p)+b*(5*f)+w*(5*d)+x*(5*l)+M*(5*u),k+=N>>>13,N&=8191;let v=k+I*u+U*c+F*a+B*(5*y)+A*(5*h);k=v>>>13,v&=8191,v+=m*(5*g)+b*(5*p)+w*(5*f)+x*(5*d)+M*(5*l),k+=v>>>13,v&=8191;let R=k+I*l+U*u+F*c+B*a+A*(5*y);k=R>>>13,R&=8191,R+=m*(5*h)+b*(5*g)+w*(5*p)+x*(5*f)+M*(5*d),k+=R>>>13,R&=8191;let $=k+I*d+U*l+F*u+B*c+A*a;k=$>>>13,$&=8191,$+=m*(5*y)+b*(5*h)+w*(5*g)+x*(5*p)+M*(5*f),k+=$>>>13,$&=8191;let O=k+I*f+U*d+F*l+B*u+A*c;k=O>>>13,O&=8191,O+=m*a+b*(5*y)+w*(5*h)+x*(5*g)+M*(5*p),k+=O>>>13,O&=8191;let H=k+I*p+U*f+F*d+B*l+A*u;k=H>>>13,H&=8191,H+=m*c+b*a+w*(5*y)+x*(5*h)+M*(5*g),k+=H>>>13,H&=8191;let W=k+I*g+U*p+F*f+B*d+A*l;k=W>>>13,W&=8191,W+=m*u+b*c+w*a+x*(5*y)+M*(5*h),k+=W>>>13,W&=8191;let G=k+I*h+U*g+F*p+B*f+A*d;k=G>>>13,G&=8191,G+=m*l+b*u+w*c+x*a+M*(5*y),k+=G>>>13,G&=8191;let K=k+I*y+U*h+F*g+B*p+A*f;k=K>>>13,K&=8191,K+=m*d+b*l+w*u+x*c+M*a,k+=K>>>13,K&=8191,k=(k<<2)+k|0,k=k+j|0,j=k&8191,k=k>>>13,N+=k,i[0]=j,i[1]=N,i[2]=v,i[3]=R,i[4]=$,i[5]=O,i[6]=H,i[7]=W,i[8]=G,i[9]=K}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;Dy(n)}update(e){oZ(this),e=XO(e),ga(e);const{buffer:r,blockLen:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Dy(this.h,this.r,this.buffer,this.pad)}digestInto(e){oZ(this),k$e(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function Y$e(t){const e=(n,s)=>t(s).update(XO(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const J$e=Y$e(t=>new Z$e(t));function X$e(t,e,r,n,s,i=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],d=e[1],f=e[2],p=e[3],g=e[4],h=e[5],y=e[6],E=e[7],S=s,C=r[0],_=r[1],T=r[2],P=o,D=a,L=c,I=u,U=l,F=d,B=f,A=p,m=g,b=h,w=y,x=E,M=S,k=C,j=_,N=T;for(let R=0;R<i;R+=2)P=P+U|0,M=Fr(M^P,16),m=m+M|0,U=Fr(U^m,12),P=P+U|0,M=Fr(M^P,8),m=m+M|0,U=Fr(U^m,7),D=D+F|0,k=Fr(k^D,16),b=b+k|0,F=Fr(F^b,12),D=D+F|0,k=Fr(k^D,8),b=b+k|0,F=Fr(F^b,7),L=L+B|0,j=Fr(j^L,16),w=w+j|0,B=Fr(B^w,12),L=L+B|0,j=Fr(j^L,8),w=w+j|0,B=Fr(B^w,7),I=I+A|0,N=Fr(N^I,16),x=x+N|0,A=Fr(A^x,12),I=I+A|0,N=Fr(N^I,8),x=x+N|0,A=Fr(A^x,7),P=P+F|0,N=Fr(N^P,16),w=w+N|0,F=Fr(F^w,12),P=P+F|0,N=Fr(N^P,8),w=w+N|0,F=Fr(F^w,7),D=D+B|0,M=Fr(M^D,16),x=x+M|0,B=Fr(B^x,12),D=D+B|0,M=Fr(M^D,8),x=x+M|0,B=Fr(B^x,7),L=L+A|0,k=Fr(k^L,16),m=m+k|0,A=Fr(A^m,12),L=L+A|0,k=Fr(k^L,8),m=m+k|0,A=Fr(A^m,7),I=I+U|0,j=Fr(j^I,16),b=b+j|0,U=Fr(U^b,12),I=I+U|0,j=Fr(j^I,8),b=b+j|0,U=Fr(U^b,7);let v=0;n[v++]=o+P|0,n[v++]=a+D|0,n[v++]=c+L|0,n[v++]=u+I|0,n[v++]=l+U|0,n[v++]=d+F|0,n[v++]=f+B|0,n[v++]=p+A|0,n[v++]=g+m|0,n[v++]=h+b|0,n[v++]=y+w|0,n[v++]=E+x|0,n[v++]=S+M|0,n[v++]=C+k|0,n[v++]=_+j|0,n[v++]=T+N|0}const Q$e=K$e(X$e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),eqe=new Uint8Array(16),lZ=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(eqe.subarray(r))},tqe=new Uint8Array(32);function dZ(t,e,r,n,s){const i=t(e,r,tqe),o=J$e.create(i);s&&lZ(o,s),lZ(o,n);const a=F$e(n.length,s?s.length:0,!0);o.update(a);const c=o.digest();return Dy(i,a),c}const rqe=t=>(e,r,n)=>({encrypt(s,i){const o=s.length;i=aZ(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,r,a,a,1);const c=dZ(t,e,r,a,n);return i.set(c,o),Dy(c),i},decrypt(s,i){i=aZ(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=dZ(t,e,r,o,n);if(!j$e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,r,i,i,1),Dy(c),i}}),Foe=L$e({blockSize:64,nonceLength:12,tagLength:16},rqe(Q$e));let $oe=class extends t3{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,R9(e);const n=Du(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Gc(i)}update(e){return Uh(this),this.iHash.update(e),this}digestInto(e){Uh(this),Vc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const n3=(t,e,r)=>new $oe(t,e).update(r).digest();n3.create=(t,e)=>new $oe(t,e);function nqe(t,e,r){return R9(t),r===void 0&&(r=new Uint8Array(t.outputLen)),n3(t,Du(r),Du(e))}const NR=Uint8Array.from([0]),fZ=Uint8Array.of();function sqe(t,e,r,n=32){R9(t),af(n);const s=t.outputLen;if(n>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/s);r===void 0&&(r=fZ);const o=new Uint8Array(i*s),a=n3.create(t,e),c=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let l=0;l<i;l++)NR[0]=l+1,c.update(l===0?fZ:u).update(r).update(NR).digestInto(u),o.set(u,s*l),a._cloneInto(c);return a.destroy(),c.destroy(),Gc(u,NR),o.slice(0,n)}const iqe=(t,e,r,n,s)=>sqe(t,nqe(t,e,r),n,s),s3=r3,M9=BigInt(0),t4=BigInt(1);function hT(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function QS(t){const e=t.toString(16);return e.length&1?"0"+e:e}function qoe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?M9:BigInt("0x"+t)}function i3(t){return qoe(hE(t))}function pT(t){return Vc(t),qoe(hE(Uint8Array.from(t).reverse()))}function D9(t,e){return k9(t.toString(16).padStart(e*2,"0"))}function j9(t,e){return D9(t,e).reverse()}function ca(t,e,r){let n;if(typeof e=="string")try{n=k9(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(P9(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}const PR=t=>typeof t=="bigint"&&M9<=t;function oqe(t,e,r){return PR(t)&&PR(e)&&PR(r)&&e<=t&&t<r}function r4(t,e,r,n){if(!oqe(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function aqe(t){let e;for(e=0;t>M9;t>>=t4,e+=1);return e}const o3=t=>(t4<<BigInt(t))-t4;function cqe(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=n(t),o=n(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...f)=>r(o,i,...f),l=(f=n(0))=>{o=u(s(0),f),i=u(),f.length!==0&&(o=u(s(1),f),i=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=u();const g=i.slice();p.push(g),f+=i.length}return h0(...p)};return(f,p)=>{c(),l(f);let g;for(;!(g=p(d()));)l();return c(),g}}function a3(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(r).forEach(([s,i])=>n(s,i,!0))}function hZ(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const _a=BigInt(0),Do=BigInt(1),p0=BigInt(2),uqe=BigInt(3),Hoe=BigInt(4),zoe=BigInt(5),Woe=BigInt(8);function $c(t,e){const r=t%e;return r>=_a?r:e+r}function wu(t,e,r){let n=t;for(;e-- >_a;)n*=n,n%=r;return n}function pZ(t,e){if(t===_a)throw new Error("invert: expected non-zero number");if(e<=_a)throw new Error("invert: expected positive modulus, got "+e);let r=$c(t,e),n=e,s=_a,i=Do;for(;r!==_a;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==Do)throw new Error("invert: does not exist");return $c(s,e)}function Voe(t,e){const r=(t.ORDER+Do)/Hoe,n=t.pow(e,r);if(!t.eql(t.sqr(n),e))throw new Error("Cannot find square root");return n}function lqe(t,e){const r=(t.ORDER-zoe)/Woe,n=t.mul(e,p0),s=t.pow(n,r),i=t.mul(e,s),o=t.mul(t.mul(i,p0),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function dqe(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Do,r=0;for(;e%p0===_a;)e/=p0,r++;let n=p0;const s=pb(t);for(;gZ(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return Voe;let i=s.pow(n,e);const o=(e+Do)/p0;return function(a,c){if(a.is0(c))return c;if(gZ(a,c)!==1)throw new Error("Cannot find square root");let u=r,l=a.mul(a.ONE,i),d=a.pow(c,e),f=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let p=1,g=a.sqr(d);for(;!a.eql(g,a.ONE);)if(p++,g=a.sqr(g),p===u)throw new Error("Cannot find square root");const h=Do<<BigInt(u-p-1),y=a.pow(l,h);u=p,l=a.sqr(y),d=a.mul(d,l),f=a.mul(f,y)}return f}}function fqe(t){return t%Hoe===uqe?Voe:t%Woe===zoe?lqe:dqe(t)}const hqe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function pqe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=hqe.reduce((n,s)=>(n[s]="function",n),e);return a3(t,r),t}function gqe(t,e,r){if(r<_a)throw new Error("invalid exponent, negatives unsupported");if(r===_a)return t.ONE;if(r===Do)return e;let n=t.ONE,s=e;for(;r>_a;)r&Do&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Do;return n}function Goe(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),i),n}function gZ(t,e){const r=(t.ORDER-Do)/p0,n=t.pow(e,r),s=t.eql(n,t.ONE),i=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function mqe(t,e){e!==void 0&&af(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function pb(t,e,r=!1,n={}){if(t<=_a)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const l=e;l.BITS&&(s=l.BITS),l.sqrt&&(i=l.sqrt),typeof l.isLE=="boolean"&&(r=l.isLE)}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:o,nByteLength:a}=mqe(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const u=Object.freeze({ORDER:t,isLE:r,BITS:o,BYTES:a,MASK:o3(o),ZERO:_a,ONE:Do,create:l=>$c(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return _a<=l&&l<t},is0:l=>l===_a,isValidNot0:l=>!u.is0(l)&&u.isValid(l),isOdd:l=>(l&Do)===Do,neg:l=>$c(-l,t),eql:(l,d)=>l===d,sqr:l=>$c(l*l,t),add:(l,d)=>$c(l+d,t),sub:(l,d)=>$c(l-d,t),mul:(l,d)=>$c(l*d,t),pow:(l,d)=>gqe(u,l,d),div:(l,d)=>$c(l*pZ(d,t),t),sqrN:l=>l*l,addN:(l,d)=>l+d,subN:(l,d)=>l-d,mulN:(l,d)=>l*d,inv:l=>pZ(l,t),sqrt:i||(l=>(c||(c=fqe(t)),c(u,l))),toBytes:l=>r?j9(l,a):D9(l,a),fromBytes:l=>{if(l.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+l.length);return r?pT(l):i3(l)},invertBatch:l=>Goe(u,l),cmov:(l,d,f)=>f?d:l});return Object.freeze(u)}function Koe(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Zoe(t){const e=Koe(t);return e+Math.ceil(e/2)}function yqe(t,e,r=!1){const n=t.length,s=Koe(e),i=Zoe(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?pT(t):i3(t),a=$c(o,e-Do)+Do;return r?j9(a,s):D9(a,s)}const jy=BigInt(0),g0=BigInt(1);function K1(t,e){const r=e.negate();return t?r:e}function bqe(t,e,r){const n=i=>i.pz,s=Goe(t.Fp,r.map(n));return r.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function Yoe(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function RR(t,e){Yoe(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),s=2**t,i=o3(t),o=BigInt(t);return{windows:r,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function mZ(t,e,r){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=r;let a=Number(t&s),c=t>>o;a>n&&(a-=i,c+=g0);const u=e*n,l=u+Math.abs(a)-1,d=a===0,f=a<0,p=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:p,offsetF:u}}function wqe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function vqe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const OR=new WeakMap,Joe=new WeakMap;function kR(t){return Joe.get(t)||1}function yZ(t){if(t!==jy)throw new Error("invalid wNAF")}function Eqe(t,e){return{constTimeNegate:K1,hasPrecomputes(r){return kR(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>jy;)n&g0&&(s=s.add(i)),i=i.double(),n>>=g0;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=RR(n,e),o=[];let a=r,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){let i=t.ZERO,o=t.BASE;const a=RR(r,e);for(let c=0;c<a.windows;c++){const{nextN:u,offset:l,isZero:d,isNeg:f,isNegF:p,offsetF:g}=mZ(s,c,a);s=u,d?o=o.add(K1(p,n[g])):i=i.add(K1(f,n[l]))}return yZ(s),{p:i,f:o}},wNAFUnsafe(r,n,s,i=t.ZERO){const o=RR(r,e);for(let a=0;a<o.windows&&s!==jy;a++){const{nextN:c,offset:u,isZero:l,isNeg:d}=mZ(s,a,o);if(s=c,!l){const f=n[u];i=i.add(d?f.negate():f)}}return yZ(s),i},getPrecomputes(r,n,s){let i=OR.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&(typeof s=="function"&&(i=s(i)),OR.set(n,i))),i},wNAFCached(r,n,s){const i=kR(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=kR(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){Yoe(n,e),Joe.set(r,n),OR.delete(r)}}}function _qe(t,e,r,n){let s=e,i=t.ZERO,o=t.ZERO;for(;r>jy||n>jy;)r&g0&&(i=i.add(s)),n&g0&&(o=o.add(s)),s=s.double(),r>>=g0,n>>=g0;return{p1:i,p2:o}}function Aqe(t,e,r,n){wqe(r,t),vqe(n,e);const s=r.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=aqe(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=o3(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let p=d;p>=0;p-=c){l.fill(o);for(let h=0;h<i;h++){const y=n[h],E=Number(y>>BigInt(p)&u);l[E]=l[E].add(r[h])}let g=o;for(let h=l.length-1,y=o;h>0;h--)y=y.add(l[h]),g=g.add(y);if(f=f.add(g),p!==0)for(let h=0;h<c;h++)f=f.double()}return f}function bZ(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return pqe(e),e}else return pb(t)}function xqe(t,e,r={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>jy))throw new Error(`CURVE.${o} must be positive bigint`)}const n=bZ(e.p,r.Fp),s=bZ(e.n,r.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!n.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const a1=BigInt(0),um=BigInt(1),eI=BigInt(2);function Cqe(t){return a3(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function Sqe(t){const e=Cqe(t),{P:r,type:n,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=n==="x25519";if(!a&&n!=="x448")throw new Error("invalid type");const c=o||hb,u=a?255:448,l=a?32:56,d=BigInt(a?9:5),f=BigInt(a?121665:39081),p=a?eI**BigInt(254):eI**BigInt(447),g=a?BigInt(8)*eI**BigInt(251)-um:BigInt(4)*eI**BigInt(445)-um,h=p+g+um,y=I=>$c(I,r),E=S(d);function S(I){return j9(y(I),l)}function C(I){const U=ca("u coordinate",I,l);return a&&(U[31]&=127),y(pT(U))}function _(I){return pT(s(ca("scalar",I,l)))}function T(I,U){const F=L(C(U),_(I));if(F===a1)throw new Error("invalid private or public key received");return S(F)}function P(I){return T(I,E)}function D(I,U,F){const B=y(I*(U-F));return U=y(U-B),F=y(F+B),{x_2:U,x_3:F}}function L(I,U){r4("u",I,a1,r),r4("scalar",U,p,h);const F=U,B=I;let A=um,m=a1,b=I,w=um,x=a1;for(let k=BigInt(u-1);k>=a1;k--){const j=F>>k&um;x^=j,{x_2:A,x_3:b}=D(x,A,b),{x_2:m,x_3:w}=D(x,m,w),x=j;const N=A+m,v=y(N*N),R=A-m,$=y(R*R),O=v-$,H=b+w,W=b-w,G=y(W*N),K=y(H*R),Q=G+K,re=G-K;b=y(Q*Q),w=y(B*y(re*re)),A=y(v*$),m=y(O*(v+y(f*O)))}({x_2:A,x_3:b}=D(x,A,b)),{x_2:m,x_3:w}=D(x,m,w);const M=i(m);return y(A*M)}return{scalarMult:T,scalarMultBase:P,getSharedSecret:(I,U)=>T(I,U),getPublicKey:I=>P(I),utils:{randomPrivateKey:()=>c(l)},GuBytes:E.slice()}}BigInt(0);const Iqe=BigInt(1),wZ=BigInt(2),Tqe=BigInt(3),Nqe=BigInt(5);BigInt(8);const Xoe={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Pqe(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=Xoe.p,o=t*t%i*t%i,a=wu(o,wZ,i)*o%i,c=wu(a,Iqe,i)*t%i,u=wu(c,Nqe,i)*c%i,l=wu(u,e,i)*u%i,d=wu(l,r,i)*l%i,f=wu(d,n,i)*d%i,p=wu(f,s,i)*f%i,g=wu(p,s,i)*f%i,h=wu(g,e,i)*u%i;return{pow_p_5_8:wu(h,wZ,i)*t%i,b2:o}}function Rqe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const n4=(()=>{const t=Xoe.p;return Sqe({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:r,b2:n}=Pqe(e);return $c(wu(r,Tqe,t)*n,t)},adjustScalarBytes:Rqe})})();function vZ(t){t.lowS!==void 0&&hT("lowS",t.lowS),t.prehash!==void 0&&hT("prehash",t.prehash)}class Oqe extends Error{constructor(e=""){super(e)}}const Fd={Err:Oqe,_tlv:{encode:(t,e)=>{const{Err:r}=Fd;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=QS(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?QS(s.length/2|128):"";return QS(t)+i+s+e},decode(t,e){const{Err:r}=Fd;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=Fd;if(t<Z1)throw new e("integer: negative integers are not allowed");let r=QS(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Fd;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return i3(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Fd,s=ca("signature",t),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=Fd,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}},Z1=BigInt(0),Y1=BigInt(1),kqe=BigInt(2),tI=BigInt(3),Bqe=BigInt(4);function Uqe(t,e,r){function n(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),r)}return n}function Qoe(t,e,r){const{BYTES:n}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=ca("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(n);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof i}`)}}if(r&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function Mqe(t,e={}){const{Fp:r,Fn:n}=xqe("weierstrass",t,e),{h:s,n:i}=t;a3(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!r.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(L,I,U){const{x:F,y:B}=I.toAffine(),A=r.toBytes(F);if(hT("isCompressed",U),U){a();const m=!r.isOdd(B);return h0(eae(m),A)}else return h0(Uint8Array.of(4),A,r.toBytes(B))}function u(L){Vc(L);const I=r.BYTES,U=I+1,F=2*I+1,B=L.length,A=L[0],m=L.subarray(1);if(B===U&&(A===2||A===3)){const b=r.fromBytes(m);if(!r.isValid(b))throw new Error("bad point: is not on curve, wrong x");const w=f(b);let x;try{x=r.sqrt(w)}catch(k){const j=k instanceof Error?": "+k.message:"";throw new Error("bad point: is not on curve, sqrt error"+j)}a();const M=r.isOdd(x);return(A&1)===1!==M&&(x=r.neg(x)),{x:b,y:x}}else if(B===F&&A===4){const b=r.fromBytes(m.subarray(I*0,I*1)),w=r.fromBytes(m.subarray(I*1,I*2));if(!p(b,w))throw new Error("bad point: is not on curve");return{x:b,y:w}}else throw new Error(`bad point: got length ${B}, expected compressed=${U} or uncompressed=${F}`)}const l=e.toBytes||c,d=e.fromBytes||u,f=Uqe(r,t.a,t.b);function p(L,I){const U=r.sqr(I),F=f(L);return r.eql(U,F)}if(!p(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const g=r.mul(r.pow(t.a,tI),Bqe),h=r.mul(r.sqr(t.b),BigInt(27));if(r.is0(r.add(g,h)))throw new Error("bad curve params: a or b");function y(L,I,U=!1){if(!r.isValid(I)||U&&r.is0(I))throw new Error(`bad point coordinate ${L}`);return I}function E(L){if(!(L instanceof T))throw new Error("ProjectivePoint expected")}const S=hZ((L,I)=>{const{px:U,py:F,pz:B}=L;if(r.eql(B,r.ONE))return{x:U,y:F};const A=L.is0();I==null&&(I=A?r.ONE:r.inv(B));const m=r.mul(U,I),b=r.mul(F,I),w=r.mul(B,I);if(A)return{x:r.ZERO,y:r.ZERO};if(!r.eql(w,r.ONE))throw new Error("invZ was invalid");return{x:m,y:b}}),C=hZ(L=>{if(L.is0()){if(e.allowInfinityPoint&&!r.is0(L.py))return;throw new Error("bad point: ZERO")}const{x:I,y:U}=L.toAffine();if(!r.isValid(I)||!r.isValid(U))throw new Error("bad point: x or y not field elements");if(!p(I,U))throw new Error("bad point: equation left != right");if(!L.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function _(L,I,U,F,B){return U=new T(r.mul(U.px,L),U.py,U.pz),I=K1(F,I),U=K1(B,U),I.add(U)}class T{constructor(I,U,F){this.px=y("x",I),this.py=y("y",U,!0),this.pz=y("z",F),Object.freeze(this)}static fromAffine(I){const{x:U,y:F}=I||{};if(!I||!r.isValid(U)||!r.isValid(F))throw new Error("invalid affine point");if(I instanceof T)throw new Error("projective point not allowed");return r.is0(U)&&r.is0(F)?T.ZERO:new T(U,F,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){return bqe(T,"pz",I)}static fromBytes(I){return Vc(I),T.fromHex(I)}static fromHex(I){const U=T.fromAffine(d(ca("pointHex",I)));return U.assertValidity(),U}static fromPrivateKey(I){const U=Qoe(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return T.BASE.multiply(U(I))}static msm(I,U){return Aqe(T,n,I,U)}precompute(I=8,U=!0){return D.setWindowSize(this,I),U||this.multiply(tI),this}_setWindowSize(I){this.precompute(I)}assertValidity(){C(this)}hasEvenY(){const{y:I}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(I)}equals(I){E(I);const{px:U,py:F,pz:B}=this,{px:A,py:m,pz:b}=I,w=r.eql(r.mul(U,b),r.mul(A,B)),x=r.eql(r.mul(F,b),r.mul(m,B));return w&&x}negate(){return new T(this.px,r.neg(this.py),this.pz)}double(){const{a:I,b:U}=t,F=r.mul(U,tI),{px:B,py:A,pz:m}=this;let b=r.ZERO,w=r.ZERO,x=r.ZERO,M=r.mul(B,B),k=r.mul(A,A),j=r.mul(m,m),N=r.mul(B,A);return N=r.add(N,N),x=r.mul(B,m),x=r.add(x,x),b=r.mul(I,x),w=r.mul(F,j),w=r.add(b,w),b=r.sub(k,w),w=r.add(k,w),w=r.mul(b,w),b=r.mul(N,b),x=r.mul(F,x),j=r.mul(I,j),N=r.sub(M,j),N=r.mul(I,N),N=r.add(N,x),x=r.add(M,M),M=r.add(x,M),M=r.add(M,j),M=r.mul(M,N),w=r.add(w,M),j=r.mul(A,m),j=r.add(j,j),M=r.mul(j,N),b=r.sub(b,M),x=r.mul(j,k),x=r.add(x,x),x=r.add(x,x),new T(b,w,x)}add(I){E(I);const{px:U,py:F,pz:B}=this,{px:A,py:m,pz:b}=I;let w=r.ZERO,x=r.ZERO,M=r.ZERO;const k=t.a,j=r.mul(t.b,tI);let N=r.mul(U,A),v=r.mul(F,m),R=r.mul(B,b),$=r.add(U,F),O=r.add(A,m);$=r.mul($,O),O=r.add(N,v),$=r.sub($,O),O=r.add(U,B);let H=r.add(A,b);return O=r.mul(O,H),H=r.add(N,R),O=r.sub(O,H),H=r.add(F,B),w=r.add(m,b),H=r.mul(H,w),w=r.add(v,R),H=r.sub(H,w),M=r.mul(k,O),w=r.mul(j,R),M=r.add(w,M),w=r.sub(v,M),M=r.add(v,M),x=r.mul(w,M),v=r.add(N,N),v=r.add(v,N),R=r.mul(k,R),O=r.mul(j,O),v=r.add(v,R),R=r.sub(N,R),R=r.mul(k,R),O=r.add(O,R),N=r.mul(v,O),x=r.add(x,N),N=r.mul(H,O),w=r.mul($,w),w=r.sub(w,N),N=r.mul($,v),M=r.mul(H,M),M=r.add(M,N),new T(w,x,M)}subtract(I){return this.add(I.negate())}is0(){return this.equals(T.ZERO)}multiply(I){const{endo:U}=e;if(!n.isValidNot0(I))throw new Error("invalid scalar: out of range");let F,B;const A=m=>D.wNAFCached(this,m,T.normalizeZ);if(U){const{k1neg:m,k1:b,k2neg:w,k2:x}=U.splitScalar(I),{p:M,f:k}=A(b),{p:j,f:N}=A(x);B=k.add(N),F=_(U.beta,M,j,m,w)}else{const{p:m,f:b}=A(I);F=m,B=b}return T.normalizeZ([F,B])[0]}multiplyUnsafe(I){const{endo:U}=e,F=this;if(!n.isValid(I))throw new Error("invalid scalar: out of range");if(I===Z1||F.is0())return T.ZERO;if(I===Y1)return F;if(D.hasPrecomputes(this))return this.multiply(I);if(U){const{k1neg:B,k1:A,k2neg:m,k2:b}=U.splitScalar(I),{p1:w,p2:x}=_qe(T,F,A,b);return _(U.beta,w,x,B,m)}else return D.wNAFCachedUnsafe(F,I)}multiplyAndAddUnsafe(I,U,F){const B=this.multiplyUnsafe(U).add(I.multiplyUnsafe(F));return B.is0()?void 0:B}toAffine(I){return S(this,I)}isTorsionFree(){const{isTorsionFree:I}=e;return s===Y1?!0:I?I(T,this):D.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:I}=e;return s===Y1?this:I?I(T,this):this.multiplyUnsafe(s)}toBytes(I=!0){return hT("isCompressed",I),this.assertValidity(),l(T,this,I)}toRawBytes(I=!0){return this.toBytes(I)}toHex(I=!0){return hE(this.toBytes(I))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}T.BASE=new T(t.Gx,t.Gy,r.ONE),T.ZERO=new T(r.ZERO,r.ONE,r.ZERO),T.Fp=r,T.Fn=n;const P=n.BITS,D=Eqe(T,e.endo?Math.ceil(P/2):P);return T}function eae(t){return Uint8Array.of(t?2:3)}function Dqe(t,e,r={}){a3(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||hb,s=e.hmac||((F,...B)=>n3(e.hash,F,h0(...B))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function u(F){const B=a>>Y1;return F>B}function l(F){return u(F)?o.neg(F):F}function d(F,B){if(!o.isValidNot0(B))throw new Error(`invalid signature ${F}: out of range 1..CURVE.n`)}class f{constructor(B,A,m){d("r",B),d("s",A),this.r=B,this.s=A,m!=null&&(this.recovery=m),Object.freeze(this)}static fromCompact(B){const A=o.BYTES,m=ca("compactSignature",B,A*2);return new f(o.fromBytes(m.subarray(0,A)),o.fromBytes(m.subarray(A,A*2)))}static fromDER(B){const{r:A,s:m}=Fd.toSig(ca("DER",B));return new f(A,m)}assertValidity(){}addRecoveryBit(B){return new f(this.r,this.s,B)}recoverPublicKey(B){const A=i.ORDER,{r:m,s:b,recovery:w}=this;if(w==null||![0,1,2,3].includes(w))throw new Error("recovery id invalid");if(a*kqe<A&&w>1)throw new Error("recovery id is ambiguous for h>1 curve");const x=w===2||w===3?m+a:m;if(!i.isValid(x))throw new Error("recovery id 2 or 3 invalid");const M=i.toBytes(x),k=t.fromHex(h0(eae((w&1)===0),M)),j=o.inv(x),N=C(ca("msgHash",B)),v=o.create(-N*j),R=o.create(b*j),$=t.BASE.multiplyUnsafe(v).add(k.multiplyUnsafe(R));if($.is0())throw new Error("point at infinify");return $.assertValidity(),$}hasHighS(){return u(this.s)}normalizeS(){return this.hasHighS()?new f(this.r,o.neg(this.s),this.recovery):this}toBytes(B){if(B==="compact")return h0(o.toBytes(this.r),o.toBytes(this.s));if(B==="der")return k9(Fd.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return hE(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return hE(this.toBytes("compact"))}}const p=Qoe(o,r.allowedPrivateKeyLengths,r.wrapPrivateKey),g={isValidPrivateKey(F){try{return p(F),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const F=a;return yqe(n(Zoe(F)),F)},precompute(F=8,B=t.BASE){return B.precompute(F,!1)}};function h(F,B=!0){return t.fromPrivateKey(F).toBytes(B)}function y(F){if(typeof F=="bigint")return!1;if(F instanceof t)return!0;const B=ca("key",F).length,A=i.BYTES,m=A+1,b=2*A+1;if(!(r.allowedPrivateKeyLengths||o.BYTES===m))return B===m||B===b}function E(F,B,A=!0){if(y(F)===!0)throw new Error("first arg must be private key");if(y(B)===!1)throw new Error("second arg must be public key");return t.fromHex(B).multiply(p(F)).toBytes(A)}const S=e.bits2int||function(F){if(F.length>8192)throw new Error("input is too large");const B=i3(F),A=F.length*8-c;return A>0?B>>BigInt(A):B},C=e.bits2int_modN||function(F){return o.create(S(F))},_=o3(c);function T(F){return r4("num < 2^"+c,F,Z1,_),o.toBytes(F)}function P(F,B,A=D){if(["recovered","canonical"].some($=>$ in A))throw new Error("sign() legacy options not supported");const{hash:m}=e;let{lowS:b,prehash:w,extraEntropy:x}=A;b==null&&(b=!0),F=ca("msgHash",F),vZ(A),w&&(F=ca("prehashed msgHash",m(F)));const M=C(F),k=p(B),j=[T(k),T(M)];if(x!=null&&x!==!1){const $=x===!0?n(i.BYTES):x;j.push(ca("extraEntropy",$))}const N=h0(...j),v=M;function R($){const O=S($);if(!o.isValidNot0(O))return;const H=o.inv(O),W=t.BASE.multiply(O).toAffine(),G=o.create(W.x);if(G===Z1)return;const K=o.create(H*o.create(v+G*k));if(K===Z1)return;let Q=(W.x===G?0:2)|Number(W.y&Y1),re=K;return b&&u(K)&&(re=l(K),Q^=1),new f(G,re,Q)}return{seed:N,k2sig:R}}const D={lowS:e.lowS,prehash:!1},L={lowS:e.lowS,prehash:!1};function I(F,B,A=D){const{seed:m,k2sig:b}=P(F,B,A);return cqe(e.hash.outputLen,o.BYTES,s)(m,b)}t.BASE.precompute(8);function U(F,B,A,m=L){const b=F;B=ca("msgHash",B),A=ca("publicKey",A),vZ(m);const{lowS:w,prehash:x,format:M}=m;if("strict"in m)throw new Error("options.strict was renamed to lowS");if(M!==void 0&&!["compact","der","js"].includes(M))throw new Error('format must be "compact", "der" or "js"');const k=typeof b=="string"||P9(b),j=!k&&!M&&typeof b=="object"&&b!==null&&typeof b.r=="bigint"&&typeof b.s=="bigint";if(!k&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let N,v;try{if(j)if(M===void 0||M==="js")N=new f(b.r,b.s);else throw new Error("invalid format");if(k){try{M!=="compact"&&(N=f.fromDER(b))}catch(Q){if(!(Q instanceof Fd.Err))throw Q}!N&&M!=="der"&&(N=f.fromCompact(b))}v=t.fromHex(A)}catch{return!1}if(!N||w&&N.hasHighS())return!1;x&&(B=e.hash(B));const{r:R,s:$}=N,O=C(B),H=o.inv($),W=o.create(O*H),G=o.create(R*H),K=t.BASE.multiplyUnsafe(W).add(v.multiplyUnsafe(G));return K.is0()?!1:o.create(K.x)===R}return Object.freeze({getPublicKey:h,getSharedSecret:E,sign:I,verify:U,utils:g,Point:t,Signature:f})}function jqe(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=pb(e.n,t.nBitLength),s={Fp:r,Fn:n,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Lqe(t){const{CURVE:e,curveOpts:r}=jqe(t),n={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,ecdsaOpts:n}}function Fqe(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function $qe(t){const{CURVE:e,curveOpts:r,ecdsaOpts:n}=Lqe(t),s=Mqe(e,r),i=Dqe(s,n,r);return Fqe(t,i)}function s4(t,e){const r=n=>$qe({...t,hash:n});return{...r(e),create:r}}const tae={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},rae={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},nae={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},qqe=pb(tae.p),Hqe=pb(rae.p),zqe=pb(nae.p),Wqe=s4({...tae,Fp:qqe,lowS:!1},r3);s4({...rae,Fp:Hqe,lowS:!1},QFe),s4({...nae,Fp:zqe,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},XFe);const Vqe=Wqe,sae="base10",jo="base16",ma="base64pad",hh="base64url",U_="utf8",iae=0,Xd=1,M_=2,Gqe=0,EZ=1,J1=12,L9=32;function Kqe(){const t=n4.utils.randomPrivateKey(),e=n4.getPublicKey(t);return{privateKey:_n(t,jo),publicKey:_n(e,jo)}}function i4(){const t=hb(L9);return _n(t,jo)}function Zqe(t,e){const r=n4.getSharedSecret(Yn(t,jo),Yn(e,jo)),n=iqe(s3,r,void 0,void 0,L9);return _n(n,jo)}function FI(t){const e=s3(Yn(t,jo));return _n(e,jo)}function Fc(t){const e=s3(Yn(t,U_));return _n(e,jo)}function oae(t){return Yn(`${t}`,sae)}function F0(t){return Number(_n(t,sae))}function aae(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function cae(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return e+"=".repeat(r)}function Yqe(t){const e=oae(typeof t.type<"u"?t.type:iae);if(F0(e)===Xd&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Yn(t.senderPublicKey,jo):void 0,n=typeof t.iv<"u"?Yn(t.iv,jo):hb(J1),s=Yn(t.symKey,jo),i=Foe(s,n).encrypt(Yn(t.message,U_)),o=uae({type:e,sealed:i,iv:n,senderPublicKey:r});return t.encoding===hh?aae(o):o}function Jqe(t){const e=Yn(t.symKey,jo),{sealed:r,iv:n}=gE({encoded:t.encoded,encoding:t.encoding}),s=Foe(e,n).decrypt(r);if(s===null)throw new Error("Failed to decrypt");return _n(s,U_)}function Xqe(t,e){const r=oae(M_),n=hb(J1),s=Yn(t,U_),i=uae({type:r,sealed:s,iv:n});return e===hh?aae(i):i}function Qqe(t,e){const{sealed:r}=gE({encoded:t,encoding:e});return _n(r,U_)}function uae(t){if(F0(t.type)===M_)return _n(Tl([t.type,t.sealed]),ma);if(F0(t.type)===Xd){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return _n(Tl([t.type,t.senderPublicKey,t.iv,t.sealed]),ma)}return _n(Tl([t.type,t.iv,t.sealed]),ma)}function gE(t){const e=(t.encoding||ma)===hh?cae(t.encoded):t.encoded,r=Yn(e,ma),n=r.slice(Gqe,EZ),s=EZ;if(F0(n)===Xd){const c=s+L9,u=c+J1,l=r.slice(s,c),d=r.slice(c,u),f=r.slice(u);return{type:n,sealed:f,iv:d,senderPublicKey:l}}if(F0(n)===M_){const c=r.slice(s),u=hb(J1);return{type:n,sealed:c,iv:u}}const i=s+J1,o=r.slice(s,i),a=r.slice(i);return{type:n,sealed:a,iv:o}}function eHe(t,e){const r=gE({encoded:t,encoding:e?.encoding});return lae({type:F0(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?_n(r.senderPublicKey,jo):void 0,receiverPublicKey:e?.receiverPublicKey})}function lae(t){const e=t?.type||iae;if(e===Xd){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function _Z(t){return t.type===Xd&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function AZ(t){return t.type===M_}function tHe(t){const e=Buffer.from(t.x,"base64"),r=Buffer.from(t.y,"base64");return Tl([new Uint8Array([4]),e,r])}function rHe(t,e){const[r,n,s]=t.split("."),i=Buffer.from(cae(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${r}.${n}`,u=s3(c),l=tHe(e);if(!Vqe.verify(Tl([o,a]),u,l))throw new Error("Invalid signature");return wy(t).payload}const nHe="irn";function gT(t){return t?.relay||{protocol:nHe}}function Km(t){const e=$Q[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function sHe(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(n)){const i=s.replace(n,""),o=t[s];r[i]=o}}),r}function xZ(t){if(!t.includes("wc:")){const u=Eoe(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),s=t.substring(e+1,r).split("@"),i=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(i),a={};o.forEach((u,l)=>{a[l]=u});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:iHe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:sHe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function iHe(t){return t.startsWith("//")?t.substring(2):t}function oHe(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(s=>{const i=s,o=r+e+i;t[i]&&(n[o]=t[i])}),n}function CZ(t){const e=new URLSearchParams,r=oHe(t.relay);Object.keys(r).sort().forEach(s=>{e.set(s,r[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function rI(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}var aHe=Object.defineProperty,cHe=Object.defineProperties,uHe=Object.getOwnPropertyDescriptors,SZ=Object.getOwnPropertySymbols,lHe=Object.prototype.hasOwnProperty,dHe=Object.prototype.propertyIsEnumerable,IZ=(t,e,r)=>e in t?aHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fHe=(t,e)=>{for(var r in e||(e={}))lHe.call(e,r)&&IZ(t,r,e[r]);if(SZ)for(var r of SZ(e))dHe.call(e,r)&&IZ(t,r,e[r]);return t},hHe=(t,e)=>cHe(t,uHe(e));function gb(t){const e=[];return t.forEach(r=>{const[n,s]=r.split(":");e.push(`${n}:${s}`)}),e}function pHe(t){const e=[];return Object.values(t).forEach(r=>{e.push(...gb(r.accounts))}),e}function gHe(t,e){const r=[];return Object.values(t).forEach(n=>{gb(n.accounts).includes(e)&&r.push(...n.methods)}),r}function mHe(t,e){const r=[];return Object.values(t).forEach(n=>{gb(n.accounts).includes(e)&&r.push(...n.events)}),r}function c3(t){return t.includes(":")}function Zm(t){return c3(t)?t.split(":")[0]:t}function TZ(t){var e,r,n;const s={};if(!kl(t))return s;for(const[i,o]of Object.entries(t)){const a=c3(i)?[i]:o.chains,c=o.methods||[],u=o.events||[],l=Zm(i);s[l]=hHe(fHe({},s[l]),{chains:Ol(a,(e=s[l])==null?void 0:e.chains),methods:Ol(c,(r=s[l])==null?void 0:r.methods),events:Ol(u,(n=s[l])==null?void 0:n.events)})}return s}function yHe(t){const e={};return t?.forEach(r=>{var n;const[s,i]=r.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(r),(n=e[s].chains)==null||n.push(`${s}:${i}`)}),e}function NZ(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=yHe(e);for(const[n,s]of Object.entries(r))s.methods?s.methods=Ol(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return r}function bHe(t,e){var r,n,s,i,o,a;const c=TZ(t),u=TZ(e),l={},d=Object.keys(c).concat(Object.keys(u));for(const f of d)l[f]={chains:Ol((r=c[f])==null?void 0:r.chains,(n=u[f])==null?void 0:n.chains),methods:Ol((s=c[f])==null?void 0:s.methods,(i=u[f])==null?void 0:i.methods),events:Ol((o=c[f])==null?void 0:o.events,(a=u[f])==null?void 0:a.events)};return l}const wHe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},vHe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function $e(t,e){const{message:r,code:n}=vHe[t];return{message:e?`${r} ${e}`:r,code:n}}function zn(t,e){const{message:r,code:n}=wHe[t];return{message:e?`${r} ${e}`:r,code:n}}function Qd(t,e){return!!Array.isArray(t)}function kl(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ks(t){return typeof t>"u"}function Us(t,e){return e&&Ks(t)?!0:typeof t=="string"&&!!t.trim().length}function F9(t,e){return e&&Ks(t)?!0:typeof t=="number"&&!isNaN(t)}function EHe(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),s=Object.keys(r);let i=!0;return f0(s,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],l=gb(a),d=r[o];(!f0(moe(o,d),l)||!f0(d.methods,c)||!f0(d.events,u))&&(i=!1)}),i):!1}function mT(t){return Us(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function _He(t){if(Us(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&mT(r)}}return!1}function AHe(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(Us(t,!1)){if(e(t))return!0;const r=Eoe(t);return e(r)}}catch{}return!1}function xHe(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function CHe(t){return t?.topic}function SHe(t,e){let r=null;return Us(t?.publicKey,!1)||(r=$e("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function PZ(t){let e=!0;return Qd(t)?t.length&&(e=t.every(r=>Us(r,!1))):e=!1,e}function IHe(t,e,r){let n=null;return Qd(e)&&e.length?e.forEach(s=>{n||mT(s)||(n=zn("UNSUPPORTED_CHAINS",`${r}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):mT(t)||(n=zn("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function THe(t,e,r){let n=null;return Object.entries(t).forEach(([s,i])=>{if(n)return;const o=IHe(s,moe(s,i),`${e} ${r}`);o&&(n=o)}),n}function NHe(t,e){let r=null;return Qd(t)?t.forEach(n=>{r||_He(n)||(r=zn("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=zn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function PHe(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=NHe(n?.accounts,`${e} namespace`);s&&(r=s)}),r}function RHe(t,e){let r=null;return PZ(t?.methods)?PZ(t?.events)||(r=zn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=zn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function dae(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=RHe(n,`${e}, namespace`);s&&(r=s)}),r}function OHe(t,e,r){let n=null;if(t&&kl(t)){const s=dae(t,e);s&&(n=s);const i=THe(t,e,r);i&&(n=i)}else n=$e("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function BR(t,e){let r=null;if(t&&kl(t)){const n=dae(t,e);n&&(r=n);const s=PHe(t,e);s&&(r=s)}else r=$e("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function fae(t){return Us(t.protocol,!0)}function kHe(t,e){let r=!1;return t?t&&Qd(t)&&t.length&&t.forEach(n=>{r=fae(n)}):r=!0,r}function BHe(t){return typeof t=="number"}function ia(t){return typeof t<"u"&&typeof t!==null}function UHe(t){return!(!t||typeof t!="object"||!t.code||!F9(t.code,!1)||!t.message||!Us(t.message,!1))}function MHe(t){return!(Ks(t)||!Us(t.method,!1))}function DHe(t){return!(Ks(t)||Ks(t.result)&&Ks(t.error)||!F9(t.id,!1)||!Us(t.jsonrpc,!1))}function jHe(t){return!(Ks(t)||!Us(t.name,!1))}function RZ(t,e){return!(!mT(e)||!pHe(t).includes(e))}function LHe(t,e,r){return Us(r,!1)?gHe(t,e).includes(r):!1}function FHe(t,e,r){return Us(r,!1)?mHe(t,e).includes(r):!1}function OZ(t,e,r){let n=null;const s=$He(t),i=qHe(e),o=Object.keys(s),a=Object.keys(i),c=kZ(Object.keys(t)),u=kZ(Object.keys(e)),l=c.filter(d=>!u.includes(d));return l.length&&(n=$e("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(e).toString()}`)),f0(o,a)||(n=$e("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||n)return;const f=gb(e[d].accounts);f.includes(d)||(n=$e("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${f.toString()}`))}),o.forEach(d=>{n||(f0(s[d].methods,i[d].methods)?f0(s[d].events,i[d].events)||(n=$e("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${d}`)):n=$e("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${d}`))}),n}function $He(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(s=>{e[s]={methods:t[r].methods,events:t[r].events}})}),e}function kZ(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function qHe(t){const e={};return Object.keys(t).forEach(r=>{r.includes(":")?e[r]=t[r]:gb(t[r].accounts)?.forEach(s=>{e[s]={accounts:t[r].accounts.filter(i=>i.includes(`${s}:`)),methods:t[r].methods,events:t[r].events}})}),e}function HHe(t,e){return F9(t,!1)&&t<=e.max&&t>=e.min}function BZ(){const t=k_();return new Promise(e=>{switch(t){case oc.browser:e(zHe());break;case oc.reactNative:e(WHe());break;case oc.node:e(VHe());break;default:e(!0)}})}function zHe(){return fb()&&navigator?.onLine}async function WHe(){return ip()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function VHe(){return!0}function GHe(t){switch(k_()){case oc.browser:KHe(t);break;case oc.reactNative:ZHe(t);break}}function KHe(t){!ip()&&fb()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function ZHe(t){ip()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function YHe(){var t;return fb()&&di.getDocument()?((t=di.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const UR={};class c1{static get(e){return UR[e]}static set(e,r){UR[e]=r}static delete(e){delete UR[e]}}function JHe(t){const e=Zn.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function XHe({publicKey:t,signature:e,payload:r}){var n;const s=o4(r.method),i=128|parseInt(((n=r.version)==null?void 0:n.toString())||"4"),o=tze(r.address),a=r.era==="00"?new Uint8Array([0]):o4(r.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(r.nonce,16),u=new Uint8Array([c&255,c>>8&255]),l=BigInt(`0x${eze(r.tip)}`),d=nze(l),f=new Uint8Array([0,...t,o,...e,...a,...u,...d,...s]),p=rze(f.length+1);return new Uint8Array([...p,i,...f])}function QHe(t){const e=o4(t),r=HQ.blake2b(e,void 0,32);return"0x"+Buffer.from(r).toString("hex")}function o4(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function eze(t){return t.startsWith("0x")?t.slice(2):t}function tze(t){const e=Zn.decode(t)[0];return e===42?0:e===60?2:1}function rze(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function nze(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function sze(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),r=JHe(t.transaction.address),n=XHe({publicKey:r,signature:e,payload:t.transaction}),s=Buffer.from(n).toString("hex");return QHe(s)}var ize={};const hae="wc",pae=2,a4="core",ql=`${hae}@2:${a4}:`,oze={logger:"error"},aze={database:":memory:"},cze="crypto",UZ="client_ed25519_seed",uze=he.ONE_DAY,lze="keychain",dze="0.3",fze="messages",hze="0.3",pze=he.SIX_HOURS,gze="publisher",gae="irn",mze="error",mae="wss://relay.walletconnect.org",yze="relayer",_s={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},bze="_subscription",Pc={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},wze=.1,c4="2.21.7",Hn={link_mode:"link_mode",relay:"relay"},$I={inbound:"inbound",outbound:"outbound"},vze="0.3",Eze="WALLETCONNECT_CLIENT_ID",MZ="WALLETCONNECT_LINK_MODE_APPS",Ka={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},_ze="subscription",Aze="0.3",xze="pairing",Cze="0.3",u1={wc_pairingDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:he.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:he.ONE_DAY,prompt:!1,tag:0},res:{ttl:he.ONE_DAY,prompt:!1,tag:0}}},Xp={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},pu={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Sze="history",Ize="0.3",Tze="expirer",Mc={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Nze="0.3",Pze="verify-api",Rze="https://verify.walletconnect.com",yae="https://verify.walletconnect.org",X1=yae,Oze=`${X1}/v3`,kze=[Rze,yae],Bze="echo",Uze="https://echo.walletconnect.com",hl={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Od={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Qf={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},l1={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Lp={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},d1={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Mze=.1,Dze="event-client",jze=86400,Lze="https://pulse.walletconnect.org/batch";function Fze(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var h=0,y=0,E=0,S=g.length;E!==S&&g[E]===0;)E++,h++;for(var C=(S-E)*l+1>>>0,_=new Uint8Array(C);E!==S;){for(var T=g[E],P=0,D=C-1;(T!==0||P<y)&&D!==-1;D--,P++)T+=256*_[D]>>>0,_[D]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");y=P,E++}for(var L=C-y;L!==C&&_[L]===0;)L++;for(var I=c.repeat(h);L<C;++L)I+=t.charAt(_[L]);return I}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var h=0;if(g[h]!==" "){for(var y=0,E=0;g[h]===c;)y++,h++;for(var S=(g.length-h)*u+1>>>0,C=new Uint8Array(S);g[h];){var _=r[g.charCodeAt(h)];if(_===255)return;for(var T=0,P=S-1;(_!==0||T<E)&&P!==-1;P--,T++)_+=a*C[P]>>>0,C[P]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");E=T,h++}if(g[h]!==" "){for(var D=S-E;D!==S&&C[D]===0;)D++;for(var L=new Uint8Array(y+(S-D)),I=y;D!==S;)L[I++]=C[D++];return L}}}function p(g){var h=f(g);if(h)return h;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:p}}var $ze=Fze,qze=$ze;const bae=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Hze=t=>new TextEncoder().encode(t),zze=t=>new TextDecoder().decode(t);class Wze{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Vze{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return wae(this,e)}}class Gze{constructor(e){this.decoders=e}or(e){return wae(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const wae=(t,e)=>new Gze({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Kze{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Wze(e,r,n),this.decoder=new Vze(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const u3=({name:t,prefix:e,encode:r,decode:n})=>new Kze(t,e,r,n),D_=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=qze(r,e);return u3({prefix:t,name:e,encode:n,decode:i=>bae(s(i))})},Zze=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Yze=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},qi=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>u3({prefix:e,name:t,encode(s){return Yze(s,n,r)},decode(s){return Zze(s,n,r,t)}}),Jze=u3({prefix:"\0",name:"identity",encode:t=>zze(t),decode:t=>Hze(t)});var Xze=Object.freeze({__proto__:null,identity:Jze});const Qze=qi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var eWe=Object.freeze({__proto__:null,base2:Qze});const tWe=qi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var rWe=Object.freeze({__proto__:null,base8:tWe});const nWe=D_({prefix:"9",name:"base10",alphabet:"0123456789"});var sWe=Object.freeze({__proto__:null,base10:nWe});const iWe=qi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),oWe=qi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var aWe=Object.freeze({__proto__:null,base16:iWe,base16upper:oWe});const cWe=qi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),uWe=qi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),lWe=qi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),dWe=qi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),fWe=qi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),hWe=qi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),pWe=qi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),gWe=qi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),mWe=qi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var yWe=Object.freeze({__proto__:null,base32:cWe,base32upper:uWe,base32pad:lWe,base32padupper:dWe,base32hex:fWe,base32hexupper:hWe,base32hexpad:pWe,base32hexpadupper:gWe,base32z:mWe});const bWe=D_({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),wWe=D_({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var vWe=Object.freeze({__proto__:null,base36:bWe,base36upper:wWe});const EWe=D_({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),_We=D_({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var AWe=Object.freeze({__proto__:null,base58btc:EWe,base58flickr:_We});const xWe=qi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),CWe=qi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),SWe=qi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),IWe=qi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var TWe=Object.freeze({__proto__:null,base64:xWe,base64pad:CWe,base64url:SWe,base64urlpad:IWe});const vae=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),NWe=vae.reduce((t,e,r)=>(t[r]=e,t),[]),PWe=vae.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function RWe(t){return t.reduce((e,r)=>(e+=NWe[r],e),"")}function OWe(t){const e=[];for(const r of t){const n=PWe[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const kWe=u3({prefix:"ðŸš€",name:"base256emoji",encode:RWe,decode:OWe});var BWe=Object.freeze({__proto__:null,base256emoji:kWe}),UWe=Eae,DZ=128,MWe=-128,DWe=Math.pow(2,31);function Eae(t,e,r){e=e||[],r=r||0;for(var n=r;t>=DWe;)e[r++]=t&255|DZ,t/=128;for(;t&MWe;)e[r++]=t&255|DZ,t>>>=7;return e[r]=t|0,Eae.bytes=r-n+1,e}var jWe=u4,LWe=128,jZ=127;function u4(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw u4.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&jZ)<<s:(o&jZ)*Math.pow(2,s),s+=7}while(o>=LWe);return u4.bytes=i-n,r}var FWe=Math.pow(2,7),$We=Math.pow(2,14),qWe=Math.pow(2,21),HWe=Math.pow(2,28),zWe=Math.pow(2,35),WWe=Math.pow(2,42),VWe=Math.pow(2,49),GWe=Math.pow(2,56),KWe=Math.pow(2,63),ZWe=function(t){return t<FWe?1:t<$We?2:t<qWe?3:t<HWe?4:t<zWe?5:t<WWe?6:t<VWe?7:t<GWe?8:t<KWe?9:10},YWe={encode:UWe,decode:jWe,encodingLength:ZWe},_ae=YWe;const LZ=(t,e,r=0)=>(_ae.encode(t,e,r),e),FZ=t=>_ae.encodingLength(t),l4=(t,e)=>{const r=e.byteLength,n=FZ(t),s=n+FZ(r),i=new Uint8Array(s+r);return LZ(t,i,0),LZ(r,i,n),i.set(e,s),new JWe(t,r,e,i)};class JWe{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}const Aae=({name:t,code:e,encode:r})=>new XWe(t,e,r);class XWe{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?l4(this.code,r):r.then(n=>l4(this.code,n))}else throw Error("Unknown type, must be binary type")}}const xae=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),QWe=Aae({name:"sha2-256",code:18,encode:xae("SHA-256")}),eVe=Aae({name:"sha2-512",code:19,encode:xae("SHA-512")});var tVe=Object.freeze({__proto__:null,sha256:QWe,sha512:eVe});const Cae=0,rVe="identity",Sae=bae,nVe=t=>l4(Cae,Sae(t)),sVe={code:Cae,name:rVe,encode:Sae,digest:nVe};var iVe=Object.freeze({__proto__:null,identity:sVe});new TextEncoder,new TextDecoder;const $Z={...Xze,...eWe,...rWe,...sWe,...aWe,...yWe,...vWe,...AWe,...TWe,...BWe};({...tVe,...iVe});function Iae(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function oVe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Iae(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Tae(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const qZ=Tae("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),MR=Tae("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=oVe(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),aVe={utf8:qZ,"utf-8":qZ,hex:$Z.base16,latin1:MR,ascii:MR,binary:MR,...$Z};function cVe(t,e="utf8"){const r=aVe[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Iae(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var uVe=Object.defineProperty,lVe=(t,e,r)=>e in t?uVe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ul=(t,e,r)=>lVe(t,typeof e!="symbol"?e+"":e,r);class dVe{constructor(e,r){this.core=e,this.logger=r,ul(this,"keychain",new Map),ul(this,"name",lze),ul(this,"version",dze),ul(this,"initialized",!1),ul(this,"storagePrefix",ql),ul(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),ul(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),ul(this,"set",async(n,s)=>{this.isInitialized(),this.keychain.set(n,s),await this.persist()}),ul(this,"get",n=>{this.isInitialized();const s=this.keychain.get(n);if(typeof s>"u"){const{message:i}=$e("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(i)}return s}),ul(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=wo(r,this.name)}get context(){return ka(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,KO(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ZO(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var fVe=Object.defineProperty,hVe=(t,e,r)=>e in t?fVe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vi=(t,e,r)=>hVe(t,typeof e!="symbol"?e+"":e,r);class pVe{constructor(e,r,n){this.core=e,this.logger=r,vi(this,"name",cze),vi(this,"keychain"),vi(this,"randomSessionIdentifier",i4()),vi(this,"initialized",!1),vi(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),vi(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),vi(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=g6(s);return z4(i.publicKey)}),vi(this,"generateKeyPair",()=>{this.isInitialized();const s=Kqe();return this.setPrivateKey(s.publicKey,s.privateKey)}),vi(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=g6(i),a=this.randomSessionIdentifier;return await uX(a,s,uze,o)}),vi(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=Zqe(a,i);return this.setSymKey(c,o)}),vi(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||FI(s);return await this.keychain.set(o,s),o}),vi(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),vi(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),vi(this,"encode",async(s,i,o)=>{this.isInitialized();const a=lae(o),c=Hc(i);if(AZ(a))return Xqe(c,o?.encoding);if(_Z(a)){const f=a.senderPublicKey,p=a.receiverPublicKey;s=await this.generateSharedKey(f,p)}const u=this.getSymKey(s),{type:l,senderPublicKey:d}=a;return Yqe({type:l,symKey:u,message:c,senderPublicKey:d,encoding:o?.encoding})}),vi(this,"decode",async(s,i,o)=>{this.isInitialized();const a=eHe(i,o);if(AZ(a)){const c=Qqe(i,o?.encoding);return rf(c)}if(_Z(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;s=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(s),u=Jqe({symKey:c,encoded:i,encoding:o?.encoding});return rf(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),vi(this,"getPayloadType",(s,i=ma)=>{const o=gE({encoded:s,encoding:i});return F0(o.type)}),vi(this,"getPayloadSenderPublicKey",(s,i=ma)=>{const o=gE({encoded:s,encoding:i});return o.senderPublicKey?_n(o.senderPublicKey,jo):void 0}),this.core=e,this.logger=wo(r,this.name),this.keychain=n||new dVe(this.core,this.logger)}get context(){return ka(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(UZ)}catch{e=i4(),await this.keychain.set(UZ,e)}return cVe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var gVe=Object.defineProperty,mVe=Object.defineProperties,yVe=Object.getOwnPropertyDescriptors,HZ=Object.getOwnPropertySymbols,bVe=Object.prototype.hasOwnProperty,wVe=Object.prototype.propertyIsEnumerable,d4=(t,e,r)=>e in t?gVe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vVe=(t,e)=>{for(var r in e||(e={}))bVe.call(e,r)&&d4(t,r,e[r]);if(HZ)for(var r of HZ(e))wVe.call(e,r)&&d4(t,r,e[r]);return t},EVe=(t,e)=>mVe(t,yVe(e)),Wa=(t,e,r)=>d4(t,typeof e!="symbol"?e+"":e,r);class _Ve extends qje{constructor(e,r){super(e,r),this.logger=e,this.core=r,Wa(this,"messages",new Map),Wa(this,"messagesWithoutClientAck",new Map),Wa(this,"name",fze),Wa(this,"version",hze),Wa(this,"initialized",!1),Wa(this,"storagePrefix",ql),Wa(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),Wa(this,"set",async(n,s,i)=>{this.isInitialized();const o=Fc(s);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(n,a),i===$I.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,EVe(vVe({},c),{[o]:s}))}return await this.persist(),o}),Wa(this,"get",n=>{this.isInitialized();let s=this.messages.get(n);return typeof s>"u"&&(s={}),s}),Wa(this,"getWithoutAck",n=>{this.isInitialized();const s={};for(const i of n){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Wa(this,"has",(n,s)=>{this.isInitialized();const i=this.get(n),o=Fc(s);return typeof i[o]<"u"}),Wa(this,"ack",async(n,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(n);if(typeof i>"u")return;const o=Fc(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,i),await this.persist()}),Wa(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=wo(e,this.name),this.core=r}get context(){return ka(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,KO(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,KO(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ZO(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?ZO(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var AVe=Object.defineProperty,xVe=Object.defineProperties,CVe=Object.getOwnPropertyDescriptors,zZ=Object.getOwnPropertySymbols,SVe=Object.prototype.hasOwnProperty,IVe=Object.prototype.propertyIsEnumerable,f4=(t,e,r)=>e in t?AVe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lm=(t,e)=>{for(var r in e||(e={}))SVe.call(e,r)&&f4(t,r,e[r]);if(zZ)for(var r of zZ(e))IVe.call(e,r)&&f4(t,r,e[r]);return t},WZ=(t,e)=>xVe(t,CVe(e)),Rc=(t,e,r)=>f4(t,typeof e!="symbol"?e+"":e,r);class TVe extends Hje{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Rc(this,"events",new Ys.EventEmitter),Rc(this,"name",gze),Rc(this,"queue",new Map),Rc(this,"publishTimeout",he.toMiliseconds(he.ONE_MINUTE)),Rc(this,"initialPublishTimeout",he.toMiliseconds(he.ONE_SECOND*15)),Rc(this,"needsTransportRestart",!1),Rc(this,"publish",async(n,s,i)=>{var o,a,c,u,l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:i}});const d=i?.ttl||pze,f=i?.prompt||!1,p=i?.tag||0,g=i?.id||ko().toString(),h=Km(gT().protocol),y={id:g,method:i?.publishMethod||h.publish,params:lm({topic:n,message:s,ttl:d,prompt:f,tag:p,attestation:i?.attestation},i?.tvf&&{tvf:i.tvf})},E=`Failed to publish payload, please try again. id:${g} tag:${p}`;try{Ks((o=y.params)==null?void 0:o.prompt)&&((a=y.params)==null||delete a.prompt),Ks((c=y.params)==null?void 0:c.tag)&&((u=y.params)==null||delete u.tag);const S=new Promise(async C=>{const _=({id:P})=>{var D;((D=y.id)==null?void 0:D.toString())===P.toString()&&(this.removeRequestFromQueue(P),this.relayer.events.removeListener(_s.publish,_),C())};this.relayer.events.on(_s.publish,_);const T=Sl(new Promise((P,D)=>{this.rpcPublish(y,i).then(P).catch(L=>{this.logger.warn(L,L?.message),D(L)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${g} tag:${p}`);try{await T,this.events.removeListener(_s.publish,_)}catch(P){this.queue.set(g,{request:y,opts:i,attempt:1}),this.logger.warn(P,P?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:g,topic:n,message:s,opts:i}}),await Sl(S,this.publishTimeout,E)}catch(S){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(S),(l=i?.internal)!=null&&l.throwOnFailedPublish)throw S}finally{this.queue.delete(g)}}),Rc(this,"publishCustom",async n=>{var s,i,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:n});const{payload:u,opts:l={}}=n,{attestation:d,tvf:f,publishMethod:p,prompt:g,tag:h,ttl:y=he.FIVE_MINUTES}=l,E=l.id||ko().toString(),S=Km(gT().protocol),C=p||S.publish,_={id:E,method:C,params:lm(WZ(lm({},u),{ttl:y,prompt:g,tag:h,attestation:d}),f)},T=`Failed to publish custom payload, please try again. id:${E} tag:${h}`;try{Ks((s=_.params)==null?void 0:s.prompt)&&((i=_.params)==null||delete i.prompt),Ks((o=_.params)==null?void 0:o.tag)&&((a=_.params)==null||delete a.tag);const P=new Promise(async D=>{const L=({id:U})=>{var F;((F=_.id)==null?void 0:F.toString())===U.toString()&&(this.removeRequestFromQueue(U),this.relayer.events.removeListener(_s.publish,L),D())};this.relayer.events.on(_s.publish,L);const I=Sl(new Promise((U,F)=>{this.rpcPublish(_,l).then(U).catch(B=>{this.logger.warn(B,B?.message),F(B)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${C} id:${E} tag:${h}`);try{await I,this.events.removeListener(_s.publish,L)}catch(U){this.queue.set(E,{request:_,opts:l,attempt:1}),this.logger.warn(U,U?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:E,payload:u,opts:l}}),await Sl(P,this.publishTimeout,T)}catch(P){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(P),(c=l?.internal)!=null&&c.throwOnFailedPublish)throw P}finally{this.queue.delete(E)}}),Rc(this,"on",(n,s)=>{this.events.on(n,s)}),Rc(this,"once",(n,s)=>{this.events.once(n,s)}),Rc(this,"off",(n,s)=>{this.events.off(n,s)}),Rc(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.relayer=e,this.logger=wo(r,this.name),this.registerEventListeners()}get context(){return ka(this.logger)}async rpcPublish(e,r){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const n=await this.relayer.request(e);return this.relayer.events.emit(_s.publish,lm(lm({},e),r)),this.logger.debug("Successfully Published Payload"),n}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{var n;const s=e.attempt+1;this.queue.set(r,WZ(lm({},e),{attempt:s})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(n=e.request.params)==null?void 0:n.tag}, attempt: ${s}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(dc.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(_s.connection_stalled);return}this.checkQueue()}),this.relayer.on(_s.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var NVe=Object.defineProperty,PVe=(t,e,r)=>e in t?NVe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dm=(t,e,r)=>PVe(t,typeof e!="symbol"?e+"":e,r);class RVe{constructor(){dm(this,"map",new Map),dm(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),dm(this,"get",e=>this.map.get(e)||[]),dm(this,"exists",(e,r)=>this.get(e).includes(r)),dm(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const s=n.filter(i=>i!==r);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),dm(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var OVe=Object.defineProperty,kVe=Object.defineProperties,BVe=Object.getOwnPropertyDescriptors,VZ=Object.getOwnPropertySymbols,UVe=Object.prototype.hasOwnProperty,MVe=Object.prototype.propertyIsEnumerable,h4=(t,e,r)=>e in t?OVe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,f1=(t,e)=>{for(var r in e||(e={}))UVe.call(e,r)&&h4(t,r,e[r]);if(VZ)for(var r of VZ(e))MVe.call(e,r)&&h4(t,r,e[r]);return t},DR=(t,e)=>kVe(t,BVe(e)),Tn=(t,e,r)=>h4(t,typeof e!="symbol"?e+"":e,r);class DVe extends Vje{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Tn(this,"subscriptions",new Map),Tn(this,"topicMap",new RVe),Tn(this,"events",new Ys.EventEmitter),Tn(this,"name",_ze),Tn(this,"version",Aze),Tn(this,"pending",new Map),Tn(this,"cached",[]),Tn(this,"initialized",!1),Tn(this,"storagePrefix",ql),Tn(this,"subscribeTimeout",he.toMiliseconds(he.ONE_MINUTE)),Tn(this,"initialSubscribeTimeout",he.toMiliseconds(he.ONE_SECOND*15)),Tn(this,"clientId"),Tn(this,"batchSubscribeTopicsLimit",500),Tn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Tn(this,"subscribe",async(n,s)=>{var i;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}});try{const o=gT(s),a={topic:n,relay:o,transportType:s?.transportType};(i=s?.internal)!=null&&i.skipSubscribe||this.pending.set(n,a);const c=await this.rpcSubscribe(n,o,s);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),Tn(this,"unsubscribe",async(n,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(n,s.id,s):await this.unsubscribeByTopic(n,s)}),Tn(this,"isSubscribed",n=>new Promise(s=>{s(this.topicMap.topics.includes(n))})),Tn(this,"isKnownTopic",n=>new Promise(s=>{s(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(i=>i.topic===n))})),Tn(this,"on",(n,s)=>{this.events.on(n,s)}),Tn(this,"once",(n,s)=>{this.events.once(n,s)}),Tn(this,"off",(n,s)=>{this.events.off(n,s)}),Tn(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),Tn(this,"start",async()=>{await this.onConnect()}),Tn(this,"stop",async()=>{await this.onDisconnect()}),Tn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Tn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(s=>{n.push(s)}),await this.batchSubscribe(n)}),Tn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(dc.pulse,async()=>{await this.checkPending()}),this.events.on(Ka.created,async n=>{const s=Ka.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()}),this.events.on(Ka.deleted,async n=>{const s=Ka.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()})}),this.relayer=e,this.logger=wo(r,this.name),this.clientId=""}get context(){return ka(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async s=>await this.unsubscribeById(e,s,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const s=gT(n);await this.restartToComplete({topic:e,id:r,relay:s}),await this.rpcUnsubscribe(e,r,s);const i=zn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,r,n){var s,i;const o=await this.getSubscriptionId(e);if((s=n?.internal)!=null&&s.skipSubscribe)return o;(!n||n?.transportType===Hn.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const a={method:Km(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(i=n?.internal)==null?void 0:i.throwOnFailedPublish;try{if(n?.transportType===Hn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(d=>this.logger.warn(d))},he.toMiliseconds(he.ONE_SECOND)),o;const u=new Promise(async d=>{const f=p=>{p.topic===e&&(this.events.removeListener(Ka.created,f),d(p.id))};this.events.on(Ka.created,f);try{const p=await Sl(new Promise((g,h)=>{this.relayer.request(a).catch(y=>{this.logger.warn(y,y?.message),h(y)}).then(g)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ka.created,f),d(p)}catch{}}),l=await Sl(u,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return l?o:null}catch(u){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(_s.connection_stalled),c)throw u}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Km(r.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Sl(new Promise(s=>{this.relayer.request(n).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(_s.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:Km(r.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s;try{s=await await Sl(new Promise((i,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(_s.connection_stalled)}return s}rpcUnsubscribe(e,r,n){const s={method:Km(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,r){this.setSubscription(e,DR(f1({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,f1({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,f1({},r)),this.topicMap.set(r.topic,e),this.events.emit(Ka.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=$e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Ka.deleted,DR(f1({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ka.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Ka.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(r=>{var n;return r.topic===((n=this.subscriptions.get(r.id))==null?void 0:n.topic)})){const{message:r}=$e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>DR(f1({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await mFe(he.toMiliseconds(he.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Fc(e+await this.getClientId())}}var jVe=Object.defineProperty,GZ=Object.getOwnPropertySymbols,LVe=Object.prototype.hasOwnProperty,FVe=Object.prototype.propertyIsEnumerable,p4=(t,e,r)=>e in t?jVe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,KZ=(t,e)=>{for(var r in e||(e={}))LVe.call(e,r)&&p4(t,r,e[r]);if(GZ)for(var r of GZ(e))FVe.call(e,r)&&p4(t,r,e[r]);return t},$r=(t,e,r)=>p4(t,typeof e!="symbol"?e+"":e,r);class $Ve extends zje{constructor(e){super(e),$r(this,"protocol","wc"),$r(this,"version",2),$r(this,"core"),$r(this,"logger"),$r(this,"events",new Ys.EventEmitter),$r(this,"provider"),$r(this,"messages"),$r(this,"subscriber"),$r(this,"publisher"),$r(this,"name",yze),$r(this,"transportExplicitlyClosed",!1),$r(this,"initialized",!1),$r(this,"connectionAttemptInProgress",!1),$r(this,"relayUrl"),$r(this,"projectId"),$r(this,"packageName"),$r(this,"bundleId"),$r(this,"hasExperiencedNetworkDisruption",!1),$r(this,"pingTimeout"),$r(this,"heartBeatTimeout",he.toMiliseconds(he.THIRTY_SECONDS+he.FIVE_SECONDS)),$r(this,"reconnectTimeout"),$r(this,"connectPromise"),$r(this,"reconnectInProgress",!1),$r(this,"requestsInFlight",[]),$r(this,"connectTimeout",he.toMiliseconds(he.ONE_SECOND*15)),$r(this,"request",async r=>{var n,s;this.logger.debug("Publishing Request Payload");const i=r.id||ko().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${i}:${((s=r.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),$r(this,"resetPingTimeout",()=>{dT()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),$r(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),$r(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected ðŸ›œ"),this.startPingTimeout(),this.events.emit(_s.connect)}),$r(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected ðŸ›‘"),this.requestsInFlight=[],this.onProviderDisconnect()}),$r(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(_s.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),$r(this,"registerProviderListeners",()=>{this.provider.on(Pc.payload,this.onPayloadHandler),this.provider.on(Pc.connect,this.onConnectHandler),this.provider.on(Pc.disconnect,this.onDisconnectHandler),this.provider.on(Pc.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?wo(e.logger,this.name):R_(ub({level:e.logger||mze})),this.messages=new _Ve(this.logger,e.core),this.subscriber=new DVe(this,this.logger),this.publisher=new TVe(this,this.logger),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||mae,eFe()?this.packageName=zK():tFe()&&(this.bundleId=zK()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return ka(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Hn.relay},$I.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,r){var n,s,i;this.isInitialized(),(!(r!=null&&r.transportType)||r?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((n=r?.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(s=r?.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const u=l=>{l.topic===e&&(this.subscriber.off(Ka.created,u),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(Ka.created,u)}),new Promise(async(l,d)=>{a=await this.subscriber.subscribe(e,KZ({internal:{throwOnFailedPublish:o}},r)).catch(f=>{o&&d(f)})||a,l()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Sl(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await BZ())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,s)=>n.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const s=zs(he.FIVE_MINUTES),i={topic:n,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,i)}this.events.emit(_s.message,e),await this.recordMessageEvent(e,$I.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Pc.disconnect,i),await Sl(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Pc.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Pc.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Pc.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const s=n;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,he.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,s,i;if(dT())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new qo(new tte(oFe({sdkVersion:c4,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:s}=e;await this.messages.set(n,s,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const s=this.messages.has(r,n);return s&&this.logger.warn(`Ignoring duplicate message: ${n}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Jy(e)){if(!e.method.endsWith(bze))return;const r=e.params,{topic:n,message:s,publishedAt:i,attestation:o}=r.data,a={topic:n,message:s,publishedAt:i,transportType:Hn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(KZ({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else J0(e)&&this.events.emit(_s.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,$I.inbound),this.events.emit(_s.message,e))}async acknowledgePayload(e){const r=Ul(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Pc.payload,this.onPayloadHandler),this.provider.off(Pc.connect,this.onConnectHandler),this.provider.off(Pc.disconnect,this.onDisconnectHandler),this.provider.off(Pc.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await BZ();GHe(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(dc.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&YHe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(r){this.logger.warn(r,r?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(_s.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},he.toMiliseconds(wze)))))}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function qVe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function ZZ(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function YZ(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const HVe="[object RegExp]",zVe="[object String]",WVe="[object Number]",VVe="[object Boolean]",JZ="[object Arguments]",GVe="[object Symbol]",KVe="[object Date]",ZVe="[object Map]",YVe="[object Set]",JVe="[object Array]",XVe="[object Function]",QVe="[object ArrayBuffer]",jR="[object Object]",eGe="[object Error]",tGe="[object DataView]",rGe="[object Uint8Array]",nGe="[object Uint8ClampedArray]",sGe="[object Uint16Array]",iGe="[object Uint32Array]",oGe="[object BigUint64Array]",aGe="[object Int8Array]",cGe="[object Int16Array]",uGe="[object Int32Array]",lGe="[object BigInt64Array]",dGe="[object Float32Array]",fGe="[object Float64Array]";function hGe(){}function XZ(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function pGe(t,e,r){return S1(t,e,void 0,void 0,void 0,void 0,r)}function S1(t,e,r,n,s,i,o){const a=o(t,e,r,n,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Q1(t,e,i,o)}return Q1(t,e,i,o)}function Q1(t,e,r,n){if(Object.is(t,e))return!0;let s=YZ(t),i=YZ(e);if(s===JZ&&(s=jR),i===JZ&&(i=jR),s!==i)return!1;switch(s){case zVe:return t.toString()===e.toString();case WVe:{const c=t.valueOf(),u=e.valueOf();return qVe(c,u)}case VVe:case KVe:case GVe:return Object.is(t.valueOf(),e.valueOf());case HVe:return t.source===e.source&&t.flags===e.flags;case XVe:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(s){case ZVe:{if(t.size!==e.size)return!1;for(const[c,u]of t.entries())if(!e.has(c)||!S1(u,e.get(c),c,t,e,r,n))return!1;return!0}case YVe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),u=Array.from(e.values());for(let l=0;l<c.length;l++){const d=c[l],f=u.findIndex(p=>S1(d,p,void 0,t,e,r,n));if(f===-1)return!1;u.splice(f,1)}return!0}case JVe:case rGe:case nGe:case sGe:case iGe:case oGe:case aGe:case cGe:case uGe:case lGe:case dGe:case fGe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!S1(t[c],e[c],c,t,e,r,n))return!1;return!0}case QVe:return t.byteLength!==e.byteLength?!1:Q1(new Uint8Array(t),new Uint8Array(e),r,n);case tGe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Q1(new Uint8Array(t),new Uint8Array(e),r,n);case eGe:return t.name===e.name&&t.message===e.message;case jR:{if(!(Q1(t.constructor,e.constructor,r,n)||XZ(t)&&XZ(e)))return!1;const c=[...Object.keys(t),...ZZ(t)],u=[...Object.keys(e),...ZZ(e)];if(c.length!==u.length)return!1;for(let l=0;l<c.length;l++){const d=c[l],f=t[d];if(!Object.hasOwn(e,d))return!1;const p=e[d];if(!S1(f,p,d,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function gGe(t,e){return pGe(t,e,hGe)}var mGe=Object.defineProperty,QZ=Object.getOwnPropertySymbols,yGe=Object.prototype.hasOwnProperty,bGe=Object.prototype.propertyIsEnumerable,g4=(t,e,r)=>e in t?mGe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,eY=(t,e)=>{for(var r in e||(e={}))yGe.call(e,r)&&g4(t,r,e[r]);if(QZ)for(var r of QZ(e))bGe.call(e,r)&&g4(t,r,e[r]);return t},ta=(t,e,r)=>g4(t,typeof e!="symbol"?e+"":e,r);class gg extends Wje{constructor(e,r,n,s=ql,i=void 0){super(e,r,n,s),this.core=e,this.logger=r,this.name=n,ta(this,"map",new Map),ta(this,"version",vze),ta(this,"cached",[]),ta(this,"initialized",!1),ta(this,"getKey"),ta(this,"storagePrefix",ql),ta(this,"recentlyDeleted",[]),ta(this,"recentlyDeletedLimit",200),ta(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ks(o)?this.map.set(this.getKey(o),o):xHe(o)?this.map.set(o.id,o):CHe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),ta(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),ta(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),ta(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>gGe(a[c],o[c]))):this.values)),ta(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=eY(eY({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),ta(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=wo(r,this.name),this.storagePrefix=s,this.getKey=i}get context(){return ka(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:s}=$e("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:n}=$e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=$e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var wGe=Object.defineProperty,vGe=(t,e,r)=>e in t?wGe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mr=(t,e,r)=>vGe(t,typeof e!="symbol"?e+"":e,r);class EGe{constructor(e,r){this.core=e,this.logger=r,mr(this,"name",xze),mr(this,"version",Cze),mr(this,"events",new Vy),mr(this,"pairings"),mr(this,"initialized",!1),mr(this,"storagePrefix",ql),mr(this,"ignoredPayloadTypes",[Xd]),mr(this,"registeredMethods",[]),mr(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),mr(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),mr(this,"create",async n=>{this.isInitialized();const s=i4(),i=await this.core.crypto.setSymKey(s),o=zs(he.FIVE_MINUTES),a={protocol:gae},c={topic:i,expiry:o,relay:a,active:!1,methods:n?.methods},u=CZ({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:n?.methods});return this.events.emit(Xp.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:n?.transportType,internal:n?.internal}),{topic:i,uri:u}}),mr(this,"pair",async n=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:n?.uri,trace:[hl.pairing_started]}});this.isValidPair(n,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:u}=xZ(n.uri);s.props.properties.topic=i,s.addTrace(hl.pairing_uri_validation_success),s.addTrace(hl.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(i)){if(l=this.pairings.get(i),s.addTrace(hl.existing_pairing),l.active)throw s.setError(Od.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(hl.pairing_not_expired)}const d=c||zs(he.FIVE_MINUTES),f={topic:i,relay:a,expiry:d,active:!1,methods:u};this.core.expirer.set(i,d),await this.pairings.set(i,f),s.addTrace(hl.store_new_pairing),n.activatePairing&&await this.activate({topic:i}),this.events.emit(Xp.create,f),s.addTrace(hl.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(hl.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Od.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(p){throw s.setError(Od.subscribe_pairing_topic_failure),p}return s.addTrace(hl.subscribe_pairing_topic_success),f}),mr(this,"activate",async({topic:n})=>{this.isInitialized();const s=zs(he.FIVE_MINUTES);this.core.expirer.set(n,s),await this.pairings.update(n,{active:!0,expiry:s})}),mr(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=n;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=zp();this.events.once(nn("pairing_ping",i),({error:u})=>{u?c(u):a()}),await o()}}),mr(this,"updateExpiry",async({topic:n,expiry:s})=>{this.isInitialized(),await this.pairings.update(n,{expiry:s})}),mr(this,"updateMetadata",async({topic:n,metadata:s})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:s})}),mr(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),mr(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",zn("USER_DISCONNECTED")),await this.deletePairing(s))}),mr(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(s);return CZ({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),mr(this,"sendRequest",async(n,s,i)=>{const o=Ms(s,i),a=await this.core.crypto.encode(n,o),c=u1[s].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),mr(this,"sendResult",async(n,s,i)=>{const o=Ul(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=u1[c].res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),mr(this,"sendError",async(n,s,i)=>{const o=Yy(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=u1[c]?u1[c].res:u1.unregistered_method.res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),mr(this,"deletePairing",async(n,s)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,zn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),s?Promise.resolve():this.core.expirer.del(n)])}),mr(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(s=>nh(s.expiry));await Promise.all(n.map(s=>this.deletePairing(s.topic)))}),mr(this,"onRelayEventRequest",async n=>{const{topic:s,payload:i}=n;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),mr(this,"onRelayEventResponse",async n=>{const{topic:s,payload:i}=n,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),mr(this,"onPairingPingRequest",async(n,s)=>{const{id:i}=s;try{this.isValidPing({topic:n}),await this.sendResult(i,n,!0),this.events.emit(Xp.ping,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),mr(this,"onPairingPingResponse",(n,s)=>{const{id:i}=s;setTimeout(()=>{Vs(s)?this.events.emit(nn("pairing_ping",i),{}):gs(s)&&this.events.emit(nn("pairing_ping",i),{error:s.error})},500)}),mr(this,"onPairingDeleteRequest",async(n,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Xp.delete,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),mr(this,"onUnknownRpcMethodRequest",async(n,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=zn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,n,a),this.logger.error(a)}catch(a){await this.sendError(i,n,a),this.logger.error(a)}}),mr(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(zn("WC_METHOD_UNSUPPORTED",n))}),mr(this,"isValidPair",(n,s)=>{var i;if(!ia(n)){const{message:a}=$e("MISSING_OR_INVALID",`pair() params: ${n}`);throw s.setError(Od.malformed_pairing_uri),new Error(a)}if(!AHe(n.uri)){const{message:a}=$e("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw s.setError(Od.malformed_pairing_uri),new Error(a)}const o=xZ(n?.uri);if(!((i=o?.relay)!=null&&i.protocol)){const{message:a}=$e("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Od.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=$e("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Od.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&he.toMiliseconds(o?.expiryTimestamp)<Date.now()){s.setError(Od.pairing_expired);const{message:a}=$e("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),mr(this,"isValidPing",async n=>{if(!ia(n)){const{message:i}=$e("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),mr(this,"isValidDisconnect",async n=>{if(!ia(n)){const{message:i}=$e("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),mr(this,"isValidPairingTopic",async n=>{if(!Us(n,!1)){const{message:s}=$e("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(s)}if(!this.pairings.keys.includes(n)){const{message:s}=$e("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(s)}if(nh(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:s}=$e("EXPIRED",`pairing topic: ${n}`);throw new Error(s)}}),this.core=e,this.logger=wo(r,this.name),this.pairings=new gg(this.core,this.logger,this.name,this.storagePrefix)}get context(){return ka(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(_s.message,async e=>{const{topic:r,message:n,transportType:s}=e;if(this.pairings.keys.includes(r)&&s!==Hn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const i=await this.core.crypto.decode(r,n);Jy(i)?(this.core.history.set(r,i),await this.onRelayEventRequest({topic:r,payload:i})):J0(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id)),await this.core.relayer.messages.ack(r,n)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Mc.expired,async e=>{const{topic:r}=voe(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Xp.expire,{topic:r}))})}}var _Ge=Object.defineProperty,AGe=(t,e,r)=>e in t?_Ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ei=(t,e,r)=>AGe(t,typeof e!="symbol"?e+"":e,r);class xGe extends $je{constructor(e,r){super(e,r),this.core=e,this.logger=r,Ei(this,"records",new Map),Ei(this,"events",new Ys.EventEmitter),Ei(this,"name",Sze),Ei(this,"version",Ize),Ei(this,"cached",[]),Ei(this,"initialized",!1),Ei(this,"storagePrefix",ql),Ei(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ei(this,"set",(n,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:n,request:{method:s.method,params:s.params||null},chainId:i,expiry:zs(he.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(pu.created,o)}),Ei(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const s=await this.getRecord(n.id);typeof s.response>"u"&&(s.response=gs(n)?{error:n.error}:{result:n.result},this.records.set(s.id,s),this.persist(),this.events.emit(pu.updated,s))}),Ei(this,"get",async(n,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:s}),await this.getRecord(s))),Ei(this,"delete",(n,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===n){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(pu.deleted,i)}}),this.persist()}),Ei(this,"exists",async(n,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===n:!1)),Ei(this,"on",(n,s)=>{this.events.on(n,s)}),Ei(this,"once",(n,s)=>{this.events.once(n,s)}),Ei(this,"off",(n,s)=>{this.events.off(n,s)}),Ei(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=wo(r,this.name)}get context(){return ka(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Ms(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=$e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(pu.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=$e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(pu.created,e=>{const r=pu.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(pu.updated,e=>{const r=pu.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(pu.deleted,e=>{const r=pu.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(dc.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{he.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(pu.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var CGe=Object.defineProperty,SGe=(t,e,r)=>e in t?CGe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,no=(t,e,r)=>SGe(t,typeof e!="symbol"?e+"":e,r);class IGe extends Gje{constructor(e,r){super(e,r),this.core=e,this.logger=r,no(this,"expirations",new Map),no(this,"events",new Ys.EventEmitter),no(this,"name",Tze),no(this,"version",Nze),no(this,"cached",[]),no(this,"initialized",!1),no(this,"storagePrefix",ql),no(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),no(this,"has",n=>{try{const s=this.formatTarget(n);return typeof this.getExpiration(s)<"u"}catch{return!1}}),no(this,"set",(n,s)=>{this.isInitialized();const i=this.formatTarget(n),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Mc.created,{target:i,expiration:o})}),no(this,"get",n=>{this.isInitialized();const s=this.formatTarget(n);return this.getExpiration(s)}),no(this,"del",n=>{if(this.isInitialized(),this.has(n)){const s=this.formatTarget(n),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Mc.deleted,{target:s,expiration:i})}}),no(this,"on",(n,s)=>{this.events.on(n,s)}),no(this,"once",(n,s)=>{this.events.once(n,s)}),no(this,"off",(n,s)=>{this.events.off(n,s)}),no(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=wo(r,this.name)}get context(){return ka(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return aFe(e);if(typeof e=="number")return cFe(e);const{message:r}=$e("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Mc.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=$e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=$e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;he.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Mc.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(dc.pulse,()=>this.checkExpirations()),this.events.on(Mc.created,e=>{const r=Mc.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Mc.expired,e=>{const r=Mc.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Mc.deleted,e=>{const r=Mc.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var TGe=Object.defineProperty,NGe=(t,e,r)=>e in t?TGe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ns=(t,e,r)=>NGe(t,typeof e!="symbol"?e+"":e,r);class PGe extends Kje{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,Ns(this,"name",Pze),Ns(this,"abortController"),Ns(this,"isDevEnv"),Ns(this,"verifyUrlV3",Oze),Ns(this,"storagePrefix",ql),Ns(this,"version",pae),Ns(this,"publicKey"),Ns(this,"fetchPromise"),Ns(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&he.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Ns(this,"register",async s=>{if(!fb()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const u=di.getDocument(),l=this.startAbortTimer(he.ONE_SECOND*5),d=await new Promise((f,p)=>{const g=()=>{window.removeEventListener("message",y),u.body.removeChild(h),p("attestation aborted")};this.abortController.signal.addEventListener("abort",g);const h=u.createElement("iframe");h.src=c,h.style.display="none",h.addEventListener("error",g,{signal:this.abortController.signal});const y=E=>{if(E.data&&typeof E.data=="string")try{const S=JSON.parse(E.data);if(S.type==="verify_attestation"){if(wy(S.attestation).payload.id!==o)return;clearInterval(l),u.body.removeChild(h),this.abortController.signal.removeEventListener("abort",g),window.removeEventListener("message",y),f(S.attestation===null?"":S.attestation)}}catch(S){this.logger.warn(S)}};u.body.appendChild(h),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(u){this.logger.warn(u)}return""}),Ns(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(wy(i).payload.id!==a)return;const u=await this.isValidJwtAttestation(i);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const c=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(o,c)}),Ns(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(he.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Ns(this,"getVerifyUrl",s=>{let i=s||X1;return kze.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${X1}`),i=X1),i}),Ns(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(he.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Ns(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Ns(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Ns(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Ns(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Ns(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Ns(this,"validateAttestation",(s,i)=>{const o=rHe(s,i.publicKey),a={hasExpired:he.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=wo(r,this.name),this.abortController=new AbortController,this.isDevEnv=I9(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return ka(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),he.toMiliseconds(e))}}var RGe=Object.defineProperty,OGe=(t,e,r)=>e in t?RGe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tY=(t,e,r)=>OGe(t,typeof e!="symbol"?e+"":e,r);class kGe extends Zje{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,tY(this,"context",Bze),tY(this,"registerDeviceToken",async n=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=n,c=`${Uze}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=wo(r,this.context)}}var BGe=Object.defineProperty,rY=Object.getOwnPropertySymbols,UGe=Object.prototype.hasOwnProperty,MGe=Object.prototype.propertyIsEnumerable,m4=(t,e,r)=>e in t?BGe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,h1=(t,e)=>{for(var r in e||(e={}))UGe.call(e,r)&&m4(t,r,e[r]);if(rY)for(var r of rY(e))MGe.call(e,r)&&m4(t,r,e[r]);return t},Qs=(t,e,r)=>m4(t,typeof e!="symbol"?e+"":e,r);class DGe extends Yje{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,Qs(this,"context",Dze),Qs(this,"storagePrefix",ql),Qs(this,"storageVersion",Mze),Qs(this,"events",new Map),Qs(this,"shouldPersist",!1),Qs(this,"init",async()=>{if(!I9())try{const s={eventId:VK(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:boe(this.core.relayer.protocol,this.core.relayer.version,c4)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Qs(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,u=VK(),l=this.core.projectId||"",d=Date.now(),f=h1({eventId:u,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,f),this.shouldPersist=!0),f}),Qs(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return h1(h1({},a),this.setMethods(a.eventId))}),Qs(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Qs(this,"setEventListeners",()=>{this.core.heartbeat.on(dc.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{he.fromMiliseconds(Date.now())-he.fromMiliseconds(s.timestamp)>jze&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Qs(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Qs(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Qs(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Qs(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Qs(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,h1(h1({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Qs(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Qs(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Lze}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${c4}${i}`,{method:"POST",body:JSON.stringify(s)})}),Qs(this,"getAppDomain",()=>yoe().url),this.logger=wo(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var jGe=Object.defineProperty,nY=Object.getOwnPropertySymbols,LGe=Object.prototype.hasOwnProperty,FGe=Object.prototype.propertyIsEnumerable,y4=(t,e,r)=>e in t?jGe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,sY=(t,e)=>{for(var r in e||(e={}))LGe.call(e,r)&&y4(t,r,e[r]);if(nY)for(var r of nY(e))FGe.call(e,r)&&y4(t,r,e[r]);return t},Un=(t,e,r)=>y4(t,typeof e!="symbol"?e+"":e,r);let $Ge=class Nae extends Dje{constructor(e){var r;super(e),Un(this,"protocol",hae),Un(this,"version",pae),Un(this,"name",a4),Un(this,"relayUrl"),Un(this,"projectId"),Un(this,"customStoragePrefix"),Un(this,"events",new Ys.EventEmitter),Un(this,"logger"),Un(this,"heartbeat"),Un(this,"relayer"),Un(this,"crypto"),Un(this,"storage"),Un(this,"history"),Un(this,"expirer"),Un(this,"pairing"),Un(this,"verify"),Un(this,"echoClient"),Un(this,"linkModeSupportedApps"),Un(this,"eventClient"),Un(this,"initialized",!1),Un(this,"logChunkController"),Un(this,"on",(a,c)=>this.events.on(a,c)),Un(this,"once",(a,c)=>this.events.once(a,c)),Un(this,"off",(a,c)=>this.events.off(a,c)),Un(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Un(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const l={topic:a,message:c,publishedAt:Date.now(),transportType:Hn.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})});const n=this.getGlobalCore(e?.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||mae,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=ub({level:typeof e?.logger=="string"&&e.logger?e.logger:oze.logger,name:a4}),{logger:i,chunkLoggerController:o}=C9({opts:s,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=wo(i,this.name),this.heartbeat=new RJ,this.crypto=new pVe(this,this.logger,e?.keychain),this.history=new xGe(this,this.logger),this.expirer=new IGe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new BJ(sY(sY({},aze),e?.storageOptions)),this.relayer=new $Ve({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new EGe(this,this.logger),this.verify=new PGe(this,this.logger,this.storage),this.echoClient=new kGe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new DGe(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const r=new Nae(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(Eze,n),r}get context(){return ka(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(MZ,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(MZ)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${e}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(e){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=e.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&ize.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const qGe=$Ge,Pae="wc",Rae=2,Oae="client",$9=`${Pae}@${Rae}:${Oae}:`,LR={name:Oae,logger:"error"},iY="WALLETCONNECT_DEEPLINK_CHOICE",HGe="proposal",oY="Proposal expired",zGe="session",fm=he.SEVEN_DAYS,WGe="engine",_i={wc_sessionPropose:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1104},res:{ttl:he.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1106},res:{ttl:he.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1112},res:{ttl:he.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1114},res:{ttl:he.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:he.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:he.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1119}}},FR={min:he.FIVE_MINUTES,max:he.SEVEN_DAYS},ll={idle:"IDLE",active:"ACTIVE"},VGe={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},GGe="request",KGe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],ZGe="wc",YGe="auth",JGe="authKeys",XGe="pairingTopics",QGe="requests",l3=`${ZGe}@${1.5}:${YGe}:`,qI=`${l3}:PUB_KEY`;var eKe=Object.defineProperty,tKe=Object.defineProperties,rKe=Object.getOwnPropertyDescriptors,aY=Object.getOwnPropertySymbols,nKe=Object.prototype.hasOwnProperty,sKe=Object.prototype.propertyIsEnumerable,b4=(t,e,r)=>e in t?eKe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gn=(t,e)=>{for(var r in e||(e={}))nKe.call(e,r)&&b4(t,r,e[r]);if(aY)for(var r of aY(e))sKe.call(e,r)&&b4(t,r,e[r]);return t},so=(t,e)=>tKe(t,rKe(e)),Ie=(t,e,r)=>b4(t,typeof e!="symbol"?e+"":e,r);class iKe extends eLe{constructor(e){super(e),Ie(this,"name",WGe),Ie(this,"events",new Vy),Ie(this,"initialized",!1),Ie(this,"requestQueue",{state:ll.idle,queue:[]}),Ie(this,"sessionRequestQueue",{state:ll.idle,queue:[]}),Ie(this,"emittedSessionRequests",new yFe({limit:500})),Ie(this,"requestQueueDelay",he.ONE_SECOND),Ie(this,"expectedPairingMethodMap",new Map),Ie(this,"recentlyDeletedMap",new Map),Ie(this,"recentlyDeletedLimit",200),Ie(this,"relayMessageCache",[]),Ie(this,"pendingSessions",new Map),Ie(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(_i)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay)))}),Ie(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=so(gn({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n),n.optionalNamespaces=bHe(n.requiredNamespaces,n.optionalNamespaces),n.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:u}=n;let l=s,d,f=!1;try{if(l){const P=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),f=P.active}}catch(P){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),P}if(!l||!f){const{topic:P,uri:D}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});l=P,d=D}if(!l){const{message:P}=$e("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(P)}const p=await this.client.core.crypto.generateKeyPair(),g=_i.wc_sessionPropose.req.ttl||he.FIVE_MINUTES,h=zs(g),y=so(gn(gn({requiredNamespaces:i,optionalNamespaces:o,relays:u??[{protocol:gae}],proposer:{publicKey:p,metadata:this.client.metadata},expiryTimestamp:h,pairingTopic:l},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:ni()}),E=nn("session_connect",y.id),{reject:S,resolve:C,done:_}=zp(g,oY),T=({id:P})=>{P===y.id&&(this.client.events.off("proposal_expire",T),this.pendingSessions.delete(y.id),this.events.emit(E,{error:{message:oY,code:0}}))};return this.client.events.on("proposal_expire",T),this.events.once(E,({error:P,session:D})=>{this.client.events.off("proposal_expire",T),P?S(P):D&&C(D)}),await this.sendProposeSession({proposal:y,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:y.id}}}),await this.setProposal(y.id,y),{uri:d,approval:_}}),Ie(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),Ie(this,"approve",async r=>{var n,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r?.id)==null?void 0:n.toString(),trace:[Qf.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(I){throw o.setError(l1.no_internet_connection),I}try{await this.isValidProposalId(r?.id)}catch(I){throw this.client.logger.error(`approve() -> proposal.get(${r?.id}) failed`),o.setError(l1.proposal_not_found),I}try{await this.isValidApprove(r)}catch(I){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(l1.session_approve_namespace_validation_failure),I}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:f}=r,p=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:g,proposer:h,requiredNamespaces:y,optionalNamespaces:E}=p;let S=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:g});S||(S=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Qf.session_approve_started,properties:{topic:g,trace:[Qf.session_approve_started,Qf.session_namespaces_validation_success]}}));const C=await this.client.core.crypto.generateKeyPair(),_=h.publicKey,T=await this.client.core.crypto.generateSharedKey(C,_),P=gn(gn(gn({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:C,metadata:this.client.metadata},expiry:zs(fm)},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),D=Hn.relay;S.addTrace(Qf.subscribing_session_topic);try{await this.client.core.relayer.subscribe(T,{transportType:D,internal:{skipSubscribe:!0}})}catch(I){throw S.setError(l1.subscribe_session_topic_failure),I}S.addTrace(Qf.subscribe_session_topic_success);const L=so(gn({},P),{topic:T,requiredNamespaces:y,optionalNamespaces:E,pairingTopic:g,acknowledged:!1,self:P.controller,peer:{publicKey:h.publicKey,metadata:h.metadata},controller:C,transportType:Hn.relay});await this.client.session.set(T,L),S.addTrace(Qf.store_session);try{await this.sendApproveSession({sessionTopic:T,proposal:p,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:C},sessionSettleRequest:P,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:a}}}),S.addTrace(Qf.session_approve_publish_success)}catch(I){throw this.client.logger.error(I),this.client.session.delete(T,zn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(T),I}return this.client.core.eventClient.deleteEvent({eventId:S.eventId}),await this.client.core.pairing.updateMetadata({topic:g,metadata:h.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(T,zs(fm)),{topic:T,acknowledged:()=>Promise.resolve(this.client.session.get(T))}}),Ie(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:s}=r;let i;try{i=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}i&&await this.sendError({id:n,topic:i,error:s,rpcOpts:_i.wc_sessionPropose.reject}),await this.deleteProposal(n)}),Ie(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:n,namespaces:s}=r,{done:i,resolve:o,reject:a}=zp(),c=ni(),u=ko().toString(),l=this.client.session.get(n).namespaces;return this.events.once(nn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(n,{namespaces:s}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(d=>{this.client.logger.error(d),this.client.session.update(n,{namespaces:l}),a(d)}),{acknowledged:i}}),Ie(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,s=ni(),{done:i,resolve:o,reject:a}=zp();return this.events.once(nn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,zs(fm)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),Ie(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:n,request:s,topic:i,expiry:o=_i.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(i);a?.transportType===Hn.relay&&await this.confirmOnlineStateOrThrow();const c=ni(),u=ko().toString(),{done:l,resolve:d,reject:f}=zp(o,"Request expired. Please try again.");this.events.once(nn("session_request",c),({error:y,result:E})=>{y?f(y):d(E)});const p="wc_sessionRequest",g=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(g)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:p,params:{request:so(gn({},s),{expiryTimestamp:zs(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:g}).catch(y=>f(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),await l();const h={request:so(gn({},s),{expiryTimestamp:zs(o)}),chainId:n};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:p,params:h,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,h)}).catch(E=>f(E)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),y()}),new Promise(async y=>{var E;if(!((E=a.sessionConfig)!=null&&E.disableDeepLink)){const S=await fFe(this.client.core.storage,iY);await uFe({id:c,topic:i,wcDeepLink:S})}y()}),l()]).then(y=>y[2])}),Ie(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:s}=r,{id:i}=s,o=this.client.session.get(n);o.transportType===Hn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Vs(s)?await this.sendResult({id:i,topic:n,result:s.result,throwOnFailedPublish:!0,appLink:a}):gs(s)&&await this.sendError({id:i,topic:n,error:s.error,appLink:a}),this.cleanupAfterResponse(r)}),Ie(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:n}=r;if(this.client.session.keys.includes(n)){const s=ni(),i=ko().toString(),{done:o,resolve:a,reject:c}=zp();this.events.once(nn("session_ping",s),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),Ie(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:s,chainId:i}=r,o=ko().toString(),a=ni();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),Ie(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:zn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:s}=$e("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(s)}}),Ie(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>EHe(n,r)))),Ie(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Ie(this,"authenticate",async(r,n)=>{var s;this.isInitialized(),this.isValidAuthenticate(r);const i=n&&this.client.core.linkModeSupportedApps.includes(n)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Hn.link_mode:Hn.relay;o===Hn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:l,nonce:d,type:f,exp:p,nbf:g,methods:h=[],expiry:y}=r,E=[...r.resources||[]],{topic:S,uri:C}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:S,uri:C}});const _=await this.client.core.crypto.generateKeyPair(),T=FI(_);if(await Promise.all([this.client.auth.authKeys.set(qI,{responseTopic:T,publicKey:_}),this.client.auth.pairingTopics.set(T,{topic:T,pairingTopic:S})]),await this.client.core.relayer.subscribe(T,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${S}`),h.length>0){const{namespace:k}=x0(a[0]);let j=T$e(k,"request",h);LI(E)&&(j=P$e(j,E.pop())),E.push(j)}const P=y&&y>_i.wc_sessionAuthenticate.req.ttl?y:_i.wc_sessionAuthenticate.req.ttl,D={authPayload:{type:f??"caip122",chains:a,statement:c,aud:u,domain:l,version:"1",nonce:d,iat:new Date().toISOString(),exp:p,nbf:g,resources:E},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:zs(P)},L={eip155:{chains:a,methods:[...new Set(["personal_sign",...h])],events:["chainChanged","accountsChanged"]}},I={requiredNamespaces:{},optionalNamespaces:L,relays:[{protocol:"irn"}],pairingTopic:S,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:zs(_i.wc_sessionPropose.req.ttl),id:ni()},{done:U,resolve:F,reject:B}=zp(P,"Request expired"),A=ni(),m=nn("session_connect",I.id),b=nn("session_request",A),w=async({error:k,session:j})=>{this.events.off(b,x),k?B(k):j&&F({session:j})},x=async k=>{var j,N,v;if(await this.deletePendingAuthRequest(A,{message:"fulfilled",code:0}),k.error){const K=zn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return k.error.code===K.code?void 0:(this.events.off(m,w),B(k.error.message))}await this.deleteProposal(I.id),this.events.off(m,w);const{cacaos:R,responder:$}=k.result,O=[],H=[];for(const K of R){await nZ({cacao:K,projectId:this.client.core.projectId})||(this.client.logger.error(K,"Signature verification failed"),B(zn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Q}=K,re=LI(Q.resources),de=[YO(Q.iss)],le=fT(Q.iss);if(re){const se=sZ(re),be=iZ(re);O.push(...se),de.push(...be)}for(const se of de)H.push(`${se}:${le}`)}const W=await this.client.core.crypto.generateSharedKey(_,$.publicKey);let G;O.length>0&&(G={topic:W,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:$,controller:$.publicKey,expiry:zs(fm),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:S,namespaces:NZ([...new Set(O)],[...new Set(H)]),transportType:o},await this.client.core.relayer.subscribe(W,{transportType:o}),await this.client.session.set(W,G),S&&await this.client.core.pairing.updateMetadata({topic:S,metadata:$.metadata}),G=this.client.session.get(W)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(N=$.metadata.redirect)!=null&&N.linkMode&&(v=$.metadata.redirect)!=null&&v.universal&&n&&(this.client.core.addLinkModeSupportedApp($.metadata.redirect.universal),this.client.session.update(W,{transportType:Hn.link_mode})),F({auths:R,session:G})};this.events.once(m,w),this.events.once(b,x);let M;try{if(i){const k=Ms("wc_sessionAuthenticate",D,A);this.client.core.history.set(S,k);const j=await this.client.core.crypto.encode("",k,{type:M_,encoding:hh});M=rI(n,S,j)}else await Promise.all([this.sendRequest({topic:S,method:"wc_sessionAuthenticate",params:D,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:A}),this.sendRequest({topic:S,method:"wc_sessionPropose",params:I,expiry:_i.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:I.id})])}catch(k){throw this.events.off(m,w),this.events.off(b,x),k}return await this.setProposal(I.id,I),await this.setAuthRequest(A,{request:so(gn({},D),{verifyContext:{}}),pairingTopic:S,transportType:o}),{uri:M??C,response:U}}),Ie(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:s}=r,i=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[Lp.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(d1.no_internet_connection),y}const o=this.getPendingAuthRequest(n);if(!o)throw i.setError(d1.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Hn.relay;a===Hn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=FI(c),d={type:Xd,receiverPublicKey:c,senderPublicKey:u},f=[],p=[];for(const y of s){if(!await nZ({cacao:y,projectId:this.client.core.projectId})){i.setError(d1.invalid_cacao);const T=zn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:l,error:T,encodeOpts:d}),new Error(T.message)}i.addTrace(Lp.cacaos_verified);const{p:E}=y,S=LI(E.resources),C=[YO(E.iss)],_=fT(E.iss);if(S){const T=sZ(S),P=iZ(S);f.push(...T),C.push(...P)}for(const T of C)p.push(`${T}:${_}`)}const g=await this.client.core.crypto.generateSharedKey(u,c);i.addTrace(Lp.create_authenticated_session_topic);let h;if(f?.length>0){h={topic:g,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:zs(fm),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:NZ([...new Set(f)],[...new Set(p)]),transportType:a},i.addTrace(Lp.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(g,{transportType:a})}catch(y){throw i.setError(d1.subscribe_authenticated_session_topic_failure),y}i.addTrace(Lp.subscribe_authenticated_session_topic_success),await this.client.session.set(g,h),i.addTrace(Lp.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Lp.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:n,result:{cacaos:s,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(d1.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:h}}),Ie(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:s}=r,i=this.getPendingAuthRequest(n);if(!i)throw new Error(`Could not find pending auth request with id ${n}`);i.transportType===Hn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=FI(o),u={type:Xd,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:s,encodeOpts:u,rpcOpts:_i.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.deleteProposal(n)}),Ie(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:s}=r;return Uoe(n,s)}),Ie(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),Ie(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&i.topic&&i.topic!==n.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),Ie(this,"deleteSession",async r=>{var n;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,zn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(iY).catch(u=>this.client.logger.warn(u)),this.getPendingSessionRequests().forEach(u=>{u.topic===s&&this.deletePendingSessionRequest(u.id,zn("USER_DISCONNECTED"))}),s===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=ll.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),Ie(this,"deleteProposal",async(r,n)=>{if(n)try{const s=this.client.proposal.get(r);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(l1.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,zn("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),Ie(this,"deletePendingSessionRequest",async(r,n,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==r),s&&(this.sessionRequestQueue.state=ll.idle,this.client.events.emit("session_request_expire",{id:r}))}),Ie(this,"deletePendingAuthRequest",async(r,n,s=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)])}),Ie(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),Ie(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,zs(_i.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),Ie(this,"setAuthRequest",async(r,n)=>{const{request:s,pairingTopic:i,transportType:o=Hn.relay}=n;this.client.core.expirer.set(r,s.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:r,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),Ie(this,"setPendingSessionRequest",async r=>{const{id:n,topic:s,params:i,verifyContext:o}=r,a=i.request.expiryTimestamp||zs(_i.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:s,params:i,verifyContext:o})}),Ie(this,"sendRequest",async r=>{const{topic:n,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:l,tvf:d,publishOpts:f={}}=r,p=Ms(s,i,c);let g;const h=!!l;try{const S=h?hh:ma;g=await this.client.core.crypto.encode(n,p,{encoding:S})}catch(S){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),S}let y;if(KGe.includes(s)){const S=Fc(JSON.stringify(p)),C=Fc(g);y=await this.client.core.verify.register({id:C,decryptedId:S})}const E=gn(gn({},_i[s].req),f);if(E.attestation=y,o&&(E.ttl=o),a&&(E.id=a),this.client.core.history.set(n,p),h){const S=rI(l,n,g);await global.Linking.openURL(S,this.client.name)}else E.tvf=so(gn({},d),{correlationId:p.id}),u?(E.internal=so(gn({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,g,E)):this.client.core.relayer.publish(n,g,E).catch(S=>this.client.logger.error(S));return p.id}),Ie(this,"sendProposeSession",async r=>{const{proposal:n,publishOpts:s}=r,i=Ms("wc_sessionPropose",n,n.id);this.client.core.history.set(n.pairingTopic,i);const o=await this.client.core.crypto.encode(n.pairingTopic,i,{encoding:ma}),a=Fc(JSON.stringify(i)),c=Fc(o),u=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:n.pairingTopic,sessionProposal:o},opts:so(gn({},s),{publishMethod:"wc_proposeSession",attestation:u})})}),Ie(this,"sendApproveSession",async r=>{const{sessionTopic:n,pairingProposalResponse:s,proposal:i,sessionSettleRequest:o,publishOpts:a}=r,c=Ul(i.id,s),u=await this.client.core.crypto.encode(i.pairingTopic,c,{encoding:ma}),l=Ms("wc_sessionSettle",o,a?.id),d=await this.client.core.crypto.encode(n,l,{encoding:ma});this.client.core.history.set(n,l),await this.client.core.relayer.publishCustom({payload:{sessionTopic:n,pairingTopic:i.pairingTopic,sessionProposalResponse:u,sessionSettlementRequest:d},opts:so(gn({},a),{publishMethod:"wc_approveSession"})})}),Ie(this,"sendResult",async r=>{const{id:n,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,u=Ul(n,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=d?hh:ma;l=await this.client.core.crypto.encode(s,u,so(gn({},a||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),g}let f,p;try{f=await this.client.core.history.get(s,n);const g=f.request;try{p=this.getTVFParams(n,g.params,i)}catch(h){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${h?.message}`)}}catch(g){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${n}) failed`),g}if(d){const g=rI(c,s,l);await global.Linking.openURL(g,this.client.name)}else{const g=f.request.method,h=_i[g].res;h.tvf=so(gn({},p),{correlationId:n}),o?(h.internal=so(gn({},h.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,l,h)):this.client.core.relayer.publish(s,l,h).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(u)}),Ie(this,"sendError",async r=>{const{id:n,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=r,u=Yy(n,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?hh:ma;l=await this.client.core.crypto.encode(s,u,so(gn({},o||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),p}let f;try{f=await this.client.core.history.get(s,n)}catch(p){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),p}if(d){const p=rI(c,s,l);await global.Linking.openURL(p,this.client.name)}else{const p=f.request.method,g=a||_i[p].res;this.client.core.relayer.publish(s,l,g)}await this.client.core.history.resolve(u)}),Ie(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(s=>{let i=!1;nh(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&r.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{nh(s.expiryTimestamp)&&n.push(s.id)}),await Promise.all([...r.map(s=>this.deleteSession({topic:s})),...n.map(s=>this.deleteProposal(s))])}),Ie(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),Ie(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),Ie(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ll.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ll.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=ll.idle}),Ie(this,"processRequest",async r=>{const{topic:n,payload:s,attestation:i,transportType:o,encryptedId:a}=r,c=s.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,s);case"wc_sessionPing":return await this.onSessionPingRequest(n,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),Ie(this,"onRelayEventResponse",async r=>{const{topic:n,payload:s,transportType:i}=r,o=(await this.client.core.history.get(n,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,s);case"wc_sessionExtend":return this.onSessionExtendResponse(n,s);case"wc_sessionPing":return this.onSessionPingResponse(n,s);case"wc_sessionRequest":return this.onSessionRequestResponse(n,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Ie(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:s}=$e("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),Ie(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:s}=r,i=this.expectedPairingMethodMap.get(n);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Ie(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:s,attestation:i,encryptedId:o}=r,{params:a,id:c}=s;try{const u=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u?.setError(Od.proposal_listener_not_found)),this.isValidConnect(gn({},s.params));const l=a.expiryTimestamp||zs(_i.wc_sessionPropose.req.ttl),d=gn({id:c,pairingTopic:n,expiryTimestamp:l,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const f=await this.getVerifyContext({attestationId:i,hash:Fc(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});u?.addTrace(hl.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:f})}catch(u){await this.sendError({id:c,topic:n,error:u,rpcOpts:_i.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),Ie(this,"onSessionProposeResponse",async(r,n,s)=>{const{id:i}=n;if(Vs(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:r,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(l,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else if(gs(n)){await this.deleteProposal(i);const o=nn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),Ie(this,"onSessionSettleRequest",async(r,n)=>{const{id:s,params:i}=n;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:f}=n.params,p=[...this.pendingSessions.values()].find(y=>y.sessionTopic===r);if(!p)return this.client.logger.error(`Pending session not found for topic ${r}`);const g=this.client.proposal.get(p.proposalId),h=so(gn(gn(gn({topic:r,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:p.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:a.publicKey,self:{publicKey:p.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{transportType:Hn.relay});await this.client.session.set(h.topic,h),await this.setExpiry(h.topic,h.expiry),await this.client.core.pairing.updateMetadata({topic:p.pairingTopic,metadata:h.peer.metadata}),this.client.events.emit("session_connect",{session:h}),this.events.emit(nn("session_connect",p.proposalId),{session:h}),this.pendingSessions.delete(p.proposalId),this.deleteProposal(p.proposalId,!1),this.cleanupDuplicatePairings(h),await this.sendResult({id:n.id,topic:r,result:!0})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),Ie(this,"onSessionSettleResponse",async(r,n)=>{const{id:s}=n;Vs(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(nn("session_approve",s),{})):gs(n)&&(await this.client.session.delete(r,zn("USER_DISCONNECTED")),this.events.emit(nn("session_approve",s),{error:n.error}))}),Ie(this,"onSessionUpdateRequest",async(r,n)=>{const{params:s,id:i}=n;try{const o=`${r}_session_update`,a=c1.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:r,error:zn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(gn({topic:r},s));try{c1.set(o,i),await this.client.session.update(r,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:r,result:!0})}catch(c){throw c1.delete(o),c}this.client.events.emit("session_update",{id:i,topic:r,params:s})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),Ie(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),Ie(this,"onSessionUpdateResponse",(r,n)=>{const{id:s}=n,i=nn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vs(n)?this.events.emit(nn("session_update",s),{}):gs(n)&&this.events.emit(nn("session_update",s),{error:n.error})}),Ie(this,"onSessionExtendRequest",async(r,n)=>{const{id:s}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,zs(fm)),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_extend",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),Ie(this,"onSessionExtendResponse",(r,n)=>{const{id:s}=n,i=nn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vs(n)?this.events.emit(nn("session_extend",s),{}):gs(n)&&this.events.emit(nn("session_extend",s),{error:n.error})}),Ie(this,"onSessionPingRequest",async(r,n)=>{const{id:s}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),Ie(this,"onSessionPingResponse",(r,n)=>{const{id:s}=n,i=nn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Vs(n)?this.events.emit(nn("session_ping",s),{}):gs(n)&&this.events.emit(nn("session_ping",s),{error:n.error})},500)}),Ie(this,"onSessionDeleteRequest",async(r,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(i=>{this.client.core.relayer.once(_s.publish,async()=>{i(await this.deleteSession({topic:r,id:s}))})}),this.sendResult({id:s,topic:r,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:zn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),Ie(this,"onSessionRequest",async r=>{var n,s,i;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:l}=r,{id:d,params:f}=a;try{await this.isValidRequest(gn({topic:o},f));const p=this.client.session.get(o),g=await this.getVerifyContext({attestationId:c,hash:Fc(JSON.stringify(Ms("wc_sessionRequest",f,d))),encryptedId:u,metadata:p.peer.metadata,transportType:l}),h={id:d,topic:o,params:f,verifyContext:g};await this.setPendingSessionRequest(h),l===Hn.link_mode&&(n=p.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((s=p.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(h):(this.addSessionRequestToSessionRequestQueue(h),this.processSessionRequestQueue())}catch(p){await this.sendError({id:d,topic:o,error:p}),this.client.logger.error(p)}}),Ie(this,"onSessionRequestResponse",(r,n)=>{const{id:s}=n,i=nn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vs(n)?this.events.emit(nn("session_request",s),{result:n.result}):gs(n)&&this.events.emit(nn("session_request",s),{error:n.error})}),Ie(this,"onSessionEventRequest",async(r,n)=>{const{id:s,params:i}=n;try{const o=`${r}_session_event_${i.event.name}`,a=c1.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(gn({topic:r},i)),this.client.events.emit("session_event",{id:s,topic:r,params:i}),c1.set(o,s)}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),Ie(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:s}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Vs(n)?this.events.emit(nn("session_request",s),{result:n.result}):gs(n)&&this.events.emit(nn("session_request",s),{error:n.error})}),Ie(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:u,authPayload:l,expiryTimestamp:d}=i.params,f=await this.getVerifyContext({attestationId:o,hash:Fc(JSON.stringify(i)),encryptedId:a,metadata:u.metadata,transportType:c}),p={requester:u,pairingTopic:s,id:i.id,authPayload:l,verifyContext:f,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:p,pairingTopic:s,transportType:c}),c===Hn.link_mode&&(n=u.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:f})}catch(u){this.client.logger.error(u);const l=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(i.params.requester.metadata,c),p={type:Xd,receiverPublicKey:l,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:u,encodeOpts:p,rpcOpts:_i.wc_sessionAuthenticate.autoReject,appLink:f})}}),Ie(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),Ie(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ll.idle,this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay))}),Ie(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===r&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=nn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(nn("session_request",i.request.id),{error:n})})}),Ie(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ll.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),Ie(this,"emitSessionRequest",r=>{if(this.emittedSessionRequests.has(r.id)){this.client.logger.warn({id:r.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${r.id}`);return}this.sessionRequestQueue.state=ll.active,this.emittedSessionRequests.add(r.id),this.client.events.emit("session_request",r)}),Ie(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(s=>s.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:Ms("wc_sessionPropose",so(gn({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id),attestation:n.attestation,encryptedId:n.encryptedId})}),Ie(this,"isValidConnect",async r=>{if(!ia(r)){const{message:u}=$e("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=r;if(Ks(n)||await this.isValidPairingTopic(n),!kHe(c)){const{message:u}=$e("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(!Ks(s)&&kl(s)!==0){const u="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(u):this.client.logger.warn(u),this.validateNamespaces(s,"requiredNamespaces")}if(!Ks(i)&&kl(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Ks(o)||this.validateSessionProps(o,"sessionProperties"),!Ks(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(l=>u.includes(l.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),Ie(this,"validateNamespaces",(r,n)=>{const s=OHe(r,"connect()",n);if(s)throw new Error(s.message)}),Ie(this,"isValidApprove",async r=>{if(!ia(r))throw new Error($e("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),u=BR(s,"approve()");if(u)throw new Error(u.message);const l=OZ(c.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!Us(i,!0)){const{message:d}=$e("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Ks(o)||this.validateSessionProps(o,"sessionProperties"),!Ks(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(f=>d.has(f.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),Ie(this,"isValidReject",async r=>{if(!ia(r)){const{message:i}=$e("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(i)}const{id:n,reason:s}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!UHe(s)){const{message:i}=$e("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),Ie(this,"isValidSessionSettleRequest",r=>{if(!ia(r)){const{message:u}=$e("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:s,namespaces:i,expiry:o}=r;if(!fae(n)){const{message:u}=$e("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=SHe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=BR(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(nh(o)){const{message:u}=$e("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),Ie(this,"isValidUpdate",async r=>{if(!ia(r)){const{message:c}=$e("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:s}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const i=this.client.session.get(n),o=BR(s,"update()");if(o)throw new Error(o.message);const a=OZ(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),Ie(this,"isValidExtend",async r=>{if(!ia(r)){const{message:s}=$e("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(s)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),Ie(this,"isValidRequest",async r=>{if(!ia(r)){const{message:c}=$e("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:s,chainId:i,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!RZ(a,i)){const{message:c}=$e("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!MHe(s)){const{message:c}=$e("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!LHe(a,i,s.method)){const{message:c}=$e("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!HHe(o,FR)){const{message:c}=$e("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${FR.min} and ${FR.max}`);throw new Error(c)}}),Ie(this,"isValidRespond",async r=>{var n;if(!ia(r)){const{message:o}=$e("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:s,response:i}=r;try{await this.isValidSessionTopic(s)}catch(o){throw(n=r?.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!DHe(i)){const{message:o}=$e("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),Ie(this,"isValidPing",async r=>{if(!ia(r)){const{message:s}=$e("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),Ie(this,"isValidEmit",async r=>{if(!ia(r)){const{message:a}=$e("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:s,chainId:i}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!RZ(o,i)){const{message:a}=$e("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!jHe(s)){const{message:a}=$e("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!FHe(o,i,s.name)){const{message:a}=$e("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),Ie(this,"isValidDisconnect",async r=>{if(!ia(r)){const{message:s}=$e("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),Ie(this,"isValidAuthenticate",r=>{const{chains:n,uri:s,domain:i,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!Us(s,!1))throw new Error("uri is required parameter");if(!Us(i,!1))throw new Error("domain is required parameter");if(!Us(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>x0(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=x0(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Ie(this,"getVerifyContext",async r=>{const{attestationId:n,hash:s,encryptedId:i,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||X1,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Hn.link_mode){const l=this.getAppLinkIfEnabled(o,a);return c.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:n,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),Ie(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((s,i)=>{if(s==null){const{message:o}=$e("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${s} for key ${Object.keys(r)[i]}`);throw new Error(o)}})}),Ie(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),Ie(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),Ie(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:s}=$e("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(s)}}),Ie(this,"isLinkModeEnabled",(r,n)=>{var s,i,o,a,c,u,l,d,f;return!r||n!==Hn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==""&&((l=r?.redirect)==null?void 0:l.universal)!==void 0&&((d=r?.redirect)==null?void 0:d.universal)!==""&&((f=r?.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Ie(this,"getAppLinkIfEnabled",(r,n)=>{var s;return this.isLinkModeEnabled(r,n)?(s=r?.redirect)==null?void 0:s.universal:void 0}),Ie(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=WK(r,"topic")||"",s=decodeURIComponent(WK(r,"wc_ev")||""),i=this.client.session.keys.includes(n);i&&this.client.session.update(n,{transportType:Hn.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:s,sessionExists:i})}),Ie(this,"registerLinkModeListeners",async()=>{var r;if(I9()||ip()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await n.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),Ie(this,"getTVFParams",(r,n,s)=>{var i,o,a;if(!((i=n.request)!=null&&i.method))return{};const c={correlationId:r,rpcMethods:[n.request.method],chainId:n.chainId};try{const u=this.extractTxHashesFromResult(n.request,s);c.txHashes=u,c.contractAddresses=this.isValidContractData(n.request.params)?[(a=(o=n.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(u){this.client.logger.warn("Error getting TVF params",u)}return c}),Ie(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const s=r?.data||((n=r?.[0])==null?void 0:n.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),Ie(this,"extractTxHashesFromResult",(r,n)=>{var s;try{if(!n)return[];const i=r.method,o=VGe[i];if(i==="sui_signTransaction")return[f$e(n.transactionBytes)];if(i==="near_signTransaction")return[QK(n)];if(i==="near_signTransactions")return n.map(c=>QK(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=n.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[sze({transaction:r.params.transactionPayload,signature:n.signature})];if(i==="algo_signTxn")return Qd(n)?n.map(c=>eZ(c)):[eZ(n)];if(i==="cosmos_signDirect")return[p$e(n)];if(typeof n=="string")return[n];const a=n[o.key];if(Qd(a))return i==="solana_signAllTransactions"?a.map(c=>d$e(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,s]of Object.entries(r))for(const i of s)try{await this.onProviderMessageEvent({topic:n,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(_s.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(qI)?this.client.auth.authKeys.get(qI):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:i===Hn.link_mode?hh:ma});Jy(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:s,transportType:i,encryptedId:Fc(n)})):J0(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:i}),this.client.core.history.delete(r,a.id)):await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Mc.expired,async e=>{const{topic:r,id:n}=voe(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,$e("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,$e("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Xp.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Xp.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Us(e,!1)){const{message:r}=$e("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=$e("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(nh(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=$e("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Us(e,!1)){const{message:r}=$e("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=$e("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(nh(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=$e("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=$e("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Us(e,!1)){const{message:r}=$e("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=$e("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!BHe(e)){const{message:r}=$e("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=$e("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(nh(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=$e("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class oKe extends gg{constructor(e,r){super(e,r,HGe,$9),this.core=e,this.logger=r}}let aKe=class extends gg{constructor(e,r){super(e,r,zGe,$9),this.core=e,this.logger=r}};class cKe extends gg{constructor(e,r){super(e,r,GGe,$9,n=>n.id),this.core=e,this.logger=r}}class uKe extends gg{constructor(e,r){super(e,r,JGe,l3,()=>qI),this.core=e,this.logger=r}}class lKe extends gg{constructor(e,r){super(e,r,XGe,l3),this.core=e,this.logger=r}}class dKe extends gg{constructor(e,r){super(e,r,QGe,l3,n=>n.id),this.core=e,this.logger=r}}var fKe=Object.defineProperty,hKe=(t,e,r)=>e in t?fKe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$R=(t,e,r)=>hKe(t,typeof e!="symbol"?e+"":e,r);class pKe{constructor(e,r){this.core=e,this.logger=r,$R(this,"authKeys"),$R(this,"pairingTopics"),$R(this,"requests"),this.authKeys=new uKe(this.core,this.logger),this.pairingTopics=new lKe(this.core,this.logger),this.requests=new dKe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var gKe=Object.defineProperty,mKe=(t,e,r)=>e in t?gKe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yr=(t,e,r)=>mKe(t,typeof e!="symbol"?e+"":e,r);let yKe=class kae extends Qje{constructor(e){super(e),yr(this,"protocol",Pae),yr(this,"version",Rae),yr(this,"name",LR.name),yr(this,"metadata"),yr(this,"core"),yr(this,"logger"),yr(this,"events",new Ys.EventEmitter),yr(this,"engine"),yr(this,"session"),yr(this,"proposal"),yr(this,"pendingRequest"),yr(this,"auth"),yr(this,"signConfig"),yr(this,"on",(n,s)=>this.events.on(n,s)),yr(this,"once",(n,s)=>this.events.once(n,s)),yr(this,"off",(n,s)=>this.events.off(n,s)),yr(this,"removeListener",(n,s)=>this.events.removeListener(n,s)),yr(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),yr(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"update",async n=>{try{return await this.engine.update(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"request",async n=>{try{return await this.engine.request(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"find",n=>{try{return this.engine.find(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),yr(this,"authenticate",async(n,s)=>{try{return await this.engine.authenticate(n,s)}catch(i){throw this.logger.error(i.message),i}}),yr(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),this.name=e?.name||LR.name,this.metadata=nFe(e?.metadata),this.signConfig=e?.signConfig;const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:R_(ub({level:e?.logger||LR.logger}));this.core=e?.core||new qGe(e),this.logger=wo(r,this.name),this.session=new aKe(this.core,this.logger),this.proposal=new oKe(this.core,this.logger),this.pendingRequest=new cKe(this.core,this.logger),this.engine=new iKe(this),this.auth=new pKe(this.core,this.logger)}static async init(e){const r=new kae(e);return await r.initialize(),r}get context(){return ka(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const cY="error",bKe="wss://relay.walletconnect.org",wKe="wc",vKe="universal_provider",nI=`${wKe}@2:${vKe}:`,Bae="https://rpc.walletconnect.org/v1/",Uae="generic",EKe=`${Bae}bundler`,Xc={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function q9(t){return t==null||typeof t!="object"&&typeof t!="function"}function Mae(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Dae(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const _Ke="[object RegExp]",jae="[object String]",Lae="[object Number]",Fae="[object Boolean]",$ae="[object Arguments]",AKe="[object Symbol]",xKe="[object Date]",CKe="[object Map]",SKe="[object Set]",IKe="[object Array]",TKe="[object ArrayBuffer]",NKe="[object Object]",PKe="[object DataView]",RKe="[object Uint8Array]",OKe="[object Uint8ClampedArray]",kKe="[object Uint16Array]",BKe="[object Uint32Array]",UKe="[object Int8Array]",MKe="[object Int16Array]",DKe="[object Int32Array]",jKe="[object Float32Array]",LKe="[object Float64Array]";function H9(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function FKe(t,e){return Ym(t,void 0,t,new Map,e)}function Ym(t,e,r,n=new Map,s=void 0){const i=s?.(t,e,r,n);if(i!=null)return i;if(q9(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ym(t[a],a,r,n,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,Ym(c,a,r,n,s));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(Ym(a,void 0,r,n,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(H9(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ym(t[a],a,r,n,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),Qp(o,t,r,n,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),Qp(o,t,r,n,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),Qp(o,t,r,n,s),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Qp(o,t,r,n,s),o}if(typeof t=="object"&&$Ke(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),Qp(o,t,r,n,s),o}return t}function Qp(t,e,r=t,n,s){const i=[...Object.keys(e),...Mae(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Ym(e[a],a,r,n,s))}}function $Ke(t){switch(Dae(t)){case $ae:case IKe:case TKe:case PKe:case Fae:case xKe:case jKe:case LKe:case UKe:case MKe:case DKe:case CKe:case Lae:case NKe:case _Ke:case SKe:case jae:case AKe:case RKe:case OKe:case kKe:case BKe:return!0;default:return!1}}function qKe(t,e){return FKe(t,(r,n,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case Lae:case jae:case Fae:{const o=new t.constructor(t?.valueOf());return Qp(o,t),o}case $ae:{const o={};return Qp(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function uY(t){return qKe(t)}function lY(t){return t!==null&&typeof t=="object"&&Dae(t)==="[object Arguments]"}function dY(t){return typeof t=="object"&&t!==null}function HKe(){}function zKe(t){return H9(t)}function WKe(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function VKe(t){if(q9(t))return t;if(Array.isArray(t)||H9(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function GKe(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let s=t;for(let i=0;i<r.length;i++){const o=r[i];s=w4(s,o,n,new Map)}return s}function w4(t,e,r,n){if(q9(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return VKe(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...Mae(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(lY(a)&&(a={...a}),lY(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=uY(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const l=[],d=Reflect.ownKeys(c);for(let f=0;f<d.length;f++){const p=d[f];l[p]=c[p]}c=l}else c=[];const u=r(c,a,o,t,e,n);u!=null?t[o]=u:Array.isArray(a)||dY(c)&&dY(a)?t[o]=w4(c,a,r,n):c==null&&WKe(a)?t[o]=w4({},a,r,n):c==null&&zKe(a)?t[o]=uY(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function KKe(t,...e){return GKe(t,...e,HKe)}var ZKe=Object.defineProperty,YKe=Object.defineProperties,JKe=Object.getOwnPropertyDescriptors,fY=Object.getOwnPropertySymbols,XKe=Object.prototype.hasOwnProperty,QKe=Object.prototype.propertyIsEnumerable,hY=(t,e,r)=>e in t?ZKe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,sI=(t,e)=>{for(var r in e||(e={}))XKe.call(e,r)&&hY(t,r,e[r]);if(fY)for(var r of fY(e))QKe.call(e,r)&&hY(t,r,e[r]);return t},eZe=(t,e)=>YKe(t,JKe(e));function cc(t,e,r){var n;const s=x0(t);return((n=e.rpcMap)==null?void 0:n[s.reference])||`${Bae}?chainId=${s.namespace}:${s.reference}&projectId=${r}`}function mg(t){return t.includes(":")?t.split(":")[1]:t}function qae(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function tZe(t,e){const r=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!r.length)return[];const n=[];return r.forEach(s=>{const i=e.namespaces[s].accounts;n.push(...i)}),n}function pY(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>{var n,s;return((n=r?.chains)==null?void 0:n.length)&&((s=r?.chains)==null?void 0:s.length)>0}))}function iI(t={},e={}){const r=pY(gY(t)),n=pY(gY(e));return KKe(r,n)}function gY(t){var e,r,n,s,i;const o={};if(!kl(t))return o;for(const[a,c]of Object.entries(t)){const u=c3(a)?[a]:c.chains,l=c.methods||[],d=c.events||[],f=c.rpcMap||{},p=Zm(a);o[p]=eZe(sI(sI({},o[p]),c),{chains:Ol(u,(e=o[p])==null?void 0:e.chains),methods:Ol(l,(r=o[p])==null?void 0:r.methods),events:Ol(d,(n=o[p])==null?void 0:n.events)}),(kl(f)||kl(((s=o[p])==null?void 0:s.rpcMap)||{}))&&(o[p].rpcMap=sI(sI({},f),(i=o[p])==null?void 0:i.rpcMap))}return o}function mY(t){return t.includes(":")?t.split(":")[2]:t}function yY(t){const e={};for(const[r,n]of Object.entries(t)){const s=n.methods||[],i=n.events||[],o=n.accounts||[],a=c3(r)?[r]:n.chains?n.chains:qae(n.accounts);e[r]={chains:a,methods:s,events:i,accounts:o}}return e}function qR(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const Hae={},zr=t=>Hae[t],HR=(t,e)=>{Hae[t]=e};var rZe=Object.defineProperty,bY=Object.getOwnPropertySymbols,nZe=Object.prototype.hasOwnProperty,sZe=Object.prototype.propertyIsEnumerable,wY=(t,e,r)=>e in t?rZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vY=(t,e)=>{for(var r in e||(e={}))nZe.call(e,r)&&wY(t,r,e[r]);if(bY)for(var r of bY(e))sZe.call(e,r)&&wY(t,r,e[r]);return t};const EY="eip155",iZe=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],oZe=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,zR=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,_Y=t=>Object.keys(t).filter(e=>iZe.includes(e)).reduce((e,r)=>(e[r]=t[r],e),{}),aZe=(t,e,r)=>{const{sessionProperties:n={},scopedProperties:s={}}=t,i={};if(!kl(s)&&!kl(n))return;const o=_Y(n);for(const a of r){const c=oZe(a);if(!c)continue;i[zR(c)]=o;const u=s?.[`${EY}:${c}`];if(u){const l=u?.[`${EY}:${c}:${e}`];i[zR(c)]=vY(vY({},i[zR(c)]),_Y(l||u))}}for(const[a,c]of Object.entries(i))Object.keys(c).length===0&&delete i[a];return Object.keys(i).length>0?i:void 0};var cZe=Object.defineProperty,uZe=(t,e,r)=>e in t?cZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hm=(t,e,r)=>uZe(t,typeof e!="symbol"?e+"":e,r);class lZe{constructor(e){hm(this,"name","polkadot"),hm(this,"client"),hm(this,"httpProviders"),hm(this,"events"),hm(this,"namespace"),hm(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Xc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=mg(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||cc(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qo(new fc(n,zr("disableProviderPing")))}}var dZe=Object.defineProperty,fZe=Object.defineProperties,hZe=Object.getOwnPropertyDescriptors,AY=Object.getOwnPropertySymbols,pZe=Object.prototype.hasOwnProperty,gZe=Object.prototype.propertyIsEnumerable,v4=(t,e,r)=>e in t?dZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xY=(t,e)=>{for(var r in e||(e={}))pZe.call(e,r)&&v4(t,r,e[r]);if(AY)for(var r of AY(e))gZe.call(e,r)&&v4(t,r,e[r]);return t},CY=(t,e)=>fZe(t,hZe(e)),pm=(t,e,r)=>v4(t,typeof e!="symbol"?e+"":e,r);class mZe{constructor(e){pm(this,"name","eip155"),pm(this,"client"),pm(this,"chainId"),pm(this,"namespace"),pm(this,"httpProviders"),pm(this,"events"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(Xc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||cc(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qo(new fc(n,zr("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=parseInt(mg(r));e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let s=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,s,i,o;const a=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),l=((o=u?.sessionProperties)==null?void 0:o.capabilities)||{},d=`${a}${c.join(",")}`,f=l?.[d];if(f)return f;let p;try{p=aZe(u,a,c)}catch(h){console.warn("Failed to extract capabilities from session",h)}if(p)return p;const g=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:CY(xY({},u.sessionProperties||{}),{capabilities:CY(xY({},l||{}),{[d]:g})})})}catch(h){console.warn("Failed to update session with capabilities",h)}return g}async getCallStatus(e){var r,n;const s=this.client.session.get(e.topic),i=(r=s.sessionProperties)==null?void 0:r.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(n=s.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ms("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,r){return`${EKe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var yZe=Object.defineProperty,bZe=(t,e,r)=>e in t?yZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gm=(t,e,r)=>bZe(t,typeof e!="symbol"?e+"":e,r);class wZe{constructor(e){gm(this,"name","solana"),gm(this,"client"),gm(this,"httpProviders"),gm(this,"events"),gm(this,"namespace"),gm(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Xc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=mg(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||cc(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qo(new fc(n,zr("disableProviderPing")))}}var vZe=Object.defineProperty,EZe=(t,e,r)=>e in t?vZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mm=(t,e,r)=>EZe(t,typeof e!="symbol"?e+"":e,r);class _Ze{constructor(e){mm(this,"name","cosmos"),mm(this,"client"),mm(this,"httpProviders"),mm(this,"events"),mm(this,"namespace"),mm(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Xc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=mg(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||cc(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qo(new fc(n,zr("disableProviderPing")))}}var AZe=Object.defineProperty,xZe=(t,e,r)=>e in t?AZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ym=(t,e,r)=>xZe(t,typeof e!="symbol"?e+"":e,r);class CZe{constructor(e){ym(this,"name","algorand"),ym(this,"client"),ym(this,"httpProviders"),ym(this,"events"),ym(this,"namespace"),ym(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||cc(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(Xc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||cc(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new qo(new fc(n,zr("disableProviderPing")))}}var SZe=Object.defineProperty,IZe=(t,e,r)=>e in t?SZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bm=(t,e,r)=>IZe(t,typeof e!="symbol"?e+"":e,r);class TZe{constructor(e){bm(this,"name","cip34"),bm(this,"client"),bm(this,"httpProviders"),bm(this,"events"),bm(this,"namespace"),bm(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Xc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),s=mg(r);e[s]=this.createHttpProvider(s,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qo(new fc(n,zr("disableProviderPing")))}}var NZe=Object.defineProperty,PZe=(t,e,r)=>e in t?NZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wm=(t,e,r)=>PZe(t,typeof e!="symbol"?e+"":e,r);class RZe{constructor(e){wm(this,"name","elrond"),wm(this,"client"),wm(this,"httpProviders"),wm(this,"events"),wm(this,"namespace"),wm(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Xc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=mg(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||cc(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qo(new fc(n,zr("disableProviderPing")))}}var OZe=Object.defineProperty,kZe=(t,e,r)=>e in t?OZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vm=(t,e,r)=>kZe(t,typeof e!="symbol"?e+"":e,r);class BZe{constructor(e){vm(this,"name","multiversx"),vm(this,"client"),vm(this,"httpProviders"),vm(this,"events"),vm(this,"namespace"),vm(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Xc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=mg(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||cc(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qo(new fc(n,zr("disableProviderPing")))}}var UZe=Object.defineProperty,MZe=(t,e,r)=>e in t?UZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Em=(t,e,r)=>MZe(t,typeof e!="symbol"?e+"":e,r);class DZe{constructor(e){Em(this,"name","near"),Em(this,"client"),Em(this,"httpProviders"),Em(this,"events"),Em(this,"namespace"),Em(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||cc(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Xc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||cc(e,this.namespace);return typeof n>"u"?void 0:new qo(new fc(n,zr("disableProviderPing")))}}var jZe=Object.defineProperty,LZe=(t,e,r)=>e in t?jZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_m=(t,e,r)=>LZe(t,typeof e!="symbol"?e+"":e,r);class FZe{constructor(e){_m(this,"name","tezos"),_m(this,"client"),_m(this,"httpProviders"),_m(this,"events"),_m(this,"namespace"),_m(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||cc(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Xc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||cc(e,this.namespace);return typeof n>"u"?void 0:new qo(new fc(n))}}var $Ze=Object.defineProperty,qZe=(t,e,r)=>e in t?$Ze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Am=(t,e,r)=>qZe(t,typeof e!="symbol"?e+"":e,r);class HZe{constructor(e){Am(this,"name",Uae),Am(this,"client"),Am(this,"httpProviders"),Am(this,"events"),Am(this,"namespace"),Am(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Xc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return x0(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(s=>{const i=x0(s);n[i.reference]=this.createHttpProvider(s)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||cc(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new qo(new fc(n,zr("disableProviderPing")))}}var zZe=Object.defineProperty,WZe=Object.defineProperties,VZe=Object.getOwnPropertyDescriptors,SY=Object.getOwnPropertySymbols,GZe=Object.prototype.hasOwnProperty,KZe=Object.prototype.propertyIsEnumerable,E4=(t,e,r)=>e in t?zZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oI=(t,e)=>{for(var r in e||(e={}))GZe.call(e,r)&&E4(t,r,e[r]);if(SY)for(var r of SY(e))KZe.call(e,r)&&E4(t,r,e[r]);return t},WR=(t,e)=>WZe(t,VZe(e)),Oc=(t,e,r)=>E4(t,typeof e!="symbol"?e+"":e,r);class d3{constructor(e){Oc(this,"client"),Oc(this,"namespaces"),Oc(this,"optionalNamespaces"),Oc(this,"sessionProperties"),Oc(this,"scopedProperties"),Oc(this,"events",new Vy),Oc(this,"rpcProviders",{}),Oc(this,"session"),Oc(this,"providerOpts"),Oc(this,"logger"),Oc(this,"uri"),Oc(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:R_(ub({level:e?.logger||cY})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const r=new d3(e);return await r.initialize(),r}async request(e,r,n){const[s,i]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:oI({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,s){const i=new Date().getTime();this.request(e,n,s).then(o=>r(null,Ul(i,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:zn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:s}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const i=await s();if(this.session=i.session,this.session){const o=yY(this.session.namespaces);this.namespaces=iI(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const s=await n();this.session=s;const i=yY(s.namespaces);return this.namespaces=iI(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,s]=this.validateChain(e);this.getProvider(n).setDefaultChain(s,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(!Qd(r))return;for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}catch(r){this.logger.warn("Failed to cleanup pending pairings",r)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await yKe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||cY,relayUrl:this.providerOpts.relayUrl||bKe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>Zm(r)))];HR("client",this.client),HR("events",this.events),HR("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=tZe(r,this.session);if(n?.length===0)return;const s=qae(n),i=iI(this.namespaces,this.optionalNamespaces),o=WR(oI({},i[r]),{accounts:n,chains:s});switch(r){case"eip155":this.rpcProviders[r]=new mZe({namespace:o});break;case"algorand":this.rpcProviders[r]=new CZe({namespace:o});break;case"solana":this.rpcProviders[r]=new wZe({namespace:o});break;case"cosmos":this.rpcProviders[r]=new _Ze({namespace:o});break;case"polkadot":this.rpcProviders[r]=new lZe({namespace:o});break;case"cip34":this.rpcProviders[r]=new TZe({namespace:o});break;case"elrond":this.rpcProviders[r]=new RZe({namespace:o});break;case"multiversx":this.rpcProviders[r]=new BZe({namespace:o});break;case"near":this.rpcProviders[r]=new DZe({namespace:o});break;case"tezos":this.rpcProviders[r]=new FZe({namespace:o});break;default:this.rpcProviders[r]=new HZe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:s}=e;if(s!==((r=this.session)==null?void 0:r.topic))return;const{event:i}=n;if(i.name==="accountsChanged"){const o=i.data;o&&Qd(o)&&this.events.emit("accountsChanged",o.map(mY))}else if(i.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=Zm(o),u=qR(o)!==qR(a)?`${c}:${qR(a)}`:o;this.onChainChanged(u)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,s;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:i}=r,o=(s=this.client)==null?void 0:s.session.get(e);this.session=WR(oI({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",WR(oI({},zn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Xc.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Uae]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r={},optionalNamespaces:n={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=iI(r,n),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[r,n]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>Zm(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const s=Zm(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(n,s);const i=this.getProvider(n).getDefaultChain();r?(this.events.emit("chainChanged",s),this.emitAccountsChangedOnChainChange({namespace:n,previousChainId:i,newChainId:e})):this.getProvider(n).setDefaultChain(s),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:r,newChainId:n}){var s,i;try{if(r===n)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(mY);if(!Qd(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,r){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${r}`,s={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const s=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${nI}/${e}${s}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${nI}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${nI}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(nI)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}}const ZZe=d3;let Fp=null;const Cu={getSIWX(){return Ce.state.siwx},async initializeIfEnabled(t=ee.getActiveCaipAddress()){const e=Ce.state.siwx;if(!(e&&t))return;const[r,n,s]=t.split(":");if(ee.checkIfSupportedNetwork(r,`${r}:${n}`))try{if(Ce.state.remoteFeatures?.emailCapture){const o=ee.getAccountData(r)?.user;await vr.open({view:"DataCapture",data:{email:o?.email??void 0}});return}if(Fp&&await Fp,(await e.getSessions(`${r}:${n}`,s)).length)return;await vr.open({view:"SIWXSignMessage"})}catch(i){console.error("SIWXUtil:initializeIfEnabled",i),Or.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await Ge._getClient()?.disconnect().catch(console.error),Lt.reset("Connect"),Cl.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=Ce.state.siwx,e=gt.getPlainAddress(ee.getActiveCaipAddress()),r=A1(),n=Ge._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!n)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),i=s.toString();qe.getConnectorId(r.chainNamespace)===_e.CONNECTOR_ID.AUTH&&Lt.pushTransactionStack({});const a=await n.signMessage(i);await t.addSession({data:s,message:i,signature:a}),ee.setLastConnectedSIWECaipNetwork(r),vr.close(),Or.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!vr.state.open||Lt.state.view==="ApproveTransaction")&&await vr.open({view:"SIWXSignMessage"}),Cl.showError("Error signing message"),Or.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){try{const t=this.getSIWX();if(t?.getRequired?.()){const r=ee.getLastConnectedSIWECaipNetwork();if(r){const n=await t?.getSessions(r?.caipNetworkId,gt.getPlainAddress(ee.getActiveCaipAddress())||"");n&&n.length>0?await ee.switchActiveNetwork(r):await Ge.disconnect()}else await Ge.disconnect()}else vr.close();vr.close(),Or.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(t){console.error("SIWXUtil:cancelSignMessage",t)}},async getAllSessions(){const t=this.getSIWX(),e=ee.getAllRequestedCaipNetworks(),r=[];return await Promise.all(e.map(async n=>{const s=await t?.getSessions(n.caipNetworkId,gt.getPlainAddress(ee.getActiveCaipAddress())||"");s&&r.push(...s)})),r},async getSessions(t){const e=Ce.state.siwx;let r=t?.address;if(!r){const s=ee.getActiveCaipAddress();r=gt.getPlainAddress(s)}let n=t?.caipNetworkId;return n||(n=ee.getActiveCaipNetwork()?.caipNetworkId),e&&r&&n?e.getSessions(n,r):[]},async isSIWXCloseDisabled(){const t=this.getSIWX();if(t){const e=Lt.state.view==="ApproveTransaction",r=Lt.state.view==="SIWXSignMessage";if(e||r)return t.getRequired?.()&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:r,preferredAccountType:n,chainNamespace:s}){const i=Cu.getSIWX(),o=A1();if(!i||!s.includes(_e.CHAIN.EVM)||Ce.state.remoteFeatures?.emailCapture){const d=await t.connect({chainId:e,socialUri:r,preferredAccountType:n});return{address:d.address,chainId:d.chainId,accounts:d.accounts}}const a=`${s}:${e}`,c=await i.createMessage({chainId:a,accountAddress:"<<AccountAddress>>"}),u={accountAddress:c.accountAddress,chainId:c.chainId,domain:c.domain,uri:c.uri,version:c.version,nonce:c.nonce,notBefore:c.notBefore,statement:c.statement,resources:c.resources,requestId:c.requestId,issuedAt:c.issuedAt,expirationTime:c.expirationTime,serializedMessage:c.toString()},l=await t.connect({chainId:e,socialUri:r,siwxMessage:u,preferredAccountType:n});return u.accountAddress=l.address,u.serializedMessage=l.message||"",l.signature&&l.message&&await Cu.addEmbeddedWalletSession(u,l.message,l.signature),ee.setLastConnectedSIWECaipNetwork(o),{address:l.address,chainId:l.chainId,accounts:l.accounts}},async addEmbeddedWalletSession(t,e,r){if(Fp)return Fp;const n=Cu.getSIWX();return n?(Fp=n.addSession({data:t,message:e,signature:r}).finally(()=>{Fp=null}),Fp):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){const n=Cu.getSIWX(),s=A1(),i=new Set(e.map(c=>c.split(":")[0]));if(!n||i.size!==1||!i.has("eip155"))return!1;const o=await n.createMessage({chainId:A1()?.caipNetworkId||"",accountAddress:""}),a=await t.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:r,chains:[o.chainId,...e.filter(c=>c!==o.chainId)]});if(Cl.showLoading("Authenticating...",{autoClose:!1}),lt.setConnectedWalletInfo({...a.session.peer.metadata,name:a.session.peer.metadata.name,icon:a.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(i)[0]),a?.auths?.length){const c=a.auths.map(u=>{const l=t.client.formatAuthMessage({request:u.p,iss:u.p.iss});return{data:{...u.p,accountAddress:u.p.iss.split(":").slice(-1).join(""),chainId:u.p.iss.split(":").slice(2,4).join(":"),uri:u.p.aud,version:u.p.version||o.version,expirationTime:u.p.exp,issuedAt:u.p.iat,notBefore:u.p.nbf},message:l,signature:u.s.s,cacao:u}});try{await n.setSessions(c),s&&ee.setLastConnectedSIWECaipNetwork(s),Or.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Cu.getSIWXEventProperties()})}catch(u){throw console.error("SIWX:universalProviderAuth - failed to set sessions",u),Or.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Cu.getSIWXEventProperties()}),await t.disconnect().catch(console.error),u}finally{Cl.hide()}}return!0},getSIWXEventProperties(){const t=ee.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:ee.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:Hu(t)===Zs.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},nc={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",EIP155:_e.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},mE={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[_e.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[_e.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[_e.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[_e.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[_e.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[_e.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[_e.CONNECTOR_ID.INJECTED]:"Browser Wallet",[_e.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[_e.CONNECTOR_ID.COINBASE]:"Coinbase",[_e.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[_e.CONNECTOR_ID.LEDGER]:"Ledger",[_e.CONNECTOR_ID.SAFE]:"Safe"}},ba={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${nc.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return t?.toLowerCase()===e?.toLowerCase()},getActiveNamespaceConnectedToAuth(){const t=ee.state.activeChain;return _e.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>qe.getConnectorId(e)===_e.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:r}){let n=0;return new Promise(s=>{async function i(){return n+=1,await t()?s(!0):n>=r?s(!1):(setTimeout(i,e),null)}i()})}},YZe=new AbortController,oo={EmbeddedWalletAbortController:YZe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${Gm()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com.`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your systemâ€™s date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`}}},JZe={createLogger(t,e="error"){const r=ub({level:e}),{logger:n}=C9({opts:r});return n.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},n}},XZe="rpc.walletconnect.org";function IY(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const VR=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","eip155:80094","eip155:80069","eip155:560048","eip155:31","eip155:2818","eip155:57054","eip155:911867","eip155:534351","eip155:1112","eip155:534352","eip155:1111","eip155:146","eip155:130","eip155:1284","eip155:30","eip155:2810","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Um={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===XZe}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:_e.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${_e.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){const n=t.rpcUrls?.default?.http?.[0];return VR.includes(e)?IY(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=t.rpcUrls?.default?.http?.[0],a=this.getDefaultRpcUrl(t,i,r),c=t?.rpcUrls?.chainDefault?.http?.[0]||o,u=n?.[i]?.map(f=>f.url)||[],l=[...u,...a?[a]:[]],d=[...u];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:mE.NetworkImageIds[t.id],imageUrl:e?.[t.id]},rpcUrls:{...t.rpcUrls,default:{http:l},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(s=>Um.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){const n=[];return r?.forEach(s=>{n.push(gh(s.url,s.config))}),VR.includes(t.caipNetworkId)&&n.push(gh(IY(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),t?.rpcUrls?.default?.http?.forEach(s=>{n.push(gh(s))}),u6(n)},extendWagmiTransports(t,e,r){if(VR.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return u6([r,gh(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:_e.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){const e=Pe.getActiveCaipNetworkId(),r=ee.getAllRequestedCaipNetworks(),n=Array.from(ee.state.chains?.keys()||[]),s=e?.split(":")[0],i=s?n.includes(s):!1,o=r?.find(c=>c.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||r?.[0]}},yT={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0},ra=jn({providers:{...yT},providerIds:{...yT}}),vn={state:ra,subscribeKey(t,e){return bo(ra,t,e)},subscribe(t){return Ui(ra,()=>{t(ra)})},subscribeProviders(t){return Ui(ra.providers,()=>t(ra.providers))},setProvider(t,e){t&&e&&(ra.providers[t]=D0(e))},getProvider(t){if(t)return ra.providers[t]},setProviderId(t,e){e&&(ra.providerIds[t]=e)},getProviderId(t){if(t)return ra.providerIds[t]},reset(){ra.providers={...yT},ra.providerIds={...yT}},resetChain(t){ra.providers[t]=void 0,ra.providerIds[t]=void 0}},TY={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},xi={set(t,e){sc.isClient&&localStorage.setItem(`${ut.STORAGE_KEY}${t}`,e)},get(t){return sc.isClient?localStorage.getItem(`${ut.STORAGE_KEY}${t}`):null},delete(t,e){sc.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${ut.STORAGE_KEY}${t}`))}},aI=30*1e3,sc={checkIfAllowedToTriggerEmail(){const t=xi.get(ut.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<aI){const r=Math.ceil((aI-e)/1e3);throw new Error(`Please try again after ${r} seconds`)}}},getTimeToNextEmailLogin(){const t=xi.get(ut.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<aI)return Math.ceil((aI-e)/1e3)}return 0},checkIfRequestExists(t){return Zs.NOT_SAFE_RPC_METHODS.includes(t.method)||Zs.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&(t?.match(TY.transactionHash)||t?.match(TY.signedMessage))?ut.RPC_RESPONSE_TYPE_TX:ut.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Zs.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Hr;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Hr||(Hr={}));var _4;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(_4||(_4={}));const et=Hr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ph=t=>{switch(typeof t){case"undefined":return et.undefined;case"string":return et.string;case"number":return isNaN(t)?et.nan:et.number;case"boolean":return et.boolean;case"function":return et.function;case"bigint":return et.bigint;case"symbol":return et.symbol;case"object":return Array.isArray(t)?et.array:t===null?et.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?et.promise:typeof Map<"u"&&t instanceof Map?et.map:typeof Set<"u"&&t instanceof Set?et.set:typeof Date<"u"&&t instanceof Date?et.date:et.object;default:return et.unknown}},De=Hr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),QZe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ju extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Hr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ju.create=t=>new ju(t);const yE=(t,e)=>{let r;switch(t.code){case De.invalid_type:t.received===et.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case De.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Hr.jsonStringifyReplacer)}`;break;case De.unrecognized_keys:r=`Unrecognized key(s) in object: ${Hr.joinValues(t.keys,", ")}`;break;case De.invalid_union:r="Invalid input";break;case De.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Hr.joinValues(t.options)}`;break;case De.invalid_enum_value:r=`Invalid enum value. Expected ${Hr.joinValues(t.options)}, received '${t.received}'`;break;case De.invalid_arguments:r="Invalid function arguments";break;case De.invalid_return_type:r="Invalid function return type";break;case De.invalid_date:r="Invalid date";break;case De.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Hr.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case De.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case De.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case De.custom:r="Invalid input";break;case De.invalid_intersection_types:r="Intersection results could not be merged";break;case De.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case De.not_finite:r="Number must be finite";break;default:r=e.defaultError,Hr.assertNever(t)}return{message:r}};let zae=yE;function eYe(t){zae=t}function bT(){return zae}const wT=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};let a="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},tYe=[];function at(t,e){const r=wT({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,bT(),yE].filter(n=>!!n)});t.common.issues.push(r)}class yo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return Gt;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r)n.push({key:await s.key,value:await s.value});return yo.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Gt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const Gt=Object.freeze({status:"aborted"}),Wae=t=>({status:"dirty",value:t}),$o=t=>({status:"valid",value:t}),A4=t=>t.status==="aborted",x4=t=>t.status==="dirty",bE=t=>t.status==="valid",vT=t=>typeof Promise<"u"&&t instanceof Promise;var Ut;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Ut||(Ut={}));class Hl{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const NY=(t,e)=>{if(bE(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ju(t.common.issues);return this._error=r,this._error}}};function Xt(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:s}}class ir{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ph(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:ph(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new yo,ctx:{common:e.parent.common,data:e.data,parsedType:ph(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(vT(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ph(e)},i=this._parseSync({data:e,path:s.path,parent:s});return NY(s,i)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ph(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(vT(s)?s:Promise.resolve(s));return NY(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:De.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new zu({schema:this,typeName:qt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ef.create(this,this._def)}nullable(){return H0.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Lu.create(this,this._def)}promise(){return Fy.create(this,this._def)}or(e){return _E.create([this,e],this._def)}and(e){return AE.create(this,e,this._def)}transform(e){return new zu({...Xt(this._def),schema:this,typeName:qt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new TE({...Xt(this._def),innerType:this,defaultValue:r,typeName:qt.ZodDefault})}brand(){return new Gae({typeName:qt.ZodBranded,type:this,...Xt(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new xT({...Xt(this._def),innerType:this,catchValue:r,typeName:qt.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return j_.create(this,e)}readonly(){return ST.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const rYe=/^c[^\s-]{8,}$/i,nYe=/^[a-z][a-z0-9]*$/,sYe=/^[0-9A-HJKMNP-TV-Z]{26}$/,iYe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,oYe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,aYe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let GR;const cYe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,uYe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,lYe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function dYe(t,e){return!!((e==="v4"||!e)&&cYe.test(t)||(e==="v6"||!e)&&uYe.test(t))}class Bu extends ir{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==et.string){const i=this._getOrReturnCtx(e);return at(i,{code:De.invalid_type,expected:et.string,received:i.parsedType}),Gt}const n=new yo;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),at(s,{code:De.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),at(s,{code:De.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?at(s,{code:De.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&at(s,{code:De.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")oYe.test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"email",code:De.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")GR||(GR=new RegExp(aYe,"u")),GR.test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"emoji",code:De.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")iYe.test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"uuid",code:De.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")rYe.test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"cuid",code:De.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")nYe.test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"cuid2",code:De.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")sYe.test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"ulid",code:De.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),at(s,{validation:"url",code:De.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"regex",code:De.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),at(s,{code:De.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),at(s,{code:De.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),at(s,{code:De.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?lYe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{code:De.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?dYe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"ip",code:De.invalid_string,message:i.message}),n.dirty()):Hr.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:De.invalid_string,...Ut.errToObj(n)})}_addCheck(e){return new Bu({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ut.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ut.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ut.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ut.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ut.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ut.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ut.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ut.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...Ut.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Ut.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Ut.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Ut.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Ut.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Ut.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Ut.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Ut.errToObj(r)})}nonempty(e){return this.min(1,Ut.errToObj(e))}trim(){return new Bu({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Bu({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Bu({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Bu.create=t=>{var e;return new Bu({checks:[],typeName:qt.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Xt(t)})};function fYe(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Mh extends ir{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==et.number){const i=this._getOrReturnCtx(e);return at(i,{code:De.invalid_type,expected:et.number,received:i.parsedType}),Gt}let n;const s=new yo;for(const i of this._def.checks)i.kind==="int"?Hr.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),at(n,{code:De.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),at(n,{code:De.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),at(n,{code:De.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?fYe(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),at(n,{code:De.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),at(n,{code:De.not_finite,message:i.message}),s.dirty()):Hr.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ut.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ut.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ut.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ut.toString(r))}setLimit(e,r,n,s){return new Mh({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ut.toString(s)}]})}_addCheck(e){return new Mh({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ut.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ut.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ut.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ut.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ut.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ut.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Ut.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ut.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ut.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Hr.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Mh.create=t=>new Mh({checks:[],typeName:qt.ZodNumber,coerce:t?.coerce||!1,...Xt(t)});class Dh extends ir{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==et.bigint){const i=this._getOrReturnCtx(e);return at(i,{code:De.invalid_type,expected:et.bigint,received:i.parsedType}),Gt}let n;const s=new yo;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),at(n,{code:De.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),at(n,{code:De.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),at(n,{code:De.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Hr.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ut.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ut.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ut.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ut.toString(r))}setLimit(e,r,n,s){return new Dh({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ut.toString(s)}]})}_addCheck(e){return new Dh({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ut.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ut.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ut.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ut.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ut.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Dh.create=t=>{var e;return new Dh({checks:[],typeName:qt.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Xt(t)})};class wE extends ir{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==et.boolean){const n=this._getOrReturnCtx(e);return at(n,{code:De.invalid_type,expected:et.boolean,received:n.parsedType}),Gt}return $o(e.data)}}wE.create=t=>new wE({typeName:qt.ZodBoolean,coerce:t?.coerce||!1,...Xt(t)});class $0 extends ir{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==et.date){const i=this._getOrReturnCtx(e);return at(i,{code:De.invalid_type,expected:et.date,received:i.parsedType}),Gt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return at(i,{code:De.invalid_date}),Gt}const n=new yo;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),at(s,{code:De.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),at(s,{code:De.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Hr.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new $0({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Ut.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Ut.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}$0.create=t=>new $0({checks:[],coerce:t?.coerce||!1,typeName:qt.ZodDate,...Xt(t)});class ET extends ir{_parse(e){if(this._getType(e)!==et.symbol){const n=this._getOrReturnCtx(e);return at(n,{code:De.invalid_type,expected:et.symbol,received:n.parsedType}),Gt}return $o(e.data)}}ET.create=t=>new ET({typeName:qt.ZodSymbol,...Xt(t)});class vE extends ir{_parse(e){if(this._getType(e)!==et.undefined){const n=this._getOrReturnCtx(e);return at(n,{code:De.invalid_type,expected:et.undefined,received:n.parsedType}),Gt}return $o(e.data)}}vE.create=t=>new vE({typeName:qt.ZodUndefined,...Xt(t)});class EE extends ir{_parse(e){if(this._getType(e)!==et.null){const n=this._getOrReturnCtx(e);return at(n,{code:De.invalid_type,expected:et.null,received:n.parsedType}),Gt}return $o(e.data)}}EE.create=t=>new EE({typeName:qt.ZodNull,...Xt(t)});class Ly extends ir{constructor(){super(...arguments),this._any=!0}_parse(e){return $o(e.data)}}Ly.create=t=>new Ly({typeName:qt.ZodAny,...Xt(t)});class C0 extends ir{constructor(){super(...arguments),this._unknown=!0}_parse(e){return $o(e.data)}}C0.create=t=>new C0({typeName:qt.ZodUnknown,...Xt(t)});class cf extends ir{_parse(e){const r=this._getOrReturnCtx(e);return at(r,{code:De.invalid_type,expected:et.never,received:r.parsedType}),Gt}}cf.create=t=>new cf({typeName:qt.ZodNever,...Xt(t)});class _T extends ir{_parse(e){if(this._getType(e)!==et.undefined){const n=this._getOrReturnCtx(e);return at(n,{code:De.invalid_type,expected:et.void,received:n.parsedType}),Gt}return $o(e.data)}}_T.create=t=>new _T({typeName:qt.ZodVoid,...Xt(t)});class Lu extends ir{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==et.array)return at(r,{code:De.invalid_type,expected:et.array,received:r.parsedType}),Gt;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(at(r,{code:o?De.too_big:De.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(at(r,{code:De.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(at(r,{code:De.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new Hl(r,o,r.path,a)))).then(o=>yo.mergeArray(n,o));const i=[...r.data].map((o,a)=>s.type._parseSync(new Hl(r,o,r.path,a)));return yo.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new Lu({...this._def,minLength:{value:e,message:Ut.toString(r)}})}max(e,r){return new Lu({...this._def,maxLength:{value:e,message:Ut.toString(r)}})}length(e,r){return new Lu({...this._def,exactLength:{value:e,message:Ut.toString(r)}})}nonempty(e){return this.min(1,e)}}Lu.create=(t,e)=>new Lu({type:t,minLength:null,maxLength:null,exactLength:null,typeName:qt.ZodArray,...Xt(e)});function Mm(t){if(t instanceof rs){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=ef.create(Mm(n))}return new rs({...t._def,shape:()=>e})}else return t instanceof Lu?new Lu({...t._def,type:Mm(t.element)}):t instanceof ef?ef.create(Mm(t.unwrap())):t instanceof H0?H0.create(Mm(t.unwrap())):t instanceof zl?zl.create(t.items.map(e=>Mm(e))):t}class rs extends ir{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=Hr.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==et.object){const u=this._getOrReturnCtx(e);return at(u,{code:De.invalid_type,expected:et.object,received:u.parsedType}),Gt}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof cf&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=i[u],d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Hl(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof cf){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(at(s,{code:De.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Hl(s,d,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const d=await l.key;u.push({key:d,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>yo.mergeObjectSync(n,u)):yo.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return Ut.errToObj,new rs({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=Ut.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new rs({...this._def,unknownKeys:"strip"})}passthrough(){return new rs({...this._def,unknownKeys:"passthrough"})}extend(e){return new rs({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new rs({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:qt.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new rs({...this._def,catchall:e})}pick(e){const r={};return Hr.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new rs({...this._def,shape:()=>r})}omit(e){const r={};return Hr.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new rs({...this._def,shape:()=>r})}deepPartial(){return Mm(this)}partial(e){const r={};return Hr.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new rs({...this._def,shape:()=>r})}required(e){const r={};return Hr.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof ef;)i=i._def.innerType;r[n]=i}}),new rs({...this._def,shape:()=>r})}keyof(){return Vae(Hr.objectKeys(this.shape))}}rs.create=(t,e)=>new rs({shape:()=>t,unknownKeys:"strip",catchall:cf.create(),typeName:qt.ZodObject,...Xt(e)});rs.strictCreate=(t,e)=>new rs({shape:()=>t,unknownKeys:"strict",catchall:cf.create(),typeName:qt.ZodObject,...Xt(e)});rs.lazycreate=(t,e)=>new rs({shape:t,unknownKeys:"strip",catchall:cf.create(),typeName:qt.ZodObject,...Xt(e)});class _E extends ir{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new ju(a.ctx.common.issues));return at(r,{code:De.invalid_union,unionErrors:o}),Gt}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},l=c._parseSync({data:r.data,path:r.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new ju(c));return at(r,{code:De.invalid_union,unionErrors:a}),Gt}}get options(){return this._def.options}}_E.create=(t,e)=>new _E({options:t,typeName:qt.ZodUnion,...Xt(e)});const HI=t=>t instanceof CE?HI(t.schema):t instanceof zu?HI(t.innerType()):t instanceof SE?[t.value]:t instanceof jh?t.options:t instanceof IE?Object.keys(t.enum):t instanceof TE?HI(t._def.innerType):t instanceof vE?[void 0]:t instanceof EE?[null]:null;class f3 extends ir{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==et.object)return at(r,{code:De.invalid_type,expected:et.object,received:r.parsedType}),Gt;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(at(r,{code:De.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Gt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const o=HI(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new f3({typeName:qt.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...Xt(n)})}}function C4(t,e){const r=ph(t),n=ph(e);if(t===e)return{valid:!0,data:t};if(r===et.object&&n===et.object){const s=Hr.objectKeys(e),i=Hr.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=C4(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===et.array&&n===et.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=C4(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===et.date&&n===et.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class AE extends ir{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(A4(i)||A4(o))return Gt;const a=C4(i.value,o.value);return a.valid?((x4(i)||x4(o))&&r.dirty(),{status:r.value,value:a.data}):(at(n,{code:De.invalid_intersection_types}),Gt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}AE.create=(t,e,r)=>new AE({left:t,right:e,typeName:qt.ZodIntersection,...Xt(r)});class zl extends ir{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==et.array)return at(n,{code:De.invalid_type,expected:et.array,received:n.parsedType}),Gt;if(n.data.length<this._def.items.length)return at(n,{code:De.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Gt;!this._def.rest&&n.data.length>this._def.items.length&&(at(n,{code:De.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Hl(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>yo.mergeArray(r,o)):yo.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new zl({...this._def,rest:e})}}zl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new zl({items:t,typeName:qt.ZodTuple,rest:null,...Xt(e)})};class xE extends ir{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==et.object)return at(n,{code:De.invalid_type,expected:et.object,received:n.parsedType}),Gt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in n.data)s.push({key:i._parse(new Hl(n,a,n.path,a)),value:o._parse(new Hl(n,n.data[a],n.path,a))});return n.common.async?yo.mergeObjectAsync(r,s):yo.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ir?new xE({keyType:e,valueType:r,typeName:qt.ZodRecord,...Xt(n)}):new xE({keyType:Bu.create(),valueType:e,typeName:qt.ZodRecord,...Xt(r)})}}class AT extends ir{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==et.map)return at(n,{code:De.invalid_type,expected:et.map,received:n.parsedType}),Gt;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:s._parse(new Hl(n,a,n.path,[u,"key"])),value:i._parse(new Hl(n,c,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return Gt;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return Gt;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}}}}AT.create=(t,e,r)=>new AT({valueType:e,keyType:t,typeName:qt.ZodMap,...Xt(r)});class q0 extends ir{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==et.set)return at(n,{code:De.invalid_type,expected:et.set,received:n.parsedType}),Gt;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(at(n,{code:De.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(at(n,{code:De.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return Gt;l.status==="dirty"&&r.dirty(),u.add(l.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((c,u)=>i._parse(new Hl(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new q0({...this._def,minSize:{value:e,message:Ut.toString(r)}})}max(e,r){return new q0({...this._def,maxSize:{value:e,message:Ut.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}q0.create=(t,e)=>new q0({valueType:t,minSize:null,maxSize:null,typeName:qt.ZodSet,...Xt(e)});class uy extends ir{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==et.function)return at(r,{code:De.invalid_type,expected:et.function,received:r.parsedType}),Gt;function n(a,c){return wT({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,bT(),yE].filter(u=>!!u),issueData:{code:De.invalid_arguments,argumentsError:c}})}function s(a,c){return wT({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,bT(),yE].filter(u=>!!u),issueData:{code:De.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof Fy){const a=this;return $o(async function(...c){const u=new ju([]),l=await a._def.args.parseAsync(c,i).catch(p=>{throw u.addIssue(n(c,p)),u}),d=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(d,i).catch(p=>{throw u.addIssue(s(d,p)),u})})}else{const a=this;return $o(function(...c){const u=a._def.args.safeParse(c,i);if(!u.success)throw new ju([n(c,u.error)]);const l=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(l,i);if(!d.success)throw new ju([s(l,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new uy({...this._def,args:zl.create(e).rest(C0.create())})}returns(e){return new uy({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new uy({args:e||zl.create([]).rest(C0.create()),returns:r||C0.create(),typeName:qt.ZodFunction,...Xt(n)})}}class CE extends ir{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}CE.create=(t,e)=>new CE({getter:t,typeName:qt.ZodLazy,...Xt(e)});class SE extends ir{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return at(r,{received:r.data,code:De.invalid_literal,expected:this._def.value}),Gt}return{status:"valid",value:e.data}}get value(){return this._def.value}}SE.create=(t,e)=>new SE({value:t,typeName:qt.ZodLiteral,...Xt(e)});function Vae(t,e){return new jh({values:t,typeName:qt.ZodEnum,...Xt(e)})}class jh extends ir{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return at(r,{expected:Hr.joinValues(n),received:r.parsedType,code:De.invalid_type}),Gt}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return at(r,{received:r.data,code:De.invalid_enum_value,options:n}),Gt}return $o(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return jh.create(e)}exclude(e){return jh.create(this.options.filter(r=>!e.includes(r)))}}jh.create=Vae;class IE extends ir{_parse(e){const r=Hr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==et.string&&n.parsedType!==et.number){const s=Hr.objectValues(r);return at(n,{expected:Hr.joinValues(s),received:n.parsedType,code:De.invalid_type}),Gt}if(r.indexOf(e.data)===-1){const s=Hr.objectValues(r);return at(n,{received:n.data,code:De.invalid_enum_value,options:s}),Gt}return $o(e.data)}get enum(){return this._def.values}}IE.create=(t,e)=>new IE({values:t,typeName:qt.ZodNativeEnum,...Xt(e)});class Fy extends ir{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==et.promise&&r.common.async===!1)return at(r,{code:De.invalid_type,expected:et.promise,received:r.parsedType}),Gt;const n=r.parsedType===et.promise?r.data:Promise.resolve(r.data);return $o(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Fy.create=(t,e)=>new Fy({type:t,typeName:qt.ZodPromise,...Xt(e)});class zu extends ir{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===qt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{at(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Gt:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Gt:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!bE(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>bE(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):o);Hr.assertNever(s)}}zu.create=(t,e,r)=>new zu({schema:t,typeName:qt.ZodEffects,effect:e,...Xt(r)});zu.createWithPreprocess=(t,e,r)=>new zu({schema:e,effect:{type:"preprocess",transform:t},typeName:qt.ZodEffects,...Xt(r)});class ef extends ir{_parse(e){return this._getType(e)===et.undefined?$o(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ef.create=(t,e)=>new ef({innerType:t,typeName:qt.ZodOptional,...Xt(e)});class H0 extends ir{_parse(e){return this._getType(e)===et.null?$o(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}H0.create=(t,e)=>new H0({innerType:t,typeName:qt.ZodNullable,...Xt(e)});class TE extends ir{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===et.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}TE.create=(t,e)=>new TE({innerType:t,typeName:qt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Xt(e)});class xT extends ir{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return vT(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ju(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ju(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}xT.create=(t,e)=>new xT({innerType:t,typeName:qt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Xt(e)});class CT extends ir{_parse(e){if(this._getType(e)!==et.nan){const n=this._getOrReturnCtx(e);return at(n,{code:De.invalid_type,expected:et.nan,received:n.parsedType}),Gt}return{status:"valid",value:e.data}}}CT.create=t=>new CT({typeName:qt.ZodNaN,...Xt(t)});const hYe=Symbol("zod_brand");class Gae extends ir{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class j_ extends ir{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Gt:i.status==="dirty"?(r.dirty(),Wae(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Gt:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new j_({in:e,out:r,typeName:qt.ZodPipeline})}}class ST extends ir{_parse(e){const r=this._def.innerType._parse(e);return bE(r)&&(r.value=Object.freeze(r.value)),r}}ST.create=(t,e)=>new ST({innerType:t,typeName:qt.ZodReadonly,...Xt(e)});const Kae=(t,e={},r)=>t?Ly.create().superRefine((n,s)=>{var i,o;if(!t(n)){const a=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:r)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...u,fatal:c})}}):Ly.create(),pYe={object:rs.lazycreate};var qt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(qt||(qt={}));const gYe=(t,e={message:`Input not instance of ${t.name}`})=>Kae(r=>r instanceof t,e),Zae=Bu.create,Yae=Mh.create,mYe=CT.create,yYe=Dh.create,Jae=wE.create,bYe=$0.create,wYe=ET.create,vYe=vE.create,EYe=EE.create,_Ye=Ly.create,AYe=C0.create,xYe=cf.create,CYe=_T.create,SYe=Lu.create,IYe=rs.create,TYe=rs.strictCreate,NYe=_E.create,PYe=f3.create,RYe=AE.create,OYe=zl.create,kYe=xE.create,BYe=AT.create,UYe=q0.create,MYe=uy.create,DYe=CE.create,jYe=SE.create,LYe=jh.create,FYe=IE.create,$Ye=Fy.create,PY=zu.create,qYe=ef.create,HYe=H0.create,zYe=zu.createWithPreprocess,WYe=j_.create,VYe=()=>Zae().optional(),GYe=()=>Yae().optional(),KYe=()=>Jae().optional(),ZYe={string:(t=>Bu.create({...t,coerce:!0})),number:(t=>Mh.create({...t,coerce:!0})),boolean:(t=>wE.create({...t,coerce:!0})),bigint:(t=>Dh.create({...t,coerce:!0})),date:(t=>$0.create({...t,coerce:!0}))},YYe=Gt;var Y=Object.freeze({__proto__:null,defaultErrorMap:yE,setErrorMap:eYe,getErrorMap:bT,makeIssue:wT,EMPTY_PATH:tYe,addIssueToContext:at,ParseStatus:yo,INVALID:Gt,DIRTY:Wae,OK:$o,isAborted:A4,isDirty:x4,isValid:bE,isAsync:vT,get util(){return Hr},get objectUtil(){return _4},ZodParsedType:et,getParsedType:ph,ZodType:ir,ZodString:Bu,ZodNumber:Mh,ZodBigInt:Dh,ZodBoolean:wE,ZodDate:$0,ZodSymbol:ET,ZodUndefined:vE,ZodNull:EE,ZodAny:Ly,ZodUnknown:C0,ZodNever:cf,ZodVoid:_T,ZodArray:Lu,ZodObject:rs,ZodUnion:_E,ZodDiscriminatedUnion:f3,ZodIntersection:AE,ZodTuple:zl,ZodRecord:xE,ZodMap:AT,ZodSet:q0,ZodFunction:uy,ZodLazy:CE,ZodLiteral:SE,ZodEnum:jh,ZodNativeEnum:IE,ZodPromise:Fy,ZodEffects:zu,ZodTransformer:zu,ZodOptional:ef,ZodNullable:H0,ZodDefault:TE,ZodCatch:xT,ZodNaN:CT,BRAND:hYe,ZodBranded:Gae,ZodPipeline:j_,ZodReadonly:ST,custom:Kae,Schema:ir,ZodSchema:ir,late:pYe,get ZodFirstPartyTypeKind(){return qt},coerce:ZYe,any:_Ye,array:SYe,bigint:yYe,boolean:Jae,date:bYe,discriminatedUnion:PYe,effect:PY,enum:LYe,function:MYe,instanceof:gYe,intersection:RYe,lazy:DYe,literal:jYe,map:BYe,nan:mYe,nativeEnum:FYe,never:xYe,null:EYe,nullable:HYe,number:Yae,object:IYe,oboolean:KYe,onumber:GYe,optional:qYe,ostring:VYe,pipeline:WYe,preprocess:zYe,promise:$Ye,record:kYe,set:UYe,strictObject:TYe,string:Zae,symbol:wYe,transformer:PY,tuple:OYe,undefined:vYe,union:NYe,unknown:AYe,void:CYe,NEVER:YYe,ZodIssueCode:De,quotelessJson:QZe,ZodError:ju});const us=Y.object({message:Y.string()});function st(t){return Y.literal(ut[t])}const h3=Y.object({serializedMessage:Y.string().optional(),accountAddress:Y.string(),chainId:Y.string(),notBefore:Y.string().optional(),domain:Y.string(),uri:Y.string(),version:Y.string(),nonce:Y.string(),statement:Y.string().optional(),resources:Y.array(Y.string()).optional(),requestId:Y.string().optional(),issuedAt:Y.string().optional(),expirationTime:Y.string().optional()});Y.object({accessList:Y.array(Y.string()),blockHash:Y.string().nullable(),blockNumber:Y.string().nullable(),chainId:Y.string().or(Y.number()),from:Y.string(),gas:Y.string(),hash:Y.string(),input:Y.string().nullable(),maxFeePerGas:Y.string(),maxPriorityFeePerGas:Y.string(),nonce:Y.string(),r:Y.string(),s:Y.string(),to:Y.string(),transactionIndex:Y.string().nullable(),type:Y.string(),v:Y.string(),value:Y.string()});const JYe=Y.object({chainId:Y.string().or(Y.number()),rpcUrl:Y.optional(Y.string())}),XYe=Y.object({email:Y.string().email()}),QYe=Y.object({otp:Y.string()}),eJe=Y.object({uri:Y.string(),preferredAccountType:Y.optional(Y.string()),chainId:Y.optional(Y.string().or(Y.number())),siwxMessage:Y.optional(h3),rpcUrl:Y.optional(Y.string())}),tJe=Y.object({chainId:Y.optional(Y.string().or(Y.number())),preferredAccountType:Y.optional(Y.string()),socialUri:Y.optional(Y.string()),siwxMessage:Y.optional(h3),rpcUrl:Y.optional(Y.string())}),rJe=Y.object({provider:Y.enum(["google","github","apple","facebook","x","discord"])}),nJe=Y.object({email:Y.string().email()}),sJe=Y.object({otp:Y.string()}),iJe=Y.object({otp:Y.string()}),oJe=Y.object({themeMode:Y.optional(Y.enum(["light","dark"])),themeVariables:Y.optional(Y.record(Y.string(),Y.string().or(Y.number()))),w3mThemeVariables:Y.optional(Y.record(Y.string(),Y.string()))}),aJe=Y.object({metadata:Y.object({name:Y.string(),description:Y.string(),url:Y.string(),icons:Y.array(Y.string())}).optional(),sdkVersion:Y.string().optional(),sdkType:Y.string().optional(),projectId:Y.string()}),cJe=Y.object({type:Y.string()}),uJe=Y.object({action:Y.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),lJe=Y.object({url:Y.string()}),dJe=Y.object({userName:Y.string()}),fJe=Y.object({email:Y.string().optional().nullable(),address:Y.string(),chainId:Y.string().or(Y.number()),accounts:Y.array(Y.object({address:Y.string(),type:Y.enum([Zs.ACCOUNT_TYPES.EOA,Zs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:Y.string().optional().nullable(),preferredAccountType:Y.optional(Y.string()),signature:Y.string().optional(),message:Y.string().optional(),siwxMessage:Y.optional(h3)}),hJe=Y.object({action:Y.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),pJe=Y.object({email:Y.string().email().optional().nullable(),address:Y.string(),chainId:Y.string().or(Y.number()),smartAccountDeployed:Y.optional(Y.boolean()),accounts:Y.array(Y.object({address:Y.string(),type:Y.enum([Zs.ACCOUNT_TYPES.EOA,Zs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:Y.optional(Y.string()),signature:Y.string().optional(),message:Y.string().optional(),siwxMessage:Y.optional(h3)}),gJe=Y.object({uri:Y.string()}),mJe=Y.object({isConnected:Y.boolean()}),yJe=Y.object({chainId:Y.string().or(Y.number())}),bJe=Y.object({chainId:Y.string().or(Y.number())}),wJe=Y.object({newEmail:Y.string().email()}),vJe=Y.object({smartAccountEnabledNetworks:Y.array(Y.number())});Y.object({address:Y.string(),isDeployed:Y.boolean()});const EJe=Y.object({version:Y.string().optional()}),_Je=Y.object({type:Y.string(),address:Y.string()}),AJe=Y.any(),xJe=Y.object({method:Y.literal("eth_accounts")}),CJe=Y.object({method:Y.literal("eth_blockNumber")}),SJe=Y.object({method:Y.literal("eth_call"),params:Y.array(Y.any())}),IJe=Y.object({method:Y.literal("eth_chainId")}),TJe=Y.object({method:Y.literal("eth_estimateGas"),params:Y.array(Y.any())}),NJe=Y.object({method:Y.literal("eth_feeHistory"),params:Y.array(Y.any())}),PJe=Y.object({method:Y.literal("eth_gasPrice")}),RJe=Y.object({method:Y.literal("eth_getAccount"),params:Y.array(Y.any())}),OJe=Y.object({method:Y.literal("eth_getBalance"),params:Y.array(Y.any())}),kJe=Y.object({method:Y.literal("eth_getBlockByHash"),params:Y.array(Y.any())}),BJe=Y.object({method:Y.literal("eth_getBlockByNumber"),params:Y.array(Y.any())}),UJe=Y.object({method:Y.literal("eth_getBlockReceipts"),params:Y.array(Y.any())}),MJe=Y.object({method:Y.literal("eth_getBlockTransactionCountByHash"),params:Y.array(Y.any())}),DJe=Y.object({method:Y.literal("eth_getBlockTransactionCountByNumber"),params:Y.array(Y.any())}),jJe=Y.object({method:Y.literal("eth_getCode"),params:Y.array(Y.any())}),LJe=Y.object({method:Y.literal("eth_getFilterChanges"),params:Y.array(Y.any())}),FJe=Y.object({method:Y.literal("eth_getFilterLogs"),params:Y.array(Y.any())}),$Je=Y.object({method:Y.literal("eth_getLogs"),params:Y.array(Y.any())}),qJe=Y.object({method:Y.literal("eth_getProof"),params:Y.array(Y.any())}),HJe=Y.object({method:Y.literal("eth_getStorageAt"),params:Y.array(Y.any())}),zJe=Y.object({method:Y.literal("eth_getTransactionByBlockHashAndIndex"),params:Y.array(Y.any())}),WJe=Y.object({method:Y.literal("eth_getTransactionByBlockNumberAndIndex"),params:Y.array(Y.any())}),VJe=Y.object({method:Y.literal("eth_getTransactionByHash"),params:Y.array(Y.any())}),GJe=Y.object({method:Y.literal("eth_getTransactionCount"),params:Y.array(Y.any())}),KJe=Y.object({method:Y.literal("eth_getTransactionReceipt"),params:Y.array(Y.any())}),ZJe=Y.object({method:Y.literal("eth_getUncleCountByBlockHash"),params:Y.array(Y.any())}),YJe=Y.object({method:Y.literal("eth_getUncleCountByBlockNumber"),params:Y.array(Y.any())}),JJe=Y.object({method:Y.literal("eth_maxPriorityFeePerGas")}),XJe=Y.object({method:Y.literal("eth_newBlockFilter")}),QJe=Y.object({method:Y.literal("eth_newFilter"),params:Y.array(Y.any())}),eXe=Y.object({method:Y.literal("eth_newPendingTransactionFilter")}),tXe=Y.object({method:Y.literal("eth_sendRawTransaction"),params:Y.array(Y.any())}),rXe=Y.object({method:Y.literal("eth_syncing"),params:Y.array(Y.any())}),nXe=Y.object({method:Y.literal("eth_uninstallFilter"),params:Y.array(Y.any())}),RY=Y.object({method:Y.literal("personal_sign"),params:Y.array(Y.any())}),sXe=Y.object({method:Y.literal("eth_signTypedData_v4"),params:Y.array(Y.any())}),iXe=Y.object({method:Y.literal("eth_sendTransaction"),params:Y.array(Y.any())}),oXe=Y.object({method:Y.literal("solana_signMessage"),params:Y.object({message:Y.string(),pubkey:Y.string()})}),aXe=Y.object({method:Y.literal("solana_signTransaction"),params:Y.object({transaction:Y.string()})}),cXe=Y.object({method:Y.literal("solana_signAllTransactions"),params:Y.object({transactions:Y.array(Y.string())})}),uXe=Y.object({method:Y.literal("solana_signAndSendTransaction"),params:Y.object({transaction:Y.string(),options:Y.object({skipPreflight:Y.boolean().optional(),preflightCommitment:Y.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:Y.number().optional(),minContextSlot:Y.number().optional()}).optional()})}),lXe=Y.object({method:Y.literal("wallet_sendCalls"),params:Y.array(Y.object({chainId:Y.string().or(Y.number()).optional(),from:Y.string().optional(),version:Y.string().optional(),capabilities:Y.any().optional(),calls:Y.array(Y.object({to:Y.string().startsWith("0x"),data:Y.string().startsWith("0x").optional(),value:Y.string().optional()}))}))}),dXe=Y.object({method:Y.literal("wallet_getCallsStatus"),params:Y.array(Y.string())}),fXe=Y.object({method:Y.literal("wallet_getCapabilities"),params:Y.array(Y.string().or(Y.number()).optional()).optional()}),hXe=Y.object({method:Y.literal("wallet_grantPermissions"),params:Y.array(Y.any())}),pXe=Y.object({method:Y.literal("wallet_revokePermissions"),params:Y.any()}),gXe=Y.object({method:Y.literal("wallet_getAssets"),params:Y.any()}),OY=Y.object({token:Y.string()}),it=Y.object({id:Y.string().optional()}),KR={appEvent:it.extend({type:st("APP_SWITCH_NETWORK"),payload:JYe}).or(it.extend({type:st("APP_CONNECT_EMAIL"),payload:XYe})).or(it.extend({type:st("APP_CONNECT_DEVICE")})).or(it.extend({type:st("APP_CONNECT_OTP"),payload:QYe})).or(it.extend({type:st("APP_CONNECT_SOCIAL"),payload:eJe})).or(it.extend({type:st("APP_GET_FARCASTER_URI")})).or(it.extend({type:st("APP_CONNECT_FARCASTER")})).or(it.extend({type:st("APP_GET_USER"),payload:Y.optional(tJe)})).or(it.extend({type:st("APP_GET_SOCIAL_REDIRECT_URI"),payload:rJe})).or(it.extend({type:st("APP_SIGN_OUT")})).or(it.extend({type:st("APP_IS_CONNECTED"),payload:Y.optional(OY)})).or(it.extend({type:st("APP_GET_CHAIN_ID")})).or(it.extend({type:st("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(it.extend({type:st("APP_INIT_SMART_ACCOUNT")})).or(it.extend({type:st("APP_SET_PREFERRED_ACCOUNT"),payload:cJe})).or(it.extend({type:st("APP_RPC_REQUEST"),payload:RY.or(gXe).or(xJe).or(CJe).or(SJe).or(IJe).or(TJe).or(NJe).or(PJe).or(RJe).or(OJe).or(kJe).or(BJe).or(UJe).or(MJe).or(DJe).or(jJe).or(LJe).or(FJe).or($Je).or(qJe).or(HJe).or(zJe).or(WJe).or(VJe).or(GJe).or(KJe).or(ZJe).or(YJe).or(JJe).or(XJe).or(QJe).or(eXe).or(tXe).or(rXe).or(nXe).or(RY).or(sXe).or(iXe).or(oXe).or(aXe).or(cXe).or(uXe).or(dXe).or(lXe).or(fXe).or(hXe).or(pXe).and(Y.object({chainId:Y.string().or(Y.number()).optional(),chainNamespace:Y.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:Y.string().optional()}))})).or(it.extend({type:st("APP_UPDATE_EMAIL"),payload:nJe})).or(it.extend({type:st("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:sJe})).or(it.extend({type:st("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:iJe})).or(it.extend({type:st("APP_SYNC_THEME"),payload:oJe})).or(it.extend({type:st("APP_SYNC_DAPP_DATA"),payload:aJe})).or(it.extend({type:st("APP_RELOAD")})).or(it.extend({type:st("APP_RPC_ABORT")})),frameEvent:it.extend({type:st("FRAME_SWITCH_NETWORK_ERROR"),payload:us}).or(it.extend({type:st("FRAME_SWITCH_NETWORK_SUCCESS"),payload:bJe})).or(it.extend({type:st("FRAME_CONNECT_EMAIL_SUCCESS"),payload:uJe})).or(it.extend({type:st("FRAME_CONNECT_EMAIL_ERROR"),payload:us})).or(it.extend({type:st("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:lJe})).or(it.extend({type:st("FRAME_GET_FARCASTER_URI_ERROR"),payload:us})).or(it.extend({type:st("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:dJe})).or(it.extend({type:st("FRAME_CONNECT_FARCASTER_ERROR"),payload:us})).or(it.extend({type:st("FRAME_CONNECT_OTP_ERROR"),payload:us})).or(it.extend({type:st("FRAME_CONNECT_OTP_SUCCESS")})).or(it.extend({type:st("FRAME_CONNECT_DEVICE_ERROR"),payload:us})).or(it.extend({type:st("FRAME_CONNECT_DEVICE_SUCCESS")})).or(it.extend({type:st("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:fJe})).or(it.extend({type:st("FRAME_CONNECT_SOCIAL_ERROR"),payload:us})).or(it.extend({type:st("FRAME_GET_USER_ERROR"),payload:us})).or(it.extend({type:st("FRAME_GET_USER_SUCCESS"),payload:pJe})).or(it.extend({type:st("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:us})).or(it.extend({type:st("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:gJe})).or(it.extend({type:st("FRAME_SIGN_OUT_ERROR"),payload:us})).or(it.extend({type:st("FRAME_SIGN_OUT_SUCCESS")})).or(it.extend({type:st("FRAME_IS_CONNECTED_ERROR"),payload:us})).or(it.extend({type:st("FRAME_IS_CONNECTED_SUCCESS"),payload:mJe})).or(it.extend({type:st("FRAME_GET_CHAIN_ID_ERROR"),payload:us})).or(it.extend({type:st("FRAME_GET_CHAIN_ID_SUCCESS"),payload:yJe})).or(it.extend({type:st("FRAME_RPC_REQUEST_ERROR"),payload:us})).or(it.extend({type:st("FRAME_RPC_REQUEST_SUCCESS"),payload:AJe})).or(it.extend({type:st("FRAME_SESSION_UPDATE"),payload:OY})).or(it.extend({type:st("FRAME_UPDATE_EMAIL_ERROR"),payload:us})).or(it.extend({type:st("FRAME_UPDATE_EMAIL_SUCCESS"),payload:hJe})).or(it.extend({type:st("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:us})).or(it.extend({type:st("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(it.extend({type:st("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:us})).or(it.extend({type:st("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:wJe})).or(it.extend({type:st("FRAME_SYNC_THEME_ERROR"),payload:us})).or(it.extend({type:st("FRAME_SYNC_THEME_SUCCESS")})).or(it.extend({type:st("FRAME_SYNC_DAPP_DATA_ERROR"),payload:us})).or(it.extend({type:st("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(it.extend({type:st("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:vJe})).or(it.extend({type:st("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:us})).or(it.extend({type:st("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:us})).or(it.extend({type:st("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:_Je})).or(it.extend({type:st("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:us})).or(it.extend({type:st("FRAME_READY"),payload:EJe})).or(it.extend({type:st("FRAME_RELOAD_ERROR"),payload:us})).or(it.extend({type:st("FRAME_RELOAD_SUCCESS")}))};function ZR(t,e={}){return typeof e?.type=="string"&&e?.type?.includes(t)}function mXe({projectId:t,chainId:e,enableLogger:r,rpcUrl:n=_e.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){const i=new URL(HDe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",WDe),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",n),s&&i.searchParams.set("enableCloudAuthAccount","true"),i.toString()}class yXe{constructor({projectId:e,isAppClient:r=!1,chainId:n="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:i=!1,rpcUrl:o=_e.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const a=document.getElementById("w3m-iframe");this.iframe&&!a&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(a,c,u)=>{function l({data:d}){if(!ZR(ut.FRAME_EVENT_KEY,d))return;const f=KR.frameEvent.safeParse(d);if(!f.success){console.warn("W3mFrame: invalid frame event",f.error.message);return}f.data?.id===a&&(c(f.data),window.removeEventListener("message",l))}sc.isClient&&(window.addEventListener("message",l),u.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:a=>{sc.isClient&&window.addEventListener("message",({data:c})=>{if(!ZR(ut.FRAME_EVENT_KEY,c))return;const u=KR.frameEvent.safeParse(c);u.success?a(u.data):console.warn("W3mFrame: invalid frame event",u.error.message)})},onAppEvent:a=>{sc.isClient&&window.addEventListener("message",({data:c})=>{if(!ZR(ut.APP_EVENT_KEY,c))return;const u=KR.appEvent.safeParse(c);u.success||console.warn("W3mFrame: invalid app event",u.error.message),a(c)})},postAppEvent:a=>{if(sc.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(a,"*")}},postFrameEvent:a=>{if(sc.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(a,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),this.rpcUrl=o,r&&(this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),sc.isClient)){const a=document.createElement("iframe");a.id="w3m-iframe",a.src=mXe({projectId:e,chainId:n,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:i}),a.name="w3m-secure-iframe",a.style.position="fixed",a.style.zIndex="999999",a.style.display="none",a.style.border="none",a.style.animationDelay="0s, 50ms",a.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",a.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=a,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent(c=>{c.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,this.frameLoadPromiseResolver?.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(r=>({[r]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${r}&projectId=${this.projectId}`,chainId:r}}));return Object.assign({},...e)}}class bXe{constructor(e){const r=ub({level:zDe}),{logger:n,chunkLoggerController:s}=C9({opts:r});this.logger=wo(n,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class wXe{constructor({projectId:e,chainId:r,enableLogger:n=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:c}){this.openRpcRequests=[],this.isInitialized=!1,n&&(this.w3mLogger=new bXe(e)),this.abortController=i,this.getActiveCaipNetwork=o,this.getCaipNetworks=a;const u=this.getRpcUrl(r);this.w3mFrame=new yXe({projectId:e,isAppClient:!0,chainId:r,enableLogger:n,rpcUrl:u,enableCloudAuthAccount:c}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(r=>{r.type===ut.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!xi.get(ut.EMAIL_LOGIN_USED_KEY)}getEmail(){return xi.get(ut.EMAIL)}getUsername(){return xi.get(ut.SOCIAL_USERNAME)}async reload(){try{await this.appEvent({type:ut.APP_RELOAD})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error reloading iframe"),e}}async connectEmail(e){try{sc.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:ut.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){try{return this.appEvent({type:ut.APP_CONNECT_DEVICE})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting device"),e}}async connectOtp(e){try{return this.appEvent({type:ut.APP_CONNECT_OTP,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};const e=await this.appEvent({type:ut.APP_IS_CONNECTED});return e?.isConnected||this.deleteAuthLoginCache(),e}catch(e){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:e},"Error checking connection"),e}}async getChainId(){try{const e=await this.appEvent({type:ut.APP_GET_CHAIN_ID});return this.setLastUsedChainId(e.chainId),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting chain id"),e}}async getSocialRedirectUri(e){try{return await this.init(),this.appEvent({type:ut.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){try{const r=await this.appEvent({type:ut.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){try{return this.appEvent({type:ut.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){try{const r=await this.appEvent({type:ut.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){try{return this.appEvent({type:ut.APP_SYNC_THEME,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){try{return this.appEvent({type:ut.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){try{const e=await this.appEvent({type:ut.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(e.smartAccountEnabledNetworks),e}catch(e){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:e},"Error getting smart account enabled networks"),e}}async setPreferredAccount(e){try{return this.appEvent({type:ut.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){if(e?.socialUri)try{await this.init();const r=this.getRpcUrl(e.chainId),n=await this.appEvent({type:ut.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:r}});return n.userName&&this.setSocialLoginSuccess(n.userName),this.setLoginSuccess(n.email),this.setLastUsedChainId(n.chainId),this.user=n,n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting social"),r}else try{const r=e?.chainId||this.getLastUsedChainId()||1,n=await this.getUser({chainId:r,preferredAccountType:e?.preferredAccountType,siwxMessage:e?.siwxMessage,rpcUrl:this.getRpcUrl(r)});return this.setLoginSuccess(n.email),this.setLastUsedChainId(n.chainId),this.user=n,n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting"),r}}async getUser(e){try{await this.init();const r=e?.chainId||this.getLastUsedChainId()||1,n=await this.appEvent({type:ut.APP_GET_USER,payload:{...e,chainId:r,rpcUrl:this.getRpcUrl(r)}});return this.user=n,n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:r,preferredAccountType:n}){try{await this.init();const s=this.getRpcUrl(r),i=await this.appEvent({type:ut.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:r,rpcUrl:s,preferredAccountType:n}});return i.userName&&this.setSocialLoginSuccess(i.userName),i}catch(s){throw this.w3mLogger?.logger.error({error:s},"Error connecting social"),s}}async getFarcasterUri(){try{return await this.init(),await this.appEvent({type:ut.APP_GET_FARCASTER_URI})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting farcaster uri"),e}}async connectFarcaster(){try{const e=await this.appEvent({type:ut.APP_CONNECT_FARCASTER});return e.userName&&this.setSocialLoginSuccess(e.userName),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting farcaster"),e}}async switchNetwork({chainId:e}){try{const r=this.getRpcUrl(e),n=await this.appEvent({type:ut.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(n.chainId),n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error switching network"),r}}async disconnect(){try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const n=setTimeout(()=>{r()},3e3);await this.appEvent({type:ut.APP_SIGN_OUT}),clearTimeout(n),r()})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error disconnecting"),e}}async request(e){const r=e;try{if(Zs.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const n=e.chainNamespace||"eip155",s=this.getActiveCaipNetwork(n)?.id;r.chainNamespace=n,r.chainId=s,r.rpcUrl=this.getRpcUrl(s),this.rpcRequestHandler?.(e);const i=await this.appEvent({type:ut.APP_RPC_REQUEST,payload:r});return this.rpcSuccessHandler?.(i,r),i}catch(n){throw this.rpcErrorHandler?.(n,r),this.w3mLogger?.logger.error({error:n},"Error requesting"),n}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ut.FRAME_IS_CONNECTED_SUCCESS&&r.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ut.FRAME_IS_CONNECTED_ERROR&&e(),r.type===ut.FRAME_IS_CONNECTED_SUCCESS&&!r.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ut.FRAME_GET_USER_SUCCESS&&e(r.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ut.FRAME_CONNECT_SOCIAL_SUCCESS&&e(r.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ut.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(r.payload):r.type===ut.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Zs.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){try{await Promise.all(this.openRpcRequests.map(async({abortController:e,method:r})=>{Zs.SAFE_RPC_METHODS.includes(r)||e.abort(),await this.appEvent({type:ut.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(e){this.w3mLogger?.logger.error({error:e},"Error aborting RPC request")}}async appEvent(e){let r,n;function s(c){return c.replace("@w3m-app/","")}const i=[ut.APP_SYNC_DAPP_DATA,ut.APP_SYNC_THEME,ut.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(n=setTimeout(()=>{this.onTimeout?.("iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(n),[ut.APP_CONNECT_EMAIL,ut.APP_CONNECT_DEVICE,ut.APP_CONNECT_OTP,ut.APP_CONNECT_SOCIAL,ut.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(r=setTimeout(()=>{this.onTimeout?.("iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,u)=>{const l=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:e,id:l},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:l});const d=new AbortController;if(o==="RPC_REQUEST"){const p=e;this.openRpcRequests=[...this.openRpcRequests,{...p.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?u(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&u(new Error("Something went wrong"))});function f(p,g){p.id===l&&(g?.logger.info?.({framEvent:p,id:l},"Received frame response"),p.type===`@w3m-frame/${o}_SUCCESS`?(r&&clearTimeout(r),n&&clearTimeout(n),"payload"in p&&c(p.payload),c(void 0)):p.type===`@w3m-frame/${o}_ERROR`&&(r&&clearTimeout(r),n&&clearTimeout(n),"payload"in p&&u(new Error(p.payload?.message||"An error occurred")),u(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(l,p=>f(p,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){xi.set(ut.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){xi.set(ut.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&xi.set(ut.EMAIL,e),xi.set(ut.EMAIL_LOGIN_USED_KEY,"true"),xi.delete(ut.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){xi.delete(ut.EMAIL_LOGIN_USED_KEY),xi.delete(ut.EMAIL),xi.delete(ut.LAST_USED_CHAIN_KEY),xi.delete(ut.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&xi.set(ut.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=xi.get(ut.LAST_USED_CHAIN_KEY)??void 0,r=Number(e);return isNaN(r)?e:r}persistSmartAccountEnabledNetworks(e){xi.set(ut.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){let r=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?r=ya.parseCaipNetworkId(e)?.chainNamespace:Number.isInteger(Number(e))?r="eip155":r="solana");const n=this.getCaipNetworks(r);return(e?n.find(i=>String(i.id)===String(e)||i.caipNetworkId===e):n[0])?.rpcUrls.default.http?.[0]}}class ev{constructor(){}static getInstance({projectId:e,chainId:r,enableLogger:n,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a}){return ev.instance||(ev.instance=new wXe({projectId:e,chainId:r,enableLogger:n,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:!!Ce.state.remoteFeatures?.emailCapture})),ev.instance}}var kY={};const vXe={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof kY<"u"?kY.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},S4={filterOutDuplicatesByRDNS(t){const e=Ce.state.enableEIP6963?qe.state.connectors:[],r=Pe.getRecentWallets(),n=e.map(a=>a.info?.rdns).filter(Boolean),s=r.map(a=>a.rdns).filter(Boolean),i=n.concat(s);if(i.includes("io.metamask.mobile")&&gt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a?.rdns&&i.includes(String(a.rdns))||!a?.rdns&&e.some(u=>u.name===a.name)))},filterOutDuplicatesByIds(t){const e=qe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),r=Pe.getRecentWallets(),n=e.map(a=>a.explorerId),s=r.map(a=>a.id),i=n.concat(s);return t.filter(a=>!i.includes(a?.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=qe.state,{featuredWalletIds:r}=Ce.state,n=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>(a.info?.rdns&&(o[a.info.rdns]=!0),o),{});return t.map(o=>({...o,installed:!!o.rdns&&!!n[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(r?.length){const u=r.indexOf(o.id),l=r.indexOf(a.id);if(u!==-1&&l!==-1)return u-l;if(u!==-1)return-1;if(l!==-1)return 1}return 0})},getConnectOrderMethod(t,e){const r=t?.connectMethodsOrder||Ce.state.features?.connectMethodsOrder,n=e||qe.state.connectors;if(r)return r;const{injected:s,announced:i}=zI.getConnectorsByType(n,Nt.state.recommended,Nt.state.featured),o=s.filter(zI.showConnector),a=i.filter(zI.showConnector);return o.length||a.length?["wallet","email","social"]:vXe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Nt.state.excludedWallets.some(n=>n.rdns===t.rdns),r=!!t.name&&Nt.state.excludedWallets.some(n=>ba.isLowerCaseMatch(n.name,t.name));return e||r},markWalletsWithDisplayIndex(t){return t.map((e,r)=>({...e,display_index:r}))}},zI={getConnectorsByType(t,e,r){const{customWallets:n}=Ce.state,s=Pe.getRecentWallets(),i=S4.filterOutDuplicateWallets(e),o=S4.filterOutDuplicateWallets(r),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),u=t.filter(d=>d.type==="INJECTED"),l=t.filter(d=>d.type==="EXTERNAL");return{custom:n,recent:s,external:l,multiChain:a,announced:c,injected:u,recommended:i,featured:o}},showConnector(t){const e=t.info?.rdns,r=!!e&&Nt.state.excludedWallets.some(s=>!!s.rdns&&s.rdns===e),n=!!t.name&&Nt.state.excludedWallets.some(s=>ba.isLowerCaseMatch(s.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!gt.isMobile()||gt.isMobile()&&!e&&!Ge.checkInstalled())||r||n)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(r||n))},getIsConnectedWithWC(){return Array.from(ee.state.chains.values()).some(r=>qe.getConnectorId(r.namespace)===_e.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=Ce.state.features?.connectorTypeOrder??[]}){const d=[{type:"walletConnect",isEnabled:Ce.state.enableWalletConnect},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(h=>h.isEnabled),f=new Set(d.map(h=>h.type)),p=c.filter(h=>f.has(h)).map(h=>({type:h,isEnabled:!0})),g=d.filter(({type:h})=>!p.some(({type:E})=>E===h));return Array.from(new Set([...p,...g].map(({type:h})=>h)))},getAuthName({email:t,socialUsername:e,socialProvider:r}){return e?r&&r==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){try{if(t.name==="Browser Wallet"&&!gt.isMobile())return{accounts:[],chainId:void 0};if(t.id===_e.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[e,r]=await Promise.all([t.provider?.request({method:"eth_accounts"}),t.provider?.request({method:"eth_chainId"}).then(n=>Number(n))]);return{accounts:e,chainId:r}}catch(e){return console.warn(`Failed to fetch provider data for ${t.name}`,e),{accounts:[],chainId:void 0}}}};let tv,Ch,Sh;function Krt(t,e){tv=document.createElement("style"),Ch=document.createElement("style"),Sh=document.createElement("style"),tv.textContent=ly(t).core.cssText,Ch.textContent=ly(t).dark.cssText,Sh.textContent=ly(t).light.cssText,document.head.appendChild(tv),document.head.appendChild(Ch),document.head.appendChild(Sh),Xae(e)}function Xae(t){Ch&&Sh&&(t==="light"?(Ch.removeAttribute("media"),Sh.media="enabled"):(Sh.removeAttribute("media"),Ch.media="enabled"))}function EXe(t){tv&&Ch&&Sh&&(tv.textContent=ly(t).core.cssText,Ch.textContent=ly(t).dark.cssText,Sh.textContent=ly(t).light.cssText)}function ly(t){return{core:lo`
      ${t?.["--w3m-font-family"]?lo``:lo`
            @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
          `}
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${ds(t?.["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${ds(t?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${ds(t?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${ds(t?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${ds(t?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:lo`
      :root {
        --w3m-color-mix: ${ds(t?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${ds(Gd(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${ds(Gd(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:lo`
      :root {
        --w3m-color-mix: ${ds(t?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${ds(Gd(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${ds(Gd(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Zrt=lo`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Yrt=lo`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,Jrt=lo`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,WI={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,r]=await Promise.all([WI.getAddresses(t),WI.getChainId(t)]);return{chainId:r,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){const r=e.rpcUrls.chainDefault?.http||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:WI.numberToHexString(e.id),rpcUrls:[...r],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[e.blockExplorers?.default.url],iconUrls:[mE.NetworkImageIds[e.id]]}]})}},xm={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function op(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const BY=op({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),UY=op({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});op({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});op({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});op({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const _Xe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Ih={getMethodsByChainNamespace(t){return _Xe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>n.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>n.add(s)),e.events&&Object.keys(e.events).forEach(s=>n.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&n.add(i)}),n.forEach(s=>{r[s]||(r[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{r[s]&&(r[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{r[s]&&(r[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{r[s]&&(r[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!r[a]||(r[a].rpcMap||(r[a].rpcMap={}),s.has(a)||(r[a].rpcMap={},s.add(a)),r[a].rpcMap[c]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const u=`${o}:${i}`,l=n[o];switch(l.chains.push(u),u){case BY.caipNetworkId:l.chains.push(BY.deprecatedCaipNetworkId);break;case UY.caipNetworkId:l.chains.push(UY.deprecatedCaipNetworkId);break}return l?.rpcMap&&c&&(l.rpcMap[i]=c),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{const e=await G1.resolveName(t);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,r){for(const n of[...e,...r])if(n.includes("*")){const i=`^${n.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(n).origin===t)return!0}catch{if(n===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:r,onDisconnect:n,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){r&&t.on("connect",()=>{const a=Ih.getWalletConnectAccounts(t,e);r(a)}),n&&t.on("disconnect",()=>{n()}),s&&t.on("accountsChanged",a=>{try{const c=t.session?.namespaces?.[e]?.accounts||[],u=t.rpcProviders?.[e]?.getDefaultChain(),l=a.map(d=>{const f=c.find(h=>h.includes(`${e}:${u}:${d}`));if(!f)return;const{chainId:p,chainNamespace:g}=ya.parseCaipAddress(f);return{address:d,chainId:p,chainNamespace:g}}).filter(d=>d!==void 0);l.length>0&&s(l)}catch(c){console.warn("Failed to parse accounts for namespace on accountsChanged event",e,a,c)}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){const r=new Set,n=t?.session?.namespaces?.[e]?.accounts?.map(s=>ya.parseCaipAddress(s)).filter(({address:s})=>r.has(s.toLowerCase())?!1:(r.add(s.toLowerCase()),!0));return n&&n.length>0?n:[]}};class AXe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case _e.CHAIN.EVM:await this.syncEVMConnections(e);break;case _e.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case _e.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:r,universalProvider:n,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:u}=s(a.id);return!c&&u}).map(async a=>{if(a.id===_e.CONNECTOR_ID.WALLET_CONNECT){const c=Ih.getWalletConnectAccounts(n,this.namespace),u=r.find(l=>l.chainNamespace===this.namespace&&l.id.toString()===c[0]?.chainId?.toString());c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:u})}else{const{accounts:c,chainId:u}=await zI.fetchProviderData(a);if(c.length>0&&u){const l=r.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===u.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:l}),a.provider&&a.id!==_e.CONNECTOR_ID.AUTH&&a.id!==_e.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:r,universalProvider:n,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:u}=s(a.id);return!c&&u}).map(async a=>{if(a.id===_e.CONNECTOR_ID.WALLET_CONNECT){const c=Ih.getWalletConnectAccounts(n,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:r})}else{const c=await a.connect({chainId:r?.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:r}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:r,universalProvider:n,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:u}=s(a.id);return!c&&u}).map(async a=>{if(a.id===_e.CONNECTOR_ID.WALLET_CONNECT){const f=Ih.getWalletConnectAccounts(n,this.namespace);f.length>0&&i({connectorId:a.id,accounts:f.map(p=>({address:p.address})),caipNetwork:r});return}const c=await a.connect();let l=(await a.getAccountAddresses())?.map(f=>gt.createAccount(_e.CHAIN.BITCOIN,f.address,f.purpose||"payment",f.publicKey,f.path));if(l&&l.length>1&&(l=[{namespace:_e.CHAIN.BITCOIN,publicKey:l[xm.ACCOUNT_INDEXES.PAYMENT]?.publicKey??"",path:l[xm.ACCOUNT_INDEXES.PAYMENT]?.path??"",address:l[xm.ACCOUNT_INDEXES.PAYMENT]?.address??"",type:"payment"},{namespace:_e.CHAIN.BITCOIN,publicKey:l[xm.ACCOUNT_INDEXES.ORDINAL]?.publicKey??"",path:l[xm.ACCOUNT_INDEXES.ORDINAL]?.path??"",address:l[xm.ACCOUNT_INDEXES.ORDINAL]?.address??"",type:"ordinal"}]),!(a.chains.find(f=>f.id===r?.id)||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:l.map(f=>({address:f.address,type:f.type})),caipNetwork:r}))}))}getConnection({address:e,connectorId:r,connections:n,connectors:s}){if(r){const o=n.find(u=>ba.isLowerCaseMatch(u.connectorId,r));if(!o)return null;const a=s.find(u=>ba.isLowerCaseMatch(u.id,o.connectorId)),c=e?o.accounts.find(u=>ba.isLowerCaseMatch(u.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=n.find(o=>o.accounts.length>0&&s.some(a=>ba.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>ba.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}const I1={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class Qae{constructor({provider:e,namespace:r}){this.id=_e.CONNECTOR_ID.WALLET_CONNECT,this.name=mE.ConnectorNamesMap[_e.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=mE.ConnectorImageIds[_e.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=ee.getCaipNetworks.bind(ee),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=r}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const r=this.getCaipNetworks(),n=Ce.state.universalProviderConfigOverride,s=Ih.createNamespaces(r,n);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return Cu.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:xXe})}}const xXe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],CXe=[_e.CONNECTOR_ID.AUTH,_e.CONNECTOR_ID.WALLET_CONNECT];class SXe{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=r=>ee.getCaipNetworks(r),this.getConnectorId=r=>qe.getConnectorId(r),e&&this.construct(e),e?.namespace&&(this.connectionManager=new AXe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:r}){const n=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===r?.toString());e&&n&&this.addConnection({connectorId:_e.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:n})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:_e.CONNECTOR_ID.AUTH,type:"AUTH",name:_e.CONNECTOR_NAMES.AUTH,provider:e,imageId:mE.ConnectorImageIds[_e.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const r=new Set;this.availableConnections=[...e,...this.availableConnections].filter(n=>r.has(n.connectorId.toLowerCase())?!1:(r.add(n.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(r=>!ba.isLowerCaseMatch(r.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,r){lt.setStatus(e,r)}on(e,r){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(s=>s(r))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:r,providerType:n}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(n==="WALLET_CONNECT"){s.setDefaultChain(r.caipNetworkId);return}if(s&&n==="AUTH"){const i=s,o=Hu(r.chainNamespace);await i.switchNetwork({chainId:r.caipNetworkId});const a=await i.getUser({chainId:r.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r instanceof Qae);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,r){if(e.length>0){const{address:n,chainId:s}=gt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===s?.toString()),o=this.connectors.find(a=>a.id===r);n&&(this.emit("accountChanged",{address:n,chainId:s,connector:o}),this.addConnection({connectorId:r,accounts:e.map(a=>{const{address:c}=gt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,r,n=!0){if(e.length>0){const{address:s}=gt.getAccount(e[0]),i=this.connectionManager?.getConnection({connectorId:r,connections:this.connections,connectors:this.connectors});s&&ba.isLowerCaseMatch(this.getConnectorId(_e.CHAIN.EVM),r)&&this.emit("accountChanged",{address:s,chainId:i?.caipNetwork?.id,connector:i?.connector}),this.addConnection({connectorId:r,accounts:e.map(o=>{const{address:a}=gt.getAccount(o);return{address:a}}),caipNetwork:i?.caipNetwork})}else n&&this.onDisconnect(r)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),ba.isLowerCaseMatch(this.getConnectorId(_e.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,r){const n=typeof e=="string"&&e.startsWith("0x")?WI.hexStringToNumber(e).toString():e.toString(),s=this.connectionManager?.getConnection({connectorId:r,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(o=>o.chainNamespace===this.namespace).find(o=>o.id.toString()===n);s&&this.addConnection({connectorId:r,accounts:s.accounts,caipNetwork:i}),ba.isLowerCaseMatch(this.getConnectorId(_e.CHAIN.EVM),r)&&this.emit("switchNetwork",{chainId:n})}listenProviderEvents(e,r){if(CXe.includes(e))return;const n=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(r.on("disconnect",i),r.on("accountsChanged",n),r.on("chainChanged",s),this.providerHandlers[e]={provider:r,disconnect:i,accountsChanged:n,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:r,disconnect:n,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];r.removeListener("disconnect",n),r.removeListener("accountsChanged",s),r.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){const e=this.connectionManager?.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[r]=e.accounts;this.emit("accountChanged",{address:r?.address,chainId:e.caipNetwork?.id,connector:e.connector})}}}class IXe extends SXe{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new Qae({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){const n=this.provider?.session?.namespaces?.[e]?.accounts?.map(s=>{const[,,i]=s.split(":");return i}).filter((s,i,o)=>o.indexOf(s)===i)||[];return Promise.resolve({accounts:n.map(s=>gt.createAccount(e,s,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&Sr.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(lt.state.balanceLoading&&e.chainId===ee.state.activeCaipNetwork?.id)return{balance:lt.state.balance||"0.00",symbol:lt.state.balanceSymbol||""};const s=(await lt.fetchTokenBalance()).find(i=>i.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&i.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:s?.quantity.numeric||"0.00",symbol:s?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:r,message:n,address:s}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return ee.state.activeCaipNetwork?.chainNamespace===_e.CHAIN.SOLANA?i=(await r.request({method:"solana_signMessage",params:{message:Zn.encode(new TextEncoder().encode(n)),pubkey:s}},ee.state.activeCaipNetwork?.caipNetworkId)).signature:i=await r.request({method:"personal_sign",params:[n,s]},ee.state.activeCaipNetwork?.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===_e.CHAIN.EVM)try{await n.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:a6(r.id)}]})}catch(s){if(s.code===I1.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||s.code===I1.ERROR_INVALID_CHAIN_ID||s.code===I1.ERROR_CODE_DEFAULT||s?.data?.originalError?.code===I1.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await n.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:a6(r.id),rpcUrls:[r?.rpcUrls.chainDefault?.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[r.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(n=>n.type==="WALLET_CONNECT")?.provider}}const TXe=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication"],cI={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Sr.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(r=>r!=="email"):!1},processFallback:t=>t===void 0?Sr.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Sr.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Sr.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Sr.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Sr.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Sr.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Sr.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Sr.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Sr.DEFAULT_REMOTE_FEATURES.multiWallet},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Sr.DEFAULT_REMOTE_FEATURES.payWithExchange},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Sr.DEFAULT_REMOTE_FEATURES.payments},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>typeof t>"u"?Sr.DEFAULT_REMOTE_FEATURES.reownAuthentication:!!t}},NXe={localSettingsOverridden:new Set,getApiConfig(t,e){return e?.find(r=>r.id===t)},addWarning(t,e){if(t!==void 0){const r=cI[e],n=r.isLegacy?`"features.${r.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(n)}},processFeature(t,e,r,n,s){const i=cI[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(n){const a=this.getApiConfig(i.apiFeatureName,r);return a?.config===null?this.processFallbackFeature(t,o):a?.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return cI[t].processApi(e)},processFallbackFeature(t,e){return cI[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,r=t.features||{};this.localSettingsOverridden.clear();let n=null,s=!1;try{n=await Nt.fetchProjectConfig(),s=n!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Sr.DEFAULT_REMOTE_FEATURES:Sr.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of TXe){const a=this.processFeature(o,r,n,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Sr.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Hs.open({debugMessage:oo.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return i}};class PXe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(r,n)=>{if(r){const s=ee.getCaipNetworks(r)?.find(a=>a.id===n);if(s)return s;const i=ee.getNetworkData(r)?.caipNetwork;return i||ee.getRequestedCaipNetworks(r).filter(a=>a.chainNamespace===r)?.[0]}return ee.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const r=this.getCaipNetwork();if(r)return r.id},this.getCaipNetworks=r=>ee.getCaipNetworks(r),this.getActiveChainNamespace=()=>ee.state.activeChain,this.setRequestedCaipNetworks=(r,n)=>{ee.setRequestedCaipNetworks(r,n)},this.getApprovedCaipNetworkIds=()=>ee.getAllApprovedCaipNetworkIds(),this.getCaipAddress=r=>ee.state.activeChain===r||!r?ee.state.activeCaipAddress:ee.state.chains.get(r)?.accountState?.caipAddress,this.setClientId=r=>{Dt.setClientId(r)},this.getProvider=r=>vn.getProvider(r),this.getProviderType=r=>vn.getProviderId(r),this.getPreferredAccountType=r=>Hu(r),this.setCaipAddress=(r,n)=>{lt.setCaipAddress(r,n)},this.setBalance=(r,n,s)=>{lt.setBalance(r,n,s)},this.setProfileName=(r,n)=>{lt.setProfileName(r,n)},this.setProfileImage=(r,n)=>{lt.setProfileImage(r,n)},this.setUser=(r,n)=>{lt.setUser(r,n)},this.resetAccount=r=>{lt.resetAccount(r)},this.setCaipNetwork=r=>{ee.setActiveCaipNetwork(r)},this.setCaipNetworkOfNamespace=(r,n)=>{ee.setChainNetworkData(n,{caipNetwork:r})},this.setStatus=(r,n)=>{lt.setStatus(r,n),qe.isConnected()?Pe.setConnectionStatus("connected"):Pe.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=r=>ee.state.chains.get(r)?.accountState?.address,this.setConnectors=r=>{const n=[...qe.state.allConnectors,...r];qe.setConnectors(n)},this.setConnections=(r,n)=>{Pe.setConnections(r,n),Ge.setConnections(r,n)},this.fetchIdentity=r=>Dt.fetchIdentity(r),this.getReownName=r=>G1.getNamesForAddress(r),this.getConnectors=()=>qe.getConnectors(),this.getConnectorImage=r=>Jie.getConnectorImage(r),this.getConnections=r=>this.remoteFeatures.multiWallet?aT.getConnectionsData(r).connections:(Hs.open(_e.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=r=>this.remoteFeatures.multiWallet?aT.getConnectionsData(r).recentConnections:(Hs.open(_e.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async r=>{if(!this.remoteFeatures.multiWallet){Hs.open(_e.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await Ge.switchConnection(r)},this.deleteConnection=r=>{if(!this.remoteFeatures.multiWallet){Hs.open(_e.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}Pe.deleteAddressFromConnection(r),Ge.syncStorageConnections()},this.setConnectedWalletInfo=(r,n)=>{const s=vn.getProviderId(n),i=r?{...r,type:s}:void 0;lt.setConnectedWalletInfo(i,n)},this.getIsConnectedState=()=>!!ee.state.activeCaipAddress,this.addAddressLabel=(r,n,s)=>{lt.addAddressLabel(r,n,s)},this.removeAddressLabel=(r,n)=>{lt.removeAddressLabel(r,n)},this.getAddress=r=>ee.state.activeChain===r||!r?lt.state.address:ee.state.chains.get(r)?.accountState?.address,this.setApprovedCaipNetworksData=r=>ee.setApprovedCaipNetworksData(r),this.resetNetwork=r=>{ee.resetNetwork(r)},this.addConnector=r=>{qe.addConnector(r)},this.resetWcConnection=()=>{Ge.resetWcConnection()},this.setAddressExplorerUrl=(r,n)=>{lt.setAddressExplorerUrl(r,n)},this.setSmartAccountDeployed=(r,n)=>{lt.setSmartAccountDeployed(r,n)},this.setPreferredAccountType=(r,n)=>{ee.setAccountProp("preferredAccountType",r,n)},this.setEIP6963Enabled=r=>{Ce.setEIP6963Enabled(r)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,r){const n=e?.map(i=>i.namespace).filter(i=>!!i);if(n?.length)return[...new Set(n)];const s=r?.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){if(this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),Ce.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await NXe.fetchRemoteFeatures(e),Ce.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&HO.setOnrampProviders(this.remoteFeatures.onramp),(Ce.state.remoteFeatures?.email||Array.isArray(Ce.state.remoteFeatures?.socials)&&Ce.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins(),Ce.state.features?.reownAuthentication||Ce.state.remoteFeatures?.reownAuthentication){const{ReownAuthentication:r}=await Cr(async()=>{const{ReownAuthentication:s}=await import("./features-CP830lQZ.js");return{ReownAuthentication:s}},[]),n=Ce.state.siwx;n instanceof r||(n&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),Ce.setSIWX(new r))}}async checkAllowedOrigins(){try{const e=await Nt.fetchAllowedOrigins();if(!e||!gt.isClient()){Hs.open(oo.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const r=window.location.origin;Ih.isOriginAllowed(r,e,I1.DEFAULT_ALLOWED_ANCESTORS)||Hs.open(oo.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error)){Hs.open(oo.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":Hs.open(oo.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const r=e.cause instanceof Error?e.cause:e;Hs.open({displayMessage:oo.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:oo.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(r.message)},"error");break}default:Hs.open(oo.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){const{...r}=e;delete r.adapters,delete r.universalProvider,Or.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(n=>n.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&aa.setThemeMode(e.themeMode),e.themeVariables&&aa.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");ee.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const r=this.getDefaultNetwork();r&&ee.setActiveCaipNetwork(r)}initializeConnectionController(e){Ge.initialize(e.adapters??[]),Ge.setWcBasic(e.basic??!1)}initializeConnectorController(){qe.initialize(this.chainNamespaces)}initializeProjectSettings(e){Ce.setProjectId(e.projectId),Ce.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){Ce.setDebug(e.debug!==!1),Ce.setEnableWalletConnect(e.enableWalletConnect!==!1),Ce.setEnableWalletGuide(e.enableWalletGuide!==!1),Ce.setEnableWallets(e.enableWallets!==!1),Ce.setEIP6963Enabled(e.enableEIP6963!==!1),Ce.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),Ce.setEnableReconnect(e.enableReconnect!==!1),Ce.setEnableAuthLogger(e.enableAuthLogger!==!1),Ce.setCustomRpcUrls(e.customRpcUrls),Ce.setEnableEmbedded(e.enableEmbedded),Ce.setAllWallets(e.allWallets),Ce.setIncludeWalletIds(e.includeWalletIds),Ce.setExcludeWalletIds(e.excludeWalletIds),Ce.setFeaturedWalletIds(e.featuredWalletIds),Ce.setTokens(e.tokens),Ce.setTermsConditionsUrl(e.termsConditionsUrl),Ce.setPrivacyPolicyUrl(e.privacyPolicyUrl),Ce.setCustomWallets(e.customWallets),Ce.setFeatures(e.features),Ce.setAllowUnsupportedChain(e.allowUnsupportedChain),Ce.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),Ce.setPreferUniversalLinks(e.experimental_preferUniversalLinks),Ce.setDefaultAccountTypes(e.defaultAccountTypes);const r=this.getDefaultMetaData();if(!e.metadata&&r&&(e.metadata=r),Ce.setMetadata(e.metadata),Ce.setDisableAppend(e.disableAppend),Ce.setEnableEmbedded(e.enableEmbedded),Ce.setSIWX(e.siwx),!e.projectId){Hs.open(oo.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(s=>s.namespace===_e.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");Ce.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return gt.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=Um.getUnsupportedNetwork(`${r}:${e}`);ee.setActiveCaipNetwork(n)}}getDefaultNetwork(){return Um.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return Um.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return Um.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(s=>s.id===e.defaultNetwork?.id);return r?Um.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,r){try{this.setLoading(!0,e);let n={connections:[]};const s=this.getAdapter(e);return(ee.state.chains.get(e)?.accountState?.caipAddress||!Ce.state.enableReconnect)&&s?.disconnect&&(n=await s.disconnect({id:r})),this.setLoading(!1,e),n}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=ee.state.activeChain,r=this.getAdapter(e),n=this.getCaipNetwork(e)?.id,s=Ge.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!r)throw new Error("Adapter not found");const a=await r.connectWalletConnect(n);(!o||!i)&&this.close(),this.setClientId(a?.clientId||null),Pe.setConnectedNamespaces([...ee.state.chains.keys()]),await this.syncWalletConnectAccount(),await Cu.initializeIfEnabled()},connectExternal:async({id:e,address:r,info:n,type:s,provider:i,chain:o,caipNetwork:a,socialUri:c})=>{const u=ee.state.activeChain,l=o||u,d=this.getAdapter(l);if(o&&o!==u&&!a){const g=this.getCaipNetworks().find(h=>h.chainNamespace===o);g&&this.setCaipNetwork(g)}if(!l)throw new Error("connectExternal: namespace not found");if(!d)throw new Error("connectExternal: adapter not found");const f=this.getCaipNetwork(l),p=await d.connect({id:e,address:r,info:n,type:s,provider:i,socialUri:c,chainId:a?.id||f?.id,rpcUrl:a?.rpcUrls?.default?.http?.[0]||f?.rpcUrls?.default?.http?.[0]});if(p)return Pe.addConnectedNamespace(l),this.syncProvider({...p,chainNamespace:l}),this.setStatus("connected",l),this.syncConnectedWalletInfo(l),Pe.removeDisconnectedConnectorId(e,l),{address:p.address}},reconnectExternal:async({id:e,info:r,type:n,provider:s})=>{const i=ee.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o?.reconnect&&(await o?.reconnect({id:e,info:r,type:n,provider:s,chainId:this.getCaipNetwork()?.id}),Pe.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const{id:r,chainNamespace:n,initialDisconnect:s}=e||{},i=n||ee.state.activeChain,o=qe.getConnectorId(i),a=r===_e.CONNECTOR_ID.AUTH||o===_e.CONNECTOR_ID.AUTH,c=r===_e.CONNECTOR_ID.WALLET_CONNECT||o===_e.CONNECTOR_ID.WALLET_CONNECT;try{const u=Array.from(ee.state.chains.keys());let l=n?[n]:u;(c||a)&&(l=u);const d=l.map(async g=>{const h=qe.getConnectorId(g),y=await this.disconnectNamespace(g,r||h);y&&(a&&Pe.deleteConnectedSocialProvider(),y.connections.forEach(E=>{Pe.addDisconnectedConnectorId(E.connectorId,g)})),s&&this.onDisconnectNamespace({chainNamespace:g,closeModal:!1})}),f=await Promise.allSettled(d);Xr.resetSend(),Ge.resetWcConnection(),Cu.getSIWX()?.signOutOnDisconnect&&await Cu.clearSessions(),qe.setFilterByNamespace(void 0),Ge.syncStorageConnections();const p=f.filter(g=>g.status==="rejected");if(p.length>0)throw new Error(p.map(g=>g.reason.message).join(", "));Or.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:n||"all"}})}catch(u){throw new Error(`Failed to disconnect chains: ${u.message}`)}},checkInstalled:e=>e?e.some(r=>!!window.ethereum?.[String(r)]):!!window.ethereum,signMessage:async e=>{const r=ee.state.activeChain,n=this.getAdapter(ee.state.activeChain);if(!r)throw new Error("signMessage: namespace not found");if(!n)throw new Error("signMessage: adapter not found");return(await n?.signMessage({message:e,address:lt.state.address,provider:vn.getProvider(r)}))?.signature||""},sendTransaction:async e=>{const r=e.chainNamespace;if(!r)throw new Error("sendTransaction: namespace not found");if(Sr.SEND_SUPPORTED_NAMESPACES.includes(r)){const n=this.getAdapter(r);if(!n)throw new Error("sendTransaction: adapter not found");const s=vn.getProvider(r);return(await n?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}))?.hash||""}return""},estimateGas:async e=>{const r=e.chainNamespace;if(r===_e.CHAIN.EVM){const n=this.getAdapter(r);if(!n)throw new Error("estimateGas: adapter is required but got undefined");const s=vn.getProvider(r),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");return(await n?.estimateGas({...e,provider:s,caipNetwork:i}))?.gas||0n}return 0n},getEnsAvatar:async()=>{const e=ee.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:lt.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:e}),lt.state.profileImage||!1},getEnsAddress:async e=>await Ih.resolveReownName(e),writeContract:async e=>{const r=ee.state.activeChain,n=this.getAdapter(r);if(!r)throw new Error("writeContract: namespace is required but got undefined");if(!n)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=vn.getProvider(r);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(await n?.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}))?.hash},parseUnits:(e,r)=>{const n=this.getAdapter(ee.state.activeChain);if(!n)throw new Error("parseUnits: adapter is required but got undefined");return n?.parseUnits({value:e,decimals:r})??0n},formatUnits:(e,r)=>{const n=this.getAdapter(ee.state.activeChain);if(!n)throw new Error("formatUnits: adapter is required but got undefined");return n?.formatUnits({value:e,decimals:r})??"0"},getCapabilities:async e=>{const r=this.getAdapter(ee.state.activeChain);if(!r)throw new Error("getCapabilities: adapter is required but got undefined");return await r?.getCapabilities(e)},grantPermissions:async e=>{const r=this.getAdapter(ee.state.activeChain);if(!r)throw new Error("grantPermissions: adapter is required but got undefined");return await r?.grantPermissions(e)},revokePermissions:async e=>{const r=this.getAdapter(ee.state.activeChain);if(!r)throw new Error("revokePermissions: adapter is required but got undefined");return r?.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>{const r=this.getAdapter(ee.state.activeChain);if(!r)throw new Error("walletGetAssets: adapter is required but got undefined");return await r?.walletGetAssets(e)??{}},updateBalance:e=>{const r=this.getCaipNetwork(e);!r||!lt.state.address||this.updateNativeBalance(lt.state.address,r?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Ge.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(vn.getProviderId(ee.state.activeChain)===nc.CONNECTOR_TYPE_WALLET_CONNECT){const r=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(r)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=vn.getProvider(r),i=vn.getProviderId(r);if(e.chainNamespace===ee.state.activeChain)await this.getAdapter(r)?.switchNetwork({caipNetwork:e,provider:s,providerType:i});else if(this.setCaipNetwork(e),i===nc.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(r);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],s=r.accounts.map(i=>{const{chainId:o,chainNamespace:a}=ya.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...n,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{const s=e?.find(i=>i.namespace===n);return s?(s.construct({namespace:n,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),r[n]=s):r[n]=new IXe({namespace:n,networks:this.getCaipNetworks()}),r},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),await this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=Pe.getConnectionStatus();Ce.state.enableReconnect===!1?this.setStatus("disconnected",e):n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(Pe.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(u=>u.id.toString()===i.toString()||u.caipNetworkId.toString()===i.toString()),a=ee.state.activeChain===e,c=ee.state.chains.get(e)?.accountState?.address;if(o){const u=a&&s?s:c;u&&this.syncAccount({address:u,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),r.on("disconnect",()=>{const s=this.remoteFeatures.multiWallet,i=Array.from(Ge.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!s||i.length===0})}),r.on("connections",s=>{this.setConnections(s,e)}),r.on("pendingTransactions",()=>{const s=lt.state.address,i=ee.state.activeCaipNetwork;!s||!i?.id||this.updateNativeBalance(s,i.id,i.chainNamespace)}),r.on("accountChanged",({address:s,chainId:i,connector:o})=>{const a=ee.state.activeChain===e;o?.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),a&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):a&&ee.state.activeCaipNetwork?.id?this.syncAccount({address:s,chainId:ee.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),Pe.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&await this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>Ge.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async reconnectWalletConnect(){await this.syncWalletConnectAccount();const e=this.getAddress();Or.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:gt.isMobile()?"mobile":"qrcode",name:this.universalProvider?.session?.peer?.metadata?.name||"Unknown",reconnect:!0}})}async syncNamespaceConnection(e){try{e===_e.CHAIN.EVM&&gt.isSafeApp()&&qe.setConnectorId(_e.CONNECTOR_ID.SAFE,e);const r=qe.getConnectorId(e);switch(this.setStatus("connecting",e),r){case _e.CONNECTOR_ID.WALLET_CONNECT:await this.reconnectWalletConnect();break;case _e.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:r,closeModal:n}=e||{};ee.resetAccount(r),ee.resetNetwork(r),Pe.removeConnectedNamespace(r);const s=Array.from(ee.state.chains.keys());(r?[r]:s).forEach(o=>Pe.addDisconnectedConnectorId(qe.getConnectorId(o)||"",o)),qe.removeConnectorId(r),vn.resetChain(r),this.setUser(void 0,r),this.setStatus("disconnected",r),this.setConnectedWalletInfo(void 0,r),n!==!1&&vr.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const r=this.getCaipAddress(e),n=this.getCaipNetwork(e);return this.chainAdapters?.[e].syncConnections({connectToFirstConnector:!r,caipNetwork:n,getConnectorStorageInfo(s){const o=Pe.getConnections()[e]??[];return{hasDisconnected:Pe.isConnectorDisconnected(s,e),hasConnected:o.some(a=>ba.isLowerCaseMatch(a.connectorId,s))}}})}))}async syncAdapterConnection(e){const r=this.getAdapter(e),n=qe.getConnectorId(e),s=this.getCaipNetwork(e),o=qe.getConnectors(e).find(a=>a.id===n);try{if(!r||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!s?.id)throw new Error("CaipNetwork not found");const a=await r?.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]});a?(this.syncProvider({...a,chainNamespace:e}),await this.syncAccount({...a,chainNamespace:e}),this.setStatus("connected",e),Or.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:a.address,properties:{method:"browser",name:o.info?.name||o.name||"Unknown",reconnect:!0}})):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){const e=Object.keys(this.universalProvider?.session?.namespaces||{}),r=this.chainNamespaces.map(async n=>{const s=this.getAdapter(n);if(!s)return;const i=this.universalProvider?.session?.namespaces?.[n]?.accounts||[],o=ee.state.activeCaipNetwork?.id,a=i.find(c=>{const{chainId:u}=ya.parseCaipAddress(c);return u===o?.toString()})||i[0];if(a){const c=ya.validateCaipAddress(a),{chainId:u,address:l}=ya.parseCaipAddress(c);if(vn.setProviderId(n,nc.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&ee.state.activeCaipNetwork&&s.namespace!==_e.CHAIN.EVM){const d=s.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:ee.state.activeCaipNetwork});vn.setProvider(n,d)}else vn.setProvider(n,this.universalProvider);qe.setConnectorId(_e.CONNECTOR_ID.WALLET_CONNECT,n),Pe.addConnectedNamespace(n),await this.syncAccount({address:l,chainId:u,chainNamespace:n})}else e.includes(n)&&this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await ee.setApprovedCaipNetworksData(n)});await Promise.all(r)}syncProvider({type:e,provider:r,id:n,chainNamespace:s}){vn.setProviderId(s,e),vn.setProvider(s,r),qe.setConnectorId(n,s)}async syncAccount(e){const r=e.chainNamespace===ee.state.activeChain,n=ee.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Pe.getActiveNetworkProps(),c=i||a,u=ee.state.activeCaipNetwork?.name===_e.UNSUPPORTED_NETWORK_NAME,l=ee.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(u&&!l)&&c){let d=this.getCaipNetworks().find(g=>g.id.toString()===c.toString()),f=this.getCaipNetworks().find(g=>g.chainNamespace===o);if(!l&&!d&&!f){const g=this.getApprovedCaipNetworkIds()||[],h=g.find(E=>ya.parseCaipNetworkId(E)?.chainId===c.toString()),y=g.find(E=>ya.parseCaipNetworkId(E)?.chainNamespace===o);d=this.getCaipNetworks().find(E=>E.caipNetworkId===h),f=this.getCaipNetworks().find(E=>E.caipNetworkId===y||"deprecatedCaipNetworkId"in E&&E.deprecatedCaipNetworkId===y)}const p=d||f;p?.chainNamespace===ee.state.activeChain?Ce.state.enableNetworkSwitch&&!Ce.state.allowUnsupportedChain&&ee.state.activeCaipNetwork?.name===_e.UNSUPPORTED_NETWORK_NAME?ee.showUnsupportedChainUI():this.setCaipNetwork(p):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o),ba.isLowerCaseMatch(s,lt.state.address)||this.syncAccountInfo(s,p?.id,o),r?await this.syncBalance({address:s,chainId:p?.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:n?.id,chainNamespace:o}),this.syncIdentity({address:s,chainId:i,chainNamespace:o})}}async syncAccountInfo(e,r,n){const s=this.getCaipAddress(n),i=r||s?.split(":")[1];if(!i)return;const o=`${n}:${i}:${e}`;this.setCaipAddress(o,n),await this.syncIdentity({address:e,chainId:i,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const s=n[0];this.setProfileName(s.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){const r=qe.getConnectorId(e),n=vn.getProviderId(e);if(n===nc.CONNECTOR_TYPE_ANNOUNCED||n===nc.CONNECTOR_TYPE_INJECTED){if(r){const i=this.getConnectors().find(o=>{const a=o.id===r,c=o.info?.rdns===r,u=o.connectors?.some(l=>l.id===r||l.info?.rdns===r);return a||c||!!u});if(i){const{info:o,name:a,imageUrl:c}=i,u=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:u,...o},e)}}}else if(n===nc.CONNECTOR_TYPE_WALLET_CONNECT){const s=vn.getProvider(e);s?.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:s.session.peer.metadata.icons?.[0]},e)}else if(r&&(r===_e.CONNECTOR_ID.COINBASE_SDK||r===_e.CONNECTOR_ID.COINBASE)){const s=this.getConnectors().find(c=>c.id===r),i=s?.name||"Coinbase Wallet",o=s?.imageUrl||this.getConnectorImage(s),a=s?.info;this.setConnectedWalletInfo({...a,name:i,icon:o},e)}}async syncBalance(e){!Kie.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(n=>n.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,r,n){const s=this.getAdapter(n),i=ee.getCaipNetworkByNamespace(n,r);if(s){const o=await s.getBalance({address:e,chainId:r,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,n),o}}async initializeUniversalAdapter(){const e=JZe.createLogger((n,...s)=>{n&&this.handleAlertError(n),console.error(...s)}),r={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};Ce.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await d3.init(r),Ce.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{Ih.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:r=>{Ge.setUri(r)},onConnect:r=>{const{address:n}=gt.getAccount(r[0]);Ge.finalizeWcConnection(n)},onDisconnect:()=>{ee.state.noAdapters&&this.resetAccount(e),Ge.resetWcConnection()},onChainChanged:r=>{const n=ee.state.activeChain,s=n&&qe.state.activeConnectorIds[n]===_e.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(ee.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===r.toString()||a.caipNetworkId.toString()===r.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(r);return}o?.id.toString()!==i?.id.toString()&&o?.chainNamespace===i?.chainNamespace&&this.setCaipNetwork(i)}},onAccountsChanged:r=>{const n=ee.state.activeChain,s=n&&qe.state.activeConnectorIds[n]===_e.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(ee.state.noAdapters||s)){const i=r?.[0];i&&this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){return!this.universalProviderInitPromise&&gt.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Or.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const r=Object.entries(oo.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,s]=r??[],{message:i,alertErrorKey:o}=s??{};if(n&&i&&!this.reportedAlertErrors[n]){const a=oo.ALERT_ERRORS[o];a&&(Hs.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){if(await this.injectModalUi(),e?.uri&&Ge.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return vr.open({...e,data:{swap:e.arguments}})}return vr.open(e)}async close(){await this.injectModalUi(),vr.close()}setLoading(e,r){vr.setLoading(e,r)}async disconnect(e){await Ge.disconnect({namespace:e})}getSIWX(){return Ce.state.siwx}getError(){return""}getChainId(){return ee.state.activeCaipNetwork?.id}async switchNetwork(e){const r=this.getCaipNetworks().find(n=>n.id===e.id);if(!r){Hs.open(oo.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await ee.switchActiveNetwork(r)}getWalletProvider(){return ee.state.activeChain?vn.state.providers[ee.state.activeChain]:null}getWalletProviderType(){return vn.getProviderId(ee.state.activeChain)}subscribeProviders(e){return vn.subscribeProviders(e)}getThemeMode(){return aa.state.themeMode}getThemeVariables(){return aa.state.themeVariables}setThemeMode(e){aa.setThemeMode(e),Xae(aa.state.themeMode)}setTermsConditionsUrl(e){Ce.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){Ce.setPrivacyPolicyUrl(e)}setThemeVariables(e){aa.setThemeVariables(e),EXe(aa.state.themeVariables)}subscribeTheme(e){return aa.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?Ge.subscribe(e):(Hs.open(_e.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?ee.state.chains.get(e)?.accountState?.connectedWalletInfo:lt.state.connectedWalletInfo}getAccount(e){const r=e||ee.state.activeChain,n=qe.getAuthConnector(r),s=ee.getAccountData(r),i=Pe.getConnectedConnectorId(ee.state.activeChain),o=Ge.getConnections(r);if(!r)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:u,type:l,publicKey:d})=>gt.createAccount(r,u,l||"eoa",d)));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:gt.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:n&&i===_e.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:Pe.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:Hu(r),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const s=this.getAccount(r);s&&e(s)};r?ee.subscribeChainProp("accountState",n,r):ee.subscribe(n),qe.subscribe(n)}subscribeNetwork(e){return ee.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r?.id,caipNetworkId:r?.caipNetworkId})})}subscribeWalletInfo(e,r){return r?lt.subscribeKey("connectedWalletInfo",e,r):lt.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){lt.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){ee.subscribeKey("activeCaipNetwork",e)}getState(){return ku.state}getRemoteFeatures(){return Ce.state.remoteFeatures}subscribeState(e){return ku.subscribe(e)}subscribeRemoteFeatures(e){return Ce.subscribeKey("remoteFeatures",e)}showErrorMessage(e){Cl.showError(e)}showSuccessMessage(e){Cl.showSuccess(e)}getEvent(){return{...Or.state}}subscribeEvents(e){return Or.subscribe(e)}replace(e){Lt.replace(e)}redirect(e){Lt.push(e)}popTransactionStack(e){Lt.popTransactionStack(e)}isOpen(){return vr.state.open}isTransactionStackEmpty(){return Lt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){Ce.setFeatures(e)}updateRemoteFeatures(e){Ce.setRemoteFeatures(e)}updateOptions(e){const n={...Ce.state||{},...e};Ce.setOptions(n)}setConnectMethodsOrder(e){Ce.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){Ce.setWalletFeaturesOrder(e)}setCollapseWallets(e){Ce.setCollapseWallets(e)}setSocialsOrder(e){Ce.setSocialsOrder(e)}getConnectMethodsOrder(){return S4.getConnectOrderMethod(Ce.state.features,qe.getConnectors())}addNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);this.getCaipNetworks().find(s=>s.id===n.id)||ee.addNetwork(n)}removeNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===r)&&ee.removeNetwork(e,r)}}let MY=!1;class RXe extends PXe{async onAuthProviderConnected(e){e.message&&e.signature&&e.siwxMessage&&await Cu.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature);const r=ee.state.activeChain;if(!r)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const n=r===_e.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=Ce.state.defaultAccountTypes[r],i=Hu(r),o=e.preferredAccountType||i||s;this.setCaipAddress(n,r);const{signature:a,siwxMessage:c,message:u,...l}=e;this.setUser({...lt.state.user||{},...l},r),this.setSmartAccountDeployed(!!e.smartAccountDeployed,r),this.setPreferredAccountType(o,r),this.setLoading(!1,r)}setupAuthConnectorListeners(e){e.onRpcRequest(r=>{sc.checkIfRequestExists(r)?sc.checkIfRequestIsSafe(r)||this.handleUnsafeRPCRequest():(this.open(),console.error(Zs.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:r.method}),setTimeout(()=>{this.showErrorMessage(Zs.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((r,n)=>{const s=sc.checkIfRequestIsSafe(n),i=lt.state.address,o=ee.state.activeCaipNetwork;s||(i&&o?.id&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const r=ee.state.activeChain;if(!r)throw new Error("AppKit:onNotConnected - namespace is required");qe.getConnectorId(r)===_e.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,r),this.setLoading(!1,r))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:r,type:n})=>{const s=ee.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");r&&this.setPreferredAccountType(n,s)})}async syncAuthConnectorTheme(e){if(!e)return;const r=aa.getSnapshot(),n=Ce.getSnapshot();await Promise.all([e.syncDappData({metadata:n.metadata,sdkVersion:n.sdkVersion,projectId:n.projectId,sdkType:n.sdkType}),e.syncTheme({themeMode:r.themeMode,themeVariables:r.themeVariables,w3mThemeVariables:Gd(r.themeVariables,r.themeMode)})])}async syncAuthConnector(e,r){const n=_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r),s=r===ee.state.activeChain;if(!n)return;this.setLoading(!0,r);const i=e.getLoginEmailUsed();this.setLoading(i,r),i&&this.setStatus("connecting",r);const o=e.getEmail(),a=e.getUsername();this.setUser({...lt.state?.user||{},username:a,email:o},r),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected();if(await this.syncAuthConnectorTheme(e),r&&n&&s){const u=await e.getSmartAccountEnabledNetworks();if(ee.setSmartAccountEnabledNetworks(u?.smartAccountEnabledNetworks||[],r),c&&this.connectionControllerClient?.connectExternal){await this.connectionControllerClient?.connectExternal({id:_e.CONNECTOR_ID.AUTH,info:{name:_e.CONNECTOR_ID.AUTH},type:nc.CONNECTOR_TYPE_AUTH,provider:e,chainId:ee.state.activeCaipNetwork?.id,chain:r}),this.setStatus("connected",r);const l=Pe.getConnectedSocialProvider();l?Or.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",address:lt.state.address,properties:{provider:l,reconnect:!0}}):Or.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:lt.state.address,properties:{method:"email",name:this.universalProvider?.session?.peer?.metadata?.name||"Unknown",reconnect:!0}})}else qe.getConnectorId(r)===_e.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",r),Pe.removeConnectedNamespace(r))}this.setLoading(!1,r)}async checkExistingTelegramSocialConnection(e){try{if(!gt.isTelegram())return;const r=Pe.getTelegramSocialProvider();if(!r||!gt.isClient())return;const s=new URL(window.location.href).searchParams.get("result_uri");if(!s)return;lt.setSocialProvider(r,e),await this.authProvider?.init();const i=qe.getAuthConnector();r&&i&&(this.setLoading(!0,e),await Ge.connectExternal({id:i.id,type:i.type,socialUri:s},i.chain),Pe.setConnectedSocialProvider(r),Pe.removeTelegramSocialProvider(),Or.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){if(!_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const n=this.remoteFeatures?.email,s=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,i=n||s,a=ba.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&this.options?.projectId&&i&&(this.authProvider=ev.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(a)?.caipNetworkId,abortController:oo.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Hs.open(oo.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Hs.open(oo.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Hs.open(oo.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:u=>A1(u),getCaipNetworks:u=>ee.getCaipNetworks(u)}),ku.subscribeOpen(u=>{!u&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}));const c=e===ee.state.activeChain&&Ce.state.enableReconnect;Ce.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Nt.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;const r=ee.state.activeChain,n=e.chainNamespace,s=this.getAddressByChainNamespace(n);if(n===r&&s){const o=this.getAdapter(n),a=vn.getProvider(n),c=vn.getProviderId(n);await o?.switchNetwork({caipNetwork:e,provider:a,providerType:c}),this.setCaipNetwork(e)}else{const a=vn.getProviderId(r)===nc.CONNECTOR_TYPE_AUTH,c=vn.getProviderId(n),u=c===nc.CONNECTOR_TYPE_AUTH,l=_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!n)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((a&&c===void 0||u)&&l)try{ee.state.activeChain=e.chainNamespace,s?await this.getAdapter(n)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:c}):await this.connectionControllerClient?.connectExternal?.({id:_e.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:n,chainId:e.id,type:nc.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{await this.getAdapter(n)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:c})}else if(c===nc.CONNECTOR_TYPE_WALLET_CONNECT){if(!ee.state.noAdapters){const d=this.getAdapter(n),f=vn.getProvider(n),p=vn.getProviderId(n);await d?.switchNetwork({caipNetwork:e,provider:f,providerType:p})}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:n})}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),ku.set({initialized:!0})}async syncIdentity({address:e,chainId:r,chainNamespace:n}){const s=`${n}:${r}`;if(this.caipNetworks?.find(a=>a.caipNetworkId===s)?.testnet){this.setProfileName(null,n),this.setProfileImage(null,n);return}const o=qe.getConnectorId(n)===_e.CONNECTOR_ID.AUTH;try{const{name:a,avatar:c}=await this.fetchIdentity({address:e});!a&&o?await this.syncReownName(e,n):(this.setProfileName(a,n),this.setProfileImage(c,n))}catch{r!==1&&this.setProfileImage(null,n)}}syncConnectedWalletInfo(e){const r=vn.getProviderId(e);if(r===nc.CONNECTOR_TYPE_AUTH){const n=this.authProvider;if(n){const s=Pe.getConnectedSocialProvider()??"email",i=n.getEmail()??n.getUsername();this.setConnectedWalletInfo({name:r,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(gt.isClient()&&!MY)try{const e={...Sr.DEFAULT_FEATURES,...this.options.features},r=this.remoteFeatures;if(await this.loadModalComponents(e,r),gt.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!Ce.state.disableAppend&&!Ce.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}MY=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,r){if(!gt.isClient())return;const n=[];(r.email||r.socials&&r.socials.length>0)&&n.push(Cr(()=>import("./embedded-wallet-BHi68UG3.js"),__vite__mapDeps([59,4,60,61,62,9,63,8,7,64,65,66,67,68,69,70]))),r.email&&n.push(Cr(()=>import("./email-DqDcN8mL.js"),__vite__mapDeps([71,60,4,72,70,7,64,69,62,9,8,68,73,65]))),r.socials&&n.push(Cr(()=>import("./socials-CFkMwL_0.js"),__vite__mapDeps([74,4,7,60,75,8,9,62,76,77,69,78,68,64,70,79,63,26,80]))),r.swaps&&r.swaps.length>0&&n.push(Cr(()=>import("./swaps-C3zMFPoA.js"),__vite__mapDeps([81,4,60,68,64,62,9,82,83,84,80,85,63,69,65,7,8]))),e.send&&n.push(Cr(()=>import("./send-DMSeKPum.js"),__vite__mapDeps([86,4,60,68,64,69,62,9,8,76,70,7,85,63,80,84,65,87,88]))),e.receive&&n.push(Cr(()=>import("./receive-OpituZJg.js"),__vite__mapDeps([89,4,7,60,90,62,9,63,79,26]))),r.onramp&&r.onramp.length>0&&n.push(Cr(()=>import("./onramp-B8olMY9I.js"),__vite__mapDeps([91,4,7,60,92,62,9,63,64,69,75,8,76,93,70,68,78,65]))),r.payWithExchange&&n.push(Cr(()=>import("./pay-with-exchange-DpzvOtbT.js"),__vite__mapDeps([94,4,60,68,64,66,62,9,63,92,7,69,80]))),r.activity&&n.push(Cr(()=>import("./transactions-D4om8osg.js"),__vite__mapDeps([95,60,4,96,47,69,62,9,70,7,63,80]))),(e.pay||r.payments)&&n.push(Cr(()=>import("./index-DSD9Cw_y.js"),__vite__mapDeps([97,4,7,60,68,64,62,9,98,63,69,66,92,88,78]))),r.emailCapture&&n.push(Cr(()=>import("./data-capture-PbPCVGxu.js"),__vite__mapDeps([99,4,60,72,70,7,64,100]))),await Promise.all([...n,Cr(()=>import("./index-CRtFHqxg.js"),__vite__mapDeps([101,4,7,60,63,64,87,62,9,69,102,83,66,92,68,67,98,61,96,47,70,80,82,88,8,65,73,75,76,77,78,90,79,26,93])),Cr(()=>import("./w3m-modal-Dj78Q7Ng.js"),__vite__mapDeps([103,4,7,60,62,9,66,63,69,67,64,83,102,84]))])}}const OXe="1.7.20";function kXe(t){return new RXe({...t,sdkVersion:gt.generateSdkVersion(t.adapters??[],"html",OXe)})}class e0 extends Error{constructor(e="WalletConnect client is not initialized. Please call connect() first."){super(e),this.name="ClientNotInitializedError",Object.setPrototypeOf(this,e0.prototype)}}var I4;(function(t){t.Mainnet="tron:0x2b6653dc",t.Shasta="tron:0x94a9059e",t.Nile="tron:0xcd8690dc"})(I4||(I4={}));const BXe=op({id:"0x2b6653dc",caipNetworkId:"tron:0x2b6653dc",chainNamespace:"tron",name:"Tron Mainnet",nativeCurrency:{decimals:6,name:"TRX",symbol:"TRX"},rpcUrls:{default:{http:["https://api.trongrid.io/jsonrpc"],webSocket:[""]}},blockExplorers:{default:{name:"Tron BlockChain Explorer",url:"https://tronscan.org/"}},contracts:{}}),UXe=op({id:"0xcd8690dc",caipNetworkId:"tron:0xcd8690dc",chainNamespace:"tron",name:"Tron Nile Testnet",nativeCurrency:{decimals:6,name:"TRX",symbol:"TRX"},rpcUrls:{default:{http:[""],webSocket:[""]}},blockExplorers:{default:{name:"Tron BlockChain Explorer",url:"https://nile.tronscan.org/"}},contracts:{}}),MXe=op({id:"0x94a9059e",caipNetworkId:"tron:0x94a9059e",chainNamespace:"tron",name:"Tron Shasta Testnet",nativeCurrency:{decimals:6,name:"TRX",symbol:"TRX"},rpcUrls:{default:{http:[""],webSocket:[""]}},blockExplorers:{default:{name:"Tron BlockChain Explorer",url:"https://shasta.tronscan.org/"}},contracts:{}});var $y;(function(t){t.signTransaction="tron_signTransaction",t.signMessage="tron_signMessage"})($y||($y={}));const YR=(t,e)=>({requiredNamespaces:{tron:{chains:[t],methods:[$y.signTransaction,$y.signMessage],events:[]}},pairingTopic:e});class DXe{constructor(e){this.providerPromise=null,this.eventListeners=new Map,this.sessionHandlers={},this._options=e.options,this._network=e.network,this._config=e}async getProvider(){if(this.provider)return this.provider;if(!this.providerPromise){const r=this._options.projectId;if(!r)throw new Error("[WalletConnectWallet] projectId is required to initialize UniversalProvider");this.providerPromise=ZZe.init({projectId:r,logger:this._options?.logger,relayUrl:this._options?.relayUrl,metadata:this._options?.metadata}).catch(n=>{throw this.providerPromise=null,n})}const e=await this.providerPromise;return this.provider=e,this._client=e.client,e}extractAddressFromSession(e){const n=Object.values(e.namespaces).flatMap(i=>i.accounts)[0];if(!n)throw new Error("[WalletConnectWallet] No accounts found in session");const s=n.split(":")[2];if(!s)throw new Error(`[WalletConnectWallet] Invalid account format: ${n}`);return s}extractAllAddressesFromSession(e){const r=Object.values(e.namespaces).flatMap(n=>n.accounts);return!r||r.length===0?[]:r.map(n=>n.split(":")[2]).filter(n=>!!n)}emit(e,...r){this.eventListeners.get(e)?.forEach(n=>{try{n(...r)}catch(s){console.error(`[WalletConnectWallet] Error in ${e} listener:`,s)}})}on(e,r){return this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e).add(r),()=>this.off(e,r)}off(e,r){this.eventListeners.get(e)?.delete(r)}removeAllListeners(e){e?this.eventListeners.delete(e):this.eventListeners.clear()}setupSessionListeners(){if(!this._client||!this._session)return;const e=()=>{this._client&&(this.sessionHandlers.update&&this._client.off("session_update",this.sessionHandlers.update),this.sessionHandlers.delete&&this._client.off("session_delete",this.sessionHandlers.delete)),this.sessionHandlers={}};e(),this.sessionHandlers.update=({topic:r,params:n})=>{if(!this._session||this._session.topic!==r)return;let s;try{s=this._client?.session.get(r)}catch{return}if(!s)return;const i=this.extractAllAddressesFromSession(this._session);this._session={...s,namespaces:n?.namespaces||s.namespaces},this.address=this.extractAddressFromSession(this._session);const o=this.extractAllAddressesFromSession(this._session);JSON.stringify(i)!==JSON.stringify(o)&&this.emit("accountsChanged",o)},this.sessionHandlers.delete=({topic:r})=>{this._session?.topic===r&&(this._session=void 0,this.address=void 0,this.emit("disconnect"),e())},this._client.on("session_update",this.sessionHandlers.update),this._client.on("session_delete",this.sessionHandlers.delete)}async connect(){const e=await this.getProvider(),r=e.client,n=r.find(YR(this._network)).filter(s=>s.acknowledged);if(n.length){this._session=n[n.length-1],this._client=r,this.address=this.extractAddressFromSession(this._session),this.setupSessionListeners();const s=this.extractAllAddressesFromSession(this._session);return this.emit("accountsChanged",s),{address:this.address}}else{this.appKit||(this.appKit=kXe({projectId:this._options.projectId,networks:[BXe,UXe,MXe],themeMode:this._config.themeMode,themeVariables:this._config.themeVariables,allWallets:"HIDE",manualWCControl:!0,universalProvider:e})),this.appKit.open();try{const s=await e.connect({pairingTopic:void 0,optionalNamespaces:YR(this._network).requiredNamespaces});this._session=s,this._client=r,this.address=this.extractAddressFromSession(this._session),this.setupSessionListeners();const i=this.extractAllAddressesFromSession(this._session);return this.emit("accountsChanged",i),{address:this.address}}finally{this.appKit?.close()}}}async disconnect(){this._client&&(this.sessionHandlers.update&&this._client.off("session_update",this.sessionHandlers.update),this.sessionHandlers.delete&&this._client.off("session_delete",this.sessionHandlers.delete),this.sessionHandlers={});const e=zn("USER_DISCONNECTED"),r=this._session?.topic||this.provider?.session?.topic;if(!r)throw new e0;const n=this.provider?.client||this._client;if(!n)throw new e0;await n.disconnect({topic:r,reason:e}),this._session=void 0,this.address=void 0}get client(){if(this._client)return this._client;throw new e0}async checkConnectStatus(){const r=(await this.getProvider()).client,n=r.find(YR(this._network)).filter(s=>s.acknowledged);if(n.length){this._session=n[n.length-1],this._client=r,this.address=this.extractAddressFromSession(this._session),this.setupSessionListeners();const s=this.extractAllAddressesFromSession(this._session);return this.emit("accountsChanged",s),{address:this.address}}else return{address:""}}async signTransaction(e){if(this._client&&this._session){const n=this._session.sessionProperties?.tron_method_version==="v1",s=await this._client.request({chainId:this._network,topic:this._session.topic,request:{method:$y.signTransaction,params:n?{address:this.address,transaction:e}:{address:this.address,transaction:{transaction:e}}}});return s?.result?s.result:s}else throw new e0}async signMessage(e){if(this._client&&this._session){const{signature:r}=await this._client.request({chainId:this._network,topic:this._session.topic,request:{method:$y.signMessage,params:{address:this.address,message:e}}});return r}else throw new e0}}const jXe="a5498791a3ace64d6c1fb542a5a659bf",LXe=new DXe({network:I4.Mainnet,options:{projectId:jXe,metadata:{name:"zEnvelope",description:"zEnvelope App",url:window.location.origin,icons:["https://avatars.githubusercontent.com/u/179229932"]}}});async function FXe(){try{const{address:t}=await LXe.connect();return console.log("Connected TRON address:",t),t}catch(t){throw console.error("Tron wallet connection failed:",t),t}}const mb={1:{name:"Ethereum",type:"evm",contractAddress:"0x1518ea2170660381c61DD8Aac4B97d242344a627",rpcUrl:"https://ethereum-rpc.publicnode.com",explorerUrl:"https://etherscan.io",apiUrl:"https://api.etherscan.io/v2/api",currency:"ETH"},11155111:{name:"Sepolia",type:"evm",contractAddress:"0x79d0532F61E1922DF5199E0487c0D64562DAAE88",rpcUrl:"https://ethereum-sepolia-rpc.publicnode.com",explorerUrl:"https://sepolia.etherscan.io",apiUrl:"https://api.etherscan.io/v2/api",currency:"ETH"},56:{name:"BNB Chain",type:"evm",contractAddress:"0xe728f3F581Df57aFC16b8BE7c050b90797d81b5f",rpcUrl:"https://bsc-dataseed.binance.org",explorerUrl:"https://bscscan.com",apiUrl:"https://api.etherscan.io/v2/api",currency:"BNB"},137:{name:"Polygon",type:"evm",contractAddress:"0xe728f3F581Df57aFC16b8BE7c050b90797d81b5f",rpcUrl:"https://polygon-rpc.com",explorerUrl:"https://polygonscan.com",apiUrl:"https://api.etherscan.io/v2/api",currency:"POL"},8453:{name:"Base",type:"evm",contractAddress:"0x79d0532F61E1922DF5199E0487c0D64562DAAE88",rpcUrl:"https://mainnet.base.org",explorerUrl:"https://basescan.org",apiUrl:"https://api.etherscan.io/v2/api",currency:"ETH"},143:{name:"Monad",type:"evm",contractAddress:"0xe728f3F581Df57aFC16b8BE7c050b90797d81b5f",rpcUrl:"https://rpc-devnet.monadinfra.com/rpc/3fe540e310bbb6ef0b9f16cd23073b0a",explorerUrl:"https://explorer.monad.xyz",apiUrl:"https://api.etherscan.io/v2/api",currency:"MON"},solana:{name:"Solana",type:"solana",contractAddress:"82M2bQAZKCJdGmYZiGMmLiobdj9XHmyxvuQhbw99Mxo4",rpcUrl:"https://api.devnet.solana.com",explorerUrl:"https://explorer.solana.com",currency:"SOL"},ton:{name:"TON",type:"ton",contractAddress:"",rpcUrl:"https://toncenter.com/api/v2/jsonRPC",explorerUrl:"https://tonscan.org",currency:"TON"},tron:{name:"Tron",type:"tron",contractAddress:"",rpcUrl:"https://api.trongrid.io",explorerUrl:"https://tronscan.org",currency:"TRX"}};console.log("Script loaded");console.log("Modal imported:",Jp);const z9=["function balanceOf(address owner) view returns (uint256)","function decimals() view returns (uint8)","function symbol() view returns (string)","function name() view returns (string)","function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint256)"],ece=[{address:"0x7b79995e5f793A07Bc00c21412e50Ecae098E7f9",symbol:"WETH",decimals:18},{address:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",symbol:"USDC",decimals:6},{address:"0x7169D38820dfd117C3FA1f22a697dBA58d90BA06",symbol:"USDT",decimals:6},{address:"0x3e622317f8C93f7328350cF0B56d9eD4C620C5d6",symbol:"DAI",decimals:18}];let ai=null,ac=null,vh=null;Jp.subscribeState(async t=>{console.log("AppKit State Update Received:",t);let e=t.isConnected,r=t.address,n=t.selectedNetworkId;if(e===void 0||r===void 0)try{const s=Jp.getAccount();console.log("Fetched account info:",s),s&&(e=s.isConnected,r=s.address)}catch(s){console.warn("Failed to get account info:",s)}if(console.log(`State details - Connected: ${e}, Address: ${r}, ChainID: ${n}`),e&&r){let s=n,i=null;if(typeof n=="string"&&n.includes(":")){const o=n.split(":");o[0]==="eip155"&&(s=Number(o[1]))}else s=Number(n);typeof n=="string"&&n.startsWith("solana")?(s="solana",i=Jp.getProvider("solana")):typeof n=="string"&&(n.startsWith("ton")||n==="-239")?(s="ton",i=Jp.getProvider("ton")):isNaN(s)||(i=Jp.getProvider("eip155")),console.log(`Processing connection for ChainID: ${s}, Provider found: ${!!i}`),await VI(i,r,s)}else console.log("Wallet not connected or address missing, handling disconnect."),zXe()});async function VI(t,e,r){ac=r,ai=e,console.log("Connected account:",ai);const n=document.querySelector(".verify-btn");if(n){const o=ai.substring(0,6)+"..."+ai.substring(ai.length-4);n.textContent=o,console.log("Updated verify button text to:",o)}const s=mb[ac],i=document.getElementById("network-display");if(!s){console.warn(`Unsupported network: ${ac}.`),No("ä¸æ”¯æŒçš„ç½‘ç»œï¼Œè¯·åˆ‡æ¢åˆ°æ”¯æŒçš„é“¾","error"),i&&(i.textContent="æœªçŸ¥ç½‘ç»œ",i.style.display="inline-block");return}i?(console.log("Updating network display to:",s.name),i.textContent=s.name,i.style.display="inline-block"):console.error("Network display element not found!"),vh=s.contractAddress,console.log(`Connected to ${s.name} (${ac}). Contract: ${vh}`),vh||No(`è¯¥ç½‘ç»œ (${s.name}) æš‚æœªéƒ¨ç½²åˆçº¦`,"warning"),s.type==="evm"?typeof ethers<"u"&&t&&(window.ethersProvider=new ethers.providers.Web3Provider(t,"any"),window.ethersSigner=window.ethersProvider.getSigner(),t.on&&t.on("chainChanged",o=>{window.location.reload()}),await KXe(),s.apiUrl&&await WXe()):s.type==="solana"?(console.log("Connected to Solana"),window.solanaProvider=t,await HXe()):s.type==="ton"?(console.log("Connected to TON"),window.tonProvider=t,await qXe()):s.type==="tron"&&(console.log("Connected to Tron"),await $Xe()),No(`å·²è¿žæŽ¥åˆ° ${s.name}`,"success")}async function $Xe(){console.log("Starting updateTronAssets...");const t=document.getElementById("token-address");if(!ai){console.warn("Missing account for Tron asset update");return}t.innerHTML='<option value="" disabled selected>æ­£åœ¨åŠ è½½èµ„äº§...</option>';const e=mb.tron;try{const r=`${e.rpcUrl}/v1/accounts/${ai}`,s=await(await fetch(r)).json();if(!s.success){console.warn("Tron account info fetch failed or account inactive:",s),t.innerHTML='<option value="" disabled selected>ä½™é¢ä¸è¶³ (0 TRX)</option>';return}const i=s.data[0];t.innerHTML="";let o=0;if(i&&i.balance){const a=i.balance/1e6;a>0&&(qy(t,"TRX",`TRX (${a.toFixed(4)})`),o++)}if(i&&i.trc20&&i.trc20.length>0)for(const a of i.trc20){const c=Object.keys(a)[0],u=a[c];if(Number(u)>0){let l="Unknown",d=18,f=u;if(c==="TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t")l="USDT",d=6;else if(c==="TEkxiTehnzSmSe2XqrBj4w32RUN966rdz8")l="USDC",d=6;else if(window.tronWeb&&window.tronWeb.ready)try{const p=await window.tronWeb.contract().at(c);l=await p.symbol().call(),d=await p.decimals().call()}catch(p){console.warn("Failed to fetch token info for",c,p),l=c.substring(0,6)+"..."}else l=c.substring(0,6)+"...";d===6?f=(Number(u)/1e6).toFixed(4):d===18?f=(Number(u)/1e18).toFixed(4):f=(Number(u)/Math.pow(10,d)).toFixed(4),qy(t,c,`${l} (${f})`),o++}}if(o>0){const a=document.createElement("option");a.value="",a.disabled=!0,a.selected=!0,a.textContent="è¯·é€‰æ‹©ä»£å¸",t.insertBefore(a,t.firstChild)}else t.innerHTML='<option value="" disabled selected>ä½™é¢ä¸è¶³</option>'}catch(r){console.error("Failed to fetch Tron assets:",r),t.innerHTML='<option value="" disabled selected>åŠ è½½å¤±è´¥</option>'}}async function qXe(){console.log("Starting updateTonAssets...");const t=document.getElementById("token-address");if(!ai||!ac){console.warn("Missing account or chain ID for TON asset update");return}t.innerHTML='<option value="" disabled selected>æ­£åœ¨åŠ è½½èµ„äº§...</option>';const e=mb[ac];if(!e||!e.rpcUrl){console.warn("No RPC URL for TON"),t.innerHTML='<option value="" disabled selected>æ— æ³•åŠ è½½èµ„äº§</option>';return}try{console.log("Fetching TON balance from:",e.rpcUrl);const n=await(await fetch(e.rpcUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:1,jsonrpc:"2.0",method:"getAddressBalance",params:{address:ai}})})).json();if(console.log("TON RPC Response:",n),n.ok&&n.result){const s=n.result,i=Number(s)/1e9;if(console.log("TON Balance:",i),t.innerHTML="",i>0){qy(t,"TON",`TON (${i.toFixed(4)})`);const o=document.createElement("option");o.value="",o.disabled=!0,o.selected=!0,o.textContent="è¯·é€‰æ‹©ä»£å¸",t.insertBefore(o,t.firstChild)}else t.innerHTML='<option value="" disabled selected>ä½™é¢ä¸è¶³ (0 TON)</option>'}else throw console.error("Invalid RPC response structure:",n),new Error("Invalid RPC response")}catch(r){console.error("Failed to fetch TON assets:",r),t.innerHTML='<option value="" disabled selected>åŠ è½½å¤±è´¥</option>'}}async function HXe(){console.log("Starting updateSolanaAssets...");const t=document.getElementById("token-address");if(console.log("Current Account:",ai),console.log("Current Chain ID:",ac),!ai||!ac){console.warn("Missing account or chain ID for Solana asset update");return}t.innerHTML='<option value="" disabled selected>æ­£åœ¨åŠ è½½èµ„äº§...</option>';const e=mb[ac];if(console.log("Chain Config:",e),!e||!e.rpcUrl){console.warn("No RPC URL for Solana"),t.innerHTML='<option value="" disabled selected>æ— æ³•åŠ è½½èµ„äº§</option>';return}try{console.log("Fetching SOL balance from:",e.rpcUrl);const n=await(await fetch(e.rpcUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"getBalance",params:[ai]})})).json();if(console.log("Solana RPC Response:",n),n.result&&n.result.value!==void 0){const i=n.result.value/1e9;if(console.log("SOL Balance:",i),t.innerHTML="",i>0){qy(t,"SOL",`SOL (${i.toFixed(4)})`);const o=document.createElement("option");o.value="",o.disabled=!0,o.selected=!0,o.textContent="è¯·é€‰æ‹©ä»£å¸",t.insertBefore(o,t.firstChild)}else t.innerHTML='<option value="" disabled selected>ä½™é¢ä¸è¶³ (0 SOL)</option>'}else throw console.error("Invalid RPC response structure:",n),new Error("Invalid RPC response")}catch(r){console.error("Failed to fetch Solana assets:",r),t.innerHTML='<option value="" disabled selected>åŠ è½½å¤±è´¥</option>'}}function zXe(){console.log("Disconnected"),ai=null,ac=null,vh=null;const t=document.querySelector(".verify-btn");t&&(t.textContent="è¿žæŽ¥é’±åŒ…");const e=document.getElementById("network-display");e&&(e.style.display="none");const r=document.getElementById("token-address");r&&(r.innerHTML='<option value="" disabled selected>è¯·å…ˆè¿žæŽ¥é’±åŒ…</option>')}async function WXe(){if(!ai||!window.ethersProvider){console.log("Wallet not connected, skipping scan");return}const t=document.getElementById("scan-status");t&&(t.textContent="æ­£åœ¨è‡ªåŠ¨æ‰«æä»£å¸...");const e=document.getElementById("token-address");try{let r=[];for(let s=0;s<2;s++)try{const i=mb[ac];if(!i||!i.apiUrl){console.warn("No API URL configured for this chain, skipping scan");return}const a=`${i.apiUrl}?chainid=${ac}&module=account&action=tokentx&address=${ai}&page=1&offset=100&sort=desc&apikey=YFEBIVGRSFZDHR1JQK436R42GU5KM57WVC`,u=await(await fetch(a)).json();if(u.status==="0"&&u.message==="No transactions found"){r=[];break}if(u.status!=="1")throw new Error(u.result||u.message||"Etherscan API error");const l=u.result||[];r=[...new Set(l.map(d=>d.contractAddress))],console.log("Scanned via Etherscan:",r);break}catch(i){if(console.warn(`Scan attempt ${s+1} failed:`,i),s===1)throw t&&(t.textContent="æ‰«æå¤±è´¥ï¼Œè¯·é‡è¯•"),new Error("æ— æ³•èŽ·å–ä»£å¸åˆ—è¡¨");await new Promise(o=>setTimeout(o,1e3))}if(t&&(t.textContent=""),e){for(let s=0;s<e.options.length;s++)if(e.options[s].text==="æ­£åœ¨åŠ è½½èµ„äº§..."){e.remove(s);break}for(const s of r){if(ece.some(o=>o.address.toLowerCase()===s.toLowerCase()))continue;let i=!1;for(let o=0;o<e.options.length;o++)if(e.options[o].value.toLowerCase()===s.toLowerCase()){i=!0;break}if(!i)try{const o=new ethers.Contract(s,z9,window.ethersProvider),[a,c,u,l]=await Promise.all([o.name().catch(()=>"Unknown"),o.symbol().catch(()=>"???"),o.decimals().catch(()=>18),o.balanceOf(ai).catch(()=>ethers.BigNumber.from(0))]);if(l.gt(0)){const d=ethers.utils.formatUnits(l,u),f=document.createElement("option");f.value=s,f.textContent=`${c} (${d})`,e.appendChild(f),foundCount++}}catch(o){console.warn("Failed to check token:",s,o)}}if(e.options.length===0||e.options.length===1&&e.options[0].disabled){const s=document.createElement("option");s.value="",s.disabled=!0,s.selected=!0,s.textContent="æœªå‘çŽ°ä»»ä½•å¯ç”¨ä»£å¸",e.insertBefore(s,e.firstChild)}}}catch(r){console.error("Scan failed:",r),t&&(t.textContent="æ‰«æå¤±è´¥ï¼Œè¯·é‡è¯•")}}document.addEventListener("DOMContentLoaded",async function(){const t=document.getElementById("menu-toggle"),e=document.getElementById("nav-menu");t&&e&&t.addEventListener("click",()=>{e.classList.toggle("active")});const r=new Go,s=await(await fetch("https://cdn.zionfhe.ai/zenv/sha256.wasm")).arrayBuffer(),i=await WebAssembly.instantiate(s,r.importObject);r.run(i.instance);const o=document.getElementById("connect-wallet-btn")||document.querySelector(".verify-btn");o&&o.addEventListener("click",function(c){c.preventDefault(),VXe()}),document.getElementById("envelope-form").addEventListener("submit",function(c){c.preventDefault();let u=document.getElementById("token-address").value;if(u==="custom"&&(u=document.getElementById("custom-token-address").value,!ethers.utils.isAddress(u))){No("è¯·è¾“å…¥æœ‰æ•ˆçš„ä»£å¸åˆçº¦åœ°å€","error");return}const l=document.getElementById("amount").value,d=document.getElementById("recipient-count").value,f=document.getElementById("distribution-type").value,p=document.getElementById("password").value,g=document.getElementById("validity").value;if(!u||!l||!d||!p){No("è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µã€‚","error");return}const h=document.querySelector(".submit-btn"),y=h.innerHTML;h.innerHTML='<i class="fas fa-spinner fa-spin"></i> å¤„ç†ä¸­...',h.disabled=!0,(async()=>{try{if(!ai)throw No("è¯·å…ˆè¿žæŽ¥é’±åŒ…","error"),new Error("é’±åŒ…æœªè¿žæŽ¥");if(!vh)throw No("å½“å‰ç½‘ç»œæš‚ä¸æ”¯æŒæˆ–æœªé…ç½®åˆçº¦åœ°å€","error"),new Error("åˆçº¦åœ°å€æœªé…ç½®");const E=new ethers.Contract(vh,ZXe,window.ethersSigner),C=await(await fetch("https://cdn.zionfhe.ai/zenv/pkb")).arrayBuffer(),_=new Uint8Array(C),T="0x"+goSha256(p,_),P=g?g*3600:86400;if(u&&u!=="ETH"){const D=new ethers.Contract(u,z9,window.ethersSigner),L=await D.decimals(),I=ethers.utils.parseUnits(l,L);if((await D.allowance(ai,vh)).lt(I)){No("éœ€è¦æŽˆæƒäº¤æ˜“ä»¥å…è®¸åˆçº¦è½¬ç§»æ‚¨çš„ä»£å¸","info");const A=await D.approve(vh,I);h.innerHTML='<i class="fas fa-spinner fa-spin"></i> æ­£åœ¨æŽˆæƒ...',await A.wait(),No("æŽˆæƒæˆåŠŸï¼æ­£åœ¨åˆ›å»ºçº¢åŒ…...","info"),h.innerHTML='<i class="fas fa-spinner fa-spin"></i> æ­£åœ¨åˆ›å»º...'}No("æ­£åœ¨åˆ›å»ºçº¢åŒ…...","info");const F=await E.serviceFee();console.log("Service fee:",F.toString());const B=await E.createERC20Envelope(u,I,T,P,d,f,{value:F});await DY(B)}else{const D=ethers.utils.parseEther(l);No("æ­£åœ¨åˆ›å»ºçº¢åŒ…...","info");const L=await E.serviceFee();console.log("Service fee:",L.toString());const I=D.add(L),U=await E.createEnvelope(T,P,d,f,{value:I});await DY(U)}}catch(E){console.error("åˆ›å»ºçº¢åŒ…å¤±è´¥:",E),No(`åˆ›å»ºçº¢åŒ…å¤±è´¥: ${E.message}`,"error"),h.innerHTML=y,h.disabled=!1}})()})});async function DY(t){const e=document.querySelector(".submit-btn"),r=await t.wait();No("çº¢åŒ…åˆ›å»ºæˆåŠŸï¼","success");const n=r.events?.find(s=>s.event==="EnvelopeCreated");if(n){const s=n.args.envelopeId.toString();console.log("Created envelope with ID:",s);const i=document.getElementById("result-message"),o=document.getElementById("envelope-id");o.textContent=s,i.style.display="block",i.scrollIntoView({behavior:"smooth"})}else console.error("Could not find EnvelopeCreated event in transaction receipt");e.innerHTML="åˆ›å»ºçº¢åŒ…",e.disabled=!1}async function VXe(){const t=document.getElementById("wallet-select-modal");t&&(t.style.display="flex")}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("wallet-select-modal"),e=document.getElementById("close-select-modal"),r=document.getElementById("select-appkit"),n=document.getElementById("select-tron");e&&e.addEventListener("click",()=>{t.style.display="none"}),r&&r.addEventListener("click",()=>{t.style.display="none",Cr(()=>Promise.resolve().then(()=>wDe),void 0).then(s=>{s.modal?s.modal.open():No("Web3Modal åˆå§‹åŒ–å¤±è´¥","error")})}),n&&n.addEventListener("click",async()=>{t.style.display="none",await GXe()}),t&&t.addEventListener("click",s=>{s.target===t&&(t.style.display="none")})});async function GXe(){try{if(window.tronWeb&&window.tronWeb.ready){console.log("TronLink detected and ready");const e=window.tronWeb.defaultAddress.base58;if(e){await VI(null,e,"tron");return}}else if(window.tronWeb&&(console.log("TronLink detected but not ready, requesting accounts..."),(await window.tronWeb.request({method:"tron_requestAccounts"})).code===200)){setTimeout(async()=>{window.tronWeb.defaultAddress.base58&&await VI(null,window.tronWeb.defaultAddress.base58,"tron")},500);return}console.log("TronLink not available or failed, falling back to WalletConnect");const t=await FXe();t&&await VI(null,t,"tron")}catch(t){console.error("Tron connection error:",t),No("è¿žæŽ¥æ³¢åœºå¤±è´¥: "+t.message,"error")}}async function KXe(){const t=document.getElementById("token-address"),e=window.ethersProvider,r=window.ethersSigner;if(!e||!r||typeof ethers>"u"){console.log("Ethers provider not initialized or Ethers.js not loaded. Cannot fetch assets."),t.innerHTML='<option value="" disabled selected>è¯·å…ˆè¿žæŽ¥é’±åŒ…</option>';return}const n=await r.getAddress();t.innerHTML='<option value="" disabled selected>æ­£åœ¨åŠ è½½èµ„äº§...</option>';let s=0;try{const i=mb[ac],o=i?i.currency:"ETH",a=await e.getBalance(n);a.gt(0)&&(qy(t,"ETH",`${o} (${ethers.utils.formatEther(a).substring(0,8)})`),s++);for(const c of ece){const u=new ethers.Contract(c.address,z9,e);try{const l=await u.balanceOf(n);l.gt(0)&&(qy(t,c.address,`${c.symbol} (${ethers.utils.formatUnits(l,c.decimals).substring(0,8)})`),s++)}catch(l){console.error(`æ— æ³•èŽ·å– ${c.symbol} çš„ä½™é¢:`,l)}}}catch(i){console.error("æ£€æŸ¥ä»£å¸ä½™é¢æ—¶å‡ºé”™:",i)}if(s>0){const i=document.createElement("option");i.value="",i.disabled=!0,i.selected=!0,i.textContent="è¯·é€‰æ‹©ä»£å¸",t.insertBefore(i,t.firstChild)}}function qy(t,e,r){const n=document.createElement("option");n.value=e,n.textContent=r,t.appendChild(n)}const ZXe=[{inputs:[{internalType:"address",name:"_verifier",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"ECDSAInvalidSignature",type:"error"},{inputs:[{internalType:"uint256",name:"length",type:"uint256"}],name:"ECDSAInvalidSignatureLength",type:"error"},{inputs:[{internalType:"bytes32",name:"s",type:"bytes32"}],name:"ECDSAInvalidSignatureS",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"envelopeId",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EnvelopeClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"envelopeId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"address",name:"tokenAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"expiresAt",type:"uint256"},{indexed:!1,internalType:"uint256",name:"numberOfRecipients",type:"uint256"},{indexed:!1,internalType:"uint8",name:"distributionType",type:"uint8"}],name:"EnvelopeCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"envelopeId",type:"uint256"}],name:"EnvelopeFullyClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"envelopeId",type:"uint256"},{indexed:!0,internalType:"address",name:"recoverer",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EnvelopeRecovered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldValidity",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newValidity",type:"uint256"}],name:"EnvelopeValidityUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"requestHash",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"envelopeId",type:"uint256"}],name:"PasswordVerificationFailed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!1,internalType:"uint256",name:"envelopeId",type:"uint256"},{indexed:!1,internalType:"bytes",name:"passwordHash",type:"bytes"},{indexed:!1,internalType:"bytes",name:"encryptedPassword",type:"bytes"},{indexed:!1,internalType:"bytes32",name:"requestHash",type:"bytes32"}],name:"PasswordVerificationWithClaimRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldRate",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newRate",type:"uint256"}],name:"ServiceFeeRateUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newFee",type:"uint256"}],name:"ServiceFeeUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ServiceFeeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"oldVerifier",type:"address"},{indexed:!0,internalType:"address",name:"newVerifier",type:"address"}],name:"VerifierUpdated",type:"event"},{inputs:[{internalType:"uint256",name:"_envelopeId",type:"uint256"}],name:"autoReturnExpiredEnvelope",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_envelopeId",type:"uint256"},{internalType:"bytes",name:"_encryptedPassword",type:"bytes"}],name:"claimEnvelopeWithPassword",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"envelopeId",type:"uint256"},{internalType:"bytes32",name:"requestHash",type:"bytes32"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct zEnvelope.Claim",name:"_claim",type:"tuple"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"confirmClaimWithPassword",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_tokenAddress",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"bytes",name:"_passwordHash",type:"bytes"},{internalType:"uint256",name:"_validity",type:"uint256"},{internalType:"uint256",name:"_numberOfRecipients",type:"uint256"},{internalType:"uint8",name:"_distributionType",type:"uint8"}],name:"createERC20Envelope",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes",name:"_passwordHash",type:"bytes"},{internalType:"uint256",name:"_validity",type:"uint256"},{internalType:"uint256",name:"_numberOfRecipients",type:"uint256"},{internalType:"uint8",name:"_distributionType",type:"uint8"}],name:"createEnvelope",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"envelopeValidity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"envelopes",outputs:[{internalType:"address",name:"creator",type:"address"},{internalType:"bytes",name:"passwordHash",type:"bytes"},{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"uint256",name:"totalAmount",type:"uint256"},{internalType:"uint256",name:"remainingAmount",type:"uint256"},{internalType:"bool",name:"claimed",type:"bool"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"uint256",name:"expiresAt",type:"uint256"},{internalType:"uint256",name:"numberOfRecipients",type:"uint256"},{internalType:"uint256",name:"claimedRecipientsCount",type:"uint256"},{internalType:"uint8",name:"distributionType",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc20ServiceFeeRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_requestHash",type:"bytes32"},{internalType:"uint256",name:"_envelopeId",type:"uint256"}],name:"failClaim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_envelopeId",type:"uint256"}],name:"getEnvelopeInfo",outputs:[{components:[{internalType:"address",name:"creator",type:"address"},{internalType:"bytes",name:"passwordHash",type:"bytes"},{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"uint256",name:"totalAmount",type:"uint256"},{internalType:"uint256",name:"remainingAmount",type:"uint256"},{internalType:"bool",name:"claimed",type:"bool"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"uint256",name:"expiresAt",type:"uint256"},{internalType:"uint256",name:"numberOfRecipients",type:"uint256"},{internalType:"uint256",name:"claimedRecipientsCount",type:"uint256"},{internalType:"uint8",name:"distributionType",type:"uint8"}],internalType:"struct zEnvelope.Envelope",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"hasClaimed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextEnvelopeId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"pendingClaims",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_envelopeId",type:"uint256"}],name:"recoverUnclaimedEnvelope",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"serviceFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_rate",type:"uint256"}],name:"setERC20ServiceFeeRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_serviceFee",type:"uint256"}],name:"setServiceFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_newValidity",type:"uint256"}],name:"updateEnvelopeValidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newVerifier",type:"address"}],name:"updateVerifier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"verifier",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdrawServiceFee",outputs:[],stateMutability:"nonpayable",type:"function"}];function No(t,e){console.log(`[${e.toUpperCase()}] ${t}`),e==="error"?alert(`${t}`):e==="success"&&alert(t)}export{Hs as $,Si as A,kt as B,J as C,Re as D,Zt as E,Zrt as F,Yrt as G,PDe as H,mc as I,jn as J,Lt as K,Cl as L,Ge as M,zY as N,we as O,_e as P,Or as Q,It as R,vl as S,Hu as T,Zs as U,ee as V,Ss as W,Dt as X,gt as Y,uje as Z,lt as _,ke as a,xa as a$,A9 as a0,Sr as a1,Qie as a2,qe as a3,bo as a4,Ui as a5,vXe as a6,Jrt as a7,dr as a8,Q5e as a9,cr as aA,pt as aB,rfe as aC,Ii as aD,nc as aE,wXe as aF,oo as aG,Gd as aH,G1 as aI,ILe as aJ,Mrt as aK,MK as aL,loe as aM,dE as aN,ELe as aO,uoe as aP,TLe as aQ,Drt as aR,Urt as aS,lT as aT,Lrt as aU,jrt as aV,jI as aW,br as aX,tue as aY,vn as aZ,BDe as a_,vr as aa,AJ as ab,oa as ac,Jie as ad,aa as ae,ya as af,Ce as ag,Fte as ah,mO as ai,Sy as aj,dy as ak,Ae as al,Pe as am,Cr as an,xs as ao,dt as ap,Zn as aq,ki as ar,Oh as as,yu as at,rc as au,sc as av,ft as aw,mt as ax,xt as ay,Ot as az,ztt as b,zI as b$,pI as b0,sv as b1,qs as b2,tr as b3,U1 as b4,g8 as b5,la as b6,lUe as b7,HO as b8,xu as b9,IQ as bA,zy as bB,c6 as bC,k8e as bD,R8e as bE,P8e as bF,B8e as bG,gh as bH,Fwe as bI,Z0 as bJ,Cwe as bK,Vet as bL,Swe as bM,kJ as bN,hpe as bO,ppe as bP,MU as bQ,k4 as bR,hI as bS,qQe as bT,$Qe as bU,AI as bV,d6 as bW,po as bX,v1 as bY,Im as bZ,ghe as b_,Cu as ba,Nt as bb,Krt as bc,l6 as bd,yl as be,Xr as bf,Po as bg,ort as bh,SJ as bi,Fn as bj,pU as bk,HQe as bl,dJ as bm,a6 as bn,mfe as bo,gfe as bp,kQe as bq,mJ as br,nfe as bs,lfe as bt,ife as bu,yJ as bv,gJ as bw,y0 as bx,cfe as by,OE as bz,Htt as c,t0 as c$,aT as c0,ba as c1,S4 as c2,Um as c3,pje as c4,Lh as c5,jQe as c6,RT as c7,WQe as c8,VQe as c9,JQe as cA,eet as cB,tet as cC,FQe as cD,FY as cE,m1 as cF,B4 as cG,T1 as cH,EJ as cI,u6 as cJ,Ffe as cK,z_ as cL,yfe as cM,pJ as cN,ofe as cO,afe as cP,mU as cQ,jv as cR,Dv as cS,Mv as cT,Pv as cU,Bv as cV,_v as cW,vv as cX,Sv as cY,by as cZ,Ev as c_,my as ca,Av as cb,bJ as cc,U4 as cd,vfe as ce,Efe as cf,_fe as cg,Afe as ch,xfe as ci,Cfe as cj,Sfe as ck,Ife as cl,Tfe as cm,Nfe as cn,GQe as co,MQe as cp,Rfe as cq,KQe as cr,vJ as cs,Pfe as ct,Ofe as cu,kfe as cv,ZQe as cw,QQe as cx,YQe as cy,XQe as cz,wr as d,wv as d0,Nv as d1,uc as d2,xv as d3,Cv as d4,Ia as d5,Rv as d6,yy as d7,Iv as d8,Uv as d9,wfe as da,kv as db,Ov as dc,Tv as dd,b0 as de,qfe as df,sfe as dg,hfe as dh,pfe as di,Dfe as dj,Kie as dk,A1 as dl,CJ as e,Vtt as f,Wtt as g,Gtt as h,ui as i,oi as j,Jtt as k,irt as l,crt as m,CI as n,lo as o,Dn as p,ze as q,art as r,li as s,ae as t,ho as u,P3e as v,Kc as w,Ytt as x,hhe as y,M4 as z};
