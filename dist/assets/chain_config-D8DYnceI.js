const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-kdtGQ_pD.js","assets/parseSignature-y63kn49h.js","assets/hashTypedData-Cg28xMRG.js","assets/embedded-wallet-Bb6B8Hbq.js","assets/class-map-gEppeFCC.js","assets/index-Cd3y1h9a.js","assets/index-B45DtCSQ.js","assets/if-defined-B79U8La_.js","assets/ref-Dfiam_TO.js","assets/async-directive-vLOJ1iU1.js","assets/index-Dv3DgHfk.js","assets/HelpersUtil-MCJZFBhD.js","assets/index-gGLWbcjs.js","assets/index--9RDAjl5.js","assets/index-CtaD59Sl.js","assets/index-DHFsNE39.js","assets/index-D5ZHVyzg.js","assets/NavigationUtil-DmfK5sOV.js","assets/email-BCLLKhvJ.js","assets/index-B_eNJwGd.js","assets/index-fxhu_x-1.js","assets/socials-CvJSSx5b.js","assets/index-DS6nAclk.js","assets/index-BltiFOpx.js","assets/index-COpTZOy_.js","assets/index-B1xXBZHu.js","assets/browser-YnLq1ntR.js","assets/index-CyGrdyG0.js","assets/swaps-DCfJMG53.js","assets/index-DmQodiCc.js","assets/index-DrWzjmNV.js","assets/SwapController-DDoL0nEH.js","assets/index-BDzPOhGn.js","assets/send-DAVKPRlF.js","assets/index-CkFUCH1c.js","assets/index-D6dyxc5h.js","assets/index-TE9UVXpb.js","assets/index-C58ZByqQ.js","assets/receive-1v883Fze.js","assets/onramp-C0IOiNx8.js","assets/index-N0djxW3t.js","assets/index-CY8cTnny.js","assets/index-ngR0JE7y.js","assets/pay-with-exchange-Dv4alUJS.js","assets/ExchangeController--y7KD5qp.js","assets/transactions-DLKiW_g8.js","assets/index-CVRcUqwi.js","assets/updateLocale-29SaZsIG.js","assets/index-BFm6ryEz.js","assets/index-YFpEsBuh.js","assets/index-DSfiV4fZ.js","assets/index-BiHCrKqT.js","assets/data-capture-D71D1D3m.js","assets/features--3ahueUK.js","assets/index-DVppxrph.js","assets/index-o6_RijN9.js","assets/w3m-modal-vkHnSrVf.js","assets/index-C0lMo-El.js","assets/index-tlUtzmPx.js","assets/embedded-wallet-BwztMOHM.js","assets/index-CAF11AxJ.js","assets/HelpersUtil-BNSr2iv_.js","assets/index-BP5oJskm.js","assets/index-BBtbNsVY.js","assets/index-DSM72A0H.js","assets/index-YqlQsqF-.js","assets/index-PBU5SXPe.js","assets/index-BuWZ1ozf.js","assets/index-CLIq9jXF.js","assets/index-S9s5RHv-.js","assets/index-Bdd7oWFu.js","assets/email-CDQmgb1P.js","assets/index-D_DMbBHu.js","assets/index-Btcg2zeb.js","assets/socials-BDwB4E1P.js","assets/index-CDzzw6KV.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-DuGaLMtx.js","assets/index-C7IIus8o.js","assets/index-C9xcjpaH.js","assets/index-CSdExni1.js","assets/swaps-B29M7Sry.js","assets/index-DOI4PMOy.js","assets/index-DC2MZbTQ.js","assets/SwapController-CVOa-9L-.js","assets/index-C9XBUklc.js","assets/send-oLJFJIdD.js","assets/index-OZYJFqHl.js","assets/index-DPpHED_0.js","assets/receive-CsGSWoxU.js","assets/index-CaSwXZRF.js","assets/onramp-Dz66mjzM.js","assets/index-OpFv50mv.js","assets/index-EZZbECL9.js","assets/pay-with-exchange-_eFVJKaL.js","assets/transactions-B4SiWh_H.js","assets/index-C5g0gt_S.js","assets/index-BG-gyhye.js","assets/index-C69rkPZu.js","assets/data-capture-DiwmmN5v.js","assets/features-DEEl7bD8.js","assets/index-B5mxkCYt.js","assets/index-DFIFCbKh.js","assets/w3m-modal-DadICPhq.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const bce="modulepreload",wce=function(t){return"/"+t},L9={},Pr=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(u){return Promise.all(u.map(l=>Promise.resolve(l).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=c(r.map(u=>{if(u=wce(u),u in L9)return;L9[u]=!0;const l=u.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":bce,l||(f.as="script"),f.crossOrigin="",f.href=u,a&&f.setAttribute("nonce",a),document.head.appendChild(f),l)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},vce=Symbol(),F9=Object.getPrototypeOf,qR=new WeakMap,Ece=t=>t&&(qR.has(t)?qR.get(t):F9(t)===Object.prototype||F9(t)===Array.prototype),IY=t=>Ece(t)&&t[vce]||null,jI=(t,e=!0)=>{qR.set(t,e)},LI={},w4=t=>typeof t=="object"&&t!==null,_ce=t=>w4(t)&&!EE.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),TY=(t,e)=>{const r=HR.get(t);if(r?.[0]===e)return r[1];const n=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return jI(n,!0),HR.set(t,[e,n]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(n,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(EE.has(i))jI(i,!1);else if(Ah.has(i)){const[c,u]=Ah.get(i);a.value=TY(c,u())}Object.defineProperty(n,s,a)}),Object.preventExtensions(n)},Ace=(t,e,r,n)=>({deleteProperty(s,i){const o=Reflect.get(s,i);r(i);const a=Reflect.deleteProperty(s,i);return a&&n(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),u=Reflect.get(s,i,a);if(c&&($9(u,o)||K1.has(o)&&$9(u,K1.get(o))))return!0;r(i),w4(o)&&(o=IY(o)||o);const l=!Ah.has(o)&&Cce(o)?Dn(o):o;return e(i,l),Reflect.set(s,i,l,a),n(["set",[i],o,u]),!0}}),Ah=new WeakMap,EE=new WeakSet,HR=new WeakMap,tI=[1],K1=new WeakMap;let $9=Object.is,xce=(t,e)=>new Proxy(t,e),Cce=_ce,Sce=TY,Ice=Ace;function Dn(t={}){if(!w4(t))throw new Error("object required");const e=K1.get(t);if(e)return e;let r=tI[0];const n=new Set,s=(y,E=++tI[0])=>{r!==E&&(i=r=E,n.forEach(S=>S(y,E)))};let i=r;const o=(y=tI[0])=>(i!==y&&(i=y,c.forEach(([E])=>{const S=E[1](y);S>r&&(r=S)})),r),a=y=>(E,S)=>{const C=[...E];C[1]=[y,...C[1]],s(C,S)},c=new Map,u=(y,E)=>{const S=!EE.has(E)&&Ah.get(E);if(S){if((LI?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(n.size){const C=S[2](a(y));c.set(y,[S,C])}else c.set(y,[S])}},l=y=>{var E;const S=c.get(y);S&&(c.delete(y),(E=S[1])==null||E.call(S))},d=y=>(n.add(y),n.size===1&&c.forEach(([S,C],_)=>{if((LI?"production":void 0)!=="production"&&C)throw new Error("remove already exists");const T=S[2](a(_));c.set(_,[S,T])}),()=>{n.delete(y),n.size===0&&c.forEach(([S,C],_)=>{C&&(C(),c.set(_,[S]))})});let f=!0;const p=Ice(()=>f,u,l,s),g=xce(t,p);K1.set(t,g);const h=[t,o,d];return Ah.set(g,h),Reflect.ownKeys(t).forEach(y=>{const E=Object.getOwnPropertyDescriptor(t,y);"value"in E&&E.writable&&(g[y]=t[y])}),f=!1,g}function ci(t,e,r){const n=Ah.get(t);(LI?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let s;const i=[],o=n[2];let a=!1;const u=o(l=>{i.push(l),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,u()}}function Z1(t){const e=Ah.get(t);(LI?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[r,n]=e;return Sce(r,n())}function iy(t){return EE.add(t),t}function Tce(){return{proxyStateMap:Ah,refSet:EE,snapCache:HR,versionHolder:tI,proxyCache:K1}}function ui(t,e,r,n){let s=t[e];return ci(t,()=>{const i=t[e];Object.is(s,i)||r(s=i)})}const{proxyStateMap:Nce,snapCache:Pce}=Tce(),O_=t=>Nce.has(t);function Rce(t){const e=[];let r=0;const n=new Map,s=new WeakMap,i=()=>{const u=Pce.get(a),l=u?.[1];if(l&&!s.has(l)){const d=new Map(n);s.set(l,d)}},o=u=>s.get(u)||n,a={data:e,index:r,epoch:0,get size(){return O_(this)||i(),o(this).size},get(u){const d=o(this).get(u);if(d===void 0){this.epoch;return}return this.data[d]},has(u){const l=o(this);return this.epoch,l.has(u)},set(u,l){if(!O_(this))throw new Error("Cannot perform mutations on a snapshot");const d=n.get(u);return d===void 0?(n.set(u,this.index),this.data[this.index++]=l):this.data[d]=l,this.epoch++,this},delete(u){if(!O_(this))throw new Error("Cannot perform mutations on a snapshot");const l=n.get(u);return l===void 0?!1:(delete this.data[l],n.delete(u),this.epoch++,!0)},clear(){if(!O_(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,n.clear()},forEach(u){this.epoch,o(this).forEach((d,f)=>{u(this.data[d],f,this)})},*entries(){this.epoch;const u=o(this);for(const[l,d]of u)yield[l,this.data[d]]},*keys(){this.epoch;const u=o(this);for(const l of u.keys())yield l},*values(){this.epoch;const u=o(this);for(const l of u.values())yield this.data[l]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=Dn(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ea(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ln(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){var s=!1;try{s=this instanceof n}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var q9={};const ae={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",BASE_ACCOUNT:"baseAccount",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122",TON:"ton"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks",ton:"TON"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",TON:"ton"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],SOLANA_SPL_TOKEN_ADDRESSES:{SOL:"So11111111111111111111111111111111111111112"},HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof q9<"u"?q9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}},IS_DEVELOPMENT:typeof process<"u"&&!1,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},NY={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return t?.filter(r=>r.chainNamespace===e)||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){if(!e)return;const r=t.find(s=>s.caipNetworkId===e);if(r)return r.name;const[n]=e.split(":");return ae.CHAIN_NAME_MAP?.[n]||void 0}},PY=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"];var Oce=20,kce=1,v0=1e6,H9=1e6,Bce=-7,Uce=21,Mce=!1,_E="[big.js] ",j0=_E+"Invalid ",b5=j0+"decimal places",Dce=j0+"rounding mode",RY=_E+"Division by zero",yn={},Al=void 0,jce=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function OY(){function t(e){var r=this;if(!(r instanceof t))return e===Al?OY():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(j0+"value");e=e===0&&1/e<0?"-0":String(e)}Lce(r,e)}r.constructor=t}return t.prototype=yn,t.DP=Oce,t.RM=kce,t.NE=Bce,t.PE=Uce,t.strict=Mce,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function Lce(t,e){var r,n,s;if(!jce.test(e))throw Error(j0+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),s=e.length,n=0;n<s&&e.charAt(n)=="0";)++n;if(n==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=r-n-1,t.c=[],r=0;n<=s;)t.c[r++]=+e.charAt(n++)}return t}function L0(t,e,r,n){var s=t.c;if(r===Al&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(Dce);if(e<1)n=r===3&&(n||!!s[0])||e===0&&(r===1&&s[0]>=5||r===2&&(s[0]>5||s[0]===5&&(n||s[1]!==Al))),s.length=1,n?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(n=r===1&&s[e]>=5||r===2&&(s[e]>5||s[e]===5&&(n||s[e+1]!==Al||s[e-1]&1))||r===3&&(n||!!s[0]),s.length=e,n){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function F0(t,e,r){var n=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)s="0"+s;s="0."+s}else if(n>0)if(++n>i)for(n-=i;n--;)s+="0";else n<i&&(s=s.slice(0,n)+"."+s.slice(n));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&r?"-"+s:s}yn.abs=function(){var t=new this.constructor(this);return t.s=1,t};yn.cmp=function(t){var e,r=this,n=r.c,s=(t=new r.constructor(t)).c,i=r.s,o=t.s,a=r.e,c=t.e;if(!n[0]||!s[0])return n[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=n.length)<(c=s.length)?a:c,i=-1;++i<o;)if(n[i]!=s[i])return n[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};yn.div=function(t){var e=this,r=e.constructor,n=e.c,s=(t=new r(t)).c,i=e.s==t.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>v0)throw Error(b5);if(!s[0])throw Error(RY);if(!n[0])return t.s=i,t.c=[t.e=0],t;var a,c,u,l,d,f=s.slice(),p=a=s.length,g=n.length,h=n.slice(0,a),y=h.length,E=t,S=E.c=[],C=0,_=o+(E.e=e.e-t.e)+1;for(E.s=i,i=_<0?0:_,f.unshift(0);y++<a;)h.push(0);do{for(u=0;u<10;u++){if(a!=(y=h.length))l=a>y?1:-1;else for(d=-1,l=0;++d<a;)if(s[d]!=h[d]){l=s[d]>h[d]?1:-1;break}if(l<0){for(c=y==a?s:f;y;){if(h[--y]<c[y]){for(d=y;d&&!h[--d];)h[d]=9;--h[d],h[y]+=10}h[y]-=c[y]}for(;!h[0];)h.shift()}else break}S[C++]=l?u:++u,h[0]&&l?h[y]=n[p]||0:h=[n[p]]}while((p++<g||h[0]!==Al)&&i--);return!S[0]&&C!=1&&(S.shift(),E.e--,_--),C>_&&L0(E,_,r.RM,h[0]!==Al),E};yn.eq=function(t){return this.cmp(t)===0};yn.gt=function(t){return this.cmp(t)>0};yn.gte=function(t){return this.cmp(t)>-1};yn.lt=function(t){return this.cmp(t)<0};yn.lte=function(t){return this.cmp(t)<1};yn.minus=yn.sub=function(t){var e,r,n,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var u=i.c.slice(),l=i.e,d=t.c,f=t.e;if(!u[0]||!d[0])return d[0]?t.s=-c:u[0]?t=new o(i):t.s=1,t;if(a=l-f){for((s=a<0)?(a=-a,n=u):(f=l,n=d),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(r=((s=u.length<d.length)?u:d).length,a=c=0;c<r;c++)if(u[c]!=d[c]){s=u[c]<d[c];break}if(s&&(n=u,u=d,d=n,t.s=-t.s),(c=(r=d.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;r>a;){if(u[--r]<d[r]){for(e=r;e&&!u[--e];)u[e]=9;--u[e],u[r]+=10}u[r]-=d[r]}for(;u[--c]===0;)u.pop();for(;u[0]===0;)u.shift(),--f;return u[0]||(t.s=1,u=[f=0]),t.c=u,t.e=f,t};yn.mod=function(t){var e,r=this,n=r.constructor,s=r.s,i=(t=new n(t)).s;if(!t.c[0])throw Error(RY);return r.s=t.s=1,e=t.cmp(r)==1,r.s=s,t.s=i,e?new n(r):(s=n.DP,i=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=s,n.RM=i,this.minus(r.times(t)))};yn.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};yn.plus=yn.add=function(t){var e,r,n,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,u=t.c;if(!a[0]||!u[0])return u[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,n=u):(e=-e,n=a),n.reverse();e--;)n.push(0);n.reverse()}for(a.length-u.length<0&&(n=u,u=a,a=n),e=u.length,r=0;e;a[e]%=10)r=(a[--e]=a[e]+u[e]+r)/10|0;for(r&&(a.unshift(r),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};yn.pow=function(t){var e=this,r=new e.constructor("1"),n=r,s=t<0;if(t!==~~t||t<-H9||t>H9)throw Error(j0+"exponent");for(s&&(t=-t);t&1&&(n=n.times(e)),t>>=1,!!t;)e=e.times(e);return s?r.div(n):n};yn.prec=function(t,e){if(t!==~~t||t<1||t>v0)throw Error(j0+"precision");return L0(new this.constructor(this),t,e)};yn.round=function(t,e){if(t===Al)t=0;else if(t!==~~t||t<-v0||t>v0)throw Error(b5);return L0(new this.constructor(this),t+this.e+1,e)};yn.sqrt=function(){var t,e,r,n=this,s=n.constructor,i=n.s,o=n.e,a=new s("0.5");if(!n.c[0])return new s(n);if(i<0)throw Error(_E+"No square root");i=Math.sqrt(+F0(n,!0,!0)),i===0||i===1/0?(e=n.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do r=t,t=a.times(r.plus(n.div(r)));while(r.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return L0(t,(s.DP-=4)+t.e+1,s.RM)};yn.times=yn.mul=function(t){var e,r=this,n=r.constructor,s=r.c,i=(t=new n(t)).c,o=s.length,a=i.length,c=r.e,u=t.e;if(t.s=r.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+u,o<a&&(e=s,s=i,i=e,u=o,o=a,a=u),e=new Array(u=o+a);u--;)e[u]=0;for(c=a;c--;){for(a=0,u=o+c;u>c;)a=e[u]+i[c]*s[u-c-1]+a,e[u--]=a%10,a=a/10|0;e[u]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};yn.toExponential=function(t,e){var r=this,n=r.c[0];if(t!==Al){if(t!==~~t||t<0||t>v0)throw Error(b5);for(r=L0(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return F0(r,!0,!!n)};yn.toFixed=function(t,e){var r=this,n=r.c[0];if(t!==Al){if(t!==~~t||t<0||t>v0)throw Error(b5);for(r=L0(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return F0(r,!1,!!n)};yn[Symbol.for("nodejs.util.inspect.custom")]=yn.toJSON=yn.toString=function(){var t=this,e=t.constructor;return F0(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};yn.toNumber=function(){var t=+F0(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(_E+"Imprecise conversion");return t};yn.toPrecision=function(t,e){var r=this,n=r.constructor,s=r.c[0];if(t!==Al){if(t!==~~t||t<1||t>v0)throw Error(j0+"precision");for(r=L0(new n(r),t,e);r.c.length<t;)r.c.push(0)}return F0(r,t<=r.e||r.e<=n.NE||r.e>=n.PE,!!s)};yn.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(_E+"valueOf disallowed");return F0(t,t.e<=e.NE||t.e>=e.PE,!0)};var ao=OY();const kY={bigNumber(t){return t?new ao(t):new ao(0)},multiply(t,e){if(t===void 0||e===void 0)return new ao(0);const r=new ao(t),n=new ao(e);return r.times(n)},toFixed(t,e=2){return t===void 0||t===""?new ao(0).toFixed(e):new ao(t).toFixed(e)},formatNumberToLocalString(t,e=2){return t===void 0||t===""?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"})},parseLocalStringToNumber(t){if(t===void 0||t==="")return 0;const e=t.replace(/,/gu,"");return new ao(e).toNumber()}},Fce=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],$ce=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],qce=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Hce={getERC20Abi:t=>ae.USDT_CONTRACT_ADDRESSES.includes(t)?qce:Fce,getSwapAbi:()=>$ce},xs={validateCaipAddress(t){if(t.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,s]=e;if(!r||!n||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},hl={RPC_ERROR_CODE:{USER_REJECTED_REQUEST:4001,USER_REJECTED_METHODS:5002,USER_REJECTED:5e3},PROVIDER_RPC_ERROR_NAME:{PROVIDER_RPC:"ProviderRpcError",USER_REJECTED_REQUEST:"UserRejectedRequestError"},isRpcProviderError(t){try{if(typeof t=="object"&&t!==null){const e=t,r=typeof e.message=="string",n=typeof e.code=="number";return r&&n}return!1}catch{return!1}},isUserRejectedMessage(t){return t.toLowerCase().includes("user rejected")||t.toLowerCase().includes("user cancelled")||t.toLowerCase().includes("user canceled")},isUserRejectedRequestError(t){if(hl.isRpcProviderError(t)){const e=t.code===hl.RPC_ERROR_CODE.USER_REJECTED_REQUEST,r=t.code===hl.RPC_ERROR_CODE.USER_REJECTED_METHODS;return e||r||hl.isUserRejectedMessage(t.message)}return t instanceof Error?hl.isUserRejectedMessage(t.message):!1}};let zce=class extends Error{constructor(e,r){super(r.message,{cause:e}),this.name=hl.PROVIDER_RPC_ERROR_NAME.PROVIDER_RPC,this.code=r.code}},My=class extends zce{constructor(e){super(e,{code:hl.RPC_ERROR_CODE.USER_REJECTED_REQUEST,message:"User rejected the request"}),this.name=hl.PROVIDER_RPC_ERROR_NAME.USER_REJECTED_REQUEST}};const mt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",RECENT_WALLET:"@appkit/recent_wallet",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails",LATEST_APPKIT_VERSION:"@appkit/latest_version",TON_WALLETS_CACHE:"@appkit/ton_wallets_cache"};function o3(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ft={setItem(t,e){o1()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(o1())return localStorage.getItem(t)||void 0},removeItem(t){o1()&&localStorage.removeItem(t)},clear(){o1()&&localStorage.clear()}};function o1(){return typeof window<"u"&&typeof localStorage<"u"}function Y1(t,e){const r=t?.["--apkt-accent"]??t?.["--w3m-accent"];return e==="light"?{"--w3m-accent":r||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":r||"hsla(230, 100%, 67%, 1)","--w3m-background":"#202020"}}var z9={};const a3=(typeof process<"u"&&typeof z9<"u"?z9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",BY=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Wce="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",wr={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:a3,SECURE_SITE_DASHBOARD:`${a3}/dashboard`,SECURE_SITE_FAVICON:`${a3}/images/favicon.png`,SOLANA_NATIVE_TOKEN_ADDRESS:"So11111111111111111111111111111111111111111",RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],SUGGESTED_TOKENS_BY_CHAIN:{"eip155:42161":["USDâ‚®0"]},BALANCE_SUPPORTED_CHAINS:[ae.CHAIN.EVM,ae.CHAIN.SOLANA],SEND_PARAMS_SUPPORTED_CHAINS:[ae.CHAIN.EVM],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[ae.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[ae.CHAIN.EVM,ae.CHAIN.SOLANA],PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES:[ae.CHAIN.EVM,ae.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[ae.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x",ton:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[ae.CHAIN.EVM,ae.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa",ton:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},Ae={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3,latestAppKitVersion:6048e5,tonWallets:864e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Ae.getActiveNamespace(),e=Ae.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{ft.setItem(mt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ft.getItem(mt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ft.removeItem(mt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ft.setItem(mt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ft.setItem(mt.ACTIVE_CAIP_NETWORK_ID,t),Ae.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ft.getItem(mt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ft.removeItem(mt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=o3(t);ft.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Ae.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ft.setItem(mt.RECENT_WALLETS,JSON.stringify(e)),ft.setItem(mt.RECENT_WALLET,JSON.stringify(t)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ft.getItem(mt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},getRecentWallet(){try{const t=ft.getItem(mt.RECENT_WALLET);return t?JSON.parse(t):null}catch{console.info("Unable to get AppKit recent")}return null},deleteRecentWallet(){try{ft.removeItem(mt.RECENT_WALLET)}catch{console.info("Unable to delete AppKit recent")}},setConnectedConnectorId(t,e){try{const r=o3(t);ft.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ft.getItem(mt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=o3(t);return ft.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{ft.setItem(mt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ft.getItem(mt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ft.removeItem(mt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ft.getItem(mt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return ft.getItem(mt.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(t){try{ft.setItem(mt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ft.getItem(mt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ft.getItem(mt.CONNECTED_NAMESPACES);return t?.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ft.setItem(mt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Ae.getConnectedNamespaces();e.includes(t)||(e.push(t),Ae.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Ae.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),Ae.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ft.getItem(mt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ft.setItem(mt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ft.removeItem(mt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ft.getItem(mt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Ae.getBalanceCache();ft.setItem(mt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=Ae.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;Ae.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Ae.getBalanceCache();e[t.caipAddress]=t,ft.setItem(mt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ft.getItem(mt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Ae.getBalanceCache();ft.setItem(mt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=Ae.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),Ae.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Ae.getNativeBalanceCache();e[t.caipAddress]=t,ft.setItem(mt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ft.getItem(mt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=Ae.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;Ae.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Ae.getEnsCache();e[t.address]=t,ft.setItem(mt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Ae.getEnsCache();ft.setItem(mt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ft.getItem(mt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=Ae.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;Ae.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Ae.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ft.setItem(mt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Ae.getIdentityCache();ft.setItem(mt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},getTonWalletsCache(){try{const t=ft.getItem(mt.TON_WALLETS_CACHE),e=t?JSON.parse(t):void 0;if(e&&!this.isCacheExpired(e.timestamp,this.cacheExpiry.tonWallets))return e;Ae.removeTonWalletsCache()}catch{console.info("Unable to get ton wallets cache")}},updateTonWalletsCache(t){try{const e=Ae.getTonWalletsCache()||{timestamp:0,wallets:[]};e.timestamp=new Date().getTime(),e.wallets=t,ft.setItem(mt.TON_WALLETS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ton wallets cache",t)}},removeTonWalletsCache(){try{ft.removeItem(mt.TON_WALLETS_CACHE)}catch{console.info("Unable to remove ton wallets cache")}},clearAddressCache(){try{ft.removeItem(mt.PORTFOLIO_CACHE),ft.removeItem(mt.NATIVE_BALANCE_CACHE),ft.removeItem(mt.ENS_CACHE),ft.removeItem(mt.IDENTITY_CACHE),ft.removeItem(mt.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{ft.setItem(mt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=ft.getItem(mt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const r=Ae.getConnections(),n=r[e]??[],s=new Map;for(const o of n)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===ae.CONNECTOR_ID.AUTH;if(a&&!c){const u=new Set(a.accounts.map(d=>d.address.toLowerCase())),l=o.accounts.filter(d=>!u.has(d.address.toLowerCase()));a.accounts.push(...l)}else s.set(o.connectorId,{...o})}const i={...r,[e]:Array.from(s.values())};ft.setItem(mt.CONNECTIONS,JSON.stringify(i))}catch(r){console.error("Unable to sync connections to storage",r)}},getConnections(){try{const t=ft.getItem(mt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:r}){try{const n=Ae.getConnections(),s=n[r]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),ft.setItem(mt.CONNECTIONS,JSON.stringify({...n,[r]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${r}"`)}},getDisconnectedConnectorIds(){try{const t=ft.getItem(mt.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const r=Ae.getDisconnectedConnectorIds(),n=r[e]??[];n.push(t),ft.setItem(mt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...r,[e]:Array.from(new Set(n))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const r=Ae.getDisconnectedConnectorIds();let n=r[e]??[];n=n.filter(s=>s.toLowerCase()!==t.toLowerCase()),ft.setItem(mt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...r,[e]:Array.from(new Set(n))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(Ae.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=ft.getItem(mt.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){try{const n=Ae.getTransactionsCache()[t]?.[e];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.transactionsHistory))return n.transactions;Ae.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:r,transactions:n}){try{const s=Ae.getTransactionsCache();s[t]={...s[t],[e]:{timestamp:r,transactions:n}},ft.setItem(mt.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:r,transactions:n})}},removeTransactionsCache({address:t,chainId:e}){try{const r=Ae.getTransactionsCache(),n=r?.[t]||{},{[e]:s,...i}=n;ft.setItem(mt.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...r,[t]:i}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=ft.getItem(mt.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const r=Ae.getTokenPriceCache()[t.join(",")];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.tokenPrice))return r.tokenPrice;Ae.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=Ae.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},ft.setItem(mt.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=Ae.getTokenPriceCache();ft.setItem(mt.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}},getLatestAppKitVersion(){try{const t=this.getLatestAppKitVersionCache(),e=t?.version;return e&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.latestAppKitVersion)?e:void 0}catch{console.info("Unable to get latest AppKit version")}},getLatestAppKitVersionCache(){try{const t=ft.getItem(mt.LATEST_APPKIT_VERSION);return t?JSON.parse(t):{}}catch{console.info("Unable to get latest AppKit version cache")}return{}},updateLatestAppKitVersion(t){try{const e=Ae.getLatestAppKitVersionCache();e.timestamp=t.timestamp,e.version=t.version,ft.setItem(mt.LATEST_APPKIT_VERSION,JSON.stringify(e))}catch{console.info("Unable to update latest AppKit version on local storage",t)}}},ke={getWindow(){if(!(typeof window>"u"))return window},isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return ke.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=wr.TEN_SEC_MS:!0},isAllowedRetry(t,e=wr.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(ke.isClient()&&window.self!==window.top)try{const t=window?.location?.ancestorOrigins?.[0],e="https://app.safe.global";if(t){const r=new URL(t),n=new URL(e);return r.hostname===n.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+wr.FOUR_MINUTES_MS},getNetworkId(t){return t?.split(":")[1]},getPlainAddress(t){return t?.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function s(){t(...n)}r&&clearTimeout(r),r=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,r=null){if(ke.isHttpUrl(t))return this.formatUniversalUrl(t,e);let n=t,s=r;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),s&&!s?.endsWith("/")&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${n}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:n}},formatUniversalUrl(t,e){if(!ke.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Ae.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window?.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window?.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;const t=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,e=window?.navigator?.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((r,n)=>{const s=new Image;s.onload=r,s.onerror=n,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ke.wait(2e3)])},parseBalance(t,e){let r="0.000";if(typeof t=="string"){const c=Number(t);if(!isNaN(c)){const u=(Math.floor(c*1e3)/1e3).toFixed(3);u&&(r=u)}}const[n,s]=r.split("."),i=n||"0",o=s||"000";return{formattedText:`${i}.${o}${e?` ${e}`:""}`,value:i,decimals:o,symbol:e}},getApiUrl(){return ae.W3M_API_URL},getBlockchainApiUrl(){return ae.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ae.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){return typeof t=="string"?t:typeof t?.issues?.[0]?.message=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,s)=>{r[n]=s}),e.sort((n,s)=>{const i=r[n.id],o=r[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const s=n[e];return r.has(s)?!1:(r.add(s),!0)})},generateSdkVersion(t,e,r){const s=t.length===0?wr.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${r}`},createAccount(t,e,r,n,s){return{namespace:t,address:e,type:r,publicKey:n,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in ae.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window?.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window?.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),r,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",n),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,n+i),c=t.substring(n+i,o),u=t.substring(s),l=c+r;return a+l+u}};var c3={},yb={},W9;function Vce(){if(W9)return yb;W9=1,yb.byteLength=a,yb.toByteArray=u,yb.fromByteArray=f;for(var t=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=n.length;s<i;++s)t[s]=n[s],e[n.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(p){var g=p.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=p.indexOf("=");h===-1&&(h=g);var y=h===g?0:4-h%4;return[h,y]}function a(p){var g=o(p),h=g[0],y=g[1];return(h+y)*3/4-y}function c(p,g,h){return(g+h)*3/4-h}function u(p){var g,h=o(p),y=h[0],E=h[1],S=new r(c(p,y,E)),C=0,_=E>0?y-4:y,T;for(T=0;T<_;T+=4)g=e[p.charCodeAt(T)]<<18|e[p.charCodeAt(T+1)]<<12|e[p.charCodeAt(T+2)]<<6|e[p.charCodeAt(T+3)],S[C++]=g>>16&255,S[C++]=g>>8&255,S[C++]=g&255;return E===2&&(g=e[p.charCodeAt(T)]<<2|e[p.charCodeAt(T+1)]>>4,S[C++]=g&255),E===1&&(g=e[p.charCodeAt(T)]<<10|e[p.charCodeAt(T+1)]<<4|e[p.charCodeAt(T+2)]>>2,S[C++]=g>>8&255,S[C++]=g&255),S}function l(p){return t[p>>18&63]+t[p>>12&63]+t[p>>6&63]+t[p&63]}function d(p,g,h){for(var y,E=[],S=g;S<h;S+=3)y=(p[S]<<16&16711680)+(p[S+1]<<8&65280)+(p[S+2]&255),E.push(l(y));return E.join("")}function f(p){for(var g,h=p.length,y=h%3,E=[],S=16383,C=0,_=h-y;C<_;C+=S)E.push(d(p,C,C+S>_?_:C+S));return y===1?(g=p[h-1],E.push(t[g>>2]+t[g<<4&63]+"==")):y===2&&(g=(p[h-2]<<8)+p[h-1],E.push(t[g>>10]+t[g>>4&63]+t[g<<2&63]+"=")),E.join("")}return yb}var k_={};var V9;function Gce(){return V9||(V9=1,k_.read=function(t,e,r,n,s){var i,o,a=s*8-n-1,c=(1<<a)-1,u=c>>1,l=-7,d=r?s-1:0,f=r?-1:1,p=t[e+d];for(d+=f,i=p&(1<<-l)-1,p>>=-l,l+=a;l>0;i=i*256+t[e+d],d+=f,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=o*256+t[e+d],d+=f,l-=8);if(i===0)i=1-u;else{if(i===c)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-u}return(p?-1:1)*o*Math.pow(2,i-n)},k_.write=function(t,e,r,n,s,i){var o,a,c,u=i*8-s-1,l=(1<<u)-1,d=l>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,g=n?1:-1,h=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=f/c:e+=f*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(e*c-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[r+p]=a&255,p+=g,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;t[r+p]=o&255,p+=g,o/=256,u-=8);t[r+p-g]|=h*128}),k_}var G9;function v4(){return G9||(G9=1,(function(t){const e=Vce(),r=Gce(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=S,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const V=new Uint8Array(1),q={foo:function(){return 42}};return Object.setPrototypeOf(q,Uint8Array.prototype),Object.setPrototypeOf(V,q),V.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(V){if(V>s)throw new RangeError('The value "'+V+'" is invalid for option "size"');const q=new Uint8Array(V);return Object.setPrototypeOf(q,a.prototype),q}function a(V,q,z){if(typeof V=="number"){if(typeof q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(V)}return c(V,q,z)}a.poolSize=8192;function c(V,q,z){if(typeof V=="string")return f(V,q);if(ArrayBuffer.isView(V))return g(V);if(V==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V);if(Mt(V,ArrayBuffer)||V&&Mt(V.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Mt(V,SharedArrayBuffer)||V&&Mt(V.buffer,SharedArrayBuffer)))return h(V,q,z);if(typeof V=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const X=V.valueOf&&V.valueOf();if(X!=null&&X!==V)return a.from(X,q,z);const ne=y(V);if(ne)return ne;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof V[Symbol.toPrimitive]=="function")return a.from(V[Symbol.toPrimitive]("string"),q,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V)}a.from=function(V,q,z){return c(V,q,z)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(V){if(typeof V!="number")throw new TypeError('"size" argument must be of type number');if(V<0)throw new RangeError('The value "'+V+'" is invalid for option "size"')}function l(V,q,z){return u(V),V<=0?o(V):q!==void 0?typeof z=="string"?o(V).fill(q,z):o(V).fill(q):o(V)}a.alloc=function(V,q,z){return l(V,q,z)};function d(V){return u(V),o(V<0?0:E(V)|0)}a.allocUnsafe=function(V){return d(V)},a.allocUnsafeSlow=function(V){return d(V)};function f(V,q){if((typeof q!="string"||q==="")&&(q="utf8"),!a.isEncoding(q))throw new TypeError("Unknown encoding: "+q);const z=C(V,q)|0;let X=o(z);const ne=X.write(V,q);return ne!==z&&(X=X.slice(0,ne)),X}function p(V){const q=V.length<0?0:E(V.length)|0,z=o(q);for(let X=0;X<q;X+=1)z[X]=V[X]&255;return z}function g(V){if(Mt(V,Uint8Array)){const q=new Uint8Array(V);return h(q.buffer,q.byteOffset,q.byteLength)}return p(V)}function h(V,q,z){if(q<0||V.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(V.byteLength<q+(z||0))throw new RangeError('"length" is outside of buffer bounds');let X;return q===void 0&&z===void 0?X=new Uint8Array(V):z===void 0?X=new Uint8Array(V,q):X=new Uint8Array(V,q,z),Object.setPrototypeOf(X,a.prototype),X}function y(V){if(a.isBuffer(V)){const q=E(V.length)|0,z=o(q);return z.length===0||V.copy(z,0,0,q),z}if(V.length!==void 0)return typeof V.length!="number"||bt(V.length)?o(0):p(V);if(V.type==="Buffer"&&Array.isArray(V.data))return p(V.data)}function E(V){if(V>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return V|0}function S(V){return+V!=V&&(V=0),a.alloc(+V)}a.isBuffer=function(q){return q!=null&&q._isBuffer===!0&&q!==a.prototype},a.compare=function(q,z){if(Mt(q,Uint8Array)&&(q=a.from(q,q.offset,q.byteLength)),Mt(z,Uint8Array)&&(z=a.from(z,z.offset,z.byteLength)),!a.isBuffer(q)||!a.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===z)return 0;let X=q.length,ne=z.length;for(let ce=0,me=Math.min(X,ne);ce<me;++ce)if(q[ce]!==z[ce]){X=q[ce],ne=z[ce];break}return X<ne?-1:ne<X?1:0},a.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(q,z){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(q.length===0)return a.alloc(0);let X;if(z===void 0)for(z=0,X=0;X<q.length;++X)z+=q[X].length;const ne=a.allocUnsafe(z);let ce=0;for(X=0;X<q.length;++X){let me=q[X];if(Mt(me,Uint8Array))ce+me.length>ne.length?(a.isBuffer(me)||(me=a.from(me)),me.copy(ne,ce)):Uint8Array.prototype.set.call(ne,me,ce);else if(a.isBuffer(me))me.copy(ne,ce);else throw new TypeError('"list" argument must be an Array of Buffers');ce+=me.length}return ne};function C(V,q){if(a.isBuffer(V))return V.length;if(ArrayBuffer.isView(V)||Mt(V,ArrayBuffer))return V.byteLength;if(typeof V!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof V);const z=V.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&z===0)return 0;let ne=!1;for(;;)switch(q){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return Ne(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z*2;case"hex":return z>>>1;case"base64":return Ee(V).length;default:if(ne)return X?-1:Ne(V).length;q=(""+q).toLowerCase(),ne=!0}}a.byteLength=C;function _(V,q,z){let X=!1;if((q===void 0||q<0)&&(q=0),q>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0,q>>>=0,z<=q))return"";for(V||(V="utf8");;)switch(V){case"hex":return k(this,q,z);case"utf8":case"utf-8":return m(this,q,z);case"ascii":return x(this,q,z);case"latin1":case"binary":return M(this,q,z);case"base64":return A(this,q,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,q,z);default:if(X)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),X=!0}}a.prototype._isBuffer=!0;function T(V,q,z){const X=V[q];V[q]=V[z],V[z]=X}a.prototype.swap16=function(){const q=this.length;if(q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let z=0;z<q;z+=2)T(this,z,z+1);return this},a.prototype.swap32=function(){const q=this.length;if(q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let z=0;z<q;z+=4)T(this,z,z+3),T(this,z+1,z+2);return this},a.prototype.swap64=function(){const q=this.length;if(q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let z=0;z<q;z+=8)T(this,z,z+7),T(this,z+1,z+6),T(this,z+2,z+5),T(this,z+3,z+4);return this},a.prototype.toString=function(){const q=this.length;return q===0?"":arguments.length===0?m(this,0,q):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(q){if(!a.isBuffer(q))throw new TypeError("Argument must be a Buffer");return this===q?!0:a.compare(this,q)===0},a.prototype.inspect=function(){let q="";const z=t.INSPECT_MAX_BYTES;return q=this.toString("hex",0,z).replace(/(.{2})/g,"$1 ").trim(),this.length>z&&(q+=" ... "),"<Buffer "+q+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(q,z,X,ne,ce){if(Mt(q,Uint8Array)&&(q=a.from(q,q.offset,q.byteLength)),!a.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof q);if(z===void 0&&(z=0),X===void 0&&(X=q?q.length:0),ne===void 0&&(ne=0),ce===void 0&&(ce=this.length),z<0||X>q.length||ne<0||ce>this.length)throw new RangeError("out of range index");if(ne>=ce&&z>=X)return 0;if(ne>=ce)return-1;if(z>=X)return 1;if(z>>>=0,X>>>=0,ne>>>=0,ce>>>=0,this===q)return 0;let me=ce-ne,Rt=X-z;const Tt=Math.min(me,Rt),Ct=this.slice(ne,ce),or=q.slice(z,X);for(let Et=0;Et<Tt;++Et)if(Ct[Et]!==or[Et]){me=Ct[Et],Rt=or[Et];break}return me<Rt?-1:Rt<me?1:0};function P(V,q,z,X,ne){if(V.length===0)return-1;if(typeof z=="string"?(X=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,bt(z)&&(z=ne?0:V.length-1),z<0&&(z=V.length+z),z>=V.length){if(ne)return-1;z=V.length-1}else if(z<0)if(ne)z=0;else return-1;if(typeof q=="string"&&(q=a.from(q,X)),a.isBuffer(q))return q.length===0?-1:D(V,q,z,X,ne);if(typeof q=="number")return q=q&255,typeof Uint8Array.prototype.indexOf=="function"?ne?Uint8Array.prototype.indexOf.call(V,q,z):Uint8Array.prototype.lastIndexOf.call(V,q,z):D(V,[q],z,X,ne);throw new TypeError("val must be string, number or Buffer")}function D(V,q,z,X,ne){let ce=1,me=V.length,Rt=q.length;if(X!==void 0&&(X=String(X).toLowerCase(),X==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if(V.length<2||q.length<2)return-1;ce=2,me/=2,Rt/=2,z/=2}function Tt(or,Et){return ce===1?or[Et]:or.readUInt16BE(Et*ce)}let Ct;if(ne){let or=-1;for(Ct=z;Ct<me;Ct++)if(Tt(V,Ct)===Tt(q,or===-1?0:Ct-or)){if(or===-1&&(or=Ct),Ct-or+1===Rt)return or*ce}else or!==-1&&(Ct-=Ct-or),or=-1}else for(z+Rt>me&&(z=me-Rt),Ct=z;Ct>=0;Ct--){let or=!0;for(let Et=0;Et<Rt;Et++)if(Tt(V,Ct+Et)!==Tt(q,Et)){or=!1;break}if(or)return Ct}return-1}a.prototype.includes=function(q,z,X){return this.indexOf(q,z,X)!==-1},a.prototype.indexOf=function(q,z,X){return P(this,q,z,X,!0)},a.prototype.lastIndexOf=function(q,z,X){return P(this,q,z,X,!1)};function F(V,q,z,X){z=Number(z)||0;const ne=V.length-z;X?(X=Number(X),X>ne&&(X=ne)):X=ne;const ce=q.length;X>ce/2&&(X=ce/2);let me;for(me=0;me<X;++me){const Rt=parseInt(q.substr(me*2,2),16);if(bt(Rt))return me;V[z+me]=Rt}return me}function I(V,q,z,X){return fe(Ne(q,V.length-z),V,z,X)}function U(V,q,z,X){return fe(Be(q),V,z,X)}function L(V,q,z,X){return fe(Ee(q),V,z,X)}function B(V,q,z,X){return fe(At(q,V.length-z),V,z,X)}a.prototype.write=function(q,z,X,ne){if(z===void 0)ne="utf8",X=this.length,z=0;else if(X===void 0&&typeof z=="string")ne=z,X=this.length,z=0;else if(isFinite(z))z=z>>>0,isFinite(X)?(X=X>>>0,ne===void 0&&(ne="utf8")):(ne=X,X=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ce=this.length-z;if((X===void 0||X>ce)&&(X=ce),q.length>0&&(X<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");ne||(ne="utf8");let me=!1;for(;;)switch(ne){case"hex":return F(this,q,z,X);case"utf8":case"utf-8":return I(this,q,z,X);case"ascii":case"latin1":case"binary":return U(this,q,z,X);case"base64":return L(this,q,z,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,q,z,X);default:if(me)throw new TypeError("Unknown encoding: "+ne);ne=(""+ne).toLowerCase(),me=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(V,q,z){return q===0&&z===V.length?e.fromByteArray(V):e.fromByteArray(V.slice(q,z))}function m(V,q,z){z=Math.min(V.length,z);const X=[];let ne=q;for(;ne<z;){const ce=V[ne];let me=null,Rt=ce>239?4:ce>223?3:ce>191?2:1;if(ne+Rt<=z){let Tt,Ct,or,Et;switch(Rt){case 1:ce<128&&(me=ce);break;case 2:Tt=V[ne+1],(Tt&192)===128&&(Et=(ce&31)<<6|Tt&63,Et>127&&(me=Et));break;case 3:Tt=V[ne+1],Ct=V[ne+2],(Tt&192)===128&&(Ct&192)===128&&(Et=(ce&15)<<12|(Tt&63)<<6|Ct&63,Et>2047&&(Et<55296||Et>57343)&&(me=Et));break;case 4:Tt=V[ne+1],Ct=V[ne+2],or=V[ne+3],(Tt&192)===128&&(Ct&192)===128&&(or&192)===128&&(Et=(ce&15)<<18|(Tt&63)<<12|(Ct&63)<<6|or&63,Et>65535&&Et<1114112&&(me=Et))}}me===null?(me=65533,Rt=1):me>65535&&(me-=65536,X.push(me>>>10&1023|55296),me=56320|me&1023),X.push(me),ne+=Rt}return w(X)}const b=4096;function w(V){const q=V.length;if(q<=b)return String.fromCharCode.apply(String,V);let z="",X=0;for(;X<q;)z+=String.fromCharCode.apply(String,V.slice(X,X+=b));return z}function x(V,q,z){let X="";z=Math.min(V.length,z);for(let ne=q;ne<z;++ne)X+=String.fromCharCode(V[ne]&127);return X}function M(V,q,z){let X="";z=Math.min(V.length,z);for(let ne=q;ne<z;++ne)X+=String.fromCharCode(V[ne]);return X}function k(V,q,z){const X=V.length;(!q||q<0)&&(q=0),(!z||z<0||z>X)&&(z=X);let ne="";for(let ce=q;ce<z;++ce)ne+=jt[V[ce]];return ne}function j(V,q,z){const X=V.slice(q,z);let ne="";for(let ce=0;ce<X.length-1;ce+=2)ne+=String.fromCharCode(X[ce]+X[ce+1]*256);return ne}a.prototype.slice=function(q,z){const X=this.length;q=~~q,z=z===void 0?X:~~z,q<0?(q+=X,q<0&&(q=0)):q>X&&(q=X),z<0?(z+=X,z<0&&(z=0)):z>X&&(z=X),z<q&&(z=q);const ne=this.subarray(q,z);return Object.setPrototypeOf(ne,a.prototype),ne};function N(V,q,z){if(V%1!==0||V<0)throw new RangeError("offset is not uint");if(V+q>z)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(q,z,X){q=q>>>0,z=z>>>0,X||N(q,z,this.length);let ne=this[q],ce=1,me=0;for(;++me<z&&(ce*=256);)ne+=this[q+me]*ce;return ne},a.prototype.readUintBE=a.prototype.readUIntBE=function(q,z,X){q=q>>>0,z=z>>>0,X||N(q,z,this.length);let ne=this[q+--z],ce=1;for(;z>0&&(ce*=256);)ne+=this[q+--z]*ce;return ne},a.prototype.readUint8=a.prototype.readUInt8=function(q,z){return q=q>>>0,z||N(q,1,this.length),this[q]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(q,z){return q=q>>>0,z||N(q,2,this.length),this[q]|this[q+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(q,z){return q=q>>>0,z||N(q,2,this.length),this[q]<<8|this[q+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(q,z){return q=q>>>0,z||N(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+this[q+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(q,z){return q=q>>>0,z||N(q,4,this.length),this[q]*16777216+(this[q+1]<<16|this[q+2]<<8|this[q+3])},a.prototype.readBigUInt64LE=ge(function(q){q=q>>>0,le(q,"offset");const z=this[q],X=this[q+7];(z===void 0||X===void 0)&&se(q,this.length-8);const ne=z+this[++q]*2**8+this[++q]*2**16+this[++q]*2**24,ce=this[++q]+this[++q]*2**8+this[++q]*2**16+X*2**24;return BigInt(ne)+(BigInt(ce)<<BigInt(32))}),a.prototype.readBigUInt64BE=ge(function(q){q=q>>>0,le(q,"offset");const z=this[q],X=this[q+7];(z===void 0||X===void 0)&&se(q,this.length-8);const ne=z*2**24+this[++q]*2**16+this[++q]*2**8+this[++q],ce=this[++q]*2**24+this[++q]*2**16+this[++q]*2**8+X;return(BigInt(ne)<<BigInt(32))+BigInt(ce)}),a.prototype.readIntLE=function(q,z,X){q=q>>>0,z=z>>>0,X||N(q,z,this.length);let ne=this[q],ce=1,me=0;for(;++me<z&&(ce*=256);)ne+=this[q+me]*ce;return ce*=128,ne>=ce&&(ne-=Math.pow(2,8*z)),ne},a.prototype.readIntBE=function(q,z,X){q=q>>>0,z=z>>>0,X||N(q,z,this.length);let ne=z,ce=1,me=this[q+--ne];for(;ne>0&&(ce*=256);)me+=this[q+--ne]*ce;return ce*=128,me>=ce&&(me-=Math.pow(2,8*z)),me},a.prototype.readInt8=function(q,z){return q=q>>>0,z||N(q,1,this.length),this[q]&128?(255-this[q]+1)*-1:this[q]},a.prototype.readInt16LE=function(q,z){q=q>>>0,z||N(q,2,this.length);const X=this[q]|this[q+1]<<8;return X&32768?X|4294901760:X},a.prototype.readInt16BE=function(q,z){q=q>>>0,z||N(q,2,this.length);const X=this[q+1]|this[q]<<8;return X&32768?X|4294901760:X},a.prototype.readInt32LE=function(q,z){return q=q>>>0,z||N(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},a.prototype.readInt32BE=function(q,z){return q=q>>>0,z||N(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},a.prototype.readBigInt64LE=ge(function(q){q=q>>>0,le(q,"offset");const z=this[q],X=this[q+7];(z===void 0||X===void 0)&&se(q,this.length-8);const ne=this[q+4]+this[q+5]*2**8+this[q+6]*2**16+(X<<24);return(BigInt(ne)<<BigInt(32))+BigInt(z+this[++q]*2**8+this[++q]*2**16+this[++q]*2**24)}),a.prototype.readBigInt64BE=ge(function(q){q=q>>>0,le(q,"offset");const z=this[q],X=this[q+7];(z===void 0||X===void 0)&&se(q,this.length-8);const ne=(z<<24)+this[++q]*2**16+this[++q]*2**8+this[++q];return(BigInt(ne)<<BigInt(32))+BigInt(this[++q]*2**24+this[++q]*2**16+this[++q]*2**8+X)}),a.prototype.readFloatLE=function(q,z){return q=q>>>0,z||N(q,4,this.length),r.read(this,q,!0,23,4)},a.prototype.readFloatBE=function(q,z){return q=q>>>0,z||N(q,4,this.length),r.read(this,q,!1,23,4)},a.prototype.readDoubleLE=function(q,z){return q=q>>>0,z||N(q,8,this.length),r.read(this,q,!0,52,8)},a.prototype.readDoubleBE=function(q,z){return q=q>>>0,z||N(q,8,this.length),r.read(this,q,!1,52,8)};function v(V,q,z,X,ne,ce){if(!a.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(q>ne||q<ce)throw new RangeError('"value" argument is out of bounds');if(z+X>V.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(q,z,X,ne){if(q=+q,z=z>>>0,X=X>>>0,!ne){const Rt=Math.pow(2,8*X)-1;v(this,q,z,X,Rt,0)}let ce=1,me=0;for(this[z]=q&255;++me<X&&(ce*=256);)this[z+me]=q/ce&255;return z+X},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(q,z,X,ne){if(q=+q,z=z>>>0,X=X>>>0,!ne){const Rt=Math.pow(2,8*X)-1;v(this,q,z,X,Rt,0)}let ce=X-1,me=1;for(this[z+ce]=q&255;--ce>=0&&(me*=256);)this[z+ce]=q/me&255;return z+X},a.prototype.writeUint8=a.prototype.writeUInt8=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,1,255,0),this[z]=q&255,z+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,2,65535,0),this[z]=q&255,this[z+1]=q>>>8,z+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,2,65535,0),this[z]=q>>>8,this[z+1]=q&255,z+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,4,4294967295,0),this[z+3]=q>>>24,this[z+2]=q>>>16,this[z+1]=q>>>8,this[z]=q&255,z+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,4,4294967295,0),this[z]=q>>>24,this[z+1]=q>>>16,this[z+2]=q>>>8,this[z+3]=q&255,z+4};function R(V,q,z,X,ne){de(q,X,ne,V,z,7);let ce=Number(q&BigInt(4294967295));V[z++]=ce,ce=ce>>8,V[z++]=ce,ce=ce>>8,V[z++]=ce,ce=ce>>8,V[z++]=ce;let me=Number(q>>BigInt(32)&BigInt(4294967295));return V[z++]=me,me=me>>8,V[z++]=me,me=me>>8,V[z++]=me,me=me>>8,V[z++]=me,z}function $(V,q,z,X,ne){de(q,X,ne,V,z,7);let ce=Number(q&BigInt(4294967295));V[z+7]=ce,ce=ce>>8,V[z+6]=ce,ce=ce>>8,V[z+5]=ce,ce=ce>>8,V[z+4]=ce;let me=Number(q>>BigInt(32)&BigInt(4294967295));return V[z+3]=me,me=me>>8,V[z+2]=me,me=me>>8,V[z+1]=me,me=me>>8,V[z]=me,z+8}a.prototype.writeBigUInt64LE=ge(function(q,z=0){return R(this,q,z,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ge(function(q,z=0){return $(this,q,z,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(q,z,X,ne){if(q=+q,z=z>>>0,!ne){const Tt=Math.pow(2,8*X-1);v(this,q,z,X,Tt-1,-Tt)}let ce=0,me=1,Rt=0;for(this[z]=q&255;++ce<X&&(me*=256);)q<0&&Rt===0&&this[z+ce-1]!==0&&(Rt=1),this[z+ce]=(q/me>>0)-Rt&255;return z+X},a.prototype.writeIntBE=function(q,z,X,ne){if(q=+q,z=z>>>0,!ne){const Tt=Math.pow(2,8*X-1);v(this,q,z,X,Tt-1,-Tt)}let ce=X-1,me=1,Rt=0;for(this[z+ce]=q&255;--ce>=0&&(me*=256);)q<0&&Rt===0&&this[z+ce+1]!==0&&(Rt=1),this[z+ce]=(q/me>>0)-Rt&255;return z+X},a.prototype.writeInt8=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,1,127,-128),q<0&&(q=255+q+1),this[z]=q&255,z+1},a.prototype.writeInt16LE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,2,32767,-32768),this[z]=q&255,this[z+1]=q>>>8,z+2},a.prototype.writeInt16BE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,2,32767,-32768),this[z]=q>>>8,this[z+1]=q&255,z+2},a.prototype.writeInt32LE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,4,2147483647,-2147483648),this[z]=q&255,this[z+1]=q>>>8,this[z+2]=q>>>16,this[z+3]=q>>>24,z+4},a.prototype.writeInt32BE=function(q,z,X){return q=+q,z=z>>>0,X||v(this,q,z,4,2147483647,-2147483648),q<0&&(q=4294967295+q+1),this[z]=q>>>24,this[z+1]=q>>>16,this[z+2]=q>>>8,this[z+3]=q&255,z+4},a.prototype.writeBigInt64LE=ge(function(q,z=0){return R(this,q,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ge(function(q,z=0){return $(this,q,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function O(V,q,z,X,ne,ce){if(z+X>V.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function H(V,q,z,X,ne){return q=+q,z=z>>>0,ne||O(V,q,z,4),r.write(V,q,z,X,23,4),z+4}a.prototype.writeFloatLE=function(q,z,X){return H(this,q,z,!0,X)},a.prototype.writeFloatBE=function(q,z,X){return H(this,q,z,!1,X)};function W(V,q,z,X,ne){return q=+q,z=z>>>0,ne||O(V,q,z,8),r.write(V,q,z,X,52,8),z+8}a.prototype.writeDoubleLE=function(q,z,X){return W(this,q,z,!0,X)},a.prototype.writeDoubleBE=function(q,z,X){return W(this,q,z,!1,X)},a.prototype.copy=function(q,z,X,ne){if(!a.isBuffer(q))throw new TypeError("argument should be a Buffer");if(X||(X=0),!ne&&ne!==0&&(ne=this.length),z>=q.length&&(z=q.length),z||(z=0),ne>0&&ne<X&&(ne=X),ne===X||q.length===0||this.length===0)return 0;if(z<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("sourceEnd out of bounds");ne>this.length&&(ne=this.length),q.length-z<ne-X&&(ne=q.length-z+X);const ce=ne-X;return this===q&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(z,X,ne):Uint8Array.prototype.set.call(q,this.subarray(X,ne),z),ce},a.prototype.fill=function(q,z,X,ne){if(typeof q=="string"){if(typeof z=="string"?(ne=z,z=0,X=this.length):typeof X=="string"&&(ne=X,X=this.length),ne!==void 0&&typeof ne!="string")throw new TypeError("encoding must be a string");if(typeof ne=="string"&&!a.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);if(q.length===1){const me=q.charCodeAt(0);(ne==="utf8"&&me<128||ne==="latin1")&&(q=me)}}else typeof q=="number"?q=q&255:typeof q=="boolean"&&(q=Number(q));if(z<0||this.length<z||this.length<X)throw new RangeError("Out of range index");if(X<=z)return this;z=z>>>0,X=X===void 0?this.length:X>>>0,q||(q=0);let ce;if(typeof q=="number")for(ce=z;ce<X;++ce)this[ce]=q;else{const me=a.isBuffer(q)?q:a.from(q,ne),Rt=me.length;if(Rt===0)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(ce=0;ce<X-z;++ce)this[ce+z]=me[ce%Rt]}return this};const G={};function K(V,q,z){G[V]=class extends z{constructor(){super(),Object.defineProperty(this,"message",{value:q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${V}]`,this.stack,delete this.name}get code(){return V}set code(ne){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ne,writable:!0})}toString(){return`${this.name} [${V}]: ${this.message}`}}}K("ERR_BUFFER_OUT_OF_BOUNDS",function(V){return V?`${V} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),K("ERR_INVALID_ARG_TYPE",function(V,q){return`The "${V}" argument must be of type number. Received type ${typeof q}`},TypeError),K("ERR_OUT_OF_RANGE",function(V,q,z){let X=`The value of "${V}" is out of range.`,ne=z;return Number.isInteger(z)&&Math.abs(z)>2**32?ne=Q(String(z)):typeof z=="bigint"&&(ne=String(z),(z>BigInt(2)**BigInt(32)||z<-(BigInt(2)**BigInt(32)))&&(ne=Q(ne)),ne+="n"),X+=` It must be ${q}. Received ${ne}`,X},RangeError);function Q(V){let q="",z=V.length;const X=V[0]==="-"?1:0;for(;z>=X+4;z-=3)q=`_${V.slice(z-3,z)}${q}`;return`${V.slice(0,z)}${q}`}function re(V,q,z){le(q,"offset"),(V[q]===void 0||V[q+z]===void 0)&&se(q,V.length-(z+1))}function de(V,q,z,X,ne,ce){if(V>z||V<q){const me=typeof q=="bigint"?"n":"";let Rt;throw q===0||q===BigInt(0)?Rt=`>= 0${me} and < 2${me} ** ${(ce+1)*8}${me}`:Rt=`>= -(2${me} ** ${(ce+1)*8-1}${me}) and < 2 ** ${(ce+1)*8-1}${me}`,new G.ERR_OUT_OF_RANGE("value",Rt,V)}re(X,ne,ce)}function le(V,q){if(typeof V!="number")throw new G.ERR_INVALID_ARG_TYPE(q,"number",V)}function se(V,q,z){throw Math.floor(V)!==V?(le(V,z),new G.ERR_OUT_OF_RANGE("offset","an integer",V)):q<0?new G.ERR_BUFFER_OUT_OF_BOUNDS:new G.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${q}`,V)}const be=/[^+/0-9A-Za-z-_]/g;function We(V){if(V=V.split("=")[0],V=V.trim().replace(be,""),V.length<2)return"";for(;V.length%4!==0;)V=V+"=";return V}function Ne(V,q){q=q||1/0;let z;const X=V.length;let ne=null;const ce=[];for(let me=0;me<X;++me){if(z=V.charCodeAt(me),z>55295&&z<57344){if(!ne){if(z>56319){(q-=3)>-1&&ce.push(239,191,189);continue}else if(me+1===X){(q-=3)>-1&&ce.push(239,191,189);continue}ne=z;continue}if(z<56320){(q-=3)>-1&&ce.push(239,191,189),ne=z;continue}z=(ne-55296<<10|z-56320)+65536}else ne&&(q-=3)>-1&&ce.push(239,191,189);if(ne=null,z<128){if((q-=1)<0)break;ce.push(z)}else if(z<2048){if((q-=2)<0)break;ce.push(z>>6|192,z&63|128)}else if(z<65536){if((q-=3)<0)break;ce.push(z>>12|224,z>>6&63|128,z&63|128)}else if(z<1114112){if((q-=4)<0)break;ce.push(z>>18|240,z>>12&63|128,z>>6&63|128,z&63|128)}else throw new Error("Invalid code point")}return ce}function Be(V){const q=[];for(let z=0;z<V.length;++z)q.push(V.charCodeAt(z)&255);return q}function At(V,q){let z,X,ne;const ce=[];for(let me=0;me<V.length&&!((q-=2)<0);++me)z=V.charCodeAt(me),X=z>>8,ne=z%256,ce.push(ne),ce.push(X);return ce}function Ee(V){return e.toByteArray(We(V))}function fe(V,q,z,X){let ne;for(ne=0;ne<X&&!(ne+z>=q.length||ne>=V.length);++ne)q[ne+z]=V[ne];return ne}function Mt(V,q){return V instanceof q||V!=null&&V.constructor!=null&&V.constructor.name!=null&&V.constructor.name===q.name}function bt(V){return V!==V}const jt=(function(){const V="0123456789abcdef",q=new Array(256);for(let z=0;z<16;++z){const X=z*16;for(let ne=0;ne<16;++ne)q[X+ne]=V[z]+V[ne]}return q})();function ge(V){return typeof BigInt>"u"?ve:V}function ve(){throw new Error("BigInt not supported")}})(c3)),c3}var nr=v4(),oy={};const Kce="https://secure.walletconnect.org/sdk",Zce=(typeof process<"u"&&typeof oy<"u"?oy.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Kce,Yce=(typeof process<"u"&&typeof oy<"u"?oy.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",Jce=(typeof process<"u"&&typeof oy<"u"?oy.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",ct={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ss={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},K9={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},qs={set(t,e){Qa.isClient&&localStorage.setItem(`${ct.STORAGE_KEY}${t}`,e)},get(t){return Qa.isClient?localStorage.getItem(`${ct.STORAGE_KEY}${t}`):null},delete(t,e){Qa.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${ct.STORAGE_KEY}${t}`))}},B_=30*1e3,Qa={checkIfAllowedToTriggerEmail(){const t=qs.get(ct.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<B_){const r=Math.ceil((B_-e)/1e3);throw new Error(`Please try again after ${r} seconds`)}}},getTimeToNextEmailLogin(){const t=qs.get(ct.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<B_)return Math.ceil((B_-e)/1e3)}return 0},checkIfRequestExists(t){return Ss.NOT_SAFE_RPC_METHODS.includes(t.method)||Ss.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&(t?.match(K9.transactionHash)||t?.match(K9.signedMessage))?ct.RPC_RESPONSE_TYPE_TX:ct.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Ss.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var qr;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(qr||(qr={}));var zR;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(zR||(zR={}));const Qe=qr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),nh=t=>{switch(typeof t){case"undefined":return Qe.undefined;case"string":return Qe.string;case"number":return isNaN(t)?Qe.nan:Qe.number;case"boolean":return Qe.boolean;case"function":return Qe.function;case"bigint":return Qe.bigint;case"symbol":return Qe.symbol;case"object":return Array.isArray(t)?Qe.array:t===null?Qe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Qe.promise:typeof Map<"u"&&t instanceof Map?Qe.map:typeof Set<"u"&&t instanceof Set?Qe.set:typeof Date<"u"&&t instanceof Date?Qe.date:Qe.object;default:return Qe.unknown}},Me=qr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Xce=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");let Ru=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,qr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Ru.create=t=>new Ru(t);const J1=(t,e)=>{let r;switch(t.code){case Me.invalid_type:t.received===Qe.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Me.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,qr.jsonStringifyReplacer)}`;break;case Me.unrecognized_keys:r=`Unrecognized key(s) in object: ${qr.joinValues(t.keys,", ")}`;break;case Me.invalid_union:r="Invalid input";break;case Me.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${qr.joinValues(t.options)}`;break;case Me.invalid_enum_value:r=`Invalid enum value. Expected ${qr.joinValues(t.options)}, received '${t.received}'`;break;case Me.invalid_arguments:r="Invalid function arguments";break;case Me.invalid_return_type:r="Invalid function return type";break;case Me.invalid_date:r="Invalid date";break;case Me.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:qr.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Me.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Me.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Me.custom:r="Invalid input";break;case Me.invalid_intersection_types:r="Intersection results could not be merged";break;case Me.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Me.not_finite:r="Number must be finite";break;default:r=e.defaultError,qr.assertNever(t)}return{message:r}};let UY=J1;function Qce(t){UY=t}function FI(){return UY}const $I=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};let a="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},eue=[];function ot(t,e){const r=$I({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,FI(),J1].filter(n=>!!n)});t.common.issues.push(r)}let va=class MY{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return Vt;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r)n.push({key:await s.key,value:await s.value});return MY.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Vt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}};const Vt=Object.freeze({status:"aborted"}),DY=t=>({status:"dirty",value:t}),Do=t=>({status:"valid",value:t}),WR=t=>t.status==="aborted",VR=t=>t.status==="dirty",X1=t=>t.status==="valid",qI=t=>typeof Promise<"u"&&t instanceof Promise;var Bt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Bt||(Bt={}));let Pl=class{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}};const Z9=(t,e)=>{if(X1(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Ru(t.common.issues);return this._error=r,this._error}}};function Jt(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:s}}let sr=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return nh(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:nh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new va,ctx:{common:e.parent.common,data:e.data,parsedType:nh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(qI(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:nh(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Z9(s,i)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:nh(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(qI(s)?s:Promise.resolve(s));return Z9(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Me.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Mu({schema:this,typeName:$t.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return zd.create(this,this._def)}nullable(){return _0.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return E0.create(this,this._def)}promise(){return uy.create(this,this._def)}or(e){return iv.create([this,e],this._def)}and(e){return ov.create(this,e,this._def)}transform(e){return new Mu({...Jt(this._def),schema:this,typeName:$t.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new lv({...Jt(this._def),innerType:this,defaultValue:r,typeName:$t.ZodDefault})}brand(){return new WY({typeName:$t.ZodBranded,type:this,...Jt(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new GI({...Jt(this._def),innerType:this,catchValue:r,typeName:$t.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return E4.create(this,e)}readonly(){return ZI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const tue=/^c[^\s-]{8,}$/i,rue=/^[a-z][a-z0-9]*$/,nue=/^[0-9A-HJKMNP-TV-Z]{26}$/,sue=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,iue=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,oue="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let u3;const aue=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,cue=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,uue=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function lue(t,e){return!!((e==="v4"||!e)&&aue.test(t)||(e==="v6"||!e)&&cue.test(t))}let ay=class a1 extends sr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Qe.string){const i=this._getOrReturnCtx(e);return ot(i,{code:Me.invalid_type,expected:Qe.string,received:i.parsedType}),Vt}const n=new va;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ot(s,{code:Me.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ot(s,{code:Me.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")iue.test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"email",code:Me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")u3||(u3=new RegExp(oue,"u")),u3.test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"emoji",code:Me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")sue.test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"uuid",code:Me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")tue.test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"cuid",code:Me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")rue.test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"cuid2",code:Me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")nue.test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"ulid",code:Me.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ot(s,{validation:"url",code:Me.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"regex",code:Me.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?uue(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?lue(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ot(s,{validation:"ip",code:Me.invalid_string,message:i.message}),n.dirty()):qr.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:Me.invalid_string,...Bt.errToObj(n)})}_addCheck(e){return new a1({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Bt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Bt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Bt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Bt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Bt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Bt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Bt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Bt.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...Bt.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Bt.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Bt.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Bt.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Bt.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Bt.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Bt.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Bt.errToObj(r)})}nonempty(e){return this.min(1,Bt.errToObj(e))}trim(){return new a1({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new a1({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new a1({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ay.create=t=>{var e;return new ay({checks:[],typeName:$t.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Jt(t)})};function due(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}let Q1=class GR extends sr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Qe.number){const i=this._getOrReturnCtx(e);return ot(i,{code:Me.invalid_type,expected:Qe.number,received:i.parsedType}),Vt}let n;const s=new va;for(const i of this._def.checks)i.kind==="int"?qr.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?due(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.not_finite,message:i.message}),s.dirty()):qr.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Bt.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Bt.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Bt.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Bt.toString(r))}setLimit(e,r,n,s){return new GR({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Bt.toString(s)}]})}_addCheck(e){return new GR({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Bt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Bt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Bt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Bt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Bt.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Bt.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Bt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Bt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Bt.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&qr.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Q1.create=t=>new Q1({checks:[],typeName:$t.ZodNumber,coerce:t?.coerce||!1,...Jt(t)});let ev=class KR extends sr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Qe.bigint){const i=this._getOrReturnCtx(e);return ot(i,{code:Me.invalid_type,expected:Qe.bigint,received:i.parsedType}),Vt}let n;const s=new va;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ot(n,{code:Me.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):qr.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Bt.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Bt.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Bt.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Bt.toString(r))}setLimit(e,r,n,s){return new KR({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Bt.toString(s)}]})}_addCheck(e){return new KR({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Bt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Bt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Bt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Bt.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Bt.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ev.create=t=>{var e;return new ev({checks:[],typeName:$t.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Jt(t)})};let tv=class extends sr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Qe.boolean){const n=this._getOrReturnCtx(e);return ot(n,{code:Me.invalid_type,expected:Qe.boolean,received:n.parsedType}),Vt}return Do(e.data)}};tv.create=t=>new tv({typeName:$t.ZodBoolean,coerce:t?.coerce||!1,...Jt(t)});let rv=class jY extends sr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Qe.date){const i=this._getOrReturnCtx(e);return ot(i,{code:Me.invalid_type,expected:Qe.date,received:i.parsedType}),Vt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ot(i,{code:Me.invalid_date}),Vt}const n=new va;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ot(s,{code:Me.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):qr.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new jY({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Bt.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Bt.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};rv.create=t=>new rv({checks:[],coerce:t?.coerce||!1,typeName:$t.ZodDate,...Jt(t)});let HI=class extends sr{_parse(e){if(this._getType(e)!==Qe.symbol){const n=this._getOrReturnCtx(e);return ot(n,{code:Me.invalid_type,expected:Qe.symbol,received:n.parsedType}),Vt}return Do(e.data)}};HI.create=t=>new HI({typeName:$t.ZodSymbol,...Jt(t)});let nv=class extends sr{_parse(e){if(this._getType(e)!==Qe.undefined){const n=this._getOrReturnCtx(e);return ot(n,{code:Me.invalid_type,expected:Qe.undefined,received:n.parsedType}),Vt}return Do(e.data)}};nv.create=t=>new nv({typeName:$t.ZodUndefined,...Jt(t)});let sv=class extends sr{_parse(e){if(this._getType(e)!==Qe.null){const n=this._getOrReturnCtx(e);return ot(n,{code:Me.invalid_type,expected:Qe.null,received:n.parsedType}),Vt}return Do(e.data)}};sv.create=t=>new sv({typeName:$t.ZodNull,...Jt(t)});let cy=class extends sr{constructor(){super(...arguments),this._any=!0}_parse(e){return Do(e.data)}};cy.create=t=>new cy({typeName:$t.ZodAny,...Jt(t)});let l0=class extends sr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Do(e.data)}};l0.create=t=>new l0({typeName:$t.ZodUnknown,...Jt(t)});let Jd=class extends sr{_parse(e){const r=this._getOrReturnCtx(e);return ot(r,{code:Me.invalid_type,expected:Qe.never,received:r.parsedType}),Vt}};Jd.create=t=>new Jd({typeName:$t.ZodNever,...Jt(t)});let zI=class extends sr{_parse(e){if(this._getType(e)!==Qe.undefined){const n=this._getOrReturnCtx(e);return ot(n,{code:Me.invalid_type,expected:Qe.void,received:n.parsedType}),Vt}return Do(e.data)}};zI.create=t=>new zI({typeName:$t.ZodVoid,...Jt(t)});let E0=class rI extends sr{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==Qe.array)return ot(r,{code:Me.invalid_type,expected:Qe.array,received:r.parsedType}),Vt;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(ot(r,{code:o?Me.too_big:Me.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(ot(r,{code:Me.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(ot(r,{code:Me.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new Pl(r,o,r.path,a)))).then(o=>va.mergeArray(n,o));const i=[...r.data].map((o,a)=>s.type._parseSync(new Pl(r,o,r.path,a)));return va.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new rI({...this._def,minLength:{value:e,message:Bt.toString(r)}})}max(e,r){return new rI({...this._def,maxLength:{value:e,message:Bt.toString(r)}})}length(e,r){return new rI({...this._def,exactLength:{value:e,message:Bt.toString(r)}})}nonempty(e){return this.min(1,e)}};E0.create=(t,e)=>new E0({type:t,minLength:null,maxLength:null,exactLength:null,typeName:$t.ZodArray,...Jt(e)});function wm(t){if(t instanceof jc){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=zd.create(wm(n))}return new jc({...t._def,shape:()=>e})}else return t instanceof E0?new E0({...t._def,type:wm(t.element)}):t instanceof zd?zd.create(wm(t.unwrap())):t instanceof _0?_0.create(wm(t.unwrap())):t instanceof xh?xh.create(t.items.map(e=>wm(e))):t}let jc=class du extends sr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=qr.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Qe.object){const u=this._getOrReturnCtx(e);return ot(u,{code:Me.invalid_type,expected:Qe.object,received:u.parsedType}),Vt}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Jd&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=i[u],d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Pl(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Jd){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(ot(s,{code:Me.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Pl(s,d,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const d=await l.key;u.push({key:d,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>va.mergeObjectSync(n,u)):va.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return Bt.errToObj,new du({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=Bt.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new du({...this._def,unknownKeys:"strip"})}passthrough(){return new du({...this._def,unknownKeys:"passthrough"})}extend(e){return new du({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new du({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:$t.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new du({...this._def,catchall:e})}pick(e){const r={};return qr.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new du({...this._def,shape:()=>r})}omit(e){const r={};return qr.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new du({...this._def,shape:()=>r})}deepPartial(){return wm(this)}partial(e){const r={};return qr.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new du({...this._def,shape:()=>r})}required(e){const r={};return qr.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof zd;)i=i._def.innerType;r[n]=i}}),new du({...this._def,shape:()=>r})}keyof(){return zY(qr.objectKeys(this.shape))}};jc.create=(t,e)=>new jc({shape:()=>t,unknownKeys:"strip",catchall:Jd.create(),typeName:$t.ZodObject,...Jt(e)});jc.strictCreate=(t,e)=>new jc({shape:()=>t,unknownKeys:"strict",catchall:Jd.create(),typeName:$t.ZodObject,...Jt(e)});jc.lazycreate=(t,e)=>new jc({shape:t,unknownKeys:"strip",catchall:Jd.create(),typeName:$t.ZodObject,...Jt(e)});let iv=class extends sr{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Ru(a.ctx.common.issues));return ot(r,{code:Me.invalid_union,unionErrors:o}),Vt}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},l=c._parseSync({data:r.data,path:r.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Ru(c));return ot(r,{code:Me.invalid_union,unionErrors:a}),Vt}}get options(){return this._def.options}};iv.create=(t,e)=>new iv({options:t,typeName:$t.ZodUnion,...Jt(e)});const nI=t=>t instanceof av?nI(t.schema):t instanceof Mu?nI(t.innerType()):t instanceof cv?[t.value]:t instanceof AE?t.options:t instanceof uv?Object.keys(t.enum):t instanceof lv?nI(t._def.innerType):t instanceof nv?[void 0]:t instanceof sv?[null]:null;let LY=class FY extends sr{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Qe.object)return ot(r,{code:Me.invalid_type,expected:Qe.object,received:r.parsedType}),Vt;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(ot(r,{code:Me.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Vt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const o=nI(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new FY({typeName:$t.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...Jt(n)})}};function ZR(t,e){const r=nh(t),n=nh(e);if(t===e)return{valid:!0,data:t};if(r===Qe.object&&n===Qe.object){const s=qr.objectKeys(e),i=qr.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=ZR(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===Qe.array&&n===Qe.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=ZR(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===Qe.date&&n===Qe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}let ov=class extends sr{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(WR(i)||WR(o))return Vt;const a=ZR(i.value,o.value);return a.valid?((VR(i)||VR(o))&&r.dirty(),{status:r.value,value:a.data}):(ot(n,{code:Me.invalid_intersection_types}),Vt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};ov.create=(t,e,r)=>new ov({left:t,right:e,typeName:$t.ZodIntersection,...Jt(r)});let xh=class $Y extends sr{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Qe.array)return ot(n,{code:Me.invalid_type,expected:Qe.array,received:n.parsedType}),Vt;if(n.data.length<this._def.items.length)return ot(n,{code:Me.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Vt;!this._def.rest&&n.data.length>this._def.items.length&&(ot(n,{code:Me.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Pl(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>va.mergeArray(r,o)):va.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new $Y({...this._def,rest:e})}};xh.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xh({items:t,typeName:$t.ZodTuple,rest:null,...Jt(e)})};let qY=class YR extends sr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Qe.object)return ot(n,{code:Me.invalid_type,expected:Qe.object,received:n.parsedType}),Vt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in n.data)s.push({key:i._parse(new Pl(n,a,n.path,a)),value:o._parse(new Pl(n,n.data[a],n.path,a))});return n.common.async?va.mergeObjectAsync(r,s):va.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof sr?new YR({keyType:e,valueType:r,typeName:$t.ZodRecord,...Jt(n)}):new YR({keyType:ay.create(),valueType:e,typeName:$t.ZodRecord,...Jt(r)})}},WI=class extends sr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Qe.map)return ot(n,{code:Me.invalid_type,expected:Qe.map,received:n.parsedType}),Vt;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:s._parse(new Pl(n,a,n.path,[u,"key"])),value:i._parse(new Pl(n,c,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return Vt;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return Vt;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}}}};WI.create=(t,e,r)=>new WI({valueType:e,keyType:t,typeName:$t.ZodMap,...Jt(r)});let VI=class JR extends sr{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Qe.set)return ot(n,{code:Me.invalid_type,expected:Qe.set,received:n.parsedType}),Vt;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(ot(n,{code:Me.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(ot(n,{code:Me.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return Vt;l.status==="dirty"&&r.dirty(),u.add(l.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((c,u)=>i._parse(new Pl(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new JR({...this._def,minSize:{value:e,message:Bt.toString(r)}})}max(e,r){return new JR({...this._def,maxSize:{value:e,message:Bt.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};VI.create=(t,e)=>new VI({valueType:t,minSize:null,maxSize:null,typeName:$t.ZodSet,...Jt(e)});let HY=class sI extends sr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Qe.function)return ot(r,{code:Me.invalid_type,expected:Qe.function,received:r.parsedType}),Vt;function n(a,c){return $I({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,FI(),J1].filter(u=>!!u),issueData:{code:Me.invalid_arguments,argumentsError:c}})}function s(a,c){return $I({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,FI(),J1].filter(u=>!!u),issueData:{code:Me.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof uy){const a=this;return Do(async function(...c){const u=new Ru([]),l=await a._def.args.parseAsync(c,i).catch(p=>{throw u.addIssue(n(c,p)),u}),d=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(d,i).catch(p=>{throw u.addIssue(s(d,p)),u})})}else{const a=this;return Do(function(...c){const u=a._def.args.safeParse(c,i);if(!u.success)throw new Ru([n(c,u.error)]);const l=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(l,i);if(!d.success)throw new Ru([s(l,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new sI({...this._def,args:xh.create(e).rest(l0.create())})}returns(e){return new sI({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new sI({args:e||xh.create([]).rest(l0.create()),returns:r||l0.create(),typeName:$t.ZodFunction,...Jt(n)})}},av=class extends sr{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};av.create=(t,e)=>new av({getter:t,typeName:$t.ZodLazy,...Jt(e)});let cv=class extends sr{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return ot(r,{received:r.data,code:Me.invalid_literal,expected:this._def.value}),Vt}return{status:"valid",value:e.data}}get value(){return this._def.value}};cv.create=(t,e)=>new cv({value:t,typeName:$t.ZodLiteral,...Jt(e)});function zY(t,e){return new AE({values:t,typeName:$t.ZodEnum,...Jt(e)})}let AE=class XR extends sr{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return ot(r,{expected:qr.joinValues(n),received:r.parsedType,code:Me.invalid_type}),Vt}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return ot(r,{received:r.data,code:Me.invalid_enum_value,options:n}),Vt}return Do(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return XR.create(e)}exclude(e){return XR.create(this.options.filter(r=>!e.includes(r)))}};AE.create=zY;let uv=class extends sr{_parse(e){const r=qr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Qe.string&&n.parsedType!==Qe.number){const s=qr.objectValues(r);return ot(n,{expected:qr.joinValues(s),received:n.parsedType,code:Me.invalid_type}),Vt}if(r.indexOf(e.data)===-1){const s=qr.objectValues(r);return ot(n,{received:n.data,code:Me.invalid_enum_value,options:s}),Vt}return Do(e.data)}get enum(){return this._def.values}};uv.create=(t,e)=>new uv({values:t,typeName:$t.ZodNativeEnum,...Jt(e)});let uy=class extends sr{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Qe.promise&&r.common.async===!1)return ot(r,{code:Me.invalid_type,expected:Qe.promise,received:r.parsedType}),Vt;const n=r.parsedType===Qe.promise?r.data:Promise.resolve(r.data);return Do(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};uy.create=(t,e)=>new uy({type:t,typeName:$t.ZodPromise,...Jt(e)});let Mu=class extends sr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$t.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ot(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Vt:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Vt:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!X1(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>X1(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):o);qr.assertNever(s)}};Mu.create=(t,e,r)=>new Mu({schema:t,typeName:$t.ZodEffects,effect:e,...Jt(r)});Mu.createWithPreprocess=(t,e,r)=>new Mu({schema:e,effect:{type:"preprocess",transform:t},typeName:$t.ZodEffects,...Jt(r)});let zd=class extends sr{_parse(e){return this._getType(e)===Qe.undefined?Do(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};zd.create=(t,e)=>new zd({innerType:t,typeName:$t.ZodOptional,...Jt(e)});let _0=class extends sr{_parse(e){return this._getType(e)===Qe.null?Do(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};_0.create=(t,e)=>new _0({innerType:t,typeName:$t.ZodNullable,...Jt(e)});let lv=class extends sr{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===Qe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};lv.create=(t,e)=>new lv({innerType:t,typeName:$t.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Jt(e)});let GI=class extends sr{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return qI(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ru(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ru(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};GI.create=(t,e)=>new GI({innerType:t,typeName:$t.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Jt(e)});let KI=class extends sr{_parse(e){if(this._getType(e)!==Qe.nan){const n=this._getOrReturnCtx(e);return ot(n,{code:Me.invalid_type,expected:Qe.nan,received:n.parsedType}),Vt}return{status:"valid",value:e.data}}};KI.create=t=>new KI({typeName:$t.ZodNaN,...Jt(t)});const fue=Symbol("zod_brand");let WY=class extends sr{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},E4=class VY extends sr{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Vt:i.status==="dirty"?(r.dirty(),DY(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Vt:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new VY({in:e,out:r,typeName:$t.ZodPipeline})}},ZI=class extends sr{_parse(e){const r=this._def.innerType._parse(e);return X1(r)&&(r.value=Object.freeze(r.value)),r}};ZI.create=(t,e)=>new ZI({innerType:t,typeName:$t.ZodReadonly,...Jt(e)});const GY=(t,e={},r)=>t?cy.create().superRefine((n,s)=>{var i,o;if(!t(n)){const a=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:r)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...u,fatal:c})}}):cy.create(),hue={object:jc.lazycreate};var $t;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})($t||($t={}));const pue=(t,e={message:`Input not instance of ${t.name}`})=>GY(r=>r instanceof t,e),KY=ay.create,ZY=Q1.create,gue=KI.create,mue=ev.create,YY=tv.create,yue=rv.create,bue=HI.create,wue=nv.create,vue=sv.create,Eue=cy.create,_ue=l0.create,Aue=Jd.create,xue=zI.create,Cue=E0.create,Sue=jc.create,Iue=jc.strictCreate,Tue=iv.create,Nue=LY.create,Pue=ov.create,Rue=xh.create,Oue=qY.create,kue=WI.create,Bue=VI.create,Uue=HY.create,Mue=av.create,Due=cv.create,jue=AE.create,Lue=uv.create,Fue=uy.create,Y9=Mu.create,$ue=zd.create,que=_0.create,Hue=Mu.createWithPreprocess,zue=E4.create,Wue=()=>KY().optional(),Vue=()=>ZY().optional(),Gue=()=>YY().optional(),Kue={string:(t=>ay.create({...t,coerce:!0})),number:(t=>Q1.create({...t,coerce:!0})),boolean:(t=>tv.create({...t,coerce:!0})),bigint:(t=>ev.create({...t,coerce:!0})),date:(t=>rv.create({...t,coerce:!0}))},Zue=Vt;var Z=Object.freeze({__proto__:null,defaultErrorMap:J1,setErrorMap:Qce,getErrorMap:FI,makeIssue:$I,EMPTY_PATH:eue,addIssueToContext:ot,ParseStatus:va,INVALID:Vt,DIRTY:DY,OK:Do,isAborted:WR,isDirty:VR,isValid:X1,isAsync:qI,get util(){return qr},get objectUtil(){return zR},ZodParsedType:Qe,getParsedType:nh,ZodType:sr,ZodString:ay,ZodNumber:Q1,ZodBigInt:ev,ZodBoolean:tv,ZodDate:rv,ZodSymbol:HI,ZodUndefined:nv,ZodNull:sv,ZodAny:cy,ZodUnknown:l0,ZodNever:Jd,ZodVoid:zI,ZodArray:E0,ZodObject:jc,ZodUnion:iv,ZodDiscriminatedUnion:LY,ZodIntersection:ov,ZodTuple:xh,ZodRecord:qY,ZodMap:WI,ZodSet:VI,ZodFunction:HY,ZodLazy:av,ZodLiteral:cv,ZodEnum:AE,ZodNativeEnum:uv,ZodPromise:uy,ZodEffects:Mu,ZodTransformer:Mu,ZodOptional:zd,ZodNullable:_0,ZodDefault:lv,ZodCatch:GI,ZodNaN:KI,BRAND:fue,ZodBranded:WY,ZodPipeline:E4,ZodReadonly:ZI,custom:GY,Schema:sr,ZodSchema:sr,late:hue,get ZodFirstPartyTypeKind(){return $t},coerce:Kue,any:Eue,array:Cue,bigint:mue,boolean:YY,date:yue,discriminatedUnion:Nue,effect:Y9,enum:jue,function:Uue,instanceof:pue,intersection:Pue,lazy:Mue,literal:Due,map:kue,nan:gue,nativeEnum:Lue,never:Aue,null:vue,nullable:que,number:ZY,object:Sue,oboolean:Gue,onumber:Vue,optional:$ue,ostring:Wue,pipeline:zue,preprocess:Hue,promise:Fue,record:Oue,set:Bue,strictObject:Iue,string:KY,symbol:bue,transformer:Y9,tuple:Rue,undefined:wue,union:Tue,unknown:_ue,void:xue,NEVER:Zue,ZodIssueCode:Me,quotelessJson:Xce,ZodError:Ru});const os=Z.object({message:Z.string()});function rt(t){return Z.literal(ct[t])}const w5=Z.object({serializedMessage:Z.string().optional(),accountAddress:Z.string(),chainId:Z.string(),notBefore:Z.string().optional(),domain:Z.string(),uri:Z.string(),version:Z.string(),nonce:Z.string(),statement:Z.string().optional(),resources:Z.array(Z.string()).optional(),requestId:Z.string().optional(),issuedAt:Z.string().optional(),expirationTime:Z.string().optional()});Z.object({accessList:Z.array(Z.string()),blockHash:Z.string().nullable(),blockNumber:Z.string().nullable(),chainId:Z.string().or(Z.number()),from:Z.string(),gas:Z.string(),hash:Z.string(),input:Z.string().nullable(),maxFeePerGas:Z.string(),maxPriorityFeePerGas:Z.string(),nonce:Z.string(),r:Z.string(),s:Z.string(),to:Z.string(),transactionIndex:Z.string().nullable(),type:Z.string(),v:Z.string(),value:Z.string()});const Yue=Z.object({chainId:Z.string().or(Z.number()),rpcUrl:Z.optional(Z.string())}),Jue=Z.object({email:Z.string().email()}),Xue=Z.object({otp:Z.string()}),Que=Z.object({uri:Z.string(),preferredAccountType:Z.optional(Z.string()),chainId:Z.optional(Z.string().or(Z.number())),siwxMessage:Z.optional(w5),rpcUrl:Z.optional(Z.string())}),ele=Z.object({chainId:Z.optional(Z.string().or(Z.number())),preferredAccountType:Z.optional(Z.string()),socialUri:Z.optional(Z.string()),siwxMessage:Z.optional(w5),rpcUrl:Z.optional(Z.string())}),tle=Z.object({provider:Z.enum(["google","github","apple","facebook","x","discord"])}),rle=Z.object({email:Z.string().email()}),nle=Z.object({otp:Z.string()}),sle=Z.object({otp:Z.string()}),ile=Z.object({themeMode:Z.optional(Z.enum(["light","dark"])),themeVariables:Z.optional(Z.record(Z.string(),Z.string().or(Z.number()))),w3mThemeVariables:Z.optional(Z.record(Z.string(),Z.string()))}),ole=Z.object({metadata:Z.object({name:Z.string(),description:Z.string(),url:Z.string(),icons:Z.array(Z.string())}).optional(),sdkVersion:Z.string().optional(),sdkType:Z.string().optional(),projectId:Z.string()}),ale=Z.object({type:Z.string()}),cle=Z.object({action:Z.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),ule=Z.object({url:Z.string()}),lle=Z.object({userName:Z.string()}),dle=Z.object({email:Z.string().optional().nullable(),address:Z.string(),chainId:Z.string().or(Z.number()),accounts:Z.array(Z.object({address:Z.string(),type:Z.enum([Ss.ACCOUNT_TYPES.EOA,Ss.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:Z.string().optional().nullable(),preferredAccountType:Z.optional(Z.string()),signature:Z.string().optional(),message:Z.string().optional(),siwxMessage:Z.optional(w5)}),fle=Z.object({action:Z.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),hle=Z.object({email:Z.string().email().optional().nullable(),address:Z.string(),chainId:Z.string().or(Z.number()),smartAccountDeployed:Z.optional(Z.boolean()),accounts:Z.array(Z.object({address:Z.string(),type:Z.enum([Ss.ACCOUNT_TYPES.EOA,Ss.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:Z.optional(Z.string()),signature:Z.string().optional(),message:Z.string().optional(),siwxMessage:Z.optional(w5)}),ple=Z.object({uri:Z.string()}),gle=Z.object({isConnected:Z.boolean()}),mle=Z.object({chainId:Z.string().or(Z.number())}),yle=Z.object({chainId:Z.string().or(Z.number())}),ble=Z.object({newEmail:Z.string().email()}),wle=Z.object({smartAccountEnabledNetworks:Z.array(Z.number())});Z.object({address:Z.string(),isDeployed:Z.boolean()});const vle=Z.object({version:Z.string().optional()}),Ele=Z.object({type:Z.string(),address:Z.string()}),_le=Z.any(),Ale=Z.object({method:Z.literal("eth_accounts")}),xle=Z.object({method:Z.literal("eth_blockNumber")}),Cle=Z.object({method:Z.literal("eth_call"),params:Z.array(Z.any())}),Sle=Z.object({method:Z.literal("eth_chainId")}),Ile=Z.object({method:Z.literal("eth_estimateGas"),params:Z.array(Z.any())}),Tle=Z.object({method:Z.literal("eth_feeHistory"),params:Z.array(Z.any())}),Nle=Z.object({method:Z.literal("eth_gasPrice")}),Ple=Z.object({method:Z.literal("eth_getAccount"),params:Z.array(Z.any())}),Rle=Z.object({method:Z.literal("eth_getBalance"),params:Z.array(Z.any())}),Ole=Z.object({method:Z.literal("eth_getBlockByHash"),params:Z.array(Z.any())}),kle=Z.object({method:Z.literal("eth_getBlockByNumber"),params:Z.array(Z.any())}),Ble=Z.object({method:Z.literal("eth_getBlockReceipts"),params:Z.array(Z.any())}),Ule=Z.object({method:Z.literal("eth_getBlockTransactionCountByHash"),params:Z.array(Z.any())}),Mle=Z.object({method:Z.literal("eth_getBlockTransactionCountByNumber"),params:Z.array(Z.any())}),Dle=Z.object({method:Z.literal("eth_getCode"),params:Z.array(Z.any())}),jle=Z.object({method:Z.literal("eth_getFilterChanges"),params:Z.array(Z.any())}),Lle=Z.object({method:Z.literal("eth_getFilterLogs"),params:Z.array(Z.any())}),Fle=Z.object({method:Z.literal("eth_getLogs"),params:Z.array(Z.any())}),$le=Z.object({method:Z.literal("eth_getProof"),params:Z.array(Z.any())}),qle=Z.object({method:Z.literal("eth_getStorageAt"),params:Z.array(Z.any())}),Hle=Z.object({method:Z.literal("eth_getTransactionByBlockHashAndIndex"),params:Z.array(Z.any())}),zle=Z.object({method:Z.literal("eth_getTransactionByBlockNumberAndIndex"),params:Z.array(Z.any())}),Wle=Z.object({method:Z.literal("eth_getTransactionByHash"),params:Z.array(Z.any())}),Vle=Z.object({method:Z.literal("eth_getTransactionCount"),params:Z.array(Z.any())}),Gle=Z.object({method:Z.literal("eth_getTransactionReceipt"),params:Z.array(Z.any())}),Kle=Z.object({method:Z.literal("eth_getUncleCountByBlockHash"),params:Z.array(Z.any())}),Zle=Z.object({method:Z.literal("eth_getUncleCountByBlockNumber"),params:Z.array(Z.any())}),Yle=Z.object({method:Z.literal("eth_maxPriorityFeePerGas")}),Jle=Z.object({method:Z.literal("eth_newBlockFilter")}),Xle=Z.object({method:Z.literal("eth_newFilter"),params:Z.array(Z.any())}),Qle=Z.object({method:Z.literal("eth_newPendingTransactionFilter")}),ede=Z.object({method:Z.literal("eth_sendRawTransaction"),params:Z.array(Z.any())}),tde=Z.object({method:Z.literal("eth_syncing"),params:Z.array(Z.any())}),rde=Z.object({method:Z.literal("eth_uninstallFilter"),params:Z.array(Z.any())}),J9=Z.object({method:Z.literal("personal_sign"),params:Z.array(Z.any())}),nde=Z.object({method:Z.literal("eth_signTypedData_v4"),params:Z.array(Z.any())}),sde=Z.object({method:Z.literal("eth_sendTransaction"),params:Z.array(Z.any())}),ide=Z.object({method:Z.literal("solana_signMessage"),params:Z.object({message:Z.string(),pubkey:Z.string()})}),ode=Z.object({method:Z.literal("solana_signTransaction"),params:Z.object({transaction:Z.string()})}),ade=Z.object({method:Z.literal("solana_signAllTransactions"),params:Z.object({transactions:Z.array(Z.string())})}),cde=Z.object({method:Z.literal("solana_signAndSendTransaction"),params:Z.object({transaction:Z.string(),options:Z.object({skipPreflight:Z.boolean().optional(),preflightCommitment:Z.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:Z.number().optional(),minContextSlot:Z.number().optional()}).optional()})}),ude=Z.object({method:Z.literal("wallet_sendCalls"),params:Z.array(Z.object({chainId:Z.string().or(Z.number()).optional(),from:Z.string().optional(),version:Z.string().optional(),capabilities:Z.any().optional(),calls:Z.array(Z.object({to:Z.string().startsWith("0x"),data:Z.string().startsWith("0x").optional(),value:Z.string().optional()}))}))}),lde=Z.object({method:Z.literal("wallet_getCallsStatus"),params:Z.array(Z.string())}),dde=Z.object({method:Z.literal("wallet_getCapabilities"),params:Z.array(Z.string().or(Z.number()).optional()).optional()}),fde=Z.object({method:Z.literal("wallet_grantPermissions"),params:Z.array(Z.any())}),hde=Z.object({method:Z.literal("wallet_revokePermissions"),params:Z.any()}),pde=Z.object({method:Z.literal("wallet_getAssets"),params:Z.any()}),X9=Z.object({token:Z.string()}),nt=Z.object({id:Z.string().optional()}),l3={appEvent:nt.extend({type:rt("APP_SWITCH_NETWORK"),payload:Yue}).or(nt.extend({type:rt("APP_CONNECT_EMAIL"),payload:Jue})).or(nt.extend({type:rt("APP_CONNECT_DEVICE")})).or(nt.extend({type:rt("APP_CONNECT_OTP"),payload:Xue})).or(nt.extend({type:rt("APP_CONNECT_SOCIAL"),payload:Que})).or(nt.extend({type:rt("APP_GET_FARCASTER_URI")})).or(nt.extend({type:rt("APP_CONNECT_FARCASTER")})).or(nt.extend({type:rt("APP_GET_USER"),payload:Z.optional(ele)})).or(nt.extend({type:rt("APP_GET_SOCIAL_REDIRECT_URI"),payload:tle})).or(nt.extend({type:rt("APP_SIGN_OUT")})).or(nt.extend({type:rt("APP_IS_CONNECTED"),payload:Z.optional(X9)})).or(nt.extend({type:rt("APP_GET_CHAIN_ID")})).or(nt.extend({type:rt("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(nt.extend({type:rt("APP_INIT_SMART_ACCOUNT")})).or(nt.extend({type:rt("APP_SET_PREFERRED_ACCOUNT"),payload:ale})).or(nt.extend({type:rt("APP_RPC_REQUEST"),payload:J9.or(pde).or(Ale).or(xle).or(Cle).or(Sle).or(Ile).or(Tle).or(Nle).or(Ple).or(Rle).or(Ole).or(kle).or(Ble).or(Ule).or(Mle).or(Dle).or(jle).or(Lle).or(Fle).or($le).or(qle).or(Hle).or(zle).or(Wle).or(Vle).or(Gle).or(Kle).or(Zle).or(Yle).or(Jle).or(Xle).or(Qle).or(ede).or(tde).or(rde).or(J9).or(nde).or(sde).or(ide).or(ode).or(ade).or(cde).or(lde).or(ude).or(dde).or(fde).or(hde).and(Z.object({chainId:Z.string().or(Z.number()).optional(),chainNamespace:Z.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:Z.string().optional()}))})).or(nt.extend({type:rt("APP_UPDATE_EMAIL"),payload:rle})).or(nt.extend({type:rt("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:nle})).or(nt.extend({type:rt("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:sle})).or(nt.extend({type:rt("APP_SYNC_THEME"),payload:ile})).or(nt.extend({type:rt("APP_SYNC_DAPP_DATA"),payload:ole})).or(nt.extend({type:rt("APP_RELOAD")})).or(nt.extend({type:rt("APP_RPC_ABORT")})),frameEvent:nt.extend({type:rt("FRAME_SWITCH_NETWORK_ERROR"),payload:os}).or(nt.extend({type:rt("FRAME_SWITCH_NETWORK_SUCCESS"),payload:yle})).or(nt.extend({type:rt("FRAME_CONNECT_EMAIL_SUCCESS"),payload:cle})).or(nt.extend({type:rt("FRAME_CONNECT_EMAIL_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:ule})).or(nt.extend({type:rt("FRAME_GET_FARCASTER_URI_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:lle})).or(nt.extend({type:rt("FRAME_CONNECT_FARCASTER_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_CONNECT_OTP_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_CONNECT_OTP_SUCCESS")})).or(nt.extend({type:rt("FRAME_CONNECT_DEVICE_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_CONNECT_DEVICE_SUCCESS")})).or(nt.extend({type:rt("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:dle})).or(nt.extend({type:rt("FRAME_CONNECT_SOCIAL_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_GET_USER_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_GET_USER_SUCCESS"),payload:hle})).or(nt.extend({type:rt("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:ple})).or(nt.extend({type:rt("FRAME_SIGN_OUT_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_SIGN_OUT_SUCCESS")})).or(nt.extend({type:rt("FRAME_IS_CONNECTED_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_IS_CONNECTED_SUCCESS"),payload:gle})).or(nt.extend({type:rt("FRAME_GET_CHAIN_ID_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_GET_CHAIN_ID_SUCCESS"),payload:mle})).or(nt.extend({type:rt("FRAME_RPC_REQUEST_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_RPC_REQUEST_SUCCESS"),payload:_le})).or(nt.extend({type:rt("FRAME_SESSION_UPDATE"),payload:X9})).or(nt.extend({type:rt("FRAME_UPDATE_EMAIL_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_UPDATE_EMAIL_SUCCESS"),payload:fle})).or(nt.extend({type:rt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(nt.extend({type:rt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:ble})).or(nt.extend({type:rt("FRAME_SYNC_THEME_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_SYNC_THEME_SUCCESS")})).or(nt.extend({type:rt("FRAME_SYNC_DAPP_DATA_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(nt.extend({type:rt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:wle})).or(nt.extend({type:rt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:Ele})).or(nt.extend({type:rt("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_READY"),payload:vle})).or(nt.extend({type:rt("FRAME_RELOAD_ERROR"),payload:os})).or(nt.extend({type:rt("FRAME_RELOAD_SUCCESS")}))};function d3(t,e={}){return typeof e?.type=="string"&&e?.type?.includes(t)}function gde({projectId:t,chainId:e,enableLogger:r,rpcUrl:n=ae.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){const i=new URL(Zce);i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",Jce),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",n);const o=qs.get("dapp_smart_account_version");return o&&(o==="v6"||o==="v7")&&(console.warn(">> AppKit - Forcing smart account version",o),i.searchParams.set("smartAccountVersion",o)),s&&i.searchParams.set("enableCloudAuthAccount","true"),i.toString()}let mde=class{constructor({projectId:e,isAppClient:r=!1,chainId:n="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:i=!1,rpcUrl:o=ae.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const a=document.getElementById("w3m-iframe");this.iframe&&!a&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(a,c,u)=>{function l({data:d}){if(!d3(ct.FRAME_EVENT_KEY,d))return;const f=l3.frameEvent.safeParse(d);if(!f.success){console.warn("W3mFrame: invalid frame event",f.error.message);return}f.data?.id===a&&(c(f.data),window.removeEventListener("message",l))}Qa.isClient&&(window.addEventListener("message",l),u.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:a=>{Qa.isClient&&window.addEventListener("message",({data:c})=>{if(!d3(ct.FRAME_EVENT_KEY,c))return;const u=l3.frameEvent.safeParse(c);u.success?a(u.data):console.warn("W3mFrame: invalid frame event",u.error.message)})},onAppEvent:a=>{Qa.isClient&&window.addEventListener("message",({data:c})=>{if(!d3(ct.APP_EVENT_KEY,c))return;const u=l3.appEvent.safeParse(c);u.success||console.warn("W3mFrame: invalid app event",u.error.message),a(c)})},postAppEvent:a=>{if(Qa.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(a,"*")}},postFrameEvent:a=>{if(Qa.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(a,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),this.rpcUrl=o,r&&(this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),Qa.isClient)){const a=document.createElement("iframe");a.id="w3m-iframe",a.src=gde({projectId:e,chainId:n,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:i}),a.name="w3m-secure-iframe",a.style.position="fixed",a.style.zIndex="999999",a.style.display="none",a.style.border="none",a.style.animationDelay="0s, 50ms",a.style.borderBottomLeftRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",a.style.borderBottomRightRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",this.iframe=a,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent(c=>{c.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,this.frameLoadPromiseResolver?.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(r=>({[r]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${r}&projectId=${this.projectId}`,chainId:r}}));return Object.assign({},...e)}};var bb={exports:{}},f3,Q9;function JY(){if(Q9)return f3;Q9=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}f3=e;function e(r,n,s){var i=s&&s.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=i(r);for(var u=1;u<a;u++)c[u]=i(n[u]);return c.join(" ")}if(typeof r!="string")return r;var l=n.length;if(l===0)return r;for(var d="",f=1-o,p=-1,g=r&&r.length||0,h=0;h<g;){if(r.charCodeAt(h)===37&&h+1<g){switch(p=p>-1?p:0,r.charCodeAt(h+1)){case 100:case 102:if(f>=l||n[f]==null)break;p<h&&(d+=r.slice(p,h)),d+=Number(n[f]),p=h+2,h++;break;case 105:if(f>=l||n[f]==null)break;p<h&&(d+=r.slice(p,h)),d+=Math.floor(Number(n[f])),p=h+2,h++;break;case 79:case 111:case 106:if(f>=l||n[f]===void 0)break;p<h&&(d+=r.slice(p,h));var y=typeof n[f];if(y==="string"){d+="'"+n[f]+"'",p=h+2,h++;break}if(y==="function"){d+=n[f].name||"<anonymous>",p=h+2,h++;break}d+=i(n[f]),p=h+2,h++;break;case 115:if(f>=l)break;p<h&&(d+=r.slice(p,h)),d+=String(n[f]),p=h+2,h++;break;case 37:p<h&&(d+=r.slice(p,h)),d+="%",p=h+2,h++,f--;break}++f}++h}return p===-1?r:(p<g&&(d+=r.slice(p)),d)}return f3}var eU;function yde(){if(eU)return bb.exports;eU=1;const t=JY();bb.exports=l;const e=m().console||{},r={mapHttpRequest:D,mapHttpResponse:D,wrapRequestSerializer:F,wrapResponseSerializer:F,wrapErrorSerializer:F,req:D,res:D,err:T,errWithCause:T};function n(b,w){return b==="silent"?1/0:w.levels.values[b]}const s=Symbol("pino.logFuncs"),i=Symbol("pino.hierarchy"),o={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function a(b,w){const x={logger:w,parent:b[i]};w[i]=x}function c(b,w,x){const M={};w.forEach(k=>{M[k]=x[k]?x[k]:e[k]||e[o[k]||"log"]||I}),b[s]=M}function u(b,w){return Array.isArray(b)?b.filter(function(M){return M!=="!stdSerializers.err"}):b===!0?Object.keys(w):!1}function l(b){b=b||{},b.browser=b.browser||{};const w=b.browser.transmit;if(w&&typeof w.send!="function")throw Error("pino: transmit option must have a send function");const x=b.browser.write||e;b.browser.write&&(b.browser.asObject=!0);const M=b.serializers||{},k=u(b.browser.serialize,M);let j=b.browser.serialize;Array.isArray(b.browser.serialize)&&b.browser.serialize.indexOf("!stdSerializers.err")>-1&&(j=!1);const N=Object.keys(b.customLevels||{}),v=["error","fatal","warn","info","debug","trace"].concat(N);typeof x=="function"&&v.forEach(function(Q){x[Q]=x}),(b.enabled===!1||b.browser.disabled)&&(b.level="silent");const R=b.level||"info",$=Object.create(x);$.log||($.log=I),c($,v,x),a({},$),Object.defineProperty($,"levelVal",{get:H}),Object.defineProperty($,"level",{get:W,set:G});const O={transmit:w,serialize:k,asObject:b.browser.asObject,asObjectBindingsOnly:b.browser.asObjectBindingsOnly,formatters:b.browser.formatters,levels:v,timestamp:P(b),messageKey:b.messageKey||"msg",onChild:b.onChild||I};$.levels=d(b),$.level=R,$.isLevelEnabled=function(Q){return this.levels.values[Q]?this.levels.values[Q]>=this.levels.values[this.level]:!1},$.setMaxListeners=$.getMaxListeners=$.emit=$.addListener=$.on=$.prependListener=$.once=$.prependOnceListener=$.removeListener=$.removeAllListeners=$.listeners=$.listenerCount=$.eventNames=$.write=$.flush=I,$.serializers=M,$._serialize=k,$._stdErrSerialize=j,$.child=function(...Q){return K.call(this,O,...Q)},w&&($._logEvent=_());function H(){return n(this.level,this)}function W(){return this._level}function G(Q){if(Q!=="silent"&&!this.levels.values[Q])throw Error("unknown level "+Q);this._level=Q,g(this,O,$,"error"),g(this,O,$,"fatal"),g(this,O,$,"warn"),g(this,O,$,"info"),g(this,O,$,"debug"),g(this,O,$,"trace"),N.forEach(re=>{g(this,O,$,re)})}function K(Q,re,de){if(!re)throw new Error("missing bindings for child Pino");de=de||{},k&&re.serializers&&(de.serializers=re.serializers);const le=de.serializers;if(k&&le){var se=Object.assign({},M,le),be=b.browser.serialize===!0?Object.keys(se):k;delete re.serializers,S([re],be,se,this._stdErrSerialize)}function We(Be){this._childLevel=(Be._childLevel|0)+1,this.bindings=re,se&&(this.serializers=se,this._serialize=be),w&&(this._logEvent=_([].concat(Be._logEvent.bindings,re)))}We.prototype=this;const Ne=new We(this);return a(this,Ne),Ne.child=function(...Be){return K.call(this,Q,...Be)},Ne.level=de.level||this.level,Q.onChild(Ne),Ne}return $}function d(b){const w=b.customLevels||{},x=Object.assign({},l.levels.values,w),M=Object.assign({},l.levels.labels,f(w));return{values:x,labels:M}}function f(b){const w={};return Object.keys(b).forEach(function(x){w[b[x]]=x}),w}l.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},l.stdSerializers=r,l.stdTimeFunctions=Object.assign({},{nullTime:U,epochTime:L,unixTime:B,isoTime:A});function p(b){const w=[];b.bindings&&w.push(b.bindings);let x=b[i];for(;x.parent;)x=x.parent,x.logger.bindings&&w.push(x.logger.bindings);return w.reverse()}function g(b,w,x,M){if(Object.defineProperty(b,M,{value:n(b.level,x)>n(M,x)?I:x[s][M],writable:!0,enumerable:!0,configurable:!0}),b[M]===I){if(!w.transmit)return;const j=w.transmit.level||b.level,N=n(j,x);if(n(M,x)<N)return}b[M]=y(b,w,x,M);const k=p(b);k.length!==0&&(b[M]=h(k,b[M]))}function h(b,w){return function(){return w.apply(this,[...b,...arguments])}}function y(b,w,x,M){return(function(k){return function(){const N=w.timestamp(),v=new Array(arguments.length),R=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var $=0;$<v.length;$++)v[$]=arguments[$];var O=!1;if(w.serialize&&(S(v,this._serialize,this.serializers,this._stdErrSerialize),O=!0),w.asObject||w.formatters?k.call(R,...E(this,M,v,N,w)):k.apply(R,v),w.transmit){const H=w.transmit.level||b._level,W=n(H,x),G=n(M,x);if(G<W)return;C(this,{ts:N,methodLevel:M,methodValue:G,transmitValue:x.levels.values[w.transmit.level||b._level],send:w.transmit.send,val:n(b._level,x)},v,O)}}})(b[s][M])}function E(b,w,x,M,k){const{level:j,log:N=H=>H}=k.formatters||{},v=x.slice();let R=v[0];const $={};let O=(b._childLevel|0)+1;if(O<1&&(O=1),M&&($.time=M),j){const H=j(w,b.levels.values[w]);Object.assign($,H)}else $.level=b.levels.values[w];if(k.asObjectBindingsOnly){if(R!==null&&typeof R=="object")for(;O--&&typeof v[0]=="object";)Object.assign($,v.shift());return[N($),...v]}else{if(R!==null&&typeof R=="object"){for(;O--&&typeof v[0]=="object";)Object.assign($,v.shift());R=v.length?t(v.shift(),v):void 0}else typeof R=="string"&&(R=t(v.shift(),v));return R!==void 0&&($[k.messageKey]=R),[N($)]}}function S(b,w,x,M){for(const k in b)if(M&&b[k]instanceof Error)b[k]=l.stdSerializers.err(b[k]);else if(typeof b[k]=="object"&&!Array.isArray(b[k])&&w)for(const j in b[k])w.indexOf(j)>-1&&j in x&&(b[k][j]=x[j](b[k][j]))}function C(b,w,x,M=!1){const k=w.send,j=w.ts,N=w.methodLevel,v=w.methodValue,R=w.val,$=b._logEvent.bindings;M||S(x,b._serialize||Object.keys(b.serializers),b.serializers,b._stdErrSerialize===void 0?!0:b._stdErrSerialize),b._logEvent.ts=j,b._logEvent.messages=x.filter(function(O){return $.indexOf(O)===-1}),b._logEvent.level.label=N,b._logEvent.level.value=v,k(N,b._logEvent,R),b._logEvent=_($)}function _(b){return{ts:0,messages:[],bindings:b||[],level:{label:"",value:0}}}function T(b){const w={type:b.constructor.name,msg:b.message,stack:b.stack};for(const x in b)w[x]===void 0&&(w[x]=b[x]);return w}function P(b){return typeof b.timestamp=="function"?b.timestamp:b.timestamp===!1?U:L}function D(){return{}}function F(b){return b}function I(){}function U(){return!1}function L(){return Date.now()}function B(){return Math.round(Date.now()/1e3)}function A(){return new Date(Date.now()).toISOString()}function m(){function b(w){return typeof w<"u"&&w}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return b(self)||b(window)||b(this)||{}}}return bb.exports.default=l,bb.exports.pino=l,bb.exports}var vm=yde();const XY=Ea(vm),bde=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),wde=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Xd(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return wde(t)}catch{return t}}function Lc(t){return typeof t=="string"?t:bde(t)||""}const vde={level:"info"},v5="custom_context",_4=1e3*1024;var Ede=Object.defineProperty,_de=(t,e,r)=>e in t?Ede(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,sh=(t,e,r)=>_de(t,typeof e!="symbol"?e+"":e,r);let Ade=class{constructor(e){sh(this,"nodeValue"),sh(this,"sizeInBytes"),sh(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},tU=class{constructor(e){sh(this,"lengthInNodes"),sh(this,"sizeInBytes"),sh(this,"head"),sh(this,"tail"),sh(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new Ade(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}};var xde=Object.defineProperty,Cde=(t,e,r)=>e in t?xde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,U_=(t,e,r)=>Cde(t,typeof e!="symbol"?e+"":e,r);let QY=class{constructor(e,r=_4){U_(this,"logs"),U_(this,"level"),U_(this,"levelValue"),U_(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=vm.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new tU(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===vm.levels.values.error?console.error(e):r===vm.levels.values.warn?console.warn(e):r===vm.levels.values.debug?console.debug(e):r===vm.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Lc({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new tU(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(Lc({extraMetadata:e})),new Blob(r,{type:"application/json"})}};var Sde=Object.defineProperty,Ide=(t,e,r)=>e in t?Sde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tde=(t,e,r)=>Ide(t,e+"",r);let Nde=class{constructor(e,r=_4){Tde(this,"baseChunkLogger"),this.baseChunkLogger=new QY(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}};var Pde=Object.defineProperty,Rde=(t,e,r)=>e in t?Pde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ode=(t,e,r)=>Rde(t,e+"",r);let kde=class{constructor(e,r=_4){Ode(this,"baseChunkLogger"),this.baseChunkLogger=new QY(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Bde=Object.defineProperty,Ude=Object.defineProperties,Mde=Object.getOwnPropertyDescriptors,rU=Object.getOwnPropertySymbols,Dde=Object.prototype.hasOwnProperty,jde=Object.prototype.propertyIsEnumerable,nU=(t,e,r)=>e in t?Bde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,YI=(t,e)=>{for(var r in e||(e={}))Dde.call(e,r)&&nU(t,r,e[r]);if(rU)for(var r of rU(e))jde.call(e,r)&&nU(t,r,e[r]);return t},JI=(t,e)=>Ude(t,Mde(e));function A4(t){return JI(YI({},t),{level:t?.level||vde.level})}function Lde(t,e,r=v5){return t[r]=e,t}function _a(t,e=v5){return t[e]||""}function Fde(t,e,r=v5){const n=_a(t,r);return n.trim()?`${n}/${e}`:e}function Aa(t,e,r=v5){const n=Fde(t,e,r),s=t.child({context:n});return Lde(s,n,r)}function $de(t){var e,r;const n=new Nde((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:XY(JI(YI({},t.opts),{level:"trace",browser:JI(YI({},(r=t.opts)==null?void 0:r.browser),{write:s=>n.write(s)})})),chunkLoggerController:n}}function qde(t){var e;const r=new kde((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:XY(JI(YI({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function E5(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?$de(t):qde(t)}let Hde=class{constructor(e){const r=A4({level:Yce}),{logger:n,chunkLoggerController:s}=E5({opts:r});this.logger=Aa(n,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},zde=class{constructor({projectId:e,chainId:r,enableLogger:n=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:c,metadata:u,sdkVersion:l,sdkType:d}){this.openRpcRequests=new Map,this.isInitialized=!1,n&&(this.w3mLogger=new Hde(e)),this.abortController=i,this.getActiveCaipNetwork=o,this.getCaipNetworks=a;const f=this.getRpcUrl(r);this.projectId=e,this.sdkVersion=l,this.sdkType=d,this.metadata=u,this.w3mFrame=new mde({projectId:e,isAppClient:!0,chainId:r,enableLogger:n,rpcUrl:f,enableCloudAuthAccount:c}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(r=>{r.type===ct.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,await this.syncDappData({metadata:this.metadata,projectId:this.projectId,sdkVersion:this.sdkVersion,sdkType:this.sdkType}),await this.getSmartAccountEnabledNetworks(),this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!qs.get(ct.EMAIL_LOGIN_USED_KEY)}getEmail(){return qs.get(ct.EMAIL)}getUsername(){return qs.get(ct.SOCIAL_USERNAME)}async reload(){try{await this.appEvent({type:ct.APP_RELOAD})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error reloading iframe"),e}}async connectEmail(e){try{Qa.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:ct.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){try{return this.appEvent({type:ct.APP_CONNECT_DEVICE})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting device"),e}}async connectOtp(e){try{return this.appEvent({type:ct.APP_CONNECT_OTP,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};const e=await this.appEvent({type:ct.APP_IS_CONNECTED});return e?.isConnected||this.deleteAuthLoginCache(),e}catch(e){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:e},"Error checking connection"),e}}async getChainId(){try{const e=await this.appEvent({type:ct.APP_GET_CHAIN_ID});return this.setLastUsedChainId(e.chainId),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting chain id"),e}}async getSocialRedirectUri(e){try{return await this.init(),this.appEvent({type:ct.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){try{const r=await this.appEvent({type:ct.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){try{return this.appEvent({type:ct.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){try{const r=await this.appEvent({type:ct.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){try{return this.appEvent({type:ct.APP_SYNC_THEME,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){try{return this.appEvent({type:ct.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){try{const e=await this.appEvent({type:ct.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(e.smartAccountEnabledNetworks),e}catch(e){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:e},"Error getting smart account enabled networks"),e}}async setPreferredAccount(e){try{return this.appEvent({type:ct.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){if(e?.socialUri)try{await this.init();const r=this.getRpcUrl(e.chainId),n=await this.appEvent({type:ct.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:r}});return n.userName&&this.setSocialLoginSuccess(n.userName),this.setLoginSuccess(n.email),this.setLastUsedChainId(n.chainId),this.user=n,n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting social"),r}else try{const r=e?.chainId||this.getLastUsedChainId()||1,n=await this.getUser({chainId:r,preferredAccountType:e?.preferredAccountType,siwxMessage:e?.siwxMessage,rpcUrl:this.getRpcUrl(r)});return this.setLoginSuccess(n.email),this.setLastUsedChainId(n.chainId),this.user=n,n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting"),r}}async getUser(e){try{await this.init();const r=e?.chainId||this.getLastUsedChainId()||1,n=await this.appEvent({type:ct.APP_GET_USER,payload:{...e,chainId:r,rpcUrl:this.getRpcUrl(r)}});return this.user=n,n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:r,preferredAccountType:n}){try{await this.init();const s=this.getRpcUrl(r),i=await this.appEvent({type:ct.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:r,rpcUrl:s,preferredAccountType:n}});return i.userName&&this.setSocialLoginSuccess(i.userName),i}catch(s){throw this.w3mLogger?.logger.error({error:s},"Error connecting social"),s}}async getFarcasterUri(){try{return await this.init(),await this.appEvent({type:ct.APP_GET_FARCASTER_URI})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting farcaster uri"),e}}async connectFarcaster(){try{const e=await this.appEvent({type:ct.APP_CONNECT_FARCASTER});return e.userName&&this.setSocialLoginSuccess(e.userName),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting farcaster"),e}}async switchNetwork({chainId:e}){try{const r=this.getRpcUrl(e),n=await this.appEvent({type:ct.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(n.chainId),n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error switching network"),r}}async disconnect(){try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const n=setTimeout(()=>{r()},3e3);await this.appEvent({type:ct.APP_SIGN_OUT}),clearTimeout(n),r()})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error disconnecting"),e}}async request(e){const r=e;try{if(Ss.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const n=e.chainNamespace||"eip155",s=this.getActiveCaipNetwork(n)?.id;r.chainNamespace=n,r.chainId=s,r.rpcUrl=this.getRpcUrl(s),this.rpcRequestHandler?.(e);const i=await this.appEvent({type:ct.APP_RPC_REQUEST,payload:r});return this.rpcSuccessHandler?.(i,r),i}catch(n){throw this.rpcErrorHandler?.(n,r),this.w3mLogger?.logger.error({error:n},"Error requesting"),n}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ct.FRAME_IS_CONNECTED_SUCCESS&&r.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ct.FRAME_IS_CONNECTED_ERROR&&e(),r.type===ct.FRAME_IS_CONNECTED_SUCCESS&&!r.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ct.FRAME_GET_USER_SUCCESS&&e(r.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ct.FRAME_CONNECT_SOCIAL_SUCCESS&&e(r.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ct.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(r.payload):r.type===ct.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ss.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){try{await Promise.all(Array.from(this.openRpcRequests.values()).map(async({abortController:e,method:r})=>{Ss.SAFE_RPC_METHODS.includes(r)||e.abort(),await this.appEvent({type:ct.APP_RPC_ABORT})})),this.openRpcRequests.clear()}catch(e){this.w3mLogger?.logger.error({error:e},"Error aborting RPC request")}}async appEvent(e){let r,n;function s(c){return c.replace("@w3m-app/","")}const i=[ct.APP_SYNC_DAPP_DATA,ct.APP_SYNC_THEME,ct.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(n=setTimeout(()=>{this.onTimeout?.("iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(n),[ct.APP_CONNECT_EMAIL,ct.APP_CONNECT_DEVICE,ct.APP_CONNECT_OTP,ct.APP_CONNECT_SOCIAL,ct.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(r=setTimeout(()=>{this.onTimeout?.("iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,u)=>{const l=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:e,id:l},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:l});const d=new AbortController;if(o==="RPC_REQUEST"){const p=e;this.openRpcRequests.set(l,{...p.payload,abortController:d})}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?u(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&u(new Error("Something went wrong"))});const f=(p,g)=>{p.id===l&&(g?.logger.info?.({framEvent:p,id:l},"Received frame response"),this.openRpcRequests.delete(p.id),p.type===`@w3m-frame/${o}_SUCCESS`?(r&&clearTimeout(r),n&&clearTimeout(n),"payload"in p&&c(p.payload),c(void 0)):p.type===`@w3m-frame/${o}_ERROR`&&(r&&clearTimeout(r),n&&clearTimeout(n),"payload"in p&&u(new Error(p.payload?.message||"An error occurred")),u(new Error("An error occurred"))))};this.w3mFrame.events.registerFrameEventHandler(l,p=>f(p,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){qs.set(ct.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){qs.set(ct.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&qs.set(ct.EMAIL,e),qs.set(ct.EMAIL_LOGIN_USED_KEY,"true"),qs.delete(ct.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){qs.delete(ct.EMAIL_LOGIN_USED_KEY),qs.delete(ct.EMAIL),qs.delete(ct.LAST_USED_CHAIN_KEY),qs.delete(ct.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&qs.set(ct.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=qs.get(ct.LAST_USED_CHAIN_KEY)??void 0,r=Number(e);return isNaN(r)?e:r}persistSmartAccountEnabledNetworks(e){qs.set(ct.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){let r=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?r=xs.parseCaipNetworkId(e)?.chainNamespace:Number.isInteger(Number(e))?r="eip155":r="solana");const n=this.getCaipNetworks(r);return(e?n.find(i=>String(i.id)===String(e)||i.caipNetworkId===e):n[0])?.rpcUrls.default.http?.[0]}};function eJ(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function sU(t){return eJ(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const tJ="2.40.2";let h3={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${tJ}`},Fn=class QR extends Error{constructor(e,r={}){const n=r.cause instanceof QR?r.cause.details:r.cause?.message?r.cause.message:r.details,s=r.cause instanceof QR&&r.cause.docsPath||r.docsPath,i=h3.getDocsUrl?.({...r,docsPath:s}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...h3.version?[`Version: ${h3.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=tJ}walk(e){return rJ(this,e)}};function rJ(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?rJ(t.cause,e):e?null:t}let dQe=class extends Fn{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}},nJ=class extends Fn{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}};class pQe extends Fn{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${r} ${n} long, but is ${e} ${n} long.`,{name:"InvalidBytesLengthError"})}}function Dy(t,{dir:e,size:r=32}={}){return typeof t=="string"?Wde(t,{dir:e,size:r}):Vde(t,{dir:e,size:r})}function Wde(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new nJ({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function Vde(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new nJ({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let s=0;s<r;s++){const i=e==="right";n[i?s:r-s-1]=t[i?s:t.length-s-1]}return n}let Gde=class extends Fn{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}};class mQe extends Fn{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Kde extends Fn{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let Zde=class extends Fn{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function iI(t,{dir:e="left"}={}){let r=typeof t=="string"?t.replace("0x",""):t,n=0;for(let s=0;s<r.length-1&&r[e==="left"?s:r.length-s-1].toString()==="0";s++)n++;return r=e==="left"?r.slice(n):r.slice(0,r.length-n),typeof t=="string"?(r.length===1&&e==="right"&&(r=`${r}0`),`0x${r.length%2===1?`0${r}`:r}`):r}function Bh(t,{size:e}){if(sU(t)>e)throw new Zde({givenSize:sU(t),maxSize:e})}function Yde(t,e={}){const{signed:r}=e;e.size&&Bh(t,{size:e.size});const n=BigInt(t);if(!r)return n;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return n<=i?n:n-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function bQe(t,e={}){let r=t;if(e.size&&(Bh(r,{size:e.size}),r=iI(r)),iI(r)==="0x00")return!1;if(iI(r)==="0x01")return!0;throw new Kde(r)}function wQe(t,e={}){return Number(Yde(t,e))}function vQe(t,e={}){let r=x4(t);return e.size&&(Bh(r,{size:e.size}),r=iI(r,{dir:"right"})),new TextDecoder().decode(r)}const Jde=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function XI(t,e={}){return typeof t=="number"||typeof t=="bigint"?iJ(t,e):typeof t=="string"?oJ(t,e):typeof t=="boolean"?Xde(t,e):sJ(t,e)}function Xde(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(Bh(r,{size:e.size}),Dy(r,{size:e.size})):r}function sJ(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=Jde[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(Bh(n,{size:e.size}),Dy(n,{dir:"right",size:e.size})):n}function iJ(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new Gde({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?Dy(a,{size:n}):a}const Qde=new TextEncoder;function oJ(t,e={}){const r=Qde.encode(t);return sJ(r,e)}const efe=new TextEncoder;function EQe(t,e={}){return typeof t=="number"||typeof t=="bigint"?rfe(t,e):typeof t=="boolean"?tfe(t,e):eJ(t)?x4(t,e):nfe(t,e)}function tfe(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(Bh(r,{size:e.size}),Dy(r,{size:e.size})):r}const Wl={zero:48,nine:57,A:65,F:70,a:97,f:102};function iU(t){if(t>=Wl.zero&&t<=Wl.nine)return t-Wl.zero;if(t>=Wl.A&&t<=Wl.F)return t-(Wl.A-10);if(t>=Wl.a&&t<=Wl.f)return t-(Wl.a-10)}function x4(t,e={}){let r=t;e.size&&(Bh(r,{size:e.size}),r=Dy(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const s=n.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=iU(n.charCodeAt(a++)),u=iU(n.charCodeAt(a++));if(c===void 0||u===void 0)throw new Fn(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);i[o]=c*16+u}return i}function rfe(t,e){const r=iJ(t,e);return x4(r)}function nfe(t,e={}){const r=efe.encode(t);return typeof e.size=="number"?(Bh(r,{size:e.size}),Dy(r,{dir:"right",size:e.size})):r}let sfe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const d0=(t,e,r)=>JSON.stringify(t,(n,s)=>typeof s=="bigint"?s.toString():s,r),AQe={gwei:9,wei:18},ife={ether:-9,wei:9};function _5(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[s,i]=[r.slice(0,r.length-e),r.slice(r.length-e)];return i=i.replace(/(0+)$/,""),`${n?"-":""}${s||"0"}${i?`.${i}`:""}`}function QI(t,e="wei"){return _5(t,ife[e])}const xQe=t=>t,C4=t=>t;class v1 extends Fn{constructor({body:e,cause:r,details:n,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[i&&`Status: ${i}`,`URL: ${C4(o)}`,e&&`Request body: ${d0(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class aJ extends Fn{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${C4(n)}`,`Request body: ${d0(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data,this.url=n}}class oU extends Fn{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${C4(r)}`,`Request body: ${d0(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=r}}const ofe=-1;class xa extends Fn{constructor(e,{code:r,docsPath:n,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:s||e?.metaMessages,name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof aJ?e.code:r??ofe}}class ic extends xa{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class dv extends xa{constructor(e){super(e,{code:dv.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(dv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class fv extends xa{constructor(e){super(e,{code:fv.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(fv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class hv extends xa{constructor(e,{method:r}={}){super(e,{code:hv.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(hv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class pv extends xa{constructor(e){super(e,{code:pv.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(pv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class ly extends xa{constructor(e){super(e,{code:ly.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(ly,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class gv extends xa{constructor(e){super(e,{code:gv.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(gv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class mv extends xa{constructor(e){super(e,{code:mv.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(mv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class yv extends xa{constructor(e){super(e,{code:yv.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(yv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class dy extends xa{constructor(e){super(e,{code:dy.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(dy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Zp extends xa{constructor(e,{method:r}={}){super(e,{code:Zp.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(Zp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class fy extends xa{constructor(e){super(e,{code:fy.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(fy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class bv extends xa{constructor(e){super(e,{code:bv.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(bv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class f0 extends ic{constructor(e){super(e,{code:f0.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(f0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class wv extends ic{constructor(e){super(e,{code:wv.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(wv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class vv extends ic{constructor(e,{method:r}={}){super(e,{code:vv.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(vv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Ev extends ic{constructor(e){super(e,{code:Ev.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Ev,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class _v extends ic{constructor(e){super(e,{code:_v.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(_v,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Av extends ic{constructor(e){super(e,{code:Av.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Av,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class xv extends ic{constructor(e){super(e,{code:xv.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(xv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Cv extends ic{constructor(e){super(e,{code:Cv.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Cv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Sv extends ic{constructor(e){super(e,{code:Sv.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Sv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Iv extends ic{constructor(e){super(e,{code:Iv.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Iv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Tv extends ic{constructor(e){super(e,{code:Tv.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Tv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Nv extends ic{constructor(e){super(e,{code:Nv.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Nv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Pv extends ic{constructor(e){super(e,{code:Pv.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Pv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class afe extends xa{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class S4 extends Fn{constructor({cause:e,message:r}={}){const n=r?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(S4,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(S4,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class cfe extends Fn{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${QI(r)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(cfe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class ufe extends Fn{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${QI(r)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(ufe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class lfe extends Fn{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(lfe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class dfe extends Fn{constructor({cause:e,nonce:r}={}){super([`Nonce provided for the transaction ${r?`(${r}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(dfe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class ffe extends Fn{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(ffe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class hfe extends Fn{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(hfe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class pfe extends Fn{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(pfe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class gfe extends Fn{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(gfe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class mfe extends Fn{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(mfe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class yfe extends Fn{constructor({cause:e,maxPriorityFeePerGas:r,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${r?` = ${QI(r)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${QI(n)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(yfe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class CQe extends Fn{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}const SQe=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],IQe=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],cJ=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],TQe=[...cJ,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],NQe=[...cJ,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],PQe=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],RQe=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],OQe=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],kQe=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],M_=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}];function bfe(){let t=()=>{},e=()=>{};return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}}const p3=new Map;function wfe({fn:t,id:e,shouldSplitBatch:r,wait:n=0,sort:s}){const i=async()=>{const l=c();o();const d=l.map(({args:f})=>f);d.length!==0&&t(d).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let p=0;p<l.length;p++){const{resolve:g}=l[p];g?.([f[p],f])}}).catch(f=>{for(let p=0;p<l.length;p++){const{reject:g}=l[p];g?.(f)}})},o=()=>p3.delete(e),a=()=>c().map(({args:l})=>l),c=()=>p3.get(e)||[],u=l=>p3.set(e,[...c(),l]);return{flush:o,async schedule(l){const{promise:d,resolve:f,reject:p}=bfe();return r?.([...a(),l])&&i(),c().length>0?(u({args:l,resolve:f,reject:p}),d):(u({args:l,resolve:f,reject:p}),setTimeout(i,n),d)}}}async function uJ(t){return new Promise(e=>setTimeout(e,t))}function vfe(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof e=="function"?e({count:a,error:u}):e;l&&await uJ(l),o({count:a+1})};try{const u=await t();s(u)}catch(u){if(a<r&&await n({count:a,error:u}))return c({error:u});i(u)}};o()})}const e8=256;let D_=e8,j_;function Efe(t=11){if(!j_||D_+t>e8*2){j_="",D_=0;for(let e=0;e<e8;e++)j_+=(256+Math.random()*256|0).toString(16).substring(1)}return j_.substring(D_,D_+++t)}const L_=new sfe(8192);function _fe(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(L_.get(r))return L_.get(r);const n=t().finally(()=>L_.delete(r));return L_.set(r,n),n}function Afe(t,e={}){return async(r,n={})=>{const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...n},{method:u}=r;if(i?.exclude?.includes(u))throw new Zp(new Error("method not supported"),{method:u});if(i?.include&&!i.include.includes(u))throw new Zp(new Error("method not supported"),{method:u});const l=s?oJ(`${c}.${d0(r)}`):void 0;return _fe(()=>vfe(async()=>{try{return await t(r)}catch(d){const f=d;switch(f.code){case dv.code:throw new dv(f);case fv.code:throw new fv(f);case hv.code:throw new hv(f,{method:r.method});case pv.code:throw new pv(f);case ly.code:throw new ly(f);case gv.code:throw new gv(f);case mv.code:throw new mv(f);case yv.code:throw new yv(f);case dy.code:throw new dy(f);case Zp.code:throw new Zp(f,{method:r.method});case fy.code:throw new fy(f);case bv.code:throw new bv(f);case f0.code:throw new f0(f);case wv.code:throw new wv(f);case vv.code:throw new vv(f);case Ev.code:throw new Ev(f);case _v.code:throw new _v(f);case Av.code:throw new Av(f);case xv.code:throw new xv(f);case Cv.code:throw new Cv(f);case Sv.code:throw new Sv(f);case Iv.code:throw new Iv(f);case Tv.code:throw new Tv(f);case Nv.code:throw new Nv(f);case Pv.code:throw new Pv(f);case 5e3:throw new f0(f);default:throw d instanceof Fn?d:new afe(f)}}},{delay:({count:d,error:f})=>{if(f&&f instanceof v1){const p=f?.headers?.get("Retry-After");if(p?.match(/\d/))return Number.parseInt(p,10)*1e3}return~~(1<<d)*o},retryCount:a,shouldRetry:({error:d})=>xfe(d)}),{enabled:s,id:l})}}function xfe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===fy.code||t.code===ly.code:t instanceof v1&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function xE(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function Cfe(t,{errorInstance:e=new Error("timed out"),timeout:r,signal:n}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;r>0&&(o=setTimeout(()=>{n&&a.abort()},r)),s(await t({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function Sfe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const aU=Sfe();function Ife(t,e={}){return{async request(r){const{body:n,fetchFn:s=e.fetchFn??fetch,onRequest:i=e.onRequest,onResponse:o=e.onResponse,timeout:a=e.timeout??1e4}=r,c={...e.fetchOptions??{},...r.fetchOptions??{}},{headers:u,method:l,signal:d}=c;try{const f=await Cfe(async({signal:g})=>{const h={...c,body:Array.isArray(n)?d0(n.map(C=>({jsonrpc:"2.0",id:C.id??aU.take(),...C}))):d0({jsonrpc:"2.0",id:n.id??aU.take(),...n}),headers:{"Content-Type":"application/json",...u},method:l||"POST",signal:d||(a>0?g:null)},y=new Request(t,h),E=await i?.(y,h)??{...h,url:t};return await s(E.url??t,E)},{errorInstance:new oU({body:n,url:t}),timeout:a,signal:!0});o&&await o(f);let p;if(f.headers.get("Content-Type")?.startsWith("application/json"))p=await f.json();else{p=await f.text();try{p=JSON.parse(p||"{}")}catch(g){if(f.ok)throw g;p={error:p}}}if(!f.ok)throw new v1({body:n,details:d0(p.error)||f.statusText,headers:f.headers,status:f.status,url:t});return p}catch(f){throw f instanceof v1||f instanceof oU?f:new v1({body:n,cause:f,url:t})}}}}function lJ({key:t,methods:e,name:r,request:n,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const u=Efe();return{config:{key:t,methods:e,name:r,request:n,retryCount:s,retryDelay:i,timeout:o,type:a},request:Afe(n,{methods:e,retryCount:s,retryDelay:i,uid:u}),value:c}}function e6(t,e={}){const{key:r="fallback",name:n="Fallback",rank:s=!1,shouldThrow:i=Tfe,retryCount:o,retryDelay:a}=e;return(({chain:c,pollingInterval:u=4e3,timeout:l,...d})=>{let f=t,p=()=>{};const g=lJ({key:r,name:n,async request({method:h,params:y}){let E;const S=async(C=0)=>{const _=f[C]({...d,chain:c,retryCount:0,timeout:l});try{const T=await _.request({method:h,params:y});return p({method:h,params:y,response:T,transport:_,status:"success"}),T}catch(T){if(p({error:T,method:h,params:y,transport:_,status:"error"}),i(T)||C===f.length-1||(E??=f.slice(C+1).some(P=>{const{include:D,exclude:F}=P({chain:c}).config.methods||{};return D?D.includes(h):F?!F.includes(h):!0}),!E))throw T;return S(C+1)}};return S()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:h=>p=h,transports:f.map(h=>h({chain:c,retryCount:0}))});if(s){const h=typeof s=="object"?s:{};Nfe({chain:c,interval:h.interval??u,onTransports:y=>f=y,ping:h.ping,sampleCount:h.sampleCount,timeout:h.timeout,transports:f,weights:h.weights})}return g})}function Tfe(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===dy.code||t.code===f0.code||S4.nodeMessage.test(t.message)||t.code===5e3))}function Nfe({chain:t,interval:e=4e3,onTransports:r,ping:n,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:u=.3}=a,l=[],d=async()=>{const f=await Promise.all(o.map(async h=>{const y=h({chain:t,retryCount:0,timeout:i}),E=Date.now();let S,C;try{await(n?n({transport:y}):y.request({method:"net_listening"})),C=1}catch{C=0}finally{S=Date.now()}return{latency:S-E,success:C}}));l.push(f),l.length>s&&l.shift();const p=Math.max(...l.map(h=>Math.max(...h.map(({latency:y})=>y)))),g=o.map((h,y)=>{const E=l.map(P=>P[y].latency),C=1-E.reduce((P,D)=>P+D,0)/E.length/p,_=l.map(P=>P[y].success),T=_.reduce((P,D)=>P+D,0)/_.length;return T===0?[0,y]:[u*C+c*T,y]}).sort((h,y)=>y[0]-h[0]);r(g.map(([,h])=>o[h])),await uJ(e),d()};d()}class Pfe extends Fn{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function dh(t,e={}){const{batch:r,fetchFn:n,fetchOptions:s,key:i="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:l,raw:d}=e;return({chain:f,retryCount:p,timeout:g})=>{const{batchSize:h=1e3,wait:y=0}=typeof r=="object"?r:{},E=e.retryCount??p,S=g??e.timeout??1e4,C=t||f?.rpcUrls.default.http[0];if(!C)throw new Pfe;const _=Ife(C,{fetchFn:n,fetchOptions:s,onRequest:c,onResponse:u,timeout:S});return lJ({key:i,methods:o,name:a,async request({method:T,params:P}){const D={method:T,params:P},{schedule:F}=wfe({id:C,wait:y,shouldSplitBatch(B){return B.length>h},fn:B=>_.request({body:B}),sort:(B,A)=>B.id-A.id}),I=async B=>r?F(B):[await _.request({body:B})],[{error:U,result:L}]=await I(D);if(d)return{error:U,result:L};if(U)throw new aJ({body:D,error:U,url:C});return L},retryCount:E,retryDelay:l,timeout:S,type:"http"},{fetchOptions:s,url:C})}}async function wb(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let jy=class{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...s}){const i=this.createUrl(s);return(await wb(i,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const s=this.createUrl(n);return(await wb(s,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await wb(i,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await wb(i,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await wb(i,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([s,i])=>{i&&n.searchParams.append(s,i)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}sendBeacon({body:e,...r}){const n=this.createUrl(r);return navigator.sendBeacon(n.toString(),e?JSON.stringify(e):void 0)}};const t8={getFeatureValue(t,e){const r=e?.[t];return r===void 0?wr.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;let e=t;return ke.isTelegram()&&(ke.isIos()&&(e=e.filter(r=>r!=="google")),ke.isMac()&&(e=e.filter(r=>r!=="x")),ke.isAndroid()&&(e=e.filter(r=>!["facebook","x"].includes(r)))),ke.isMobile()&&(e=e.filter(r=>r!=="facebook")),e},isSocialsEnabled(){return Array.isArray(we.state.features?.socials)&&we.state.features?.socials.length>0||Array.isArray(we.state.remoteFeatures?.socials)&&we.state.remoteFeatures?.socials.length>0},isEmailEnabled(){return!!(we.state.features?.email||we.state.remoteFeatures?.email)}},yt=Dn({features:wr.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:wr.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{},enableMobileFullScreen:!1,coinbasePreference:"all"}),we={state:yt,subscribeKey(t,e){return ui(yt,t,e)},setOptions(t){Object.assign(yt,t)},setRemoteFeatures(t){if(!t)return;const e={...yt.remoteFeatures,...t};yt.remoteFeatures=e,yt.remoteFeatures?.socials&&(yt.remoteFeatures.socials=t8.filterSocialsByPlatform(yt.remoteFeatures.socials)),yt.features?.pay&&(yt.remoteFeatures.email=!1,yt.remoteFeatures.socials=!1)},setFeatures(t){if(!t)return;yt.features||(yt.features=wr.DEFAULT_FEATURES);const e={...yt.features,...t};yt.features=e,yt.features?.pay&&yt.remoteFeatures&&(yt.remoteFeatures.email=!1,yt.remoteFeatures.socials=!1)},setProjectId(t){yt.projectId=t},setCustomRpcUrls(t){yt.customRpcUrls=t},setAllWallets(t){yt.allWallets=t},setIncludeWalletIds(t){yt.includeWalletIds=t},setExcludeWalletIds(t){yt.excludeWalletIds=t},setFeaturedWalletIds(t){yt.featuredWalletIds=t},setTokens(t){yt.tokens=t},setTermsConditionsUrl(t){yt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){yt.privacyPolicyUrl=t},setCustomWallets(t){yt.customWallets=t},setIsSiweEnabled(t){yt.isSiweEnabled=t},setIsUniversalProvider(t){yt.isUniversalProvider=t},setSdkVersion(t){yt.sdkVersion=t},setMetadata(t){yt.metadata=t},setDisableAppend(t){yt.disableAppend=t},setEIP6963Enabled(t){yt.enableEIP6963=t},setDebug(t){yt.debug=t},setEnableWalletGuide(t){yt.enableWalletGuide=t},setEnableAuthLogger(t){yt.enableAuthLogger=t},setEnableWallets(t){yt.enableWallets=t},setPreferUniversalLinks(t){yt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,r]of Object.entries(wr.SIWX_DEFAULTS))t[e]??=r;yt.siwx=t},setConnectMethodsOrder(t){yt.features={...yt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){yt.features={...yt.features,walletFeaturesOrder:t}},setSocialsOrder(t){yt.remoteFeatures={...yt.remoteFeatures,socials:t}},setCollapseWallets(t){yt.features={...yt.features,collapseWallets:t}},setEnableEmbedded(t){yt.enableEmbedded=t},setAllowUnsupportedChain(t){yt.allowUnsupportedChain=t},setManualWCControl(t){yt.manualWCControl=t},setEnableNetworkSwitch(t){yt.enableNetworkSwitch=t},setEnableMobileFullScreen(t){yt.enableMobileFullScreen=ke.isMobile()&&t},setEnableReconnect(t){yt.enableReconnect=t},setCoinbasePreference(t){yt.coinbasePreference=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(yt.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){yt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return yt.universalProviderConfigOverride},getSnapshot(){return Z1(yt)}},Mp=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),js=Dn({...Mp}),Rfe={state:js,subscribeKey(t,e){return ui(js,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ke.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){js.message=Mp.message,js.variant=Mp.variant,js.svg=Mp.svg,js.open=Mp.open,js.autoClose=Mp.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=Mp.autoClose}){js.open?(js.open=!1,setTimeout(()=>{js.message=t,js.variant=r,js.svg=e,js.open=!0,js.autoClose=n},150)):(js.message=t,js.variant=r,js.svg=e,js.open=!0,js.autoClose=n)}},ml=Rfe,Ofe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},dJ=ke.getBlockchainApiUrl(),Eo=Dn({clientId:null,api:new jy({baseUrl:dJ,clientId:null}),supportedChains:{http:[],ws:[]}}),kt={state:Eo,async get(t){const{st:e,sv:r}=kt.getSdkProperties(),n=we.state.projectId,s={...t.params||{},st:e,sv:r,projectId:n};return Eo.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=we.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Eo.supportedChains.http.length||await kt.getSupportedNetworks()}catch{return!1}return Eo.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await kt.get({path:"v1/supported-chains"});return Eo.supportedChains=t,t}catch{return Eo.supportedChains}},async fetchIdentity({address:t}){const e=Ae.getIdentityFromCacheForAddress(t);if(e)return e;const r=await kt.get({path:`/v1/identity/${t}`,params:{sender:J.state.activeCaipAddress?ke.getPlainAddress(J.state.activeCaipAddress):void 0}});return Ae.updateIdentityCache({address:t,identity:r,timestamp:Date.now()}),r},async fetchTransactions({account:t,cursor:e,signal:r,cache:n,chainId:s}){if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))return{data:[],next:void 0};const o=Ae.getTransactionsCacheForAddress({address:t,chainId:s});if(o)return o;const a=await kt.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:r,cache:n});return Ae.updateTransactionsCache({address:t,chainId:s,timestamp:Date.now(),transactions:a}),a},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:s}){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?kt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?kt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async getAddressBalance({caipNetworkId:t,address:e}){return Eo.api.post({path:`/v1?chainId=${t}&projectId=${we.state.projectId}`,body:{id:"1",jsonrpc:"2.0",method:"getAddressBalance",params:{address:e}}}).then(r=>r.result)},async fetchTokenPrice({addresses:t}){if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))return{fungibles:[]};const r=Ae.getTokenPriceCacheForAddresses(t);if(r)return r;const n=await Eo.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:we.state.projectId},headers:{"Content-Type":"application/json"}});return Ae.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:n}),n},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?kt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){const{st:e,sv:r}=kt.getSdkProperties();if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return kt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:s}){if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return Eo.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:wr.CONVERT_SLIPPAGE_TOLERANCE},projectId:we.state.projectId,from:e,to:r,userAddress:n,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){const{st:n,sv:s}=kt.getSdkProperties();if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return kt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:s}})},async getBalance(t,e,r){const{st:n,sv:s}=kt.getSdkProperties();if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))return ml.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Ae.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await kt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:s}});return Ae.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?kt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))return[];const r=J.getAccountData()?.address;return kt.get({path:`/v1/profile/reverse/${t}`,params:{sender:r,apiVersion:"2"}})},async getEnsNameSuggestions(t){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?kt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?Eo.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:s}){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?(await Eo.api.post({path:"/v1/generators/onrampurl",params:{projectId:we.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:s}})).url:""},async getOnrampOptions(){if(!await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await kt.get({path:"/v1/onramp/options"})}catch{return Ofe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){try{return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?await Eo.api.post({path:"/v1/onramp/quote",params:{projectId:we.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?kt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){return await kt.isNetworkSupported(J.state.activeCaipNetwork?.caipNetworkId)?Eo.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:we.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){Eo.clientId=t,Eo.api=new jy({baseUrl:dJ,clientId:t})}},Pc={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},kfe={handleMobileDeeplinkRedirect(t,e){const r=window.location.href,n=encodeURIComponent(r);if(t===Pc.PHANTOM.id&&!("phantom"in window)){const s=r.startsWith("https")?"https":"http",i=r.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Pc.PHANTOM.url}/ul/browse/${n}?ref=${o}`}if(t===Pc.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Pc.SOLFLARE.url}/ul/v1/browse/${n}?ref=${n}`),e===ae.CHAIN.SOLANA&&t===Pc.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Pc.COINBASE.url}/dapp?cb_url=${n}`),e===ae.CHAIN.BITCOIN&&t===Pc.BINANCE.id&&!("binancew3w"in window)){const s=J.state.activeCaipNetwork,i=window.btoa("/pages/browser/index"),o=window.btoa(`url=${n}&defaultChainId=${s?.id??1}`),a=new URL(Pc.BINANCE.deeplink);a.searchParams.set("appId",Pc.BINANCE.appId),a.searchParams.set("startPagePath",i),a.searchParams.set("startPageQuery",o);const c=new URL(Pc.BINANCE.url);c.searchParams.set("_dp",window.btoa(a.toString())),window.location.href=c.toString()}}},Bfe=Object.freeze({enabled:!0,events:[]}),Ufe=new jy({baseUrl:ke.getAnalyticsUrl(),clientId:null}),Mfe=5,Dfe=60*1e3,hf=Dn({...Bfe}),jfe={state:hf,subscribeKey(t,e){return ui(hf,t,e)},async sendError(t,e){if(!hf.enabled)return;const r=Date.now();if(hf.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return r-o<Dfe}).length>=Mfe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};hf.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=we.state;await Ufe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ke.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){hf.enabled=!0},disable(){hf.enabled=!1},clearEvents(){hf.events=[]}};let t6=class r8 extends Error{constructor(e,r,n){super(e),this.originalName="AppKitError",this.name="AppKitError",this.category=r,this.originalError=n,n&&n instanceof Error&&(this.originalName=n.name),Object.setPrototypeOf(this,r8.prototype);let s=!1;if(n instanceof Error&&typeof n.stack=="string"&&n.stack){const i=n.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,r8):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function cU(t,e){let r="";try{t instanceof Error?r=t.message:typeof t=="string"?r=t:typeof t=="object"&&t!==null?Object.keys(t).length===0?r="Unknown error":r=t?.message||JSON.stringify(t):r=String(t)}catch(s){r="Unknown error",console.error("Error parsing error message",s)}const n=t instanceof t6?t:new t6(r,e,t);throw jfe.sendError(n,n.category),n}function zc(t,e="INTERNAL_SDK_ERROR"){const r={};return Object.keys(t).forEach(n=>{const s=t[n];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return cU(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return cU(a,e)}},r[n]=i}else r[n]=s}),r}const Oa=Dn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Lfe={state:Oa,subscribeNetworkImages(t){return ci(Oa.networkImages,()=>t(Oa.networkImages))},subscribeKey(t,e){return ui(Oa,t,e)},subscribe(t){return ci(Oa,()=>t(Oa))},setWalletImage(t,e){Oa.walletImages[t]=e},setNetworkImage(t,e){Oa.networkImages[t]=e},setChainImage(t,e){Oa.chainImages[t]=e},setConnectorImage(t,e){Oa.connectorImages={...Oa.connectorImages,[t]:e}},setTokenImage(t,e){Oa.tokenImages[t]=e},setCurrencyImage(t,e){Oa.currencyImages[t]=e}},aa=zc(Lfe),Ffe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:"",ton:"20f673c0-095e-49b2-07cf-eb5049dcf600"},g3=Dn({networkImagePromises:{}}),fJ={async fetchWalletImage(t){if(t)return await pt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(g3.networkImagePromises[t]||(g3.networkImagePromises[t]=pt._fetchNetworkImage(t)),await g3.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return aa.state.walletImages[t]},getWalletImage(t){if(t?.image_url)return t?.image_url;if(t?.image_id)return aa.state.walletImages[t.image_id]},getNetworkImage(t){if(t?.assets?.imageUrl)return t?.assets?.imageUrl;if(t?.assets?.imageId)return aa.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return aa.state.networkImages[t]},getConnectorImage(t){if(t?.imageUrl)return t.imageUrl;if(t?.info?.icon)return t.info.icon;if(t?.imageId)return aa.state.connectorImages[t.imageId]},getChainImage(t){return aa.state.networkImages[Ffe[t]]},getTokenImage(t){if(t)return aa.state.tokenImages[t]}},$fe=ke.getAnalyticsUrl(),qfe=new jy({baseUrl:$fe,clientId:null}),Hfe=["MODAL_CREATED"],zfe=45,uU=1e3*10,as=Dn({timestamp:Date.now(),lastFlush:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"},pendingEvents:[],subscribedToVisibilityChange:!1,walletImpressions:[]}),Zt={state:as,subscribe(t){return ci(as,()=>t(as))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=we.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},shouldFlushEvents(){const t=JSON.stringify(as.pendingEvents).length/1024>zfe,e=as.lastFlush+uU<Date.now();return t||e},_setPendingEvent(t){try{let e=J.getAccountData()?.address;if("address"in t.data&&t.data.address&&(e=t.data.address),Hfe.includes(t.data.event)||typeof window>"u")return;const r=J.getActiveCaipNetwork()?.caipNetworkId;this.state.pendingEvents.push({eventId:ke.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e,properties:{..."properties"in t.data?t.data.properties:{},caipNetworkId:r}}}),as.reportedErrors.FORBIDDEN=!1,Zt.shouldFlushEvents()&&Zt._submitPendingEvents()}catch(e){console.warn("_setPendingEvent",e)}},sendEvent(t){as.timestamp=Date.now(),as.data=t;const e=["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"];(we.state.features?.analytics||e.includes(t.event))&&Zt._setPendingEvent(as),this.subscribeToFlushTriggers()},sendWalletImpressionEvent(t){as.walletImpressions.push(t)},_transformPendingEventsForBatch(t){try{return t.filter(e=>e.props.event!=="WALLET_IMPRESSION_V2")}catch{return t}},_submitPendingEvents(){if(as.lastFlush=Date.now(),!(as.pendingEvents.length===0&&as.walletImpressions.length===0))try{const t=Zt._transformPendingEventsForBatch(as.pendingEvents);as.walletImpressions.length&&t.push({eventId:ke.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:Date.now(),props:{type:"track",event:"WALLET_IMPRESSION_V2",items:[...as.walletImpressions]}}),qfe.sendBeacon({path:"/batch",params:Zt.getSdkProperties(),body:t}),as.reportedErrors.FORBIDDEN=!1,as.pendingEvents=[],as.walletImpressions=[]}catch{as.reportedErrors.FORBIDDEN=!0}},subscribeToFlushTriggers(){as.subscribedToVisibilityChange||typeof document>"u"||(as.subscribedToVisibilityChange=!0,document?.addEventListener?.("visibilitychange",()=>{document.visibilityState==="hidden"&&Zt._submitPendingEvents()}),document?.addEventListener?.("freeze",()=>{Zt._submitPendingEvents()}),window?.addEventListener?.("pagehide",()=>{Zt._submitPendingEvents()}),setInterval(()=>{Zt._submitPendingEvents()},uU))}},Wfe=ke.getApiUrl(),_o=new jy({baseUrl:Wfe,clientId:null}),Vfe=40,lU=4,Gfe=20,Ht=Dn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1,explorerWallets:[],explorerFilteredWallets:[],plan:{tier:"none",hasExceededUsageLimit:!1,limits:{isAboveRpcLimit:!1,isAboveMauLimit:!1}}}),pt={state:Ht,subscribeKey(t,e){return ui(Ht,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=we.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return we.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${_o.baseUrl}/getWalletImage/${t}`,r=await _o.getBlob({path:e,params:pt._getSdkProperties()});aa.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${_o.baseUrl}/public/getAssetImage/${t}`,r=await _o.getBlob({path:e,params:pt._getSdkProperties()});aa.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${_o.baseUrl}/public/getAssetImage/${t}`,r=await _o.getBlob({path:e,params:pt._getSdkProperties()});aa.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${_o.baseUrl}/public/getCurrencyImage/${t}`,r=await _o.getBlob({path:e,params:pt._getSdkProperties()});aa.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${_o.baseUrl}/public/getTokenImage/${t}`,r=await _o.getBlob({path:e,params:pt._getSdkProperties()});aa.setTokenImage(t,URL.createObjectURL(r))},_filterWalletsByPlatform(t){const e=t.length,r=ke.isMobile()?t?.filter(s=>s.mobile_link||s.webapp_link?!0:Object.values(Pc).map(o=>o.id).includes(s.id)):t,n=e-r.length;return{filteredWallets:r,mobileFilteredOutWalletsLength:n}},async fetchProjectConfig(){return(await _o.get({path:"/appkit/v1/config",params:pt._getSdkProperties()})).features},async fetchUsage(){try{const t=await _o.get({path:"/appkit/v1/project-limits",params:pt._getSdkProperties()}),{tier:e,isAboveMauLimit:r,isAboveRpcLimit:n}=t.planLimits,s=e==="starter",i=r||n;pt.state.plan={tier:e,hasExceededUsageLimit:s&&i,limits:{isAboveRpcLimit:n,isAboveMauLimit:r}}}catch(t){console.warn("Failed to fetch usage",t)}},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await _o.get({path:"/projects/v1/origins",params:pt._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===ae.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=ae.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const e=J.getAllRequestedCaipNetworks()?.map(({assets:r})=>r?.imageId).filter(Boolean).filter(r=>!fJ.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>pt._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=Re.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>pt._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>pt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>pt._fetchTokenImage(e)))},async fetchWallets(t){const e=t.exclude??[];pt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Pc).map(o=>o.id));const n=await _o.get({path:"/getWallets",params:{...pt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:t.include?.join(","),exclude:e.join(",")}}),{filteredWallets:s,mobileFilteredOutWalletsLength:i}=pt._filterWalletsByPlatform(n?.data);return{data:s||[],count:n?.count,mobileFilteredOutWalletsLength:i}},async prefetchWalletRanks(){const t=Re.state.connectors;if(!t?.length)return;const e={page:1,entries:20,badge:"certified"};if(e.names=t.map(s=>s.name).join(","),J.state.activeChain===ae.CHAIN.EVM){const s=[...t.flatMap(i=>i.connectors?.map(o=>o.info?.rdns)||[]),...t.map(i=>i.info?.rdns)].filter(i=>typeof i=="string"&&i.length>0);s.length&&(e.rdns=s.join(","))}const{data:r}=await pt.fetchWallets(e);Ht.explorerWallets=r,Re.extendConnectorsWithExplorerWallets(r);const n=J.getRequestedCaipNetworkIds().join(",");Ht.explorerFilteredWallets=r.filter(s=>s.chains?.some(i=>n.includes(i)))},async fetchFeaturedWallets(){const{featuredWalletIds:t}=we.state;if(t?.length){const e={...pt._getSdkProperties(),page:1,entries:t?.length??lU,include:t},{data:r}=await pt.fetchWallets(e),n=[...r].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=n.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>pt._fetchWalletImage(i))),Ht.featured=n,Ht.allFeatured=n}},async fetchRecommendedWallets(){try{Ht.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=we.state,n=[...e??[],...r??[]].filter(Boolean),s=J.getRequestedCaipNetworkIds().join(","),i={page:1,entries:lU,include:t,exclude:n,chains:s},{data:o,count:a}=await pt.fetchWallets(i),c=Ae.getRecentWallets(),u=o.map(d=>d.image_id).filter(Boolean),l=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...u,...l].map(d=>pt._fetchWalletImage(d))),Ht.recommended=o,Ht.allRecommended=o,Ht.count=a??0}catch{}finally{Ht.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=we.state,s=J.getRequestedCaipNetworkIds().join(","),i=[...Ht.recommended.map(({id:d})=>d),...r??[],...n??[]].filter(Boolean),o={page:t,entries:Vfe,include:e,exclude:i,chains:s},{data:a,count:c,mobileFilteredOutWalletsLength:u}=await pt.fetchWallets(o);Ht.mobileFilteredOutWalletsLength=u+(Ht.mobileFilteredOutWalletsLength??0);const l=a.slice(0,Gfe).map(d=>d.image_id).filter(Boolean);await Promise.allSettled(l.map(d=>pt._fetchWalletImage(d))),Ht.wallets=ke.uniqueBy([...Ht.wallets,...pt._filterOutExtensions(a)],"id").filter(d=>d.chains?.some(f=>s.includes(f))),Ht.count=c>Ht.count?c:Ht.count,Ht.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:r}=await pt.fetchWallets(e);r&&r.forEach(n=>{Ht.excludedWallets.push({rdns:n.rdns,name:n.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=we.state,s=J.getRequestedCaipNetworkIds().join(",");Ht.search=[];const i={page:1,entries:100,search:t?.trim(),badge_type:e,include:r,exclude:n,chains:s},{data:o}=await pt.fetchWallets(i);Zt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>pt._fetchWalletImage(c)),ke.wait(300)]),Ht.search=pt._filterOutExtensions(o)},initPromise(t,e){const r=Ht.promises[t];return r||(Ht.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0,fetchWalletRanks:s=!0}={}){const i=[t&&pt.initPromise("connectorImages",pt.fetchConnectorImages),e&&pt.initPromise("featuredWallets",pt.fetchFeaturedWallets),r&&pt.initPromise("recommendedWallets",pt.fetchRecommendedWallets),n&&pt.initPromise("networkImages",pt.fetchNetworkImages),s&&pt.initPromise("walletRanks",pt.prefetchWalletRanks)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){we.state.features?.analytics&&pt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await _o.get({path:"/getAnalyticsConfig",params:pt._getSdkProperties()});we.setFeatures({analytics:t})}catch{we.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!t?.length){Ht.featured=Ht.allFeatured,Ht.recommended=Ht.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");Ht.featured=Ht.allFeatured.filter(r=>r.chains?.some(n=>e.includes(n))),Ht.recommended=Ht.allRecommended.filter(r=>r.chains?.some(n=>e.includes(n))),Ht.filteredWallets=Ht.wallets.filter(r=>r.chains?.some(n=>e.includes(n)))},clearFilterByNamespaces(){Ht.filteredWallets=[]},setFilterByNamespace(t){if(!t){Ht.featured=Ht.allFeatured,Ht.recommended=Ht.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");Ht.featured=Ht.allFeatured.filter(r=>r.chains?.some(n=>e.includes(n))),Ht.recommended=Ht.allRecommended.filter(r=>r.chains?.some(n=>e.includes(n))),Ht.filteredWallets=Ht.wallets.filter(r=>r.chains?.some(n=>e.includes(n)))}},Kfe=["ConnectingExternal","ConnectingMultiChain","ConnectingSocial","ConnectingFarcaster"],rn=Dn({view:"Connect",history:["Connect"],transactionStack:[]}),Zfe={state:rn,subscribeKey(t,e){return ui(rn,t,e)},pushTransactionStack(t){rn.transactionStack.push(t)},popTransactionStack(t){const e=rn.transactionStack.pop();if(!e)return;const{onSuccess:r,onError:n,onCancel:s}=e;switch(t){case"success":r?.();break;case"error":n?.(),It.goBack();break;case"cancel":s?.(),It.goBack();break}},push(t,e){let r=t,n=e;pt.state.plan.hasExceededUsageLimit&&Kfe.includes(t)&&(r="UsageExceeded",n=void 0),r!==rn.view&&(rn.view=r,rn.history.push(r),rn.data=n)},reset(t,e){rn.view=t,rn.history=[t],rn.data=e},replace(t,e){rn.history.at(-1)===t||(rn.view=t,rn.history[rn.history.length-1]=t,rn.data=e)},goBack(){const t=J.state.activeCaipAddress,e=It.state.view==="ConnectingFarcaster",r=!t&&e;if(rn.history.length>1){rn.history.pop();const[n]=rn.history.slice(-1);n&&(t&&n==="Connect"?rn.view="Account":rn.view=n)}else dr.close();rn.data?.wallet&&(rn.data.wallet=void 0),rn.data?.redirectView&&(rn.data.redirectView=void 0),setTimeout(()=>{if(r){J.setAccountProp("farcasterUrl",void 0,J.state.activeChain);const n=Re.getAuthConnector();n?.provider?.reload();const s=Z1(we.state);n?.provider?.syncDappData?.({metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType})}},100)},goBackToIndex(t){if(rn.history.length>1){rn.history=rn.history.slice(0,t+1);const[e]=rn.history.slice(-1);e&&(rn.view=e)}},goBackOrCloseModal(){It.state.history.length>1?It.goBack():dr.close()}},It=zc(Zfe),Vl=Dn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),n8={state:Vl,subscribe(t){return ci(Vl,()=>t(Vl))},setThemeMode(t){Vl.themeMode=t;try{const e=Re.getAuthConnector();if(e){const r=n8.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:Y1(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Vl.themeVariables={...Vl.themeVariables,...t};try{const e=Re.getAuthConnector();if(e){const r=n8.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:Y1(Vl.themeVariables,Vl.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Z1(Vl)}},na=zc(n8),hJ=Object.fromEntries(PY.map(t=>[t,void 0])),Yfe=Object.fromEntries(PY.map(t=>[t,!0])),Ar=Dn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:hJ,filterByNamespaceMap:Yfe}),Jfe={state:Ar,subscribe(t){return ci(Ar,()=>{t(Ar)})},subscribeKey(t,e){return ui(Ar,t,e)},initialize(t){t.forEach(e=>{const r=Ae.getConnectedConnectorId(e);r&&Re.setConnectorId(r,e)})},setActiveConnector(t){t&&(Ar.activeConnector=iy(t))},setConnectors(t){t.filter(s=>!Ar.allConnectors.some(i=>i.id===s.id&&Re.getConnectorName(i.name)===Re.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&Ar.allConnectors.push(iy(s))});const r=Re.getEnabledNamespaces(),n=Re.getEnabledConnectors(r);Ar.connectors=Re.mergeMultiChainConnectors(n)},filterByNamespaces(t){Object.keys(Ar.filterByNamespaceMap).forEach(e=>{Ar.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Ar.filterByNamespaceMap[e]=!0}),Re.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Ar.filterByNamespaceMap[t]=e,Re.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Re.getEnabledNamespaces(),e=Re.getEnabledConnectors(t),r=Re.areAllNamespacesEnabled();Ar.connectors=Re.mergeMultiChainConnectors(e),r?pt.clearFilterByNamespaces():pt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Ar.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Ar.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Ar.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Re.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const s=n[0],i=s?.id===ae.CONNECTOR_ID.AUTH;n.length>1&&s?r.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...n],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:s?.id||""}):s&&r.push(s)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,s=Re.getConnectorName(n);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===r.chain)||i.push(r),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){if(t.id===ae.CONNECTOR_ID.AUTH){const e=t,r=Z1(we.state),n=na.getSnapshot().themeMode,s=na.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e?.provider?.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:Y1(s,n)}),Re.setConnectors([t])}else Re.setConnectors([t])},getAuthConnector(t){const e=t||J.state.activeChain,r=Ar.connectors.find(n=>n.id===ae.CONNECTOR_ID.AUTH);if(r)return r?.connectors?.length?r.connectors.find(s=>s.chain===e):r},getAnnouncedConnectorRdns(){return Ar.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>t.info?.rdns)},getConnectorById(t){return Ar.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:r}){const n=r||J.state.activeChain;return Ar.allConnectors.filter(i=>i.chain===n).find(i=>i.explorerId===t||i.info?.rdns===e)},syncIfAuthConnector(t){if(t.id!=="AUTH")return;const e=t,r=Z1(we.state),n=na.getSnapshot().themeMode,s=na.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:Y1(s,n)})},getConnectorsByNamespace(t){const e=Ar.allConnectors.filter(r=>r.chain===t);return Re.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&fo(t)===Ss.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=It.state.data?.redirectView,r=Re.getConnector({id:t.id,rdns:t.rdns});kfe.handleMobileDeeplinkRedirect(r?.explorerId||t.id,J.state.activeChain),r?It.push("ConnectingExternal",{connector:r,wallet:t,redirectView:e}):It.push("ConnectingWalletConnect",{wallet:t,redirectView:e})},getConnectors(t){return t?Re.getConnectorsByNamespace(t):Re.mergeMultiChainConnectors(Ar.allConnectors)},setFilterByNamespace(t){Ar.filterByNamespace=t,Ar.connectors=Re.getConnectors(t),pt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Ar.activeConnectorIds={...Ar.activeConnectorIds,[e]:t},Ae.setConnectedConnectorId(e,t))},removeConnectorId(t){Ar.activeConnectorIds={...Ar.activeConnectorIds,[t]:void 0},Ae.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Ar.activeConnectorIds[t]},isConnected(t){return t?!!Ar.activeConnectorIds[t]:Object.values(Ar.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Ar.activeConnectorIds={...hJ}},extendConnectorsWithExplorerWallets(t){Ar.allConnectors.forEach(n=>{const s=t.find(i=>i.id===n.id||i.rdns&&i.rdns===n.info?.rdns);s&&(n.explorerWallet=s)});const e=Re.getEnabledNamespaces(),r=Re.getEnabledConnectors(e);Ar.connectors=Re.mergeMultiChainConnectors(r)}},Re=zc(Jfe),Xfe=1e3,vb={checkNamespaceConnectorId(t,e){return Re.getConnectorId(t)===e},isSocialProvider(t){return wr.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:r=!0,redirectViewOnModalClose:n="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Re.setActiveConnector(e),s?.(ke.isMobile()&&t),n){const u=dr.subscribeKey("open",l=>{l||(It.state.view!==n&&It.replace(n),u(),a(new Error("Modal closed")))})}const c=J.subscribeKey("activeCaipAddress",u=>{u&&(i?.(),r&&dr.close(),c(),o(xs.parseCaipAddress(u)))})})},connectExternal(t){return new Promise((e,r)=>{const n=J.subscribeKey("activeCaipAddress",s=>{s&&(dr.close(),n(),e(xs.parseCaipAddress(s)))});ze.connectExternal(t,t.chain).catch(()=>{n(),r(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:r=!0,onOpenFarcaster:n,onConnect:s}){let i,o=!1,a=null;const c=e||J.state.activeChain,u=J.subscribeKey("activeCaipAddress",l=>{l&&(r&&dr.close(),u())});return new Promise((l,d)=>{async function f(g){if(g.data?.resultUri)if(g.origin===ae.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",f,!1);try{const h=Re.getAuthConnector(c);if(h&&!o){i&&i.close(),o=!0;const y=g.data.resultUri;Zt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:t}}),Ae.setConnectedSocialProvider(t),await ze.connectExternal({id:h.id,type:h.type,socialUri:y},h.chain);const E=J.state.activeCaipAddress;if(!E){d(new Error("Failed to connect"));return}l(xs.parseCaipAddress(E)),Zt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}})}}catch(h){Zt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:t,message:ke.parseError(h)}}),d(new Error("Failed to connect"))}}else Zt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:t,message:"Untrusted Origin"}})}async function p(){if(Zt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:t}}),t==="farcaster"){n?.();const g=dr.subscribeKey("open",y=>{!y&&t==="farcaster"&&(d(new Error("Popup closed")),s?.(),g())}),h=Re.getAuthConnector();if(h&&!J.getAccountData(c)?.farcasterUrl)try{const{url:E}=await h.provider.getFarcasterUri();J.setAccountProp("farcasterUrl",E,c)}catch{d(new Error("Failed to connect to farcaster"))}}else{const g=Re.getAuthConnector();a=ke.returnOpenHref(`${ae.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(g){const{uri:h}=await g.provider.getSocialRedirectUri({provider:t});if(a&&h){a.location.href=h,i=a;const y=setInterval(()=>{i?.closed&&!o&&(d(new Error("Popup closed")),clearInterval(y))},1e3);window.addEventListener("message",f,!1)}else a?.close(),d(new Error("Failed to initiate social connection"))}}catch{d(new Error("Failed to initiate social connection")),a?.close()}}}p()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:r,onConnect:n}){return new Promise((s,i)=>{if(r?.(),e){const a=dr.subscribeKey("open",c=>{c||(It.state.view!==e&&It.replace(e),a(),i(new Error("Modal closed")))})}const o=J.subscribeKey("activeCaipAddress",a=>{a&&(n?.(),t&&dr.close(),o(),s(xs.parseCaipAddress(a)))})})},async updateEmail(){const t=Ae.getConnectedConnectorId(J.state.activeChain),e=Re.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==ae.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const r=e.provider.getEmail()??"";return await dr.open({view:"UpdateEmailWallet",data:{email:r,redirectView:void 0}}),new Promise((n,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==r&&(dr.close(),clearInterval(i),o(),n({email:a}))},Xfe),o=dr.subscribeKey("open",a=>{a||(It.state.view!=="Connect"&&It.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&fo(t)===Ss.ACCOUNT_TYPES.EOA}};function pJ(){const t=J.state.activeCaipNetwork?.chainNamespace||"eip155",e=J.state.activeCaipNetwork?.id||1,r=wr.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`}function fo(t){return J.getAccountData(t)?.preferredAccountType}function c1(t){return t?J.state.chains.get(t)?.networkState?.caipNetwork:J.state.activeCaipNetwork}const r6={getConnectionStatus(t,e){const r=Re.state.activeConnectorIds[e],n=ze.getConnections(e);return!!r&&t.connectorId===r?"connected":n.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:r}){return t.map(n=>{if((e?n.connectorId.toLowerCase()===e.toLowerCase():!1)&&r){const i=n.accounts.filter(o=>!r.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...n,accounts:i}}return n})},excludeExistingConnections(t,e){const r=new Set(t);return e.filter(n=>!r.has(n.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(r=>r.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){const e=!!we.state.remoteFeatures?.multiWallet,r=Re.state.activeConnectorIds[t],n=ze.getConnections(t),i=(ze.state.recentConnections.get(t)??[]).filter(a=>Re.getConnectorById(a.connectorId)),o=r6.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return e?{connections:n,recentConnections:o}:{connections:n.filter(a=>a.connectorId.toLowerCase()===r?.toLowerCase()),recentConnections:[]}}},Wn=Dn({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Qfe={state:Wn,subscribe(t){return ci(Wn,()=>t(Wn))},setLastNetworkInView(t){Wn.lastNetworkInView=t},async fetchTransactions(t){if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Wn.loading=!0;try{const e=await kt.fetchTransactions({account:t,cursor:Wn.next,chainId:J.state.activeCaipNetwork?.caipNetworkId}),r=oI.filterSpamTransactions(e.data),n=oI.filterByConnectedChain(r),s=[...Wn.transactions,...n];Wn.loading=!1,Wn.transactions=s,Wn.transactionsByYear=oI.groupTransactionsByYearAndMonth(Wn.transactionsByYear,n),Wn.empty=s.length===0,Wn.next=e.next?e.next:void 0}catch{const r=J.state.activeChain;Zt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:we.state.projectId,cursor:Wn.next,isSmartAccount:fo(r)===Ss.ACCOUNT_TYPES.SMART_ACCOUNT}}),ml.showError("Failed to fetch transactions"),Wn.loading=!1,Wn.empty=!0,Wn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const s=new Date(n.metadata.minedAt).getFullYear(),i=new Date(n.metadata.minedAt).getMonth(),o=r[s]??{},c=(o[i]??[]).filter(u=>u.id!==n.id);r[s]={...o,[i]:[...c,n].sort((u,l)=>new Date(l.metadata.minedAt).getTime()-new Date(u.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>n.nft_info?.flags.is_spam===!0))},filterByConnectedChain(t){const e=J.state.activeCaipNetwork?.caipNetworkId;return t.filter(n=>n.metadata.chain===e)},clearCursor(){Wn.next=void 0},resetTransactions(){Wn.transactions=[],Wn.transactionsByYear={},Wn.lastNetworkInView=void 0,Wn.loading=!1,Wn.empty=!1,Wn.next=void 0}},oI=zc(Qfe,"API_ERROR"),Ur=Dn({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let np;const ehe={state:Ur,subscribe(t){return ci(Ur,()=>t(Ur))},subscribeKey(t,e){return ui(Ur,t,e)},_getClient(){return Ur._client},setClient(t){Ur._client=iy(t)},initialize(t){const e=t.filter(r=>!!r.namespace).map(r=>r.namespace);ze.syncStorageConnections(e)},syncStorageConnections(t){const e=Ae.getConnections(),r=t??Array.from(J.state.chains.keys());for(const n of r){const s=e[n]??[],i=new Map(Ur.recentConnections);i.set(n,s),Ur.recentConnections=i}},getConnections(t){return t?Ur.connections.get(t)??[]:[]},hasAnyConnection(t){const e=ze.state.connections;return Array.from(e.values()).flatMap(r=>r).some(({connectorId:r})=>r===t)},async connectWalletConnect({cache:t="auto"}={}){const e=ke.isTelegram()||ke.isSafari()&&ke.isIos();if(t==="always"||t==="auto"&&e){if(np){await np,np=void 0;return}if(!ke.isPairingExpired(Ur?.wcPairingExpiry)){const r=Ur.wcUri;Ur.wcUri=r;return}np=ze._getClient()?.connectWalletConnect?.().catch(()=>{}),ze.state.status="connecting",await np,np=void 0,Ur.wcPairingExpiry=void 0,ze.state.status="connected"}else await ze._getClient()?.connectWalletConnect?.()},async connectExternal(t,e,r=!0){const n=await ze._getClient()?.connectExternal?.(t);r&&J.setActiveNamespace(e);const s=Re.state.allConnectors.find(o=>o.id===t?.id),i=t.type==="AUTH"?"email":"browser";return Zt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:i,name:s?.name||"Unknown",view:It.state.view,walletRank:s?.explorerWallet?.order}}),n},async reconnectExternal(t){await ze._getClient()?.reconnectExternal?.(t);const e=t.chain||J.state.activeChain;e&&Re.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){if(!e)return;dr.setLoading(!0,J.state.activeChain);const r=Re.getAuthConnector();r&&(J.setAccountProp("preferredAccountType",t,e),await r.provider.setPreferredAccount(t),Ae.setPreferredAccountTypes(Object.entries(J.state.chains).reduce((n,[s,i])=>{const o=s,a=fo(o);return a!==void 0&&(n[o]=a),n},{})),await ze.reconnectExternal(r),dr.setLoading(!1,J.state.activeChain),Zt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:J.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(t){return ze._getClient()?.signMessage(t)},parseUnits(t,e){return ze._getClient()?.parseUnits(t,e)},formatUnits(t,e){return ze._getClient()?.formatUnits(t,e)},updateBalance(t){return ze._getClient()?.updateBalance(t)},async sendTransaction(t){return ze._getClient()?.sendTransaction(t)},async getCapabilities(t){return ze._getClient()?.getCapabilities(t)},async grantPermissions(t){return ze._getClient()?.grantPermissions(t)},async walletGetAssets(t){return ze._getClient()?.walletGetAssets(t)??{}},async estimateGas(t){return ze._getClient()?.estimateGas(t)},async writeContract(t){return ze._getClient()?.writeContract(t)},async getEnsAddress(t){return ze._getClient()?.getEnsAddress(t)},async getEnsAvatar(t){return ze._getClient()?.getEnsAvatar(t)},checkInstalled(t){return ze._getClient()?.checkInstalled?.(t)||!1},resetWcConnection(){Ur.wcUri=void 0,Ur.wcPairingExpiry=void 0,Ur.wcLinking=void 0,Ur.recentWallet=void 0,Ur.status="disconnected",oI.resetTransactions(),Ae.deleteWalletConnectDeepLink(),Ae.deleteRecentWallet()},resetUri(){Ur.wcUri=void 0,Ur.wcPairingExpiry=void 0,np=void 0},finalizeWcConnection(t){const{wcLinking:e,recentWallet:r}=ze.state;e&&Ae.setWalletConnectDeepLink(e),r&&Ae.setAppKitRecent(r),t&&Zt.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:t,properties:{method:e?"mobile":"qrcode",name:It.state.data?.wallet?.name||"Unknown",view:It.state.view,walletRank:r?.order}})},setWcBasic(t){Ur.wcBasic=t},setUri(t){Ur.wcUri=t,Ur.wcPairingExpiry=ke.getPairingExpiry()},setWcLinking(t){Ur.wcLinking=t},setWcError(t){Ur.wcError=t,Ur.buffering=!1},setRecentWallet(t){Ur.recentWallet=t},setBuffering(t){Ur.buffering=t},setStatus(t){Ur.status=t},setIsSwitchingConnection(t){Ur.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:r}={}){try{await ze._getClient()?.disconnect({id:t,chainNamespace:e,initialDisconnect:r})}catch(n){throw new t6("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},async disconnectConnector({id:t,namespace:e}){try{await ze._getClient()?.disconnectConnector({id:t,namespace:e})}catch(r){throw new t6("Failed to disconnect connector","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){const r=new Map(Ur.connections);r.set(e,t),Ur.connections=r},async handleAuthAccountSwitch({address:t,namespace:e}){const n=J.getAccountData(e)?.user?.accounts?.find(i=>i.type==="smartAccount"),s=n&&n.address.toLowerCase()===t.toLowerCase()&&vb.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await ze.setPreferredAccountType(s,e)},async handleActiveConnection({connection:t,namespace:e,address:r}){const n=Re.getConnectorById(t.connectorId),s=t.connectorId===ae.CONNECTOR_ID.AUTH;if(!n)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)r&&await ze.handleAuthAccountSwitch({address:r,namespace:e});else return(await ze.connectExternal({id:n.id,type:n.type,provider:n.provider,address:r,chain:e},e))?.address;return r},async handleDisconnectedConnection({connection:t,namespace:e,address:r,closeModalOnConnect:n}){const s=Re.getConnectorById(t.connectorId),i=t.auth?.name?.toLowerCase(),o=t.connectorId===ae.CONNECTOR_ID.AUTH,a=t.connectorId===ae.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&vb.isSocialProvider(i)){const{address:u}=await vb.connectSocial({social:i,closeModalOnConnect:n,onOpenFarcaster(){dr.open({view:"ConnectingFarcaster"})},onConnect(){It.replace("ProfileWallets")}});c=u}else{const{address:u}=await vb.connectEmail({closeModalOnConnect:n,onOpen(){dr.open({view:"EmailLogin"})},onConnect(){It.replace("ProfileWallets")}});c=u}else if(a){const{address:u}=await vb.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:n,onOpen(l){const d=l?"AllWallets":"ConnectingWalletConnect";dr.state.open?It.push(d):dr.open({view:d})},onConnect(){It.replace("ProfileWallets")}});c=u}else{const u=await ze.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);u&&(c=u.address)}return o&&r&&await ze.handleAuthAccountSwitch({address:r,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:r,closeModalOnConnect:n,onChange:s}){let i;const o=J.getAccountData(r)?.caipAddress;if(o){const{address:c}=xs.parseCaipAddress(o);i=c}const a=r6.getConnectionStatus(t,r);switch(a){case"connected":case"active":{const c=await ze.handleActiveConnection({connection:t,namespace:r,address:e});if(i&&c){const u=c.toLowerCase()!==i.toLowerCase();s?.({address:c,namespace:r,hasSwitchedAccount:u,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await ze.handleDisconnectedConnection({connection:t,namespace:r,address:e,closeModalOnConnect:n});c&&s?.({address:c,namespace:r,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${a}`)}}},ze=zc(ehe),m3={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return _5(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}};let y3;async function dU(){if(!y3){const{createPublicClient:t,http:e,defineChain:r}=await Pr(async()=>{const{createPublicClient:n,http:s,defineChain:i}=await import("./index-kdtGQ_pD.js").then(o=>o.i);return{createPublicClient:n,http:s,defineChain:i}},__vite__mapDeps([0,1,2]));y3={createPublicClient:t,http:e,defineChain:r}}return y3}const s8={getBlockchainApiRpcUrl(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()},async getViemChain(t){const{defineChain:e}=await dU(),{chainId:r}=xs.parseCaipNetworkId(t.caipNetworkId);return e({...t,id:Number(r)})},async createViemPublicClient(t){const{createPublicClient:e,http:r}=await dU(),n=we.state.projectId,s=await s8.getViemChain(t);if(!s)throw new Error(`Chain ${t.caipNetworkId} not found in viem/chains`);return e({chain:s,transport:r(s8.getBlockchainApiRpcUrl(t.caipNetworkId,n))})}},I4={async getMyTokensWithBalance(t){const e=J.getAccountData()?.address,r=J.state.activeCaipNetwork,n=Re.getConnectorId("eip155")===ae.CONNECTOR_ID.AUTH;if(!e||!r)return[];const s=`${r.caipNetworkId}:${e}`,i=Ae.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(r.chainNamespace===ae.CHAIN.EVM&&n){const a=await this.getEIP155Balances(e,r);if(a)return this.filterLowQualityTokens(a)}const o=await kt.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){try{const r=m3.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await ze.getCapabilities(t))?.[r]?.assetDiscovery?.supported)return null;const s=await ze.walletGetAssets({account:t,chainFilter:[r]});if(!m3.isWalletGetAssetsResponse(s))return null;const o=(s[r]||[]).map(a=>m3.createBalance(a,e.caipNetworkId));return Ae.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:o},timestamp:Date.now()}),o}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},async fetchERC20Balance({caipAddress:t,assetAddress:e,caipNetwork:r}){const n=await s8.createViemPublicClient(r),{address:s}=xs.parseCaipAddress(t),[{result:i},{result:o},{result:a},{result:c}]=await n.multicall({contracts:[{address:e,functionName:"name",args:[],abi:M_},{address:e,functionName:"symbol",args:[],abi:M_},{address:e,functionName:"balanceOf",args:[s],abi:M_},{address:e,functionName:"decimals",args:[],abi:M_}]});return{name:i,symbol:o,decimals:c,balance:a&&c?_5(a,c):"0"}}},b3={adapters:{}},gJ={state:b3,initialize(t){b3.adapters={...t}},get(t){return b3.adapters[t]}},n6={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0,ton:void 0},qo=Dn({providers:{...n6},providerIds:{...n6}}),br={state:qo,subscribeKey(t,e){return ui(qo,t,e)},subscribe(t){return ci(qo,()=>{t(qo)})},subscribeProviders(t){return ci(qo.providers,()=>t(qo.providers))},setProvider(t,e){t&&e&&(qo.providers[t]=iy(e))},getProvider(t){if(t)return qo.providers[t]},setProviderId(t,e){e&&(qo.providerIds[t]=e)},getProviderId(t){if(t)return qo.providerIds[t]},reset(){qo.providers={...n6},qo.providerIds={...n6}},resetChain(t){qo.providers[t]=void 0,qo.providerIds[t]=void 0}},gg=Dn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Cu={state:gg,subscribe(t){return ci(gg,()=>t(gg))},subscribeOpen(t){return ui(gg,"open",t)},set(t){Object.assign(gg,{...gg,...t})}},the={async getTokenList(t){return(await kt.fetchSwapTokens({chainId:t}))?.tokens?.map(n=>({...n,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){const t=J.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const e=(await ze?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e};case"eip155":default:return await kt.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:r,sourceTokenDecimals:n}){const s=await kt.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s?.allowance&&r&&n){const i=ze.parseUnits(r,n)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await I4.getMyTokensWithBalance(t);return J.setAccountProp("tokenBalance",e,J.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return t?.map(e=>({...e,address:e?.address?e.address:pJ(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]},async handleSwapError(t){try{const e=t?.cause;return e?.json&&(await e.json())?.reasons?.[0]?.description?.includes("insufficient liquidity")?"Insufficient liquidity":void 0}catch{return}}},xr=Dn({tokenBalances:[],loading:!1}),rhe={state:xr,subscribe(t){return ci(xr,()=>t(xr))},subscribeKey(t,e){return ui(xr,t,e)},setToken(t){t&&(xr.token=iy(t))},setTokenAmount(t){xr.sendTokenAmount=t},setReceiverAddress(t){xr.receiverAddress=t},setReceiverProfileImageUrl(t){xr.receiverProfileImageUrl=t},setReceiverProfileName(t){xr.receiverProfileName=t},setNetworkBalanceInUsd(t){xr.networkBalanceInUSD=t},setLoading(t){xr.loading=t},getSdkEventProperties(t){return{message:ke.parseError(t),isSmartAccount:fo(J.state.activeChain)===Ss.ACCOUNT_TYPES.SMART_ACCOUNT,token:xr.token?.symbol||"",amount:xr.sendTokenAmount??0,network:J.state.activeCaipNetwork?.caipNetworkId||""}},async sendToken(){try{switch(tr.setLoading(!0),J.state.activeCaipNetwork?.chainNamespace){case"eip155":await tr.sendEvmToken();return;case"solana":await tr.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}catch(t){throw hl.isUserRejectedRequestError(t)?new My(t):t}finally{tr.setLoading(!1)}},async sendEvmToken(){const t=J.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=fo(t);if(!tr.state.sendTokenAmount||!tr.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!tr.state.token)throw new Error("A token is required");if(tr.state.token?.address){Zt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ss.ACCOUNT_TYPES.SMART_ACCOUNT,token:tr.state.token.address,amount:tr.state.sendTokenAmount,network:J.state.activeCaipNetwork?.caipNetworkId||""}});const{hash:r}=await tr.sendERC20Token({receiverAddress:tr.state.receiverAddress,tokenAddress:tr.state.token.address,sendTokenAmount:tr.state.sendTokenAmount,decimals:tr.state.token.quantity.decimals});r&&(xr.hash=r)}else{Zt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ss.ACCOUNT_TYPES.SMART_ACCOUNT,token:tr.state.token.symbol||"",amount:tr.state.sendTokenAmount,network:J.state.activeCaipNetwork?.caipNetworkId||""}});const{hash:r}=await tr.sendNativeToken({receiverAddress:tr.state.receiverAddress,sendTokenAmount:tr.state.sendTokenAmount,decimals:tr.state.token.quantity.decimals});r&&(xr.hash=r)}},async fetchTokenBalance(t){xr.loading=!0;const e=J.state.activeChain,r=J.state.activeCaipNetwork?.caipNetworkId,n=J.state.activeCaipNetwork?.chainNamespace,s=J.getAccountData(e)?.caipAddress??J.state.activeCaipAddress,i=s?ke.getPlainAddress(s):void 0;if(xr.lastRetry&&!ke.isAllowedRetry(xr.lastRetry,30*wr.ONE_SEC_MS))return xr.loading=!1,[];try{if(i&&r&&n){const o=await I4.getMyTokensWithBalance();return xr.tokenBalances=o,xr.lastRetry=void 0,o}}catch(o){xr.lastRetry=Date.now(),t?.(o),ml.showError("Token Balance Unavailable")}finally{xr.loading=!1}return[]},fetchNetworkBalance(){if(xr.tokenBalances.length===0)return;const t=the.mapBalancesToSwapTokens(xr.tokenBalances);if(!t)return;const e=t.find(r=>r.address===pJ());e&&(xr.networkBalanceInUSD=e?kY.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){It.pushTransactionStack({});const e=t.receiverAddress,r=J.getAccountData()?.address,n=ze.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),i=await ze.sendTransaction({chainNamespace:ae.CHAIN.EVM,to:e,address:r,data:"0x",value:n??BigInt(0)});return Zt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:fo("eip155")===Ss.ACCOUNT_TYPES.SMART_ACCOUNT,token:tr.state.token?.symbol||"",amount:t.sendTokenAmount,network:J.state.activeCaipNetwork?.caipNetworkId||"",hash:i||""}}),ze._getClient()?.updateBalance("eip155"),tr.resetSend(),{hash:i}},async sendERC20Token(t){It.pushTransactionStack({onSuccess(){It.replace("Account")}});const e=ze.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),r=J.getAccountData()?.address;if(r&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ke.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");const s=await ze.writeContract({fromAddress:r,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Hce.getERC20Abi(n),chainNamespace:ae.CHAIN.EVM});return Zt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:fo("eip155")===Ss.ACCOUNT_TYPES.SMART_ACCOUNT,token:tr.state.token?.symbol||"",amount:t.sendTokenAmount,network:J.state.activeCaipNetwork?.caipNetworkId||"",hash:s||""}}),tr.resetSend(),{hash:s}}return{hash:void 0}},async sendSolanaToken(){if(!tr.state.sendTokenAmount||!tr.state.receiverAddress)throw new Error("An amount and receiver address are required");It.pushTransactionStack({onSuccess(){It.replace("Account")}});let t;tr.state.token&&tr.state.token.address!==wr.SOLANA_NATIVE_TOKEN_ADDRESS&&(ke.isCaipAddress(tr.state.token.address)?t=ke.getPlainAddress(tr.state.token.address):t=tr.state.token.address);const e=await ze.sendTransaction({chainNamespace:"solana",tokenMint:t,to:tr.state.receiverAddress,value:tr.state.sendTokenAmount});e&&(xr.hash=e),ze._getClient()?.updateBalance("solana"),Zt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:!1,token:tr.state.token?.symbol||"",amount:tr.state.sendTokenAmount,network:J.state.activeCaipNetwork?.caipNetworkId||"",hash:e||""}}),tr.resetSend()},resetSend(){xr.token=void 0,xr.sendTokenAmount=void 0,xr.receiverAddress=void 0,xr.receiverProfileImageUrl=void 0,xr.receiverProfileName=void 0,xr.loading=!1,xr.tokenBalances=[]}},tr=zc(rhe),w3={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},F_={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ve=Dn({chains:Rce(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{connectionControllerClient:void 0},isSwitchingNamespace:!1}),mJ={state:Ve,subscribe(t){return ci(Ve,()=>{t(Ve)})},subscribeKey(t,e){return ui(Ve,t,e)},subscribeAccountStateProp(t,e,r){const n=r||Ve.activeChain;return n?ui(Ve.chains.get(n)?.accountState||{},t,e):()=>{}},subscribeChainProp(t,e,r){let n;return ci(Ve.chains,()=>{const s=r||Ve.activeChain;if(s){const i=Ve.chains.get(s)?.[t];n!==i&&(n=i,e(i))}})},initialize(t,e,r){const{chainId:n,namespace:s}=Ae.getActiveNetworkProps(),i=e?.find(l=>l.id.toString()===n?.toString()),a=t.find(l=>l?.namespace===s)||t?.[0],c=t.map(l=>l.namespace).filter(l=>l!==void 0),u=we.state.enableEmbedded?new Set([...c]):new Set([...e?.map(l=>l.chainNamespace)??[]]);(t?.length===0||!a)&&(Ve.noAdapters=!0),Ve.noAdapters||(Ve.activeChain=a?.namespace,Ve.activeCaipNetwork=i,J.setChainNetworkData(a?.namespace,{caipNetwork:i}),Ve.activeChain&&Cu.set({activeChain:a?.namespace})),u.forEach(l=>{const d=e?.filter(g=>g.chainNamespace===l),f=Ae.getPreferredAccountTypes()||{},p={...we.state.defaultAccountTypes,...f};J.state.chains.set(l,{namespace:l,networkState:Dn({...F_,caipNetwork:d?.[0]}),accountState:Dn({...w3,preferredAccountType:p[l]}),caipNetworks:d??[],...r}),J.setRequestedCaipNetworks(d??[],l)})},removeAdapter(t){if(Ve.activeChain===t){const e=Array.from(Ve.chains.entries()).find(([r])=>r!==t);if(e){const r=e[1]?.caipNetworks?.[0];r&&J.setActiveCaipNetwork(r)}}Ve.chains.delete(t)},addAdapter(t,{connectionControllerClient:e},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Ve.chains.set(t.namespace,{namespace:t.namespace,networkState:{...F_,caipNetwork:r[0]},accountState:{...w3},caipNetworks:r,connectionControllerClient:e}),J.setRequestedCaipNetworks(r?.filter(n=>n.chainNamespace===t.namespace)??[],t.namespace)},addNetwork(t){const e=Ve.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];e.caipNetworks?.find(n=>n.id===t.id)||r.push(t),Ve.chains.set(t.chainNamespace,{...e,caipNetworks:r}),J.setRequestedCaipNetworks(r,t.chainNamespace),Re.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){const r=Ve.chains.get(t);if(r){const n=Ve.activeCaipNetwork?.id===e,s=[...r.caipNetworks?.filter(i=>i.id!==e)||[]];n&&r?.caipNetworks?.[0]&&J.setActiveCaipNetwork(r.caipNetworks[0]),Ve.chains.set(t,{...r,caipNetworks:s}),J.setRequestedCaipNetworks(s||[],t),s.length===0&&Re.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const r=Ve.chains.get(t);r&&(r.networkState={...r.networkState||F_,...e},Ve.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=Ve.chains.get(t);if(n){const s={...n.accountState||w3,...e};Ve.chains.set(t,{...n,accountState:s}),(Ve.chains.size===1||Ve.activeChain===t)&&e.caipAddress&&(Ve.activeCaipAddress=e.caipAddress)}},setChainNetworkData(t,e){if(!t)return;const r=Ve.chains.get(t);if(r){const n={...r.networkState||F_,...e};Ve.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){J.setChainAccountData(r,{[t]:e},n)},setActiveNamespace(t){Ve.activeChain=t;const e=t?Ve.chains.get(t):void 0,r=e?.networkState?.caipNetwork;r?.id&&t&&(Ve.activeCaipAddress=e?.accountState?.caipAddress,Ve.activeCaipNetwork=r,J.setChainNetworkData(t,{caipNetwork:r}),Ae.setActiveCaipNetworkId(r?.caipNetworkId),Cu.set({activeChain:t,selectedNetworkId:r?.caipNetworkId}))},setActiveCaipNetwork(t){if(!t)return;const e=Ve.activeChain===t.chainNamespace;e||J.setIsSwitchingNamespace(!0);const r=Ve.chains.get(t.chainNamespace);Ve.activeChain=t.chainNamespace,Ve.activeCaipNetwork=t,J.setChainNetworkData(t.chainNamespace,{caipNetwork:t});let n=r?.accountState?.address;if(n)Ve.activeCaipAddress=`${t.chainNamespace}:${t.id}:${n}`;else if(e&&Ve.activeCaipAddress){const{address:i}=xs.parseCaipAddress(Ve.activeCaipAddress);n=i,Ve.activeCaipAddress=`${t.caipNetworkId}:${n}`}else Ve.activeCaipAddress=void 0;J.setChainAccountData(t.chainNamespace,{address:n,caipAddress:Ve.activeCaipAddress}),tr.resetSend(),Cu.set({activeChain:Ve.activeChain,selectedNetworkId:Ve.activeCaipNetwork?.caipNetworkId}),Ae.setActiveCaipNetworkId(t.caipNetworkId),!J.checkIfSupportedNetwork(t.chainNamespace)&&we.state.enableNetworkSwitch&&!we.state.allowUnsupportedChain&&!ze.state.wcBasic&&J.showUnsupportedChainUI()},addCaipNetwork(t){if(!t)return;const e=Ve.chains.get(t.chainNamespace);e&&e?.caipNetworks?.push(t)},async switchActiveNamespace(t){if(!t)return;const e=t!==J.state.activeChain,r=J.getNetworkData(t)?.caipNetwork,n=J.getCaipNetworkByNamespace(t,r?.id);e&&n&&await J.switchActiveNetwork(n)},async switchActiveNetwork(t,{throwOnFailure:e=!1}={}){const r=J.state.activeChain;if(!r)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=br.getProviderId(Ve.activeChain)==="AUTH",s=J.getAccountData(r)?.address,i=ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t.chainNamespace);try{if(s&&t.chainNamespace===r||n&&i){const o=gJ.get(t.chainNamespace);if(!o)throw new Error("Adapter not found");await o.switchNetwork({caipNetwork:t})}J.setActiveCaipNetwork(t)}catch(o){if(e)throw o}Zt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})},getConnectionControllerClient(t){const e=t||Ve.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=Ve.chains.get(e);if(!r?.connectionControllerClient)throw new Error("ConnectionController client not set");return r.connectionControllerClient},getNetworkProp(t,e){const r=Ve.chains.get(e)?.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=Ve.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=e?.networkState||{};return ke.sortRequestedNetworks(r,n).filter(o=>o?.id)},getAllRequestedCaipNetworks(){const t=[];return Ve.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const r=J.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){J.setAdapterNetworkState(e,{requestedCaipNetworks:t});const n=J.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(n));Re.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Ve.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const r=J.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(t){return t?Ve.chains.get(t)?.networkState?.caipNetwork:Ve.activeCaipNetwork},getActiveCaipAddress(){return Ve.activeCaipAddress},getApprovedCaipNetworkIds(t){return Ve.chains.get(t)?.networkState?.approvedCaipNetworkIds||[]},setApprovedCaipNetworksData(t,e){J.setAdapterNetworkState(t,e)},checkIfSupportedNetwork(t,e){const r=e||Ve.activeCaipNetwork?.caipNetworkId,n=J.getRequestedCaipNetworks(t);return n.length?n?.some(s=>s.caipNetworkId===r):!0},checkIfSupportedChainId(t){return Ve.activeChain?J.getRequestedCaipNetworks(Ve.activeChain)?.some(r=>r.id===t):!0},checkIfSmartAccountEnabled(){const t=NY.caipNetworkIdToNumber(Ve.activeCaipNetwork?.caipNetworkId);return!Ve.activeChain||!t?!1:!!(qs.get(ct.SMART_ACCOUNT_ENABLED_NETWORKS)?.split(",")||[])?.includes(t.toString())},showUnsupportedChainUI(){dr.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Ve.activeCaipNetwork;return!!(t?.chainNamespace&&wr.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){J.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const r=J.state.chains.get(e)?.accountState?.preferredAccountType,n=we.state.defaultAccountTypes[e];Ve.activeCaipAddress=void 0,J.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Re.removeConnectorId(e)},setIsSwitchingNamespace(t){Ve.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){const t=[];let e;if(Ve.chains.forEach(r=>{ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(n=>n===r.namespace)&&r.namespace&&t.push(r.namespace)}),t.length>0){const r=t[0];return e=r?Ve.chains.get(r)?.caipNetworks?.[0]:void 0,e}},getAccountData(t){const e=t||Ve.activeChain;if(e)return J.state.chains.get(e)?.accountState},getNetworkData(t){const e=t||Ve.activeChain;if(e)return J.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(t,e){if(!t)return;const r=J.state.chains.get(t),n=r?.caipNetworks?.find(s=>s.id.toString()===e?.toString());return n||r?.networkState?.caipNetwork||r?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const t=Re.state.filterByNamespace;return(t?[Ve.chains.get(t)]:Array.from(Ve.chains.values())).flatMap(r=>r?.caipNetworks||[]).map(r=>r.caipNetworkId)},getCaipNetworks(t){return t?J.getRequestedCaipNetworks(t):J.getAllRequestedCaipNetworks()},getCaipNetworkById(t,e){return mJ.getCaipNetworks(e).find(r=>r.id.toString()===t.toString()||r.caipNetworkId.toString()===t.toString())},setLastConnectedSIWECaipNetwork(t){Ve.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Ve.lastConnectedSIWECaipNetwork},async fetchTokenBalance(t){const e=J.getAccountData();if(!e)return[];const r=J.state.activeCaipNetwork?.caipNetworkId,n=J.state.activeCaipNetwork?.chainNamespace,s=J.state.activeCaipAddress,i=s?ke.getPlainAddress(s):void 0;if(J.setAccountProp("balanceLoading",!0,n),e.lastRetry&&!ke.isAllowedRetry(e.lastRetry,30*wr.ONE_SEC_MS))return J.setAccountProp("balanceLoading",!1,n),[];try{if(i&&r&&n){const o=await I4.getMyTokensWithBalance();return J.setAccountProp("tokenBalance",o,n),J.setAccountProp("lastRetry",void 0,n),J.setAccountProp("balanceLoading",!1,n),o}}catch(o){J.setAccountProp("lastRetry",Date.now(),n),t?.(o),ml.showError("Token Balance Unavailable")}finally{J.setAccountProp("balanceLoading",!1,n)}return[]},isCaipNetworkDisabled(t){const e=t.chainNamespace,r=!!J.getAccountData(e)?.caipAddress,n=J.getAllApprovedCaipNetworkIds(),s=J.getNetworkProp("supportsAllNetworks",e)!==!1,i=Re.getConnectorId(e),o=Re.getAuthConnector(),a=i===ae.CONNECTOR_ID.AUTH&&o;return!r||s||a?!1:!n?.includes(t.caipNetworkId)}},J=zc(mJ),nhe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const r=J.state.activeCaipNetwork,n=J.state.activeChain,s=It.state.data;if(t.id===r?.id)return;const o=!!J.getAccountData(n)?.address,a=!!J.getAccountData(t.chainNamespace)?.address,c=t.chainNamespace!==n,l=Re.getConnectorId(n)===ae.CONNECTOR_ID.AUTH,d=ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(f=>f===t.chainNamespace);e||l&&d?It.push("SwitchNetwork",{...s,network:t}):o&&c&&!a?It.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):It.push("SwitchNetwork",{...s,network:t})}},Ho=Dn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),she={state:Ho,subscribe(t){return ci(Ho,()=>t(Ho))},subscribeKey(t,e){return ui(Ho,t,e)},async open(t){const e=t?.namespace,r=J.state.activeChain,n=e&&e!==r,s=J.getAccountData(t?.namespace)?.caipAddress,i=J.state.noAdapters;if(ze.state.wcBasic?pt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1}):await pt.prefetch(),Re.setFilterByNamespace(t?.namespace),dr.setLoading(!0,e),e&&n){const o=J.getNetworkData(e)?.caipNetwork||J.getRequestedCaipNetworks(e)[0];o&&(i?(await J.switchActiveNetwork(o),It.push("ConnectingWalletConnectBasic")):nhe.onSwitchNetwork({network:o,ignoreSwitchConfirmation:!0}))}else we.state.manualWCControl||i&&!s?ke.isMobile()?It.reset("AllWallets"):It.reset("ConnectingWalletConnectBasic"):t?.view?It.reset(t.view,t.data):s?It.reset("Account"):It.reset("Connect");Ho.open=!0,Cu.set({open:!0}),Zt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=we.state.enableEmbedded,e=!!J.state.activeCaipAddress;Ho.open&&Zt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Ho.open=!1,It.reset("Connect"),dr.clearLoading(),t?e?It.replace("Account"):It.push("Connect"):Cu.set({open:!1}),ze.resetUri()},setLoading(t,e){e&&Ho.loadingNamespaceMap.set(e,t),Ho.loading=t,Cu.set({loading:t})},clearLoading(){Ho.loadingNamespaceMap.clear(),Ho.loading=!1,Cu.set({loading:!1})},shake(){Ho.shake||(Ho.shake=!0,setTimeout(()=>{Ho.shake=!1},500))}},dr=zc(she),E1={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},i8={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},ihe={providers:BY,selectedProvider:null,error:null,purchaseCurrency:E1,paymentCurrency:i8,purchaseCurrencies:[E1],paymentCurrencies:[],quotesLoading:!1},Tr=Dn(ihe),ohe={state:Tr,subscribe(t){return ci(Tr,()=>t(Tr))},subscribeKey(t,e){return ui(Tr,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=J.state.activeChain,r=e===ae.CHAIN.SOLANA?"SOL":"USDC",n=e?J.state.chains.get(e)?.accountState?.address??"":"",s=new URL(t.url);s.searchParams.append("publicKey",Wce),s.searchParams.append("destinationCurrencyCode",r),s.searchParams.append("walletAddress",n),s.searchParams.append("externalCustomerId",we.state.projectId),Tr.selectedProvider={...t,url:s.toString()}}else Tr.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,r=BY.filter(n=>e.includes(n.name));Tr.providers=r}else Tr.providers=[]},setPurchaseCurrency(t){Tr.purchaseCurrency=t},setPaymentCurrency(t){Tr.paymentCurrency=t},setPurchaseAmount(t){o8.state.purchaseAmount=t},setPaymentAmount(t){o8.state.paymentAmount=t},async getAvailableCurrencies(){const t=await kt.getOnrampOptions();Tr.purchaseCurrencies=t.purchaseCurrencies,Tr.paymentCurrencies=t.paymentCurrencies,Tr.paymentCurrency=t.paymentCurrencies[0]||i8,Tr.purchaseCurrency=t.purchaseCurrencies[0]||E1,await pt.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await pt.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){Tr.quotesLoading=!0;try{const t=await kt.getOnrampQuote({purchaseCurrency:Tr.purchaseCurrency,paymentCurrency:Tr.paymentCurrency,amount:Tr.paymentAmount?.toString()||"0",network:Tr.purchaseCurrency?.symbol});return Tr.quotesLoading=!1,Tr.purchaseAmount=Number(t?.purchaseAmount.amount),t}catch(t){return Tr.error=t.message,Tr.quotesLoading=!1,null}finally{Tr.quotesLoading=!1}},resetState(){Tr.selectedProvider=null,Tr.error=null,Tr.purchaseCurrency=E1,Tr.paymentCurrency=i8,Tr.purchaseCurrencies=[E1],Tr.paymentCurrencies=[],Tr.paymentAmount=void 0,Tr.purchaseAmount=void 0,Tr.quotesLoading=!1}},o8=zc(ohe);var $_={exports:{}},fU;function yJ(){if(fU)return $_.exports;fU=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(T,P,D){return Function.prototype.apply.call(T,P,D)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:r=function(T){return Object.getOwnPropertyNames(T)};function n(_){console&&console.warn&&console.warn(_)}var s=Number.isNaN||function(T){return T!==T};function i(){i.init.call(this)}$_.exports=i,$_.exports.once=E,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(_){if(typeof _!="number"||_<0||s(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");o=_}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||s(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function c(_){return _._maxListeners===void 0?i.defaultMaxListeners:_._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(T){for(var P=[],D=1;D<arguments.length;D++)P.push(arguments[D]);var F=T==="error",I=this._events;if(I!==void 0)F=F&&I.error===void 0;else if(!F)return!1;if(F){var U;if(P.length>0&&(U=P[0]),U instanceof Error)throw U;var L=new Error("Unhandled error."+(U?" ("+U.message+")":""));throw L.context=U,L}var B=I[T];if(B===void 0)return!1;if(typeof B=="function")e(B,this,P);else for(var A=B.length,m=g(B,A),D=0;D<A;++D)e(m[D],this,P);return!0};function u(_,T,P,D){var F,I,U;if(a(P),I=_._events,I===void 0?(I=_._events=Object.create(null),_._eventsCount=0):(I.newListener!==void 0&&(_.emit("newListener",T,P.listener?P.listener:P),I=_._events),U=I[T]),U===void 0)U=I[T]=P,++_._eventsCount;else if(typeof U=="function"?U=I[T]=D?[P,U]:[U,P]:D?U.unshift(P):U.push(P),F=c(_),F>0&&U.length>F&&!U.warned){U.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+U.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=_,L.type=T,L.count=U.length,n(L)}return _}i.prototype.addListener=function(T,P){return u(this,T,P,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(T,P){return u(this,T,P,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(_,T,P){var D={fired:!1,wrapFn:void 0,target:_,type:T,listener:P},F=l.bind(D);return F.listener=P,D.wrapFn=F,F}i.prototype.once=function(T,P){return a(P),this.on(T,d(this,T,P)),this},i.prototype.prependOnceListener=function(T,P){return a(P),this.prependListener(T,d(this,T,P)),this},i.prototype.removeListener=function(T,P){var D,F,I,U,L;if(a(P),F=this._events,F===void 0)return this;if(D=F[T],D===void 0)return this;if(D===P||D.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete F[T],F.removeListener&&this.emit("removeListener",T,D.listener||P));else if(typeof D!="function"){for(I=-1,U=D.length-1;U>=0;U--)if(D[U]===P||D[U].listener===P){L=D[U].listener,I=U;break}if(I<0)return this;I===0?D.shift():h(D,I),D.length===1&&(F[T]=D[0]),F.removeListener!==void 0&&this.emit("removeListener",T,L||P)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(T){var P,D,F;if(D=this._events,D===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete D[T]),this;if(arguments.length===0){var I=Object.keys(D),U;for(F=0;F<I.length;++F)U=I[F],U!=="removeListener"&&this.removeAllListeners(U);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=D[T],typeof P=="function")this.removeListener(T,P);else if(P!==void 0)for(F=P.length-1;F>=0;F--)this.removeListener(T,P[F]);return this};function f(_,T,P){var D=_._events;if(D===void 0)return[];var F=D[T];return F===void 0?[]:typeof F=="function"?P?[F.listener||F]:[F]:P?y(F):g(F,F.length)}i.prototype.listeners=function(T){return f(this,T,!0)},i.prototype.rawListeners=function(T){return f(this,T,!1)},i.listenerCount=function(_,T){return typeof _.listenerCount=="function"?_.listenerCount(T):p.call(_,T)},i.prototype.listenerCount=p;function p(_){var T=this._events;if(T!==void 0){var P=T[_];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function g(_,T){for(var P=new Array(T),D=0;D<T;++D)P[D]=_[D];return P}function h(_,T){for(;T+1<_.length;T++)_[T]=_[T+1];_.pop()}function y(_){for(var T=new Array(_.length),P=0;P<T.length;++P)T[P]=_[P].listener||_[P];return T}function E(_,T){return new Promise(function(P,D){function F(U){_.removeListener(T,I),D(U)}function I(){typeof _.removeListener=="function"&&_.removeListener("error",F),P([].slice.call(arguments))}C(_,T,I,{once:!0}),T!=="error"&&S(_,F,{once:!0})})}function S(_,T,P){typeof _.on=="function"&&C(_,"error",T,P)}function C(_,T,P,D){if(typeof _.on=="function")D.once?_.once(T,P):_.on(T,P);else if(typeof _.addEventListener=="function")_.addEventListener(T,function F(I){D.once&&_.removeEventListener(T,F),P(I)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}return $_.exports}var Ys=yJ();const Ly=Ea(Ys);var v3={};var a8=function(t,e){return a8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},a8(t,e)};function ahe(t,e){a8(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var c8=function(){return c8=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},c8.apply(this,arguments)};function che(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function uhe(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function lhe(t,e){return function(r,n){e(r,n,t)}}function dhe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function fhe(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function hhe(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function phe(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function ghe(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function u8(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bJ(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function mhe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(bJ(arguments[e]));return t}function yhe(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Rv(t){return this instanceof Rv?(this.v=t,this):new Rv(t)}function bhe(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){n[f]&&(s[f]=function(p){return new Promise(function(g,h){i.push([f,p,g,h])>1||a(f,p)})})}function a(f,p){try{c(n[f](p))}catch(g){d(i[0][3],g)}}function c(f){f.value instanceof Rv?Promise.resolve(f.value.v).then(u,l):d(i[0][2],f)}function u(f){a("next",f)}function l(f){a("throw",f)}function d(f,p){f(p),i.shift(),i.length&&a(i[0][0],i[0][1])}}function whe(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:Rv(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function vhe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof u8=="function"?u8(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function Ehe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function _he(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Ahe(t){return t&&t.__esModule?t:{default:t}}function xhe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Che(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const She=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return c8},__asyncDelegator:whe,__asyncGenerator:bhe,__asyncValues:vhe,__await:Rv,__awaiter:fhe,__classPrivateFieldGet:xhe,__classPrivateFieldSet:Che,__createBinding:phe,__decorate:uhe,__exportStar:ghe,__extends:ahe,__generator:hhe,__importDefault:Ahe,__importStar:_he,__makeTemplateObject:Ehe,__metadata:dhe,__param:lhe,__read:bJ,__rest:che,__spread:mhe,__spreadArrays:yhe,__values:u8},Symbol.toStringTag,{value:"Module"})),CE=Ln(She);var E3={},Eb={},hU;function Ihe(){if(hU)return Eb;hU=1,Object.defineProperty(Eb,"__esModule",{value:!0}),Eb.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Eb.delay=t,Eb}var sp={},_3={},ip={},pU;function The(){return pU||(pU=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.ONE_THOUSAND=ip.ONE_HUNDRED=void 0,ip.ONE_HUNDRED=100,ip.ONE_THOUSAND=1e3),ip}var A3={},gU;function Nhe(){return gU||(gU=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365})(A3)),A3}var mU;function wJ(){return mU||(mU=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=CE;e.__exportStar(The(),t),e.__exportStar(Nhe(),t)})(_3)),_3}var yU;function Phe(){if(yU)return sp;yU=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.fromMiliseconds=sp.toMiliseconds=void 0;const t=wJ();function e(n){return n*t.ONE_THOUSAND}sp.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return sp.fromMiliseconds=r,sp}var bU;function Rhe(){return bU||(bU=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=CE;e.__exportStar(Ihe(),t),e.__exportStar(Phe(),t)})(E3)),E3}var mg={},wU;function Ohe(){if(wU)return mg;wU=1,Object.defineProperty(mg,"__esModule",{value:!0}),mg.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const s=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:s})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return mg.Watch=t,mg.default=t,mg}var x3={},_b={},vU;function khe(){if(vU)return _b;vU=1,Object.defineProperty(_b,"__esModule",{value:!0}),_b.IWatch=void 0;class t{}return _b.IWatch=t,_b}var EU;function Bhe(){return EU||(EU=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),CE.__exportStar(khe(),t)})(x3)),x3}var _U;function Uhe(){return _U||(_U=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=CE;e.__exportStar(Rhe(),t),e.__exportStar(Ohe(),t),e.__exportStar(Bhe(),t),e.__exportStar(wJ(),t)})(v3)),v3}var he=Uhe();class oc{}let Mhe=class extends oc{constructor(e){super()}};const AU=he.FIVE_SECONDS,ac={pulse:"heartbeat_pulse"};let vJ=class EJ extends Mhe{constructor(e){super(e),this.events=new Ys.EventEmitter,this.interval=AU,this.interval=e?.interval||AU}static async init(e){const r=new EJ(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),he.toMiliseconds(this.interval))}pulse(){this.events.emit(ac.pulse)}};const Dhe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,jhe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Lhe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Fhe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){$he(t);return}return e}function $he(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function q_(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Lhe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Dhe.test(t)||jhe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Fhe)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function qhe(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function ei(t,...e){try{return qhe(t(...e))}catch(r){return Promise.reject(r)}}function Hhe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function zhe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function aI(t){if(Hhe(t))return String(t);if(zhe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return aI(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const l8="base64:";function Whe(t){return typeof t=="string"?t:l8+Khe(t)}function Vhe(t){return typeof t!="string"||!t.startsWith(l8)?t:Ghe(t.slice(l8.length))}function Ghe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Khe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function ea(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function Zhe(...t){return ea(t.join(":"))}function H_(t){return t=ea(t),t?t+":":""}function Yhe(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function Jhe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const Xhe="memory",Qhe=()=>{const t=new Map;return{name:Xhe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function epe(t={}){const e={mounts:{"":t.driver||Qhe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=u=>{for(const l of e.mountpoints)if(u.startsWith(l))return{base:l,relativeKey:u.slice(l.length),driver:e.mounts[l]};return{base:"",relativeKey:u,driver:e.mounts[""]}},n=(u,l)=>e.mountpoints.filter(d=>d.startsWith(u)||l&&u.startsWith(d)).map(d=>({relativeBase:u.length>d.length?u.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(u,l)=>{if(e.watching){l=ea(l);for(const d of e.watchListeners)d(u,l)}},i=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await xU(e.mounts[u],s,u)}},o=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},a=(u,l,d)=>{const f=new Map,p=g=>{let h=f.get(g.base);return h||(h={driver:g.driver,base:g.base,items:[]},f.set(g.base,h)),h};for(const g of u){const h=typeof g=="string",y=ea(h?g:g.key),E=h?void 0:g.value,S=h||!g.options?l:{...l,...g.options},C=r(y);p(C).items.push({key:y,value:E,relativeKey:C.relativeKey,options:S})}return Promise.all([...f.values()].map(g=>d(g))).then(g=>g.flat())},c={hasItem(u,l={}){u=ea(u);const{relativeKey:d,driver:f}=r(u);return ei(f.hasItem,d,l)},getItem(u,l={}){u=ea(u);const{relativeKey:d,driver:f}=r(u);return ei(f.getItem,d,l).then(p=>q_(p))},getItems(u,l={}){return a(u,l,d=>d.driver.getItems?ei(d.driver.getItems,d.items.map(f=>({key:f.relativeKey,options:f.options})),l).then(f=>f.map(p=>({key:Zhe(d.base,p.key),value:q_(p.value)}))):Promise.all(d.items.map(f=>ei(d.driver.getItem,f.relativeKey,f.options).then(p=>({key:f.key,value:q_(p)})))))},getItemRaw(u,l={}){u=ea(u);const{relativeKey:d,driver:f}=r(u);return f.getItemRaw?ei(f.getItemRaw,d,l):ei(f.getItem,d,l).then(p=>Vhe(p))},async setItem(u,l,d={}){if(l===void 0)return c.removeItem(u);u=ea(u);const{relativeKey:f,driver:p}=r(u);p.setItem&&(await ei(p.setItem,f,aI(l),d),p.watch||s("update",u))},async setItems(u,l){await a(u,l,async d=>{if(d.driver.setItems)return ei(d.driver.setItems,d.items.map(f=>({key:f.relativeKey,value:aI(f.value),options:f.options})),l);d.driver.setItem&&await Promise.all(d.items.map(f=>ei(d.driver.setItem,f.relativeKey,aI(f.value),f.options)))})},async setItemRaw(u,l,d={}){if(l===void 0)return c.removeItem(u,d);u=ea(u);const{relativeKey:f,driver:p}=r(u);if(p.setItemRaw)await ei(p.setItemRaw,f,l,d);else if(p.setItem)await ei(p.setItem,f,Whe(l),d);else return;p.watch||s("update",u)},async removeItem(u,l={}){typeof l=="boolean"&&(l={removeMeta:l}),u=ea(u);const{relativeKey:d,driver:f}=r(u);f.removeItem&&(await ei(f.removeItem,d,l),(l.removeMeta||l.removeMata)&&await ei(f.removeItem,d+"$",l),f.watch||s("remove",u))},async getMeta(u,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),u=ea(u);const{relativeKey:d,driver:f}=r(u),p=Object.create(null);if(f.getMeta&&Object.assign(p,await ei(f.getMeta,d,l)),!l.nativeOnly){const g=await ei(f.getItem,d+"$",l).then(h=>q_(h));g&&typeof g=="object"&&(typeof g.atime=="string"&&(g.atime=new Date(g.atime)),typeof g.mtime=="string"&&(g.mtime=new Date(g.mtime)),Object.assign(p,g))}return p},setMeta(u,l,d={}){return this.setItem(u+"$",l,d)},removeMeta(u,l={}){return this.removeItem(u+"$",l)},async getKeys(u,l={}){u=H_(u);const d=n(u,!0);let f=[];const p=[];let g=!0;for(const y of d){y.driver.flags?.maxDepth||(g=!1);const E=await ei(y.driver.getKeys,y.relativeBase,l);for(const S of E){const C=y.mountpoint+ea(S);f.some(_=>C.startsWith(_))||p.push(C)}f=[y.mountpoint,...f.filter(S=>!S.startsWith(y.mountpoint))]}const h=l.maxDepth!==void 0&&!g;return p.filter(y=>(!h||Yhe(y,l.maxDepth))&&Jhe(y,u))},async clear(u,l={}){u=H_(u),await Promise.all(n(u,!1).map(async d=>{if(d.driver.clear)return ei(d.driver.clear,d.relativeBase,l);if(d.driver.removeItem){const f=await d.driver.getKeys(d.relativeBase||"",l);return Promise.all(f.map(p=>d.driver.removeItem(p,l)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>CU(u)))},async watch(u){return await i(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(l=>l!==u),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(u,l){if(u=H_(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((d,f)=>f.length-d.length)),e.mounts[u]=l,e.watching&&Promise.resolve(xU(l,s,u)).then(d=>{e.unwatch[u]=d}).catch(console.error),c},async unmount(u,l=!0){u=H_(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&(e.unwatch[u]?.(),delete e.unwatch[u]),l&&await CU(e.mounts[u]),e.mountpoints=e.mountpoints.filter(d=>d!==u),delete e.mounts[u])},getMount(u=""){u=ea(u)+":";const l=r(u);return{driver:l.driver,base:l.base}},getMounts(u="",l={}){return u=ea(u),n(u,l.parents).map(f=>({driver:f.driver,base:f.mountpoint}))},keys:(u,l={})=>c.getKeys(u,l),get:(u,l={})=>c.getItem(u,l),set:(u,l,d={})=>c.setItem(u,l,d),has:(u,l={})=>c.hasItem(u,l),del:(u,l={})=>c.removeItem(u,l),remove:(u,l={})=>c.removeItem(u,l)};return c}function xU(t,e,r){return t.watch?t.watch((n,s)=>e(n,r+s)):()=>{}}async function CU(t){typeof t.dispose=="function"&&await ei(t.dispose)}function $0(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function _J(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=$0(r);return(s,i)=>n.then(o=>i(o.transaction(e,s).objectStore(e)))}let C3;function SE(){return C3||(C3=_J("keyval-store","keyval")),C3}function SU(t,e=SE()){return e("readonly",r=>$0(r.get(t)))}function tpe(t,e,r=SE()){return r("readwrite",n=>(n.put(e,t),$0(n.transaction)))}function rpe(t,e=SE()){return e("readwrite",r=>(r.delete(t),$0(r.transaction)))}function npe(t=SE()){return t("readwrite",e=>(e.clear(),$0(e.transaction)))}function spe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},$0(t.transaction)}function ipe(t=SE()){return t("readonly",e=>{if(e.getAllKeys)return $0(e.getAllKeys());const r=[];return spe(e,n=>r.push(n.key)).then(()=>r)})}const ope="idb-keyval";var ape=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=s=>e+s;let n;return t.dbName&&t.storeName&&(n=_J(t.dbName,t.storeName)),{name:ope,options:t,async hasItem(s){return!(typeof await SU(r(s),n)>"u")},async getItem(s){return await SU(r(s),n)??null},setItem(s,i){return tpe(r(s),i,n)},removeItem(s){return rpe(r(s),n)},getKeys(){return ipe(n)},clear(){return npe(n)}}};const cpe="WALLET_CONNECT_V2_INDEXED_DB",upe="keyvaluestorage";let lpe=class{constructor(){this.indexedDb=epe({driver:ape({dbName:cpe,storeName:upe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Lc(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var S3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cI={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof S3<"u"&&S3.localStorage?cI.exports=S3.localStorage:typeof window<"u"&&window.localStorage?cI.exports=window.localStorage:cI.exports=new e})();function dpe(t){var e;return[t[0],Xd((e=t[1])!=null?e:"")]}let fpe=class{constructor(){this.localStorage=cI.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(dpe)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Xd(r)}async setItem(e,r){this.localStorage.setItem(e,Lc(r))}async removeItem(e){this.localStorage.removeItem(e)}};const hpe="wc_storage_version",IU=1,ppe=async(t,e,r)=>{const n=hpe,s=await e.getItem(n);if(s&&s>=IU){r(e);return}const i=await t.getKeys();if(!i.length){r(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await t.getItem(a);await e.setItem(a,u),o.push(a)}}await e.setItem(n,IU),r(e),gpe(t,o)},gpe=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let AJ=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new fpe;this.storage=e;try{const r=new lpe;ppe(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var mpe=Object.defineProperty,ype=(t,e,r)=>e in t?mpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,TU=(t,e,r)=>ype(t,typeof e!="symbol"?e+"":e,r);let bpe=class extends oc{constructor(e){super(),this.opts=e,TU(this,"protocol","wc"),TU(this,"version",2)}};var wpe=Object.defineProperty,vpe=(t,e,r)=>e in t?wpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Epe=(t,e,r)=>vpe(t,e+"",r);let _pe=class extends oc{constructor(e,r){super(),this.core=e,this.logger=r,Epe(this,"records",new Map)}},Ape=class{constructor(e,r){this.logger=e,this.core=r}},xpe=class extends oc{constructor(e,r){super(),this.relayer=e,this.logger=r}},Cpe=class extends oc{constructor(e){super()}},Spe=class{constructor(e,r,n,s){this.core=e,this.logger=r,this.name=n}},Ipe=class extends oc{constructor(e,r){super(),this.relayer=e,this.logger=r}},Tpe=class extends oc{constructor(e,r){super(),this.core=e,this.logger=r}},Npe=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},Ppe=class{constructor(e,r){this.projectId=e,this.logger=r}},Rpe=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};var Ope=Object.defineProperty,kpe=(t,e,r)=>e in t?Ope(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,NU=(t,e,r)=>kpe(t,typeof e!="symbol"?e+"":e,r);let Bpe=class{constructor(e){this.opts=e,NU(this,"protocol","wc"),NU(this,"version",2)}},Upe=class{constructor(e){this.client=e}};function Mpe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function xJ(t,...e){if(!Mpe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function PU(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Dpe(t,e){xJ(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const yg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const I3=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function jpe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function CJ(t){return typeof t=="string"&&(t=jpe(t)),xJ(t),t}let Lpe=class{clone(){return this._cloneInto()}};function Fpe(t){const e=n=>t().update(CJ(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function SJ(t=32){if(yg&&typeof yg.getRandomValues=="function")return yg.getRandomValues(new Uint8Array(t));if(yg&&typeof yg.randomBytes=="function")return yg.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function $pe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}let qpe=class extends Lpe{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=I3(this.buffer)}update(e){PU(this);const{view:r,buffer:n,blockLen:s}=this;e=CJ(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=I3(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){PU(this),Dpe(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;$pe(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=I3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};const z_=BigInt(2**32-1),d8=BigInt(32);function IJ(t,e=!1){return e?{h:Number(t&z_),l:Number(t>>d8&z_)}:{h:Number(t>>d8&z_)|0,l:Number(t&z_)|0}}function Hpe(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=IJ(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const zpe=(t,e)=>BigInt(t>>>0)<<d8|BigInt(e>>>0),Wpe=(t,e,r)=>t>>>r,Vpe=(t,e,r)=>t<<32-r|e>>>r,Gpe=(t,e,r)=>t>>>r|e<<32-r,Kpe=(t,e,r)=>t<<32-r|e>>>r,Zpe=(t,e,r)=>t<<64-r|e>>>r-32,Ype=(t,e,r)=>t>>>r-32|e<<64-r,Jpe=(t,e)=>e,Xpe=(t,e)=>t,Qpe=(t,e,r)=>t<<r|e>>>32-r,e0e=(t,e,r)=>e<<r|t>>>32-r,t0e=(t,e,r)=>e<<r-32|t>>>64-r,r0e=(t,e,r)=>t<<r-32|e>>>64-r;function n0e(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const s0e=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),i0e=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,o0e=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),a0e=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,c0e=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),u0e=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,er={fromBig:IJ,split:Hpe,toBig:zpe,shrSH:Wpe,shrSL:Vpe,rotrSH:Gpe,rotrSL:Kpe,rotrBH:Zpe,rotrBL:Ype,rotr32H:Jpe,rotr32L:Xpe,rotlSH:Qpe,rotlSL:e0e,rotlBH:t0e,rotlBL:r0e,add:n0e,add3L:s0e,add3H:i0e,add4L:o0e,add4H:a0e,add5H:u0e,add5L:c0e},[l0e,d0e]=er.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),pf=new Uint32Array(80),gf=new Uint32Array(80);let f0e=class extends qpe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:p,Gl:g,Hh:h,Hl:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=p|0,this.Gl=g|0,this.Hh=h|0,this.Hl=y|0}process(e,r){for(let C=0;C<16;C++,r+=4)pf[C]=e.getUint32(r),gf[C]=e.getUint32(r+=4);for(let C=16;C<80;C++){const _=pf[C-15]|0,T=gf[C-15]|0,P=er.rotrSH(_,T,1)^er.rotrSH(_,T,8)^er.shrSH(_,T,7),D=er.rotrSL(_,T,1)^er.rotrSL(_,T,8)^er.shrSL(_,T,7),F=pf[C-2]|0,I=gf[C-2]|0,U=er.rotrSH(F,I,19)^er.rotrBH(F,I,61)^er.shrSH(F,I,6),L=er.rotrSL(F,I,19)^er.rotrBL(F,I,61)^er.shrSL(F,I,6),B=er.add4L(D,L,gf[C-7],gf[C-16]),A=er.add4H(B,P,U,pf[C-7],pf[C-16]);pf[C]=A|0,gf[C]=B|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:p,Fl:g,Gh:h,Gl:y,Hh:E,Hl:S}=this;for(let C=0;C<80;C++){const _=er.rotrSH(d,f,14)^er.rotrSH(d,f,18)^er.rotrBH(d,f,41),T=er.rotrSL(d,f,14)^er.rotrSL(d,f,18)^er.rotrBL(d,f,41),P=d&p^~d&h,D=f&g^~f&y,F=er.add5L(S,T,D,d0e[C],gf[C]),I=er.add5H(F,E,_,P,l0e[C],pf[C]),U=F|0,L=er.rotrSH(n,s,28)^er.rotrBH(n,s,34)^er.rotrBH(n,s,39),B=er.rotrSL(n,s,28)^er.rotrBL(n,s,34)^er.rotrBL(n,s,39),A=n&i^n&a^i&a,m=s&o^s&c^o&c;E=h|0,S=y|0,h=p|0,y=g|0,p=d|0,g=f|0,{h:d,l:f}=er.add(u|0,l|0,I|0,U|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const b=er.add3L(U,B,m);n=er.add3H(b,I,L,A),s=b|0}({h:n,l:s}=er.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=er.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=er.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=er.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=er.add(this.Eh|0,this.El|0,d|0,f|0),{h:p,l:g}=er.add(this.Fh|0,this.Fl|0,p|0,g|0),{h,l:y}=er.add(this.Gh|0,this.Gl|0,h|0,y|0),{h:E,l:S}=er.add(this.Hh|0,this.Hl|0,E|0,S|0),this.set(n,s,i,o,a,c,u,l,d,f,p,g,h,y,E,S)}roundClean(){pf.fill(0),gf.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const h0e=Fpe(()=>new f0e);const T4=BigInt(0),TJ=BigInt(1),p0e=BigInt(2);function N4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function P4(t){if(!N4(t))throw new Error("Uint8Array expected")}function T3(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const g0e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function R4(t){P4(t);let e="";for(let r=0;r<t.length;r++)e+=g0e[t[r]];return e}function NJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?T4:BigInt("0x"+t)}const Gl={_0:48,_9:57,A:65,F:70,a:97,f:102};function RU(t){if(t>=Gl._0&&t<=Gl._9)return t-Gl._0;if(t>=Gl.A&&t<=Gl.F)return t-(Gl.A-10);if(t>=Gl.a&&t<=Gl.f)return t-(Gl.a-10)}function PJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=RU(t.charCodeAt(i)),a=RU(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function m0e(t){return NJ(R4(t))}function uI(t){return P4(t),NJ(R4(Uint8Array.from(t).reverse()))}function RJ(t,e){return PJ(t.toString(16).padStart(e*2,"0"))}function f8(t,e){return RJ(t,e).reverse()}function Kl(t,e,r){let n;if(typeof e=="string")try{n=PJ(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(N4(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function OU(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];P4(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}const N3=t=>typeof t=="bigint"&&T4<=t;function y0e(t,e,r){return N3(t)&&N3(e)&&N3(r)&&e<=t&&t<r}function Ab(t,e,r,n){if(!y0e(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function b0e(t){let e;for(e=0;t>T4;t>>=TJ,e+=1);return e}const w0e=t=>(p0e<<BigInt(t-1))-TJ,v0e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||N4(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function O4(t,e,r={}){const n=(s,i,o)=>{const a=v0e[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}function kU(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const ai=BigInt(0),Cs=BigInt(1),Fp=BigInt(2),E0e=BigInt(3),h8=BigInt(4),BU=BigInt(5),UU=BigInt(8);function Ws(t,e){const r=t%e;return r>=ai?r:e+r}function _0e(t,e,r){if(e<ai)throw new Error("invalid exponent, negatives unsupported");if(r<=ai)throw new Error("invalid modulus");if(r===Cs)return ai;let n=Cs;for(;e>ai;)e&Cs&&(n=n*t%r),t=t*t%r,e>>=Cs;return n}function Gu(t,e,r){let n=t;for(;e-- >ai;)n*=n,n%=r;return n}function MU(t,e){if(t===ai)throw new Error("invert: expected non-zero number");if(e<=ai)throw new Error("invert: expected positive modulus, got "+e);let r=Ws(t,e),n=e,s=ai,i=Cs;for(;r!==ai;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==Cs)throw new Error("invert: does not exist");return Ws(s,e)}function A0e(t){const e=(t-Cs)/Fp;let r,n,s;for(r=t-Cs,n=0;r%Fp===ai;r/=Fp,n++);for(s=Fp;s<t&&_0e(s,e,t)!==t-Cs;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+Cs)/h8;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(r+Cs)/Fp;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,u=o.pow(o.mul(o.ONE,s),r),l=o.pow(a,i),d=o.pow(a,r);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let g=o.sqr(d);f<c&&!o.eql(g,o.ONE);f++)g=o.sqr(g);const p=o.pow(u,Cs<<BigInt(c-f-1));u=o.sqr(p),l=o.mul(l,p),d=o.mul(d,u),c=f}return l}}function x0e(t){if(t%h8===E0e){const e=(t+Cs)/h8;return function(r,n){const s=r.pow(n,e);if(!r.eql(r.sqr(s),n))throw new Error("Cannot find square root");return s}}if(t%UU===BU){const e=(t-BU)/UU;return function(r,n){const s=r.mul(n,Fp),i=r.pow(s,e),o=r.mul(n,i),a=r.mul(r.mul(o,Fp),i),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return A0e(t)}const C0e=(t,e)=>(Ws(t,e)&Cs)===Cs,S0e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function I0e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=S0e.reduce((n,s)=>(n[s]="function",n),e);return O4(t,r)}function T0e(t,e,r){if(r<ai)throw new Error("invalid exponent, negatives unsupported");if(r===ai)return t.ONE;if(r===Cs)return e;let n=t.ONE,s=e;for(;r>ai;)r&Cs&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Cs;return n}function N0e(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function OJ(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function kJ(t,e,r=!1,n={}){if(t<=ai)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=OJ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:i,MASK:w0e(s),ZERO:ai,ONE:Cs,create:c=>Ws(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ai<=c&&c<t},is0:c=>c===ai,isOdd:c=>(c&Cs)===Cs,neg:c=>Ws(-c,t),eql:(c,u)=>c===u,sqr:c=>Ws(c*c,t),add:(c,u)=>Ws(c+u,t),sub:(c,u)=>Ws(c-u,t),mul:(c,u)=>Ws(c*u,t),pow:(c,u)=>T0e(a,c,u),div:(c,u)=>Ws(c*MU(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>MU(c,t),sqrt:n.sqrt||(c=>(o||(o=x0e(t)),o(a,c))),invertBatch:c=>N0e(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?f8(c,i):RJ(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?uI(c):m0e(c)}});return Object.freeze(a)}const DU=BigInt(0),W_=BigInt(1);function P3(t,e){const r=e.negate();return t?r:e}function BJ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function R3(t,e){BJ(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function P0e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function R0e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const O3=new WeakMap,UJ=new WeakMap;function k3(t){return UJ.get(t)||1}function O0e(t,e){return{constTimeNegate:P3,hasPrecomputes(r){return k3(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>DU;)n&W_&&(s=s.add(i)),i=i.double(),n>>=W_;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=R3(n,e),o=[];let a=r,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){const{windows:i,windowSize:o}=R3(r,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**r-1),l=2**r,d=BigInt(r);for(let f=0;f<i;f++){const p=f*o;let g=Number(s&u);s>>=d,g>o&&(g-=l,s+=W_);const h=p,y=p+Math.abs(g)-1,E=f%2!==0,S=g<0;g===0?c=c.add(P3(E,n[h])):a=a.add(P3(S,n[y]))}return{p:a,f:c}},wNAFUnsafe(r,n,s,i=t.ZERO){const{windows:o,windowSize:a}=R3(r,e),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let d=0;d<o;d++){const f=d*a;if(s===DU)break;let p=Number(s&c);if(s>>=l,p>a&&(p-=u,s+=W_),p===0)continue;let g=n[f+Math.abs(p)-1];p<0&&(g=g.negate()),i=i.add(g)}return i},getPrecomputes(r,n,s){let i=O3.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&O3.set(n,s(i))),i},wNAFCached(r,n,s){const i=k3(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=k3(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){BJ(n,e),UJ.set(r,n),O3.delete(r)}}}function k0e(t,e,r,n){if(P0e(r,t),R0e(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=b0e(BigInt(r.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let d=u;d>=0;d-=o){c.fill(s);for(let p=0;p<n.length;p++){const g=n[p],h=Number(g>>BigInt(d)&BigInt(a));c[h]=c[h].add(r[p])}let f=s;for(let p=c.length-1,g=s;p>0;p--)g=g.add(c[p]),f=f.add(g);if(l=l.add(f),d!==0)for(let p=0;p<o;p++)l=l.double()}return l}function B0e(t){return I0e(t.Fp),O4(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...OJ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const eu=BigInt(0),zo=BigInt(1),V_=BigInt(2),U0e=BigInt(8),M0e={zip215:!0};function D0e(t){const e=B0e(t);return O4(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function j0e(t){const e=D0e(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,u=V_<<BigInt(a*8)-zo,l=r.create,d=kJ(e.n,e.nBitLength),f=e.uvRatio||((b,w)=>{try{return{isValid:!0,value:r.sqrt(b*r.inv(w))}}catch{return{isValid:!1,value:eu}}}),p=e.adjustScalarBytes||(b=>b),g=e.domain||((b,w,x)=>{if(T3("phflag",x),w.length||x)throw new Error("Contexts/pre-hash are not supported");return b});function h(b,w){Ab("coordinate "+b,w,eu,u)}function y(b){if(!(b instanceof C))throw new Error("ExtendedPoint expected")}const E=kU((b,w)=>{const{ex:x,ey:M,ez:k}=b,j=b.is0();w==null&&(w=j?U0e:r.inv(k));const N=l(x*w),v=l(M*w),R=l(k*w);if(j)return{x:eu,y:zo};if(R!==zo)throw new Error("invZ was invalid");return{x:N,y:v}}),S=kU(b=>{const{a:w,d:x}=e;if(b.is0())throw new Error("bad point: ZERO");const{ex:M,ey:k,ez:j,et:N}=b,v=l(M*M),R=l(k*k),$=l(j*j),O=l($*$),H=l(v*w),W=l($*l(H+R)),G=l(O+l(x*l(v*R)));if(W!==G)throw new Error("bad point: equation left != right (1)");const K=l(M*k),Q=l(j*N);if(K!==Q)throw new Error("bad point: equation left != right (2)");return!0});class C{constructor(w,x,M,k){this.ex=w,this.ey=x,this.ez=M,this.et=k,h("x",w),h("y",x),h("z",M),h("t",k),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof C)throw new Error("extended point not allowed");const{x,y:M}=w||{};return h("x",x),h("y",M),new C(x,M,zo,l(x*M))}static normalizeZ(w){const x=r.invertBatch(w.map(M=>M.ez));return w.map((M,k)=>M.toAffine(x[k])).map(C.fromAffine)}static msm(w,x){return k0e(C,d,w,x)}_setWindowSize(w){P.setWindowSize(this,w)}assertValidity(){S(this)}equals(w){y(w);const{ex:x,ey:M,ez:k}=this,{ex:j,ey:N,ez:v}=w,R=l(x*v),$=l(j*k),O=l(M*v),H=l(N*k);return R===$&&O===H}is0(){return this.equals(C.ZERO)}negate(){return new C(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:w}=e,{ex:x,ey:M,ez:k}=this,j=l(x*x),N=l(M*M),v=l(V_*l(k*k)),R=l(w*j),$=x+M,O=l(l($*$)-j-N),H=R+N,W=H-v,G=R-N,K=l(O*W),Q=l(H*G),re=l(O*G),de=l(W*H);return new C(K,Q,de,re)}add(w){y(w);const{a:x,d:M}=e,{ex:k,ey:j,ez:N,et:v}=this,{ex:R,ey:$,ez:O,et:H}=w;if(x===BigInt(-1)){const At=l((j-k)*($+R)),Ee=l((j+k)*($-R)),fe=l(Ee-At);if(fe===eu)return this.double();const Mt=l(N*V_*H),bt=l(v*V_*O),jt=bt+Mt,ge=Ee+At,ve=bt-Mt,V=l(jt*fe),q=l(ge*ve),z=l(jt*ve),X=l(fe*ge);return new C(V,q,X,z)}const W=l(k*R),G=l(j*$),K=l(v*M*H),Q=l(N*O),re=l((k+j)*(R+$)-W-G),de=Q-K,le=Q+K,se=l(G-x*W),be=l(re*de),We=l(le*se),Ne=l(re*se),Be=l(de*le);return new C(be,We,Be,Ne)}subtract(w){return this.add(w.negate())}wNAF(w){return P.wNAFCached(this,w,C.normalizeZ)}multiply(w){const x=w;Ab("scalar",x,zo,n);const{p:M,f:k}=this.wNAF(x);return C.normalizeZ([M,k])[0]}multiplyUnsafe(w,x=C.ZERO){const M=w;return Ab("scalar",M,eu,n),M===eu?T:this.is0()||M===zo?this:P.wNAFCachedUnsafe(this,M,C.normalizeZ,x)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return P.unsafeLadder(this,n).is0()}toAffine(w){return E(this,w)}clearCofactor(){const{h:w}=e;return w===zo?this:this.multiplyUnsafe(w)}static fromHex(w,x=!1){const{d:M,a:k}=e,j=r.BYTES;w=Kl("pointHex",w,j),T3("zip215",x);const N=w.slice(),v=w[j-1];N[j-1]=v&-129;const R=uI(N),$=x?u:r.ORDER;Ab("pointHex.y",R,eu,$);const O=l(R*R),H=l(O-zo),W=l(M*O-k);let{isValid:G,value:K}=f(H,W);if(!G)throw new Error("Point.fromHex: invalid y coordinate");const Q=(K&zo)===zo,re=(v&128)!==0;if(!x&&K===eu&&re)throw new Error("Point.fromHex: x=0 and x_0=1");return re!==Q&&(K=l(-K)),C.fromAffine({x:K,y:R})}static fromPrivateKey(w){return I(w).point}toRawBytes(){const{x:w,y:x}=this.toAffine(),M=f8(x,r.BYTES);return M[M.length-1]|=w&zo?128:0,M}toHex(){return R4(this.toRawBytes())}}C.BASE=new C(e.Gx,e.Gy,zo,l(e.Gx*e.Gy)),C.ZERO=new C(eu,zo,zo,eu);const{BASE:_,ZERO:T}=C,P=O0e(C,a*8);function D(b){return Ws(b,n)}function F(b){return D(uI(b))}function I(b){const w=r.BYTES;b=Kl("private key",b,w);const x=Kl("hashed private key",i(b),2*w),M=p(x.slice(0,w)),k=x.slice(w,2*w),j=F(M),N=_.multiply(j),v=N.toRawBytes();return{head:M,prefix:k,scalar:j,point:N,pointBytes:v}}function U(b){return I(b).pointBytes}function L(b=new Uint8Array,...w){const x=OU(...w);return F(i(g(x,Kl("context",b),!!s)))}function B(b,w,x={}){b=Kl("message",b),s&&(b=s(b));const{prefix:M,scalar:k,pointBytes:j}=I(w),N=L(x.context,M,b),v=_.multiply(N).toRawBytes(),R=L(x.context,v,j,b),$=D(N+R*k);Ab("signature.s",$,eu,n);const O=OU(v,f8($,r.BYTES));return Kl("result",O,r.BYTES*2)}const A=M0e;function m(b,w,x,M=A){const{context:k,zip215:j}=M,N=r.BYTES;b=Kl("signature",b,2*N),w=Kl("message",w),x=Kl("publicKey",x,N),j!==void 0&&T3("zip215",j),s&&(w=s(w));const v=uI(b.slice(N,2*N));let R,$,O;try{R=C.fromHex(x,j),$=C.fromHex(b.slice(0,N),j),O=_.multiplyUnsafe(v)}catch{return!1}if(!j&&R.isSmallOrder())return!1;const H=L(k,$.toRawBytes(),R.toRawBytes(),w);return $.add(R.multiplyUnsafe(H)).subtract(O).clearCofactor().equals(C.ZERO)}return _._setWindowSize(8),{CURVE:e,getPublicKey:U,sign:B,verify:m,ExtendedPoint:C,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>o(r.BYTES),precompute(b=8,w=C.BASE){return w._setWindowSize(b),w.multiply(BigInt(3)),w}}}}BigInt(0),BigInt(1);const k4=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),jU=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const L0e=BigInt(1),LU=BigInt(2);BigInt(3);const F0e=BigInt(5),$0e=BigInt(8);function q0e(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=k4,o=t*t%i*t%i,a=Gu(o,LU,i)*o%i,c=Gu(a,L0e,i)*t%i,u=Gu(c,F0e,i)*c%i,l=Gu(u,e,i)*u%i,d=Gu(l,r,i)*l%i,f=Gu(d,n,i)*d%i,p=Gu(f,s,i)*f%i,g=Gu(p,s,i)*f%i,h=Gu(g,e,i)*u%i;return{pow_p_5_8:Gu(h,LU,i)*t%i,b2:o}}function H0e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function z0e(t,e){const r=k4,n=Ws(e*e*e,r),s=Ws(n*n*e,r),i=q0e(t*s).pow_p_5_8;let o=Ws(t*n*i,r);const a=Ws(e*o*o,r),c=o,u=Ws(o*jU,r),l=a===t,d=a===Ws(-t,r),f=a===Ws(-t*jU,r);return l&&(o=c),(d||f)&&(o=u),C0e(o,r)&&(o=Ws(-o,r)),{isValid:l||d,value:o}}const W0e=kJ(k4,void 0,!0),V0e={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:W0e,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:$0e,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:h0e,randomBytes:SJ,adjustScalarBytes:H0e,uvRatio:z0e},MJ=j0e(V0e),G0e="EdDSA",K0e="JWT",s6=".",A5="base64url",DJ="utf8",jJ="utf8",Z0e=":",Y0e="did",J0e="key",FU="base58btc",X0e="z",Q0e="K36",ege=32;function B4(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function LJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?B4(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function FJ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=LJ(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return B4(r)}function tge(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var h=0,y=0,E=0,S=g.length;E!==S&&g[E]===0;)E++,h++;for(var C=(S-E)*l+1>>>0,_=new Uint8Array(C);E!==S;){for(var T=g[E],P=0,D=C-1;(T!==0||P<y)&&D!==-1;D--,P++)T+=256*_[D]>>>0,_[D]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");y=P,E++}for(var F=C-y;F!==C&&_[F]===0;)F++;for(var I=c.repeat(h);F<C;++F)I+=t.charAt(_[F]);return I}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var h=0;if(g[h]!==" "){for(var y=0,E=0;g[h]===c;)y++,h++;for(var S=(g.length-h)*u+1>>>0,C=new Uint8Array(S);g[h];){var _=r[g.charCodeAt(h)];if(_===255)return;for(var T=0,P=S-1;(_!==0||T<E)&&P!==-1;P--,T++)_+=a*C[P]>>>0,C[P]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");E=T,h++}if(g[h]!==" "){for(var D=S-E;D!==S&&C[D]===0;)D++;for(var F=new Uint8Array(y+(S-D)),I=y;D!==S;)F[I++]=C[D++];return F}}}function p(g){var h=f(g);if(h)return h;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:p}}var rge=tge,nge=rge;const $J=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},sge=t=>new TextEncoder().encode(t),ige=t=>new TextDecoder().decode(t);let oge=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},age=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return qJ(this,e)}},cge=class{constructor(e){this.decoders=e}or(e){return qJ(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const qJ=(t,e)=>new cge({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let uge=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new oge(e,r,n),this.decoder=new age(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const x5=({name:t,prefix:e,encode:r,decode:n})=>new uge(t,e,r,n),IE=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=nge(r,e);return x5({prefix:t,name:e,encode:n,decode:i=>$J(s(i))})},lge=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},dge=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Ui=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>x5({prefix:e,name:t,encode(s){return dge(s,n,r)},decode(s){return lge(s,n,r,t)}}),fge=x5({prefix:"\0",name:"identity",encode:t=>ige(t),decode:t=>sge(t)});var hge=Object.freeze({__proto__:null,identity:fge});const pge=Ui({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var gge=Object.freeze({__proto__:null,base2:pge});const mge=Ui({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var yge=Object.freeze({__proto__:null,base8:mge});const bge=IE({prefix:"9",name:"base10",alphabet:"0123456789"});var wge=Object.freeze({__proto__:null,base10:bge});const vge=Ui({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ege=Ui({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var _ge=Object.freeze({__proto__:null,base16:vge,base16upper:Ege});const Age=Ui({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xge=Ui({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Cge=Ui({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Sge=Ui({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ige=Ui({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Tge=Ui({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Nge=Ui({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Pge=Ui({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Rge=Ui({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Oge=Object.freeze({__proto__:null,base32:Age,base32upper:xge,base32pad:Cge,base32padupper:Sge,base32hex:Ige,base32hexupper:Tge,base32hexpad:Nge,base32hexpadupper:Pge,base32z:Rge});const kge=IE({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Bge=IE({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Uge=Object.freeze({__proto__:null,base36:kge,base36upper:Bge});const Mge=IE({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Dge=IE({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var jge=Object.freeze({__proto__:null,base58btc:Mge,base58flickr:Dge});const Lge=Ui({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Fge=Ui({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$ge=Ui({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),qge=Ui({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Hge=Object.freeze({__proto__:null,base64:Lge,base64pad:Fge,base64url:$ge,base64urlpad:qge});const HJ=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),zge=HJ.reduce((t,e,r)=>(t[r]=e,t),[]),Wge=HJ.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Vge(t){return t.reduce((e,r)=>(e+=zge[r],e),"")}function Gge(t){const e=[];for(const r of t){const n=Wge[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Kge=x5({prefix:"ðŸš€",name:"base256emoji",encode:Vge,decode:Gge});var Zge=Object.freeze({__proto__:null,base256emoji:Kge}),Yge=zJ,$U=128,Jge=-128,Xge=Math.pow(2,31);function zJ(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Xge;)e[r++]=t&255|$U,t/=128;for(;t&Jge;)e[r++]=t&255|$U,t>>>=7;return e[r]=t|0,zJ.bytes=r-n+1,e}var Qge=p8,eme=128,qU=127;function p8(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw p8.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&qU)<<s:(o&qU)*Math.pow(2,s),s+=7}while(o>=eme);return p8.bytes=i-n,r}var tme=Math.pow(2,7),rme=Math.pow(2,14),nme=Math.pow(2,21),sme=Math.pow(2,28),ime=Math.pow(2,35),ome=Math.pow(2,42),ame=Math.pow(2,49),cme=Math.pow(2,56),ume=Math.pow(2,63),lme=function(t){return t<tme?1:t<rme?2:t<nme?3:t<sme?4:t<ime?5:t<ome?6:t<ame?7:t<cme?8:t<ume?9:10},dme={encode:Yge,decode:Qge,encodingLength:lme},WJ=dme;const HU=(t,e,r=0)=>(WJ.encode(t,e,r),e),zU=t=>WJ.encodingLength(t),g8=(t,e)=>{const r=e.byteLength,n=zU(t),s=n+zU(r),i=new Uint8Array(s+r);return HU(t,i,0),HU(r,i,n),i.set(e,s),new fme(t,r,e,i)};let fme=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};const VJ=({name:t,code:e,encode:r})=>new hme(t,e,r);let hme=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?g8(this.code,r):r.then(n=>g8(this.code,n))}else throw Error("Unknown type, must be binary type")}};const GJ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),pme=VJ({name:"sha2-256",code:18,encode:GJ("SHA-256")}),gme=VJ({name:"sha2-512",code:19,encode:GJ("SHA-512")});var mme=Object.freeze({__proto__:null,sha256:pme,sha512:gme});const KJ=0,yme="identity",ZJ=$J,bme=t=>g8(KJ,ZJ(t)),wme={code:KJ,name:yme,encode:ZJ,digest:bme};var vme=Object.freeze({__proto__:null,identity:wme});new TextEncoder,new TextDecoder;const WU={...hge,...gge,...yge,...wge,..._ge,...Oge,...Uge,...jge,...Hge,...Zge};({...mme,...vme});function YJ(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const VU=YJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),B3=YJ("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=LJ(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),JJ={utf8:VU,"utf-8":VU,hex:WU.base16,latin1:B3,ascii:B3,binary:B3,...WU};function C5(t,e="utf8"){const r=JJ[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Fy(t,e="utf8"){const r=JJ[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?B4(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function GU(t){return Xd(C5(Fy(t,A5),DJ))}function i6(t){return C5(Fy(Lc(t),DJ),A5)}function U4(t){const e=Fy(Q0e,FU),r=X0e+C5(FJ([e,t]),FU);return[Y0e,J0e,r].join(Z0e)}function Eme(t){return C5(t,A5)}function _me(t){return Fy(t,A5)}function Ame(t){return Fy([i6(t.header),i6(t.payload)].join(s6),jJ)}function xme(t){return[i6(t.header),i6(t.payload),Eme(t.signature)].join(s6)}function hy(t){const e=t.split(s6),r=GU(e[0]),n=GU(e[1]),s=_me(e[2]),i=Fy(e.slice(0,2).join(s6),jJ);return{header:r,payload:n,signature:s,data:i}}function o6(t=SJ(ege)){const e=MJ.getPublicKey(t);return{secretKey:FJ([t,e]),publicKey:e}}async function XJ(t,e,r,n,s=he.fromMiliseconds(Date.now())){const i={alg:G0e,typ:K0e},o=U4(n.publicKey),a=s+r,c={iss:o,sub:t,aud:e,iat:s,exp:a},u=Ame({header:i,payload:c}),l=MJ.sign(u,n.secretKey.slice(0,32));return xme({header:i,payload:c,signature:l})}var KU=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},Cme=(function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t})(),Sme=(function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t})(),Ime=(function(){function t(e,r,n,s){this.name=e,this.version=r,this.os=n,this.bot=s,this.type="bot-device"}return t})(),Tme=(function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t})(),Nme=(function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t})(),Pme=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Rme=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ZU=3,Ome=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Pme]],YU=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function QJ(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Nme:typeof navigator<"u"?Bme(navigator.userAgent):Mme()}function kme(t){return t!==""&&Ome.reduce(function(e,r){var n=r[0],s=r[1];if(e)return e;var i=s.exec(t);return!!i&&[n,i]},!1)}function Bme(t){var e=kme(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Tme;var s=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);s?s.length<ZU&&(s=KU(KU([],s,!0),Dme(ZU-s.length),!0)):s=[];var i=s.join("."),o=Ume(t),a=Rme.exec(t);return a&&a[1]?new Ime(r,i,o,a[1]):new Cme(r,i,o)}function Ume(t){for(var e=0,r=YU.length;e<r;e++){var n=YU[e],s=n[0],i=n[1],o=i.exec(t);if(o)return s}return null}function Mme(){var t=typeof process<"u"&&process.version;return t?new Sme(process.version.slice(1)):null}function Dme(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var An={},JU;function eX(){if(JU)return An;JU=1,Object.defineProperty(An,"__esModule",{value:!0}),An.getLocalStorage=An.getLocalStorageOrThrow=An.getCrypto=An.getCryptoOrThrow=An.getLocation=An.getLocationOrThrow=An.getNavigator=An.getNavigatorOrThrow=An.getDocument=An.getDocumentOrThrow=An.getFromWindowOrThrow=An.getFromWindow=void 0;function t(f){let p;return typeof window<"u"&&typeof window[f]<"u"&&(p=window[f]),p}An.getFromWindow=t;function e(f){const p=t(f);if(!p)throw new Error(`${f} is not defined in Window`);return p}An.getFromWindowOrThrow=e;function r(){return e("document")}An.getDocumentOrThrow=r;function n(){return t("document")}An.getDocument=n;function s(){return e("navigator")}An.getNavigatorOrThrow=s;function i(){return t("navigator")}An.getNavigator=i;function o(){return e("location")}An.getLocationOrThrow=o;function a(){return t("location")}An.getLocation=a;function c(){return e("crypto")}An.getCryptoOrThrow=c;function u(){return t("crypto")}An.getCrypto=u;function l(){return e("localStorage")}An.getLocalStorageOrThrow=l;function d(){return t("localStorage")}return An.getLocalStorage=d,An}var li=eX(),xb={},XU;function jme(){if(XU)return xb;XU=1,Object.defineProperty(xb,"__esModule",{value:!0}),xb.getWindowMetadata=void 0;const t=eX();function e(){let r,n;try{r=t.getDocumentOrThrow(),n=t.getLocationOrThrow()}catch{return null}function s(){const p=r.getElementsByTagName("link"),g=[];for(let h=0;h<p.length;h++){const y=p[h],E=y.getAttribute("rel");if(E&&E.toLowerCase().indexOf("icon")>-1){const S=y.getAttribute("href");if(S)if(S.toLowerCase().indexOf("https:")===-1&&S.toLowerCase().indexOf("http:")===-1&&S.indexOf("//")!==0){let C=n.protocol+"//"+n.host;if(S.indexOf("/")===0)C+=S;else{const _=n.pathname.split("/");_.pop();const T=_.join("/");C+=T+"/"+S}g.push(C)}else if(S.indexOf("//")===0){const C=n.protocol+S;g.push(C)}else g.push(S)}}return g}function i(...p){const g=r.getElementsByTagName("meta");for(let h=0;h<g.length;h++){const y=g[h],E=["itemprop","property","name"].map(S=>y.getAttribute(S)).filter(S=>S?p.includes(S):!1);if(E.length&&E){const S=y.getAttribute("content");if(S)return S}}return""}function o(){let p=i("name","og:site_name","og:title","twitter:title");return p||(p=r.title),p}function a(){return i("description","og:description","twitter:description","keywords")}const c=o(),u=a(),l=n.origin,d=s();return{description:u,url:l,icons:d,name:c}}return xb.getWindowMetadata=e,xb}var tX=jme();const Lme="0.1.1";function Fme(){return Lme}let Is=class m8 extends Error{constructor(e,r={}){const n=(()=>{if(r.cause instanceof m8){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause&&"details"in r.cause&&typeof r.cause.details=="string"?r.cause.details:r.cause?.message?r.cause.message:r.details})(),s=r.cause instanceof m8&&r.cause.docsPath||r.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||s?["",n?`Details: ${n}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Fme()}`}),this.cause=r.cause,this.details=n,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return rX(this,e)}};function rX(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?rX(t.cause,e):e?null:t}const bg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function $me(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ov(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function A0(t,...e){if(!$me(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function qme(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ov(t.outputLen),Ov(t.blockLen)}function py(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function nX(t,e){A0(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Hme(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function gy(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function U3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ku(t,e){return t<<32-e|t>>>e}const zme=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Wme(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Vme(t){for(let e=0;e<t.length;e++)t[e]=Wme(t[e]);return t}const QU=zme?t=>t:Vme;function Gme(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function S5(t){return typeof t=="string"&&(t=Gme(t)),A0(t),t}function Kme(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];A0(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let M4=class{};function sX(t){const e=n=>t().update(S5(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Zme(t=32){if(bg&&typeof bg.getRandomValues=="function")return bg.getRandomValues(new Uint8Array(t));if(bg&&typeof bg.randomBytes=="function")return Uint8Array.from(bg.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function Yme(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function Jme(t,e,r){return t&e^~t&r}function Xme(t,e,r){return t&e^t&r^e&r}let Qme=class extends M4{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=U3(this.buffer)}update(e){py(this),e=S5(e),A0(e);const{view:r,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=U3(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){py(this),nX(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,gy(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;Yme(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=U3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}};const mf=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),G_=BigInt(2**32-1),eM=BigInt(32);function eye(t,e=!1){return e?{h:Number(t&G_),l:Number(t>>eM&G_)}:{h:Number(t>>eM&G_)|0,l:Number(t&G_)|0}}function tye(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:o,l:a}=eye(t[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const rye=(t,e,r)=>t<<r|e>>>32-r,nye=(t,e,r)=>e<<r|t>>>32-r,sye=(t,e,r)=>e<<r-32|t>>>64-r,iye=(t,e,r)=>t<<r-32|e>>>64-r,oye=BigInt(0),Cb=BigInt(1),aye=BigInt(2),cye=BigInt(7),uye=BigInt(256),lye=BigInt(113),iX=[],oX=[],aX=[];for(let t=0,e=Cb,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],iX.push(2*(5*n+r)),oX.push((t+1)*(t+2)/2%64);let s=oye;for(let i=0;i<7;i++)e=(e<<Cb^(e>>cye)*lye)%uye,e&aye&&(s^=Cb<<(Cb<<BigInt(i))-Cb);aX.push(s)}const cX=tye(aX,!0),dye=cX[0],fye=cX[1],tM=(t,e,r)=>r>32?sye(t,e,r):rye(t,e,r),rM=(t,e,r)=>r>32?iye(t,e,r):nye(t,e,r);function hye(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],d=tM(u,l,1)^r[a],f=rM(u,l,1)^r[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=oX[o],c=tM(s,i,a),u=rM(s,i,a),l=iX[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=dye[n],t[1]^=fye[n]}gy(r)}let pye=class uX extends M4{constructor(e,r,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,Ov(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Hme(this.state)}clone(){return this._cloneInto()}keccak(){QU(this.state32),hye(this.state32,this.rounds),QU(this.state32),this.posOut=0,this.pos=0}update(e){py(this),e=S5(e),A0(e);const{blockLen:r,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){py(this,!1),A0(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ov(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(nX(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,gy(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new uX(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const gye=(t,e,r)=>sX(()=>new pye(e,t,r)),mye=gye(1,136,256/8),yye=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),yf=new Uint32Array(64);let bye=class extends Qme{constructor(e=32){super(64,e,8,!1),this.A=mf[0]|0,this.B=mf[1]|0,this.C=mf[2]|0,this.D=mf[3]|0,this.E=mf[4]|0,this.F=mf[5]|0,this.G=mf[6]|0,this.H=mf[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)yf[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const f=yf[d-15],p=yf[d-2],g=Ku(f,7)^Ku(f,18)^f>>>3,h=Ku(p,17)^Ku(p,19)^p>>>10;yf[d]=h+yf[d-7]+g+yf[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Ku(a,6)^Ku(a,11)^Ku(a,25),p=l+f+Jme(a,c,u)+yye[d]+yf[d]|0,h=(Ku(n,2)^Ku(n,13)^Ku(n,22))+Xme(n,s,i)|0;l=u,u=c,c=a,a=o+p|0,o=i,i=s,s=n,n=p+h|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){gy(yf)}destroy(){this.set(0,0,0,0,0,0,0,0),gy(this.buffer)}};const wye=sX(()=>new bye);const D4=BigInt(0),y8=BigInt(1);function TE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function j4(t){if(!TE(t))throw new Error("Uint8Array expected")}function kv(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function K_(t){const e=t.toString(16);return e.length&1?"0"+e:e}function lX(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?D4:BigInt("0x"+t)}const dX=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",vye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Bv(t){if(j4(t),dX)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=vye[t[r]];return e}const Zl={_0:48,_9:57,A:65,F:70,a:97,f:102};function nM(t){if(t>=Zl._0&&t<=Zl._9)return t-Zl._0;if(t>=Zl.A&&t<=Zl.F)return t-(Zl.A-10);if(t>=Zl.a&&t<=Zl.f)return t-(Zl.a-10)}function a6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(dX)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=nM(t.charCodeAt(i)),a=nM(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function h0(t){return lX(Bv(t))}function fX(t){return j4(t),lX(Bv(Uint8Array.from(t).reverse()))}function NE(t,e){return a6(t.toString(16).padStart(e*2,"0"))}function hX(t,e){return NE(t,e).reverse()}function kc(t,e,r){let n;if(typeof e=="string")try{n=a6(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(TE(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function c6(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];j4(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}const M3=t=>typeof t=="bigint"&&D4<=t;function L4(t,e,r){return M3(t)&&M3(e)&&M3(r)&&e<=t&&t<r}function Wm(t,e,r,n){if(!L4(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function Eye(t){let e;for(e=0;t>D4;t>>=y8,e+=1);return e}const I5=t=>(y8<<BigInt(t))-y8,D3=t=>new Uint8Array(t),sM=t=>Uint8Array.from(t);function _ye(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=D3(t),s=D3(t),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...d)=>r(s,n,...d),c=(d=D3(0))=>{s=a(sM([0]),d),n=a(),d.length!==0&&(s=a(sM([1]),d),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){n=a();const p=n.slice();f.push(p),d+=n.length}return c6(...f)};return(d,f)=>{o(),c(d);let p;for(;!(p=f(u()));)c();return o(),p}}const Aye={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||TE(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function T5(t,e,r={}){const n=(s,i,o)=>{const a=Aye[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}function iM(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}function xye(t,e){if(uM(t)>e)throw new Wye({givenSize:uM(t),maxSize:e})}const Yl={zero:48,nine:57,A:65,F:70,a:97,f:102};function oM(t){if(t>=Yl.zero&&t<=Yl.nine)return t-Yl.zero;if(t>=Yl.A&&t<=Yl.F)return t-(Yl.A-10);if(t>=Yl.a&&t<=Yl.f)return t-(Yl.a-10)}function Cye(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;if(t.length>n)throw new Vye({size:t.length,targetSize:n,type:"Bytes"});const s=new Uint8Array(n);for(let i=0;i<n;i++){const o=r==="right";s[o?i:n-i-1]=t[o?i:t.length-i-1]}return s}function pX(t,e){if(Ch(t)>e)throw new Uye({givenSize:Ch(t),maxSize:e})}function Sye(t,e){if(typeof e=="number"&&e>0&&e>Ch(t)-1)throw new yX({offset:e,position:"start",size:Ch(t)})}function Iye(t,e,r){if(typeof e=="number"&&typeof r=="number"&&Ch(t)!==r-e)throw new yX({offset:r,position:"end",size:Ch(t)})}function gX(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;const s=t.replace("0x","");if(s.length>n*2)throw new Mye({size:Math.ceil(s.length/2),targetSize:n,type:"Hex"});return`0x${s[r==="right"?"padEnd":"padStart"](n*2,"0")}`}const Tye="#__bigint";function F4(t,e,r){return JSON.stringify(t,(n,s)=>typeof s=="bigint"?s.toString()+Tye:s,r)}const Nye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Pye(t,e={}){const{strict:r=!1}=e;if(!t)throw new aM(t);if(typeof t!="string")throw new aM(t);if(r&&!/^0x[0-9a-fA-F]*$/.test(t))throw new cM(t);if(!t.startsWith("0x"))throw new cM(t)}function Rye(...t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function $4(t){return t instanceof Uint8Array?u6(t):Array.isArray(t)?u6(new Uint8Array(t)):t}function u6(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=Nye[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(pX(n,e.size),mX(n,e.size)):n}function j3(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const u=typeof t=="bigint"?"n":"";throw new Bye({max:i?`${i}${u}`:void 0,min:`${o}${u}`,signed:r,size:n,value:`${t}${u}`})}const c=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?Oye(c,n):c}function Oye(t,e){return gX(t,{dir:"left",size:e})}function mX(t,e){return gX(t,{dir:"right",size:e})}function Nd(t,e,r,n={}){const{strict:s}=n;Sye(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(r??t.length)*2)}`;return s&&Iye(i,e,r),i}function Ch(t){return Math.ceil((t.length-2)/2)}function kye(t,e={}){const{strict:r=!1}=e;try{return Pye(t,{strict:r}),!0}catch{return!1}}let Bye=class extends Is{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${n?" signed":" unsigned"} integer range ${e?`(\`${r}\` to \`${e}\`)`:`(above \`${r}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class aM extends Is{constructor(e){super(`Value \`${typeof e=="object"?F4(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class cM extends Is{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Uye=class extends Is{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class yX extends Is{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let Mye=class extends Is{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const Dye=new TextEncoder;function jye(t){if(!(t instanceof Uint8Array)){if(!t)throw new Z_(t);if(typeof t!="object")throw new Z_(t);if(!("BYTES_PER_ELEMENT"in t))throw new Z_(t);if(t.BYTES_PER_ELEMENT!==1||t.constructor.name!=="Uint8Array")throw new Z_(t)}}function Lye(t){return t instanceof Uint8Array?t:typeof t=="string"?$ye(t):Fye(t)}function Fye(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function $ye(t,e={}){const{size:r}=e;let n=t;r&&(pX(t,r),n=mX(t,r));let s=n.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const u=oM(s.charCodeAt(c++)),l=oM(s.charCodeAt(c++));if(u===void 0||l===void 0)throw new Is(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=u*16+l}return o}function qye(t,e={}){const{size:r}=e,n=Dye.encode(t);return typeof r=="number"?(xye(n,r),Hye(n,r)):n}function Hye(t,e){return Cye(t,{dir:"right",size:e})}function uM(t){return t.length}function zye(t){try{return jye(t),!0}catch{return!1}}class Z_ extends Is{constructor(e){super(`Value \`${typeof e=="object"?F4(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}let Wye=class extends Is{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Vye=class extends Is{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};function bX(t,e={}){const{as:r=typeof t=="string"?"Hex":"Bytes"}=e,n=mye(Lye(t));return r==="Bytes"?n:u6(n)}let Gye=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const Kye={checksum:new Gye(8192)},L3=Kye.checksum;function wX(t,e={}){const{compressed:r}=e,{prefix:n,x:s,y:i}=t;if(r===!1||typeof s=="bigint"&&typeof i=="bigint"){if(n!==4)throw new lM({prefix:n,cause:new ebe});return}if(r===!0||typeof s=="bigint"&&typeof i>"u"){if(n!==3&&n!==2)throw new lM({prefix:n,cause:new Qye});return}throw new Xye({publicKey:t})}function Zye(t){const e=(()=>{if(kye(t))return vX(t);if(zye(t))return Yye(t);const{prefix:r,x:n,y:s}=t;return typeof n=="bigint"&&typeof s=="bigint"?{prefix:r??4,x:n,y:s}:{prefix:r,x:n}})();return wX(e),e}function Yye(t){return vX(u6(t))}function vX(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new tbe({publicKey:t});if(t.length===130){const n=BigInt(Nd(t,0,32)),s=BigInt(Nd(t,32,64));return{prefix:4,x:n,y:s}}if(t.length===132){const n=Number(Nd(t,0,1)),s=BigInt(Nd(t,1,33)),i=BigInt(Nd(t,33,65));return{prefix:n,x:s,y:i}}const e=Number(Nd(t,0,1)),r=BigInt(Nd(t,1,33));return{prefix:e,x:r}}function Jye(t,e={}){wX(t);const{prefix:r,x:n,y:s}=t,{includePrefix:i=!0}=e;return Rye(i?j3(r,{size:1}):"0x",j3(n,{size:32}),typeof s=="bigint"?j3(s,{size:32}):"0x")}class Xye extends Is{constructor({publicKey:e}){super(`Value \`${F4(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class lM extends Is{constructor({prefix:e,cause:r}){super(`Prefix "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class Qye extends Is{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class ebe extends Is{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let tbe=class extends Is{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${Ch($4(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const rbe=/^0x[a-fA-F0-9]{40}$/;function EX(t,e={}){const{strict:r=!0}=e;if(!rbe.test(t))throw new dM({address:t,cause:new ibe});if(r){if(t.toLowerCase()===t)return;if(_X(t)!==t)throw new dM({address:t,cause:new obe})}}function _X(t){if(L3.has(t))return L3.get(t);EX(t,{strict:!1});const e=t.substring(2).toLowerCase(),r=bX(qye(e),{as:"Bytes"}),n=e.split("");for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&n[i]&&(n[i]=n[i].toUpperCase()),(r[i>>1]&15)>=8&&n[i+1]&&(n[i+1]=n[i+1].toUpperCase());const s=`0x${n.join("")}`;return L3.set(t,s),s}function nbe(t,e={}){const{checksum:r=!1}=e;return EX(t),r?_X(t):t}function sbe(t,e={}){const r=bX(`0x${Jye(t).slice(4)}`).substring(26);return nbe(`0x${r}`,e)}class dM extends Is{constructor({address:e,cause:r}){super(`Address "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class ibe extends Is{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class obe extends Is{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}let AX=class extends M4{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,qme(e);const n=S5(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),gy(i)}update(e){return py(this),this.iHash.update(e),this}digestInto(e){py(this),A0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const xX=(t,e,r)=>new AX(t,e).update(r).digest();xX.create=(t,e)=>new AX(t,e);const ma=BigInt(0),Oo=BigInt(1),Yp=BigInt(2),abe=BigInt(3),CX=BigInt(4),SX=BigInt(5),IX=BigInt(8);function ca(t,e){const r=t%e;return r>=ma?r:e+r}function bc(t,e,r){let n=t;for(;e-- >ma;)n*=n,n%=r;return n}function b8(t,e){if(t===ma)throw new Error("invert: expected non-zero number");if(e<=ma)throw new Error("invert: expected positive modulus, got "+e);let r=ca(t,e),n=e,s=ma,i=Oo;for(;r!==ma;){const a=n/r,c=n%r,u=s-i*a;n=r,r=c,s=i,i=u}if(n!==Oo)throw new Error("invert: does not exist");return ca(s,e)}function TX(t,e){const r=(t.ORDER+Oo)/CX,n=t.pow(e,r);if(!t.eql(t.sqr(n),e))throw new Error("Cannot find square root");return n}function cbe(t,e){const r=(t.ORDER-SX)/IX,n=t.mul(e,Yp),s=t.pow(n,r),i=t.mul(e,s),o=t.mul(t.mul(i,Yp),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function ube(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Oo,r=0;for(;e%Yp===ma;)e/=Yp,r++;let n=Yp;const s=q4(t);for(;fM(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return TX;let i=s.pow(n,e);const o=(e+Oo)/Yp;return function(c,u){if(c.is0(u))return u;if(fM(c,u)!==1)throw new Error("Cannot find square root");let l=r,d=c.mul(c.ONE,i),f=c.pow(u,e),p=c.pow(u,o);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let g=1,h=c.sqr(f);for(;!c.eql(h,c.ONE);)if(g++,h=c.sqr(h),g===l)throw new Error("Cannot find square root");const y=Oo<<BigInt(l-g-1),E=c.pow(d,y);l=g,d=c.sqr(E),f=c.mul(f,d),p=c.mul(p,E)}return p}}function lbe(t){return t%CX===abe?TX:t%IX===SX?cbe:ube(t)}const dbe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fbe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=dbe.reduce((n,s)=>(n[s]="function",n),e);return T5(t,r)}function hbe(t,e,r){if(r<ma)throw new Error("invalid exponent, negatives unsupported");if(r===ma)return t.ONE;if(r===Oo)return e;let n=t.ONE,s=e;for(;r>ma;)r&Oo&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Oo;return n}function NX(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),i),n}function fM(t,e){const r=(t.ORDER-Oo)/Yp,n=t.pow(e,r),s=t.eql(n,t.ONE),i=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function PX(t,e){e!==void 0&&Ov(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function q4(t,e,r=!1,n={}){if(t<=ma)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=PX(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:i,MASK:I5(s),ZERO:ma,ONE:Oo,create:c=>ca(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ma<=c&&c<t},is0:c=>c===ma,isOdd:c=>(c&Oo)===Oo,neg:c=>ca(-c,t),eql:(c,u)=>c===u,sqr:c=>ca(c*c,t),add:(c,u)=>ca(c+u,t),sub:(c,u)=>ca(c-u,t),mul:(c,u)=>ca(c*u,t),pow:(c,u)=>hbe(a,c,u),div:(c,u)=>ca(c*b8(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>b8(c,t),sqrt:n.sqrt||(c=>(o||(o=lbe(t)),o(a,c))),toBytes:c=>r?hX(c,i):NE(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?fX(c):h0(c)},invertBatch:c=>NX(a,c),cmov:(c,u,l)=>l?u:c});return Object.freeze(a)}function RX(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function OX(t){const e=RX(t);return e+Math.ceil(e/2)}function pbe(t,e,r=!1){const n=t.length,s=RX(e),i=OX(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?fX(t):h0(t),a=ca(o,e-Oo)+Oo;return r?hX(a,s):NE(a,s)}const hM=BigInt(0),w8=BigInt(1);function F3(t,e){const r=e.negate();return t?r:e}function kX(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function $3(t,e){kX(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),s=2**t,i=I5(t),o=BigInt(t);return{windows:r,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function pM(t,e,r){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=r;let a=Number(t&s),c=t>>o;a>n&&(a-=i,c+=w8);const u=e*n,l=u+Math.abs(a)-1,d=a===0,f=a<0,p=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:p,offsetF:u}}function gbe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function mbe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const q3=new WeakMap,BX=new WeakMap;function H3(t){return BX.get(t)||1}function ybe(t,e){return{constTimeNegate:F3,hasPrecomputes(r){return H3(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>hM;)n&w8&&(s=s.add(i)),i=i.double(),n>>=w8;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=$3(n,e),o=[];let a=r,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){let i=t.ZERO,o=t.BASE;const a=$3(r,e);for(let c=0;c<a.windows;c++){const{nextN:u,offset:l,isZero:d,isNeg:f,isNegF:p,offsetF:g}=pM(s,c,a);s=u,d?o=o.add(F3(p,n[g])):i=i.add(F3(f,n[l]))}return{p:i,f:o}},wNAFUnsafe(r,n,s,i=t.ZERO){const o=$3(r,e);for(let a=0;a<o.windows&&s!==hM;a++){const{nextN:c,offset:u,isZero:l,isNeg:d}=pM(s,a,o);if(s=c,!l){const f=n[u];i=i.add(d?f.negate():f)}}return i},getPrecomputes(r,n,s){let i=q3.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&q3.set(n,s(i))),i},wNAFCached(r,n,s){const i=H3(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=H3(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){kX(n,e),BX.set(r,n),q3.delete(r)}}}function bbe(t,e,r,n){gbe(r,t),mbe(n,e);const s=r.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Eye(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=I5(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let p=d;p>=0;p-=c){l.fill(o);for(let h=0;h<i;h++){const y=n[h],E=Number(y>>BigInt(p)&u);l[E]=l[E].add(r[h])}let g=o;for(let h=l.length-1,y=o;h>0;h--)y=y.add(l[h]),g=g.add(y);if(f=f.add(g),p!==0)for(let h=0;h<c;h++)f=f.double()}return f}function UX(t){return fbe(t.Fp),T5(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...PX(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function gM(t){t.lowS!==void 0&&kv("lowS",t.lowS),t.prehash!==void 0&&kv("prehash",t.prehash)}function wbe(t){const e=UX(t);T5(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}let vbe=class extends Error{constructor(e=""){super(e)}};const kd={Err:vbe,_tlv:{encode:(t,e)=>{const{Err:r}=kd;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=K_(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?K_(s.length/2|128):"";return K_(t)+i+s+e},decode(t,e){const{Err:r}=kd;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=kd;if(t<Dd)throw new e("integer: negative integers are not allowed");let r=K_(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=kd;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return h0(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=kd,s=kc("signature",t),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=kd,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}};function z3(t,e){return Bv(NE(t,e))}const Dd=BigInt(0),ri=BigInt(1);BigInt(2);const W3=BigInt(3),Ebe=BigInt(4);function _be(t){const e=wbe(t),{Fp:r}=e,n=q4(e.n,e.nBitLength),s=e.toBytes||((C,_,T)=>{const P=_.toAffine();return c6(Uint8Array.from([4]),r.toBytes(P.x),r.toBytes(P.y))}),i=e.fromBytes||(C=>{const _=C.subarray(1),T=r.fromBytes(_.subarray(0,r.BYTES)),P=r.fromBytes(_.subarray(r.BYTES,2*r.BYTES));return{x:T,y:P}});function o(C){const{a:_,b:T}=e,P=r.sqr(C),D=r.mul(P,C);return r.add(r.add(D,r.mul(C,_)),T)}function a(C,_){const T=r.sqr(_),P=o(C);return r.eql(T,P)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=r.mul(r.pow(e.a,W3),Ebe),u=r.mul(r.sqr(e.b),BigInt(27));if(r.is0(r.add(c,u)))throw new Error("bad curve params: a or b");function l(C){return L4(C,ri,e.n)}function d(C){const{allowedPrivateKeyLengths:_,nByteLength:T,wrapPrivateKey:P,n:D}=e;if(_&&typeof C!="bigint"){if(TE(C)&&(C=Bv(C)),typeof C!="string"||!_.includes(C.length))throw new Error("invalid private key");C=C.padStart(T*2,"0")}let F;try{F=typeof C=="bigint"?C:h0(kc("private key",C,T))}catch{throw new Error("invalid private key, expected hex or "+T+" bytes, got "+typeof C)}return P&&(F=ca(F,D)),Wm("private key",F,ri,D),F}function f(C){if(!(C instanceof h))throw new Error("ProjectivePoint expected")}const p=iM((C,_)=>{const{px:T,py:P,pz:D}=C;if(r.eql(D,r.ONE))return{x:T,y:P};const F=C.is0();_==null&&(_=F?r.ONE:r.inv(D));const I=r.mul(T,_),U=r.mul(P,_),L=r.mul(D,_);if(F)return{x:r.ZERO,y:r.ZERO};if(!r.eql(L,r.ONE))throw new Error("invZ was invalid");return{x:I,y:U}}),g=iM(C=>{if(C.is0()){if(e.allowInfinityPoint&&!r.is0(C.py))return;throw new Error("bad point: ZERO")}const{x:_,y:T}=C.toAffine();if(!r.isValid(_)||!r.isValid(T))throw new Error("bad point: x or y not FE");if(!a(_,T))throw new Error("bad point: equation left != right");if(!C.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(_,T,P){if(_==null||!r.isValid(_))throw new Error("x required");if(T==null||!r.isValid(T)||r.is0(T))throw new Error("y required");if(P==null||!r.isValid(P))throw new Error("z required");this.px=_,this.py=T,this.pz=P,Object.freeze(this)}static fromAffine(_){const{x:T,y:P}=_||{};if(!_||!r.isValid(T)||!r.isValid(P))throw new Error("invalid affine point");if(_ instanceof h)throw new Error("projective point not allowed");const D=F=>r.eql(F,r.ZERO);return D(T)&&D(P)?h.ZERO:new h(T,P,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){const T=NX(r,_.map(P=>P.pz));return _.map((P,D)=>P.toAffine(T[D])).map(h.fromAffine)}static fromHex(_){const T=h.fromAffine(i(kc("pointHex",_)));return T.assertValidity(),T}static fromPrivateKey(_){return h.BASE.multiply(d(_))}static msm(_,T){return bbe(h,n,_,T)}_setWindowSize(_){S.setWindowSize(this,_)}assertValidity(){g(this)}hasEvenY(){const{y:_}=this.toAffine();if(r.isOdd)return!r.isOdd(_);throw new Error("Field doesn't support isOdd")}equals(_){f(_);const{px:T,py:P,pz:D}=this,{px:F,py:I,pz:U}=_,L=r.eql(r.mul(T,U),r.mul(F,D)),B=r.eql(r.mul(P,U),r.mul(I,D));return L&&B}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:_,b:T}=e,P=r.mul(T,W3),{px:D,py:F,pz:I}=this;let U=r.ZERO,L=r.ZERO,B=r.ZERO,A=r.mul(D,D),m=r.mul(F,F),b=r.mul(I,I),w=r.mul(D,F);return w=r.add(w,w),B=r.mul(D,I),B=r.add(B,B),U=r.mul(_,B),L=r.mul(P,b),L=r.add(U,L),U=r.sub(m,L),L=r.add(m,L),L=r.mul(U,L),U=r.mul(w,U),B=r.mul(P,B),b=r.mul(_,b),w=r.sub(A,b),w=r.mul(_,w),w=r.add(w,B),B=r.add(A,A),A=r.add(B,A),A=r.add(A,b),A=r.mul(A,w),L=r.add(L,A),b=r.mul(F,I),b=r.add(b,b),A=r.mul(b,w),U=r.sub(U,A),B=r.mul(b,m),B=r.add(B,B),B=r.add(B,B),new h(U,L,B)}add(_){f(_);const{px:T,py:P,pz:D}=this,{px:F,py:I,pz:U}=_;let L=r.ZERO,B=r.ZERO,A=r.ZERO;const m=e.a,b=r.mul(e.b,W3);let w=r.mul(T,F),x=r.mul(P,I),M=r.mul(D,U),k=r.add(T,P),j=r.add(F,I);k=r.mul(k,j),j=r.add(w,x),k=r.sub(k,j),j=r.add(T,D);let N=r.add(F,U);return j=r.mul(j,N),N=r.add(w,M),j=r.sub(j,N),N=r.add(P,D),L=r.add(I,U),N=r.mul(N,L),L=r.add(x,M),N=r.sub(N,L),A=r.mul(m,j),L=r.mul(b,M),A=r.add(L,A),L=r.sub(x,A),A=r.add(x,A),B=r.mul(L,A),x=r.add(w,w),x=r.add(x,w),M=r.mul(m,M),j=r.mul(b,j),x=r.add(x,M),M=r.sub(w,M),M=r.mul(m,M),j=r.add(j,M),w=r.mul(x,j),B=r.add(B,w),w=r.mul(N,j),L=r.mul(k,L),L=r.sub(L,w),w=r.mul(k,x),A=r.mul(N,A),A=r.add(A,w),new h(L,B,A)}subtract(_){return this.add(_.negate())}is0(){return this.equals(h.ZERO)}wNAF(_){return S.wNAFCached(this,_,h.normalizeZ)}multiplyUnsafe(_){const{endo:T,n:P}=e;Wm("scalar",_,Dd,P);const D=h.ZERO;if(_===Dd)return D;if(this.is0()||_===ri)return this;if(!T||S.hasPrecomputes(this))return S.wNAFCachedUnsafe(this,_,h.normalizeZ);let{k1neg:F,k1:I,k2neg:U,k2:L}=T.splitScalar(_),B=D,A=D,m=this;for(;I>Dd||L>Dd;)I&ri&&(B=B.add(m)),L&ri&&(A=A.add(m)),m=m.double(),I>>=ri,L>>=ri;return F&&(B=B.negate()),U&&(A=A.negate()),A=new h(r.mul(A.px,T.beta),A.py,A.pz),B.add(A)}multiply(_){const{endo:T,n:P}=e;Wm("scalar",_,ri,P);let D,F;if(T){const{k1neg:I,k1:U,k2neg:L,k2:B}=T.splitScalar(_);let{p:A,f:m}=this.wNAF(U),{p:b,f:w}=this.wNAF(B);A=S.constTimeNegate(I,A),b=S.constTimeNegate(L,b),b=new h(r.mul(b.px,T.beta),b.py,b.pz),D=A.add(b),F=m.add(w)}else{const{p:I,f:U}=this.wNAF(_);D=I,F=U}return h.normalizeZ([D,F])[0]}multiplyAndAddUnsafe(_,T,P){const D=h.BASE,F=(U,L)=>L===Dd||L===ri||!U.equals(D)?U.multiplyUnsafe(L):U.multiply(L),I=F(this,T).add(F(_,P));return I.is0()?void 0:I}toAffine(_){return p(this,_)}isTorsionFree(){const{h:_,isTorsionFree:T}=e;if(_===ri)return!0;if(T)return T(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:_,clearCofactor:T}=e;return _===ri?this:T?T(h,this):this.multiplyUnsafe(e.h)}toRawBytes(_=!0){return kv("isCompressed",_),this.assertValidity(),s(h,this,_)}toHex(_=!0){return kv("isCompressed",_),Bv(this.toRawBytes(_))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const{endo:y,nBitLength:E}=e,S=ybe(h,y?Math.ceil(E/2):E);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:l}}function Abe(t){const e=UX(t);return T5(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function xbe(t){const e=Abe(t),{Fp:r,n,nByteLength:s,nBitLength:i}=e,o=r.BYTES+1,a=2*r.BYTES+1;function c(b){return ca(b,n)}function u(b){return b8(b,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:p}=_be({...e,toBytes(b,w,x){const M=w.toAffine(),k=r.toBytes(M.x),j=c6;return kv("isCompressed",x),x?j(Uint8Array.from([w.hasEvenY()?2:3]),k):j(Uint8Array.from([4]),k,r.toBytes(M.y))},fromBytes(b){const w=b.length,x=b[0],M=b.subarray(1);if(w===o&&(x===2||x===3)){const k=h0(M);if(!L4(k,ri,r.ORDER))throw new Error("Point is not on curve");const j=f(k);let N;try{N=r.sqrt(j)}catch($){const O=$ instanceof Error?": "+$.message:"";throw new Error("Point is not on curve"+O)}const v=(N&ri)===ri;return(x&1)===1!==v&&(N=r.neg(N)),{x:k,y:N}}else if(w===a&&x===4){const k=r.fromBytes(M.subarray(0,r.BYTES)),j=r.fromBytes(M.subarray(r.BYTES,2*r.BYTES));return{x:k,y:j}}else{const k=o,j=a;throw new Error("invalid Point, expected length of "+k+", or uncompressed "+j+", got "+w)}}});function g(b){const w=n>>ri;return b>w}function h(b){return g(b)?c(-b):b}const y=(b,w,x)=>h0(b.slice(w,x));class E{constructor(w,x,M){Wm("r",w,ri,n),Wm("s",x,ri,n),this.r=w,this.s=x,M!=null&&(this.recovery=M),Object.freeze(this)}static fromCompact(w){const x=s;return w=kc("compactSignature",w,x*2),new E(y(w,0,x),y(w,x,2*x))}static fromDER(w){const{r:x,s:M}=kd.toSig(kc("DER",w));return new E(x,M)}assertValidity(){}addRecoveryBit(w){return new E(this.r,this.s,w)}recoverPublicKey(w){const{r:x,s:M,recovery:k}=this,j=D(kc("msgHash",w));if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");const N=k===2||k===3?x+e.n:x;if(N>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const v=(k&1)===0?"02":"03",R=l.fromHex(v+z3(N,r.BYTES)),$=u(N),O=c(-j*$),H=c(M*$),W=l.BASE.multiplyAndAddUnsafe(R,O,H);if(!W)throw new Error("point at infinify");return W.assertValidity(),W}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return a6(this.toDERHex())}toDERHex(){return kd.hexFromSig(this)}toCompactRawBytes(){return a6(this.toCompactHex())}toCompactHex(){const w=s;return z3(this.r,w)+z3(this.s,w)}}const S={isValidPrivateKey(b){try{return d(b),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const b=OX(e.n);return pbe(e.randomBytes(b),e.n)},precompute(b=8,w=l.BASE){return w._setWindowSize(b),w.multiply(BigInt(3)),w}};function C(b,w=!0){return l.fromPrivateKey(b).toRawBytes(w)}function _(b){if(typeof b=="bigint")return!1;if(b instanceof l)return!0;const x=kc("key",b).length,M=r.BYTES,k=M+1,j=2*M+1;if(!(e.allowedPrivateKeyLengths||s===k))return x===k||x===j}function T(b,w,x=!0){if(_(b)===!0)throw new Error("first arg must be private key");if(_(w)===!1)throw new Error("second arg must be public key");return l.fromHex(w).multiply(d(b)).toRawBytes(x)}const P=e.bits2int||function(b){if(b.length>8192)throw new Error("input is too large");const w=h0(b),x=b.length*8-i;return x>0?w>>BigInt(x):w},D=e.bits2int_modN||function(b){return c(P(b))},F=I5(i);function I(b){return Wm("num < 2^"+i,b,Dd,F),NE(b,s)}function U(b,w,x=L){if(["recovered","canonical"].some(K=>K in x))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:k}=e;let{lowS:j,prehash:N,extraEntropy:v}=x;j==null&&(j=!0),b=kc("msgHash",b),gM(x),N&&(b=kc("prehashed msgHash",M(b)));const R=D(b),$=d(w),O=[I($),I(R)];if(v!=null&&v!==!1){const K=v===!0?k(r.BYTES):v;O.push(kc("extraEntropy",K))}const H=c6(...O),W=R;function G(K){const Q=P(K);if(!p(Q))return;const re=u(Q),de=l.BASE.multiply(Q).toAffine(),le=c(de.x);if(le===Dd)return;const se=c(re*c(W+le*$));if(se===Dd)return;let be=(de.x===le?0:2)|Number(de.y&ri),We=se;return j&&g(se)&&(We=h(se),be^=1),new E(le,We,be)}return{seed:H,k2sig:G}}const L={lowS:e.lowS,prehash:!1},B={lowS:e.lowS,prehash:!1};function A(b,w,x=L){const{seed:M,k2sig:k}=U(b,w,x),j=e;return _ye(j.hash.outputLen,j.nByteLength,j.hmac)(M,k)}l.BASE._setWindowSize(8);function m(b,w,x,M=B){const k=b;w=kc("msgHash",w),x=kc("publicKey",x);const{lowS:j,prehash:N,format:v}=M;if(gM(M),"strict"in M)throw new Error("options.strict was renamed to lowS");if(v!==void 0&&v!=="compact"&&v!=="der")throw new Error("format must be compact or der");const R=typeof k=="string"||TE(k),$=!R&&!v&&typeof k=="object"&&k!==null&&typeof k.r=="bigint"&&typeof k.s=="bigint";if(!R&&!$)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let O,H;try{if($&&(O=new E(k.r,k.s)),R){try{v!=="compact"&&(O=E.fromDER(k))}catch(be){if(!(be instanceof kd.Err))throw be}!O&&v!=="der"&&(O=E.fromCompact(k))}H=l.fromHex(x)}catch{return!1}if(!O||j&&O.hasHighS())return!1;N&&(w=e.hash(w));const{r:W,s:G}=O,K=D(w),Q=u(G),re=c(K*Q),de=c(W*Q),le=l.BASE.multiplyAndAddUnsafe(H,re,de)?.toAffine();return le?c(le.x)===W:!1}return{CURVE:e,getPublicKey:C,getSharedSecret:T,sign:A,verify:m,ProjectivePoint:l,Signature:E,utils:S}}function Cbe(t){return{hash:t,hmac:(e,...r)=>xX(t,e,Kme(...r)),randomBytes:Zme}}function Sbe(t,e){const r=n=>xbe({...t,...Cbe(n)});return{...r(e),create:r}}const MX=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),mM=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ibe=BigInt(0),Tbe=BigInt(1),v8=BigInt(2),yM=(t,e)=>(t+e/v8)/e;function Nbe(t){const e=MX,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=bc(l,r,e)*l%e,f=bc(d,r,e)*l%e,p=bc(f,v8,e)*u%e,g=bc(p,s,e)*p%e,h=bc(g,i,e)*g%e,y=bc(h,a,e)*h%e,E=bc(y,c,e)*y%e,S=bc(E,a,e)*h%e,C=bc(S,r,e)*l%e,_=bc(C,o,e)*g%e,T=bc(_,n,e)*u%e,P=bc(T,v8,e);if(!E8.eql(E8.sqr(P),t))throw new Error("Cannot find square root");return P}const E8=q4(MX,void 0,void 0,{sqrt:Nbe}),Pbe=Sbe({a:Ibe,b:BigInt(7),Fp:E8,n:mM,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=mM,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Tbe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=yM(i*t,e),c=yM(-n*t,e);let u=ca(t-a*r-c*s,e),l=ca(-a*n-c*i,e);const d=u>o,f=l>o;if(d&&(u=e-u),f&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}}},wye);function Rbe(t){if(t.length!==130&&t.length!==132)throw new kbe({signature:t});const e=BigInt(Nd(t,0,32)),r=BigInt(Nd(t,32,64)),n=(()=>{const s=+`0x${t.slice(130)}`;if(!Number.isNaN(s))try{return Obe(s)}catch{throw new Bbe({value:s})}})();return typeof n>"u"?{r:e,s:r}:{r:e,s:r,yParity:n}}function Obe(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new Ube({value:t})}class kbe extends Is{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${Ch($4(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class Bbe extends Is{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class Ube extends Is{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}const wg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function PE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function _8(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function q0(t,...e){if(!PE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function DX(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");_8(t.outputLen),_8(t.blockLen)}function l6(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Mbe(t,e){q0(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function my(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function V3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Zu(t,e){return t<<32-e|t>>>e}const jX=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Dbe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function p0(t){if(q0(t),jX)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=Dbe[t[r]];return e}const Jl={_0:48,_9:57,A:65,F:70,a:97,f:102};function bM(t){if(t>=Jl._0&&t<=Jl._9)return t-Jl._0;if(t>=Jl.A&&t<=Jl.F)return t-(Jl.A-10);if(t>=Jl.a&&t<=Jl.f)return t-(Jl.a-10)}function d6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(jX)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=bM(t.charCodeAt(i)),a=bM(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function jbe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function H4(t){return typeof t=="string"&&(t=jbe(t)),q0(t),t}function pl(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];q0(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let LX=class{};function z4(t){const e=n=>t().update(H4(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function W4(t=32){if(wg&&typeof wg.getRandomValues=="function")return wg.getRandomValues(new Uint8Array(t));if(wg&&typeof wg.randomBytes=="function")return Uint8Array.from(wg.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const V4=BigInt(0),A8=BigInt(1);function x0(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function Su(t,e,r=""){const n=PE(t),s=t?.length,i=e!==void 0;if(!n||i&&s!==e){const o=r&&`"${r}" `,a=i?` of length ${e}`:"",c=n?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function Y_(t){const e=t.toString(16);return e.length&1?"0"+e:e}function FX(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?V4:BigInt("0x"+t)}function N5(t){return FX(p0(t))}function Uv(t){return q0(t),FX(p0(Uint8Array.from(t).reverse()))}function G4(t,e){return d6(t.toString(16).padStart(e*2,"0"))}function $X(t,e){return G4(t,e).reverse()}function hs(t,e,r){let n;if(typeof e=="string")try{n=d6(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(PE(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function wM(t){return Uint8Array.from(t)}const G3=t=>typeof t=="bigint"&&V4<=t;function Lbe(t,e,r){return G3(t)&&G3(e)&&G3(r)&&e<=t&&t<r}function x8(t,e,r,n){if(!Lbe(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function qX(t){let e;for(e=0;t>V4;t>>=A8,e+=1);return e}const RE=t=>(A8<<BigInt(t))-A8;function Fbe(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=p=>new Uint8Array(p),s=p=>Uint8Array.of(p);let i=n(t),o=n(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...p)=>r(o,i,...p),l=(p=n(0))=>{o=u(s(0),p),i=u(),p.length!==0&&(o=u(s(1),p),i=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const g=[];for(;p<e;){i=u();const h=i.slice();g.push(h),p+=i.length}return pl(...g)};return(p,g)=>{c(),l(p);let h;for(;!(h=g(d()));)l();return c(),h}}function OE(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(r).forEach(([s,i])=>n(s,i,!0))}function f6(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const ya=BigInt(0),ki=BigInt(1),Jp=BigInt(2),HX=BigInt(3),zX=BigInt(4),WX=BigInt(5),$be=BigInt(7),VX=BigInt(8),qbe=BigInt(9),GX=BigInt(16);function ks(t,e){const r=t%e;return r>=ya?r:e+r}function ls(t,e,r){let n=t;for(;e-- >ya;)n*=n,n%=r;return n}function vM(t,e){if(t===ya)throw new Error("invert: expected non-zero number");if(e<=ya)throw new Error("invert: expected positive modulus, got "+e);let r=ks(t,e),n=e,s=ya,i=ki;for(;r!==ya;){const a=n/r,c=n%r,u=s-i*a;n=r,r=c,s=i,i=u}if(n!==ki)throw new Error("invert: does not exist");return ks(s,e)}function K4(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function KX(t,e){const r=(t.ORDER+ki)/zX,n=t.pow(e,r);return K4(t,n,e),n}function Hbe(t,e){const r=(t.ORDER-WX)/VX,n=t.mul(e,Jp),s=t.pow(n,r),i=t.mul(e,s),o=t.mul(t.mul(i,Jp),s),a=t.mul(i,t.sub(o,t.ONE));return K4(t,a,e),a}function zbe(t){const e=H0(t),r=ZX(t),n=r(e,e.neg(e.ONE)),s=r(e,n),i=r(e,e.neg(n)),o=(t+$be)/GX;return(a,c)=>{let u=a.pow(c,o),l=a.mul(u,n);const d=a.mul(u,s),f=a.mul(u,i),p=a.eql(a.sqr(l),c),g=a.eql(a.sqr(d),c);u=a.cmov(u,l,p),l=a.cmov(f,d,g);const h=a.eql(a.sqr(l),c),y=a.cmov(u,l,h);return K4(a,y,c),y}}function ZX(t){if(t<HX)throw new Error("sqrt is not defined for small field");let e=t-ki,r=0;for(;e%Jp===ya;)e/=Jp,r++;let n=Jp;const s=H0(t);for(;EM(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return KX;let i=s.pow(n,e);const o=(e+ki)/Jp;return function(c,u){if(c.is0(u))return u;if(EM(c,u)!==1)throw new Error("Cannot find square root");let l=r,d=c.mul(c.ONE,i),f=c.pow(u,e),p=c.pow(u,o);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let g=1,h=c.sqr(f);for(;!c.eql(h,c.ONE);)if(g++,h=c.sqr(h),g===l)throw new Error("Cannot find square root");const y=ki<<BigInt(l-g-1),E=c.pow(d,y);l=g,d=c.sqr(E),f=c.mul(f,d),p=c.mul(p,E)}return p}}function Wbe(t){return t%zX===HX?KX:t%VX===WX?Hbe:t%GX===qbe?zbe(t):ZX(t)}const Vbe=(t,e)=>(ks(t,e)&ki)===ki,Gbe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Kbe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=Gbe.reduce((n,s)=>(n[s]="function",n),e);return OE(t,r),t}function Zbe(t,e,r){if(r<ya)throw new Error("invalid exponent, negatives unsupported");if(r===ya)return t.ONE;if(r===ki)return e;let n=t.ONE,s=e;for(;r>ya;)r&ki&&(n=t.mul(n,s)),s=t.sqr(s),r>>=ki;return n}function YX(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),i),n}function EM(t,e){const r=(t.ORDER-ki)/Jp,n=t.pow(e,r),s=t.eql(n,t.ONE),i=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function JX(t,e){e!==void 0&&_8(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function H0(t,e,r=!1,n={}){if(t<=ya)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const f=e;f.BITS&&(s=f.BITS),f.sqrt&&(i=f.sqrt),typeof f.isLE=="boolean"&&(r=f.isLE),typeof f.modFromBytes=="boolean"&&(o=f.modFromBytes),a=f.allowedLengths}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:c,nByteLength:u}=JX(t,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const d=Object.freeze({ORDER:t,isLE:r,BITS:c,BYTES:u,MASK:RE(c),ZERO:ya,ONE:ki,allowedLengths:a,create:f=>ks(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return ya<=f&&f<t},is0:f=>f===ya,isValidNot0:f=>!d.is0(f)&&d.isValid(f),isOdd:f=>(f&ki)===ki,neg:f=>ks(-f,t),eql:(f,p)=>f===p,sqr:f=>ks(f*f,t),add:(f,p)=>ks(f+p,t),sub:(f,p)=>ks(f-p,t),mul:(f,p)=>ks(f*p,t),pow:(f,p)=>Zbe(d,f,p),div:(f,p)=>ks(f*vM(p,t),t),sqrN:f=>f*f,addN:(f,p)=>f+p,subN:(f,p)=>f-p,mulN:(f,p)=>f*p,inv:f=>vM(f,t),sqrt:i||(f=>(l||(l=Wbe(t)),l(d,f))),toBytes:f=>r?$X(f,u):G4(f,u),fromBytes:(f,p=!0)=>{if(a){if(!a.includes(f.length)||f.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);const h=new Uint8Array(u);h.set(f,r?0:h.length-f.length),f=h}if(f.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+f.length);let g=r?Uv(f):N5(f);if(o&&(g=ks(g,t)),!p&&!d.isValid(g))throw new Error("invalid field element: outside of range 0..ORDER");return g},invertBatch:f=>YX(d,f),cmov:(f,p,g)=>g?p:f});return Object.freeze(d)}function XX(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function QX(t){const e=XX(t);return e+Math.ceil(e/2)}function Ybe(t,e,r=!1){const n=t.length,s=XX(e),i=QX(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?Uv(t):N5(t),a=ks(o,e-ki)+ki;return r?$X(a,s):G4(a,s)}function Jbe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function Xbe(t,e,r){return t&e^~t&r}function Qbe(t,e,r){return t&e^t&r^e&r}let eQ=class extends LX{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=V3(this.buffer)}update(e){l6(this),e=H4(e),q0(e);const{view:r,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=V3(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){l6(this),Mbe(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,my(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;Jbe(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=V3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}};const bf=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),qi=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Hi=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),J_=BigInt(2**32-1),_M=BigInt(32);function ewe(t,e=!1){return e?{h:Number(t&J_),l:Number(t>>_M&J_)}:{h:Number(t>>_M&J_)|0,l:Number(t&J_)|0}}function twe(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:o,l:a}=ewe(t[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const AM=(t,e,r)=>t>>>r,xM=(t,e,r)=>t<<32-r|e>>>r,vg=(t,e,r)=>t>>>r|e<<32-r,Eg=(t,e,r)=>t<<32-r|e>>>r,X_=(t,e,r)=>t<<64-r|e>>>r-32,Q_=(t,e,r)=>t>>>r-32|e<<64-r;function Xl(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const rwe=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),nwe=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,swe=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),iwe=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,owe=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),awe=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,cwe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),wf=new Uint32Array(64);let uwe=class extends eQ{constructor(e=32){super(64,e,8,!1),this.A=bf[0]|0,this.B=bf[1]|0,this.C=bf[2]|0,this.D=bf[3]|0,this.E=bf[4]|0,this.F=bf[5]|0,this.G=bf[6]|0,this.H=bf[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)wf[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const f=wf[d-15],p=wf[d-2],g=Zu(f,7)^Zu(f,18)^f>>>3,h=Zu(p,17)^Zu(p,19)^p>>>10;wf[d]=h+wf[d-7]+g+wf[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Zu(a,6)^Zu(a,11)^Zu(a,25),p=l+f+Xbe(a,c,u)+cwe[d]+wf[d]|0,h=(Zu(n,2)^Zu(n,13)^Zu(n,22))+Qbe(n,s,i)|0;l=u,u=c,c=a,a=o+p|0,o=i,i=s,s=n,n=p+h|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){my(wf)}destroy(){this.set(0,0,0,0,0,0,0,0),my(this.buffer)}};const tQ=twe(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),lwe=tQ[0],dwe=tQ[1],vf=new Uint32Array(80),Ef=new Uint32Array(80);class rQ extends eQ{constructor(e=64){super(128,e,16,!1),this.Ah=Hi[0]|0,this.Al=Hi[1]|0,this.Bh=Hi[2]|0,this.Bl=Hi[3]|0,this.Ch=Hi[4]|0,this.Cl=Hi[5]|0,this.Dh=Hi[6]|0,this.Dl=Hi[7]|0,this.Eh=Hi[8]|0,this.El=Hi[9]|0,this.Fh=Hi[10]|0,this.Fl=Hi[11]|0,this.Gh=Hi[12]|0,this.Gl=Hi[13]|0,this.Hh=Hi[14]|0,this.Hl=Hi[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:p,Gl:g,Hh:h,Hl:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=p|0,this.Gl=g|0,this.Hh=h|0,this.Hl=y|0}process(e,r){for(let C=0;C<16;C++,r+=4)vf[C]=e.getUint32(r),Ef[C]=e.getUint32(r+=4);for(let C=16;C<80;C++){const _=vf[C-15]|0,T=Ef[C-15]|0,P=vg(_,T,1)^vg(_,T,8)^AM(_,T,7),D=Eg(_,T,1)^Eg(_,T,8)^xM(_,T,7),F=vf[C-2]|0,I=Ef[C-2]|0,U=vg(F,I,19)^X_(F,I,61)^AM(F,I,6),L=Eg(F,I,19)^Q_(F,I,61)^xM(F,I,6),B=swe(D,L,Ef[C-7],Ef[C-16]),A=iwe(B,P,U,vf[C-7],vf[C-16]);vf[C]=A|0,Ef[C]=B|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:p,Fl:g,Gh:h,Gl:y,Hh:E,Hl:S}=this;for(let C=0;C<80;C++){const _=vg(d,f,14)^vg(d,f,18)^X_(d,f,41),T=Eg(d,f,14)^Eg(d,f,18)^Q_(d,f,41),P=d&p^~d&h,D=f&g^~f&y,F=owe(S,T,D,dwe[C],Ef[C]),I=awe(F,E,_,P,lwe[C],vf[C]),U=F|0,L=vg(n,s,28)^X_(n,s,34)^X_(n,s,39),B=Eg(n,s,28)^Q_(n,s,34)^Q_(n,s,39),A=n&i^n&a^i&a,m=s&o^s&c^o&c;E=h|0,S=y|0,h=p|0,y=g|0,p=d|0,g=f|0,{h:d,l:f}=Xl(u|0,l|0,I|0,U|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const b=rwe(U,B,m);n=nwe(b,I,L,A),s=b|0}({h:n,l:s}=Xl(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Xl(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Xl(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=Xl(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=Xl(this.Eh|0,this.El|0,d|0,f|0),{h:p,l:g}=Xl(this.Fh|0,this.Fl|0,p|0,g|0),{h,l:y}=Xl(this.Gh|0,this.Gl|0,h|0,y|0),{h:E,l:S}=Xl(this.Hh|0,this.Hl|0,E|0,S|0),this.set(n,s,i,o,a,c,u,l,d,f,p,g,h,y,E,S)}roundClean(){my(vf,Ef)}destroy(){my(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class fwe extends rQ{constructor(){super(48),this.Ah=qi[0]|0,this.Al=qi[1]|0,this.Bh=qi[2]|0,this.Bl=qi[3]|0,this.Ch=qi[4]|0,this.Cl=qi[5]|0,this.Dh=qi[6]|0,this.Dl=qi[7]|0,this.Eh=qi[8]|0,this.El=qi[9]|0,this.Fh=qi[10]|0,this.Fl=qi[11]|0,this.Gh=qi[12]|0,this.Gl=qi[13]|0,this.Hh=qi[14]|0,this.Hl=qi[15]|0}}const hwe=z4(()=>new uwe),pwe=z4(()=>new rQ),Aet=z4(()=>new fwe);class nQ extends LX{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,DX(e);const n=H4(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),my(i)}update(e){return l6(this),this.iHash.update(e),this}digestInto(e){l6(this),q0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const sQ=(t,e,r)=>new nQ(t,e).update(r).digest();sQ.create=(t,e)=>new nQ(t,e);const yy=BigInt(0),Xp=BigInt(1);function h6(t,e){const r=e.negate();return t?r:e}function Qp(t,e){const r=YX(t.Fp,e.map(n=>n.Z));return e.map((n,s)=>t.fromAffine(n.toAffine(r[s])))}function iQ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function K3(t,e){iQ(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),s=2**t,i=RE(t),o=BigInt(t);return{windows:r,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function CM(t,e,r){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=r;let a=Number(t&s),c=t>>o;a>n&&(a-=i,c+=Xp);const u=e*n,l=u+Math.abs(a)-1,d=a===0,f=a<0,p=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:p,offsetF:u}}function gwe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function mwe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Z3=new WeakMap,oQ=new WeakMap;function Y3(t){return oQ.get(t)||1}function SM(t){if(t!==yy)throw new Error("invalid wNAF")}class aQ{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let s=e;for(;r>yy;)r&Xp&&(n=n.add(s)),s=s.double(),r>>=Xp;return n}precomputeWindow(e,r){const{windows:n,windowSize:s}=K3(r,this.bits),i=[];let o=e,a=o;for(let c=0;c<n;c++){a=o,i.push(a);for(let u=1;u<s;u++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=K3(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:u,isZero:l,isNeg:d,isNegF:f,offsetF:p}=CM(n,a,o);n=c,l?i=i.add(h6(f,r[p])):s=s.add(h6(d,r[u]))}return SM(n),{p:s,f:i}}wNAFUnsafe(e,r,n,s=this.ZERO){const i=K3(e,this.bits);for(let o=0;o<i.windows&&n!==yy;o++){const{nextN:a,offset:c,isZero:u,isNeg:l}=CM(n,o,i);if(n=a,!u){const d=r[c];s=s.add(l?d.negate():d)}}return SM(n),s}getPrecomputes(e,r,n){let s=Z3.get(r);return s||(s=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(s=n(s)),Z3.set(r,s))),s}cached(e,r,n){const s=Y3(e);return this.wNAF(s,this.getPrecomputes(s,e,n),r)}unsafe(e,r,n,s){const i=Y3(e);return i===1?this._unsafeLadder(e,r,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),r,s)}createCache(e,r){iQ(r,this.bits),oQ.set(e,r),Z3.delete(e)}hasCache(e){return Y3(e)!==1}}function ywe(t,e,r,n){let s=e,i=t.ZERO,o=t.ZERO;for(;r>yy||n>yy;)r&Xp&&(i=i.add(s)),n&Xp&&(o=o.add(s)),s=s.double(),r>>=Xp,n>>=Xp;return{p1:i,p2:o}}function cQ(t,e,r,n){gwe(r,t),mwe(n,e);const s=r.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=qX(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=RE(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let p=d;p>=0;p-=c){l.fill(o);for(let h=0;h<i;h++){const y=n[h],E=Number(y>>BigInt(p)&u);l[E]=l[E].add(r[h])}let g=o;for(let h=l.length-1,y=o;h>0;h--)y=y.add(l[h]),g=g.add(y);if(f=f.add(g),p!==0)for(let h=0;h<c;h++)f=f.double()}return f}function IM(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Kbe(e),e}else return H0(t,{isLE:r})}function uQ(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>yy))throw new Error(`CURVE.${c} must be positive bigint`)}const s=IM(e.p,r.Fp,n),i=IM(e.n,r.Fn,n),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const c of a)if(!s.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}const TM=(t,e)=>(t+(t>=0?e:-e)/lQ)/e;function bwe(t,e,r){const[[n,s],[i,o]]=e,a=TM(o*t,r),c=TM(-s*t,r);let u=t-a*n-c*i,l=-a*s-c*o;const d=u<$d,f=l<$d;d&&(u=-u),f&&(l=-l);const p=RE(Math.ceil(qX(r)/2))+Vm;if(u<$d||u>=p||l<$d||l>=p)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}function C8(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function J3(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return x0(r.lowS,"lowS"),x0(r.prehash,"prehash"),r.format!==void 0&&C8(r.format),r}class wwe extends Error{constructor(e=""){super(e)}}const Bd={Err:wwe,_tlv:{encode:(t,e)=>{const{Err:r}=Bd;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=Y_(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?Y_(s.length/2|128):"";return Y_(t)+i+s+e},decode(t,e){const{Err:r}=Bd;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=Bd;if(t<$d)throw new e("integer: negative integers are not allowed");let r=Y_(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Bd;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return N5(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Bd,s=hs("signature",t),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=Bd,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}},$d=BigInt(0),Vm=BigInt(1),lQ=BigInt(2),e2=BigInt(3),vwe=BigInt(4);function Rm(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let s=hs("private key",e);try{n=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function Ewe(t,e={}){const r=uQ("weierstrass",t,e),{Fp:n,Fn:s}=r;let i=r.CURVE;const{h:o,n:a}=i;OE(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=fQ(n,s);function l(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(B,A,m){const{x:b,y:w}=A.toAffine(),x=n.toBytes(b);if(x0(m,"isCompressed"),m){l();const M=!n.isOdd(w);return pl(dQ(M),x)}else return pl(Uint8Array.of(4),x,n.toBytes(w))}function f(B){Su(B,void 0,"Point");const{publicKey:A,publicKeyUncompressed:m}=u,b=B.length,w=B[0],x=B.subarray(1);if(b===A&&(w===2||w===3)){const M=n.fromBytes(x);if(!n.isValid(M))throw new Error("bad point: is not on curve, wrong x");const k=h(M);let j;try{j=n.sqrt(k)}catch(R){const $=R instanceof Error?": "+R.message:"";throw new Error("bad point: is not on curve, sqrt error"+$)}l();const N=n.isOdd(j);return(w&1)===1!==N&&(j=n.neg(j)),{x:M,y:j}}else if(b===m&&w===4){const M=n.BYTES,k=n.fromBytes(x.subarray(0,M)),j=n.fromBytes(x.subarray(M,M*2));if(!y(k,j))throw new Error("bad point: is not on curve");return{x:k,y:j}}else throw new Error(`bad point: got length ${b}, expected compressed=${A} or uncompressed=${m}`)}const p=e.toBytes||d,g=e.fromBytes||f;function h(B){const A=n.sqr(B),m=n.mul(A,B);return n.add(n.add(m,n.mul(B,i.a)),i.b)}function y(B,A){const m=n.sqr(A),b=h(B);return n.eql(m,b)}if(!y(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const E=n.mul(n.pow(i.a,e2),vwe),S=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(E,S)))throw new Error("bad curve params: a or b");function C(B,A,m=!1){if(!n.isValid(A)||m&&n.is0(A))throw new Error(`bad point coordinate ${B}`);return A}function _(B){if(!(B instanceof I))throw new Error("ProjectivePoint expected")}function T(B){if(!c||!c.basises)throw new Error("no endo");return bwe(B,c.basises,s.ORDER)}const P=f6((B,A)=>{const{X:m,Y:b,Z:w}=B;if(n.eql(w,n.ONE))return{x:m,y:b};const x=B.is0();A==null&&(A=x?n.ONE:n.inv(w));const M=n.mul(m,A),k=n.mul(b,A),j=n.mul(w,A);if(x)return{x:n.ZERO,y:n.ZERO};if(!n.eql(j,n.ONE))throw new Error("invZ was invalid");return{x:M,y:k}}),D=f6(B=>{if(B.is0()){if(e.allowInfinityPoint&&!n.is0(B.Y))return;throw new Error("bad point: ZERO")}const{x:A,y:m}=B.toAffine();if(!n.isValid(A)||!n.isValid(m))throw new Error("bad point: x or y not field elements");if(!y(A,m))throw new Error("bad point: equation left != right");if(!B.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function F(B,A,m,b,w){return m=new I(n.mul(m.X,B),m.Y,m.Z),A=h6(b,A),m=h6(w,m),A.add(m)}class I{constructor(A,m,b){this.X=C("x",A),this.Y=C("y",m,!0),this.Z=C("z",b),Object.freeze(this)}static CURVE(){return i}static fromAffine(A){const{x:m,y:b}=A||{};if(!A||!n.isValid(m)||!n.isValid(b))throw new Error("invalid affine point");if(A instanceof I)throw new Error("projective point not allowed");return n.is0(m)&&n.is0(b)?I.ZERO:new I(m,b,n.ONE)}static fromBytes(A){const m=I.fromAffine(g(Su(A,void 0,"point")));return m.assertValidity(),m}static fromHex(A){return I.fromBytes(hs("pointHex",A))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(A=8,m=!0){return L.createCache(this,A),m||this.multiply(e2),this}assertValidity(){D(this)}hasEvenY(){const{y:A}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(A)}equals(A){_(A);const{X:m,Y:b,Z:w}=this,{X:x,Y:M,Z:k}=A,j=n.eql(n.mul(m,k),n.mul(x,w)),N=n.eql(n.mul(b,k),n.mul(M,w));return j&&N}negate(){return new I(this.X,n.neg(this.Y),this.Z)}double(){const{a:A,b:m}=i,b=n.mul(m,e2),{X:w,Y:x,Z:M}=this;let k=n.ZERO,j=n.ZERO,N=n.ZERO,v=n.mul(w,w),R=n.mul(x,x),$=n.mul(M,M),O=n.mul(w,x);return O=n.add(O,O),N=n.mul(w,M),N=n.add(N,N),k=n.mul(A,N),j=n.mul(b,$),j=n.add(k,j),k=n.sub(R,j),j=n.add(R,j),j=n.mul(k,j),k=n.mul(O,k),N=n.mul(b,N),$=n.mul(A,$),O=n.sub(v,$),O=n.mul(A,O),O=n.add(O,N),N=n.add(v,v),v=n.add(N,v),v=n.add(v,$),v=n.mul(v,O),j=n.add(j,v),$=n.mul(x,M),$=n.add($,$),v=n.mul($,O),k=n.sub(k,v),N=n.mul($,R),N=n.add(N,N),N=n.add(N,N),new I(k,j,N)}add(A){_(A);const{X:m,Y:b,Z:w}=this,{X:x,Y:M,Z:k}=A;let j=n.ZERO,N=n.ZERO,v=n.ZERO;const R=i.a,$=n.mul(i.b,e2);let O=n.mul(m,x),H=n.mul(b,M),W=n.mul(w,k),G=n.add(m,b),K=n.add(x,M);G=n.mul(G,K),K=n.add(O,H),G=n.sub(G,K),K=n.add(m,w);let Q=n.add(x,k);return K=n.mul(K,Q),Q=n.add(O,W),K=n.sub(K,Q),Q=n.add(b,w),j=n.add(M,k),Q=n.mul(Q,j),j=n.add(H,W),Q=n.sub(Q,j),v=n.mul(R,K),j=n.mul($,W),v=n.add(j,v),j=n.sub(H,v),v=n.add(H,v),N=n.mul(j,v),H=n.add(O,O),H=n.add(H,O),W=n.mul(R,W),K=n.mul($,K),H=n.add(H,W),W=n.sub(O,W),W=n.mul(R,W),K=n.add(K,W),O=n.mul(H,K),N=n.add(N,O),O=n.mul(Q,K),j=n.mul(G,j),j=n.sub(j,O),O=n.mul(G,H),v=n.mul(Q,v),v=n.add(v,O),new I(j,N,v)}subtract(A){return this.add(A.negate())}is0(){return this.equals(I.ZERO)}multiply(A){const{endo:m}=e;if(!s.isValidNot0(A))throw new Error("invalid scalar: out of range");let b,w;const x=M=>L.cached(this,M,k=>Qp(I,k));if(m){const{k1neg:M,k1:k,k2neg:j,k2:N}=T(A),{p:v,f:R}=x(k),{p:$,f:O}=x(N);w=R.add(O),b=F(m.beta,v,$,M,j)}else{const{p:M,f:k}=x(A);b=M,w=k}return Qp(I,[b,w])[0]}multiplyUnsafe(A){const{endo:m}=e,b=this;if(!s.isValid(A))throw new Error("invalid scalar: out of range");if(A===$d||b.is0())return I.ZERO;if(A===Vm)return b;if(L.hasCache(this))return this.multiply(A);if(m){const{k1neg:w,k1:x,k2neg:M,k2:k}=T(A),{p1:j,p2:N}=ywe(I,b,x,k);return F(m.beta,j,N,w,M)}else return L.unsafe(b,A)}multiplyAndAddUnsafe(A,m,b){const w=this.multiplyUnsafe(m).add(A.multiplyUnsafe(b));return w.is0()?void 0:w}toAffine(A){return P(this,A)}isTorsionFree(){const{isTorsionFree:A}=e;return o===Vm?!0:A?A(I,this):L.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:A}=e;return o===Vm?this:A?A(I,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(A=!0){return x0(A,"isCompressed"),this.assertValidity(),p(I,this,A)}toHex(A=!0){return p0(this.toBytes(A))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(A=!0){return this.toBytes(A)}_setWindowSize(A){this.precompute(A)}static normalizeZ(A){return Qp(I,A)}static msm(A,m){return cQ(I,s,A,m)}static fromPrivateKey(A){return I.BASE.multiply(Rm(s,A))}}I.BASE=new I(i.Gx,i.Gy,n.ONE),I.ZERO=new I(n.ZERO,n.ONE,n.ZERO),I.Fp=n,I.Fn=s;const U=s.BITS,L=new aQ(I,e.endo?Math.ceil(U/2):U);return I.BASE.precompute(8),I}function dQ(t){return Uint8Array.of(t?2:3)}function fQ(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function _we(t,e={}){const{Fn:r}=t,n=e.randomBytes||W4,s=Object.assign(fQ(t.Fp,r),{seed:QX(r.ORDER)});function i(p){try{return!!Rm(r,p)}catch{return!1}}function o(p,g){const{publicKey:h,publicKeyUncompressed:y}=s;try{const E=p.length;return g===!0&&E!==h||g===!1&&E!==y?!1:!!t.fromBytes(p)}catch{return!1}}function a(p=n(s.seed)){return Ybe(Su(p,s.seed,"seed"),r.ORDER)}function c(p,g=!0){return t.BASE.multiply(Rm(r,p)).toBytes(g)}function u(p){const g=a(p);return{secretKey:g,publicKey:c(g)}}function l(p){if(typeof p=="bigint")return!1;if(p instanceof t)return!0;const{secretKey:g,publicKey:h,publicKeyUncompressed:y}=s;if(r.allowedLengths||g===h)return;const E=hs("key",p).length;return E===h||E===y}function d(p,g,h=!0){if(l(p)===!0)throw new Error("first arg must be private key");if(l(g)===!1)throw new Error("second arg must be public key");const y=Rm(r,p);return t.fromHex(g).multiply(y).toBytes(h)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:u,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:p=>Rm(r,p),precompute(p=8,g=t.BASE){return g.precompute(p,!1)}},lengths:s})}function Awe(t,e,r={}){DX(e),OE(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||W4,s=r.hmac||((m,...b)=>sQ(e,m,pl(...b))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:p}=_we(t,r),g={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},h="compact";function y(m){const b=a>>Vm;return m>b}function E(m,b){if(!o.isValidNot0(b))throw new Error(`invalid signature ${m}: out of range 1..Point.Fn.ORDER`);return b}function S(m,b){C8(b);const w=p.signature,x=b==="compact"?w:b==="recovered"?w+1:void 0;return Su(m,x,`${b} signature`)}class C{constructor(b,w,x){this.r=E("r",b),this.s=E("s",w),x!=null&&(this.recovery=x),Object.freeze(this)}static fromBytes(b,w=h){S(b,w);let x;if(w==="der"){const{r:N,s:v}=Bd.toSig(Su(b));return new C(N,v)}w==="recovered"&&(x=b[0],w="compact",b=b.subarray(1));const M=o.BYTES,k=b.subarray(0,M),j=b.subarray(M,M*2);return new C(o.fromBytes(k),o.fromBytes(j),x)}static fromHex(b,w){return this.fromBytes(d6(b),w)}addRecoveryBit(b){return new C(this.r,this.s,b)}recoverPublicKey(b){const w=i.ORDER,{r:x,s:M,recovery:k}=this;if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");if(a*lQ<w&&k>1)throw new Error("recovery id is ambiguous for h>1 curve");const N=k===2||k===3?x+a:x;if(!i.isValid(N))throw new Error("recovery id 2 or 3 invalid");const v=i.toBytes(N),R=t.fromBytes(pl(dQ((k&1)===0),v)),$=o.inv(N),O=T(hs("msgHash",b)),H=o.create(-O*$),W=o.create(M*$),G=t.BASE.multiplyUnsafe(H).add(R.multiplyUnsafe(W));if(G.is0())throw new Error("point at infinify");return G.assertValidity(),G}hasHighS(){return y(this.s)}toBytes(b=h){if(C8(b),b==="der")return d6(Bd.hexFromSig(this));const w=o.toBytes(this.r),x=o.toBytes(this.s);if(b==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return pl(Uint8Array.of(this.recovery),w,x)}return pl(w,x)}toHex(b){return p0(this.toBytes(b))}assertValidity(){}static fromCompact(b){return C.fromBytes(hs("sig",b),"compact")}static fromDER(b){return C.fromBytes(hs("sig",b),"der")}normalizeS(){return this.hasHighS()?new C(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return p0(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return p0(this.toBytes("compact"))}}const _=r.bits2int||function(b){if(b.length>8192)throw new Error("input is too large");const w=N5(b),x=b.length*8-c;return x>0?w>>BigInt(x):w},T=r.bits2int_modN||function(b){return o.create(_(b))},P=RE(c);function D(m){return x8("num < 2^"+c,m,$d,P),o.toBytes(m)}function F(m,b){return Su(m,void 0,"message"),b?Su(e(m),void 0,"prehashed message"):m}function I(m,b,w){if(["recovered","canonical"].some(H=>H in w))throw new Error("sign() legacy options not supported");const{lowS:x,prehash:M,extraEntropy:k}=J3(w,g);m=F(m,M);const j=T(m),N=Rm(o,b),v=[D(N),D(j)];if(k!=null&&k!==!1){const H=k===!0?n(p.secretKey):k;v.push(hs("extraEntropy",H))}const R=pl(...v),$=j;function O(H){const W=_(H);if(!o.isValidNot0(W))return;const G=o.inv(W),K=t.BASE.multiply(W).toAffine(),Q=o.create(K.x);if(Q===$d)return;const re=o.create(G*o.create($+Q*N));if(re===$d)return;let de=(K.x===Q?0:2)|Number(K.y&Vm),le=re;return x&&y(re)&&(le=o.neg(re),de^=1),new C(Q,le,de)}return{seed:R,k2sig:O}}function U(m,b,w={}){m=hs("message",m);const{seed:x,k2sig:M}=I(m,b,w);return Fbe(e.outputLen,o.BYTES,s)(x,M)}function L(m){let b;const w=typeof m=="string"||PE(m),x=!w&&m!==null&&typeof m=="object"&&typeof m.r=="bigint"&&typeof m.s=="bigint";if(!w&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(x)b=new C(m.r,m.s);else if(w){try{b=C.fromBytes(hs("sig",m),"der")}catch(M){if(!(M instanceof Bd.Err))throw M}if(!b)try{b=C.fromBytes(hs("sig",m),"compact")}catch{return!1}}return b||!1}function B(m,b,w,x={}){const{lowS:M,prehash:k,format:j}=J3(x,g);if(w=hs("publicKey",w),b=F(hs("message",b),k),"strict"in x)throw new Error("options.strict was renamed to lowS");const N=j===void 0?L(m):C.fromBytes(hs("sig",m),j);if(N===!1)return!1;try{const v=t.fromBytes(w);if(M&&N.hasHighS())return!1;const{r:R,s:$}=N,O=T(b),H=o.inv($),W=o.create(O*H),G=o.create(R*H),K=t.BASE.multiplyUnsafe(W).add(v.multiplyUnsafe(G));return K.is0()?!1:o.create(K.x)===R}catch{return!1}}function A(m,b,w={}){const{prehash:x}=J3(w,g);return b=F(b,x),C.fromBytes(m,"recovered").recoverPublicKey(b).toBytes()}return Object.freeze({keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:p,Point:t,sign:U,verify:B,recoverPublicKey:A,Signature:C,hash:e})}function xwe(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=H0(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),i={Fp:r,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function Cwe(t){const{CURVE:e,curveOpts:r}=xwe(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function Swe(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,JX(r.Fn.ORDER,r.Fn.BITS))})}function Iwe(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:s}=Cwe(t),i=Ewe(e,r),o=Awe(i,n,s);return Swe(t,o)}function Twe(t,e){const r=n=>Iwe({...t,hash:n});return{...r(e),create:r}}const Z4={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Nwe={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},NM=BigInt(2);function Pwe(t){const e=Z4.p,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=ls(l,r,e)*l%e,f=ls(d,r,e)*l%e,p=ls(f,NM,e)*u%e,g=ls(p,s,e)*p%e,h=ls(g,i,e)*g%e,y=ls(h,a,e)*h%e,E=ls(y,c,e)*y%e,S=ls(E,a,e)*h%e,C=ls(S,r,e)*l%e,_=ls(C,o,e)*g%e,T=ls(_,n,e)*u%e,P=ls(T,NM,e);if(!S8.eql(S8.sqr(P),t))throw new Error("Cannot find square root");return P}const S8=H0(Z4.p,{sqrt:Pwe}),Rwe=Twe({...Z4,Fp:S8,lowS:!0,endo:Nwe},hwe);function Owe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function hQ(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(r=>typeof r=="string"):e.every(r=>Number.isSafeInteger(r)):!1}function p6(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Y4(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function I8(t){if(!Array.isArray(t))throw new Error("array expected")}function g6(t,e){if(!hQ(!0,e))throw new Error(`${t}: array of strings expected`)}function kwe(t,e){if(!hQ(!1,e))throw new Error(`${t}: array of numbers expected`)}function Bwe(...t){const e=i=>i,r=(i,o)=>a=>i(o(a)),n=t.map(i=>i.encode).reduceRight(r,e),s=t.map(i=>i.decode).reduce(r,e);return{encode:n,decode:s}}function Uwe(t){const e=typeof t=="string"?t.split(""):t,r=e.length;g6("alphabet",e);const n=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(I8(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(I8(s),s.map(i=>{p6("alphabet.decode",i);const o=n.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function Mwe(t=""){return p6("join",t),{encode:e=>(g6("join.decode",e),e.join(t)),decode:e=>(p6("join.decode",e),e.split(t))}}function Dwe(t,e="="){return Y4(t),p6("padding",e),{encode(r){for(g6("padding.encode",r);r.length*t%8;)r.push(e);return r},decode(r){g6("padding.decode",r);let n=r.length;if(n*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--)if((n-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}const pQ=(t,e)=>e===0?t:pQ(e,t%e),m6=(t,e)=>t+(e-pQ(t,e)),X3=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function PM(t,e,r,n){if(I8(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(m6(e,r)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${r} carryBits=${m6(e,r)}`);let s=0,i=0;const o=X3[e],a=X3[r]-1,c=[];for(const u of t){if(Y4(u),u>=o)throw new Error(`convertRadix2: invalid data word=${u} from=${e}`);if(s=s<<e|u,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=r;i-=r)c.push((s>>i-r&a)>>>0);const l=X3[i];if(l===void 0)throw new Error("invalid carry");s&=l-1}if(s=s<<r-i&a,!n&&i>=e)throw new Error("Excess padding");if(!n&&s>0)throw new Error(`Non-zero padding: ${s}`);return n&&i>0&&c.push(s>>>0),c}function jwe(t,e=!1){if(Y4(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(m6(8,t)>32||m6(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!Owe(r))throw new Error("radix2.encode input should be Uint8Array");return PM(Array.from(r),8,t,!e)},decode:r=>(kwe("radix2.decode",r),Uint8Array.from(PM(r,t,8,e)))}}const gQ=Bwe(jwe(5),Uwe("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Dwe(5),Mwe(""));function Lwe(t){return sbe(Fwe(t))}function Fwe(t){const{payload:e,signature:r}=t,{r:n,s,yParity:i}=r,a=new Pbe.Signature(BigInt(n),BigInt(s)).addRecoveryBit(i).recoverPublicKey($4(e).substring(2));return Zye(a)}var Q3={exports:{}},RM;function $we(){return RM||(RM=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,l){this.fn=c,this.context=u,this.once=l||!1}function i(c,u,l,d,f){if(typeof l!="function")throw new TypeError("The listener must be a function");var p=new s(l,d||c,f),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],l,d;if(this._eventsCount===0)return u;for(d in l=this._events)e.call(l,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},a.prototype.listeners=function(u){var l=r?r+u:u,d=this._events[l];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,p=d.length,g=new Array(p);f<p;f++)g[f]=d[f].fn;return g},a.prototype.listenerCount=function(u){var l=r?r+u:u,d=this._events[l];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,l,d,f,p,g){var h=r?r+u:u;if(!this._events[h])return!1;var y=this._events[h],E=arguments.length,S,C;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),E){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,l),!0;case 3:return y.fn.call(y.context,l,d),!0;case 4:return y.fn.call(y.context,l,d,f),!0;case 5:return y.fn.call(y.context,l,d,f,p),!0;case 6:return y.fn.call(y.context,l,d,f,p,g),!0}for(C=1,S=new Array(E-1);C<E;C++)S[C-1]=arguments[C];y.fn.apply(y.context,S)}else{var _=y.length,T;for(C=0;C<_;C++)switch(y[C].once&&this.removeListener(u,y[C].fn,void 0,!0),E){case 1:y[C].fn.call(y[C].context);break;case 2:y[C].fn.call(y[C].context,l);break;case 3:y[C].fn.call(y[C].context,l,d);break;case 4:y[C].fn.call(y[C].context,l,d,f);break;default:if(!S)for(T=1,S=new Array(E-1);T<E;T++)S[T-1]=arguments[T];y[C].fn.apply(y[C].context,S)}}return!0},a.prototype.on=function(u,l,d){return i(this,u,l,d,!1)},a.prototype.once=function(u,l,d){return i(this,u,l,d,!0)},a.prototype.removeListener=function(u,l,d,f){var p=r?r+u:u;if(!this._events[p])return this;if(!l)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===l&&(!f||g.once)&&(!d||g.context===d)&&o(this,p);else{for(var h=0,y=[],E=g.length;h<E;h++)(g[h].fn!==l||f&&!g[h].once||d&&g[h].context!==d)&&y.push(g[h]);y.length?this._events[p]=y.length===1?y[0]:y:o(this,p)}return this},a.prototype.removeAllListeners=function(u){var l;return u?(l=r?r+u:u,this._events[l]&&o(this,l)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(Q3)),Q3.exports}var qwe=$we();const mQ=Ea(qwe);function Hwe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){const l=t.charAt(u),d=l.charCodeAt(0);if(e[d]!==255)throw new TypeError(l+" is ambiguous");e[d]=u}const r=t.length,n=t.charAt(0),s=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let l=0,d=0,f=0;const p=u.length;for(;f!==p&&u[f]===0;)f++,l++;const g=(p-f)*i+1>>>0,h=new Uint8Array(g);for(;f!==p;){let S=u[f],C=0;for(let _=g-1;(S!==0||C<d)&&_!==-1;_--,C++)S+=256*h[_]>>>0,h[_]=S%r>>>0,S=S/r>>>0;if(S!==0)throw new Error("Non-zero carry");d=C,f++}let y=g-d;for(;y!==g&&h[y]===0;)y++;let E=n.repeat(l);for(;y<g;++y)E+=t.charAt(h[y]);return E}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let l=0,d=0,f=0;for(;u[l]===n;)d++,l++;const p=(u.length-l)*s+1>>>0,g=new Uint8Array(p);for(;l<u.length;){const S=u.charCodeAt(l);if(S>255)return;let C=e[S];if(C===255)return;let _=0;for(let T=p-1;(C!==0||_<f)&&T!==-1;T--,_++)C+=r*g[T]>>>0,g[T]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");f=_,l++}let h=p-f;for(;h!==p&&g[h]===0;)h++;const y=new Uint8Array(d+(p-h));let E=d;for(;h!==p;)y[E++]=g[h++];return y}function c(u){const l=a(u);if(l)return l;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var zwe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Zn=Hwe(zwe);function Wwe(t){const e=t.length;let r=0,n=0;for(;n<e;){let s=t.charCodeAt(n++);if((s&4294967168)===0){r++;continue}else if((s&4294965248)===0)r+=2;else{if(s>=55296&&s<=56319&&n<e){const i=t.charCodeAt(n);(i&64512)===56320&&(++n,s=((s&1023)<<10)+(i&1023)+65536)}(s&4294901760)===0?r+=3:r+=4}}return r}function Vwe(t,e,r){const n=t.length;let s=r,i=0;for(;i<n;){let o=t.charCodeAt(i++);if((o&4294967168)===0){e[s++]=o;continue}else if((o&4294965248)===0)e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<n){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128):(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128)}e[s++]=o&63|128}}const Gwe=new TextEncoder,Kwe=50;function Zwe(t,e,r){Gwe.encodeInto(t,e.subarray(r))}function Ywe(t,e,r){t.length>Kwe?Zwe(t,e,r):Vwe(t,e,r)}const Jwe=4096;function yQ(t,e,r){let n=e;const s=n+r,i=[];let o="";for(;n<s;){const a=t[n++];if((a&128)===0)i.push(a);else if((a&224)===192){const c=t[n++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[n++]&63,u=t[n++]&63;i.push((a&31)<<12|c<<6|u)}else if((a&248)===240){const c=t[n++]&63,u=t[n++]&63,l=t[n++]&63;let d=(a&7)<<18|c<<12|u<<6|l;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=Jwe&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const Xwe=new TextDecoder,Qwe=200;function e1e(t,e,r){const n=t.subarray(e,e+r);return Xwe.decode(n)}function t1e(t,e,r){return r>Qwe?e1e(t,e,r):yQ(t,e,r)}class t2{constructor(e,r){this.type=e,this.data=r}}class Va extends Error{constructor(e){super(e);const r=Object.create(Va.prototype);Object.setPrototypeOf(this,r),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Va.name})}}const Sb=4294967295;function r1e(t,e,r){const n=r/4294967296,s=r;t.setUint32(e,n),t.setUint32(e+4,s)}function bQ(t,e,r){const n=Math.floor(r/4294967296),s=r;t.setUint32(e,n),t.setUint32(e+4,s)}function wQ(t,e){const r=t.getInt32(e),n=t.getUint32(e+4);return r*4294967296+n}function n1e(t,e){const r=t.getUint32(e),n=t.getUint32(e+4);return r*4294967296+n}const s1e=-1,i1e=4294967296-1,o1e=17179869184-1;function a1e({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=o1e)if(e===0&&t<=i1e){const r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}else{const r=t/4294967296,n=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|r&3),i.setUint32(4,n),s}else{const r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,e),bQ(n,4,t),r}}function c1e(t){const e=t.getTime(),r=Math.floor(e/1e3),n=(e-r*1e3)*1e6,s=Math.floor(n/1e9);return{sec:r+s,nsec:n-s*1e9}}function u1e(t){if(t instanceof Date){const e=c1e(t);return a1e(e)}else return null}function l1e(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const r=e.getUint32(0),n=e.getUint32(4),s=(r&3)*4294967296+n,i=r>>>2;return{sec:s,nsec:i}}case 12:{const r=wQ(e,4),n=e.getUint32(0);return{sec:r,nsec:n}}default:throw new Va(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function d1e(t){const e=l1e(t);return new Date(e.sec*1e3+e.nsec/1e6)}const f1e={type:s1e,encode:u1e,decode:d1e};class y6{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(f1e)}register({type:e,encode:r,decode:n}){if(e>=0)this.encoders[e]=r,this.decoders[e]=n;else{const s=-1-e;this.builtInEncoders[s]=r,this.builtInDecoders[s]=n}}tryToEncode(e,r){for(let n=0;n<this.builtInEncoders.length;n++){const s=this.builtInEncoders[n];if(s!=null){const i=s(e,r);if(i!=null){const o=-1-n;return new t2(o,i)}}}for(let n=0;n<this.encoders.length;n++){const s=this.encoders[n];if(s!=null){const i=s(e,r);if(i!=null){const o=n;return new t2(o,i)}}}return e instanceof t2?e:null}decode(e,r,n){const s=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return s?s(e,r,n):new t2(r,e)}}y6.defaultCodec=new y6;function h1e(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function T8(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):h1e(t)?new Uint8Array(t):Uint8Array.from(t)}const p1e=100,g1e=2048;let m1e=class vQ{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??y6.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??p1e,this.initialBufferSize=e?.initialBufferSize??g1e,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new vQ({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,r){if(r>this.maxDepth)throw new Error(`Too deep objects in depth ${r}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,r)}ensureBufferSizeToWrite(e){const r=this.pos+e;this.view.byteLength<r&&this.resizeBuffer(r*2)}resizeBuffer(e){const r=new ArrayBuffer(e),n=new Uint8Array(r),s=new DataView(r);n.set(this.bytes),this.view=s,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const n=Wwe(e);this.ensureBufferSizeToWrite(5+n),this.writeStringHeader(n),Ywe(e,this.bytes,this.pos),this.pos+=n}encodeObject(e,r){const n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,r);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,r);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const r=e.byteLength;if(r<256)this.writeU8(196),this.writeU8(r);else if(r<65536)this.writeU8(197),this.writeU16(r);else if(r<4294967296)this.writeU8(198),this.writeU32(r);else throw new Error(`Too large binary: ${r}`);const n=T8(e);this.writeU8a(n)}encodeArray(e,r){const n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(const s of e)this.doEncode(s,r+1)}countWithoutUndefined(e,r){let n=0;for(const s of r)e[s]!==void 0&&n++;return n}encodeMap(e,r){const n=Object.keys(e);this.sortKeys&&n.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of n){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,r+1))}}encodeExtension(e){if(typeof e.data=="function"){const n=e.data(this.pos+6),s=n.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(n);return}const r=e.data.length;if(r===1)this.writeU8(212);else if(r===2)this.writeU8(213);else if(r===4)this.writeU8(214);else if(r===8)this.writeU8(215);else if(r===16)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else if(r<4294967296)this.writeU8(201),this.writeU32(r);else throw new Error(`Too large extension object: ${r}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const r=e.length;this.ensureBufferSizeToWrite(r),this.bytes.set(e,this.pos),this.pos+=r}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),r1e(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),bQ(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function EQ(t,e){return new m1e(e).encodeSharedRef(t)}function eN(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const y1e=16,b1e=16;class w1e{constructor(e=y1e,r=b1e){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=r,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,r,n){const s=this.caches[n-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<n;a++)if(o[a]!==e[r+a])continue e;return i.str}return null}store(e,r){const n=this.caches[e.length-1],s={bytes:e,str:r};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=s:n.push(s)}decode(e,r,n){const s=this.find(e,r,n);if(s!=null)return this.hit++,s;this.miss++;const i=yQ(e,r,n),o=Uint8Array.prototype.slice.call(e,r,r+n);return this.store(o,i),i}}const N8="array",_1="map_key",_Q="map_value",v1e=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new Va("The type of key must be string or number but "+typeof t)};class E1e{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const r=this.getUninitializedStateFromPool();r.type=N8,r.position=0,r.size=e,r.array=new Array(e)}pushMapState(e){const r=this.getUninitializedStateFromPool();r.type=_1,r.readCount=0,r.size=e,r.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===N8){const n=e;n.size=0,n.array=void 0,n.position=0,n.type=void 0}if(e.type===_1||e.type===_Q){const n=e;n.size=0,n.map=void 0,n.readCount=0,n.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Ib=-1,J4=new DataView(new ArrayBuffer(0)),_1e=new Uint8Array(J4.buffer);try{J4.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const OM=new RangeError("Insufficient data"),A1e=new w1e;let x1e=class AQ{constructor(e){this.totalPos=0,this.pos=0,this.view=J4,this.bytes=_1e,this.headByte=Ib,this.stack=new E1e,this.entered=!1,this.extensionCodec=e?.extensionCodec??y6.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??Sb,this.maxBinLength=e?.maxBinLength??Sb,this.maxArrayLength=e?.maxArrayLength??Sb,this.maxMapLength=e?.maxMapLength??Sb,this.maxExtLength=e?.maxExtLength??Sb,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:A1e,this.mapKeyConverter=e?.mapKeyConverter??v1e}clone(){return new AQ({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Ib,this.stack.reset()}setBuffer(e){const r=T8(e);this.bytes=r,this.view=new DataView(r.buffer,r.byteOffset,r.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Ib&&!this.hasRemaining(1))this.setBuffer(e);else{const r=this.bytes.subarray(this.pos),n=T8(e),s=new Uint8Array(r.length+n.length);s.set(r),s.set(n,r.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:r,pos:n}=this;return new RangeError(`Extra ${r.byteLength-n} of ${r.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const r=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return r}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let r=!1,n;for await(const a of e){if(r)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{n=this.doDecodeSync(),r=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${eN(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,r){if(this.entered){yield*this.clone().decodeMultiAsync(e,r);return}try{this.entered=!0;let n=r,s=-1;for await(const i of e){if(r&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),n&&(s=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let r;if(e>=224)r=e-256;else if(e<192)if(e<128)r=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else{const s=e-160;r=this.decodeString(s,0)}else if(e===192)r=null;else if(e===194)r=!1;else if(e===195)r=!0;else if(e===202)r=this.readF32();else if(e===203)r=this.readF64();else if(e===204)r=this.readU8();else if(e===205)r=this.readU16();else if(e===206)r=this.readU32();else if(e===207)this.useBigInt64?r=this.readU64AsBigInt():r=this.readU64();else if(e===208)r=this.readI8();else if(e===209)r=this.readI16();else if(e===210)r=this.readI32();else if(e===211)this.useBigInt64?r=this.readI64AsBigInt():r=this.readI64();else if(e===217){const s=this.lookU8();r=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();r=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();r=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===196){const s=this.lookU8();r=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();r=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();r=this.decodeBinary(s,4)}else if(e===212)r=this.decodeExtension(1,0);else if(e===213)r=this.decodeExtension(2,0);else if(e===214)r=this.decodeExtension(4,0);else if(e===215)r=this.decodeExtension(8,0);else if(e===216)r=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();r=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();r=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();r=this.decodeExtension(s,4)}else throw new Va(`Unrecognized type byte: ${eN(e)}`);this.complete();const n=this.stack;for(;n.length>0;){const s=n.top();if(s.type===N8)if(s.array[s.position]=r,s.position++,s.position===s.size)r=s.array,n.release(s);else continue e;else if(s.type===_1){if(r==="__proto__")throw new Va("The key __proto__ is not allowed");s.key=this.mapKeyConverter(r),s.type=_Q;continue e}else if(s.map[s.key]=r,s.readCount++,s.readCount===s.size)r=s.map,n.release(s);else{s.key=null,s.type=_1;continue e}}return r}}readHeadByte(){return this.headByte===Ib&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Ib}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Va(`Unrecognized array type byte: ${eN(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Va(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Va(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,r){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,r):this.decodeBinary(e,r)}decodeUtf8String(e,r){if(e>this.maxStrLength)throw new Va(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+r+e)throw OM;const n=this.pos+r;let s;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?s=this.keyDecoder.decode(this.bytes,n,e):s=t1e(this.bytes,n,e),this.pos+=r+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===_1:!1}decodeBinary(e,r){if(e>this.maxBinLength)throw new Va(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+r))throw OM;const n=this.pos+r,s=this.bytes.subarray(n,n+e);return this.pos+=r+e,s}decodeExtension(e,r){if(e>this.maxExtLength)throw new Va(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const n=this.view.getInt8(this.pos+r),s=this.decodeBinary(e,r+1);return this.extensionCodec.decode(s,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=n1e(this.view,this.pos);return this.pos+=8,e}readI64(){const e=wQ(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function xQ(t,e){return new x1e(e).decode(t)}function X4(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function CQ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?X4(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function xl(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=CQ(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return X4(r)}function C1e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var h=0,y=0,E=0,S=g.length;E!==S&&g[E]===0;)E++,h++;for(var C=(S-E)*l+1>>>0,_=new Uint8Array(C);E!==S;){for(var T=g[E],P=0,D=C-1;(T!==0||P<y)&&D!==-1;D--,P++)T+=256*_[D]>>>0,_[D]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");y=P,E++}for(var F=C-y;F!==C&&_[F]===0;)F++;for(var I=c.repeat(h);F<C;++F)I+=t.charAt(_[F]);return I}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var h=0;if(g[h]!==" "){for(var y=0,E=0;g[h]===c;)y++,h++;for(var S=(g.length-h)*u+1>>>0,C=new Uint8Array(S);g[h];){var _=r[g.charCodeAt(h)];if(_===255)return;for(var T=0,P=S-1;(_!==0||T<E)&&P!==-1;P--,T++)_+=a*C[P]>>>0,C[P]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");E=T,h++}if(g[h]!==" "){for(var D=S-E;D!==S&&C[D]===0;)D++;for(var F=new Uint8Array(y+(S-D)),I=y;D!==S;)F[I++]=C[D++];return F}}}function p(g){var h=f(g);if(h)return h;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:p}}var S1e=C1e,I1e=S1e;const T1e=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},N1e=t=>new TextEncoder().encode(t),P1e=t=>new TextDecoder().decode(t);class R1e{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class O1e{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return SQ(this,e)}}class k1e{constructor(e){this.decoders=e}or(e){return SQ(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const SQ=(t,e)=>new k1e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class B1e{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new R1e(e,r,n),this.decoder=new O1e(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const P5=({name:t,prefix:e,encode:r,decode:n})=>new B1e(t,e,r,n),kE=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=I1e(r,e);return P5({prefix:t,name:e,encode:n,decode:i=>T1e(s(i))})},U1e=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},M1e=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Mi=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>P5({prefix:e,name:t,encode(s){return M1e(s,n,r)},decode(s){return U1e(s,n,r,t)}}),D1e=P5({prefix:"\0",name:"identity",encode:t=>P1e(t),decode:t=>N1e(t)}),j1e=Object.freeze(Object.defineProperty({__proto__:null,identity:D1e},Symbol.toStringTag,{value:"Module"})),L1e=Mi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),F1e=Object.freeze(Object.defineProperty({__proto__:null,base2:L1e},Symbol.toStringTag,{value:"Module"})),$1e=Mi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),q1e=Object.freeze(Object.defineProperty({__proto__:null,base8:$1e},Symbol.toStringTag,{value:"Module"})),H1e=kE({prefix:"9",name:"base10",alphabet:"0123456789"}),z1e=Object.freeze(Object.defineProperty({__proto__:null,base10:H1e},Symbol.toStringTag,{value:"Module"})),W1e=Mi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),V1e=Mi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),G1e=Object.freeze(Object.defineProperty({__proto__:null,base16:W1e,base16upper:V1e},Symbol.toStringTag,{value:"Module"})),K1e=Mi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Z1e=Mi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Y1e=Mi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),J1e=Mi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),X1e=Mi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Q1e=Mi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),eve=Mi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),tve=Mi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),rve=Mi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),nve=Object.freeze(Object.defineProperty({__proto__:null,base32:K1e,base32hex:X1e,base32hexpad:eve,base32hexpadupper:tve,base32hexupper:Q1e,base32pad:Y1e,base32padupper:J1e,base32upper:Z1e,base32z:rve},Symbol.toStringTag,{value:"Module"})),sve=kE({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ive=kE({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ove=Object.freeze(Object.defineProperty({__proto__:null,base36:sve,base36upper:ive},Symbol.toStringTag,{value:"Module"})),ave=kE({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),cve=kE({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),uve=Object.freeze(Object.defineProperty({__proto__:null,base58btc:ave,base58flickr:cve},Symbol.toStringTag,{value:"Module"})),lve=Mi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),dve=Mi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),fve=Mi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),hve=Mi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),pve=Object.freeze(Object.defineProperty({__proto__:null,base64:lve,base64pad:dve,base64url:fve,base64urlpad:hve},Symbol.toStringTag,{value:"Module"})),IQ=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),gve=IQ.reduce((t,e,r)=>(t[r]=e,t),[]),mve=IQ.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function yve(t){return t.reduce((e,r)=>(e+=gve[r],e),"")}function bve(t){const e=[];for(const r of t){const n=mve[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const wve=P5({prefix:"ðŸš€",name:"base256emoji",encode:yve,decode:bve}),vve=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:wve},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const kM={...j1e,...F1e,...q1e,...z1e,...G1e,...nve,...ove,...uve,...pve,...vve};function TQ(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const BM=TQ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),tN=TQ("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=CQ(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),NQ={utf8:BM,"utf-8":BM,hex:kM.base16,latin1:tN,ascii:tN,binary:tN,...kM};function Yn(t,e="utf8"){const r=NQ[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?X4(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function _n(t,e="utf8"){const r=NQ[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}const PQ={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var rN,UM;function RQ(){if(UM)return rN;UM=1;const t="Input must be an string, Buffer or Uint8Array";function e(o){let a;if(o instanceof Uint8Array)a=o;else if(typeof o=="string")a=new TextEncoder().encode(o);else throw new Error(t);return a}function r(o){return Array.prototype.map.call(o,function(a){return(a<16?"0":"")+a.toString(16)}).join("")}function n(o){return(4294967296+o).toString(16).substring(1)}function s(o,a,c){let u=`
`+o+" = ";for(let l=0;l<a.length;l+=2){if(c===32)u+=n(a[l]).toUpperCase(),u+=" ",u+=n(a[l+1]).toUpperCase();else if(c===64)u+=n(a[l+1]).toUpperCase(),u+=n(a[l]).toUpperCase();else throw new Error("Invalid size "+c);l%6===4?u+=`
`+new Array(o.length+4).join(" "):l<a.length-2&&(u+=" ")}console.log(u)}function i(o,a,c){let u=new Date().getTime();const l=new Uint8Array(a);for(let f=0;f<a;f++)l[f]=f%256;const d=new Date().getTime();console.log("Generated random input in "+(d-u)+"ms"),u=d;for(let f=0;f<c;f++){const p=o(l),g=new Date().getTime(),h=g-u;u=g,console.log("Hashed in "+h+"ms: "+p.substring(0,20)+"..."),console.log(Math.round(a/(1<<20)/(h/1e3)*100)/100+" MB PER SECOND")}}return rN={normalizeInput:e,toHex:r,debugPrint:s,testSpeed:i},rN}var nN,MM;function Eve(){if(MM)return nN;MM=1;const t=RQ();function e(E,S,C){const _=E[S]+E[C];let T=E[S+1]+E[C+1];_>=4294967296&&T++,E[S]=_,E[S+1]=T}function r(E,S,C,_){let T=E[S]+C;C<0&&(T+=4294967296);let P=E[S+1]+_;T>=4294967296&&P++,E[S]=T,E[S+1]=P}function n(E,S){return E[S]^E[S+1]<<8^E[S+2]<<16^E[S+3]<<24}function s(E,S,C,_,T,P){const D=u[T],F=u[T+1],I=u[P],U=u[P+1];e(c,E,S),r(c,E,D,F);let L=c[_]^c[E],B=c[_+1]^c[E+1];c[_]=B,c[_+1]=L,e(c,C,_),L=c[S]^c[C],B=c[S+1]^c[C+1],c[S]=L>>>24^B<<8,c[S+1]=B>>>24^L<<8,e(c,E,S),r(c,E,I,U),L=c[_]^c[E],B=c[_+1]^c[E+1],c[_]=L>>>16^B<<16,c[_+1]=B>>>16^L<<16,e(c,C,_),L=c[S]^c[C],B=c[S+1]^c[C+1],c[S]=B>>>31^L<<1,c[S+1]=L>>>31^B<<1}const i=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],a=new Uint8Array(o.map(function(E){return E*2})),c=new Uint32Array(32),u=new Uint32Array(32);function l(E,S){let C=0;for(C=0;C<16;C++)c[C]=E.h[C],c[C+16]=i[C];for(c[24]=c[24]^E.t,c[25]=c[25]^E.t/4294967296,S&&(c[28]=~c[28],c[29]=~c[29]),C=0;C<32;C++)u[C]=n(E.b,4*C);for(C=0;C<12;C++)s(0,8,16,24,a[C*16+0],a[C*16+1]),s(2,10,18,26,a[C*16+2],a[C*16+3]),s(4,12,20,28,a[C*16+4],a[C*16+5]),s(6,14,22,30,a[C*16+6],a[C*16+7]),s(0,10,20,30,a[C*16+8],a[C*16+9]),s(2,12,22,24,a[C*16+10],a[C*16+11]),s(4,14,16,26,a[C*16+12],a[C*16+13]),s(6,8,18,28,a[C*16+14],a[C*16+15]);for(C=0;C<16;C++)E.h[C]=E.h[C]^c[C]^c[C+16]}const d=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function f(E,S,C,_){if(E===0||E>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(S&&S.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(C&&C.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(_&&_.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const T={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:E};d.fill(0),d[0]=E,S&&(d[1]=S.length),d[2]=1,d[3]=1,C&&d.set(C,32),_&&d.set(_,48);for(let P=0;P<16;P++)T.h[P]=i[P]^n(d,P*4);return S&&(p(T,S),T.c=128),T}function p(E,S){for(let C=0;C<S.length;C++)E.c===128&&(E.t+=E.c,l(E,!1),E.c=0),E.b[E.c++]=S[C]}function g(E){for(E.t+=E.c;E.c<128;)E.b[E.c++]=0;l(E,!0);const S=new Uint8Array(E.outlen);for(let C=0;C<E.outlen;C++)S[C]=E.h[C>>2]>>8*(C&3);return S}function h(E,S,C,_,T){C=C||64,E=t.normalizeInput(E),_&&(_=t.normalizeInput(_)),T&&(T=t.normalizeInput(T));const P=f(C,S,_,T);return p(P,E),g(P)}function y(E,S,C,_,T){const P=h(E,S,C,_,T);return t.toHex(P)}return nN={blake2b:h,blake2bHex:y,blake2bInit:f,blake2bUpdate:p,blake2bFinal:g},nN}var sN,DM;function _ve(){if(DM)return sN;DM=1;const t=RQ();function e(g,h){return g[h]^g[h+1]<<8^g[h+2]<<16^g[h+3]<<24}function r(g,h,y,E,S,C){o[g]=o[g]+o[h]+S,o[E]=n(o[E]^o[g],16),o[y]=o[y]+o[E],o[h]=n(o[h]^o[y],12),o[g]=o[g]+o[h]+C,o[E]=n(o[E]^o[g],8),o[y]=o[y]+o[E],o[h]=n(o[h]^o[y],7)}function n(g,h){return g>>>h^g<<32-h}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),a=new Uint32Array(16);function c(g,h){let y=0;for(y=0;y<8;y++)o[y]=g.h[y],o[y+8]=s[y];for(o[12]^=g.t,o[13]^=g.t/4294967296,h&&(o[14]=~o[14]),y=0;y<16;y++)a[y]=e(g.b,4*y);for(y=0;y<10;y++)r(0,4,8,12,a[i[y*16+0]],a[i[y*16+1]]),r(1,5,9,13,a[i[y*16+2]],a[i[y*16+3]]),r(2,6,10,14,a[i[y*16+4]],a[i[y*16+5]]),r(3,7,11,15,a[i[y*16+6]],a[i[y*16+7]]),r(0,5,10,15,a[i[y*16+8]],a[i[y*16+9]]),r(1,6,11,12,a[i[y*16+10]],a[i[y*16+11]]),r(2,7,8,13,a[i[y*16+12]],a[i[y*16+13]]),r(3,4,9,14,a[i[y*16+14]],a[i[y*16+15]]);for(y=0;y<8;y++)g.h[y]^=o[y]^o[y+8]}function u(g,h){if(!(g>0&&g<=32))throw new Error("Incorrect output length, should be in [1, 32]");const y=h?h.length:0;if(h&&!(y>0&&y<=32))throw new Error("Incorrect key length, should be in [1, 32]");const E={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:g};return E.h[0]^=16842752^y<<8^g,y>0&&(l(E,h),E.c=64),E}function l(g,h){for(let y=0;y<h.length;y++)g.c===64&&(g.t+=g.c,c(g,!1),g.c=0),g.b[g.c++]=h[y]}function d(g){for(g.t+=g.c;g.c<64;)g.b[g.c++]=0;c(g,!0);const h=new Uint8Array(g.outlen);for(let y=0;y<g.outlen;y++)h[y]=g.h[y>>2]>>8*(y&3)&255;return h}function f(g,h,y){y=y||32,g=t.normalizeInput(g);const E=u(y,h);return l(E,g),d(E)}function p(g,h,y){const E=f(g,h,y);return t.toHex(E)}return sN={blake2s:f,blake2sHex:p,blake2sInit:u,blake2sUpdate:l,blake2sFinal:d},sN}var iN,jM;function Ave(){if(jM)return iN;jM=1;const t=Eve(),e=_ve();return iN={blake2b:t.blake2b,blake2bHex:t.blake2bHex,blake2bInit:t.blake2bInit,blake2bUpdate:t.blake2bUpdate,blake2bFinal:t.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},iN}var OQ=Ave(),xve={};const Cve=":";function Wd(t){const[e,r]=t.split(Cve);return{namespace:e,reference:r}}function kQ(t,e){return t.includes(":")?[t]:e.chains||[]}var Sve=Object.defineProperty,Ive=Object.defineProperties,Tve=Object.getOwnPropertyDescriptors,LM=Object.getOwnPropertySymbols,Nve=Object.prototype.hasOwnProperty,Pve=Object.prototype.propertyIsEnumerable,P8=(t,e,r)=>e in t?Sve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,FM=(t,e)=>{for(var r in e||(e={}))Nve.call(e,r)&&P8(t,r,e[r]);if(LM)for(var r of LM(e))Pve.call(e,r)&&P8(t,r,e[r]);return t},Rve=(t,e)=>Ive(t,Tve(e)),$M=(t,e,r)=>P8(t,typeof e!="symbol"?e+"":e,r);const Ove="ReactNative",rc={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},kve="js";function b6(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Uh(){return!li.getDocument()&&!!li.getNavigator()&&navigator.product===Ove}function Bve(){return Uh()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Uve(){return Uh()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function $y(){return!b6()&&!!li.getNavigator()&&!!li.getDocument()}function BE(){return Uh()?rc.reactNative:b6()?rc.node:$y()?rc.browser:rc.unknown}function qM(){var t;try{return Uh()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Mve(t,e){const r=new URLSearchParams(t);return Object.entries(e).sort(([n],[s])=>n.localeCompare(s)).forEach(([n,s])=>{s!=null&&r.set(n,String(s))}),r.toString()}function Dve(t){var e,r;const n=BQ();try{return t!=null&&t.url&&n.url&&new URL(t.url).host!==new URL(n.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),t.url=n.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),Rve(FM(FM({},n),t),{url:t?.url||n.url,name:t?.name||n.name,description:t?.description||n.description,icons:(r=t?.icons)!=null&&r.length&&t.icons.length>0?t.icons:n.icons})}catch(s){return console.warn("Error populating app metadata",s),t||n}}function BQ(){return tX.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function jve(){if(BE()===rc.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=QJ();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Lve(){var t;const e=BE();return e===rc.browser?[e,((t=li.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function UQ(t,e,r){const n=jve(),s=Lve();return[[t,e].join("-"),[kve,r].join("-"),n,s].join("/")}function Fve({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=r.split("?"),l=UQ(t,e,n),d={auth:s,ua:l,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},f=Mve(u[1]||"",d);return u[0]+"?"+f}function e0(t,e){return t.filter(r=>e.includes(r)).length===t.length}function R8(t){return Object.fromEntries(t.entries())}function O8(t){return new Map(Object.entries(t))}function Dp(t=he.FIVE_MINUTES,e){const r=he.toMiliseconds(t||he.FIVE_MINUTES);let n,s,i,o;return{resolve:a=>{i&&n&&(clearTimeout(i),n(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),c(u)},r),n=a,s=c})}}function yl(t,e,r){return new Promise(async(n,s)=>{const i=setTimeout(()=>s(new Error(r)),e);try{const o=await t;n(o)}catch(o){s(o)}clearTimeout(i)})}function MQ(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function $ve(t){return MQ("topic",t)}function qve(t){return MQ("id",t)}function DQ(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Ps(t,e){return he.fromMiliseconds(Date.now()+he.toMiliseconds(t))}function dl(t){return Date.now()>=he.toMiliseconds(t)}function mn(t,e){return`${t}${e?`:${e}`:""}`}function Cl(t=[],e=[]){return[...new Set([...t,...e])]}async function Hve({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r,i=s?.href;if(typeof i!="string")return;const o=zve(i,t,e),a=BE();if(a===rc.browser){if(!((n=li.getDocument())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}Wve(o)}else a===rc.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function zve(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${Zve(n,!0)}`}else s=`${s}/wc?${n}`;return s}function Wve(t){let e="_self";Kve()?e="_top":(Gve()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Vve(t,e){let r="";try{if($y()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function HM(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function zM(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Q4(){return typeof process<"u"&&xve.IS_VITEST==="true"}function Gve(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Kve(){try{return window.self!==window.top}catch{return!1}}function Zve(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function jQ(t){return Buffer.from(t,"base64").toString("utf-8")}function Yve(t){return new Promise(e=>setTimeout(e,t))}let Jve=class{constructor({limit:e}){$M(this,"limit"),$M(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const r=this.set.values().next().value;r&&this.set.delete(r)}this.set.add(e)}}has(e){return this.set.has(e)}};const r2=BigInt(2**32-1),WM=BigInt(32);function LQ(t,e=!1){return e?{h:Number(t&r2),l:Number(t>>WM&r2)}:{h:Number(t>>WM&r2)|0,l:Number(t&r2)|0}}function FQ(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:o,l:a}=LQ(t[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const VM=(t,e,r)=>t>>>r,GM=(t,e,r)=>t<<32-r|e>>>r,Yf=(t,e,r)=>t>>>r|e<<32-r,Jf=(t,e,r)=>t<<32-r|e>>>r,u1=(t,e,r)=>t<<64-r|e>>>r-32,l1=(t,e,r)=>t>>>r-32|e<<64-r,Xve=(t,e)=>e,Qve=(t,e)=>t,eEe=(t,e,r)=>t<<r|e>>>32-r,tEe=(t,e,r)=>e<<r|t>>>32-r,rEe=(t,e,r)=>e<<r-32|t>>>64-r,nEe=(t,e,r)=>t<<r-32|e>>>64-r;function mu(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const ek=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),tk=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,sEe=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),iEe=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,oEe=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),aEe=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,_g=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function R5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Qd(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Du(t,...e){if(!R5(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function O5(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Qd(t.outputLen),Qd(t.blockLen)}function Sh(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function rk(t,e){Du(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Mv(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Fc(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function oN(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Yu(t,e){return t<<32-e|t>>>e}const $Q=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function qQ(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const xd=$Q?t=>t:t=>qQ(t);function cEe(t){for(let e=0;e<t.length;e++)t[e]=qQ(t[e]);return t}const Xf=$Q?t=>t:cEe,HQ=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",uEe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Gm(t){if(Du(t),HQ)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=uEe[t[r]];return e}const Ql={_0:48,_9:57,A:65,F:70,a:97,f:102};function KM(t){if(t>=Ql._0&&t<=Ql._9)return t-Ql._0;if(t>=Ql.A&&t<=Ql.F)return t-(Ql.A-10);if(t>=Ql.a&&t<=Ql.f)return t-(Ql.a-10)}function w6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(HQ)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=KM(t.charCodeAt(i)),a=KM(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function zQ(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Ou(t){return typeof t=="string"&&(t=zQ(t)),Du(t),t}function ih(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];Du(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let k5=class{};function UE(t){const e=n=>t().update(Ou(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function lEe(t){const e=(n,s)=>t(s).update(Ou(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function z0(t=32){if(_g&&typeof _g.getRandomValues=="function")return _g.getRandomValues(new Uint8Array(t));if(_g&&typeof _g.randomBytes=="function")return Uint8Array.from(_g.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const dEe=BigInt(0),Tb=BigInt(1),fEe=BigInt(2),hEe=BigInt(7),pEe=BigInt(256),gEe=BigInt(113),WQ=[],VQ=[],GQ=[];for(let t=0,e=Tb,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],WQ.push(2*(5*n+r)),VQ.push((t+1)*(t+2)/2%64);let s=dEe;for(let i=0;i<7;i++)e=(e<<Tb^(e>>hEe)*gEe)%pEe,e&fEe&&(s^=Tb<<(Tb<<BigInt(i))-Tb);GQ.push(s)}const KQ=FQ(GQ,!0),mEe=KQ[0],yEe=KQ[1],ZM=(t,e,r)=>r>32?rEe(t,e,r):eEe(t,e,r),YM=(t,e,r)=>r>32?nEe(t,e,r):tEe(t,e,r);function bEe(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],d=ZM(u,l,1)^r[a],f=YM(u,l,1)^r[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=VQ[o],c=ZM(s,i,a),u=YM(s,i,a),l=WQ[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=mEe[n],t[1]^=yEe[n]}Fc(r)}let wEe=class ZQ extends k5{constructor(e,r,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,Qd(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Mv(this.state)}clone(){return this._cloneInto()}keccak(){Xf(this.state32),bEe(this.state32,this.rounds),Xf(this.state32),this.posOut=0,this.pos=0}update(e){Sh(this),e=Ou(e),Du(e);const{blockLen:r,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Sh(this,!1),Du(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Qd(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(rk(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Fc(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new ZQ(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const vEe=(t,e,r)=>UE(()=>new wEe(e,t,r)),EEe=vEe(1,136,256/8);function _Ee(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function AEe(t,e,r){return t&e^~t&r}function xEe(t,e,r){return t&e^t&r^e&r}let YQ=class extends k5{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=oN(this.buffer)}update(e){Sh(this),e=Ou(e),Du(e);const{view:r,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=oN(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Sh(this),rk(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,Fc(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;_Ee(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=oN(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}};const _f=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zi=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Wi=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),CEe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Af=new Uint32Array(64);let SEe=class extends YQ{constructor(e=32){super(64,e,8,!1),this.A=_f[0]|0,this.B=_f[1]|0,this.C=_f[2]|0,this.D=_f[3]|0,this.E=_f[4]|0,this.F=_f[5]|0,this.G=_f[6]|0,this.H=_f[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)Af[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const f=Af[d-15],p=Af[d-2],g=Yu(f,7)^Yu(f,18)^f>>>3,h=Yu(p,17)^Yu(p,19)^p>>>10;Af[d]=h+Af[d-7]+g+Af[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Yu(a,6)^Yu(a,11)^Yu(a,25),p=l+f+AEe(a,c,u)+CEe[d]+Af[d]|0,g=(Yu(n,2)^Yu(n,13)^Yu(n,22))+xEe(n,s,i)|0;l=u,u=c,c=a,a=o+p|0,o=i,i=s,s=n,n=p+g|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){Fc(Af)}destroy(){this.set(0,0,0,0,0,0,0,0),Fc(this.buffer)}};const JQ=FQ(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),IEe=JQ[0],TEe=JQ[1],xf=new Uint32Array(80),Cf=new Uint32Array(80);let nk=class extends YQ{constructor(e=64){super(128,e,16,!1),this.Ah=Wi[0]|0,this.Al=Wi[1]|0,this.Bh=Wi[2]|0,this.Bl=Wi[3]|0,this.Ch=Wi[4]|0,this.Cl=Wi[5]|0,this.Dh=Wi[6]|0,this.Dl=Wi[7]|0,this.Eh=Wi[8]|0,this.El=Wi[9]|0,this.Fh=Wi[10]|0,this.Fl=Wi[11]|0,this.Gh=Wi[12]|0,this.Gl=Wi[13]|0,this.Hh=Wi[14]|0,this.Hl=Wi[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:p,Gl:g,Hh:h,Hl:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=p|0,this.Gl=g|0,this.Hh=h|0,this.Hl=y|0}process(e,r){for(let C=0;C<16;C++,r+=4)xf[C]=e.getUint32(r),Cf[C]=e.getUint32(r+=4);for(let C=16;C<80;C++){const _=xf[C-15]|0,T=Cf[C-15]|0,P=Yf(_,T,1)^Yf(_,T,8)^VM(_,T,7),D=Jf(_,T,1)^Jf(_,T,8)^GM(_,T,7),F=xf[C-2]|0,I=Cf[C-2]|0,U=Yf(F,I,19)^u1(F,I,61)^VM(F,I,6),L=Jf(F,I,19)^l1(F,I,61)^GM(F,I,6),B=sEe(D,L,Cf[C-7],Cf[C-16]),A=iEe(B,P,U,xf[C-7],xf[C-16]);xf[C]=A|0,Cf[C]=B|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:p,Fl:g,Gh:h,Gl:y,Hh:E,Hl:S}=this;for(let C=0;C<80;C++){const _=Yf(d,f,14)^Yf(d,f,18)^u1(d,f,41),T=Jf(d,f,14)^Jf(d,f,18)^l1(d,f,41),P=d&p^~d&h,D=f&g^~f&y,F=oEe(S,T,D,TEe[C],Cf[C]),I=aEe(F,E,_,P,IEe[C],xf[C]),U=F|0,L=Yf(n,s,28)^u1(n,s,34)^u1(n,s,39),B=Jf(n,s,28)^l1(n,s,34)^l1(n,s,39),A=n&i^n&a^i&a,m=s&o^s&c^o&c;E=h|0,S=y|0,h=p|0,y=g|0,p=d|0,g=f|0,{h:d,l:f}=mu(u|0,l|0,I|0,U|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const b=ek(U,B,m);n=tk(b,I,L,A),s=b|0}({h:n,l:s}=mu(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=mu(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=mu(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=mu(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=mu(this.Eh|0,this.El|0,d|0,f|0),{h:p,l:g}=mu(this.Fh|0,this.Fl|0,p|0,g|0),{h,l:y}=mu(this.Gh|0,this.Gl|0,h|0,y|0),{h:E,l:S}=mu(this.Hh|0,this.Hl|0,E|0,S|0),this.set(n,s,i,o,a,c,u,l,d,f,p,g,h,y,E,S)}roundClean(){Fc(xf,Cf)}destroy(){Fc(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},NEe=class extends nk{constructor(){super(48),this.Ah=zi[0]|0,this.Al=zi[1]|0,this.Bh=zi[2]|0,this.Bl=zi[3]|0,this.Ch=zi[4]|0,this.Cl=zi[5]|0,this.Dh=zi[6]|0,this.Dl=zi[7]|0,this.Eh=zi[8]|0,this.El=zi[9]|0,this.Fh=zi[10]|0,this.Fl=zi[11]|0,this.Gh=zi[12]|0,this.Gl=zi[13]|0,this.Hh=zi[14]|0,this.Hl=zi[15]|0}};const Vi=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let PEe=class extends nk{constructor(){super(32),this.Ah=Vi[0]|0,this.Al=Vi[1]|0,this.Bh=Vi[2]|0,this.Bl=Vi[3]|0,this.Ch=Vi[4]|0,this.Cl=Vi[5]|0,this.Dh=Vi[6]|0,this.Dl=Vi[7]|0,this.Eh=Vi[8]|0,this.El=Vi[9]|0,this.Fh=Vi[10]|0,this.Fl=Vi[11]|0,this.Gh=Vi[12]|0,this.Gl=Vi[13]|0,this.Hh=Vi[14]|0,this.Hl=Vi[15]|0}};const B5=UE(()=>new SEe),REe=UE(()=>new nk),OEe=UE(()=>new NEe),kEe=UE(()=>new PEe),BEe=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Ls=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Je=new Uint32Array(32);function Sf(t,e,r,n,s,i){const o=s[i],a=s[i+1];let c=Je[2*t],u=Je[2*t+1],l=Je[2*e],d=Je[2*e+1],f=Je[2*r],p=Je[2*r+1],g=Je[2*n],h=Je[2*n+1],y=ek(c,l,o);u=tk(y,u,d,a),c=y|0,{Dh:h,Dl:g}={Dh:h^u,Dl:g^c},{Dh:h,Dl:g}={Dh:Xve(h,g),Dl:Qve(h)},{h:p,l:f}=mu(p,f,h,g),{Bh:d,Bl:l}={Bh:d^p,Bl:l^f},{Bh:d,Bl:l}={Bh:Yf(d,l,24),Bl:Jf(d,l,24)},Je[2*t]=c,Je[2*t+1]=u,Je[2*e]=l,Je[2*e+1]=d,Je[2*r]=f,Je[2*r+1]=p,Je[2*n]=g,Je[2*n+1]=h}function If(t,e,r,n,s,i){const o=s[i],a=s[i+1];let c=Je[2*t],u=Je[2*t+1],l=Je[2*e],d=Je[2*e+1],f=Je[2*r],p=Je[2*r+1],g=Je[2*n],h=Je[2*n+1],y=ek(c,l,o);u=tk(y,u,d,a),c=y|0,{Dh:h,Dl:g}={Dh:h^u,Dl:g^c},{Dh:h,Dl:g}={Dh:Yf(h,g,16),Dl:Jf(h,g,16)},{h:p,l:f}=mu(p,f,h,g),{Bh:d,Bl:l}={Bh:d^p,Bl:l^f},{Bh:d,Bl:l}={Bh:u1(d,l,63),Bl:l1(d,l,63)},Je[2*t]=c,Je[2*t+1]=u,Je[2*e]=l,Je[2*e+1]=d,Je[2*r]=f,Je[2*r+1]=p,Je[2*n]=g,Je[2*n+1]=h}function UEe(t,e={},r,n,s){if(Qd(r),t<0||t>r)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>r))throw new Error("key length must be undefined or 1.."+r);if(o!==void 0&&o.length!==n)throw new Error("salt must be undefined or "+n);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class MEe extends k5{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Qd(e),Qd(r),this.blockLen=e,this.outputLen=r,this.buffer=new Uint8Array(e),this.buffer32=Mv(this.buffer)}update(e){Sh(this),e=Ou(e),Du(e);const{blockLen:r,buffer:n,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===r&&(Xf(s),this.compress(s,0,!1),Xf(s),this.pos=0);const u=Math.min(r-this.pos,i-c),l=o+c;if(u===r&&!(l%4)&&c+u<i){const d=new Uint32Array(a,l,Math.floor((i-c)/4));Xf(d);for(let f=0;c+r<i;f+=s.length,c+=r)this.length+=r,this.compress(d,f,!1);Xf(d);continue}n.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){Sh(this),rk(e,this);const{pos:r,buffer32:n}=this;this.finished=!0,Fc(this.buffer.subarray(r)),Xf(n),this.compress(n,0,!0),Xf(n);const s=Mv(e);this.get().forEach((i,o)=>s[o]=xd(i))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){const{buffer:r,length:n,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(r),e.destroyed=i,e.finished=s,e.length=n,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}let DEe=class extends MEe{constructor(e={}){const r=e.dkLen===void 0?64:e.dkLen;super(128,r),this.v0l=Ls[0]|0,this.v0h=Ls[1]|0,this.v1l=Ls[2]|0,this.v1h=Ls[3]|0,this.v2l=Ls[4]|0,this.v2h=Ls[5]|0,this.v3l=Ls[6]|0,this.v3h=Ls[7]|0,this.v4l=Ls[8]|0,this.v4h=Ls[9]|0,this.v5l=Ls[10]|0,this.v5h=Ls[11]|0,this.v6l=Ls[12]|0,this.v6h=Ls[13]|0,this.v7l=Ls[14]|0,this.v7h=Ls[15]|0,UEe(r,e,64,16,16);let{key:n,personalization:s,salt:i}=e,o=0;if(n!==void 0&&(n=Ou(n),o=n.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Ou(i);const a=Mv(i);this.v4l^=xd(a[0]),this.v4h^=xd(a[1]),this.v5l^=xd(a[2]),this.v5h^=xd(a[3])}if(s!==void 0){s=Ou(s);const a=Mv(s);this.v6l^=xd(a[0]),this.v6h^=xd(a[1]),this.v7l^=xd(a[2]),this.v7h^=xd(a[3])}if(n!==void 0){const a=new Uint8Array(this.blockLen);a.set(n),this.update(a)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:u,v4h:l,v5l:d,v5h:f,v6l:p,v6h:g,v7l:h,v7h:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=l|0,this.v5l=d|0,this.v5h=f|0,this.v6l=p|0,this.v6h=g|0,this.v7l=h|0,this.v7h=y|0}compress(e,r,n){this.get().forEach((c,u)=>Je[u]=c),Je.set(Ls,16);let{h:s,l:i}=LQ(BigInt(this.length));Je[24]=Ls[8]^i,Je[25]=Ls[9]^s,n&&(Je[28]=~Je[28],Je[29]=~Je[29]);let o=0;const a=BEe;for(let c=0;c<12;c++)Sf(0,4,8,12,e,r+2*a[o++]),If(0,4,8,12,e,r+2*a[o++]),Sf(1,5,9,13,e,r+2*a[o++]),If(1,5,9,13,e,r+2*a[o++]),Sf(2,6,10,14,e,r+2*a[o++]),If(2,6,10,14,e,r+2*a[o++]),Sf(3,7,11,15,e,r+2*a[o++]),If(3,7,11,15,e,r+2*a[o++]),Sf(0,5,10,15,e,r+2*a[o++]),If(0,5,10,15,e,r+2*a[o++]),Sf(1,6,11,12,e,r+2*a[o++]),If(1,6,11,12,e,r+2*a[o++]),Sf(2,7,8,13,e,r+2*a[o++]),If(2,7,8,13,e,r+2*a[o++]),Sf(3,4,9,14,e,r+2*a[o++]),If(3,4,9,14,e,r+2*a[o++]);this.v0l^=Je[0]^Je[16],this.v0h^=Je[1]^Je[17],this.v1l^=Je[2]^Je[18],this.v1h^=Je[3]^Je[19],this.v2l^=Je[4]^Je[20],this.v2h^=Je[5]^Je[21],this.v3l^=Je[6]^Je[22],this.v3h^=Je[7]^Je[23],this.v4l^=Je[8]^Je[24],this.v4h^=Je[9]^Je[25],this.v5l^=Je[10]^Je[26],this.v5h^=Je[11]^Je[27],this.v6l^=Je[12]^Je[28],this.v6h^=Je[13]^Je[29],this.v7l^=Je[14]^Je[30],this.v7h^=Je[15]^Je[31],Fc(Je)}destroy(){this.destroyed=!0,Fc(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const jEe=lEe(t=>new DEe(t)),LEe="https://rpc.walletconnect.org/v1";function XQ(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(EEe(r)).toString("hex")}async function FEe(t,e,r,n,s,i){switch(r.t){case"eip191":return await $Ee(t,e,r.s);case"eip1271":return await qEe(t,e,r.s,n,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function $Ee(t,e,r){const n=Rbe(r);return Lwe({payload:XQ(e),signature:n}).toLowerCase()===t.toLowerCase()}async function qEe(t,e,r,n,s,i){const o=Wd(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u=r.substring(2),l=(u.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:XQ(e)).substring(2),f=a+d+c+l+u,p=await fetch(`${i||LEe}/?chainId=${n}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:HEe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:f},"latest"]})}),{result:g}=await p.json();return g?g.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function HEe(){return Date.now()+Math.floor(Math.random()*1e3)}function zEe(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const s=1+n*64;if(r.length<s)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Zn.encode(i)}function WEe(t){const e=new Uint8Array(Buffer.from(t,"base64")),r=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),n=new Uint8Array(r.length+e.length);n.set(r),n.set(e,r.length);const s=jEe(n,{dkLen:32});return Zn.encode(s)}function JM(t){const e=new Uint8Array(B5(VEe(t)));return Zn.encode(e)}function VEe(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function XM(t){const e=Buffer.from(t,"base64"),r=xQ(e).txn;if(!r)throw new Error("Invalid signed transaction: missing 'txn' field");const n=EQ(r),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(n)]),o=kEe(i);return gQ.encode(o).replace(/=+$/,"")}function aN(t){const e=[];let r=BigInt(t);for(;r>=BigInt(128);)e.push(Number(r&BigInt(127)|BigInt(128))),r>>=BigInt(7);return e.push(Number(r)),Buffer.from(e)}function GEe(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),r=Buffer.from(t.signed.authInfoBytes,"base64"),n=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(aN(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(aN(r.length)),s.push(r),s.push(Buffer.from([26])),s.push(aN(n.length)),s.push(n);const i=Buffer.concat(s),o=B5(i);return Buffer.from(o).toString("hex").toUpperCase()}function KEe(t){var e,r;const n=[];try{if(typeof t=="string")return n.push(t),n;if(typeof t!="object")return n;t!=null&&t.id&&n.push(t.id);const s=(r=(e=t?.capabilities)==null?void 0:e.caip345)==null?void 0:r.transactionHashes;s&&n.push(...s)}catch(s){console.warn("getWalletSendCallsHashes failed: ",s)}return n}var ZEe=Object.defineProperty,YEe=Object.defineProperties,JEe=Object.getOwnPropertyDescriptors,QM=Object.getOwnPropertySymbols,XEe=Object.prototype.hasOwnProperty,QEe=Object.prototype.propertyIsEnumerable,e7=(t,e,r)=>e in t?ZEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,e_e=(t,e)=>{for(var r in e||(e={}))XEe.call(e,r)&&e7(t,r,e[r]);if(QM)for(var r of QM(e))QEe.call(e,r)&&e7(t,r,e[r]);return t},t_e=(t,e)=>YEe(t,JEe(e));const QQ="did:pkh:",r_e={eip155:"Ethereum",solana:"Solana",bip122:"Bitcoin"},n_e=t=>t?r_e[t]||t:"",U5=t=>t?.split(":"),s_e=t=>{const e=t&&U5(t);if(e)return t.includes(QQ)?e[3]:e[1]},i_e=t=>{const e=t&&U5(t);if(e)return t.includes(QQ)?e[2]:e[0]},k8=t=>{const e=t&&U5(t);if(e)return e[2]+":"+e[3]},v6=t=>{const e=t&&U5(t);if(e)return e.pop()};async function t7(t){const{cacao:e,projectId:r}=t,{s:n,p:s}=e,i=eee(s,s.iss),o=v6(s.iss);return await FEe(o,i,n,k8(s.iss),r)}const eee=(t,e)=>{const r=i_e(e);if(!r)throw new Error("Invalid issuer: "+e);const n=`${t.domain} wants you to sign in with your ${n_e(r)} account:`,s=v6(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const o=`URI: ${t.aud||t.uri}`,a=`Version: ${t.version}`,c=`Chain ID: ${s_e(e)}`,u=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,d=t.exp?`Expiration Time: ${t.exp}`:void 0,f=t.nbf?`Not Before: ${t.nbf}`:void 0,p=t.requestId?`Request ID: ${t.requestId}`:void 0,g=t.resources?`Resources:${t.resources.map(y=>`
- ${y}`).join("")}`:void 0,h=lI(t.resources);if(h){const y=Dv(h);i=p_e(i,y)}return[n,s,"",i,"",o,a,c,u,l,d,f,p,g].filter(y=>y!=null).join(`
`)};function o_e(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function a_e(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function C0(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(s=>{const i=n[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function c_e(t,e,r,n={}){return r?.sort((s,i)=>s.localeCompare(i)),{att:{[t]:u_e(e,r,n)}}}function u_e(t,e,r={}){e=e?.sort((s,i)=>s.localeCompare(i));const n=e.map(s=>({[`${t}/${s}`]:[r]}));return Object.assign({},...n)}function tee(t){return C0(t),`urn:recap:${o_e(t).replace(/=/g,"")}`}function Dv(t){const e=a_e(t.replace("urn:recap:",""));return C0(e),e}function l_e(t,e,r){const n=c_e(t,e,r);return tee(n)}function d_e(t){return t&&t.includes("urn:recap:")}function f_e(t,e){const r=Dv(t),n=Dv(e),s=h_e(r,n);return tee(s)}function h_e(t,e){C0(t),C0(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),n={att:{}};return r.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;n.att[s]=t_e(e_e({},n.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((u=e.att[s])==null?void 0:u[a])})})}),n}function p_e(t="",e){C0(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,f)=>d.action.localeCompare(f.action));const u={};c.forEach(d=>{u[d.ability]||(u[d.ability]=[]),u[d.ability].push(d.action)});const l=Object.keys(u).map(d=>(s++,`(${s}) '${d}': '${u[d].join("', '")}' for '${a}'.`));n.push(l.join(", ").replace(".,","."))});const i=n.join(" "),o=`${r}${i}`;return`${t?t+" ":""}${o}`}function r7(t){var e;const r=Dv(t);C0(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(s=>s.split("/")[1]):[]}function n7(t){const e=Dv(t);C0(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(s=>{var i;(i=s?.[0])!=null&&i.chains&&r.push(s[0].chains)})}),[...new Set(r.flat())]}function lI(t){if(!t)return;const e=t?.[t.length-1];return d_e(e)?e:void 0}function ree(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function B8(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function cN(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ua(t,...e){if(!ree(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function s7(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function g_e(t,e){ua(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function mh(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function by(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function m_e(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const y_e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function b_e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function U8(t){if(typeof t=="string")t=b_e(t);else if(ree(t))t=M8(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function w_e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function v_e(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const E_e=(t,e)=>{function r(n,...s){if(ua(n),!y_e)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?ua(u):ua(u,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&ua(s[1]);const o=e(n,...s),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");ua(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,ua(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(ua(u),i&&u.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(r,t),r};function i7(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!A_e(e))throw new Error("invalid output, must be aligned");return e}function o7(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function __e(t,e,r){B8(r);const n=new Uint8Array(16),s=m_e(n);return o7(s,0,BigInt(e),r),o7(s,8,BigInt(t),r),n}function A_e(t){return t.byteOffset%4===0}function M8(t){return Uint8Array.from(t)}const nee=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),x_e=nee("expand 16-byte k"),C_e=nee("expand 32-byte k"),S_e=mh(x_e),I_e=mh(C_e);function Mr(t,e){return t<<e|t>>>32-e}function D8(t){return t.byteOffset%4===0}const n2=64,T_e=16,see=2**32-1,a7=new Uint32Array;function N_e(t,e,r,n,s,i,o,a){const c=s.length,u=new Uint8Array(n2),l=mh(u),d=D8(s)&&D8(i),f=d?mh(s):a7,p=d?mh(i):a7;for(let g=0;g<c;o++){if(t(e,r,n,l,o,a),o>=see)throw new Error("arx: counter overflow");const h=Math.min(n2,c-g);if(d&&h===n2){const y=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let E=0,S;E<T_e;E++)S=y+E,p[S]=f[S]^l[E];g+=n2;continue}for(let y=0,E;y<h;y++)E=g+y,i[E]=s[E]^u[y];g+=h}}function P_e(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=w_e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return cN(s),cN(o),B8(i),B8(r),(a,c,u,l,d=0)=>{ua(a),ua(c),ua(u);const f=u.length;if(l===void 0&&(l=new Uint8Array(f)),ua(l),cN(d),d<0||d>=see)throw new Error("arx: counter overflow");if(l.length<f)throw new Error(`arx: output (${l.length}) is shorter than data (${f})`);const p=[];let g=a.length,h,y;if(g===32)p.push(h=M8(a)),y=I_e;else if(g===16&&r)h=new Uint8Array(32),h.set(a),h.set(a,16),y=S_e,p.push(h);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);D8(c)||p.push(c=M8(c));const E=mh(h);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(y,E,mh(c.subarray(0,16)),E),c=c.subarray(16)}const S=16-s;if(S!==c.length)throw new Error(`arx: nonce must be ${S} or 16 bytes`);if(S!==12){const _=new Uint8Array(12);_.set(c,i?0:12-c.length),c=_,p.push(c)}const C=mh(c);return N_e(t,y,E,C,u,l,d,o),by(...p),l}}const hi=(t,e)=>t[e++]&255|(t[e++]&255)<<8;let R_e=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=U8(e),ua(e,32);const r=hi(e,0),n=hi(e,2),s=hi(e,4),i=hi(e,6),o=hi(e,8),a=hi(e,10),c=hi(e,12),u=hi(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=hi(e,16+2*l)}process(e,r,n=!1){const s=n?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],d=o[4],f=o[5],p=o[6],g=o[7],h=o[8],y=o[9],E=hi(e,r+0),S=hi(e,r+2),C=hi(e,r+4),_=hi(e,r+6),T=hi(e,r+8),P=hi(e,r+10),D=hi(e,r+12),F=hi(e,r+14);let I=i[0]+(E&8191),U=i[1]+((E>>>13|S<<3)&8191),L=i[2]+((S>>>10|C<<6)&8191),B=i[3]+((C>>>7|_<<9)&8191),A=i[4]+((_>>>4|T<<12)&8191),m=i[5]+(T>>>1&8191),b=i[6]+((T>>>14|P<<2)&8191),w=i[7]+((P>>>11|D<<5)&8191),x=i[8]+((D>>>8|F<<8)&8191),M=i[9]+(F>>>5|s),k=0,j=k+I*a+U*(5*y)+L*(5*h)+B*(5*g)+A*(5*p);k=j>>>13,j&=8191,j+=m*(5*f)+b*(5*d)+w*(5*l)+x*(5*u)+M*(5*c),k+=j>>>13,j&=8191;let N=k+I*c+U*a+L*(5*y)+B*(5*h)+A*(5*g);k=N>>>13,N&=8191,N+=m*(5*p)+b*(5*f)+w*(5*d)+x*(5*l)+M*(5*u),k+=N>>>13,N&=8191;let v=k+I*u+U*c+L*a+B*(5*y)+A*(5*h);k=v>>>13,v&=8191,v+=m*(5*g)+b*(5*p)+w*(5*f)+x*(5*d)+M*(5*l),k+=v>>>13,v&=8191;let R=k+I*l+U*u+L*c+B*a+A*(5*y);k=R>>>13,R&=8191,R+=m*(5*h)+b*(5*g)+w*(5*p)+x*(5*f)+M*(5*d),k+=R>>>13,R&=8191;let $=k+I*d+U*l+L*u+B*c+A*a;k=$>>>13,$&=8191,$+=m*(5*y)+b*(5*h)+w*(5*g)+x*(5*p)+M*(5*f),k+=$>>>13,$&=8191;let O=k+I*f+U*d+L*l+B*u+A*c;k=O>>>13,O&=8191,O+=m*a+b*(5*y)+w*(5*h)+x*(5*g)+M*(5*p),k+=O>>>13,O&=8191;let H=k+I*p+U*f+L*d+B*l+A*u;k=H>>>13,H&=8191,H+=m*c+b*a+w*(5*y)+x*(5*h)+M*(5*g),k+=H>>>13,H&=8191;let W=k+I*g+U*p+L*f+B*d+A*l;k=W>>>13,W&=8191,W+=m*u+b*c+w*a+x*(5*y)+M*(5*h),k+=W>>>13,W&=8191;let G=k+I*h+U*g+L*p+B*f+A*d;k=G>>>13,G&=8191,G+=m*l+b*u+w*c+x*a+M*(5*y),k+=G>>>13,G&=8191;let K=k+I*y+U*h+L*g+B*p+A*f;k=K>>>13,K&=8191,K+=m*d+b*l+w*u+x*c+M*a,k+=K>>>13,K&=8191,k=(k<<2)+k|0,k=k+j|0,j=k&8191,k=k>>>13,N+=k,i[0]=j,i[1]=N,i[2]=v,i[3]=R,i[4]=$,i[5]=O,i[6]=H,i[7]=W,i[8]=G,i[9]=K}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;by(n)}update(e){s7(this),e=U8(e),ua(e);const{buffer:r,blockLen:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){by(this.h,this.r,this.buffer,this.pad)}digestInto(e){s7(this),g_e(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}};function O_e(t){const e=(n,s)=>t(s).update(U8(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const k_e=O_e(t=>new R_e(t));function B_e(t,e,r,n,s,i=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],d=e[1],f=e[2],p=e[3],g=e[4],h=e[5],y=e[6],E=e[7],S=s,C=r[0],_=r[1],T=r[2],P=o,D=a,F=c,I=u,U=l,L=d,B=f,A=p,m=g,b=h,w=y,x=E,M=S,k=C,j=_,N=T;for(let R=0;R<i;R+=2)P=P+U|0,M=Mr(M^P,16),m=m+M|0,U=Mr(U^m,12),P=P+U|0,M=Mr(M^P,8),m=m+M|0,U=Mr(U^m,7),D=D+L|0,k=Mr(k^D,16),b=b+k|0,L=Mr(L^b,12),D=D+L|0,k=Mr(k^D,8),b=b+k|0,L=Mr(L^b,7),F=F+B|0,j=Mr(j^F,16),w=w+j|0,B=Mr(B^w,12),F=F+B|0,j=Mr(j^F,8),w=w+j|0,B=Mr(B^w,7),I=I+A|0,N=Mr(N^I,16),x=x+N|0,A=Mr(A^x,12),I=I+A|0,N=Mr(N^I,8),x=x+N|0,A=Mr(A^x,7),P=P+L|0,N=Mr(N^P,16),w=w+N|0,L=Mr(L^w,12),P=P+L|0,N=Mr(N^P,8),w=w+N|0,L=Mr(L^w,7),D=D+B|0,M=Mr(M^D,16),x=x+M|0,B=Mr(B^x,12),D=D+B|0,M=Mr(M^D,8),x=x+M|0,B=Mr(B^x,7),F=F+A|0,k=Mr(k^F,16),m=m+k|0,A=Mr(A^m,12),F=F+A|0,k=Mr(k^F,8),m=m+k|0,A=Mr(A^m,7),I=I+U|0,j=Mr(j^I,16),b=b+j|0,U=Mr(U^b,12),I=I+U|0,j=Mr(j^I,8),b=b+j|0,U=Mr(U^b,7);let v=0;n[v++]=o+P|0,n[v++]=a+D|0,n[v++]=c+F|0,n[v++]=u+I|0,n[v++]=l+U|0,n[v++]=d+L|0,n[v++]=f+B|0,n[v++]=p+A|0,n[v++]=g+m|0,n[v++]=h+b|0,n[v++]=y+w|0,n[v++]=E+x|0,n[v++]=S+M|0,n[v++]=C+k|0,n[v++]=_+j|0,n[v++]=T+N|0}const U_e=P_e(B_e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),M_e=new Uint8Array(16),c7=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(M_e.subarray(r))},D_e=new Uint8Array(32);function u7(t,e,r,n,s){const i=t(e,r,D_e),o=k_e.create(i);s&&c7(o,s),c7(o,n);const a=__e(n.length,s?s.length:0,!0);o.update(a);const c=o.digest();return by(i,a),c}const j_e=t=>(e,r,n)=>({encrypt(s,i){const o=s.length;i=i7(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,r,a,a,1);const c=u7(t,e,r,a,n);return i.set(c,o),by(c),i},decrypt(s,i){i=i7(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=u7(t,e,r,o,n);if(!v_e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,r,i,i,1),by(c),i}}),iee=E_e({blockSize:64,nonceLength:12,tagLength:16},j_e(U_e));let oee=class extends k5{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,O5(e);const n=Ou(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Fc(i)}update(e){return Sh(this),this.iHash.update(e),this}digestInto(e){Sh(this),Du(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const M5=(t,e,r)=>new oee(t,e).update(r).digest();M5.create=(t,e)=>new oee(t,e);function L_e(t,e,r){return O5(t),r===void 0&&(r=new Uint8Array(t.outputLen)),M5(t,Ou(r),Ou(e))}const uN=Uint8Array.from([0]),l7=Uint8Array.of();function F_e(t,e,r,n=32){O5(t),Qd(n);const s=t.outputLen;if(n>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/s);r===void 0&&(r=l7);const o=new Uint8Array(i*s),a=M5.create(t,e),c=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let l=0;l<i;l++)uN[0]=l+1,c.update(l===0?l7:u).update(r).update(uN).digestInto(u),o.set(u,s*l),a._cloneInto(c);return a.destroy(),c.destroy(),Fc(u,uN),o.slice(0,n)}const $_e=(t,e,r,n,s)=>F_e(t,L_e(t,e,r),n,s),D5=B5,sk=BigInt(0),j8=BigInt(1);function E6(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function t0(t,e,r=""){const n=R5(t),s=t?.length,i=e!==void 0;if(!n||i&&s!==e){const o=r&&`"${r}" `,a=i?` of length ${e}`:"",c=n?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function s2(t){const e=t.toString(16);return e.length&1?"0"+e:e}function aee(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?sk:BigInt("0x"+t)}function j5(t){return aee(Gm(t))}function _6(t){return Du(t),aee(Gm(Uint8Array.from(t).reverse()))}function ik(t,e){return w6(t.toString(16).padStart(e*2,"0"))}function ok(t,e){return ik(t,e).reverse()}function oo(t,e,r){let n;if(typeof e=="string")try{n=w6(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(R5(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}const lN=t=>typeof t=="bigint"&&sk<=t;function q_e(t,e,r){return lN(t)&&lN(e)&&lN(r)&&e<=t&&t<r}function L8(t,e,r,n){if(!q_e(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function cee(t){let e;for(e=0;t>sk;t>>=j8,e+=1);return e}const ME=t=>(j8<<BigInt(t))-j8;function H_e(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=n(t),o=n(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...f)=>r(o,i,...f),l=(f=n(0))=>{o=u(s(0),f),i=u(),f.length!==0&&(o=u(s(1),f),i=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=u();const g=i.slice();p.push(g),f+=i.length}return ih(...p)};return(f,p)=>{c(),l(f);let g;for(;!(g=p(d()));)l();return c(),g}}function L5(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(r).forEach(([s,i])=>n(s,i,!0))}function d7(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const ba=BigInt(0),ko=BigInt(1),r0=BigInt(2),uee=BigInt(3),lee=BigInt(4),dee=BigInt(5),z_e=BigInt(7),fee=BigInt(8),W_e=BigInt(9),hee=BigInt(16);function Ga(t,e){const r=t%e;return r>=ba?r:e+r}function fu(t,e,r){let n=t;for(;e-- >ba;)n*=n,n%=r;return n}function f7(t,e){if(t===ba)throw new Error("invert: expected non-zero number");if(e<=ba)throw new Error("invert: expected positive modulus, got "+e);let r=Ga(t,e),n=e,s=ba,i=ko;for(;r!==ba;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==ko)throw new Error("invert: does not exist");return Ga(s,e)}function ak(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function pee(t,e){const r=(t.ORDER+ko)/lee,n=t.pow(e,r);return ak(t,n,e),n}function V_e(t,e){const r=(t.ORDER-dee)/fee,n=t.mul(e,r0),s=t.pow(n,r),i=t.mul(e,s),o=t.mul(t.mul(i,r0),s),a=t.mul(i,t.sub(o,t.ONE));return ak(t,a,e),a}function G_e(t){const e=Mh(t),r=gee(t),n=r(e,e.neg(e.ONE)),s=r(e,n),i=r(e,e.neg(n)),o=(t+z_e)/hee;return(a,c)=>{let u=a.pow(c,o),l=a.mul(u,n);const d=a.mul(u,s),f=a.mul(u,i),p=a.eql(a.sqr(l),c),g=a.eql(a.sqr(d),c);u=a.cmov(u,l,p),l=a.cmov(f,d,g);const h=a.eql(a.sqr(l),c),y=a.cmov(u,l,h);return ak(a,y,c),y}}function gee(t){if(t<uee)throw new Error("sqrt is not defined for small field");let e=t-ko,r=0;for(;e%r0===ba;)e/=r0,r++;let n=r0;const s=Mh(t);for(;h7(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return pee;let i=s.pow(n,e);const o=(e+ko)/r0;return function(a,c){if(a.is0(c))return c;if(h7(a,c)!==1)throw new Error("Cannot find square root");let u=r,l=a.mul(a.ONE,i),d=a.pow(c,e),f=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let p=1,g=a.sqr(d);for(;!a.eql(g,a.ONE);)if(p++,g=a.sqr(g),p===u)throw new Error("Cannot find square root");const h=ko<<BigInt(u-p-1),y=a.pow(l,h);u=p,l=a.sqr(y),d=a.mul(d,l),f=a.mul(f,y)}return f}}function K_e(t){return t%lee===uee?pee:t%fee===dee?V_e:t%hee===W_e?G_e(t):gee(t)}const Z_e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Y_e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=Z_e.reduce((n,s)=>(n[s]="function",n),e);return L5(t,r),t}function J_e(t,e,r){if(r<ba)throw new Error("invalid exponent, negatives unsupported");if(r===ba)return t.ONE;if(r===ko)return e;let n=t.ONE,s=e;for(;r>ba;)r&ko&&(n=t.mul(n,s)),s=t.sqr(s),r>>=ko;return n}function mee(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),i),n}function h7(t,e){const r=(t.ORDER-ko)/r0,n=t.pow(e,r),s=t.eql(n,t.ONE),i=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function yee(t,e){e!==void 0&&Qd(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Mh(t,e,r=!1,n={}){if(t<=ba)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const f=e;f.BITS&&(s=f.BITS),f.sqrt&&(i=f.sqrt),typeof f.isLE=="boolean"&&(r=f.isLE),typeof f.modFromBytes=="boolean"&&(o=f.modFromBytes),a=f.allowedLengths}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:c,nByteLength:u}=yee(t,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const d=Object.freeze({ORDER:t,isLE:r,BITS:c,BYTES:u,MASK:ME(c),ZERO:ba,ONE:ko,allowedLengths:a,create:f=>Ga(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return ba<=f&&f<t},is0:f=>f===ba,isValidNot0:f=>!d.is0(f)&&d.isValid(f),isOdd:f=>(f&ko)===ko,neg:f=>Ga(-f,t),eql:(f,p)=>f===p,sqr:f=>Ga(f*f,t),add:(f,p)=>Ga(f+p,t),sub:(f,p)=>Ga(f-p,t),mul:(f,p)=>Ga(f*p,t),pow:(f,p)=>J_e(d,f,p),div:(f,p)=>Ga(f*f7(p,t),t),sqrN:f=>f*f,addN:(f,p)=>f+p,subN:(f,p)=>f-p,mulN:(f,p)=>f*p,inv:f=>f7(f,t),sqrt:i||(f=>(l||(l=K_e(t)),l(d,f))),toBytes:f=>r?ok(f,u):ik(f,u),fromBytes:(f,p=!0)=>{if(a){if(!a.includes(f.length)||f.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);const h=new Uint8Array(u);h.set(f,r?0:h.length-f.length),f=h}if(f.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+f.length);let g=r?_6(f):j5(f);if(o&&(g=Ga(g,t)),!p&&!d.isValid(g))throw new Error("invalid field element: outside of range 0..ORDER");return g},invertBatch:f=>mee(d,f),cmov:(f,p,g)=>g?p:f});return Object.freeze(d)}function bee(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function wee(t){const e=bee(t);return e+Math.ceil(e/2)}function X_e(t,e,r=!1){const n=t.length,s=bee(e),i=wee(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?_6(t):j5(t),a=Ga(o,e-ko)+ko;return r?ok(a,s):ik(a,s)}const wy=BigInt(0),n0=BigInt(1);function A6(t,e){const r=e.negate();return t?r:e}function dN(t,e){const r=mee(t.Fp,e.map(n=>n.Z));return e.map((n,s)=>t.fromAffine(n.toAffine(r[s])))}function vee(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function fN(t,e){vee(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),s=2**t,i=ME(t),o=BigInt(t);return{windows:r,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function p7(t,e,r){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=r;let a=Number(t&s),c=t>>o;a>n&&(a-=i,c+=n0);const u=e*n,l=u+Math.abs(a)-1,d=a===0,f=a<0,p=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:p,offsetF:u}}function Q_e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function e2e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const hN=new WeakMap,Eee=new WeakMap;function pN(t){return Eee.get(t)||1}function g7(t){if(t!==wy)throw new Error("invalid wNAF")}let t2e=class{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let s=e;for(;r>wy;)r&n0&&(n=n.add(s)),s=s.double(),r>>=n0;return n}precomputeWindow(e,r){const{windows:n,windowSize:s}=fN(r,this.bits),i=[];let o=e,a=o;for(let c=0;c<n;c++){a=o,i.push(a);for(let u=1;u<s;u++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=fN(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:u,isZero:l,isNeg:d,isNegF:f,offsetF:p}=p7(n,a,o);n=c,l?i=i.add(A6(f,r[p])):s=s.add(A6(d,r[u]))}return g7(n),{p:s,f:i}}wNAFUnsafe(e,r,n,s=this.ZERO){const i=fN(e,this.bits);for(let o=0;o<i.windows&&n!==wy;o++){const{nextN:a,offset:c,isZero:u,isNeg:l}=p7(n,o,i);if(n=a,!u){const d=r[c];s=s.add(l?d.negate():d)}}return g7(n),s}getPrecomputes(e,r,n){let s=hN.get(r);return s||(s=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(s=n(s)),hN.set(r,s))),s}cached(e,r,n){const s=pN(e);return this.wNAF(s,this.getPrecomputes(s,e,n),r)}unsafe(e,r,n,s){const i=pN(e);return i===1?this._unsafeLadder(e,r,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),r,s)}createCache(e,r){vee(r,this.bits),Eee.set(e,r),hN.delete(e)}hasCache(e){return pN(e)!==1}};function r2e(t,e,r,n){let s=e,i=t.ZERO,o=t.ZERO;for(;r>wy||n>wy;)r&n0&&(i=i.add(s)),n&n0&&(o=o.add(s)),s=s.double(),r>>=n0,n>>=n0;return{p1:i,p2:o}}function n2e(t,e,r,n){Q_e(r,t),e2e(n,e);const s=r.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=cee(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=ME(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let p=d;p>=0;p-=c){l.fill(o);for(let h=0;h<i;h++){const y=n[h],E=Number(y>>BigInt(p)&u);l[E]=l[E].add(r[h])}let g=o;for(let h=l.length-1,y=o;h>0;h--)y=y.add(l[h]),g=g.add(y);if(f=f.add(g),p!==0)for(let h=0;h<c;h++)f=f.double()}return f}function m7(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Y_e(e),e}else return Mh(t,{isLE:r})}function s2e(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>wy))throw new Error(`CURVE.${a} must be positive bigint`)}const s=m7(e.p,r.Fp,n),i=m7(e.n,r.Fn,n),o=["Gx","Gy","a","b"];for(const a of o)if(!s.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),zQ("HashToScalar-");const Nb=BigInt(0),Ag=BigInt(1),i2=BigInt(2);function i2e(t){return L5(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function o2e(t){const e=i2e(t),{P:r,type:n,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=n==="x25519";if(!a&&n!=="x448")throw new Error("invalid type");const c=o||z0,u=a?255:448,l=a?32:56,d=BigInt(a?9:5),f=BigInt(a?121665:39081),p=a?i2**BigInt(254):i2**BigInt(447),g=a?BigInt(8)*i2**BigInt(251)-Ag:BigInt(4)*i2**BigInt(445)-Ag,h=p+g+Ag,y=B=>Ga(B,r),E=S(d);function S(B){return ok(y(B),l)}function C(B){const A=oo("u coordinate",B,l);return a&&(A[31]&=127),y(_6(A))}function _(B){return _6(s(oo("scalar",B,l)))}function T(B,A){const m=F(C(A),_(B));if(m===Nb)throw new Error("invalid private or public key received");return S(m)}function P(B){return T(B,E)}function D(B,A,m){const b=y(B*(A-m));return A=y(A-b),m=y(m+b),{x_2:A,x_3:m}}function F(B,A){L8("u",B,Nb,r),L8("scalar",A,p,h);const m=A,b=B;let w=Ag,x=Nb,M=B,k=Ag,j=Nb;for(let v=BigInt(u-1);v>=Nb;v--){const R=m>>v&Ag;j^=R,{x_2:w,x_3:M}=D(j,w,M),{x_2:x,x_3:k}=D(j,x,k),j=R;const $=w+x,O=y($*$),H=w-x,W=y(H*H),G=O-W,K=M+k,Q=M-k,re=y(Q*$),de=y(K*H),le=re+de,se=re-de;M=y(le*le),k=y(b*y(se*se)),w=y(O*W),x=y(G*(O+y(f*G)))}({x_2:w,x_3:M}=D(j,w,M)),{x_2:x,x_3:k}=D(j,x,k);const N=i(x);return y(w*N)}const I={secretKey:l,publicKey:l,seed:l},U=(B=c(l))=>(Du(B,I.seed),B);function L(B){const A=U(B);return{secretKey:A,publicKey:P(A)}}return{keygen:L,getSharedSecret:(B,A)=>T(B,A),getPublicKey:B=>P(B),scalarMult:T,scalarMultBase:P,utils:{randomSecretKey:U,randomPrivateKey:U},GuBytes:E.slice(),lengths:I}}const a2e=BigInt(1),y7=BigInt(2),c2e=BigInt(3),u2e=BigInt(5);BigInt(8);const _ee=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),l2e={p:_ee,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function d2e(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=_ee,o=t*t%i*t%i,a=fu(o,y7,i)*o%i,c=fu(a,a2e,i)*t%i,u=fu(c,u2e,i)*c%i,l=fu(u,e,i)*u%i,d=fu(l,r,i)*l%i,f=fu(d,n,i)*d%i,p=fu(f,s,i)*f%i,g=fu(p,s,i)*f%i,h=fu(g,e,i)*u%i;return{pow_p_5_8:fu(h,y7,i)*t%i,b2:o}}function f2e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const h2e=Mh(l2e.p,{isLE:!0}),F8=(()=>{const t=h2e.ORDER;return o2e({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:r,b2:n}=d2e(e);return Ga(fu(r,c2e,t)*n,t)},adjustScalarBytes:f2e})})(),b7=(t,e)=>(t+(t>=0?e:-e)/Aee)/e;function p2e(t,e,r){const[[n,s],[i,o]]=e,a=b7(o*t,r),c=b7(-s*t,r);let u=t-a*n-c*i,l=-a*s-c*o;const d=u<qd,f=l<qd;d&&(u=-u),f&&(l=-l);const p=ME(Math.ceil(cee(r)/2))+Km;if(u<qd||u>=p||l<qd||l>=p)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}function $8(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function gN(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return E6(r.lowS,"lowS"),E6(r.prehash,"prehash"),r.format!==void 0&&$8(r.format),r}let g2e=class extends Error{constructor(e=""){super(e)}};const Ud={Err:g2e,_tlv:{encode:(t,e)=>{const{Err:r}=Ud;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=s2(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?s2(s.length/2|128):"";return s2(t)+i+s+e},decode(t,e){const{Err:r}=Ud;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=Ud;if(t<qd)throw new e("integer: negative integers are not allowed");let r=s2(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Ud;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return j5(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Ud,s=oo("signature",t),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=Ud,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}},qd=BigInt(0),Km=BigInt(1),Aee=BigInt(2),o2=BigInt(3),m2e=BigInt(4);function Om(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let s=oo("private key",e);try{n=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function y2e(t,e={}){const r=s2e("weierstrass",t,e),{Fp:n,Fn:s}=r;let i=r.CURVE;const{h:o,n:a}=i;L5(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=Cee(n,s);function l(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(B,A,m){const{x:b,y:w}=A.toAffine(),x=n.toBytes(b);if(E6(m,"isCompressed"),m){l();const M=!n.isOdd(w);return ih(xee(M),x)}else return ih(Uint8Array.of(4),x,n.toBytes(w))}function f(B){t0(B,void 0,"Point");const{publicKey:A,publicKeyUncompressed:m}=u,b=B.length,w=B[0],x=B.subarray(1);if(b===A&&(w===2||w===3)){const M=n.fromBytes(x);if(!n.isValid(M))throw new Error("bad point: is not on curve, wrong x");const k=h(M);let j;try{j=n.sqrt(k)}catch(v){const R=v instanceof Error?": "+v.message:"";throw new Error("bad point: is not on curve, sqrt error"+R)}l();const N=n.isOdd(j);return(w&1)===1!==N&&(j=n.neg(j)),{x:M,y:j}}else if(b===m&&w===4){const M=n.BYTES,k=n.fromBytes(x.subarray(0,M)),j=n.fromBytes(x.subarray(M,M*2));if(!y(k,j))throw new Error("bad point: is not on curve");return{x:k,y:j}}else throw new Error(`bad point: got length ${b}, expected compressed=${A} or uncompressed=${m}`)}const p=e.toBytes||d,g=e.fromBytes||f;function h(B){const A=n.sqr(B),m=n.mul(A,B);return n.add(n.add(m,n.mul(B,i.a)),i.b)}function y(B,A){const m=n.sqr(A),b=h(B);return n.eql(m,b)}if(!y(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const E=n.mul(n.pow(i.a,o2),m2e),S=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(E,S)))throw new Error("bad curve params: a or b");function C(B,A,m=!1){if(!n.isValid(A)||m&&n.is0(A))throw new Error(`bad point coordinate ${B}`);return A}function _(B){if(!(B instanceof I))throw new Error("ProjectivePoint expected")}function T(B){if(!c||!c.basises)throw new Error("no endo");return p2e(B,c.basises,s.ORDER)}const P=d7((B,A)=>{const{X:m,Y:b,Z:w}=B;if(n.eql(w,n.ONE))return{x:m,y:b};const x=B.is0();A==null&&(A=x?n.ONE:n.inv(w));const M=n.mul(m,A),k=n.mul(b,A),j=n.mul(w,A);if(x)return{x:n.ZERO,y:n.ZERO};if(!n.eql(j,n.ONE))throw new Error("invZ was invalid");return{x:M,y:k}}),D=d7(B=>{if(B.is0()){if(e.allowInfinityPoint&&!n.is0(B.Y))return;throw new Error("bad point: ZERO")}const{x:A,y:m}=B.toAffine();if(!n.isValid(A)||!n.isValid(m))throw new Error("bad point: x or y not field elements");if(!y(A,m))throw new Error("bad point: equation left != right");if(!B.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function F(B,A,m,b,w){return m=new I(n.mul(m.X,B),m.Y,m.Z),A=A6(b,A),m=A6(w,m),A.add(m)}class I{constructor(A,m,b){this.X=C("x",A),this.Y=C("y",m,!0),this.Z=C("z",b),Object.freeze(this)}static CURVE(){return i}static fromAffine(A){const{x:m,y:b}=A||{};if(!A||!n.isValid(m)||!n.isValid(b))throw new Error("invalid affine point");if(A instanceof I)throw new Error("projective point not allowed");return n.is0(m)&&n.is0(b)?I.ZERO:new I(m,b,n.ONE)}static fromBytes(A){const m=I.fromAffine(g(t0(A,void 0,"point")));return m.assertValidity(),m}static fromHex(A){return I.fromBytes(oo("pointHex",A))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(A=8,m=!0){return L.createCache(this,A),m||this.multiply(o2),this}assertValidity(){D(this)}hasEvenY(){const{y:A}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(A)}equals(A){_(A);const{X:m,Y:b,Z:w}=this,{X:x,Y:M,Z:k}=A,j=n.eql(n.mul(m,k),n.mul(x,w)),N=n.eql(n.mul(b,k),n.mul(M,w));return j&&N}negate(){return new I(this.X,n.neg(this.Y),this.Z)}double(){const{a:A,b:m}=i,b=n.mul(m,o2),{X:w,Y:x,Z:M}=this;let k=n.ZERO,j=n.ZERO,N=n.ZERO,v=n.mul(w,w),R=n.mul(x,x),$=n.mul(M,M),O=n.mul(w,x);return O=n.add(O,O),N=n.mul(w,M),N=n.add(N,N),k=n.mul(A,N),j=n.mul(b,$),j=n.add(k,j),k=n.sub(R,j),j=n.add(R,j),j=n.mul(k,j),k=n.mul(O,k),N=n.mul(b,N),$=n.mul(A,$),O=n.sub(v,$),O=n.mul(A,O),O=n.add(O,N),N=n.add(v,v),v=n.add(N,v),v=n.add(v,$),v=n.mul(v,O),j=n.add(j,v),$=n.mul(x,M),$=n.add($,$),v=n.mul($,O),k=n.sub(k,v),N=n.mul($,R),N=n.add(N,N),N=n.add(N,N),new I(k,j,N)}add(A){_(A);const{X:m,Y:b,Z:w}=this,{X:x,Y:M,Z:k}=A;let j=n.ZERO,N=n.ZERO,v=n.ZERO;const R=i.a,$=n.mul(i.b,o2);let O=n.mul(m,x),H=n.mul(b,M),W=n.mul(w,k),G=n.add(m,b),K=n.add(x,M);G=n.mul(G,K),K=n.add(O,H),G=n.sub(G,K),K=n.add(m,w);let Q=n.add(x,k);return K=n.mul(K,Q),Q=n.add(O,W),K=n.sub(K,Q),Q=n.add(b,w),j=n.add(M,k),Q=n.mul(Q,j),j=n.add(H,W),Q=n.sub(Q,j),v=n.mul(R,K),j=n.mul($,W),v=n.add(j,v),j=n.sub(H,v),v=n.add(H,v),N=n.mul(j,v),H=n.add(O,O),H=n.add(H,O),W=n.mul(R,W),K=n.mul($,K),H=n.add(H,W),W=n.sub(O,W),W=n.mul(R,W),K=n.add(K,W),O=n.mul(H,K),N=n.add(N,O),O=n.mul(Q,K),j=n.mul(G,j),j=n.sub(j,O),O=n.mul(G,H),v=n.mul(Q,v),v=n.add(v,O),new I(j,N,v)}subtract(A){return this.add(A.negate())}is0(){return this.equals(I.ZERO)}multiply(A){const{endo:m}=e;if(!s.isValidNot0(A))throw new Error("invalid scalar: out of range");let b,w;const x=M=>L.cached(this,M,k=>dN(I,k));if(m){const{k1neg:M,k1:k,k2neg:j,k2:N}=T(A),{p:v,f:R}=x(k),{p:$,f:O}=x(N);w=R.add(O),b=F(m.beta,v,$,M,j)}else{const{p:M,f:k}=x(A);b=M,w=k}return dN(I,[b,w])[0]}multiplyUnsafe(A){const{endo:m}=e,b=this;if(!s.isValid(A))throw new Error("invalid scalar: out of range");if(A===qd||b.is0())return I.ZERO;if(A===Km)return b;if(L.hasCache(this))return this.multiply(A);if(m){const{k1neg:w,k1:x,k2neg:M,k2:k}=T(A),{p1:j,p2:N}=r2e(I,b,x,k);return F(m.beta,j,N,w,M)}else return L.unsafe(b,A)}multiplyAndAddUnsafe(A,m,b){const w=this.multiplyUnsafe(m).add(A.multiplyUnsafe(b));return w.is0()?void 0:w}toAffine(A){return P(this,A)}isTorsionFree(){const{isTorsionFree:A}=e;return o===Km?!0:A?A(I,this):L.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:A}=e;return o===Km?this:A?A(I,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(A=!0){return E6(A,"isCompressed"),this.assertValidity(),p(I,this,A)}toHex(A=!0){return Gm(this.toBytes(A))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(A=!0){return this.toBytes(A)}_setWindowSize(A){this.precompute(A)}static normalizeZ(A){return dN(I,A)}static msm(A,m){return n2e(I,s,A,m)}static fromPrivateKey(A){return I.BASE.multiply(Om(s,A))}}I.BASE=new I(i.Gx,i.Gy,n.ONE),I.ZERO=new I(n.ZERO,n.ONE,n.ZERO),I.Fp=n,I.Fn=s;const U=s.BITS,L=new t2e(I,e.endo?Math.ceil(U/2):U);return I.BASE.precompute(8),I}function xee(t){return Uint8Array.of(t?2:3)}function Cee(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function b2e(t,e={}){const{Fn:r}=t,n=e.randomBytes||z0,s=Object.assign(Cee(t.Fp,r),{seed:wee(r.ORDER)});function i(f){try{return!!Om(r,f)}catch{return!1}}function o(f,p){const{publicKey:g,publicKeyUncompressed:h}=s;try{const y=f.length;return p===!0&&y!==g||p===!1&&y!==h?!1:!!t.fromBytes(f)}catch{return!1}}function a(f=n(s.seed)){return X_e(t0(f,s.seed,"seed"),r.ORDER)}function c(f,p=!0){return t.BASE.multiply(Om(r,f)).toBytes(p)}function u(f){const p=a(f);return{secretKey:p,publicKey:c(p)}}function l(f){if(typeof f=="bigint")return!1;if(f instanceof t)return!0;const{secretKey:p,publicKey:g,publicKeyUncompressed:h}=s;if(r.allowedLengths||p===g)return;const y=oo("key",f).length;return y===g||y===h}function d(f,p,g=!0){if(l(f)===!0)throw new Error("first arg must be private key");if(l(p)===!1)throw new Error("second arg must be public key");const h=Om(r,f);return t.fromHex(p).multiply(h).toBytes(g)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:u,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:f=>Om(r,f),precompute(f=8,p=t.BASE){return p.precompute(f,!1)}},lengths:s})}function w2e(t,e,r={}){O5(e),L5(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||z0,s=r.hmac||((m,...b)=>M5(e,m,ih(...b))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:p}=b2e(t,r),g={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},h="compact";function y(m){const b=a>>Km;return m>b}function E(m,b){if(!o.isValidNot0(b))throw new Error(`invalid signature ${m}: out of range 1..Point.Fn.ORDER`);return b}function S(m,b){$8(b);const w=p.signature,x=b==="compact"?w:b==="recovered"?w+1:void 0;return t0(m,x,`${b} signature`)}class C{constructor(b,w,x){this.r=E("r",b),this.s=E("s",w),x!=null&&(this.recovery=x),Object.freeze(this)}static fromBytes(b,w=h){S(b,w);let x;if(w==="der"){const{r:N,s:v}=Ud.toSig(t0(b));return new C(N,v)}w==="recovered"&&(x=b[0],w="compact",b=b.subarray(1));const M=o.BYTES,k=b.subarray(0,M),j=b.subarray(M,M*2);return new C(o.fromBytes(k),o.fromBytes(j),x)}static fromHex(b,w){return this.fromBytes(w6(b),w)}addRecoveryBit(b){return new C(this.r,this.s,b)}recoverPublicKey(b){const w=i.ORDER,{r:x,s:M,recovery:k}=this;if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");if(a*Aee<w&&k>1)throw new Error("recovery id is ambiguous for h>1 curve");const j=k===2||k===3?x+a:x;if(!i.isValid(j))throw new Error("recovery id 2 or 3 invalid");const N=i.toBytes(j),v=t.fromBytes(ih(xee((k&1)===0),N)),R=o.inv(j),$=T(oo("msgHash",b)),O=o.create(-$*R),H=o.create(M*R),W=t.BASE.multiplyUnsafe(O).add(v.multiplyUnsafe(H));if(W.is0())throw new Error("point at infinify");return W.assertValidity(),W}hasHighS(){return y(this.s)}toBytes(b=h){if($8(b),b==="der")return w6(Ud.hexFromSig(this));const w=o.toBytes(this.r),x=o.toBytes(this.s);if(b==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return ih(Uint8Array.of(this.recovery),w,x)}return ih(w,x)}toHex(b){return Gm(this.toBytes(b))}assertValidity(){}static fromCompact(b){return C.fromBytes(oo("sig",b),"compact")}static fromDER(b){return C.fromBytes(oo("sig",b),"der")}normalizeS(){return this.hasHighS()?new C(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Gm(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Gm(this.toBytes("compact"))}}const _=r.bits2int||function(m){if(m.length>8192)throw new Error("input is too large");const b=j5(m),w=m.length*8-c;return w>0?b>>BigInt(w):b},T=r.bits2int_modN||function(m){return o.create(_(m))},P=ME(c);function D(m){return L8("num < 2^"+c,m,qd,P),o.toBytes(m)}function F(m,b){return t0(m,void 0,"message"),b?t0(e(m),void 0,"prehashed message"):m}function I(m,b,w){if(["recovered","canonical"].some(H=>H in w))throw new Error("sign() legacy options not supported");const{lowS:x,prehash:M,extraEntropy:k}=gN(w,g);m=F(m,M);const j=T(m),N=Om(o,b),v=[D(N),D(j)];if(k!=null&&k!==!1){const H=k===!0?n(p.secretKey):k;v.push(oo("extraEntropy",H))}const R=ih(...v),$=j;function O(H){const W=_(H);if(!o.isValidNot0(W))return;const G=o.inv(W),K=t.BASE.multiply(W).toAffine(),Q=o.create(K.x);if(Q===qd)return;const re=o.create(G*o.create($+Q*N));if(re===qd)return;let de=(K.x===Q?0:2)|Number(K.y&Km),le=re;return x&&y(re)&&(le=o.neg(re),de^=1),new C(Q,le,de)}return{seed:R,k2sig:O}}function U(m,b,w={}){m=oo("message",m);const{seed:x,k2sig:M}=I(m,b,w);return H_e(e.outputLen,o.BYTES,s)(x,M)}function L(m){let b;const w=typeof m=="string"||R5(m),x=!w&&m!==null&&typeof m=="object"&&typeof m.r=="bigint"&&typeof m.s=="bigint";if(!w&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(x)b=new C(m.r,m.s);else if(w){try{b=C.fromBytes(oo("sig",m),"der")}catch(M){if(!(M instanceof Ud.Err))throw M}if(!b)try{b=C.fromBytes(oo("sig",m),"compact")}catch{return!1}}return b||!1}function B(m,b,w,x={}){const{lowS:M,prehash:k,format:j}=gN(x,g);if(w=oo("publicKey",w),b=F(oo("message",b),k),"strict"in x)throw new Error("options.strict was renamed to lowS");const N=j===void 0?L(m):C.fromBytes(oo("sig",m),j);if(N===!1)return!1;try{const v=t.fromBytes(w);if(M&&N.hasHighS())return!1;const{r:R,s:$}=N,O=T(b),H=o.inv($),W=o.create(O*H),G=o.create(R*H),K=t.BASE.multiplyUnsafe(W).add(v.multiplyUnsafe(G));return K.is0()?!1:o.create(K.x)===R}catch{return!1}}function A(m,b,w={}){const{prehash:x}=gN(w,g);return b=F(b,x),C.fromBytes(m,"recovered").recoverPublicKey(b).toBytes()}return Object.freeze({keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:p,Point:t,sign:U,verify:B,recoverPublicKey:A,Signature:C,hash:e})}function v2e(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Mh(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),i={Fp:r,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function E2e(t){const{CURVE:e,curveOpts:r}=v2e(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function _2e(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,yee(r.Fn.ORDER,r.Fn.BITS))})}function A2e(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:s}=E2e(t),i=y2e(e,r),o=w2e(i,n,s);return _2e(t,o)}function q8(t,e){const r=n=>A2e({...t,hash:n});return{...r(e),create:r}}const See={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Iee={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Tee={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},x2e=Mh(See.p),C2e=Mh(Iee.p),S2e=Mh(Tee.p),I2e=q8({...See,Fp:x2e,lowS:!1},B5);q8({...Iee,Fp:C2e,lowS:!1},OEe),q8({...Tee,Fp:S2e,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},REe);const T2e=I2e,Nee="base10",Bo="base16",la="base64pad",oh="base64url",DE="utf8",Pee=0,Vd=1,jE=2,N2e=0,w7=1,A1=12,ck=32;function P2e(){const t=F8.utils.randomPrivateKey(),e=F8.getPublicKey(t);return{privateKey:_n(t,Bo),publicKey:_n(e,Bo)}}function H8(){const t=z0(ck);return _n(t,Bo)}function R2e(t,e){const r=F8.getSharedSecret(Yn(t,Bo),Yn(e,Bo)),n=$_e(D5,r,void 0,void 0,ck);return _n(n,Bo)}function dI(t){const e=D5(Yn(t,Bo));return _n(e,Bo)}function Bc(t){const e=D5(Yn(t,DE));return _n(e,Bo)}function Ree(t){return Yn(`${t}`,Nee)}function S0(t){return Number(_n(t,Nee))}function Oee(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function kee(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return e+"=".repeat(r)}function O2e(t){const e=Ree(typeof t.type<"u"?t.type:Pee);if(S0(e)===Vd&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Yn(t.senderPublicKey,Bo):void 0,n=typeof t.iv<"u"?Yn(t.iv,Bo):z0(A1),s=Yn(t.symKey,Bo),i=iee(s,n).encrypt(Yn(t.message,DE)),o=Bee({type:e,sealed:i,iv:n,senderPublicKey:r});return t.encoding===oh?Oee(o):o}function k2e(t){const e=Yn(t.symKey,Bo),{sealed:r,iv:n}=jv({encoded:t.encoded,encoding:t.encoding}),s=iee(e,n).decrypt(r);if(s===null)throw new Error("Failed to decrypt");return _n(s,DE)}function B2e(t,e){const r=Ree(jE),n=z0(A1),s=Yn(t,DE),i=Bee({type:r,sealed:s,iv:n});return e===oh?Oee(i):i}function U2e(t,e){const{sealed:r}=jv({encoded:t,encoding:e});return _n(r,DE)}function Bee(t){if(S0(t.type)===jE)return _n(xl([t.type,t.sealed]),la);if(S0(t.type)===Vd){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return _n(xl([t.type,t.senderPublicKey,t.iv,t.sealed]),la)}return _n(xl([t.type,t.iv,t.sealed]),la)}function jv(t){const e=(t.encoding||la)===oh?kee(t.encoded):t.encoded,r=Yn(e,la),n=r.slice(N2e,w7),s=w7;if(S0(n)===Vd){const c=s+ck,u=c+A1,l=r.slice(s,c),d=r.slice(c,u),f=r.slice(u);return{type:n,sealed:f,iv:d,senderPublicKey:l}}if(S0(n)===jE){const c=r.slice(s),u=z0(A1);return{type:n,sealed:c,iv:u}}const i=s+A1,o=r.slice(s,i),a=r.slice(i);return{type:n,sealed:a,iv:o}}function M2e(t,e){const r=jv({encoded:t,encoding:e?.encoding});return Uee({type:S0(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?_n(r.senderPublicKey,Bo):void 0,receiverPublicKey:e?.receiverPublicKey})}function Uee(t){const e=t?.type||Pee;if(e===Vd){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function v7(t){return t.type===Vd&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function E7(t){return t.type===jE}function D2e(t){const e=Buffer.from(t.x,"base64"),r=Buffer.from(t.y,"base64");return xl([new Uint8Array([4]),e,r])}function j2e(t,e){const[r,n,s]=t.split("."),i=Buffer.from(kee(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${r}.${n}`,u=D5(c),l=D2e(e);if(!T2e.verify(xl([o,a]),u,l))throw new Error("Invalid signature");return hy(t).payload}const L2e="irn";function x6(t){return t?.relay||{protocol:L2e}}function km(t){const e=PQ[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var F2e=Object.defineProperty,$2e=Object.defineProperties,q2e=Object.getOwnPropertyDescriptors,_7=Object.getOwnPropertySymbols,H2e=Object.prototype.hasOwnProperty,z2e=Object.prototype.propertyIsEnumerable,A7=(t,e,r)=>e in t?F2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mN=(t,e)=>{for(var r in e||(e={}))H2e.call(e,r)&&A7(t,r,e[r]);if(_7)for(var r of _7(e))z2e.call(e,r)&&A7(t,r,e[r]);return t},W2e=(t,e)=>$2e(t,q2e(e));function V2e(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(n)){const i=s.replace(n,""),o=t[s];r[i]=o}}),r}function x7(t){if(!t.includes("wc:")){const u=jQ(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),s=t.substring(e+1,r).split("@"),i=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(i),a=Object.fromEntries(o.entries()),c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:G2e(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:V2e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function G2e(t){return t.startsWith("//")?t.substring(2):t}function K2e(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(s=>{const i=s,o=r+e+i;t[i]&&(n[o]=t[i])}),n}function C7(t){const e=new URLSearchParams,r=mN(mN(W2e(mN({},K2e(t.relay)),{symKey:t.symKey}),t.expiryTimestamp&&{expiryTimestamp:t.expiryTimestamp.toString()}),t.methods&&{methods:t.methods.join(",")});return Object.entries(r).sort(([n],[s])=>n.localeCompare(s)).forEach(([n,s])=>{s!==void 0&&e.append(n,String(s))}),`${t.protocol}:${t.topic}@${t.version}?${e}`}function a2(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}var Z2e=Object.defineProperty,Y2e=Object.defineProperties,J2e=Object.getOwnPropertyDescriptors,S7=Object.getOwnPropertySymbols,X2e=Object.prototype.hasOwnProperty,Q2e=Object.prototype.propertyIsEnumerable,I7=(t,e,r)=>e in t?Z2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,eAe=(t,e)=>{for(var r in e||(e={}))X2e.call(e,r)&&I7(t,r,e[r]);if(S7)for(var r of S7(e))Q2e.call(e,r)&&I7(t,r,e[r]);return t},tAe=(t,e)=>Y2e(t,J2e(e));function qy(t){const e=[];return t.forEach(r=>{const[n,s]=r.split(":");e.push(`${n}:${s}`)}),e}function Mee(t){const e=[];return Object.values(t).forEach(r=>{e.push(...qy(r.accounts))}),[...new Set(e)]}function rAe(t){const e=[];return Object.values(t).forEach(r=>{e.push(...r.methods)}),[...new Set(e)]}function nAe(t){const e=[];return Object.values(t).forEach(r=>{e.push(...r.events)}),[...new Set(e)]}function sAe(t,e){const r=[];return Object.values(t).forEach(n=>{qy(n.accounts).includes(e)&&r.push(...n.methods)}),r}function iAe(t,e){const r=[];return Object.values(t).forEach(n=>{qy(n.accounts).includes(e)&&r.push(...n.events)}),r}function F5(t){return t.includes(":")}function Bm(t){return F5(t)?t.split(":")[0]:t}function T7(t){var e,r,n;const s={};if(!Sl(t))return s;for(const[i,o]of Object.entries(t)){const a=F5(i)?[i]:o.chains,c=o.methods||[],u=o.events||[],l=Bm(i);s[l]=tAe(eAe({},s[l]),{chains:Cl(a,(e=s[l])==null?void 0:e.chains),methods:Cl(c,(r=s[l])==null?void 0:r.methods),events:Cl(u,(n=s[l])==null?void 0:n.events)})}return s}function oAe(t){const e={};return t?.forEach(r=>{var n;const[s,i]=r.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(r),(n=e[s].chains)==null||n.push(`${s}:${i}`)}),e}function N7(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=oAe(e);for(const[n,s]of Object.entries(r))s.methods?s.methods=Cl(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return r}function aAe(t,e){var r,n,s,i,o,a;const c=T7(t),u=T7(e),l={},d=Object.keys(c).concat(Object.keys(u));for(const f of d)l[f]={chains:Cl((r=c[f])==null?void 0:r.chains,(n=u[f])==null?void 0:n.chains),methods:Cl((s=c[f])==null?void 0:s.methods,(i=u[f])==null?void 0:i.methods),events:Cl((o=c[f])==null?void 0:o.events,(a=u[f])==null?void 0:a.events)};return l}const cAe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},uAe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Fe(t,e){const{message:r,code:n}=uAe[t];return{message:e?`${r} ${e}`:r,code:n}}function Gn(t,e){const{message:r,code:n}=cAe[t];return{message:e?`${r} ${e}`:r,code:n}}function Gd(t,e){return!!Array.isArray(t)}function Sl(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function si(t){return typeof t>"u"}function Bs(t,e){return e&&si(t)?!0:typeof t=="string"&&!!t.trim().length}function uk(t,e){return typeof t=="number"&&!isNaN(t)}function lAe(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),s=Object.keys(r);let i=!0;return e0(s,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],l=qy(a),d=r[o];(!e0(kQ(o,d),l)||!e0(d.methods,c)||!e0(d.events,u))&&(i=!1)}),i):!1}function C6(t){return Bs(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function dAe(t){if(Bs(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&C6(r)}}return!1}function fAe(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(Bs(t,!1)){if(e(t))return!0;const r=jQ(t);return e(r)}}catch{}return!1}function hAe(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function pAe(t){return t?.topic}function gAe(t,e){let r=null;return Bs(t?.publicKey,!1)||(r=Fe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function P7(t){let e=!0;return Gd(t)?t.length&&(e=t.every(r=>Bs(r,!1))):e=!1,e}function mAe(t,e,r){let n=null;return Gd(e)&&e.length?e.forEach(s=>{n||C6(s)||(n=Gn("UNSUPPORTED_CHAINS",`${r}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):C6(t)||(n=Gn("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function yAe(t,e,r){let n=null;return Object.entries(t).forEach(([s,i])=>{if(n)return;const o=mAe(s,kQ(s,i),`${e} ${r}`);o&&(n=o)}),n}function bAe(t,e){let r=null;return Gd(t)?t.forEach(n=>{r||dAe(n)||(r=Gn("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Gn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function wAe(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=bAe(n?.accounts,`${e} namespace`);s&&(r=s)}),r}function vAe(t,e){let r=null;return P7(t?.methods)?P7(t?.events)||(r=Gn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Gn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Dee(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=vAe(n,`${e}, namespace`);s&&(r=s)}),r}function EAe(t,e,r){let n=null;if(t&&Sl(t)){const s=Dee(t,e);s&&(n=s);const i=yAe(t,e,r);i&&(n=i)}else n=Fe("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function yN(t,e){let r=null;if(t&&Sl(t)){const n=Dee(t,e);n&&(r=n);const s=wAe(t,e);s&&(r=s)}else r=Fe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function jee(t){return Bs(t.protocol,!0)}function _Ae(t,e){let r=!1;return t?t&&Gd(t)&&t.length&&t.forEach(n=>{r=jee(n)}):r=!0,r}function AAe(t){return typeof t=="number"}function ta(t){return typeof t<"u"&&typeof t!==null}function xAe(t){return!(!t||typeof t!="object"||!t.code||!uk(t.code)||!t.message||!Bs(t.message,!1))}function CAe(t){return!(si(t)||!Bs(t.method,!1))}function SAe(t){return!(si(t)||si(t.result)&&si(t.error)||!uk(t.id)||!Bs(t.jsonrpc,!1))}function IAe(t){return!(si(t)||!Bs(t.name,!1))}function R7(t,e){return!(!C6(e)||!Mee(t).includes(e))}function TAe(t,e,r){return Bs(r,!1)?sAe(t,e).includes(r):!1}function NAe(t,e,r){return Bs(r,!1)?iAe(t,e).includes(r):!1}function O7(t,e,r){let n=null;const s=PAe(t),i=RAe(e),o=Object.keys(s),a=Object.keys(i),c=k7(Object.keys(t)),u=k7(Object.keys(e)),l=c.filter(d=>!u.includes(d));return l.length&&(n=Fe("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(e).toString()}`)),e0(o,a)||(n=Fe("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||n)return;const f=qy(e[d].accounts);f.includes(d)||(n=Fe("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${f.toString()}`))}),o.forEach(d=>{n||(e0(s[d].methods,i[d].methods)?e0(s[d].events,i[d].events)||(n=Fe("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${d}`)):n=Fe("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${d}`))}),n}function PAe(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(s=>{e[s]={methods:t[r].methods,events:t[r].events}})}),e}function k7(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function RAe(t){const e={};return Object.keys(t).forEach(r=>{r.includes(":")?e[r]=t[r]:qy(t[r].accounts)?.forEach(s=>{e[s]={accounts:t[r].accounts.filter(i=>i.includes(`${s}:`)),methods:t[r].methods,events:t[r].events}})}),e}function OAe(t,e){return uk(t)&&t<=e.max&&t>=e.min}function B7(){const t=BE();return new Promise(e=>{switch(t){case rc.browser:e(kAe());break;case rc.reactNative:e(BAe());break;case rc.node:e(UAe());break;default:e(!0)}})}function kAe(){return $y()&&navigator?.onLine}async function BAe(){return Uh()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function UAe(){return!0}function MAe(t){switch(BE()){case rc.browser:DAe(t);break;case rc.reactNative:jAe(t);break}}function DAe(t){!Uh()&&$y()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function jAe(t){Uh()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function LAe(){var t;return $y()&&li.getDocument()?((t=li.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const bN={};class Pb{static get(e){return bN[e]}static set(e,r){bN[e]=r}static delete(e){delete bN[e]}}function FAe(t){const e=Zn.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function $Ae({publicKey:t,signature:e,payload:r}){var n;const s=z8(r.method),i=128|parseInt(((n=r.version)==null?void 0:n.toString())||"4"),o=zAe(r.address),a=r.era==="00"?new Uint8Array([0]):z8(r.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(r.nonce,16),u=new Uint8Array([c&255,c>>8&255]),l=BigInt(`0x${HAe(r.tip)}`),d=VAe(l),f=new Uint8Array([0,...t,o,...e,...a,...u,...d,...s]),p=WAe(f.length+1);return new Uint8Array([...p,i,...f])}function qAe(t){const e=z8(t),r=OQ.blake2b(e,void 0,32);return"0x"+Buffer.from(r).toString("hex")}function z8(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function HAe(t){return t.startsWith("0x")?t.slice(2):t}function zAe(t){const e=Zn.decode(t)[0];return e===42?0:e===60?2:1}function WAe(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function VAe(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function GAe(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),r=FAe(t.transaction.address),n=$Ae({publicKey:r,signature:e,payload:t.transaction}),s=Buffer.from(n).toString("hex");return qAe(s)}function lk({logger:t,name:e}){const r=typeof t=="string"?E5({opts:{level:t,name:e}}).logger:t;return r.level=typeof t=="string"?t:t.level,r}const KAe="PARSE_ERROR",ZAe="INVALID_REQUEST",YAe="METHOD_NOT_FOUND",JAe="INVALID_PARAMS",Lee="INTERNAL_ERROR",dk="SERVER_ERROR",XAe=[-32700,-32600,-32601,-32602,-32603],x1={[KAe]:{code:-32700,message:"Parse error"},[ZAe]:{code:-32600,message:"Invalid Request"},[YAe]:{code:-32601,message:"Method not found"},[JAe]:{code:-32602,message:"Invalid params"},[Lee]:{code:-32603,message:"Internal error"},[dk]:{code:-32e3,message:"Server error"}},Fee=dk;function QAe(t){return XAe.includes(t)}function U7(t){return Object.keys(x1).includes(t)?x1[t]:x1[Fee]}function exe(t){const e=Object.values(x1).find(r=>r.code===t);return e||x1[Fee]}function $ee(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var wN={},ed={},M7;function txe(){if(M7)return ed;M7=1,Object.defineProperty(ed,"__esModule",{value:!0}),ed.isBrowserCryptoAvailable=ed.getSubtleCrypto=ed.getBrowerCrypto=void 0;function t(){return wu?.crypto||wu?.msCrypto||{}}ed.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}ed.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return ed.isBrowserCryptoAvailable=r,ed}var td={},D7;function rxe(){if(D7)return td;D7=1,Object.defineProperty(td,"__esModule",{value:!0}),td.isBrowser=td.isNode=td.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}td.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}td.isNode=e;function r(){return!t()&&!e()}return td.isBrowser=r,td}var j7;function nxe(){return j7||(j7=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=CE;e.__exportStar(txe(),t),e.__exportStar(rxe(),t)})(wN)),wN}var sxe=nxe();function ni(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Ro(t=6){return BigInt(ni(t))}function Ms(t,e,r){return{id:r||ni(),jsonrpc:"2.0",method:t,params:e}}function Rl(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Hy(t,e,r){return{id:t,jsonrpc:"2.0",error:ixe(e)}}function ixe(t,e){return typeof t>"u"?U7(Lee):(typeof t=="string"&&(t=Object.assign(Object.assign({},U7(dk)),{message:t})),QAe(t.code)&&(t=exe(t.code)),t)}let oxe=class{},axe=class extends oxe{constructor(){super()}},cxe=class extends axe{constructor(e){super()}};const uxe="^https?:",lxe="^wss?:";function dxe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function qee(t,e){const r=dxe(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function L7(t){return qee(t,uxe)}function F7(t){return qee(t,lxe)}function fxe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Hee(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function zy(t){return Hee(t)&&"method"in t}function W0(t){return Hee(t)&&(Vs(t)||gs(t))}function Vs(t){return"result"in t}function gs(t){return"error"in t}let Fo=class extends cxe{constructor(e){super(e),this.events=new Ys.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Ms(e.method,e.params||[],e.id||Ro().toString()),r)}async requestStrict(e,r){return new Promise(async(n,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{gs(i)?s(i.error):n(i.result)});try{await this.connection.send(e,r)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),W0(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const hxe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),pxe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",$7=t=>t.split("?")[0],q7=10,gxe=hxe();let zee=class{constructor(e){if(this.url=e,this.events=new Ys.EventEmitter,this.registering=!1,!F7(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Lc(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!F7(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const s=sxe.isReactNative()?void 0:{rejectUnauthorized:!fxe(e)},i=new gxe(e,[],s);pxe()?i.onerror=o=>{const a=o;n(this.emitError(a.error))}:i.on("error",o=>{n(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),r(i)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Xd(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=Hy(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return $ee(e,$7(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>q7&&this.events.setMaxListeners(q7)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${$7(this.url)}`));return this.events.emit("register_error",r),r}};var mxe={};const Wee="wc",Vee=2,W8="core",Ol=`${Wee}@2:${W8}:`,yxe={logger:"error"},bxe={database:":memory:"},wxe="crypto",H7="client_ed25519_seed",vxe=he.ONE_DAY,Exe="keychain",_xe="0.3",Axe="messages",xxe="0.3",Cxe=he.SIX_HOURS,Sxe="publisher",Gee="irn",Ixe="error",Kee="wss://relay.walletconnect.org",Txe="relayer",Os={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Nxe="_subscription",wc={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Pxe=.1,V8="2.23.0",qn={link_mode:"link_mode",relay:"relay"},fI={inbound:"inbound",outbound:"outbound"},Rxe="0.3",Oxe="WALLETCONNECT_CLIENT_ID",z7="WALLETCONNECT_LINK_MODE_APPS",za={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},kxe="subscription",Bxe="0.3",Uxe="pairing",Mxe="0.3",Rb={wc_pairingDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:he.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:he.ONE_DAY,prompt:!1,tag:0},res:{ttl:he.ONE_DAY,prompt:!1,tag:0}}},$p={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},tu={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Dxe="history",jxe="0.3",Lxe="expirer",Rc={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Fxe="0.3",$xe="verify-api",qxe="https://verify.walletconnect.com",Zee="https://verify.walletconnect.org",C1=Zee,Hxe=`${C1}/v3`,zxe=[qxe,Zee],Wxe="echo",Vxe="https://echo.walletconnect.com",al={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Cd={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ru={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},op={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},ap={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Ob={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Gxe=.1,Kxe="event-client",Zxe=86400,Yxe="https://pulse.walletconnect.org/batch";function Jxe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var h=0,y=0,E=0,S=g.length;E!==S&&g[E]===0;)E++,h++;for(var C=(S-E)*l+1>>>0,_=new Uint8Array(C);E!==S;){for(var T=g[E],P=0,D=C-1;(T!==0||P<y)&&D!==-1;D--,P++)T+=256*_[D]>>>0,_[D]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");y=P,E++}for(var F=C-y;F!==C&&_[F]===0;)F++;for(var I=c.repeat(h);F<C;++F)I+=t.charAt(_[F]);return I}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var h=0;if(g[h]!==" "){for(var y=0,E=0;g[h]===c;)y++,h++;for(var S=(g.length-h)*u+1>>>0,C=new Uint8Array(S);g[h];){var _=r[g.charCodeAt(h)];if(_===255)return;for(var T=0,P=S-1;(_!==0||T<E)&&P!==-1;P--,T++)_+=a*C[P]>>>0,C[P]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");E=T,h++}if(g[h]!==" "){for(var D=S-E;D!==S&&C[D]===0;)D++;for(var F=new Uint8Array(y+(S-D)),I=y;D!==S;)F[I++]=C[D++];return F}}}function p(g){var h=f(g);if(h)return h;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:p}}var Xxe=Jxe,Qxe=Xxe;const Yee=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},eCe=t=>new TextEncoder().encode(t),tCe=t=>new TextDecoder().decode(t);let rCe=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},nCe=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Jee(this,e)}},sCe=class{constructor(e){this.decoders=e}or(e){return Jee(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const Jee=(t,e)=>new sCe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let iCe=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new rCe(e,r,n),this.decoder=new nCe(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const $5=({name:t,prefix:e,encode:r,decode:n})=>new iCe(t,e,r,n),LE=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=Qxe(r,e);return $5({prefix:t,name:e,encode:n,decode:i=>Yee(s(i))})},oCe=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},aCe=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Di=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>$5({prefix:e,name:t,encode(s){return aCe(s,n,r)},decode(s){return oCe(s,n,r,t)}}),cCe=$5({prefix:"\0",name:"identity",encode:t=>tCe(t),decode:t=>eCe(t)});var uCe=Object.freeze({__proto__:null,identity:cCe});const lCe=Di({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var dCe=Object.freeze({__proto__:null,base2:lCe});const fCe=Di({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var hCe=Object.freeze({__proto__:null,base8:fCe});const pCe=LE({prefix:"9",name:"base10",alphabet:"0123456789"});var gCe=Object.freeze({__proto__:null,base10:pCe});const mCe=Di({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),yCe=Di({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var bCe=Object.freeze({__proto__:null,base16:mCe,base16upper:yCe});const wCe=Di({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vCe=Di({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ECe=Di({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_Ce=Di({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ACe=Di({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),xCe=Di({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),CCe=Di({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),SCe=Di({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ICe=Di({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var TCe=Object.freeze({__proto__:null,base32:wCe,base32upper:vCe,base32pad:ECe,base32padupper:_Ce,base32hex:ACe,base32hexupper:xCe,base32hexpad:CCe,base32hexpadupper:SCe,base32z:ICe});const NCe=LE({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),PCe=LE({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var RCe=Object.freeze({__proto__:null,base36:NCe,base36upper:PCe});const OCe=LE({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),kCe=LE({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var BCe=Object.freeze({__proto__:null,base58btc:OCe,base58flickr:kCe});const UCe=Di({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),MCe=Di({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),DCe=Di({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),jCe=Di({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var LCe=Object.freeze({__proto__:null,base64:UCe,base64pad:MCe,base64url:DCe,base64urlpad:jCe});const Xee=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),FCe=Xee.reduce((t,e,r)=>(t[r]=e,t),[]),$Ce=Xee.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function qCe(t){return t.reduce((e,r)=>(e+=FCe[r],e),"")}function HCe(t){const e=[];for(const r of t){const n=$Ce[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const zCe=$5({prefix:"ðŸš€",name:"base256emoji",encode:qCe,decode:HCe});var WCe=Object.freeze({__proto__:null,base256emoji:zCe}),VCe=Qee,W7=128,GCe=-128,KCe=Math.pow(2,31);function Qee(t,e,r){e=e||[],r=r||0;for(var n=r;t>=KCe;)e[r++]=t&255|W7,t/=128;for(;t&GCe;)e[r++]=t&255|W7,t>>>=7;return e[r]=t|0,Qee.bytes=r-n+1,e}var ZCe=G8,YCe=128,V7=127;function G8(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw G8.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&V7)<<s:(o&V7)*Math.pow(2,s),s+=7}while(o>=YCe);return G8.bytes=i-n,r}var JCe=Math.pow(2,7),XCe=Math.pow(2,14),QCe=Math.pow(2,21),eSe=Math.pow(2,28),tSe=Math.pow(2,35),rSe=Math.pow(2,42),nSe=Math.pow(2,49),sSe=Math.pow(2,56),iSe=Math.pow(2,63),oSe=function(t){return t<JCe?1:t<XCe?2:t<QCe?3:t<eSe?4:t<tSe?5:t<rSe?6:t<nSe?7:t<sSe?8:t<iSe?9:10},aSe={encode:VCe,decode:ZCe,encodingLength:oSe},ete=aSe;const G7=(t,e,r=0)=>(ete.encode(t,e,r),e),K7=t=>ete.encodingLength(t),K8=(t,e)=>{const r=e.byteLength,n=K7(t),s=n+K7(r),i=new Uint8Array(s+r);return G7(t,i,0),G7(r,i,n),i.set(e,s),new cSe(t,r,e,i)};let cSe=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};const tte=({name:t,code:e,encode:r})=>new uSe(t,e,r);let uSe=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?K8(this.code,r):r.then(n=>K8(this.code,n))}else throw Error("Unknown type, must be binary type")}};const rte=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),lSe=tte({name:"sha2-256",code:18,encode:rte("SHA-256")}),dSe=tte({name:"sha2-512",code:19,encode:rte("SHA-512")});var fSe=Object.freeze({__proto__:null,sha256:lSe,sha512:dSe});const nte=0,hSe="identity",ste=Yee,pSe=t=>K8(nte,ste(t)),gSe={code:nte,name:hSe,encode:ste,digest:pSe};var mSe=Object.freeze({__proto__:null,identity:gSe});new TextEncoder,new TextDecoder;const Z7={...uCe,...dCe,...hCe,...gCe,...bCe,...TCe,...RCe,...BCe,...LCe,...WCe};({...fSe,...mSe});function ite(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function ySe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ite(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function ote(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Y7=ote("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),vN=ote("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=ySe(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),bSe={utf8:Y7,"utf-8":Y7,hex:Z7.base16,latin1:vN,ascii:vN,binary:vN,...Z7};function wSe(t,e="utf8"){const r=bSe[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ite(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var vSe=Object.defineProperty,ESe=(t,e,r)=>e in t?vSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ju=(t,e,r)=>ESe(t,typeof e!="symbol"?e+"":e,r);let _Se=class{constructor(e,r){this.core=e,this.logger=r,Ju(this,"keychain",new Map),Ju(this,"name",Exe),Ju(this,"version",_xe),Ju(this,"initialized",!1),Ju(this,"storagePrefix",Ol),Ju(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),Ju(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),Ju(this,"set",async(n,s)=>{this.isInitialized(),this.keychain.set(n,s),await this.persist()}),Ju(this,"get",n=>{this.isInitialized();const s=this.keychain.get(n);if(typeof s>"u"){const{message:i}=Fe("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(i)}return s}),Ju(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=Aa(r,this.name)}get context(){return _a(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,R8(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?O8(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var ASe=Object.defineProperty,xSe=(t,e,r)=>e in t?ASe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Js=(t,e,r)=>xSe(t,typeof e!="symbol"?e+"":e,r);let CSe=class{constructor(e,r,n){this.core=e,this.logger=r,Js(this,"name",wxe),Js(this,"keychain"),Js(this,"randomSessionIdentifier",H8()),Js(this,"initialized",!1),Js(this,"clientId"),Js(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Js(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Js(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;const s=await this.getClientSeed(),i=o6(s),o=U4(i.publicKey);return this.clientId=o,o}),Js(this,"generateKeyPair",()=>{this.isInitialized();const s=P2e();return this.setPrivateKey(s.publicKey,s.privateKey)}),Js(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=o6(i),a=this.randomSessionIdentifier;return await XJ(a,s,vxe,o)}),Js(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=R2e(a,i);return this.setSymKey(c,o)}),Js(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||dI(s);return await this.keychain.set(o,s),o}),Js(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Js(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Js(this,"encode",async(s,i,o)=>{this.isInitialized();const a=Uee(o),c=Lc(i);if(E7(a))return B2e(c,o?.encoding);if(v7(a)){const f=a.senderPublicKey,p=a.receiverPublicKey;s=await this.generateSharedKey(f,p)}const u=this.getSymKey(s),{type:l,senderPublicKey:d}=a;return O2e({type:l,symKey:u,message:c,senderPublicKey:d,encoding:o?.encoding})}),Js(this,"decode",async(s,i,o)=>{this.isInitialized();const a=M2e(i,o);if(E7(a)){const c=U2e(i,o?.encoding);return Xd(c)}if(v7(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;s=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(s),u=k2e({symKey:c,encoded:i,encoding:o?.encoding});return Xd(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Js(this,"getPayloadType",(s,i=la)=>{const o=jv({encoded:s,encoding:i});return S0(o.type)}),Js(this,"getPayloadSenderPublicKey",(s,i=la)=>{const o=jv({encoded:s,encoding:i});return o.senderPublicKey?_n(o.senderPublicKey,Bo):void 0}),this.core=e,this.logger=Aa(r,this.name),this.keychain=n||new _Se(this.core,this.logger)}get context(){return _a(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(H7)}catch{e=H8(),await this.keychain.set(H7,e)}return wSe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var SSe=Object.defineProperty,ISe=Object.defineProperties,TSe=Object.getOwnPropertyDescriptors,J7=Object.getOwnPropertySymbols,NSe=Object.prototype.hasOwnProperty,PSe=Object.prototype.propertyIsEnumerable,Z8=(t,e,r)=>e in t?SSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,RSe=(t,e)=>{for(var r in e||(e={}))NSe.call(e,r)&&Z8(t,r,e[r]);if(J7)for(var r of J7(e))PSe.call(e,r)&&Z8(t,r,e[r]);return t},OSe=(t,e)=>ISe(t,TSe(e)),ka=(t,e,r)=>Z8(t,typeof e!="symbol"?e+"":e,r);let kSe=class extends Ape{constructor(e,r){super(e,r),this.logger=e,this.core=r,ka(this,"messages",new Map),ka(this,"messagesWithoutClientAck",new Map),ka(this,"name",Axe),ka(this,"version",xxe),ka(this,"initialized",!1),ka(this,"storagePrefix",Ol),ka(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),ka(this,"set",async(n,s,i)=>{this.isInitialized();const o=Bc(s);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(n,a),i===fI.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,OSe(RSe({},c),{[o]:s}))}return await this.persist(),o}),ka(this,"get",n=>{this.isInitialized();let s=this.messages.get(n);return typeof s>"u"&&(s={}),s}),ka(this,"getWithoutAck",n=>{this.isInitialized();const s={};for(const i of n){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),ka(this,"has",(n,s)=>{this.isInitialized();const i=this.get(n),o=Bc(s);return typeof i[o]<"u"}),ka(this,"ack",async(n,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(n);if(typeof i>"u")return;const o=Bc(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,i),await this.persist()}),ka(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=Aa(e,this.name),this.core=r}get context(){return _a(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,R8(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,R8(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?O8(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?O8(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var BSe=Object.defineProperty,USe=Object.defineProperties,MSe=Object.getOwnPropertyDescriptors,X7=Object.getOwnPropertySymbols,DSe=Object.prototype.hasOwnProperty,jSe=Object.prototype.propertyIsEnumerable,Y8=(t,e,r)=>e in t?BSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xg=(t,e)=>{for(var r in e||(e={}))DSe.call(e,r)&&Y8(t,r,e[r]);if(X7)for(var r of X7(e))jSe.call(e,r)&&Y8(t,r,e[r]);return t},Q7=(t,e)=>USe(t,MSe(e)),vc=(t,e,r)=>Y8(t,typeof e!="symbol"?e+"":e,r);let LSe=class extends xpe{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,vc(this,"events",new Ys.EventEmitter),vc(this,"name",Sxe),vc(this,"queue",new Map),vc(this,"publishTimeout",he.toMiliseconds(he.ONE_MINUTE)),vc(this,"initialPublishTimeout",he.toMiliseconds(he.ONE_SECOND*15)),vc(this,"needsTransportRestart",!1),vc(this,"publish",async(n,s,i)=>{var o,a,c,u,l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:i}});const d=i?.ttl||Cxe,f=i?.prompt||!1,p=i?.tag||0,g=i?.id||Ro().toString(),h=km(x6().protocol),y={id:g,method:i?.publishMethod||h.publish,params:xg({topic:n,message:s,ttl:d,prompt:f,tag:p,attestation:i?.attestation},i?.tvf)},E=`Failed to publish payload, please try again. id:${g} tag:${p}`;try{si((o=y.params)==null?void 0:o.prompt)&&((a=y.params)==null||delete a.prompt),si((c=y.params)==null?void 0:c.tag)&&((u=y.params)==null||delete u.tag);const S=new Promise(async C=>{const _=({id:P})=>{var D;((D=y.id)==null?void 0:D.toString())===P.toString()&&(this.removeRequestFromQueue(P),this.relayer.events.removeListener(Os.publish,_),C())};this.relayer.events.on(Os.publish,_);const T=yl(new Promise((P,D)=>{this.rpcPublish(y,i).then(P).catch(F=>{this.logger.warn(F,F?.message),D(F)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${g} tag:${p}`);try{await T,this.events.removeListener(Os.publish,_)}catch(P){this.queue.set(g,{request:y,opts:i,attempt:1}),this.logger.warn(P,P?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:g,topic:n,message:s,opts:i}}),await yl(S,this.publishTimeout,E)}catch(S){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(S),(l=i?.internal)!=null&&l.throwOnFailedPublish)throw S}finally{this.queue.delete(g)}}),vc(this,"publishCustom",async n=>{var s,i,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:n});const{payload:u,opts:l={}}=n,{attestation:d,tvf:f,publishMethod:p,prompt:g,tag:h,ttl:y=he.FIVE_MINUTES}=l,E=l.id||Ro().toString(),S=km(x6().protocol),C=p||S.publish,_={id:E,method:C,params:xg(Q7(xg({},u),{ttl:y,prompt:g,tag:h,attestation:d}),f)},T=`Failed to publish custom payload, please try again. id:${E} tag:${h}`;try{si((s=_.params)==null?void 0:s.prompt)&&((i=_.params)==null||delete i.prompt),si((o=_.params)==null?void 0:o.tag)&&((a=_.params)==null||delete a.tag);const P=new Promise(async D=>{const F=({id:U})=>{var L;((L=_.id)==null?void 0:L.toString())===U.toString()&&(this.removeRequestFromQueue(U),this.relayer.events.removeListener(Os.publish,F),D())};this.relayer.events.on(Os.publish,F);const I=yl(new Promise((U,L)=>{this.rpcPublish(_,l).then(U).catch(B=>{this.logger.warn(B,B?.message),L(B)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${C} id:${E} tag:${h}`);try{await I,this.events.removeListener(Os.publish,F)}catch(U){this.queue.set(E,{request:_,opts:l,attempt:1}),this.logger.warn(U,U?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:E,payload:u,opts:l}}),await yl(P,this.publishTimeout,T)}catch(P){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(P),(c=l?.internal)!=null&&c.throwOnFailedPublish)throw P}finally{this.queue.delete(E)}}),vc(this,"on",(n,s)=>{this.events.on(n,s)}),vc(this,"once",(n,s)=>{this.events.once(n,s)}),vc(this,"off",(n,s)=>{this.events.off(n,s)}),vc(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.relayer=e,this.logger=Aa(r,this.name),this.registerEventListeners()}get context(){return _a(this.logger)}async rpcPublish(e,r){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const n=await this.relayer.request(e);return this.relayer.events.emit(Os.publish,xg(xg({},e),r)),this.logger.debug("Successfully Published Payload"),n}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{var n;const s=e.attempt+1;this.queue.set(r,Q7(xg({},e),{attempt:s})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(n=e.request.params)==null?void 0:n.tag}, attempt: ${s}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(ac.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Os.connection_stalled);return}this.checkQueue()}),this.relayer.on(Os.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}};var FSe=Object.defineProperty,$Se=(t,e,r)=>e in t?FSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Cg=(t,e,r)=>$Se(t,typeof e!="symbol"?e+"":e,r);let qSe=class{constructor(){Cg(this,"map",new Map),Cg(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),Cg(this,"get",e=>this.map.get(e)||[]),Cg(this,"exists",(e,r)=>this.get(e).includes(r)),Cg(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const s=n.filter(i=>i!==r);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Cg(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}};var HSe=Object.defineProperty,zSe=Object.defineProperties,WSe=Object.getOwnPropertyDescriptors,eD=Object.getOwnPropertySymbols,VSe=Object.prototype.hasOwnProperty,GSe=Object.prototype.propertyIsEnumerable,J8=(t,e,r)=>e in t?HSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kb=(t,e)=>{for(var r in e||(e={}))VSe.call(e,r)&&J8(t,r,e[r]);if(eD)for(var r of eD(e))GSe.call(e,r)&&J8(t,r,e[r]);return t},EN=(t,e)=>zSe(t,WSe(e)),xn=(t,e,r)=>J8(t,typeof e!="symbol"?e+"":e,r);let KSe=class extends Ipe{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,xn(this,"subscriptions",new Map),xn(this,"topicMap",new qSe),xn(this,"events",new Ys.EventEmitter),xn(this,"name",kxe),xn(this,"version",Bxe),xn(this,"pending",new Map),xn(this,"cached",[]),xn(this,"initialized",!1),xn(this,"storagePrefix",Ol),xn(this,"subscribeTimeout",he.toMiliseconds(he.ONE_MINUTE)),xn(this,"initialSubscribeTimeout",he.toMiliseconds(he.ONE_SECOND*15)),xn(this,"clientId"),xn(this,"batchSubscribeTopicsLimit",500),xn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),xn(this,"subscribe",async(n,s)=>{var i;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}});try{const o=x6(s),a={topic:n,relay:o,transportType:s?.transportType};(i=s?.internal)!=null&&i.skipSubscribe||this.pending.set(n,a);const c=await this.rpcSubscribe(n,o,s);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),xn(this,"unsubscribe",async(n,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(n,s.id,s):await this.unsubscribeByTopic(n,s)}),xn(this,"isSubscribed",n=>new Promise(s=>{s(this.topicMap.topics.includes(n))})),xn(this,"isKnownTopic",n=>new Promise(s=>{s(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(i=>i.topic===n))})),xn(this,"on",(n,s)=>{this.events.on(n,s)}),xn(this,"once",(n,s)=>{this.events.once(n,s)}),xn(this,"off",(n,s)=>{this.events.off(n,s)}),xn(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),xn(this,"start",async()=>{await this.onConnect()}),xn(this,"stop",async()=>{await this.onDisconnect()}),xn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),xn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(s=>{n.push(s)}),await this.batchSubscribe(n)}),xn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(ac.pulse,async()=>{await this.checkPending()}),this.events.on(za.created,async n=>{const s=za.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()}),this.events.on(za.deleted,async n=>{const s=za.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()})}),this.relayer=e,this.logger=Aa(r,this.name),this.clientId=""}get context(){return _a(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async s=>await this.unsubscribeById(e,s,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const s=x6(n);await this.restartToComplete({topic:e,id:r,relay:s}),await this.rpcUnsubscribe(e,r,s);const i=Gn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,r,n){var s,i;const o=await this.getSubscriptionId(e);if((s=n?.internal)!=null&&s.skipSubscribe)return o;(!n||n?.transportType===qn.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const a={method:km(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(i=n?.internal)==null?void 0:i.throwOnFailedPublish;try{if(n?.transportType===qn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(d=>this.logger.warn(d))},he.toMiliseconds(he.ONE_SECOND)),o;const u=new Promise(async d=>{const f=p=>{p.topic===e&&(this.events.removeListener(za.created,f),d(p.id))};this.events.on(za.created,f);try{const p=await yl(new Promise((g,h)=>{this.relayer.request(a).catch(y=>{this.logger.warn(y,y?.message),h(y)}).then(g)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(za.created,f),d(p)}catch{}}),l=await yl(u,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return l?o:null}catch(u){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Os.connection_stalled),c)throw u}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:km(r.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await yl(new Promise(s=>{this.relayer.request(n).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Os.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:km(r.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s;try{s=await await yl(new Promise((i,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Os.connection_stalled)}return s}rpcUnsubscribe(e,r,n){const s={method:km(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,r){this.setSubscription(e,EN(kb({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,kb({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,kb({},r)),this.topicMap.set(r.topic,e),this.events.emit(za.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=Fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(za.deleted,EN(kb({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(za.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(za.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(r=>{var n;return r.topic===((n=this.subscriptions.get(r.id))==null?void 0:n.topic)})){const{message:r}=Fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>EN(kb({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await Yve(he.toMiliseconds(he.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Bc(e+await this.getClientId())}};var ZSe=Object.defineProperty,tD=Object.getOwnPropertySymbols,YSe=Object.prototype.hasOwnProperty,JSe=Object.prototype.propertyIsEnumerable,X8=(t,e,r)=>e in t?ZSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,rD=(t,e)=>{for(var r in e||(e={}))YSe.call(e,r)&&X8(t,r,e[r]);if(tD)for(var r of tD(e))JSe.call(e,r)&&X8(t,r,e[r]);return t},Dr=(t,e,r)=>X8(t,typeof e!="symbol"?e+"":e,r);let XSe=class extends Cpe{constructor(e){var r;super(e),Dr(this,"protocol","wc"),Dr(this,"version",2),Dr(this,"core"),Dr(this,"logger"),Dr(this,"events",new Ys.EventEmitter),Dr(this,"provider"),Dr(this,"messages"),Dr(this,"subscriber"),Dr(this,"publisher"),Dr(this,"name",Txe),Dr(this,"transportExplicitlyClosed",!1),Dr(this,"initialized",!1),Dr(this,"connectionAttemptInProgress",!1),Dr(this,"relayUrl"),Dr(this,"projectId"),Dr(this,"packageName"),Dr(this,"bundleId"),Dr(this,"hasExperiencedNetworkDisruption",!1),Dr(this,"pingTimeout"),Dr(this,"heartBeatTimeout",he.toMiliseconds(he.THIRTY_SECONDS+he.FIVE_SECONDS)),Dr(this,"reconnectTimeout"),Dr(this,"connectPromise"),Dr(this,"reconnectInProgress",!1),Dr(this,"requestsInFlight",[]),Dr(this,"connectTimeout",he.toMiliseconds(he.ONE_SECOND*15)),Dr(this,"request",async n=>{var s,i;this.logger.debug("Publishing Request Payload");const o=n.id||Ro().toString();await this.toEstablishConnection();try{this.logger.trace({id:o,method:n.method,topic:(s=n.params)==null?void 0:s.topic},"relayer.request - publishing...");const a=`${o}:${((i=n.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(a);const c=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(u=>u!==a),c}catch(a){throw this.logger.debug(`Failed to Publish Request: ${o}`),a}}),Dr(this,"resetPingTimeout",()=>{b6()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,s,i,o;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(o=(i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null?void 0:i.terminate)==null||o.call(i)}catch(a){this.logger.warn(a,a?.message)}},this.heartBeatTimeout))}),Dr(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Dr(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected ðŸ›œ"),this.startPingTimeout(),this.events.emit(Os.connect)}),Dr(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected ðŸ›‘"),this.requestsInFlight=[],this.onProviderDisconnect()}),Dr(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Os.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Dr(this,"registerProviderListeners",()=>{this.provider.on(wc.payload,this.onPayloadHandler),this.provider.on(wc.connect,this.onConnectHandler),this.provider.on(wc.disconnect,this.onDisconnectHandler),this.provider.on(wc.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=lk({logger:(r=e.logger)!=null?r:Ixe,name:this.name}),this.messages=new kSe(this.logger,e.core),this.subscriber=new KSe(this,this.logger),this.publisher=new LSe(this,this.logger),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Kee,Bve()?this.packageName=qM():Uve()&&(this.bundleId=qM()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return _a(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:qn.relay},fI.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,r){var n,s,i;this.isInitialized(),(!(r!=null&&r.transportType)||r?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((n=r?.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(s=r?.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const u=l=>{l.topic===e&&(this.subscriber.off(za.created,u),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(za.created,u)}),new Promise(async(l,d)=>{a=await this.subscriber.subscribe(e,rD({internal:{throwOnFailedPublish:o}},r)).catch(f=>{o&&d(f)})||a,l()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await yl(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await B7())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,s)=>n.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const s=Ps(he.FIVE_MINUTES),i={topic:n,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,i)}this.events.emit(Os.message,e),await this.recordMessageEvent(e,fI.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(wc.disconnect,i),await yl(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(wc.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(wc.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(wc.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const s=n;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,he.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,s,i;if(b6())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Fo(new zee(Fve({sdkVersion:V8,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:s}=e;await this.messages.set(n,s,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const s=this.messages.has(r,n);return s&&this.logger.warn(`Ignoring duplicate message: ${n}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),zy(e)){if(!e.method.endsWith(Nxe))return;const r=e.params,{topic:n,message:s,publishedAt:i,attestation:o}=r.data,a={topic:n,message:s,publishedAt:i,transportType:qn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(rD({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else W0(e)&&this.events.emit(Os.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,fI.inbound),this.events.emit(Os.message,e))}async acknowledgePayload(e){const r=Rl(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(wc.payload,this.onPayloadHandler),this.provider.off(wc.connect,this.onConnectHandler),this.provider.off(wc.disconnect,this.onDisconnectHandler),this.provider.off(wc.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await B7();MAe(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(ac.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&LAe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(r){this.logger.warn(r,r?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Os.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},he.toMiliseconds(Pxe)))))}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}};function QSe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function nD(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function sD(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const eIe="[object RegExp]",tIe="[object String]",rIe="[object Number]",nIe="[object Boolean]",iD="[object Arguments]",sIe="[object Symbol]",iIe="[object Date]",oIe="[object Map]",aIe="[object Set]",cIe="[object Array]",uIe="[object Function]",lIe="[object ArrayBuffer]",_N="[object Object]",dIe="[object Error]",fIe="[object DataView]",hIe="[object Uint8Array]",pIe="[object Uint8ClampedArray]",gIe="[object Uint16Array]",mIe="[object Uint32Array]",yIe="[object BigUint64Array]",bIe="[object Int8Array]",wIe="[object Int16Array]",vIe="[object Int32Array]",EIe="[object BigInt64Array]",_Ie="[object Float32Array]",AIe="[object Float64Array]";function xIe(){}function oD(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function CIe(t,e,r){return d1(t,e,void 0,void 0,void 0,void 0,r)}function d1(t,e,r,n,s,i,o){const a=o(t,e,r,n,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return S1(t,e,i,o)}return S1(t,e,i,o)}function S1(t,e,r,n){if(Object.is(t,e))return!0;let s=sD(t),i=sD(e);if(s===iD&&(s=_N),i===iD&&(i=_N),s!==i)return!1;switch(s){case tIe:return t.toString()===e.toString();case rIe:{const c=t.valueOf(),u=e.valueOf();return QSe(c,u)}case nIe:case iIe:case sIe:return Object.is(t.valueOf(),e.valueOf());case eIe:return t.source===e.source&&t.flags===e.flags;case uIe:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(s){case oIe:{if(t.size!==e.size)return!1;for(const[c,u]of t.entries())if(!e.has(c)||!d1(u,e.get(c),c,t,e,r,n))return!1;return!0}case aIe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),u=Array.from(e.values());for(let l=0;l<c.length;l++){const d=c[l],f=u.findIndex(p=>d1(d,p,void 0,t,e,r,n));if(f===-1)return!1;u.splice(f,1)}return!0}case cIe:case hIe:case pIe:case gIe:case mIe:case yIe:case bIe:case wIe:case vIe:case EIe:case _Ie:case AIe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!d1(t[c],e[c],c,t,e,r,n))return!1;return!0}case lIe:return t.byteLength!==e.byteLength?!1:S1(new Uint8Array(t),new Uint8Array(e),r,n);case fIe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:S1(new Uint8Array(t),new Uint8Array(e),r,n);case dIe:return t.name===e.name&&t.message===e.message;case _N:{if(!(S1(t.constructor,e.constructor,r,n)||oD(t)&&oD(e)))return!1;const c=[...Object.keys(t),...nD(t)],u=[...Object.keys(e),...nD(e)];if(c.length!==u.length)return!1;for(let l=0;l<c.length;l++){const d=c[l],f=t[d];if(!Object.hasOwn(e,d))return!1;const p=e[d];if(!d1(f,p,d,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function SIe(t,e){return CIe(t,e,xIe)}var IIe=Object.defineProperty,aD=Object.getOwnPropertySymbols,TIe=Object.prototype.hasOwnProperty,NIe=Object.prototype.propertyIsEnumerable,Q8=(t,e,r)=>e in t?IIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cD=(t,e)=>{for(var r in e||(e={}))TIe.call(e,r)&&Q8(t,r,e[r]);if(aD)for(var r of aD(e))NIe.call(e,r)&&Q8(t,r,e[r]);return t},Wo=(t,e,r)=>Q8(t,typeof e!="symbol"?e+"":e,r);let V0=class extends Spe{constructor(e,r,n,s=Ol,i=void 0){super(e,r,n,s),this.core=e,this.logger=r,this.name=n,Wo(this,"map",new Map),Wo(this,"version",Rxe),Wo(this,"cached",[]),Wo(this,"initialized",!1),Wo(this,"getKey"),Wo(this,"storagePrefix",Ol),Wo(this,"recentlyDeleted",[]),Wo(this,"recentlyDeletedLimit",200),Wo(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!si(o)?this.map.set(this.getKey(o),o):hAe(o)?this.map.set(o.id,o):pAe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Wo(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Wo(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Wo(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>SIe(a[c],o[c]))):this.values)),Wo(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=cD(cD({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Wo(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Aa(r,this.name),this.storagePrefix=s,this.getKey=i}get context(){return _a(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:s}=Fe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:n}=Fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=Fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var PIe=Object.defineProperty,RIe=(t,e,r)=>e in t?PIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fr=(t,e,r)=>RIe(t,typeof e!="symbol"?e+"":e,r);let OIe=class{constructor(e,r){this.core=e,this.logger=r,fr(this,"name",Uxe),fr(this,"version",Mxe),fr(this,"events",new Ly),fr(this,"pairings"),fr(this,"initialized",!1),fr(this,"storagePrefix",Ol),fr(this,"ignoredPayloadTypes",[Vd]),fr(this,"registeredMethods",[]),fr(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),fr(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),fr(this,"create",async n=>{this.isInitialized();const s=H8(),i=await this.core.crypto.setSymKey(s),o=Ps(he.FIVE_MINUTES),a={protocol:Gee},c={topic:i,expiry:o,relay:a,active:!1,methods:n?.methods},u=C7({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:n?.methods});return this.events.emit($p.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:n?.transportType,internal:n?.internal}),{topic:i,uri:u}}),fr(this,"pair",async n=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:n?.uri,trace:[al.pairing_started]}});this.isValidPair(n,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:u}=x7(n.uri);s.props.properties.topic=i,s.addTrace(al.pairing_uri_validation_success),s.addTrace(al.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(i)){if(l=this.pairings.get(i),s.addTrace(al.existing_pairing),l.active)throw s.setError(Cd.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(al.pairing_not_expired)}const d=c||Ps(he.FIVE_MINUTES),f={topic:i,relay:a,expiry:d,active:!1,methods:u};this.core.expirer.set(i,d),await this.pairings.set(i,f),s.addTrace(al.store_new_pairing),n.activatePairing&&await this.activate({topic:i}),this.events.emit($p.create,f),s.addTrace(al.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(al.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Cd.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(p){throw s.setError(Cd.subscribe_pairing_topic_failure),p}return s.addTrace(al.subscribe_pairing_topic_success),f}),fr(this,"activate",async({topic:n})=>{this.isInitialized();const s=Ps(he.FIVE_MINUTES);this.core.expirer.set(n,s),await this.pairings.update(n,{active:!0,expiry:s})}),fr(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=n;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Dp();this.events.once(mn("pairing_ping",i),({error:u})=>{u?c(u):a()}),await o()}}),fr(this,"updateExpiry",async({topic:n,expiry:s})=>{this.isInitialized(),await this.pairings.update(n,{expiry:s})}),fr(this,"updateMetadata",async({topic:n,metadata:s})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:s})}),fr(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),fr(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Gn("USER_DISCONNECTED")),await this.deletePairing(s))}),fr(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(s);return C7({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),fr(this,"sendRequest",async(n,s,i)=>{const o=Ms(s,i),a=await this.core.crypto.encode(n,o),c=Rb[s].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),fr(this,"sendResult",async(n,s,i)=>{const o=Rl(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=Rb[c].res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),fr(this,"sendError",async(n,s,i)=>{const o=Hy(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=Rb[c]?Rb[c].res:Rb.unregistered_method.res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),fr(this,"deletePairing",async(n,s)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Gn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),s?Promise.resolve():this.core.expirer.del(n)])}),fr(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(s=>dl(s.expiry));await Promise.all(n.map(s=>this.deletePairing(s.topic)))}),fr(this,"onRelayEventRequest",async n=>{const{topic:s,payload:i}=n;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),fr(this,"onRelayEventResponse",async n=>{const{topic:s,payload:i}=n,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),fr(this,"onPairingPingRequest",async(n,s)=>{const{id:i}=s;try{this.isValidPing({topic:n}),await this.sendResult(i,n,!0),this.events.emit($p.ping,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),fr(this,"onPairingPingResponse",(n,s)=>{const{id:i}=s;setTimeout(()=>{Vs(s)?this.events.emit(mn("pairing_ping",i),{}):gs(s)&&this.events.emit(mn("pairing_ping",i),{error:s.error})},500)}),fr(this,"onPairingDeleteRequest",async(n,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit($p.delete,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),fr(this,"onUnknownRpcMethodRequest",async(n,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Gn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,n,a),this.logger.error(a)}catch(a){await this.sendError(i,n,a),this.logger.error(a)}}),fr(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(Gn("WC_METHOD_UNSUPPORTED",n))}),fr(this,"isValidPair",(n,s)=>{var i;if(!ta(n)){const{message:a}=Fe("MISSING_OR_INVALID",`pair() params: ${n}`);throw s.setError(Cd.malformed_pairing_uri),new Error(a)}if(!fAe(n.uri)){const{message:a}=Fe("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw s.setError(Cd.malformed_pairing_uri),new Error(a)}const o=x7(n?.uri);if(!((i=o?.relay)!=null&&i.protocol)){const{message:a}=Fe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Cd.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Fe("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Cd.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&he.toMiliseconds(o?.expiryTimestamp)<Date.now()){s.setError(Cd.pairing_expired);const{message:a}=Fe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),fr(this,"isValidPing",async n=>{if(!ta(n)){const{message:i}=Fe("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),fr(this,"isValidDisconnect",async n=>{if(!ta(n)){const{message:i}=Fe("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),fr(this,"isValidPairingTopic",async n=>{if(!Bs(n,!1)){const{message:s}=Fe("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(s)}if(!this.pairings.keys.includes(n)){const{message:s}=Fe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(s)}if(dl(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:s}=Fe("EXPIRED",`pairing topic: ${n}`);throw new Error(s)}}),this.core=e,this.logger=Aa(r,this.name),this.pairings=new V0(this.core,this.logger,this.name,this.storagePrefix)}get context(){return _a(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Os.message,async e=>{const{topic:r,message:n,transportType:s}=e;if(this.pairings.keys.includes(r)&&s!==qn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const i=await this.core.crypto.decode(r,n);zy(i)?(this.core.history.set(r,i),await this.onRelayEventRequest({topic:r,payload:i})):W0(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id)),await this.core.relayer.messages.ack(r,n)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Rc.expired,async e=>{const{topic:r}=DQ(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit($p.expire,{topic:r}))})}};var kIe=Object.defineProperty,BIe=(t,e,r)=>e in t?kIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pi=(t,e,r)=>BIe(t,typeof e!="symbol"?e+"":e,r);let UIe=class extends _pe{constructor(e,r){super(e,r),this.core=e,this.logger=r,pi(this,"records",new Map),pi(this,"events",new Ys.EventEmitter),pi(this,"name",Dxe),pi(this,"version",jxe),pi(this,"cached",[]),pi(this,"initialized",!1),pi(this,"storagePrefix",Ol),pi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),pi(this,"set",(n,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:n,request:{method:s.method,params:s.params||null},chainId:i,expiry:Ps(he.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(tu.created,o)}),pi(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const s=await this.getRecord(n.id);typeof s.response>"u"&&(s.response=gs(n)?{error:n.error}:{result:n.result},this.records.set(s.id,s),this.persist(),this.events.emit(tu.updated,s))}),pi(this,"get",async(n,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:s}),await this.getRecord(s))),pi(this,"delete",(n,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===n){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(tu.deleted,i)}}),this.persist()}),pi(this,"exists",async(n,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===n:!1)),pi(this,"on",(n,s)=>{this.events.on(n,s)}),pi(this,"once",(n,s)=>{this.events.once(n,s)}),pi(this,"off",(n,s)=>{this.events.off(n,s)}),pi(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=Aa(r,this.name)}get context(){return _a(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Ms(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=Fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(tu.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=Fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(tu.created,e=>{const r=tu.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(tu.updated,e=>{const r=tu.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(tu.deleted,e=>{const r=tu.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(ac.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{he.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(tu.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var MIe=Object.defineProperty,DIe=(t,e,r)=>e in t?MIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Gi=(t,e,r)=>DIe(t,typeof e!="symbol"?e+"":e,r);let jIe=class extends Tpe{constructor(e,r){super(e,r),this.core=e,this.logger=r,Gi(this,"expirations",new Map),Gi(this,"events",new Ys.EventEmitter),Gi(this,"name",Lxe),Gi(this,"version",Fxe),Gi(this,"cached",[]),Gi(this,"initialized",!1),Gi(this,"storagePrefix",Ol),Gi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Gi(this,"has",n=>{try{const s=this.formatTarget(n);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Gi(this,"set",(n,s)=>{this.isInitialized();const i=this.formatTarget(n),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Rc.created,{target:i,expiration:o})}),Gi(this,"get",n=>{this.isInitialized();const s=this.formatTarget(n);return this.getExpiration(s)}),Gi(this,"del",n=>{if(this.isInitialized(),this.has(n)){const s=this.formatTarget(n),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Rc.deleted,{target:s,expiration:i})}}),Gi(this,"on",(n,s)=>{this.events.on(n,s)}),Gi(this,"once",(n,s)=>{this.events.once(n,s)}),Gi(this,"off",(n,s)=>{this.events.off(n,s)}),Gi(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=Aa(r,this.name)}get context(){return _a(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return $ve(e);if(typeof e=="number")return qve(e);const{message:r}=Fe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Rc.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=Fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=Fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;he.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Rc.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(ac.pulse,()=>this.checkExpirations()),this.events.on(Rc.created,e=>{const r=Rc.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Rc.expired,e=>{const r=Rc.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Rc.deleted,e=>{const r=Rc.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var LIe=Object.defineProperty,FIe=(t,e,r)=>e in t?LIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ts=(t,e,r)=>FIe(t,typeof e!="symbol"?e+"":e,r);let $Ie=class extends Npe{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,Ts(this,"name",$xe),Ts(this,"abortController"),Ts(this,"isDevEnv"),Ts(this,"verifyUrlV3",Hxe),Ts(this,"storagePrefix",Ol),Ts(this,"version",Vee),Ts(this,"publicKey"),Ts(this,"fetchPromise"),Ts(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&he.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Ts(this,"register",async s=>{if(!$y()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const u=li.getDocument(),l=this.startAbortTimer(he.ONE_SECOND*5),d=await new Promise((f,p)=>{const g=()=>{window.removeEventListener("message",y),u.body.removeChild(h),p("attestation aborted")};this.abortController.signal.addEventListener("abort",g);const h=u.createElement("iframe");h.src=c,h.style.display="none",h.addEventListener("error",g,{signal:this.abortController.signal});const y=E=>{if(E.data&&typeof E.data=="string")try{const S=JSON.parse(E.data);if(S.type==="verify_attestation"){if(hy(S.attestation).payload.id!==o)return;clearInterval(l),u.body.removeChild(h),this.abortController.signal.removeEventListener("abort",g),window.removeEventListener("message",y),f(S.attestation===null?"":S.attestation)}}catch(S){this.logger.warn(S)}};u.body.appendChild(h),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug(d,"jwt attestation"),d}catch(u){this.logger.warn(u)}return""}),Ts(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(hy(i).payload.id!==a)return;const u=await this.isValidJwtAttestation(i);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const c=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(o,c)}),Ts(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(he.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Ts(this,"getVerifyUrl",s=>{let i=s||C1;return zxe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${C1}`),i=C1),i}),Ts(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(he.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Ts(this,"persistPublicKey",async s=>{this.logger.debug(s,"persisting public key to local storage"),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Ts(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Ts(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Ts(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Ts(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Ts(this,"validateAttestation",(s,i)=>{const o=j2e(s,i.publicKey),a={hasExpired:he.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Aa(r,this.name),this.abortController=new AbortController,this.isDevEnv=Q4(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return _a(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),he.toMiliseconds(e))}};var qIe=Object.defineProperty,HIe=(t,e,r)=>e in t?qIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,uD=(t,e,r)=>HIe(t,typeof e!="symbol"?e+"":e,r);let zIe=class extends Ppe{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,uD(this,"context",Wxe),uD(this,"registerDeviceToken",async n=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=n,c=`${Vxe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Aa(r,this.context)}};var WIe=Object.defineProperty,lD=Object.getOwnPropertySymbols,VIe=Object.prototype.hasOwnProperty,GIe=Object.prototype.propertyIsEnumerable,eO=(t,e,r)=>e in t?WIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bb=(t,e)=>{for(var r in e||(e={}))VIe.call(e,r)&&eO(t,r,e[r]);if(lD)for(var r of lD(e))GIe.call(e,r)&&eO(t,r,e[r]);return t},Xs=(t,e,r)=>eO(t,typeof e!="symbol"?e+"":e,r);let KIe=class extends Rpe{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,Xs(this,"context",Kxe),Xs(this,"storagePrefix",Ol),Xs(this,"storageVersion",Gxe),Xs(this,"events",new Map),Xs(this,"shouldPersist",!1),Xs(this,"init",async()=>{if(!Q4())try{const s={eventId:zM(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:UQ(this.core.relayer.protocol,this.core.relayer.version,V8)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Xs(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,u=zM(),l=this.core.projectId||"",d=Date.now(),f=Bb({eventId:u,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,f),this.shouldPersist=!0),f}),Xs(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Bb(Bb({},a),this.setMethods(a.eventId))}),Xs(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Xs(this,"setEventListeners",()=>{this.core.heartbeat.on(ac.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{he.fromMiliseconds(Date.now())-he.fromMiliseconds(s.timestamp)>Zxe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Xs(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Xs(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Xs(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Xs(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Xs(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Bb(Bb({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Xs(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Xs(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Yxe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${V8}${i}`,{method:"POST",body:JSON.stringify(s)})}),Xs(this,"getAppDomain",()=>BQ().url),this.logger=Aa(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}};var ZIe=Object.defineProperty,dD=Object.getOwnPropertySymbols,YIe=Object.prototype.hasOwnProperty,JIe=Object.prototype.propertyIsEnumerable,tO=(t,e,r)=>e in t?ZIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fD=(t,e)=>{for(var r in e||(e={}))YIe.call(e,r)&&tO(t,r,e[r]);if(dD)for(var r of dD(e))JIe.call(e,r)&&tO(t,r,e[r]);return t},Rn=(t,e,r)=>tO(t,typeof e!="symbol"?e+"":e,r);let XIe=class ate extends bpe{constructor(e){var r;super(e),Rn(this,"protocol",Wee),Rn(this,"version",Vee),Rn(this,"name",W8),Rn(this,"relayUrl"),Rn(this,"projectId"),Rn(this,"customStoragePrefix"),Rn(this,"events",new Ys.EventEmitter),Rn(this,"logger"),Rn(this,"heartbeat"),Rn(this,"relayer"),Rn(this,"crypto"),Rn(this,"storage"),Rn(this,"history"),Rn(this,"expirer"),Rn(this,"pairing"),Rn(this,"verify"),Rn(this,"echoClient"),Rn(this,"linkModeSupportedApps"),Rn(this,"eventClient"),Rn(this,"initialized",!1),Rn(this,"logChunkController"),Rn(this,"on",(a,c)=>this.events.on(a,c)),Rn(this,"once",(a,c)=>this.events.once(a,c)),Rn(this,"off",(a,c)=>this.events.off(a,c)),Rn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Rn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const l={topic:a,message:c,publishedAt:Date.now(),transportType:qn.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})});const n=this.getGlobalCore(e?.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Kee,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=A4({level:typeof e?.logger=="string"&&e.logger?e.logger:yxe.logger,name:W8}),{logger:i,chunkLoggerController:o}=E5({opts:s,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Aa(i,this.name),this.heartbeat=new vJ,this.crypto=new CSe(this,this.logger,e?.keychain),this.history=new UIe(this,this.logger),this.expirer=new jIe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new AJ(fD(fD({},bxe),e?.storageOptions)),this.relayer=new XSe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new OIe(this,this.logger),this.verify=new $Ie(this,this.logger,this.storage),this.echoClient=new zIe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new KIe(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const r=new ate(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(Oxe,n),r}get context(){return _a(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(z7,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(z7)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(e,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${e}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(e){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=e.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&mxe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const QIe=XIe,cte="wc",ute=2,lte="client",fk=`${cte}@${ute}:${lte}:`,AN={name:lte,logger:"error"},hD="WALLETCONNECT_DEEPLINK_CHOICE",e6e="proposal",pD="Proposal expired",t6e="session",Sg=he.SEVEN_DAYS,r6e="engine",gi={wc_sessionPropose:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1104},res:{ttl:he.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1106},res:{ttl:he.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1112},res:{ttl:he.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1114},res:{ttl:he.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:he.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:he.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1119}}},xN={min:he.FIVE_MINUTES,max:he.SEVEN_DAYS},Xu={idle:"IDLE",active:"ACTIVE"},n6e={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},s6e="request",i6e=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],o6e="wc",a6e="auth",c6e="authKeys",u6e="pairingTopics",l6e="requests",q5=`${o6e}@${1.5}:${a6e}:`,hI=`${q5}:PUB_KEY`;var d6e=Object.defineProperty,f6e=Object.defineProperties,h6e=Object.getOwnPropertyDescriptors,gD=Object.getOwnPropertySymbols,p6e=Object.prototype.hasOwnProperty,g6e=Object.prototype.propertyIsEnumerable,rO=(t,e,r)=>e in t?d6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yr=(t,e)=>{for(var r in e||(e={}))p6e.call(e,r)&&rO(t,r,e[r]);if(gD)for(var r of gD(e))g6e.call(e,r)&&rO(t,r,e[r]);return t},mi=(t,e)=>f6e(t,h6e(e)),Se=(t,e,r)=>rO(t,typeof e!="symbol"?e+"":e,r);let m6e=class extends Upe{constructor(e){super(e),Se(this,"name",r6e),Se(this,"events",new Ly),Se(this,"initialized",!1),Se(this,"requestQueue",{state:Xu.idle,queue:[]}),Se(this,"sessionRequestQueue",{state:Xu.idle,queue:[]}),Se(this,"emittedSessionRequests",new Jve({limit:500})),Se(this,"requestQueueDelay",he.ONE_SECOND),Se(this,"expectedPairingMethodMap",new Map),Se(this,"recentlyDeletedMap",new Map),Se(this,"recentlyDeletedLimit",200),Se(this,"relayMessageCache",[]),Se(this,"pendingSessions",new Map),Se(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(gi)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay)))}),Se(this,"connect",async r=>{var n;this.isInitialized(),await this.confirmOnlineStateOrThrow();const s=mi(Yr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s),s.optionalNamespaces=aAe(s.requiredNamespaces,s.optionalNamespaces),s.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:o,optionalNamespaces:a,sessionProperties:c,scopedProperties:u,relays:l,authentication:d,walletPay:f}=s,p=((n=d?.[0])==null?void 0:n.ttl)||gi.wc_sessionPropose.req.ttl||he.FIVE_MINUTES;this.validateRequestExpiry(p);let g=i,h,y=!1;try{if(g){const I=this.client.core.pairing.pairings.get(g);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),y=I.active}}catch(I){throw this.client.logger.error(`connect() -> pairing.get(${g}) failed`),I}if(!g||!y){const{topic:I,uri:U}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});g=I,h=U}if(!g){const{message:I}=Fe("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error(I)}const E=await this.client.core.crypto.generateKeyPair(),S=Ps(p),C=Yr(mi(Yr(Yr({requiredNamespaces:o,optionalNamespaces:a,relays:l??[{protocol:Gee}],proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:S,pairingTopic:g},c&&{sessionProperties:c}),u&&{scopedProperties:u}),{id:ni()}),(d||f)&&{requests:{authentication:d?.map(I=>{const{domain:U,chains:L,nonce:B,uri:A,exp:m,nbf:b,type:w,statement:x,requestId:M,resources:k,signatureTypes:j}=I;return{domain:U,chains:L,nonce:B,type:w??"caip122",aud:A,version:"1",iat:new Date().toISOString(),exp:m,nbf:b,statement:x,requestId:M,resources:k,signatureTypes:j}}),walletPay:f}}),_=mn("session_connect",C.id),{reject:T,resolve:P,done:D}=Dp(p,pD),F=({id:I})=>{I===C.id&&(this.client.events.off("proposal_expire",F),this.pendingSessions.delete(C.id),this.events.emit(_,{error:{message:pD,code:0}}))};return this.client.events.on("proposal_expire",F),this.events.once(_,({error:I,session:U})=>{this.client.events.off("proposal_expire",F),I?T(I):U&&P(U)}),await this.setProposal(C.id,C),await this.sendProposeSession({proposal:C,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:C.id}}}).catch(I=>{throw this.deleteProposal(C.id),I}),{uri:h,approval:D}}),Se(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),Se(this,"approve",async r=>{var n,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r?.id)==null?void 0:n.toString(),trace:[ru.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(U){throw o.setError(op.no_internet_connection),U}try{await this.isValidProposalId(r?.id)}catch(U){throw this.client.logger.error(`approve() -> proposal.get(${r?.id}) failed`),o.setError(op.proposal_not_found),U}try{await this.isValidApprove(r)}catch(U){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(op.session_approve_namespace_validation_failure),U}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:f,proposalRequestsResponses:p}=r,g=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:h,proposer:y,requiredNamespaces:E,optionalNamespaces:S}=g;let C=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:h});C||(C=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:ru.session_approve_started,properties:{topic:h,trace:[ru.session_approve_started,ru.session_namespaces_validation_success]}}));const _=await this.client.core.crypto.generateKeyPair(),T=y.publicKey,P=await this.client.core.crypto.generateSharedKey(_,T),D=mi(Yr(Yr(Yr({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:_,metadata:this.client.metadata},expiry:Ps(Sg)},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{proposalRequestsResponses:p}),F=qn.relay;C.addTrace(ru.subscribing_session_topic);try{await this.client.core.relayer.subscribe(P,{transportType:F,internal:{skipSubscribe:!0}})}catch(U){throw C.setError(op.subscribe_session_topic_failure),U}C.addTrace(ru.subscribe_session_topic_success);const I=mi(Yr({},D),{topic:P,requiredNamespaces:E,optionalNamespaces:S,pairingTopic:h,acknowledged:!1,self:D.controller,peer:{publicKey:y.publicKey,metadata:y.metadata},controller:_,transportType:qn.relay,authentication:p?.authentication,walletPayResult:p?.walletPay});await this.client.session.set(P,I),C.addTrace(ru.store_session);try{await this.sendApproveSession({sessionTopic:P,proposal:g,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:_},sessionSettleRequest:D,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:Yr({correlationId:a},this.getTVFApproveParams(I))}}),C.addTrace(ru.session_approve_publish_success)}catch(U){throw this.client.logger.error(U),this.client.session.delete(P,Gn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(P),U}return this.client.core.eventClient.deleteEvent({eventId:C.eventId}),await this.client.core.pairing.updateMetadata({topic:h,metadata:y.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:h}),await this.setExpiry(P,Ps(Sg)),{topic:P,acknowledged:()=>Promise.resolve(this.client.session.get(P))}}),Se(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:s}=r;let i;try{i=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}i&&await this.sendError({id:n,topic:i,error:s,rpcOpts:gi.wc_sessionPropose.reject}),await this.deleteProposal(n)}),Se(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:n,namespaces:s}=r,{done:i,resolve:o,reject:a}=Dp(he.FIVE_MINUTES,"Session update request expired without receiving any acknowledgement"),c=ni(),u=Ro().toString(),l=this.client.session.get(n).namespaces;return this.events.once(mn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(n,{namespaces:s}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(d=>{this.client.logger.error(d),this.client.session.update(n,{namespaces:l}),a(d)}),{acknowledged:i}}),Se(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,s=ni(),{done:i,resolve:o,reject:a}=Dp(he.FIVE_MINUTES,"Session extend request expired without receiving any acknowledgement");return this.events.once(mn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,Ps(Sg)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),Se(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:n,request:s,topic:i,expiry:o=gi.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(i);a?.transportType===qn.relay&&await this.confirmOnlineStateOrThrow();const c=ni(),u=Ro().toString(),{done:l,resolve:d,reject:f}=Dp(o,"Request expired. Please try again.");this.events.once(mn("session_request",c),({error:y,result:E})=>{y?f(y):d(E)});const p="wc_sessionRequest",g=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(g)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:p,params:{request:mi(Yr({},s),{expiryTimestamp:Ps(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:g}).catch(y=>f(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),await l();const h={request:mi(Yr({},s),{expiryTimestamp:Ps(o)}),chainId:n};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:p,params:h,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,h)}).catch(E=>f(E)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),y()}),new Promise(async y=>{var E;if(!((E=a.sessionConfig)!=null&&E.disableDeepLink)){const S=await Vve(this.client.core.storage,hD);await Hve({id:c,topic:i,wcDeepLink:S})}y()}),l()]).then(y=>y[2])}),Se(this,"respond",async r=>{var n,s;this.isInitialized();const i=this.client.core.eventClient.createEvent({properties:{topic:r?.topic||((s=(n=r?.response)==null?void 0:n.id)==null?void 0:s.toString()),trace:[ru.session_request_response_started]}});try{await this.isValidRespond(r)}catch(d){throw i.addTrace(d?.message),i.setError(op.session_request_response_validation_failure),d}i.addTrace(ru.session_request_response_validation_success);const{topic:o,response:a}=r,{id:c}=a,u=this.client.session.get(o);u.transportType===qn.relay&&await this.confirmOnlineStateOrThrow();const l=this.getAppLinkIfEnabled(u.peer.metadata,u.transportType);try{i.addTrace(ru.session_request_response_publish_started),Vs(a)?await this.sendResult({id:c,topic:o,result:a.result,throwOnFailedPublish:!0,appLink:l}):gs(a)&&await this.sendError({id:c,topic:o,error:a.error,appLink:l}),this.cleanupAfterResponse(r)}catch(d){throw i.addTrace(d?.message),i.setError(op.session_request_response_publish_failure),d}}),Se(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:n}=r;if(this.client.session.keys.includes(n)){const s=ni(),i=Ro().toString(),{done:o,resolve:a,reject:c}=Dp(he.FIVE_MINUTES,"Ping request expired without receiving any acknowledgement");this.events.once(mn("session_ping",s),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),Se(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:s,chainId:i}=r,o=Ro().toString(),a=ni();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),Se(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Gn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:s}=Fe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(s)}}),Se(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>lAe(n,r)))),Se(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Se(this,"authenticate",async(r,n)=>{var s;this.isInitialized(),this.isValidAuthenticate(r);const i=n&&this.client.core.linkModeSupportedApps.includes(n)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?qn.link_mode:qn.relay;o===qn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:l,nonce:d,type:f,exp:p,nbf:g,methods:h=[],expiry:y}=r,E=[...r.resources||[]],{topic:S,uri:C}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:S,uri:C}});const _=await this.client.core.crypto.generateKeyPair(),T=dI(_);if(await Promise.all([this.client.auth.authKeys.set(hI,{responseTopic:T,publicKey:_}),this.client.auth.pairingTopics.set(T,{topic:T,pairingTopic:S})]),await this.client.core.relayer.subscribe(T,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${S}`),h.length>0){const{namespace:k}=Wd(a[0]);let j=l_e(k,"request",h);lI(E)&&(j=f_e(j,E.pop())),E.push(j)}const P=y&&y>gi.wc_sessionAuthenticate.req.ttl?y:gi.wc_sessionAuthenticate.req.ttl,D={authPayload:{type:f??"caip122",chains:a,statement:c,aud:u,domain:l,version:"1",nonce:d,iat:new Date().toISOString(),exp:p,nbf:g,resources:E},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:Ps(P)},F={eip155:{chains:a,methods:[...new Set(["personal_sign",...h])],events:["chainChanged","accountsChanged"]}},I={requiredNamespaces:{},optionalNamespaces:F,relays:[{protocol:"irn"}],pairingTopic:S,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:Ps(gi.wc_sessionPropose.req.ttl),id:ni()},{done:U,resolve:L,reject:B}=Dp(P,"Request expired"),A=ni(),m=mn("session_connect",I.id),b=mn("session_request",A),w=async({error:k,session:j})=>{this.events.off(b,x),k?B(k):j&&L({session:j})},x=async k=>{var j,N,v;if(await this.deletePendingAuthRequest(A,{message:"fulfilled",code:0}),k.error){const K=Gn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return k.error.code===K.code?void 0:(this.events.off(m,w),B(k.error.message))}await this.deleteProposal(I.id),this.events.off(m,w);const{cacaos:R,responder:$}=k.result,O=[],H=[];for(const K of R){await t7({cacao:K,projectId:this.client.core.projectId})||(this.client.logger.error(K,"Signature verification failed"),B(Gn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Q}=K,re=lI(Q.resources),de=[k8(Q.iss)],le=v6(Q.iss);if(re){const se=r7(re),be=n7(re);O.push(...se),de.push(...be)}for(const se of de)H.push(`${se}:${le}`)}const W=await this.client.core.crypto.generateSharedKey(_,$.publicKey);let G;O.length>0&&(G={topic:W,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:$,controller:$.publicKey,expiry:Ps(Sg),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:S,namespaces:N7([...new Set(O)],[...new Set(H)]),transportType:o},await this.client.core.relayer.subscribe(W,{transportType:o}),await this.client.session.set(W,G),S&&await this.client.core.pairing.updateMetadata({topic:S,metadata:$.metadata}),G=this.client.session.get(W)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(N=$.metadata.redirect)!=null&&N.linkMode&&(v=$.metadata.redirect)!=null&&v.universal&&n&&(this.client.core.addLinkModeSupportedApp($.metadata.redirect.universal),this.client.session.update(W,{transportType:qn.link_mode})),L({auths:R,session:G})};this.events.once(m,w),this.events.once(b,x);let M;try{if(i){const k=Ms("wc_sessionAuthenticate",D,A);this.client.core.history.set(S,k);const j=await this.client.core.crypto.encode("",k,{type:jE,encoding:oh});M=a2(n,S,j)}else await Promise.all([this.sendRequest({topic:S,method:"wc_sessionAuthenticate",params:D,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:A}),this.sendRequest({topic:S,method:"wc_sessionPropose",params:I,expiry:gi.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:I.id})])}catch(k){throw this.events.off(m,w),this.events.off(b,x),k}return await this.setProposal(I.id,I),await this.setAuthRequest(A,{request:mi(Yr({},D),{verifyContext:{}}),pairingTopic:S,transportType:o}),{uri:M??C,response:U}}),Se(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:s}=r,i=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[ap.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(Ob.no_internet_connection),y}const o=this.getPendingAuthRequest(n);if(!o)throw i.setError(Ob.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||qn.relay;a===qn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=dI(c),d={type:Vd,receiverPublicKey:c,senderPublicKey:u},f=[],p=[];for(const y of s){if(!await t7({cacao:y,projectId:this.client.core.projectId})){i.setError(Ob.invalid_cacao);const T=Gn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:l,error:T,encodeOpts:d}),new Error(T.message)}i.addTrace(ap.cacaos_verified);const{p:E}=y,S=lI(E.resources),C=[k8(E.iss)],_=v6(E.iss);if(S){const T=r7(S),P=n7(S);f.push(...T),C.push(...P)}for(const T of C)p.push(`${T}:${_}`)}const g=await this.client.core.crypto.generateSharedKey(u,c);i.addTrace(ap.create_authenticated_session_topic);let h;if(f?.length>0){h={topic:g,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Ps(Sg),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:N7([...new Set(f)],[...new Set(p)]),transportType:a},i.addTrace(ap.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(g,{transportType:a})}catch(y){throw i.setError(Ob.subscribe_authenticated_session_topic_failure),y}i.addTrace(ap.subscribe_authenticated_session_topic_success),await this.client.session.set(g,h),i.addTrace(ap.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(ap.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:n,result:{cacaos:s,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(Ob.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:h}}),Se(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:s}=r,i=this.getPendingAuthRequest(n);if(!i)throw new Error(`Could not find pending auth request with id ${n}`);i.transportType===qn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=dI(o),u={type:Vd,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:s,encodeOpts:u,rpcOpts:gi.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.deleteProposal(n)}),Se(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:s}=r;return eee(n,s)}),Se(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),Se(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&i.topic&&i.topic!==n.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),Se(this,"deleteSession",async r=>{var n;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Gn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(hD).catch(u=>this.client.logger.warn(u)),s===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=Xu.idle),await Promise.all(this.getPendingSessionRequests().filter(u=>u.topic===s).map(u=>this.deletePendingSessionRequest(u.id,Gn("USER_DISCONNECTED")))),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),Se(this,"deleteProposal",async(r,n)=>{if(n)try{const s=this.client.proposal.get(r);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(op.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,Gn("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),Se(this,"deletePendingSessionRequest",async(r,n,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==r),s&&(this.sessionRequestQueue.state=Xu.idle,this.client.events.emit("session_request_expire",{id:r}))}),Se(this,"deletePendingAuthRequest",async(r,n,s=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)])}),Se(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),Se(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,Ps(gi.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),Se(this,"setAuthRequest",async(r,n)=>{const{request:s,pairingTopic:i,transportType:o=qn.relay}=n;this.client.core.expirer.set(r,s.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:r,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),Se(this,"setPendingSessionRequest",async r=>{const{id:n,topic:s,params:i,verifyContext:o}=r,a=i.request.expiryTimestamp||Ps(gi.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:s,params:i,verifyContext:o})}),Se(this,"sendRequest",async r=>{const{topic:n,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:l,tvf:d,publishOpts:f={}}=r,p=Ms(s,i,c);let g;const h=!!l;try{const S=h?oh:la;g=await this.client.core.crypto.encode(n,p,{encoding:S})}catch(S){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),S}let y;if(i6e.includes(s)){const S=Bc(JSON.stringify(p)),C=Bc(g);y=await this.client.core.verify.register({id:C,decryptedId:S})}const E=Yr(Yr({},gi[s].req),f);if(E.attestation=y,o&&(E.ttl=o),a&&(E.id=a),this.client.core.history.set(n,p),h){const S=a2(l,n,g);await global.Linking.openURL(S,this.client.name)}else E.tvf=mi(Yr({},d),{correlationId:p.id}),u?(E.internal=mi(Yr({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,g,E)):this.client.core.relayer.publish(n,g,E).catch(S=>this.client.logger.error(S));return p.id}),Se(this,"sendProposeSession",async r=>{const{proposal:n,publishOpts:s}=r,i=Ms("wc_sessionPropose",n,n.id);this.client.core.history.set(n.pairingTopic,i);const o=await this.client.core.crypto.encode(n.pairingTopic,i,{encoding:la}),a=Bc(JSON.stringify(i)),c=Bc(o),u=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:n.pairingTopic,sessionProposal:o},opts:mi(Yr({},s),{publishMethod:"wc_proposeSession",attestation:u})})}),Se(this,"sendApproveSession",async r=>{const{sessionTopic:n,pairingProposalResponse:s,proposal:i,sessionSettleRequest:o,publishOpts:a}=r,c=Rl(i.id,s),u=await this.client.core.crypto.encode(i.pairingTopic,c,{encoding:la}),l=Ms("wc_sessionSettle",o,a?.id),d=await this.client.core.crypto.encode(n,l,{encoding:la});this.client.core.history.set(n,l),await this.client.core.relayer.publishCustom({payload:{sessionTopic:n,pairingTopic:i.pairingTopic,sessionProposalResponse:u,sessionSettlementRequest:d},opts:mi(Yr({},a),{publishMethod:"wc_approveSession"})})}),Se(this,"sendResult",async r=>{const{id:n,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,u=Rl(n,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=d?oh:la;l=await this.client.core.crypto.encode(s,u,mi(Yr({},a||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),g}let f,p;try{f=await this.client.core.history.get(s,n);const g=f.request;try{p=this.getTVFParams(n,g.params,i)}catch(h){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${h?.message}`)}}catch(g){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${n}) failed`),g}if(d){const g=a2(c,s,l);await global.Linking.openURL(g,this.client.name)}else{const g=f.request.method,h=gi[g].res;h.tvf=mi(Yr({},p),{correlationId:n}),o?(h.internal=mi(Yr({},h.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,l,h)):this.client.core.relayer.publish(s,l,h).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(u)}),Se(this,"sendError",async r=>{const{id:n,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=r,u=Hy(n,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?oh:la;l=await this.client.core.crypto.encode(s,u,mi(Yr({},o||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),p}let f;try{f=await this.client.core.history.get(s,n)}catch(p){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),p}if(d){const p=a2(c,s,l);await global.Linking.openURL(p,this.client.name)}else{const p=f.request.method,g=a||gi[p].res;this.client.core.relayer.publish(s,l,g)}await this.client.core.history.resolve(u)}),Se(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(s=>{let i=!1;dl(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&r.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{dl(s.expiryTimestamp)&&n.push(s.id)}),await Promise.all([...r.map(s=>this.deleteSession({topic:s})),...n.map(s=>this.deleteProposal(s))])}),Se(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),Se(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),Se(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Xu.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Xu.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Xu.idle}),Se(this,"processRequest",async r=>{const{topic:n,payload:s,attestation:i,transportType:o,encryptedId:a}=r,c=s.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,s);case"wc_sessionPing":return await this.onSessionPingRequest(n,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),Se(this,"onRelayEventResponse",async r=>{const{topic:n,payload:s,transportType:i}=r,o=(await this.client.core.history.get(n,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,s);case"wc_sessionExtend":return this.onSessionExtendResponse(n,s);case"wc_sessionPing":return this.onSessionPingResponse(n,s);case"wc_sessionRequest":return this.onSessionRequestResponse(n,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Se(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:s}=Fe("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),Se(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:s}=r,i=this.expectedPairingMethodMap.get(n);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Se(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:s,attestation:i,encryptedId:o}=r,{params:a,id:c}=s;try{const u=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u?.setError(Cd.proposal_listener_not_found)),this.isValidConnect(Yr({},s.params));const l=a.expiryTimestamp||Ps(gi.wc_sessionPropose.req.ttl),d=Yr({id:c,pairingTopic:n,expiryTimestamp:l,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const f=await this.getVerifyContext({attestationId:i,hash:Bc(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});u?.addTrace(al.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:f})}catch(u){await this.sendError({id:c,topic:n,error:u,rpcOpts:gi.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),Se(this,"onSessionProposeResponse",async(r,n,s)=>{const{id:i}=n;if(Vs(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:r,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(l,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else if(gs(n)){await this.deleteProposal(i);const o=mn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),Se(this,"onSessionSettleRequest",async(r,n)=>{const{id:s,params:i}=n;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:f,proposalRequestsResponses:p}=n.params,g=[...this.pendingSessions.values()].find(E=>E.sessionTopic===r);if(!g)return this.client.logger.error(`Pending session not found for topic ${r}`);const h=this.client.proposal.get(g.proposalId),y=mi(Yr(Yr(Yr({topic:r,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:g.pairingTopic,requiredNamespaces:h.requiredNamespaces,optionalNamespaces:h.optionalNamespaces,controller:a.publicKey,self:{publicKey:g.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{transportType:qn.relay,authentication:p?.authentication,walletPayResult:p?.walletPay});await this.client.session.set(y.topic,y),await this.setExpiry(y.topic,y.expiry),await this.client.core.pairing.updateMetadata({topic:g.pairingTopic,metadata:y.peer.metadata}),this.pendingSessions.delete(g.proposalId),this.deleteProposal(g.proposalId,!1),this.cleanupDuplicatePairings(y),await this.sendResult({id:n.id,topic:r,throwOnFailedPublish:!0,result:!0}),this.client.events.emit("session_connect",{session:y}),this.events.emit(mn("session_connect",g.proposalId),{session:y})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),Se(this,"onSessionSettleResponse",async(r,n)=>{const{id:s}=n;Vs(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(mn("session_approve",s),{})):gs(n)&&(await this.client.session.delete(r,Gn("USER_DISCONNECTED")),this.events.emit(mn("session_approve",s),{error:n.error}))}),Se(this,"onSessionUpdateRequest",async(r,n)=>{const{params:s,id:i}=n;try{const o=`${r}_session_update`,a=Pb.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:r,error:Gn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Yr({topic:r},s));try{Pb.set(o,i),await this.client.session.update(r,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:r,result:!0})}catch(c){throw Pb.delete(o),c}this.client.events.emit("session_update",{id:i,topic:r,params:s})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),Se(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),Se(this,"onSessionUpdateResponse",(r,n)=>{const{id:s}=n,i=mn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vs(n)?this.events.emit(mn("session_update",s),{}):gs(n)&&this.events.emit(mn("session_update",s),{error:n.error})}),Se(this,"onSessionExtendRequest",async(r,n)=>{const{id:s}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Ps(Sg)),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_extend",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),Se(this,"onSessionExtendResponse",(r,n)=>{const{id:s}=n,i=mn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vs(n)?this.events.emit(mn("session_extend",s),{}):gs(n)&&this.events.emit(mn("session_extend",s),{error:n.error})}),Se(this,"onSessionPingRequest",async(r,n)=>{const{id:s}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),Se(this,"onSessionPingResponse",(r,n)=>{const{id:s}=n,i=mn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Vs(n)?this.events.emit(mn("session_ping",s),{}):gs(n)&&this.events.emit(mn("session_ping",s),{error:n.error})},500)}),Se(this,"onSessionDeleteRequest",async(r,n)=>{const{id:s}=n;try{await this.isValidDisconnect({topic:r,reason:n.params}),this.cleanupPendingSentRequestsForTopic({topic:r,error:Gn("USER_DISCONNECTED")}),await this.deleteSession({topic:r,id:s})}catch(i){this.client.logger.error(i)}}),Se(this,"onSessionRequest",async r=>{var n,s,i;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:l}=r,{id:d,params:f}=a;try{await this.isValidRequest(Yr({topic:o},f));const p=this.client.session.get(o),g=await this.getVerifyContext({attestationId:c,hash:Bc(JSON.stringify(Ms("wc_sessionRequest",f,d))),encryptedId:u,metadata:p.peer.metadata,transportType:l}),h={id:d,topic:o,params:f,verifyContext:g};await this.setPendingSessionRequest(h),l===qn.link_mode&&(n=p.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((s=p.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(h):(this.addSessionRequestToSessionRequestQueue(h),this.processSessionRequestQueue())}catch(p){await this.sendError({id:d,topic:o,error:p}),this.client.logger.error(p)}}),Se(this,"onSessionRequestResponse",(r,n)=>{const{id:s}=n,i=mn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vs(n)?this.events.emit(mn("session_request",s),{result:n.result}):gs(n)&&this.events.emit(mn("session_request",s),{error:n.error})}),Se(this,"onSessionEventRequest",async(r,n)=>{const{id:s,params:i}=n;try{const o=`${r}_session_event_${i.event.name}`,a=Pb.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Yr({topic:r},i)),this.client.events.emit("session_event",{id:s,topic:r,params:i}),Pb.set(o,s)}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),Se(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:s}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Vs(n)?this.events.emit(mn("session_request",s),{result:n.result}):gs(n)&&this.events.emit(mn("session_request",s),{error:n.error})}),Se(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:u,authPayload:l,expiryTimestamp:d}=i.params,f=await this.getVerifyContext({attestationId:o,hash:Bc(JSON.stringify(i)),encryptedId:a,metadata:u.metadata,transportType:c}),p={requester:u,pairingTopic:s,id:i.id,authPayload:l,verifyContext:f,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:p,pairingTopic:s,transportType:c}),c===qn.link_mode&&(n=u.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:f})}catch(u){this.client.logger.error(u);const l=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(i.params.requester.metadata,c),p={type:Vd,receiverPublicKey:l,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:u,encodeOpts:p,rpcOpts:gi.wc_sessionAuthenticate.autoReject,appLink:f})}}),Se(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),Se(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Xu.idle,this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay))}),Se(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===r&&i.request.method==="wc_sessionRequest").forEach(i=>{this.events.emit(mn("session_request",i.request.id),{error:n})})}),Se(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Xu.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),Se(this,"emitSessionRequest",r=>{if(this.emittedSessionRequests.has(r.id)){this.client.logger.warn({id:r.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${r.id}`);return}this.sessionRequestQueue.state=Xu.active,this.emittedSessionRequests.add(r.id),this.client.events.emit("session_request",r)}),Se(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(s=>s.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:Ms("wc_sessionPropose",mi(Yr({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id),attestation:n.attestation,encryptedId:n.encryptedId})}),Se(this,"isValidConnect",async r=>{if(!ta(r)){const{message:u}=Fe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=r;if(si(n)||await this.isValidPairingTopic(n),!_Ae(c)){const{message:u}=Fe("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(s&&!si(s)&&Sl(s)!==0){const u="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(u):this.client.logger.warn(u),this.validateNamespaces(s,"requiredNamespaces")}if(i&&!si(i)&&Sl(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),o&&!si(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!si(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(l=>u.includes(l.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),Se(this,"validateNamespaces",(r,n)=>{const s=EAe(r,"connect()",n);if(s)throw new Error(s.message)}),Se(this,"isValidApprove",async r=>{if(!ta(r))throw new Error(Fe("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),u=yN(s,"approve()");if(u)throw new Error(u.message);const l=O7(c.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!Bs(i,!0)){const{message:d}=Fe("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(o&&!si(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!si(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(f=>d.has(f.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),Se(this,"isValidReject",async r=>{if(!ta(r)){const{message:i}=Fe("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(i)}const{id:n,reason:s}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!xAe(s)){const{message:i}=Fe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),Se(this,"isValidSessionSettleRequest",r=>{if(!ta(r)){const{message:u}=Fe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:s,namespaces:i,expiry:o}=r;if(!jee(n)){const{message:u}=Fe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=gAe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=yN(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(dl(o)){const{message:u}=Fe("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),Se(this,"isValidUpdate",async r=>{if(!ta(r)){const{message:c}=Fe("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:s}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const i=this.client.session.get(n),o=yN(s,"update()");if(o)throw new Error(o.message);const a=O7(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),Se(this,"isValidExtend",async r=>{if(!ta(r)){const{message:s}=Fe("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(s)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),Se(this,"isValidRequest",async r=>{if(!ta(r)){const{message:c}=Fe("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:s,chainId:i,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!R7(a,i)){const{message:c}=Fe("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!CAe(s)){const{message:c}=Fe("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!TAe(a,i,s.method)){const{message:c}=Fe("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}this.validateRequestExpiry(o)}),Se(this,"isValidRespond",async r=>{var n;if(!ta(r)){const{message:a}=Fe("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(a)}const{topic:s,response:i}=r;try{await this.isValidSessionTopic(s)}catch(a){throw(n=r?.response)!=null&&n.id&&this.cleanupAfterResponse(r),a}if(!SAe(i)){const{message:a}=Fe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(a)}const o=this.client.pendingRequest.get(i.id);if(o.topic!==s){const{message:a}=Fe("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${i.id}, expected topic: ${o.topic}, received topic: ${s}`);throw new Error(a)}}),Se(this,"isValidPing",async r=>{if(!ta(r)){const{message:s}=Fe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),Se(this,"isValidEmit",async r=>{if(!ta(r)){const{message:a}=Fe("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:s,chainId:i}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!R7(o,i)){const{message:a}=Fe("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!IAe(s)){const{message:a}=Fe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!NAe(o,i,s.name)){const{message:a}=Fe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),Se(this,"isValidDisconnect",async r=>{if(!ta(r)){const{message:s}=Fe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),Se(this,"isValidAuthenticate",r=>{const{chains:n,uri:s,domain:i,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!Bs(s,!1))throw new Error("uri is required parameter");if(!Bs(i,!1))throw new Error("domain is required parameter");if(!Bs(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>Wd(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Wd(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Se(this,"getVerifyContext",async r=>{const{attestationId:n,hash:s,encryptedId:i,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||C1,validation:"UNKNOWN",origin:o.url||""}};try{if(a===qn.link_mode){const l=this.getAppLinkIfEnabled(o,a);return c.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:n,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),Se(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((s,i)=>{if(s==null){const{message:o}=Fe("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${s} for key ${Object.keys(r)[i]}`);throw new Error(o)}})}),Se(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),Se(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),Se(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:s}=Fe("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(s)}}),Se(this,"isLinkModeEnabled",(r,n)=>{var s,i,o,a,c,u,l,d,f;return!r||n!==qn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==""&&((l=r?.redirect)==null?void 0:l.universal)!==void 0&&((d=r?.redirect)==null?void 0:d.universal)!==""&&((f=r?.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Se(this,"getAppLinkIfEnabled",(r,n)=>{var s;return this.isLinkModeEnabled(r,n)?(s=r?.redirect)==null?void 0:s.universal:void 0}),Se(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=HM(r,"topic")||"",s=decodeURIComponent(HM(r,"wc_ev")||""),i=this.client.session.keys.includes(n);i&&this.client.session.update(n,{transportType:qn.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:s,sessionExists:i})}),Se(this,"registerLinkModeListeners",async()=>{var r;if(Q4()||Uh()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await n.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),Se(this,"getTVFApproveParams",r=>{try{const n=Mee(r.namespaces),s=rAe(r.namespaces),i=nAe(r.namespaces),o=r.sessionProperties,a=r.scopedProperties;return{approvedChains:n,approvedMethods:s,approvedEvents:i,sessionProperties:o,scopedProperties:a}}catch(n){return this.client.logger.warn(n,"Error getting TVF approve params"),{}}}),Se(this,"getTVFParams",(r,n,s)=>{var i,o,a;if(!((i=n.request)!=null&&i.method))return{};const c={correlationId:r,rpcMethods:[n.request.method],chainId:n.chainId};try{const u=this.extractTxHashesFromResult(n.request,s);c.txHashes=u,c.contractAddresses=this.isValidContractData(n.request.params)?[(a=(o=n.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(u){this.client.logger.warn(u,"Error getting TVF params")}return c}),Se(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const s=r?.data||((n=r?.[0])==null?void 0:n.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),Se(this,"extractTxHashesFromResult",(r,n)=>{var s;try{if(!n)return[];const i=r.method,o=n6e[i];if(i==="sui_signTransaction")return[WEe(n.transactionBytes)];if(i==="near_signTransaction")return[JM(n)];if(i==="near_signTransactions")return n.map(c=>JM(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=n.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[GAe({transaction:r.params.transactionPayload,signature:n.signature})];if(i==="algo_signTxn")return Gd(n)?n.map(c=>XM(c)):[XM(n)];if(i==="cosmos_signDirect")return[GEe(n)];if(i==="wallet_sendCalls")return KEe(n);if(typeof n=="string")return[n];const a=n[o.key];if(Gd(a))return i==="solana_signAllTransactions"?a.map(c=>zEe(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn(i,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,s]of Object.entries(r))for(const i of s)try{await this.onProviderMessageEvent({topic:n,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${i}`)}}catch(e){this.client.logger.warn(e,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){const{message:e}=Fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Os.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(hI)?this.client.auth.authKeys.get(hI):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:i===qn.link_mode?oh:la});zy(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:s,transportType:i,encryptedId:Bc(n)})):W0(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:i}),this.client.core.history.delete(r,a.id)):(this.client.logger.error(`onRelayMessage() -> unknown payload: ${JSON.stringify(a)}`),await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:i})),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(`onRelayMessage() -> failed to process an inbound message: ${n}`),this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Rc.expired,async e=>{const{topic:r,id:n}=DQ(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Fe("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,Fe("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on($p.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on($p.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Bs(e,!1)){const{message:r}=Fe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=Fe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(dl(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=Fe("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Bs(e,!1)){const{message:r}=Fe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=Fe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(dl(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=Fe("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=Fe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Bs(e,!1)){const{message:r}=Fe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=Fe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!AAe(e)){const{message:r}=Fe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=Fe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(dl(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=Fe("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}validateRequestExpiry(e){if(e&&!OAe(e,xN)){const{message:r}=Fe("MISSING_OR_INVALID",`request() expiry: ${e}. Expiry must be a number (in seconds) between ${xN.min} and ${xN.max}`);throw new Error(r)}}},y6e=class extends V0{constructor(e,r){super(e,r,e6e,fk),this.core=e,this.logger=r}},b6e=class extends V0{constructor(e,r){super(e,r,t6e,fk),this.core=e,this.logger=r}},w6e=class extends V0{constructor(e,r){super(e,r,s6e,fk,n=>n.id),this.core=e,this.logger=r}},v6e=class extends V0{constructor(e,r){super(e,r,c6e,q5,()=>hI),this.core=e,this.logger=r}},E6e=class extends V0{constructor(e,r){super(e,r,u6e,q5),this.core=e,this.logger=r}},_6e=class extends V0{constructor(e,r){super(e,r,l6e,q5,n=>n.id),this.core=e,this.logger=r}};var A6e=Object.defineProperty,x6e=(t,e,r)=>e in t?A6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,CN=(t,e,r)=>x6e(t,typeof e!="symbol"?e+"":e,r);let C6e=class{constructor(e,r){this.core=e,this.logger=r,CN(this,"authKeys"),CN(this,"pairingTopics"),CN(this,"requests"),this.authKeys=new v6e(this.core,this.logger),this.pairingTopics=new E6e(this.core,this.logger),this.requests=new _6e(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}};var S6e=Object.defineProperty,I6e=(t,e,r)=>e in t?S6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hr=(t,e,r)=>I6e(t,typeof e!="symbol"?e+"":e,r);let T6e=class dte extends Bpe{constructor(e){super(e),hr(this,"protocol",cte),hr(this,"version",ute),hr(this,"name",AN.name),hr(this,"metadata"),hr(this,"core"),hr(this,"logger"),hr(this,"events",new Ys.EventEmitter),hr(this,"engine"),hr(this,"session"),hr(this,"proposal"),hr(this,"pendingRequest"),hr(this,"auth"),hr(this,"signConfig"),hr(this,"on",(n,s)=>this.events.on(n,s)),hr(this,"once",(n,s)=>this.events.once(n,s)),hr(this,"off",(n,s)=>this.events.off(n,s)),hr(this,"removeListener",(n,s)=>this.events.removeListener(n,s)),hr(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),hr(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"update",async n=>{try{return await this.engine.update(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"request",async n=>{try{return await this.engine.request(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"find",n=>{try{return this.engine.find(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),hr(this,"authenticate",async(n,s)=>{try{return await this.engine.authenticate(n,s)}catch(i){throw this.logger.error(i.message),i}}),hr(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),hr(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),this.name=e?.name||AN.name,this.metadata=Dve(e?.metadata),this.signConfig=e?.signConfig;const r=lk({logger:e?.logger||AN.logger,name:this.name});this.logger=r,this.core=e?.core||new QIe(e),this.session=new b6e(this.core,this.logger),this.proposal=new y6e(this.core,this.logger),this.pendingRequest=new w6e(this.core,this.logger),this.engine=new m6e(this),this.auth=new C6e(this.core,this.logger)}static async init(e){const r=new dte(e);return await r.initialize(),r}get context(){return _a(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const N6e=T6e;var c2={exports:{}},mD;function P6e(){return mD||(mD=1,(function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof wu<"u"&&wu,n=(function(){function i(){this.fetch=!1,this.DOMException=r.DOMException}return i.prototype=r,new i})();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof wu<"u"&&wu||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(b){return b&&DataView.prototype.isPrototypeOf(b)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(b){return b&&l.indexOf(Object.prototype.toString.call(b))>-1};function f(b){if(typeof b!="string"&&(b=String(b)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(b)||b==="")throw new TypeError('Invalid character in header field name: "'+b+'"');return b.toLowerCase()}function p(b){return typeof b!="string"&&(b=String(b)),b}function g(b){var w={next:function(){var x=b.shift();return{done:x===void 0,value:x}}};return c.iterable&&(w[Symbol.iterator]=function(){return w}),w}function h(b){this.map={},b instanceof h?b.forEach(function(w,x){this.append(x,w)},this):Array.isArray(b)?b.forEach(function(w){if(w.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+w.length);this.append(w[0],w[1])},this):b&&Object.getOwnPropertyNames(b).forEach(function(w){this.append(w,b[w])},this)}h.prototype.append=function(b,w){b=f(b),w=p(w);var x=this.map[b];this.map[b]=x?x+", "+w:w},h.prototype.delete=function(b){delete this.map[f(b)]},h.prototype.get=function(b){return b=f(b),this.has(b)?this.map[b]:null},h.prototype.has=function(b){return this.map.hasOwnProperty(f(b))},h.prototype.set=function(b,w){this.map[f(b)]=p(w)},h.prototype.forEach=function(b,w){for(var x in this.map)this.map.hasOwnProperty(x)&&b.call(w,this.map[x],x,this)},h.prototype.keys=function(){var b=[];return this.forEach(function(w,x){b.push(x)}),g(b)},h.prototype.values=function(){var b=[];return this.forEach(function(w){b.push(w)}),g(b)},h.prototype.entries=function(){var b=[];return this.forEach(function(w,x){b.push([x,w])}),g(b)},c.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);function y(b){if(!b._noBody){if(b.bodyUsed)return Promise.reject(new TypeError("Already read"));b.bodyUsed=!0}}function E(b){return new Promise(function(w,x){b.onload=function(){w(b.result)},b.onerror=function(){x(b.error)}})}function S(b){var w=new FileReader,x=E(w);return w.readAsArrayBuffer(b),x}function C(b){var w=new FileReader,x=E(w),M=/charset=([A-Za-z0-9_-]+)/.exec(b.type),k=M?M[1]:"utf-8";return w.readAsText(b,k),x}function _(b){for(var w=new Uint8Array(b),x=new Array(w.length),M=0;M<w.length;M++)x[M]=String.fromCharCode(w[M]);return x.join("")}function T(b){if(b.slice)return b.slice(0);var w=new Uint8Array(b.byteLength);return w.set(new Uint8Array(b)),w.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(b){this.bodyUsed=this.bodyUsed,this._bodyInit=b,b?typeof b=="string"?this._bodyText=b:c.blob&&Blob.prototype.isPrototypeOf(b)?this._bodyBlob=b:c.formData&&FormData.prototype.isPrototypeOf(b)?this._bodyFormData=b:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)?this._bodyText=b.toString():c.arrayBuffer&&c.blob&&u(b)?(this._bodyArrayBuffer=T(b.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(b)||d(b))?this._bodyArrayBuffer=T(b):this._bodyText=b=Object.prototype.toString.call(b):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof b=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var b=y(this);if(b)return b;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var b=y(this);return b||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(S);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var b=y(this);if(b)return b;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(U)}),this.json=function(){return this.text().then(JSON.parse)},this}var D=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function F(b){var w=b.toUpperCase();return D.indexOf(w)>-1?w:b}function I(b,w){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');w=w||{};var x=w.body;if(b instanceof I){if(b.bodyUsed)throw new TypeError("Already read");this.url=b.url,this.credentials=b.credentials,w.headers||(this.headers=new h(b.headers)),this.method=b.method,this.mode=b.mode,this.signal=b.signal,!x&&b._bodyInit!=null&&(x=b._bodyInit,b.bodyUsed=!0)}else this.url=String(b);if(this.credentials=w.credentials||this.credentials||"same-origin",(w.headers||!this.headers)&&(this.headers=new h(w.headers)),this.method=F(w.method||this.method||"GET"),this.mode=w.mode||this.mode||null,this.signal=w.signal||this.signal||(function(){if("AbortController"in a){var j=new AbortController;return j.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&x)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(x),(this.method==="GET"||this.method==="HEAD")&&(w.cache==="no-store"||w.cache==="no-cache")){var M=/([?&])_=[^&]*/;if(M.test(this.url))this.url=this.url.replace(M,"$1_="+new Date().getTime());else{var k=/\?/;this.url+=(k.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})};function U(b){var w=new FormData;return b.trim().split("&").forEach(function(x){if(x){var M=x.split("="),k=M.shift().replace(/\+/g," "),j=M.join("=").replace(/\+/g," ");w.append(decodeURIComponent(k),decodeURIComponent(j))}}),w}function L(b){var w=new h,x=b.replace(/\r?\n[\t ]+/g," ");return x.split("\r").map(function(M){return M.indexOf(`
`)===0?M.substr(1,M.length):M}).forEach(function(M){var k=M.split(":"),j=k.shift().trim();if(j){var N=k.join(":").trim();try{w.append(j,N)}catch(v){console.warn("Response "+v.message)}}}),w}P.call(I.prototype);function B(b,w){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(w||(w={}),this.type="default",this.status=w.status===void 0?200:w.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=w.statusText===void 0?"":""+w.statusText,this.headers=new h(w.headers),this.url=w.url||"",this._initBody(b)}P.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},B.error=function(){var b=new B(null,{status:200,statusText:""});return b.ok=!1,b.status=0,b.type="error",b};var A=[301,302,303,307,308];B.redirect=function(b,w){if(A.indexOf(w)===-1)throw new RangeError("Invalid status code");return new B(null,{status:w,headers:{location:b}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(w,x){this.message=w,this.name=x;var M=Error(w);this.stack=M.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function m(b,w){return new Promise(function(x,M){var k=new I(b,w);if(k.signal&&k.signal.aborted)return M(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function N(){j.abort()}j.onload=function(){var $={statusText:j.statusText,headers:L(j.getAllResponseHeaders()||"")};k.url.indexOf("file://")===0&&(j.status<200||j.status>599)?$.status=200:$.status=j.status,$.url="responseURL"in j?j.responseURL:$.headers.get("X-Request-URL");var O="response"in j?j.response:j.responseText;setTimeout(function(){x(new B(O,$))},0)},j.onerror=function(){setTimeout(function(){M(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){M(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){M(new o.DOMException("Aborted","AbortError"))},0)};function v($){try{return $===""&&a.location.href?a.location.href:$}catch{return $}}if(j.open(k.method,v(k.url),!0),k.credentials==="include"?j.withCredentials=!0:k.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),w&&typeof w.headers=="object"&&!(w.headers instanceof h||a.Headers&&w.headers instanceof a.Headers)){var R=[];Object.getOwnPropertyNames(w.headers).forEach(function($){R.push(f($)),j.setRequestHeader($,p(w.headers[$]))}),k.headers.forEach(function($,O){R.indexOf(O)===-1&&j.setRequestHeader(O,$)})}else k.headers.forEach(function($,O){j.setRequestHeader(O,$)});k.signal&&(k.signal.addEventListener("abort",N),j.onreadystatechange=function(){j.readyState===4&&k.signal.removeEventListener("abort",N)}),j.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return m.polyfill=!0,a.fetch||(a.fetch=m,a.Headers=h,a.Request=I,a.Response=B),o.Headers=h,o.Request=I,o.Response=B,o.fetch=m,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=r.fetch?r:n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(c2,c2.exports)),c2.exports}var R6e=P6e();const yD=Ea(R6e);var O6e=Object.defineProperty,k6e=Object.defineProperties,B6e=Object.getOwnPropertyDescriptors,bD=Object.getOwnPropertySymbols,U6e=Object.prototype.hasOwnProperty,M6e=Object.prototype.propertyIsEnumerable,wD=(t,e,r)=>e in t?O6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vD=(t,e)=>{for(var r in e||(e={}))U6e.call(e,r)&&wD(t,r,e[r]);if(bD)for(var r of bD(e))M6e.call(e,r)&&wD(t,r,e[r]);return t},ED=(t,e)=>k6e(t,B6e(e));const D6e={Accept:"application/json","Content-Type":"application/json"},j6e="POST",_D={headers:D6e,method:j6e},AD=10;let cc=class{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Ys.EventEmitter,this.isAvailable=!1,this.registering=!1,!L7(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=Lc(e),n=await(await yD(this.url,ED(vD({},_D),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!L7(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=Lc({id:1,jsonrpc:"2.0",method:"test",params:[]});await yD(e,ED(vD({},_D),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Xd(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=Hy(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return $ee(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>AD&&this.events.setMaxListeners(AD)}};function hk(t){return t==null||typeof t!="object"&&typeof t!="function"}function fte(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function hte(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const L6e="[object RegExp]",pte="[object String]",gte="[object Number]",mte="[object Boolean]",yte="[object Arguments]",F6e="[object Symbol]",$6e="[object Date]",q6e="[object Map]",H6e="[object Set]",z6e="[object Array]",W6e="[object ArrayBuffer]",V6e="[object Object]",G6e="[object DataView]",K6e="[object Uint8Array]",Z6e="[object Uint8ClampedArray]",Y6e="[object Uint16Array]",J6e="[object Uint32Array]",X6e="[object Int8Array]",Q6e="[object Int16Array]",e5e="[object Int32Array]",t5e="[object Float32Array]",r5e="[object Float64Array]";function pk(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function n5e(t,e){return Um(t,void 0,t,new Map,e)}function Um(t,e,r,n=new Map,s=void 0){const i=s?.(t,e,r,n);if(i!=null)return i;if(hk(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=Um(t[a],a,r,n,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,Um(c,a,r,n,s));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(Um(a,void 0,r,n,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(pk(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=Um(t[a],a,r,n,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),qp(o,t,r,n,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),qp(o,t,r,n,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),qp(o,t,r,n,s),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,qp(o,t,r,n,s),o}if(typeof t=="object"&&s5e(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),qp(o,t,r,n,s),o}return t}function qp(t,e,r=t,n,s){const i=[...Object.keys(e),...fte(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Um(e[a],a,r,n,s))}}function s5e(t){switch(hte(t)){case yte:case z6e:case W6e:case G6e:case mte:case $6e:case t5e:case r5e:case X6e:case Q6e:case e5e:case q6e:case gte:case V6e:case L6e:case H6e:case pte:case F6e:case K6e:case Z6e:case Y6e:case J6e:return!0;default:return!1}}function i5e(t,e){return n5e(t,(r,n,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case gte:case pte:case mte:{const o=new t.constructor(t?.valueOf());return qp(o,t),o}case yte:{const o={};return qp(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function xD(t){return i5e(t)}function CD(t){return t!==null&&typeof t=="object"&&hte(t)==="[object Arguments]"}function SD(t){return typeof t=="object"&&t!==null}function o5e(){}function a5e(t){return pk(t)}function c5e(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function u5e(t){if(hk(t))return t;if(Array.isArray(t)||pk(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function l5e(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let s=t;for(let i=0;i<r.length;i++){const o=r[i];s=nO(s,o,n,new Map)}return s}function nO(t,e,r,n){if(hk(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return u5e(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...fte(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(CD(a)&&(a={...a}),CD(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=xD(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const l=[],d=Reflect.ownKeys(c);for(let f=0;f<d.length;f++){const p=d[f];l[p]=c[p]}c=l}else c=[];const u=r(c,a,o,t,e,n);u!=null?t[o]=u:Array.isArray(a)||SD(c)&&SD(a)?t[o]=nO(c,a,r,n):c==null&&c5e(a)?t[o]=nO({},a,r,n):c==null&&a5e(a)?t[o]=xD(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function d5e(t,...e){return l5e(t,...e,o5e)}const ID="error",f5e="wss://relay.walletconnect.org",h5e="wc",bte="universal_provider",u2=`${h5e}@2:${bte}:`,wte="https://rpc.walletconnect.org/v1/",vte="generic",p5e=`${wte}bundler`,Zm="call_status",g5e=86400,gk={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var m5e=Object.defineProperty,y5e=Object.defineProperties,b5e=Object.getOwnPropertyDescriptors,TD=Object.getOwnPropertySymbols,w5e=Object.prototype.hasOwnProperty,v5e=Object.prototype.propertyIsEnumerable,ND=(t,e,r)=>e in t?m5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,l2=(t,e)=>{for(var r in e||(e={}))w5e.call(e,r)&&ND(t,r,e[r]);if(TD)for(var r of TD(e))v5e.call(e,r)&&ND(t,r,e[r]);return t},E5e=(t,e)=>y5e(t,b5e(e));function Ete(t,e,r){var n;const s=Wd(t);return((n=e.rpcMap)==null?void 0:n[s.reference])||`${wte}?chainId=${s.namespace}:${s.reference}&projectId=${r}`}function _5e(t){return t.includes(":")?t.split(":")[1]:t}function _te(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function A5e(t,e){const r=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!r.length)return[];const n=[];return r.forEach(s=>{const i=e.namespaces[s].accounts;n.push(...i)}),n}function PD(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>{var n,s;return((n=r?.chains)==null?void 0:n.length)&&((s=r?.chains)==null?void 0:s.length)>0}))}function d2(t={},e={}){const r=PD(RD(t)),n=PD(RD(e));return d5e(r,n)}function RD(t){var e,r,n,s,i;const o={};if(!Sl(t))return o;for(const[a,c]of Object.entries(t)){const u=F5(a)?[a]:c.chains,l=c.methods||[],d=c.events||[],f=c.rpcMap||{},p=Bm(a);o[p]=E5e(l2(l2({},o[p]),c),{chains:Cl(u,(e=o[p])==null?void 0:e.chains),methods:Cl(l,(r=o[p])==null?void 0:r.methods),events:Cl(d,(n=o[p])==null?void 0:n.events)}),(Sl(f)||Sl(((s=o[p])==null?void 0:s.rpcMap)||{}))&&(o[p].rpcMap=l2(l2({},f),(i=o[p])==null?void 0:i.rpcMap))}return o}function OD(t){return t.includes(":")?t.split(":")[2]:t}function kD(t){const e={};for(const[r,n]of Object.entries(t)){const s=n.methods||[],i=n.events||[],o=n.accounts||[],a=F5(r)?[r]:n.chains?n.chains:_te(n.accounts);e[r]={chains:a,methods:s,events:i,accounts:o}}return e}function SN(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}function x5e(t){try{const e=JSON.parse(t);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}const Ate={},Ym=t=>Ate[t],IN=(t,e)=>{Ate[t]=e};var C5e=Object.defineProperty,BD=Object.getOwnPropertySymbols,S5e=Object.prototype.hasOwnProperty,I5e=Object.prototype.propertyIsEnumerable,UD=(t,e,r)=>e in t?C5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,MD=(t,e)=>{for(var r in e||(e={}))S5e.call(e,r)&&UD(t,r,e[r]);if(BD)for(var r of BD(e))I5e.call(e,r)&&UD(t,r,e[r]);return t};const DD="eip155",T5e=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],N5e=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,TN=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,jD=t=>Object.keys(t).filter(e=>T5e.includes(e)).reduce((e,r)=>(e[r]=P5e(t[r]),e),{}),P5e=t=>typeof t=="string"&&x5e(t)?JSON.parse(t):t,R5e=(t,e,r)=>{const{sessionProperties:n={},scopedProperties:s={}}=t,i={};if(!Sl(s)&&!Sl(n))return;const o=jD(n);for(const a of r){const c=N5e(a);if(!c)continue;i[TN(c)]=o;const u=s?.[`${DD}:${c}`];if(u){const l=u?.[`${DD}:${c}:${e}`];i[TN(c)]=MD(MD({},i[TN(c)]),jD(l||u))}}for(const[a,c]of Object.entries(i))Object.keys(c).length===0&&delete i[a];return Object.keys(i).length>0?i:void 0};var O5e=Object.defineProperty,k5e=(t,e,r)=>e in t?O5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,B5e=(t,e,r)=>k5e(t,e+"",r);let NN,U5e=class xte{constructor(e){B5e(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,r){return await this.storage.setItem(e,r)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return NN||(NN=new xte(e)),NN}};var M5e=Object.defineProperty,D5e=Object.defineProperties,j5e=Object.getOwnPropertyDescriptors,LD=Object.getOwnPropertySymbols,L5e=Object.prototype.hasOwnProperty,F5e=Object.prototype.propertyIsEnumerable,FD=(t,e,r)=>e in t?M5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$5e=(t,e)=>{for(var r in e||(e={}))L5e.call(e,r)&&FD(t,r,e[r]);if(LD)for(var r of LD(e))F5e.call(e,r)&&FD(t,r,e[r]);return t},q5e=(t,e)=>D5e(t,j5e(e));async function H5e(t,e){const r=Wd(t.result.capabilities.caip345.caip2),n=t.result.capabilities.caip345.transactionHashes,s=await Promise.allSettled(n.map(d=>z5e(r.reference,d,e))),i=s.filter(d=>d.status==="fulfilled").map(d=>d.value).filter(d=>d);s.filter(d=>d.status==="rejected").forEach(d=>console.warn("Failed to fetch transaction receipt:",d.reason));const o=!i.length||i.some(d=>!d),a=i.every(d=>d?.status==="0x1"),c=i.every(d=>d?.status==="0x0"),u=i.some(d=>d?.status==="0x0");let l;return o?l=100:a?l=200:c?l=500:u&&(l=600),{id:t.result.id,version:t.request.version,atomic:t.request.atomicRequired,chainId:t.request.chainId,capabilities:t.result.capabilities,receipts:i,status:l}}async function z5e(t,e,r){return await r(parseInt(t)).request(Ms("eth_getTransactionReceipt",[e]))}async function W5e({sendCalls:t,storage:e}){const r=await e.getItem(Zm);await e.setItem(Zm,q5e($5e({},r),{[t.result.id]:{request:t.request,result:t.result,expiry:Ps(g5e)}}))}async function V5e({resultId:t,storage:e}){const r=await e.getItem(Zm);if(r){delete r[t],await e.setItem(Zm,r);for(const n in r)dl(r[n].expiry)&&delete r[n];await e.setItem(Zm,r)}}async function G5e({resultId:t,storage:e}){const r=await e.getItem(Zm),n=r?.[t];if(n&&!dl(n.expiry))return n;await V5e({resultId:t,storage:e})}var K5e=Object.defineProperty,Z5e=Object.defineProperties,Y5e=Object.getOwnPropertyDescriptors,$D=Object.getOwnPropertySymbols,J5e=Object.prototype.hasOwnProperty,X5e=Object.prototype.propertyIsEnumerable,sO=(t,e,r)=>e in t?K5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,PN=(t,e)=>{for(var r in e||(e={}))J5e.call(e,r)&&sO(t,r,e[r]);if($D)for(var r of $D(e))X5e.call(e,r)&&sO(t,r,e[r]);return t},RN=(t,e)=>Z5e(t,Y5e(e)),cp=(t,e,r)=>sO(t,typeof e!="symbol"?e+"":e,r);let Q5e=class{constructor(e){cp(this,"name","eip155"),cp(this,"client"),cp(this,"chainId"),cp(this,"namespace"),cp(this,"httpProviders"),cp(this,"events"),cp(this,"storage"),this.namespace=e.namespace,this.events=Ym("events"),this.client=Ym("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=U5e.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r);const n=this.chainId;this.chainId=parseInt(e),this.events.emit(gk.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${n}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Ete(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fo(new cc(n,Ym("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=parseInt(_5e(r));e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(e){const r=e||this.chainId;return this.httpProviders[r]||(this.httpProviders=RN(PN({},this.httpProviders),{[r]:this.createHttpProvider(r)}),this.httpProviders[r])}async handleSwitchChain(e){var r,n;let s=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,s,i,o;const a=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),l=((o=u?.sessionProperties)==null?void 0:o.capabilities)||{},d=`${a}${c.join(",")}`,f=l?.[d];if(f)return f;let p;try{p=R5e(u,a,c)}catch(h){console.warn("Failed to extract capabilities from session",h)}if(p)return p;const g=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:RN(PN({},u.sessionProperties||{}),{capabilities:RN(PN({},l||{}),{[d]:g})})})}catch(h){console.warn("Failed to update session with capabilities",h)}return g}async getCallStatus(e){var r,n,s;const i=this.client.session.get(e.topic),o=(r=i.sessionProperties)==null?void 0:r.bundler_name;if(o){const u=this.getBundlerUrl(e.chainId,o);try{return await this.getUserOperationReceipt(u,e)}catch(l){console.warn("Failed to fetch call status from bundler",l,u)}}const a=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,e)}catch(u){console.warn("Failed to fetch call status from custom bundler",u,a)}const c=await G5e({resultId:(s=e.request.params)==null?void 0:s[0],storage:this.storage});if(c)try{return await H5e(c,this.getHttpProvider.bind(this))}catch(u){console.warn("Failed to fetch call status from stored send calls",u,c)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ms("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,r){return`${p5e}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}async sendCalls(e){var r,n,s;const i=await this.client.request(e),o=(r=e.request.params)==null?void 0:r[0],a=i?.id,c=i?.capabilities||{},u=(n=c?.caip345)==null?void 0:n.caip2,l=(s=c?.caip345)==null?void 0:s.transactionHashes;return!a||!u||!(l!=null&&l.length)||await W5e({sendCalls:{request:o,result:i},storage:this.storage}),i}};var eTe=Object.defineProperty,tTe=(t,e,r)=>e in t?eTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ig=(t,e,r)=>tTe(t,typeof e!="symbol"?e+"":e,r);let rTe=class{constructor(e){Ig(this,"name",vte),Ig(this,"client"),Ig(this,"httpProviders"),Ig(this,"events"),Ig(this,"namespace"),Ig(this,"chainId"),this.namespace=e.namespace,this.events=Ym("events"),this.client=Ym("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r);const n=this.chainId;this.chainId=e,this.events.emit(gk.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${n}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return Wd(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(s=>{var i,o;const a=Wd(s),c=(o=(i=this.namespace)==null?void 0:i.rpcMap)==null?void 0:o[`${a.namespace}:${a.reference}`];n[a.reference]=this.createHttpProvider(s,c)}),n}getHttpProvider(e){const r=Wd(e).reference,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ete(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fo(new cc(n,Ym("disableProviderPing")))}};var nTe=Object.defineProperty,sTe=Object.defineProperties,iTe=Object.getOwnPropertyDescriptors,qD=Object.getOwnPropertySymbols,oTe=Object.prototype.hasOwnProperty,aTe=Object.prototype.propertyIsEnumerable,iO=(t,e,r)=>e in t?nTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ub=(t,e)=>{for(var r in e||(e={}))oTe.call(e,r)&&iO(t,r,e[r]);if(qD)for(var r of qD(e))aTe.call(e,r)&&iO(t,r,e[r]);return t},f2=(t,e)=>sTe(t,iTe(e)),Ba=(t,e,r)=>iO(t,typeof e!="symbol"?e+"":e,r);let cTe=class Cte{constructor(e){Ba(this,"client"),Ba(this,"namespaces"),Ba(this,"optionalNamespaces"),Ba(this,"sessionProperties"),Ba(this,"scopedProperties"),Ba(this,"events",new Ly),Ba(this,"rpcProviders",{}),Ba(this,"session"),Ba(this,"providerOpts"),Ba(this,"logger"),Ba(this,"uri"),Ba(this,"disableProviderPing",!1),Ba(this,"connectParams");var r,n;this.providerOpts=e,this.logger=lk({logger:(r=e.logger)!=null?r:ID,name:(n=this.providerOpts.name)!=null?n:bte}),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const r=new Cte(e);return await r.initialize(),r}async request(e,r,n){const[s,i]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Ub({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,s){const i=new Date().getTime();this.request(e,n,s).then(o=>r(null,Rl(i,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Gn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.connectParams=e,this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:s}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const i=await s();if(this.session=i.session,this.session){const o=kD(this.session.namespaces);this.namespaces=d2(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){var r,n;const{uri:s,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties,authentication:(r=this.connectParams)==null?void 0:r.authentication,walletPay:(n=this.connectParams)==null?void 0:n.walletPay});s&&(this.uri=s,this.events.emit("display_uri",s));const o=await i();this.session=o;const a=kD(o.namespaces);return this.namespaces=d2(this.namespaces,a),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,s]=this.validateChain(e);this.getProvider(n).setDefaultChain(s,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(!Gd(r))return;for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}catch(r){this.logger.warn(r,"Failed to cleanup pending pairings")}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await N6e.init({core:this.providerOpts.core,logger:this.providerOpts.logger||ID,relayUrl:this.providerOpts.relayUrl||f5e,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error(n,"Failed to get session"),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>Bm(r)))];IN("client",this.client),IN("events",this.events),IN("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=A5e(r,this.session);if(n?.length===0)return;const s=_te(n),i=d2(this.namespaces,this.optionalNamespaces),o=f2(Ub({},i[r]),{accounts:n,chains:s});switch(r){case"eip155":this.rpcProviders[r]=new Q5e({namespace:o});break;default:this.rpcProviders[r]=new rTe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:s}=e;if(s!==((r=this.session)==null?void 0:r.topic))return;const{event:i}=n;if(i.name==="accountsChanged"){const o=i.data;o&&Gd(o)&&this.events.emit("accountsChanged",o.map(OD))}else if(i.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=Bm(o),u=SN(o)!==SN(a)?`${c}:${SN(a)}`:o;this.onChainChanged({currentCaipChainId:u})}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,s;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:i}=r,o=(s=this.client)==null?void 0:s.session.get(e);this.session=f2(Ub({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",f2(Ub({},Gn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(gk.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(f2(Ub({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[vte]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r={},optionalNamespaces:n={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=d2(r,n),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[r,n]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>Bm(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const s=Bm(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged({currentCaipChainId:e,previousCaipChainId:r,internal:n=!1}){if(!this.namespaces)return;const[s,i]=this.validateChain(e);i&&(this.updateNamespaceChain(s,i),n?(this.events.emit("chainChanged",i),this.emitAccountsChangedOnChainChange({namespace:s,currentCaipChainId:e,previousCaipChainId:r})):this.getProvider(s).setDefaultChain(i),await this.persist("namespaces",this.namespaces))}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:r,previousCaipChainId:n}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(OD);if(!Gd(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn(o,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(e,r){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${r}`,s={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.connectParams=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const s=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${u2}/${e}${s}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${u2}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${u2}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(u2)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn(r,"Failed to cleanup storage")}}};const HD=2147483648,uTe={convertEVMChainIdToCoinType(t){if(t>=HD)throw new Error("Invalid chainId");return(HD|t)>>>0}},Ec=Dn({suggestions:[],loading:!1}),lTe={state:Ec,subscribe(t){return ci(Ec,()=>t(Ec))},subscribeKey(t,e){return ui(Ec,t,e)},async resolveName(t){try{return await kt.lookupEnsName(t)}catch(e){const r=e;throw new Error(r?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(t){try{return await kt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Ec.loading=!0,Ec.suggestions=[];const e=await kt.getEnsNameSuggestions(t);return Ec.suggestions=e.suggestions||[],Ec.suggestions}catch(e){const r=I1.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{Ec.loading=!1}},async getNamesForAddress(t){try{if(!J.state.activeCaipNetwork)return[];const r=Ae.getEnsFromCacheForAddress(t);if(r)return r;const n=await kt.reverseLookupEnsName({address:t});return Ae.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=I1.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=J.state.activeCaipNetwork,r=J.getAccountData(e?.chainNamespace)?.address,n=Re.getAuthConnector();if(!e)throw new Error("Network not found");if(!r||!n)throw new Error("Address or auth connector not found");Ec.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});It.pushTransactionStack({onCancel(){It.replace("RegisterAccountName")}});const i=await ze.signMessage(s);Ec.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=uTe.convertEVMChainIdToCoinType(Number(o));await kt.registerEnsName({coinType:a,address:r,signature:i,message:s}),J.setAccountProp("profileName",t,e.chainNamespace),Ae.updateEnsCache({address:r,ens:[{name:t,registered_at:new Date().toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),It.replace("RegisterAccountNameSuccess")}catch(s){const i=I1.parseEnsApiError(s,`Error registering name ${t}`);throw It.replace("RegisterAccountName"),new Error(i)}finally{Ec.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){return t?.reasons?.[0]?.description||e}},I1=zc(lTe);function oO(t){try{return new URL(t)}catch{return null}}function dTe(t){const e=t.split("/"),r=e.length>0&&e[0]!==void 0?e[0]:"",n=r.lastIndexOf(":");return n===-1?{host:r}:{host:r.slice(0,n),port:r.slice(n+1)}}function fTe(t){const e=t.indexOf("://");if(e===-1)return null;const r=t.slice(0,e),n=e+3;let s=t.indexOf("/",n);s===-1&&(s=t.length);const i=t.slice(n,s),o=i.lastIndexOf(":");return o===-1?{scheme:r,host:i}:{scheme:r,host:i.slice(0,o),port:i.slice(o+1)}}function hTe(t,e){if(e.includes("://")){const o=oO(e);return o?o.origin===t:!1}const{host:r,port:n}=dTe(e),s=t.indexOf("://");if(s!==-1){const o=s+3;let a=t.indexOf("/",o);a===-1&&(a=t.length);const c=t.slice(o,a);if(n!==void 0)return`${r}:${n}`===c;const u=c.split(":")[0];return r===u}const i=oO(t);return i?n!==void 0?r===i.hostname&&n===(i.port||void 0):r===i.hostname:!1}function pTe(t,e,r){let n=r,s;const i=n.indexOf("://");i!==-1&&(s=n.slice(0,i),n=n.slice(i+3));const o=n.indexOf("/");o!==-1&&(n=n.slice(0,o));let a=n,c;const u=a.lastIndexOf(":");u!==-1&&(c=a.slice(u+1),a=a.slice(0,u));const l=a.split(".");for(const h of l)if(h.includes("*")&&h!=="*")return!1;const d=t.protocol.replace(/:$/u,"");if(s&&s!==d||c!==void 0&&c!=="*"&&c!==t.port)return!1;const f=fTe(e),g=(f?f.host:t.hostname).split(".");if(l.length!==g.length)return!1;for(let h=l.length-1;h>=0;h-=1){const y=l[h],E=g[h];if(y!=="*"&&y!==E)return!1}return!0}const gTe={ton:["ton_sendMessage","ton_signData"],solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},po={RPC_ERROR_CODE:{USER_REJECTED:5e3,USER_REJECTED_METHODS:5002},getMethodsByChainNamespace(t){return gTe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>n.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>n.add(s)),e.events&&Object.keys(e.events).forEach(s=>n.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&n.add(i)}),n.forEach(s=>{r[s]||(r[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{r[s]&&(r[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{r[s]&&(r[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{r[s]&&(r[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!r[a]||(r[a].rpcMap||(r[a].rpcMap={}),s.has(a)||(r[a].rpcMap={},s.add(a)),r[a].rpcMap[c]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const u=`${o}:${i}`,l=n[o];switch(l.chains.push(u),u){case"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":l.chains.push("solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ");break;case"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1":l.chains.push("solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K");break}return l?.rpcMap&&c&&(l.rpcMap[i]=c),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{const e=await I1.resolveName(t);return(e?.addresses?Object.values(e.addresses):[])[0]?.address||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isUserRejectedRequestError(t){try{if(typeof t=="object"&&t!==null){const e=t,r=typeof e.code=="number",n=r&&e.code===po.RPC_ERROR_CODE.USER_REJECTED_METHODS,s=r&&e.code===po.RPC_ERROR_CODE.USER_REJECTED;return n||s}return!1}catch{return!1}},isOriginAllowed(t,e,r){const n=[...e,...r];if(e.length===0)return!0;const s=oO(t);if(!s)return n.some(i=>!i.includes("*")&&i===t);if(s.hostname==="localhost"||s.hostname==="127.0.0.1")return!0;for(const i of n)if(i.includes("*")){if(pTe(s,t,i))return!0}else if(hTe(t,i))return!0;return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:r,onDisconnect:n,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){r&&t.on("connect",()=>{const a=po.getWalletConnectAccounts(t,e);r(a)}),n&&t.on("disconnect",()=>{n()}),s&&t.on("accountsChanged",a=>{try{const c=t.session?.namespaces?.[e]?.accounts||[],u=t.rpcProviders?.[e]?.getDefaultChain(),l=a.map(d=>{const f=c.find(h=>h.includes(`${e}:${u}:${d}`));if(!f)return;const{chainId:p,chainNamespace:g}=xs.parseCaipAddress(f);return{address:d,chainId:p,chainNamespace:g}}).filter(d=>d!==void 0);l.length>0&&s(l)}catch(c){console.warn("Failed to parse accounts for namespace on accountsChanged event",e,a,c)}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){const r=new Set,n=t?.session?.namespaces?.[e]?.accounts?.map(s=>xs.parseCaipAddress(s)).filter(({address:s})=>r.has(s.toLowerCase())?!1:(r.add(s.toLowerCase()),!0));return n&&n.length>0?n:[]}},mTe=[ae.CONNECTOR_ID.AUTH,ae.CONNECTOR_ID.WALLET_CONNECT];let H5=class{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=r=>J.getCaipNetworks(r),this.getConnectorId=r=>Re.getConnectorId(r),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:r}){const n=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===r?.toString());e&&n&&this.addConnection({connectorId:ae.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:n})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:ae.CONNECTOR_ID.AUTH,type:"AUTH",name:ae.CONNECTOR_NAMES.AUTH,provider:e,imageId:void 0,chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const r=new Set;this.availableConnections=[...e,...this.availableConnections].filter(n=>r.has(n.connectorId.toLowerCase())?!1:(r.add(n.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(r=>r.connectorId.toLowerCase()!==e.toLowerCase()),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,r){J.setAccountProp("status",e,r)}on(e,r){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(s=>s(r))}async connectWalletConnect(e){try{return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}catch(r){throw po.isUserRejectedRequestError(r)?new My(r):r}}async switchNetwork(e){const{caipNetwork:r}=e,n=br.getProviderId(r.chainNamespace),s=br.getProvider(r.chainNamespace);if(!s)throw new Error("Provider not found");if(n==="WALLET_CONNECT"){s.setDefaultChain(r.caipNetworkId);return}if(n==="AUTH"){const i=Re.getAuthConnector()?.provider;if(!i)throw new Error("Auth provider not found");const o=fo(r.chainNamespace);await i.switchNetwork({chainId:r.caipNetworkId});const a=await i.getUser({chainId:r.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r.id==="walletConnect");if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,r){if(e.length>0){const{address:n,chainId:s}=ke.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===s?.toString()),o=this.connectors.find(a=>a.id===r);n&&(this.emit("accountChanged",{address:n,chainId:s,connector:o}),this.addConnection({connectorId:r,accounts:e.map(a=>{const{address:c}=ke.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,r,n=!0){if(e.length>0){const{address:s}=ke.getAccount(e[0]),i=this.getConnection({connectorId:r,connections:this.connections,connectors:this.connectors});s&&this.getConnectorId(ae.CHAIN.EVM)?.toLowerCase()===r.toLowerCase()&&this.emit("accountChanged",{address:s,chainId:i?.caipNetwork?.id,connector:i?.connector}),this.addConnection({connectorId:r,accounts:e.map(o=>{const{address:a}=ke.getAccount(o);return{address:a}}),caipNetwork:i?.caipNetwork})}else n&&this.onDisconnect(r)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),this.getConnectorId(ae.CHAIN.EVM)?.toLowerCase()===e.toLowerCase()&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,r){const n=typeof e=="string"&&e.startsWith("0x")?parseInt(e,16).toString():e.toString(),s=this.getConnection({connectorId:r,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(o=>o.chainNamespace===this.namespace).find(o=>o.id.toString()===n);s&&this.addConnection({connectorId:r,accounts:s.accounts,caipNetwork:i}),this.getConnectorId(ae.CHAIN.EVM)?.toLowerCase()===r.toLowerCase()&&this.emit("switchNetwork",{chainId:n})}listenProviderEvents(e,r){if(mTe.includes(e))return;const n=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(r.on("disconnect",i),r.on("accountsChanged",n),r.on("chainChanged",s),this.providerHandlers[e]={provider:r,disconnect:i,accountsChanged:n,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:r,disconnect:n,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];r.removeListener("disconnect",n),r.removeListener("accountsChanged",s),r.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){const e=this.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[r]=e.accounts;this.emit("accountChanged",{address:r?.address,chainId:e.caipNetwork?.id,connector:e.connector})}}getConnection({address:e,connectorId:r,connections:n,connectors:s}){if(r){const o=n.find(u=>u.connectorId.toLowerCase()===r.toLowerCase());if(!o)return null;const a=s.find(u=>u.id.toLowerCase()===o.connectorId.toLowerCase()),c=e?o.accounts.find(u=>u.address.toLowerCase()===e.toLowerCase()):o.accounts[0];return{...o,account:c,connector:a}}const i=n.find(o=>o.accounts.length>0&&s.some(a=>a.id.toLowerCase()===o.connectorId.toLowerCase()));if(i){const[o]=i.accounts,a=s.find(c=>c.id.toLowerCase()===i.connectorId.toLowerCase());return{...i,account:o,connector:a}}return null}},up=null;const To={getSIWX(){return we.state.siwx},async initializeIfEnabled(t=J.getActiveCaipAddress()){const e=we.state.siwx;if(!(e&&t))return;const[r,n,s]=t.split(":");if(J.checkIfSupportedNetwork(r,`${r}:${n}`))try{if(we.state.remoteFeatures?.emailCapture){const o=J.getAccountData(r)?.user;await dr.open({view:"DataCapture",data:{email:o?.email??void 0}});return}if(up&&await up,(await e.getSessions(`${r}:${n}`,s)).length)return;await dr.open({view:"SIWXSignMessage"})}catch(i){console.error("SIWXUtil:initializeIfEnabled",i),Zt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties(i)}),await ze._getClient()?.disconnect().catch(console.error),It.reset("Connect"),ml.showError("A problem occurred while trying initialize authentication")}},async isAuthenticated(t=J.getActiveCaipAddress()){if(!we.state.siwx||!t)return!0;const{chainNamespace:r,chainId:n,address:s}=xs.parseCaipAddress(t),i=`${r}:${n}`;return(await To.getSessions({address:s,caipNetworkId:i})).length>0},async requestSignMessage(){const t=we.state.siwx,e=ke.getPlainAddress(J.getActiveCaipAddress()),r=c1();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");try{const n=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),s=n.toString();let i="";t.signMessage?i=await t.signMessage({message:s,chainId:r.caipNetworkId,accountAddress:e}):(Re.getConnectorId(r.chainNamespace)===ae.CONNECTOR_ID.AUTH&&It.pushTransactionStack({}),i=await ze.signMessage(s)||""),await t.addSession({data:n,message:s,signature:i}),J.setLastConnectedSIWECaipNetwork(r),dr.close(),Zt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(n){(!dr.state.open||It.state.view==="ApproveTransaction")&&await dr.open({view:"SIWXSignMessage"}),ml.showError("Error signing message"),Zt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties(n)}),console.error("SWIXUtil:requestSignMessage",n)}},async cancelSignMessage(){try{const t=this.getSIWX();if(t?.getRequired?.()){const r=J.getLastConnectedSIWECaipNetwork();if(r){const n=await t?.getSessions(r?.caipNetworkId,ke.getPlainAddress(J.getActiveCaipAddress())||"");n&&n.length>0?await J.switchActiveNetwork(r):await ze.disconnect()}else await ze.disconnect()}else dr.close();dr.close(),Zt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(t){console.error("SIWXUtil:cancelSignMessage",t)}},async getAllSessions(){const t=this.getSIWX(),e=J.getAllRequestedCaipNetworks(),r=[];return await Promise.all(e.map(async n=>{const s=await t?.getSessions(n.caipNetworkId,ke.getPlainAddress(J.getActiveCaipAddress())||"");s&&r.push(...s)})),r},async getSessions(t){const e=we.state.siwx;let r=t?.address;if(!r){const s=J.getActiveCaipAddress();r=ke.getPlainAddress(s)}let n=t?.caipNetworkId;return n||(n=J.getActiveCaipNetwork()?.caipNetworkId),e&&r&&n?e.getSessions(n,r):[]},async isSIWXCloseDisabled(){const t=this.getSIWX();if(t){const e=It.state.view==="ApproveTransaction",r=It.state.view==="SIWXSignMessage";if(e||r)return t.getRequired?.()&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:r,preferredAccountType:n,chainNamespace:s}){const i=To.getSIWX(),o=c1();if(!i||!s.includes(ae.CHAIN.EVM)||we.state.remoteFeatures?.emailCapture){const d=await t.connect({chainId:e,socialUri:r,preferredAccountType:n});return{address:d.address,chainId:d.chainId,accounts:d.accounts}}const a=`${s}:${e}`,c=await i.createMessage({chainId:a,accountAddress:"<<AccountAddress>>"}),u={accountAddress:c.accountAddress,chainId:c.chainId,domain:c.domain,uri:c.uri,version:c.version,nonce:c.nonce,notBefore:c.notBefore,statement:c.statement,resources:c.resources,requestId:c.requestId,issuedAt:c.issuedAt,expirationTime:c.expirationTime,serializedMessage:c.toString()},l=await t.connect({chainId:e,socialUri:r,siwxMessage:u,preferredAccountType:n});return u.accountAddress=l.address,u.serializedMessage=l.message||"",l.signature&&l.message&&await To.addEmbeddedWalletSession(u,l.message,l.signature),J.setLastConnectedSIWECaipNetwork(o),{address:l.address,chainId:l.chainId,accounts:l.accounts}},async addEmbeddedWalletSession(t,e,r){if(up)return up;const n=To.getSIWX();return n?(up=n.addSession({data:t,message:e,signature:r}).finally(()=>{up=null}),up):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){const n=To.getSIWX(),s=c1(),i=new Set(e.map(u=>u.split(":")[0]));if(!n||i.size!==1||!i.has("eip155"))return!1;const o=await n.createMessage({chainId:c1()?.caipNetworkId||"",accountAddress:""}),a=await t.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:r,chains:[o.chainId,...e.filter(u=>u!==o.chainId)]});ml.showLoading("Authenticating...",{autoClose:!1});const c={...a.session.peer.metadata,name:a.session.peer.metadata.name,icon:a.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"};if(J.setAccountProp("connectedWalletInfo",c,Array.from(i)[0]),a?.auths?.length){const u=a.auths.map(l=>{const d=t.client.formatAuthMessage({request:l.p,iss:l.p.iss});return{data:{...l.p,accountAddress:l.p.iss.split(":").slice(-1).join(""),chainId:l.p.iss.split(":").slice(2,4).join(":"),uri:l.p.aud??"",version:l.p.version||o.version,expirationTime:l.p.exp,issuedAt:l.p.iat,notBefore:l.p.nbf},message:d,signature:l.s.s,cacao:l}});try{await n.setSessions(u),s&&J.setLastConnectedSIWECaipNetwork(s),Zt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:To.getSIWXEventProperties()})}catch(l){throw console.error("SIWX:universalProviderAuth - failed to set sessions",l),Zt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:To.getSIWXEventProperties(l)}),await t.disconnect().catch(console.error),l}finally{ml.hide()}}return!0},getSIWXEventProperties(t){const e=J.state.activeChain;if(!e)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:J.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:fo(e)===Ss.ACCOUNT_TYPES.SMART_ACCOUNT,message:t?ke.parseError(t):void 0}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};let z5=class{constructor({provider:e,namespace:r}){this.id=ae.CONNECTOR_ID.WALLET_CONNECT,this.name="WalletConnect",this.type="WALLET_CONNECT",this.imageId="ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",this.getCaipNetworks=J.getCaipNetworks.bind(J),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=r}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const r=this.getCaipNetworks(),n=we.state.universalProviderConfigOverride,s=po.createNamespaces(r,n);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return To.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:yTe})}};const yTe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],nu=Dn({message:"",variant:"info",open:!1}),bTe={state:nu,subscribeKey(t,e){return ui(nu,t,e)},open(t,e){const{debug:r}=we.state,{code:n,displayMessage:s,debugMessage:i}=t;s&&r&&(nu.message=s,nu.variant=e,nu.open=!0),i&&console.error(typeof i=="function"?i():i,n?{code:n}:void 0)},warn(t,e,r){nu.open=!0,nu.message=t,nu.variant="warning",e&&console.warn(e,r)},close(){nu.open=!1,nu.message="",nu.variant="info"}},Ci=zc(bTe),wTe={eip155:{native:{assetNamespace:"slip44",assetReference:"60"},defaultTokenNamespace:"erc20"},solana:{native:{assetNamespace:"slip44",assetReference:"501"},defaultTokenNamespace:"token"}};class vTe extends Error{}function ETe(){const{sdkType:t,sdkVersion:e,projectId:r}=we.getSnapshot(),n=new URL("https://rpc.walletconnect.org/v1/json-rpc");return n.searchParams.set("projectId",r),n.searchParams.set("st",t),n.searchParams.set("sv",e),n.searchParams.set("source","fund-wallet"),n.toString()}async function mk(t,e){const r=ETe(),{projectId:n}=we.getSnapshot(),s={jsonrpc:"2.0",id:1,method:t,params:{...e||{},projectId:n}},o=await(await fetch(r,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}})).json();if(o.error)throw new vTe(o.error.message);return o}async function Ett(t){return(await mk("reown_getExchanges",t)).result}async function _tt(t){return(await mk("reown_getExchangePayUrl",t)).result}async function Att(t){return(await mk("reown_getExchangeBuyStatus",t)).result}function xtt(t,e){const{chainNamespace:r,chainId:n}=xs.parseCaipNetworkId(t),s=wTe[r];if(!s)throw new Error(`Unsupported chain namespace for CAIP-19 formatting: ${r}`);let i=s.native.assetNamespace,o=s.native.assetReference;return e!=="native"&&(i=s.defaultTokenNamespace,o=e),`${`${r}:${n}`}/${i}:${o}`}const _Te={network:"eip155:1",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},ATe={network:"eip155:8453",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},Ste={network:"eip155:8453",asset:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},xTe={asset:"0x036CbD53842c5426634e7929541eC2318f3dCF7e"},CTe={network:"eip155:84532",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},STe={network:"eip155:1",asset:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},ITe={network:"eip155:42161",asset:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},TTe={network:"eip155:137",asset:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},NTe={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},PTe={network:"eip155:1",asset:"0xdAC17F958D2ee523a2206206994597C13D831ec7",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},RTe={network:"eip155:10",asset:"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},OTe={network:"eip155:42161",asset:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},kTe={network:"eip155:137",asset:"0xc2132d05d31c914a87c6611c10748aeb04b58e8f",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},BTe={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},UTe={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"native",metadata:{name:"Solana",symbol:"SOL",decimals:9}},MTe={ethereumETH:_Te,baseETH:ATe,baseUSDC:Ste,baseSepoliaETH:CTe,ethereumUSDC:STe,arbitrumUSDC:ITe,polygonUSDC:TTe,solanaUSDC:NTe,ethereumUSDT:PTe,optimismUSDT:RTe,arbitrumUSDT:OTe,polygonUSDT:kTe,solanaUSDT:BTe,solanaSOL:UTe};function Ctt(t){return Object.values(MTe).filter(e=>e.network===t)}const cr={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",BINANCE_CONNECTOR_NAME:"Binance Wallet",EIP155:ae.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"AUTH",getSDKVersionWarningMessage(t,e){return`
     @@@@@@@           @@@@@@@@@@@@@@@@@@      
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@   @@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@   @@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@  @@@@@@@@@@@@@
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@   @@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@   @@@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@  @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@   @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
      @@@@@            @@@@@@@@@@@@@@@@@@  
      
AppKit SDK version ${t} is outdated. Latest version is ${e}. Please update to the latest version for bug fixes and new features.
            
Changelog: https://github.com/reown-com/appkit/releases
NPM Registry: https://www.npmjs.com/package/@reown/appkit`}},ii={ConnectorExplorerIds:{[ae.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ae.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ae.CONNECTOR_ID.BASE_ACCOUNT]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ae.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ae.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ae.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[cr.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[cr.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[cr.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[cr.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[cr.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[cr.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[cr.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[cr.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[cr.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[cr.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[cr.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13",[cr.OKX_CONNECTOR_NAME]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[cr.BINANCE_CONNECTOR_NAME]:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200","00000008819873e925422c1ff0f99f7c":"b3406e4a-bbfc-44fb-e3a6-89673c78b700","-239":"20f673c0-095e-49b2-07cf-eb5049dcf600","-3":"20f673c0-095e-49b2-07cf-eb5049dcf600"},ConnectorImageIds:{[ae.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ae.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ae.CONNECTOR_ID.BASE_ACCOUNT]:"bba2c8be-7fd1-463e-42b1-796ecb0ad200",[ae.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ae.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ae.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ae.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ae.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ae.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ae.CONNECTOR_ID.COINBASE]:"Coinbase",[ae.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ae.CONNECTOR_ID.BASE_ACCOUNT]:"Base Account",[ae.CONNECTOR_ID.LEDGER]:"Ledger",[ae.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ae.CONNECTOR_ID.INJECTED]:"INJECTED",[ae.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ae.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ae.CONNECTOR_ID.AUTH]:"AUTH",[cr.CONNECTOR_TYPE_AUTH]:"AUTH"}},ho={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${cr.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return t?.toLowerCase()===e?.toLowerCase()},getActiveNamespaceConnectedToAuth(){const t=J.state.activeChain;return ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Re.getConnectorId(e)===ae.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:r}){let n=0;return new Promise(s=>{async function i(){return n+=1,await t()?s(!0):n>=r?s(!1):(setTimeout(i,e),null)}i()})},userChainIdToChainNamespace(t){if(typeof t=="number")return ae.CHAIN.EVM;const[e]=t.split(":");return e},getOtherAuthNamespaces(t){return t?ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.filter(n=>n!==t):[]},getConnectorStorageInfo(t,e){const n=Ae.getConnections()[e]??[];return{hasDisconnected:Ae.isConnectorDisconnected(t,e),hasConnected:n.some(s=>ho.isLowerCaseMatch(s.connectorId,t))}}},DTe=new AbortController,Si={EmbeddedWalletAbortController:DTe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${o1()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com. [PID: ${we.state.projectId}]`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your systemâ€™s date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`},INACTIVE_NAMESPACE_NOT_CONNECTED:{code:"APKTW001",displayMessage:"Inactive Namespace Not Connected",debugMessage:(t,e)=>`An error occurred while connecting an inactive namespace ${t}: "${e}"`},INVALID_EMAIL:{code:"APKTW002",displayMessage:"Invalid Email Address",debugMessage:"Please enter a valid email address"}}},Ite={TOKEN_ADDRESSES_BY_SYMBOL:{USDC:{8453:Ste.asset,84532:xTe.asset}},getTokenSymbolByAddress(t){if(!t)return;const[e]=Object.entries(Ite.TOKEN_ADDRESSES_BY_SYMBOL).find(([r,n])=>Object.values(n).includes(t))??[];return e}},jTe={createLogger(t,e="error"){const r=A4({level:e}),{logger:n}=E5({opts:r});return n.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},n}},LTe="rpc.walletconnect.org";function zD(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const ON=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","eip155:80094","eip155:80069","eip155:560048","eip155:31","eip155:2818","eip155:57054","eip155:911867","eip155:534351","eip155:1112","eip155:534352","eip155:1111","eip155:146","eip155:130","eip155:1284","eip155:30","eip155:2810","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Em={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===LTe}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ae.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ae.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){const n=t.rpcUrls?.default?.http?.[0];return ON.includes(e)?zD(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=t.rpcUrls?.default?.http?.[0],a=this.getDefaultRpcUrl(t,i,r),c=t?.rpcUrls?.chainDefault?.http?.[0]||o,u=n?.[i]?.map(f=>f.url)||[],l=[...u,...a?[a]:[]],d=[...u];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:ii.NetworkImageIds[t.id],imageUrl:e?.[t.id]},rpcUrls:{...t.rpcUrls,default:{http:l},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(s=>Em.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){const n=[];return r?.forEach(s=>{n.push(dh(s.url,s.config))}),ON.includes(t.caipNetworkId)&&n.push(dh(zD(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),t?.rpcUrls?.default?.http?.forEach(s=>{n.push(dh(s))}),e6(n)},extendWagmiTransports(t,e,r){if(ON.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return e6([r,dh(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ae.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){const e=Ae.getActiveCaipNetworkId(),r=J.getAllRequestedCaipNetworks(),n=Array.from(J.state.chains?.keys()||[]),s=e?.split(":")[0],i=s?n.includes(s):!1,o=r?.find(c=>c.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||r?.[0]}};let FTe=class pI{constructor(){}static getInstance({projectId:e,chainId:r,enableLogger:n,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a}){const{metadata:c,sdkVersion:u,sdkType:l}=we.getSnapshot();return pI.instance||(pI.instance=new zde({projectId:e,chainId:r,enableLogger:n,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:!!we.state.remoteFeatures?.emailCapture,metadata:c,sdkVersion:u,sdkType:l})),pI.instance}};var WD={};const $Te={ACCOUNT_TABS:[{label:"Tokens"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof WD<"u"?WD.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120},VIEWS_WITH_LEGAL_FOOTER:["Connect","ConnectWallets","OnRampTokenSelect","OnRampFiatSelect","OnRampProviders"],VIEWS_WITH_DEFAULT_FOOTER:["Networks"]},qTe=[ii.ConnectorExplorerIds[ae.CONNECTOR_ID.COINBASE],ii.ConnectorExplorerIds[ae.CONNECTOR_ID.COINBASE_SDK],ii.ConnectorExplorerIds[ae.CONNECTOR_ID.BASE_ACCOUNT],ii.ConnectorExplorerIds[cr.SOLFLARE_CONNECTOR_NAME],ii.ConnectorExplorerIds[cr.PHANTOM_CONNECTOR_NAME],ii.ConnectorExplorerIds[cr.BINANCE_CONNECTOR_NAME]],f1={filterOutDuplicatesByRDNS(t){const e=we.state.enableEIP6963?Re.state.connectors:[],r=Ae.getRecentWallets(),n=e.map(a=>a.info?.rdns).filter(Boolean),s=r.map(a=>a.rdns).filter(Boolean),i=n.concat(s);if(i.includes("io.metamask.mobile")&&ke.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a?.rdns&&i.includes(String(a.rdns))||!a?.rdns&&e.some(u=>u.name===a.name)))},filterOutDuplicatesByIds(t){const e=Re.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"||a.type==="MULTI_CHAIN"),r=Ae.getRecentWallets(),n=e.map(a=>a.explorerId||a.explorerWallet?.id||a.id),s=r.map(a=>a.id),i=n.concat(s);return t.filter(a=>!i.includes(a?.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Re.state,{featuredWalletIds:r}=we.state,n=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>(a.info?.rdns&&(o[a.info.rdns]=!0),o),{});return t.map(o=>({...o,installed:!!o.rdns&&!!n[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(r?.length){const u=r.indexOf(o.id),l=r.indexOf(a.id);if(u!==-1&&l!==-1)return u-l;if(u!==-1)return-1;if(l!==-1)return 1}return 0})},getConnectOrderMethod(t,e){const r=t?.connectMethodsOrder||we.state.features?.connectMethodsOrder,n=e||Re.state.connectors;if(r)return r;const{injected:s,announced:i}=gI.getConnectorsByType(n,pt.state.recommended,pt.state.featured),o=s.filter(gI.showConnector),a=i.filter(gI.showConnector);return o.length||a.length?["wallet","email","social"]:$Te.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&pt.state.excludedWallets.some(n=>n.rdns===t.rdns),r=!!t.name&&pt.state.excludedWallets.some(n=>ho.isLowerCaseMatch(n.name,t.name));return e||r},markWalletsWithDisplayIndex(t){return t.map((e,r)=>({...e,display_index:r}))},filterWalletsByWcSupport(t){return ze.state.wcBasic?t.filter(e=>e.supports_wc):ke.isMobile()?t.filter(e=>e.supports_wc||qTe.includes(e.id)):t}},gI={getConnectorsByType(t,e,r){const{customWallets:n}=we.state,s=Ae.getRecentWallets(),i=f1.filterOutDuplicateWallets(e),o=f1.filterOutDuplicateWallets(r),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),u=t.filter(d=>d.type==="INJECTED"),l=t.filter(d=>d.type==="EXTERNAL");return{custom:n,recent:s,external:l,multiChain:a,announced:c,injected:u,recommended:i,featured:o}},showConnector(t){const e=t.info?.rdns,r=!!e&&pt.state.excludedWallets.some(s=>!!s.rdns&&s.rdns===e),n=!!t.name&&pt.state.excludedWallets.some(s=>ho.isLowerCaseMatch(s.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ke.isMobile()||ke.isMobile()&&!e&&!ze.checkInstalled())||r||n)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(r||n))},getIsConnectedWithWC(){return Array.from(J.state.chains.values()).some(r=>Re.getConnectorId(r.namespace)===ae.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=we.state.features?.connectorTypeOrder??[]}){const l=[{type:"walletConnect",isEnabled:!0},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(g=>g.isEnabled),d=new Set(l.map(g=>g.type)),f=c.filter(g=>d.has(g)).map(g=>({type:g,isEnabled:!0})),p=l.filter(({type:g})=>!f.some(({type:y})=>y===g));return Array.from(new Set([...f,...p].map(({type:g})=>g)))},sortConnectorsByExplorerWallet(t){return[...t].sort((e,r)=>e.explorerWallet&&r.explorerWallet?(e.explorerWallet.order??0)-(r.explorerWallet.order??0):e.explorerWallet?-1:r.explorerWallet?1:0)},getAuthName({email:t,socialUsername:e,socialProvider:r}){return e?r&&r==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){try{if(t.name==="Browser Wallet"&&!ke.isMobile())return{accounts:[],chainId:void 0};if(t.id===ae.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[e,r]=await Promise.all([t.provider?.request({method:"eth_accounts"}),t.provider?.request({method:"eth_chainId"}).then(n=>Number(n))]);return{accounts:e,chainId:r}}catch(e){return console.warn(`Failed to fetch provider data for ${t.name}`,e),{accounts:[],chainId:void 0}}},getFilteredCustomWallets(t){const e=Ae.getRecentWallets(),r=Re.state.connectors.map(o=>o.info?.rdns).filter(Boolean),n=e.map(o=>o.rdns).filter(Boolean),s=r.concat(n);if(s.includes("io.metamask.mobile")&&ke.isMobile()){const o=s.indexOf("io.metamask.mobile");s[o]="io.metamask"}return t.filter(o=>!s.includes(String(o?.rdns)))},hasWalletConnector(t){return Re.state.connectors.some(e=>e.id===t.id||e.name===t.name)},isWalletCompatibleWithCurrentChain(t){const e=J.state.activeChain;return e&&t.chains?t.chains.some(r=>{const n=r.split(":")[0];return e===n}):!0},getFilteredRecentWallets(){return Ae.getRecentWallets().filter(r=>!f1.isExcluded(r)).filter(r=>!this.hasWalletConnector(r)).filter(r=>this.isWalletCompatibleWithCurrentChain(r))},getCappedRecommendedWallets(t){const{connectors:e}=Re.state,{customWallets:r,featuredWalletIds:n}=we.state,s=e.find(S=>S.id==="walletConnect"),i=e.filter(S=>S.type==="INJECTED"||S.type==="ANNOUNCED"||S.type==="MULTI_CHAIN");if(!s&&!i.length&&!r?.length)return[];const o=t8.isEmailEnabled(),a=t8.isSocialsEnabled(),c=i.filter(S=>S.name!=="Browser Wallet"&&S.name!=="WalletConnect"),u=n?.length||0,l=r?.length||0,d=c.length||0,f=o?1:0,p=a?1:0,g=u+l+d+f+p,y=Math.max(0,4-g);return y<=0?[]:f1.filterOutDuplicateWallets(t).slice(0,y)}};const mI=globalThis,yk=mI.ShadowRoot&&(mI.ShadyCSS===void 0||mI.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,bk=Symbol(),VD=new WeakMap;let Tte=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==bk)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(yk&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=VD.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&VD.set(r,e))}return e}toString(){return this.cssText}};const ds=t=>new Tte(typeof t=="string"?t:t+"",void 0,bk),uo=(t,...e)=>{const r=t.length===1?t[0]:e.reduce(((n,s,i)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1]),t[0]);return new Tte(r,t,bk)},HTe=(t,e)=>{if(yk)t.adoptedStyleSheets=e.map((r=>r instanceof CSSStyleSheet?r:r.styleSheet));else for(const r of e){const n=document.createElement("style"),s=mI.litNonce;s!==void 0&&n.setAttribute("nonce",s),n.textContent=r.cssText,t.appendChild(n)}},GD=yk?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return ds(r)})(t):t;const{is:zTe,defineProperty:WTe,getOwnPropertyDescriptor:VTe,getOwnPropertyNames:GTe,getOwnPropertySymbols:KTe,getPrototypeOf:ZTe}=Object,W5=globalThis,KD=W5.trustedTypes,YTe=KD?KD.emptyScript:"",JTe=W5.reactiveElementPolyfillSupport,T1=(t,e)=>t,aO={toAttribute(t,e){switch(e){case Boolean:t=t?YTe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Nte=(t,e)=>!zTe(t,e),ZD={attribute:!0,type:String,converter:aO,reflect:!1,useDefault:!1,hasChanged:Nte};Symbol.metadata??=Symbol("metadata"),W5.litPropertyMetadata??=new WeakMap;let _m=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=ZD){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),s=this.getPropertyDescriptor(e,n,r);s!==void 0&&WTe(this.prototype,e,s)}}static getPropertyDescriptor(e,r,n){const{get:s,set:i}=VTe(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get:s,set(o){const a=s?.call(this);i?.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??ZD}static _$Ei(){if(this.hasOwnProperty(T1("elementProperties")))return;const e=ZTe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(T1("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(T1("properties"))){const r=this.properties,n=[...GTe(r),...KTe(r)];for(const s of n)this.createProperty(s,r[s])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,s]of r)this.elementProperties.set(n,s)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const s=this._$Eu(r,n);s!==void 0&&this._$Eh.set(s,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const s of n)r.unshift(GD(s))}else e!==void 0&&r.push(GD(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return HTe(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){const n=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,n);if(s!==void 0&&n.reflect===!0){const i=(n.converter?.toAttribute!==void 0?n.converter:aO).toAttribute(r,n.type);this._$Em=e,i==null?this.removeAttribute(s):this.setAttribute(s,i),this._$Em=null}}_$AK(e,r){const n=this.constructor,s=n._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const i=n.getPropertyOptions(s),o=typeof i.converter=="function"?{fromAttribute:i.converter}:i.converter?.fromAttribute!==void 0?i.converter:aO;this._$Em=s;const a=o.fromAttribute(r,i.type);this[s]=a??this._$Ej?.get(s)??a,this._$Em=null}}requestUpdate(e,r,n){if(e!==void 0){const s=this.constructor,i=this[e];if(n??=s.getPropertyOptions(e),!((n.hasChanged??Nte)(i,r)||n.useDefault&&n.reflect&&i===this._$Ej?.get(e)&&!this.hasAttribute(s._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:s,wrapped:i},o){n&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??r??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),s===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[s,i]of this._$Ep)this[s]=i;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[s,i]of n){const{wrapped:o}=i,a=this[s];o!==!0||this._$AL.has(s)||a===void 0||this.C(s,void 0,i,a)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),this._$EO?.forEach((n=>n.hostUpdate?.())),this.update(r)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(r)}willUpdate(e){}_$AE(e){this._$EO?.forEach((r=>r.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}};_m.elementStyles=[],_m.shadowRootOptions={mode:"open"},_m[T1("elementProperties")]=new Map,_m[T1("finalized")]=new Map,JTe?.({ReactiveElement:_m}),(W5.reactiveElementVersions??=[]).push("2.1.1");const wk=globalThis,S6=wk.trustedTypes,YD=S6?S6.createPolicy("lit-html",{createHTML:t=>t}):void 0,Pte="$lit$",ah=`lit$${Math.random().toFixed(9).slice(2)}$`,Rte="?"+ah,XTe=`<${Rte}>`,I0=document,Lv=()=>I0.createComment(""),Fv=t=>t===null||typeof t!="object"&&typeof t!="function",vk=Array.isArray,QTe=t=>vk(t)||typeof t?.[Symbol.iterator]=="function",kN=`[ 	
\f\r]`,Mb=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,JD=/-->/g,XD=/>/g,lp=RegExp(`>|${kN}(?:([^\\s"'>=/]+)(${kN}*=${kN}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),QD=/'/g,ej=/"/g,Ote=/^(?:script|style|textarea|title)$/i,kte=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),Ttt=kte(1),Ntt=kte(2),vy=Symbol.for("lit-noChange"),oi=Symbol.for("lit-nothing"),tj=new WeakMap,s0=I0.createTreeWalker(I0,129);function Bte(t,e){if(!vk(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return YD!==void 0?YD.createHTML(e):e}const e3e=(t,e)=>{const r=t.length-1,n=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Mb;for(let a=0;a<r;a++){const c=t[a];let u,l,d=-1,f=0;for(;f<c.length&&(o.lastIndex=f,l=o.exec(c),l!==null);)f=o.lastIndex,o===Mb?l[1]==="!--"?o=JD:l[1]!==void 0?o=XD:l[2]!==void 0?(Ote.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=lp):l[3]!==void 0&&(o=lp):o===lp?l[0]===">"?(o=s??Mb,d=-1):l[1]===void 0?d=-2:(d=o.lastIndex-l[2].length,u=l[1],o=l[3]===void 0?lp:l[3]==='"'?ej:QD):o===ej||o===QD?o=lp:o===JD||o===XD?o=Mb:(o=lp,s=void 0);const p=o===lp&&t[a+1].startsWith("/>")?" ":"";i+=o===Mb?c+XTe:d>=0?(n.push(u),c.slice(0,d)+Pte+c.slice(d)+ah+p):c+ah+(d===-2?a:p)}return[Bte(t,i+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};let cO=class Ute{constructor({strings:e,_$litType$:r},n){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[u,l]=e3e(e,r);if(this.el=Ute.createElement(u,n),s0.currentNode=this.el.content,r===2||r===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=s0.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(Pte)){const f=l[o++],p=s.getAttribute(d).split(ah),g=/([.?@])?(.*)/.exec(f);c.push({type:1,index:i,name:g[2],strings:p,ctor:g[1]==="."?r3e:g[1]==="?"?n3e:g[1]==="@"?s3e:V5}),s.removeAttribute(d)}else d.startsWith(ah)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(Ote.test(s.tagName)){const d=s.textContent.split(ah),f=d.length-1;if(f>0){s.textContent=S6?S6.emptyScript:"";for(let p=0;p<f;p++)s.append(d[p],Lv()),s0.nextNode(),c.push({type:2,index:++i});s.append(d[f],Lv())}}}else if(s.nodeType===8)if(s.data===Rte)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(ah,d+1))!==-1;)c.push({type:7,index:i}),d+=ah.length-1}i++}}static createElement(e,r){const n=I0.createElement("template");return n.innerHTML=e,n}};function Ey(t,e,r=t,n){if(e===vy)return e;let s=n!==void 0?r._$Co?.[n]:r._$Cl;const i=Fv(e)?void 0:e._$litDirective$;return s?.constructor!==i&&(s?._$AO?.(!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,r,n)),n!==void 0?(r._$Co??=[])[n]=s:r._$Cl=s),s!==void 0&&(e=Ey(t,s._$AS(t,e.values),s,n)),e}let t3e=class{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,s=(e?.creationScope??I0).importNode(r,!0);s0.currentNode=s;let i=s0.nextNode(),o=0,a=0,c=n[0];for(;c!==void 0;){if(o===c.index){let u;c.type===2?u=new Ek(i,i.nextSibling,this,e):c.type===1?u=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(u=new i3e(i,this,e)),this._$AV.push(u),c=n[++a]}o!==c?.index&&(i=s0.nextNode(),o++)}return s0.currentNode=I0,s}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}},Ek=class Mte{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,r,n,s){this.type=2,this._$AH=oi,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&e?.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Ey(this,e,r),Fv(e)?e===oi||e==null||e===""?(this._$AH!==oi&&this._$AR(),this._$AH=oi):e!==this._$AH&&e!==vy&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):QTe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==oi&&Fv(this._$AH)?this._$AA.nextSibling.data=e:this.T(I0.createTextNode(e)),this._$AH=e}$(e){const{values:r,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=cO.createElement(Bte(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===s)this._$AH.p(r);else{const i=new t3e(s,this),o=i.u(this.options);i.p(r),this.T(o),this._$AH=i}}_$AC(e){let r=tj.get(e.strings);return r===void 0&&tj.set(e.strings,r=new cO(e)),r}k(e){vk(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,s=0;for(const i of e)s===r.length?r.push(n=new Mte(this.O(Lv()),this.O(Lv()),this,this.options)):n=r[s],n._$AI(i),s++;s<r.length&&(this._$AR(n&&n._$AB.nextSibling,s),r.length=s)}_$AR(e=this._$AA.nextSibling,r){for(this._$AP?.(!1,!0,r);e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},V5=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,s,i){this.type=1,this._$AH=oi,this._$AN=void 0,this.element=e,this.name=r,this._$AM=s,this.options=i,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=oi}_$AI(e,r=this,n,s){const i=this.strings;let o=!1;if(i===void 0)e=Ey(this,e,r,0),o=!Fv(e)||e!==this._$AH&&e!==vy,o&&(this._$AH=e);else{const a=e;let c,u;for(e=i[0],c=0;c<i.length-1;c++)u=Ey(this,a[n+c],r,c),u===vy&&(u=this._$AH[c]),o||=!Fv(u)||u!==this._$AH[c],u===oi?e=oi:e!==oi&&(e+=(u??"")+i[c+1]),this._$AH[c]=u}o&&!s&&this.j(e)}j(e){e===oi?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},r3e=class extends V5{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===oi?void 0:e}},n3e=class extends V5{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==oi)}},s3e=class extends V5{constructor(e,r,n,s,i){super(e,r,n,s,i),this.type=5}_$AI(e,r=this){if((e=Ey(this,e,r,0)??oi)===vy)return;const n=this._$AH,s=e===oi&&n!==oi||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==oi&&(n===oi||s);s&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},i3e=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Ey(this,e)}};const o3e=wk.litHtmlPolyfillSupport;o3e?.(cO,Ek),(wk.litHtmlVersions??=[]).push("3.3.1");const a3e=(t,e,r)=>{const n=r?.renderBefore??e;let s=n._$litPart$;if(s===void 0){const i=r?.renderBefore??null;n._$litPart$=s=new Ek(e.insertBefore(Lv(),i),i,void 0,r??{})}return s._$AI(t),s};const _k=globalThis;let yI=class extends _m{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=a3e(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return vy}};yI._$litElement$=!0,yI.finalized=!0,_k.litElementHydrateSupport?.({LitElement:yI});const c3e=_k.litElementPolyfillSupport;c3e?.({LitElement:yI});(_k.litElementVersions??=[]).push("4.2.1");const u3e={black:"#202020",white:"#FFFFFF",white010:"rgba(255, 255, 255, 0.1)",accent010:"rgba(9, 136, 240, 0.1)",accent020:"rgba(9, 136, 240, 0.2)",accent030:"rgba(9, 136, 240, 0.3)",accent040:"rgba(9, 136, 240, 0.4)",accent050:"rgba(9, 136, 240, 0.5)",accent060:"rgba(9, 136, 240, 0.6)",accent070:"rgba(9, 136, 240, 0.7)",accent080:"rgba(9, 136, 240, 0.8)",accent090:"rgba(9, 136, 240, 0.9)",accent100:"rgba(9, 136, 240, 1.0)",accentSecondary010:"rgba(199, 185, 148, 0.1)",accentSecondary020:"rgba(199, 185, 148, 0.2)",accentSecondary030:"rgba(199, 185, 148, 0.3)",accentSecondary040:"rgba(199, 185, 148, 0.4)",accentSecondary050:"rgba(199, 185, 148, 0.5)",accentSecondary060:"rgba(199, 185, 148, 0.6)",accentSecondary070:"rgba(199, 185, 148, 0.7)",accentSecondary080:"rgba(199, 185, 148, 0.8)",accentSecondary090:"rgba(199, 185, 148, 0.9)",accentSecondary100:"rgba(199, 185, 148, 1.0)",productWalletKit:"#FFB800",productAppKit:"#FF573B",productCloud:"#0988F0",productDocumentation:"#008847",neutrals050:"#F6F6F6",neutrals100:"#F3F3F3",neutrals200:"#E9E9E9",neutrals300:"#D0D0D0",neutrals400:"#BBB",neutrals500:"#9A9A9A",neutrals600:"#6C6C6C",neutrals700:"#4F4F4F",neutrals800:"#363636",neutrals900:"#2A2A2A",neutrals1000:"#252525",semanticSuccess010:"rgba(48, 164, 107, 0.1)",semanticSuccess020:"rgba(48, 164, 107, 0.2)",semanticSuccess030:"rgba(48, 164, 107, 0.3)",semanticSuccess040:"rgba(48, 164, 107, 0.4)",semanticSuccess050:"rgba(48, 164, 107, 0.5)",semanticSuccess060:"rgba(48, 164, 107, 0.6)",semanticSuccess070:"rgba(48, 164, 107, 0.7)",semanticSuccess080:"rgba(48, 164, 107, 0.8)",semanticSuccess090:"rgba(48, 164, 107, 0.9)",semanticSuccess100:"rgba(48, 164, 107, 1.0)",semanticError010:"rgba(223, 74, 52, 0.1)",semanticError020:"rgba(223, 74, 52, 0.2)",semanticError030:"rgba(223, 74, 52, 0.3)",semanticError040:"rgba(223, 74, 52, 0.4)",semanticError050:"rgba(223, 74, 52, 0.5)",semanticError060:"rgba(223, 74, 52, 0.6)",semanticError070:"rgba(223, 74, 52, 0.7)",semanticError080:"rgba(223, 74, 52, 0.8)",semanticError090:"rgba(223, 74, 52, 0.9)",semanticError100:"rgba(223, 74, 52, 1.0)",semanticWarning010:"rgba(243, 161, 63, 0.1)",semanticWarning020:"rgba(243, 161, 63, 0.2)",semanticWarning030:"rgba(243, 161, 63, 0.3)",semanticWarning040:"rgba(243, 161, 63, 0.4)",semanticWarning050:"rgba(243, 161, 63, 0.5)",semanticWarning060:"rgba(243, 161, 63, 0.6)",semanticWarning070:"rgba(243, 161, 63, 0.7)",semanticWarning080:"rgba(243, 161, 63, 0.8)",semanticWarning090:"rgba(243, 161, 63, 0.9)",semanticWarning100:"rgba(243, 161, 63, 1.0)"},I6={core:{backgroundAccentPrimary:"#0988F0",backgroundAccentCertified:"#C7B994",backgroundWalletKit:"#FFB800",backgroundAppKit:"#FF573B",backgroundCloud:"#0988F0",backgroundDocumentation:"#008847",backgroundSuccess:"rgba(48, 164, 107, 0.20)",backgroundError:"rgba(223, 74, 52, 0.20)",backgroundWarning:"rgba(243, 161, 63, 0.20)",textAccentPrimary:"#0988F0",textAccentCertified:"#C7B994",textWalletKit:"#FFB800",textAppKit:"#FF573B",textCloud:"#0988F0",textDocumentation:"#008847",textSuccess:"#30A46B",textError:"#DF4A34",textWarning:"#F3A13F",borderAccentPrimary:"#0988F0",borderSecondary:"#C7B994",borderSuccess:"#30A46B",borderError:"#DF4A34",borderWarning:"#F3A13F",foregroundAccent010:"rgba(9, 136, 240, 0.1)",foregroundAccent020:"rgba(9, 136, 240, 0.2)",foregroundAccent040:"rgba(9, 136, 240, 0.4)",foregroundAccent060:"rgba(9, 136, 240, 0.6)",foregroundSecondary020:"rgba(199, 185, 148, 0.2)",foregroundSecondary040:"rgba(199, 185, 148, 0.4)",foregroundSecondary060:"rgba(199, 185, 148, 0.6)",iconAccentPrimary:"#0988F0",iconAccentCertified:"#C7B994",iconSuccess:"#30A46B",iconError:"#DF4A34",iconWarning:"#F3A13F",glass010:"rgba(255, 255, 255, 0.1)",zIndex:"9999"},dark:{overlay:"rgba(0, 0, 0, 0.50)",backgroundPrimary:"#202020",backgroundInvert:"#FFFFFF",textPrimary:"#FFFFFF",textSecondary:"#9A9A9A",textTertiary:"#BBBBBB",textInvert:"#202020",borderPrimary:"#2A2A2A",borderPrimaryDark:"#363636",borderSecondary:"#4F4F4F",foregroundPrimary:"#252525",foregroundSecondary:"#2A2A2A",foregroundTertiary:"#363636",iconDefault:"#9A9A9A",iconInverse:"#FFFFFF"},light:{overlay:"rgba(230 , 230, 230, 0.5)",backgroundPrimary:"#FFFFFF",borderPrimaryDark:"#E9E9E9",backgroundInvert:"#202020",textPrimary:"#202020",textSecondary:"#9A9A9A",textTertiary:"#6C6C6C",textInvert:"#FFFFFF",borderPrimary:"#E9E9E9",borderSecondary:"#D0D0D0",foregroundPrimary:"#F3F3F3",foregroundSecondary:"#E9E9E9",foregroundTertiary:"#D0D0D0",iconDefault:"#9A9A9A",iconInverse:"#202020"}},l3e={1:"4px",2:"8px",10:"10px",3:"12px",4:"16px",6:"24px",5:"20px",8:"32px",16:"64px",20:"80px",32:"128px",64:"256px",128:"512px",round:"9999px"},d3e={0:"0px","01":"2px",1:"4px",2:"8px",3:"12px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",9:"36px",10:"40px",12:"48px",14:"56px",16:"64px",20:"80px",32:"128px",64:"256px"},f3e={regular:"KHTeka",mono:"KHTekaMono"},h3e={regular:"400",medium:"500"},p3e={h1:"50px",h2:"44px",h3:"38px",h4:"32px",h5:"26px",h6:"20px",large:"16px",medium:"14px",small:"12px"},g3e={"h1-regular-mono":{lineHeight:"50px",letterSpacing:"-3px"},"h1-regular":{lineHeight:"50px",letterSpacing:"-1px"},"h1-medium":{lineHeight:"50px",letterSpacing:"-0.84px"},"h2-regular-mono":{lineHeight:"44px",letterSpacing:"-2.64px"},"h2-regular":{lineHeight:"44px",letterSpacing:"-0.88px"},"h2-medium":{lineHeight:"44px",letterSpacing:"-0.88px"},"h3-regular-mono":{lineHeight:"38px",letterSpacing:"-2.28px"},"h3-regular":{lineHeight:"38px",letterSpacing:"-0.76px"},"h3-medium":{lineHeight:"38px",letterSpacing:"-0.76px"},"h4-regular-mono":{lineHeight:"32px",letterSpacing:"-1.92px"},"h4-regular":{lineHeight:"32px",letterSpacing:"-0.32px"},"h4-medium":{lineHeight:"32px",letterSpacing:"-0.32px"},"h5-regular-mono":{lineHeight:"26px",letterSpacing:"-1.56px"},"h5-regular":{lineHeight:"26px",letterSpacing:"-0.26px"},"h5-medium":{lineHeight:"26px",letterSpacing:"-0.26px"},"h6-regular-mono":{lineHeight:"20px",letterSpacing:"-1.2px"},"h6-regular":{lineHeight:"20px",letterSpacing:"-0.6px"},"h6-medium":{lineHeight:"20px",letterSpacing:"-0.6px"},"lg-regular-mono":{lineHeight:"16px",letterSpacing:"-0.96px"},"lg-regular":{lineHeight:"18px",letterSpacing:"-0.16px"},"lg-medium":{lineHeight:"18px",letterSpacing:"-0.16px"},"md-regular-mono":{lineHeight:"14px",letterSpacing:"-0.84px"},"md-regular":{lineHeight:"16px",letterSpacing:"-0.14px"},"md-medium":{lineHeight:"16px",letterSpacing:"-0.14px"},"sm-regular-mono":{lineHeight:"12px",letterSpacing:"-0.72px"},"sm-regular":{lineHeight:"14px",letterSpacing:"-0.12px"},"sm-medium":{lineHeight:"14px",letterSpacing:"-0.12px"}},m3e={"ease-out-power-2":"cubic-bezier(0.23, 0.09, 0.08, 1.13)","ease-out-power-1":"cubic-bezier(0.12, 0.04, 0.2, 1.06)","ease-in-power-2":"cubic-bezier(0.92, -0.13, 0.77, 0.91)","ease-in-power-1":"cubic-bezier(0.88, -0.06, 0.8, 0.96)","ease-inout-power-2":"cubic-bezier(0.77, 0.09, 0.23, 1.13)","ease-inout-power-1":"cubic-bezier(0.88, 0.04, 0.12, 1.06)"},y3e={xl:"400ms",lg:"200ms",md:"125ms",sm:"75ms"},uO={colors:u3e,fontFamily:f3e,fontWeight:h3e,textSize:p3e,typography:g3e,tokens:{core:I6.core,theme:I6.dark},borderRadius:l3e,spacing:d3e,durations:y3e,easings:m3e},rj="--apkt";function h2(t){if(!t)return{};const e={};return e["font-family"]=t["--apkt-font-family"]??t["--w3m-font-family"]??"KHTeka",e.accent=t["--apkt-accent"]??t["--w3m-accent"]??"#0988F0",e["color-mix"]=t["--apkt-color-mix"]??t["--w3m-color-mix"]??"#000",e["color-mix-strength"]=t["--apkt-color-mix-strength"]??t["--w3m-color-mix-strength"]??0,e["font-size-master"]=t["--apkt-font-size-master"]??t["--w3m-font-size-master"]??"10px",e["border-radius-master"]=t["--apkt-border-radius-master"]??t["--w3m-border-radius-master"]??"4px",t["--apkt-z-index"]!==void 0?e["z-index"]=t["--apkt-z-index"]:t["--w3m-z-index"]!==void 0&&(e["z-index"]=t["--w3m-z-index"]),e}const Pd={createCSSVariables(t){const e={},r={};function n(i,o,a=""){for(const[c,u]of Object.entries(i)){const l=a?`${a}-${c}`:c;u&&typeof u=="object"&&Object.keys(u).length?(o[c]={},n(u,o[c],l)):typeof u=="string"&&(o[c]=`${rj}-${l}`)}}function s(i,o){for(const[a,c]of Object.entries(i))c&&typeof c=="object"?(o[a]={},s(c,o[a])):typeof c=="string"&&(o[a]=`var(${c})`)}return n(t,e),s(e,r),{cssVariables:e,cssVariablesVarPrefix:r}},assignCSSVariables(t,e){const r={};function n(s,i,o){for(const[a,c]of Object.entries(s)){const u=o?`${o}-${a}`:a,l=i[a];c&&typeof c=="object"?n(c,l,u):typeof l=="string"&&(r[`${rj}-${u}`]=l)}}return n(t,e),r},createRootStyles(t,e){const r={...uO,tokens:{...uO.tokens,theme:t==="light"?I6.light:I6.dark}},{cssVariables:n}=Pd.createCSSVariables(r),s=Pd.assignCSSVariables(n,r),i=Pd.generateW3MVariables(e),o=Pd.generateW3MOverrides(e),a=Pd.generateScaledVariables(e),c=Pd.generateBaseVariables(s),u={...s,...c,...i,...o,...a},l=Pd.applyColorMixToVariables(e,u),d={...u,...l};return`:root {${Object.entries(d).map(([p,g])=>`${p}:${g.replace("/[:;{}</>]/g","")};`).join("")}}`},generateW3MVariables(t){if(!t)return{};const e=h2(t),r={};return r["--w3m-font-family"]=e["font-family"],r["--w3m-accent"]=e.accent,r["--w3m-color-mix"]=e["color-mix"],r["--w3m-color-mix-strength"]=`${e["color-mix-strength"]}%`,r["--w3m-font-size-master"]=e["font-size-master"],r["--w3m-border-radius-master"]=e["border-radius-master"],r},generateW3MOverrides(t){if(!t)return{};const e=h2(t),r={};if(t["--apkt-accent"]||t["--w3m-accent"]){const n=e.accent;r["--apkt-tokens-core-iconAccentPrimary"]=n,r["--apkt-tokens-core-borderAccentPrimary"]=n,r["--apkt-tokens-core-textAccentPrimary"]=n,r["--apkt-tokens-core-backgroundAccentPrimary"]=n}return(t["--apkt-font-family"]||t["--w3m-font-family"])&&(r["--apkt-fontFamily-regular"]=e["font-family"]),e["z-index"]!==void 0&&(r["--apkt-tokens-core-zIndex"]=`${e["z-index"]}`),r},generateScaledVariables(t){if(!t)return{};const e=h2(t),r={};if(t["--apkt-font-size-master"]||t["--w3m-font-size-master"]){const n=parseFloat(e["font-size-master"].replace("px",""));r["--apkt-textSize-h1"]=`${Number(n)*5}px`,r["--apkt-textSize-h2"]=`${Number(n)*4.4}px`,r["--apkt-textSize-h3"]=`${Number(n)*3.8}px`,r["--apkt-textSize-h4"]=`${Number(n)*3.2}px`,r["--apkt-textSize-h5"]=`${Number(n)*2.6}px`,r["--apkt-textSize-h6"]=`${Number(n)*2}px`,r["--apkt-textSize-large"]=`${Number(n)*1.6}px`,r["--apkt-textSize-medium"]=`${Number(n)*1.4}px`,r["--apkt-textSize-small"]=`${Number(n)*1.2}px`}if(t["--apkt-border-radius-master"]||t["--w3m-border-radius-master"]){const n=parseFloat(e["border-radius-master"].replace("px",""));r["--apkt-borderRadius-1"]=`${Number(n)}px`,r["--apkt-borderRadius-2"]=`${Number(n)*2}px`,r["--apkt-borderRadius-3"]=`${Number(n)*3}px`,r["--apkt-borderRadius-4"]=`${Number(n)*4}px`,r["--apkt-borderRadius-5"]=`${Number(n)*5}px`,r["--apkt-borderRadius-6"]=`${Number(n)*6}px`,r["--apkt-borderRadius-8"]=`${Number(n)*8}px`,r["--apkt-borderRadius-16"]=`${Number(n)*16}px`,r["--apkt-borderRadius-20"]=`${Number(n)*20}px`,r["--apkt-borderRadius-32"]=`${Number(n)*32}px`,r["--apkt-borderRadius-64"]=`${Number(n)*64}px`,r["--apkt-borderRadius-128"]=`${Number(n)*128}px`}return r},generateColorMixCSS(t,e){if(!t?.["--w3m-color-mix"]||!t["--w3m-color-mix-strength"])return"";const r=t["--w3m-color-mix"],n=t["--w3m-color-mix-strength"];if(!n||n===0)return"";const s=Object.keys(e||{}).filter(o=>{const a=o.includes("-tokens-core-background")||o.includes("-tokens-core-text")||o.includes("-tokens-core-border")||o.includes("-tokens-core-foreground")||o.includes("-tokens-core-icon")||o.includes("-tokens-theme-background")||o.includes("-tokens-theme-text")||o.includes("-tokens-theme-border")||o.includes("-tokens-theme-foreground")||o.includes("-tokens-theme-icon"),c=o.includes("-borderRadius-")||o.includes("-spacing-")||o.includes("-textSize-")||o.includes("-fontFamily-")||o.includes("-fontWeight-")||o.includes("-typography-")||o.includes("-duration-")||o.includes("-ease-")||o.includes("-path-")||o.includes("-width-")||o.includes("-height-")||o.includes("-visual-size-")||o.includes("-modal-width")||o.includes("-cover");return a&&!c});return s.length===0?"":` @supports (background: color-mix(in srgb, white 50%, black)) {
      :root {
        ${s.map(o=>{const a=e?.[o]||"";return a.includes("color-mix")||a.startsWith("#")||a.startsWith("rgb")?`${o}: color-mix(in srgb, ${r} ${n}%, ${a});`:`${o}: color-mix(in srgb, ${r} ${n}%, var(${o}-base, ${a}));`}).join("")}
      }
    }`},generateBaseVariables(t){const e={},r=t["--apkt-tokens-theme-backgroundPrimary"];r&&(e["--apkt-tokens-theme-backgroundPrimary-base"]=r);const n=t["--apkt-tokens-core-backgroundAccentPrimary"];return n&&(e["--apkt-tokens-core-backgroundAccentPrimary-base"]=n),e},applyColorMixToVariables(t,e){const r={};e?.["--apkt-tokens-theme-backgroundPrimary"]&&(r["--apkt-tokens-theme-backgroundPrimary"]="var(--apkt-tokens-theme-backgroundPrimary-base)"),e?.["--apkt-tokens-core-backgroundAccentPrimary"]&&(r["--apkt-tokens-core-backgroundAccentPrimary"]="var(--apkt-tokens-core-backgroundAccentPrimary-base)");const n=h2(t),s=n["color-mix"],i=n["color-mix-strength"];if(!i||i===0)return r;const o=Object.keys(e||{}).filter(a=>{const c=a.includes("-tokens-core-background")||a.includes("-tokens-core-text")||a.includes("-tokens-core-border")||a.includes("-tokens-core-foreground")||a.includes("-tokens-core-icon")||a.includes("-tokens-theme-background")||a.includes("-tokens-theme-text")||a.includes("-tokens-theme-border")||a.includes("-tokens-theme-foreground")||a.includes("-tokens-theme-icon")||a.includes("-tokens-theme-overlay"),u=a.includes("-borderRadius-")||a.includes("-spacing-")||a.includes("-textSize-")||a.includes("-fontFamily-")||a.includes("-fontWeight-")||a.includes("-typography-")||a.includes("-duration-")||a.includes("-ease-")||a.includes("-path-")||a.includes("-width-")||a.includes("-height-")||a.includes("-visual-size-")||a.includes("-modal-width")||a.includes("-cover");return c&&!u});return o.length===0||o.forEach(a=>{const c=e?.[a]||"";a.endsWith("-base")||(a==="--apkt-tokens-theme-backgroundPrimary"||a==="--apkt-tokens-core-backgroundAccentPrimary"?r[a]=`color-mix(in srgb, ${s} ${i}%, var(${a}-base))`:c.includes("color-mix")||c.startsWith("#")||c.startsWith("rgb")?r[a]=`color-mix(in srgb, ${s} ${i}%, ${c})`:r[a]=`color-mix(in srgb, ${s} ${i}%, var(${a}-base, ${c}))`)}),r}},{cssVariablesVarPrefix:b3e}=Pd.createCSSVariables(uO);function Dtt(t,...e){return uo(t,...e.map(r=>ds(typeof r=="function"?r(b3e):r)))}let Hp,i0,bl,_u,T6;const Sd={"KHTeka-500-woff2":"https://fonts.reown.com/KHTeka-Medium.woff2","KHTeka-400-woff2":"https://fonts.reown.com/KHTeka-Regular.woff2","KHTeka-300-woff2":"https://fonts.reown.com/KHTeka-Light.woff2","KHTekaMono-400-woff2":"https://fonts.reown.com/KHTekaMono-Regular.woff2","KHTeka-500-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTeka-400-woff":"https://fonts.reown.com/KHTeka-Regular.woff","KHTeka-300-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTekaMono-400-woff":"https://fonts.reown.com/KHTekaMono-Regular.woff"};function N6(t,e="dark"){Hp&&document.head.removeChild(Hp),Hp=document.createElement("style"),Hp.textContent=Pd.createRootStyles(e,t),document.head.appendChild(Hp)}function jtt(t,e="dark"){if(T6=t,i0=document.createElement("style"),bl=document.createElement("style"),_u=document.createElement("style"),i0.textContent=Jm(t).core.cssText,bl.textContent=Jm(t).dark.cssText,_u.textContent=Jm(t).light.cssText,document.head.appendChild(i0),document.head.appendChild(bl),document.head.appendChild(_u),N6(t,e),lO(e),!(t?.["--apkt-font-family"]||t?.["--w3m-font-family"]))for(const[n,s]of Object.entries(Sd)){const i=document.createElement("link");i.rel="preload",i.href=s,i.as="font",i.type=n.includes("woff2")?"font/woff2":"font/woff",i.crossOrigin="anonymous",document.head.appendChild(i)}lO(e)}function lO(t="dark"){bl&&_u&&Hp&&(t==="light"?(N6(T6,t),bl.removeAttribute("media"),_u.media="enabled"):(N6(T6,t),_u.removeAttribute("media"),bl.media="enabled"))}function w3e(t){if(T6=t,i0&&bl&&_u){i0.textContent=Jm(t).core.cssText,bl.textContent=Jm(t).dark.cssText,_u.textContent=Jm(t).light.cssText;const e=t?.["--apkt-font-family"]||t?.["--w3m-font-family"];e&&(i0.textContent=i0.textContent?.replace("font-family: KHTeka",`font-family: ${e}`),bl.textContent=bl.textContent?.replace("font-family: KHTeka",`font-family: ${e}`),_u.textContent=_u.textContent?.replace("font-family: KHTeka",`font-family: ${e}`))}if(Hp){const e=_u?.media==="enabled"?"light":"dark";N6(t,e)}}function Jm(t){const e=!!(t?.["--apkt-font-family"]||t?.["--w3m-font-family"]);return{core:uo`
      ${e?uo``:uo`
            @font-face {
              font-family: 'KHTeka';
              src:
                url(${ds(Sd["KHTeka-400-woff2"])}) format('woff2'),
                url(${ds(Sd["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
              font-display: swap;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${ds(Sd["KHTeka-300-woff2"])}) format('woff2'),
                url(${ds(Sd["KHTeka-300-woff"])}) format('woff');
              font-weight: 300;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTekaMono';
              src:
                url(${ds(Sd["KHTekaMono-400-woff2"])}) format('woff2'),
                url(${ds(Sd["KHTekaMono-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${ds(Sd["KHTeka-400-woff2"])}) format('woff2'),
                url(${ds(Sd["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }
          `}

      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --apkt-modal-width: 370px;

        --apkt-visual-size-inherit: inherit;
        --apkt-visual-size-sm: 40px;
        --apkt-visual-size-md: 55px;
        --apkt-visual-size-lg: 80px;

        --apkt-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --apkt-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --apkt-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --apkt-width-network-sm: 36px;
        --apkt-width-network-md: 48px;
        --apkt-width-network-lg: 86px;

        --apkt-duration-dynamic: 0ms;
        --apkt-height-network-sm: 40px;
        --apkt-height-network-md: 54px;
        --apkt-height-network-lg: 96px;
      }
    `,dark:uo`
      :root {
      }
    `,light:uo`
      :root {
      }
    `}}const Ltt=uo`
  div,
  span,
  iframe,
  a,
  img,
  form,
  button,
  label,
  *::after,
  *::before {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    backface-visibility: hidden;
  }

  :host {
    font-family: var(--apkt-fontFamily-regular);
  }
`,Ftt=uo`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;

    will-change: background-color, color, border, box-shadow, width, height, transform, opacity;
    outline: none;
    border: none;
    text-decoration: none;
    transition:
      background-color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      box-shadow var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      width var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      height var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      transform var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      opacity var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      scale var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border-radius var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2);
    will-change:
      background-color, color, border, box-shadow, width, height, transform, opacity, scale,
      border-radius;
  }

  a:active:not([disabled]),
  button:active:not([disabled]) {
    scale: 0.975;
    transform-origin: center;
  }

  button:disabled {
    cursor: default;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,fh={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603};let v3e=class extends H5{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new z5({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){const n=this.provider?.session?.namespaces?.[e]?.accounts?.map(s=>{const[,,i]=s.split(":");return i}).filter((s,i,o)=>o.indexOf(s)===i)||[];return Promise.resolve({accounts:n.map(s=>ke.createAccount(e,s,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&wr.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};const n=J.getAccountData();if(n?.balanceLoading&&e.chainId===J.state.activeCaipNetwork?.id)return{balance:n?.balance||"0.00",symbol:n?.balanceSymbol||""};const i=(await J.fetchTokenBalance()).find(o=>o.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&o.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:i?.quantity.numeric||"0.00",symbol:i?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:r,message:n,address:s}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return J.state.activeCaipNetwork?.chainNamespace===ae.CHAIN.SOLANA?i=(await r.request({method:"solana_signMessage",params:{message:Zn.encode(new TextEncoder().encode(n)),pubkey:s}},J.state.activeCaipNetwork?.caipNetworkId)).signature:i=await r.request({method:"personal_sign",params:[n,s]},J.state.activeCaipNetwork?.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===ae.CHAIN.EVM)try{await n.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:XI(r.id)}]})}catch(s){if(s.code===fh.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||s.code===fh.ERROR_INVALID_CHAIN_ID||s.code===fh.ERROR_CODE_DEFAULT||s?.data?.originalError?.code===fh.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await n.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:XI(r.id),rpcUrls:[r?.rpcUrls.chainDefault?.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[r.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(n=>n.type==="WALLET_CONNECT")?.provider}};const E3e=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication"],p2={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?wr.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(r=>r!=="email"):!1},processFallback:t=>t===void 0?wr.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?wr.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?wr.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?wr.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?wr.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?wr.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?wr.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?wr.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>wr.DEFAULT_REMOTE_FEATURES.multiWallet},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>wr.DEFAULT_REMOTE_FEATURES.payWithExchange},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>wr.DEFAULT_REMOTE_FEATURES.payments},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>typeof t>"u"?wr.DEFAULT_REMOTE_FEATURES.reownAuthentication:!!t}},_3e={localSettingsOverridden:new Set,getApiConfig(t,e){return e?.find(r=>r.id===t)},addWarning(t,e){if(t!==void 0){const r=p2[e],n=r.isLegacy?`"features.${r.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(n)}},processFeature(t,e,r,n,s){const i=p2[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(n){const a=this.getApiConfig(i.apiFeatureName,r);return a?.config===null?this.processFallbackFeature(t,o):a?.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return p2[t].processApi(e)},processFallbackFeature(t,e){return p2[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,r=t.features||{};this.localSettingsOverridden.clear();let n=null,s=!1;try{n=await pt.fetchProjectConfig(),s=n!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?wr.DEFAULT_REMOTE_FEATURES:wr.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of E3e){const a=this.processFeature(o,r,n,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),wr.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Ci.open({debugMessage:Si.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return i}};let A3e=class{constructor(e){this.chainNamespaces=[],this.features={},this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(r,n)=>{if(r){const s=J.getCaipNetworks(r)?.find(a=>a.id===n);if(s)return s;const i=J.getNetworkData(r)?.caipNetwork;return i||J.getRequestedCaipNetworks(r).filter(a=>a.chainNamespace===r)?.[0]}return J.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const r=this.getCaipNetwork();if(r)return r.id},this.getCaipNetworks=r=>J.getCaipNetworks(r),this.getActiveChainNamespace=()=>J.state.activeChain,this.setRequestedCaipNetworks=(r,n)=>{J.setRequestedCaipNetworks(r,n)},this.getApprovedCaipNetworkIds=()=>J.getAllApprovedCaipNetworkIds(),this.getCaipAddress=r=>J.state.activeChain===r||!r?J.state.activeCaipAddress:J.state.chains.get(r)?.accountState?.caipAddress,this.setClientId=r=>{kt.setClientId(r)},this.getProvider=r=>br.getProvider(r),this.getProviderType=r=>br.getProviderId(r),this.getPreferredAccountType=r=>fo(r),this.setCaipAddress=(r,n,s=!1)=>{J.setAccountProp("caipAddress",r,n,s),J.setAccountProp("address",ke.getPlainAddress(r),n,s)},this.setBalance=(r,n,s)=>{J.setAccountProp("balance",r,s),J.setAccountProp("balanceSymbol",n,s)},this.setProfileName=(r,n)=>{J.setAccountProp("profileName",r,n)},this.setProfileImage=(r,n)=>{J.setAccountProp("profileImage",r,n)},this.setUser=(r,n)=>{J.setAccountProp("user",r,n)},this.resetAccount=r=>{J.resetAccount(r)},this.setCaipNetwork=r=>{J.setActiveCaipNetwork(r)},this.setCaipNetworkOfNamespace=(r,n)=>{J.setChainNetworkData(n,{caipNetwork:r})},this.setStatus=(r,n)=>{J.setAccountProp("status",r,n),Re.isConnected()?Ae.setConnectionStatus("connected"):Ae.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=r=>J.getAccountData(r)?.address,this.setConnectors=r=>{const n=[...Re.state.allConnectors,...r];Re.setConnectors(n)},this.setConnections=(r,n)=>{Ae.setConnections(r,n),ze.setConnections(r,n)},this.fetchIdentity=r=>kt.fetchIdentity(r),this.getReownName=r=>I1.getNamesForAddress(r),this.getConnectors=()=>Re.getConnectors(),this.getConnectorImage=r=>fJ.getConnectorImage(r),this.getConnections=r=>this.remoteFeatures.multiWallet?r6.getConnectionsData(r).connections:(Ci.open(ae.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=r=>this.remoteFeatures.multiWallet?r6.getConnectionsData(r).recentConnections:(Ci.open(ae.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async r=>{if(!this.remoteFeatures.multiWallet){Ci.open(ae.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await ze.switchConnection(r)},this.deleteConnection=r=>{if(!this.remoteFeatures.multiWallet){Ci.open(ae.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}Ae.deleteAddressFromConnection(r),ze.syncStorageConnections()},this.setConnectedWalletInfo=(r,n)=>{const s=br.getProviderId(n),i=r?{...r,type:s}:void 0;J.setAccountProp("connectedWalletInfo",i,n)},this.getIsConnectedState=()=>!!J.state.activeCaipAddress,this.addAddressLabel=(r,n,s)=>{const i=J.getAccountData(s)?.addressLabels||{};J.setAccountProp("addressLabels",{...i,[r]:n},s)},this.removeAddressLabel=(r,n)=>{const s=J.getAccountData(n)?.addressLabels||{};J.setAccountProp("addressLabels",{...s,[r]:void 0},n)},this.getAddress=r=>{const n=r||J.state.activeChain;return J.getAccountData(n)?.address},this.resetNetwork=r=>{J.resetNetwork(r)},this.addConnector=r=>{Re.addConnector(r)},this.resetWcConnection=()=>{ze.resetWcConnection()},this.setAddressExplorerUrl=(r,n)=>{J.setAccountProp("addressExplorerUrl",r,n)},this.setSmartAccountDeployed=(r,n)=>{J.setAccountProp("smartAccountDeployed",r,n)},this.setPreferredAccountType=(r,n)=>{J.setAccountProp("preferredAccountType",r,n)},this.setEIP6963Enabled=r=>{we.setEIP6963Enabled(r)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,r){const n=e?.map(i=>i.namespace).filter(i=>!!i);if(n?.length)return[...new Set(n)];const s=r?.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){if(this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),we.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),!e.basic&&!e.manualWCControl&&(this.remoteFeatures=await _3e.fetchRemoteFeatures(e)),await pt.fetchUsage(),we.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&o8.setOnrampProviders(this.remoteFeatures.onramp),(we.state.remoteFeatures?.email||Array.isArray(we.state.remoteFeatures?.socials)&&we.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins(),we.state.features?.reownAuthentication||we.state.remoteFeatures?.reownAuthentication){const{ReownAuthentication:r}=await Pr(async()=>{const{ReownAuthentication:s}=await import("./features--3ahueUK.js");return{ReownAuthentication:s}},[]),n=we.state.siwx;n instanceof r||(n&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),we.setSIWX(new r))}}async openSend(e){const r=e.namespace||J.state.activeChain,n=this.getCaipAddress(r),s=this.getCaipNetwork(r)?.id;if(!n)throw new Error("openSend: caipAddress not found");if(s?.toString()!==e.chainId.toString()){const i=J.getCaipNetworkById(e.chainId,r);if(!i)throw new Error(`openSend: caipNetwork with chainId ${e.chainId} not found`);await this.switchNetwork(i,{throwOnFailure:!0})}try{const i=Ite.getTokenSymbolByAddress(e.assetAddress);i&&await pt.fetchTokenImages([i])}catch{}return await dr.open({view:"WalletSend",data:{send:e}}),new Promise((i,o)=>{const a=tr.subscribeKey("hash",l=>{l&&(u(),i({hash:l}))}),c=dr.subscribe(l=>{l.open||(u(),o(new Error("Modal closed")))}),u=this.createCleanupHandler([a,c])})}toModalOptions(){function e(n){return n?.view==="Swap"}function r(n){return n?.view==="WalletSend"}return{isSwap:e,isSend:r}}async checkAllowedOrigins(){try{const e=await pt.fetchAllowedOrigins();if(!ke.isClient())return;const r=window.location.origin;po.isOriginAllowed(r,e,ae.DEFAULT_ALLOWED_ANCESTORS)||Ci.open(Si.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error))return;switch(e.message){case"RATE_LIMITED":Ci.open(Si.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const r=e.cause instanceof Error?e.cause:e;Ci.open({displayMessage:Si.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:Si.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(r.message)},"error");break}}}}createCleanupHandler(e){return()=>{e.forEach(r=>{try{r()}catch{}})}}sendInitializeEvent(e){const{...r}=e;delete r.adapters,delete r.universalProvider,Zt.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(n=>n.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initAdapterController(){gJ.initialize(this.chainAdapters)}initializeThemeController(e){e.themeMode&&na.setThemeMode(e.themeMode),e.themeVariables&&na.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient)throw new Error("ConnectionControllerClient must be set");J.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient});const r=this.getDefaultNetwork();r&&J.setActiveCaipNetwork(r)}initializeConnectionController(e){ze.initialize(e.adapters??[]),ze.setWcBasic(e.basic??!1)}initializeConnectorController(){Re.initialize(this.chainNamespaces)}initializeProjectSettings(e){we.setProjectId(e.projectId),we.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){we.setDebug(e.debug!==!1),we.setEnableWalletGuide(e.enableWalletGuide!==!1),we.setEnableWallets(e.enableWallets!==!1),we.setEIP6963Enabled(e.enableEIP6963!==!1),we.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),we.setEnableReconnect(e.enableReconnect!==!1),we.setEnableMobileFullScreen(e.enableMobileFullScreen===!0),we.setCoinbasePreference(e.coinbasePreference),we.setEnableAuthLogger(e.enableAuthLogger!==!1),we.setCustomRpcUrls(e.customRpcUrls),we.setEnableEmbedded(e.enableEmbedded),we.setAllWallets(e.allWallets),we.setIncludeWalletIds(e.includeWalletIds),we.setExcludeWalletIds(e.excludeWalletIds),we.setFeaturedWalletIds(e.featuredWalletIds),we.setTokens(e.tokens),we.setTermsConditionsUrl(e.termsConditionsUrl),we.setPrivacyPolicyUrl(e.privacyPolicyUrl),we.setCustomWallets(e.customWallets),we.setFeatures(e.features),we.setAllowUnsupportedChain(e.allowUnsupportedChain),we.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),we.setPreferUniversalLinks(e.experimental_preferUniversalLinks),we.setDefaultAccountTypes(e.defaultAccountTypes);const r=this.getDefaultMetaData();if(!e.metadata&&r&&(e.metadata=r),we.setMetadata(e.metadata),we.setDisableAppend(e.disableAppend),we.setEnableEmbedded(e.enableEmbedded),we.setSIWX(e.siwx),this.features=we.state.features??{},!e.projectId){Ci.open(Si.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(s=>s.namespace===ae.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");we.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return ke.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=Em.getUnsupportedNetwork(`${r}:${e}`);J.setActiveCaipNetwork(n)}}getDefaultNetwork(){return Em.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return Em.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return Em.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(s=>s.id===e.defaultNetwork?.id);return r?Em.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectConnector(e,r){try{this.setLoading(!0,e);let n={connections:[]};const s=this.getAdapter(e);return(J.state.chains.get(e)?.accountState?.caipAddress||!we.state.enableReconnect)&&s?.disconnect&&(n=await s.disconnect({id:r})),this.setLoading(!1,e),n}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=J.state.activeChain,r=this.getAdapter(e),n=this.getCaipNetwork(e)?.id,s=ze.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!r)throw new Error("Adapter not found");const a=await r.connectWalletConnect(n);(!o||!i)&&this.close(),this.setClientId(a?.clientId||null),Ae.setConnectedNamespaces([...J.state.chains.keys()]),await this.syncWalletConnectAccount(),await To.initializeIfEnabled()},connectExternal:async e=>{const r=await this.onConnectExternal(e);return await this.connectInactiveNamespaces(e,r),r?{address:r.address}:void 0},reconnectExternal:async({id:e,info:r,type:n,provider:s})=>{const i=J.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o?.reconnect&&(await o?.reconnect({id:e,info:r,type:n,provider:s,chainId:this.getCaipNetwork()?.id}),Ae.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnectConnector:async e=>{await this.disconnectConnector(e.namespace,e.id)},disconnect:async e=>{const{id:r,chainNamespace:n,initialDisconnect:s}=e||{},i=n||J.state.activeChain,o=Re.getConnectorId(i),a=r===ae.CONNECTOR_ID.AUTH||o===ae.CONNECTOR_ID.AUTH,c=r===ae.CONNECTOR_ID.WALLET_CONNECT||o===ae.CONNECTOR_ID.WALLET_CONNECT;try{const u=Array.from(J.state.chains.keys());let l=n?[n]:u;(c||a)&&(l=u);const d=l.map(async g=>{const h=Re.getConnectorId(g),y=r||h,E=await this.disconnectConnector(g,y);E&&(a&&Ae.deleteConnectedSocialProvider(),E.connections.forEach(S=>{Ae.addDisconnectedConnectorId(S.connectorId,g)})),s&&this.onDisconnectNamespace({chainNamespace:g,closeModal:!1})}),f=await Promise.allSettled(d);tr.resetSend(),ze.resetWcConnection(),To.getSIWX()?.signOutOnDisconnect&&await To.clearSessions(),Re.setFilterByNamespace(void 0),ze.syncStorageConnections();const p=f.filter(g=>g.status==="rejected");if(p.length>0)throw new Error(p.map(g=>g.reason.message).join(", "));Zt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:n||"all"}})}catch(u){throw new Error(`Failed to disconnect chains: ${u.message}`)}},checkInstalled:e=>e?e.some(r=>!!window.ethereum?.[String(r)]):!!window.ethereum,signMessage:async e=>{const r=J.state.activeChain,n=this.getAdapter(J.state.activeChain);if(!r)throw new Error("signMessage: namespace not found");if(!n)throw new Error("signMessage: adapter not found");const s=this.getAddress(r);if(!s)throw new Error("signMessage: address not found");return(await n?.signMessage({message:e,address:s,provider:br.getProvider(r)}))?.signature||""},sendTransaction:async e=>{const r=e.chainNamespace;if(!r)throw new Error("sendTransaction: namespace not found");if(wr.SEND_SUPPORTED_NAMESPACES.includes(r)){const n=this.getAdapter(r);if(!n)throw new Error("sendTransaction: adapter not found");const s=br.getProvider(r);return(await n?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}))?.hash||""}return""},estimateGas:async e=>{const r=e.chainNamespace;if(r===ae.CHAIN.EVM){const n=this.getAdapter(r);if(!n)throw new Error("estimateGas: adapter is required but got undefined");const s=br.getProvider(r),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");return(await n?.estimateGas({...e,provider:s,caipNetwork:i}))?.gas||0n}return 0n},getEnsAvatar:async()=>{const e=J.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");const r=this.getAddress(e);if(!r)throw new Error("getEnsAvatar: address not found");return await this.syncIdentity({address:r,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:e}),J.getAccountData()?.profileImage||!1},getEnsAddress:async e=>await po.resolveReownName(e),writeContract:async e=>{const r=J.state.activeChain,n=this.getAdapter(r);if(!r)throw new Error("writeContract: namespace is required but got undefined");if(!n)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=br.getProvider(r);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(await n?.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}))?.hash},parseUnits:(e,r)=>{const n=this.getAdapter(J.state.activeChain);if(!n)throw new Error("parseUnits: adapter is required but got undefined");return n?.parseUnits({value:e,decimals:r})??0n},formatUnits:(e,r)=>{const n=this.getAdapter(J.state.activeChain);if(!n)throw new Error("formatUnits: adapter is required but got undefined");return n?.formatUnits({value:e,decimals:r})??"0"},getCapabilities:async e=>{const r=this.getAdapter(J.state.activeChain);if(!r)throw new Error("getCapabilities: adapter is required but got undefined");return await r?.getCapabilities(e)},grantPermissions:async e=>{const r=this.getAdapter(J.state.activeChain);if(!r)throw new Error("grantPermissions: adapter is required but got undefined");return await r?.grantPermissions(e)},revokePermissions:async e=>{const r=this.getAdapter(J.state.activeChain);if(!r)throw new Error("revokePermissions: adapter is required but got undefined");return r?.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>{const r=this.getAdapter(J.state.activeChain);if(!r)throw new Error("walletGetAssets: adapter is required but got undefined");return await r?.walletGetAssets(e)??{}},updateBalance:e=>{const r=this.getAddress(e),n=this.getCaipNetwork(e);!n||!r||this.updateNativeBalance(r,n?.id,e)}},ze.setClient(this.connectionControllerClient)}async onConnectExternal(e){const r=J.state.activeChain,n=e.chain||r,s=this.getAdapter(n);let i=!0;if(e.type===cr.CONNECTOR_TYPE_AUTH&&ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(d=>Re.getConnectorId(d)===ae.CONNECTOR_ID.AUTH)&&e.chain!==r&&(i=!1),e.chain&&e.chain!==r&&!e.caipNetwork){const u=this.getCaipNetworks().find(l=>l.chainNamespace===e.chain);u&&i&&this.setCaipNetwork(u)}if(!n)throw new Error("connectExternal: namespace not found");if(!s)throw new Error("connectExternal: adapter not found");const o=this.getCaipNetwork(n),a=e.caipNetwork||o,c=await s.connect({id:e.id,address:e.address,info:e.info,type:e.type,provider:e.provider,socialUri:e.socialUri,chainId:e.caipNetwork?.id||o?.id,rpcUrl:e.caipNetwork?.rpcUrls?.default?.http?.[0]||o?.rpcUrls?.default?.http?.[0]});if(c)return Ae.addConnectedNamespace(n),this.syncProvider({...c,chainNamespace:n}),this.setStatus("connected",n),this.syncConnectedWalletInfo(n),Ae.removeDisconnectedConnectorId(e.id,n),{address:c.address,connectedCaipNetwork:a}}async connectInactiveNamespaces(e,r){const n=e.type===cr.CONNECTOR_TYPE_AUTH,s=ho.getOtherAuthNamespaces(r?.connectedCaipNetwork?.chainNamespace),i=J.state.activeCaipNetwork,o=this.getAdapter(i?.chainNamespace);n&&(await Promise.all(s.map(async a=>{try{const c=br.getProvider(a),u=this.getCaipNetwork(a);await this.getAdapter(a)?.connect({...e,provider:c,socialUri:void 0,chainId:u?.id,rpcUrl:u?.rpcUrls?.default?.http?.[0]})&&(Ae.addConnectedNamespace(a),Ae.removeDisconnectedConnectorId(e.id,a),this.setStatus("connected",a),this.syncConnectedWalletInfo(a))}catch(c){Ci.warn(Si.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.displayMessage,Si.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.debugMessage(a,c instanceof Error?c.message:void 0),Si.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.code)}})),i&&await o?.switchNetwork({caipNetwork:i}))}getApprovedCaipNetworksData(){if(br.getProviderId(J.state.activeChain)===cr.CONNECTOR_TYPE_WALLET_CONNECT){const r=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(r)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=br.getProviderId(r);if(e.chainNamespace===J.state.activeChain)await this.getAdapter(r)?.switchNetwork({caipNetwork:e});else if(this.setCaipNetwork(e),s===cr.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const i=this.getAddressByChainNamespace(r);i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],s=r.accounts.map(i=>{const{chainId:o,chainNamespace:a}=xs.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...n,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{const s=e?.find(i=>i.namespace===n);return s?(s.construct({namespace:n,projectId:this.options?.projectId,networks:this.caipNetworks?.filter(({chainNamespace:i})=>i===n)}),r[n]=s):r[n]=new v3e({namespace:n,networks:this.getCaipNetworks()}),r},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e);const r=this.getAdapter(e);if(!r)throw new Error("adapter not found");await r.syncConnectors(),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)})),this.initAdapterController()}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=Ae.getConnectionStatus();we.state.enableReconnect===!1?this.setStatus("disconnected",e):n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(Ae.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(u=>u.id.toString()===i.toString()||u.caipNetworkId.toString()===i.toString()),a=J.state.activeChain===e,c=J.state.chains.get(e)?.accountState?.address;if(o){const u=a&&s?s:c;u&&this.syncAccount({address:u,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),r.on("disconnect",()=>{const s=this.remoteFeatures.multiWallet,i=Array.from(ze.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!s||i.length===0})}),r.on("connections",s=>{this.setConnections(s,e)}),r.on("pendingTransactions",()=>{const s=this.getAddress(e),i=J.state.activeCaipNetwork;!s||!i?.id||this.updateNativeBalance(s,i.id,i.chainNamespace)}),r.on("accountChanged",({address:s,chainId:i,connector:o})=>{this.handlePreviousConnectorConnection(o);const a=J.state.activeChain===e;o?.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o?.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e));const c=J.getNetworkData(e)?.caipNetwork?.id,u=i||c;a&&u?this.syncAccount({address:s,chainId:u,chainNamespace:e}):!a&&u?(this.syncAccountInfo(s,u,e),this.syncBalance({address:s,chainId:u,chainNamespace:e})):this.syncAccountInfo(s,i,e),Ae.addConnectedNamespace(e)})}async handlePreviousConnectorConnection(e){const r=e?.chain,n=e?.id,s=Re.getConnectorId(r),i=we.state.remoteFeatures?.multiWallet,a=r&&n&&s&&s!==n&&!i;try{a&&await ze.disconnect({id:s,namespace:r})}catch(c){console.warn("Error disconnecting previous connector",c)}}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&await this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>ze.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async reconnectWalletConnect(){await this.syncWalletConnectAccount();const e=this.getAddress();this.getCaipAddress()||Ae.deleteRecentWallet();const r=Ae.getRecentWallet();Zt.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:ke.isMobile()?"mobile":"qrcode",name:r?.name||"Unknown",reconnect:!0,view:It.state.view,walletRank:r?.order}})}async syncNamespaceConnection(e){try{e===ae.CHAIN.EVM&&ke.isSafeApp()&&Re.setConnectorId(ae.CONNECTOR_ID.SAFE,e);const r=Re.getConnectorId(e);switch(this.setStatus("connecting",e),r){case ae.CONNECTOR_ID.WALLET_CONNECT:await this.reconnectWalletConnect();break;case ae.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:r,closeModal:n}=e||{};J.resetAccount(r),J.resetNetwork(r),Ae.removeConnectedNamespace(r);const s=Array.from(J.state.chains.keys());(r?[r]:s).forEach(o=>Ae.addDisconnectedConnectorId(Re.getConnectorId(o)||"",o)),Re.removeConnectorId(r),br.resetChain(r),this.setUser(null,r),this.setStatus("disconnected",r),this.setConnectedWalletInfo(null,r),n!==!1&&dr.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const r=this.getAdapter(e),n=this.getCaipAddress(e),s=this.getCaipNetwork(e);return r?.syncConnections({connectToFirstConnector:!n,caipNetwork:s})}))}async syncAdapterConnection(e){const r=this.getAdapter(e),n=this.getCaipNetwork(e),s=Re.getConnectorId(e),o=Re.getConnectors(e).find(a=>a.id===s);try{if(!r||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!n?.id)throw new Error("CaipNetwork not found");const a=await r?.syncConnection({namespace:e,id:o.id,chainId:n.id,rpcUrl:n?.rpcUrls?.default?.http?.[0]});a?(this.syncProvider({...a,chainNamespace:e}),await this.syncAccount({...a,chainNamespace:e}),this.setStatus("connected",e),Zt.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:a.address,properties:{method:"browser",name:o.info?.name||o.name||"Unknown",reconnect:!0,view:It.state.view,walletRank:o?.explorerWallet?.order}})):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){const e=Object.keys(this.universalProvider?.session?.namespaces||{}),r=this.chainNamespaces.map(async n=>{const s=this.getAdapter(n);if(!s)return;const i=this.universalProvider?.session?.namespaces?.[n]?.accounts||[],o=J.state.activeCaipNetwork?.id,a=i.find(u=>{const{chainId:l}=xs.parseCaipAddress(u);return l===o?.toString()})||i[0];if(a){const u=xs.validateCaipAddress(a),{chainId:l,address:d}=xs.parseCaipAddress(u);if(br.setProviderId(n,cr.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&J.state.activeCaipNetwork&&s.namespace!==ae.CHAIN.EVM){const f=s.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:J.state.activeCaipNetwork});br.setProvider(n,f)}else br.setProvider(n,this.universalProvider);Re.setConnectorId(ae.CONNECTOR_ID.WALLET_CONNECT,n),Ae.addConnectedNamespace(n),await this.syncAccount({address:d,chainId:l,chainNamespace:n})}else e.includes(n)&&this.setStatus("disconnected",n);const c=this.getApprovedCaipNetworksData();this.syncConnectedWalletInfo(n),J.setApprovedCaipNetworksData(n,{approvedCaipNetworkIds:c.approvedCaipNetworkIds,supportsAllNetworks:c.supportsAllNetworks})});await Promise.all(r)}syncProvider({type:e,provider:r,id:n,chainNamespace:s}){br.setProviderId(s,e),br.setProvider(s,r),Re.setConnectorId(n,s)}async syncAccount(e){const r=e.chainNamespace===J.state.activeChain,n=J.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Ae.getActiveNetworkProps(),c=n?.id||a,u=J.state.activeCaipNetwork?.name===ae.UNSUPPORTED_NETWORK_NAME,l=J.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(u&&!l)&&c){let d=this.getCaipNetworks().find(h=>h.id.toString()===c.toString()),f=this.getCaipNetworks().find(h=>h.chainNamespace===o);if(!l&&!d&&!f){const h=this.getApprovedCaipNetworkIds()||[],y=h.find(S=>xs.parseCaipNetworkId(S)?.chainId===c.toString()),E=h.find(S=>xs.parseCaipNetworkId(S)?.chainNamespace===o);d=this.getCaipNetworks().find(S=>S.caipNetworkId===y),f=this.getCaipNetworks().find(S=>S.caipNetworkId===E||"deprecatedCaipNetworkId"in S&&S.deprecatedCaipNetworkId===E)}const p=d||f;p?.chainNamespace===J.state.activeChain?we.state.enableNetworkSwitch&&!we.state.allowUnsupportedChain&&J.state.activeCaipNetwork?.name===ae.UNSUPPORTED_NETWORK_NAME?J.showUnsupportedChainUI():this.setCaipNetwork(p):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o);const g=this.getAddress(o);ho.isLowerCaseMatch(s,g)||this.syncAccountInfo(s,p?.id,o),r?await this.syncBalance({address:s,chainId:p?.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:n?.id,chainNamespace:o}),this.syncIdentity({address:s,chainId:i,chainNamespace:o})}}async syncAccountInfo(e,r,n){const s=this.getCaipAddress(n),i=r||s?.split(":")[1];if(!i)return;const o=`${n}:${i}:${e}`;this.setCaipAddress(o,n,!0),await this.syncIdentity({address:e,chainId:i,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const s=n[0];this.setProfileName(s.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){const r=Re.getConnectorId(e),n=br.getProviderId(e);if(n===cr.CONNECTOR_TYPE_ANNOUNCED||n===cr.CONNECTOR_TYPE_INJECTED){if(r){const i=this.getConnectors().find(o=>{const a=o.id===r,c=o.info?.rdns===r,u=o.connectors?.some(l=>l.id===r||l.info?.rdns===r);return a||c||!!u});if(i){const{info:o,name:a,imageUrl:c}=i,u=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:u,...o},e)}}}else if(n===cr.CONNECTOR_TYPE_WALLET_CONNECT){const s=br.getProvider(e);s?.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:s.session.peer.metadata.icons?.[0]},e)}else if(r&&(r===ae.CONNECTOR_ID.COINBASE_SDK||r===ae.CONNECTOR_ID.COINBASE)){const s=this.getConnectors().find(c=>c.id===r),i=s?.name||"Coinbase Wallet",o=s?.imageUrl||this.getConnectorImage(s),a=s?.info;this.setConnectedWalletInfo({...a,name:i,icon:o},e)}}async syncBalance(e){!NY.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(n=>n.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,r,n){const s=this.getAdapter(n),i=J.getCaipNetworkByNamespace(n,r);if(s){const o=await s.getBalance({address:e,chainId:r,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,n),o}}async initializeUniversalAdapter(){const e=jTe.createLogger((s,...i)=>{s&&this.handleAlertError(s),console.error(...i)}),r={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};we.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await cTe.init(r);const n=this.universalProvider.disconnect.bind(this.universalProvider);this.universalProvider.disconnect=async()=>{try{return await n()}catch(s){if(s instanceof Error&&s.message.includes("Missing or invalid. Record was recently deleted"))return;throw s}},we.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{po.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:r=>{ze.setUri(r)},onConnect:r=>{const{address:n}=ke.getAccount(r[0]);ze.finalizeWcConnection(n)},onDisconnect:()=>{J.state.noAdapters&&this.resetAccount(e),ze.resetWcConnection()},onChainChanged:r=>{const n=J.state.activeChain,s=n&&Re.state.activeConnectorIds[n]===ae.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(J.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===r.toString()||a.caipNetworkId.toString()===r.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(r);return}o?.id.toString()!==i?.id.toString()&&o?.chainNamespace===i?.chainNamespace&&this.setCaipNetwork(i)}},onAccountsChanged:r=>{const n=J.state.activeChain,s=n&&Re.state.activeConnectorIds[n]===ae.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(J.state.noAdapters||s)){const i=r?.[0];i&&this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){return!this.universalProviderInitPromise&&ke.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Zt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}getDisabledCaipNetworks(){const e=J.getAllApprovedCaipNetworkIds(),r=J.getAllRequestedCaipNetworks();return ke.sortRequestedNetworks(e,r).filter(s=>J.isCaipNetworkDisabled(s))}handleAlertError(e){const r=Object.entries(Si.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,s]=r??[],{message:i,alertErrorKey:o}=s??{};if(n&&i&&!this.reportedAlertErrors[n]){const a=Si.ALERT_ERRORS[o];a&&(Ci.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:this.options?.projectId,networks:this.caipNetworks?.filter(({chainNamespace:s})=>s===r)}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){await this.injectModalUi(),e?.uri&&ze.setUri(e.uri);const{isSwap:r,isSend:n}=this.toModalOptions();return r(e)?dr.open({...e,data:{swap:e.arguments}}):n(e)&&e.arguments?this.openSend(e.arguments):dr.open(e)}async close(){await this.injectModalUi(),dr.close()}setLoading(e,r){dr.setLoading(e,r)}async disconnect(e){await ze.disconnect({namespace:e})}getSIWX(){return we.state.siwx}getError(){return""}getChainId(){return J.state.activeCaipNetwork?.id}async switchNetwork(e,{throwOnFailure:r=!1}={}){const n=this.getCaipNetworks().find(s=>s.id===e.id);if(!n){Ci.open(Si.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await J.switchActiveNetwork(n,{throwOnFailure:r})}getWalletProvider(){return J.state.activeChain?br.state.providers[J.state.activeChain]:null}getWalletProviderType(){return br.getProviderId(J.state.activeChain)}subscribeProviders(e){return br.subscribeProviders(e)}getThemeMode(){return na.state.themeMode}getThemeVariables(){return na.state.themeVariables}setThemeMode(e){na.setThemeMode(e),lO(na.state.themeMode)}setTermsConditionsUrl(e){we.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){we.setPrivacyPolicyUrl(e)}setThemeVariables(e){na.setThemeVariables(e),w3e(na.state.themeVariables)}subscribeTheme(e){return na.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?ze.subscribe(e):(Ci.open(ae.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?J.state.chains.get(e)?.accountState?.connectedWalletInfo:J.getAccountData()?.connectedWalletInfo}getAccount(e){const r=e||J.state.activeChain,n=Re.getAuthConnector(r),s=J.getAccountData(r),i=Ae.getConnectedConnectorId(J.state.activeChain),o=ze.getConnections(r);if(!r)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:u,type:l,publicKey:d})=>ke.createAccount(r,u,l||"eoa",d)));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:ke.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:n&&i===ae.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:Ae.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:fo(r),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const s=this.getAccount(r);s&&e(s)};r?J.subscribeChainProp("accountState",n,r):J.subscribe(n),Re.subscribe(n)}subscribeNetwork(e){return J.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r?.id,caipNetworkId:r?.caipNetworkId})})}subscribeWalletInfo(e,r){return r?J.subscribeChainProp("accountState",n=>e(n?.connectedWalletInfo),r):J.subscribeChainProp("accountState",n=>e(n?.connectedWalletInfo))}subscribeShouldUpdateToAddress(e){J.subscribeChainProp("accountState",r=>e(r?.shouldUpdateToAddress))}subscribeCaipNetworkChange(e){J.subscribeKey("activeCaipNetwork",e)}getState(){return Cu.state}getRemoteFeatures(){return we.state.remoteFeatures}subscribeState(e){return Cu.subscribe(e)}subscribeRemoteFeatures(e){return we.subscribeKey("remoteFeatures",e)}showErrorMessage(e){ml.showError(e)}showSuccessMessage(e){ml.showSuccess(e)}getEvent(){return{...Zt.state}}subscribeEvents(e){return Zt.subscribe(e)}replace(e){It.replace(e)}redirect(e){It.push(e)}popTransactionStack(e){It.popTransactionStack(e)}isOpen(){return dr.state.open}isTransactionStackEmpty(){return It.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){we.setFeatures(e)}updateRemoteFeatures(e){we.setRemoteFeatures(e)}updateOptions(e){const n={...we.state||{},...e};we.setOptions(n)}setConnectMethodsOrder(e){we.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){we.setWalletFeaturesOrder(e)}setCollapseWallets(e){we.setCollapseWallets(e)}setSocialsOrder(e){we.setSocialsOrder(e)}getConnectMethodsOrder(){return f1.getConnectOrderMethod(we.state.features,Re.getConnectors())}addNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);this.getCaipNetworks().find(s=>s.id===n.id)||J.addNetwork(n)}removeNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===r)&&J.removeNetwork(e,r)}},nj=!1,x3e=class extends A3e{async onAuthProviderConnected(e){const r=ho.userChainIdToChainNamespace(e?.chainId);if(e.message&&e.signature&&e.siwxMessage&&await To.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature),!r)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const n=r===ae.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=we.state.defaultAccountTypes[r],i=fo(r),o=e.preferredAccountType||i||s;this.setCaipAddress(n,r);const{signature:a,siwxMessage:c,message:u,...l}=e,d=J.getAccountData(r);this.setUser({...d?.user||{},...l},r),this.setSmartAccountDeployed(!!e.smartAccountDeployed,r),this.setPreferredAccountType(o,r),await Promise.all([this.syncAuthConnectorTheme(this.authProvider),this.syncAccount({address:e.address,chainId:e.chainId,chainNamespace:r})]),this.setLoading(!1,r)}setupAuthConnectorListeners(e){e.onRpcRequest(r=>{Qa.checkIfRequestExists(r)?Qa.checkIfRequestIsSafe(r)||this.handleUnsafeRPCRequest():(this.open(),console.error(Ss.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:r.method}),setTimeout(()=>{this.showErrorMessage(Ss.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((r,n)=>{const s=Qa.checkIfRequestIsSafe(n),i=this.getAddress(),o=J.state.activeCaipNetwork;s||(i&&o?.id&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const r=J.state.activeChain;if(!r)throw new Error("AppKit:onNotConnected - namespace is required");Re.getConnectorId(r)===ae.CONNECTOR_ID.AUTH&&(this.setCaipAddress(null,r),this.setLoading(!1,r))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:r,type:n})=>{const s=J.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");r&&this.setPreferredAccountType(n,s)})}async syncAuthConnectorTheme(e){if(!e)return;const r=na.getSnapshot();await e.syncTheme({themeMode:r.themeMode,themeVariables:r.themeVariables,w3mThemeVariables:Y1(r.themeVariables,r.themeMode)})}async syncAuthConnector(e,r){const n=ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r),s=r===J.state.activeChain;if(!n)return;this.setLoading(!0,r);const i=e.getLoginEmailUsed();this.setLoading(i,r),i&&this.setStatus("connecting",r);const o=e.getEmail(),a=e.getUsername(),c=J.getAccountData(r)?.user||{};this.setUser({...c,username:a,email:o},r),this.setupAuthConnectorListeners(e);const{isConnected:u}=await e.isConnected();if(r&&n&&s)if(u&&this.connectionControllerClient?.connectExternal){await e.init(),await this.syncAuthConnectorTheme(e),await this.connectionControllerClient?.connectExternal({id:ae.CONNECTOR_ID.AUTH,info:{name:ae.CONNECTOR_ID.AUTH},type:cr.CONNECTOR_TYPE_AUTH,provider:e,chainId:J.getNetworkData(r)?.caipNetwork?.id,chain:r}),this.setStatus("connected",r);const l=Ae.getConnectedSocialProvider();l?Zt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",address:this.getAddress(),properties:{provider:l,reconnect:!0}}):Zt.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:this.getAddress(),properties:{method:"email",name:this.universalProvider?.session?.peer?.metadata?.name||"Unknown",reconnect:!0,view:It.state.view,walletRank:void 0}})}else Re.getConnectorId(r)===ae.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",r),Ae.removeConnectedNamespace(r));this.setLoading(!1,r)}async checkExistingTelegramSocialConnection(e){try{if(!ke.isTelegram())return;const r=Ae.getTelegramSocialProvider();if(!r||!ke.isClient())return;const s=new URL(window.location.href).searchParams.get("result_uri");if(!s)return;r&&J.setAccountProp("socialProvider",r,e),await this.authProvider?.init();const i=Re.getAuthConnector();r&&i&&(this.setLoading(!0,e),await ze.connectExternal({id:i.id,type:i.type,socialUri:s},i.chain),Ae.setConnectedSocialProvider(r),Ae.removeTelegramSocialProvider(),Zt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){if(!ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const n=this.remoteFeatures?.email,s=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,i=n||s,a=ho.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&this.options?.projectId&&i&&(this.authProvider=FTe.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(a)?.caipNetworkId,abortController:Si.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Ci.open(Si.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Ci.open(Si.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Ci.open(Si.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:u=>c1(u),getCaipNetworks:u=>J.getCaipNetworks(u)}),Cu.subscribeOpen(u=>{!u&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}));const c=e===J.state.activeChain&&we.state.enableReconnect;we.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&pt.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;const r=J.state.activeChain,n=e.chainNamespace,s=this.getAddressByChainNamespace(n);if(n===r&&J.getAccountData(n)?.caipAddress)await this.getAdapter(n)?.switchNetwork({caipNetwork:e}),this.setCaipNetwork(e);else{const a=br.getProviderId(r)===cr.CONNECTOR_TYPE_AUTH,c=br.getProviderId(n),u=c===cr.CONNECTOR_TYPE_AUTH,l=ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!n)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((a&&c===void 0||u)&&l)try{J.state.activeChain=e.chainNamespace,s?await this.getAdapter(n)?.switchNetwork({caipNetwork:e}):await this.connectionControllerClient?.connectExternal?.({id:ae.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:n,chainId:e.id,type:cr.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{await this.getAdapter(n)?.switchNetwork({caipNetwork:e})}else c===cr.CONNECTOR_TYPE_WALLET_CONNECT?(J.state.noAdapters||await this.getAdapter(n)?.switchNetwork({caipNetwork:e}),this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:n}))}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Cu.set({initialized:!0})}async syncIdentity({address:e,chainId:r,chainNamespace:n}){const s=`${n}:${r}`;if(this.caipNetworks?.find(a=>a.caipNetworkId===s)?.testnet){this.setProfileName(null,n),this.setProfileImage(null,n);return}const o=Re.getConnectorId(n)===ae.CONNECTOR_ID.AUTH;try{const{name:a,avatar:c}=await this.fetchIdentity({address:e});!a&&o?await this.syncReownName(e,n):(this.setProfileName(a,n),this.setProfileImage(c,n))}catch{r!==1&&this.setProfileImage(null,n)}}syncConnectedWalletInfo(e){const r=br.getProviderId(e);if(r===cr.CONNECTOR_TYPE_AUTH){const n=this.authProvider;if(n){const s=Ae.getConnectedSocialProvider()??"email",i=n.getEmail()??n.getUsername();this.setConnectedWalletInfo({name:r,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ke.isClient()&&!nj)try{const e={...wr.DEFAULT_FEATURES,...this.options.features},r=this.remoteFeatures;if(await this.loadModalComponents(e,r),ke.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!we.state.disableAppend&&!we.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}nj=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,r){if(!ke.isClient())return;const n=[];(r.email||r.socials&&r.socials.length>0)&&n.push(Pr(()=>import("./embedded-wallet-Bb6B8Hbq.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),r.email&&n.push(Pr(()=>import("./email-BCLLKhvJ.js"),__vite__mapDeps([18,5,4,19,16,10,15,7,8,9,14,20,12]))),r.socials&&n.push(Pr(()=>import("./socials-CvJSSx5b.js"),__vite__mapDeps([21,4,7,5,22,8,9,23,15,24,14,10,25,6,26,27]))),r.swaps&&r.swaps.length>0&&n.push(Pr(()=>import("./swaps-DCfJMG53.js"),__vite__mapDeps([28,4,5,14,10,15,7,29,30,31,27,32,6,12,8,9]))),e.send&&n.push(Pr(()=>import("./send-DAVKPRlF.js"),__vite__mapDeps([33,4,5,14,10,15,7,34,8,9,35,16,32,6,27,31,12,36,37]))),e.receive&&n.push(Pr(()=>import("./receive-1v883Fze.js"),__vite__mapDeps([38,4,7,5,6,25,26]))),r.onramp&&r.onramp.length>0&&n.push(Pr(()=>import("./onramp-C0IOiNx8.js"),__vite__mapDeps([39,4,7,5,40,10,22,8,9,6,41,42,16,14,15,24,12]))),r.payWithExchange&&n.push(Pr(()=>import("./pay-with-exchange-Dv4alUJS.js"),__vite__mapDeps([43,4,7,5,6,13,40,10,27,14,35,8,9,16,44,15,12,36,34]))),r.activity&&n.push(Pr(()=>import("./transactions-DLKiW_g8.js"),__vite__mapDeps([45,5,4,46,47,15,7,16,6,27]))),(e.pay||r.payments)&&n.push(Pr(()=>import("./index-BFm6ryEz.js"),__vite__mapDeps([48,4,7,5,14,10,49,13,6,40,50,34,51,15,24]))),r.emailCapture&&n.push(Pr(()=>import("./data-capture-D71D1D3m.js"),__vite__mapDeps([52,4,5,19,16,10,53]))),await Promise.all([...n,Pr(()=>import("./index-DVppxrph.js"),__vite__mapDeps([54,4,7,5,6,10,37,15,55,42,16,11,51,13,40,14,44,46,47,27,36,29,30,34,8,9,12,50,20,22,23,24,25,26,17,41])),Pr(()=>import("./w3m-modal-vkHnSrVf.js"),__vite__mapDeps([56,4,7,5,49,6,11,10,15,30,55,42,16,51,31,14]))])}};const C3e="1.8.14";function S3e(t){return new x3e({...t,sdkVersion:ke.generateSdkVersion(t.adapters??[],"html",C3e)})}const Tf=BigInt(0),ti=BigInt(1),BN=BigInt(2),I3e=BigInt(8);function T3e(t,e,r,n){const s=t.sqr(r),i=t.sqr(n),o=t.add(t.mul(e.a,s),i),a=t.add(t.ONE,t.mul(e.d,t.mul(s,i)));return t.eql(o,a)}function N3e(t,e={}){const r=uQ("edwards",t,e,e.FpFnLE),{Fp:n,Fn:s}=r;let i=r.CURVE;const{h:o}=i;OE(e,{},{uvRatio:"function"});const a=BN<<BigInt(s.BYTES*8)-ti,c=y=>n.create(y),u=e.uvRatio||((y,E)=>{try{return{isValid:!0,value:n.sqrt(n.div(y,E))}}catch{return{isValid:!1,value:Tf}}});if(!T3e(n,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function l(y,E,S=!1){const C=S?ti:Tf;return x8("coordinate "+y,E,C,a),E}function d(y){if(!(y instanceof g))throw new Error("ExtendedPoint expected")}const f=f6((y,E)=>{const{X:S,Y:C,Z:_}=y,T=y.is0();E==null&&(E=T?I3e:n.inv(_));const P=c(S*E),D=c(C*E),F=n.mul(_,E);if(T)return{x:Tf,y:ti};if(F!==ti)throw new Error("invZ was invalid");return{x:P,y:D}}),p=f6(y=>{const{a:E,d:S}=i;if(y.is0())throw new Error("bad point: ZERO");const{X:C,Y:_,Z:T,T:P}=y,D=c(C*C),F=c(_*_),I=c(T*T),U=c(I*I),L=c(D*E),B=c(I*c(L+F)),A=c(U+c(S*c(D*F)));if(B!==A)throw new Error("bad point: equation left != right (1)");const m=c(C*_),b=c(T*P);if(m!==b)throw new Error("bad point: equation left != right (2)");return!0});class g{constructor(E,S,C,_){this.X=l("x",E),this.Y=l("y",S),this.Z=l("z",C,!0),this.T=l("t",_),Object.freeze(this)}static CURVE(){return i}static fromAffine(E){if(E instanceof g)throw new Error("extended point not allowed");const{x:S,y:C}=E||{};return l("x",S),l("y",C),new g(S,C,ti,c(S*C))}static fromBytes(E,S=!1){const C=n.BYTES,{a:_,d:T}=i;E=wM(Su(E,C,"point")),x0(S,"zip215");const P=wM(E),D=E[C-1];P[C-1]=D&-129;const F=Uv(P),I=S?a:n.ORDER;x8("point.y",F,Tf,I);const U=c(F*F),L=c(U-ti),B=c(T*U-_);let{isValid:A,value:m}=u(L,B);if(!A)throw new Error("bad point: invalid y coordinate");const b=(m&ti)===ti,w=(D&128)!==0;if(!S&&m===Tf&&w)throw new Error("bad point: x=0 and x_0=1");return w!==b&&(m=c(-m)),g.fromAffine({x:m,y:F})}static fromHex(E,S=!1){return g.fromBytes(hs("point",E),S)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(E=8,S=!0){return h.createCache(this,E),S||this.multiply(BN),this}assertValidity(){p(this)}equals(E){d(E);const{X:S,Y:C,Z:_}=this,{X:T,Y:P,Z:D}=E,F=c(S*D),I=c(T*_),U=c(C*D),L=c(P*_);return F===I&&U===L}is0(){return this.equals(g.ZERO)}negate(){return new g(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:E}=i,{X:S,Y:C,Z:_}=this,T=c(S*S),P=c(C*C),D=c(BN*c(_*_)),F=c(E*T),I=S+C,U=c(c(I*I)-T-P),L=F+P,B=L-D,A=F-P,m=c(U*B),b=c(L*A),w=c(U*A),x=c(B*L);return new g(m,b,x,w)}add(E){d(E);const{a:S,d:C}=i,{X:_,Y:T,Z:P,T:D}=this,{X:F,Y:I,Z:U,T:L}=E,B=c(_*F),A=c(T*I),m=c(D*C*L),b=c(P*U),w=c((_+T)*(F+I)-B-A),x=b-m,M=b+m,k=c(A-S*B),j=c(w*x),N=c(M*k),v=c(w*k),R=c(x*M);return new g(j,N,R,v)}subtract(E){return this.add(E.negate())}multiply(E){if(!s.isValidNot0(E))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:S,f:C}=h.cached(this,E,_=>Qp(g,_));return Qp(g,[S,C])[0]}multiplyUnsafe(E,S=g.ZERO){if(!s.isValid(E))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return E===Tf?g.ZERO:this.is0()||E===ti?this:h.unsafe(this,E,C=>Qp(g,C),S)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return h.unsafe(this,i.n).is0()}toAffine(E){return f(this,E)}clearCofactor(){return o===ti?this:this.multiplyUnsafe(o)}toBytes(){const{x:E,y:S}=this.toAffine(),C=n.toBytes(S);return C[C.length-1]|=E&ti?128:0,C}toHex(){return p0(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(E){return Qp(g,E)}static msm(E,S){return cQ(g,s,E,S)}_setWindowSize(E){this.precompute(E)}toRawBytes(){return this.toBytes()}}g.BASE=new g(i.Gx,i.Gy,ti,c(i.Gx*i.Gy)),g.ZERO=new g(Tf,ti,ti,Tf),g.Fp=n,g.Fn=s;const h=new aQ(g,s.BITS);return g.BASE.precompute(8),g}function P3e(t,e,r={}){if(typeof e!="function")throw new Error('"hash" function param is required');OE(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=r,{BASE:s,Fp:i,Fn:o}=t,a=r.randomBytes||W4,c=r.adjustScalarBytes||(I=>I),u=r.domain||((I,U,L)=>{if(x0(L,"phflag"),U.length||L)throw new Error("Contexts/pre-hash are not supported");return I});function l(I){return o.create(Uv(I))}function d(I){const U=C.secretKey;I=hs("private key",I,U);const L=hs("hashed private key",e(I),2*U),B=c(L.slice(0,U)),A=L.slice(U,2*U),m=l(B);return{head:B,prefix:A,scalar:m}}function f(I){const{head:U,prefix:L,scalar:B}=d(I),A=s.multiply(B),m=A.toBytes();return{head:U,prefix:L,scalar:B,point:A,pointBytes:m}}function p(I){return f(I).pointBytes}function g(I=Uint8Array.of(),...U){const L=pl(...U);return l(e(u(L,hs("context",I),!!n)))}function h(I,U,L={}){I=hs("message",I),n&&(I=n(I));const{prefix:B,scalar:A,pointBytes:m}=f(U),b=g(L.context,B,I),w=s.multiply(b).toBytes(),x=g(L.context,w,m,I),M=o.create(b+x*A);if(!o.isValid(M))throw new Error("sign failed: invalid s");const k=pl(w,o.toBytes(M));return Su(k,C.signature,"result")}const y={zip215:!0};function E(I,U,L,B=y){const{context:A,zip215:m}=B,b=C.signature;I=hs("signature",I,b),U=hs("message",U),L=hs("publicKey",L,C.publicKey),m!==void 0&&x0(m,"zip215"),n&&(U=n(U));const w=b/2,x=I.subarray(0,w),M=Uv(I.subarray(w,b));let k,j,N;try{k=t.fromBytes(L,m),j=t.fromBytes(x,m),N=s.multiplyUnsafe(M)}catch{return!1}if(!m&&k.isSmallOrder())return!1;const v=g(A,j.toBytes(),k.toBytes(),U);return j.add(k.multiplyUnsafe(v)).subtract(N).clearCofactor().is0()}const S=i.BYTES,C={secretKey:S,publicKey:S,signature:2*S,seed:S};function _(I=a(C.seed)){return Su(I,C.seed,"seed")}function T(I){const U=F.randomSecretKey(I);return{secretKey:U,publicKey:p(U)}}function P(I){return PE(I)&&I.length===o.BYTES}function D(I,U){try{return!!t.fromBytes(I,U)}catch{return!1}}const F={getExtendedPublicKey:f,randomSecretKey:_,isValidSecretKey:P,isValidPublicKey:D,toMontgomery(I){const{y:U}=t.fromBytes(I),L=C.publicKey,B=L===32;if(!B&&L!==57)throw new Error("only defined for 25519 and 448");const A=B?i.div(ti+U,ti-U):i.div(U-ti,U+ti);return i.toBytes(A)},toMontgomerySecret(I){const U=C.secretKey;Su(I,U);const L=e(I.subarray(0,U));return c(L).subarray(0,U)},randomPrivateKey:_,precompute(I=8,U=t.BASE){return U.precompute(I,!1)}};return Object.freeze({keygen:T,getPublicKey:p,sign:h,verify:E,utils:F,Point:t,lengths:C})}function R3e(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=H0(e.n,t.nBitLength,!0),s={Fp:r,Fn:n,uvRatio:t.uvRatio},i={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:s,hash:t.hash,eddsaOpts:i}}function O3e(t,e){const r=e.Point;return Object.assign({},e,{ExtendedPoint:r,CURVE:t,nBitLength:r.Fn.BITS,nByteLength:r.Fn.BYTES})}function k3e(t){const{CURVE:e,curveOpts:r,hash:n,eddsaOpts:s}=R3e(t),i=N3e(e,r),o=P3e(i,n,s);return O3e(t,o)}const B3e=BigInt(1),sj=BigInt(2);BigInt(3);const U3e=BigInt(5),M3e=BigInt(8),Ak=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Dte={p:Ak,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:M3e,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function D3e(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=Ak,a=t*t%i*t%i,c=ls(a,sj,i)*a%i,u=ls(c,B3e,i)*t%i,l=ls(u,U3e,i)*u%i,d=ls(l,e,i)*l%i,f=ls(d,r,i)*d%i,p=ls(f,n,i)*f%i,g=ls(p,s,i)*p%i,h=ls(g,s,i)*p%i,y=ls(h,e,i)*l%i;return{pow_p_5_8:ls(y,sj,i)*t%i,b2:a}}function j3e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const ij=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function L3e(t,e){const r=Ak,n=ks(e*e*e,r),s=ks(n*n*e,r),i=D3e(t*s).pow_p_5_8;let o=ks(t*n*i,r);const a=ks(e*o*o,r),c=o,u=ks(o*ij,r),l=a===t,d=a===ks(-t,r),f=a===ks(-t*ij,r);return l&&(o=c),(d||f)&&(o=u),Vbe(o,r)&&(o=ks(-o,r)),{isValid:l||d,value:o}}const F3e=H0(Dte.p,{isLE:!0}),$3e={...Dte,Fp:F3e,hash:pwe,adjustScalarBytes:j3e,uvRatio:L3e},FE=k3e($3e);var bI={exports:{}};const q3e={},H3e=Object.freeze(Object.defineProperty({__proto__:null,default:q3e},Symbol.toStringTag,{value:"Module"})),z3e=Ln(H3e);var W3e=bI.exports,oj;function jte(){return oj||(oj=1,(function(t){(function(e,r){function n(A,m){if(!A)throw new Error(m||"Assertion failed")}function s(A,m){A.super_=m;var b=function(){};b.prototype=m.prototype,A.prototype=new b,A.prototype.constructor=A}function i(A,m,b){if(i.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((m==="le"||m==="be")&&(b=m,m=10),this._init(A||0,m||10,b||"be"))}typeof e=="object"?e.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=z3e.Buffer}catch{}i.isBN=function(m){return m instanceof i?!0:m!==null&&typeof m=="object"&&m.constructor.wordSize===i.wordSize&&Array.isArray(m.words)},i.max=function(m,b){return m.cmp(b)>0?m:b},i.min=function(m,b){return m.cmp(b)<0?m:b},i.prototype._init=function(m,b,w){if(typeof m=="number")return this._initNumber(m,b,w);if(typeof m=="object")return this._initArray(m,b,w);b==="hex"&&(b=16),n(b===(b|0)&&b>=2&&b<=36),m=m.toString().replace(/\s+/g,"");var x=0;m[0]==="-"&&(x++,this.negative=1),x<m.length&&(b===16?this._parseHex(m,x,w):(this._parseBase(m,b,x),w==="le"&&this._initArray(this.toArray(),b,w)))},i.prototype._initNumber=function(m,b,w){m<0&&(this.negative=1,m=-m),m<67108864?(this.words=[m&67108863],this.length=1):m<4503599627370496?(this.words=[m&67108863,m/67108864&67108863],this.length=2):(n(m<9007199254740992),this.words=[m&67108863,m/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),b,w)},i.prototype._initArray=function(m,b,w){if(n(typeof m.length=="number"),m.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(m.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var M,k,j=0;if(w==="be")for(x=m.length-1,M=0;x>=0;x-=3)k=m[x]|m[x-1]<<8|m[x-2]<<16,this.words[M]|=k<<j&67108863,this.words[M+1]=k>>>26-j&67108863,j+=24,j>=26&&(j-=26,M++);else if(w==="le")for(x=0,M=0;x<m.length;x+=3)k=m[x]|m[x+1]<<8|m[x+2]<<16,this.words[M]|=k<<j&67108863,this.words[M+1]=k>>>26-j&67108863,j+=24,j>=26&&(j-=26,M++);return this._strip()};function a(A,m){var b=A.charCodeAt(m);if(b>=48&&b<=57)return b-48;if(b>=65&&b<=70)return b-55;if(b>=97&&b<=102)return b-87;n(!1,"Invalid character in "+A)}function c(A,m,b){var w=a(A,b);return b-1>=m&&(w|=a(A,b-1)<<4),w}i.prototype._parseHex=function(m,b,w){this.length=Math.ceil((m.length-b)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var M=0,k=0,j;if(w==="be")for(x=m.length-1;x>=b;x-=2)j=c(m,b,x)<<M,this.words[k]|=j&67108863,M>=18?(M-=18,k+=1,this.words[k]|=j>>>26):M+=8;else{var N=m.length-b;for(x=N%2===0?b+1:b;x<m.length;x+=2)j=c(m,b,x)<<M,this.words[k]|=j&67108863,M>=18?(M-=18,k+=1,this.words[k]|=j>>>26):M+=8}this._strip()};function u(A,m,b,w){for(var x=0,M=0,k=Math.min(A.length,b),j=m;j<k;j++){var N=A.charCodeAt(j)-48;x*=w,N>=49?M=N-49+10:N>=17?M=N-17+10:M=N,n(N>=0&&M<w,"Invalid character"),x+=M}return x}i.prototype._parseBase=function(m,b,w){this.words=[0],this.length=1;for(var x=0,M=1;M<=67108863;M*=b)x++;x--,M=M/b|0;for(var k=m.length-w,j=k%x,N=Math.min(k,k-j)+w,v=0,R=w;R<N;R+=x)v=u(m,R,R+x,b),this.imuln(M),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(j!==0){var $=1;for(v=u(m,R,m.length,b),R=0;R<j;R++)$*=b;this.imuln($),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}this._strip()},i.prototype.copy=function(m){m.words=new Array(this.length);for(var b=0;b<this.length;b++)m.words[b]=this.words[b];m.length=this.length,m.negative=this.negative,m.red=this.red};function l(A,m){A.words=m.words,A.length=m.length,A.negative=m.negative,A.red=m.red}if(i.prototype._move=function(m){l(m,this)},i.prototype.clone=function(){var m=new i(null);return this.copy(m),m},i.prototype._expand=function(m){for(;this.length<m;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch{i.prototype.inspect=d}else i.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(m,b){m=m||10,b=b|0||1;var w;if(m===16||m==="hex"){w="";for(var x=0,M=0,k=0;k<this.length;k++){var j=this.words[k],N=((j<<x|M)&16777215).toString(16);M=j>>>24-x&16777215,x+=2,x>=26&&(x-=26,k--),M!==0||k!==this.length-1?w=f[6-N.length]+N+w:w=N+w}for(M!==0&&(w=M.toString(16)+w);w.length%b!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(m===(m|0)&&m>=2&&m<=36){var v=p[m],R=g[m];w="";var $=this.clone();for($.negative=0;!$.isZero();){var O=$.modrn(R).toString(m);$=$.idivn(R),$.isZero()?w=O+w:w=f[v-O.length]+O+w}for(this.isZero()&&(w="0"+w);w.length%b!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var m=this.words[0];return this.length===2?m+=this.words[1]*67108864:this.length===3&&this.words[2]===1?m+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-m:m},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(m,b){return this.toArrayLike(o,m,b)}),i.prototype.toArray=function(m,b){return this.toArrayLike(Array,m,b)};var h=function(m,b){return m.allocUnsafe?m.allocUnsafe(b):new m(b)};i.prototype.toArrayLike=function(m,b,w){this._strip();var x=this.byteLength(),M=w||Math.max(1,x);n(x<=M,"byte array longer than desired length"),n(M>0,"Requested array length <= 0");var k=h(m,M),j=b==="le"?"LE":"BE";return this["_toArrayLike"+j](k,x),k},i.prototype._toArrayLikeLE=function(m,b){for(var w=0,x=0,M=0,k=0;M<this.length;M++){var j=this.words[M]<<k|x;m[w++]=j&255,w<m.length&&(m[w++]=j>>8&255),w<m.length&&(m[w++]=j>>16&255),k===6?(w<m.length&&(m[w++]=j>>24&255),x=0,k=0):(x=j>>>24,k+=2)}if(w<m.length)for(m[w++]=x;w<m.length;)m[w++]=0},i.prototype._toArrayLikeBE=function(m,b){for(var w=m.length-1,x=0,M=0,k=0;M<this.length;M++){var j=this.words[M]<<k|x;m[w--]=j&255,w>=0&&(m[w--]=j>>8&255),w>=0&&(m[w--]=j>>16&255),k===6?(w>=0&&(m[w--]=j>>24&255),x=0,k=0):(x=j>>>24,k+=2)}if(w>=0)for(m[w--]=x;w>=0;)m[w--]=0},Math.clz32?i.prototype._countBits=function(m){return 32-Math.clz32(m)}:i.prototype._countBits=function(m){var b=m,w=0;return b>=4096&&(w+=13,b>>>=13),b>=64&&(w+=7,b>>>=7),b>=8&&(w+=4,b>>>=4),b>=2&&(w+=2,b>>>=2),w+b},i.prototype._zeroBits=function(m){if(m===0)return 26;var b=m,w=0;return(b&8191)===0&&(w+=13,b>>>=13),(b&127)===0&&(w+=7,b>>>=7),(b&15)===0&&(w+=4,b>>>=4),(b&3)===0&&(w+=2,b>>>=2),(b&1)===0&&w++,w},i.prototype.bitLength=function(){var m=this.words[this.length-1],b=this._countBits(m);return(this.length-1)*26+b};function y(A){for(var m=new Array(A.bitLength()),b=0;b<m.length;b++){var w=b/26|0,x=b%26;m[b]=A.words[w]>>>x&1}return m}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var m=0,b=0;b<this.length;b++){var w=this._zeroBits(this.words[b]);if(m+=w,w!==26)break}return m},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(m){return this.negative!==0?this.abs().inotn(m).iaddn(1):this.clone()},i.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(m){for(;this.length<m.length;)this.words[this.length++]=0;for(var b=0;b<m.length;b++)this.words[b]=this.words[b]|m.words[b];return this._strip()},i.prototype.ior=function(m){return n((this.negative|m.negative)===0),this.iuor(m)},i.prototype.or=function(m){return this.length>m.length?this.clone().ior(m):m.clone().ior(this)},i.prototype.uor=function(m){return this.length>m.length?this.clone().iuor(m):m.clone().iuor(this)},i.prototype.iuand=function(m){var b;this.length>m.length?b=m:b=this;for(var w=0;w<b.length;w++)this.words[w]=this.words[w]&m.words[w];return this.length=b.length,this._strip()},i.prototype.iand=function(m){return n((this.negative|m.negative)===0),this.iuand(m)},i.prototype.and=function(m){return this.length>m.length?this.clone().iand(m):m.clone().iand(this)},i.prototype.uand=function(m){return this.length>m.length?this.clone().iuand(m):m.clone().iuand(this)},i.prototype.iuxor=function(m){var b,w;this.length>m.length?(b=this,w=m):(b=m,w=this);for(var x=0;x<w.length;x++)this.words[x]=b.words[x]^w.words[x];if(this!==b)for(;x<b.length;x++)this.words[x]=b.words[x];return this.length=b.length,this._strip()},i.prototype.ixor=function(m){return n((this.negative|m.negative)===0),this.iuxor(m)},i.prototype.xor=function(m){return this.length>m.length?this.clone().ixor(m):m.clone().ixor(this)},i.prototype.uxor=function(m){return this.length>m.length?this.clone().iuxor(m):m.clone().iuxor(this)},i.prototype.inotn=function(m){n(typeof m=="number"&&m>=0);var b=Math.ceil(m/26)|0,w=m%26;this._expand(b),w>0&&b--;for(var x=0;x<b;x++)this.words[x]=~this.words[x]&67108863;return w>0&&(this.words[x]=~this.words[x]&67108863>>26-w),this._strip()},i.prototype.notn=function(m){return this.clone().inotn(m)},i.prototype.setn=function(m,b){n(typeof m=="number"&&m>=0);var w=m/26|0,x=m%26;return this._expand(w+1),b?this.words[w]=this.words[w]|1<<x:this.words[w]=this.words[w]&~(1<<x),this._strip()},i.prototype.iadd=function(m){var b;if(this.negative!==0&&m.negative===0)return this.negative=0,b=this.isub(m),this.negative^=1,this._normSign();if(this.negative===0&&m.negative!==0)return m.negative=0,b=this.isub(m),m.negative=1,b._normSign();var w,x;this.length>m.length?(w=this,x=m):(w=m,x=this);for(var M=0,k=0;k<x.length;k++)b=(w.words[k]|0)+(x.words[k]|0)+M,this.words[k]=b&67108863,M=b>>>26;for(;M!==0&&k<w.length;k++)b=(w.words[k]|0)+M,this.words[k]=b&67108863,M=b>>>26;if(this.length=w.length,M!==0)this.words[this.length]=M,this.length++;else if(w!==this)for(;k<w.length;k++)this.words[k]=w.words[k];return this},i.prototype.add=function(m){var b;return m.negative!==0&&this.negative===0?(m.negative=0,b=this.sub(m),m.negative^=1,b):m.negative===0&&this.negative!==0?(this.negative=0,b=m.sub(this),this.negative=1,b):this.length>m.length?this.clone().iadd(m):m.clone().iadd(this)},i.prototype.isub=function(m){if(m.negative!==0){m.negative=0;var b=this.iadd(m);return m.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(m),this.negative=1,this._normSign();var w=this.cmp(m);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var x,M;w>0?(x=this,M=m):(x=m,M=this);for(var k=0,j=0;j<M.length;j++)b=(x.words[j]|0)-(M.words[j]|0)+k,k=b>>26,this.words[j]=b&67108863;for(;k!==0&&j<x.length;j++)b=(x.words[j]|0)+k,k=b>>26,this.words[j]=b&67108863;if(k===0&&j<x.length&&x!==this)for(;j<x.length;j++)this.words[j]=x.words[j];return this.length=Math.max(this.length,j),x!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(m){return this.clone().isub(m)};function E(A,m,b){b.negative=m.negative^A.negative;var w=A.length+m.length|0;b.length=w,w=w-1|0;var x=A.words[0]|0,M=m.words[0]|0,k=x*M,j=k&67108863,N=k/67108864|0;b.words[0]=j;for(var v=1;v<w;v++){for(var R=N>>>26,$=N&67108863,O=Math.min(v,m.length-1),H=Math.max(0,v-A.length+1);H<=O;H++){var W=v-H|0;x=A.words[W]|0,M=m.words[H]|0,k=x*M+$,R+=k/67108864|0,$=k&67108863}b.words[v]=$|0,N=R|0}return N!==0?b.words[v]=N|0:b.length--,b._strip()}var S=function(m,b,w){var x=m.words,M=b.words,k=w.words,j=0,N,v,R,$=x[0]|0,O=$&8191,H=$>>>13,W=x[1]|0,G=W&8191,K=W>>>13,Q=x[2]|0,re=Q&8191,de=Q>>>13,le=x[3]|0,se=le&8191,be=le>>>13,We=x[4]|0,Ne=We&8191,Be=We>>>13,At=x[5]|0,Ee=At&8191,fe=At>>>13,Mt=x[6]|0,bt=Mt&8191,jt=Mt>>>13,ge=x[7]|0,ve=ge&8191,V=ge>>>13,q=x[8]|0,z=q&8191,X=q>>>13,ne=x[9]|0,ce=ne&8191,me=ne>>>13,Rt=M[0]|0,Tt=Rt&8191,Ct=Rt>>>13,or=M[1]|0,Et=or&8191,on=or>>>13,Zc=M[2]|0,Qr=Zc&8191,Wr=Zc>>>13,Yc=M[3]|0,an=Yc&8191,Vr=Yc>>>13,Jc=M[4]|0,Gr=Jc&8191,cn=Jc>>>13,wo=M[5]|0,Sr=wo&8191,un=wo>>>13,vo=M[6]|0,Ir=vo&8191,Kr=vo>>>13,Xc=M[7]|0,ln=Xc&8191,Zr=Xc>>>13,Qc=M[8]|0,en=Qc&8191,dn=Qc>>>13,Ra=M[9]|0,tn=Ra&8191,Br=Ra>>>13;w.negative=m.negative^b.negative,w.length=19,N=Math.imul(O,Tt),v=Math.imul(O,Ct),v=v+Math.imul(H,Tt)|0,R=Math.imul(H,Ct);var hc=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(hc>>>26)|0,hc&=67108863,N=Math.imul(G,Tt),v=Math.imul(G,Ct),v=v+Math.imul(K,Tt)|0,R=Math.imul(K,Ct),N=N+Math.imul(O,Et)|0,v=v+Math.imul(O,on)|0,v=v+Math.imul(H,Et)|0,R=R+Math.imul(H,on)|0;var pc=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(pc>>>26)|0,pc&=67108863,N=Math.imul(re,Tt),v=Math.imul(re,Ct),v=v+Math.imul(de,Tt)|0,R=Math.imul(de,Ct),N=N+Math.imul(G,Et)|0,v=v+Math.imul(G,on)|0,v=v+Math.imul(K,Et)|0,R=R+Math.imul(K,on)|0,N=N+Math.imul(O,Qr)|0,v=v+Math.imul(O,Wr)|0,v=v+Math.imul(H,Qr)|0,R=R+Math.imul(H,Wr)|0;var gc=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(gc>>>26)|0,gc&=67108863,N=Math.imul(se,Tt),v=Math.imul(se,Ct),v=v+Math.imul(be,Tt)|0,R=Math.imul(be,Ct),N=N+Math.imul(re,Et)|0,v=v+Math.imul(re,on)|0,v=v+Math.imul(de,Et)|0,R=R+Math.imul(de,on)|0,N=N+Math.imul(G,Qr)|0,v=v+Math.imul(G,Wr)|0,v=v+Math.imul(K,Qr)|0,R=R+Math.imul(K,Wr)|0,N=N+Math.imul(O,an)|0,v=v+Math.imul(O,Vr)|0,v=v+Math.imul(H,an)|0,R=R+Math.imul(H,Vr)|0;var mc=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(mc>>>26)|0,mc&=67108863,N=Math.imul(Ne,Tt),v=Math.imul(Ne,Ct),v=v+Math.imul(Be,Tt)|0,R=Math.imul(Be,Ct),N=N+Math.imul(se,Et)|0,v=v+Math.imul(se,on)|0,v=v+Math.imul(be,Et)|0,R=R+Math.imul(be,on)|0,N=N+Math.imul(re,Qr)|0,v=v+Math.imul(re,Wr)|0,v=v+Math.imul(de,Qr)|0,R=R+Math.imul(de,Wr)|0,N=N+Math.imul(G,an)|0,v=v+Math.imul(G,Vr)|0,v=v+Math.imul(K,an)|0,R=R+Math.imul(K,Vr)|0,N=N+Math.imul(O,Gr)|0,v=v+Math.imul(O,cn)|0,v=v+Math.imul(H,Gr)|0,R=R+Math.imul(H,cn)|0;var yc=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(yc>>>26)|0,yc&=67108863,N=Math.imul(Ee,Tt),v=Math.imul(Ee,Ct),v=v+Math.imul(fe,Tt)|0,R=Math.imul(fe,Ct),N=N+Math.imul(Ne,Et)|0,v=v+Math.imul(Ne,on)|0,v=v+Math.imul(Be,Et)|0,R=R+Math.imul(Be,on)|0,N=N+Math.imul(se,Qr)|0,v=v+Math.imul(se,Wr)|0,v=v+Math.imul(be,Qr)|0,R=R+Math.imul(be,Wr)|0,N=N+Math.imul(re,an)|0,v=v+Math.imul(re,Vr)|0,v=v+Math.imul(de,an)|0,R=R+Math.imul(de,Vr)|0,N=N+Math.imul(G,Gr)|0,v=v+Math.imul(G,cn)|0,v=v+Math.imul(K,Gr)|0,R=R+Math.imul(K,cn)|0,N=N+Math.imul(O,Sr)|0,v=v+Math.imul(O,un)|0,v=v+Math.imul(H,Sr)|0,R=R+Math.imul(H,un)|0;var ff=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(ff>>>26)|0,ff&=67108863,N=Math.imul(bt,Tt),v=Math.imul(bt,Ct),v=v+Math.imul(jt,Tt)|0,R=Math.imul(jt,Ct),N=N+Math.imul(Ee,Et)|0,v=v+Math.imul(Ee,on)|0,v=v+Math.imul(fe,Et)|0,R=R+Math.imul(fe,on)|0,N=N+Math.imul(Ne,Qr)|0,v=v+Math.imul(Ne,Wr)|0,v=v+Math.imul(Be,Qr)|0,R=R+Math.imul(Be,Wr)|0,N=N+Math.imul(se,an)|0,v=v+Math.imul(se,Vr)|0,v=v+Math.imul(be,an)|0,R=R+Math.imul(be,Vr)|0,N=N+Math.imul(re,Gr)|0,v=v+Math.imul(re,cn)|0,v=v+Math.imul(de,Gr)|0,R=R+Math.imul(de,cn)|0,N=N+Math.imul(G,Sr)|0,v=v+Math.imul(G,un)|0,v=v+Math.imul(K,Sr)|0,R=R+Math.imul(K,un)|0,N=N+Math.imul(O,Ir)|0,v=v+Math.imul(O,Kr)|0,v=v+Math.imul(H,Ir)|0,R=R+Math.imul(H,Kr)|0;var dg=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(dg>>>26)|0,dg&=67108863,N=Math.imul(ve,Tt),v=Math.imul(ve,Ct),v=v+Math.imul(V,Tt)|0,R=Math.imul(V,Ct),N=N+Math.imul(bt,Et)|0,v=v+Math.imul(bt,on)|0,v=v+Math.imul(jt,Et)|0,R=R+Math.imul(jt,on)|0,N=N+Math.imul(Ee,Qr)|0,v=v+Math.imul(Ee,Wr)|0,v=v+Math.imul(fe,Qr)|0,R=R+Math.imul(fe,Wr)|0,N=N+Math.imul(Ne,an)|0,v=v+Math.imul(Ne,Vr)|0,v=v+Math.imul(Be,an)|0,R=R+Math.imul(Be,Vr)|0,N=N+Math.imul(se,Gr)|0,v=v+Math.imul(se,cn)|0,v=v+Math.imul(be,Gr)|0,R=R+Math.imul(be,cn)|0,N=N+Math.imul(re,Sr)|0,v=v+Math.imul(re,un)|0,v=v+Math.imul(de,Sr)|0,R=R+Math.imul(de,un)|0,N=N+Math.imul(G,Ir)|0,v=v+Math.imul(G,Kr)|0,v=v+Math.imul(K,Ir)|0,R=R+Math.imul(K,Kr)|0,N=N+Math.imul(O,ln)|0,v=v+Math.imul(O,Zr)|0,v=v+Math.imul(H,ln)|0,R=R+Math.imul(H,Zr)|0;var ub=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(ub>>>26)|0,ub&=67108863,N=Math.imul(z,Tt),v=Math.imul(z,Ct),v=v+Math.imul(X,Tt)|0,R=Math.imul(X,Ct),N=N+Math.imul(ve,Et)|0,v=v+Math.imul(ve,on)|0,v=v+Math.imul(V,Et)|0,R=R+Math.imul(V,on)|0,N=N+Math.imul(bt,Qr)|0,v=v+Math.imul(bt,Wr)|0,v=v+Math.imul(jt,Qr)|0,R=R+Math.imul(jt,Wr)|0,N=N+Math.imul(Ee,an)|0,v=v+Math.imul(Ee,Vr)|0,v=v+Math.imul(fe,an)|0,R=R+Math.imul(fe,Vr)|0,N=N+Math.imul(Ne,Gr)|0,v=v+Math.imul(Ne,cn)|0,v=v+Math.imul(Be,Gr)|0,R=R+Math.imul(Be,cn)|0,N=N+Math.imul(se,Sr)|0,v=v+Math.imul(se,un)|0,v=v+Math.imul(be,Sr)|0,R=R+Math.imul(be,un)|0,N=N+Math.imul(re,Ir)|0,v=v+Math.imul(re,Kr)|0,v=v+Math.imul(de,Ir)|0,R=R+Math.imul(de,Kr)|0,N=N+Math.imul(G,ln)|0,v=v+Math.imul(G,Zr)|0,v=v+Math.imul(K,ln)|0,R=R+Math.imul(K,Zr)|0,N=N+Math.imul(O,en)|0,v=v+Math.imul(O,dn)|0,v=v+Math.imul(H,en)|0,R=R+Math.imul(H,dn)|0;var fg=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(fg>>>26)|0,fg&=67108863,N=Math.imul(ce,Tt),v=Math.imul(ce,Ct),v=v+Math.imul(me,Tt)|0,R=Math.imul(me,Ct),N=N+Math.imul(z,Et)|0,v=v+Math.imul(z,on)|0,v=v+Math.imul(X,Et)|0,R=R+Math.imul(X,on)|0,N=N+Math.imul(ve,Qr)|0,v=v+Math.imul(ve,Wr)|0,v=v+Math.imul(V,Qr)|0,R=R+Math.imul(V,Wr)|0,N=N+Math.imul(bt,an)|0,v=v+Math.imul(bt,Vr)|0,v=v+Math.imul(jt,an)|0,R=R+Math.imul(jt,Vr)|0,N=N+Math.imul(Ee,Gr)|0,v=v+Math.imul(Ee,cn)|0,v=v+Math.imul(fe,Gr)|0,R=R+Math.imul(fe,cn)|0,N=N+Math.imul(Ne,Sr)|0,v=v+Math.imul(Ne,un)|0,v=v+Math.imul(Be,Sr)|0,R=R+Math.imul(Be,un)|0,N=N+Math.imul(se,Ir)|0,v=v+Math.imul(se,Kr)|0,v=v+Math.imul(be,Ir)|0,R=R+Math.imul(be,Kr)|0,N=N+Math.imul(re,ln)|0,v=v+Math.imul(re,Zr)|0,v=v+Math.imul(de,ln)|0,R=R+Math.imul(de,Zr)|0,N=N+Math.imul(G,en)|0,v=v+Math.imul(G,dn)|0,v=v+Math.imul(K,en)|0,R=R+Math.imul(K,dn)|0,N=N+Math.imul(O,tn)|0,v=v+Math.imul(O,Br)|0,v=v+Math.imul(H,tn)|0,R=R+Math.imul(H,Br)|0;var hg=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(hg>>>26)|0,hg&=67108863,N=Math.imul(ce,Et),v=Math.imul(ce,on),v=v+Math.imul(me,Et)|0,R=Math.imul(me,on),N=N+Math.imul(z,Qr)|0,v=v+Math.imul(z,Wr)|0,v=v+Math.imul(X,Qr)|0,R=R+Math.imul(X,Wr)|0,N=N+Math.imul(ve,an)|0,v=v+Math.imul(ve,Vr)|0,v=v+Math.imul(V,an)|0,R=R+Math.imul(V,Vr)|0,N=N+Math.imul(bt,Gr)|0,v=v+Math.imul(bt,cn)|0,v=v+Math.imul(jt,Gr)|0,R=R+Math.imul(jt,cn)|0,N=N+Math.imul(Ee,Sr)|0,v=v+Math.imul(Ee,un)|0,v=v+Math.imul(fe,Sr)|0,R=R+Math.imul(fe,un)|0,N=N+Math.imul(Ne,Ir)|0,v=v+Math.imul(Ne,Kr)|0,v=v+Math.imul(Be,Ir)|0,R=R+Math.imul(Be,Kr)|0,N=N+Math.imul(se,ln)|0,v=v+Math.imul(se,Zr)|0,v=v+Math.imul(be,ln)|0,R=R+Math.imul(be,Zr)|0,N=N+Math.imul(re,en)|0,v=v+Math.imul(re,dn)|0,v=v+Math.imul(de,en)|0,R=R+Math.imul(de,dn)|0,N=N+Math.imul(G,tn)|0,v=v+Math.imul(G,Br)|0,v=v+Math.imul(K,tn)|0,R=R+Math.imul(K,Br)|0;var lb=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(lb>>>26)|0,lb&=67108863,N=Math.imul(ce,Qr),v=Math.imul(ce,Wr),v=v+Math.imul(me,Qr)|0,R=Math.imul(me,Wr),N=N+Math.imul(z,an)|0,v=v+Math.imul(z,Vr)|0,v=v+Math.imul(X,an)|0,R=R+Math.imul(X,Vr)|0,N=N+Math.imul(ve,Gr)|0,v=v+Math.imul(ve,cn)|0,v=v+Math.imul(V,Gr)|0,R=R+Math.imul(V,cn)|0,N=N+Math.imul(bt,Sr)|0,v=v+Math.imul(bt,un)|0,v=v+Math.imul(jt,Sr)|0,R=R+Math.imul(jt,un)|0,N=N+Math.imul(Ee,Ir)|0,v=v+Math.imul(Ee,Kr)|0,v=v+Math.imul(fe,Ir)|0,R=R+Math.imul(fe,Kr)|0,N=N+Math.imul(Ne,ln)|0,v=v+Math.imul(Ne,Zr)|0,v=v+Math.imul(Be,ln)|0,R=R+Math.imul(Be,Zr)|0,N=N+Math.imul(se,en)|0,v=v+Math.imul(se,dn)|0,v=v+Math.imul(be,en)|0,R=R+Math.imul(be,dn)|0,N=N+Math.imul(re,tn)|0,v=v+Math.imul(re,Br)|0,v=v+Math.imul(de,tn)|0,R=R+Math.imul(de,Br)|0;var db=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(db>>>26)|0,db&=67108863,N=Math.imul(ce,an),v=Math.imul(ce,Vr),v=v+Math.imul(me,an)|0,R=Math.imul(me,Vr),N=N+Math.imul(z,Gr)|0,v=v+Math.imul(z,cn)|0,v=v+Math.imul(X,Gr)|0,R=R+Math.imul(X,cn)|0,N=N+Math.imul(ve,Sr)|0,v=v+Math.imul(ve,un)|0,v=v+Math.imul(V,Sr)|0,R=R+Math.imul(V,un)|0,N=N+Math.imul(bt,Ir)|0,v=v+Math.imul(bt,Kr)|0,v=v+Math.imul(jt,Ir)|0,R=R+Math.imul(jt,Kr)|0,N=N+Math.imul(Ee,ln)|0,v=v+Math.imul(Ee,Zr)|0,v=v+Math.imul(fe,ln)|0,R=R+Math.imul(fe,Zr)|0,N=N+Math.imul(Ne,en)|0,v=v+Math.imul(Ne,dn)|0,v=v+Math.imul(Be,en)|0,R=R+Math.imul(Be,dn)|0,N=N+Math.imul(se,tn)|0,v=v+Math.imul(se,Br)|0,v=v+Math.imul(be,tn)|0,R=R+Math.imul(be,Br)|0;var pg=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(pg>>>26)|0,pg&=67108863,N=Math.imul(ce,Gr),v=Math.imul(ce,cn),v=v+Math.imul(me,Gr)|0,R=Math.imul(me,cn),N=N+Math.imul(z,Sr)|0,v=v+Math.imul(z,un)|0,v=v+Math.imul(X,Sr)|0,R=R+Math.imul(X,un)|0,N=N+Math.imul(ve,Ir)|0,v=v+Math.imul(ve,Kr)|0,v=v+Math.imul(V,Ir)|0,R=R+Math.imul(V,Kr)|0,N=N+Math.imul(bt,ln)|0,v=v+Math.imul(bt,Zr)|0,v=v+Math.imul(jt,ln)|0,R=R+Math.imul(jt,Zr)|0,N=N+Math.imul(Ee,en)|0,v=v+Math.imul(Ee,dn)|0,v=v+Math.imul(fe,en)|0,R=R+Math.imul(fe,dn)|0,N=N+Math.imul(Ne,tn)|0,v=v+Math.imul(Ne,Br)|0,v=v+Math.imul(Be,tn)|0,R=R+Math.imul(Be,Br)|0;var fb=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(fb>>>26)|0,fb&=67108863,N=Math.imul(ce,Sr),v=Math.imul(ce,un),v=v+Math.imul(me,Sr)|0,R=Math.imul(me,un),N=N+Math.imul(z,Ir)|0,v=v+Math.imul(z,Kr)|0,v=v+Math.imul(X,Ir)|0,R=R+Math.imul(X,Kr)|0,N=N+Math.imul(ve,ln)|0,v=v+Math.imul(ve,Zr)|0,v=v+Math.imul(V,ln)|0,R=R+Math.imul(V,Zr)|0,N=N+Math.imul(bt,en)|0,v=v+Math.imul(bt,dn)|0,v=v+Math.imul(jt,en)|0,R=R+Math.imul(jt,dn)|0,N=N+Math.imul(Ee,tn)|0,v=v+Math.imul(Ee,Br)|0,v=v+Math.imul(fe,tn)|0,R=R+Math.imul(fe,Br)|0;var hb=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(hb>>>26)|0,hb&=67108863,N=Math.imul(ce,Ir),v=Math.imul(ce,Kr),v=v+Math.imul(me,Ir)|0,R=Math.imul(me,Kr),N=N+Math.imul(z,ln)|0,v=v+Math.imul(z,Zr)|0,v=v+Math.imul(X,ln)|0,R=R+Math.imul(X,Zr)|0,N=N+Math.imul(ve,en)|0,v=v+Math.imul(ve,dn)|0,v=v+Math.imul(V,en)|0,R=R+Math.imul(V,dn)|0,N=N+Math.imul(bt,tn)|0,v=v+Math.imul(bt,Br)|0,v=v+Math.imul(jt,tn)|0,R=R+Math.imul(jt,Br)|0;var pb=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(pb>>>26)|0,pb&=67108863,N=Math.imul(ce,ln),v=Math.imul(ce,Zr),v=v+Math.imul(me,ln)|0,R=Math.imul(me,Zr),N=N+Math.imul(z,en)|0,v=v+Math.imul(z,dn)|0,v=v+Math.imul(X,en)|0,R=R+Math.imul(X,dn)|0,N=N+Math.imul(ve,tn)|0,v=v+Math.imul(ve,Br)|0,v=v+Math.imul(V,tn)|0,R=R+Math.imul(V,Br)|0;var gb=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(gb>>>26)|0,gb&=67108863,N=Math.imul(ce,en),v=Math.imul(ce,dn),v=v+Math.imul(me,en)|0,R=Math.imul(me,dn),N=N+Math.imul(z,tn)|0,v=v+Math.imul(z,Br)|0,v=v+Math.imul(X,tn)|0,R=R+Math.imul(X,Br)|0;var mb=(j+N|0)+((v&8191)<<13)|0;j=(R+(v>>>13)|0)+(mb>>>26)|0,mb&=67108863,N=Math.imul(ce,tn),v=Math.imul(ce,Br),v=v+Math.imul(me,tn)|0,R=Math.imul(me,Br);var rp=(j+N|0)+((v&8191)<<13)|0;return j=(R+(v>>>13)|0)+(rp>>>26)|0,rp&=67108863,k[0]=hc,k[1]=pc,k[2]=gc,k[3]=mc,k[4]=yc,k[5]=ff,k[6]=dg,k[7]=ub,k[8]=fg,k[9]=hg,k[10]=lb,k[11]=db,k[12]=pg,k[13]=fb,k[14]=hb,k[15]=pb,k[16]=gb,k[17]=mb,k[18]=rp,j!==0&&(k[19]=j,w.length++),w};Math.imul||(S=E);function C(A,m,b){b.negative=m.negative^A.negative,b.length=A.length+m.length;for(var w=0,x=0,M=0;M<b.length-1;M++){var k=x;x=0;for(var j=w&67108863,N=Math.min(M,m.length-1),v=Math.max(0,M-A.length+1);v<=N;v++){var R=M-v,$=A.words[R]|0,O=m.words[v]|0,H=$*O,W=H&67108863;k=k+(H/67108864|0)|0,W=W+j|0,j=W&67108863,k=k+(W>>>26)|0,x+=k>>>26,k&=67108863}b.words[M]=j,w=k,k=x}return w!==0?b.words[M]=w:b.length--,b._strip()}function _(A,m,b){return C(A,m,b)}i.prototype.mulTo=function(m,b){var w,x=this.length+m.length;return this.length===10&&m.length===10?w=S(this,m,b):x<63?w=E(this,m,b):x<1024?w=C(this,m,b):w=_(this,m,b),w},i.prototype.mul=function(m){var b=new i(null);return b.words=new Array(this.length+m.length),this.mulTo(m,b)},i.prototype.mulf=function(m){var b=new i(null);return b.words=new Array(this.length+m.length),_(this,m,b)},i.prototype.imul=function(m){return this.clone().mulTo(m,this)},i.prototype.imuln=function(m){var b=m<0;b&&(m=-m),n(typeof m=="number"),n(m<67108864);for(var w=0,x=0;x<this.length;x++){var M=(this.words[x]|0)*m,k=(M&67108863)+(w&67108863);w>>=26,w+=M/67108864|0,w+=k>>>26,this.words[x]=k&67108863}return w!==0&&(this.words[x]=w,this.length++),this.length=m===0?1:this.length,b?this.ineg():this},i.prototype.muln=function(m){return this.clone().imuln(m)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(m){var b=y(m);if(b.length===0)return new i(1);for(var w=this,x=0;x<b.length&&b[x]===0;x++,w=w.sqr());if(++x<b.length)for(var M=w.sqr();x<b.length;x++,M=M.sqr())b[x]!==0&&(w=w.mul(M));return w},i.prototype.iushln=function(m){n(typeof m=="number"&&m>=0);var b=m%26,w=(m-b)/26,x=67108863>>>26-b<<26-b,M;if(b!==0){var k=0;for(M=0;M<this.length;M++){var j=this.words[M]&x,N=(this.words[M]|0)-j<<b;this.words[M]=N|k,k=j>>>26-b}k&&(this.words[M]=k,this.length++)}if(w!==0){for(M=this.length-1;M>=0;M--)this.words[M+w]=this.words[M];for(M=0;M<w;M++)this.words[M]=0;this.length+=w}return this._strip()},i.prototype.ishln=function(m){return n(this.negative===0),this.iushln(m)},i.prototype.iushrn=function(m,b,w){n(typeof m=="number"&&m>=0);var x;b?x=(b-b%26)/26:x=0;var M=m%26,k=Math.min((m-M)/26,this.length),j=67108863^67108863>>>M<<M,N=w;if(x-=k,x=Math.max(0,x),N){for(var v=0;v<k;v++)N.words[v]=this.words[v];N.length=k}if(k!==0)if(this.length>k)for(this.length-=k,v=0;v<this.length;v++)this.words[v]=this.words[v+k];else this.words[0]=0,this.length=1;var R=0;for(v=this.length-1;v>=0&&(R!==0||v>=x);v--){var $=this.words[v]|0;this.words[v]=R<<26-M|$>>>M,R=$&j}return N&&R!==0&&(N.words[N.length++]=R),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(m,b,w){return n(this.negative===0),this.iushrn(m,b,w)},i.prototype.shln=function(m){return this.clone().ishln(m)},i.prototype.ushln=function(m){return this.clone().iushln(m)},i.prototype.shrn=function(m){return this.clone().ishrn(m)},i.prototype.ushrn=function(m){return this.clone().iushrn(m)},i.prototype.testn=function(m){n(typeof m=="number"&&m>=0);var b=m%26,w=(m-b)/26,x=1<<b;if(this.length<=w)return!1;var M=this.words[w];return!!(M&x)},i.prototype.imaskn=function(m){n(typeof m=="number"&&m>=0);var b=m%26,w=(m-b)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(b!==0&&w++,this.length=Math.min(w,this.length),b!==0){var x=67108863^67108863>>>b<<b;this.words[this.length-1]&=x}return this._strip()},i.prototype.maskn=function(m){return this.clone().imaskn(m)},i.prototype.iaddn=function(m){return n(typeof m=="number"),n(m<67108864),m<0?this.isubn(-m):this.negative!==0?this.length===1&&(this.words[0]|0)<=m?(this.words[0]=m-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(m),this.negative=1,this):this._iaddn(m)},i.prototype._iaddn=function(m){this.words[0]+=m;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},i.prototype.isubn=function(m){if(n(typeof m=="number"),n(m<67108864),m<0)return this.iaddn(-m);if(this.negative!==0)return this.negative=0,this.iaddn(m),this.negative=1,this;if(this.words[0]-=m,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this._strip()},i.prototype.addn=function(m){return this.clone().iaddn(m)},i.prototype.subn=function(m){return this.clone().isubn(m)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(m,b,w){var x=m.length+w,M;this._expand(x);var k,j=0;for(M=0;M<m.length;M++){k=(this.words[M+w]|0)+j;var N=(m.words[M]|0)*b;k-=N&67108863,j=(k>>26)-(N/67108864|0),this.words[M+w]=k&67108863}for(;M<this.length-w;M++)k=(this.words[M+w]|0)+j,j=k>>26,this.words[M+w]=k&67108863;if(j===0)return this._strip();for(n(j===-1),j=0,M=0;M<this.length;M++)k=-(this.words[M]|0)+j,j=k>>26,this.words[M]=k&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(m,b){var w=this.length-m.length,x=this.clone(),M=m,k=M.words[M.length-1]|0,j=this._countBits(k);w=26-j,w!==0&&(M=M.ushln(w),x.iushln(w),k=M.words[M.length-1]|0);var N=x.length-M.length,v;if(b!=="mod"){v=new i(null),v.length=N+1,v.words=new Array(v.length);for(var R=0;R<v.length;R++)v.words[R]=0}var $=x.clone()._ishlnsubmul(M,1,N);$.negative===0&&(x=$,v&&(v.words[N]=1));for(var O=N-1;O>=0;O--){var H=(x.words[M.length+O]|0)*67108864+(x.words[M.length+O-1]|0);for(H=Math.min(H/k|0,67108863),x._ishlnsubmul(M,H,O);x.negative!==0;)H--,x.negative=0,x._ishlnsubmul(M,1,O),x.isZero()||(x.negative^=1);v&&(v.words[O]=H)}return v&&v._strip(),x._strip(),b!=="div"&&w!==0&&x.iushrn(w),{div:v||null,mod:x}},i.prototype.divmod=function(m,b,w){if(n(!m.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var x,M,k;return this.negative!==0&&m.negative===0?(k=this.neg().divmod(m,b),b!=="mod"&&(x=k.div.neg()),b!=="div"&&(M=k.mod.neg(),w&&M.negative!==0&&M.iadd(m)),{div:x,mod:M}):this.negative===0&&m.negative!==0?(k=this.divmod(m.neg(),b),b!=="mod"&&(x=k.div.neg()),{div:x,mod:k.mod}):(this.negative&m.negative)!==0?(k=this.neg().divmod(m.neg(),b),b!=="div"&&(M=k.mod.neg(),w&&M.negative!==0&&M.isub(m)),{div:k.div,mod:M}):m.length>this.length||this.cmp(m)<0?{div:new i(0),mod:this}:m.length===1?b==="div"?{div:this.divn(m.words[0]),mod:null}:b==="mod"?{div:null,mod:new i(this.modrn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new i(this.modrn(m.words[0]))}:this._wordDiv(m,b)},i.prototype.div=function(m){return this.divmod(m,"div",!1).div},i.prototype.mod=function(m){return this.divmod(m,"mod",!1).mod},i.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod},i.prototype.divRound=function(m){var b=this.divmod(m);if(b.mod.isZero())return b.div;var w=b.div.negative!==0?b.mod.isub(m):b.mod,x=m.ushrn(1),M=m.andln(1),k=w.cmp(x);return k<0||M===1&&k===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},i.prototype.modrn=function(m){var b=m<0;b&&(m=-m),n(m<=67108863);for(var w=(1<<26)%m,x=0,M=this.length-1;M>=0;M--)x=(w*x+(this.words[M]|0))%m;return b?-x:x},i.prototype.modn=function(m){return this.modrn(m)},i.prototype.idivn=function(m){var b=m<0;b&&(m=-m),n(m<=67108863);for(var w=0,x=this.length-1;x>=0;x--){var M=(this.words[x]|0)+w*67108864;this.words[x]=M/m|0,w=M%m}return this._strip(),b?this.ineg():this},i.prototype.divn=function(m){return this.clone().idivn(m)},i.prototype.egcd=function(m){n(m.negative===0),n(!m.isZero());var b=this,w=m.clone();b.negative!==0?b=b.umod(m):b=b.clone();for(var x=new i(1),M=new i(0),k=new i(0),j=new i(1),N=0;b.isEven()&&w.isEven();)b.iushrn(1),w.iushrn(1),++N;for(var v=w.clone(),R=b.clone();!b.isZero();){for(var $=0,O=1;(b.words[0]&O)===0&&$<26;++$,O<<=1);if($>0)for(b.iushrn($);$-- >0;)(x.isOdd()||M.isOdd())&&(x.iadd(v),M.isub(R)),x.iushrn(1),M.iushrn(1);for(var H=0,W=1;(w.words[0]&W)===0&&H<26;++H,W<<=1);if(H>0)for(w.iushrn(H);H-- >0;)(k.isOdd()||j.isOdd())&&(k.iadd(v),j.isub(R)),k.iushrn(1),j.iushrn(1);b.cmp(w)>=0?(b.isub(w),x.isub(k),M.isub(j)):(w.isub(b),k.isub(x),j.isub(M))}return{a:k,b:j,gcd:w.iushln(N)}},i.prototype._invmp=function(m){n(m.negative===0),n(!m.isZero());var b=this,w=m.clone();b.negative!==0?b=b.umod(m):b=b.clone();for(var x=new i(1),M=new i(0),k=w.clone();b.cmpn(1)>0&&w.cmpn(1)>0;){for(var j=0,N=1;(b.words[0]&N)===0&&j<26;++j,N<<=1);if(j>0)for(b.iushrn(j);j-- >0;)x.isOdd()&&x.iadd(k),x.iushrn(1);for(var v=0,R=1;(w.words[0]&R)===0&&v<26;++v,R<<=1);if(v>0)for(w.iushrn(v);v-- >0;)M.isOdd()&&M.iadd(k),M.iushrn(1);b.cmp(w)>=0?(b.isub(w),x.isub(M)):(w.isub(b),M.isub(x))}var $;return b.cmpn(1)===0?$=x:$=M,$.cmpn(0)<0&&$.iadd(m),$},i.prototype.gcd=function(m){if(this.isZero())return m.abs();if(m.isZero())return this.abs();var b=this.clone(),w=m.clone();b.negative=0,w.negative=0;for(var x=0;b.isEven()&&w.isEven();x++)b.iushrn(1),w.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;w.isEven();)w.iushrn(1);var M=b.cmp(w);if(M<0){var k=b;b=w,w=k}else if(M===0||w.cmpn(1)===0)break;b.isub(w)}while(!0);return w.iushln(x)},i.prototype.invm=function(m){return this.egcd(m).a.umod(m)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(m){return this.words[0]&m},i.prototype.bincn=function(m){n(typeof m=="number");var b=m%26,w=(m-b)/26,x=1<<b;if(this.length<=w)return this._expand(w+1),this.words[w]|=x,this;for(var M=x,k=w;M!==0&&k<this.length;k++){var j=this.words[k]|0;j+=M,M=j>>>26,j&=67108863,this.words[k]=j}return M!==0&&(this.words[k]=M,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(m){var b=m<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this._strip();var w;if(this.length>1)w=1;else{b&&(m=-m),n(m<=67108863,"Number is too big");var x=this.words[0]|0;w=x===m?0:x<m?-1:1}return this.negative!==0?-w|0:w},i.prototype.cmp=function(m){if(this.negative!==0&&m.negative===0)return-1;if(this.negative===0&&m.negative!==0)return 1;var b=this.ucmp(m);return this.negative!==0?-b|0:b},i.prototype.ucmp=function(m){if(this.length>m.length)return 1;if(this.length<m.length)return-1;for(var b=0,w=this.length-1;w>=0;w--){var x=this.words[w]|0,M=m.words[w]|0;if(x!==M){x<M?b=-1:x>M&&(b=1);break}}return b},i.prototype.gtn=function(m){return this.cmpn(m)===1},i.prototype.gt=function(m){return this.cmp(m)===1},i.prototype.gten=function(m){return this.cmpn(m)>=0},i.prototype.gte=function(m){return this.cmp(m)>=0},i.prototype.ltn=function(m){return this.cmpn(m)===-1},i.prototype.lt=function(m){return this.cmp(m)===-1},i.prototype.lten=function(m){return this.cmpn(m)<=0},i.prototype.lte=function(m){return this.cmp(m)<=0},i.prototype.eqn=function(m){return this.cmpn(m)===0},i.prototype.eq=function(m){return this.cmp(m)===0},i.red=function(m){return new L(m)},i.prototype.toRed=function(m){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),m.convertTo(this)._forceRed(m)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(m){return this.red=m,this},i.prototype.forceRed=function(m){return n(!this.red,"Already a number in reduction context"),this._forceRed(m)},i.prototype.redAdd=function(m){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,m)},i.prototype.redIAdd=function(m){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,m)},i.prototype.redSub=function(m){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,m)},i.prototype.redISub=function(m){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,m)},i.prototype.redShl=function(m){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,m)},i.prototype.redMul=function(m){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.mul(this,m)},i.prototype.redIMul=function(m){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.imul(this,m)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(m){return n(this.red&&!m.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,m)};var T={k256:null,p224:null,p192:null,p25519:null};function P(A,m){this.name=A,this.p=new i(m,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}P.prototype._tmp=function(){var m=new i(null);return m.words=new Array(Math.ceil(this.n/13)),m},P.prototype.ireduce=function(m){var b=m,w;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),w=b.bitLength();while(w>this.n);var x=w<this.n?-1:b.ucmp(this.p);return x===0?(b.words[0]=0,b.length=1):x>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},P.prototype.split=function(m,b){m.iushrn(this.n,0,b)},P.prototype.imulK=function(m){return m.imul(this.k)};function D(){P.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(D,P),D.prototype.split=function(m,b){for(var w=4194303,x=Math.min(m.length,9),M=0;M<x;M++)b.words[M]=m.words[M];if(b.length=x,m.length<=9){m.words[0]=0,m.length=1;return}var k=m.words[9];for(b.words[b.length++]=k&w,M=10;M<m.length;M++){var j=m.words[M]|0;m.words[M-10]=(j&w)<<4|k>>>22,k=j}k>>>=22,m.words[M-10]=k,k===0&&m.length>10?m.length-=10:m.length-=9},D.prototype.imulK=function(m){m.words[m.length]=0,m.words[m.length+1]=0,m.length+=2;for(var b=0,w=0;w<m.length;w++){var x=m.words[w]|0;b+=x*977,m.words[w]=b&67108863,b=x*64+(b/67108864|0)}return m.words[m.length-1]===0&&(m.length--,m.words[m.length-1]===0&&m.length--),m};function F(){P.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(F,P);function I(){P.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(I,P);function U(){P.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(U,P),U.prototype.imulK=function(m){for(var b=0,w=0;w<m.length;w++){var x=(m.words[w]|0)*19+b,M=x&67108863;x>>>=26,m.words[w]=M,b=x}return b!==0&&(m.words[m.length++]=b),m},i._prime=function(m){if(T[m])return T[m];var b;if(m==="k256")b=new D;else if(m==="p224")b=new F;else if(m==="p192")b=new I;else if(m==="p25519")b=new U;else throw new Error("Unknown prime "+m);return T[m]=b,b};function L(A){if(typeof A=="string"){var m=i._prime(A);this.m=m.p,this.prime=m}else n(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}L.prototype._verify1=function(m){n(m.negative===0,"red works only with positives"),n(m.red,"red works only with red numbers")},L.prototype._verify2=function(m,b){n((m.negative|b.negative)===0,"red works only with positives"),n(m.red&&m.red===b.red,"red works only with red numbers")},L.prototype.imod=function(m){return this.prime?this.prime.ireduce(m)._forceRed(this):(l(m,m.umod(this.m)._forceRed(this)),m)},L.prototype.neg=function(m){return m.isZero()?m.clone():this.m.sub(m)._forceRed(this)},L.prototype.add=function(m,b){this._verify2(m,b);var w=m.add(b);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},L.prototype.iadd=function(m,b){this._verify2(m,b);var w=m.iadd(b);return w.cmp(this.m)>=0&&w.isub(this.m),w},L.prototype.sub=function(m,b){this._verify2(m,b);var w=m.sub(b);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},L.prototype.isub=function(m,b){this._verify2(m,b);var w=m.isub(b);return w.cmpn(0)<0&&w.iadd(this.m),w},L.prototype.shl=function(m,b){return this._verify1(m),this.imod(m.ushln(b))},L.prototype.imul=function(m,b){return this._verify2(m,b),this.imod(m.imul(b))},L.prototype.mul=function(m,b){return this._verify2(m,b),this.imod(m.mul(b))},L.prototype.isqr=function(m){return this.imul(m,m.clone())},L.prototype.sqr=function(m){return this.mul(m,m)},L.prototype.sqrt=function(m){if(m.isZero())return m.clone();var b=this.m.andln(3);if(n(b%2===1),b===3){var w=this.m.add(new i(1)).iushrn(2);return this.pow(m,w)}for(var x=this.m.subn(1),M=0;!x.isZero()&&x.andln(1)===0;)M++,x.iushrn(1);n(!x.isZero());var k=new i(1).toRed(this),j=k.redNeg(),N=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new i(2*v*v).toRed(this);this.pow(v,N).cmp(j)!==0;)v.redIAdd(j);for(var R=this.pow(v,x),$=this.pow(m,x.addn(1).iushrn(1)),O=this.pow(m,x),H=M;O.cmp(k)!==0;){for(var W=O,G=0;W.cmp(k)!==0;G++)W=W.redSqr();n(G<H);var K=this.pow(R,new i(1).iushln(H-G-1));$=$.redMul(K),R=K.redSqr(),O=O.redMul(R),H=G}return $},L.prototype.invm=function(m){var b=m._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},L.prototype.pow=function(m,b){if(b.isZero())return new i(1).toRed(this);if(b.cmpn(1)===0)return m.clone();var w=4,x=new Array(1<<w);x[0]=new i(1).toRed(this),x[1]=m;for(var M=2;M<x.length;M++)x[M]=this.mul(x[M-1],m);var k=x[0],j=0,N=0,v=b.bitLength()%26;for(v===0&&(v=26),M=b.length-1;M>=0;M--){for(var R=b.words[M],$=v-1;$>=0;$--){var O=R>>$&1;if(k!==x[0]&&(k=this.sqr(k)),O===0&&j===0){N=0;continue}j<<=1,j|=O,N++,!(N!==w&&(M!==0||$!==0))&&(k=this.mul(k,x[j]),N=0,j=0)}v=26}return k},L.prototype.convertTo=function(m){var b=m.umod(this.m);return b===m?b.clone():b},L.prototype.convertFrom=function(m){var b=m.clone();return b.red=null,b},i.mont=function(m){return new B(m)};function B(A){L.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(B,L),B.prototype.convertTo=function(m){return this.imod(m.ushln(this.shift))},B.prototype.convertFrom=function(m){var b=this.imod(m.mul(this.rinv));return b.red=null,b},B.prototype.imul=function(m,b){if(m.isZero()||b.isZero())return m.words[0]=0,m.length=1,m;var w=m.imul(b),x=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=w.isub(x).iushrn(this.shift),k=M;return M.cmp(this.m)>=0?k=M.isub(this.m):M.cmpn(0)<0&&(k=M.iadd(this.m)),k._forceRed(this)},B.prototype.mul=function(m,b){if(m.isZero()||b.isZero())return new i(0)._forceRed(this);var w=m.mul(b),x=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=w.isub(x).iushrn(this.shift),k=M;return M.cmp(this.m)>=0?k=M.isub(this.m):M.cmpn(0)<0&&(k=M.iadd(this.m)),k._forceRed(this)},B.prototype.invm=function(m){var b=this.imod(m._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(t,W3e)})(bI)),bI.exports}var V3e=jte();const Ft=Ea(V3e);var g2={exports:{}};var aj;function Lte(){return aj||(aj=1,(function(t,e){var r=v4(),n=r.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=i);function i(o,a,c){return n(o,a,c)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=n(o);return a!==void 0?typeof c=="string"?u.fill(a,c):u.fill(a):u.fill(0),u},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(g2,g2.exports)),g2.exports}var UN,cj;function G3e(){if(cj)return UN;cj=1;var t=Lte().Buffer;function e(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(n[a]!==255)throw new TypeError(o+" is ambiguous");n[a]=i}var c=r.length,u=r.charAt(0),l=Math.log(c)/Math.log(256),d=Math.log(256)/Math.log(c);function f(h){if((Array.isArray(h)||h instanceof Uint8Array)&&(h=t.from(h)),!t.isBuffer(h))throw new TypeError("Expected Buffer");if(h.length===0)return"";for(var y=0,E=0,S=0,C=h.length;S!==C&&h[S]===0;)S++,y++;for(var _=(C-S)*d+1>>>0,T=new Uint8Array(_);S!==C;){for(var P=h[S],D=0,F=_-1;(P!==0||D<E)&&F!==-1;F--,D++)P+=256*T[F]>>>0,T[F]=P%c>>>0,P=P/c>>>0;if(P!==0)throw new Error("Non-zero carry");E=D,S++}for(var I=_-E;I!==_&&T[I]===0;)I++;for(var U=u.repeat(y);I<_;++I)U+=r.charAt(T[I]);return U}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return t.alloc(0);for(var y=0,E=0,S=0;h[y]===u;)E++,y++;for(var C=(h.length-y)*l+1>>>0,_=new Uint8Array(C);y<h.length;){var T=h.charCodeAt(y);if(T>255)return;var P=n[T];if(P===255)return;for(var D=0,F=C-1;(P!==0||D<S)&&F!==-1;F--,D++)P+=c*_[F]>>>0,_[F]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");S=D,y++}for(var I=C-S;I!==C&&_[I]===0;)I++;var U=t.allocUnsafe(E+(C-I));U.fill(0,0,E);for(var L=E;I!==C;)U[L++]=_[I++];return U}function g(h){var y=p(h);if(y)return y;throw new Error("Non-base"+c+" character")}return{encode:f,decodeUnsafe:p,decode:g}}return UN=e,UN}var MN,uj;function K3e(){if(uj)return MN;uj=1;var t=G3e(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return MN=t(e),MN}var Z3e=K3e();const Ri=Ea(Z3e);function Y3e(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Fte(t,...e){if(!Y3e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function lj(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function J3e(t,e){Fte(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const DN=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Qu=(t,e)=>t<<32-e|t>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function X3e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function $te(t){return typeof t=="string"&&(t=X3e(t)),Fte(t),t}let Q3e=class{clone(){return this._cloneInto()}};function eNe(t){const e=n=>t().update($te(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function tNe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}const rNe=(t,e,r)=>t&e^~t&r,nNe=(t,e,r)=>t&e^t&r^e&r;class sNe extends Q3e{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=DN(this.buffer)}update(e){lj(this);const{view:r,buffer:n,blockLen:s}=this;e=$te(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=DN(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){lj(this),J3e(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;tNe(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=DN(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}}const iNe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Nf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Pf=new Uint32Array(64);class oNe extends sNe{constructor(){super(64,32,8,!1),this.A=Nf[0]|0,this.B=Nf[1]|0,this.C=Nf[2]|0,this.D=Nf[3]|0,this.E=Nf[4]|0,this.F=Nf[5]|0,this.G=Nf[6]|0,this.H=Nf[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)Pf[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const f=Pf[d-15],p=Pf[d-2],g=Qu(f,7)^Qu(f,18)^f>>>3,h=Qu(p,17)^Qu(p,19)^p>>>10;Pf[d]=h+Pf[d-7]+g+Pf[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Qu(a,6)^Qu(a,11)^Qu(a,25),p=l+f+rNe(a,c,u)+iNe[d]+Pf[d]|0,h=(Qu(n,2)^Qu(n,13)^Qu(n,22))+nNe(n,s,i)|0;l=u,u=c,c=a,a=o+p|0,o=i,i=s,s=n,n=p+h|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){Pf.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const dj=eNe(()=>new oNe);var fn={},jN,fj;function aNe(){if(fj)return jN;fj=1;var t=Lte().Buffer;function e(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(n[a]!==255)throw new TypeError(o+" is ambiguous");n[a]=i}var c=r.length,u=r.charAt(0),l=Math.log(c)/Math.log(256),d=Math.log(256)/Math.log(c);function f(h){if((Array.isArray(h)||h instanceof Uint8Array)&&(h=t.from(h)),!t.isBuffer(h))throw new TypeError("Expected Buffer");if(h.length===0)return"";for(var y=0,E=0,S=0,C=h.length;S!==C&&h[S]===0;)S++,y++;for(var _=(C-S)*d+1>>>0,T=new Uint8Array(_);S!==C;){for(var P=h[S],D=0,F=_-1;(P!==0||D<E)&&F!==-1;F--,D++)P+=256*T[F]>>>0,T[F]=P%c>>>0,P=P/c>>>0;if(P!==0)throw new Error("Non-zero carry");E=D,S++}for(var I=_-E;I!==_&&T[I]===0;)I++;for(var U=u.repeat(y);I<_;++I)U+=r.charAt(T[I]);return U}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return t.alloc(0);for(var y=0,E=0,S=0;h[y]===u;)E++,y++;for(var C=(h.length-y)*l+1>>>0,_=new Uint8Array(C);y<h.length;){var T=h.charCodeAt(y);if(T>255)return;var P=n[T];if(P===255)return;for(var D=0,F=C-1;(P!==0||D<S)&&F!==-1;F--,D++)P+=c*_[F]>>>0,_[F]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");S=D,y++}for(var I=C-S;I!==C&&_[I]===0;)I++;var U=t.allocUnsafe(E+(C-I));U.fill(0,0,E);for(var L=E;I!==C;)U[L++]=_[I++];return U}function g(h){var y=p(h);if(y)return y;throw new Error("Non-base"+c+" character")}return{encode:f,decodeUnsafe:p,decode:g}}return jN=e,jN}var LN,hj;function cNe(){if(hj)return LN;hj=1;var t=aNe(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return LN=t(e),LN}function jd(t,e,r){return e<=t&&t<=r}function G5(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function uNe(t){for(var e=String(t),r=e.length,n=0,s=[];n<r;){var i=e.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===r-1)s.push(65533);else{var o=t.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=i&1023,c=o&1023;s.push(65536+(a<<10)+c),n+=1}else s.push(65533)}n+=1}return s}function lNe(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var P6=-1;function xk(t){this.tokens=[].slice.call(t)}xk.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():P6},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var _y=-1;function FN(t,e){if(t)throw TypeError("Decoder error");return e||65533}var R6="utf-8";function O6(t,e){if(!(this instanceof O6))return new O6(t,e);if(t=t!==void 0?String(t).toLowerCase():R6,t!==R6)throw new Error("Encoding not supported. Only utf-8 is supported");e=G5(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}O6.prototype={decode:function(e,r){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),r=G5(r),this._streaming||(this._decoder=new dNe({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var s=new xk(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==_y);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===_y)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),lNe(i)}};function k6(t,e){if(!(this instanceof k6))return new k6(t,e);if(t=t!==void 0?String(t).toLowerCase():R6,t!==R6)throw new Error("Encoding not supported. Only utf-8 is supported");e=G5(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}k6.prototype={encode:function(e,r){e=e?String(e):"",r=G5(r),this._streaming||(this._encoder=new fNe(this._options)),this._streaming=!!r.stream;for(var n=[],s=new xk(uNe(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==_y);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==_y;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function dNe(t){var e=t.fatal,r=0,n=0,s=0,i=128,o=191;this.handler=function(a,c){if(c===P6&&s!==0)return s=0,FN(e);if(c===P6)return _y;if(s===0){if(jd(c,0,127))return c;if(jd(c,194,223))s=1,r=c-192;else if(jd(c,224,239))c===224&&(i=160),c===237&&(o=159),s=2,r=c-224;else if(jd(c,240,244))c===240&&(i=144),c===244&&(o=143),s=3,r=c-240;else return FN(e);return r=r<<6*s,null}if(!jd(c,i,o))return r=s=n=0,i=128,o=191,a.prepend(c),FN(e);if(i=128,o=191,n+=1,r+=c-128<<6*(s-n),n!==s)return null;var u=r;return r=s=n=0,u}}function fNe(t){t.fatal,this.handler=function(e,r){if(r===P6)return _y;if(jd(r,0,127))return r;var n,s;jd(r,128,2047)?(n=1,s=192):jd(r,2048,65535)?(n=2,s=224):jd(r,65536,1114111)&&(n=3,s=240);for(var i=[(r>>6*n)+s];n>0;){var o=r>>6*(n-1);i.push(128|o&63),n-=1}return i}}const hNe=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:O6,TextEncoder:k6},Symbol.toStringTag,{value:"Module"})),pNe=Ln(hNe);var pj;function gNe(){if(pj)return fn;pj=1;var t=fn&&fn.__createBinding||(Object.create?(function(I,U,L,B){B===void 0&&(B=L),Object.defineProperty(I,B,{enumerable:!0,get:function(){return U[L]}})}):(function(I,U,L,B){B===void 0&&(B=L),I[B]=U[L]})),e=fn&&fn.__setModuleDefault||(Object.create?(function(I,U){Object.defineProperty(I,"default",{enumerable:!0,value:U})}):function(I,U){I.default=U}),r=fn&&fn.__decorate||function(I,U,L,B){var A=arguments.length,m=A<3?U:B===null?B=Object.getOwnPropertyDescriptor(U,L):B,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(I,U,L,B);else for(var w=I.length-1;w>=0;w--)(b=I[w])&&(m=(A<3?b(m):A>3?b(U,L,m):b(U,L))||m);return A>3&&m&&Object.defineProperty(U,L,m),m},n=fn&&fn.__importStar||function(I){if(I&&I.__esModule)return I;var U={};if(I!=null)for(var L in I)L!=="default"&&Object.hasOwnProperty.call(I,L)&&t(U,I,L);return e(U,I),U},s=fn&&fn.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(fn,"__esModule",{value:!0}),fn.deserializeUnchecked=fn.deserialize=fn.serialize=fn.BinaryReader=fn.BinaryWriter=fn.BorshError=fn.baseDecode=fn.baseEncode=void 0;const i=s(jte()),o=s(cNe()),a=n(pNe),c=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,u=new c("utf-8",{fatal:!0});function l(I){return typeof I=="string"&&(I=Buffer.from(I,"utf8")),o.default.encode(Buffer.from(I))}fn.baseEncode=l;function d(I){return Buffer.from(o.default.decode(I))}fn.baseDecode=d;const f=1024;class p extends Error{constructor(U){super(U),this.fieldPath=[],this.originalMessage=U}addToFieldPath(U){this.fieldPath.splice(0,0,U),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}fn.BorshError=p;class g{constructor(){this.buf=Buffer.alloc(f),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(f)]))}writeU8(U){this.maybeResize(),this.buf.writeUInt8(U,this.length),this.length+=1}writeU16(U){this.maybeResize(),this.buf.writeUInt16LE(U,this.length),this.length+=2}writeU32(U){this.maybeResize(),this.buf.writeUInt32LE(U,this.length),this.length+=4}writeU64(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",8)))}writeU128(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",16)))}writeU256(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",32)))}writeU512(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",64)))}writeBuffer(U){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),U,Buffer.alloc(f)]),this.length+=U.length}writeString(U){this.maybeResize();const L=Buffer.from(U,"utf8");this.writeU32(L.length),this.writeBuffer(L)}writeFixedArray(U){this.writeBuffer(Buffer.from(U))}writeArray(U,L){this.maybeResize(),this.writeU32(U.length);for(const B of U)this.maybeResize(),L(B)}toArray(){return this.buf.subarray(0,this.length)}}fn.BinaryWriter=g;function h(I,U,L){const B=L.value;L.value=function(...A){try{return B.apply(this,A)}catch(m){if(m instanceof RangeError){const b=m.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(b)>=0)throw new p("Reached the end of buffer when deserializing")}throw m}}}class y{constructor(U){this.buf=U,this.offset=0}readU8(){const U=this.buf.readUInt8(this.offset);return this.offset+=1,U}readU16(){const U=this.buf.readUInt16LE(this.offset);return this.offset+=2,U}readU32(){const U=this.buf.readUInt32LE(this.offset);return this.offset+=4,U}readU64(){const U=this.readBuffer(8);return new i.default(U,"le")}readU128(){const U=this.readBuffer(16);return new i.default(U,"le")}readU256(){const U=this.readBuffer(32);return new i.default(U,"le")}readU512(){const U=this.readBuffer(64);return new i.default(U,"le")}readBuffer(U){if(this.offset+U>this.buf.length)throw new p(`Expected buffer length ${U} isn't within bounds`);const L=this.buf.slice(this.offset,this.offset+U);return this.offset+=U,L}readString(){const U=this.readU32(),L=this.readBuffer(U);try{return u.decode(L)}catch(B){throw new p(`Error decoding UTF-8 string: ${B}`)}}readFixedArray(U){return new Uint8Array(this.readBuffer(U))}readArray(U){const L=this.readU32(),B=Array();for(let A=0;A<L;++A)B.push(U());return B}}r([h],y.prototype,"readU8",null),r([h],y.prototype,"readU16",null),r([h],y.prototype,"readU32",null),r([h],y.prototype,"readU64",null),r([h],y.prototype,"readU128",null),r([h],y.prototype,"readU256",null),r([h],y.prototype,"readU512",null),r([h],y.prototype,"readString",null),r([h],y.prototype,"readFixedArray",null),r([h],y.prototype,"readArray",null),fn.BinaryReader=y;function E(I){return I.charAt(0).toUpperCase()+I.slice(1)}function S(I,U,L,B,A){try{if(typeof B=="string")A[`write${E(B)}`](L);else if(B instanceof Array)if(typeof B[0]=="number"){if(L.length!==B[0])throw new p(`Expecting byte array of length ${B[0]}, but got ${L.length} bytes`);A.writeFixedArray(L)}else if(B.length===2&&typeof B[1]=="number"){if(L.length!==B[1])throw new p(`Expecting byte array of length ${B[1]}, but got ${L.length} bytes`);for(let m=0;m<B[1];m++)S(I,null,L[m],B[0],A)}else A.writeArray(L,m=>{S(I,U,m,B[0],A)});else if(B.kind!==void 0)switch(B.kind){case"option":{L==null?A.writeU8(0):(A.writeU8(1),S(I,U,L,B.type,A));break}case"map":{A.writeU32(L.size),L.forEach((m,b)=>{S(I,U,b,B.key,A),S(I,U,m,B.value,A)});break}default:throw new p(`FieldType ${B} unrecognized`)}else C(I,L,A)}catch(m){throw m instanceof p&&m.addToFieldPath(U),m}}function C(I,U,L){if(typeof U.borshSerialize=="function"){U.borshSerialize(L);return}const B=I.get(U.constructor);if(!B)throw new p(`Class ${U.constructor.name} is missing in schema`);if(B.kind==="struct")B.fields.map(([A,m])=>{S(I,A,U[A],m,L)});else if(B.kind==="enum"){const A=U[B.field];for(let m=0;m<B.values.length;++m){const[b,w]=B.values[m];if(b===A){L.writeU8(m),S(I,b,U[b],w,L);break}}}else throw new p(`Unexpected schema kind: ${B.kind} for ${U.constructor.name}`)}function _(I,U,L=g){const B=new L;return C(I,U,B),B.toArray()}fn.serialize=_;function T(I,U,L,B){try{if(typeof L=="string")return B[`read${E(L)}`]();if(L instanceof Array){if(typeof L[0]=="number")return B.readFixedArray(L[0]);if(typeof L[1]=="number"){const A=[];for(let m=0;m<L[1];m++)A.push(T(I,null,L[0],B));return A}else return B.readArray(()=>T(I,U,L[0],B))}if(L.kind==="option")return B.readU8()?T(I,U,L.type,B):void 0;if(L.kind==="map"){let A=new Map;const m=B.readU32();for(let b=0;b<m;b++){const w=T(I,U,L.key,B),x=T(I,U,L.value,B);A.set(w,x)}return A}return P(I,L,B)}catch(A){throw A instanceof p&&A.addToFieldPath(U),A}}function P(I,U,L){if(typeof U.borshDeserialize=="function")return U.borshDeserialize(L);const B=I.get(U);if(!B)throw new p(`Class ${U.name} is missing in schema`);if(B.kind==="struct"){const A={};for(const[m,b]of I.get(U).fields)A[m]=T(I,m,b,L);return new U(A)}if(B.kind==="enum"){const A=L.readU8();if(A>=B.values.length)throw new p(`Enum index: ${A} is out of range`);const[m,b]=B.values[A],w=T(I,m,b,L);return new U({[m]:w})}throw new p(`Unexpected schema kind: ${B.kind} for ${U.constructor.name}`)}function D(I,U,L,B=y){const A=new B(L),m=P(I,U,A);if(A.offset<L.length)throw new p(`Unexpected ${L.length-A.offset} bytes after deserialized data`);return m}fn.deserialize=D;function F(I,U,L,B=y){const A=new B(L);return P(I,U,A)}return fn.deserializeUnchecked=F,fn}var $N=gNe(),ye={},gj;function mNe(){if(gj)return ye;gj=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.s16=ye.s8=ye.nu64be=ye.u48be=ye.u40be=ye.u32be=ye.u24be=ye.u16be=ye.nu64=ye.u48=ye.u40=ye.u32=ye.u24=ye.u16=ye.u8=ye.offset=ye.greedy=ye.Constant=ye.UTF8=ye.CString=ye.Blob=ye.Boolean=ye.BitField=ye.BitStructure=ye.VariantLayout=ye.Union=ye.UnionLayoutDiscriminator=ye.UnionDiscriminator=ye.Structure=ye.Sequence=ye.DoubleBE=ye.Double=ye.FloatBE=ye.Float=ye.NearInt64BE=ye.NearInt64=ye.NearUInt64BE=ye.NearUInt64=ye.IntBE=ye.Int=ye.UIntBE=ye.UInt=ye.OffsetLayout=ye.GreedyCount=ye.ExternalLayout=ye.bindConstructorLayout=ye.nameWithProperty=ye.Layout=ye.uint8ArrayToBuffer=ye.checkUint8Array=void 0,ye.constant=ye.utf8=ye.cstr=ye.blob=ye.unionLayoutDiscriminator=ye.union=ye.seq=ye.bits=ye.struct=ye.f64be=ye.f64=ye.f32be=ye.f32=ye.ns64be=ye.s48be=ye.s40be=ye.s32be=ye.s24be=ye.s16be=ye.ns64=ye.s48=ye.s40=ye.s32=ye.s24=void 0;const t=v4();function e(v){if(!(v instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}ye.checkUint8Array=e;function r(v){return e(v),t.Buffer.from(v.buffer,v.byteOffset,v.length)}ye.uint8ArrayToBuffer=r;let n=class{constructor(R,$){if(!Number.isInteger(R))throw new TypeError("span must be an integer");this.span=R,this.property=$}makeDestinationObject(){return{}}getSpan(R,$){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(R){const $=Object.create(this.constructor.prototype);return Object.assign($,this),$.property=R,$}fromArray(R){}};ye.Layout=n;function s(v,R){return R.property?v+"["+R.property+"]":v}ye.nameWithProperty=s;function i(v,R){if(typeof v!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(v,"layout_"))throw new Error("Class is already bound to a layout");if(!(R&&R instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(R,"boundConstructor_"))throw new Error("layout is already bound to a constructor");v.layout_=R,R.boundConstructor_=v,R.makeDestinationObject=(()=>new v),Object.defineProperty(v.prototype,"encode",{value($,O){return R.encode(this,$,O)},writable:!0}),Object.defineProperty(v,"decode",{value($,O){return R.decode($,O)},writable:!0})}ye.bindConstructorLayout=i;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}ye.ExternalLayout=o;class a extends o{constructor(R=1,$){if(!Number.isInteger(R)||0>=R)throw new TypeError("elementSpan must be a (positive) integer");super(-1,$),this.elementSpan=R}isCount(){return!0}decode(R,$=0){e(R);const O=R.length-$;return Math.floor(O/this.elementSpan)}encode(R,$,O){return 0}}ye.GreedyCount=a;class c extends o{constructor(R,$=0,O){if(!(R instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger($))throw new TypeError("offset must be integer or undefined");super(R.span,O||R.property),this.layout=R,this.offset=$}isCount(){return this.layout instanceof u||this.layout instanceof l}decode(R,$=0){return this.layout.decode(R,$+this.offset)}encode(R,$,O=0){return this.layout.encode(R,$,O+this.offset)}}ye.OffsetLayout=c;class u extends n{constructor(R,$){if(super(R,$),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(R,$=0){return r(R).readUIntLE($,this.span)}encode(R,$,O=0){return r($).writeUIntLE(R,O,this.span),this.span}}ye.UInt=u;class l extends n{constructor(R,$){if(super(R,$),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(R,$=0){return r(R).readUIntBE($,this.span)}encode(R,$,O=0){return r($).writeUIntBE(R,O,this.span),this.span}}ye.UIntBE=l;class d extends n{constructor(R,$){if(super(R,$),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(R,$=0){return r(R).readIntLE($,this.span)}encode(R,$,O=0){return r($).writeIntLE(R,O,this.span),this.span}}ye.Int=d;class f extends n{constructor(R,$){if(super(R,$),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(R,$=0){return r(R).readIntBE($,this.span)}encode(R,$,O=0){return r($).writeIntBE(R,O,this.span),this.span}}ye.IntBE=f;const p=Math.pow(2,32);function g(v){const R=Math.floor(v/p),$=v-R*p;return{hi32:R,lo32:$}}function h(v,R){return v*p+R}class y extends n{constructor(R){super(8,R)}decode(R,$=0){const O=r(R),H=O.readUInt32LE($),W=O.readUInt32LE($+4);return h(W,H)}encode(R,$,O=0){const H=g(R),W=r($);return W.writeUInt32LE(H.lo32,O),W.writeUInt32LE(H.hi32,O+4),8}}ye.NearUInt64=y;class E extends n{constructor(R){super(8,R)}decode(R,$=0){const O=r(R),H=O.readUInt32BE($),W=O.readUInt32BE($+4);return h(H,W)}encode(R,$,O=0){const H=g(R),W=r($);return W.writeUInt32BE(H.hi32,O),W.writeUInt32BE(H.lo32,O+4),8}}ye.NearUInt64BE=E;class S extends n{constructor(R){super(8,R)}decode(R,$=0){const O=r(R),H=O.readUInt32LE($),W=O.readInt32LE($+4);return h(W,H)}encode(R,$,O=0){const H=g(R),W=r($);return W.writeUInt32LE(H.lo32,O),W.writeInt32LE(H.hi32,O+4),8}}ye.NearInt64=S;class C extends n{constructor(R){super(8,R)}decode(R,$=0){const O=r(R),H=O.readInt32BE($),W=O.readUInt32BE($+4);return h(H,W)}encode(R,$,O=0){const H=g(R),W=r($);return W.writeInt32BE(H.hi32,O),W.writeUInt32BE(H.lo32,O+4),8}}ye.NearInt64BE=C;class _ extends n{constructor(R){super(4,R)}decode(R,$=0){return r(R).readFloatLE($)}encode(R,$,O=0){return r($).writeFloatLE(R,O),4}}ye.Float=_;class T extends n{constructor(R){super(4,R)}decode(R,$=0){return r(R).readFloatBE($)}encode(R,$,O=0){return r($).writeFloatBE(R,O),4}}ye.FloatBE=T;class P extends n{constructor(R){super(8,R)}decode(R,$=0){return r(R).readDoubleLE($)}encode(R,$,O=0){return r($).writeDoubleLE(R,O),8}}ye.Double=P;class D extends n{constructor(R){super(8,R)}decode(R,$=0){return r(R).readDoubleBE($)}encode(R,$,O=0){return r($).writeDoubleBE(R,O),8}}ye.DoubleBE=D;class F extends n{constructor(R,$,O){if(!(R instanceof n))throw new TypeError("elementLayout must be a Layout");if(!($ instanceof o&&$.isCount()||Number.isInteger($)&&0<=$))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let H=-1;!($ instanceof o)&&0<R.span&&(H=$*R.span),super(H,O),this.elementLayout=R,this.count=$}getSpan(R,$=0){if(0<=this.span)return this.span;let O=0,H=this.count;if(H instanceof o&&(H=H.decode(R,$)),0<this.elementLayout.span)O=H*this.elementLayout.span;else{let W=0;for(;W<H;)O+=this.elementLayout.getSpan(R,$+O),++W}return O}decode(R,$=0){const O=[];let H=0,W=this.count;for(W instanceof o&&(W=W.decode(R,$));H<W;)O.push(this.elementLayout.decode(R,$)),$+=this.elementLayout.getSpan(R,$),H+=1;return O}encode(R,$,O=0){const H=this.elementLayout,W=R.reduce((G,K)=>G+H.encode(K,$,O+G),0);return this.count instanceof o&&this.count.encode(R.length,$,O),W}}ye.Sequence=F;class I extends n{constructor(R,$,O){if(!(Array.isArray(R)&&R.reduce((W,G)=>W&&G instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof $=="boolean"&&O===void 0&&(O=$,$=void 0);for(const W of R)if(0>W.span&&W.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let H=-1;try{H=R.reduce((W,G)=>W+G.getSpan(),0)}catch{}super(H,$),this.fields=R,this.decodePrefixes=!!O}getSpan(R,$=0){if(0<=this.span)return this.span;let O=0;try{O=this.fields.reduce((H,W)=>{const G=W.getSpan(R,$);return $+=G,H+G},0)}catch{throw new RangeError("indeterminate span")}return O}decode(R,$=0){e(R);const O=this.makeDestinationObject();for(const H of this.fields)if(H.property!==void 0&&(O[H.property]=H.decode(R,$)),$+=H.getSpan(R,$),this.decodePrefixes&&R.length===$)break;return O}encode(R,$,O=0){const H=O;let W=0,G=0;for(const K of this.fields){let Q=K.span;if(G=0<Q?Q:0,K.property!==void 0){const re=R[K.property];re!==void 0&&(G=K.encode(re,$,O),0>Q&&(Q=K.getSpan($,O)))}W=O,O+=Q}return W+G-H}fromArray(R){const $=this.makeDestinationObject();for(const O of this.fields)O.property!==void 0&&0<R.length&&($[O.property]=R.shift());return $}layoutFor(R){if(typeof R!="string")throw new TypeError("property must be string");for(const $ of this.fields)if($.property===R)return $}offsetOf(R){if(typeof R!="string")throw new TypeError("property must be string");let $=0;for(const O of this.fields){if(O.property===R)return $;0>O.span?$=-1:0<=$&&($+=O.span)}}}ye.Structure=I;class U{constructor(R){this.property=R}decode(R,$){throw new Error("UnionDiscriminator is abstract")}encode(R,$,O){throw new Error("UnionDiscriminator is abstract")}}ye.UnionDiscriminator=U;class L extends U{constructor(R,$){if(!(R instanceof o&&R.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super($||R.property||"variant"),this.layout=R}decode(R,$){return this.layout.decode(R,$)}encode(R,$,O){return this.layout.encode(R,$,O)}}ye.UnionLayoutDiscriminator=L;class B extends n{constructor(R,$,O){let H;if(R instanceof u||R instanceof l)H=new L(new c(R));else if(R instanceof o&&R.isCount())H=new L(R);else if(R instanceof U)H=R;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if($===void 0&&($=null),!($===null||$ instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if($!==null){if(0>$.span)throw new Error("defaultLayout must have constant span");$.property===void 0&&($=$.replicate("content"))}let W=-1;$&&(W=$.span,0<=W&&(R instanceof u||R instanceof l)&&(W+=H.layout.span)),super(W,O),this.discriminator=H,this.usesPrefixDiscriminator=R instanceof u||R instanceof l,this.defaultLayout=$,this.registry={};let G=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(K){return G(K)},this.configGetSourceVariant=function(K){G=K.bind(this)}}getSpan(R,$=0){if(0<=this.span)return this.span;const O=this.getVariant(R,$);if(!O)throw new Error("unable to determine span for unrecognized variant");return O.getSpan(R,$)}defaultGetSourceVariant(R){if(Object.prototype.hasOwnProperty.call(R,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(R,this.defaultLayout.property))return;const $=this.registry[R[this.discriminator.property]];if($&&(!$.layout||$.property&&Object.prototype.hasOwnProperty.call(R,$.property)))return $}else for(const $ in this.registry){const O=this.registry[$];if(O.property&&Object.prototype.hasOwnProperty.call(R,O.property))return O}throw new Error("unable to infer src variant")}decode(R,$=0){let O;const H=this.discriminator,W=H.decode(R,$),G=this.registry[W];if(G===void 0){const K=this.defaultLayout;let Q=0;this.usesPrefixDiscriminator&&(Q=H.layout.span),O=this.makeDestinationObject(),O[H.property]=W,O[K.property]=K.decode(R,$+Q)}else O=G.decode(R,$);return O}encode(R,$,O=0){const H=this.getSourceVariant(R);if(H===void 0){const W=this.discriminator,G=this.defaultLayout;let K=0;return this.usesPrefixDiscriminator&&(K=W.layout.span),W.encode(R[W.property],$,O),K+G.encode(R[G.property],$,O+K)}return H.encode(R,$,O)}addVariant(R,$,O){const H=new A(this,R,$,O);return this.registry[R]=H,H}getVariant(R,$=0){let O;return R instanceof Uint8Array?O=this.discriminator.decode(R,$):O=R,this.registry[O]}}ye.Union=B;class A extends n{constructor(R,$,O,H){if(!(R instanceof B))throw new TypeError("union must be a Union");if(!Number.isInteger($)||0>$)throw new TypeError("variant must be a (non-negative) integer");if(typeof O=="string"&&H===void 0&&(H=O,O=null),O){if(!(O instanceof n))throw new TypeError("layout must be a Layout");if(R.defaultLayout!==null&&0<=O.span&&O.span>R.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof H!="string")throw new TypeError("variant must have a String property")}let W=R.span;0>R.span&&(W=O?O.span:0,0<=W&&R.usesPrefixDiscriminator&&(W+=R.discriminator.layout.span)),super(W,H),this.union=R,this.variant=$,this.layout=O||null}getSpan(R,$=0){if(0<=this.span)return this.span;let O=0;this.union.usesPrefixDiscriminator&&(O=this.union.discriminator.layout.span);let H=0;return this.layout&&(H=this.layout.getSpan(R,$+O)),O+H}decode(R,$=0){const O=this.makeDestinationObject();if(this!==this.union.getVariant(R,$))throw new Error("variant mismatch");let H=0;return this.union.usesPrefixDiscriminator&&(H=this.union.discriminator.layout.span),this.layout?O[this.property]=this.layout.decode(R,$+H):this.property?O[this.property]=!0:this.union.usesPrefixDiscriminator&&(O[this.union.discriminator.property]=this.variant),O}encode(R,$,O=0){let H=0;if(this.union.usesPrefixDiscriminator&&(H=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(R,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,$,O);let W=H;if(this.layout&&(this.layout.encode(R[this.property],$,O+H),W+=this.layout.getSpan($,O+H),0<=this.union.span&&W>this.union.span))throw new Error("encoded variant overruns containing union");return W}fromArray(R){if(this.layout)return this.layout.fromArray(R)}}ye.VariantLayout=A;function m(v){return 0>v&&(v+=4294967296),v}class b extends n{constructor(R,$,O){if(!(R instanceof u||R instanceof l))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof $=="string"&&O===void 0&&(O=$,$=!1),4<R.span)throw new RangeError("word cannot exceed 32 bits");super(R.span,O),this.word=R,this.msb=!!$,this.fields=[];let H=0;this._packedSetValue=function(W){return H=m(W),this},this._packedGetValue=function(){return H}}decode(R,$=0){const O=this.makeDestinationObject(),H=this.word.decode(R,$);this._packedSetValue(H);for(const W of this.fields)W.property!==void 0&&(O[W.property]=W.decode(R));return O}encode(R,$,O=0){const H=this.word.decode($,O);this._packedSetValue(H);for(const W of this.fields)if(W.property!==void 0){const G=R[W.property];G!==void 0&&W.encode(G)}return this.word.encode(this._packedGetValue(),$,O)}addField(R,$){const O=new w(this,R,$);return this.fields.push(O),O}addBoolean(R){const $=new x(this,R);return this.fields.push($),$}fieldFor(R){if(typeof R!="string")throw new TypeError("property must be string");for(const $ of this.fields)if($.property===R)return $}}ye.BitStructure=b;class w{constructor(R,$,O){if(!(R instanceof b))throw new TypeError("container must be a BitStructure");if(!Number.isInteger($)||0>=$)throw new TypeError("bits must be positive integer");const H=8*R.span,W=R.fields.reduce((G,K)=>G+K.bits,0);if($+W>H)throw new Error("bits too long for span remainder ("+(H-W)+" of "+H+" remain)");this.container=R,this.bits=$,this.valueMask=(1<<$)-1,$===32&&(this.valueMask=4294967295),this.start=W,this.container.msb&&(this.start=H-W-$),this.wordMask=m(this.valueMask<<this.start),this.property=O}decode(R,$){const O=this.container._packedGetValue();return m(O&this.wordMask)>>>this.start}encode(R){if(typeof R!="number"||!Number.isInteger(R)||R!==m(R&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const $=this.container._packedGetValue(),O=m(R<<this.start);this.container._packedSetValue(m($&~this.wordMask)|O)}}ye.BitField=w;class x extends w{constructor(R,$){super(R,1,$)}decode(R,$){return!!super.decode(R,$)}encode(R){typeof R=="boolean"&&(R=+R),super.encode(R)}}ye.Boolean=x;class M extends n{constructor(R,$){if(!(R instanceof o&&R.isCount()||Number.isInteger(R)&&0<=R))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let O=-1;R instanceof o||(O=R),super(O,$),this.length=R}getSpan(R,$){let O=this.span;return 0>O&&(O=this.length.decode(R,$)),O}decode(R,$=0){let O=this.span;return 0>O&&(O=this.length.decode(R,$)),r(R).slice($,$+O)}encode(R,$,O){let H=this.length;if(this.length instanceof o&&(H=R.length),!(R instanceof Uint8Array&&H===R.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+H+") Uint8Array as src");if(O+H>$.length)throw new RangeError("encoding overruns Uint8Array");const W=r(R);return r($).write(W.toString("hex"),O,H,"hex"),this.length instanceof o&&this.length.encode(H,$,O),H}}ye.Blob=M;class k extends n{constructor(R){super(-1,R)}getSpan(R,$=0){e(R);let O=$;for(;O<R.length&&R[O]!==0;)O+=1;return 1+O-$}decode(R,$=0){const O=this.getSpan(R,$);return r(R).slice($,$+O-1).toString("utf-8")}encode(R,$,O=0){typeof R!="string"&&(R=String(R));const H=t.Buffer.from(R,"utf8"),W=H.length;if(O+W>$.length)throw new RangeError("encoding overruns Buffer");const G=r($);return H.copy(G,O),G[O+W]=0,W+1}}ye.CString=k;class j extends n{constructor(R,$){if(typeof R=="string"&&$===void 0&&($=R,R=void 0),R===void 0)R=-1;else if(!Number.isInteger(R))throw new TypeError("maxSpan must be an integer");super(-1,$),this.maxSpan=R}getSpan(R,$=0){return e(R),R.length-$}decode(R,$=0){const O=this.getSpan(R,$);if(0<=this.maxSpan&&this.maxSpan<O)throw new RangeError("text length exceeds maxSpan");return r(R).slice($,$+O).toString("utf-8")}encode(R,$,O=0){typeof R!="string"&&(R=String(R));const H=t.Buffer.from(R,"utf8"),W=H.length;if(0<=this.maxSpan&&this.maxSpan<W)throw new RangeError("text length exceeds maxSpan");if(O+W>$.length)throw new RangeError("encoding overruns Buffer");return H.copy(r($),O),W}}ye.UTF8=j;class N extends n{constructor(R,$){super(0,$),this.value=R}decode(R,$){return this.value}encode(R,$,O){return 0}}return ye.Constant=N,ye.greedy=((v,R)=>new a(v,R)),ye.offset=((v,R,$)=>new c(v,R,$)),ye.u8=(v=>new u(1,v)),ye.u16=(v=>new u(2,v)),ye.u24=(v=>new u(3,v)),ye.u32=(v=>new u(4,v)),ye.u40=(v=>new u(5,v)),ye.u48=(v=>new u(6,v)),ye.nu64=(v=>new y(v)),ye.u16be=(v=>new l(2,v)),ye.u24be=(v=>new l(3,v)),ye.u32be=(v=>new l(4,v)),ye.u40be=(v=>new l(5,v)),ye.u48be=(v=>new l(6,v)),ye.nu64be=(v=>new E(v)),ye.s8=(v=>new d(1,v)),ye.s16=(v=>new d(2,v)),ye.s24=(v=>new d(3,v)),ye.s32=(v=>new d(4,v)),ye.s40=(v=>new d(5,v)),ye.s48=(v=>new d(6,v)),ye.ns64=(v=>new S(v)),ye.s16be=(v=>new f(2,v)),ye.s24be=(v=>new f(3,v)),ye.s32be=(v=>new f(4,v)),ye.s40be=(v=>new f(5,v)),ye.s48be=(v=>new f(6,v)),ye.ns64be=(v=>new C(v)),ye.f32=(v=>new _(v)),ye.f32be=(v=>new T(v)),ye.f64=(v=>new P(v)),ye.f64be=(v=>new D(v)),ye.struct=((v,R,$)=>new I(v,R,$)),ye.bits=((v,R,$)=>new b(v,R,$)),ye.seq=((v,R,$)=>new F(v,R,$)),ye.union=((v,R,$)=>new B(v,R,$)),ye.unionLayoutDiscriminator=((v,R)=>new L(v,R)),ye.blob=((v,R)=>new M(v,R)),ye.cstr=(v=>new k(v)),ye.utf8=((v,R)=>new j(v,R)),ye.constant=((v,R)=>new N(v,R)),ye}var te=mNe(),yNe=8078e3,bNe=8078001,wNe=8078004,vNe=8078005,ENe=8078006,_Ne=8078011;function qte(t){return Array.isArray(t)?"%5B"+t.map(qte).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function ANe([t,e]){return`${t}=${qte(e)}`}function xNe(t){const e=Object.entries(t).map(ANe).join("&");return btoa(e)}function CNe(t,e={}){{let r=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(r+=` '${xNe(e)}'`),`${r}\``}}var Xm=class extends Error{cause=this.cause;context;constructor(...[t,e]){let r,n;if(e){const{cause:i,...o}=e;i&&(n={cause:i}),Object.keys(o).length>0&&(r=o)}const s=CNe(t,r);super(s,n),this.context={__code:t,...r},this.name="SolanaError"}};function SNe(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function INe(t){return Object.freeze({...t,encode:e=>{const r=new Uint8Array(SNe(e,t));return t.write(e,r,0),r}})}function TNe(t){return Object.freeze({...t,decode:(e,r=0)=>t.read(e,r)[0]})}function Tg(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function NNe(t,e){if(Tg(t)!==Tg(e))throw new Xm(wNe);if(Tg(t)&&Tg(e)&&t.fixedSize!==e.fixedSize)throw new Xm(vNe,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!Tg(t)&&!Tg(e)&&t.maxSize!==e.maxSize)throw new Xm(ENe,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function PNe(t,e,r=0){if(e.length-r<=0)throw new Xm(yNe,{codecDescription:t})}function RNe(t,e,r,n=0){const s=r.length-n;if(s<e)throw new Xm(bNe,{bytesLength:s,codecDescription:t,expected:e})}function ONe(t,e,r,n){if(n<e||n>r)throw new Xm(_Ne,{codecDescription:t,max:r,min:e,value:n})}function Hte(t){return t?.endian!==1}function kNe(t){return INe({fixedSize:t.size,write(e,r,n){t.range&&ONe(t.name,t.range[0],t.range[1],e);const s=new ArrayBuffer(t.size);return t.set(new DataView(s),e,Hte(t.config)),r.set(new Uint8Array(s),n),n+t.size}})}function BNe(t){return TNe({fixedSize:t.size,read(e,r=0){PNe(t.name,e,r),RNe(t.name,t.size,e,r);const n=new DataView(UNe(e,r,t.size));return[t.get(n,Hte(t.config)),r+t.size]}})}function UNe(t,e,r){const n=t.byteOffset+(e??0),s=r??t.byteLength;return t.buffer.slice(n,n+s)}var MNe=(t={})=>kNe({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,r,n)=>e.setBigUint64(0,BigInt(r),n),size:8}),DNe=(t={})=>BNe({config:t,get:(e,r)=>e.getBigUint64(0,r),name:"u64",size:8}),jNe=(t={})=>NNe(MNe(t),DNe(t));class LNe extends TypeError{constructor(e,r){let n;const{message:s,explanation:i,...o}=e,{path:a}=e,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}}function FNe(t){return $E(t)&&typeof t[Symbol.iterator]=="function"}function $E(t){return typeof t=="object"&&t!=null}function B6(t){return $E(t)&&!Array.isArray(t)}function ju(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function $Ne(t){const{done:e,value:r}=t.next();return e?void 0:r}function qNe(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:s,branch:i}=e,{type:o}=r,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${ju(n)}\``}=t;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...t,message:c}}function*mj(t,e,r,n){FNe(t)||(t=[t]);for(const s of t){const i=qNe(s,e,r,n);i&&(yield i)}}function*Ck(t,e,r={}){const{path:n=[],branch:s=[t],coerce:i=!1,mask:o=!1}=r,a={path:n,branch:s,mask:o};i&&(t=e.coercer(t,a));let c="valid";for(const u of e.validator(t,a))u.explanation=r.message,c="not_valid",yield[u,void 0];for(let[u,l,d]of e.entries(t,a)){const f=Ck(l,d,{path:u===void 0?n:[...n,u],branch:u===void 0?s:[...s,l],coerce:i,mask:o,message:r.message});for(const p of f)p[0]?(c=p[0].refinement!=null?"not_refined":"not_valid",yield[p[0],void 0]):i&&(l=p[1],u===void 0?t=l:t instanceof Map?t.set(u,l):t instanceof Set?t.add(l):$E(t)&&(l!==void 0||u in t)&&(t[u]=l))}if(c!=="not_valid")for(const u of e.refiner(t,a))u.explanation=r.message,c="not_refined",yield[u,void 0];c==="valid"&&(yield[void 0,t])}let $l=class{constructor(e){const{type:r,schema:n,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=r,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(c,u)=>{const l=s(c,u);return mj(l,u,this,c)}:this.validator=()=>[],i?this.refiner=(c,u)=>{const l=i(c,u);return mj(l,u,this,c)}:this.refiner=()=>[]}assert(e,r){return HNe(e,this,r)}create(e,r){return He(e,this,r)}is(e){return zte(e,this)}mask(e,r){return zNe(e,this,r)}validate(e,r={}){return qE(e,this,r)}};function HNe(t,e,r){const n=qE(t,e,{message:r});if(n[0])throw n[0]}function He(t,e,r){const n=qE(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function zNe(t,e,r){const n=qE(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function zte(t,e){return!qE(t,e)[0]}function qE(t,e,r={}){const n=Ck(t,e,r),s=$Ne(n);return s[0]?[new LNe(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function G0(t,e){return new $l({type:t,schema:null,validator:e})}function WNe(){return G0("any",()=>!0)}function Ke(t){return new $l({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${ju(e)}`}})}function kl(){return G0("boolean",t=>typeof t=="boolean")}function Sk(t){return G0("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${ju(e)}`)}function ns(t){const e=ju(t),r=typeof t;return new $l({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${ju(n)}`}})}function VNe(){return G0("never",()=>!1)}function Ze(t){return new $l({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function pe(){return G0("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${ju(t)}`)}function Pt(t){return new $l({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function Wte(t,e){return new $l({type:"record",schema:null,*entries(r){if($E(r))for(const n in r){const s=r[n];yield[n,n,t],yield[n,s,e]}},validator(r){return B6(r)||`Expected an object, but received: ${ju(r)}`},coercer(r){return B6(r)?{...r}:r}})}function Le(){return G0("string",t=>typeof t=="string"||`Expected a string, but received: ${ju(t)}`)}function Ik(t){const e=VNe();return new $l({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let s=0;s<n;s++)yield[s,r[s],t[s]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${ju(r)}`},coercer(r){return Array.isArray(r)?r.slice():r}})}function Te(t){const e=Object.keys(t);return new $l({type:"type",schema:t,*entries(r){if($E(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return B6(r)||`Expected an object, but received: ${ju(r)}`},coercer(r){return B6(r)?{...r}:r}})}function jo(t){const e=t.map(r=>r.type).join(" | ");return new $l({type:"union",schema:null,coercer(r,n){for(const s of t){const[i,o]=s.validate(r,{coerce:!0,mask:n.mask});if(!i)return o}return r},validator(r,n){const s=[];for(const i of t){const[...o]=Ck(r,i,n),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${ju(r)}`,...s]}})}function Wy(){return G0("unknown",()=>!0)}function HE(t,e,r){return new $l({...t,coercer:(n,s)=>zte(n,e)?t.coercer(r(n,s),s):t.coercer(n,s)})}var m2,GNe=new Uint8Array(16);function Vte(){if(!m2&&(m2=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!m2))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m2(GNe)}const KNe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function K5(t){return typeof t=="string"&&KNe.test(t)}var _i=[];for(var qN=0;qN<256;++qN)_i.push((qN+256).toString(16).substr(1));function Z5(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(_i[t[e+0]]+_i[t[e+1]]+_i[t[e+2]]+_i[t[e+3]]+"-"+_i[t[e+4]]+_i[t[e+5]]+"-"+_i[t[e+6]]+_i[t[e+7]]+"-"+_i[t[e+8]]+_i[t[e+9]]+"-"+_i[t[e+10]]+_i[t[e+11]]+_i[t[e+12]]+_i[t[e+13]]+_i[t[e+14]]+_i[t[e+15]]).toLowerCase();if(!K5(r))throw TypeError("Stringified UUID is invalid");return r}var yj,HN,zN=0,WN=0;function ZNe(t,e,r){var n=e&&r||0,s=e||new Array(16);t=t||{};var i=t.node||yj,o=t.clockseq!==void 0?t.clockseq:HN;if(i==null||o==null){var a=t.random||(t.rng||Vte)();i==null&&(i=yj=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=HN=(a[6]<<8|a[7])&16383)}var c=t.msecs!==void 0?t.msecs:Date.now(),u=t.nsecs!==void 0?t.nsecs:WN+1,l=c-zN+(u-WN)/1e4;if(l<0&&t.clockseq===void 0&&(o=o+1&16383),(l<0||c>zN)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");zN=c,WN=u,HN=o,c+=122192928e5;var d=((c&268435455)*1e4+u)%4294967296;s[n++]=d>>>24&255,s[n++]=d>>>16&255,s[n++]=d>>>8&255,s[n++]=d&255;var f=c/4294967296*1e4&268435455;s[n++]=f>>>8&255,s[n++]=f&255,s[n++]=f>>>24&15|16,s[n++]=f>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var p=0;p<6;++p)s[n+p]=i[p];return e||Z5(s)}function Gte(t){if(!K5(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function YNe(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var JNe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",XNe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Kte(t,e,r){function n(s,i,o,a){if(typeof s=="string"&&(s=YNe(s)),typeof i=="string"&&(i=Gte(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=r(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var u=0;u<16;++u)o[a+u]=c[u];return o}return Z5(c)}try{n.name=t}catch{}return n.DNS=JNe,n.URL=XNe,n}function QNe(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return ePe(tPe(rPe(t),t.length*8))}function ePe(t){for(var e=[],r=t.length*32,n="0123456789abcdef",s=0;s<r;s+=8){var i=t[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);e.push(o)}return e}function Zte(t){return(t+64>>>9<<4)+14+1}function tPe(t,e){t[e>>5]|=128<<e%32,t[Zte(e)-1]=e;for(var r=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<t.length;o+=16){var a=r,c=n,u=s,l=i;r=Ki(r,n,s,i,t[o],7,-680876936),i=Ki(i,r,n,s,t[o+1],12,-389564586),s=Ki(s,i,r,n,t[o+2],17,606105819),n=Ki(n,s,i,r,t[o+3],22,-1044525330),r=Ki(r,n,s,i,t[o+4],7,-176418897),i=Ki(i,r,n,s,t[o+5],12,1200080426),s=Ki(s,i,r,n,t[o+6],17,-1473231341),n=Ki(n,s,i,r,t[o+7],22,-45705983),r=Ki(r,n,s,i,t[o+8],7,1770035416),i=Ki(i,r,n,s,t[o+9],12,-1958414417),s=Ki(s,i,r,n,t[o+10],17,-42063),n=Ki(n,s,i,r,t[o+11],22,-1990404162),r=Ki(r,n,s,i,t[o+12],7,1804603682),i=Ki(i,r,n,s,t[o+13],12,-40341101),s=Ki(s,i,r,n,t[o+14],17,-1502002290),n=Ki(n,s,i,r,t[o+15],22,1236535329),r=Zi(r,n,s,i,t[o+1],5,-165796510),i=Zi(i,r,n,s,t[o+6],9,-1069501632),s=Zi(s,i,r,n,t[o+11],14,643717713),n=Zi(n,s,i,r,t[o],20,-373897302),r=Zi(r,n,s,i,t[o+5],5,-701558691),i=Zi(i,r,n,s,t[o+10],9,38016083),s=Zi(s,i,r,n,t[o+15],14,-660478335),n=Zi(n,s,i,r,t[o+4],20,-405537848),r=Zi(r,n,s,i,t[o+9],5,568446438),i=Zi(i,r,n,s,t[o+14],9,-1019803690),s=Zi(s,i,r,n,t[o+3],14,-187363961),n=Zi(n,s,i,r,t[o+8],20,1163531501),r=Zi(r,n,s,i,t[o+13],5,-1444681467),i=Zi(i,r,n,s,t[o+2],9,-51403784),s=Zi(s,i,r,n,t[o+7],14,1735328473),n=Zi(n,s,i,r,t[o+12],20,-1926607734),r=Yi(r,n,s,i,t[o+5],4,-378558),i=Yi(i,r,n,s,t[o+8],11,-2022574463),s=Yi(s,i,r,n,t[o+11],16,1839030562),n=Yi(n,s,i,r,t[o+14],23,-35309556),r=Yi(r,n,s,i,t[o+1],4,-1530992060),i=Yi(i,r,n,s,t[o+4],11,1272893353),s=Yi(s,i,r,n,t[o+7],16,-155497632),n=Yi(n,s,i,r,t[o+10],23,-1094730640),r=Yi(r,n,s,i,t[o+13],4,681279174),i=Yi(i,r,n,s,t[o],11,-358537222),s=Yi(s,i,r,n,t[o+3],16,-722521979),n=Yi(n,s,i,r,t[o+6],23,76029189),r=Yi(r,n,s,i,t[o+9],4,-640364487),i=Yi(i,r,n,s,t[o+12],11,-421815835),s=Yi(s,i,r,n,t[o+15],16,530742520),n=Yi(n,s,i,r,t[o+2],23,-995338651),r=Ji(r,n,s,i,t[o],6,-198630844),i=Ji(i,r,n,s,t[o+7],10,1126891415),s=Ji(s,i,r,n,t[o+14],15,-1416354905),n=Ji(n,s,i,r,t[o+5],21,-57434055),r=Ji(r,n,s,i,t[o+12],6,1700485571),i=Ji(i,r,n,s,t[o+3],10,-1894986606),s=Ji(s,i,r,n,t[o+10],15,-1051523),n=Ji(n,s,i,r,t[o+1],21,-2054922799),r=Ji(r,n,s,i,t[o+8],6,1873313359),i=Ji(i,r,n,s,t[o+15],10,-30611744),s=Ji(s,i,r,n,t[o+6],15,-1560198380),n=Ji(n,s,i,r,t[o+13],21,1309151649),r=Ji(r,n,s,i,t[o+4],6,-145523070),i=Ji(i,r,n,s,t[o+11],10,-1120210379),s=Ji(s,i,r,n,t[o+2],15,718787259),n=Ji(n,s,i,r,t[o+9],21,-343485551),r=hh(r,a),n=hh(n,c),s=hh(s,u),i=hh(i,l)}return[r,n,s,i]}function rPe(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(Zte(e)),n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function hh(t,e){var r=(t&65535)+(e&65535),n=(t>>16)+(e>>16)+(r>>16);return n<<16|r&65535}function nPe(t,e){return t<<e|t>>>32-e}function Y5(t,e,r,n,s,i){return hh(nPe(hh(hh(e,t),hh(n,i)),s),r)}function Ki(t,e,r,n,s,i,o){return Y5(e&r|~e&n,t,e,s,i,o)}function Zi(t,e,r,n,s,i,o){return Y5(e&n|r&~n,t,e,s,i,o)}function Yi(t,e,r,n,s,i,o){return Y5(e^r^n,t,e,s,i,o)}function Ji(t,e,r,n,s,i,o){return Y5(r^(e|~n),t,e,s,i,o)}var sPe=Kte("v3",48,QNe);function iPe(t,e,r){t=t||{};var n=t.random||(t.rng||Vte)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=n[s];return e}return Z5(n)}function oPe(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function VN(t,e){return t<<e|t>>>32-e}function aPe(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=[];for(var s=0;s<n.length;++s)t.push(n.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=t[c*64+l*4]<<24|t[c*64+l*4+1]<<16|t[c*64+l*4+2]<<8|t[c*64+l*4+3];a[c]=u}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var d=0;d<o;++d){for(var f=new Uint32Array(80),p=0;p<16;++p)f[p]=a[d][p];for(var g=16;g<80;++g)f[g]=VN(f[g-3]^f[g-8]^f[g-14]^f[g-16],1);for(var h=r[0],y=r[1],E=r[2],S=r[3],C=r[4],_=0;_<80;++_){var T=Math.floor(_/20),P=VN(h,5)+oPe(T,y,E,S)+C+e[T]+f[_]>>>0;C=S,S=E,E=VN(y,30)>>>0,y=h,h=P}r[0]=r[0]+h>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+E>>>0,r[3]=r[3]+S>>>0,r[4]=r[4]+C>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var cPe=Kte("v5",80,aPe);const uPe="00000000-0000-0000-0000-000000000000";function lPe(t){if(!K5(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const dPe=Object.freeze(Object.defineProperty({__proto__:null,NIL:uPe,parse:Gte,stringify:Z5,v1:ZNe,v3:sPe,v4:iPe,v5:cPe,validate:K5,version:lPe},Symbol.toStringTag,{value:"Module"})),Yte=Ln(dPe);var GN,bj;function fPe(){if(bj)return GN;bj=1;const t=Yte.v4;return GN=function(r,n,s,i){if(typeof r!="string")throw new TypeError(r+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:r};if(o===2&&(a.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");a.params=n}if(typeof s>"u"){const c=typeof i.generator=="function"?i.generator:function(){return t()};a.id=c(a,i)}else o===2&&s===null?i.notificationIdNull&&(a.id=null):a.id=s;return a},GN}var KN,wj;function hPe(){if(wj)return KN;wj=1;const t=Yte.v4,e=fPe(),r=function(n,s){if(!(this instanceof r))return new r(n,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return t()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=n};return KN=r,r.prototype.request=function(n,s,i,o){const a=this;let c=null;const u=Array.isArray(n)&&typeof s=="function";if(this.options.version===1&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&n&&typeof n=="object"&&typeof s=="function")o=s,c=n;else{typeof i=="function"&&(o=i,i=void 0);const f=typeof o=="function";try{c=e(n,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(p){if(f)return o(p);throw p}if(!f)return c}let d;try{d=JSON.stringify(c,this.options.replacer)}catch(f){return o(f)}return this.callServer(d,function(f,p){a._parseResponse(f,p,o)}),c},r.prototype._parseResponse=function(n,s,i){if(n){i(n);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(a){return i(a)}if(i.length===3)if(Array.isArray(o)){const a=function(u){return typeof u.error<"u"},c=function(u){return!a(u)};return i(null,o.filter(a),o.filter(c))}else return i(null,o.error,o.result);i(null,o)},KN}var pPe=hPe();const gPe=Ea(pPe);var mPe=class extends mQ{socket;constructor(t,e){super(),this.socket=new window.WebSocket(t,e.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(t,e,r){const n=r||e;try{this.socket.send(t),n()}catch(s){n(s)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function yPe(t,e){return new mPe(t,e)}var bPe=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},wPe=class extends mQ{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:n=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},a,c){super(),this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new bPe,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,n){return!n&&typeof r=="object"&&(n=r,r=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(t,e),a={jsonrpc:"2.0",method:t,params:e||void 0,id:o};this.socket.send(this.dataPack.encode(a),n,c=>{if(c)return i(c);this.queue[o]={promise:[s,i]},r&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,n)=>{if(!this.ready)return n(new Error("socket not ready"));const s={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(s),i=>{if(i)return n(i);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket&&this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=nr.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const n=[r.notification];if(r.params.constructor===Object)n.push(r.params);else for(let s=0;s<r.params.length;s++)n.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,n)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r?.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",r,n),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,n),1))})}};FE.utils.randomPrivateKey;FE.getPublicKey;function vj(t){try{return FE.ExtendedPoint.fromHex(t),!0}catch{return!1}}const Jte=(t,e)=>FE.sign(t,e.slice(0,32)),vPe=FE.verify,Ii=t=>nr.Buffer.isBuffer(t)?t:t instanceof Uint8Array?nr.Buffer.from(t.buffer,t.byteOffset,t.byteLength):nr.Buffer.from(t);class EPe{constructor(e){Object.assign(this,e)}encode(){return nr.Buffer.from($N.serialize(wI,this))}static decode(e){return $N.deserialize(wI,this,e)}static decodeUnchecked(e){return $N.deserializeUnchecked(wI,this,e)}}const wI=new Map;var Xte;const _Pe=32,yh=32;function APe(t){return t._bn!==void 0}let Ej=1,dt=class Am extends EPe{constructor(e){if(super({}),this._bn=void 0,APe(e))this._bn=e._bn;else{if(typeof e=="string"){const r=Ri.decode(e);if(r.length!=yh)throw new Error("Invalid public key input");this._bn=new Ft(r)}else this._bn=new Ft(e);if(this._bn.byteLength()>yh)throw new Error("Invalid public key input")}}static unique(){const e=new Am(Ej);return Ej+=1,new Am(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Ri.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(nr.Buffer);if(e.length===yh)return e;const r=nr.Buffer.alloc(32);return e.copy(r,32-e.length),r}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,r,n){const s=nr.Buffer.concat([e.toBuffer(),nr.Buffer.from(r),n.toBuffer()]),i=dj(s);return new Am(i)}static createProgramAddressSync(e,r){let n=nr.Buffer.alloc(0);e.forEach(function(i){if(i.length>_Pe)throw new TypeError("Max seed length exceeded");n=nr.Buffer.concat([n,Ii(i)])}),n=nr.Buffer.concat([n,r.toBuffer(),nr.Buffer.from("ProgramDerivedAddress")]);const s=dj(n);if(vj(s))throw new Error("Invalid seeds, address must fall off the curve");return new Am(s)}static async createProgramAddress(e,r){return this.createProgramAddressSync(e,r)}static findProgramAddressSync(e,r){let n=255,s;for(;n!=0;){try{const i=e.concat(nr.Buffer.from([n]));s=this.createProgramAddressSync(i,r)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,r){return this.findProgramAddressSync(e,r)}static isOnCurve(e){const r=new Am(e);return vj(r.toBytes())}};Xte=dt;dt.default=new Xte("11111111111111111111111111111111");wI.set(dt,{kind:"struct",fields:[["_bn","u256"]]});new dt("BPFLoader1111111111111111111111111111111111");const Qm=1232,Tk=127,U6=64;class Qte extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Qte.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class ere extends Error{constructor(e,r){super(`Transaction was not confirmed in ${r.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ere.prototype,"name",{value:"TransactionExpiredTimeoutError"});class h1 extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(h1.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class M6{constructor(e,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=r}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const r of this.keySegments()){if(e<r.length)return r[e];e-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const ur=(t="publicKey")=>te.blob(32,t),xPe=(t="signature")=>te.blob(64,t),Mm=(t="string")=>{const e=te.struct([te.u32("length"),te.u32("lengthPadding"),te.blob(te.offset(te.u32(),-8),"chars")],t),r=e.decode.bind(e),n=e.encode.bind(e),s=e;return s.decode=(i,o)=>r(i,o).chars.toString(),s.encode=(i,o,a)=>{const c={chars:nr.Buffer.from(i,"utf8")};return n(c,o,a)},s.alloc=i=>te.u32().span+te.u32().span+nr.Buffer.from(i,"utf8").length,s},CPe=(t="authorized")=>te.struct([ur("staker"),ur("withdrawer")],t),SPe=(t="lockup")=>te.struct([te.ns64("unixTimestamp"),te.ns64("epoch"),ur("custodian")],t),IPe=(t="voteInit")=>te.struct([ur("nodePubkey"),ur("authorizedVoter"),ur("authorizedWithdrawer"),te.u8("commission")],t),TPe=(t="voteAuthorizeWithSeedArgs")=>te.struct([te.u32("voteAuthorizationType"),ur("currentAuthorityDerivedKeyOwnerPubkey"),Mm("currentAuthorityDerivedKeySeed"),ur("newAuthorized")],t);function tre(t,e){const r=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*r(s.elementLayout)}else if("fields"in s)return tre({layout:s},e[s.property]);return 0};let n=0;return t.layout.fields.forEach(s=>{n+=r(s)}),n}function Ka(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(n&127)<<r*7,r+=1,(n&128)===0)break}return e}function Za(t,e){let r=e;for(;;){let n=r&127;if(r>>=7,r==0){t.push(n);break}else n|=128,t.push(n)}}function Kn(t,e){if(!t)throw new Error(e||"Assertion failed")}class J5{constructor(e,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=r}static compile(e,r){const n=new Map,s=o=>{const a=o.toBase58();let c=n.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,c)),c},i=s(r);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const a of o.keys){const c=s(a.pubkey);c.isSigner||=a.isSigner,c.isWritable||=a.isWritable}}return new J5(r,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Kn(e.length<=256,"Max static account keys length exceeded");const r=e.filter(([,c])=>c.isSigner&&c.isWritable),n=e.filter(([,c])=>c.isSigner&&!c.isWritable),s=e.filter(([,c])=>!c.isSigner&&c.isWritable),i=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Kn(r.length>0,"Expected at least one writable signer key");const[c]=r[0];Kn(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...r.map(([c])=>new dt(c)),...n.map(([c])=>new dt(c)),...s.map(([c])=>new dt(c)),...i.map(([c])=>new dt(c))];return[o,a]}extractTableLookup(e){const[r,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(r.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:r,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(e,r){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(r(o)){const a=new dt(i),c=e.findIndex(u=>u.equals(a));c>=0&&(Kn(c<256,"Max lookup table index exceeded"),n.push(c),s.push(a),this.keyMetaMap.delete(i))}return[n,s]}}const rre="Reached end of buffer unexpectedly";function Ld(t){if(t.length===0)throw new Error(rre);return t.shift()}function Ya(t,...e){const[r]=e;if(e.length===2?r+(e[1]??0)>t.length:r>=t.length)throw new Error(rre);return t.splice(...e)}class ef{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(r=>new dt(r)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ri.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new M6(this.staticAccountKeys)}static compile(e){const r=J5.compile(e.instructions,e.payerKey),[n,s]=r.getMessageComponents(),o=new M6(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Ri.encode(a.data)}));return new ef({header:n,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-r,i=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=r-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,r)=>!this.isProgramId(r))}serialize(){const e=this.accountKeys.length;let r=[];Za(r,e);const n=this.instructions.map(d=>{const{accounts:f,programIdIndex:p}=d,g=Array.from(Ri.decode(d.data));let h=[];Za(h,f.length);let y=[];return Za(y,g.length),{programIdIndex:p,keyIndicesCount:nr.Buffer.from(h),keyIndices:f,dataLength:nr.Buffer.from(y),data:g}});let s=[];Za(s,n.length);let i=nr.Buffer.alloc(Qm);nr.Buffer.from(s).copy(i);let o=s.length;n.forEach(d=>{const p=te.struct([te.u8("programIdIndex"),te.blob(d.keyIndicesCount.length,"keyIndicesCount"),te.seq(te.u8("keyIndex"),d.keyIndices.length,"keyIndices"),te.blob(d.dataLength.length,"dataLength"),te.seq(te.u8("userdatum"),d.data.length,"data")]).encode(d,i,o);o+=p}),i=i.slice(0,o);const a=te.struct([te.blob(1,"numRequiredSignatures"),te.blob(1,"numReadonlySignedAccounts"),te.blob(1,"numReadonlyUnsignedAccounts"),te.blob(r.length,"keyCount"),te.seq(ur("key"),e,"keys"),ur("recentBlockhash")]),c={numRequiredSignatures:nr.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:nr.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:nr.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:nr.Buffer.from(r),keys:this.accountKeys.map(d=>Ii(d.toBytes())),recentBlockhash:Ri.decode(this.recentBlockhash)};let u=nr.Buffer.alloc(2048);const l=a.encode(c,u);return i.copy(u,l),u.slice(0,l+i.length)}static from(e){let r=[...e];const n=Ld(r);if(n!==(n&Tk))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Ld(r),i=Ld(r),o=Ka(r);let a=[];for(let f=0;f<o;f++){const p=Ya(r,0,yh);a.push(new dt(nr.Buffer.from(p)))}const c=Ya(r,0,yh),u=Ka(r);let l=[];for(let f=0;f<u;f++){const p=Ld(r),g=Ka(r),h=Ya(r,0,g),y=Ka(r),E=Ya(r,0,y),S=Ri.encode(nr.Buffer.from(E));l.push({programIdIndex:p,accounts:h,data:S})}const d={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Ri.encode(nr.Buffer.from(c)),accountKeys:a,instructions:l};return new ef(d)}}class $v{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const r of this.addressTableLookups)e+=r.readonlyIndexes.length+r.writableIndexes.length;return e}getAccountKeys(e){let r;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)r=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new M6(this.staticAccountKeys,r)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const s=e-n,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-r,o=n-r-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=r-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const r={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=e.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)r.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)r.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(e){const r=J5.compile(e.instructions,e.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const l of i){const d=r.extractTableLookup(l);if(d!==void 0){const[f,{writable:p,readonly:g}]=d;n.push(f),s.writable.push(...p),s.readonly.push(...g)}}const[o,a]=r.getMessageComponents(),u=new M6(a,s).compileInstructions(e.instructions);return new $v({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:u,addressTableLookups:n})}serialize(){const e=Array();Za(e,this.staticAccountKeys.length);const r=this.serializeInstructions(),n=Array();Za(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Za(i,this.addressTableLookups.length);const o=te.struct([te.u8("prefix"),te.struct([te.u8("numRequiredSignatures"),te.u8("numReadonlySignedAccounts"),te.u8("numReadonlyUnsignedAccounts")],"header"),te.blob(e.length,"staticAccountKeysLength"),te.seq(ur(),this.staticAccountKeys.length,"staticAccountKeys"),ur("recentBlockhash"),te.blob(n.length,"instructionsLength"),te.blob(r.length,"serializedInstructions"),te.blob(i.length,"addressTableLookupsLength"),te.blob(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(Qm),u=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(l=>l.toBytes()),recentBlockhash:Ri.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,u)}serializeInstructions(){let e=0;const r=new Uint8Array(Qm);for(const n of this.compiledInstructions){const s=Array();Za(s,n.accountKeyIndexes.length);const i=Array();Za(i,n.data.length);const o=te.struct([te.u8("programIdIndex"),te.blob(s.length,"encodedAccountKeyIndexesLength"),te.seq(te.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),te.blob(i.length,"encodedDataLength"),te.blob(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},r,e)}return r.slice(0,e)}serializeAddressTableLookups(){let e=0;const r=new Uint8Array(Qm);for(const n of this.addressTableLookups){const s=Array();Za(s,n.writableIndexes.length);const i=Array();Za(i,n.readonlyIndexes.length);const o=te.struct([ur("accountKey"),te.blob(s.length,"encodedWritableIndexesLength"),te.seq(te.u8(),n.writableIndexes.length,"writableIndexes"),te.blob(i.length,"encodedReadonlyIndexesLength"),te.seq(te.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},r,e)}return r.slice(0,e)}static deserialize(e){let r=[...e];const n=Ld(r),s=n&Tk;Kn(n!==s,"Expected versioned message but received legacy message");const i=s;Kn(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Ld(r),numReadonlySignedAccounts:Ld(r),numReadonlyUnsignedAccounts:Ld(r)},a=[],c=Ka(r);for(let g=0;g<c;g++)a.push(new dt(Ya(r,0,yh)));const u=Ri.encode(Ya(r,0,yh)),l=Ka(r),d=[];for(let g=0;g<l;g++){const h=Ld(r),y=Ka(r),E=Ya(r,0,y),S=Ka(r),C=new Uint8Array(Ya(r,0,S));d.push({programIdIndex:h,accountKeyIndexes:E,data:C})}const f=Ka(r),p=[];for(let g=0;g<f;g++){const h=new dt(Ya(r,0,yh)),y=Ka(r),E=Ya(r,0,y),S=Ka(r),C=Ya(r,0,S);p.push({accountKey:h,writableIndexes:E,readonlyIndexes:C})}return new $v({header:o,staticAccountKeys:a,recentBlockhash:u,compiledInstructions:d,addressTableLookups:p})}}const nre={deserializeMessageVersion(t){const e=t[0],r=e&Tk;return r===e?"legacy":r},deserialize:t=>{const e=nre.deserializeMessageVersion(t);if(e==="legacy")return ef.from(t);if(e===0)return $v.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Rf=(function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t})({});const NPe=nr.Buffer.alloc(U6).fill(0);class Pi{constructor(e){this.keys=void 0,this.programId=void 0,this.data=nr.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:r,isWritable:n})=>({pubkey:e.toJSON(),isSigner:r,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Oi{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:r,nonceInfo:n}=e;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:r,lastValidBlockHeight:n}=e;this.recentBlockhash=r,this.lastValidBlockHeight=n}else{const{recentBlockhash:r,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new Pi(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(e=this.recentBlockhash,r=this.instructions),!e)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let h=0;h<r.length;h++)if(r[h].programId===void 0)throw new Error(`Transaction instruction index ${h} has undefined program id`);const s=[],i=[];r.forEach(h=>{h.keys.forEach(E=>{i.push({...E})});const y=h.programId.toString();s.includes(y)||s.push(y)}),s.forEach(h=>{i.push({pubkey:new dt(h),isSigner:!1,isWritable:!1})});const o=[];i.forEach(h=>{const y=h.pubkey.toString(),E=o.findIndex(S=>S.pubkey.toString()===y);E>-1?(o[E].isWritable=o[E].isWritable||h.isWritable,o[E].isSigner=o[E].isSigner||h.isSigner):o.push(h)}),o.sort(function(h,y){if(h.isSigner!==y.isSigner)return h.isSigner?-1:1;if(h.isWritable!==y.isWritable)return h.isWritable?-1:1;const E={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return h.pubkey.toBase58().localeCompare(y.pubkey.toBase58(),"en",E)});const a=o.findIndex(h=>h.pubkey.equals(n));if(a>-1){const[h]=o.splice(a,1);h.isSigner=!0,h.isWritable=!0,o.unshift(h)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const h of this.signatures){const y=o.findIndex(E=>E.pubkey.equals(h.publicKey));if(y>-1)o[y].isSigner||(o[y].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${h.publicKey.toString()}`)}let c=0,u=0,l=0;const d=[],f=[];o.forEach(({pubkey:h,isSigner:y,isWritable:E})=>{y?(d.push(h.toString()),c+=1,E||(u+=1)):(f.push(h.toString()),E||(l+=1))});const p=d.concat(f),g=r.map(h=>{const{data:y,programId:E}=h;return{programIdIndex:p.indexOf(E.toString()),accounts:h.keys.map(S=>p.indexOf(S.pubkey.toString())),data:Ri.encode(y)}});return g.forEach(h=>{Kn(h.programIdIndex>=0),h.accounts.forEach(y=>Kn(y>=0))}),new ef({header:{numRequiredSignatures:c,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:l},accountKeys:p,recentBlockhash:e,instructions:g})}_compile(){const e=this.compileMessage(),r=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((s,i)=>r[i].equals(s.publicKey))||(this.signatures=r.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const r=new Set;this.signatures=e.filter(n=>{const s=n.toString();return r.has(s)?!1:(r.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const i of e){const o=i.publicKey.toString();r.has(o)||(r.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const i of e){const o=i.publicKey.toString();r.has(o)||(r.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(e,...r){const n=e.serialize();r.forEach(s=>{const i=Jte(n,s.secretKey);this._addSignature(s.publicKey,Ii(i))})}addSignature(e,r){this._compile(),this._addSignature(e,r)}_addSignature(e,r){Kn(r.length===64);const n=this.signatures.findIndex(s=>e.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=nr.Buffer.from(r)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,r){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?r&&(n.missing||=[]).push(i):vPe(s,e,i.toBytes())||(n.invalid||=[]).push(i);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:r,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,r);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:r}=this,n=[];Za(n,r.length);const s=n.length+r.length*64+e.length,i=nr.Buffer.alloc(s);return Kn(r.length<256),nr.Buffer.from(n).copy(i,0),r.forEach(({signature:o},a)=>{o!==null&&(Kn(o.length===64,"signature has invalid length"),nr.Buffer.from(o).copy(i,n.length+a*64))}),e.copy(i,n.length+r.length*64),Kn(i.length<=Qm,`Transaction too large: ${i.length} > ${Qm}`),i}get keys(){return Kn(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Kn(this.instructions.length===1),this.instructions[0].programId}get data(){return Kn(this.instructions.length===1),this.instructions[0].data}static from(e){let r=[...e];const n=Ka(r);let s=[];for(let i=0;i<n;i++){const o=Ya(r,0,U6);s.push(Ri.encode(nr.Buffer.from(o)))}return Oi.populate(ef.from(r),s)}static populate(e,r=[]){const n=new Oi;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),r.forEach((s,i)=>{const o={signature:s==Ri.encode(NPe)?null:Ri.decode(s),publicKey:e.accountKeys[i]};n.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new Pi({keys:i,programId:e.accountKeys[s.programIdIndex],data:Ri.decode(s.data)}))}),n._message=e,n._json=n.toJSON(),n}}class Ih{get version(){return this.message.version}constructor(e,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)Kn(r.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{const n=[];for(let s=0;s<e.header.numRequiredSignatures;s++)n.push(new Uint8Array(U6));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),r=Array();Za(r,this.signatures.length);const n=te.struct([te.blob(r.length,"encodedSignaturesLength"),te.seq(xPe(),this.signatures.length,"signatures"),te.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let r=[...e];const n=[],s=Ka(r);for(let o=0;o<s;o++)n.push(new Uint8Array(Ya(r,0,U6)));const i=nre.deserialize(new Uint8Array(r));return new Ih(i,n)}sign(e){const r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=n.findIndex(o=>o.equals(s.publicKey));Kn(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Jte(r,s.secretKey)}}addSignature(e,r){Kn(r.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));Kn(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=r}}const PPe=160,RPe=64,OPe=PPe/RPe,kPe=1e3/OPe;new dt("SysvarC1ock11111111111111111111111111111111");new dt("SysvarEpochSchedu1e111111111111111111111111");new dt("Sysvar1nstructions1111111111111111111111111");const ZN=new dt("SysvarRecentB1ockHashes11111111111111111111"),_j=new dt("SysvarRent111111111111111111111111111111111");new dt("SysvarRewards111111111111111111111111111111");new dt("SysvarS1otHashes111111111111111111111111111");new dt("SysvarS1otHistory11111111111111111111111111");new dt("SysvarStakeHistory1111111111111111111111111");class dO extends Error{constructor({action:e,signature:r,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${r} resulted in an error. 
${n}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=r,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((r,n)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,r(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class _t extends Error{constructor({code:e,message:r,data:n},s){super(s!=null?`${s}: ${r}`:r),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}function xm(t){return new Promise(e=>setTimeout(e,t))}function so(t,e){const r=t.layout.span>=0?t.layout.span:tre(t,e),n=nr.Buffer.alloc(r),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,n),n}const BPe=te.nu64("lamportsPerSignature"),sre=te.struct([te.u32("version"),te.u32("state"),ur("authorizedPubkey"),ur("nonce"),te.struct([BPe],"feeCalculator")]),Aj=sre.span;class Nk{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const r=sre.decode(Ii(e),0);return new Nk({authorizedPubkey:new dt(r.authorizedPubkey),nonce:new dt(r.nonce).toString(),feeCalculator:r.feeCalculator})}}function Ay(t){const e=te.blob(8,t),r=e.decode.bind(e),n=e.encode.bind(e),s=e,i=jNe();return s.decode=(o,a)=>{const c=r(o,a);return i.decode(c)},s.encode=(o,a,c)=>{const u=i.encode(o);return n(u,a,c)},s}const _c=Object.freeze({Create:{index:0,layout:te.struct([te.u32("instruction"),te.ns64("lamports"),te.ns64("space"),ur("programId")])},Assign:{index:1,layout:te.struct([te.u32("instruction"),ur("programId")])},Transfer:{index:2,layout:te.struct([te.u32("instruction"),Ay("lamports")])},CreateWithSeed:{index:3,layout:te.struct([te.u32("instruction"),ur("base"),Mm("seed"),te.ns64("lamports"),te.ns64("space"),ur("programId")])},AdvanceNonceAccount:{index:4,layout:te.struct([te.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:te.struct([te.u32("instruction"),te.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:te.struct([te.u32("instruction"),ur("authorized")])},AuthorizeNonceAccount:{index:7,layout:te.struct([te.u32("instruction"),ur("authorized")])},Allocate:{index:8,layout:te.struct([te.u32("instruction"),te.ns64("space")])},AllocateWithSeed:{index:9,layout:te.struct([te.u32("instruction"),ur("base"),Mm("seed"),te.ns64("space"),ur("programId")])},AssignWithSeed:{index:10,layout:te.struct([te.u32("instruction"),ur("base"),Mm("seed"),ur("programId")])},TransferWithSeed:{index:11,layout:te.struct([te.u32("instruction"),Ay("lamports"),Mm("seed"),ur("programId")])},UpgradeNonceAccount:{index:12,layout:te.struct([te.u32("instruction")])}});class xy{constructor(){}static createAccount(e){const r=_c.Create,n=so(r,{lamports:e.lamports,space:e.space,programId:Ii(e.programId.toBuffer())});return new Pi({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let r,n;if("basePubkey"in e){const s=_c.TransferWithSeed;r=so(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:Ii(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=_c.Transfer;r=so(s,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Pi({keys:n,programId:this.programId,data:r})}static assign(e){let r,n;if("basePubkey"in e){const s=_c.AssignWithSeed;r=so(s,{base:Ii(e.basePubkey.toBuffer()),seed:e.seed,programId:Ii(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=_c.Assign;r=so(s,{programId:Ii(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Pi({keys:n,programId:this.programId,data:r})}static createAccountWithSeed(e){const r=_c.CreateWithSeed,n=so(r,{base:Ii(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Ii(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Pi({keys:s,programId:this.programId,data:n})}static createNonceAccount(e){const r=new Oi;"basePubkey"in e&&"seed"in e?r.add(xy.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Aj,programId:this.programId})):r.add(xy.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Aj,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}static nonceInitialize(e){const r=_c.InitializeNonceAccount,n=so(r,{authorized:Ii(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:ZN,isSigner:!1,isWritable:!1},{pubkey:_j,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Pi(s)}static nonceAdvance(e){const r=_c.AdvanceNonceAccount,n=so(r),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:ZN,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Pi(s)}static nonceWithdraw(e){const r=_c.WithdrawNonceAccount,n=so(r,{lamports:e.lamports});return new Pi({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:ZN,isSigner:!1,isWritable:!1},{pubkey:_j,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const r=_c.AuthorizeNonceAccount,n=so(r,{authorized:Ii(e.newAuthorizedPubkey.toBuffer())});return new Pi({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let r,n;if("basePubkey"in e){const s=_c.AllocateWithSeed;r=so(s,{base:Ii(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Ii(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=_c.Allocate;r=so(s,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Pi({keys:n,programId:this.programId,data:r})}}xy.programId=new dt("11111111111111111111111111111111");new dt("BPFLoader2111111111111111111111111111111111");function UPe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var YN,xj;function MPe(){if(xj)return YN;xj=1;var t=Object.prototype.toString,e=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function r(n,s){var i,o,a,c,u,l,d;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return r(n.toJSON(),s);if(d=t.call(n),d==="[object Array]"){for(a="[",o=n.length-1,i=0;i<o;i++)a+=r(n[i],!0)+",";return o>-1&&(a+=r(n[i],!0)),a+"]"}else if(d==="[object Object]"){for(c=e(n).sort(),o=c.length,a="",i=0;i<o;)u=c[i],l=r(n[u],!1),l!==void 0&&(a&&(a+=","),a+=JSON.stringify(u)+":"+l),i++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return YN=function(n){var s=r(n,!1);if(s!==void 0)return""+s},YN}var DPe=MPe(),Cj=UPe(DPe);const Db=32;function JN(t){let e=0;for(;t>1;)t/=2,e++;return e}function jPe(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class LPe{constructor(e,r,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const r=JN(jPe(e+Db+1))-JN(Db)-1,n=this.getSlotsInEpoch(r),s=e-(n-Db);return[r,s]}else{const r=e-this.firstNormalSlot,n=Math.floor(r/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=r%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Db:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+JN(Db)):this.slotsPerEpoch}}var FPe=globalThis.fetch;class $Pe extends wPe{constructor(e,r,n){const s=i=>{const o=yPe(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...r});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,r,n),this.underlyingSocket=void 0}call(...e){const r=this.underlyingSocket?.readyState;return r===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...e){const r=this.underlyingSocket?.readyState;return r===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}}function qPe(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}const Sj=56;class Ij{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const r=qPe(HPe,e),n=e.length-Sj;Kn(n>=0,"lookup table is invalid"),Kn(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=te.struct([te.seq(ur(),s,"addresses")]).decode(e.slice(Sj));return{deactivationSlot:r.deactivationSlot,lastExtendedSlot:r.lastExtendedSlot,lastExtendedSlotStartIndex:r.lastExtendedStartIndex,authority:r.authority.length!==0?new dt(r.authority[0]):void 0,addresses:i.map(o=>new dt(o))}}}const HPe={index:1,layout:te.struct([te.u32("typeIndex"),Ay("deactivationSlot"),te.nu64("lastExtendedSlot"),te.u8("lastExtendedStartIndex"),te.u8(),te.seq(ur(),te.offset(te.u8(),-1),"authority")])},zPe=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function WPe(t){const e=t.match(zPe);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[r,n,s,i]=e,o=t.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${n}${c}${i}`}const ss=HE(Sk(dt),Le(),t=>new dt(t)),ire=Ik([Le(),ns("base64")]),Pk=HE(Sk(nr.Buffer),ire,t=>nr.Buffer.from(t[0],"base64")),VPe=30*1e3;function GPe(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function On(t){let e,r;if(typeof t=="string")e=t;else if(t){const{commitment:n,...s}=t;e=n,r=s}return{commitment:e,config:r}}function Tj(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function ore(t){return jo([Te({jsonrpc:ns("2.0"),id:Le(),result:t}),Te({jsonrpc:ns("2.0"),id:Le(),error:Te({code:Wy(),message:Le(),data:Pt(WNe())})})])}const KPe=ore(Wy());function rr(t){return HE(ore(t),KPe,e=>"error"in e?e:{...e,result:He(e.result,t)})}function ws(t){return rr(Te({context:Te({slot:pe()}),value:t}))}function X5(t){return Te({context:Te({slot:pe()}),value:t})}function XN(t,e){return t===0?new $v({header:e.header,staticAccountKeys:e.accountKeys.map(r=>new dt(r)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(r=>({programIdIndex:r.programIdIndex,accountKeyIndexes:r.accounts,data:Ri.decode(r.data)})),addressTableLookups:e.addressTableLookups}):new ef(e)}const ZPe=Te({foundation:pe(),foundationTerm:pe(),initial:pe(),taper:pe(),terminal:pe()}),YPe=rr(Ke(Ze(Te({epoch:pe(),effectiveSlot:pe(),amount:pe(),postBalance:pe(),commission:Pt(Ze(pe()))})))),JPe=Ke(Te({slot:pe(),prioritizationFee:pe()})),XPe=Te({total:pe(),validator:pe(),foundation:pe(),epoch:pe()}),QPe=Te({epoch:pe(),slotIndex:pe(),slotsInEpoch:pe(),absoluteSlot:pe(),blockHeight:Pt(pe()),transactionCount:Pt(pe())}),eRe=Te({slotsPerEpoch:pe(),leaderScheduleSlotOffset:pe(),warmup:kl(),firstNormalEpoch:pe(),firstNormalSlot:pe()}),tRe=Wte(Le(),Ke(pe())),K0=Ze(jo([Te({}),Le()])),rRe=Te({err:K0}),nRe=ns("receivedSignature"),sRe=Te({"solana-core":Le(),"feature-set":Pt(pe())}),iRe=Te({program:Le(),programId:ss,parsed:Wy()}),oRe=Te({programId:ss,accounts:Ke(ss),data:Le()}),Nj=ws(Te({err:Ze(jo([Te({}),Le()])),logs:Ze(Ke(Le())),accounts:Pt(Ze(Ke(Ze(Te({executable:kl(),owner:Le(),lamports:pe(),data:Ke(Le()),rentEpoch:Pt(pe())}))))),unitsConsumed:Pt(pe()),returnData:Pt(Ze(Te({programId:Le(),data:Ik([Le(),ns("base64")])}))),innerInstructions:Pt(Ze(Ke(Te({index:pe(),instructions:Ke(jo([iRe,oRe]))}))))})),aRe=ws(Te({byIdentity:Wte(Le(),Ke(pe())),range:Te({firstSlot:pe(),lastSlot:pe()})}));function cRe(t,e,r,n,s,i){const o=r||FPe;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(l,d)=>{const f=await new Promise((p,g)=>{try{n(l,d,(h,y)=>p([h,y]))}catch(h){g(h)}});return await o(...f)}),new gPe(async(l,d)=>{const f={method:"POST",body:l,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},c8e)};try{let p=5,g,h=500;for(;c?g=await c(t,f):g=await o(t,f),!(g.status!==429||s===!0||(p-=1,p===0));)console.error(`Server responded with ${g.status} ${g.statusText}.  Retrying after ${h}ms delay...`),await xm(h),h*=2;const y=await g.text();g.ok?d(null,y):d(new Error(`${g.status} ${g.statusText}: ${y}`))}catch(p){p instanceof Error&&d(p)}},{})}function uRe(t){return(e,r)=>new Promise((n,s)=>{t.request(e,r,(i,o)=>{if(i){s(i);return}n(o)})})}function lRe(t){return e=>new Promise((r,n)=>{e.length===0&&r([]);const s=e.map(i=>t.request(i.methodName,i.args));t.request(s,(i,o)=>{if(i){n(i);return}r(o)})})}const dRe=rr(ZPe),fRe=rr(XPe),hRe=rr(JPe),pRe=rr(QPe),gRe=rr(eRe),mRe=rr(tRe),yRe=rr(pe()),bRe=ws(Te({total:pe(),circulating:pe(),nonCirculating:pe(),nonCirculatingAccounts:Ke(ss)})),fO=Te({amount:Le(),uiAmount:Ze(pe()),decimals:pe(),uiAmountString:Pt(Le())}),wRe=ws(Ke(Te({address:ss,amount:Le(),uiAmount:Ze(pe()),decimals:pe(),uiAmountString:Pt(Le())}))),vRe=ws(Ke(Te({pubkey:ss,account:Te({executable:kl(),owner:ss,lamports:pe(),data:Pk,rentEpoch:pe()})}))),hO=Te({program:Le(),parsed:Wy(),space:pe()}),ERe=ws(Ke(Te({pubkey:ss,account:Te({executable:kl(),owner:ss,lamports:pe(),data:hO,rentEpoch:pe()})}))),_Re=ws(Ke(Te({lamports:pe(),address:ss}))),qv=Te({executable:kl(),owner:ss,lamports:pe(),data:Pk,rentEpoch:pe()}),ARe=Te({pubkey:ss,account:qv}),xRe=HE(jo([Sk(nr.Buffer),hO]),jo([ire,hO]),t=>Array.isArray(t)?He(t,Pk):t),pO=Te({executable:kl(),owner:ss,lamports:pe(),data:xRe,rentEpoch:pe()}),CRe=Te({pubkey:ss,account:pO}),SRe=Te({state:jo([ns("active"),ns("inactive"),ns("activating"),ns("deactivating")]),active:pe(),inactive:pe()}),IRe=rr(Ke(Te({signature:Le(),slot:pe(),err:K0,memo:Ze(Le()),blockTime:Pt(Ze(pe()))}))),TRe=rr(Ke(Te({signature:Le(),slot:pe(),err:K0,memo:Ze(Le()),blockTime:Pt(Ze(pe()))}))),NRe=Te({subscription:pe(),result:X5(qv)}),PRe=Te({pubkey:ss,account:qv}),RRe=Te({subscription:pe(),result:X5(PRe)}),ORe=Te({parent:pe(),slot:pe(),root:pe()}),kRe=Te({subscription:pe(),result:ORe}),BRe=jo([Te({type:jo([ns("firstShredReceived"),ns("completed"),ns("optimisticConfirmation"),ns("root")]),slot:pe(),timestamp:pe()}),Te({type:ns("createdBank"),parent:pe(),slot:pe(),timestamp:pe()}),Te({type:ns("frozen"),slot:pe(),timestamp:pe(),stats:Te({numTransactionEntries:pe(),numSuccessfulTransactions:pe(),numFailedTransactions:pe(),maxTransactionsPerEntry:pe()})}),Te({type:ns("dead"),slot:pe(),timestamp:pe(),err:Le()})]),URe=Te({subscription:pe(),result:BRe}),MRe=Te({subscription:pe(),result:X5(jo([rRe,nRe]))}),DRe=Te({subscription:pe(),result:pe()}),jRe=Te({pubkey:Le(),gossip:Ze(Le()),tpu:Ze(Le()),rpc:Ze(Le()),version:Ze(Le())}),Pj=Te({votePubkey:Le(),nodePubkey:Le(),activatedStake:pe(),epochVoteAccount:kl(),epochCredits:Ke(Ik([pe(),pe(),pe()])),commission:pe(),lastVote:pe(),rootSlot:Ze(pe())}),LRe=rr(Te({current:Ke(Pj),delinquent:Ke(Pj)})),FRe=jo([ns("processed"),ns("confirmed"),ns("finalized")]),$Re=Te({slot:pe(),confirmations:Ze(pe()),err:K0,confirmationStatus:Pt(FRe)}),qRe=ws(Ke(Ze($Re))),HRe=rr(pe()),are=Te({accountKey:ss,writableIndexes:Ke(pe()),readonlyIndexes:Ke(pe())}),Rk=Te({signatures:Ke(Le()),message:Te({accountKeys:Ke(Le()),header:Te({numRequiredSignatures:pe(),numReadonlySignedAccounts:pe(),numReadonlyUnsignedAccounts:pe()}),instructions:Ke(Te({accounts:Ke(pe()),data:Le(),programIdIndex:pe()})),recentBlockhash:Le(),addressTableLookups:Pt(Ke(are))})}),cre=Te({pubkey:ss,signer:kl(),writable:kl(),source:Pt(jo([ns("transaction"),ns("lookupTable")]))}),ure=Te({accountKeys:Ke(cre),signatures:Ke(Le())}),lre=Te({parsed:Wy(),program:Le(),programId:ss}),dre=Te({accounts:Ke(ss),data:Le(),programId:ss}),zRe=jo([dre,lre]),WRe=jo([Te({parsed:Wy(),program:Le(),programId:Le()}),Te({accounts:Ke(Le()),data:Le(),programId:Le()})]),fre=HE(zRe,WRe,t=>"accounts"in t?He(t,dre):He(t,lre)),hre=Te({signatures:Ke(Le()),message:Te({accountKeys:Ke(cre),instructions:Ke(fre),recentBlockhash:Le(),addressTableLookups:Pt(Ze(Ke(are)))})}),D6=Te({accountIndex:pe(),mint:Le(),owner:Pt(Le()),programId:Pt(Le()),uiTokenAmount:fO}),pre=Te({writable:Ke(ss),readonly:Ke(ss)}),Q5=Te({err:K0,fee:pe(),innerInstructions:Pt(Ze(Ke(Te({index:pe(),instructions:Ke(Te({accounts:Ke(pe()),data:Le(),programIdIndex:pe()}))})))),preBalances:Ke(pe()),postBalances:Ke(pe()),logMessages:Pt(Ze(Ke(Le()))),preTokenBalances:Pt(Ze(Ke(D6))),postTokenBalances:Pt(Ze(Ke(D6))),loadedAddresses:Pt(pre),computeUnitsConsumed:Pt(pe()),costUnits:Pt(pe())}),Ok=Te({err:K0,fee:pe(),innerInstructions:Pt(Ze(Ke(Te({index:pe(),instructions:Ke(fre)})))),preBalances:Ke(pe()),postBalances:Ke(pe()),logMessages:Pt(Ze(Ke(Le()))),preTokenBalances:Pt(Ze(Ke(D6))),postTokenBalances:Pt(Ze(Ke(D6))),loadedAddresses:Pt(pre),computeUnitsConsumed:Pt(pe()),costUnits:Pt(pe())}),Vy=jo([ns(0),ns("legacy")]),Z0=Te({pubkey:Le(),lamports:pe(),postBalance:Ze(pe()),rewardType:Ze(Le()),commission:Pt(Ze(pe()))}),VRe=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),transactions:Ke(Te({transaction:Rk,meta:Ze(Q5),version:Pt(Vy)})),rewards:Pt(Ke(Z0)),blockTime:Ze(pe()),blockHeight:Ze(pe())}))),GRe=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),rewards:Pt(Ke(Z0)),blockTime:Ze(pe()),blockHeight:Ze(pe())}))),KRe=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),transactions:Ke(Te({transaction:ure,meta:Ze(Q5),version:Pt(Vy)})),rewards:Pt(Ke(Z0)),blockTime:Ze(pe()),blockHeight:Ze(pe())}))),ZRe=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),transactions:Ke(Te({transaction:hre,meta:Ze(Ok),version:Pt(Vy)})),rewards:Pt(Ke(Z0)),blockTime:Ze(pe()),blockHeight:Ze(pe())}))),YRe=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),transactions:Ke(Te({transaction:ure,meta:Ze(Ok),version:Pt(Vy)})),rewards:Pt(Ke(Z0)),blockTime:Ze(pe()),blockHeight:Ze(pe())}))),JRe=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),rewards:Pt(Ke(Z0)),blockTime:Ze(pe()),blockHeight:Ze(pe())}))),XRe=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),transactions:Ke(Te({transaction:Rk,meta:Ze(Q5)})),rewards:Pt(Ke(Z0)),blockTime:Ze(pe())}))),Rj=rr(Ze(Te({blockhash:Le(),previousBlockhash:Le(),parentSlot:pe(),signatures:Ke(Le()),blockTime:Ze(pe())}))),QN=rr(Ze(Te({slot:pe(),meta:Ze(Q5),blockTime:Pt(Ze(pe())),transaction:Rk,version:Pt(Vy)}))),y2=rr(Ze(Te({slot:pe(),transaction:hre,meta:Ze(Ok),blockTime:Pt(Ze(pe())),version:Pt(Vy)}))),QRe=ws(Te({blockhash:Le(),lastValidBlockHeight:pe()})),e8e=ws(kl()),t8e=Te({slot:pe(),numTransactions:pe(),numSlots:pe(),samplePeriodSecs:pe()}),r8e=rr(Ke(t8e)),n8e=ws(Ze(Te({feeCalculator:Te({lamportsPerSignature:pe()})}))),s8e=rr(Le()),i8e=rr(Le()),o8e=Te({err:K0,logs:Ke(Le()),signature:Le()}),a8e=Te({result:X5(o8e),subscription:pe()}),c8e={"solana-client":"js/1.0.0-maintenance"};class jb{constructor(e,r){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const u={};return async l=>{const{commitment:d,config:f}=On(l),p=this._buildArgs([],d,void 0,f),g=Cj(p);return u[g]=u[g]??(async()=>{try{const h=await this._rpcRequest("getBlockHeight",p),y=He(h,rr(pe()));if("error"in y)throw new _t(y.error,"failed to get block height information");return y.result}finally{delete u[g]}})(),await u[g]}})();let n,s,i,o,a,c;r&&typeof r=="string"?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,n=r.wsEndpoint,s=r.httpHeaders,i=r.fetch,o=r.fetchMiddleware,a=r.disableRetryOnRateLimit,c=r.httpAgent),this._rpcEndpoint=GPe(e),this._rpcWsEndpoint=n||WPe(e),this._rpcClient=cRe(e,s,i,o,a,c),this._rpcRequest=uRe(this._rpcClient),this._rpcBatchRequest=lRe(this._rpcClient),this._rpcWebSocket=new $Pe(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgs([e.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),a=He(o,ws(pe()));if("error"in a)throw new _t(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,r){return await this.getBalanceAndContext(e,r).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const r=await this._rpcRequest("getBlockTime",[e]),n=He(r,rr(Ze(pe())));if("error"in n)throw new _t(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),r=He(e,rr(pe()));if("error"in r)throw new _t(r.error,"failed to get minimum ledger slot");return r.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),r=He(e,yRe);if("error"in r)throw new _t(r.error,"failed to get first available block");return r.result}async getSupply(e){let r={};typeof e=="string"?r={commitment:e}:e?r={...e,commitment:e&&e.commitment||this.commitment}:r={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[r]),s=He(n,bRe);if("error"in s)throw new _t(s.error,"failed to get supply");return s.result}async getTokenSupply(e,r){const n=this._buildArgs([e.toBase58()],r),s=await this._rpcRequest("getTokenSupply",n),i=He(s,ws(fO));if("error"in i)throw new _t(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,r){const n=this._buildArgs([e.toBase58()],r),s=await this._rpcRequest("getTokenAccountBalance",n),i=He(s,ws(fO));if("error"in i)throw new _t(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,r,n){const{commitment:s,config:i}=On(n);let o=[e.toBase58()];"mint"in r?o.push({mint:r.mint.toBase58()}):o.push({programId:r.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),c=await this._rpcRequest("getTokenAccountsByOwner",a),u=He(c,vRe);if("error"in u)throw new _t(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(e,r,n){let s=[e.toBase58()];"mint"in r?s.push({mint:r.mint.toBase58()}):s.push({programId:r.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=He(o,ERe);if("error"in a)throw new _t(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const r={...e,commitment:e&&e.commitment||this.commitment},n=r.filter||r.commitment?[r]:[],s=await this._rpcRequest("getLargestAccounts",n),i=He(s,_Re);if("error"in i)throw new _t(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,r){const n=this._buildArgs([e.toBase58()],r),s=await this._rpcRequest("getTokenLargestAccounts",n),i=He(s,wRe);if("error"in i)throw new _t(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgs([e.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=He(o,ws(Ze(qv)));if("error"in a)throw new _t(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=He(o,ws(Ze(pO)));if("error"in a)throw new _t(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,r){try{return(await this.getAccountInfoAndContext(e,r)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,r){const{commitment:n,config:s}=On(r),i=e.map(u=>u.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),c=He(a,ws(Ke(Ze(pO))));if("error"in c)throw new _t(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfoAndContext(e,r){const{commitment:n,config:s}=On(r),i=e.map(u=>u.toBase58()),o=this._buildArgs([i],n,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),c=He(a,ws(Ke(Ze(qv))));if("error"in c)throw new _t(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfo(e,r){return(await this.getMultipleAccountsInfoAndContext(e,r)).value}async getStakeActivation(e,r,n){const{commitment:s,config:i}=On(r),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:n??i?.epoch}),a=await this._rpcRequest("getStakeActivation",o),c=He(a,rr(SRe));if("error"in c)throw new _t(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,r){const{commitment:n,config:s}=On(r),{encoding:i,...o}=s||{},a=this._buildArgs([e.toBase58()],n,i||"base64",{...o,...o.filters?{filters:Tj(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),u=Ke(ARe),l=o.withContext===!0?He(c,ws(u)):He(c,rr(u));if("error"in l)throw new _t(l.error,`failed to get accounts owned by program ${e.toBase58()}`);return l.result}async getParsedProgramAccounts(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=He(o,rr(Ke(CRe)));if("error"in a)throw new _t(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,r){let n;if(typeof e=="string")n=e;else{const i=e;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);n=i.signature}let s;try{s=Ri.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Kn(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((r,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:r}){let n,s,i=!1;const o=new Promise((c,u)=>{try{n=this.onSignature(r,(d,f)=>{n=void 0;const p={context:f,value:d};c({__type:Rf.PROCESSED,response:p})},e);const l=new Promise(d=>{n==null?d():s=this._onSubscriptionStateChange(n,f=>{f==="subscribed"&&d()})});(async()=>{if(await l,i)return;const d=await this.getSignatureStatus(r);if(i||d==null)return;const{context:f,value:p}=d;if(p!=null)if(p?.err)u(p.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(p.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(p.confirmationStatus==="processed"||p.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,c({__type:Rf.PROCESSED,response:{context:f,value:p}})}})()}catch(l){u(l)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:r,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(d=>{const f=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let p=await f();if(!i){for(;p<=n;)if(await xm(1e3),i||(p=await f(),i))return;d({__type:Rf.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),u=this.getCancellationPromise(r);let l;try{const d=await Promise.race([u,c,o]);if(d.__type===Rf.PROCESSED)l=d.response;else throw new Qte(s)}finally{i=!0,a()}return l}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:r,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const c=new Promise(p=>{let g=i,h=null;const y=async()=>{try{const{context:E,value:S}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:n});return h=E.slot,S?.nonce}catch{return g}};(async()=>{if(g=await y(),!a)for(;;){if(i!==g){p({__type:Rf.NONCE_INVALID,slotInWhichNonceDidAdvance:h});return}if(await xm(2e3),a||(g=await y(),a))return}})()}),{abortConfirmation:u,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),d=this.getCancellationPromise(r);let f;try{const p=await Promise.race([d,l,c]);if(p.__type===Rf.PROCESSED)f=p.response;else{let g;for(;;){const h=await this.getSignatureStatus(o);if(h==null)break;if(h.context.slot<(p.slotInWhichNonceDidAdvance??n)){await xm(400);continue}g=h;break}if(g?.value){const h=e||"finalized",{confirmationStatus:y}=g.value;switch(h){case"processed":case"recent":if(y!=="processed"&&y!=="confirmed"&&y!=="finalized")throw new h1(o);break;case"confirmed":case"single":case"singleGossip":if(y!=="confirmed"&&y!=="finalized")throw new h1(o);break;case"finalized":case"max":case"root":if(y!=="finalized")throw new h1(o);break;default:}f={context:g.context,value:{err:g.value.err}}}else throw new h1(o)}}finally{a=!0,u()}return f}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:r}){let n;const s=new Promise(c=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:Rf.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:r});let a;try{const c=await Promise.race([o,s]);if(c.__type===Rf.PROCESSED)a=c.response;else throw new ere(r,c.timeoutMs/1e3)}finally{clearTimeout(n),i()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),r=He(e,rr(Ke(jRe)));if("error"in r)throw new _t(r.error,"failed to get cluster nodes");return r.result}async getVoteAccounts(e){const r=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",r),s=He(n,LRe);if("error"in s)throw new _t(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:r,config:n}=On(e),s=this._buildArgs([],r,void 0,n),i=await this._rpcRequest("getSlot",s),o=He(i,rr(pe()));if("error"in o)throw new _t(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:r,config:n}=On(e),s=this._buildArgs([],r,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=He(i,rr(Le()));if("error"in o)throw new _t(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,r){const n=[e,r],s=await this._rpcRequest("getSlotLeaders",n),i=He(s,rr(Ke(ss)));if("error"in i)throw new _t(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,r){const{context:n,value:s}=await this.getSignatureStatuses([e],r);Kn(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(e,r){const n=[e];r&&n.push(r);const s=await this._rpcRequest("getSignatureStatuses",n),i=He(s,qRe);if("error"in i)throw new _t(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:r,config:n}=On(e),s=this._buildArgs([],r,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=He(i,rr(pe()));if("error"in o)throw new _t(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const r=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",r),s=He(n,dRe);if("error"in s)throw new _t(s.error,"failed to get inflation");return s.result}async getInflationReward(e,r,n){const{commitment:s,config:i}=On(n),o=this._buildArgs([e.map(u=>u.toBase58())],s,void 0,{...i,epoch:r??i?.epoch}),a=await this._rpcRequest("getInflationReward",o),c=He(a,YPe);if("error"in c)throw new _t(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),r=He(e,fRe);if("error"in r)throw new _t(r.error,"failed to get inflation rate");return r.result}async getEpochInfo(e){const{commitment:r,config:n}=On(e),s=this._buildArgs([],r,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=He(i,pRe);if("error"in o)throw new _t(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),r=He(e,gRe);if("error"in r)throw new _t(r.error,"failed to get epoch schedule");const n=r.result;return new LPe(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),r=He(e,mRe);if("error"in r)throw new _t(r.error,"failed to get leader schedule");return r.result}async getMinimumBalanceForRentExemption(e,r){const n=this._buildArgs([e],r),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=He(s,HRe);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:r,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:r,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const r=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=He(r,r8e);if("error"in n)throw new _t(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,r){const n=this._buildArgs([e],r),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=He(s,n8e);if("error"in i)throw new _t(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,r){const n=Ii(e.serialize()).toString("base64"),s=this._buildArgs([n],r),i=await this._rpcRequest("getFeeForMessage",s),o=He(i,ws(Ze(pe())));if("error"in o)throw new _t(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){const r=e?.lockedWritableAccounts?.map(o=>o.toBase58()),n=r?.length?[r]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=He(s,hRe);if("error"in i)throw new _t(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhashAndContext(e){const{commitment:r,config:n}=On(e),s=this._buildArgs([],r,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=He(i,QRe);if("error"in o)throw new _t(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgs([e],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=He(o,e8e);if("error"in a)throw new _t(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),r=He(e,rr(sRe));if("error"in r)throw new _t(r.error,"failed to get version");return r.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),r=He(e,rr(Le()));if("error"in r)throw new _t(r.error,"failed to get genesis hash");return r.result}async getBlock(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=He(o,KRe);if("error"in a)throw a.error;return a.result}case"none":{const a=He(o,GRe);if("error"in a)throw a.error;return a.result}default:{const a=He(o,VRe);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:u,meta:l,version:d})=>({meta:l,transaction:{...u,message:XN(d,u.message)},version:d}))}:null}}}catch(a){throw new _t(a,"failed to get confirmed block")}}async getParsedBlock(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=He(o,YRe);if("error"in a)throw a.error;return a.result}case"none":{const a=He(o,JRe);if("error"in a)throw a.error;return a.result}default:{const a=He(o,ZRe);if("error"in a)throw a.error;return a.result}}}catch(a){throw new _t(a,"failed to get block")}}async getBlockProduction(e){let r,n;if(typeof e=="string")n=e;else if(e){const{commitment:a,...c}=e;n=a,r=c}const s=this._buildArgs([],n,"base64",r),i=await this._rpcRequest("getBlockProduction",s),o=He(i,aRe);if("error"in o)throw new _t(o.error,"failed to get block production information");return o.result}async getTransaction(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getTransaction",i),a=He(o,QN);if("error"in a)throw new _t(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:XN(c.version,c.transaction.message)}}}async getParsedTransaction(e,r){const{commitment:n,config:s}=On(r),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=He(o,y2);if("error"in a)throw new _t(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,r){const{commitment:n,config:s}=On(r),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(c=>{const u=He(c,y2);if("error"in u)throw new _t(u.error,"failed to get transactions");return u.result})}async getTransactions(e,r){const{commitment:n,config:s}=On(r),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(c=>{const u=He(c,QN);if("error"in u)throw new _t(u.error,"failed to get transactions");const l=u.result;return l&&{...l,transaction:{...l.transaction,message:XN(l.version,l.transaction.message)}}})}async getConfirmedBlock(e,r){const n=this._buildArgsAtLeastConfirmed([e],r),s=await this._rpcRequest("getBlock",n),i=He(s,XRe);if("error"in i)throw new _t(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:u})=>{const l=new ef(c.message);return{meta:u,transaction:{...c,message:l}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:u})=>({meta:u,transaction:Oi.populate(c.message,c.signatures)}))}}async getBlocks(e,r,n){const s=this._buildArgsAtLeastConfirmed(r!==void 0?[e,r]:[e],n),i=await this._rpcRequest("getBlocks",s),o=He(i,rr(Ke(pe())));if("error"in o)throw new _t(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,r){const n=this._buildArgsAtLeastConfirmed([e],r,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=He(s,Rj);if("error"in i)throw new _t(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,r){const n=this._buildArgsAtLeastConfirmed([e],r,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=He(s,Rj);if("error"in i)throw new _t(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,r){const n=this._buildArgsAtLeastConfirmed([e],r),s=await this._rpcRequest("getTransaction",n),i=He(s,QN);if("error"in i)throw new _t(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new ef(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:Oi.populate(a,c)}}async getParsedConfirmedTransaction(e,r){const n=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=He(s,y2);if("error"in i)throw new _t(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,r){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],r,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=He(o,y2);if("error"in a)throw new _t(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,r,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(r--,!(r<=0||r<i));)try{const c=await this.getConfirmedBlockSignatures(r,"finalized");c.signatures.length>0&&(s.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(s.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,r,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,r),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=He(i,IRe);if("error"in o)throw new _t(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,r,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,r),i=await this._rpcRequest("getSignaturesForAddress",s),o=He(i,TRe);if("error"in o)throw new _t(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,r){const{context:n,value:s}=await this.getAccountInfoAndContext(e,r);let i=null;return s!==null&&(i=new Ij({key:e,state:Ij.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(e,r){const{context:n,value:s}=await this.getAccountInfoAndContext(e,r);let i=null;return s!==null&&(i=Nk.fromAccountData(s.data)),{context:n,value:i}}async getNonce(e,r){return await this.getNonceAndContext(e,r).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,r){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),r]),s=He(n,s8e);if("error"in s)throw new _t(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await xm(100);const n=Date.now()-this._blockhashInfo.lastFetch>=VPe;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),r=this._blockhashInfo.latestBlockhash,n=r?r.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await xm(kPe/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:r,config:n}=On(e),s=this._buildArgs([],r,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=He(i,ws(pe()));if("error"in o)throw new _t(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,r,n){if("message"in e){const h=e.serialize(),y=nr.Buffer.from(h).toString("base64");if(Array.isArray(r)||n!==void 0)throw new Error("Invalid arguments");const E=r||{};E.encoding="base64","commitment"in E||(E.commitment=this.commitment),r&&typeof r=="object"&&"innerInstructions"in r&&(E.innerInstructions=r.innerInstructions);const S=[y,E],C=await this._rpcRequest("simulateTransaction",S),_=He(C,Nj);if("error"in _)throw new Error("failed to simulate transaction: "+_.error.message);return _.result}let s;if(e instanceof Oi){let g=e;s=new Oi,s.feePayer=g.feePayer,s.instructions=e.instructions,s.nonceInfo=g.nonceInfo,s.signatures=g.signatures}else s=Oi.populate(e),s._message=s._json=void 0;if(r!==void 0&&!Array.isArray(r))throw new Error("Invalid arguments");const i=r;if(s.nonceInfo&&i)s.sign(...i);else{let g=this._disableBlockhashCaching;for(;;){const h=await this._blockhashWithExpiryBlockHeight(g);if(s.lastValidBlockHeight=h.lastValidBlockHeight,s.recentBlockhash=h.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const y=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(y)&&!this._blockhashInfo.transactionSignatures.includes(y)){this._blockhashInfo.simulatedSignatures.push(y);break}else g=!0}}const o=s._compile(),a=o.serialize(),u=s._serialize(a).toString("base64"),l={encoding:"base64",commitment:this.commitment};if(n){const g=(Array.isArray(n)?n:o.nonProgramIds()).map(h=>h.toBase58());l.accounts={encoding:"base64",addresses:g}}i&&(l.sigVerify=!0),r&&typeof r=="object"&&"innerInstructions"in r&&(l.innerInstructions=r.innerInstructions);const d=[u,l],f=await this._rpcRequest("simulateTransaction",d),p=He(f,Nj);if("error"in p){let g;if("data"in p.error&&(g=p.error.data.logs,g&&Array.isArray(g))){const h=`
    `,y=h+g.join(h);console.error(p.error.message,y)}throw new dO({action:"simulate",signature:"",transactionMessage:p.error.message,logs:g})}return p.result}async sendTransaction(e,r,n){if("version"in e){if(r&&Array.isArray(r))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,r)}if(r===void 0||!Array.isArray(r))throw new Error("Invalid arguments");const s=r;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const i=e.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(e,r){const n=Ii(e).toString("base64");return await this.sendEncodedTransaction(n,r)}async sendEncodedTransaction(e,r){const n={encoding:"base64"},s=r&&r.skipPreflight,i=s===!0?"processed":r&&r.preflightCommitment||this.commitment;r&&r.maxRetries!=null&&(n.maxRetries=r.maxRetries),r&&r.minContextSlot!=null&&(n.minContextSlot=r.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[e,n],a=await this._rpcRequest("sendTransaction",o),c=He(a,i8e);if("error"in c){let u;throw"data"in c.error&&(u=c.error.data.logs),new dO({action:s?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:u})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([r,n])=>{this._setSubscription(r,{...n,state:"pending"})})}_setSubscription(e,r){const n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=r,n!==r.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(i=>{try{i(r.state)}catch{}})}}_onSubscriptionStateChange(e,r){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return s.add(r),()=>{s.delete(r),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,r=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!r())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!r())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,r){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(s=>{try{s(...r)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:r,subscription:n}=He(e,NRe);this._handleServerNotification(n,[r.value,r.context])}_makeSubscription(e,r){const n=this._nextClientSubscriptionId++,s=Cj([e.method,r]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:r,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Kn(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,r,n){const{commitment:s,config:i}=On(n),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:r,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:r,subscription:n}=He(e,RRe);this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}onProgramAccountChange(e,r,n,s){const{commitment:i,config:o}=On(n),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Tj(s)}:void 0));return this._makeSubscription({callback:r,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,r,n){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:r,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:r,subscription:n}=He(e,a8e);this._handleServerNotification(n,[r.value,r.context])}_wsOnSlotNotification(e){const{result:r,subscription:n}=He(e,kRe);this._handleServerNotification(n,[r])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:r,subscription:n}=He(e,URe);this._handleServerNotification(n,[r])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,r){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${r}' events could not be found.`)}_buildArgs(e,r,n,s){const i=r||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,r,n,s){const i=r||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,r,n,s)}_wsOnSignatureNotification(e){const{result:r,subscription:n}=He(e,MRe);r.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,r.value==="receivedSignature"?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}onSignature(e,r,n){const s=this._buildArgs([e],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){r(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,r,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),a=this._makeSubscription({callback:(c,u)=>{r(c,u);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:r,subscription:n}=He(e,DRe);this._handleServerNotification(n,[r])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:te.struct([te.u32("instruction"),Ay("recentSlot"),te.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:te.struct([te.u32("instruction")])},ExtendLookupTable:{index:2,layout:te.struct([te.u32("instruction"),Ay(),te.seq(ur(),te.offset(te.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:te.struct([te.u32("instruction")])},CloseLookupTable:{index:4,layout:te.struct([te.u32("instruction")])}});new dt("AddressLookupTab1e1111111111111111111111111");const b2=Object.freeze({RequestUnits:{index:0,layout:te.struct([te.u8("instruction"),te.u32("units"),te.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:te.struct([te.u8("instruction"),te.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:te.struct([te.u8("instruction"),te.u32("units")])},SetComputeUnitPrice:{index:3,layout:te.struct([te.u8("instruction"),Ay("microLamports")])}});class Hv{constructor(){}static requestUnits(e){const r=b2.RequestUnits,n=so(r,e);return new Pi({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const r=b2.RequestHeapFrame,n=so(r,e);return new Pi({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const r=b2.SetComputeUnitLimit,n=so(r,e);return new Pi({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const r=b2.SetComputeUnitPrice,n=so(r,{microLamports:BigInt(e.microLamports)});return new Pi({keys:[],programId:this.programId,data:n})}}Hv.programId=new dt("ComputeBudget111111111111111111111111111111");te.struct([te.u8("numSignatures"),te.u8("padding"),te.u16("signatureOffset"),te.u16("signatureInstructionIndex"),te.u16("publicKeyOffset"),te.u16("publicKeyInstructionIndex"),te.u16("messageDataOffset"),te.u16("messageDataSize"),te.u16("messageInstructionIndex")]);new dt("Ed25519SigVerify111111111111111111111111111");Rwe.utils.isValidPrivateKey;te.struct([te.u8("numSignatures"),te.u16("signatureOffset"),te.u8("signatureInstructionIndex"),te.u16("ethAddressOffset"),te.u8("ethAddressInstructionIndex"),te.u16("messageDataOffset"),te.u16("messageDataSize"),te.u8("messageInstructionIndex"),te.blob(20,"ethAddress"),te.blob(64,"signature"),te.u8("recoveryId")]);new dt("KeccakSecp256k11111111111111111111111111111");var gre;new dt("StakeConfig11111111111111111111111111111111");class mre{constructor(e,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=r,this.custodian=n}}gre=mre;mre.default=new gre(0,0,dt.default);Object.freeze({Initialize:{index:0,layout:te.struct([te.u32("instruction"),CPe(),SPe()])},Authorize:{index:1,layout:te.struct([te.u32("instruction"),ur("newAuthorized"),te.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:te.struct([te.u32("instruction")])},Split:{index:3,layout:te.struct([te.u32("instruction"),te.ns64("lamports")])},Withdraw:{index:4,layout:te.struct([te.u32("instruction"),te.ns64("lamports")])},Deactivate:{index:5,layout:te.struct([te.u32("instruction")])},Merge:{index:7,layout:te.struct([te.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:te.struct([te.u32("instruction"),ur("newAuthorized"),te.u32("stakeAuthorizationType"),Mm("authoritySeed"),ur("authorityOwner")])}});new dt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:te.struct([te.u32("instruction"),IPe()])},Authorize:{index:1,layout:te.struct([te.u32("instruction"),ur("newAuthorized"),te.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:te.struct([te.u32("instruction"),te.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:te.struct([te.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:te.struct([te.u32("instruction"),TPe()])}});new dt("Vote111111111111111111111111111111111111111");new dt("Va1idator1nfo111111111111111111111111111111");Te({name:Le(),website:Pt(Le()),details:Pt(Le()),iconUrl:Pt(Le()),keybaseUsername:Pt(Le())});new dt("Vote111111111111111111111111111111111111111");te.struct([ur("nodePubkey"),ur("authorizedWithdrawer"),te.u8("commission"),te.nu64(),te.seq(te.struct([te.nu64("slot"),te.u32("confirmationCount")]),te.offset(te.u32(),-8),"votes"),te.u8("rootSlotValid"),te.nu64("rootSlot"),te.nu64(),te.seq(te.struct([te.nu64("epoch"),ur("authorizedVoter")]),te.offset(te.u32(),-8),"authorizedVoters"),te.struct([te.seq(te.struct([ur("authorizedPubkey"),te.nu64("epochOfLastAuthorizedSwitch"),te.nu64("targetEpoch")]),32,"buf"),te.nu64("idx"),te.u8("isEmpty")],"priorVoters"),te.nu64(),te.seq(te.struct([te.nu64("epoch"),te.nu64("credits"),te.nu64("prevCredits")]),te.offset(te.u32(),-8),"epochCredits"),te.struct([te.nu64("slot"),te.nu64("timestamp")],"lastTimestamp")]);const u8e=1e9,hu={UNIVERSAL_PROVIDER_RELAY_URL:"wss://relay.walletconnect.org",HASH_PREFIX:"SPL Name Service",ROOT_DOMAIN_ACCOUNT:new dt("58PwtjSDuFHuUkYjH9BYnnQKHfwo9reZhC2zMJv9JPkx"),NAME_PROGRAM_ID:new dt("namesLPneVptA9Z5rqUDD9tMTWEJwofgaYwp8cawRkX"),REVERSE_LOOKUP_CLASS:new dt("33m47vH6Eav6jr5Ry86XjhRft2jRBLDnDgPSHoquXi2Z"),DEFAULT_CHAIN:{id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",chainNamespace:ae.CHAIN.SOLANA,nativeCurrency:{name:"Solana",decimals:9,symbol:"SOL"},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},rpcUrls:{default:{http:[`${ae.BLOCKCHAIN_API_RPC_URL}/v1`]}}},CHAIN_IDS:{Mainnet:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Devnet:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Testnet:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",Deprecated_Mainnet:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",Deprecated_Devnet:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"},LAMPORTS_PER_SOL:1e9},eP={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT_TRANSFER_ONLY:3e5,UNIT_LIMIT_WITH_ATA_CREATION:4e5};class eT extends Error{constructor(e,r){super(e),this.error=r}}class l8e extends eT{constructor(){super(...arguments),this.name="WalletAccountError"}}class d8e extends eT{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class Oj extends eT{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class f8e extends eT{constructor(){super(...arguments),this.name="WalletSignMessageError"}}function g0(t){return"version"in t}const yre="solana:signAndSendTransaction",h8e="solana:signMessage",gO="solana:signTransaction",bre="standard:connect",p8e="standard:disconnect",wre="standard:events";function g8e(t){return bre in t.features&&wre in t.features&&(yre in t.features||gO in t.features)}function m8e(t){if(typeof t=="string")return`solana:${t}`}let tT=class{constructor(){this.listeners={accountsChanged:[],chainChanged:[],connect:[],disconnect:[],pendingTransaction:[],auth_rpcRequest:[],auth_rpcSuccess:[],auth_rpcError:[]}}on(e,r){this.listeners[e].push(r)}removeListener(e,r){this.listeners[e]=this.listeners[e].filter(n=>n!==r)}emit(e,r){this.listeners[e].forEach(n=>n(r))}};class y8e extends tT{constructor(e){super(),this.id=ae.CONNECTOR_ID.AUTH,this.name=ae.CONNECTOR_NAMES.AUTH,this.type="AUTH",this.chain=ae.CHAIN.SOLANA,this.provider=e.w3mFrameProvider,this.requestedChains=e.chains,this.getActiveChain=e.getActiveChain}get publicKey(){const e=J.state.chains.get(ae.CHAIN.SOLANA)?.accountState?.address;return e?new dt(e):void 0}get chains(){const e=this.provider.getAvailableChainIds();return this.requestedChains.filter(r=>e.includes(r.caipNetworkId))}async connect(e={}){const r=e.chainId||this.getActiveChain()?.id,n=fo("solana");if(await To.authConnectorAuthenticate({authConnector:this.provider,chainId:m8e(r),socialUri:e.socialUri,preferredAccountType:n,chainNamespace:ae.CHAIN.SOLANA}),!this.publicKey)throw new Error("Failed to connect to the wallet");return this.emit("connect",this.publicKey),this.publicKey.toBase58()}async disconnect(){await this.provider.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){if(!this.publicKey)throw new Error("Wallet not connected");const r=await this.provider.request({method:"solana_signMessage",params:{message:Zn.encode(e),pubkey:this.publicKey.toBase58()},chainNamespace:this.chain});return Zn.decode(r.signature)}async signTransaction(e){const r=await this.provider.request({method:"solana_signTransaction",params:{transaction:this.serializeTransaction(e)},chainNamespace:this.chain}),n=Zn.decode(r.transaction);return g0(e)?Ih.deserialize(n):Oi.from(n)}async signAndSendTransaction(e,r){const n=this.serializeTransaction(e);return(await this.provider.request({method:"solana_signAndSendTransaction",params:{transaction:n,options:r},chainNamespace:this.chain})).signature}async sendTransaction(e,r,n){const s=await this.signTransaction(e);return await r.sendRawTransaction(s.serialize(),n)}async signAllTransactions(e){return(await this.provider.request({method:"solana_signAllTransactions",params:{transactions:e.map(n=>this.serializeTransaction(n))},chainNamespace:this.chain})).transactions.map((n,s)=>{const i=e[s];if(!i)throw new Error("Invalid solana_signAllTransactions response");const o=Zn.decode(n);return g0(i)?Ih.deserialize(o):Oi.from(o)})}async request(e){return this.provider.request({method:e.method,params:e.params,chainNamespace:this.chain})}async getAccounts(){return this.publicKey?Promise.resolve([{namespace:this.chain,address:this.publicKey.toBase58(),type:"eoa"}]):Promise.resolve([])}serializeTransaction(e){return Zn.encode(new Uint8Array(e.serialize({verifySignatures:!1})))}}const b8e=xE({id:56,name:"BNB Smart Chain",blockTime:750,nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}}),w8e=xE({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:23085558},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),v8e=xE({id:143,name:"Monad",blockTime:400,nativeCurrency:{name:"Monad",symbol:"MON",decimals:18},rpcUrls:{default:{http:["https://rpc.monad.xyz","https://rpc1.monad.xyz"],webSocket:["wss://rpc.monad.xyz","wss://rpc1.monad.xyz"]}},blockExplorers:{default:{name:"MonadVision",url:"https://monadvision.com"},monadscan:{name:"Monadscan",url:"https://monadscan.com",apiUrl:"https://api.monadscan.com/api"}},testnet:!1,contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:9248132}}}),E8e=xE({id:137,name:"Polygon",blockTime:2e3,nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}}),_8e=xE({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://11155111.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:8928790}},testnet:!0});function Dh(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const kk=Dh({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),vre=Dh({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),Ere=Dh({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Dh({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Dh({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});Dh({id:"00000008819873e925422c1ff0f99f7c",caipNetworkId:"bip122:00000008819873e925422c1ff0f99f7c",chainNamespace:"bip122",name:"Bitcoin Signet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const A8e=Dh({id:"-239",name:"TON",network:"ton-mainnet",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Tonscan",url:"https://tonscan.org"}},testnet:!1,chainNamespace:"ton",caipNetworkId:"ton:-239"}),x8e=Dh({id:"-3",name:"TON Testnet",network:"ton-testnet",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Tonscan",url:"https://testnet.tonscan.org"}},testnet:!0,chainNamespace:"ton",caipNetworkId:"ton:-3"});class C8e extends tT{constructor(e){super(),this.name="Coinbase Wallet",this.id=ii.ConnectorExplorerIds[ae.CONNECTOR_ID.COINBASE_SDK],this.explorerId=ii.ConnectorExplorerIds[ae.CONNECTOR_ID.COINBASE_SDK],this.type="ANNOUNCED",this.imageUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",this.chain=ae.CHAIN.SOLANA,this.provider=this,this.coinbase=e.provider,this.requestedChains=e.chains}get chains(){return this.requestedChains.filter(e=>e.id===kk.id)}get publicKey(){return this.coinbase.publicKey}get imageId(){return ii.ConnectorImageIds[ae.CONNECTOR_ID.COINBASE]}async connect(){try{await this.coinbase.connect();const e=this.getAccount(!0);return this.coinbase.emit("connect",this.coinbase.publicKey),this.emit("connect",e),e.toBase58()}catch(e){throw this.coinbase.emit("error",e),new My(e)}}async disconnect(){await this.coinbase.disconnect(),this.coinbase.emit("disconnect",void 0),this.emit("disconnect",void 0)}async signMessage(e){return(await this.coinbase.signMessage(e)).signature}async signTransaction(e){return this.coinbase.signTransaction(e)}async signAndSendTransaction(e,r){return(await this.coinbase.signAndSendTransaction(e,r)).signature}async sendTransaction(e,r,n){const s=await this.signTransaction(e);return await r.sendRawTransaction(s.serialize(),n)}async signAllTransactions(e){return await this.coinbase.signAllTransactions(e)}async request(e){return Promise.reject(new Error('The "request" method is not supported on Coinbase Wallet'))}async getAccounts(){const e=this.getAccount();return e?Promise.resolve([{namespace:this.chain,address:e.toBase58(),type:"eoa"}]):Promise.resolve([])}getAccount(e){const r=this.coinbase.publicKey;if(e&&!r)throw new Error("Not connected");return r}}class kj extends Error{constructor(e){super(`The wallet does not support the "${e}" feature`)}}class Bj extends Error{constructor(e){super(`The method "${e}" is not supported by the wallet`)}}var S8e=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},mO;class Uj extends z5{constructor({provider:e,chains:r,getActiveChain:n}){super({caipNetworks:r,namespace:"solana",provider:e}),this.eventEmitter=new tT,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter),mO.set(this,"1.0.0"),this.getActiveChain=n}get session(){return this.provider.session}get chains(){return this.sessionChains.map(e=>{let r=e;return r===hu.CHAIN_IDS.Deprecated_Mainnet?r=hu.CHAIN_IDS.Mainnet:r===hu.CHAIN_IDS.Deprecated_Devnet&&(r=hu.CHAIN_IDS.Devnet),this.caipNetworks.find(n=>n.caipNetworkId===r)}).filter(Boolean)}get icon(){return aa.state.connectorImages[this.id]}get version(){return S8e(this,mO,"f")}get publicKey(){const e=this.getAccount(!1);if(e)return new dt(e.publicKey)}async connect(){await super.connectWalletConnect();const e=this.getAccount(!0);return this.emit("connect",new dt(e.publicKey)),e.address}async disconnect(){await super.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){this.checkIfMethodIsSupported("solana_signMessage");const r=await this.internalRequest("solana_signMessage",{message:Zn.encode(e),pubkey:this.getAccount(!0).address});return Zn.decode(r.signature)}async signTransaction(e){this.checkIfMethodIsSupported("solana_signTransaction");const r=this.serializeTransaction(e),n=await this.internalRequest("solana_signTransaction",{transaction:r,pubkey:this.getAccount(!0).address,...this.getRawRPCParams(e)});if("signature"in n){const i=Zn.decode(n.signature);return e.addSignature(new dt(this.getAccount(!0).publicKey),Buffer.from(i)),e}const s=Buffer.from(n.transaction,"base64");return g0(e)?Ih.deserialize(new Uint8Array(s)):Oi.from(s)}async signAndSendTransaction(e,r){this.checkIfMethodIsSupported("solana_signAndSendTransaction");const n=this.serializeTransaction(e),s=await this.internalRequest("solana_signAndSendTransaction",{transaction:n,pubkey:this.getAccount(!0).address,sendOptions:r});return this.emit("pendingTransaction",void 0),s.signature}async sendTransaction(e,r,n){const s=await this.signTransaction(e),i=await r.sendRawTransaction(s.serialize(),n);return this.emit("pendingTransaction",void 0),i}async signAllTransactions(e){try{return this.checkIfMethodIsSupported("solana_signAllTransactions"),(await this.internalRequest("solana_signAllTransactions",{transactions:e.map(n=>this.serializeTransaction(n))})).transactions.map((n,s)=>{const i=e[s];if(!i)throw new Error("Invalid transactions response");const o=Buffer.from(n,"base64");return g0(i)?Ih.deserialize(new Uint8Array(o)):(this.emit("pendingTransaction",void 0),Oi.from(o))})}catch(r){if(r instanceof Bj){const n=[];for(const s of e)n.push(await this.signTransaction(s));return n}throw r}}request(e){return this.internalRequest(e.method,e.params)}async getAccounts(){const e=this.session?.namespaces.solana?.accounts||[];return Promise.resolve(e.map(r=>({namespace:this.chain,address:xs.parseCaipAddress(r).address,type:"eoa"})))}setDefaultChain(e){this.provider.setDefaultChain(e)}internalRequest(e,r){let s=this.chains.find(i=>this.getActiveChain()?.id===i.id)?.caipNetworkId;switch(s){case hu.CHAIN_IDS.Mainnet:this.sessionChains.includes(hu.CHAIN_IDS.Mainnet)||(s=hu.CHAIN_IDS.Deprecated_Mainnet);break;case hu.CHAIN_IDS.Devnet:this.sessionChains.includes(hu.CHAIN_IDS.Devnet)||(s=hu.CHAIN_IDS.Deprecated_Devnet);break}return this.provider?.request({method:e,params:r},s)}get sessionChains(){return po.getChainsFromNamespaces(this.session?.namespaces)}serializeTransaction(e){return Buffer.from(new Uint8Array(e.serialize({verifySignatures:!1}))).toString("base64")}getAccount(e){const r=this.session?.namespaces.solana?.accounts[0];if(!r){if(e)throw new Error("Account not found");return}const n=r.split(":")[2];if(!n){if(e)throw new Error("Address not found");return}return{address:n,publicKey:Zn.decode(n)}}getRawRPCParams(e){return g0(e)?{}:{feePayer:e.feePayer?.toBase58()??"",instructions:e.instructions.map(r=>({data:Zn.encode(new Uint8Array(r.data)),keys:r.keys.map(n=>({isWritable:n.isWritable,isSigner:n.isSigner,pubkey:n.pubkey.toBase58()})),programId:r.programId.toBase58()})),recentBlockhash:e.recentBlockhash??""}}checkIfMethodIsSupported(e){if(!this.session?.namespaces.solana?.methods.includes(e))throw new Bj(e)}}mO=new WeakMap;const Lb=Dn({connection:null}),Ng={state:Lb,subscribeKey(t,e){return ui(Lb,t,e)},subscribe(t){return ci(Lb,()=>t(Lb))},setConnection(t){Lb.connection=iy(t)}},Bl=new dt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),Mj=new dt("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),Bk=new dt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new dt("So11111111111111111111111111111111111111112");new dt("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const Uk=t=>{const e=t.decode.bind(t),r=t.encode.bind(t);return{decode:e,encode:r}};var dp={},Dj;function I8e(){if(Dj)return dp;Dj=1,Object.defineProperty(dp,"__esModule",{value:!0});function t(s){{const i=Buffer.from(s);i.reverse();const o=i.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}dp.toBigIntLE=t;function e(s){{const i=s.toString("hex");return i.length===0?BigInt(0):BigInt(`0x${i}`)}}dp.toBigIntBE=e;function r(s,i){{const o=s.toString(16),a=Buffer.from(o.padStart(i*2,"0").slice(0,i*2),"hex");return a.reverse(),a}}dp.toBufferLE=r;function n(s,i){{const o=s.toString(16);return Buffer.from(o.padStart(i*2,"0").slice(0,i*2),"hex")}}return dp.toBufferBE=n,dp}var jj=I8e();const T8e=t=>e=>{const r=te.blob(t,e),{encode:n,decode:s}=Uk(r),i=r;return i.decode=(o,a)=>{const c=s(o,a);return jj.toBigIntLE(Buffer.from(c))},i.encode=(o,a,c)=>{const u=jj.toBufferLE(o,t);return n(u,a,c)},i},N1=T8e(8),_re=t=>{const e=te.u8(t),{encode:r,decode:n}=Uk(e),s=e;return s.decode=(i,o)=>!!n(i,o),s.encode=(i,o,a)=>{const c=Number(i);return r(c,o,a)},s},Ti=t=>{const e=te.blob(32,t),{encode:r,decode:n}=Uk(e),s=e;return s.decode=(i,o)=>{const a=n(i,o);return new dt(a)},s.encode=(i,o,a)=>{const c=i.toBuffer();return r(c,o,a)},s};class Gy extends Error{constructor(e){super(e)}}class j6 extends Gy{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class N8e extends Gy{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class Are extends Gy{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class P1 extends Gy{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class P8e extends Gy{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class R8e extends Gy{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var yO;(function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",t[t.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",t[t.PausableExtension=44]="PausableExtension"})(yO||(yO={}));var L6;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Mint=1]="Mint",t[t.Account=2]="Account"})(L6||(L6={}));const xre=1,O8e=te.struct([te.u8("m"),te.u8("n"),_re("isInitialized"),Ti("signer1"),Ti("signer2"),Ti("signer3"),Ti("signer4"),Ti("signer5"),Ti("signer6"),Ti("signer7"),Ti("signer8"),Ti("signer9"),Ti("signer10"),Ti("signer11")]),Cre=O8e.span;var F6;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initialized=1]="Initialized",t[t.Frozen=2]="Frozen"})(F6||(F6={}));const Sre=te.struct([Ti("mint"),Ti("owner"),N1("amount"),te.u32("delegateOption"),Ti("delegate"),te.u8("state"),te.u32("isNativeOption"),N1("isNative"),N1("delegatedAmount"),te.u32("closeAuthorityOption"),Ti("closeAuthority")]),ch=Sre.span;async function Lj(t,e,r,n=Bl){const s=await t.getAccountInfo(e,r);return k8e(e,s,n)}function k8e(t,e,r=Bl){if(!e)throw new j6;if(!e.owner.equals(r))throw new Are;if(e.data.length<ch)throw new P1;const n=Sre.decode(e.data.slice(0,ch));let s=Buffer.alloc(0);if(e.data.length>ch){if(e.data.length===Cre)throw new P1;if(e.data[ch]!=L6.Account)throw new N8e;s=e.data.slice(ch+xre)}return{address:t,mint:n.mint,owner:n.owner,amount:n.amount,delegate:n.delegateOption?n.delegate:null,delegatedAmount:n.delegatedAmount,isInitialized:n.state!==F6.Uninitialized,isFrozen:n.state===F6.Frozen,isNative:!!n.isNativeOption,rentExemptReserve:n.isNativeOption?n.isNative:null,closeAuthority:n.closeAuthorityOption?n.closeAuthority:null,tlvData:s}}function B8e(t,e,r){if(r.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const n of r)t.push({pubkey:n instanceof dt?n:n.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}const Fj=te.struct([te.u8("instruction"),N1("amount"),te.u8("decimals")]);function U8e(t,e,r,n,s,i,o=[],a=Bl){const c=B8e([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0}],n,o),u=Buffer.alloc(Fj.span);return Fj.encode({instruction:yO.TransferChecked,amount:BigInt(s),decimals:i},u),new Pi({keys:c,programId:a,data:u})}const Ire=te.struct([te.u32("mintAuthorityOption"),Ti("mintAuthority"),N1("supply"),te.u8("decimals"),_re("isInitialized"),te.u32("freezeAuthorityOption"),Ti("freezeAuthority")]),tP=Ire.span;async function M8e(t,e,r,n=Bl){const s=await t.getAccountInfo(e,r);return D8e(e,s,n)}function D8e(t,e,r=Bl){if(!e)throw new j6;if(!e.owner.equals(r))throw new Are;if(e.data.length<tP)throw new P1;const n=Ire.decode(e.data.slice(0,tP));let s=Buffer.alloc(0);if(e.data.length>tP){if(e.data.length<=ch)throw new P1;if(e.data.length===Cre)throw new P1;if(e.data[ch]!=L6.Mint)throw new P8e;s=e.data.slice(ch+xre)}return{address:t,mintAuthority:n.mintAuthorityOption?n.mintAuthority:null,supply:n.supply,decimals:n.decimals,isInitialized:n.isInitialized,freezeAuthority:n.freezeAuthorityOption?n.freezeAuthority:null,tlvData:s}}function $j(t,e,r=!1,n=Bl,s=Bk){if(!r&&!dt.isOnCurve(e.toBuffer()))throw new R8e;const[i]=dt.findProgramAddressSync([e.toBuffer(),n.toBuffer(),t.toBuffer()],s);return i}function j8e(t,e,r,n,s=Bl,i=Bk){return L8e(t,e,r,n,Buffer.alloc(0),s,i)}function L8e(t,e,r,n,s,i=Bl,o=Bk){const a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:xy.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return new Pi({keys:a,programId:o,data:s})}async function F8e(t,e){const r=await t.getAccountInfo(e);if(!r)throw new Error("Mint account not found");if(r.owner.equals(Bl))return Bl;if(r.owner.equals(Mj))return Mj;throw new Error("Unknown mint owner program")}async function $8e({provider:t,to:e,amount:r,tokenMint:n,connection:s}){if(!t.publicKey)throw new Error("No public key found");if(r<=0)throw new Error("Amount must be greater than 0");try{const i=t.publicKey,o=new dt(e),a=new dt(n),c=await F8e(s,a),l=(await M8e(s,a,void 0,c)).decimals;if(l<0)throw new Error("Invalid token decimals");const d=Math.floor(r*10**l),f=$j(a,i,!1,c),p=$j(a,o,!1,c);try{if((await Lj(s,f,void 0,c)).amount<BigInt(d))throw new Error("Insufficient token balance")}catch(C){throw C instanceof j6?new Error("Sender does not have a token account for this mint"):C}let g=!1;try{await Lj(s,p,void 0,c)}catch(C){if(C instanceof j6)g=!0;else throw C}const h=[],y=g?eP.UNIT_LIMIT_WITH_ATA_CREATION:eP.UNIT_LIMIT_TRANSFER_ONLY;h.push(Hv.setComputeUnitPrice({microLamports:eP.UNIT_PRICE_MICRO_LAMPORTS}),Hv.setComputeUnitLimit({units:y})),g&&h.push(j8e(i,p,o,a,c)),h.push(U8e(f,a,p,i,d,l,[],c));const{blockhash:E,lastValidBlockHeight:S}=await s.getLatestBlockhash();return new Oi({feePayer:i,blockhash:E,lastValidBlockHeight:S}).add(...h)}catch(i){throw new Error(`Failed to create SPL token transaction: ${i instanceof Error?i.message:"Unknown error"}`)}}const qj={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT:500};async function Hj({provider:t,to:e,value:r,connection:n}){if(!t.publicKey)throw Error("No public key found");const s=new dt(e),i=Math.floor(r*u8e),{blockhash:o,lastValidBlockHeight:a}=await n.getLatestBlockhash(),c=[Hv.setComputeUnitPrice({microLamports:qj.UNIT_PRICE_MICRO_LAMPORTS}),Hv.setComputeUnitLimit({units:qj.UNIT_LIMIT}),xy.transfer({fromPubkey:t.publicKey,toPubkey:s,lamports:i})];return new Oi({feePayer:t.publicKey,blockhash:o,lastValidBlockHeight:a}).add(...c)}var q8e=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},H8e=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},vI;let Fb;const rT=new Set;function z8e(t){R1=void 0,rT.add(t)}function W8e(t){R1=void 0,rT.delete(t)}const Dm={};function V8e(){if(Fb||(Fb=Object.freeze({register:zj,get:G8e,on:K8e}),typeof window>"u"))return Fb;const t=Object.freeze({register:zj});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new Z8e(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Fb}function zj(...t){return t=t.filter(e=>!rT.has(e)),t.length?(t.forEach(e=>z8e(e)),Dm.register?.forEach(e=>Wj(()=>e(...t))),function(){t.forEach(r=>W8e(r)),Dm.unregister?.forEach(r=>Wj(()=>r(...t)))}):()=>{}}let R1;function G8e(){return R1||(R1=[...rT]),R1}function K8e(t,e){return Dm[t]?.push(e)||(Dm[t]=[e]),function(){Dm[t]=Dm[t]?.filter(n=>e!==n)}}function Wj(t){try{t()}catch(e){console.error(e)}}class Z8e extends Event{get detail(){return q8e(this,vI,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),vI.set(this,void 0),H8e(this,vI,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}vI=new WeakMap;function Y8e(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const Vj={"solana:mainnet":kk,"solana:testnet":Ere,"solana:devnet":vre};class J8e extends tT{constructor({wallet:e,getActiveChain:r,requestedChains:n}){super(),this.type="ANNOUNCED",this.chain=ae.CHAIN.SOLANA,this.provider=this,this.wallet=e,this.getActiveChain=r,this.requestedChains=n,this.name=Re.getConnectorName(e.name)||e.name,this.id=ii.ConnectorExplorerIds[this.name]||this.name,this.explorerId=ii.ConnectorExplorerIds[this.name],this.imageUrl=this.wallet.icon,this.bindEvents()}get chains(){return this.wallet.chains.map(e=>this.requestedChains.find(r=>r.id===e||r.id===Vj[e]?.id)).filter(Boolean)}get publicKey(){const e=this.getAccount(!1);if(e)return new dt(e.publicKey)}async connect(){await this.getWalletFeature(bre).connect().catch(s=>{throw new My(s)});const r=this.getAccount(!0),n=new dt(r.publicKey);return this.emit("connect",n),r.address}async disconnect(){await this.getWalletFeature(p8e).disconnect(),this.emit("disconnect",void 0)}async signMessage(e){const r=this.getWalletFeature(h8e),n=this.getAccount(!0),[s]=await r.signMessage({message:e,account:n});if(!s)throw new f8e("Empty result");return s.signature}async signTransaction(e){const r=this.getWalletFeature(gO),n=this.getAccount(!0),s=this.serializeTransaction(e),[i]=await r.signTransaction({account:n,transaction:new Uint8Array(s),chain:this.getActiveChainName()});if(!i)throw new Oj("Empty result");return this.emit("pendingTransaction",void 0),g0(e)?Ih.deserialize(i.signedTransaction):Oi.from(i.signedTransaction)}async signAndSendTransaction(e,r){const n=this.getWalletFeature(yre),s=this.getAccount(!0),[i]=await n.signAndSendTransaction({account:s,transaction:new Uint8Array(this.serializeTransaction(e)),options:{...r,preflightCommitment:Y8e(r?.preflightCommitment)},chain:this.getActiveChainName()});if(!i)throw new d8e("Empty result");return this.emit("pendingTransaction",void 0),Zn.encode(i.signature)}async sendTransaction(e,r,n){const s=await this.signTransaction(e);return await r.sendRawTransaction(s.serialize(),n)}async signAllTransactions(e){const r=this.getWalletFeature(gO),n=this.getAccount(!0),s=this.getActiveChainName();return(await r.signTransaction(...e.map(o=>({transaction:new Uint8Array(this.serializeTransaction(o)),account:n,chain:s})))).map(({signedTransaction:o},a)=>{const c=e[a];if(!c)throw new Oj("Invalid transaction signature response");return this.emit("pendingTransaction",void 0),g0(c)?Ih.deserialize(o):Oi.from(o)})}async request(e){return Promise.reject(new kj("request"))}async getAccounts(){return Promise.resolve(this.wallet.accounts.map(e=>({namespace:this.chain,address:e.address,type:"eoa"})))}serializeTransaction(e){return e.serialize({verifySignatures:!1})}getAccount(e){const r=this.wallet.accounts[0];if(e&&!r)throw new l8e;return r}getWalletFeature(e){if(!(e in this.wallet.features))throw new kj(e);return this.wallet.features[e]}getActiveChainName(){const e=Object.entries(Vj).find(([,r])=>r.id===this.getActiveChain()?.id);if(!e)throw new Error("Invalid chain id");return e[0]}bindEvents(){this.getWalletFeature(wre).on("change",r=>{if(r.accounts){const n=r.accounts[0];n&&this.emit("accountsChanged",new dt(n.publicKey))}})}}const{get:X8e,on:Gj}=V8e();let Of=[];function Q8e(t,e,r){const n=[Gj("register",(...s)=>{Of=[...Of,...Kj(s,t,e)],r(...Of)}),Gj("unregister",(...s)=>{Of=Of.filter(i=>s.some(o=>o.name===i.wallet.name)),r(...Of)})];return Of=Kj(X8e(),t,e),r(...Of),()=>n.forEach(s=>s())}function Kj(t,e,r){return t.filter(n=>n.name!=="WalletConnect"&&g8e(n)).map(n=>new J8e({wallet:n,requestedChains:e,getActiveChain:r}))}const eOe=[ae.CONNECTOR_ID.AUTH,ae.CONNECTOR_ID.WALLET_CONNECT],tOe=[{pattern:/Attempt to debit an account but found no record of a prior credit/iu,message:"Not enough SOL to cover fees or rent"},{pattern:/Insufficient funds for fee/iu,message:"Not enough SOL to cover fees or rent"},{pattern:/Transfer: insufficient lamports/iu,message:"Not enough SOL to cover this transfer"}];class rOe extends H5{constructor(e={}){super({adapterType:ae.ADAPTER_TYPES.SOLANA,namespace:ae.CHAIN.SOLANA}),this.balancePromises={},this.connectionSettings=e.connectionSettings||"confirmed",this.wallets=e.wallets,this.registerWalletStandard=e.registerWalletStandard}construct(e){super.construct(e);const r=Ae.getActiveCaipNetworkId(),s=(e.networks?.find(i=>i.caipNetworkId===r)||e.networks?.[0])?.rpcUrls.default.http[0];s&&Ng.setConnection(new jb(s,this.connectionSettings))}setAuthProvider(e){this.addConnector(new y8e({w3mFrameProvider:e,getActiveChain:()=>J.getCaipNetworkByNamespace(this.namespace),chains:this.getCaipNetworks()}))}syncConnectors(){we.state.projectId||Ci.open(Si.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");const e=()=>J.getActiveCaipNetwork(this.namespace);ke.isClient()&&"coinbaseSolana"in window&&this.addConnector(new C8e({provider:window.coinbaseSolana,chains:this.getCaipNetworks(),getActiveChain:e})),Q8e(this.getCaipNetworks(),e,this.addConnector.bind(this))}async writeContract(){return Promise.resolve({hash:""})}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async walletGetAssets(e){return Promise.resolve({})}async getAccounts(e){const r=this.connectors.find(n=>n.id===e.id);return r?{accounts:await r.getAccounts()}:{accounts:[]}}async signMessage(e){const r=e.provider;if(!r)throw new Error("connectionControllerClient:signMessage - provider is undefined");const n=await r.signMessage(new TextEncoder().encode(e.message));return{signature:Zn.encode(n)}}async estimateGas(e){const r=Ng.state.connection;if(!r||!e.provider)throw new Error("Connection is not set");const s=await(await Hj({provider:e.provider,connection:r,to:"11111111111111111111111111111111",value:1})).getEstimatedFee(r);return{gas:BigInt(s||0)}}async sendTransaction(e){const r=Ng.state.connection;if(!r||!e.provider)throw new Error("Connection is not set");const n=e.provider,s=e.tokenMint?await $8e({provider:n,connection:r,to:e.to,amount:Number(e.value),tokenMint:e.tokenMint}):await Hj({provider:n,connection:r,to:e.to,value:Number.isNaN(Number(e.value))?0:Number(e.value)}),i=await n.sendTransaction(s,r).catch(o=>{if(o instanceof dO){const a=o?.transactionError?.message??o?.message??"",c=o?.logs?.join(" ")??"",u=`${a} ${c}`;for(const{pattern:l,message:d}of tOe)if(l.test(u))throw new Error(d)}throw o});return await new Promise(o=>{const a=setInterval(async()=>{(await r.getSignatureStatus(i))?.value&&(clearInterval(a),o())},1e3)}),{hash:i}}parseUnits(){return 0n}formatUnits(){return""}async connect(e){const r=this.connectors.find(u=>u.id===e.id);if(!r)throw new Error("Provider not found");const n={...r,...e.id===ae.CONNECTOR_ID.AUTH?{provider:r}:{}},s=e.rpcUrl||this.getCaipNetworks()?.find(u=>u.id===e.chainId)?.rpcUrls.default.http[0];if(!s)throw new Error(`RPC URL not found for chainId: ${e.chainId}`);const i=this.getConnection({address:e.address,connectorId:r.id,connections:this.connections,connectors:this.connectors});if(i?.account)return this.emit("accountChanged",{address:i.account.address,chainId:i.caipNetwork?.id,connector:n}),{id:r.id,address:i.account.address,chainId:e.chainId,provider:r,type:r.type};const o=await r.connect({chainId:e.chainId,socialUri:e.socialUri});Ng.setConnection(new jb(s,this.connectionSettings)),this.emit("accountChanged",{address:o,chainId:e.chainId,connector:n});const a=r.id===ae.CONNECTOR_ID.AUTH,c=this.getCaipNetworks()?.find(u=>u.id===e.chainId);return this.addConnection({connectorId:r.id,accounts:[{address:o}],caipNetwork:c,auth:a?{name:Ae.getConnectedSocialProvider(),username:Ae.getConnectedSocialUsername()}:void 0}),r.id!==ae.CONNECTOR_ID.WALLET_CONNECT&&this.listenSolanaProviderEvents(r.id,r.provider),{id:r.id,address:o,chainId:e.chainId,provider:r,type:r.type}}async getBalance(e){const r=e.address,n=this.getCaipNetworks()?.find(c=>c.id===e.chainId);if(!r)return Promise.resolve({balance:"0.00",symbol:"SOL"});const s=new jb(n?.rpcUrls?.default?.http?.[0],this.connectionSettings),i=`${n?.caipNetworkId}:${e.address}`,o=this.balancePromises[i];if(o)return o;const a=Ae.getNativeBalanceCacheForCaipAddress(i);return a?{balance:a.balance,symbol:a.symbol}:(this.balancePromises[i]=new Promise(async c=>{try{const l=(await s.getBalance(new dt(r))/hu.LAMPORTS_PER_SOL).toString();if(Ae.updateNativeBalanceCache({caipAddress:i,balance:l,symbol:e.caipNetwork?.nativeCurrency.symbol||"SOL",timestamp:Date.now()}),!e.caipNetwork)throw new Error("caipNetwork is required");c({balance:l,symbol:e.caipNetwork?.nativeCurrency.symbol})}catch{c({balance:"0.00",symbol:"SOL"})}}).finally(()=>{delete this.balancePromises[i]}),this.balancePromises[i]||{balance:"0.00",symbol:"SOL"})}async switchNetwork(e){await super.switchNetwork(e);const{caipNetwork:r}=e;r?.rpcUrls?.default?.http?.[0]&&Ng.setConnection(new jb(r.rpcUrls.default.http[0],this.connectionSettings))}listenProviderEvents(){}listenSolanaProviderEvents(e,r){if(eOe.includes(e))return;const n=i=>{this.onAccountsChanged([i.toBase58()],e,!1)},s=()=>this.onDisconnect(e);this.providerHandlers[e]||(r.on("disconnect",s),r.on("accountsChanged",n),r.on("connect",n),this.providerHandlers[e]={provider:r,disconnect:s,accountsChanged:n,chainChanged:()=>{}})}async setUniversalProvider(e){this.universalProvider=e;const r=ae.CONNECTOR_ID.WALLET_CONNECT;po.listenWcProvider({universalProvider:e,namespace:ae.CHAIN.SOLANA,onConnect:s=>this.onConnect(s,r),onDisconnect:()=>this.onDisconnect(r),onAccountsChanged:s=>this.onAccountsChanged(s,r,!1)});const n=new Uj({provider:e,chains:this.getCaipNetworks(),getActiveChain:()=>J.getCaipNetworkByNamespace(this.namespace)});if(this.registerWalletStandard){const{SolanaWalletConnectStandardWallet:s}=await Pr(async()=>{const{SolanaWalletConnectStandardWallet:i}=await import("./wallet-standard-BX057pKl.js");return{SolanaWalletConnectStandardWallet:i}},[]);s.register(e)}return this.addConnector(n),Promise.resolve()}async connectWalletConnect(e){const r=await super.connectWalletConnect(e),n=this.getCaipNetworks()?.find(i=>i.id===e)?.rpcUrls.default.http[0],s=new jb(n,this.connectionSettings);return Ng.setConnection(s),r}async disconnect(e){if(e.id){const r=this.connectors.find(s=>s.id===e.id);if(!r)throw new Error("Provider not found");const n=this.connections.find(s=>ho.isLowerCaseMatch(s.connectorId,e.id));return await r.provider.disconnect(),this.deleteConnection(r.id),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:n?[n]:[]}}return this.disconnectAll()}async syncConnection(e){return this.connect({...e,type:""})}async syncConnections({connectToFirstConnector:e,caipNetwork:r}){await Promise.all(this.connectors.filter(n=>{const{hasDisconnected:s,hasConnected:i}=ho.getConnectorStorageInfo(n.id,this.namespace);return!s&&i}).map(async n=>{if(n.id===ae.CONNECTOR_ID.WALLET_CONNECT){const s=po.getWalletConnectAccounts(this.universalProvider,this.namespace);s.length>0&&this.addConnection({connectorId:n.id,accounts:s.map(i=>({address:i.address})),caipNetwork:r})}else{const s=await n.connect({chainId:r?.id});s&&(this.addConnection({connectorId:n.id,accounts:[{address:s}],caipNetwork:r}),this.listenSolanaProviderEvents(n.id,n.provider))}})),e&&this.emitFirstAvailableConnection()}getWalletConnectProvider(e){return new Uj({provider:e.provider,chains:e.caipNetworks,getActiveChain:()=>J.getCaipNetworkByNamespace(this.namespace)})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async r=>{const n=this.connectors.find(s=>ho.isLowerCaseMatch(s.id,r.connectorId));if(!n)throw new Error("Connector not found");return await this.disconnect({id:n.id}),r}))}}}const nOe="logger/5.8.0";let Zj=!1,Yj=!1;const EI={debug:1,default:2,info:2,warning:3,error:4,off:5};let Jj=EI.default,rP=null;function sOe(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("Ã©".normalize("NFD")!=="eÌ")throw new Error("broken implementation")}catch(t){return t.message}return null}const Xj=sOe();var $6;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})($6||($6={}));var Uc;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(Uc||(Uc={}));const Qj="0123456789abcdef";class ue{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();EI[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(Jj>EI[n])&&console.log.apply(console,r)}debug(...e){this._log(ue.levels.DEBUG,e)}info(...e){this._log(ue.levels.INFO,e)}warn(...e){this._log(ue.levels.WARNING,e)}makeError(e,r,n){if(Yj)return this.makeError("censored error",r,{});r||(r=ue.errors.UNKNOWN_ERROR),n||(n={});const s=[];Object.keys(n).forEach(c=>{const u=n[c];try{if(u instanceof Uint8Array){let l="";for(let d=0;d<u.length;d++)l+=Qj[u[d]>>4],l+=Qj[u[d]&15];s.push(c+"=Uint8Array(0x"+l+")")}else s.push(c+"="+JSON.stringify(u))}catch{s.push(c+"="+JSON.stringify(n[c].toString()))}}),s.push(`code=${r}`),s.push(`version=${this.version}`);const i=e;let o="";switch(r){case Uc.NUMERIC_FAULT:{o="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":o+="-"+c;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case Uc.CALL_EXCEPTION:case Uc.INSUFFICIENT_FUNDS:case Uc.MISSING_NEW:case Uc.NONCE_EXPIRED:case Uc.REPLACEMENT_UNDERPRICED:case Uc.TRANSACTION_REPLACED:case Uc.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),s.length&&(e+=" ("+s.join(", ")+")");const a=new Error(e);return a.reason=i,a.code=r,Object.keys(n).forEach(function(c){a[c]=n[c]}),a}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,ue.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,s){e||this.throwError(r,n,s)}assertArgument(e,r,n,s){e||this.throwArgumentError(r,n,s)}checkNormalize(e){Xj&&this.throwError("platform missing String.prototype.normalize",ue.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Xj})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,ue.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,ue.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,ue.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,ue.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",ue.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",ue.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",ue.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return rP||(rP=new ue(nOe)),rP}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",ue.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Zj){if(!e)return;this.globalLogger().throwError("error censorship permanent",ue.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Yj=!!e,Zj=!!r}static setLogLevel(e){const r=EI[e.toLowerCase()];if(r==null){ue.globalLogger().warn("invalid log level - "+e);return}Jj=r}static from(e){return new ue(e)}}ue.errors=Uc;ue.levels=$6;const iOe=Object.freeze(Object.defineProperty({__proto__:null,get ErrorCode(){return Uc},get LogLevel(){return $6},Logger:ue},Symbol.toStringTag,{value:"Module"})),oOe="bytes/5.8.0",fs=new ue(oOe);function Tre(t){return!!t.toHexString}function ey(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return ey(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function zE(t){return Er(t)&&!(t.length%2)||Y0(t)}function eL(t){return typeof t=="number"&&t==t&&t%1===0}function Y0(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!eL(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!eL(r)||r<0||r>=256)return!1}return!0}function Oe(t,e){if(e||(e={}),typeof t=="number"){fs.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),ey(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Tre(t)&&(t=t.toHexString()),Er(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":fs.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let s=0;s<r.length;s+=2)n.push(parseInt(r.substring(s,s+2),16));return ey(new Uint8Array(n))}return Y0(t)?ey(new Uint8Array(t)):fs.throwArgumentError("invalid arrayify value","value",t)}function Mn(t){const e=t.map(s=>Oe(s)),r=e.reduce((s,i)=>s+i.length,0),n=new Uint8Array(r);return e.reduce((s,i)=>(n.set(i,s),s+i.length),0),ey(n)}function Il(t){let e=Oe(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function O1(t,e){t=Oe(t),t.length>e&&fs.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),ey(r)}function Er(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const nP="0123456789abcdef";function je(t,e){if(e||(e={}),typeof t=="number"){fs.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=nP[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Tre(t))return t.toHexString();if(Er(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":fs.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Y0(t)){let r="0x";for(let n=0;n<t.length;n++){let s=t[n];r+=nP[(s&240)>>4]+nP[s&15]}return r}return fs.throwArgumentError("invalid hexlify value","value",t)}function Ul(t){if(typeof t!="string")t=je(t);else if(!Er(t)||t.length%2)return null;return(t.length-2)/2}function As(t,e,r){return typeof t!="string"?t=je(t):(!Er(t)||t.length%2)&&fs.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function No(t){let e="0x";return t.forEach(r=>{e+=je(r).substring(2)}),e}function nT(t){const e=Nre(je(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function Nre(t){typeof t!="string"&&(t=je(t)),Er(t)||fs.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function Nn(t,e){for(typeof t!="string"?t=je(t):Er(t)||fs.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&fs.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function J0(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(zE(t)){let r=Oe(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=je(r.slice(0,32)),e.s=je(r.slice(32,64))):r.length===65?(e.r=je(r.slice(0,32)),e.s=je(r.slice(32,64)),e.v=r[64]):fs.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:fs.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=je(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const s=O1(Oe(e._vs),32);e._vs=je(s);const i=s[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=i:e.recoveryParam!==i&&fs.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),s[0]&=127;const o=je(s);e.s==null?e.s=o:e.s!==o&&fs.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?fs.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const s=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==s&&fs.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!Er(e.r)?fs.throwArgumentError("signature missing or invalid r","signature",t):e.r=Nn(e.r,32),e.s==null||!Er(e.s)?fs.throwArgumentError("signature missing or invalid s","signature",t):e.s=Nn(e.s,32);const r=Oe(e.s);r[0]>=128&&fs.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=je(r);e._vs&&(Er(e._vs)||fs.throwArgumentError("signature invalid _vs","signature",t),e._vs=Nn(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&fs.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function bO(t){return t=J0(t),je(Mn([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}const aOe=Object.freeze(Object.defineProperty({__proto__:null,arrayify:Oe,concat:Mn,hexConcat:No,hexDataLength:Ul,hexDataSlice:As,hexStripZeros:Nre,hexValue:nT,hexZeroPad:Nn,hexlify:je,isBytes:Y0,isBytesLike:zE,isHexString:Er,joinSignature:bO,splitSignature:J0,stripZeros:Il,zeroPad:O1},Symbol.toStringTag,{value:"Module"})),Pre="bignumber/5.8.0";var zv=Ft.BN;const Rd=new ue(Pre),sP={},tL=9007199254740991;function cOe(t){return t!=null&&(Ue.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||Er(t)||typeof t=="bigint"||Y0(t))}let rL=!1;class Ue{constructor(e,r){e!==sP&&Rd.throwError("cannot call constructor directly; use BigNumber.from",ue.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Vo(lr(this).fromTwos(e))}toTwos(e){return Vo(lr(this).toTwos(e))}abs(){return this._hex[0]==="-"?Ue.from(this._hex.substring(1)):this}add(e){return Vo(lr(this).add(lr(e)))}sub(e){return Vo(lr(this).sub(lr(e)))}div(e){return Ue.from(e).isZero()&&Ac("division-by-zero","div"),Vo(lr(this).div(lr(e)))}mul(e){return Vo(lr(this).mul(lr(e)))}mod(e){const r=lr(e);return r.isNeg()&&Ac("division-by-zero","mod"),Vo(lr(this).umod(r))}pow(e){const r=lr(e);return r.isNeg()&&Ac("negative-power","pow"),Vo(lr(this).pow(r))}and(e){const r=lr(e);return(this.isNegative()||r.isNeg())&&Ac("unbound-bitwise-result","and"),Vo(lr(this).and(r))}or(e){const r=lr(e);return(this.isNegative()||r.isNeg())&&Ac("unbound-bitwise-result","or"),Vo(lr(this).or(r))}xor(e){const r=lr(e);return(this.isNegative()||r.isNeg())&&Ac("unbound-bitwise-result","xor"),Vo(lr(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&Ac("negative-width","mask"),Vo(lr(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Ac("negative-width","shl"),Vo(lr(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Ac("negative-width","shr"),Vo(lr(this).shrn(e))}eq(e){return lr(this).eq(lr(e))}lt(e){return lr(this).lt(lr(e))}lte(e){return lr(this).lte(lr(e))}gt(e){return lr(this).gt(lr(e))}gte(e){return lr(this).gte(lr(e))}isNegative(){return this._hex[0]==="-"}isZero(){return lr(this).isZero()}toNumber(){try{return lr(this).toNumber()}catch{Ac("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Rd.throwError("this platform does not support BigInt",ue.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?rL||(rL=!0,Rd.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Rd.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",ue.errors.UNEXPECTED_ARGUMENT,{}):Rd.throwError("BigNumber.toString does not accept parameters",ue.errors.UNEXPECTED_ARGUMENT,{})),lr(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Ue)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new Ue(sP,Wv(e)):e.match(/^-?[0-9]+$/)?new Ue(sP,Wv(new zv(e))):Rd.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Ac("underflow","BigNumber.from",e),(e>=tL||e<=-tL)&&Ac("overflow","BigNumber.from",e),Ue.from(String(e));const r=e;if(typeof r=="bigint")return Ue.from(r.toString());if(Y0(r))return Ue.from(je(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return Ue.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(Er(n)||n[0]==="-"&&Er(n.substring(1))))return Ue.from(n)}return Rd.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Wv(t){if(typeof t!="string")return Wv(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&Rd.throwArgumentError("invalid hex","value",t),t=Wv(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function Vo(t){return Ue.from(Wv(t))}function lr(t){const e=Ue.from(t).toHexString();return e[0]==="-"?new zv("-"+e.substring(3),16):new zv(e.substring(2),16)}function Ac(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),Rd.throwError(t,ue.errors.NUMERIC_FAULT,n)}function uOe(t){return new zv(t,36).toString(16)}function lOe(t){return new zv(t,16).toString(36)}const Po=new ue(Pre),k1={},Rre=Ue.from(0),Ore=Ue.from(-1);function kre(t,e,r,n){const s={fault:e,operation:r};return n!==void 0&&(s.value=n),Po.throwError(t,ue.errors.NUMERIC_FAULT,s)}let B1="0";for(;B1.length<256;)B1+=B1;function Mk(t){if(typeof t!="number")try{t=Ue.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+B1.substring(0,t):Po.throwArgumentError("invalid decimal size","decimals",t)}function _I(t,e){e==null&&(e=0);const r=Mk(e);t=Ue.from(t);const n=t.lt(Rre);n&&(t=t.mul(Ore));let s=t.mod(r).toString();for(;s.length<r.length-1;)s="0"+s;s=s.match(/^([0-9]*[1-9]|0)(0*)/)[1];const i=t.div(r).toString();return r.length===1?t=i:t=i+"."+s,n&&(t="-"+t),t}function cl(t,e){e==null&&(e=0);const r=Mk(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&Po.throwArgumentError("invalid decimal value","value",t);const n=t.substring(0,1)==="-";n&&(t=t.substring(1)),t==="."&&Po.throwArgumentError("missing value","value",t);const s=t.split(".");s.length>2&&Po.throwArgumentError("too many decimal points","value",t);let i=s[0],o=s[1];for(i||(i="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>r.length-1&&kre("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<r.length-1;)o+="0";const a=Ue.from(i),c=Ue.from(o);let u=a.mul(r).add(c);return n&&(u=u.mul(Ore)),u}class ty{constructor(e,r,n,s){e!==k1&&Po.throwError("cannot use FixedFormat constructor; use FixedFormat.from",ue.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=n,this.decimals=s,this.name=(r?"":"u")+"fixed"+String(n)+"x"+String(s),this._multiplier=Mk(s),Object.freeze(this)}static from(e){if(e instanceof ty)return e;typeof e=="number"&&(e=`fixed128x${e}`);let r=!0,n=128,s=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")r=!1;else{const i=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);i||Po.throwArgumentError("invalid fixed format","format",e),r=i[1]!=="u",n=parseInt(i[2]),s=parseInt(i[3])}}else if(e){const i=(o,a,c)=>e[o]==null?c:(typeof e[o]!==a&&Po.throwArgumentError("invalid fixed format ("+o+" not "+a+")","format."+o,e[o]),e[o]);r=i("signed","boolean",r),n=i("width","number",n),s=i("decimals","number",s)}return n%8&&Po.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),s>80&&Po.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",s),new ty(k1,r,n,s)}}class xi{constructor(e,r,n,s){e!==k1&&Po.throwError("cannot use FixedNumber constructor; use FixedNumber.from",ue.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=s,this._hex=r,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Po.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const r=cl(this._value,this.format.decimals),n=cl(e._value,e.format.decimals);return xi.fromValue(r.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const r=cl(this._value,this.format.decimals),n=cl(e._value,e.format.decimals);return xi.fromValue(r.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const r=cl(this._value,this.format.decimals),n=cl(e._value,e.format.decimals);return xi.fromValue(r.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const r=cl(this._value,this.format.decimals),n=cl(e._value,e.format.decimals);return xi.fromValue(r.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=xi.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(r=r.subUnsafe(nL.toFormat(r.format))),r}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=xi.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(r=r.addUnsafe(nL.toFormat(r.format))),r}round(e){e==null&&(e=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(e<0||e>80||e%1)&&Po.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;const n=xi.from("1"+B1.substring(0,e),this.format),s=dOe.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(s).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Po.throwArgumentError("invalid byte width","width",e);const r=Ue.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Nn(r,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return xi.fromString(this._value,e)}static fromValue(e,r,n){return n==null&&r!=null&&!cOe(r)&&(n=r,r=null),r==null&&(r=0),n==null&&(n="fixed"),xi.fromString(_I(e,r),ty.from(n))}static fromString(e,r){r==null&&(r="fixed");const n=ty.from(r),s=cl(e,n.decimals);!n.signed&&s.lt(Rre)&&kre("unsigned value cannot be negative","overflow","value",e);let i=null;n.signed?i=s.toTwos(n.width).toHexString():(i=s.toHexString(),i=Nn(i,n.width/8));const o=_I(s,n.decimals);return new xi(k1,i,o,n)}static fromBytes(e,r){r==null&&(r="fixed");const n=ty.from(r);if(Oe(e).length>n.width/8)throw new Error("overflow");let s=Ue.from(e);n.signed&&(s=s.fromTwos(n.width));const i=s.toTwos((n.signed?0:1)+n.width).toHexString(),o=_I(s,n.decimals);return new xi(k1,i,o,n)}static from(e,r){if(typeof e=="string")return xi.fromString(e,r);if(Y0(e))return xi.fromBytes(e,r);try{return xi.fromValue(e,0,r)}catch(n){if(n.code!==ue.errors.INVALID_ARGUMENT)throw n}return Po.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const nL=xi.from(1),dOe=xi.from("0.5"),fOe="properties/5.8.0";var hOe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const q6=new ue(fOe);function xe(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function Iu(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function ps(t){return hOe(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const s=t[n];return Promise.resolve(s).then(i=>({key:n,value:i}))});return(yield Promise.all(e)).reduce((n,s)=>(n[s.key]=s.value,n),{})})}function Dk(t,e){(!t||typeof t!="object")&&q6.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||q6.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function Ds(t){const e={};for(const r in t)e[r]=t[r];return e}const pOe={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Bre(t){if(t==null||pOe[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!Bre(n))return!1}return!0}return q6.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function gOe(t){if(Bre(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>Ml(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&xe(e,r,Ml(n))}return e}return q6.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Ml(t){return gOe(t)}class jh{constructor(e){for(const r in e)this[r]=Ml(e[r])}}const mOe=Object.freeze(Object.defineProperty({__proto__:null,Description:jh,checkProperties:Dk,deepCopy:Ml,defineReadOnly:xe,getStatic:Iu,resolveProperties:ps,shallowCopy:Ds},Symbol.toStringTag,{value:"Module"})),WE="abi/5.8.0",_r=new ue(WE),T0={};let sL={calldata:!0,memory:!0,storage:!0},yOe={calldata:!0,memory:!0};function w2(t,e){if(t==="bytes"||t==="string"){if(sL[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&yOe[e])return!0;return(sL[e]||e==="payable")&&_r.throwArgumentError("invalid modifier","name",e),!1}function bOe(t,e){let r=t;function n(a){_r.throwArgumentError(`unexpected character at position ${a}`,"param",t)}t=t.replace(/\s/g," ");function s(a){let c={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(c.indexed=!1),c}let i={type:"",name:"",state:{allowType:!0}},o=i;for(let a=0;a<t.length;a++){let c=t[a];switch(c){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||n(a),o.state.allowType=!1,o.type=Cm(o.type),o.components=[s(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),w2(o.type,o.name)&&(o.name=""),o.type=Cm(o.type);let u=o;o=o.parent,o||n(a),delete u.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),w2(o.type,o.name)&&(o.name=""),o.type=Cm(o.type);let l=s(o.parent);o.parent.components.push(l),delete o.parent,o=l;break;case" ":o.state.allowType&&o.type!==""&&(o.type=Cm(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||n(a),o.indexed&&n(a),o.indexed=!0,o.name=""):w2(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(a),o.type+=c,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(a),o.type+=c,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=c,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=c,delete o.state.allowArray):o.state.readArray?o.type+=c:n(a)}}return o.parent&&_r.throwArgumentError("unexpected eof","param",t),delete i.state,o.name==="indexed"?(e||n(r.length-7),o.indexed&&n(r.length-7),o.indexed=!0,o.name=""):w2(o.type,o.name)&&(o.name=""),i.type=Cm(i.type),i}function AI(t,e){for(let r in e)xe(t,r,e[r])}const Rr=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),wOe=new RegExp(/^(.*)\[([0-9]*)\]$/);class Gs{constructor(e,r){e!==T0&&_r.throwError("use fromString",ue.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),AI(this,r);let n=this.type.match(wOe);n?AI(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:Gs.fromObject({type:n[1],components:this.components}),baseType:"array"}):AI(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Rr.sighash),Rr[e]||_r.throwArgumentError("invalid format type","format",e),e===Rr.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(n)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Rr.sighash&&(r+=this.type),r+="("+this.components.map(n=>n.format(e)).join(e===Rr.full?", ":",")+")"):r+=this.type,e!==Rr.sighash&&(this.indexed===!0&&(r+=" indexed"),e===Rr.full&&this.name&&(r+=" "+this.name)),r}static from(e,r){return typeof e=="string"?Gs.fromString(e,r):Gs.fromObject(e)}static fromObject(e){return Gs.isParamType(e)?e:new Gs(T0,{name:e.name||null,type:Cm(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(Gs.fromObject):null})}static fromString(e,r){function n(s){return Gs.fromObject({name:s.name,type:s.type,indexed:s.indexed,components:s.components})}return n(bOe(e,!!r))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function Vv(t,e){return EOe(t).map(r=>Gs.fromString(r,e))}class wl{constructor(e,r){e!==T0&&_r.throwError("use a static from method",ue.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),AI(this,r),this._isFragment=!0,Object.freeze(this)}static from(e){return wl.isFragment(e)?e:typeof e=="string"?wl.fromString(e):wl.fromObject(e)}static fromObject(e){if(wl.isFragment(e))return e;switch(e.type){case"function":return xu.fromObject(e);case"event":return gl.fromObject(e);case"constructor":return Au.fromObject(e);case"error":return Fd.fromObject(e);case"fallback":case"receive":return null}return _r.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?gl.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?xu.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Au.fromString(e.trim()):e.split(" ")[0]==="error"?Fd.fromString(e.substring(5).trim()):_r.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class gl extends wl{format(e){if(e||(e=Rr.sighash),Rr[e]||_r.throwArgumentError("invalid format type","format",e),e===Rr.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Rr.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Rr.full?", ":",")+") ",e!==Rr.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(e){return typeof e=="string"?gl.fromString(e):gl.fromObject(e)}static fromObject(e){if(gl.isEventFragment(e))return e;e.type!=="event"&&_r.throwArgumentError("invalid event object","value",e);const r={name:Gv(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Gs.fromObject):[],type:"event"};return new gl(T0,r)}static fromString(e){let r=e.match(Kv);r||_r.throwArgumentError("invalid event string","value",e);let n=!1;return r[3].split(" ").forEach(s=>{switch(s.trim()){case"anonymous":n=!0;break;case"":break;default:_r.warn("unknown modifier: "+s)}}),gl.fromObject({name:r[1].trim(),anonymous:n,inputs:Vv(r[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function Ure(t,e){e.gas=null;let r=t.split("@");return r.length!==1?(r.length>2&&_r.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||_r.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=Ue.from(r[1]),r[0]):t}function Mre(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(r=>{switch(r.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function Dre(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&_r.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&_r.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&_r.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&_r.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&_r.throwArgumentError("unable to determine stateMutability","value",t),e}class Au extends wl{format(e){if(e||(e=Rr.sighash),Rr[e]||_r.throwArgumentError("invalid format type","format",e),e===Rr.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===Rr.sighash&&_r.throwError("cannot format a constructor for sighash",ue.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(n=>n.format(e)).join(e===Rr.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(e){return typeof e=="string"?Au.fromString(e):Au.fromObject(e)}static fromObject(e){if(Au.isConstructorFragment(e))return e;e.type!=="constructor"&&_r.throwArgumentError("invalid constructor object","value",e);let r=Dre(e);r.constant&&_r.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Gs.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?Ue.from(e.gas):null};return new Au(T0,n)}static fromString(e){let r={type:"constructor"};e=Ure(e,r);let n=e.match(Kv);return(!n||n[1].trim()!=="constructor")&&_r.throwArgumentError("invalid constructor string","value",e),r.inputs=Vv(n[2].trim(),!1),Mre(n[3].trim(),r),Au.fromObject(r)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class xu extends Au{format(e){if(e||(e=Rr.sighash),Rr[e]||_r.throwArgumentError("invalid format type","format",e),e===Rr.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Rr.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Rr.full?", ":",")+") ",e!==Rr.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(e){return typeof e=="string"?xu.fromString(e):xu.fromObject(e)}static fromObject(e){if(xu.isFunctionFragment(e))return e;e.type!=="function"&&_r.throwArgumentError("invalid function object","value",e);let r=Dre(e);const n={type:e.type,name:Gv(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(Gs.fromObject):[],outputs:e.outputs?e.outputs.map(Gs.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?Ue.from(e.gas):null};return new xu(T0,n)}static fromString(e){let r={type:"function"};e=Ure(e,r);let n=e.split(" returns ");n.length>2&&_r.throwArgumentError("invalid function string","value",e);let s=n[0].match(Kv);if(s||_r.throwArgumentError("invalid function signature","value",e),r.name=s[1].trim(),r.name&&Gv(r.name),r.inputs=Vv(s[2],!1),Mre(s[3].trim(),r),n.length>1){let i=n[1].match(Kv);(i[1].trim()!=""||i[3].trim()!="")&&_r.throwArgumentError("unexpected tokens","value",e),r.outputs=Vv(i[2],!1)}else r.outputs=[];return xu.fromObject(r)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function iL(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&_r.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class Fd extends wl{format(e){if(e||(e=Rr.sighash),Rr[e]||_r.throwArgumentError("invalid format type","format",e),e===Rr.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Rr.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Rr.full?", ":",")+") ",r.trim()}static from(e){return typeof e=="string"?Fd.fromString(e):Fd.fromObject(e)}static fromObject(e){if(Fd.isErrorFragment(e))return e;e.type!=="error"&&_r.throwArgumentError("invalid error object","value",e);const r={type:e.type,name:Gv(e.name),inputs:e.inputs?e.inputs.map(Gs.fromObject):[]};return iL(new Fd(T0,r))}static fromString(e){let r={type:"error"},n=e.match(Kv);return n||_r.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&Gv(r.name),r.inputs=Vv(n[2],!1),iL(Fd.fromObject(r))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Cm(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const vOe=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Gv(t){return(!t||!t.match(vOe))&&_r.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const Kv=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function EOe(t){t=t.trim();let e=[],r="",n=0;for(let s=0;s<t.length;s++){let i=t[s];i===","&&n===0?(e.push(r),r=""):(r+=i,i==="("?n++:i===")"&&(n--,n===-1&&_r.throwArgumentError("unbalanced parenthesis","value",t)))}return r&&e.push(r),e}const jk=new ue(WE);function jre(t){const e=[],r=function(n,s){if(Array.isArray(s))for(let i in s){const o=n.slice();o.push(i);try{r(o,s[i])}catch(a){e.push({path:o,error:a})}}};return r([],t),e}class sf{constructor(e,r,n,s){this.name=e,this.type=r,this.localName=n,this.dynamic=s}_throwError(e,r){jk.throwArgumentError(e,this.localName,r)}}class wO{constructor(e){xe(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return No(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(Mn(e._data))}writeBytes(e){let r=Oe(e);const n=r.length%this.wordSize;return n&&(r=Mn([r,this._padding.slice(n)])),this._writeData(r)}_getValue(e){let r=Oe(Ue.from(e));return r.length>this.wordSize&&jk.throwError("value out-of-bounds",ue.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=Mn([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[e]=this._getValue(r)}}}class H6{constructor(e,r,n,s){xe(this,"_data",Oe(e)),xe(this,"wordSize",r||32),xe(this,"_coerceFunc",n),xe(this,"allowLoose",s),this._offset=0}get data(){return je(this._data)}get consumed(){return this._offset}static coerce(e,r){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(r=r.toNumber()),r}coerce(e,r){return this._coerceFunc?this._coerceFunc(e,r):H6.coerce(e,r)}_peekBytes(e,r,n){let s=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+s>this._data.length&&(this.allowLoose&&n&&this._offset+r<=this._data.length?s=r:jk.throwError("data out-of-bounds",ue.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+s})),this._data.slice(this._offset,this._offset+s)}subReader(e){return new H6(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,r){let n=this._peekBytes(0,e,!!r);return this._offset+=n.length,n.slice(0,e)}readValue(){return Ue.from(this.readBytes(this.wordSize))}}var iP={exports:{}};var oL;function _Oe(){return oL||(oL=1,(function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",s=n?window:{};s.JS_SHA3_NO_WINDOW&&(n=!1);var i=!n&&typeof self=="object",o=!s.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?s=wu:i&&(s=self);var a=!s.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,c=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),l=[31,7936,2031616,520093696],d=[4,1024,262144,67108864],f=[1,256,65536,16777216],p=[6,1536,393216,100663296],g=[0,8,16,24],h=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],y=[224,256,384,512],E=[128,256],S=["hex","buffer","arrayBuffer","array","digest"],C={128:168,256:136};(s.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(O){return Object.prototype.toString.call(O)==="[object Array]"}),c&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(O){return typeof O=="object"&&O.buffer&&O.buffer.constructor===ArrayBuffer});for(var _=function(O,H,W){return function(G){return new v(O,H,O).update(G)[W]()}},T=function(O,H,W){return function(G,K){return new v(O,H,K).update(G)[W]()}},P=function(O,H,W){return function(G,K,Q,re){return m["cshake"+O].update(G,K,Q,re)[W]()}},D=function(O,H,W){return function(G,K,Q,re){return m["kmac"+O].update(G,K,Q,re)[W]()}},F=function(O,H,W,G){for(var K=0;K<S.length;++K){var Q=S[K];O[Q]=H(W,G,Q)}return O},I=function(O,H){var W=_(O,H,"hex");return W.create=function(){return new v(O,H,O)},W.update=function(G){return W.create().update(G)},F(W,_,O,H)},U=function(O,H){var W=T(O,H,"hex");return W.create=function(G){return new v(O,H,G)},W.update=function(G,K){return W.create(K).update(G)},F(W,T,O,H)},L=function(O,H){var W=C[O],G=P(O,H,"hex");return G.create=function(K,Q,re){return!Q&&!re?m["shake"+O].create(K):new v(O,H,K).bytepad([Q,re],W)},G.update=function(K,Q,re,de){return G.create(Q,re,de).update(K)},F(G,P,O,H)},B=function(O,H){var W=C[O],G=D(O,H,"hex");return G.create=function(K,Q,re){return new R(O,H,Q).bytepad(["KMAC",re],W).bytepad([K],W)},G.update=function(K,Q,re,de){return G.create(K,re,de).update(Q)},F(G,D,O,H)},A=[{name:"keccak",padding:f,bits:y,createMethod:I},{name:"sha3",padding:p,bits:y,createMethod:I},{name:"shake",padding:l,bits:E,createMethod:U},{name:"cshake",padding:d,bits:E,createMethod:L},{name:"kmac",padding:d,bits:E,createMethod:B}],m={},b=[],w=0;w<A.length;++w)for(var x=A[w],M=x.bits,k=0;k<M.length;++k){var j=x.name+"_"+M[k];if(b.push(j),m[j]=x.createMethod(M[k],x.padding),x.name!=="sha3"){var N=x.name+M[k];b.push(N),m[N]=m[j]}}function v(O,H,W){this.blocks=[],this.s=[],this.padding=H,this.outputBits=W,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(O<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=W>>5,this.extraBytes=(W&31)>>3;for(var G=0;G<50;++G)this.s[G]=0}v.prototype.update=function(O){if(this.finalized)throw new Error(r);var H,W=typeof O;if(W!=="string"){if(W==="object"){if(O===null)throw new Error(e);if(c&&O.constructor===ArrayBuffer)O=new Uint8Array(O);else if(!Array.isArray(O)&&(!c||!ArrayBuffer.isView(O)))throw new Error(e)}else throw new Error(e);H=!0}for(var G=this.blocks,K=this.byteCount,Q=O.length,re=this.blockCount,de=0,le=this.s,se,be;de<Q;){if(this.reset)for(this.reset=!1,G[0]=this.block,se=1;se<re+1;++se)G[se]=0;if(H)for(se=this.start;de<Q&&se<K;++de)G[se>>2]|=O[de]<<g[se++&3];else for(se=this.start;de<Q&&se<K;++de)be=O.charCodeAt(de),be<128?G[se>>2]|=be<<g[se++&3]:be<2048?(G[se>>2]|=(192|be>>6)<<g[se++&3],G[se>>2]|=(128|be&63)<<g[se++&3]):be<55296||be>=57344?(G[se>>2]|=(224|be>>12)<<g[se++&3],G[se>>2]|=(128|be>>6&63)<<g[se++&3],G[se>>2]|=(128|be&63)<<g[se++&3]):(be=65536+((be&1023)<<10|O.charCodeAt(++de)&1023),G[se>>2]|=(240|be>>18)<<g[se++&3],G[se>>2]|=(128|be>>12&63)<<g[se++&3],G[se>>2]|=(128|be>>6&63)<<g[se++&3],G[se>>2]|=(128|be&63)<<g[se++&3]);if(this.lastByteIndex=se,se>=K){for(this.start=se-K,this.block=G[re],se=0;se<re;++se)le[se]^=G[se];$(le),this.reset=!0}else this.start=se}return this},v.prototype.encode=function(O,H){var W=O&255,G=1,K=[W];for(O=O>>8,W=O&255;W>0;)K.unshift(W),O=O>>8,W=O&255,++G;return H?K.push(G):K.unshift(G),this.update(K),K.length},v.prototype.encodeString=function(O){var H,W=typeof O;if(W!=="string"){if(W==="object"){if(O===null)throw new Error(e);if(c&&O.constructor===ArrayBuffer)O=new Uint8Array(O);else if(!Array.isArray(O)&&(!c||!ArrayBuffer.isView(O)))throw new Error(e)}else throw new Error(e);H=!0}var G=0,K=O.length;if(H)G=K;else for(var Q=0;Q<O.length;++Q){var re=O.charCodeAt(Q);re<128?G+=1:re<2048?G+=2:re<55296||re>=57344?G+=3:(re=65536+((re&1023)<<10|O.charCodeAt(++Q)&1023),G+=4)}return G+=this.encode(G*8),this.update(O),G},v.prototype.bytepad=function(O,H){for(var W=this.encode(H),G=0;G<O.length;++G)W+=this.encodeString(O[G]);var K=H-W%H,Q=[];return Q.length=K,this.update(Q),this},v.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var O=this.blocks,H=this.lastByteIndex,W=this.blockCount,G=this.s;if(O[H>>2]|=this.padding[H&3],this.lastByteIndex===this.byteCount)for(O[0]=O[W],H=1;H<W+1;++H)O[H]=0;for(O[W-1]|=2147483648,H=0;H<W;++H)G[H]^=O[H];$(G)}},v.prototype.toString=v.prototype.hex=function(){this.finalize();for(var O=this.blockCount,H=this.s,W=this.outputBlocks,G=this.extraBytes,K=0,Q=0,re="",de;Q<W;){for(K=0;K<O&&Q<W;++K,++Q)de=H[K],re+=u[de>>4&15]+u[de&15]+u[de>>12&15]+u[de>>8&15]+u[de>>20&15]+u[de>>16&15]+u[de>>28&15]+u[de>>24&15];Q%O===0&&($(H),K=0)}return G&&(de=H[K],re+=u[de>>4&15]+u[de&15],G>1&&(re+=u[de>>12&15]+u[de>>8&15]),G>2&&(re+=u[de>>20&15]+u[de>>16&15])),re},v.prototype.arrayBuffer=function(){this.finalize();var O=this.blockCount,H=this.s,W=this.outputBlocks,G=this.extraBytes,K=0,Q=0,re=this.outputBits>>3,de;G?de=new ArrayBuffer(W+1<<2):de=new ArrayBuffer(re);for(var le=new Uint32Array(de);Q<W;){for(K=0;K<O&&Q<W;++K,++Q)le[Q]=H[K];Q%O===0&&$(H)}return G&&(le[K]=H[K],de=de.slice(0,re)),de},v.prototype.buffer=v.prototype.arrayBuffer,v.prototype.digest=v.prototype.array=function(){this.finalize();for(var O=this.blockCount,H=this.s,W=this.outputBlocks,G=this.extraBytes,K=0,Q=0,re=[],de,le;Q<W;){for(K=0;K<O&&Q<W;++K,++Q)de=Q<<2,le=H[K],re[de]=le&255,re[de+1]=le>>8&255,re[de+2]=le>>16&255,re[de+3]=le>>24&255;Q%O===0&&$(H)}return G&&(de=Q<<2,le=H[K],re[de]=le&255,G>1&&(re[de+1]=le>>8&255),G>2&&(re[de+2]=le>>16&255)),re};function R(O,H,W){v.call(this,O,H,W)}R.prototype=new v,R.prototype.finalize=function(){return this.encode(this.outputBits,!0),v.prototype.finalize.call(this)};var $=function(O){var H,W,G,K,Q,re,de,le,se,be,We,Ne,Be,At,Ee,fe,Mt,bt,jt,ge,ve,V,q,z,X,ne,ce,me,Rt,Tt,Ct,or,Et,on,Zc,Qr,Wr,Yc,an,Vr,Jc,Gr,cn,wo,Sr,un,vo,Ir,Kr,Xc,ln,Zr,Qc,en,dn,Ra,tn,Br,hc,pc,gc,mc,yc;for(G=0;G<48;G+=2)K=O[0]^O[10]^O[20]^O[30]^O[40],Q=O[1]^O[11]^O[21]^O[31]^O[41],re=O[2]^O[12]^O[22]^O[32]^O[42],de=O[3]^O[13]^O[23]^O[33]^O[43],le=O[4]^O[14]^O[24]^O[34]^O[44],se=O[5]^O[15]^O[25]^O[35]^O[45],be=O[6]^O[16]^O[26]^O[36]^O[46],We=O[7]^O[17]^O[27]^O[37]^O[47],Ne=O[8]^O[18]^O[28]^O[38]^O[48],Be=O[9]^O[19]^O[29]^O[39]^O[49],H=Ne^(re<<1|de>>>31),W=Be^(de<<1|re>>>31),O[0]^=H,O[1]^=W,O[10]^=H,O[11]^=W,O[20]^=H,O[21]^=W,O[30]^=H,O[31]^=W,O[40]^=H,O[41]^=W,H=K^(le<<1|se>>>31),W=Q^(se<<1|le>>>31),O[2]^=H,O[3]^=W,O[12]^=H,O[13]^=W,O[22]^=H,O[23]^=W,O[32]^=H,O[33]^=W,O[42]^=H,O[43]^=W,H=re^(be<<1|We>>>31),W=de^(We<<1|be>>>31),O[4]^=H,O[5]^=W,O[14]^=H,O[15]^=W,O[24]^=H,O[25]^=W,O[34]^=H,O[35]^=W,O[44]^=H,O[45]^=W,H=le^(Ne<<1|Be>>>31),W=se^(Be<<1|Ne>>>31),O[6]^=H,O[7]^=W,O[16]^=H,O[17]^=W,O[26]^=H,O[27]^=W,O[36]^=H,O[37]^=W,O[46]^=H,O[47]^=W,H=be^(K<<1|Q>>>31),W=We^(Q<<1|K>>>31),O[8]^=H,O[9]^=W,O[18]^=H,O[19]^=W,O[28]^=H,O[29]^=W,O[38]^=H,O[39]^=W,O[48]^=H,O[49]^=W,At=O[0],Ee=O[1],un=O[11]<<4|O[10]>>>28,vo=O[10]<<4|O[11]>>>28,me=O[20]<<3|O[21]>>>29,Rt=O[21]<<3|O[20]>>>29,pc=O[31]<<9|O[30]>>>23,gc=O[30]<<9|O[31]>>>23,Gr=O[40]<<18|O[41]>>>14,cn=O[41]<<18|O[40]>>>14,on=O[2]<<1|O[3]>>>31,Zc=O[3]<<1|O[2]>>>31,fe=O[13]<<12|O[12]>>>20,Mt=O[12]<<12|O[13]>>>20,Ir=O[22]<<10|O[23]>>>22,Kr=O[23]<<10|O[22]>>>22,Tt=O[33]<<13|O[32]>>>19,Ct=O[32]<<13|O[33]>>>19,mc=O[42]<<2|O[43]>>>30,yc=O[43]<<2|O[42]>>>30,en=O[5]<<30|O[4]>>>2,dn=O[4]<<30|O[5]>>>2,Qr=O[14]<<6|O[15]>>>26,Wr=O[15]<<6|O[14]>>>26,bt=O[25]<<11|O[24]>>>21,jt=O[24]<<11|O[25]>>>21,Xc=O[34]<<15|O[35]>>>17,ln=O[35]<<15|O[34]>>>17,or=O[45]<<29|O[44]>>>3,Et=O[44]<<29|O[45]>>>3,z=O[6]<<28|O[7]>>>4,X=O[7]<<28|O[6]>>>4,Ra=O[17]<<23|O[16]>>>9,tn=O[16]<<23|O[17]>>>9,Yc=O[26]<<25|O[27]>>>7,an=O[27]<<25|O[26]>>>7,ge=O[36]<<21|O[37]>>>11,ve=O[37]<<21|O[36]>>>11,Zr=O[47]<<24|O[46]>>>8,Qc=O[46]<<24|O[47]>>>8,wo=O[8]<<27|O[9]>>>5,Sr=O[9]<<27|O[8]>>>5,ne=O[18]<<20|O[19]>>>12,ce=O[19]<<20|O[18]>>>12,Br=O[29]<<7|O[28]>>>25,hc=O[28]<<7|O[29]>>>25,Vr=O[38]<<8|O[39]>>>24,Jc=O[39]<<8|O[38]>>>24,V=O[48]<<14|O[49]>>>18,q=O[49]<<14|O[48]>>>18,O[0]=At^~fe&bt,O[1]=Ee^~Mt&jt,O[10]=z^~ne&me,O[11]=X^~ce&Rt,O[20]=on^~Qr&Yc,O[21]=Zc^~Wr&an,O[30]=wo^~un&Ir,O[31]=Sr^~vo&Kr,O[40]=en^~Ra&Br,O[41]=dn^~tn&hc,O[2]=fe^~bt&ge,O[3]=Mt^~jt&ve,O[12]=ne^~me&Tt,O[13]=ce^~Rt&Ct,O[22]=Qr^~Yc&Vr,O[23]=Wr^~an&Jc,O[32]=un^~Ir&Xc,O[33]=vo^~Kr&ln,O[42]=Ra^~Br&pc,O[43]=tn^~hc&gc,O[4]=bt^~ge&V,O[5]=jt^~ve&q,O[14]=me^~Tt&or,O[15]=Rt^~Ct&Et,O[24]=Yc^~Vr&Gr,O[25]=an^~Jc&cn,O[34]=Ir^~Xc&Zr,O[35]=Kr^~ln&Qc,O[44]=Br^~pc&mc,O[45]=hc^~gc&yc,O[6]=ge^~V&At,O[7]=ve^~q&Ee,O[16]=Tt^~or&z,O[17]=Ct^~Et&X,O[26]=Vr^~Gr&on,O[27]=Jc^~cn&Zc,O[36]=Xc^~Zr&wo,O[37]=ln^~Qc&Sr,O[46]=pc^~mc&en,O[47]=gc^~yc&dn,O[8]=V^~At&fe,O[9]=q^~Ee&Mt,O[18]=or^~z&ne,O[19]=Et^~X&ce,O[28]=Gr^~on&Qr,O[29]=cn^~Zc&Wr,O[38]=Zr^~wo&un,O[39]=Qc^~Sr&vo,O[48]=mc^~en&Ra,O[49]=yc^~dn&tn,O[0]^=h[G],O[1]^=h[G+1]};if(a)t.exports=m;else for(w=0;w<b.length;++w)s[b[w]]=m[b[w]]})()})(iP)),iP.exports}var AOe=_Oe();const xOe=Ea(AOe);function En(t){return"0x"+xOe.keccak_256(Oe(t))}const COe=Object.freeze(Object.defineProperty({__proto__:null,keccak256:En},Symbol.toStringTag,{value:"Module"})),SOe="rlp/5.8.0",ll=new ue(SOe);function aL(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function cL(t,e,r){let n=0;for(let s=0;s<r;s++)n=n*256+t[e+s];return n}function Lre(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(i){n=n.concat(Lre(i))}),n.length<=55)return n.unshift(192+n.length),n;const s=aL(n.length);return s.unshift(247+s.length),s.concat(n)}zE(t)||ll.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(Oe(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=aL(e.length);return r.unshift(183+r.length),r.concat(e)}function N0(t){return je(Lre(t))}function uL(t,e,r,n){const s=[];for(;r<e+1+n;){const i=Fre(t,r);s.push(i.result),r+=i.consumed,r>e+1+n&&ll.throwError("child data too short",ue.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:s}}function Fre(t,e){if(t.length===0&&ll.throwError("data too short",ue.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&ll.throwError("data short segment too short",ue.errors.BUFFER_OVERRUN,{});const n=cL(t,e+1,r);return e+1+r+n>t.length&&ll.throwError("data long segment too short",ue.errors.BUFFER_OVERRUN,{}),uL(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&ll.throwError("data array too short",ue.errors.BUFFER_OVERRUN,{}),uL(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&ll.throwError("data array too short",ue.errors.BUFFER_OVERRUN,{});const n=cL(t,e+1,r);e+1+r+n>t.length&&ll.throwError("data array too short",ue.errors.BUFFER_OVERRUN,{});const s=je(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:s}}else if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&ll.throwError("data too short",ue.errors.BUFFER_OVERRUN,{});const n=je(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:je(t[e])}}function sT(t){const e=Oe(t),r=Fre(e,0);return r.consumed!==e.length&&ll.throwArgumentError("invalid rlp data","data",t),r.result}const IOe=Object.freeze(Object.defineProperty({__proto__:null,decode:sT,encode:N0},Symbol.toStringTag,{value:"Module"})),TOe="address/5.8.0",ph=new ue(TOe);function lL(t){Er(t,20)||ph.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let s=0;s<40;s++)r[s]=e[s].charCodeAt(0);const n=Oe(En(r));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(n[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const NOe=9007199254740991;function POe(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Lk={};for(let t=0;t<10;t++)Lk[String(t)]=String(t);for(let t=0;t<26;t++)Lk[String.fromCharCode(65+t)]=String(10+t);const dL=Math.floor(POe(NOe));function $re(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>Lk[n]).join("");for(;e.length>=dL;){let n=e.substring(0,dL);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function sn(t){let e=null;if(typeof t!="string"&&ph.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=lL(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&ph.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==$re(t)&&ph.throwArgumentError("bad icap checksum","address",t),e=uOe(t.substring(4));e.length<40;)e="0"+e;e=lL("0x"+e)}else ph.throwArgumentError("invalid address","address",t);return e}function ROe(t){try{return sn(t),!0}catch{}return!1}function OOe(t){let e=lOe(sn(t).substring(2)).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+$re("XE00"+e)+e}function Fk(t){let e=null;try{e=sn(t.from)}catch{ph.throwArgumentError("missing from address","transaction",t)}const r=Il(Oe(Ue.from(t.nonce).toHexString()));return sn(As(En(N0([e,r])),12))}function kOe(t,e,r){return Ul(e)!==32&&ph.throwArgumentError("salt must be 32 bytes","salt",e),Ul(r)!==32&&ph.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),sn(As(En(Mn(["0xff",sn(t),e,r])),12))}const BOe=Object.freeze(Object.defineProperty({__proto__:null,getAddress:sn,getContractAddress:Fk,getCreate2Address:kOe,getIcapAddress:OOe,isAddress:ROe},Symbol.toStringTag,{value:"Module"}));class UOe extends sf{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){try{r=sn(r)}catch(n){this._throwError(n.message,r)}return e.writeValue(r)}decode(e){return sn(Nn(e.readValue().toHexString(),20))}}class MOe extends sf{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}const jm=new ue(WE);function qre(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let c={};n=e.map(u=>{const l=u.localName;return l||jm.throwError("cannot encode object for signature with missing names",ue.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:r}),c[l]&&jm.throwError("cannot encode object for signature with duplicate names",ue.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:r}),c[l]=!0,r[l]})}else jm.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&jm.throwArgumentError("types/value length mismatch","tuple",r);let s=new wO(t.wordSize),i=new wO(t.wordSize),o=[];e.forEach((c,u)=>{let l=n[u];if(c.dynamic){let d=i.length;c.encode(i,l);let f=s.writeUpdatableValue();o.push(p=>{f(p+d)})}else c.encode(s,l)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function Hre(t,e){let r=[],n=t.subReader(0);e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readValue(),c=n.subReader(a.toNumber());try{o=i.decode(c)}catch(u){if(u.code===ue.errors.BUFFER_OVERRUN)throw u;o=u,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(a.code===ue.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}o!=null&&r.push(o)});const s=e.reduce((i,o)=>{const a=o.localName;return a&&(i[a]||(i[a]=0),i[a]++),i},{});e.forEach((i,o)=>{let a=i.localName;if(!a||s[a]!==1||(a==="length"&&(a="_length"),r[a]!=null))return;const c=r[o];c instanceof Error?Object.defineProperty(r,a,{enumerable:!0,get:()=>{throw c}}):r[a]=c});for(let i=0;i<r.length;i++){const o=r[i];o instanceof Error&&Object.defineProperty(r,i,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(r)}class DOe extends sf{constructor(e,r,n){const s=e.type+"["+(r>=0?r:"")+"]",i=r===-1||e.dynamic;super("array",s,n,i),this.coder=e,this.length=r}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;n===-1&&(n=r.length,e.writeValue(r.length)),jm.checkArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let i=0;i<r.length;i++)s.push(this.coder);return qre(e,s,r)}decode(e){let r=this.length;r===-1&&(r=e.readValue().toNumber(),r*32>e._data.length&&jm.throwError("insufficient data length",ue.errors.BUFFER_OVERRUN,{length:e._data.length,count:r}));let n=[];for(let s=0;s<r;s++)n.push(new MOe(this.coder));return e.coerce(this.name,Hre(e,n))}}class jOe extends sf{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){return e.writeValue(r?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class zre extends sf{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=Oe(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class LOe extends zre{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,je(super.decode(e)))}}class FOe extends sf{constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=Oe(r);return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return e.coerce(this.name,je(e.readBytes(this.size)))}}class $Oe extends sf{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const qOe="0x0000000000000000000000000000000000000000",HOe=Ue.from(-1),Wre=Ue.from(0),zOe=Ue.from(1),WOe=Ue.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Vre="0x0000000000000000000000000000000000000000000000000000000000000000";class VOe extends sf{constructor(e,r,n){const s=(r?"int":"uint")+e*8;super(s,s,n,!1),this.size=e,this.signed=r}defaultValue(){return 0}encode(e,r){let n=Ue.from(r),s=WOe.mask(e.wordSize*8);if(this.signed){let i=s.mask(this.size*8-1);(n.gt(i)||n.lt(i.add(zOe).mul(HOe)))&&this._throwError("value out-of-bounds",r)}else(n.lt(Wre)||n.gt(s.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let r=e.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),e.coerce(this.name,r)}}const GOe="strings/5.8.0",Gre=new ue(GOe);var Dl;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(Dl||(Dl={}));var da;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(da||(da={}));function KOe(t,e,r,n,s){return Gre.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function Kre(t,e,r,n,s){if(t===da.BAD_PREFIX||t===da.UNEXPECTED_CONTINUE){let i=0;for(let o=e+1;o<r.length&&r[o]>>6===2;o++)i++;return i}return t===da.OVERRUN?r.length-e-1:0}function ZOe(t,e,r,n,s){return t===da.OVERLONG?(n.push(s),0):(n.push(65533),Kre(t,e,r))}const Zre=Object.freeze({error:KOe,ignore:Kre,replace:ZOe});function $k(t,e){e==null&&(e=Zre.error),t=Oe(t);const r=[];let n=0;for(;n<t.length;){const s=t[n++];if(s>>7===0){r.push(s);continue}let i=null,o=null;if((s&224)===192)i=1,o=127;else if((s&240)===224)i=2,o=2047;else if((s&248)===240)i=3,o=65535;else{(s&192)===128?n+=e(da.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(da.BAD_PREFIX,n-1,t,r);continue}if(n-1+i>=t.length){n+=e(da.OVERRUN,n-1,t,r);continue}let a=s&(1<<8-i-1)-1;for(let c=0;c<i;c++){let u=t[n];if((u&192)!=128){n+=e(da.MISSING_CONTINUE,n,t,r),a=null;break}a=a<<6|u&63,n++}if(a!==null){if(a>1114111){n+=e(da.OUT_OF_RANGE,n-1-i,t,r,a);continue}if(a>=55296&&a<=57343){n+=e(da.UTF16_SURROGATE,n-1-i,t,r,a);continue}if(a<=o){n+=e(da.OVERLONG,n-1-i,t,r,a);continue}r.push(a)}}return r}function ms(t,e=Dl.current){e!=Dl.current&&(Gre.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);if(s<128)r.push(s);else if(s<2048)r.push(s>>6|192),r.push(s&63|128);else if((s&64512)==55296){n++;const i=t.charCodeAt(n);if(n>=t.length||(i&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((s&1023)<<10)+(i&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128)}return Oe(r)}function oP(t){const e="0000"+t.toString(16);return"\\u"+e.substring(e.length-4)}function YOe(t,e){return'"'+$k(t,e).map(r=>{if(r<256){switch(r){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(r>=32&&r<127)return String.fromCharCode(r)}return r<=65535?oP(r):(r-=65536,oP((r>>10&1023)+55296)+oP((r&1023)+56320))}).join("")+'"'}function vO(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Lh(t,e){return vO($k(t,e))}function z6(t,e=Dl.current){return $k(ms(t,e))}function JOe(t){const e=ms(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return je(Mn([e,Vre]).slice(0,32))}function XOe(t){const e=Oe(t);if(e.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(e[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;e[r-1]===0;)r--;return Lh(e.slice(0,r))}function QOe(t){if(t.length%4!==0)throw new Error("bad data");let e=[];for(let r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e}function qk(t,e){e||(e=function(s){return[parseInt(s,16)]});let r=0,n={};return t.split(",").forEach(s=>{let i=s.split(":");r+=parseInt(i[0],16),n[r]=e(i[1])}),n}function Yre(t){let e=0;return t.split(",").map(r=>{let n=r.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");let s=e+parseInt(n[0],16);return e=parseInt(n[1],16),{l:s,h:e}})}function Hk(t,e){let r=0;for(let n=0;n<e.length;n++){let s=e[n];if(r+=s.l,t>=r&&t<=r+s.h&&(t-r)%(s.d||1)===0){if(s.e&&s.e.indexOf(t-r)!==-1)continue;return s}}return null}const e4e=Yre("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),t4e="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(t=>parseInt(t,16)),r4e=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],n4e=qk("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),s4e=qk("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),i4e=qk("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",QOe),o4e=Yre("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function a4e(t){return t.reduce((e,r)=>(r.forEach(n=>{e.push(n)}),e),[])}function c4e(t){return!!Hk(t,e4e)}function u4e(t){let e=Hk(t,r4e);if(e)return[t+e.s];let r=n4e[t];if(r)return r;let n=s4e[t];if(n)return[t+n[0]];let s=i4e[t];return s||null}function l4e(t){return!!Hk(t,o4e)}function d4e(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();let e=z6(t);e=a4e(e.map(n=>{if(t4e.indexOf(n)>=0)return[];if(n>=65024&&n<=65039)return[];let s=u4e(n);return s||[n]})),e=z6(vO(e),Dl.NFKC),e.forEach(n=>{if(l4e(n))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),e.forEach(n=>{if(c4e(n))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});let r=vO(e);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-")throw new Error("invalid hyphen");return r}const f4e=Object.freeze(Object.defineProperty({__proto__:null,get UnicodeNormalizationForm(){return Dl},Utf8ErrorFuncs:Zre,get Utf8ErrorReason(){return da},_toEscapedUtf8String:YOe,formatBytes32String:JOe,nameprep:d4e,parseBytes32String:XOe,toUtf8Bytes:ms,toUtf8CodePoints:z6,toUtf8String:Lh},Symbol.toStringTag,{value:"Module"}));class h4e extends zre{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,ms(r))}decode(e){return Lh(super.decode(e))}}class v2 extends sf{constructor(e,r){let n=!1;const s=[];e.forEach(o=>{o.dynamic&&(n=!0),s.push(o.type)});const i="tuple("+s.join(",")+")";super("tuple",i,r,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,s)=>{const i=s.localName;return i&&(n[i]||(n[i]=0),n[i]++),n},{});return this.coders.forEach((n,s)=>{let i=n.localName;!i||r[i]!==1||(i==="length"&&(i="_length"),e[i]==null&&(e[i]=e[s]))}),Object.freeze(e)}encode(e,r){return qre(e,this.coders,r)}decode(e){return e.coerce(this.name,Hre(e,this.coders))}}const E2=new ue(WE),p4e=new RegExp(/^bytes([0-9]*)$/),g4e=new RegExp(/^(u?int)([0-9]*)$/);class Jre{constructor(e){xe(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new UOe(e.name);case"bool":return new jOe(e.name);case"string":return new h4e(e.name);case"bytes":return new LOe(e.name);case"array":return new DOe(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new v2((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new $Oe(e.name)}let r=e.type.match(g4e);if(r){let n=parseInt(r[2]||"256");return(n===0||n>256||n%8!==0)&&E2.throwArgumentError("invalid "+r[1]+" bit length","param",e),new VOe(n/8,r[1]==="int",e.name)}if(r=e.type.match(p4e),r){let n=parseInt(r[1]);return(n===0||n>32)&&E2.throwArgumentError("invalid bytes length","param",e),new FOe(n,e.name)}return E2.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,r){return new H6(e,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new wO(this._getWordSize())}getDefaultValue(e){const r=e.map(s=>this._getCoder(Gs.from(s)));return new v2(r,"_").defaultValue()}encode(e,r){e.length!==r.length&&E2.throwError("types/values length mismatch",ue.errors.INVALID_ARGUMENT,{count:{types:e.length,values:r.length},value:{types:e,values:r}});const n=e.map(o=>this._getCoder(Gs.from(o))),s=new v2(n,"_"),i=this._getWriter();return s.encode(i,r),i.data}decode(e,r,n){const s=e.map(o=>this._getCoder(Gs.from(o)));return new v2(s,"_").decode(this._getReader(Oe(r),n))}}const Xre=new Jre;function gh(t){return En(ms(t))}const Qre="hash/5.8.0";function zk(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return Oe(e)}function Wk(t){t=Oe(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}const m4e=Object.freeze(Object.defineProperty({__proto__:null,decode:zk,encode:Wk},Symbol.toStringTag,{value:"Module"}));function ene(t,e){e==null&&(e=1);const r=[],n=r.forEach,s=function(i,o){n.call(i,function(a){o>0&&Array.isArray(a)?s(a,o-1):r.push(a)})};return s(t,e),r}function y4e(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[n[0]]=n[1]}return e}function b4e(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),s=1,i=[0,1];for(let T=1;T<n;T++)i.push(s+=r());let o=r(),a=e;e+=o;let c=0,u=0;function l(){return c==0&&(u=u<<8|t[e++],c=8),u>>--c&1}const d=31,f=Math.pow(2,d),p=f>>>1,g=p>>1,h=f-1;let y=0;for(let T=0;T<d;T++)y=y<<1|l();let E=[],S=0,C=f;for(;;){let T=Math.floor(((y-S+1)*s-1)/C),P=0,D=n;for(;D-P>1;){let U=P+D>>>1;T<i[U]?D=U:P=U}if(P==0)break;E.push(P);let F=S+Math.floor(C*i[P]/s),I=S+Math.floor(C*i[P+1]/s)-1;for(;((F^I)&p)==0;)y=y<<1&h|l(),F=F<<1&h,I=I<<1&h|1;for(;F&~I&g;)y=y&p|y<<1&h>>>1|l(),F=F<<1^p,I=(I^p)<<1|p|1;S=F,C=1+I-F}let _=n-4;return E.map(T=>{switch(T-_){case 3:return _+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return _+256+(t[a++]<<8|t[a++]);case 1:return _+t[a++];default:return T-1}})}function w4e(t){let e=0;return()=>t[e++]}function v4e(t){return w4e(b4e(t))}function E4e(t){return t&1?~t>>1:t>>1}function _4e(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}function fL(t,e){let r=Array(t);for(let n=0,s=-1;n<t;n++)r[n]=s+=1+e();return r}function A4e(t,e){let r=Array(t);for(let n=0,s=0;n<t;n++)r[n]=s+=E4e(e());return r}function W6(t,e){let r=fL(t(),t),n=t(),s=fL(n,t),i=_4e(n,t);for(let o=0;o<n;o++)for(let a=0;a<i[o];a++)r.push(s[o]+a);return e?r.map(o=>e[o]):r}function x4e(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(S4e(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(I4e(r,t))}return y4e(ene(e))}function C4e(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(r)}return e}function tne(t,e,r){let n=Array(t).fill(void 0).map(()=>[]);for(let s=0;s<e;s++)A4e(t,r).forEach((i,o)=>n[o].push(i));return n}function S4e(t,e){let r=1+e(),n=e(),s=C4e(e),i=tne(s.length,1+t,e);return ene(i.map((o,a)=>{const c=o[0],u=o.slice(1);return Array(s[a]).fill(void 0).map((l,d)=>{let f=d*n;return[c+d*r,u.map(p=>p+f)]})}))}function I4e(t,e){let r=1+e();return tne(r,1+t,e).map(s=>[s[0],s.slice(1)])}function T4e(t){let e=W6(t).sort((n,s)=>n-s);return r();function r(){let n=[];for(;;){let u=W6(t,e);if(u.length==0)break;n.push({set:new Set(u),node:r()})}n.sort((u,l)=>l.set.size-u.set.size);let s=t(),i=s%3;s=s/3|0;let o=!!(s&1);s>>=1;let a=s==1,c=s==2;return{branches:n,valid:i,fe0f:o,save:a,check:c}}}function N4e(){return v4e(zk("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const iT=N4e(),P4e=new Set(W6(iT)),R4e=new Set(W6(iT)),O4e=x4e(iT),k4e=T4e(iT),hL=45,pL=95;function rne(t){return z6(t)}function B4e(t){return t.filter(e=>e!=65039)}function nne(t){for(let e of t.split(".")){let r=rne(e);try{for(let n=r.lastIndexOf(pL)-1;n>=0;n--)if(r[n]!==pL)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every(n=>n<128)&&r[2]===hL&&r[3]===hL)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return t}function U4e(t){return nne(M4e(t,B4e))}function M4e(t,e){let r=rne(t).reverse(),n=[];for(;r.length;){let s=j4e(r);if(s){n.push(...e(s));continue}let i=r.pop();if(P4e.has(i)){n.push(i);continue}if(R4e.has(i))continue;let o=O4e[i];if(o){n.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${i.toString(16).toUpperCase()}`)}return nne(D4e(String.fromCodePoint(...n)))}function D4e(t){return t.normalize("NFC")}function j4e(t,e){var r;let n=k4e,s,i,o=[],a=t.length;for(;a;){let c=t[--a];if(n=(r=n.branches.find(u=>u.set.has(c)))===null||r===void 0?void 0:r.node,!n)break;if(n.save)i=c;else if(n.check&&c===i)break;o.push(c),n.fe0f&&(o.push(65039),a>0&&t[a-1]==65039&&a--),n.valid&&(s=o.slice(),n.valid==2&&s.splice(1,1),t.length=a)}return s}const L4e=new ue(Qre),sne=new Uint8Array(32);sne.fill(0);function gL(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function oT(t){const e=ms(U4e(t)),r=[];if(t.length===0)return r;let n=0;for(let s=0;s<e.length;s++)e[s]===46&&(r.push(gL(e.slice(n,s))),n=s+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(gL(e.slice(n))),r}function F4e(t){return oT(t).map(e=>Lh(e)).join(".")}function $4e(t){try{return oT(t).length!==0}catch{}return!1}function U1(t){typeof t!="string"&&L4e.throwArgumentError("invalid ENS name; not a string","name",t);let e=sne;const r=oT(t);for(;r.length;)e=En(Mn([e,En(r.pop())]));return je(e)}function ine(t){return je(Mn(oT(t).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const r=new Uint8Array(e.length+1);return r.set(e,1),r[0]=r.length-1,r})))+"00"}const one=`Ethereum Signed Message:
`;function Vk(t){return typeof t=="string"&&(t=ms(t)),En(Mn([ms(one),ms(String(t.length)),t]))}var q4e=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const ts=new ue(Qre),ane=new Uint8Array(32);ane.fill(0);const H4e=Ue.from(-1),cne=Ue.from(0),une=Ue.from(1),z4e=Ue.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function W4e(t){const e=Oe(t),r=e.length%32;return r?No([e,ane.slice(r)]):je(e)}const V4e=Nn(une.toHexString(),32),G4e=Nn(cne.toHexString(),32),mL={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},aP=["name","version","chainId","verifyingContract","salt"];function yL(t){return function(e){return typeof e!="string"&&ts.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const K4e={name:yL("name"),version:yL("version"),chainId:function(t){try{return Ue.from(t).toString()}catch{}return ts.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return sn(t).toLowerCase()}catch{}return ts.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=Oe(t);if(e.length!==32)throw new Error("bad length");return je(e)}catch{}return ts.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function cP(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&ts.throwArgumentError("invalid numeric width","type",t);const s=z4e.mask(r?n-1:n),i=r?s.add(une).mul(H4e):cne;return function(o){const a=Ue.from(o);return(a.lt(i)||a.gt(s))&&ts.throwArgumentError(`value out-of-bounds for ${t}`,"value",o),Nn(a.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&ts.throwArgumentError("invalid bytes width","type",t),function(n){return Oe(n).length!==r&&ts.throwArgumentError(`invalid length for ${t}`,"value",n),W4e(n)}}}switch(t){case"address":return function(e){return Nn(sn(e),32)};case"bool":return function(e){return e?V4e:G4e};case"bytes":return function(e){return En(e)};case"string":return function(e){return gh(e)}}return null}function bL(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class Ni{constructor(e){xe(this,"types",Object.freeze(Ml(e))),xe(this,"_encoderCache",{}),xe(this,"_types",{});const r={},n={},s={};Object.keys(e).forEach(a=>{r[a]={},n[a]=[],s[a]={}});for(const a in e){const c={};e[a].forEach(u=>{c[u.name]&&ts.throwArgumentError(`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(a)}`,"types",e),c[u.name]=!0;const l=u.type.match(/^([^\x5b]*)(\x5b|$)/)[1];l===a&&ts.throwArgumentError(`circular type reference to ${JSON.stringify(l)}`,"types",e),!cP(l)&&(n[l]||ts.throwArgumentError(`unknown type ${JSON.stringify(l)}`,"types",e),n[l].push(a),r[a][l]=!0)})}const i=Object.keys(n).filter(a=>n[a].length===0);i.length===0?ts.throwArgumentError("missing primary type","types",e):i.length>1&&ts.throwArgumentError(`ambiguous primary types or unused types: ${i.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),xe(this,"primaryType",i[0]);function o(a,c){c[a]&&ts.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),c[a]=!0,Object.keys(r[a]).forEach(u=>{n[u]&&(o(u,c),Object.keys(c).forEach(l=>{s[l][u]=!0}))}),delete c[a]}o(this.primaryType,{});for(const a in s){const c=Object.keys(s[a]);c.sort(),this._types[a]=bL(a,e[a])+c.map(u=>bL(u,e[u])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const s=cP(e);if(s)return s}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const s=r[1],i=this.getEncoder(s),o=parseInt(r[3]);return a=>{o>=0&&a.length!==o&&ts.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let c=a.map(i);return this._types[s]&&(c=c.map(En)),En(No(c))}}const n=this.types[e];if(n){const s=gh(this._types[e]);return i=>{const o=n.map(({name:a,type:c})=>{const u=this.getEncoder(c)(i[a]);return this._types[c]?En(u):u});return o.unshift(s),No(o)}}return ts.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||ts.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return En(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(cP(e))return n(e,r);const s=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(s){const o=s[1],a=parseInt(s[3]);return a>=0&&r.length!==a&&ts.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(c=>this._visit(o,c,n))}const i=this.types[e];return i?i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,r[a],n),o),{}):ts.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new Ni(e)}static getPrimaryType(e){return Ni.from(e).primaryType}static hashStruct(e,r,n){return Ni.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const s=mL[n];s||ts.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:s})}return r.sort((n,s)=>aP.indexOf(n.name)-aP.indexOf(s.name)),Ni.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return No(["0x1901",Ni.hashDomain(e),Ni.from(r).hash(n)])}static hash(e,r,n){return En(Ni.encode(e,r,n))}static resolveNames(e,r,n,s){return q4e(this,void 0,void 0,function*(){e=Ds(e);const i={};e.verifyingContract&&!Er(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Ni.from(r);o.visit(n,(a,c)=>(a==="address"&&!Er(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=yield s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:n}})}static getPayload(e,r,n){Ni.hashDomain(e);const s={},i=[];aP.forEach(c=>{const u=e[c];u!=null&&(s[c]=K4e[c](u),i.push({name:c,type:mL[c]}))});const o=Ni.from(r),a=Ds(r);return a.EIP712Domain?ts.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):a.EIP712Domain=i,o.encode(n),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(n,(c,u)=>{if(c.match(/^bytes(\d*)/))return je(Oe(u));if(c.match(/^u?int/))return Ue.from(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return typeof u!="string"&&ts.throwArgumentError("invalid string","value",u),u}return ts.throwArgumentError("unsupported type","type",c)})}}}const Z4e=Object.freeze(Object.defineProperty({__proto__:null,_TypedDataEncoder:Ni,dnsEncode:ine,ensNormalize:F4e,hashMessage:Vk,id:gh,isValidName:$4e,messagePrefix:one,namehash:U1},Symbol.toStringTag,{value:"Module"})),Xn=new ue(WE);class lne extends jh{}class dne extends jh{}class Y4e extends jh{}class V6 extends jh{static isIndexed(e){return!!(e&&e._isIndexed)}}const J4e={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function wL(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class EO{constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,xe(this,"fragments",r.map(n=>wl.from(n)).filter(n=>n!=null)),xe(this,"_abiCoder",Iu(new.target,"getAbiCoder")()),xe(this,"functions",{}),xe(this,"errors",{}),xe(this,"events",{}),xe(this,"structs",{}),this.fragments.forEach(n=>{let s=null;switch(n.type){case"constructor":if(this.deploy){Xn.warn("duplicate definition - constructor");return}xe(this,"deploy",n);return;case"function":s=this.functions;break;case"event":s=this.events;break;case"error":s=this.errors;break;default:return}let i=n.format();if(s[i]){Xn.warn("duplicate definition - "+i);return}s[i]=n}),this.deploy||xe(this,"deploy",Au.from({payable:!1,type:"constructor"})),xe(this,"_isInterface",!0)}format(e){e||(e=Rr.full),e===Rr.sighash&&Xn.throwArgumentError("interface does not support formatting sighash","format",e);const r=this.fragments.map(n=>n.format(e));return e===Rr.json?JSON.stringify(r.map(n=>JSON.parse(n))):r}static getAbiCoder(){return Xre}static getAddress(e){return sn(e)}static getSighash(e){return As(gh(e.format()),0,4)}static getEventTopic(e){return gh(e.format())}getFunction(e){if(Er(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];Xn.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),s=Object.keys(this.functions).filter(i=>i.split("(")[0]===n);return s.length===0?Xn.throwArgumentError("no matching function","name",n):s.length>1&&Xn.throwArgumentError("multiple matching functions","name",n),this.functions[s[0]]}const r=this.functions[xu.fromString(e).format()];return r||Xn.throwArgumentError("no matching function","signature",e),r}getEvent(e){if(Er(e)){const n=e.toLowerCase();for(const s in this.events)if(n===this.getEventTopic(s))return this.events[s];Xn.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),s=Object.keys(this.events).filter(i=>i.split("(")[0]===n);return s.length===0?Xn.throwArgumentError("no matching event","name",n):s.length>1&&Xn.throwArgumentError("multiple matching events","name",n),this.events[s[0]]}const r=this.events[gl.fromString(e).format()];return r||Xn.throwArgumentError("no matching event","signature",e),r}getError(e){if(Er(e)){const n=Iu(this.constructor,"getSighash");for(const s in this.errors){const i=this.errors[s];if(e===n(i))return this.errors[s]}Xn.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),s=Object.keys(this.errors).filter(i=>i.split("(")[0]===n);return s.length===0?Xn.throwArgumentError("no matching error","name",n):s.length>1&&Xn.throwArgumentError("multiple matching errors","name",n),this.errors[s[0]]}const r=this.errors[xu.fromString(e).format()];return r||Xn.throwArgumentError("no matching error","signature",e),r}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch{throw r}}return Iu(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),Iu(this.constructor,"getEventTopic")(e)}_decodeParams(e,r){return this._abiCoder.decode(e,r)}_encodeParams(e,r){return this._abiCoder.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){typeof e=="string"&&(e=this.getError(e));const n=Oe(r);return je(n.slice(0,4))!==this.getSighash(e)&&Xn.throwArgumentError(`data signature does not match error ${e.name}.`,"data",je(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,r){return typeof e=="string"&&(e=this.getError(e)),je(Mn([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionData(e,r){typeof e=="string"&&(e=this.getFunction(e));const n=Oe(r);return je(n.slice(0,4))!==this.getSighash(e)&&Xn.throwArgumentError(`data signature does not match function ${e.name}.`,"data",je(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,r){return typeof e=="string"&&(e=this.getFunction(e)),je(Mn([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionResult(e,r){typeof e=="string"&&(e=this.getFunction(e));let n=Oe(r),s=null,i="",o=null,a=null,c=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const u=je(n.slice(0,4)),l=J4e[u];if(l)o=this._abiCoder.decode(l.inputs,n.slice(4)),a=l.name,c=l.signature,l.reason&&(s=o[0]),a==="Error"?i=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(i=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const d=this.getError(u);o=this._abiCoder.decode(d.inputs,n.slice(4)),a=d.name,c=d.format()}catch{}break}}return Xn.throwError("call revert exception"+i,ue.errors.CALL_EXCEPTION,{method:e.format(),data:je(r),errorArgs:o,errorName:a,errorSignature:c,reason:s})}encodeFunctionResult(e,r){return typeof e=="string"&&(e=this.getFunction(e)),je(this._abiCoder.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){typeof e=="string"&&(e=this.getEvent(e)),r.length>e.inputs.length&&Xn.throwError("too many arguments for "+e.format(),ue.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let n=[];e.anonymous||n.push(this.getEventTopic(e));const s=(i,o)=>i.type==="string"?gh(o):i.type==="bytes"?En(je(o)):(i.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),i.type.match(/^u?int/)&&(o=Ue.from(o).toHexString()),i.type==="address"&&this._abiCoder.encode(["address"],[o]),Nn(je(o),32));for(r.forEach((i,o)=>{let a=e.inputs[o];if(!a.indexed){i!=null&&Xn.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?Xn.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?n.push(i.map(c=>s(a,c))):n.push(s(a,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){typeof e=="string"&&(e=this.getEvent(e));const n=[],s=[],i=[];return e.anonymous||n.push(this.getEventTopic(e)),r.length!==e.inputs.length&&Xn.throwArgumentError("event arguments/values mismatch","values",r),e.inputs.forEach((o,a)=>{const c=r[a];if(o.indexed)if(o.type==="string")n.push(gh(c));else if(o.type==="bytes")n.push(En(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:this._abiCoder.encode(s,i),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let f=this.getEventTopic(e);(!Er(n[0],32)||n[0].toLowerCase()!==f)&&Xn.throwError("fragment/topic mismatch",ue.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:f,value:n[0]}),n=n.slice(1)}let s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Gs.fromObject({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});let a=n!=null?this._abiCoder.decode(s,Mn(n)):null,c=this._abiCoder.decode(i,r,!0),u=[],l=0,d=0;e.inputs.forEach((f,p)=>{if(f.indexed)if(a==null)u[p]=new V6({_isIndexed:!0,hash:null});else if(o[p])u[p]=new V6({_isIndexed:!0,hash:a[d++]});else try{u[p]=a[d++]}catch(g){u[p]=g}else try{u[p]=c[l++]}catch(g){u[p]=g}if(f.name&&u[f.name]==null){const g=u[p];g instanceof Error?Object.defineProperty(u,f.name,{enumerable:!0,get:()=>{throw wL(`property ${JSON.stringify(f.name)}`,g)}}):u[f.name]=g}});for(let f=0;f<u.length;f++){const p=u[f];p instanceof Error&&Object.defineProperty(u,f,{enumerable:!0,get:()=>{throw wL(`index ${f}`,p)}})}return Object.freeze(u)}parseTransaction(e){let r=this.getFunction(e.data.substring(0,10).toLowerCase());return r?new dne({args:this._abiCoder.decode(r.inputs,"0x"+e.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:Ue.from(e.value||"0")}):null}parseLog(e){let r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new lne({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,e.data,e.topics)})}parseError(e){const r=je(e);let n=this.getError(r.substring(0,10).toLowerCase());return n?new Y4e({args:this._abiCoder.decode(n.inputs,"0x"+r.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const X4e=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:Jre,ConstructorFragment:Au,ErrorFragment:Fd,EventFragment:gl,FormatTypes:Rr,Fragment:wl,FunctionFragment:xu,Indexed:V6,Interface:EO,LogDescription:lne,ParamType:Gs,TransactionDescription:dne,checkResultErrors:jre,defaultAbiCoder:Xre},Symbol.toStringTag,{value:"Module"})),Q4e="abstract-provider/5.8.0";var eke=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const tke=new ue(Q4e);class rke extends jh{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class VE{constructor(){tke.checkAbstract(new.target,VE),xe(this,"_isProvider",!0)}getFeeData(){return eke(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield ps({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let n=null,s=null,i=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,i=Ue.from("1500000000"),s=e.baseFeePerGas.mul(2).add(i)),{lastBaseFeePerGas:n,maxFeePerGas:s,maxPriorityFeePerGas:i,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}}const nke="abstract-signer/5.8.0";var su=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const Nc=new ue(nke),ske=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],ike=[ue.errors.INSUFFICIENT_FUNDS,ue.errors.NONCE_EXPIRED,ue.errors.REPLACEMENT_UNDERPRICED];class Ky{constructor(){Nc.checkAbstract(new.target,Ky),xe(this,"_isSigner",!0)}getBalance(e){return su(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return su(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return su(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield ps(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return su(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield ps(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return su(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return su(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return su(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return su(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return su(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)ske.indexOf(n)===-1&&Nc.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=Ds(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&Nc.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return su(this,void 0,void 0,function*(){const r=yield ps(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(s=>su(this,void 0,void 0,function*(){if(s==null)return null;const i=yield this.resolveName(s);return i==null&&Nc.throwArgumentError("provided ENS name resolves to null","tx.to",s),i})),r.to.catch(s=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?Nc.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&Nc.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const s=yield this.getFeeData();if(r.type==null)if(s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const i=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=i,r.maxPriorityFeePerGas=i}else r.maxFeePerGas==null&&(r.maxFeePerGas=s.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=s.maxPriorityFeePerGas);else s.gasPrice!=null?(n&&Nc.throwError("network does not support EIP-1559",ue.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=s.gasPrice),r.type=0):Nc.throwError("failed to get consistent fee data",ue.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=s.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=s.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(s=>{if(ike.indexOf(s.code)>=0)throw s;return Nc.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ue.errors.UNPREDICTABLE_GAS_LIMIT,{error:s,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(s=>(s[1]!==0&&s[0]!==s[1]&&Nc.throwArgumentError("chainId address mismatch","transaction",e),s[0])),yield ps(r)})}_checkProvider(e){this.provider||Nc.throwError("missing provider",ue.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class Gk extends Ky{constructor(e,r){super(),xe(this,"address",e),xe(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{Nc.throwError(e,ue.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new Gk(this.address,e)}}var uP={},bn={},lP,vL;function GE(){if(vL)return lP;vL=1,lP=t;function t(e,r){if(!e)throw new Error(r||"Assertion failed")}return t.equal=function(r,n,s){if(r!=n)throw new Error(s||"Assertion failed: "+r+" != "+n)},lP}var _2={exports:{}},EL;function oke(){return EL||(EL=1,typeof Object.create=="function"?_2.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:_2.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}),_2.exports}var _L;function ql(){if(_L)return bn;_L=1;var t=GE(),e=oke();bn.inherits=e;function r(B,A){return(B.charCodeAt(A)&64512)!==55296||A<0||A+1>=B.length?!1:(B.charCodeAt(A+1)&64512)===56320}function n(B,A){if(Array.isArray(B))return B.slice();if(!B)return[];var m=[];if(typeof B=="string")if(A){if(A==="hex")for(B=B.replace(/[^a-z0-9]+/ig,""),B.length%2!==0&&(B="0"+B),w=0;w<B.length;w+=2)m.push(parseInt(B[w]+B[w+1],16))}else for(var b=0,w=0;w<B.length;w++){var x=B.charCodeAt(w);x<128?m[b++]=x:x<2048?(m[b++]=x>>6|192,m[b++]=x&63|128):r(B,w)?(x=65536+((x&1023)<<10)+(B.charCodeAt(++w)&1023),m[b++]=x>>18|240,m[b++]=x>>12&63|128,m[b++]=x>>6&63|128,m[b++]=x&63|128):(m[b++]=x>>12|224,m[b++]=x>>6&63|128,m[b++]=x&63|128)}else for(w=0;w<B.length;w++)m[w]=B[w]|0;return m}bn.toArray=n;function s(B){for(var A="",m=0;m<B.length;m++)A+=a(B[m].toString(16));return A}bn.toHex=s;function i(B){var A=B>>>24|B>>>8&65280|B<<8&16711680|(B&255)<<24;return A>>>0}bn.htonl=i;function o(B,A){for(var m="",b=0;b<B.length;b++){var w=B[b];A==="little"&&(w=i(w)),m+=c(w.toString(16))}return m}bn.toHex32=o;function a(B){return B.length===1?"0"+B:B}bn.zero2=a;function c(B){return B.length===7?"0"+B:B.length===6?"00"+B:B.length===5?"000"+B:B.length===4?"0000"+B:B.length===3?"00000"+B:B.length===2?"000000"+B:B.length===1?"0000000"+B:B}bn.zero8=c;function u(B,A,m,b){var w=m-A;t(w%4===0);for(var x=new Array(w/4),M=0,k=A;M<x.length;M++,k+=4){var j;b==="big"?j=B[k]<<24|B[k+1]<<16|B[k+2]<<8|B[k+3]:j=B[k+3]<<24|B[k+2]<<16|B[k+1]<<8|B[k],x[M]=j>>>0}return x}bn.join32=u;function l(B,A){for(var m=new Array(B.length*4),b=0,w=0;b<B.length;b++,w+=4){var x=B[b];A==="big"?(m[w]=x>>>24,m[w+1]=x>>>16&255,m[w+2]=x>>>8&255,m[w+3]=x&255):(m[w+3]=x>>>24,m[w+2]=x>>>16&255,m[w+1]=x>>>8&255,m[w]=x&255)}return m}bn.split32=l;function d(B,A){return B>>>A|B<<32-A}bn.rotr32=d;function f(B,A){return B<<A|B>>>32-A}bn.rotl32=f;function p(B,A){return B+A>>>0}bn.sum32=p;function g(B,A,m){return B+A+m>>>0}bn.sum32_3=g;function h(B,A,m,b){return B+A+m+b>>>0}bn.sum32_4=h;function y(B,A,m,b,w){return B+A+m+b+w>>>0}bn.sum32_5=y;function E(B,A,m,b){var w=B[A],x=B[A+1],M=b+x>>>0,k=(M<b?1:0)+m+w;B[A]=k>>>0,B[A+1]=M}bn.sum64=E;function S(B,A,m,b){var w=A+b>>>0,x=(w<A?1:0)+B+m;return x>>>0}bn.sum64_hi=S;function C(B,A,m,b){var w=A+b;return w>>>0}bn.sum64_lo=C;function _(B,A,m,b,w,x,M,k){var j=0,N=A;N=N+b>>>0,j+=N<A?1:0,N=N+x>>>0,j+=N<x?1:0,N=N+k>>>0,j+=N<k?1:0;var v=B+m+w+M+j;return v>>>0}bn.sum64_4_hi=_;function T(B,A,m,b,w,x,M,k){var j=A+b+x+k;return j>>>0}bn.sum64_4_lo=T;function P(B,A,m,b,w,x,M,k,j,N){var v=0,R=A;R=R+b>>>0,v+=R<A?1:0,R=R+x>>>0,v+=R<x?1:0,R=R+k>>>0,v+=R<k?1:0,R=R+N>>>0,v+=R<N?1:0;var $=B+m+w+M+j+v;return $>>>0}bn.sum64_5_hi=P;function D(B,A,m,b,w,x,M,k,j,N){var v=A+b+x+k+N;return v>>>0}bn.sum64_5_lo=D;function F(B,A,m){var b=A<<32-m|B>>>m;return b>>>0}bn.rotr64_hi=F;function I(B,A,m){var b=B<<32-m|A>>>m;return b>>>0}bn.rotr64_lo=I;function U(B,A,m){return B>>>m}bn.shr64_hi=U;function L(B,A,m){var b=B<<32-m|A>>>m;return b>>>0}return bn.shr64_lo=L,bn}var dP={},AL;function KE(){if(AL)return dP;AL=1;var t=ql(),e=GE();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return dP.BlockHash=r,r.prototype.update=function(s,i){if(s=t.toArray(s,i),this.pending?this.pending=this.pending.concat(s):this.pending=s,this.pendingTotal+=s.length,this.pending.length>=this._delta8){s=this.pending;var o=s.length%this._delta8;this.pending=s.slice(s.length-o,s.length),this.pending.length===0&&(this.pending=null),s=t.join32(s,0,s.length-o,this.endian);for(var a=0;a<s.length;a+=this._delta32)this._update(s,a,a+this._delta32)}return this},r.prototype.digest=function(s){return this.update(this._pad()),e(this.pending===null),this._digest(s)},r.prototype._pad=function(){var s=this.pendingTotal,i=this._delta8,o=i-(s+this.padLength)%i,a=new Array(o+this.padLength);a[0]=128;for(var c=1;c<o;c++)a[c]=0;if(s<<=3,this.endian==="big"){for(var u=8;u<this.padLength;u++)a[c++]=0;a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=s>>>24&255,a[c++]=s>>>16&255,a[c++]=s>>>8&255,a[c++]=s&255}else for(a[c++]=s&255,a[c++]=s>>>8&255,a[c++]=s>>>16&255,a[c++]=s>>>24&255,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,u=8;u<this.padLength;u++)a[c++]=0;return a},dP}var fp={},el={},xL;function fne(){if(xL)return el;xL=1;var t=ql(),e=t.rotr32;function r(l,d,f,p){if(l===0)return n(d,f,p);if(l===1||l===3)return i(d,f,p);if(l===2)return s(d,f,p)}el.ft_1=r;function n(l,d,f){return l&d^~l&f}el.ch32=n;function s(l,d,f){return l&d^l&f^d&f}el.maj32=s;function i(l,d,f){return l^d^f}el.p32=i;function o(l){return e(l,2)^e(l,13)^e(l,22)}el.s0_256=o;function a(l){return e(l,6)^e(l,11)^e(l,25)}el.s1_256=a;function c(l){return e(l,7)^e(l,18)^l>>>3}el.g0_256=c;function u(l){return e(l,17)^e(l,19)^l>>>10}return el.g1_256=u,el}var fP,CL;function ake(){if(CL)return fP;CL=1;var t=ql(),e=KE(),r=fne(),n=t.rotl32,s=t.sum32,i=t.sum32_5,o=r.ft_1,a=e.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function u(){if(!(this instanceof u))return new u;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(u,a),fP=u,u.blockSize=512,u.outSize=160,u.hmacStrength=80,u.padLength=64,u.prototype._update=function(d,f){for(var p=this.W,g=0;g<16;g++)p[g]=d[f+g];for(;g<p.length;g++)p[g]=n(p[g-3]^p[g-8]^p[g-14]^p[g-16],1);var h=this.h[0],y=this.h[1],E=this.h[2],S=this.h[3],C=this.h[4];for(g=0;g<p.length;g++){var _=~~(g/20),T=i(n(h,5),o(_,y,E,S),C,p[g],c[_]);C=S,S=E,E=n(y,30),y=h,h=T}this.h[0]=s(this.h[0],h),this.h[1]=s(this.h[1],y),this.h[2]=s(this.h[2],E),this.h[3]=s(this.h[3],S),this.h[4]=s(this.h[4],C)},u.prototype._digest=function(d){return d==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},fP}var hP,SL;function hne(){if(SL)return hP;SL=1;var t=ql(),e=KE(),r=fne(),n=GE(),s=t.sum32,i=t.sum32_4,o=t.sum32_5,a=r.ch32,c=r.maj32,u=r.s0_256,l=r.s1_256,d=r.g0_256,f=r.g1_256,p=e.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function h(){if(!(this instanceof h))return new h;p.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}return t.inherits(h,p),hP=h,h.blockSize=512,h.outSize=256,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(E,S){for(var C=this.W,_=0;_<16;_++)C[_]=E[S+_];for(;_<C.length;_++)C[_]=i(f(C[_-2]),C[_-7],d(C[_-15]),C[_-16]);var T=this.h[0],P=this.h[1],D=this.h[2],F=this.h[3],I=this.h[4],U=this.h[5],L=this.h[6],B=this.h[7];for(n(this.k.length===C.length),_=0;_<C.length;_++){var A=o(B,l(I),a(I,U,L),this.k[_],C[_]),m=s(u(T),c(T,P,D));B=L,L=U,U=I,I=s(F,A),F=D,D=P,P=T,T=s(A,m)}this.h[0]=s(this.h[0],T),this.h[1]=s(this.h[1],P),this.h[2]=s(this.h[2],D),this.h[3]=s(this.h[3],F),this.h[4]=s(this.h[4],I),this.h[5]=s(this.h[5],U),this.h[6]=s(this.h[6],L),this.h[7]=s(this.h[7],B)},h.prototype._digest=function(E){return E==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},hP}var pP,IL;function cke(){if(IL)return pP;IL=1;var t=ql(),e=hne();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(r,e),pP=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(s){return s==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},pP}var gP,TL;function pne(){if(TL)return gP;TL=1;var t=ql(),e=KE(),r=GE(),n=t.rotr64_hi,s=t.rotr64_lo,i=t.shr64_hi,o=t.shr64_lo,a=t.sum64,c=t.sum64_hi,u=t.sum64_lo,l=t.sum64_4_hi,d=t.sum64_4_lo,f=t.sum64_5_hi,p=t.sum64_5_lo,g=e.BlockHash,h=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=h,this.W=new Array(160)}t.inherits(y,g),gP=y,y.blockSize=1024,y.outSize=512,y.hmacStrength=192,y.padLength=128,y.prototype._prepareBlock=function(m,b){for(var w=this.W,x=0;x<32;x++)w[x]=m[b+x];for(;x<w.length;x+=2){var M=L(w[x-4],w[x-3]),k=B(w[x-4],w[x-3]),j=w[x-14],N=w[x-13],v=I(w[x-30],w[x-29]),R=U(w[x-30],w[x-29]),$=w[x-32],O=w[x-31];w[x]=l(M,k,j,N,v,R,$,O),w[x+1]=d(M,k,j,N,v,R,$,O)}},y.prototype._update=function(m,b){this._prepareBlock(m,b);var w=this.W,x=this.h[0],M=this.h[1],k=this.h[2],j=this.h[3],N=this.h[4],v=this.h[5],R=this.h[6],$=this.h[7],O=this.h[8],H=this.h[9],W=this.h[10],G=this.h[11],K=this.h[12],Q=this.h[13],re=this.h[14],de=this.h[15];r(this.k.length===w.length);for(var le=0;le<w.length;le+=2){var se=re,be=de,We=D(O,H),Ne=F(O,H),Be=E(O,H,W,G,K),At=S(O,H,W,G,K,Q),Ee=this.k[le],fe=this.k[le+1],Mt=w[le],bt=w[le+1],jt=f(se,be,We,Ne,Be,At,Ee,fe,Mt,bt),ge=p(se,be,We,Ne,Be,At,Ee,fe,Mt,bt);se=T(x,M),be=P(x,M),We=C(x,M,k,j,N),Ne=_(x,M,k,j,N,v);var ve=c(se,be,We,Ne),V=u(se,be,We,Ne);re=K,de=Q,K=W,Q=G,W=O,G=H,O=c(R,$,jt,ge),H=u($,$,jt,ge),R=N,$=v,N=k,v=j,k=x,j=M,x=c(jt,ge,ve,V),M=u(jt,ge,ve,V)}a(this.h,0,x,M),a(this.h,2,k,j),a(this.h,4,N,v),a(this.h,6,R,$),a(this.h,8,O,H),a(this.h,10,W,G),a(this.h,12,K,Q),a(this.h,14,re,de)},y.prototype._digest=function(m){return m==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function E(A,m,b,w,x){var M=A&b^~A&x;return M<0&&(M+=4294967296),M}function S(A,m,b,w,x,M){var k=m&w^~m&M;return k<0&&(k+=4294967296),k}function C(A,m,b,w,x){var M=A&b^A&x^b&x;return M<0&&(M+=4294967296),M}function _(A,m,b,w,x,M){var k=m&w^m&M^w&M;return k<0&&(k+=4294967296),k}function T(A,m){var b=n(A,m,28),w=n(m,A,2),x=n(m,A,7),M=b^w^x;return M<0&&(M+=4294967296),M}function P(A,m){var b=s(A,m,28),w=s(m,A,2),x=s(m,A,7),M=b^w^x;return M<0&&(M+=4294967296),M}function D(A,m){var b=n(A,m,14),w=n(A,m,18),x=n(m,A,9),M=b^w^x;return M<0&&(M+=4294967296),M}function F(A,m){var b=s(A,m,14),w=s(A,m,18),x=s(m,A,9),M=b^w^x;return M<0&&(M+=4294967296),M}function I(A,m){var b=n(A,m,1),w=n(A,m,8),x=i(A,m,7),M=b^w^x;return M<0&&(M+=4294967296),M}function U(A,m){var b=s(A,m,1),w=s(A,m,8),x=o(A,m,7),M=b^w^x;return M<0&&(M+=4294967296),M}function L(A,m){var b=n(A,m,19),w=n(m,A,29),x=i(A,m,6),M=b^w^x;return M<0&&(M+=4294967296),M}function B(A,m){var b=s(A,m,19),w=s(m,A,29),x=o(A,m,6),M=b^w^x;return M<0&&(M+=4294967296),M}return gP}var mP,NL;function uke(){if(NL)return mP;NL=1;var t=ql(),e=pne();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(r,e),mP=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(s){return s==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},mP}var PL;function lke(){return PL||(PL=1,fp.sha1=ake(),fp.sha224=cke(),fp.sha256=hne(),fp.sha384=uke(),fp.sha512=pne()),fp}var yP={},RL;function dke(){if(RL)return yP;RL=1;var t=ql(),e=KE(),r=t.rotl32,n=t.sum32,s=t.sum32_3,i=t.sum32_4,o=e.BlockHash;function a(){if(!(this instanceof a))return new a;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(a,o),yP.ripemd160=a,a.blockSize=512,a.outSize=160,a.hmacStrength=192,a.padLength=64,a.prototype._update=function(y,E){for(var S=this.h[0],C=this.h[1],_=this.h[2],T=this.h[3],P=this.h[4],D=S,F=C,I=_,U=T,L=P,B=0;B<80;B++){var A=n(r(i(S,c(B,C,_,T),y[d[B]+E],u(B)),p[B]),P);S=P,P=T,T=r(_,10),_=C,C=A,A=n(r(i(D,c(79-B,F,I,U),y[f[B]+E],l(B)),g[B]),L),D=L,L=U,U=r(I,10),I=F,F=A}A=s(this.h[1],_,U),this.h[1]=s(this.h[2],T,L),this.h[2]=s(this.h[3],P,D),this.h[3]=s(this.h[4],S,F),this.h[4]=s(this.h[0],C,I),this.h[0]=A},a.prototype._digest=function(y){return y==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function c(h,y,E,S){return h<=15?y^E^S:h<=31?y&E|~y&S:h<=47?(y|~E)^S:h<=63?y&S|E&~S:y^(E|~S)}function u(h){return h<=15?0:h<=31?1518500249:h<=47?1859775393:h<=63?2400959708:2840853838}function l(h){return h<=15?1352829926:h<=31?1548603684:h<=47?1836072691:h<=63?2053994217:0}var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return yP}var bP,OL;function fke(){if(OL)return bP;OL=1;var t=ql(),e=GE();function r(n,s,i){if(!(this instanceof r))return new r(n,s,i);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(s,i))}return bP=r,r.prototype._init=function(s){s.length>this.blockSize&&(s=new this.Hash().update(s).digest()),e(s.length<=this.blockSize);for(var i=s.length;i<this.blockSize;i++)s.push(0);for(i=0;i<s.length;i++)s[i]^=54;for(this.inner=new this.Hash().update(s),i=0;i<s.length;i++)s[i]^=106;this.outer=new this.Hash().update(s)},r.prototype.update=function(s,i){return this.inner.update(s,i),this},r.prototype.digest=function(s){return this.outer.update(this.inner.digest()),this.outer.digest(s)},bP}var kL;function hke(){return kL||(kL=1,(function(t){var e=t;e.utils=ql(),e.common=KE(),e.sha=lke(),e.ripemd=dke(),e.hmac=fke(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(uP)),uP}var pke=hke();const oa=Ea(pke);function Zy(t,e,r){return r={path:e,exports:{},require:function(n,s){return gke(n,s??r.path)}},t(r,r.exports),r.exports}function gke(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Kk=gne;function gne(t,e){if(!t)throw new Error(e||"Assertion failed")}gne.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Tu=Zy(function(t,e){var r=e;function n(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var c=[];if(typeof o!="string"){for(var u=0;u<o.length;u++)c[u]=o[u]|0;return c}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var u=0;u<o.length;u+=2)c.push(parseInt(o[u]+o[u+1],16))}else for(var u=0;u<o.length;u++){var l=o.charCodeAt(u),d=l>>8,f=l&255;d?c.push(d,f):c.push(f)}return c}r.toArray=n;function s(o){return o.length===1?"0"+o:o}r.zero2=s;function i(o){for(var a="",c=0;c<o.length;c++)a+=s(o[c].toString(16));return a}r.toHex=i,r.encode=function(a,c){return c==="hex"?i(a):a}}),uc=Zy(function(t,e){var r=e;r.assert=Kk,r.toArray=Tu.toArray,r.zero2=Tu.zero2,r.toHex=Tu.toHex,r.encode=Tu.encode;function n(c,u,l){var d=new Array(Math.max(c.bitLength(),l)+1),f;for(f=0;f<d.length;f+=1)d[f]=0;var p=1<<u+1,g=c.clone();for(f=0;f<d.length;f++){var h,y=g.andln(p-1);g.isOdd()?(y>(p>>1)-1?h=(p>>1)-y:h=y,g.isubn(h)):h=0,d[f]=h,g.iushrn(1)}return d}r.getNAF=n;function s(c,u){var l=[[],[]];c=c.clone(),u=u.clone();for(var d=0,f=0,p;c.cmpn(-d)>0||u.cmpn(-f)>0;){var g=c.andln(3)+d&3,h=u.andln(3)+f&3;g===3&&(g=-1),h===3&&(h=-1);var y;(g&1)===0?y=0:(p=c.andln(7)+d&7,(p===3||p===5)&&h===2?y=-g:y=g),l[0].push(y);var E;(h&1)===0?E=0:(p=u.andln(7)+f&7,(p===3||p===5)&&g===2?E=-h:E=h),l[1].push(E),2*d===y+1&&(d=1-d),2*f===E+1&&(f=1-f),c.iushrn(1),u.iushrn(1)}return l}r.getJSF=s;function i(c,u,l){var d="_"+u;c.prototype[u]=function(){return this[d]!==void 0?this[d]:this[d]=l.call(this)}}r.cachedProperty=i;function o(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=o;function a(c){return new Ft(c,"hex","le")}r.intFromLE=a}),G6=uc.getNAF,mke=uc.getJSF,K6=uc.assert;function Fh(t,e){this.type=t,this.p=new Ft(e.p,16),this.red=e.prime?Ft.red(e.prime):Ft.mont(this.p),this.zero=new Ft(0).toRed(this.red),this.one=new Ft(1).toRed(this.red),this.two=new Ft(2).toRed(this.red),this.n=e.n&&new Ft(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var X0=Fh;Fh.prototype.point=function(){throw new Error("Not implemented")};Fh.prototype.validate=function(){throw new Error("Not implemented")};Fh.prototype._fixedNafMul=function(e,r){K6(e.precomputed);var n=e._getDoubles(),s=G6(r,1,this._bitLength),i=(1<<n.step+1)-(n.step%2===0?2:1);i/=3;var o=[],a,c;for(a=0;a<s.length;a+=n.step){c=0;for(var u=a+n.step-1;u>=a;u--)c=(c<<1)+s[u];o.push(c)}for(var l=this.jpoint(null,null,null),d=this.jpoint(null,null,null),f=i;f>0;f--){for(a=0;a<o.length;a++)c=o[a],c===f?d=d.mixedAdd(n.points[a]):c===-f&&(d=d.mixedAdd(n.points[a].neg()));l=l.add(d)}return l.toP()};Fh.prototype._wnafMul=function(e,r){var n=4,s=e._getNAFPoints(n);n=s.wnd;for(var i=s.points,o=G6(r,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var u=0;c>=0&&o[c]===0;c--)u++;if(c>=0&&u++,a=a.dblp(u),c<0)break;var l=o[c];K6(l!==0),e.type==="affine"?l>0?a=a.mixedAdd(i[l-1>>1]):a=a.mixedAdd(i[-l-1>>1].neg()):l>0?a=a.add(i[l-1>>1]):a=a.add(i[-l-1>>1].neg())}return e.type==="affine"?a.toP():a};Fh.prototype._wnafMulAdd=function(e,r,n,s,i){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,u=0,l,d,f;for(l=0;l<s;l++){f=r[l];var p=f._getNAFPoints(e);o[l]=p.wnd,a[l]=p.points}for(l=s-1;l>=1;l-=2){var g=l-1,h=l;if(o[g]!==1||o[h]!==1){c[g]=G6(n[g],o[g],this._bitLength),c[h]=G6(n[h],o[h],this._bitLength),u=Math.max(c[g].length,u),u=Math.max(c[h].length,u);continue}var y=[r[g],null,null,r[h]];r[g].y.cmp(r[h].y)===0?(y[1]=r[g].add(r[h]),y[2]=r[g].toJ().mixedAdd(r[h].neg())):r[g].y.cmp(r[h].y.redNeg())===0?(y[1]=r[g].toJ().mixedAdd(r[h]),y[2]=r[g].add(r[h].neg())):(y[1]=r[g].toJ().mixedAdd(r[h]),y[2]=r[g].toJ().mixedAdd(r[h].neg()));var E=[-3,-1,-5,-7,0,7,5,1,3],S=mke(n[g],n[h]);for(u=Math.max(S[0].length,u),c[g]=new Array(u),c[h]=new Array(u),d=0;d<u;d++){var C=S[0][d]|0,_=S[1][d]|0;c[g][d]=E[(C+1)*3+(_+1)],c[h][d]=0,a[g]=y}}var T=this.jpoint(null,null,null),P=this._wnafT4;for(l=u;l>=0;l--){for(var D=0;l>=0;){var F=!0;for(d=0;d<s;d++)P[d]=c[d][l]|0,P[d]!==0&&(F=!1);if(!F)break;D++,l--}if(l>=0&&D++,T=T.dblp(D),l<0)break;for(d=0;d<s;d++){var I=P[d];I!==0&&(I>0?f=a[d][I-1>>1]:I<0&&(f=a[d][-I-1>>1].neg()),f.type==="affine"?T=T.mixedAdd(f):T=T.add(f))}}for(l=0;l<s;l++)a[l]=null;return i?T:T.toP()};function Wc(t,e){this.curve=t,this.type=e,this.precomputed=null}Fh.BasePoint=Wc;Wc.prototype.eq=function(){throw new Error("Not implemented")};Wc.prototype.validate=function(){return this.curve.validate(this)};Fh.prototype.decodePoint=function(e,r){e=uc.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?K6(e[e.length-1]%2===0):e[0]===7&&K6(e[e.length-1]%2===1);var s=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return s}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Wc.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Wc.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Wc.prototype.encode=function(e,r){return uc.encode(this._encode(r),e)};Wc.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Wc.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Wc.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],s=this,i=0;i<r;i+=e){for(var o=0;o<e;o++)s=s.dbl();n.push(s)}return{step:e,points:n}};Wc.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,s=n===1?null:this.dbl(),i=1;i<n;i++)r[i]=r[i-1].add(s);return{wnd:e,points:r}};Wc.prototype._getBeta=function(){return null};Wc.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var Zk=Zy(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var s=function(){};s.prototype=n.prototype,r.prototype=new s,r.prototype.constructor=r}}}),yke=uc.assert;function Vc(t){X0.call(this,"short",t),this.a=new Ft(t.a,16).toRed(this.red),this.b=new Ft(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Zk(Vc,X0);var bke=Vc;Vc.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Ft(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);r=s[0].cmp(s[1])<0?s[0]:s[1],r=r.toRed(this.red)}if(e.lambda)n=new Ft(e.lambda,16);else{var i=this._getEndoRoots(this.n);this.g.mul(i[0]).x.cmp(this.g.x.redMul(r))===0?n=i[0]:(n=i[1],yke(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new Ft(a.a,16),b:new Ft(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};Vc.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Ft.mont(e),n=new Ft(2).toRed(r).redInvm(),s=n.redNeg(),i=new Ft(3).toRed(r).redNeg().redSqrt().redMul(n),o=s.redAdd(i).fromRed(),a=s.redSub(i).fromRed();return[o,a]};Vc.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,s=this.n.clone(),i=new Ft(1),o=new Ft(0),a=new Ft(0),c=new Ft(1),u,l,d,f,p,g,h,y=0,E,S;n.cmpn(0)!==0;){var C=s.div(n);E=s.sub(C.mul(n)),S=a.sub(C.mul(i));var _=c.sub(C.mul(o));if(!d&&E.cmp(r)<0)u=h.neg(),l=i,d=E.neg(),f=S;else if(d&&++y===2)break;h=E,s=n,n=E,a=i,i=S,c=o,o=_}p=E.neg(),g=S;var T=d.sqr().add(f.sqr()),P=p.sqr().add(g.sqr());return P.cmp(T)>=0&&(p=u,g=l),d.negative&&(d=d.neg(),f=f.neg()),p.negative&&(p=p.neg(),g=g.neg()),[{a:d,b:f},{a:p,b:g}]};Vc.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],s=r[1],i=s.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=i.mul(n.a),c=o.mul(s.a),u=i.mul(n.b),l=o.mul(s.b),d=e.sub(a).sub(c),f=u.add(l).neg();return{k1:d,k2:f}};Vc.prototype.pointFromX=function(e,r){e=new Ft(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=n.redSqrt();if(s.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var i=s.fromRed().isOdd();return(r&&!i||!r&&i)&&(s=s.redNeg()),this.point(e,s)};Vc.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,s=this.a.redMul(r),i=r.redSqr().redMul(r).redIAdd(s).redIAdd(this.b);return n.redSqr().redISub(i).cmpn(0)===0};Vc.prototype._endoWnafMulAdd=function(e,r,n){for(var s=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],u=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),s[o*2]=c,s[o*2+1]=u,i[o*2]=a.k1,i[o*2+1]=a.k2}for(var l=this._wnafMulAdd(1,s,i,o*2,n),d=0;d<o*2;d++)s[d]=null,i[d]=null;return l};function di(t,e,r,n){X0.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Ft(e,16),this.y=new Ft(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Zk(di,X0.BasePoint);Vc.prototype.point=function(e,r,n){return new di(this,e,r,n)};Vc.prototype.pointFromJSON=function(e,r){return di.fromJSON(this,e,r)};di.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,s=function(i){return n.point(i.x.redMul(n.endo.beta),i.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return r}};di.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};di.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var s=e.point(r[0],r[1],n);if(!r[2])return s;function i(a){return e.point(a[0],a[1],n)}var o=r[2];return s.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[s].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[s].concat(o.naf.points.map(i))}},s};di.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};di.prototype.isInfinity=function(){return this.inf};di.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),s=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,s)};di.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),s=e.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(s),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};di.prototype.getX=function(){return this.x.fromRed()};di.prototype.getY=function(){return this.y.fromRed()};di.prototype.mul=function(e){return e=new Ft(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};di.prototype.mulAdd=function(e,r,n){var s=[this,r],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(s,i):this.curve._wnafMulAdd(1,s,i,2)};di.prototype.jmulAdd=function(e,r,n){var s=[this,r],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(s,i,!0):this.curve._wnafMulAdd(1,s,i,2,!0)};di.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};di.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,s=function(i){return i.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(s)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(s)}}}return r};di.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function ji(t,e,r,n){X0.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Ft(0)):(this.x=new Ft(e,16),this.y=new Ft(r,16),this.z=new Ft(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Zk(ji,X0.BasePoint);Vc.prototype.jpoint=function(e,r,n){return new ji(this,e,r,n)};ji.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),s=this.y.redMul(r).redMul(e);return this.curve.point(n,s)};ji.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};ji.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),s=this.x.redMul(r),i=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=s.redSub(i),u=o.redSub(a);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=c.redSqr(),d=l.redMul(c),f=s.redMul(l),p=u.redSqr().redIAdd(d).redISub(f).redISub(f),g=u.redMul(f.redISub(p)).redISub(o.redMul(d)),h=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(p,g,h)};ji.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,s=e.x.redMul(r),i=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(s),c=i.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),l=u.redMul(a),d=n.redMul(u),f=c.redSqr().redIAdd(l).redISub(d).redISub(d),p=c.redMul(d.redISub(f)).redISub(i.redMul(l)),g=this.z.redMul(a);return this.curve.jpoint(f,p,g)};ji.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var s=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,c=this.z,u=c.redSqr().redSqr(),l=a.redAdd(a);for(r=0;r<e;r++){var d=o.redSqr(),f=l.redSqr(),p=f.redSqr(),g=d.redAdd(d).redIAdd(d).redIAdd(s.redMul(u)),h=o.redMul(f),y=g.redSqr().redISub(h.redAdd(h)),E=h.redISub(y),S=g.redMul(E);S=S.redIAdd(S).redISub(p);var C=l.redMul(c);r+1<e&&(u=u.redMul(p)),o=y,c=C,l=S}return this.curve.jpoint(o,l.redMul(i),c)};ji.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};ji.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var s=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(s).redISub(o);a=a.redIAdd(a);var c=s.redAdd(s).redIAdd(s),u=c.redSqr().redISub(a).redISub(a),l=o.redIAdd(o);l=l.redIAdd(l),l=l.redIAdd(l),e=u,r=c.redMul(a.redISub(u)).redISub(l),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),f=this.y.redSqr(),p=f.redSqr(),g=this.x.redAdd(f).redSqr().redISub(d).redISub(p);g=g.redIAdd(g);var h=d.redAdd(d).redIAdd(d),y=h.redSqr(),E=p.redIAdd(p);E=E.redIAdd(E),E=E.redIAdd(E),e=y.redISub(g).redISub(g),r=h.redMul(g.redISub(e)).redISub(E),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};ji.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var s=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(s).redISub(o);a=a.redIAdd(a);var c=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),u=c.redSqr().redISub(a).redISub(a);e=u;var l=o.redIAdd(o);l=l.redIAdd(l),l=l.redIAdd(l),r=c.redMul(a.redISub(u)).redISub(l),n=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),f=this.y.redSqr(),p=this.x.redMul(f),g=this.x.redSub(d).redMul(this.x.redAdd(d));g=g.redAdd(g).redIAdd(g);var h=p.redIAdd(p);h=h.redIAdd(h);var y=h.redAdd(h);e=g.redSqr().redISub(y),n=this.y.redAdd(this.z).redSqr().redISub(f).redISub(d);var E=f.redSqr();E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E),r=g.redMul(h.redISub(e)).redISub(E)}return this.curve.jpoint(e,r,n)};ji.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,s=this.z,i=s.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),u=r.redAdd(r);u=u.redIAdd(u);var l=u.redMul(a),d=c.redSqr().redISub(l.redAdd(l)),f=l.redISub(d),p=a.redSqr();p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var g=c.redMul(f).redISub(p),h=n.redAdd(n).redMul(s);return this.curve.jpoint(d,g,h)};ji.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),s=r.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(s);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),u=s.redIAdd(s);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var l=i.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(u),d=r.redMul(l);d=d.redIAdd(d),d=d.redIAdd(d);var f=this.x.redMul(c).redISub(d);f=f.redIAdd(f),f=f.redIAdd(f);var p=this.y.redMul(l.redMul(u.redISub(l)).redISub(a.redMul(c)));p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var g=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(f,p,g)};ji.prototype.mul=function(e,r){return e=new Ft(e,r),this.curve._wnafMul(this,e)};ji.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var s=r.redMul(this.z),i=n.redMul(e.z);return this.y.redMul(i).redISub(e.y.redMul(s)).cmpn(0)===0};ji.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var s=e.clone(),i=this.curve.redN.redMul(r);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),this.x.cmp(n)===0)return!0}};ji.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};ji.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var xI=Zy(function(t,e){var r=e;r.base=X0,r.short=bke,r.mont=null,r.edwards=null}),CI=Zy(function(t,e){var r=e,n=uc.assert;function s(a){a.type==="short"?this.curve=new xI.short(a):a.type==="edwards"?this.curve=new xI.edwards(a):this.curve=new xI.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=s;function i(a,c){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var u=new s(c);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:u}),u}})}i("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:oa.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),i("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:oa.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),i("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:oa.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),i("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:oa.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),i("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:oa.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),i("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:oa.sha256,gRed:!1,g:["9"]}),i("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:oa.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}i("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:oa.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function Th(t){if(!(this instanceof Th))return new Th(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Tu.toArray(t.entropy,t.entropyEnc||"hex"),r=Tu.toArray(t.nonce,t.nonceEnc||"hex"),n=Tu.toArray(t.pers,t.persEnc||"hex");Kk(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var mne=Th;Th.prototype._init=function(e,r,n){var s=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656};Th.prototype._hmac=function(){return new oa.hmac(this.hash,this.K)};Th.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Th.prototype.reseed=function(e,r,n,s){typeof r!="string"&&(s=n,n=r,r=null),e=Tu.toArray(e,r),n=Tu.toArray(n,s),Kk(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Th.prototype.generate=function(e,r,n,s){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(s=n,n=r,r=null),n&&(n=Tu.toArray(n,s||"hex"),this._update(n));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(n),this._reseed++,Tu.encode(o,r)};var _O=uc.assert;function go(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Yk=go;go.fromPublic=function(e,r,n){return r instanceof go?r:new go(e,{pub:r,pubEnc:n})};go.fromPrivate=function(e,r,n){return r instanceof go?r:new go(e,{priv:r,privEnc:n})};go.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};go.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};go.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};go.prototype._importPrivate=function(e,r){this.priv=new Ft(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};go.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?_O(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&_O(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};go.prototype.derive=function(e){return e.validate()||_O(e.validate(),"public point not validated"),e.mul(this.priv).getX()};go.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};go.prototype.verify=function(e,r,n){return this.ec.verify(e,r,this,void 0,n)};go.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var wke=uc.assert;function aT(t,e){if(t instanceof aT)return t;this._importDER(t,e)||(wke(t.r&&t.s,"Signature without r or s"),this.r=new Ft(t.r,16),this.s=new Ft(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var cT=aT;function vke(){this.place=0}function wP(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4||t[e.place]===0)return!1;for(var s=0,i=0,o=e.place;i<n;i++,o++)s<<=8,s|=t[o],s>>>=0;return s<=127?!1:(e.place=o,s)}function BL(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}aT.prototype._importDER=function(e,r){e=uc.toArray(e,r);var n=new vke;if(e[n.place++]!==48)return!1;var s=wP(e,n);if(s===!1||s+n.place!==e.length||e[n.place++]!==2)return!1;var i=wP(e,n);if(i===!1||(e[n.place]&128)!==0)return!1;var o=e.slice(n.place,i+n.place);if(n.place+=i,e[n.place++]!==2)return!1;var a=wP(e,n);if(a===!1||e.length!==a+n.place||(e[n.place]&128)!==0)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Ft(o),this.s=new Ft(c),this.recoveryParam=null,!0};function vP(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}aT.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=BL(r),n=BL(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var s=[2];vP(s,r.length),s=s.concat(r),s.push(2),vP(s,n.length);var i=s.concat(n),o=[48];return vP(o,i.length),o=o.concat(i),uc.encode(o,e)};var Eke=(function(){throw new Error("unsupported")}),zp=uc.assert;function $c(t){if(!(this instanceof $c))return new $c(t);typeof t=="string"&&(zp(Object.prototype.hasOwnProperty.call(CI,t),"Unknown curve "+t),t=CI[t]),t instanceof CI.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var _ke=$c;$c.prototype.keyPair=function(e){return new Yk(this,e)};$c.prototype.keyFromPrivate=function(e,r){return Yk.fromPrivate(this,e,r)};$c.prototype.keyFromPublic=function(e,r){return Yk.fromPublic(this,e,r)};$c.prototype.genKeyPair=function(e){e||(e={});for(var r=new mne({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Eke(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),s=this.n.sub(new Ft(2));;){var i=new Ft(r.generate(n));if(!(i.cmp(s)>0))return i.iaddn(1),this.keyFromPrivate(i)}};$c.prototype._truncateToN=function(e,r,n){var s;if(Ft.isBN(e)||typeof e=="number")e=new Ft(e,16),s=e.byteLength();else if(typeof e=="object")s=e.length,e=new Ft(e,16);else{var i=e.toString();s=i.length+1>>>1,e=new Ft(i,16)}typeof n!="number"&&(n=s*8);var o=n-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};$c.prototype.sign=function(e,r,n,s){if(typeof n=="object"&&(s=n,n=null),s||(s={}),typeof e!="string"&&typeof e!="number"&&!Ft.isBN(e)){zp(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),zp(e.length>>>0===e.length);for(var i=0;i<e.length;i++)zp((e[i]&255)===e[i])}r=this.keyFromPrivate(r,n),e=this._truncateToN(e,!1,s.msgBitLength),zp(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),a=r.getPrivate().toArray("be",o),c=e.toArray("be",o);zp(new Ft(c).eq(e),"Can not sign message");for(var u=new mne({hash:this.hash,entropy:a,nonce:c,pers:s.pers,persEnc:s.persEnc||"utf8"}),l=this.n.sub(new Ft(1)),d=0;;d++){var f=s.k?s.k(d):new Ft(u.generate(this.n.byteLength()));if(f=this._truncateToN(f,!0),!(f.cmpn(1)<=0||f.cmp(l)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var g=p.getX(),h=g.umod(this.n);if(h.cmpn(0)!==0){var y=f.invm(this.n).mul(h.mul(r.getPrivate()).iadd(e));if(y=y.umod(this.n),y.cmpn(0)!==0){var E=(p.getY().isOdd()?1:0)|(g.cmp(h)!==0?2:0);return s.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),E^=1),new cT({r:h,s:y,recoveryParam:E})}}}}}};$c.prototype.verify=function(e,r,n,s,i){i||(i={}),e=this._truncateToN(e,!1,i.msgBitLength),n=this.keyFromPublic(n,s),r=new cT(r,"hex");var o=r.r,a=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var c=a.invm(this.n),u=c.mul(e).umod(this.n),l=c.mul(o).umod(this.n),d;return this.curve._maxwellTrick?(d=this.g.jmulAdd(u,n.getPublic(),l),d.isInfinity()?!1:d.eqXToP(o)):(d=this.g.mulAdd(u,n.getPublic(),l),d.isInfinity()?!1:d.getX().umod(this.n).cmp(o)===0)};$c.prototype.recoverPubKey=function(t,e,r,n){zp((3&r)===r,"The recovery param is more than two bits"),e=new cT(e,n);var s=this.n,i=new Ft(t),o=e.r,a=e.s,c=r&1,u=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var l=e.r.invm(s),d=s.sub(i).mul(l).umod(s),f=a.mul(l).umod(s);return this.g.mulAdd(d,o,f)};$c.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new cT(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var i;try{i=this.recoverPubKey(t,e,s)}catch{continue}if(i.eq(r))return s}throw new Error("Unable to find valid recovery factor")};var Ake=Zy(function(t,e){var r=e;r.version="6.6.1",r.utils=uc,r.rand=(function(){throw new Error("unsupported")}),r.curve=xI,r.curves=CI,r.ec=_ke,r.eddsa=null}),xke=Ake.ec;const Cke="signing-key/5.8.0",AO=new ue(Cke);let EP=null;function fl(){return EP||(EP=new xke("secp256k1")),EP}class m0{constructor(e){xe(this,"curve","secp256k1"),xe(this,"privateKey",je(e)),Ul(this.privateKey)!==32&&AO.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=fl().keyFromPrivate(Oe(this.privateKey));xe(this,"publicKey","0x"+r.getPublic(!1,"hex")),xe(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),xe(this,"_isSigningKey",!0)}_addPoint(e){const r=fl().keyFromPublic(Oe(this.publicKey)),n=fl().keyFromPublic(Oe(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=fl().keyFromPrivate(Oe(this.privateKey)),n=Oe(e);n.length!==32&&AO.throwArgumentError("bad digest length","digest",e);const s=r.sign(n,{canonical:!0});return J0({recoveryParam:s.recoveryParam,r:Nn("0x"+s.r.toString(16),32),s:Nn("0x"+s.s.toString(16),32)})}computeSharedSecret(e){const r=fl().keyFromPrivate(Oe(this.privateKey)),n=fl().keyFromPublic(Oe(Jk(e)));return Nn("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function yne(t,e){const r=J0(e),n={r:Oe(r.r),s:Oe(r.s)};return"0x"+fl().recoverPubKey(Oe(t),n,r.recoveryParam).encode("hex",!1)}function Jk(t,e){const r=Oe(t);if(r.length===32){const n=new m0(r);return e?"0x"+fl().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?je(r):"0x"+fl().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+fl().keyFromPublic(r).getPublic(!0,"hex"):je(r)}return AO.throwArgumentError("invalid public or private key","key","[REDACTED]")}const Ske=Object.freeze(Object.defineProperty({__proto__:null,SigningKey:m0,computePublicKey:Jk,recoverPublicKey:yne},Symbol.toStringTag,{value:"Module"})),Ike="transactions/5.8.0",lo=new ue(Ike);var xO;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(xO||(xO={}));function Xk(t){return t==="0x"?null:sn(t)}function co(t){return t==="0x"?Wre:Ue.from(t)}const Tke=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],Nke={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function bh(t){const e=Jk(t);return sn(As(En(As(e,1)),12))}function ZE(t,e){return bh(yne(Oe(t),e))}function Ja(t,e){const r=Il(Ue.from(t).toHexString());return r.length>32&&lo.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function _P(t,e){return{address:sn(t),storageKeys:(e||[]).map((r,n)=>(Ul(r)!==32&&lo.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function Q0(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&lo.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),_P(r[0],r[1])):_P(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((s,i)=>(s[i]=!0,s),{});return _P(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function bne(t){return Q0(t).map(e=>[e.address,e.storageKeys])}function wne(t,e){if(t.gasPrice!=null){const n=Ue.from(t.gasPrice),s=Ue.from(t.maxFeePerGas||0);n.eq(s)||lo.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:s})}const r=[Ja(t.chainId||0,"chainId"),Ja(t.nonce||0,"nonce"),Ja(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ja(t.maxFeePerGas||0,"maxFeePerGas"),Ja(t.gasLimit||0,"gasLimit"),t.to!=null?sn(t.to):"0x",Ja(t.value||0,"value"),t.data||"0x",bne(t.accessList||[])];if(e){const n=J0(e);r.push(Ja(n.recoveryParam,"recoveryParam")),r.push(Il(n.r)),r.push(Il(n.s))}return No(["0x02",N0(r)])}function vne(t,e){const r=[Ja(t.chainId||0,"chainId"),Ja(t.nonce||0,"nonce"),Ja(t.gasPrice||0,"gasPrice"),Ja(t.gasLimit||0,"gasLimit"),t.to!=null?sn(t.to):"0x",Ja(t.value||0,"value"),t.data||"0x",bne(t.accessList||[])];if(e){const n=J0(e);r.push(Ja(n.recoveryParam,"recoveryParam")),r.push(Il(n.r)),r.push(Il(n.s))}return No(["0x01",N0(r)])}function Pke(t,e){Dk(t,Nke);const r=[];Tke.forEach(function(o){let a=t[o.name]||[];const c={};o.numeric&&(c.hexPad="left"),a=Oe(je(a,c)),o.length&&a.length!==o.length&&a.length>0&&lo.throwArgumentError("invalid length for "+o.name,"transaction:"+o.name,a),o.maxLength&&(a=Il(a),a.length>o.maxLength&&lo.throwArgumentError("invalid length for "+o.name,"transaction:"+o.name,a)),r.push(je(a))});let n=0;if(t.chainId!=null?(n=t.chainId,typeof n!="number"&&lo.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!zE(e)&&e.v>28&&(n=Math.floor((e.v-35)/2)),n!==0&&(r.push(je(n)),r.push("0x"),r.push("0x")),!e)return N0(r);const s=J0(e);let i=27+s.recoveryParam;return n!==0?(r.pop(),r.pop(),r.pop(),i+=n*2+8,s.v>28&&s.v!==i&&lo.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):s.v!==i&&lo.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),r.push(je(i)),r.push(Il(Oe(s.r))),r.push(Il(Oe(s.s))),N0(r)}function CO(t,e){if(t.type==null||t.type===0)return t.accessList!=null&&lo.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),Pke(t,e);switch(t.type){case 1:return vne(t,e);case 2:return wne(t,e)}return lo.throwError(`unsupported transaction type: ${t.type}`,ue.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}function Ene(t,e,r){try{const n=co(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");t.v=n}catch{lo.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=Nn(e[1],32),t.s=Nn(e[2],32);try{const n=En(r(t));t.from=ZE(n,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function Rke(t){const e=sT(t.slice(1));e.length!==9&&e.length!==12&&lo.throwArgumentError("invalid component count for transaction type: 2","payload",je(t));const r=co(e[2]),n=co(e[3]),s={type:2,chainId:co(e[0]).toNumber(),nonce:co(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:co(e[4]),to:Xk(e[5]),value:co(e[6]),data:e[7],accessList:Q0(e[8])};return e.length===9||(s.hash=En(t),Ene(s,e.slice(9),wne)),s}function Oke(t){const e=sT(t.slice(1));e.length!==8&&e.length!==11&&lo.throwArgumentError("invalid component count for transaction type: 1","payload",je(t));const r={type:1,chainId:co(e[0]).toNumber(),nonce:co(e[1]).toNumber(),gasPrice:co(e[2]),gasLimit:co(e[3]),to:Xk(e[4]),value:co(e[5]),data:e[6],accessList:Q0(e[7])};return e.length===8||(r.hash=En(t),Ene(r,e.slice(8),vne)),r}function kke(t){const e=sT(t);e.length!==9&&e.length!==6&&lo.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:co(e[0]).toNumber(),gasPrice:co(e[1]),gasLimit:co(e[2]),to:Xk(e[3]),value:co(e[4]),data:e[5],chainId:0};if(e.length===6)return r;try{r.v=Ue.from(e[6]).toNumber()}catch{return r}if(r.r=Nn(e[7],32),r.s=Nn(e[8],32),Ue.from(r.r).isZero()&&Ue.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const s=e.slice(0,6);r.chainId!==0&&(s.push(je(r.chainId)),s.push("0x"),s.push("0x"),n-=r.chainId*2+8);const i=En(N0(s));try{r.from=ZE(i,{r:je(r.r),s:je(r.s),recoveryParam:n})}catch{}r.hash=En(t)}return r.type=null,r}function _ne(t){const e=Oe(t);if(e[0]>127)return kke(e);switch(e[0]){case 1:return Oke(e);case 2:return Rke(e)}return lo.throwError(`unsupported transaction type: ${e[0]}`,ue.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const Bke=Object.freeze(Object.defineProperty({__proto__:null,get TransactionTypes(){return xO},accessListify:Q0,computeAddress:bh,parse:_ne,recoverAddress:ZE,serialize:CO},Symbol.toStringTag,{value:"Module"})),Uke="contracts/5.8.0";var P0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const vs=new ue(Uke);function Z6(t,e){return P0(this,void 0,void 0,function*(){const r=yield e;typeof r!="string"&&vs.throwArgumentError("invalid address or ENS name","name",r);try{return sn(r)}catch{}t||vs.throwError("a provider or signer is needed to resolve ENS names",ue.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return n==null&&vs.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function SI(t,e,r){return P0(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((n,s)=>SI(t,Array.isArray(e)?e[s]:e[n.name],n))):r.type==="address"?yield Z6(t,e):r.type==="tuple"?yield SI(t,e,r.components):r.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>SI(t,n,r.arrayChildren))):Promise.reject(vs.makeError("invalid value for array",ue.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function uT(t,e,r){return P0(this,void 0,void 0,function*(){let n={};r.length===e.inputs.length+1&&typeof r[r.length-1]=="object"&&(n=Ds(r.pop())),vs.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=ps({override:Z6(t.signer,n.from),signer:t.signer.getAddress()}).then(u=>P0(this,void 0,void 0,function*(){return sn(u.signer)!==u.override&&vs.throwError("Contract with a Signer cannot override from",ue.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),u.override})):n.from=t.signer.getAddress():n.from&&(n.from=Z6(t.provider,n.from));const s=yield ps({args:SI(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:ps(n)||{}}),i=t.interface.encodeFunctionData(e,s.args),o={data:i,to:s.address},a=s.overrides;if(a.nonce!=null&&(o.nonce=Ue.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=Ue.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=Ue.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=Ue.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=Ue.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=Q0(a.accessList)),o.gasLimit==null&&e.gas!=null){let u=21e3;const l=Oe(i);for(let d=0;d<l.length;d++)u+=4,l[d]&&(u+=64);o.gasLimit=Ue.from(e.gas).add(u)}if(a.value){const u=Ue.from(a.value);!u.isZero()&&!e.payable&&vs.throwError("non-payable method cannot override value",ue.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),o.value=u}a.customData&&(o.customData=Ds(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const c=Object.keys(n).filter(u=>n[u]!=null);return c.length&&vs.throwError(`cannot override ${c.map(u=>JSON.stringify(u)).join(",")}`,ue.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:c}),o})}function Mke(t,e){return function(...r){return uT(t,e,r)}}function Dke(t,e){const r=t.signer||t.provider;return function(...n){return P0(this,void 0,void 0,function*(){r||vs.throwError("estimate require a provider or signer",ue.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const s=yield uT(t,e,n);return yield r.estimateGas(s)})}}function jke(t,e){const r=e.wait.bind(e);e.wait=n=>r(n).then(s=>(s.events=s.logs.map(i=>{let o=Ml(i),a=null;try{a=t.interface.parseLog(i)}catch{}return a&&(o.args=a.args,o.decode=(c,u)=>t.interface.decodeEventLog(a.eventFragment,c,u),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>t.provider,o.getBlock=()=>t.provider.getBlock(s.blockHash),o.getTransaction=()=>t.provider.getTransaction(s.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(s),o}),s))}function Ane(t,e,r){const n=t.signer||t.provider;return function(...s){return P0(this,void 0,void 0,function*(){let i;if(s.length===e.inputs.length+1&&typeof s[s.length-1]=="object"){const c=Ds(s.pop());c.blockTag!=null&&(i=yield c.blockTag),delete c.blockTag,s.push(c)}t.deployTransaction!=null&&(yield t._deployed(i));const o=yield uT(t,e,s),a=yield n.call(o,i);try{let c=t.interface.decodeFunctionResult(e,a);return r&&e.outputs.length===1&&(c=c[0]),c}catch(c){throw c.code===ue.errors.CALL_EXCEPTION&&(c.address=t.address,c.args=s,c.transaction=o),c}})}}function Lke(t,e){return function(...r){return P0(this,void 0,void 0,function*(){t.signer||vs.throwError("sending a transaction requires a signer",ue.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const n=yield uT(t,e,r),s=yield t.signer.sendTransaction(n);return jke(t,s),s})}}function UL(t,e,r){return e.constant?Ane(t,e,r):Lke(t,e)}function xne(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class Zv{constructor(e,r){xe(this,"tag",e),xe(this,"filter",r),this._listeners=[]}addListener(e,r){this._listeners.push({listener:e,once:r})}removeListener(e){let r=!1;this._listeners=this._listeners.filter(n=>r||n.listener!==e?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const r=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const s=e.slice();return setTimeout(()=>{n.listener.apply(this,s)},0),!n.once}),r}prepareEvent(e){}getEmit(e){return[e]}}class Fke extends Zv{constructor(){super("error",null)}}class ML extends Zv{constructor(e,r,n,s){const i={address:e};let o=r.getEventTopic(n);s?(o!==s[0]&&vs.throwArgumentError("topic mismatch","topics",s),i.topics=s.slice()):i.topics=[o],super(xne(i),i),xe(this,"address",e),xe(this,"interface",r),xe(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(r,n)=>this.interface.decodeEventLog(this.fragment,r,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(r){e.args=null,e.decodeError=r}}getEmit(e){const r=jre(e.args);if(r.length)throw r[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class DL extends Zv{constructor(e,r){super("*",{address:e}),xe(this,"address",e),xe(this,"interface",r)}prepareEvent(e){super.prepareEvent(e);try{const r=this.interface.parseLog(e);e.event=r.name,e.eventSignature=r.signature,e.decode=(n,s)=>this.interface.decodeEventLog(r.eventFragment,n,s),e.args=r.args}catch{}}}class $ke{constructor(e,r,n){xe(this,"interface",Iu(new.target,"getInterface")(r)),n==null?(xe(this,"provider",null),xe(this,"signer",null)):Ky.isSigner(n)?(xe(this,"provider",n.provider||null),xe(this,"signer",n)):VE.isProvider(n)?(xe(this,"provider",n),xe(this,"signer",null)):vs.throwArgumentError("invalid signer or provider","signerOrProvider",n),xe(this,"callStatic",{}),xe(this,"estimateGas",{}),xe(this,"functions",{}),xe(this,"populateTransaction",{}),xe(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const c=this.interface.events[a];xe(this.filters,a,(...u)=>({address:this.address,topics:this.interface.encodeFilterTopics(c,u)})),o[c.name]||(o[c.name]=[]),o[c.name].push(a)}),Object.keys(o).forEach(a=>{const c=o[a];c.length===1?xe(this.filters,a,this.filters[c[0]]):vs.warn(`Duplicate definition of ${a} (${c.join(", ")})`)})}if(xe(this,"_runningEvents",{}),xe(this,"_wrappedEmits",{}),e==null&&vs.throwArgumentError("invalid contract address or ENS name","addressOrName",e),xe(this,"address",e),this.provider)xe(this,"resolvedAddress",Z6(this.provider,e));else try{xe(this,"resolvedAddress",Promise.resolve(sn(e)))}catch{vs.throwError("provider is required to use ENS name as contract address",ue.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const s={},i={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(i[o]){vs.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}i[o]=!0;{const c=a.name;s[`%${c}`]||(s[`%${c}`]=[]),s[`%${c}`].push(o)}this[o]==null&&xe(this,o,UL(this,a,!0)),this.functions[o]==null&&xe(this.functions,o,UL(this,a,!1)),this.callStatic[o]==null&&xe(this.callStatic,o,Ane(this,a,!0)),this.populateTransaction[o]==null&&xe(this.populateTransaction,o,Mke(this,a)),this.estimateGas[o]==null&&xe(this.estimateGas,o,Dke(this,a))}),Object.keys(s).forEach(o=>{const a=s[o];if(a.length>1)return;o=o.substring(1);const c=a[0];try{this[o]==null&&xe(this,o,this[c])}catch{}this.functions[o]==null&&xe(this.functions,o,this.functions[c]),this.callStatic[o]==null&&xe(this.callStatic,o,this.callStatic[c]),this.populateTransaction[o]==null&&xe(this.populateTransaction,o,this.populateTransaction[c]),this.estimateGas[o]==null&&xe(this.estimateGas,o,this.estimateGas[c])})}static getContractAddress(e){return Fk(e)}static getInterface(e){return EO.isInterface(e)?e:new EO(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(r=>(r==="0x"&&vs.throwError("contract not deployed",ue.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||vs.throwError("sending a transactions require a signer",ue.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=Ds(e||{});return["from","to"].forEach(function(n){r[n]!=null&&vs.throwError("cannot override "+n,ue.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(e){typeof e=="string"&&(e=new Gk(e,this.provider));const r=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&xe(r,"deployTransaction",this.deployTransaction),r}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return V6.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new Fke);if(e==="event")return this._normalizeRunningEvent(new Zv("event",null));if(e==="*")return this._normalizeRunningEvent(new DL(this.address,this.interface));const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new ML(this.address,this.interface,r))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const s=this.interface.getEvent(n);return this._normalizeRunningEvent(new ML(this.address,this.interface,s,e.topics))}catch{}const r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Zv(xne(r),r))}return this._normalizeRunningEvent(new DL(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const r=this._wrappedEmits[e.tag];r&&e.filter&&(this.provider.off(e.filter,r),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,r,n){const s=Ml(r);return s.removeListener=()=>{n&&(e.removeListener(n),this._checkRunningEvents(e))},s.getBlock=()=>this.provider.getBlock(r.blockHash),s.getTransaction=()=>this.provider.getTransaction(r.transactionHash),s.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),e.prepareEvent(s),s}_addEventListener(e,r,n){if(this.provider||vs.throwError("events require a provider or a signer with a provider",ue.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(r,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const s=i=>{let o=this._wrapEvent(e,i,r);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=s,e.filter!=null&&this.provider.on(e.filter,s)}}queryFilter(e,r,n){const s=this._getRunningEvent(e),i=Ds(s.filter);return typeof r=="string"&&Er(r,32)?(n!=null&&vs.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),i.blockHash=r):(i.fromBlock=r??0,i.toBlock=n??"latest"),this.provider.getLogs(i).then(o=>o.map(a=>this._wrapEvent(s,a,null)))}on(e,r){return this._addEventListener(this._getRunningEvent(e),r,!1),this}once(e,r){return this._addEventListener(this._getRunningEvent(e),r,!0),this}emit(e,...r){if(!this.provider)return!1;const n=this._getRunningEvent(e),s=n.run(r)>0;return this._checkRunningEvents(n),s}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((r,n)=>r+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const r=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(s=>{r.push(s)});return r}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const s=this._runningEvents[n];s.removeAllListeners(),this._checkRunningEvents(s)}return this}const r=this._getRunningEvent(e);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(e,r){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(r),this._checkRunningEvents(n),this}removeListener(e,r){return this.off(e,r)}}class qke extends $ke{}class Qk{constructor(e){xe(this,"alphabet",e),xe(this,"base",e.length),xe(this,"_alphabetMap",{}),xe(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=Oe(e);if(r.length===0)return"";let n=[0];for(let i=0;i<r.length;++i){let o=r[i];for(let a=0;a<n.length;++a)o+=n[a]<<8,n[a]=o%this.base,o=o/this.base|0;for(;o>0;)n.push(o%this.base),o=o/this.base|0}let s="";for(let i=0;r[i]===0&&i<r.length-1;++i)s+=this._leader;for(let i=n.length-1;i>=0;--i)s+=this.alphabet[n[i]];return s}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let s=this._alphabetMap[e[n]];if(s===void 0)throw new Error("Non-base"+this.base+" character");let i=s;for(let o=0;o<r.length;++o)i+=r[o]*this.base,r[o]=i&255,i>>=8;for(;i>0;)r.push(i&255),i>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return Oe(new Uint8Array(r.reverse()))}}const Hke=new Qk("abcdefghijklmnopqrstuvwxyz234567"),Cy=new Qk("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),zke=Object.freeze(Object.defineProperty({__proto__:null,Base32:Hke,Base58:Cy,BaseX:Qk},Symbol.toStringTag,{value:"Module"}));var Sy;(function(t){t.sha256="sha256",t.sha512="sha512"})(Sy||(Sy={}));const Wke="sha2/5.8.0",Vke=new ue(Wke);function Cne(t){return"0x"+oa.ripemd160().update(Oe(t)).digest("hex")}function tf(t){return"0x"+oa.sha256().update(Oe(t)).digest("hex")}function Gke(t){return"0x"+oa.sha512().update(Oe(t)).digest("hex")}function Yv(t,e,r){return Sy[t]||Vke.throwError("unsupported algorithm "+t,ue.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+oa.hmac(oa[t],Oe(e)).update(Oe(r)).digest("hex")}const Kke=Object.freeze(Object.defineProperty({__proto__:null,get SupportedAlgorithm(){return Sy},computeHmac:Yv,ripemd160:Cne,sha256:tf,sha512:Gke},Symbol.toStringTag,{value:"Module"}));function eB(t,e,r,n,s){t=Oe(t),e=Oe(e);let i,o=1;const a=new Uint8Array(n),c=new Uint8Array(e.length+4);c.set(e);let u,l;for(let d=1;d<=o;d++){c[e.length]=d>>24&255,c[e.length+1]=d>>16&255,c[e.length+2]=d>>8&255,c[e.length+3]=d&255;let f=Oe(Yv(s,t,c));i||(i=f.length,l=new Uint8Array(i),o=Math.ceil(n/i),u=n-(o-1)*i),l.set(f);for(let h=1;h<r;h++){f=Oe(Yv(s,t,f));for(let y=0;y<i;y++)l[y]^=f[y]}const p=(d-1)*i,g=d===o?u:i;a.set(Oe(l).slice(0,g),p)}return je(a)}const Zke="wordlists/5.8.0",Yke=new ue(Zke);class YE{constructor(e){Yke.checkAbstract(new.target,YE),xe(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const r=[];for(let n=0;n<2048;n++){const s=e.getWord(n);if(n!==e.getWordIndex(s))return"0x";r.push(s)}return gh(r.join(`
`)+`
`)}static register(e,r){r||(r=e.locale)}}const Jke="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let M1=null;function jL(t){if(M1==null&&(M1=Jke.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),YE.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw M1=null,new Error("BIP39 Wordlist for en (English) FAILED")}class Xke extends YE{constructor(){super("en")}getWord(e){return jL(this),M1[e]}getWordIndex(e){return jL(this),M1.indexOf(e)}}const Sne=new Xke;YE.register(Sne);const LL={en:Sne},Qke="hdnode/5.8.0",Jv=new ue(Qke),eBe=Ue.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),tBe=ms("Bitcoin seed"),Sm=2147483648;function Ine(t){return(1<<t)-1<<8-t}function rBe(t){return(1<<t)-1}function A2(t){return Nn(je(t),32)}function FL(t){return Cy.encode(Mn([t,As(tf(tf(t)),0,4)]))}function tB(t){if(t==null)return LL.en;if(typeof t=="string"){const e=LL[t];return e==null&&Jv.throwArgumentError("unknown locale","wordlist",t),e}return t}const Pg={},Iy="m/44'/60'/0'/0/0";class Xa{constructor(e,r,n,s,i,o,a,c){if(e!==Pg)throw new Error("HDNode constructor cannot be called directly");if(r){const u=new m0(r);xe(this,"privateKey",u.privateKey),xe(this,"publicKey",u.compressedPublicKey)}else xe(this,"privateKey",null),xe(this,"publicKey",je(n));xe(this,"parentFingerprint",s),xe(this,"fingerprint",As(Cne(tf(this.publicKey)),0,4)),xe(this,"address",bh(this.publicKey)),xe(this,"chainCode",i),xe(this,"index",o),xe(this,"depth",a),c==null?(xe(this,"mnemonic",null),xe(this,"path",null)):typeof c=="string"?(xe(this,"mnemonic",null),xe(this,"path",c)):(xe(this,"mnemonic",c),xe(this,"path",c.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return FL(Mn([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",je(this.depth),this.parentFingerprint,Nn(je(this.index),4),this.chainCode,this.privateKey!=null?Mn(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new Xa(Pg,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let r=this.path;r&&(r+="/"+(e&~Sm));const n=new Uint8Array(37);if(e&Sm){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(Oe(this.privateKey),1),r&&(r+="'")}else n.set(Oe(this.publicKey));for(let d=24;d>=0;d-=8)n[33+(d>>3)]=e>>24-d&255;const s=Oe(Yv(Sy.sha512,this.chainCode,n)),i=s.slice(0,32),o=s.slice(32);let a=null,c=null;this.privateKey?a=A2(Ue.from(i).add(this.privateKey).mod(eBe)):c=new m0(je(i))._addPoint(this.publicKey);let u=r;const l=this.mnemonic;return l&&(u=Object.freeze({phrase:l.phrase,path:r,locale:l.locale||"en"})),new Xa(Pg,a,c,this.fingerprint,A2(o),e,this.depth+1,u)}derivePath(e){const r=e.split("/");if(r.length===0||r[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);r[0]==="m"&&r.shift();let n=this;for(let s=0;s<r.length;s++){const i=r[s];if(i.match(/^[0-9]+'$/)){const o=parseInt(i.substring(0,i.length-1));if(o>=Sm)throw new Error("invalid path index - "+i);n=n._derive(Sm+o)}else if(i.match(/^[0-9]+$/)){const o=parseInt(i);if(o>=Sm)throw new Error("invalid path index - "+i);n=n._derive(o)}else throw new Error("invalid path component - "+i)}return n}static _fromSeed(e,r){const n=Oe(e);if(n.length<16||n.length>64)throw new Error("invalid seed");const s=Oe(Yv(Sy.sha512,tBe,n));return new Xa(Pg,A2(s.slice(0,32)),null,"0x00000000",A2(s.slice(32)),0,0,r)}static fromMnemonic(e,r,n){return n=tB(n),e=dT(lT(e,n),n),Xa._fromSeed(Tne(e,r),{phrase:e,path:"m",locale:n.locale})}static fromSeed(e){return Xa._fromSeed(e,null)}static fromExtendedKey(e){const r=Cy.decode(e);(r.length!==82||FL(r.slice(0,78))!==e)&&Jv.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const n=r[4],s=je(r.slice(5,9)),i=parseInt(je(r.slice(9,13)).substring(2),16),o=je(r.slice(13,45)),a=r.slice(45,78);switch(je(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new Xa(Pg,null,je(a),s,o,i,n,null);case"0x0488ade4":case"0x04358394 ":if(a[0]!==0)break;return new Xa(Pg,je(a.slice(1)),null,s,o,i,n,null)}return Jv.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function Tne(t,e){e||(e="");const r=ms("mnemonic"+e,Dl.NFKD);return eB(ms(t,Dl.NFKD),r,2048,64,"sha512")}function lT(t,e){e=tB(e),Jv.checkNormalize();const r=e.split(t);if(r.length%3!==0)throw new Error("invalid mnemonic");const n=Oe(new Uint8Array(Math.ceil(11*r.length/8)));let s=0;for(let u=0;u<r.length;u++){let l=e.getWordIndex(r[u].normalize("NFKD"));if(l===-1)throw new Error("invalid mnemonic");for(let d=0;d<11;d++)l&1<<10-d&&(n[s>>3]|=1<<7-s%8),s++}const i=32*r.length/3,o=r.length/3,a=Ine(o);if((Oe(tf(n.slice(0,i/8)))[0]&a)!==(n[n.length-1]&a))throw new Error("invalid checksum");return je(n.slice(0,i/8))}function dT(t,e){if(e=tB(e),t=Oe(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let o=0;o<t.length;o++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[o],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[o]>>8-n,r.push(t[o]&rBe(8-n)),n+=3);const s=t.length/4,i=Oe(tf(t))[0]&Ine(s);return r[r.length-1]<<=s,r[r.length-1]|=i>>8-s,e.join(r.map(o=>e.getWord(o)))}function nBe(t,e){try{return lT(t,e),!0}catch{}return!1}function sBe(t){return(typeof t!="number"||t<0||t>=Sm||t%1)&&Jv.throwArgumentError("invalid account index","index",t),`m/44'/60'/${t}'/0/0`}const iBe=Object.freeze(Object.defineProperty({__proto__:null,HDNode:Xa,defaultPath:Iy,entropyToMnemonic:dT,getAccountPath:sBe,isValidMnemonic:nBe,mnemonicToEntropy:lT,mnemonicToSeed:Tne},Symbol.toStringTag,{value:"Module"})),oBe="random/5.8.0",SO=new ue(oBe);function aBe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const $L=aBe();let II=$L.crypto||$L.msCrypto;(!II||!II.getRandomValues)&&(SO.warn("WARNING: Missing strong random number source"),II={getRandomValues:function(t){return SO.throwError("no secure random source avaialble",ue.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function Lm(t){(t<=0||t>1024||t%1||t!=t)&&SO.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return II.getRandomValues(e),Oe(e)}function cBe(t){t=t.slice();for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}const uBe=Object.freeze(Object.defineProperty({__proto__:null,randomBytes:Lm,shuffled:cBe},Symbol.toStringTag,{value:"Module"}));var AP={exports:{}},qL;function lBe(){return qL||(qL=1,(function(t,e){(function(r){function n(N){return parseInt(N)===N}function s(N){if(!n(N.length))return!1;for(var v=0;v<N.length;v++)if(!n(N[v])||N[v]<0||N[v]>255)return!1;return!0}function i(N,v){if(N.buffer&&ArrayBuffer.isView(N)&&N.name==="Uint8Array")return v&&(N.slice?N=N.slice():N=Array.prototype.slice.call(N)),N;if(Array.isArray(N)){if(!s(N))throw new Error("Array contains invalid value: "+N);return new Uint8Array(N)}if(n(N.length)&&s(N))return new Uint8Array(N);throw new Error("unsupported array-like object")}function o(N){return new Uint8Array(N)}function a(N,v,R,$,O){($!=null||O!=null)&&(N.slice?N=N.slice($,O):N=Array.prototype.slice.call(N,$,O)),v.set(N,R)}var c=(function(){function N(R){var $=[],O=0;for(R=encodeURI(R);O<R.length;){var H=R.charCodeAt(O++);H===37?($.push(parseInt(R.substr(O,2),16)),O+=2):$.push(H)}return i($)}function v(R){for(var $=[],O=0;O<R.length;){var H=R[O];H<128?($.push(String.fromCharCode(H)),O++):H>191&&H<224?($.push(String.fromCharCode((H&31)<<6|R[O+1]&63)),O+=2):($.push(String.fromCharCode((H&15)<<12|(R[O+1]&63)<<6|R[O+2]&63)),O+=3)}return $.join("")}return{toBytes:N,fromBytes:v}})(),u=(function(){function N($){for(var O=[],H=0;H<$.length;H+=2)O.push(parseInt($.substr(H,2),16));return O}var v="0123456789abcdef";function R($){for(var O=[],H=0;H<$.length;H++){var W=$[H];O.push(v[(W&240)>>4]+v[W&15])}return O.join("")}return{toBytes:N,fromBytes:R}})(),l={16:10,24:12,32:14},d=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],f=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],p=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],g=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],h=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],y=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],E=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],S=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],C=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],_=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],T=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],P=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],D=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],F=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],I=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function U(N){for(var v=[],R=0;R<N.length;R+=4)v.push(N[R]<<24|N[R+1]<<16|N[R+2]<<8|N[R+3]);return v}var L=function(N){if(!(this instanceof L))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:i(N,!0)}),this._prepare()};L.prototype._prepare=function(){var N=l[this.key.length];if(N==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var v=0;v<=N;v++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var R=(N+1)*4,$=this.key.length/4,O=U(this.key),H,v=0;v<$;v++)H=v>>2,this._Ke[H][v%4]=O[v],this._Kd[N-H][v%4]=O[v];for(var W=0,G=$,K;G<R;){if(K=O[$-1],O[0]^=f[K>>16&255]<<24^f[K>>8&255]<<16^f[K&255]<<8^f[K>>24&255]^d[W]<<24,W+=1,$!=8)for(var v=1;v<$;v++)O[v]^=O[v-1];else{for(var v=1;v<$/2;v++)O[v]^=O[v-1];K=O[$/2-1],O[$/2]^=f[K&255]^f[K>>8&255]<<8^f[K>>16&255]<<16^f[K>>24&255]<<24;for(var v=$/2+1;v<$;v++)O[v]^=O[v-1]}for(var v=0,Q,re;v<$&&G<R;)Q=G>>2,re=G%4,this._Ke[Q][re]=O[v],this._Kd[N-Q][re]=O[v++],G++}for(var Q=1;Q<N;Q++)for(var re=0;re<4;re++)K=this._Kd[Q][re],this._Kd[Q][re]=P[K>>24&255]^D[K>>16&255]^F[K>>8&255]^I[K&255]},L.prototype.encrypt=function(N){if(N.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var v=this._Ke.length-1,R=[0,0,0,0],$=U(N),O=0;O<4;O++)$[O]^=this._Ke[0][O];for(var H=1;H<v;H++){for(var O=0;O<4;O++)R[O]=g[$[O]>>24&255]^h[$[(O+1)%4]>>16&255]^y[$[(O+2)%4]>>8&255]^E[$[(O+3)%4]&255]^this._Ke[H][O];$=R.slice()}for(var W=o(16),G,O=0;O<4;O++)G=this._Ke[v][O],W[4*O]=(f[$[O]>>24&255]^G>>24)&255,W[4*O+1]=(f[$[(O+1)%4]>>16&255]^G>>16)&255,W[4*O+2]=(f[$[(O+2)%4]>>8&255]^G>>8)&255,W[4*O+3]=(f[$[(O+3)%4]&255]^G)&255;return W},L.prototype.decrypt=function(N){if(N.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var v=this._Kd.length-1,R=[0,0,0,0],$=U(N),O=0;O<4;O++)$[O]^=this._Kd[0][O];for(var H=1;H<v;H++){for(var O=0;O<4;O++)R[O]=S[$[O]>>24&255]^C[$[(O+3)%4]>>16&255]^_[$[(O+2)%4]>>8&255]^T[$[(O+1)%4]&255]^this._Kd[H][O];$=R.slice()}for(var W=o(16),G,O=0;O<4;O++)G=this._Kd[v][O],W[4*O]=(p[$[O]>>24&255]^G>>24)&255,W[4*O+1]=(p[$[(O+3)%4]>>16&255]^G>>16)&255,W[4*O+2]=(p[$[(O+2)%4]>>8&255]^G>>8)&255,W[4*O+3]=(p[$[(O+1)%4]&255]^G)&255;return W};var B=function(N){if(!(this instanceof B))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new L(N)};B.prototype.encrypt=function(N){if(N=i(N),N.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var v=o(N.length),R=o(16),$=0;$<N.length;$+=16)a(N,R,0,$,$+16),R=this._aes.encrypt(R),a(R,v,$);return v},B.prototype.decrypt=function(N){if(N=i(N),N.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var v=o(N.length),R=o(16),$=0;$<N.length;$+=16)a(N,R,0,$,$+16),R=this._aes.decrypt(R),a(R,v,$);return v};var A=function(N,v){if(!(this instanceof A))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!v)v=o(16);else if(v.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=i(v,!0),this._aes=new L(N)};A.prototype.encrypt=function(N){if(N=i(N),N.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var v=o(N.length),R=o(16),$=0;$<N.length;$+=16){a(N,R,0,$,$+16);for(var O=0;O<16;O++)R[O]^=this._lastCipherblock[O];this._lastCipherblock=this._aes.encrypt(R),a(this._lastCipherblock,v,$)}return v},A.prototype.decrypt=function(N){if(N=i(N),N.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var v=o(N.length),R=o(16),$=0;$<N.length;$+=16){a(N,R,0,$,$+16),R=this._aes.decrypt(R);for(var O=0;O<16;O++)v[$+O]=R[O]^this._lastCipherblock[O];a(N,this._lastCipherblock,0,$,$+16)}return v};var m=function(N,v,R){if(!(this instanceof m))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!v)v=o(16);else if(v.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");R||(R=1),this.segmentSize=R,this._shiftRegister=i(v,!0),this._aes=new L(N)};m.prototype.encrypt=function(N){if(N.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var v=i(N,!0),R,$=0;$<v.length;$+=this.segmentSize){R=this._aes.encrypt(this._shiftRegister);for(var O=0;O<this.segmentSize;O++)v[$+O]^=R[O];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(v,this._shiftRegister,16-this.segmentSize,$,$+this.segmentSize)}return v},m.prototype.decrypt=function(N){if(N.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var v=i(N,!0),R,$=0;$<v.length;$+=this.segmentSize){R=this._aes.encrypt(this._shiftRegister);for(var O=0;O<this.segmentSize;O++)v[$+O]^=R[O];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(N,this._shiftRegister,16-this.segmentSize,$,$+this.segmentSize)}return v};var b=function(N,v){if(!(this instanceof b))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!v)v=o(16);else if(v.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=i(v,!0),this._lastPrecipherIndex=16,this._aes=new L(N)};b.prototype.encrypt=function(N){for(var v=i(N,!0),R=0;R<v.length;R++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),v[R]^=this._lastPrecipher[this._lastPrecipherIndex++];return v},b.prototype.decrypt=b.prototype.encrypt;var w=function(N){if(!(this instanceof w))throw Error("Counter must be instanitated with `new`");N!==0&&!N&&(N=1),typeof N=="number"?(this._counter=o(16),this.setValue(N)):this.setBytes(N)};w.prototype.setValue=function(N){if(typeof N!="number"||parseInt(N)!=N)throw new Error("invalid counter value (must be an integer)");for(var v=15;v>=0;--v)this._counter[v]=N%256,N=N>>8},w.prototype.setBytes=function(N){if(N=i(N,!0),N.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=N},w.prototype.increment=function(){for(var N=15;N>=0;N--)if(this._counter[N]===255)this._counter[N]=0;else{this._counter[N]++;break}};var x=function(N,v){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",v instanceof w||(v=new w(v)),this._counter=v,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new L(N)};x.prototype.encrypt=function(N){for(var v=i(N,!0),R=0;R<v.length;R++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),v[R]^=this._remainingCounter[this._remainingCounterIndex++];return v},x.prototype.decrypt=x.prototype.encrypt;function M(N){N=i(N,!0);var v=16-N.length%16,R=o(N.length+v);a(N,R);for(var $=N.length;$<R.length;$++)R[$]=v;return R}function k(N){if(N=i(N,!0),N.length<16)throw new Error("PKCS#7 invalid length");var v=N[N.length-1];if(v>16)throw new Error("PKCS#7 padding byte out of range");for(var R=N.length-v,$=0;$<v;$++)if(N[R+$]!==v)throw new Error("PKCS#7 invalid padding byte");var O=o(R);return a(N,O,0,0,R),O}var j={AES:L,Counter:w,ModeOfOperation:{ecb:B,cbc:A,cfb:m,ofb:b,ctr:x},utils:{hex:u,utf8:c},padding:{pkcs7:{pad:M,strip:k}},_arrayTest:{coerceArray:i,createArray:o,copyArray:a}};t.exports=j})()})(AP)),AP.exports}var dBe=lBe();const vl=Ea(dBe),Nne="json-wallets/5.8.0";function y0(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Oe(t)}function $b(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function rB(t){return typeof t=="string"?ms(t,Dl.NFKC):Oe(t)}function Es(t,e){let r=t;const n=e.toLowerCase().split("/");for(let s=0;s<n.length;s++){let i=null;for(const o in r)if(o.toLowerCase()===n[s]){i=r[o];break}if(i===null)return null;r=i}return r}function fBe(t){const e=Oe(t);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const r=je(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const hBe=new ue(Nne);class pBe extends jh{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function nB(t,e){const r=JSON.parse(t);e=rB(e);const n=sn(Es(r,"ethaddr")),s=y0(Es(r,"encseed"));(!s||s.length%16!==0)&&hBe.throwArgumentError("invalid encseed","json",t);const i=Oe(eB(e,e,2e3,32,"sha256")).slice(0,16),o=s.slice(0,16),a=s.slice(16),c=new vl.ModeOfOperation.cbc(i,o),u=vl.padding.pkcs7.strip(Oe(c.decrypt(a)));let l="";for(let p=0;p<u.length;p++)l+=String.fromCharCode(u[p]);const d=ms(l),f=En(d);return new pBe({_isCrowdsaleAccount:!0,address:n,privateKey:f})}function fT(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return e.encseed&&e.ethaddr}function hT(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}function gBe(t){if(fT(t))try{return sn(JSON.parse(t).ethaddr)}catch{return null}if(hT(t))try{return sn(JSON.parse(t).address)}catch{return null}return null}var xP={exports:{}},HL;function mBe(){return HL||(HL=1,(function(t,e){(function(r){function s(h){const y=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let E=1779033703,S=3144134277,C=1013904242,_=2773480762,T=1359893119,P=2600822924,D=528734635,F=1541459225;const I=new Uint32Array(64);function U(x){let M=0,k=x.length;for(;k>=64;){let j=E,N=S,v=C,R=_,$=T,O=P,H=D,W=F,G,K,Q,re,de;for(K=0;K<16;K++)Q=M+K*4,I[K]=(x[Q]&255)<<24|(x[Q+1]&255)<<16|(x[Q+2]&255)<<8|x[Q+3]&255;for(K=16;K<64;K++)G=I[K-2],re=(G>>>17|G<<15)^(G>>>19|G<<13)^G>>>10,G=I[K-15],de=(G>>>7|G<<25)^(G>>>18|G<<14)^G>>>3,I[K]=(re+I[K-7]|0)+(de+I[K-16]|0)|0;for(K=0;K<64;K++)re=((($>>>6|$<<26)^($>>>11|$<<21)^($>>>25|$<<7))+($&O^~$&H)|0)+(W+(y[K]+I[K]|0)|0)|0,de=((j>>>2|j<<30)^(j>>>13|j<<19)^(j>>>22|j<<10))+(j&N^j&v^N&v)|0,W=H,H=O,O=$,$=R+re|0,R=v,v=N,N=j,j=re+de|0;E=E+j|0,S=S+N|0,C=C+v|0,_=_+R|0,T=T+$|0,P=P+O|0,D=D+H|0,F=F+W|0,M+=64,k-=64}}U(h);let L,B=h.length%64,A=h.length/536870912|0,m=h.length<<3,b=B<56?56:120,w=h.slice(h.length-B,h.length);for(w.push(128),L=B+1;L<b;L++)w.push(0);return w.push(A>>>24&255),w.push(A>>>16&255),w.push(A>>>8&255),w.push(A>>>0&255),w.push(m>>>24&255),w.push(m>>>16&255),w.push(m>>>8&255),w.push(m>>>0&255),U(w),[E>>>24&255,E>>>16&255,E>>>8&255,E>>>0&255,S>>>24&255,S>>>16&255,S>>>8&255,S>>>0&255,C>>>24&255,C>>>16&255,C>>>8&255,C>>>0&255,_>>>24&255,_>>>16&255,_>>>8&255,_>>>0&255,T>>>24&255,T>>>16&255,T>>>8&255,T>>>0&255,P>>>24&255,P>>>16&255,P>>>8&255,P>>>0&255,D>>>24&255,D>>>16&255,D>>>8&255,D>>>0&255,F>>>24&255,F>>>16&255,F>>>8&255,F>>>0&255]}function i(h,y,E){h=h.length<=64?h:s(h);const S=64+y.length+4,C=new Array(S),_=new Array(64);let T,P=[];for(T=0;T<64;T++)C[T]=54;for(T=0;T<h.length;T++)C[T]^=h[T];for(T=0;T<y.length;T++)C[64+T]=y[T];for(T=S-4;T<S;T++)C[T]=0;for(T=0;T<64;T++)_[T]=92;for(T=0;T<h.length;T++)_[T]^=h[T];function D(){for(let F=S-1;F>=S-4;F--){if(C[F]++,C[F]<=255)return;C[F]=0}}for(;E>=32;)D(),P=P.concat(s(_.concat(s(C)))),E-=32;return E>0&&(D(),P=P.concat(s(_.concat(s(C))).slice(0,E))),P}function o(h,y,E,S,C){let _;for(l(h,(2*E-1)*16,C,0,16),_=0;_<2*E;_++)u(h,_*16,C,16),c(C,S),l(C,0,h,y+_*16,16);for(_=0;_<E;_++)l(h,y+_*2*16,h,_*16,16);for(_=0;_<E;_++)l(h,y+(_*2+1)*16,h,(_+E)*16,16)}function a(h,y){return h<<y|h>>>32-y}function c(h,y){l(h,0,y,0,16);for(let E=8;E>0;E-=2)y[4]^=a(y[0]+y[12],7),y[8]^=a(y[4]+y[0],9),y[12]^=a(y[8]+y[4],13),y[0]^=a(y[12]+y[8],18),y[9]^=a(y[5]+y[1],7),y[13]^=a(y[9]+y[5],9),y[1]^=a(y[13]+y[9],13),y[5]^=a(y[1]+y[13],18),y[14]^=a(y[10]+y[6],7),y[2]^=a(y[14]+y[10],9),y[6]^=a(y[2]+y[14],13),y[10]^=a(y[6]+y[2],18),y[3]^=a(y[15]+y[11],7),y[7]^=a(y[3]+y[15],9),y[11]^=a(y[7]+y[3],13),y[15]^=a(y[11]+y[7],18),y[1]^=a(y[0]+y[3],7),y[2]^=a(y[1]+y[0],9),y[3]^=a(y[2]+y[1],13),y[0]^=a(y[3]+y[2],18),y[6]^=a(y[5]+y[4],7),y[7]^=a(y[6]+y[5],9),y[4]^=a(y[7]+y[6],13),y[5]^=a(y[4]+y[7],18),y[11]^=a(y[10]+y[9],7),y[8]^=a(y[11]+y[10],9),y[9]^=a(y[8]+y[11],13),y[10]^=a(y[9]+y[8],18),y[12]^=a(y[15]+y[14],7),y[13]^=a(y[12]+y[15],9),y[14]^=a(y[13]+y[12],13),y[15]^=a(y[14]+y[13],18);for(let E=0;E<16;++E)h[E]+=y[E]}function u(h,y,E,S){for(let C=0;C<S;C++)E[C]^=h[y+C]}function l(h,y,E,S,C){for(;C--;)E[S++]=h[y++]}function d(h){if(!h||typeof h.length!="number")return!1;for(let y=0;y<h.length;y++){const E=h[y];if(typeof E!="number"||E%1||E<0||E>=256)return!1}return!0}function f(h,y){if(typeof h!="number"||h%1)throw new Error("invalid "+y);return h}function p(h,y,E,S,C,_,T){if(E=f(E,"N"),S=f(S,"r"),C=f(C,"p"),_=f(_,"dkLen"),E===0||(E&E-1)!==0)throw new Error("N must be power of 2");if(E>2147483647/128/S)throw new Error("N too large");if(S>2147483647/128/C)throw new Error("r too large");if(!d(h))throw new Error("password must be an array or buffer");if(h=Array.prototype.slice.call(h),!d(y))throw new Error("salt must be an array or buffer");y=Array.prototype.slice.call(y);let P=i(h,y,C*128*S);const D=new Uint32Array(C*32*S);for(let $=0;$<D.length;$++){const O=$*4;D[$]=(P[O+3]&255)<<24|(P[O+2]&255)<<16|(P[O+1]&255)<<8|(P[O+0]&255)<<0}const F=new Uint32Array(64*S),I=new Uint32Array(32*S*E),U=32*S,L=new Uint32Array(16),B=new Uint32Array(16),A=C*E*2;let m=0,b=null,w=!1,x=0,M=0,k,j;const N=T?parseInt(1e3/S):4294967295,v=typeof setImmediate<"u"?setImmediate:setTimeout,R=function(){if(w)return T(new Error("cancelled"),m/A);let $;switch(x){case 0:j=M*32*S,l(D,j,F,0,U),x=1,k=0;case 1:$=E-k,$>N&&($=N);for(let H=0;H<$;H++)l(F,0,I,(k+H)*U,U),o(F,U,S,L,B);if(k+=$,m+=$,T){const H=parseInt(1e3*m/A);if(H!==b){if(w=T(null,m/A),w)break;b=H}}if(k<E)break;k=0,x=2;case 2:$=E-k,$>N&&($=N);for(let H=0;H<$;H++){const W=(2*S-1)*16,G=F[W]&E-1;u(I,G*U,F,U),o(F,U,S,L,B)}if(k+=$,m+=$,T){const H=parseInt(1e3*m/A);if(H!==b){if(w=T(null,m/A),w)break;b=H}}if(k<E)break;if(l(F,0,D,j,U),M++,M<C){x=0;break}P=[];for(let H=0;H<D.length;H++)P.push(D[H]>>0&255),P.push(D[H]>>8&255),P.push(D[H]>>16&255),P.push(D[H]>>24&255);const O=i(h,P,_);return T&&T(null,1,O),O}T&&v(R)};if(!T)for(;;){const $=R();if($!=null)return $}R()}const g={scrypt:function(h,y,E,S,C,_,T){return new Promise(function(P,D){let F=0;T&&T(0),p(h,y,E,S,C,_,function(I,U,L){if(I)D(I);else if(L)T&&F!==1&&T(1),P(new Uint8Array(L));else if(T&&U!==F)return F=U,T(U)})})},syncScrypt:function(h,y,E,S,C,_){return new Uint8Array(p(h,y,E,S,C,_))}};t.exports=g})()})(xP)),xP.exports}var yBe=mBe();const sB=Ea(yBe);var bBe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const IO=new ue(Nne);function zL(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class wBe extends jh{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function vBe(t,e,r){if(Es(t,"crypto/cipher")==="aes-128-ctr"){const s=y0(Es(t,"crypto/cipherparams/iv")),i=new vl.Counter(s),o=new vl.ModeOfOperation.ctr(e,i);return Oe(o.decrypt(r))}return null}function Pne(t,e){const r=y0(Es(t,"crypto/ciphertext"));if(je(En(Mn([e.slice(16,32),r]))).substring(2)!==Es(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const s=vBe(t,e.slice(0,16),r);s||IO.throwError("unsupported cipher",ue.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const i=e.slice(32,64),o=bh(s);if(t.address){let c=t.address.toLowerCase();if(c.substring(0,2)!=="0x"&&(c="0x"+c),sn(c)!==o)throw new Error("address mismatch")}const a={_isKeystoreAccount:!0,address:o,privateKey:je(s)};if(Es(t,"x-ethers/version")==="0.1"){const c=y0(Es(t,"x-ethers/mnemonicCiphertext")),u=y0(Es(t,"x-ethers/mnemonicCounter")),l=new vl.Counter(u),d=new vl.ModeOfOperation.ctr(i,l),f=Es(t,"x-ethers/path")||Iy,p=Es(t,"x-ethers/locale")||"en",g=Oe(d.decrypt(c));try{const h=dT(g,p),y=Xa.fromMnemonic(h,null,p).derivePath(f);if(y.privateKey!=a.privateKey)throw new Error("mnemonic mismatch");a.mnemonic=y.mnemonic}catch(h){if(h.code!==ue.errors.INVALID_ARGUMENT||h.argument!=="wordlist")throw h}}return new wBe(a)}function Rne(t,e,r,n,s){return Oe(eB(t,e,r,n,s))}function EBe(t,e,r,n,s){return Promise.resolve(Rne(t,e,r,n,s))}function One(t,e,r,n,s){const i=rB(e),o=Es(t,"crypto/kdf");if(o&&typeof o=="string"){const a=function(c,u){return IO.throwArgumentError("invalid key-derivation function parameters",c,u)};if(o.toLowerCase()==="scrypt"){const c=y0(Es(t,"crypto/kdfparams/salt")),u=parseInt(Es(t,"crypto/kdfparams/n")),l=parseInt(Es(t,"crypto/kdfparams/r")),d=parseInt(Es(t,"crypto/kdfparams/p"));(!u||!l||!d)&&a("kdf",o),(u&u-1)!==0&&a("N",u);const f=parseInt(Es(t,"crypto/kdfparams/dklen"));return f!==32&&a("dklen",f),n(i,c,u,l,d,64,s)}else if(o.toLowerCase()==="pbkdf2"){const c=y0(Es(t,"crypto/kdfparams/salt"));let u=null;const l=Es(t,"crypto/kdfparams/prf");l==="hmac-sha256"?u="sha256":l==="hmac-sha512"?u="sha512":a("prf",l);const d=parseInt(Es(t,"crypto/kdfparams/c")),f=parseInt(Es(t,"crypto/kdfparams/dklen"));return f!==32&&a("dklen",f),r(i,c,d,f,u)}}return IO.throwArgumentError("unsupported key-derivation function","kdf",o)}function kne(t,e){const r=JSON.parse(t),n=One(r,e,Rne,sB.syncScrypt);return Pne(r,n)}function Bne(t,e,r){return bBe(this,void 0,void 0,function*(){const n=JSON.parse(t),s=yield One(n,e,EBe,sB.scrypt,r);return Pne(n,s)})}function Une(t,e,r,n){try{if(sn(t.address)!==bh(t.privateKey))throw new Error("address/privateKey mismatch");if(zL(t)){const y=t.mnemonic;if(Xa.fromMnemonic(y.phrase,null,y.locale).derivePath(y.path||Iy).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(y){return Promise.reject(y)}typeof r=="function"&&!n&&(n=r,r={}),r||(r={});const s=Oe(t.privateKey),i=rB(e);let o=null,a=null,c=null;if(zL(t)){const y=t.mnemonic;o=Oe(lT(y.phrase,y.locale||"en")),a=y.path||Iy,c=y.locale||"en"}let u=r.client;u||(u="ethers.js");let l=null;r.salt?l=Oe(r.salt):l=Lm(32);let d=null;if(r.iv){if(d=Oe(r.iv),d.length!==16)throw new Error("invalid iv")}else d=Lm(16);let f=null;if(r.uuid){if(f=Oe(r.uuid),f.length!==16)throw new Error("invalid uuid")}else f=Lm(16);let p=1<<17,g=8,h=1;return r.scrypt&&(r.scrypt.N&&(p=r.scrypt.N),r.scrypt.r&&(g=r.scrypt.r),r.scrypt.p&&(h=r.scrypt.p)),sB.scrypt(i,l,p,g,h,64,n).then(y=>{y=Oe(y);const E=y.slice(0,16),S=y.slice(16,32),C=y.slice(32,64),_=new vl.Counter(d),T=new vl.ModeOfOperation.ctr(E,_),P=Oe(T.encrypt(s)),D=En(Mn([S,P])),F={address:t.address.substring(2).toLowerCase(),id:fBe(f),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:je(d).substring(2)},ciphertext:je(P).substring(2),kdf:"scrypt",kdfparams:{salt:je(l).substring(2),n:p,dklen:32,p:h,r:g},mac:D.substring(2)}};if(o){const I=Lm(16),U=new vl.Counter(I),L=new vl.ModeOfOperation.ctr(C,U),B=Oe(L.encrypt(o)),A=new Date,m=A.getUTCFullYear()+"-"+$b(A.getUTCMonth()+1,2)+"-"+$b(A.getUTCDate(),2)+"T"+$b(A.getUTCHours(),2)+"-"+$b(A.getUTCMinutes(),2)+"-"+$b(A.getUTCSeconds(),2)+".0Z";F["x-ethers"]={client:u,gethFilename:"UTC--"+m+"--"+F.address,mnemonicCounter:je(I).substring(2),mnemonicCiphertext:je(B).substring(2),path:a,locale:c,version:"0.1"}}return JSON.stringify(F)})}function Mne(t,e,r){if(fT(t)){r&&r(0);const n=nB(t,e);return r&&r(1),Promise.resolve(n)}return hT(t)?Bne(t,e,r):Promise.reject(new Error("invalid JSON wallet"))}function Dne(t,e){if(fT(t))return nB(t,e);if(hT(t))return kne(t,e);throw new Error("invalid JSON wallet")}const _Be=Object.freeze(Object.defineProperty({__proto__:null,decryptCrowdsale:nB,decryptJsonWallet:Mne,decryptJsonWalletSync:Dne,decryptKeystore:Bne,decryptKeystoreSync:kne,encryptKeystore:Une,getJsonWalletAddress:gBe,isCrowdsaleWallet:fT,isKeystoreWallet:hT},Symbol.toStringTag,{value:"Module"})),ABe="wallet/5.8.0";var WL=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const Rg=new ue(ABe);function xBe(t){return t!=null&&Er(t.privateKey,32)&&t.address!=null}function CBe(t){const e=t.mnemonic;return e&&e.phrase}class Wp extends Ky{constructor(e,r){if(super(),xBe(e)){const n=new m0(e.privateKey);if(xe(this,"_signingKey",()=>n),xe(this,"address",bh(this.publicKey)),this.address!==sn(e.address)&&Rg.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),CBe(e)){const s=e.mnemonic;xe(this,"_mnemonic",()=>({phrase:s.phrase,path:s.path||Iy,locale:s.locale||"en"}));const i=this.mnemonic,o=Xa.fromMnemonic(i.phrase,null,i.locale).derivePath(i.path);bh(o.privateKey)!==this.address&&Rg.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else xe(this,"_mnemonic",()=>null)}else{if(m0.isSigningKey(e))e.curve!=="secp256k1"&&Rg.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),xe(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const n=new m0(e);xe(this,"_signingKey",()=>n)}xe(this,"_mnemonic",()=>null),xe(this,"address",bh(this.publicKey))}r&&!VE.isProvider(r)&&Rg.throwArgumentError("invalid provider","provider",r),xe(this,"provider",r||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Wp(this,e)}signTransaction(e){return ps(e).then(r=>{r.from!=null&&(sn(r.from)!==this.address&&Rg.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete r.from);const n=this._signingKey().signDigest(En(CO(r)));return CO(r,n)})}signMessage(e){return WL(this,void 0,void 0,function*(){return bO(this._signingKey().signDigest(Vk(e)))})}_signTypedData(e,r,n){return WL(this,void 0,void 0,function*(){const s=yield Ni.resolveNames(e,r,n,i=>(this.provider==null&&Rg.throwError("cannot resolve ENS names without a provider",ue.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:i}),this.provider.resolveName(i)));return bO(this._signingKey().signDigest(Ni.hash(s.domain,r,s.value)))})}encrypt(e,r,n){if(typeof r=="function"&&!n&&(n=r,r={}),n&&typeof n!="function")throw new Error("invalid callback");return r||(r={}),Une(this,e,r,n)}static createRandom(e){let r=Lm(16);e||(e={}),e.extraEntropy&&(r=Oe(As(En(Mn([r,e.extraEntropy])),0,16)));const n=dT(r,e.locale);return Wp.fromMnemonic(n,e.path,e.locale)}static fromEncryptedJson(e,r,n){return Mne(e,r,n).then(s=>new Wp(s))}static fromEncryptedJsonSync(e,r){return new Wp(Dne(e,r))}static fromMnemonic(e,r,n){return r||(r=Iy),new Wp(Xa.fromMnemonic(e,null,n).derivePath(r))}}function SBe(t,e){return ZE(Vk(t),e)}function IBe(t,e,r,n){return ZE(Ni.hash(t,e,r),n)}const TBe=Object.freeze(Object.defineProperty({__proto__:null,Wallet:Wp,verifyMessage:SBe,verifyTypedData:IBe},Symbol.toStringTag,{value:"Module"})),NBe="networks/5.8.0",VL=new ue(NBe);function PBe(t){return t&&typeof t.renetwork=="function"}function bu(t){const e=function(r,n){n==null&&(n={});const s=[];if(r.InfuraProvider&&n.infura!=="-")try{s.push(new r.InfuraProvider(t,n.infura))}catch{}if(r.EtherscanProvider&&n.etherscan!=="-")try{s.push(new r.EtherscanProvider(t,n.etherscan))}catch{}if(r.AlchemyProvider&&n.alchemy!=="-")try{s.push(new r.AlchemyProvider(t,n.alchemy))}catch{}if(r.PocketProvider&&n.pocket!=="-"){const i=["goerli","ropsten","rinkeby","sepolia"];try{const o=new r.PocketProvider(t,n.pocket);o.network&&i.indexOf(o.network.name)===-1&&s.push(o)}catch{}}if(r.CloudflareProvider&&n.cloudflare!=="-")try{s.push(new r.CloudflareProvider(t))}catch{}if(r.AnkrProvider&&n.ankr!=="-")try{const i=["ropsten"],o=new r.AnkrProvider(t,n.ankr);o.network&&i.indexOf(o.network.name)===-1&&s.push(o)}catch{}if(r.QuickNodeProvider&&n.quicknode!=="-")try{s.push(new r.QuickNodeProvider(t,n.quicknode))}catch{}if(s.length===0)return null;if(r.FallbackProvider){let i=1;return n.quorum!=null?i=n.quorum:t==="homestead"&&(i=2),new r.FallbackProvider(s,i)}return s[0]};return e.renetwork=function(r){return bu(r)},e}function Y6(t,e){const r=function(n,s){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null};return r.renetwork=function(n){return Y6(t,n)},r}const GL={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:bu("homestead")},KL={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:bu("ropsten")},ZL={chainId:63,name:"classicMordor",_defaultProvider:Y6("https://www.ethercluster.com/mordor","classicMordor")},x2={unspecified:{chainId:0,name:"unspecified"},homestead:GL,mainnet:GL,morden:{chainId:2,name:"morden"},ropsten:KL,testnet:KL,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:bu("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:bu("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:bu("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:bu("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:bu("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:Y6("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:ZL,classicTestnet:ZL,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Y6("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:bu("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:bu("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:bu("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function RBe(t){if(t==null)return null;if(typeof t=="number"){for(const n in x2){const s=x2[n];if(s.chainId===t)return{name:s.name,chainId:s.chainId,ensAddress:s.ensAddress||null,_defaultProvider:s._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const n=x2[t];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=x2[t.name];if(!e)return typeof t.chainId!="number"&&VL.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&VL.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return r==null&&e._defaultProvider&&(PBe(e._defaultProvider)?r=e._defaultProvider.renetwork(t):r=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}const OBe="web/5.8.0";var kBe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};function BBe(t,e){return kBe(this,void 0,void 0,function*(){e==null&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(r.mode=o.mode),o.cache&&(r.cache=o.cache),o.credentials&&(r.credentials=o.credentials),o.redirect&&(r.redirect=o.redirect),o.referrer&&(r.referrer=o.referrer)}const n=yield fetch(t,r),s=yield n.arrayBuffer(),i={};return n.headers.forEach?n.headers.forEach((o,a)=>{i[a.toLowerCase()]=o}):n.headers.keys().forEach(o=>{i[o.toLowerCase()]=n.headers.get(o)}),{headers:i,statusCode:n.status,statusMessage:n.statusText,body:Oe(new Uint8Array(s))}})}var UBe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const pu=new ue(OBe);function YL(t){return new Promise(e=>{setTimeout(e,t)})}function kf(t,e){if(t==null)return null;if(typeof t=="string")return t;if(zE(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return Lh(t)}catch{}return je(t)}return t}function MBe(t){return ms(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function jne(t,e,r){const n=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;pu.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const s=typeof t=="object"?t.throttleCallback:null,i=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;pu.assertArgument(i>0&&i%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",i);const o=typeof t=="object"?!!t.errorPassThrough:!1,a={};let c=null;const u={method:"GET"};let l=!1,d=120*1e3;if(typeof t=="string")c=t;else if(typeof t=="object"){if((t==null||t.url==null)&&pu.throwArgumentError("missing URL","connection.url",t),c=t.url,typeof t.timeout=="number"&&t.timeout>0&&(d=t.timeout),t.headers)for(const E in t.headers)a[E.toLowerCase()]={key:E,value:String(t.headers[E])},["if-none-match","if-modified-since"].indexOf(E.toLowerCase())>=0&&(l=!0);if(u.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){c.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&pu.throwError("basic authentication requires a secure https url",ue.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:t.user,password:"[REDACTED]"});const E=t.user+":"+t.password;a.authorization={key:"Authorization",value:"Basic "+Wk(ms(E))}}t.skipFetchSetup!=null&&(u.skipFetchSetup=!!t.skipFetchSetup),t.fetchOptions!=null&&(u.fetchOptions=Ds(t.fetchOptions))}const f=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),p=c?c.match(f):null;if(p)try{const E={statusCode:200,statusMessage:"OK",headers:{"content-type":p[1]||"text/plain"},body:p[2]?zk(p[3]):MBe(p[3])};let S=E.body;return r&&(S=r(E.body,E)),Promise.resolve(S)}catch(E){pu.throwError("processing response error",ue.errors.SERVER_ERROR,{body:kf(p[1],p[2]),error:E,requestBody:null,requestMethod:"GET",url:c})}e&&(u.method="POST",u.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const g={};Object.keys(a).forEach(E=>{const S=a[E];g[S.key]=S.value}),u.headers=g;const h=(function(){let E=null;return{promise:new Promise(function(_,T){d&&(E=setTimeout(()=>{E!=null&&(E=null,T(pu.makeError("timeout",ue.errors.TIMEOUT,{requestBody:kf(u.body,g["content-type"]),requestMethod:u.method,timeout:d,url:c})))},d))}),cancel:function(){E!=null&&(clearTimeout(E),E=null)}}})(),y=(function(){return UBe(this,void 0,void 0,function*(){for(let E=0;E<n;E++){let S=null;try{if(S=yield BBe(c,u),E<n){if(S.statusCode===301||S.statusCode===302){const _=S.headers.location||"";if(u.method==="GET"&&_.match(/^https:/)){c=S.headers.location;continue}}else if(S.statusCode===429){let _=!0;if(s&&(_=yield s(E,c)),_){let T=0;const P=S.headers["retry-after"];typeof P=="string"&&P.match(/^[1-9][0-9]*$/)?T=parseInt(P)*1e3:T=i*parseInt(String(Math.random()*Math.pow(2,E))),yield YL(T);continue}}}}catch(_){S=_.response,S==null&&(h.cancel(),pu.throwError("missing response",ue.errors.SERVER_ERROR,{requestBody:kf(u.body,g["content-type"]),requestMethod:u.method,serverError:_,url:c}))}let C=S.body;if(l&&S.statusCode===304?C=null:!o&&(S.statusCode<200||S.statusCode>=300)&&(h.cancel(),pu.throwError("bad response",ue.errors.SERVER_ERROR,{status:S.statusCode,headers:S.headers,body:kf(C,S.headers?S.headers["content-type"]:null),requestBody:kf(u.body,g["content-type"]),requestMethod:u.method,url:c})),r)try{const _=yield r(C,S);return h.cancel(),_}catch(_){if(_.throttleRetry&&E<n){let T=!0;if(s&&(T=yield s(E,c)),T){const P=i*parseInt(String(Math.random()*Math.pow(2,E)));yield YL(P);continue}}h.cancel(),pu.throwError("processing response error",ue.errors.SERVER_ERROR,{body:kf(C,S.headers?S.headers["content-type"]:null),error:_,requestBody:kf(u.body,g["content-type"]),requestMethod:u.method,url:c})}return h.cancel(),C}return pu.throwError("failed response",ue.errors.SERVER_ERROR,{requestBody:kf(u.body,g["content-type"]),requestMethod:u.method,url:c})})})();return Promise.race([h.promise,y])}function pT(t,e,r){let n=(i,o)=>{let a=null;if(i!=null)try{a=JSON.parse(Lh(i))}catch(c){pu.throwError("invalid JSON",ue.errors.SERVER_ERROR,{body:i,error:c})}return r&&(a=r(a,o)),a},s=null;if(e!=null){s=ms(e);const i=typeof t=="string"?{url:t}:Ds(t);i.headers?Object.keys(i.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(i.headers=Ds(i.headers),i.headers["content-type"]="application/json"):i.headers={"content-type":"application/json"},t=i}return jne(t,s,n)}function Fm(t,e){return e||(e={}),e=Ds(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(r,n){let s=null,i=!1;const o=()=>i?!1:(i=!0,s&&clearTimeout(s),!0);e.timeout&&(s=setTimeout(()=>{o()&&n(new Error("timeout"))},e.timeout));const a=e.retryLimit;let c=0;function u(){return t().then(function(l){if(l!==void 0)o()&&r(l);else if(e.oncePoll)e.oncePoll.once("poll",u);else if(e.onceBlock)e.onceBlock.once("block",u);else if(!i){if(c++,c>a){o()&&n(new Error("retry limit reached"));return}let d=e.interval*parseInt(String(Math.random()*Math.pow(2,c)));d<e.floor&&(d=e.floor),d>e.ceiling&&(d=e.ceiling),setTimeout(u,d)}return null},function(l){o()&&n(l)})}u()})}const DBe=Object.freeze(Object.defineProperty({__proto__:null,_fetchData:jne,fetchJson:pT,poll:Fm},Symbol.toStringTag,{value:"Module"}));var CP,JL;function jBe(){if(JL)return CP;JL=1;for(var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",e={},r=0;r<t.length;r++){var n=t.charAt(r);if(e[n]!==void 0)throw new TypeError(n+" is ambiguous");e[n]=r}function s(h){var y=h>>25;return(h&33554431)<<5^-(y>>0&1)&996825010^-(y>>1&1)&642813549^-(y>>2&1)&513874426^-(y>>3&1)&1027748829^-(y>>4&1)&705979059}function i(h){for(var y=1,E=0;E<h.length;++E){var S=h.charCodeAt(E);if(S<33||S>126)return"Invalid prefix ("+h+")";y=s(y)^S>>5}for(y=s(y),E=0;E<h.length;++E){var C=h.charCodeAt(E);y=s(y)^C&31}return y}function o(h,y,E){if(E=E||90,h.length+7+y.length>E)throw new TypeError("Exceeds length limit");h=h.toLowerCase();var S=i(h);if(typeof S=="string")throw new Error(S);for(var C=h+"1",_=0;_<y.length;++_){var T=y[_];if(T>>5!==0)throw new Error("Non 5-bit word");S=s(S)^T,C+=t.charAt(T)}for(_=0;_<6;++_)S=s(S);for(S^=1,_=0;_<6;++_){var P=S>>(5-_)*5&31;C+=t.charAt(P)}return C}function a(h,y){if(y=y||90,h.length<8)return h+" too short";if(h.length>y)return"Exceeds length limit";var E=h.toLowerCase(),S=h.toUpperCase();if(h!==E&&h!==S)return"Mixed-case string "+h;h=E;var C=h.lastIndexOf("1");if(C===-1)return"No separator character for "+h;if(C===0)return"Missing prefix for "+h;var _=h.slice(0,C),T=h.slice(C+1);if(T.length<6)return"Data too short";var P=i(_);if(typeof P=="string")return P;for(var D=[],F=0;F<T.length;++F){var I=T.charAt(F),U=e[I];if(U===void 0)return"Unknown character "+I;P=s(P)^U,!(F+6>=T.length)&&D.push(U)}return P!==1?"Invalid checksum for "+h:{prefix:_,words:D}}function c(){var h=a.apply(null,arguments);if(typeof h=="object")return h}function u(h){var y=a.apply(null,arguments);if(typeof y=="object")return y;throw new Error(y)}function l(h,y,E,S){for(var C=0,_=0,T=(1<<E)-1,P=[],D=0;D<h.length;++D)for(C=C<<y|h[D],_+=y;_>=E;)_-=E,P.push(C>>_&T);if(S)_>0&&P.push(C<<E-_&T);else{if(_>=y)return"Excess padding";if(C<<E-_&T)return"Non-zero padding"}return P}function d(h){var y=l(h,8,5,!0);if(Array.isArray(y))return y}function f(h){var y=l(h,8,5,!0);if(Array.isArray(y))return y;throw new Error(y)}function p(h){var y=l(h,5,8,!1);if(Array.isArray(y))return y}function g(h){var y=l(h,5,8,!1);if(Array.isArray(y))return y;throw new Error(y)}return CP={decodeUnsafe:c,decode:u,encode:o,toWordsUnsafe:d,toWords:f,fromWordsUnsafe:p,fromWords:g},CP}var LBe=jBe();const XL=Ea(LBe),gT="providers/5.8.0",qb=new ue(gT);class ht{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},r=this.address.bind(this),n=this.bigNumber.bind(this),s=this.blockTag.bind(this),i=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),c=this.number.bind(this),u=this.type.bind(this),l=d=>this.data(d,!0);return e.transaction={hash:o,type:u,accessList:ht.allowNull(this.accessList.bind(this),null),blockHash:ht.allowNull(o,null),blockNumber:ht.allowNull(c,null),transactionIndex:ht.allowNull(c,null),confirmations:ht.allowNull(c,null),from:r,gasPrice:ht.allowNull(n),maxPriorityFeePerGas:ht.allowNull(n),maxFeePerGas:ht.allowNull(n),gasLimit:n,to:ht.allowNull(r,null),value:n,nonce:c,data:i,r:ht.allowNull(this.uint256),s:ht.allowNull(this.uint256),v:ht.allowNull(c),creates:ht.allowNull(r,null),raw:ht.allowNull(i)},e.transactionRequest={from:ht.allowNull(r),nonce:ht.allowNull(c),gasLimit:ht.allowNull(n),gasPrice:ht.allowNull(n),maxPriorityFeePerGas:ht.allowNull(n),maxFeePerGas:ht.allowNull(n),to:ht.allowNull(r),value:ht.allowNull(n),data:ht.allowNull(l),type:ht.allowNull(c),accessList:ht.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:c,blockNumber:c,transactionHash:o,address:r,topics:ht.arrayOf(o),data:i,logIndex:c,blockHash:o},e.receipt={to:ht.allowNull(this.address,null),from:ht.allowNull(this.address,null),contractAddress:ht.allowNull(r,null),transactionIndex:c,root:ht.allowNull(a),gasUsed:n,logsBloom:ht.allowNull(i),blockHash:o,transactionHash:o,logs:ht.arrayOf(this.receiptLog.bind(this)),blockNumber:c,confirmations:ht.allowNull(c,null),cumulativeGasUsed:n,effectiveGasPrice:ht.allowNull(n),status:ht.allowNull(c),type:u},e.block={hash:ht.allowNull(o),parentHash:o,number:c,timestamp:c,nonce:ht.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:ht.allowNull(r),extraData:i,transactions:ht.allowNull(ht.arrayOf(o)),baseFeePerGas:ht.allowNull(n)},e.blockWithTransactions=Ds(e.block),e.blockWithTransactions.transactions=ht.allowNull(ht.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:ht.allowNull(s,void 0),toBlock:ht.allowNull(s,void 0),blockHash:ht.allowNull(o,void 0),address:ht.allowNull(r,void 0),topics:ht.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:ht.allowNull(c),blockHash:ht.allowNull(o),transactionIndex:c,removed:ht.allowNull(this.boolean.bind(this)),address:r,data:ht.allowFalsish(i,"0x"),topics:ht.arrayOf(o),transactionHash:o,logIndex:c},e}accessList(e){return Q0(e||[])}number(e){return e==="0x"?0:Ue.from(e).toNumber()}type(e){return e==="0x"||e==null?0:Ue.from(e).toNumber()}bigNumber(e){return Ue.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,r){return typeof e=="string"&&(!r&&e.substring(0,2)!=="0x"&&(e="0x"+e),Er(e))?e.toLowerCase():qb.throwArgumentError("invalid hash","value",e)}data(e,r){const n=this.hex(e,r);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return sn(e)}callAddress(e){if(!Er(e,32))return null;const r=sn(As(e,12));return r===qOe?null:r}contractAddress(e){return Fk(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||Er(e))return nT(e);throw new Error("invalid blockTag")}hash(e,r){const n=this.hex(e,r);return Ul(n)!==32?qb.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const r=Ue.from(e);try{return r.toNumber()}catch{}return null}uint256(e){if(!Er(e))throw new Error("invalid uint256");return Nn(e,32)}_block(e,r){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,s=ht.check(r,e);return s._difficulty=n==null?null:Ue.from(n),s}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return ht.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&Ue.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const r=ht.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;Er(n)&&(n=Ue.from(n).toNumber()),r.chainId=n}else{let n=e.networkId;n==null&&r.v==null&&(n=e.chainId),Er(n)&&(n=Ue.from(n).toNumber()),typeof n!="number"&&r.v!=null&&(n=(r.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),r.chainId=n}return r.blockHash&&r.blockHash.replace(/0/g,"")==="x"&&(r.blockHash=null),r}transaction(e){return _ne(e)}receiptLog(e){return ht.check(this.formats.receiptLog,e)}receipt(e){const r=ht.check(this.formats.receipt,e);if(r.root!=null)if(r.root.length<=4){const n=Ue.from(r.root).toNumber();n===0||n===1?(r.status!=null&&r.status!==n&&qb.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):qb.throwArgumentError("invalid alt-root-status","value.root",r.root)}else r.root.length!==66&&qb.throwArgumentError("invalid root hash","value.root",r.root);return r.status!=null&&(r.byzantium=!0),r}topics(e){return Array.isArray(e)?e.map(r=>this.topics(r)):e!=null?this.hash(e,!0):null}filter(e){return ht.check(this.formats.filter,e)}filterLog(e){return ht.check(this.formats.filterLog,e)}static check(e,r){const n={};for(const s in e)try{const i=e[s](r[s]);i!==void 0&&(n[s]=i)}catch(i){throw i.checkKey=s,i.checkValue=r[s],i}return n}static allowNull(e,r){return(function(n){return n==null?r:e(n)})}static allowFalsish(e,r){return(function(n){return n?e(n):r})}static arrayOf(e){return(function(r){if(!Array.isArray(r))throw new Error("not an array");const n=[];return r.forEach(function(s){n.push(e(s))}),n})}}var Wt=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const ar=new ue(gT),FBe=10;function QL(t){return t==null?"null":(Ul(t)!==32&&ar.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function eF(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const r={};e.forEach(s=>{r[QL(s)]=!0});const n=Object.keys(r);return n.sort(),n.join("|")}else return QL(e)}).join("&")}function $Be(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const r=e.split("|").map(n=>n==="null"?null:n);return r.length===1?r[0]:r})}function Og(t){if(typeof t=="string"){if(t=t.toLowerCase(),Ul(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+eF(t);if(rke.isForkEvent(t))throw ar.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+eF(t.topics||[])}throw new Error("invalid event - "+t)}function Hb(){return new Date().getTime()}function tF(t){return new Promise(e=>{setTimeout(e,t)})}const qBe=["block","network","pending","poll"];let HBe=class{constructor(e,r,n){xe(this,"tag",e),xe(this,"listener",r),xe(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const r=e[1],n=$Be(e[2]),s={};return n.length>0&&(s.topics=n),r&&r!=="*"&&(s.address=r),s}pollable(){return this.tag.indexOf(":")>=0||qBe.indexOf(this.tag)>=0}};const zBe={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function SP(t){return Nn(Ue.from(t).toHexString(),32)}function rF(t){return Cy.encode(Mn([t,As(tf(tf(t)),0,4)]))}const Lne=new RegExp("^(ipfs)://(.*)$","i"),nF=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Lne,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function TI(t,e){try{return Lh(Xv(t,e))}catch{}return null}function Xv(t,e){if(t==="0x")return null;const r=Ue.from(As(t,e,e+32)).toNumber(),n=Ue.from(As(t,r,r+32)).toNumber();return As(t,r+32,r+32+n)}function IP(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):ar.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function sF(t){const e=Oe(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function WBe(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}function Fne(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(null),r+=32;for(let n=0;n<t.length;n++){const s=Oe(t[n]);e[n]=sF(r),e.push(sF(s.length)),e.push(WBe(s)),r+=32+Math.ceil(s.length/32)*32}return No(e)}class iF{constructor(e,r,n,s){xe(this,"provider",e),xe(this,"name",n),xe(this,"address",e.formatter.address(r)),xe(this,"_resolvedAddress",s)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>Ue.from(e).eq(1)).catch(e=>{if(e.code===ue.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,r){return Wt(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:No([e,U1(this.name),r||"0x"])};let s=!1;(yield this.supportsWildcard())&&(s=!0,n.data=No(["0x9061b923",Fne([ine(this.name),n.data])]));try{let i=yield this.provider.call(n);return Oe(i).length%32===4&&ar.throwError("resolver threw error",ue.errors.CALL_EXCEPTION,{transaction:n,data:i}),s&&(i=Xv(i,0)),i}catch(i){if(i.code===ue.errors.CALL_EXCEPTION)return null;throw i}})}_fetchBytes(e,r){return Wt(this,void 0,void 0,function*(){const n=yield this._fetch(e,r);return n!=null?Xv(n,0):null})}_getAddress(e,r){const n=zBe[String(e)];if(n==null&&ar.throwError(`unsupported coin type: ${e}`,ue.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(r);const s=Oe(r);if(n.p2pkh!=null){const i=r.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(i){const o=parseInt(i[1],16);if(i[2].length===o*2&&o>=1&&o<=75)return rF(Mn([[n.p2pkh],"0x"+i[2]]))}}if(n.p2sh!=null){const i=r.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(i){const o=parseInt(i[1],16);if(i[2].length===o*2&&o>=1&&o<=75)return rF(Mn([[n.p2sh],"0x"+i[2]]))}}if(n.prefix!=null){const i=s[1];let o=s[0];if(o===0?i!==20&&i!==32&&(o=-1):o=-1,o>=0&&s.length===2+i&&i>=1&&i<=75){const a=XL.toWords(s.slice(2));return a.unshift(o),XL.encode(n.prefix,a)}}return null}getAddress(e){return Wt(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const s=yield this._fetch("0x3b3b57de");return s==="0x"||s===Vre?null:this.provider.formatter.callAddress(s)}catch(s){if(s.code===ue.errors.CALL_EXCEPTION)return null;throw s}const r=yield this._fetchBytes("0xf1cb7e06",SP(e));if(r==null||r==="0x")return null;const n=this._getAddress(e,r);return n==null&&ar.throwError("invalid or unsupported coin data",ue.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:r}),n})}getAvatar(){return Wt(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const r=yield this.getText("avatar");if(r==null)return null;for(let n=0;n<nF.length;n++){const s=r.match(nF[n]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":return e.push({type:"url",content:r}),{linkage:e,url:r};case"data":return e.push({type:"data",content:r}),{linkage:e,url:r};case"ipfs":return e.push({type:"ipfs",content:r}),{linkage:e,url:IP(r)};case"erc721":case"erc1155":{const o=i==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:i,content:r});const a=this._resolvedAddress||(yield this.getAddress()),c=(s[2]||"").split("/");if(c.length!==2)return null;const u=yield this.provider.formatter.address(c[0]),l=Nn(Ue.from(c[1]).toHexString(),32);if(i==="erc721"){const h=this.provider.formatter.callAddress(yield this.provider.call({to:u,data:No(["0x6352211e",l])}));if(a!==h)return null;e.push({type:"owner",content:h})}else if(i==="erc1155"){const h=Ue.from(yield this.provider.call({to:u,data:No(["0x00fdd58e",Nn(a,32),l])}));if(h.isZero())return null;e.push({type:"balance",content:h.toString()})}const d={to:this.provider.formatter.address(c[0]),data:No([o,l])};let f=TI(yield this.provider.call(d),0);if(f==null)return null;e.push({type:"metadata-url-base",content:f}),i==="erc1155"&&(f=f.replace("{id}",l.substring(2)),e.push({type:"metadata-url-expanded",content:f})),f.match(/^ipfs:/i)&&(f=IP(f)),e.push({type:"metadata-url",content:f});const p=yield pT(f);if(!p)return null;e.push({type:"metadata",content:JSON.stringify(p)});let g=p.image;if(typeof g!="string")return null;if(!g.match(/^(https:\/\/|data:)/i)){if(g.match(Lne)==null)return null;e.push({type:"url-ipfs",content:g}),g=IP(g)}return e.push({type:"url",content:g}),{linkage:e,url:g}}}}}catch{}return null})}getContentHash(){return Wt(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const r=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipfs://"+Cy.encode("0x"+r[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const o=parseInt(n[3],16);if(n[4].length===o*2)return"ipns://"+Cy.encode("0x"+n[1])}const s=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(s&&s[1].length===64)return"bzz://"+s[1];const i=e.match(/^0x90b2c605([0-9a-f]*)$/);if(i&&i[1].length===68){const o={"=":"","+":"-","/":"_"};return"sia://"+Wk("0x"+i[1]).replace(/[=+\/]/g,c=>o[c])}return ar.throwError("invalid or unsupported content hash data",ue.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return Wt(this,void 0,void 0,function*(){let r=ms(e);r=Mn([SP(64),SP(r.length),r]),r.length%32!==0&&(r=Mn([r,Nn("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",je(r));return n==null||n==="0x"?null:Lh(n)})}}let TP=null,VBe=1,GBe=class extends VE{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),xe(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(r=>{}),this._ready().catch(r=>{});else{const r=Iu(new.target,"getNetwork")(e);r?(xe(this,"_network",r),this.emit("network",r,null)):ar.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Wt(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||ar.throwError("no network detected",ue.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:xe(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Fm(()=>this._ready().then(e=>e,e=>{if(!(e.code===ue.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return TP==null&&(TP=new ht),TP}static getNetwork(e){return RBe(e??"homestead")}ccipReadFetch(e,r,n){return Wt(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const s=e.to.toLowerCase(),i=r.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],u=c.replace("{sender}",s).replace("{data}",i),l=c.indexOf("{data}")>=0?null:JSON.stringify({data:i,sender:s}),d=yield pT({url:u,errorPassThrough:!0},l,(p,g)=>(p.status=g.statusCode,p));if(d.data)return d.data;const f=d.message||"unknown error";if(d.status>=400&&d.status<500)return ar.throwError(`response not found during CCIP fetch: ${f}`,ue.errors.SERVER_ERROR,{url:c,errorMessage:f});o.push(f)}return ar.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,ue.errors.SERVER_ERROR,{urls:n,errorMessages:o})})}_getInternalBlockNumber(e){return Wt(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const s=this._internalBlockNumber;try{const i=yield s;if(Hb()-i.respTime<=e)return i.blockNumber;break}catch{if(this._internalBlockNumber===s)break}}const r=Hb(),n=ps({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(s=>null,s=>s)}).then(({blockNumber:s,networkError:i})=>{if(i)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),i;const o=Hb();return s=Ue.from(s).toNumber(),s<this._maxInternalBlockNumber&&(s=this._maxInternalBlockNumber),this._maxInternalBlockNumber=s,this._setFastBlockNumber(s),{blockNumber:s,reqTime:r,respTime:o}});return this._internalBlockNumber=n,n.catch(s=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return Wt(this,void 0,void 0,function*(){const e=VBe++,r=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(s){this.emit("error",s);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)ar.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",ar.makeError("network block skew detected",ue.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let s=this._emitted.block+1;s<=n;s++)this.emit("block",s);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(s=>{if(s==="block")return;const i=this._emitted[s];i!=="pending"&&n-i>12&&delete this._emitted[s]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(s=>{switch(s.type){case"tx":{const i=s.hash;let o=this.getTransactionReceipt(i).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+i]=a.blockNumber,this.emit(i,a)),null)).catch(a=>{this.emit("error",a)});r.push(o);break}case"filter":{if(!s._inflight){s._inflight=!0,s._lastBlockNumber===-2&&(s._lastBlockNumber=n-1);const i=s.filter;i.fromBlock=s._lastBlockNumber+1,i.toBlock=n;const o=i.toBlock-this._maxFilterBlockRange;o>i.fromBlock&&(i.fromBlock=o),i.fromBlock<0&&(i.fromBlock=0);const a=this.getLogs(i).then(c=>{s._inflight=!1,c.length!==0&&c.forEach(u=>{u.blockNumber>s._lastBlockNumber&&(s._lastBlockNumber=u.blockNumber),this._emitted["b:"+u.blockHash]=u.blockNumber,this._emitted["t:"+u.transactionHash]=u.blockNumber,this.emit(i,u)})}).catch(c=>{this.emit("error",c),s._inflight=!1});r.push(a)}break}}}),this._lastBlockNumber=n,Promise.all(r).then(()=>{this.emit("didPoll",e)}).catch(s=>{this.emit("error",s)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Wt(this,void 0,void 0,function*(){return ar.throwError("provider does not support network detection",ue.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return Wt(this,void 0,void 0,function*(){const e=yield this._ready(),r=yield this.detectNetwork();if(e.chainId!==r.chainId){if(this.anyNetwork)return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,e),yield tF(0),this._network;const n=ar.makeError("underlying network changed",ue.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:r});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Hb();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(r=>((this._fastBlockNumber==null||r>this._fastBlockNumber)&&(this._fastBlockNumber=r),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Hb(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,r,n){return Wt(this,void 0,void 0,function*(){return this._waitForTransaction(e,r??1,n||0,null)})}_waitForTransaction(e,r,n,s){return Wt(this,void 0,void 0,function*(){const i=yield this.getTransactionReceipt(e);return(i?i.confirmations:0)>=r?i:new Promise((o,a)=>{const c=[];let u=!1;const l=function(){return u?!0:(u=!0,c.forEach(f=>{f()}),!1)},d=f=>{f.confirmations<r||l()||o(f)};if(this.on(e,d),c.push(()=>{this.removeListener(e,d)}),s){let f=s.startBlock,p=null;const g=h=>Wt(this,void 0,void 0,function*(){u||(yield tF(1e3),this.getTransactionCount(s.from).then(y=>Wt(this,void 0,void 0,function*(){if(!u){if(y<=s.nonce)f=h;else{{const E=yield this.getTransaction(e);if(E&&E.blockNumber!=null)return}for(p==null&&(p=f-3,p<s.startBlock&&(p=s.startBlock));p<=h;){if(u)return;const E=yield this.getBlockWithTransactions(p);for(let S=0;S<E.transactions.length;S++){const C=E.transactions[S];if(C.hash===e)return;if(C.from===s.from&&C.nonce===s.nonce){if(u)return;const _=yield this.waitForTransaction(C.hash,r);if(l())return;let T="replaced";C.data===s.data&&C.to===s.to&&C.value.eq(s.value)?T="repriced":C.data==="0x"&&C.from===C.to&&C.value.isZero()&&(T="cancelled"),a(ar.makeError("transaction was replaced",ue.errors.TRANSACTION_REPLACED,{cancelled:T==="replaced"||T==="cancelled",reason:T,replacement:this._wrapTransaction(C),hash:e,receipt:_}));return}}p++}}u||this.once("block",g)}}),y=>{u||this.once("block",g)}))});if(u)return;this.once("block",g),c.push(()=>{this.removeListener("block",g)})}if(typeof n=="number"&&n>0){const f=setTimeout(()=>{l()||a(ar.makeError("timeout exceeded",ue.errors.TIMEOUT,{timeout:n}))},n);f.unref&&f.unref(),c.push(()=>{clearTimeout(f)})}})})}getBlockNumber(){return Wt(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return Ue.from(e)}catch(r){return ar.throwError("bad result from backend",ue.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:r})}})}getBalance(e,r){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield ps({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),s=yield this.perform("getBalance",n);try{return Ue.from(s)}catch(i){return ar.throwError("bad result from backend",ue.errors.SERVER_ERROR,{method:"getBalance",params:n,result:s,error:i})}})}getTransactionCount(e,r){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield ps({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),s=yield this.perform("getTransactionCount",n);try{return Ue.from(s).toNumber()}catch(i){return ar.throwError("bad result from backend",ue.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:s,error:i})}})}getCode(e,r){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield ps({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),s=yield this.perform("getCode",n);try{return je(s)}catch(i){return ar.throwError("bad result from backend",ue.errors.SERVER_ERROR,{method:"getCode",params:n,result:s,error:i})}})}getStorageAt(e,r,n){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const s=yield ps({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(r).then(o=>nT(o))}),i=yield this.perform("getStorageAt",s);try{return je(i)}catch(o){return ar.throwError("bad result from backend",ue.errors.SERVER_ERROR,{method:"getStorageAt",params:s,result:i,error:o})}})}_wrapTransaction(e,r,n){if(r!=null&&Ul(r)!==32)throw new Error("invalid response - sendTransaction");const s=e;return r!=null&&e.hash!==r&&ar.throwError("Transaction hash mismatch from Provider.sendTransaction.",ue.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:r}),s.wait=(i,o)=>Wt(this,void 0,void 0,function*(){i==null&&(i=1),o==null&&(o=0);let a;i!==0&&n!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const c=yield this._waitForTransaction(e.hash,i,o,a);return c==null&&i===0?null:(this._emitted["t:"+e.hash]=c.blockNumber,c.status===0&&ar.throwError("transaction failed",ue.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:c}),c)}),s}sendTransaction(e){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Promise.resolve(e).then(i=>je(i)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const s=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const i=yield this.perform("sendTransaction",{signedTransaction:r});return this._wrapTransaction(n,i,s)}catch(i){throw i.transaction=n,i.transactionHash=n.hash,i}})}_getTransactionRequest(e){return Wt(this,void 0,void 0,function*(){const r=yield e,n={};return["from","to"].forEach(s=>{r[s]!=null&&(n[s]=Promise.resolve(r[s]).then(i=>i?this._getAddress(i):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(s=>{r[s]!=null&&(n[s]=Promise.resolve(r[s]).then(i=>i?Ue.from(i):null))}),["type"].forEach(s=>{r[s]!=null&&(n[s]=Promise.resolve(r[s]).then(i=>i??null))}),r.accessList&&(n.accessList=this.formatter.accessList(r.accessList)),["data"].forEach(s=>{r[s]!=null&&(n[s]=Promise.resolve(r[s]).then(i=>i?je(i):null))}),this.formatter.transactionRequest(yield ps(n))})}_getFilter(e){return Wt(this,void 0,void 0,function*(){e=yield e;const r={};return e.address!=null&&(r.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(r[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(r[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield ps(r))})}_call(e,r,n){return Wt(this,void 0,void 0,function*(){n>=FBe&&ar.throwError("CCIP read exceeded maximum redirections",ue.errors.SERVER_ERROR,{redirects:n,transaction:e});const s=e.to,i=yield this.perform("call",{transaction:e,blockTag:r});if(n>=0&&r==="latest"&&s!=null&&i.substring(0,10)==="0x556f1830"&&Ul(i)%32===4)try{const o=As(i,4),a=As(o,0,32);Ue.from(a).eq(s)||ar.throwError("CCIP Read sender did not match",ue.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const c=[],u=Ue.from(As(o,32,64)).toNumber(),l=Ue.from(As(o,u,u+32)).toNumber(),d=As(o,u+32);for(let E=0;E<l;E++){const S=TI(d,E*32);S==null&&ar.throwError("CCIP Read contained corrupt URL string",ue.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i}),c.push(S)}const f=Xv(o,64);Ue.from(As(o,100,128)).isZero()||ar.throwError("CCIP Read callback selector included junk",ue.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const p=As(o,96,100),g=Xv(o,128),h=yield this.ccipReadFetch(e,f,c);h==null&&ar.throwError("CCIP Read disabled or provided no URLs",ue.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const y={to:s,data:No([p,Fne([h,g])])};return this._call(y,r,n+1)}catch(o){if(o.code===ue.errors.SERVER_ERROR)throw o}try{return je(i)}catch(o){return ar.throwError("bad result from backend",ue.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:r},result:i,error:o})}})}call(e,r){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield ps({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(r),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield ps({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",r);try{return Ue.from(n)}catch(s){return ar.throwError("bad result from backend",ue.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:n,error:s})}})}_getAddress(e){return Wt(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&ar.throwArgumentError("invalid address or ENS name","name",e);const r=yield this.resolveName(e);return r==null&&ar.throwError("ENS name not configured",ue.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),r})}_getBlock(e,r){return Wt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const s={includeTransactions:!!r};if(Er(e,32))s.blockHash=e;else try{s.blockTag=yield this._getBlockTag(e),Er(s.blockTag)&&(n=parseInt(s.blockTag.substring(2),16))}catch{ar.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Fm(()=>Wt(this,void 0,void 0,function*(){const i=yield this.perform("getBlock",s);if(i==null)return s.blockHash!=null&&this._emitted["b:"+s.blockHash]==null||s.blockTag!=null&&n>this._emitted.block?null:void 0;if(r){let o=null;for(let c=0;c<i.transactions.length;c++){const u=i.transactions[c];if(u.blockNumber==null)u.confirmations=0;else if(u.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let l=o-u.blockNumber+1;l<=0&&(l=1),u.confirmations=l}}const a=this.formatter.blockWithTransactions(i);return a.transactions=a.transactions.map(c=>this._wrapTransaction(c)),a}return this.formatter.block(i)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Wt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return Fm(()=>Wt(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const s=this.formatter.transactionResponse(n);if(s.blockNumber==null)s.confirmations=0;else if(s.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-s.blockNumber+1;o<=0&&(o=1),s.confirmations=o}return this._wrapTransaction(s)}),{oncePoll:this})})}getTransactionReceipt(e){return Wt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return Fm(()=>Wt(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const s=this.formatter.receipt(n);if(s.blockNumber==null)s.confirmations=0;else if(s.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-s.blockNumber+1;o<=0&&(o=1),s.confirmations=o}return s}),{oncePoll:this})})}getLogs(e){return Wt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield ps({filter:this._getFilter(e)}),n=yield this.perform("getLogs",r);return n.forEach(s=>{s.removed==null&&(s.removed=!1)}),ht.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return Wt(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return Wt(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&ar.throwArgumentError("invalid BlockTag","blockTag",e);let r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return r+=e,r<0&&(r=0),this.formatter.blockTag(r)}return this.formatter.blockTag(e)})}getResolver(e){return Wt(this,void 0,void 0,function*(){let r=e;for(;;){if(r===""||r==="."||e!=="eth"&&r==="eth")return null;const n=yield this._getResolver(r,"getResolver");if(n!=null){const s=new iF(this,n,e);return r!==e&&!(yield s.supportsWildcard())?null:s}r=r.split(".").slice(1).join(".")}})}_getResolver(e,r){return Wt(this,void 0,void 0,function*(){r==null&&(r="ENS");const n=yield this.getNetwork();n.ensAddress||ar.throwError("network does not support ENS",ue.errors.UNSUPPORTED_OPERATION,{operation:r,network:n.name});try{const s=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+U1(e).substring(2)});return this.formatter.callAddress(s)}catch{}return null})}resolveName(e){return Wt(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(Er(e))throw n}typeof e!="string"&&ar.throwArgumentError("invalid ENS name","name",e);const r=yield this.getResolver(e);return r?yield r.getAddress():null})}lookupAddress(e){return Wt(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const r=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"lookupAddress");if(n==null)return null;const s=TI(yield this.call({to:n,data:"0x691f3431"+U1(r).substring(2)}),0);return(yield this.resolveName(s))!=e?null:s})}getAvatar(e){return Wt(this,void 0,void 0,function*(){let r=null;if(Er(e)){const i=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(i,"getAvatar");if(!o)return null;r=new iF(this,o,i);try{const a=yield r.getAvatar();if(a)return a.url}catch(a){if(a.code!==ue.errors.CALL_EXCEPTION)throw a}try{const a=TI(yield this.call({to:o,data:"0x691f3431"+U1(i).substring(2)}),0);r=yield this.getResolver(a)}catch(a){if(a.code!==ue.errors.CALL_EXCEPTION)throw a;return null}}else if(r=yield this.getResolver(e),!r)return null;const n=yield r.getAvatar();return n==null?null:n.url})}perform(e,r){return ar.throwError(e+" not implemented",ue.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_addEventListener(e,r,n){const s=new HBe(Og(e),r,n);return this._events.push(s),this._startEvent(s),this}on(e,r){return this._addEventListener(e,r,!1)}once(e,r){return this._addEventListener(e,r,!0)}emit(e,...r){let n=!1,s=[],i=Og(e);return this._events=this._events.filter(o=>o.tag!==i?!0:(setTimeout(()=>{o.listener.apply(this,r)},0),n=!0,o.once?(s.push(o),!1):!0)),s.forEach(o=>{this._stopEvent(o)}),n}listenerCount(e){if(!e)return this._events.length;let r=Og(e);return this._events.filter(n=>n.tag===r).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let r=Og(e);return this._events.filter(n=>n.tag===r).map(n=>n.listener)}off(e,r){if(r==null)return this.removeAllListeners(e);const n=[];let s=!1,i=Og(e);return this._events=this._events.filter(o=>o.tag!==i||o.listener!=r||s?!0:(s=!0,n.push(o),!1)),n.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let r=[];if(e==null)r=this._events,this._events=[];else{const n=Og(e);this._events=this._events.filter(s=>s.tag!==n?!0:(r.push(s),!1))}return r.forEach(n=>{this._stopEvent(n)}),this}};var Od=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const Rs=new ue(gT),KBe=["call","estimateGas"];function D1(t,e){if(t==null)return null;if(typeof t.message=="string"&&t.message.match("reverted")){const r=Er(t.data)?t.data:null;if(!e||r)return{message:t.message,data:r}}if(typeof t=="object"){for(const r in t){const n=D1(t[r],e);if(n)return n}return null}if(typeof t=="string")try{return D1(JSON.parse(t),e)}catch{}return null}function $ne(t,e,r){const n=r.transaction||r.signedTransaction;if(t==="call"){const i=D1(e,!0);if(i)return i.data;Rs.throwError("missing revert data in call exception; Transaction reverted without a reason string",ue.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(t==="estimateGas"){let i=D1(e.body,!1);i==null&&(i=D1(e,!1)),i&&Rs.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ue.errors.UNPREDICTABLE_GAS_LIMIT,{reason:i.message,method:t,transaction:n,error:e})}let s=e.message;throw e.code===ue.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?s=e.error.message:typeof e.body=="string"?s=e.body:typeof e.responseText=="string"&&(s=e.responseText),s=(s||"").toLowerCase(),s.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Rs.throwError("insufficient funds for intrinsic transaction cost",ue.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),s.match(/nonce (is )?too low/i)&&Rs.throwError("nonce has already been used",ue.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),s.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Rs.throwError("replacement fee too low",ue.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),s.match(/only replay-protected/i)&&Rs.throwError("legacy pre-eip-155 transactions not supported",ue.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),KBe.indexOf(t)>=0&&s.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Rs.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ue.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function oF(t){return new Promise(function(e){setTimeout(e,t)})}function ZBe(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function zb(t){return t&&t.toLowerCase()}const TO={};class qne extends Ky{constructor(e,r,n){if(super(),e!==TO)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");xe(this,"provider",r),n==null&&(n=0),typeof n=="string"?(xe(this,"_address",this.provider.formatter.address(n)),xe(this,"_index",null)):typeof n=="number"?(xe(this,"_index",n),xe(this,"_address",null)):Rs.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return Rs.throwError("cannot alter JSON-RPC Signer connection",ue.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new YBe(TO,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&Rs.throwError("unknown account #"+this._index,ue.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Ds(e);const r=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=Ds(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>Od(this,void 0,void 0,function*(){if(n==null)return null;const s=yield this.provider.resolveName(n);return s==null&&Rs.throwArgumentError("provided ENS name resolves to null","tx.to",n),s}))),ps({tx:ps(e),sender:r}).then(({tx:n,sender:s})=>{n.from!=null?n.from.toLowerCase()!==s&&Rs.throwArgumentError("from address mismatch","transaction",e):n.from=s;const i=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[i]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&Rs.throwError("user rejected transaction",ue.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),$ne("sendTransaction",o,i)))})}signTransaction(e){return Rs.throwError("signing transactions is unsupported",ue.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Od(this,void 0,void 0,function*(){const r=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield Fm(()=>Od(this,void 0,void 0,function*(){const s=yield this.provider.getTransaction(n);if(s!==null)return this.provider._wrapTransaction(s,n,r)}),{oncePoll:this.provider})}catch(s){throw s.transactionHash=n,s}})}signMessage(e){return Od(this,void 0,void 0,function*(){const r=typeof e=="string"?ms(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[je(r),n.toLowerCase()])}catch(s){throw typeof s.message=="string"&&s.message.match(/user denied/i)&&Rs.throwError("user rejected signing",ue.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),s}})}_legacySignMessage(e){return Od(this,void 0,void 0,function*(){const r=typeof e=="string"?ms(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),je(r)])}catch(s){throw typeof s.message=="string"&&s.message.match(/user denied/i)&&Rs.throwError("user rejected signing",ue.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),s}})}_signTypedData(e,r,n){return Od(this,void 0,void 0,function*(){const s=yield Ni.resolveNames(e,r,n,o=>this.provider.resolveName(o)),i=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(Ni.getPayload(s.domain,r,s.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&Rs.throwError("user rejected signing",ue.errors.ACTION_REJECTED,{action:"_signTypedData",from:i,messageData:{domain:s.domain,types:r,value:s.value}}),o}})}unlock(e){return Od(this,void 0,void 0,function*(){const r=this.provider,n=yield this.getAddress();return r.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class YBe extends qne{sendTransaction(e){return this.sendUncheckedTransaction(e).then(r=>({hash:r,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(r,n)}))}}const JBe={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Hne extends GBe{constructor(e,r){let n=r;n==null&&(n=new Promise((s,i)=>{setTimeout(()=>{this.detectNetwork().then(o=>{s(o)},o=>{i(o)})},0)})),super(n),e||(e=Iu(this.constructor,"defaultUrl")()),typeof e=="string"?xe(this,"connection",Object.freeze({url:e})):xe(this,"connection",Object.freeze(Ds(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Od(this,void 0,void 0,function*(){yield oF(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const r=Iu(this.constructor,"getNetwork");try{return r(Ue.from(e).toNumber())}catch(n){return Rs.throwError("could not detect network",ue.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return Rs.throwError("could not detect network",ue.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new qne(TO,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(r=>this.formatter.address(r)))}send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Ml(n),provider:this});const s=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(s&&this._cache[e])return this._cache[e];const i=pT(this.connection,JSON.stringify(n),ZBe).then(o=>(this.emit("debug",{action:"response",request:n,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:n,provider:this}),o});return s&&(this._cache[e]=i,setTimeout(()=>{this._cache[e]=null},0)),i}prepareRequest(e,r){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[zb(r.address),r.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[zb(r.address),r.blockTag]];case"getCode":return["eth_getCode",[zb(r.address),r.blockTag]];case"getStorageAt":return["eth_getStorageAt",[zb(r.address),Nn(r.position,32),r.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[r.signedTransaction]];case"getBlock":return r.blockTag?["eth_getBlockByNumber",[r.blockTag,!!r.includeTransactions]]:r.blockHash?["eth_getBlockByHash",[r.blockHash,!!r.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[r.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[r.transactionHash]];case"call":return["eth_call",[Iu(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0}),r.blockTag]];case"estimateGas":return["eth_estimateGas",[Iu(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0})]];case"getLogs":return r.filter&&r.filter.address!=null&&(r.filter.address=zb(r.filter.address)),["eth_getLogs",[r.filter]]}return null}perform(e,r){return Od(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const s=r.transaction;if(s&&s.type!=null&&Ue.from(s.type).isZero()&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=yield this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(r=Ds(r),r.transaction=Ds(s),delete r.transaction.type)}}const n=this.prepareRequest(e,r);n==null&&Rs.throwError(e+" not implemented",ue.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(s){return $ne(e,s,r)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,r=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=r,r.then(function(n){function s(){e.send("eth_getFilterChanges",[n]).then(function(i){if(e._pendingFilter!=r)return null;let o=Promise.resolve();return i.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(c){return e.emit("pending",c),null})})}),o.then(function(){return oF(1e3)})}).then(function(){if(e._pendingFilter!=r){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){s()},0),null}).catch(i=>{})}return s(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,r){const n=Ds(JBe);if(r)for(const i in r)r[i]&&(n[i]=!0);Dk(e,n);const s={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(i){if(e[i]==null)return;const o=nT(Ue.from(e[i]));i==="gasLimit"&&(i="gas"),s[i]=o}),["from","to","data"].forEach(function(i){e[i]!=null&&(s[i]=je(e[i]))}),e.accessList&&(s.accessList=Q0(e.accessList)),s}}const aF=new ue(gT);let XBe=1;function cF(t,e){const r="Web3LegacyFetcher";return function(n,s){const i={method:n,params:s,id:XBe++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:r,request:Ml(i),provider:this}),e(i,(c,u)=>{if(c)return this.emit("debug",{action:"response",fetcher:r,error:c,request:i,provider:this}),a(c);if(this.emit("debug",{action:"response",fetcher:r,request:i,response:u,provider:this}),u.error){const l=new Error(u.error.message);return l.code=u.error.code,l.data=u.error.data,a(l)}o(u.result)})})}}function QBe(t){return function(e,r){r==null&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Ml(n),provider:this}),t.request(n).then(s=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:s,provider:this}),s),s=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:s,provider:this}),s})}}class NP extends Hne{constructor(e,r){e==null&&aF.throwArgumentError("missing provider","provider",e);let n=null,s=null,i=null;typeof e=="function"?(n="unknown:",s=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),i=e,e.request?(n===""&&(n="eip-1193:"),s=QBe(e)):e.sendAsync?s=cF(e,e.sendAsync.bind(e)):e.send?s=cF(e,e.send.bind(e)):aF.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,r),xe(this,"jsonRpcFetchFunc",s),xe(this,"provider",i)}send(e,r){return this.jsonRpcFetchFunc(e,r)}}const e9e="solidity/5.8.0",t9e=new RegExp("^bytes([0-9]+)$"),r9e=new RegExp("^(u?int)([0-9]*)$"),n9e=new RegExp("^(.*)\\[([0-9]*)\\]$"),s9e="0000000000000000000000000000000000000000000000000000000000000000",Im=new ue(e9e);function zne(t,e,r){switch(t){case"address":return r?O1(e,32):Oe(e);case"string":return ms(e);case"bytes":return Oe(e);case"bool":return e=e?"0x01":"0x00",r?O1(e,32):Oe(e)}let n=t.match(r9e);if(n){let s=parseInt(n[2]||"256");return(n[2]&&String(s)!==n[2]||s%8!==0||s===0||s>256)&&Im.throwArgumentError("invalid number type","type",t),r&&(s=256),e=Ue.from(e).toTwos(s),O1(e,s/8)}if(n=t.match(t9e),n){const s=parseInt(n[1]);return(String(s)!==n[1]||s===0||s>32)&&Im.throwArgumentError("invalid bytes type","type",t),Oe(e).byteLength!==s&&Im.throwArgumentError(`invalid value for ${t}`,"value",e),r?Oe((e+s9e).substring(0,66)):e}if(n=t.match(n9e),n&&Array.isArray(e)){const s=n[1];parseInt(n[2]||String(e.length))!=e.length&&Im.throwArgumentError(`invalid array length for ${t}`,"value",e);const o=[];return e.forEach(function(a){o.push(zne(s,a,!0))}),Mn(o)}return Im.throwArgumentError("invalid type","type",t)}function iB(t,e){t.length!=e.length&&Im.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const r=[];return t.forEach(function(n,s){r.push(zne(n,e[s]))}),je(Mn(r))}function i9e(t,e){return En(iB(t,e))}function o9e(t,e){return tf(iB(t,e))}const a9e=Object.freeze(Object.defineProperty({__proto__:null,keccak256:i9e,pack:iB,sha256:o9e},Symbol.toStringTag,{value:"Module"})),c9e="units/5.8.0",Wne=new ue(c9e),Vne=["wei","kwei","mwei","gwei","szabo","finney","ether"];function u9e(t){const e=String(t).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||t==="."||t==="-.")&&Wne.throwArgumentError("invalid value","value",t);let r=e[0],n="";for(r.substring(0,1)==="-"&&(n="-",r=r.substring(1));r.substring(0,1)==="0";)r=r.substring(1);r===""&&(r="0");let s="";for(e.length===2&&(s="."+(e[1]||"0"));s.length>2&&s[s.length-1]==="0";)s=s.substring(0,s.length-1);const i=[];for(;r.length;)if(r.length<=3){i.unshift(r);break}else{const o=r.length-3;i.unshift(r.substring(o)),r=r.substring(0,o)}return n+i.join(",")+s}function oB(t,e){if(typeof e=="string"){const r=Vne.indexOf(e);r!==-1&&(e=3*r)}return _I(t,e??18)}function aB(t,e){if(typeof t!="string"&&Wne.throwArgumentError("value must be a string","value",t),typeof e=="string"){const r=Vne.indexOf(e);r!==-1&&(e=3*r)}return cl(t,e??18)}function l9e(t){return oB(t,18)}function d9e(t){return aB(t,18)}const f9e=Object.freeze(Object.defineProperty({__proto__:null,commify:u9e,formatEther:l9e,formatUnits:oB,parseEther:d9e,parseUnits:aB},Symbol.toStringTag,{value:"Module"}));var rd={};const h9e=Ln(X4e),p9e=Ln(BOe),g9e=Ln(m4e),m9e=Ln(zke),y9e=Ln(aOe),b9e=Ln(Z4e),w9e=Ln(iBe),v9e=Ln(_Be),E9e=Ln(COe),_9e=Ln(iOe),uF=Ln(Kke),A9e=Ln(a9e),x9e=Ln(uBe),C9e=Ln(mOe),S9e=Ln(IOe),I9e=Ln(Ske),lF=Ln(f4e),T9e=Ln(Bke),N9e=Ln(f9e),P9e=Ln(TBe),R9e=Ln(DBe);var dF;function O9e(){return dF||(dF=1,(function(t){var e=rd&&rd.__createBinding||(Object.create?(function(L,B,A,m){m===void 0&&(m=A),Object.defineProperty(L,m,{enumerable:!0,get:function(){return B[A]}})}):(function(L,B,A,m){m===void 0&&(m=A),L[m]=B[A]})),r=rd&&rd.__setModuleDefault||(Object.create?(function(L,B){Object.defineProperty(L,"default",{enumerable:!0,value:B})}):function(L,B){L.default=B}),n=rd&&rd.__importStar||function(L){if(L&&L.__esModule)return L;var B={};if(L!=null)for(var A in L)A!=="default"&&Object.prototype.hasOwnProperty.call(L,A)&&e(B,L,A);return r(B,L),B};Object.defineProperty(t,"__esModule",{value:!0}),t.formatBytes32String=t.Utf8ErrorFuncs=t.toUtf8String=t.toUtf8CodePoints=t.toUtf8Bytes=t._toEscapedUtf8String=t.nameprep=t.hexDataSlice=t.hexDataLength=t.hexZeroPad=t.hexValue=t.hexStripZeros=t.hexConcat=t.isHexString=t.hexlify=t.base64=t.base58=t.TransactionDescription=t.LogDescription=t.Interface=t.SigningKey=t.HDNode=t.defaultPath=t.isBytesLike=t.isBytes=t.zeroPad=t.stripZeros=t.concat=t.arrayify=t.shallowCopy=t.resolveProperties=t.getStatic=t.defineReadOnly=t.deepCopy=t.checkProperties=t.poll=t.fetchJson=t._fetchData=t.RLP=t.Logger=t.checkResultErrors=t.FormatTypes=t.ParamType=t.FunctionFragment=t.EventFragment=t.ErrorFragment=t.ConstructorFragment=t.Fragment=t.defaultAbiCoder=t.AbiCoder=void 0,t.Indexed=t.Utf8ErrorReason=t.UnicodeNormalizationForm=t.SupportedAlgorithm=t.mnemonicToSeed=t.isValidMnemonic=t.entropyToMnemonic=t.mnemonicToEntropy=t.getAccountPath=t.verifyTypedData=t.verifyMessage=t.recoverPublicKey=t.computePublicKey=t.recoverAddress=t.computeAddress=t.getJsonWalletAddress=t.TransactionTypes=t.serializeTransaction=t.parseTransaction=t.accessListify=t.joinSignature=t.splitSignature=t.soliditySha256=t.solidityKeccak256=t.solidityPack=t.shuffled=t.randomBytes=t.sha512=t.sha256=t.ripemd160=t.keccak256=t.computeHmac=t.commify=t.parseUnits=t.formatUnits=t.parseEther=t.formatEther=t.isAddress=t.getCreate2Address=t.getContractAddress=t.getIcapAddress=t.getAddress=t._TypedDataEncoder=t.id=t.isValidName=t.namehash=t.hashMessage=t.dnsEncode=t.parseBytes32String=void 0;var s=h9e;Object.defineProperty(t,"AbiCoder",{enumerable:!0,get:function(){return s.AbiCoder}}),Object.defineProperty(t,"checkResultErrors",{enumerable:!0,get:function(){return s.checkResultErrors}}),Object.defineProperty(t,"ConstructorFragment",{enumerable:!0,get:function(){return s.ConstructorFragment}}),Object.defineProperty(t,"defaultAbiCoder",{enumerable:!0,get:function(){return s.defaultAbiCoder}}),Object.defineProperty(t,"ErrorFragment",{enumerable:!0,get:function(){return s.ErrorFragment}}),Object.defineProperty(t,"EventFragment",{enumerable:!0,get:function(){return s.EventFragment}}),Object.defineProperty(t,"FormatTypes",{enumerable:!0,get:function(){return s.FormatTypes}}),Object.defineProperty(t,"Fragment",{enumerable:!0,get:function(){return s.Fragment}}),Object.defineProperty(t,"FunctionFragment",{enumerable:!0,get:function(){return s.FunctionFragment}}),Object.defineProperty(t,"Indexed",{enumerable:!0,get:function(){return s.Indexed}}),Object.defineProperty(t,"Interface",{enumerable:!0,get:function(){return s.Interface}}),Object.defineProperty(t,"LogDescription",{enumerable:!0,get:function(){return s.LogDescription}}),Object.defineProperty(t,"ParamType",{enumerable:!0,get:function(){return s.ParamType}}),Object.defineProperty(t,"TransactionDescription",{enumerable:!0,get:function(){return s.TransactionDescription}});var i=p9e;Object.defineProperty(t,"getAddress",{enumerable:!0,get:function(){return i.getAddress}}),Object.defineProperty(t,"getCreate2Address",{enumerable:!0,get:function(){return i.getCreate2Address}}),Object.defineProperty(t,"getContractAddress",{enumerable:!0,get:function(){return i.getContractAddress}}),Object.defineProperty(t,"getIcapAddress",{enumerable:!0,get:function(){return i.getIcapAddress}}),Object.defineProperty(t,"isAddress",{enumerable:!0,get:function(){return i.isAddress}});var o=n(g9e);t.base64=o;var a=m9e;Object.defineProperty(t,"base58",{enumerable:!0,get:function(){return a.Base58}});var c=y9e;Object.defineProperty(t,"arrayify",{enumerable:!0,get:function(){return c.arrayify}}),Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return c.concat}}),Object.defineProperty(t,"hexConcat",{enumerable:!0,get:function(){return c.hexConcat}}),Object.defineProperty(t,"hexDataSlice",{enumerable:!0,get:function(){return c.hexDataSlice}}),Object.defineProperty(t,"hexDataLength",{enumerable:!0,get:function(){return c.hexDataLength}}),Object.defineProperty(t,"hexlify",{enumerable:!0,get:function(){return c.hexlify}}),Object.defineProperty(t,"hexStripZeros",{enumerable:!0,get:function(){return c.hexStripZeros}}),Object.defineProperty(t,"hexValue",{enumerable:!0,get:function(){return c.hexValue}}),Object.defineProperty(t,"hexZeroPad",{enumerable:!0,get:function(){return c.hexZeroPad}}),Object.defineProperty(t,"isBytes",{enumerable:!0,get:function(){return c.isBytes}}),Object.defineProperty(t,"isBytesLike",{enumerable:!0,get:function(){return c.isBytesLike}}),Object.defineProperty(t,"isHexString",{enumerable:!0,get:function(){return c.isHexString}}),Object.defineProperty(t,"joinSignature",{enumerable:!0,get:function(){return c.joinSignature}}),Object.defineProperty(t,"zeroPad",{enumerable:!0,get:function(){return c.zeroPad}}),Object.defineProperty(t,"splitSignature",{enumerable:!0,get:function(){return c.splitSignature}}),Object.defineProperty(t,"stripZeros",{enumerable:!0,get:function(){return c.stripZeros}});var u=b9e;Object.defineProperty(t,"_TypedDataEncoder",{enumerable:!0,get:function(){return u._TypedDataEncoder}}),Object.defineProperty(t,"dnsEncode",{enumerable:!0,get:function(){return u.dnsEncode}}),Object.defineProperty(t,"hashMessage",{enumerable:!0,get:function(){return u.hashMessage}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return u.id}}),Object.defineProperty(t,"isValidName",{enumerable:!0,get:function(){return u.isValidName}}),Object.defineProperty(t,"namehash",{enumerable:!0,get:function(){return u.namehash}});var l=w9e;Object.defineProperty(t,"defaultPath",{enumerable:!0,get:function(){return l.defaultPath}}),Object.defineProperty(t,"entropyToMnemonic",{enumerable:!0,get:function(){return l.entropyToMnemonic}}),Object.defineProperty(t,"getAccountPath",{enumerable:!0,get:function(){return l.getAccountPath}}),Object.defineProperty(t,"HDNode",{enumerable:!0,get:function(){return l.HDNode}}),Object.defineProperty(t,"isValidMnemonic",{enumerable:!0,get:function(){return l.isValidMnemonic}}),Object.defineProperty(t,"mnemonicToEntropy",{enumerable:!0,get:function(){return l.mnemonicToEntropy}}),Object.defineProperty(t,"mnemonicToSeed",{enumerable:!0,get:function(){return l.mnemonicToSeed}});var d=v9e;Object.defineProperty(t,"getJsonWalletAddress",{enumerable:!0,get:function(){return d.getJsonWalletAddress}});var f=E9e;Object.defineProperty(t,"keccak256",{enumerable:!0,get:function(){return f.keccak256}});var p=_9e;Object.defineProperty(t,"Logger",{enumerable:!0,get:function(){return p.Logger}});var g=uF;Object.defineProperty(t,"computeHmac",{enumerable:!0,get:function(){return g.computeHmac}}),Object.defineProperty(t,"ripemd160",{enumerable:!0,get:function(){return g.ripemd160}}),Object.defineProperty(t,"sha256",{enumerable:!0,get:function(){return g.sha256}}),Object.defineProperty(t,"sha512",{enumerable:!0,get:function(){return g.sha512}});var h=A9e;Object.defineProperty(t,"solidityKeccak256",{enumerable:!0,get:function(){return h.keccak256}}),Object.defineProperty(t,"solidityPack",{enumerable:!0,get:function(){return h.pack}}),Object.defineProperty(t,"soliditySha256",{enumerable:!0,get:function(){return h.sha256}});var y=x9e;Object.defineProperty(t,"randomBytes",{enumerable:!0,get:function(){return y.randomBytes}}),Object.defineProperty(t,"shuffled",{enumerable:!0,get:function(){return y.shuffled}});var E=C9e;Object.defineProperty(t,"checkProperties",{enumerable:!0,get:function(){return E.checkProperties}}),Object.defineProperty(t,"deepCopy",{enumerable:!0,get:function(){return E.deepCopy}}),Object.defineProperty(t,"defineReadOnly",{enumerable:!0,get:function(){return E.defineReadOnly}}),Object.defineProperty(t,"getStatic",{enumerable:!0,get:function(){return E.getStatic}}),Object.defineProperty(t,"resolveProperties",{enumerable:!0,get:function(){return E.resolveProperties}}),Object.defineProperty(t,"shallowCopy",{enumerable:!0,get:function(){return E.shallowCopy}});var S=n(S9e);t.RLP=S;var C=I9e;Object.defineProperty(t,"computePublicKey",{enumerable:!0,get:function(){return C.computePublicKey}}),Object.defineProperty(t,"recoverPublicKey",{enumerable:!0,get:function(){return C.recoverPublicKey}}),Object.defineProperty(t,"SigningKey",{enumerable:!0,get:function(){return C.SigningKey}});var _=lF;Object.defineProperty(t,"formatBytes32String",{enumerable:!0,get:function(){return _.formatBytes32String}}),Object.defineProperty(t,"nameprep",{enumerable:!0,get:function(){return _.nameprep}}),Object.defineProperty(t,"parseBytes32String",{enumerable:!0,get:function(){return _.parseBytes32String}}),Object.defineProperty(t,"_toEscapedUtf8String",{enumerable:!0,get:function(){return _._toEscapedUtf8String}}),Object.defineProperty(t,"toUtf8Bytes",{enumerable:!0,get:function(){return _.toUtf8Bytes}}),Object.defineProperty(t,"toUtf8CodePoints",{enumerable:!0,get:function(){return _.toUtf8CodePoints}}),Object.defineProperty(t,"toUtf8String",{enumerable:!0,get:function(){return _.toUtf8String}}),Object.defineProperty(t,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return _.Utf8ErrorFuncs}});var T=T9e;Object.defineProperty(t,"accessListify",{enumerable:!0,get:function(){return T.accessListify}}),Object.defineProperty(t,"computeAddress",{enumerable:!0,get:function(){return T.computeAddress}}),Object.defineProperty(t,"parseTransaction",{enumerable:!0,get:function(){return T.parse}}),Object.defineProperty(t,"recoverAddress",{enumerable:!0,get:function(){return T.recoverAddress}}),Object.defineProperty(t,"serializeTransaction",{enumerable:!0,get:function(){return T.serialize}}),Object.defineProperty(t,"TransactionTypes",{enumerable:!0,get:function(){return T.TransactionTypes}});var P=N9e;Object.defineProperty(t,"commify",{enumerable:!0,get:function(){return P.commify}}),Object.defineProperty(t,"formatEther",{enumerable:!0,get:function(){return P.formatEther}}),Object.defineProperty(t,"parseEther",{enumerable:!0,get:function(){return P.parseEther}}),Object.defineProperty(t,"formatUnits",{enumerable:!0,get:function(){return P.formatUnits}}),Object.defineProperty(t,"parseUnits",{enumerable:!0,get:function(){return P.parseUnits}});var D=P9e;Object.defineProperty(t,"verifyMessage",{enumerable:!0,get:function(){return D.verifyMessage}}),Object.defineProperty(t,"verifyTypedData",{enumerable:!0,get:function(){return D.verifyTypedData}});var F=R9e;Object.defineProperty(t,"_fetchData",{enumerable:!0,get:function(){return F._fetchData}}),Object.defineProperty(t,"fetchJson",{enumerable:!0,get:function(){return F.fetchJson}}),Object.defineProperty(t,"poll",{enumerable:!0,get:function(){return F.poll}});var I=uF;Object.defineProperty(t,"SupportedAlgorithm",{enumerable:!0,get:function(){return I.SupportedAlgorithm}});var U=lF;Object.defineProperty(t,"UnicodeNormalizationForm",{enumerable:!0,get:function(){return U.UnicodeNormalizationForm}}),Object.defineProperty(t,"Utf8ErrorReason",{enumerable:!0,get:function(){return U.Utf8ErrorReason}})})(rd)),rd}var k9e=O9e();const ry={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,r]=await Promise.all([ry.getAddresses(t),ry.getChainId(t)]);return{chainId:r,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){const r=e.rpcUrls.chainDefault?.http||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:ry.numberToHexString(e.id),rpcUrls:[...r],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[e.blockExplorers?.default.url],iconUrls:[ii.NetworkImageIds[e.id]]}]})}};class cB{constructor(){this.initialized=!1}async getProvider(){return Promise.resolve(this.provider)}}class B9e extends cB{async initialize(){const e=J.getCaipNetworks(),{metadata:r,coinbasePreference:n}=we.state;try{const{createBaseAccountSDK:s}=await Pr(async()=>{const{createBaseAccountSDK:o}=await import("./index-C0lMo-El.js");return{createBaseAccountSDK:o}},__vite__mapDeps([57,1,2]));if(typeof window>"u")return Promise.resolve();const i=s({appName:r?.name,appLogoUrl:r?.icons[0],appChainIds:e?.map(o=>o.id)||[1,84532],preference:{options:n??"all"}});return this.provider=i.getProvider(),this.initialized=!0,Promise.resolve()}catch(s){return console.error("Failed to import Coinbase Wallet SDK:",s),Promise.resolve()}}async getProvider(){return Promise.resolve(this.provider)}}var PP={},Wb={},nd={},kg={},hp={},Vb={},Gb={},fF;function Gne(){if(fF)return Gb;fF=1,Object.defineProperty(Gb,"__esModule",{value:!0}),Gb.getSDKVersion=void 0;const t=()=>"9.1.0";return Gb.getSDKVersion=t,Gb}var Kb={},hF;function U9e(){if(hF)return Kb;hF=1,Object.defineProperty(Kb,"__esModule",{value:!0}),Kb.generateRequestId=void 0;const t=n=>n.toString(16).padStart(2,"0"),e=n=>{const s=new Uint8Array(n/2);return window.crypto.getRandomValues(s),Array.from(s,t).join("")},r=()=>typeof window<"u"?e(10):new Date().getTime().toString(36);return Kb.generateRequestId=r,Kb}var pF;function Kne(){if(pF)return Vb;pF=1,Object.defineProperty(Vb,"__esModule",{value:!0}),Vb.MessageFormatter=void 0;const t=Gne(),e=U9e();class r{}return Vb.MessageFormatter=r,r.makeRequest=(n,s)=>({id:(0,e.generateRequestId)(),method:n,params:s,env:{sdkVersion:(0,t.getSDKVersion)()}}),r.makeResponse=(n,s,i)=>({id:n,success:!0,version:i,data:s}),r.makeErrorResponse=(n,s,i)=>({id:n,success:!1,error:s,version:i}),Vb}var pp={},gF;function eg(){if(gF)return pp;gF=1,Object.defineProperty(pp,"__esModule",{value:!0}),pp.RestrictedMethods=pp.Methods=void 0;var t;(function(r){r.sendTransactions="sendTransactions",r.rpcCall="rpcCall",r.getChainInfo="getChainInfo",r.getSafeInfo="getSafeInfo",r.getTxBySafeTxHash="getTxBySafeTxHash",r.getSafeBalances="getSafeBalances",r.signMessage="signMessage",r.signTypedMessage="signTypedMessage",r.getEnvironmentInfo="getEnvironmentInfo",r.getOffChainSignature="getOffChainSignature",r.requestAddressBook="requestAddressBook",r.wallet_getPermissions="wallet_getPermissions",r.wallet_requestPermissions="wallet_requestPermissions"})(t||(pp.Methods=t={}));var e;return(function(r){r.requestAddressBook="requestAddressBook"})(e||(pp.RestrictedMethods=e={})),pp}var mF;function M9e(){return mF||(mF=1,(function(t){var e=hp&&hp.__createBinding||(Object.create?(function(i,o,a,c){c===void 0&&(c=a);var u=Object.getOwnPropertyDescriptor(o,a);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(i,c,u)}):(function(i,o,a,c){c===void 0&&(c=a),i[c]=o[a]})),r=hp&&hp.__exportStar||function(i,o){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,i,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=Kne();class s{constructor(o=null,a=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:c,data:u,source:l})=>{const d=!u,f=!this.isServer&&l===window.parent,p=typeof u.version<"u"&&parseInt(u.version.split(".")[0]),g=typeof p=="number"&&p>=1;let h=!0;return Array.isArray(this.allowedOrigins)&&(h=this.allowedOrigins.find(y=>y.test(c))!==void 0),!d&&f&&g&&h},this.logIncomingMessage=c=>{console.info(`Safe Apps SDK v1: A message was received from origin ${c.origin}. `,c.data)},this.onParentMessage=c=>{this.isValidMessage(c)&&(this.debugMode&&this.logIncomingMessage(c),this.handleIncomingMessage(c.data))},this.handleIncomingMessage=c=>{const{id:u}=c,l=this.callbacks.get(u);l&&(l(c),this.callbacks.delete(u))},this.send=(c,u)=>{const l=n.MessageFormatter.makeRequest(c,u);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(l,"*"),new Promise((d,f)=>{this.callbacks.set(l.id,p=>{if(!p.success){f(new Error(p.error));return}d(p)})})},this.allowedOrigins=o,this.debugMode=a,this.isServer||window.addEventListener("message",this.onParentMessage)}}t.default=s,r(eg(),t)})(hp)),hp}var Zb={},gp={},Yb={},yF;function D9e(){if(yF)return Yb;yF=1,Object.defineProperty(Yb,"__esModule",{value:!0}),Yb.isObjectEIP712TypedData=void 0;const t=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;return Yb.isObjectEIP712TypedData=t,Yb}var RP={},bF;function j9e(){return bF||(bF=1,Object.defineProperty(RP,"__esModule",{value:!0})),RP}var OP={},mp={},yp={},sd={},wF;function L9e(){if(wF)return sd;wF=1;var t=sd&&sd.__awaiter||function(c,u,l,d){function f(p){return p instanceof l?p:new l(function(g){g(p)})}return new(l||(l=Promise))(function(p,g){function h(S){try{E(d.next(S))}catch(C){g(C)}}function y(S){try{E(d.throw(S))}catch(C){g(C)}}function E(S){S.done?p(S.value):f(S.value).then(h,y)}E((d=d.apply(c,u||[])).next())})};Object.defineProperty(sd,"__esModule",{value:!0}),sd.insertParams=n,sd.stringifyQuery=s,sd.fetchData=o,sd.getData=a;const e=c=>typeof c=="object"&&c!==null&&("code"in c||"statusCode"in c)&&"message"in c;function r(c,u,l){return c.replace(new RegExp(`\\{${u}\\}`,"g"),l)}function n(c,u){return u?Object.keys(u).reduce((l,d)=>r(l,d,String(u[d])),c):c}function s(c){if(!c)return"";const u=new URLSearchParams;Object.keys(c).forEach(d=>{c[d]!=null&&u.append(d,String(c[d]))});const l=u.toString();return l?`?${l}`:""}function i(c){return t(this,void 0,void 0,function*(){var u;let l;try{l=yield c.json()}catch{l={}}if(!c.ok){const d=e(l)?`CGW error - ${(u=l.code)!==null&&u!==void 0?u:l.statusCode}: ${l.message}`:`CGW error - status ${c.statusText}`;throw new Error(d)}return l})}function o(c,u,l,d,f){return t(this,void 0,void 0,function*(){const p=Object.assign({"Content-Type":"application/json"},d),g={method:u??"POST",headers:p};f&&(g.credentials=f),l!=null&&(g.body=typeof l=="string"?l:JSON.stringify(l));const h=yield fetch(c,g);return i(h)})}function a(c,u,l){return t(this,void 0,void 0,function*(){const d={method:"GET"};u&&(d.headers=Object.assign(Object.assign({},u),{"Content-Type":"application/json"})),l&&(d.credentials=l);const f=yield fetch(c,d);return i(f)})}return sd}var vF;function F9e(){if(vF)return yp;vF=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.postEndpoint=r,yp.putEndpoint=n,yp.deleteEndpoint=s,yp.getEndpoint=i;const t=L9e();function e(o,a,c,u){const l=(0,t.insertParams)(a,c),d=(0,t.stringifyQuery)(u);return`${o}${l}${d}`}function r(o,a,c){const u=e(o,a,c?.path,c?.query);return(0,t.fetchData)(u,"POST",c?.body,c?.headers,c?.credentials)}function n(o,a,c){const u=e(o,a,c?.path,c?.query);return(0,t.fetchData)(u,"PUT",c?.body,c?.headers,c?.credentials)}function s(o,a,c){const u=e(o,a,c?.path,c?.query);return(0,t.fetchData)(u,"DELETE",c?.body,c?.headers,c?.credentials)}function i(o,a,c,u){if(u)return(0,t.getData)(u,void 0,c?.credentials);const l=e(o,a,c?.path,c?.query);return(0,t.getData)(l,c?.headers,c?.credentials)}return yp}var Jb={},EF;function $9e(){return EF||(EF=1,Object.defineProperty(Jb,"__esModule",{value:!0}),Jb.DEFAULT_BASE_URL=void 0,Jb.DEFAULT_BASE_URL="https://safe-client.safe.global"),Jb}var Xb={},_F;function q9e(){if(_F)return Xb;_F=1,Object.defineProperty(Xb,"__esModule",{value:!0}),Xb.ImplementationVersionState=void 0;var t;return(function(e){e.UP_TO_DATE="UP_TO_DATE",e.OUTDATED="OUTDATED",e.UNKNOWN="UNKNOWN"})(t||(Xb.ImplementationVersionState=t={})),Xb}var id={},AF;function H9e(){if(AF)return id;AF=1,Object.defineProperty(id,"__esModule",{value:!0}),id.SafeAppSocialPlatforms=id.SafeAppFeatures=id.SafeAppAccessPolicyTypes=void 0;var t;(function(n){n.NoRestrictions="NO_RESTRICTIONS",n.DomainAllowlist="DOMAIN_ALLOWLIST"})(t||(id.SafeAppAccessPolicyTypes=t={}));var e;(function(n){n.BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS"})(e||(id.SafeAppFeatures=e={}));var r;return(function(n){n.TWITTER="TWITTER",n.GITHUB="GITHUB",n.DISCORD="DISCORD",n.TELEGRAM="TELEGRAM"})(r||(id.SafeAppSocialPlatforms=r={})),id}var Cn={},xF;function z9e(){if(xF)return Cn;xF=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.LabelValue=Cn.StartTimeValue=Cn.DurationType=Cn.DetailedExecutionInfoType=Cn.TransactionListItemType=Cn.ConflictType=Cn.TransactionInfoType=Cn.SettingsInfoType=Cn.TransactionTokenType=Cn.TransferDirection=Cn.TransactionStatus=Cn.Operation=void 0;var t;(function(f){f[f.CALL=0]="CALL",f[f.DELEGATE=1]="DELEGATE"})(t||(Cn.Operation=t={}));var e;(function(f){f.AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",f.AWAITING_EXECUTION="AWAITING_EXECUTION",f.CANCELLED="CANCELLED",f.FAILED="FAILED",f.SUCCESS="SUCCESS"})(e||(Cn.TransactionStatus=e={}));var r;(function(f){f.INCOMING="INCOMING",f.OUTGOING="OUTGOING",f.UNKNOWN="UNKNOWN"})(r||(Cn.TransferDirection=r={}));var n;(function(f){f.ERC20="ERC20",f.ERC721="ERC721",f.NATIVE_COIN="NATIVE_COIN"})(n||(Cn.TransactionTokenType=n={}));var s;(function(f){f.SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",f.ADD_OWNER="ADD_OWNER",f.REMOVE_OWNER="REMOVE_OWNER",f.SWAP_OWNER="SWAP_OWNER",f.CHANGE_THRESHOLD="CHANGE_THRESHOLD",f.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",f.ENABLE_MODULE="ENABLE_MODULE",f.DISABLE_MODULE="DISABLE_MODULE",f.SET_GUARD="SET_GUARD",f.DELETE_GUARD="DELETE_GUARD"})(s||(Cn.SettingsInfoType=s={}));var i;(function(f){f.TRANSFER="Transfer",f.SETTINGS_CHANGE="SettingsChange",f.CUSTOM="Custom",f.CREATION="Creation",f.SWAP_ORDER="SwapOrder",f.TWAP_ORDER="TwapOrder",f.SWAP_TRANSFER="SwapTransfer",f.NATIVE_STAKING_DEPOSIT="NativeStakingDeposit",f.NATIVE_STAKING_VALIDATORS_EXIT="NativeStakingValidatorsExit",f.NATIVE_STAKING_WITHDRAW="NativeStakingWithdraw"})(i||(Cn.TransactionInfoType=i={}));var o;(function(f){f.NONE="None",f.HAS_NEXT="HasNext",f.END="End"})(o||(Cn.ConflictType=o={}));var a;(function(f){f.TRANSACTION="TRANSACTION",f.LABEL="LABEL",f.CONFLICT_HEADER="CONFLICT_HEADER",f.DATE_LABEL="DATE_LABEL"})(a||(Cn.TransactionListItemType=a={}));var c;(function(f){f.MULTISIG="MULTISIG",f.MODULE="MODULE"})(c||(Cn.DetailedExecutionInfoType=c={}));var u;(function(f){f.AUTO="AUTO",f.LIMIT_DURATION="LIMIT_DURATION"})(u||(Cn.DurationType=u={}));var l;(function(f){f.AT_MINING_TIME="AT_MINING_TIME",f.AT_EPOCH="AT_EPOCH"})(l||(Cn.StartTimeValue=l={}));var d;return(function(f){f.Queued="Queued",f.Next="Next"})(d||(Cn.LabelValue=d={})),Cn}var od={},CF;function W9e(){if(CF)return od;CF=1,Object.defineProperty(od,"__esModule",{value:!0}),od.FEATURES=od.GAS_PRICE_TYPE=od.RPC_AUTHENTICATION=void 0;var t;(function(n){n.API_KEY_PATH="API_KEY_PATH",n.NO_AUTHENTICATION="NO_AUTHENTICATION",n.UNKNOWN="UNKNOWN"})(t||(od.RPC_AUTHENTICATION=t={}));var e;(function(n){n.ORACLE="ORACLE",n.FIXED="FIXED",n.FIXED_1559="FIXED1559",n.UNKNOWN="UNKNOWN"})(e||(od.GAS_PRICE_TYPE=e={}));var r;return(function(n){n.ERC721="ERC721",n.SAFE_APPS="SAFE_APPS",n.CONTRACT_INTERACTION="CONTRACT_INTERACTION",n.DOMAIN_LOOKUP="DOMAIN_LOOKUP",n.SPENDING_LIMIT="SPENDING_LIMIT",n.EIP1559="EIP1559",n.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",n.TX_SIMULATION="TX_SIMULATION",n.EIP1271="EIP1271"})(r||(od.FEATURES=r={})),od}var Qb={},SF;function V9e(){if(SF)return Qb;SF=1,Object.defineProperty(Qb,"__esModule",{value:!0}),Qb.TokenType=void 0;var t;return(function(e){e.ERC20="ERC20",e.ERC721="ERC721",e.NATIVE_TOKEN="NATIVE_TOKEN",e.UNKNOWN="UNKNOWN"})(t||(Qb.TokenType=t={})),Qb}var kP={},IF;function G9e(){return IF||(IF=1,Object.defineProperty(kP,"__esModule",{value:!0})),kP}var bp={},TF;function K9e(){if(TF)return bp;TF=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.NativeStakingStatus=bp.ConfirmationViewTypes=void 0;var t;(function(r){r.GENERIC="GENERIC",r.COW_SWAP_ORDER="COW_SWAP_ORDER",r.COW_SWAP_TWAP_ORDER="COW_SWAP_TWAP_ORDER",r.KILN_NATIVE_STAKING_DEPOSIT="KILN_NATIVE_STAKING_DEPOSIT",r.KILN_NATIVE_STAKING_VALIDATORS_EXIT="KILN_NATIVE_STAKING_VALIDATORS_EXIT",r.KILN_NATIVE_STAKING_WITHDRAW="KILN_NATIVE_STAKING_WITHDRAW"})(t||(bp.ConfirmationViewTypes=t={}));var e;return(function(r){r.NOT_STAKED="NOT_STAKED",r.ACTIVATING="ACTIVATING",r.DEPOSIT_IN_PROGRESS="DEPOSIT_IN_PROGRESS",r.ACTIVE="ACTIVE",r.EXIT_REQUESTED="EXIT_REQUESTED",r.EXITING="EXITING",r.EXITED="EXITED",r.SLASHED="SLASHED"})(e||(bp.NativeStakingStatus=e={})),bp}var wp={},NF;function Z9e(){if(NF)return wp;NF=1,Object.defineProperty(wp,"__esModule",{value:!0}),wp.SafeMessageStatus=wp.SafeMessageListItemType=void 0;var t;(function(r){r.DATE_LABEL="DATE_LABEL",r.MESSAGE="MESSAGE"})(t||(wp.SafeMessageListItemType=t={}));var e;return(function(r){r.NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",r.CONFIRMED="CONFIRMED"})(e||(wp.SafeMessageStatus=e={})),wp}var ew={},PF;function Y9e(){if(PF)return ew;PF=1,Object.defineProperty(ew,"__esModule",{value:!0}),ew.DeviceType=void 0;var t;return(function(e){e.ANDROID="ANDROID",e.IOS="IOS",e.WEB="WEB"})(t||(ew.DeviceType=t={})),ew}var BP={},RF;function J9e(){return RF||(RF=1,Object.defineProperty(BP,"__esModule",{value:!0})),BP}var OF;function X9e(){return OF||(OF=1,(function(t){var e=mp&&mp.__createBinding||(Object.create?(function(ge,ve,V,q){q===void 0&&(q=V);var z=Object.getOwnPropertyDescriptor(ve,V);(!z||("get"in z?!ve.__esModule:z.writable||z.configurable))&&(z={enumerable:!0,get:function(){return ve[V]}}),Object.defineProperty(ge,q,z)}):(function(ge,ve,V,q){q===void 0&&(q=V),ge[q]=ve[V]})),r=mp&&mp.__exportStar||function(ge,ve){for(var V in ge)V!=="default"&&!Object.prototype.hasOwnProperty.call(ve,V)&&e(ve,ge,V)};Object.defineProperty(t,"__esModule",{value:!0}),t.setBaseUrl=void 0,t.relayTransaction=a,t.getRelayCount=c,t.getSafeInfo=u,t.getIncomingTransfers=l,t.getModuleTransactions=d,t.getMultisigTransactions=f,t.getBalances=p,t.getFiatCurrencies=g,t.getOwnedSafes=h,t.getAllOwnedSafes=y,t.getCollectibles=E,t.getCollectiblesPage=S,t.getTransactionHistory=C,t.getTransactionQueue=_,t.getTransactionDetails=T,t.deleteTransaction=P,t.postSafeGasEstimation=D,t.getNonces=F,t.proposeTransaction=I,t.getConfirmationView=U,t.getTxPreview=L,t.getChainsConfig=B,t.getChainConfig=A,t.getSafeApps=m,t.getMasterCopies=b,t.getDecodedData=w,t.getSafeMessages=x,t.getSafeMessage=M,t.proposeSafeMessage=k,t.confirmSafeMessage=j,t.getDelegates=N,t.registerDevice=v,t.unregisterSafe=R,t.unregisterDevice=$,t.registerEmail=O,t.changeEmail=H,t.resendEmailVerificationCode=W,t.verifyEmail=G,t.getRegisteredEmail=K,t.deleteRegisteredEmail=Q,t.registerRecoveryModule=re,t.unsubscribeSingle=de,t.unsubscribeAll=le,t.getSafeOverviews=se,t.getContract=be,t.getAuthNonce=We,t.verifyAuth=Ne,t.createAccount=Be,t.getAccount=At,t.deleteAccount=Ee,t.getAccountDataTypes=fe,t.getAccountDataSettings=Mt,t.putAccountDataSettings=bt,t.getIndexingStatus=jt;const n=F9e(),s=$9e();r(q9e(),t),r(H9e(),t),r(z9e(),t),r(W9e(),t),r(V9e(),t),r(G9e(),t),r(K9e(),t),r(Z9e(),t),r(Y9e(),t),r(J9e(),t);let i=s.DEFAULT_BASE_URL;const o=ge=>{i=ge};t.setBaseUrl=o;function a(ge,ve){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/relay",{path:{chainId:ge},body:ve})}function c(ge,ve){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/relay/{address}",{path:{chainId:ge,address:ve}})}function u(ge,ve){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:ge,address:ve}})}function l(ge,ve,V,q){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:ge,address:ve},query:V},q)}function d(ge,ve,V,q){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:ge,address:ve},query:V},q)}function f(ge,ve,V,q){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:ge,address:ve},query:V},q)}function p(ge,ve,V="usd",q={}){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:ge,address:ve,currency:V},query:q})}function g(){return(0,n.getEndpoint)(i,"/v1/balances/supported-fiat-codes")}function h(ge,ve){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:ge,address:ve}})}function y(ge){return(0,n.getEndpoint)(i,"/v1/owners/{address}/safes",{path:{address:ge}})}function E(ge,ve,V={}){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:ge,address:ve},query:V})}function S(ge,ve,V={},q){return(0,n.getEndpoint)(i,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:ge,address:ve},query:V},q)}function C(ge,ve,V={},q){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:ge,safe_address:ve},query:V},q)}function _(ge,ve,V={},q){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:ge,safe_address:ve},query:V},q)}function T(ge,ve){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:ge,transactionId:ve}})}function P(ge,ve,V){return(0,n.deleteEndpoint)(i,"/v1/chains/{chainId}/transactions/{safeTxHash}",{path:{chainId:ge,safeTxHash:ve},body:{signature:V}})}function D(ge,ve,V){return(0,n.postEndpoint)(i,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:ge,safe_address:ve},body:V})}function F(ge,ve){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/nonces",{path:{chainId:ge,safe_address:ve}})}function I(ge,ve,V){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:ge,safe_address:ve},body:V})}function U(ge,ve,V,q,z,X){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/views/transaction-confirmation",{path:{chainId:ge,safe_address:ve},body:{operation:V,data:q,to:z,value:X}})}function L(ge,ve,V,q,z,X){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/transactions/{safe_address}/preview",{path:{chainId:ge,safe_address:ve},body:{operation:V,data:q,to:z,value:X}})}function B(ge){return(0,n.getEndpoint)(i,"/v1/chains",{query:ge})}function A(ge){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}",{path:{chainId:ge}})}function m(ge,ve={}){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safe-apps",{path:{chainId:ge},query:ve})}function b(ge){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:ge}})}function w(ge,ve,V,q){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/data-decoder",{path:{chainId:ge},body:{operation:ve,data:V,to:q}})}function x(ge,ve,V){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:ge,safe_address:ve},query:{}},V)}function M(ge,ve){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:ge,message_hash:ve}})}function k(ge,ve,V){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:ge,safe_address:ve},body:V})}function j(ge,ve,V){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:ge,message_hash:ve},body:V})}function N(ge,ve={}){return(0,n.getEndpoint)(i,"/v2/chains/{chainId}/delegates",{path:{chainId:ge},query:ve})}function v(ge){return(0,n.postEndpoint)(i,"/v1/register/notifications",{body:ge})}function R(ge,ve,V){return(0,n.deleteEndpoint)(i,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:ge,safe_address:ve,uuid:V}})}function $(ge,ve){return(0,n.deleteEndpoint)(i,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:ge,uuid:ve}})}function O(ge,ve,V,q){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails",{path:{chainId:ge,safe_address:ve},body:V,headers:q})}function H(ge,ve,V,q,z){return(0,n.putEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:ge,safe_address:ve,signer:V},body:q,headers:z})}function W(ge,ve,V){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify-resend",{path:{chainId:ge,safe_address:ve,signer:V},body:""})}function G(ge,ve,V,q){return(0,n.putEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify",{path:{chainId:ge,safe_address:ve,signer:V},body:q})}function K(ge,ve,V,q){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:ge,safe_address:ve,signer:V},headers:q})}function Q(ge,ve,V,q){return(0,n.deleteEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:ge,safe_address:ve,signer:V},headers:q})}function re(ge,ve,V){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/recovery",{path:{chainId:ge,safe_address:ve},body:V})}function de(ge){return(0,n.deleteEndpoint)(i,"/v1/subscriptions",{query:ge})}function le(ge){return(0,n.deleteEndpoint)(i,"/v1/subscriptions/all",{query:ge})}function se(ge,ve){return(0,n.getEndpoint)(i,"/v1/safes",{query:Object.assign(Object.assign({},ve),{safes:ge.join(",")})})}function be(ge,ve){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/contracts/{contractAddress}",{path:{chainId:ge,contractAddress:ve}})}function We(){return(0,n.getEndpoint)(i,"/v1/auth/nonce",{credentials:"include"})}function Ne(ge){return(0,n.postEndpoint)(i,"/v1/auth/verify",{body:ge,credentials:"include"})}function Be(ge){return(0,n.postEndpoint)(i,"/v1/accounts",{body:ge,credentials:"include"})}function At(ge){return(0,n.getEndpoint)(i,"/v1/accounts/{address}",{path:{address:ge},credentials:"include"})}function Ee(ge){return(0,n.deleteEndpoint)(i,"/v1/accounts/{address}",{path:{address:ge},credentials:"include"})}function fe(){return(0,n.getEndpoint)(i,"/v1/accounts/data-types")}function Mt(ge){return(0,n.getEndpoint)(i,"/v1/accounts/{address}/data-settings",{path:{address:ge},credentials:"include"})}function bt(ge,ve){return(0,n.putEndpoint)(i,"/v1/accounts/{address}/data-settings",{path:{address:ge},body:ve,credentials:"include"})}function jt(ge){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/about/indexing",{path:{chainId:ge}})}})(mp)),mp}var kF;function Q9e(){return kF||(kF=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TransferDirection=t.TransactionStatus=t.TokenType=t.Operation=void 0;var e=X9e();Object.defineProperty(t,"Operation",{enumerable:!0,get:function(){return e.Operation}}),Object.defineProperty(t,"TokenType",{enumerable:!0,get:function(){return e.TokenType}}),Object.defineProperty(t,"TransactionStatus",{enumerable:!0,get:function(){return e.TransactionStatus}}),Object.defineProperty(t,"TransferDirection",{enumerable:!0,get:function(){return e.TransferDirection}})})(OP)),OP}var UP={},BF;function eUe(){return BF||(BF=1,Object.defineProperty(UP,"__esModule",{value:!0}),eg()),UP}var UF;function uB(){return UF||(UF=1,(function(t){var e=gp&&gp.__createBinding||(Object.create?(function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}):(function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]})),r=gp&&gp.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(D9e(),t),r(j9e(),t),r(Q9e(),t),r(eUe(),t)})(gp)),gp}var MF;function tUe(){if(MF)return Zb;MF=1,Object.defineProperty(Zb,"__esModule",{value:!0}),Zb.TXs=void 0;const t=eg(),e=uB();class r{constructor(s){this.communicator=s}async getBySafeTxHash(s){if(!s)throw new Error("Invalid safeTxHash");return(await this.communicator.send(t.Methods.getTxBySafeTxHash,{safeTxHash:s})).data}async signMessage(s){const i={message:s};return(await this.communicator.send(t.Methods.signMessage,i)).data}async signTypedMessage(s){if(!(0,e.isObjectEIP712TypedData)(s))throw new Error("Invalid typed data");return(await this.communicator.send(t.Methods.signTypedMessage,{typedData:s})).data}async send({txs:s,params:i}){if(!s||!s.length)throw new Error("No transactions were passed");const o={txs:s,params:i};return(await this.communicator.send(t.Methods.sendTransactions,o)).data}}return Zb.TXs=r,Zb}var tw={},rw={},DF;function lB(){return DF||(DF=1,Object.defineProperty(rw,"__esModule",{value:!0}),rw.RPC_CALLS=void 0,rw.RPC_CALLS={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"}),rw}var jF;function rUe(){if(jF)return tw;jF=1,Object.defineProperty(tw,"__esModule",{value:!0}),tw.Eth=void 0;const t=lB(),e=eg(),r={defaultBlockParam:(s="latest")=>s,returnFullTxObjectParam:(s=!1)=>s,blockNumberToHex:s=>Number.isInteger(s)?`0x${s.toString(16)}`:s};class n{constructor(i){this.communicator=i,this.call=this.buildRequest({call:t.RPC_CALLS.eth_call,formatters:[null,r.defaultBlockParam]}),this.getBalance=this.buildRequest({call:t.RPC_CALLS.eth_getBalance,formatters:[null,r.defaultBlockParam]}),this.getCode=this.buildRequest({call:t.RPC_CALLS.eth_getCode,formatters:[null,r.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:t.RPC_CALLS.eth_getStorageAt,formatters:[null,r.blockNumberToHex,r.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:t.RPC_CALLS.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:t.RPC_CALLS.eth_getBlockByHash,formatters:[null,r.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:t.RPC_CALLS.eth_getBlockByNumber,formatters:[r.blockNumberToHex,r.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:t.RPC_CALLS.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:t.RPC_CALLS.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:t.RPC_CALLS.eth_getTransactionCount,formatters:[null,r.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:t.RPC_CALLS.eth_gasPrice}),this.getEstimateGas=o=>this.buildRequest({call:t.RPC_CALLS.eth_estimateGas})([o]),this.setSafeSettings=this.buildRequest({call:t.RPC_CALLS.safe_setSettings})}buildRequest(i){const{call:o,formatters:a}=i;return async c=>{a&&Array.isArray(c)&&a.forEach((d,f)=>{d&&(c[f]=d(c[f]))});const u={call:o,params:c||[]};return(await this.communicator.send(e.Methods.rpcCall,u)).data}}}return tw.Eth=n,tw}var ad={},MP={},DP={},nw={},sw={},LF;function nUe(){return LF||(LF=1,Object.defineProperty(sw,"__esModule",{value:!0}),sw.version=void 0,sw.version="1.1.0"),sw}var FF;function Yy(){if(FF)return nw;FF=1,Object.defineProperty(nw,"__esModule",{value:!0}),nw.BaseError=void 0;const t=nUe();class e extends Error{constructor(n,s={}){const i=s.cause instanceof e?s.cause.details:s.cause?.message?s.cause.message:s.details,o=s.cause instanceof e&&s.cause.docsPath||s.docsPath,a=[n||"An error occurred.","",...s.metaMessages?[...s.metaMessages,""]:[],...o?[`Docs: https://abitype.dev${o}`]:[],...i?[`Details: ${i}`]:[],`Version: abitype@${t.version}`].join(`
`);super(a),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),s.cause&&(this.cause=s.cause),this.details=i,this.docsPath=o,this.metaMessages=s.metaMessages,this.shortMessage=n}}return nw.BaseError=e,nw}var C2={},$F;function sUe(){if($F)return C2;$F=1,Object.defineProperty(C2,"__esModule",{value:!0}),C2.narrow=t;function t(e){return e}return C2}var S2={},I2={},T2={},N2={},tl={},qF;function mT(){if(qF)return tl;qF=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.isTupleRegex=tl.integerRegex=tl.bytesRegex=void 0,tl.execTyped=t;function t(e,r){return e.exec(r)?.groups}return tl.bytesRegex=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,tl.integerRegex=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,tl.isTupleRegex=/^\(.+?\).*?$/,tl}var HF;function Zne(){if(HF)return N2;HF=1,Object.defineProperty(N2,"__esModule",{value:!0}),N2.formatAbiParameter=r;const t=mT(),e=/^tuple(?<array>(\[(\d*)\])*)$/;function r(n){let s=n.type;if(e.test(n.type)&&"components"in n){s="(";const i=n.components.length;for(let a=0;a<i;a++){const c=n.components[a];s+=r(c),a<i-1&&(s+=", ")}const o=(0,t.execTyped)(e,n.type);return s+=`)${o?.array??""}`,r({...n,type:s})}return"indexed"in n&&n.indexed&&(s=`${s} indexed`),n.name?`${s} ${n.name}`:s}return N2}var zF;function Yne(){if(zF)return T2;zF=1,Object.defineProperty(T2,"__esModule",{value:!0}),T2.formatAbiParameters=e;const t=Zne();function e(r){let n="";const s=r.length;for(let i=0;i<s;i++){const o=r[i];n+=(0,t.formatAbiParameter)(o),i!==s-1&&(n+=", ")}return n}return T2}var WF;function Jne(){if(WF)return I2;WF=1,Object.defineProperty(I2,"__esModule",{value:!0}),I2.formatAbiItem=e;const t=Yne();function e(r){return r.type==="function"?`function ${r.name}(${(0,t.formatAbiParameters)(r.inputs)})${r.stateMutability&&r.stateMutability!=="nonpayable"?` ${r.stateMutability}`:""}${r.outputs?.length?` returns (${(0,t.formatAbiParameters)(r.outputs)})`:""}`:r.type==="event"?`event ${r.name}(${(0,t.formatAbiParameters)(r.inputs)})`:r.type==="error"?`error ${r.name}(${(0,t.formatAbiParameters)(r.inputs)})`:r.type==="constructor"?`constructor(${(0,t.formatAbiParameters)(r.inputs)})${r.stateMutability==="payable"?" payable":""}`:r.type==="fallback"?`fallback() external${r.stateMutability==="payable"?" payable":""}`:"receive() external payable"}return I2}var VF;function iUe(){if(VF)return S2;VF=1,Object.defineProperty(S2,"__esModule",{value:!0}),S2.formatAbi=e;const t=Jne();function e(r){const n=[],s=r.length;for(let i=0;i<s;i++){const o=r[i],a=(0,t.formatAbiItem)(o);n.push(a)}return n}return S2}var P2={},cs={},GF;function Jy(){if(GF)return cs;GF=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.functionModifiers=cs.eventModifiers=cs.modifiers=void 0,cs.isErrorSignature=r,cs.execErrorSignature=n,cs.isEventSignature=i,cs.execEventSignature=o,cs.isFunctionSignature=c,cs.execFunctionSignature=u,cs.isStructSignature=d,cs.execStructSignature=f,cs.isConstructorSignature=g,cs.execConstructorSignature=h,cs.isFallbackSignature=E,cs.execFallbackSignature=S,cs.isReceiveSignature=_;const t=mT(),e=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function r(T){return e.test(T)}function n(T){return(0,t.execTyped)(e,T)}const s=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function i(T){return s.test(T)}function o(T){return(0,t.execTyped)(s,T)}const a=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function c(T){return a.test(T)}function u(T){return(0,t.execTyped)(a,T)}const l=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function d(T){return l.test(T)}function f(T){return(0,t.execTyped)(l,T)}const p=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function g(T){return p.test(T)}function h(T){return(0,t.execTyped)(p,T)}const y=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function E(T){return y.test(T)}function S(T){return(0,t.execTyped)(y,T)}const C=/^receive\(\) external payable$/;function _(T){return C.test(T)}return cs.modifiers=new Set(["memory","indexed","storage","calldata"]),cs.eventModifiers=new Set(["indexed"]),cs.functionModifiers=new Set(["calldata","memory","storage"]),cs}var R2={},cd={},KF;function yT(){if(KF)return cd;KF=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.UnknownSolidityTypeError=cd.UnknownTypeError=cd.InvalidAbiItemError=void 0;const t=Yy();class e extends t.BaseError{constructor({signature:i}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(i,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}cd.InvalidAbiItemError=e;class r extends t.BaseError{constructor({type:i}){super("Unknown type.",{metaMessages:[`Type "${i}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}cd.UnknownTypeError=r;class n extends t.BaseError{constructor({type:i}){super("Unknown type.",{metaMessages:[`Type "${i}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}return cd.UnknownSolidityTypeError=n,cd}var yi={},ZF;function JE(){if(ZF)return yi;ZF=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.InvalidAbiTypeParameterError=yi.InvalidFunctionModifierError=yi.InvalidModifierError=yi.SolidityProtectedKeywordError=yi.InvalidParameterError=yi.InvalidAbiParametersError=yi.InvalidAbiParameterError=void 0;const t=Yy();class e extends t.BaseError{constructor({param:u}){super("Failed to parse ABI parameter.",{details:`parseAbiParameter(${JSON.stringify(u,null,2)})`,docsPath:"/api/human#parseabiparameter-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParameterError"})}}yi.InvalidAbiParameterError=e;class r extends t.BaseError{constructor({params:u}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(u,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}yi.InvalidAbiParametersError=r;class n extends t.BaseError{constructor({param:u}){super("Invalid ABI parameter.",{details:u}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}yi.InvalidParameterError=n;class s extends t.BaseError{constructor({param:u,name:l}){super("Invalid ABI parameter.",{details:u,metaMessages:[`"${l}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}yi.SolidityProtectedKeywordError=s;class i extends t.BaseError{constructor({param:u,type:l,modifier:d}){super("Invalid ABI parameter.",{details:u,metaMessages:[`Modifier "${d}" not allowed${l?` in "${l}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}yi.InvalidModifierError=i;class o extends t.BaseError{constructor({param:u,type:l,modifier:d}){super("Invalid ABI parameter.",{details:u,metaMessages:[`Modifier "${d}" not allowed${l?` in "${l}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${d}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}yi.InvalidFunctionModifierError=o;class a extends t.BaseError{constructor({abiParameter:u}){super("Invalid ABI parameter.",{details:JSON.stringify(u,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}return yi.InvalidAbiTypeParameterError=a,yi}var ud={},YF;function dB(){if(YF)return ud;YF=1,Object.defineProperty(ud,"__esModule",{value:!0}),ud.InvalidStructSignatureError=ud.UnknownSignatureError=ud.InvalidSignatureError=void 0;const t=Yy();class e extends t.BaseError{constructor({signature:i,type:o}){super(`Invalid ${o} signature.`,{details:i}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}ud.InvalidSignatureError=e;class r extends t.BaseError{constructor({signature:i}){super("Unknown signature.",{details:i}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}ud.UnknownSignatureError=r;class n extends t.BaseError{constructor({signature:i}){super("Invalid struct signature.",{details:i,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}return ud.InvalidStructSignatureError=n,ud}var iw={},JF;function Xne(){if(JF)return iw;JF=1,Object.defineProperty(iw,"__esModule",{value:!0}),iw.CircularReferenceError=void 0;const t=Yy();class e extends t.BaseError{constructor({type:n}){super("Circular reference detected.",{metaMessages:[`Struct "${n}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}return iw.CircularReferenceError=e,iw}var Go={},ow={},XF;function Qne(){if(XF)return ow;XF=1,Object.defineProperty(ow,"__esModule",{value:!0}),ow.InvalidParenthesisError=void 0;const t=Yy();class e extends t.BaseError{constructor({current:n,depth:s}){super("Unbalanced parentheses.",{metaMessages:[`"${n.trim()}" has too many ${s>0?"opening":"closing"} parentheses.`],details:`Depth "${s}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}return ow.InvalidParenthesisError=e,ow}var Bg={},QF;function oUe(){if(QF)return Bg;QF=1,Object.defineProperty(Bg,"__esModule",{value:!0}),Bg.parameterCache=void 0,Bg.getParameterCacheKey=t;function t(e,r,n){let s="";if(n)for(const i of Object.entries(n)){if(!i)continue;let o="";for(const a of i[1])o+=`[${a.type}${a.name?`:${a.name}`:""}]`;s+=`(${i[0]}{${o}})`}return r?`${r}:${e}${s}`:e}return Bg.parameterCache=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]),Bg}var e$;function Ty(){if(e$)return Go;e$=1,Object.defineProperty(Go,"__esModule",{value:!0}),Go.parseSignature=a,Go.parseFunctionSignature=c,Go.parseEventSignature=u,Go.parseErrorSignature=l,Go.parseConstructorSignature=d,Go.parseFallbackSignature=f,Go.parseAbiParameter=y,Go.splitParameters=E,Go.isSolidityType=S,Go.isSolidityKeyword=_,Go.isValidDataLocation=T;const t=mT(),e=yT(),r=JE(),n=dB(),s=Qne(),i=oUe(),o=Jy();function a(P,D={}){if((0,o.isFunctionSignature)(P))return c(P,D);if((0,o.isEventSignature)(P))return u(P,D);if((0,o.isErrorSignature)(P))return l(P,D);if((0,o.isConstructorSignature)(P))return d(P,D);if((0,o.isFallbackSignature)(P))return f(P);if((0,o.isReceiveSignature)(P))return{type:"receive",stateMutability:"payable"};throw new n.UnknownSignatureError({signature:P})}function c(P,D={}){const F=(0,o.execFunctionSignature)(P);if(!F)throw new n.InvalidSignatureError({signature:P,type:"function"});const I=E(F.parameters),U=[],L=I.length;for(let A=0;A<L;A++)U.push(y(I[A],{modifiers:o.functionModifiers,structs:D,type:"function"}));const B=[];if(F.returns){const A=E(F.returns),m=A.length;for(let b=0;b<m;b++)B.push(y(A[b],{modifiers:o.functionModifiers,structs:D,type:"function"}))}return{name:F.name,type:"function",stateMutability:F.stateMutability??"nonpayable",inputs:U,outputs:B}}function u(P,D={}){const F=(0,o.execEventSignature)(P);if(!F)throw new n.InvalidSignatureError({signature:P,type:"event"});const I=E(F.parameters),U=[],L=I.length;for(let B=0;B<L;B++)U.push(y(I[B],{modifiers:o.eventModifiers,structs:D,type:"event"}));return{name:F.name,type:"event",inputs:U}}function l(P,D={}){const F=(0,o.execErrorSignature)(P);if(!F)throw new n.InvalidSignatureError({signature:P,type:"error"});const I=E(F.parameters),U=[],L=I.length;for(let B=0;B<L;B++)U.push(y(I[B],{structs:D,type:"error"}));return{name:F.name,type:"error",inputs:U}}function d(P,D={}){const F=(0,o.execConstructorSignature)(P);if(!F)throw new n.InvalidSignatureError({signature:P,type:"constructor"});const I=E(F.parameters),U=[],L=I.length;for(let B=0;B<L;B++)U.push(y(I[B],{structs:D,type:"constructor"}));return{type:"constructor",stateMutability:F.stateMutability??"nonpayable",inputs:U}}function f(P){const D=(0,o.execFallbackSignature)(P);if(!D)throw new n.InvalidSignatureError({signature:P,type:"fallback"});return{type:"fallback",stateMutability:D.stateMutability??"nonpayable"}}const p=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,g=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,h=/^u?int$/;function y(P,D){const F=(0,i.getParameterCacheKey)(P,D?.type,D?.structs);if(i.parameterCache.has(F))return i.parameterCache.get(F);const I=t.isTupleRegex.test(P),U=(0,t.execTyped)(I?g:p,P);if(!U)throw new r.InvalidParameterError({param:P});if(U.name&&_(U.name))throw new r.SolidityProtectedKeywordError({param:P,name:U.name});const L=U.name?{name:U.name}:{},B=U.modifier==="indexed"?{indexed:!0}:{},A=D?.structs??{};let m,b={};if(I){m="tuple";const x=E(U.type),M=[],k=x.length;for(let j=0;j<k;j++)M.push(y(x[j],{structs:A}));b={components:M}}else if(U.type in A)m="tuple",b={components:A[U.type]};else if(h.test(U.type))m=`${U.type}256`;else if(U.type==="address payable")m="address";else if(m=U.type,D?.type!=="struct"&&!S(m))throw new e.UnknownSolidityTypeError({type:m});if(U.modifier){if(!D?.modifiers?.has?.(U.modifier))throw new r.InvalidModifierError({param:P,type:D?.type,modifier:U.modifier});if(o.functionModifiers.has(U.modifier)&&!T(m,!!U.array))throw new r.InvalidFunctionModifierError({param:P,type:D?.type,modifier:U.modifier})}const w={type:`${m}${U.array??""}`,...L,...B,...b};return i.parameterCache.set(F,w),w}function E(P,D=[],F="",I=0){const U=P.trim().length;for(let L=0;L<U;L++){const B=P[L],A=P.slice(L+1);switch(B){case",":return I===0?E(A,[...D,F.trim()]):E(A,D,`${F}${B}`,I);case"(":return E(A,D,`${F}${B}`,I+1);case")":return E(A,D,`${F}${B}`,I-1);default:return E(A,D,`${F}${B}`,I)}}if(F==="")return D;if(I!==0)throw new s.InvalidParenthesisError({current:F,depth:I});return D.push(F.trim()),D}function S(P){return P==="address"||P==="bool"||P==="function"||P==="string"||t.bytesRegex.test(P)||t.integerRegex.test(P)}const C=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function _(P){return P==="address"||P==="bool"||P==="function"||P==="string"||P==="tuple"||t.bytesRegex.test(P)||t.integerRegex.test(P)||C.test(P)}function T(P,D){return D||P==="bytes"||P==="string"||P==="tuple"}return Go}var t$;function bT(){if(t$)return R2;t$=1,Object.defineProperty(R2,"__esModule",{value:!0}),R2.parseStructs=a;const t=mT(),e=yT(),r=JE(),n=dB(),s=Xne(),i=Jy(),o=Ty();function a(l){const d={},f=l.length;for(let y=0;y<f;y++){const E=l[y];if(!(0,i.isStructSignature)(E))continue;const S=(0,i.execStructSignature)(E);if(!S)throw new n.InvalidSignatureError({signature:E,type:"struct"});const C=S.properties.split(";"),_=[],T=C.length;for(let P=0;P<T;P++){const F=C[P].trim();if(!F)continue;const I=(0,o.parseAbiParameter)(F,{type:"struct"});_.push(I)}if(!_.length)throw new n.InvalidStructSignatureError({signature:E});d[S.name]=_}const p={},g=Object.entries(d),h=g.length;for(let y=0;y<h;y++){const[E,S]=g[y];p[E]=u(S,d)}return p}const c=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function u(l,d,f=new Set){const p=[],g=l.length;for(let h=0;h<g;h++){const y=l[h];if(t.isTupleRegex.test(y.type))p.push(y);else{const S=(0,t.execTyped)(c,y.type);if(!S?.type)throw new r.InvalidAbiTypeParameterError({abiParameter:y});const{array:C,type:_}=S;if(_ in d){if(f.has(_))throw new s.CircularReferenceError({type:_});p.push({...y,type:`tuple${C??""}`,components:u(d[_]??[],d,new Set([...f,_]))})}else if((0,o.isSolidityType)(_))p.push(y);else throw new e.UnknownTypeError({type:_})}}return p}return R2}var r$;function aUe(){if(r$)return P2;r$=1,Object.defineProperty(P2,"__esModule",{value:!0}),P2.parseAbi=n;const t=Jy(),e=bT(),r=Ty();function n(s){const i=(0,e.parseStructs)(s),o=[],a=s.length;for(let c=0;c<a;c++){const u=s[c];(0,t.isStructSignature)(u)||o.push((0,r.parseSignature)(u,i))}return o}return P2}var O2={},n$;function cUe(){if(n$)return O2;n$=1,Object.defineProperty(O2,"__esModule",{value:!0}),O2.parseAbiItem=s;const t=yT(),e=Jy(),r=bT(),n=Ty();function s(i){let o;if(typeof i=="string")o=(0,n.parseSignature)(i);else{const a=(0,r.parseStructs)(i),c=i.length;for(let u=0;u<c;u++){const l=i[u];if(!(0,e.isStructSignature)(l)){o=(0,n.parseSignature)(l,a);break}}}if(!o)throw new t.InvalidAbiItemError({signature:i});return o}return O2}var k2={},s$;function uUe(){if(s$)return k2;s$=1,Object.defineProperty(k2,"__esModule",{value:!0}),k2.parseAbiParameter=s;const t=JE(),e=Jy(),r=bT(),n=Ty();function s(i){let o;if(typeof i=="string")o=(0,n.parseAbiParameter)(i,{modifiers:e.modifiers});else{const a=(0,r.parseStructs)(i),c=i.length;for(let u=0;u<c;u++){const l=i[u];if(!(0,e.isStructSignature)(l)){o=(0,n.parseAbiParameter)(l,{modifiers:e.modifiers,structs:a});break}}}if(!o)throw new t.InvalidAbiParameterError({param:i});return o}return k2}var B2={},i$;function lUe(){if(i$)return B2;i$=1,Object.defineProperty(B2,"__esModule",{value:!0}),B2.parseAbiParameters=i;const t=JE(),e=Jy(),r=bT(),n=Ty(),s=Ty();function i(o){const a=[];if(typeof o=="string"){const c=(0,n.splitParameters)(o),u=c.length;for(let l=0;l<u;l++)a.push((0,s.parseAbiParameter)(c[l],{modifiers:e.modifiers}))}else{const c=(0,r.parseStructs)(o),u=o.length;for(let l=0;l<u;l++){const d=o[l];if((0,e.isStructSignature)(d))continue;const f=(0,n.splitParameters)(d),p=f.length;for(let g=0;g<p;g++)a.push((0,s.parseAbiParameter)(f[g],{modifiers:e.modifiers,structs:c}))}}if(a.length===0)throw new t.InvalidAbiParametersError({params:o});return a}return B2}var o$;function $h(){return o$||(o$=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CircularReferenceError=t.InvalidParenthesisError=t.UnknownSignatureError=t.InvalidSignatureError=t.InvalidStructSignatureError=t.InvalidAbiParameterError=t.InvalidAbiParametersError=t.InvalidParameterError=t.SolidityProtectedKeywordError=t.InvalidModifierError=t.InvalidFunctionModifierError=t.InvalidAbiTypeParameterError=t.UnknownSolidityTypeError=t.InvalidAbiItemError=t.UnknownTypeError=t.parseAbiParameters=t.parseAbiParameter=t.parseAbiItem=t.parseAbi=t.formatAbiParameters=t.formatAbiParameter=t.formatAbiItem=t.formatAbi=t.narrow=t.BaseError=void 0;var e=Yy();Object.defineProperty(t,"BaseError",{enumerable:!0,get:function(){return e.BaseError}});var r=sUe();Object.defineProperty(t,"narrow",{enumerable:!0,get:function(){return r.narrow}});var n=iUe();Object.defineProperty(t,"formatAbi",{enumerable:!0,get:function(){return n.formatAbi}});var s=Jne();Object.defineProperty(t,"formatAbiItem",{enumerable:!0,get:function(){return s.formatAbiItem}});var i=Zne();Object.defineProperty(t,"formatAbiParameter",{enumerable:!0,get:function(){return i.formatAbiParameter}});var o=Yne();Object.defineProperty(t,"formatAbiParameters",{enumerable:!0,get:function(){return o.formatAbiParameters}});var a=aUe();Object.defineProperty(t,"parseAbi",{enumerable:!0,get:function(){return a.parseAbi}});var c=cUe();Object.defineProperty(t,"parseAbiItem",{enumerable:!0,get:function(){return c.parseAbiItem}});var u=uUe();Object.defineProperty(t,"parseAbiParameter",{enumerable:!0,get:function(){return u.parseAbiParameter}});var l=lUe();Object.defineProperty(t,"parseAbiParameters",{enumerable:!0,get:function(){return l.parseAbiParameters}});var d=yT();Object.defineProperty(t,"UnknownTypeError",{enumerable:!0,get:function(){return d.UnknownTypeError}}),Object.defineProperty(t,"InvalidAbiItemError",{enumerable:!0,get:function(){return d.InvalidAbiItemError}}),Object.defineProperty(t,"UnknownSolidityTypeError",{enumerable:!0,get:function(){return d.UnknownSolidityTypeError}});var f=JE();Object.defineProperty(t,"InvalidAbiTypeParameterError",{enumerable:!0,get:function(){return f.InvalidAbiTypeParameterError}}),Object.defineProperty(t,"InvalidFunctionModifierError",{enumerable:!0,get:function(){return f.InvalidFunctionModifierError}}),Object.defineProperty(t,"InvalidModifierError",{enumerable:!0,get:function(){return f.InvalidModifierError}}),Object.defineProperty(t,"SolidityProtectedKeywordError",{enumerable:!0,get:function(){return f.SolidityProtectedKeywordError}}),Object.defineProperty(t,"InvalidParameterError",{enumerable:!0,get:function(){return f.InvalidParameterError}}),Object.defineProperty(t,"InvalidAbiParametersError",{enumerable:!0,get:function(){return f.InvalidAbiParametersError}}),Object.defineProperty(t,"InvalidAbiParameterError",{enumerable:!0,get:function(){return f.InvalidAbiParameterError}});var p=dB();Object.defineProperty(t,"InvalidStructSignatureError",{enumerable:!0,get:function(){return p.InvalidStructSignatureError}}),Object.defineProperty(t,"InvalidSignatureError",{enumerable:!0,get:function(){return p.InvalidSignatureError}}),Object.defineProperty(t,"UnknownSignatureError",{enumerable:!0,get:function(){return p.UnknownSignatureError}});var g=Qne();Object.defineProperty(t,"InvalidParenthesisError",{enumerable:!0,get:function(){return g.InvalidParenthesisError}});var h=Xne();Object.defineProperty(t,"CircularReferenceError",{enumerable:!0,get:function(){return h.CircularReferenceError}})})(DP)),DP}var Ug={},U2={},a$;function kr(){if(a$)return U2;a$=1,Object.defineProperty(U2,"__esModule",{value:!0}),U2.getAction=t;function t(e,r,n){const s=e[r.name];if(typeof s=="function")return s;const i=e[n];return typeof i=="function"?i:o=>r(e,o)}return U2}var M2={},D2={},St={},aw={},c$;function of(){if(c$)return aw;c$=1,Object.defineProperty(aw,"__esModule",{value:!0}),aw.formatAbiItem=e,aw.formatAbiParams=r;const t=Jn();function e(s,{includeName:i=!1}={}){if(s.type!=="function"&&s.type!=="event"&&s.type!=="error")throw new t.InvalidDefinitionTypeError(s.type);return`${s.name}(${r(s.inputs,{includeName:i})})`}function r(s,{includeName:i=!1}={}){return s?s.map(o=>n(o,{includeName:i})).join(i?", ":","):""}function n(s,{includeName:i}){return s.type.startsWith("tuple")?`(${r(s.components,{includeName:i})})${s.type.slice(5)}`:s.type+(i&&s.name?` ${s.name}`:"")}return aw}var j2={},L2={},u$;function $o(){if(u$)return L2;u$=1,Object.defineProperty(L2,"__esModule",{value:!0}),L2.isHex=t;function t(e,{strict:r=!0}={}){return!e||typeof e!="string"?!1:r?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}return L2}var l$;function Ca(){if(l$)return j2;l$=1,Object.defineProperty(j2,"__esModule",{value:!0}),j2.size=e;const t=$o();function e(r){return(0,t.isHex)(r,{strict:!1})?Math.ceil((r.length-2)/2):r.length}return j2}var Mg={},cw={},d$;function dUe(){return d$||(d$=1,Object.defineProperty(cw,"__esModule",{value:!0}),cw.version=void 0,cw.version="2.40.2"),cw}var f$;function Kt(){if(f$)return Mg;f$=1,Object.defineProperty(Mg,"__esModule",{value:!0}),Mg.BaseError=void 0,Mg.setErrorConfig=r;const t=dUe();let e={getDocsUrl:({docsBaseUrl:i,docsPath:o="",docsSlug:a})=>o?`${i??"https://viem.sh"}${o}${a?`#${a}`:""}`:void 0,version:`viem@${t.version}`};function r(i){e=i}class n extends Error{constructor(o,a={}){const c=a.cause instanceof n?a.cause.details:a.cause?.message?a.cause.message:a.details,u=a.cause instanceof n&&a.cause.docsPath||a.docsPath,l=e.getDocsUrl?.({...a,docsPath:u}),d=[o||"An error occurred.","",...a.metaMessages?[...a.metaMessages,""]:[],...l?[`Docs: ${l}`]:[],...c?[`Details: ${c}`]:[],...e.version?[`Version: ${e.version}`]:[]].join(`
`);super(d,a.cause?{cause:a.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=c,this.docsPath=u,this.metaMessages=a.metaMessages,this.name=a.name??this.name,this.shortMessage=o,this.version=t.version}walk(o){return s(this,o)}}Mg.BaseError=n;function s(i,o){return o?.(i)?i:i&&typeof i=="object"&&"cause"in i&&i.cause!==void 0?s(i.cause,o):o?null:i}return Mg}var h$;function Jn(){if(h$)return St;h$=1,Object.defineProperty(St,"__esModule",{value:!0}),St.UnsupportedPackedAbiType=St.InvalidDefinitionTypeError=St.InvalidArrayError=St.InvalidAbiDecodingTypeError=St.InvalidAbiEncodingTypeError=St.DecodeLogTopicsMismatch=St.DecodeLogDataMismatch=St.BytesSizeMismatchError=St.AbiItemAmbiguityError=St.AbiFunctionSignatureNotFoundError=St.AbiFunctionOutputsNotFoundError=St.AbiFunctionNotFoundError=St.AbiEventNotFoundError=St.AbiEventSignatureNotFoundError=St.AbiEventSignatureEmptyTopicsError=St.AbiErrorSignatureNotFoundError=St.AbiErrorNotFoundError=St.AbiErrorInputsNotFoundError=St.AbiEncodingLengthMismatchError=St.AbiEncodingBytesSizeMismatchError=St.AbiEncodingArrayLengthMismatchError=St.AbiDecodingZeroDataError=St.AbiDecodingDataSizeTooSmallError=St.AbiDecodingDataSizeInvalidError=St.AbiConstructorParamsNotFoundError=St.AbiConstructorNotFoundError=void 0;const t=of(),e=Ca(),r=Kt();class n extends r.BaseError{constructor({docsPath:m}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:m,name:"AbiConstructorNotFoundError"})}}St.AbiConstructorNotFoundError=n;class s extends r.BaseError{constructor({docsPath:m}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:m,name:"AbiConstructorParamsNotFoundError"})}}St.AbiConstructorParamsNotFoundError=s;class i extends r.BaseError{constructor({data:m,size:b}){super([`Data size of ${b} bytes is invalid.`,"Size must be in increments of 32 bytes (size % 32 === 0)."].join(`
`),{metaMessages:[`Data: ${m} (${b} bytes)`],name:"AbiDecodingDataSizeInvalidError"})}}St.AbiDecodingDataSizeInvalidError=i;class o extends r.BaseError{constructor({data:m,params:b,size:w}){super([`Data size of ${w} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${(0,t.formatAbiParams)(b,{includeName:!0})})`,`Data:   ${m} (${w} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=m,this.params=b,this.size=w}}St.AbiDecodingDataSizeTooSmallError=o;class a extends r.BaseError{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}St.AbiDecodingZeroDataError=a;class c extends r.BaseError{constructor({expectedLength:m,givenLength:b,type:w}){super([`ABI encoding array length mismatch for type ${w}.`,`Expected length: ${m}`,`Given length: ${b}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}St.AbiEncodingArrayLengthMismatchError=c;class u extends r.BaseError{constructor({expectedSize:m,value:b}){super(`Size of bytes "${b}" (bytes${(0,e.size)(b)}) does not match expected size (bytes${m}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}St.AbiEncodingBytesSizeMismatchError=u;class l extends r.BaseError{constructor({expectedLength:m,givenLength:b}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${m}`,`Given length (values): ${b}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}St.AbiEncodingLengthMismatchError=l;class d extends r.BaseError{constructor(m,{docsPath:b}){super([`Arguments (\`args\`) were provided to "${m}", but "${m}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:b,name:"AbiErrorInputsNotFoundError"})}}St.AbiErrorInputsNotFoundError=d;class f extends r.BaseError{constructor(m,{docsPath:b}={}){super([`Error ${m?`"${m}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:b,name:"AbiErrorNotFoundError"})}}St.AbiErrorNotFoundError=f;class p extends r.BaseError{constructor(m,{docsPath:b}){super([`Encoded error signature "${m}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${m}.`].join(`
`),{docsPath:b,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=m}}St.AbiErrorSignatureNotFoundError=p;class g extends r.BaseError{constructor({docsPath:m}){super("Cannot extract event signature from empty topics.",{docsPath:m,name:"AbiEventSignatureEmptyTopicsError"})}}St.AbiEventSignatureEmptyTopicsError=g;class h extends r.BaseError{constructor(m,{docsPath:b}){super([`Encoded event signature "${m}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${m}.`].join(`
`),{docsPath:b,name:"AbiEventSignatureNotFoundError"})}}St.AbiEventSignatureNotFoundError=h;class y extends r.BaseError{constructor(m,{docsPath:b}={}){super([`Event ${m?`"${m}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:b,name:"AbiEventNotFoundError"})}}St.AbiEventNotFoundError=y;class E extends r.BaseError{constructor(m,{docsPath:b}={}){super([`Function ${m?`"${m}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:b,name:"AbiFunctionNotFoundError"})}}St.AbiFunctionNotFoundError=E;class S extends r.BaseError{constructor(m,{docsPath:b}){super([`Function "${m}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:b,name:"AbiFunctionOutputsNotFoundError"})}}St.AbiFunctionOutputsNotFoundError=S;class C extends r.BaseError{constructor(m,{docsPath:b}){super([`Encoded function signature "${m}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${m}.`].join(`
`),{docsPath:b,name:"AbiFunctionSignatureNotFoundError"})}}St.AbiFunctionSignatureNotFoundError=C;class _ extends r.BaseError{constructor(m,b){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${m.type}\` in \`${(0,t.formatAbiItem)(m.abiItem)}\`, and`,`\`${b.type}\` in \`${(0,t.formatAbiItem)(b.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}St.AbiItemAmbiguityError=_;class T extends r.BaseError{constructor({expectedSize:m,givenSize:b}){super(`Expected bytes${m}, got bytes${b}.`,{name:"BytesSizeMismatchError"})}}St.BytesSizeMismatchError=T;class P extends r.BaseError{constructor({abiItem:m,data:b,params:w,size:x}){super([`Data size of ${x} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${(0,t.formatAbiParams)(w,{includeName:!0})})`,`Data:   ${b} (${x} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=m,this.data=b,this.params=w,this.size=x}}St.DecodeLogDataMismatch=P;class D extends r.BaseError{constructor({abiItem:m,param:b}){super([`Expected a topic for indexed event parameter${b.name?` "${b.name}"`:""} on event "${(0,t.formatAbiItem)(m,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=m}}St.DecodeLogTopicsMismatch=D;class F extends r.BaseError{constructor(m,{docsPath:b}){super([`Type "${m}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:b,name:"InvalidAbiEncodingType"})}}St.InvalidAbiEncodingTypeError=F;class I extends r.BaseError{constructor(m,{docsPath:b}){super([`Type "${m}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:b,name:"InvalidAbiDecodingType"})}}St.InvalidAbiDecodingTypeError=I;class U extends r.BaseError{constructor(m){super([`Value "${m}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}St.InvalidArrayError=U;class L extends r.BaseError{constructor(m){super([`"${m}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}St.InvalidDefinitionTypeError=L;class B extends r.BaseError{constructor(m){super(`Type "${m}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}return St.UnsupportedPackedAbiType=B,St}var uw={},p$;function ese(){if(p$)return uw;p$=1,Object.defineProperty(uw,"__esModule",{value:!0}),uw.FilterTypeNotSupportedError=void 0;const t=Kt();class e extends t.BaseError{constructor(n){super(`Filter type "${n}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}return uw.FilterTypeNotSupportedError=e,uw}var Bf={},Dg={},ld={},g$;function wT(){if(g$)return ld;g$=1,Object.defineProperty(ld,"__esModule",{value:!0}),ld.InvalidBytesLengthError=ld.SizeExceedsPaddingSizeError=ld.SliceOffsetOutOfBoundsError=void 0;const t=Kt();class e extends t.BaseError{constructor({offset:i,position:o,size:a}){super(`Slice ${o==="start"?"starting":"ending"} at offset "${i}" is out-of-bounds (size: ${a}).`,{name:"SliceOffsetOutOfBoundsError"})}}ld.SliceOffsetOutOfBoundsError=e;class r extends t.BaseError{constructor({size:i,targetSize:o,type:a}){super(`${a.charAt(0).toUpperCase()}${a.slice(1).toLowerCase()} size (${i}) exceeds padding size (${o}).`,{name:"SizeExceedsPaddingSizeError"})}}ld.SizeExceedsPaddingSizeError=r;class n extends t.BaseError{constructor({size:i,targetSize:o,type:a}){super(`${a.charAt(0).toUpperCase()}${a.slice(1).toLowerCase()} is expected to be ${o} ${a} long, but is ${i} ${a} long.`,{name:"InvalidBytesLengthError"})}}return ld.InvalidBytesLengthError=n,ld}var m$;function qh(){if(m$)return Dg;m$=1,Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.pad=e,Dg.padHex=r,Dg.padBytes=n;const t=wT();function e(s,{dir:i,size:o=32}={}){return typeof s=="string"?r(s,{dir:i,size:o}):n(s,{dir:i,size:o})}function r(s,{dir:i,size:o=32}={}){if(o===null)return s;const a=s.replace("0x","");if(a.length>o*2)throw new t.SizeExceedsPaddingSizeError({size:Math.ceil(a.length/2),targetSize:o,type:"hex"});return`0x${a[i==="right"?"padEnd":"padStart"](o*2,"0")}`}function n(s,{dir:i,size:o=32}={}){if(o===null)return s;if(s.length>o)throw new t.SizeExceedsPaddingSizeError({size:s.length,targetSize:o,type:"bytes"});const a=new Uint8Array(o);for(let c=0;c<o;c++){const u=i==="right";a[u?c:o-c-1]=s[u?c:s.length-c-1]}return a}return Dg}var dd={},Ua={},y$;function Xy(){if(y$)return Ua;y$=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.SizeOverflowError=Ua.InvalidHexValueError=Ua.InvalidHexBooleanError=Ua.InvalidBytesBooleanError=Ua.IntegerOutOfRangeError=void 0;const t=Kt();class e extends t.BaseError{constructor({max:a,min:c,signed:u,size:l,value:d}){super(`Number "${d}" is not in safe ${l?`${l*8}-bit ${u?"signed":"unsigned"} `:""}integer range ${a?`(${c} to ${a})`:`(above ${c})`}`,{name:"IntegerOutOfRangeError"})}}Ua.IntegerOutOfRangeError=e;class r extends t.BaseError{constructor(a){super(`Bytes value "${a}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}Ua.InvalidBytesBooleanError=r;class n extends t.BaseError{constructor(a){super(`Hex value "${a}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}Ua.InvalidHexBooleanError=n;class s extends t.BaseError{constructor(a){super(`Hex value "${a}" is an odd length (${a.length}). It must be an even length.`,{name:"InvalidHexValueError"})}}Ua.InvalidHexValueError=s;class i extends t.BaseError{constructor({givenSize:a,maxSize:c}){super(`Size cannot exceed ${c} bytes. Given size: ${a} bytes.`,{name:"SizeOverflowError"})}}return Ua.SizeOverflowError=i,Ua}var F2={},b$;function af(){if(b$)return F2;b$=1,Object.defineProperty(F2,"__esModule",{value:!0}),F2.trim=t;function t(e,{dir:r="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,s=0;for(let i=0;i<n.length-1&&n[r==="left"?i:n.length-i-1].toString()==="0";i++)s++;return n=r==="left"?n.slice(s):n.slice(0,n.length-s),typeof e=="string"?(n.length===1&&r==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}return F2}var w$;function ys(){if(w$)return dd;w$=1,Object.defineProperty(dd,"__esModule",{value:!0}),dd.assertSize=s,dd.fromHex=i,dd.hexToBigInt=o,dd.hexToBool=a,dd.hexToNumber=c,dd.hexToString=u;const t=Xy(),e=Ca(),r=af(),n=Pn();function s(l,{size:d}){if((0,e.size)(l)>d)throw new t.SizeOverflowError({givenSize:(0,e.size)(l),maxSize:d})}function i(l,d){const f=typeof d=="string"?{to:d}:d,p=f.to;return p==="number"?c(l,f):p==="bigint"?o(l,f):p==="string"?u(l,f):p==="boolean"?a(l,f):(0,n.hexToBytes)(l,f)}function o(l,d={}){const{signed:f}=d;d.size&&s(l,{size:d.size});const p=BigInt(l);if(!f)return p;const g=(l.length-2)/2,h=(1n<<BigInt(g)*8n-1n)-1n;return p<=h?p:p-BigInt(`0x${"f".padStart(g*2,"f")}`)-1n}function a(l,d={}){let f=l;if(d.size&&(s(f,{size:d.size}),f=(0,r.trim)(f)),(0,r.trim)(f)==="0x00")return!1;if((0,r.trim)(f)==="0x01")return!0;throw new t.InvalidHexBooleanError(f)}function c(l,d={}){return Number(o(l,d))}function u(l,d={}){let f=(0,n.hexToBytes)(l);return d.size&&(s(f,{size:d.size}),f=(0,r.trim)(f,{dir:"right"})),new TextDecoder().decode(f)}return dd}var Uf={},v$;function tt(){if(v$)return Uf;v$=1,Object.defineProperty(Uf,"__esModule",{value:!0}),Uf.toHex=s,Uf.boolToHex=i,Uf.bytesToHex=o,Uf.numberToHex=a,Uf.stringToHex=u;const t=Xy(),e=qh(),r=ys(),n=Array.from({length:256},(l,d)=>d.toString(16).padStart(2,"0"));function s(l,d={}){return typeof l=="number"||typeof l=="bigint"?a(l,d):typeof l=="string"?u(l,d):typeof l=="boolean"?i(l,d):o(l,d)}function i(l,d={}){const f=`0x${Number(l)}`;return typeof d.size=="number"?((0,r.assertSize)(f,{size:d.size}),(0,e.pad)(f,{size:d.size})):f}function o(l,d={}){let f="";for(let g=0;g<l.length;g++)f+=n[l[g]];const p=`0x${f}`;return typeof d.size=="number"?((0,r.assertSize)(p,{size:d.size}),(0,e.pad)(p,{dir:"right",size:d.size})):p}function a(l,d={}){const{signed:f,size:p}=d,g=BigInt(l);let h;p?f?h=(1n<<BigInt(p)*8n-1n)-1n:h=2n**(BigInt(p)*8n)-1n:typeof l=="number"&&(h=BigInt(Number.MAX_SAFE_INTEGER));const y=typeof h=="bigint"&&f?-h-1n:0;if(h&&g>h||g<y){const S=typeof l=="bigint"?"n":"";throw new t.IntegerOutOfRangeError({max:h?`${h}${S}`:void 0,min:`${y}${S}`,signed:f,size:p,value:`${l}${S}`})}const E=`0x${(f&&g<0?(1n<<BigInt(p*8))+BigInt(g):g).toString(16)}`;return p?(0,e.pad)(E,{size:p}):E}const c=new TextEncoder;function u(l,d={}){const f=c.encode(l);return o(f,d)}return Uf}var E$;function Pn(){if(E$)return Bf;E$=1,Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.toBytes=o,Bf.boolToBytes=a,Bf.hexToBytes=l,Bf.numberToBytes=d,Bf.stringToBytes=f;const t=Kt(),e=$o(),r=qh(),n=ys(),s=tt(),i=new TextEncoder;function o(p,g={}){return typeof p=="number"||typeof p=="bigint"?d(p,g):typeof p=="boolean"?a(p,g):(0,e.isHex)(p)?l(p,g):f(p,g)}function a(p,g={}){const h=new Uint8Array(1);return h[0]=Number(p),typeof g.size=="number"?((0,n.assertSize)(h,{size:g.size}),(0,r.pad)(h,{size:g.size})):h}const c={zero:48,nine:57,A:65,F:70,a:97,f:102};function u(p){if(p>=c.zero&&p<=c.nine)return p-c.zero;if(p>=c.A&&p<=c.F)return p-(c.A-10);if(p>=c.a&&p<=c.f)return p-(c.a-10)}function l(p,g={}){let h=p;g.size&&((0,n.assertSize)(h,{size:g.size}),h=(0,r.pad)(h,{dir:"right",size:g.size}));let y=h.slice(2);y.length%2&&(y=`0${y}`);const E=y.length/2,S=new Uint8Array(E);for(let C=0,_=0;C<E;C++){const T=u(y.charCodeAt(_++)),P=u(y.charCodeAt(_++));if(T===void 0||P===void 0)throw new t.BaseError(`Invalid byte sequence ("${y[_-2]}${y[_-1]}" in "${y}").`);S[C]=T*16+P}return S}function d(p,g){const h=(0,s.numberToHex)(p,g);return l(h)}function f(p,g={}){const h=i.encode(p);return typeof g.size=="number"?((0,n.assertSize)(h,{size:g.size}),(0,r.pad)(h,{dir:"right",size:g.size})):h}return Bf}var $2={},kn={},zt={},_$;function tse(){if(_$)return zt;_$=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.toBig=zt.shrSL=zt.shrSH=zt.rotrSL=zt.rotrSH=zt.rotrBL=zt.rotrBH=zt.rotr32L=zt.rotr32H=zt.rotlSL=zt.rotlSH=zt.rotlBL=zt.rotlBH=zt.add5L=zt.add5H=zt.add4L=zt.add4H=zt.add3L=zt.add3H=void 0,zt.add=E,zt.fromBig=r,zt.split=n;const t=BigInt(2**32-1),e=BigInt(32);function r(I,U=!1){return U?{h:Number(I&t),l:Number(I>>e&t)}:{h:Number(I>>e&t)|0,l:Number(I&t)|0}}function n(I,U=!1){const L=I.length;let B=new Uint32Array(L),A=new Uint32Array(L);for(let m=0;m<L;m++){const{h:b,l:w}=r(I[m],U);[B[m],A[m]]=[b,w]}return[B,A]}const s=(I,U)=>BigInt(I>>>0)<<e|BigInt(U>>>0);zt.toBig=s;const i=(I,U,L)=>I>>>L;zt.shrSH=i;const o=(I,U,L)=>I<<32-L|U>>>L;zt.shrSL=o;const a=(I,U,L)=>I>>>L|U<<32-L;zt.rotrSH=a;const c=(I,U,L)=>I<<32-L|U>>>L;zt.rotrSL=c;const u=(I,U,L)=>I<<64-L|U>>>L-32;zt.rotrBH=u;const l=(I,U,L)=>I>>>L-32|U<<64-L;zt.rotrBL=l;const d=(I,U)=>U;zt.rotr32H=d;const f=(I,U)=>I;zt.rotr32L=f;const p=(I,U,L)=>I<<L|U>>>32-L;zt.rotlSH=p;const g=(I,U,L)=>U<<L|I>>>32-L;zt.rotlSL=g;const h=(I,U,L)=>U<<L-32|I>>>64-L;zt.rotlBH=h;const y=(I,U,L)=>I<<L-32|U>>>64-L;zt.rotlBL=y;function E(I,U,L,B){const A=(U>>>0)+(B>>>0);return{h:I+L+(A/2**32|0)|0,l:A|0}}const S=(I,U,L)=>(I>>>0)+(U>>>0)+(L>>>0);zt.add3L=S;const C=(I,U,L,B)=>U+L+B+(I/2**32|0)|0;zt.add3H=C;const _=(I,U,L,B)=>(I>>>0)+(U>>>0)+(L>>>0)+(B>>>0);zt.add4L=_;const T=(I,U,L,B,A)=>U+L+B+A+(I/2**32|0)|0;zt.add4H=T;const P=(I,U,L,B,A)=>(I>>>0)+(U>>>0)+(L>>>0)+(B>>>0)+(A>>>0);zt.add5L=P;const D=(I,U,L,B,A,m)=>U+L+B+A+m+(I/2**32|0)|0;zt.add5H=D;const F={fromBig:r,split:n,toBig:s,shrSH:i,shrSL:o,rotrSH:a,rotrSL:c,rotrBH:u,rotrBL:l,rotr32H:d,rotr32L:f,rotlSH:p,rotlSL:g,rotlBH:h,rotlBL:y,add:E,add3L:S,add3H:C,add4L:_,add4H:T,add5H:D,add5L:P};return zt.default=F,zt}var jP={},lw={},A$;function fUe(){return A$||(A$=1,Object.defineProperty(lw,"__esModule",{value:!0}),lw.crypto=void 0,lw.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),lw}var x$;function Hh(){return x$||(x$=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=r,t.anumber=n,t.abytes=s,t.ahash=i,t.aexists=o,t.aoutput=a,t.u8=c,t.u32=u,t.clean=l,t.createView=d,t.rotr=f,t.rotl=p,t.byteSwap=g,t.byteSwap32=h,t.bytesToHex=S,t.hexToBytes=T,t.asyncLoop=D,t.utf8ToBytes=F,t.bytesToUtf8=I,t.toBytes=U,t.kdfInputToBytes=L,t.concatBytes=B,t.checkOpts=A,t.createHasher=b,t.createOptHasher=w,t.createXOFer=x,t.randomBytes=M;const e=fUe();function r(k){return k instanceof Uint8Array||ArrayBuffer.isView(k)&&k.constructor.name==="Uint8Array"}function n(k){if(!Number.isSafeInteger(k)||k<0)throw new Error("positive integer expected, got "+k)}function s(k,...j){if(!r(k))throw new Error("Uint8Array expected");if(j.length>0&&!j.includes(k.length))throw new Error("Uint8Array expected of length "+j+", got length="+k.length)}function i(k){if(typeof k!="function"||typeof k.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");n(k.outputLen),n(k.blockLen)}function o(k,j=!0){if(k.destroyed)throw new Error("Hash instance has been destroyed");if(j&&k.finished)throw new Error("Hash#digest() has already been called")}function a(k,j){s(k);const N=j.outputLen;if(k.length<N)throw new Error("digestInto() expects output buffer of length at least "+N)}function c(k){return new Uint8Array(k.buffer,k.byteOffset,k.byteLength)}function u(k){return new Uint32Array(k.buffer,k.byteOffset,Math.floor(k.byteLength/4))}function l(...k){for(let j=0;j<k.length;j++)k[j].fill(0)}function d(k){return new DataView(k.buffer,k.byteOffset,k.byteLength)}function f(k,j){return k<<32-j|k>>>j}function p(k,j){return k<<j|k>>>32-j>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function g(k){return k<<24&4278190080|k<<8&16711680|k>>>8&65280|k>>>24&255}t.swap8IfBE=t.isLE?k=>k:k=>g(k),t.byteSwapIfBE=t.swap8IfBE;function h(k){for(let j=0;j<k.length;j++)k[j]=g(k[j]);return k}t.swap32IfBE=t.isLE?k=>k:h;const y=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",E=Array.from({length:256},(k,j)=>j.toString(16).padStart(2,"0"));function S(k){if(s(k),y)return k.toHex();let j="";for(let N=0;N<k.length;N++)j+=E[k[N]];return j}const C={_0:48,_9:57,A:65,F:70,a:97,f:102};function _(k){if(k>=C._0&&k<=C._9)return k-C._0;if(k>=C.A&&k<=C.F)return k-(C.A-10);if(k>=C.a&&k<=C.f)return k-(C.a-10)}function T(k){if(typeof k!="string")throw new Error("hex string expected, got "+typeof k);if(y)return Uint8Array.fromHex(k);const j=k.length,N=j/2;if(j%2)throw new Error("hex string expected, got unpadded hex of length "+j);const v=new Uint8Array(N);for(let R=0,$=0;R<N;R++,$+=2){const O=_(k.charCodeAt($)),H=_(k.charCodeAt($+1));if(O===void 0||H===void 0){const W=k[$]+k[$+1];throw new Error('hex string expected, got non-hex character "'+W+'" at index '+$)}v[R]=O*16+H}return v}const P=async()=>{};t.nextTick=P;async function D(k,j,N){let v=Date.now();for(let R=0;R<k;R++){N(R);const $=Date.now()-v;$>=0&&$<j||(await(0,t.nextTick)(),v+=$)}}function F(k){if(typeof k!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(k))}function I(k){return new TextDecoder().decode(k)}function U(k){return typeof k=="string"&&(k=F(k)),s(k),k}function L(k){return typeof k=="string"&&(k=F(k)),s(k),k}function B(...k){let j=0;for(let v=0;v<k.length;v++){const R=k[v];s(R),j+=R.length}const N=new Uint8Array(j);for(let v=0,R=0;v<k.length;v++){const $=k[v];N.set($,R),R+=$.length}return N}function A(k,j){if(j!==void 0&&{}.toString.call(j)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(k,j)}class m{}t.Hash=m;function b(k){const j=v=>k().update(U(v)).digest(),N=k();return j.outputLen=N.outputLen,j.blockLen=N.blockLen,j.create=()=>k(),j}function w(k){const j=(v,R)=>k(R).update(U(v)).digest(),N=k({});return j.outputLen=N.outputLen,j.blockLen=N.blockLen,j.create=v=>k(v),j}function x(k){const j=(v,R)=>k(R).update(U(v)).digest(),N=k({});return j.outputLen=N.outputLen,j.blockLen=N.blockLen,j.create=v=>k(v),j}t.wrapConstructor=b,t.wrapConstructorWithOpts=w,t.wrapXOFConstructorWithOpts=x;function M(k=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(k));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(k));throw new Error("crypto.getRandomValues must be defined")}})(jP)),jP}var C$;function rse(){if(C$)return kn;C$=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.shake256=kn.shake128=kn.keccak_512=kn.keccak_384=kn.keccak_256=kn.keccak_224=kn.sha3_512=kn.sha3_384=kn.sha3_256=kn.sha3_224=kn.Keccak=void 0,kn.keccakP=y;const t=tse(),e=Hh(),r=BigInt(0),n=BigInt(1),s=BigInt(2),i=BigInt(7),o=BigInt(256),a=BigInt(113),c=[],u=[],l=[];for(let _=0,T=n,P=1,D=0;_<24;_++){[P,D]=[D,(2*P+3*D)%5],c.push(2*(5*D+P)),u.push((_+1)*(_+2)/2%64);let F=r;for(let I=0;I<7;I++)T=(T<<n^(T>>i)*a)%o,T&s&&(F^=n<<(n<<BigInt(I))-n);l.push(F)}const d=(0,t.split)(l,!0),f=d[0],p=d[1],g=(_,T,P)=>P>32?(0,t.rotlBH)(_,T,P):(0,t.rotlSH)(_,T,P),h=(_,T,P)=>P>32?(0,t.rotlBL)(_,T,P):(0,t.rotlSL)(_,T,P);function y(_,T=24){const P=new Uint32Array(10);for(let D=24-T;D<24;D++){for(let U=0;U<10;U++)P[U]=_[U]^_[U+10]^_[U+20]^_[U+30]^_[U+40];for(let U=0;U<10;U+=2){const L=(U+8)%10,B=(U+2)%10,A=P[B],m=P[B+1],b=g(A,m,1)^P[L],w=h(A,m,1)^P[L+1];for(let x=0;x<50;x+=10)_[U+x]^=b,_[U+x+1]^=w}let F=_[2],I=_[3];for(let U=0;U<24;U++){const L=u[U],B=g(F,I,L),A=h(F,I,L),m=c[U];F=_[m],I=_[m+1],_[m]=B,_[m+1]=A}for(let U=0;U<50;U+=10){for(let L=0;L<10;L++)P[L]=_[U+L];for(let L=0;L<10;L++)_[U+L]^=~P[(L+2)%10]&P[(L+4)%10]}_[0]^=f[D],_[1]^=p[D]}(0,e.clean)(P)}class E extends e.Hash{constructor(T,P,D,F=!1,I=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=T,this.suffix=P,this.outputLen=D,this.enableXOF=F,this.rounds=I,(0,e.anumber)(D),!(0<T&&T<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,e.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,e.swap32IfBE)(this.state32),y(this.state32,this.rounds),(0,e.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(T){(0,e.aexists)(this),T=(0,e.toBytes)(T),(0,e.abytes)(T);const{blockLen:P,state:D}=this,F=T.length;for(let I=0;I<F;){const U=Math.min(P-this.pos,F-I);for(let L=0;L<U;L++)D[this.pos++]^=T[I++];this.pos===P&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:T,suffix:P,pos:D,blockLen:F}=this;T[D]^=P,(P&128)!==0&&D===F-1&&this.keccak(),T[F-1]^=128,this.keccak()}writeInto(T){(0,e.aexists)(this,!1),(0,e.abytes)(T),this.finish();const P=this.state,{blockLen:D}=this;for(let F=0,I=T.length;F<I;){this.posOut>=D&&this.keccak();const U=Math.min(D-this.posOut,I-F);T.set(P.subarray(this.posOut,this.posOut+U),F),this.posOut+=U,F+=U}return T}xofInto(T){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(T)}xof(T){return(0,e.anumber)(T),this.xofInto(new Uint8Array(T))}digestInto(T){if((0,e.aoutput)(T,this),this.finished)throw new Error("digest() was already called");return this.writeInto(T),this.destroy(),T}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,e.clean)(this.state)}_cloneInto(T){const{blockLen:P,suffix:D,outputLen:F,rounds:I,enableXOF:U}=this;return T||(T=new E(P,D,F,U,I)),T.state32.set(this.state32),T.pos=this.pos,T.posOut=this.posOut,T.finished=this.finished,T.rounds=I,T.suffix=D,T.outputLen=F,T.enableXOF=U,T.destroyed=this.destroyed,T}}kn.Keccak=E;const S=(_,T,P)=>(0,e.createHasher)(()=>new E(T,_,P));kn.sha3_224=S(6,144,224/8),kn.sha3_256=S(6,136,256/8),kn.sha3_384=S(6,104,384/8),kn.sha3_512=S(6,72,512/8),kn.keccak_224=S(1,144,224/8),kn.keccak_256=S(1,136,256/8),kn.keccak_384=S(1,104,384/8),kn.keccak_512=S(1,72,512/8);const C=(_,T,P)=>(0,e.createXOFer)((D={})=>new E(T,_,D.dkLen===void 0?P:D.dkLen,!0));return kn.shake128=C(31,168,128/8),kn.shake256=C(31,136,256/8),kn}var S$;function Sa(){if(S$)return $2;S$=1,Object.defineProperty($2,"__esModule",{value:!0}),$2.keccak256=s;const t=rse(),e=$o(),r=Pn(),n=tt();function s(i,o){const a=o||"hex",c=(0,t.keccak_256)((0,e.isHex)(i,{strict:!1})?(0,r.toBytes)(i):i);return a==="bytes"?c:(0,n.toHex)(c)}return $2}var dw={},q2={},H2={},I$;function hUe(){if(I$)return H2;I$=1,Object.defineProperty(H2,"__esModule",{value:!0}),H2.hashSignature=n;const t=Pn(),e=Sa(),r=s=>(0,e.keccak256)((0,t.toBytes)(s));function n(s){return r(s)}return H2}var fw={},z2={},T$;function pUe(){if(T$)return z2;T$=1,Object.defineProperty(z2,"__esModule",{value:!0}),z2.normalizeSignature=e;const t=Kt();function e(r){let n=!0,s="",i=0,o="",a=!1;for(let c=0;c<r.length;c++){const u=r[c];if(["(",")",","].includes(u)&&(n=!0),u==="("&&i++,u===")"&&i--,!!n){if(i===0){if(u===" "&&["event","function",""].includes(o))o="";else if(o+=u,u===")"){a=!0;break}continue}if(u===" "){r[c-1]!==","&&s!==","&&s!==",("&&(s="",n=!1);continue}o+=u,s+=u}}if(!a)throw new t.BaseError("Unable to normalize signature.");return o}return z2}var N$;function fB(){if(N$)return fw;N$=1,Object.defineProperty(fw,"__esModule",{value:!0}),fw.toSignature=void 0;const t=$h(),e=pUe(),r=n=>{const s=typeof n=="string"?n:(0,t.formatAbiItem)(n);return(0,e.normalizeSignature)(s)};return fw.toSignature=r,fw}var P$;function vT(){if(P$)return q2;P$=1,Object.defineProperty(q2,"__esModule",{value:!0}),q2.toSignatureHash=r;const t=hUe(),e=fB();function r(n){return(0,t.hashSignature)((0,e.toSignature)(n))}return q2}var R$;function Qy(){if(R$)return dw;R$=1,Object.defineProperty(dw,"__esModule",{value:!0}),dw.toEventSelector=void 0;const t=vT();return dw.toEventSelector=t.toSignatureHash,dw}var hw={},pw={},O$;function $u(){if(O$)return pw;O$=1,Object.defineProperty(pw,"__esModule",{value:!0}),pw.InvalidAddressError=void 0;const t=Kt();class e extends t.BaseError{constructor({address:n}){super(`Address "${n}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}return pw.InvalidAddressError=e,pw}var LP={},gw={},k$;function tg(){if(k$)return gw;k$=1,Object.defineProperty(gw,"__esModule",{value:!0}),gw.LruMap=void 0;class t extends Map{constructor(r){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=r}get(r){const n=super.get(r);return super.has(r)&&n!==void 0&&(this.delete(r),super.set(r,n)),n}set(r,n){if(super.set(r,n),this.maxSize&&this.size>this.maxSize){const s=this.keys().next().value;s&&this.delete(s)}return this}}return gw.LruMap=t,gw}var mw={},B$;function lc(){if(B$)return mw;B$=1,Object.defineProperty(mw,"__esModule",{value:!0}),mw.checksumAddress=o,mw.getAddress=a;const t=$u(),e=Pn(),r=Sa(),n=tg(),s=Ia(),i=new n.LruMap(8192);function o(c,u){if(i.has(`${c}.${u}`))return i.get(`${c}.${u}`);const l=u?`${u}${c.toLowerCase()}`:c.substring(2).toLowerCase(),d=(0,r.keccak256)((0,e.stringToBytes)(l),"bytes"),f=(u?l.substring(`${u}0x`.length):l).split("");for(let g=0;g<40;g+=2)d[g>>1]>>4>=8&&f[g]&&(f[g]=f[g].toUpperCase()),(d[g>>1]&15)>=8&&f[g+1]&&(f[g+1]=f[g+1].toUpperCase());const p=`0x${f.join("")}`;return i.set(`${c}.${u}`,p),p}function a(c,u){if(!(0,s.isAddress)(c,{strict:!1}))throw new t.InvalidAddressError({address:c});return o(c,u)}return mw}var U$;function Ia(){return U$||(U$=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isAddressCache=void 0,t.isAddress=s;const e=tg(),r=lc(),n=/^0x[a-fA-F0-9]{40}$/;t.isAddressCache=new e.LruMap(8192);function s(i,o){const{strict:a=!0}=o??{},c=`${i}.${a}`;if(t.isAddressCache.has(c))return t.isAddressCache.get(c);const u=n.test(i)?i.toLowerCase()===i?!0:a?(0,r.checksumAddress)(i)===i:!0:!1;return t.isAddressCache.set(c,u),u}})(LP)),LP}var jg={},M$;function fi(){if(M$)return jg;M$=1,Object.defineProperty(jg,"__esModule",{value:!0}),jg.concat=t,jg.concatBytes=e,jg.concatHex=r;function t(n){return typeof n[0]=="string"?r(n):e(n)}function e(n){let s=0;for(const a of n)s+=a.length;const i=new Uint8Array(s);let o=0;for(const a of n)i.set(a,o),o+=a.length;return i}function r(n){return`0x${n.reduce((s,i)=>s+i.replace("0x",""),"")}`}return jg}var Lg={},D$;function Gc(){if(D$)return Lg;D$=1,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.slice=n,Lg.sliceBytes=o,Lg.sliceHex=a;const t=wT(),e=$o(),r=Ca();function n(c,u,l,{strict:d}={}){return(0,e.isHex)(c,{strict:!1})?a(c,u,l,{strict:d}):o(c,u,l,{strict:d})}function s(c,u){if(typeof u=="number"&&u>0&&u>(0,r.size)(c)-1)throw new t.SliceOffsetOutOfBoundsError({offset:u,position:"start",size:(0,r.size)(c)})}function i(c,u,l){if(typeof u=="number"&&typeof l=="number"&&(0,r.size)(c)!==l-u)throw new t.SliceOffsetOutOfBoundsError({offset:l,position:"end",size:(0,r.size)(c)})}function o(c,u,l,{strict:d}={}){s(c,u);const f=c.slice(u,l);return d&&i(f,u,l),f}function a(c,u,l,{strict:d}={}){s(c,u);const f=`0x${c.replace("0x","").slice((u??0)*2,(l??c.length)*2)}`;return d&&i(f,u,l),f}return Lg}var fd={},j$;function ET(){return j$||(j$=1,Object.defineProperty(fd,"__esModule",{value:!0}),fd.integerRegex=fd.bytesRegex=fd.arrayRegex=void 0,fd.arrayRegex=/^(.*)\[([0-9]*)\]$/,fd.bytesRegex=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,fd.integerRegex=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/),fd}var L$;function qu(){if(L$)return hw;L$=1,Object.defineProperty(hw,"__esModule",{value:!0}),hw.encodeAbiParameters=d,hw.getArrayComponents=P;const t=Jn(),e=$u(),r=Kt(),n=Xy(),s=Ia(),i=fi(),o=qh(),a=Ca(),c=Gc(),u=tt(),l=ET();function d(D,F){if(D.length!==F.length)throw new t.AbiEncodingLengthMismatchError({expectedLength:D.length,givenLength:F.length});const I=f({params:D,values:F}),U=g(I);return U.length===0?"0x":U}function f({params:D,values:F}){const I=[];for(let U=0;U<D.length;U++)I.push(p({param:D[U],value:F[U]}));return I}function p({param:D,value:F}){const I=P(D.type);if(I){const[U,L]=I;return y(F,{length:U,param:{...D,type:L}})}if(D.type==="tuple")return T(F,{param:D});if(D.type==="address")return h(F);if(D.type==="bool")return S(F);if(D.type.startsWith("uint")||D.type.startsWith("int")){const U=D.type.startsWith("int"),[,,L="256"]=l.integerRegex.exec(D.type)??[];return C(F,{signed:U,size:Number(L)})}if(D.type.startsWith("bytes"))return E(F,{param:D});if(D.type==="string")return _(F);throw new t.InvalidAbiEncodingTypeError(D.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function g(D){let F=0;for(let B=0;B<D.length;B++){const{dynamic:A,encoded:m}=D[B];A?F+=32:F+=(0,a.size)(m)}const I=[],U=[];let L=0;for(let B=0;B<D.length;B++){const{dynamic:A,encoded:m}=D[B];A?(I.push((0,u.numberToHex)(F+L,{size:32})),U.push(m),L+=(0,a.size)(m)):I.push(m)}return(0,i.concat)([...I,...U])}function h(D){if(!(0,s.isAddress)(D))throw new e.InvalidAddressError({address:D});return{dynamic:!1,encoded:(0,o.padHex)(D.toLowerCase())}}function y(D,{length:F,param:I}){const U=F===null;if(!Array.isArray(D))throw new t.InvalidArrayError(D);if(!U&&D.length!==F)throw new t.AbiEncodingArrayLengthMismatchError({expectedLength:F,givenLength:D.length,type:`${I.type}[${F}]`});let L=!1;const B=[];for(let A=0;A<D.length;A++){const m=p({param:I,value:D[A]});m.dynamic&&(L=!0),B.push(m)}if(U||L){const A=g(B);if(U){const m=(0,u.numberToHex)(B.length,{size:32});return{dynamic:!0,encoded:B.length>0?(0,i.concat)([m,A]):m}}if(L)return{dynamic:!0,encoded:A}}return{dynamic:!1,encoded:(0,i.concat)(B.map(({encoded:A})=>A))}}function E(D,{param:F}){const[,I]=F.type.split("bytes"),U=(0,a.size)(D);if(!I){let L=D;return U%32!==0&&(L=(0,o.padHex)(L,{dir:"right",size:Math.ceil((D.length-2)/2/32)*32})),{dynamic:!0,encoded:(0,i.concat)([(0,o.padHex)((0,u.numberToHex)(U,{size:32})),L])}}if(U!==Number.parseInt(I,10))throw new t.AbiEncodingBytesSizeMismatchError({expectedSize:Number.parseInt(I,10),value:D});return{dynamic:!1,encoded:(0,o.padHex)(D,{dir:"right"})}}function S(D){if(typeof D!="boolean")throw new r.BaseError(`Invalid boolean value: "${D}" (type: ${typeof D}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:(0,o.padHex)((0,u.boolToHex)(D))}}function C(D,{signed:F,size:I=256}){if(typeof I=="number"){const U=2n**(BigInt(I)-(F?1n:0n))-1n,L=F?-U-1n:0n;if(D>U||D<L)throw new n.IntegerOutOfRangeError({max:U.toString(),min:L.toString(),signed:F,size:I/8,value:D.toString()})}return{dynamic:!1,encoded:(0,u.numberToHex)(D,{size:32,signed:F})}}function _(D){const F=(0,u.stringToHex)(D),I=Math.ceil((0,a.size)(F)/32),U=[];for(let L=0;L<I;L++)U.push((0,o.padHex)((0,c.slice)(F,L*32,(L+1)*32),{dir:"right"}));return{dynamic:!0,encoded:(0,i.concat)([(0,o.padHex)((0,u.numberToHex)((0,a.size)(F),{size:32})),...U])}}function T(D,{param:F}){let I=!1;const U=[];for(let L=0;L<F.components.length;L++){const B=F.components[L],A=Array.isArray(D)?L:B.name,m=p({param:B,value:D[A]});U.push(m),m.dynamic&&(I=!0)}return{dynamic:I,encoded:I?g(U):(0,i.concat)(U.map(({encoded:L})=>L))}}function P(D){const F=D.match(/^(.*)\[(\d+)?\]$/);return F?[F[2]?Number(F[2]):null,F[1]]:void 0}return hw}var Fg={},yw={},F$;function rg(){if(F$)return yw;F$=1,Object.defineProperty(yw,"__esModule",{value:!0}),yw.toFunctionSelector=void 0;const t=Gc(),e=vT(),r=n=>(0,t.slice)((0,e.toSignatureHash)(n),0,4);return yw.toFunctionSelector=r,yw}var $$;function cf(){if($$)return Fg;$$=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.getAbiItem=i,Fg.isArgOfType=o,Fg.getAmbiguousTypes=a;const t=Jn(),e=$o(),r=Ia(),n=Qy(),s=rg();function i(c){const{abi:u,args:l=[],name:d}=c,f=(0,e.isHex)(d,{strict:!1}),p=u.filter(h=>f?h.type==="function"?(0,s.toFunctionSelector)(h)===d:h.type==="event"?(0,n.toEventSelector)(h)===d:!1:"name"in h&&h.name===d);if(p.length===0)return;if(p.length===1)return p[0];let g;for(const h of p){if(!("inputs"in h))continue;if(!l||l.length===0){if(!h.inputs||h.inputs.length===0)return h;continue}if(!h.inputs||h.inputs.length===0||h.inputs.length!==l.length)continue;if(l.every((E,S)=>{const C="inputs"in h&&h.inputs[S];return C?o(E,C):!1})){if(g&&"inputs"in g&&g.inputs){const E=a(h.inputs,g.inputs,l);if(E)throw new t.AbiItemAmbiguityError({abiItem:h,type:E[0]},{abiItem:g,type:E[1]})}g=h}}return g||p[0]}function o(c,u){const l=typeof c,d=u.type;switch(d){case"address":return(0,r.isAddress)(c,{strict:!1});case"bool":return l==="boolean";case"function":return l==="string";case"string":return l==="string";default:return d==="tuple"&&"components"in u?Object.values(u.components).every((f,p)=>o(Object.values(c)[p],f)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(d)?l==="number"||l==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(d)?l==="string"||c instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(d)?Array.isArray(c)&&c.every(f=>o(f,{...u,type:d.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function a(c,u,l){for(const d in c){const f=c[d],p=u[d];if(f.type==="tuple"&&p.type==="tuple"&&"components"in f&&"components"in p)return a(f.components,p.components,l[d]);const g=[f.type,p.type];if(g.includes("address")&&g.includes("bytes20")?!0:g.includes("address")&&g.includes("string")?(0,r.isAddress)(l[d],{strict:!1}):g.includes("address")&&g.includes("bytes")?(0,r.isAddress)(l[d],{strict:!1}):!1)return g}}return Fg}var q$;function ng(){if(q$)return D2;q$=1,Object.defineProperty(D2,"__esModule",{value:!0}),D2.encodeEventTopics=u;const t=Jn(),e=ese(),r=Pn(),n=Sa(),s=Qy(),i=qu(),o=of(),a=cf(),c="/docs/contract/encodeEventTopics";function u(d){const{abi:f,eventName:p,args:g}=d;let h=f[0];if(p){const C=(0,a.getAbiItem)({abi:f,name:p});if(!C)throw new t.AbiEventNotFoundError(p,{docsPath:c});h=C}if(h.type!=="event")throw new t.AbiEventNotFoundError(void 0,{docsPath:c});const y=(0,o.formatAbiItem)(h),E=(0,s.toEventSelector)(y);let S=[];if(g&&"inputs"in h){const C=h.inputs?.filter(T=>"indexed"in T&&T.indexed),_=Array.isArray(g)?g:Object.values(g).length>0?C?.map(T=>g[T.name])??[]:[];_.length>0&&(S=C?.map((T,P)=>Array.isArray(_[P])?_[P].map((D,F)=>l({param:T,value:_[P][F]})):typeof _[P]<"u"&&_[P]!==null?l({param:T,value:_[P]}):null)??[])}return[E,...S]}function l({param:d,value:f}){if(d.type==="string"||d.type==="bytes")return(0,n.keccak256)((0,r.toBytes)(f));if(d.type==="tuple"||d.type.match(/^(.*)\[(\d+)?\]$/))throw new e.FilterTypeNotSupportedError(d.type);return(0,i.encodeAbiParameters)([d],[f])}return D2}var W2={},H$;function _T(){if(H$)return W2;H$=1,Object.defineProperty(W2,"__esModule",{value:!0}),W2.createFilterRequestScope=t;function t(e,{method:r}){const n={};return e.transport.type==="fallback"&&e.transport.onResponse?.(({method:s,response:i,status:o,transport:a})=>{o==="success"&&r===s&&(n[i]=a.request)}),(s=>n[s]||e.request)}return W2}var z$;function hB(){if(z$)return M2;z$=1,Object.defineProperty(M2,"__esModule",{value:!0}),M2.createContractEventFilter=n;const t=ng(),e=tt(),r=_T();async function n(s,i){const{address:o,abi:a,args:c,eventName:u,fromBlock:l,strict:d,toBlock:f}=i,p=(0,r.createFilterRequestScope)(s,{method:"eth_newFilter"}),g=u?(0,t.encodeEventTopics)({abi:a,args:c,eventName:u}):void 0,h=await s.request({method:"eth_newFilter",params:[{address:o,fromBlock:typeof l=="bigint"?(0,e.numberToHex)(l):l,toBlock:typeof f=="bigint"?(0,e.numberToHex)(f):f,topics:g}]});return{abi:a,args:c,eventName:u,id:h,request:p(h),strict:!!d,type:"event"}}return M2}var V2={},G2={},W$;function is(){if(W$)return G2;W$=1,Object.defineProperty(G2,"__esModule",{value:!0}),G2.parseAccount=t;function t(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}return G2}var K2={},Z2={},V$;function nse(){if(V$)return Z2;V$=1,Object.defineProperty(Z2,"__esModule",{value:!0}),Z2.prepareEncodeFunctionData=i;const t=Jn(),e=rg(),r=of(),n=cf(),s="/docs/contract/encodeFunctionData";function i(o){const{abi:a,args:c,functionName:u}=o;let l=a[0];if(u){const d=(0,n.getAbiItem)({abi:a,args:c,name:u});if(!d)throw new t.AbiFunctionNotFoundError(u,{docsPath:s});l=d}if(l.type!=="function")throw new t.AbiFunctionNotFoundError(void 0,{docsPath:s});return{abi:[l],functionName:(0,e.toFunctionSelector)((0,r.formatAbiItem)(l))}}return Z2}var G$;function Ta(){if(G$)return K2;G$=1,Object.defineProperty(K2,"__esModule",{value:!0}),K2.encodeFunctionData=n;const t=fi(),e=qu(),r=nse();function n(s){const{args:i}=s,{abi:o,functionName:a}=s.abi.length===1&&s.functionName?.startsWith("0x")?s:(0,r.prepareEncodeFunctionData)(s),c=o[0],u=a,l="inputs"in c&&c.inputs?(0,e.encodeAbiParameters)(c.inputs,i??[]):void 0;return(0,t.concatHex)([u,l??"0x"])}return K2}var Y2={},Ao={},hd={},K$;function pB(){return K$||(K$=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.solidityPanic=hd.solidityError=hd.panicReasons=void 0,hd.panicReasons={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},hd.solidityError={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},hd.solidityPanic={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}),hd}var J2={},X2={},Q2={},pd={},Z$;function sse(){if(Z$)return pd;Z$=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.RecursiveReadLimitExceededError=pd.PositionOutOfBoundsError=pd.NegativeOffsetError=void 0;const t=Kt();class e extends t.BaseError{constructor({offset:i}){super(`Offset \`${i}\` cannot be negative.`,{name:"NegativeOffsetError"})}}pd.NegativeOffsetError=e;class r extends t.BaseError{constructor({length:i,position:o}){super(`Position \`${o}\` is out of bounds (\`0 < position < ${i}\`).`,{name:"PositionOutOfBoundsError"})}}pd.PositionOutOfBoundsError=r;class n extends t.BaseError{constructor({count:i,limit:o}){super(`Recursive read limit of \`${o}\` exceeded (recursive read count: \`${i}\`).`,{name:"RecursiveReadLimitExceededError"})}}return pd.RecursiveReadLimitExceededError=n,pd}var Y$;function XE(){if(Y$)return Q2;Y$=1,Object.defineProperty(Q2,"__esModule",{value:!0}),Q2.createCursor=r;const t=sse(),e={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new t.RecursiveReadLimitExceededError({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(n){if(n<0||n>this.bytes.length-1)throw new t.PositionOutOfBoundsError({length:this.bytes.length,position:n})},decrementPosition(n){if(n<0)throw new t.NegativeOffsetError({offset:n});const s=this.position-n;this.assertPosition(s),this.position=s},getReadCount(n){return this.positionReadCount.get(n||this.position)||0},incrementPosition(n){if(n<0)throw new t.NegativeOffsetError({offset:n});const s=this.position+n;this.assertPosition(s),this.position=s},inspectByte(n){const s=n??this.position;return this.assertPosition(s),this.bytes[s]},inspectBytes(n,s){const i=s??this.position;return this.assertPosition(i+n-1),this.bytes.subarray(i,i+n)},inspectUint8(n){const s=n??this.position;return this.assertPosition(s),this.bytes[s]},inspectUint16(n){const s=n??this.position;return this.assertPosition(s+1),this.dataView.getUint16(s)},inspectUint24(n){const s=n??this.position;return this.assertPosition(s+2),(this.dataView.getUint16(s)<<8)+this.dataView.getUint8(s+2)},inspectUint32(n){const s=n??this.position;return this.assertPosition(s+3),this.dataView.getUint32(s)},pushByte(n){this.assertPosition(this.position),this.bytes[this.position]=n,this.position++},pushBytes(n){this.assertPosition(this.position+n.length-1),this.bytes.set(n,this.position),this.position+=n.length},pushUint8(n){this.assertPosition(this.position),this.bytes[this.position]=n,this.position++},pushUint16(n){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,n),this.position+=2},pushUint24(n){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,n>>8),this.dataView.setUint8(this.position+2,n&255),this.position+=3},pushUint32(n){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,n),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const n=this.inspectByte();return this.position++,n},readBytes(n,s){this.assertReadLimit(),this._touch();const i=this.inspectBytes(n);return this.position+=s??n,i},readUint8(){this.assertReadLimit(),this._touch();const n=this.inspectUint8();return this.position+=1,n},readUint16(){this.assertReadLimit(),this._touch();const n=this.inspectUint16();return this.position+=2,n},readUint24(){this.assertReadLimit(),this._touch();const n=this.inspectUint24();return this.position+=3,n},readUint32(){this.assertReadLimit(),this._touch();const n=this.inspectUint32();return this.position+=4,n},get remaining(){return this.bytes.length-this.position},setPosition(n){const s=this.position;return this.assertPosition(n),this.position=n,()=>this.position=s},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const n=this.getReadCount();this.positionReadCount.set(this.position,n+1),n>0&&this.recursiveReadCount++}};function r(n,{recursiveReadLimit:s=8192}={}){const i=Object.create(e);return i.bytes=n,i.dataView=new DataView(n.buffer,n.byteOffset,n.byteLength),i.positionReadCount=new Map,i.recursiveReadLimit=s,i}return Q2}var Mf={},J$;function gB(){if(J$)return Mf;J$=1,Object.defineProperty(Mf,"__esModule",{value:!0}),Mf.fromBytes=s,Mf.bytesToBigInt=i,Mf.bytesToBool=o,Mf.bytesToNumber=a,Mf.bytesToString=c;const t=Xy(),e=af(),r=ys(),n=tt();function s(u,l){const d=typeof l=="string"?{to:l}:l,f=d.to;return f==="number"?a(u,d):f==="bigint"?i(u,d):f==="boolean"?o(u,d):f==="string"?c(u,d):(0,n.bytesToHex)(u,d)}function i(u,l={}){typeof l.size<"u"&&(0,r.assertSize)(u,{size:l.size});const d=(0,n.bytesToHex)(u,l);return(0,r.hexToBigInt)(d,l)}function o(u,l={}){let d=u;if(typeof l.size<"u"&&((0,r.assertSize)(d,{size:l.size}),d=(0,e.trim)(d)),d.length>1||d[0]>1)throw new t.InvalidBytesBooleanError(d);return!!d[0]}function a(u,l={}){typeof l.size<"u"&&(0,r.assertSize)(u,{size:l.size});const d=(0,n.bytesToHex)(u,l);return(0,r.hexToNumber)(d,l)}function c(u,l={}){let d=u;return typeof l.size<"u"&&((0,r.assertSize)(d,{size:l.size}),d=(0,e.trim)(d,{dir:"right"})),new TextDecoder().decode(d)}return Mf}var X$;function zh(){if(X$)return X2;X$=1,Object.defineProperty(X2,"__esModule",{value:!0}),X2.decodeAbiParameters=l;const t=Jn(),e=lc(),r=XE(),n=Ca(),s=Gc(),i=af(),o=gB(),a=Pn(),c=tt(),u=qu();function l(P,D){const F=typeof D=="string"?(0,a.hexToBytes)(D):D,I=(0,r.createCursor)(F);if((0,n.size)(F)===0&&P.length>0)throw new t.AbiDecodingZeroDataError;if((0,n.size)(D)&&(0,n.size)(D)<32)throw new t.AbiDecodingDataSizeTooSmallError({data:typeof D=="string"?D:(0,c.bytesToHex)(D),params:P,size:(0,n.size)(D)});let U=0;const L=[];for(let B=0;B<P.length;++B){const A=P[B];I.setPosition(U);const[m,b]=d(I,A,{staticPosition:0});U+=b,L.push(m)}return L}function d(P,D,{staticPosition:F}){const I=(0,u.getArrayComponents)(D.type);if(I){const[U,L]=I;return h(P,{...D,type:L},{length:U,staticPosition:F})}if(D.type==="tuple")return C(P,D,{staticPosition:F});if(D.type==="address")return g(P);if(D.type==="bool")return y(P);if(D.type.startsWith("bytes"))return E(P,D,{staticPosition:F});if(D.type.startsWith("uint")||D.type.startsWith("int"))return S(P,D);if(D.type==="string")return _(P,{staticPosition:F});throw new t.InvalidAbiDecodingTypeError(D.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const f=32,p=32;function g(P){const D=P.readBytes(32);return[(0,e.checksumAddress)((0,c.bytesToHex)((0,s.sliceBytes)(D,-20))),32]}function h(P,D,{length:F,staticPosition:I}){if(!F){const B=(0,o.bytesToNumber)(P.readBytes(p)),A=I+B,m=A+f;P.setPosition(A);const b=(0,o.bytesToNumber)(P.readBytes(f)),w=T(D);let x=0;const M=[];for(let k=0;k<b;++k){P.setPosition(m+(w?k*32:x));const[j,N]=d(P,D,{staticPosition:m});x+=N,M.push(j)}return P.setPosition(I+32),[M,32]}if(T(D)){const B=(0,o.bytesToNumber)(P.readBytes(p)),A=I+B,m=[];for(let b=0;b<F;++b){P.setPosition(A+b*32);const[w]=d(P,D,{staticPosition:A});m.push(w)}return P.setPosition(I+32),[m,32]}let U=0;const L=[];for(let B=0;B<F;++B){const[A,m]=d(P,D,{staticPosition:I+U});U+=m,L.push(A)}return[L,U]}function y(P){return[(0,o.bytesToBool)(P.readBytes(32),{size:32}),32]}function E(P,D,{staticPosition:F}){const[I,U]=D.type.split("bytes");if(!U){const B=(0,o.bytesToNumber)(P.readBytes(32));P.setPosition(F+B);const A=(0,o.bytesToNumber)(P.readBytes(32));if(A===0)return P.setPosition(F+32),["0x",32];const m=P.readBytes(A);return P.setPosition(F+32),[(0,c.bytesToHex)(m),32]}return[(0,c.bytesToHex)(P.readBytes(Number.parseInt(U,10),32)),32]}function S(P,D){const F=D.type.startsWith("int"),I=Number.parseInt(D.type.split("int")[1]||"256",10),U=P.readBytes(32);return[I>48?(0,o.bytesToBigInt)(U,{signed:F}):(0,o.bytesToNumber)(U,{signed:F}),32]}function C(P,D,{staticPosition:F}){const I=D.components.length===0||D.components.some(({name:B})=>!B),U=I?[]:{};let L=0;if(T(D)){const B=(0,o.bytesToNumber)(P.readBytes(p)),A=F+B;for(let m=0;m<D.components.length;++m){const b=D.components[m];P.setPosition(A+L);const[w,x]=d(P,b,{staticPosition:A});L+=x,U[I?m:b?.name]=w}return P.setPosition(F+32),[U,32]}for(let B=0;B<D.components.length;++B){const A=D.components[B],[m,b]=d(P,A,{staticPosition:F});U[I?B:A?.name]=m,L+=b}return[U,L]}function _(P,{staticPosition:D}){const F=(0,o.bytesToNumber)(P.readBytes(32)),I=D+F;P.setPosition(I);const U=(0,o.bytesToNumber)(P.readBytes(32));if(U===0)return P.setPosition(D+32),["",32];const L=P.readBytes(U,32),B=(0,o.bytesToString)((0,i.trim)(L));return P.setPosition(D+32),[B,32]}function T(P){const{type:D}=P;if(D==="string"||D==="bytes"||D.endsWith("[]"))return!0;if(D==="tuple")return P.components?.some(T);const F=(0,u.getArrayComponents)(P.type);return!!(F&&T({...P,type:F[1]}))}return X2}var Q$;function AT(){if(Q$)return J2;Q$=1,Object.defineProperty(J2,"__esModule",{value:!0}),J2.decodeErrorResult=o;const t=pB(),e=Jn(),r=Gc(),n=rg(),s=zh(),i=of();function o(a){const{abi:c,data:u}=a,l=(0,r.slice)(u,0,4);if(l==="0x")throw new e.AbiDecodingZeroDataError;const f=[...c||[],t.solidityError,t.solidityPanic].find(p=>p.type==="error"&&l===(0,n.toFunctionSelector)((0,i.formatAbiItem)(p)));if(!f)throw new e.AbiErrorSignatureNotFoundError(l,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:f,args:"inputs"in f&&f.inputs&&f.inputs.length>0?(0,s.decodeAbiParameters)(f.inputs,(0,r.slice)(u,4)):void 0,errorName:f.name}}return J2}var eA={},bw={},eq;function Li(){if(eq)return bw;eq=1,Object.defineProperty(bw,"__esModule",{value:!0}),bw.stringify=void 0;const t=(e,r,n)=>JSON.stringify(e,(s,i)=>{const o=typeof i=="bigint"?i.toString():i;return typeof r=="function"?r(s,o):o},n);return bw.stringify=t,bw}var tq;function ise(){if(tq)return eA;tq=1,Object.defineProperty(eA,"__esModule",{value:!0}),eA.formatAbiItemWithArgs=e;const t=Li();function e({abiItem:r,args:n,includeFunctionName:s=!0,includeName:i=!1}){if("name"in r&&"inputs"in r&&r.inputs)return`${s?r.name:""}(${r.inputs.map((o,a)=>`${i&&o.name?`${o.name}: `:""}${typeof n[a]=="object"?(0,t.stringify)(n[a]):n[a]}`).join(", ")})`}return eA}var tA={},gd={},rq;function QE(){return rq||(rq=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.weiUnits=gd.gweiUnits=gd.etherUnits=void 0,gd.etherUnits={gwei:9,wei:18},gd.gweiUnits={ether:-9,wei:9},gd.weiUnits={ether:-18,gwei:-9}),gd}var rA={},nq;function xT(){if(nq)return rA;nq=1,Object.defineProperty(rA,"__esModule",{value:!0}),rA.formatUnits=t;function t(e,r){let n=e.toString();const s=n.startsWith("-");s&&(n=n.slice(1)),n=n.padStart(r,"0");let[i,o]=[n.slice(0,n.length-r),n.slice(n.length-r)];return o=o.replace(/(0+)$/,""),`${s?"-":""}${i||"0"}${o?`.${o}`:""}`}return rA}var sq;function e_(){if(sq)return tA;sq=1,Object.defineProperty(tA,"__esModule",{value:!0}),tA.formatEther=r;const t=QE(),e=xT();function r(n,s="wei"){return(0,e.formatUnits)(n,t.etherUnits[s])}return tA}var nA={},iq;function sg(){if(iq)return nA;iq=1,Object.defineProperty(nA,"__esModule",{value:!0}),nA.formatGwei=r;const t=QE(),e=xT();function r(n,s="wei"){return(0,e.formatUnits)(n,t.gweiUnits[s])}return nA}var md={},oq;function mB(){if(oq)return md;oq=1,Object.defineProperty(md,"__esModule",{value:!0}),md.StateAssignmentConflictError=md.AccountStateConflictError=void 0,md.prettyStateMapping=n,md.prettyStateOverride=s;const t=Kt();class e extends t.BaseError{constructor({address:o}){super(`State for account "${o}" is set multiple times.`,{name:"AccountStateConflictError"})}}md.AccountStateConflictError=e;class r extends t.BaseError{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}md.StateAssignmentConflictError=r;function n(i){return i.reduce((o,{slot:a,value:c})=>`${o}        ${a}: ${c}
`,"")}function s(i){return i.reduce((o,{address:a,...c})=>{let u=`${o}    ${a}:
`;return c.nonce&&(u+=`      nonce: ${c.nonce}
`),c.balance&&(u+=`      balance: ${c.balance}
`),c.code&&(u+=`      code: ${c.code}
`),c.state&&(u+=`      state:
`,u+=n(c.state)),c.stateDiff&&(u+=`      stateDiff:
`,u+=n(c.stateDiff)),u},`  State Override:
`).slice(0,-1)}return md}var Bn={},aq;function Na(){if(aq)return Bn;aq=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.WaitForTransactionReceiptTimeoutError=Bn.TransactionReceiptRevertedError=Bn.TransactionReceiptNotFoundError=Bn.TransactionNotFoundError=Bn.TransactionExecutionError=Bn.InvalidStorageKeySizeError=Bn.InvalidSerializedTransactionError=Bn.InvalidSerializedTransactionTypeError=Bn.InvalidSerializableTransactionError=Bn.InvalidLegacyVError=Bn.FeeConflictError=void 0,Bn.prettyPrint=n;const t=e_(),e=sg(),r=Kt();function n(h){const y=Object.entries(h).map(([S,C])=>C===void 0||C===!1?null:[S,C]).filter(Boolean),E=y.reduce((S,[C])=>Math.max(S,C.length),0);return y.map(([S,C])=>`  ${`${S}:`.padEnd(E+1)}  ${C}`).join(`
`)}class s extends r.BaseError{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}Bn.FeeConflictError=s;class i extends r.BaseError{constructor({v:y}){super(`Invalid \`v\` value "${y}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}Bn.InvalidLegacyVError=i;class o extends r.BaseError{constructor({transaction:y}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",n(y),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}Bn.InvalidSerializableTransactionError=o;class a extends r.BaseError{constructor({serializedType:y}){super(`Serialized transaction type "${y}" is invalid.`,{name:"InvalidSerializedTransactionType"}),Object.defineProperty(this,"serializedType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.serializedType=y}}Bn.InvalidSerializedTransactionTypeError=a;class c extends r.BaseError{constructor({attributes:y,serializedTransaction:E,type:S}){const C=Object.entries(y).map(([_,T])=>typeof T>"u"?_:void 0).filter(Boolean);super(`Invalid serialized transaction of type "${S}" was provided.`,{metaMessages:[`Serialized Transaction: "${E}"`,C.length>0?`Missing Attributes: ${C.join(", ")}`:""].filter(Boolean),name:"InvalidSerializedTransactionError"}),Object.defineProperty(this,"serializedTransaction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.serializedTransaction=E,this.type=S}}Bn.InvalidSerializedTransactionError=c;class u extends r.BaseError{constructor({storageKey:y}){super(`Size for storage key "${y}" is invalid. Expected 32 bytes. Got ${Math.floor((y.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}Bn.InvalidStorageKeySizeError=u;class l extends r.BaseError{constructor(y,{account:E,docsPath:S,chain:C,data:_,gas:T,gasPrice:P,maxFeePerGas:D,maxPriorityFeePerGas:F,nonce:I,to:U,value:L}){const B=n({chain:C&&`${C?.name} (id: ${C?.id})`,from:E?.address,to:U,value:typeof L<"u"&&`${(0,t.formatEther)(L)} ${C?.nativeCurrency?.symbol||"ETH"}`,data:_,gas:T,gasPrice:typeof P<"u"&&`${(0,e.formatGwei)(P)} gwei`,maxFeePerGas:typeof D<"u"&&`${(0,e.formatGwei)(D)} gwei`,maxPriorityFeePerGas:typeof F<"u"&&`${(0,e.formatGwei)(F)} gwei`,nonce:I});super(y.shortMessage,{cause:y,docsPath:S,metaMessages:[...y.metaMessages?[...y.metaMessages," "]:[],"Request Arguments:",B].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=y}}Bn.TransactionExecutionError=l;class d extends r.BaseError{constructor({blockHash:y,blockNumber:E,blockTag:S,hash:C,index:_}){let T="Transaction";S&&_!==void 0&&(T=`Transaction at block time "${S}" at index "${_}"`),y&&_!==void 0&&(T=`Transaction at block hash "${y}" at index "${_}"`),E&&_!==void 0&&(T=`Transaction at block number "${E}" at index "${_}"`),C&&(T=`Transaction with hash "${C}"`),super(`${T} could not be found.`,{name:"TransactionNotFoundError"})}}Bn.TransactionNotFoundError=d;class f extends r.BaseError{constructor({hash:y}){super(`Transaction receipt with hash "${y}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}Bn.TransactionReceiptNotFoundError=f;class p extends r.BaseError{constructor({receipt:y}){super(`Transaction with hash "${y.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=y}}Bn.TransactionReceiptRevertedError=p;class g extends r.BaseError{constructor({hash:y}){super(`Timed out while waiting for transaction with hash "${y}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}return Bn.WaitForTransactionReceiptTimeoutError=g,Bn}var vp={},cq;function yB(){if(cq)return vp;cq=1,Object.defineProperty(vp,"__esModule",{value:!0}),vp.getUrl=vp.getContractAddress=void 0;const t=r=>r;vp.getContractAddress=t;const e=r=>r;return vp.getUrl=e,vp}var uq;function Wh(){if(uq)return Ao;uq=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.RawContractError=Ao.CounterfactualDeploymentFailedError=Ao.ContractFunctionZeroDataError=Ao.ContractFunctionRevertedError=Ao.ContractFunctionExecutionError=Ao.CallExecutionError=void 0;const t=is(),e=pB(),r=AT(),n=of(),s=ise(),i=cf(),o=e_(),a=sg(),c=Jn(),u=Kt(),l=mB(),d=Na(),f=yB();class p extends u.BaseError{constructor(_,{account:T,docsPath:P,chain:D,data:F,gas:I,gasPrice:U,maxFeePerGas:L,maxPriorityFeePerGas:B,nonce:A,to:m,value:b,stateOverride:w}){const x=T?(0,t.parseAccount)(T):void 0;let M=(0,d.prettyPrint)({from:x?.address,to:m,value:typeof b<"u"&&`${(0,o.formatEther)(b)} ${D?.nativeCurrency?.symbol||"ETH"}`,data:F,gas:I,gasPrice:typeof U<"u"&&`${(0,a.formatGwei)(U)} gwei`,maxFeePerGas:typeof L<"u"&&`${(0,a.formatGwei)(L)} gwei`,maxPriorityFeePerGas:typeof B<"u"&&`${(0,a.formatGwei)(B)} gwei`,nonce:A});w&&(M+=`
${(0,l.prettyStateOverride)(w)}`),super(_.shortMessage,{cause:_,docsPath:P,metaMessages:[..._.metaMessages?[..._.metaMessages," "]:[],"Raw Call Arguments:",M].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=_}}Ao.CallExecutionError=p;class g extends u.BaseError{constructor(_,{abi:T,args:P,contractAddress:D,docsPath:F,functionName:I,sender:U}){const L=(0,i.getAbiItem)({abi:T,args:P,name:I}),B=L?(0,s.formatAbiItemWithArgs)({abiItem:L,args:P,includeFunctionName:!1,includeName:!1}):void 0,A=L?(0,n.formatAbiItem)(L,{includeName:!0}):void 0,m=(0,d.prettyPrint)({address:D&&(0,f.getContractAddress)(D),function:A,args:B&&B!=="()"&&`${[...Array(I?.length??0).keys()].map(()=>" ").join("")}${B}`,sender:U});super(_.shortMessage||`An unknown error occurred while executing the contract function "${I}".`,{cause:_,docsPath:F,metaMessages:[..._.metaMessages?[..._.metaMessages," "]:[],m&&"Contract Call:",m].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=T,this.args=P,this.cause=_,this.contractAddress=D,this.functionName=I,this.sender=U}}Ao.ContractFunctionExecutionError=g;class h extends u.BaseError{constructor({abi:_,data:T,functionName:P,message:D}){let F,I,U,L;if(T&&T!=="0x")try{I=(0,r.decodeErrorResult)({abi:_,data:T});const{abiItem:A,errorName:m,args:b}=I;if(m==="Error")L=b[0];else if(m==="Panic"){const[w]=b;L=e.panicReasons[w]}else{const w=A?(0,n.formatAbiItem)(A,{includeName:!0}):void 0,x=A&&b?(0,s.formatAbiItemWithArgs)({abiItem:A,args:b,includeFunctionName:!1,includeName:!1}):void 0;U=[w?`Error: ${w}`:"",x&&x!=="()"?`       ${[...Array(m?.length??0).keys()].map(()=>" ").join("")}${x}`:""]}}catch(A){F=A}else D&&(L=D);let B;F instanceof c.AbiErrorSignatureNotFoundError&&(B=F.signature,U=[`Unable to decode signature "${B}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${B}.`]),super(L&&L!=="execution reverted"||B?[`The contract function "${P}" reverted with the following ${B?"signature":"reason"}:`,L||B].join(`
`):`The contract function "${P}" reverted.`,{cause:F,metaMessages:U,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=I,this.raw=T,this.reason=L,this.signature=B}}Ao.ContractFunctionRevertedError=h;class y extends u.BaseError{constructor({functionName:_}){super(`The contract function "${_}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${_}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}Ao.ContractFunctionZeroDataError=y;class E extends u.BaseError{constructor({factory:_}){super(`Deployment for counterfactual contract call failed${_?` for factory "${_}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}Ao.CounterfactualDeploymentFailedError=E;class S extends u.BaseError{constructor({data:_,message:T}){super(T||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=_}}return Ao.RawContractError=S,Ao}var Ma={},lq;function Hu(){if(lq)return Ma;lq=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.TimeoutError=Ma.SocketClosedError=Ma.RpcRequestError=Ma.WebSocketRequestError=Ma.HttpRequestError=void 0;const t=Li(),e=Kt(),r=yB();class n extends e.BaseError{constructor({body:u,cause:l,details:d,headers:f,status:p,url:g}){super("HTTP request failed.",{cause:l,details:d,metaMessages:[p&&`Status: ${p}`,`URL: ${(0,r.getUrl)(g)}`,u&&`Request body: ${(0,t.stringify)(u)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=u,this.headers=f,this.status=p,this.url=g}}Ma.HttpRequestError=n;class s extends e.BaseError{constructor({body:u,cause:l,details:d,url:f}){super("WebSocket request failed.",{cause:l,details:d,metaMessages:[`URL: ${(0,r.getUrl)(f)}`,u&&`Request body: ${(0,t.stringify)(u)}`].filter(Boolean),name:"WebSocketRequestError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=f}}Ma.WebSocketRequestError=s;class i extends e.BaseError{constructor({body:u,error:l,url:d}){super("RPC Request failed.",{cause:l,details:l.message,metaMessages:[`URL: ${(0,r.getUrl)(d)}`,`Request body: ${(0,t.stringify)(u)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=l.code,this.data=l.data,this.url=d}}Ma.RpcRequestError=i;class o extends e.BaseError{constructor({url:u}={}){super("The socket has been closed.",{metaMessages:[u&&`URL: ${(0,r.getUrl)(u)}`].filter(Boolean),name:"SocketClosedError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=u}}Ma.SocketClosedError=o;class a extends e.BaseError{constructor({body:u,url:l}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${(0,r.getUrl)(l)}`,`Request body: ${(0,t.stringify)(u)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=l}}return Ma.TimeoutError=a,Ma}var wt={},dq;function Vh(){if(dq)return wt;dq=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.UnknownRpcError=wt.AtomicityNotSupportedError=wt.AtomicReadyWalletRejectedUpgradeError=wt.BundleTooLargeError=wt.UnknownBundleIdError=wt.DuplicateIdError=wt.UnsupportedChainIdError=wt.UnsupportedNonOptionalCapabilityError=wt.SwitchChainError=wt.ChainDisconnectedError=wt.ProviderDisconnectedError=wt.UnsupportedProviderMethodError=wt.UnauthorizedProviderError=wt.UserRejectedRequestError=wt.JsonRpcVersionUnsupportedError=wt.LimitExceededRpcError=wt.MethodNotSupportedRpcError=wt.TransactionRejectedRpcError=wt.ResourceUnavailableRpcError=wt.ResourceNotFoundRpcError=wt.InvalidInputRpcError=wt.InternalRpcError=wt.InvalidParamsRpcError=wt.MethodNotFoundRpcError=wt.InvalidRequestRpcError=wt.ParseRpcError=wt.ProviderRpcError=wt.RpcError=void 0;const t=Kt(),e=Hu(),r=-1;class n extends t.BaseError{constructor(w,{code:x,docsPath:M,metaMessages:k,name:j,shortMessage:N}){super(N,{cause:w,docsPath:M,metaMessages:k||w?.metaMessages,name:j||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=j||w.name,this.code=w instanceof e.RpcRequestError?w.code:x??r}}wt.RpcError=n;class s extends n{constructor(w,x){super(w,x),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=x.data}}wt.ProviderRpcError=s;class i extends n{constructor(w){super(w,{code:i.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}wt.ParseRpcError=i,Object.defineProperty(i,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class o extends n{constructor(w){super(w,{code:o.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}wt.InvalidRequestRpcError=o,Object.defineProperty(o,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class a extends n{constructor(w,{method:x}={}){super(w,{code:a.code,name:"MethodNotFoundRpcError",shortMessage:`The method${x?` "${x}"`:""} does not exist / is not available.`})}}wt.MethodNotFoundRpcError=a,Object.defineProperty(a,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class c extends n{constructor(w){super(w,{code:c.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}wt.InvalidParamsRpcError=c,Object.defineProperty(c,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class u extends n{constructor(w){super(w,{code:u.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}wt.InternalRpcError=u,Object.defineProperty(u,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class l extends n{constructor(w){super(w,{code:l.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}wt.InvalidInputRpcError=l,Object.defineProperty(l,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class d extends n{constructor(w){super(w,{code:d.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}wt.ResourceNotFoundRpcError=d,Object.defineProperty(d,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class f extends n{constructor(w){super(w,{code:f.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}wt.ResourceUnavailableRpcError=f,Object.defineProperty(f,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class p extends n{constructor(w){super(w,{code:p.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}wt.TransactionRejectedRpcError=p,Object.defineProperty(p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class g extends n{constructor(w,{method:x}={}){super(w,{code:g.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${x?` "${x}"`:""} is not supported.`})}}wt.MethodNotSupportedRpcError=g,Object.defineProperty(g,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class h extends n{constructor(w){super(w,{code:h.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}wt.LimitExceededRpcError=h,Object.defineProperty(h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class y extends n{constructor(w){super(w,{code:y.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}wt.JsonRpcVersionUnsupportedError=y,Object.defineProperty(y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class E extends s{constructor(w){super(w,{code:E.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}wt.UserRejectedRequestError=E,Object.defineProperty(E,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class S extends s{constructor(w){super(w,{code:S.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}wt.UnauthorizedProviderError=S,Object.defineProperty(S,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class C extends s{constructor(w,{method:x}={}){super(w,{code:C.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${x?` " ${x}"`:""}.`})}}wt.UnsupportedProviderMethodError=C,Object.defineProperty(C,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class _ extends s{constructor(w){super(w,{code:_.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}wt.ProviderDisconnectedError=_,Object.defineProperty(_,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class T extends s{constructor(w){super(w,{code:T.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}wt.ChainDisconnectedError=T,Object.defineProperty(T,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class P extends s{constructor(w){super(w,{code:P.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}wt.SwitchChainError=P,Object.defineProperty(P,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class D extends s{constructor(w){super(w,{code:D.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}wt.UnsupportedNonOptionalCapabilityError=D,Object.defineProperty(D,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class F extends s{constructor(w){super(w,{code:F.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}wt.UnsupportedChainIdError=F,Object.defineProperty(F,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class I extends s{constructor(w){super(w,{code:I.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}wt.DuplicateIdError=I,Object.defineProperty(I,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class U extends s{constructor(w){super(w,{code:U.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}wt.UnknownBundleIdError=U,Object.defineProperty(U,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class L extends s{constructor(w){super(w,{code:L.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}wt.BundleTooLargeError=L,Object.defineProperty(L,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class B extends s{constructor(w){super(w,{code:B.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}wt.AtomicReadyWalletRejectedUpgradeError=B,Object.defineProperty(B,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class A extends s{constructor(w){super(w,{code:A.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}wt.AtomicityNotSupportedError=A,Object.defineProperty(A,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class m extends n{constructor(w){super(w,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}return wt.UnknownRpcError=m,wt}var fq;function Gh(){if(fq)return Y2;fq=1,Object.defineProperty(Y2,"__esModule",{value:!0}),Y2.getContractError=o;const t=Jn(),e=Kt(),r=Wh(),n=Hu(),s=Vh(),i=3;function o(a,{abi:c,address:u,args:l,docsPath:d,functionName:f,sender:p}){const g=a instanceof r.RawContractError?a:a instanceof e.BaseError?a.walk(T=>"data"in T)||a.walk():{},{code:h,data:y,details:E,message:S,shortMessage:C}=g,_=a instanceof t.AbiDecodingZeroDataError?new r.ContractFunctionZeroDataError({functionName:f}):[i,s.InternalRpcError.code].includes(h)&&(y||E||S||C)||h===s.InvalidInputRpcError.code&&E==="execution reverted"&&y?new r.ContractFunctionRevertedError({abi:c,data:typeof y=="object"?y.data:y,functionName:f,message:g instanceof n.RpcRequestError?E:C??S}):a;return new r.ContractFunctionExecutionError(_,{abi:c,args:l,contractAddress:u,docsPath:d,functionName:f,sender:p})}return Y2}var sA={},iA={},oA={},aA={},hq;function ose(){if(hq)return aA;hq=1,Object.defineProperty(aA,"__esModule",{value:!0}),aA.publicKeyToAddress=r;const t=lc(),e=Sa();function r(n){const s=(0,e.keccak256)(`0x${n.substring(4)}`).substring(26);return(0,t.checksumAddress)(`0x${s}`)}return aA}var cA={},FP={},Sn={},Xi={},pq;function ase(){if(pq)return Xi;pq=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.SHA512_IV=Xi.SHA384_IV=Xi.SHA224_IV=Xi.SHA256_IV=Xi.HashMD=void 0,Xi.setBigUint64=e,Xi.Chi=r,Xi.Maj=n;const t=Hh();function e(i,o,a,c){if(typeof i.setBigUint64=="function")return i.setBigUint64(o,a,c);const u=BigInt(32),l=BigInt(4294967295),d=Number(a>>u&l),f=Number(a&l),p=c?4:0,g=c?0:4;i.setUint32(o+p,d,c),i.setUint32(o+g,f,c)}function r(i,o,a){return i&o^~i&a}function n(i,o,a){return i&o^i&a^o&a}class s extends t.Hash{constructor(o,a,c,u){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=o,this.outputLen=a,this.padOffset=c,this.isLE=u,this.buffer=new Uint8Array(o),this.view=(0,t.createView)(this.buffer)}update(o){(0,t.aexists)(this),o=(0,t.toBytes)(o),(0,t.abytes)(o);const{view:a,buffer:c,blockLen:u}=this,l=o.length;for(let d=0;d<l;){const f=Math.min(u-this.pos,l-d);if(f===u){const p=(0,t.createView)(o);for(;u<=l-d;d+=u)this.process(p,d);continue}c.set(o.subarray(d,d+f),this.pos),this.pos+=f,d+=f,this.pos===u&&(this.process(a,0),this.pos=0)}return this.length+=o.length,this.roundClean(),this}digestInto(o){(0,t.aexists)(this),(0,t.aoutput)(o,this),this.finished=!0;const{buffer:a,view:c,blockLen:u,isLE:l}=this;let{pos:d}=this;a[d++]=128,(0,t.clean)(this.buffer.subarray(d)),this.padOffset>u-d&&(this.process(c,0),d=0);for(let y=d;y<u;y++)a[y]=0;e(c,u-8,BigInt(this.length*8),l),this.process(c,0);const f=(0,t.createView)(o),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=p/4,h=this.get();if(g>h.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<g;y++)f.setUint32(4*y,h[y],l)}digest(){const{buffer:o,outputLen:a}=this;this.digestInto(o);const c=o.slice(0,a);return this.destroy(),c}_cloneInto(o){o||(o=new this.constructor),o.set(...this.get());const{blockLen:a,buffer:c,length:u,finished:l,destroyed:d,pos:f}=this;return o.destroyed=d,o.finished=l,o.length=u,o.pos=f,u%a&&o.buffer.set(c),o}clone(){return this._cloneInto()}}return Xi.HashMD=s,Xi.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Xi.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),Xi.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Xi.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Xi}var gq;function cse(){if(gq)return Sn;gq=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.sha512_224=Sn.sha512_256=Sn.sha384=Sn.sha512=Sn.sha224=Sn.sha256=Sn.SHA512_256=Sn.SHA512_224=Sn.SHA384=Sn.SHA512=Sn.SHA224=Sn.SHA256=void 0;const t=ase(),e=tse(),r=Hh(),n=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array(64);class i extends t.HashMD{constructor(C=32){super(64,C,8,!1),this.A=t.SHA256_IV[0]|0,this.B=t.SHA256_IV[1]|0,this.C=t.SHA256_IV[2]|0,this.D=t.SHA256_IV[3]|0,this.E=t.SHA256_IV[4]|0,this.F=t.SHA256_IV[5]|0,this.G=t.SHA256_IV[6]|0,this.H=t.SHA256_IV[7]|0}get(){const{A:C,B:_,C:T,D:P,E:D,F,G:I,H:U}=this;return[C,_,T,P,D,F,I,U]}set(C,_,T,P,D,F,I,U){this.A=C|0,this.B=_|0,this.C=T|0,this.D=P|0,this.E=D|0,this.F=F|0,this.G=I|0,this.H=U|0}process(C,_){for(let A=0;A<16;A++,_+=4)s[A]=C.getUint32(_,!1);for(let A=16;A<64;A++){const m=s[A-15],b=s[A-2],w=(0,r.rotr)(m,7)^(0,r.rotr)(m,18)^m>>>3,x=(0,r.rotr)(b,17)^(0,r.rotr)(b,19)^b>>>10;s[A]=x+s[A-7]+w+s[A-16]|0}let{A:T,B:P,C:D,D:F,E:I,F:U,G:L,H:B}=this;for(let A=0;A<64;A++){const m=(0,r.rotr)(I,6)^(0,r.rotr)(I,11)^(0,r.rotr)(I,25),b=B+m+(0,t.Chi)(I,U,L)+n[A]+s[A]|0,x=((0,r.rotr)(T,2)^(0,r.rotr)(T,13)^(0,r.rotr)(T,22))+(0,t.Maj)(T,P,D)|0;B=L,L=U,U=I,I=F+b|0,F=D,D=P,P=T,T=b+x|0}T=T+this.A|0,P=P+this.B|0,D=D+this.C|0,F=F+this.D|0,I=I+this.E|0,U=U+this.F|0,L=L+this.G|0,B=B+this.H|0,this.set(T,P,D,F,I,U,L,B)}roundClean(){(0,r.clean)(s)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,r.clean)(this.buffer)}}Sn.SHA256=i;class o extends i{constructor(){super(28),this.A=t.SHA224_IV[0]|0,this.B=t.SHA224_IV[1]|0,this.C=t.SHA224_IV[2]|0,this.D=t.SHA224_IV[3]|0,this.E=t.SHA224_IV[4]|0,this.F=t.SHA224_IV[5]|0,this.G=t.SHA224_IV[6]|0,this.H=t.SHA224_IV[7]|0}}Sn.SHA224=o;const a=e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(S=>BigInt(S))),c=a[0],u=a[1],l=new Uint32Array(80),d=new Uint32Array(80);class f extends t.HashMD{constructor(C=64){super(128,C,16,!1),this.Ah=t.SHA512_IV[0]|0,this.Al=t.SHA512_IV[1]|0,this.Bh=t.SHA512_IV[2]|0,this.Bl=t.SHA512_IV[3]|0,this.Ch=t.SHA512_IV[4]|0,this.Cl=t.SHA512_IV[5]|0,this.Dh=t.SHA512_IV[6]|0,this.Dl=t.SHA512_IV[7]|0,this.Eh=t.SHA512_IV[8]|0,this.El=t.SHA512_IV[9]|0,this.Fh=t.SHA512_IV[10]|0,this.Fl=t.SHA512_IV[11]|0,this.Gh=t.SHA512_IV[12]|0,this.Gl=t.SHA512_IV[13]|0,this.Hh=t.SHA512_IV[14]|0,this.Hl=t.SHA512_IV[15]|0}get(){const{Ah:C,Al:_,Bh:T,Bl:P,Ch:D,Cl:F,Dh:I,Dl:U,Eh:L,El:B,Fh:A,Fl:m,Gh:b,Gl:w,Hh:x,Hl:M}=this;return[C,_,T,P,D,F,I,U,L,B,A,m,b,w,x,M]}set(C,_,T,P,D,F,I,U,L,B,A,m,b,w,x,M){this.Ah=C|0,this.Al=_|0,this.Bh=T|0,this.Bl=P|0,this.Ch=D|0,this.Cl=F|0,this.Dh=I|0,this.Dl=U|0,this.Eh=L|0,this.El=B|0,this.Fh=A|0,this.Fl=m|0,this.Gh=b|0,this.Gl=w|0,this.Hh=x|0,this.Hl=M|0}process(C,_){for(let N=0;N<16;N++,_+=4)l[N]=C.getUint32(_),d[N]=C.getUint32(_+=4);for(let N=16;N<80;N++){const v=l[N-15]|0,R=d[N-15]|0,$=e.rotrSH(v,R,1)^e.rotrSH(v,R,8)^e.shrSH(v,R,7),O=e.rotrSL(v,R,1)^e.rotrSL(v,R,8)^e.shrSL(v,R,7),H=l[N-2]|0,W=d[N-2]|0,G=e.rotrSH(H,W,19)^e.rotrBH(H,W,61)^e.shrSH(H,W,6),K=e.rotrSL(H,W,19)^e.rotrBL(H,W,61)^e.shrSL(H,W,6),Q=e.add4L(O,K,d[N-7],d[N-16]),re=e.add4H(Q,$,G,l[N-7],l[N-16]);l[N]=re|0,d[N]=Q|0}let{Ah:T,Al:P,Bh:D,Bl:F,Ch:I,Cl:U,Dh:L,Dl:B,Eh:A,El:m,Fh:b,Fl:w,Gh:x,Gl:M,Hh:k,Hl:j}=this;for(let N=0;N<80;N++){const v=e.rotrSH(A,m,14)^e.rotrSH(A,m,18)^e.rotrBH(A,m,41),R=e.rotrSL(A,m,14)^e.rotrSL(A,m,18)^e.rotrBL(A,m,41),$=A&b^~A&x,O=m&w^~m&M,H=e.add5L(j,R,O,u[N],d[N]),W=e.add5H(H,k,v,$,c[N],l[N]),G=H|0,K=e.rotrSH(T,P,28)^e.rotrBH(T,P,34)^e.rotrBH(T,P,39),Q=e.rotrSL(T,P,28)^e.rotrBL(T,P,34)^e.rotrBL(T,P,39),re=T&D^T&I^D&I,de=P&F^P&U^F&U;k=x|0,j=M|0,x=b|0,M=w|0,b=A|0,w=m|0,{h:A,l:m}=e.add(L|0,B|0,W|0,G|0),L=I|0,B=U|0,I=D|0,U=F|0,D=T|0,F=P|0;const le=e.add3L(G,Q,de);T=e.add3H(le,W,K,re),P=le|0}({h:T,l:P}=e.add(this.Ah|0,this.Al|0,T|0,P|0)),{h:D,l:F}=e.add(this.Bh|0,this.Bl|0,D|0,F|0),{h:I,l:U}=e.add(this.Ch|0,this.Cl|0,I|0,U|0),{h:L,l:B}=e.add(this.Dh|0,this.Dl|0,L|0,B|0),{h:A,l:m}=e.add(this.Eh|0,this.El|0,A|0,m|0),{h:b,l:w}=e.add(this.Fh|0,this.Fl|0,b|0,w|0),{h:x,l:M}=e.add(this.Gh|0,this.Gl|0,x|0,M|0),{h:k,l:j}=e.add(this.Hh|0,this.Hl|0,k|0,j|0),this.set(T,P,D,F,I,U,L,B,A,m,b,w,x,M,k,j)}roundClean(){(0,r.clean)(l,d)}destroy(){(0,r.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Sn.SHA512=f;class p extends f{constructor(){super(48),this.Ah=t.SHA384_IV[0]|0,this.Al=t.SHA384_IV[1]|0,this.Bh=t.SHA384_IV[2]|0,this.Bl=t.SHA384_IV[3]|0,this.Ch=t.SHA384_IV[4]|0,this.Cl=t.SHA384_IV[5]|0,this.Dh=t.SHA384_IV[6]|0,this.Dl=t.SHA384_IV[7]|0,this.Eh=t.SHA384_IV[8]|0,this.El=t.SHA384_IV[9]|0,this.Fh=t.SHA384_IV[10]|0,this.Fl=t.SHA384_IV[11]|0,this.Gh=t.SHA384_IV[12]|0,this.Gl=t.SHA384_IV[13]|0,this.Hh=t.SHA384_IV[14]|0,this.Hl=t.SHA384_IV[15]|0}}Sn.SHA384=p;const g=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),h=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class y extends f{constructor(){super(28),this.Ah=g[0]|0,this.Al=g[1]|0,this.Bh=g[2]|0,this.Bl=g[3]|0,this.Ch=g[4]|0,this.Cl=g[5]|0,this.Dh=g[6]|0,this.Dl=g[7]|0,this.Eh=g[8]|0,this.El=g[9]|0,this.Fh=g[10]|0,this.Fl=g[11]|0,this.Gh=g[12]|0,this.Gl=g[13]|0,this.Hh=g[14]|0,this.Hl=g[15]|0}}Sn.SHA512_224=y;class E extends f{constructor(){super(32),this.Ah=h[0]|0,this.Al=h[1]|0,this.Bh=h[2]|0,this.Bl=h[3]|0,this.Ch=h[4]|0,this.Cl=h[5]|0,this.Dh=h[6]|0,this.Dl=h[7]|0,this.Eh=h[8]|0,this.El=h[9]|0,this.Fh=h[10]|0,this.Fl=h[11]|0,this.Gh=h[12]|0,this.Gl=h[13]|0,this.Hh=h[14]|0,this.Hl=h[15]|0}}return Sn.SHA512_256=E,Sn.sha256=(0,r.createHasher)(()=>new i),Sn.sha224=(0,r.createHasher)(()=>new o),Sn.sha512=(0,r.createHasher)(()=>new f),Sn.sha384=(0,r.createHasher)(()=>new p),Sn.sha512_256=(0,r.createHasher)(()=>new E),Sn.sha512_224=(0,r.createHasher)(()=>new y),Sn}var ww={},$P={},mq;function gUe(){return mq||(mq=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=Hh();class r extends e.Hash{constructor(i,o){super(),this.finished=!1,this.destroyed=!1,(0,e.ahash)(i);const a=(0,e.toBytes)(o);if(this.iHash=i.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,u=new Uint8Array(c);u.set(a.length>c?i.create().update(a).digest():a);for(let l=0;l<u.length;l++)u[l]^=54;this.iHash.update(u),this.oHash=i.create();for(let l=0;l<u.length;l++)u[l]^=106;this.oHash.update(u),(0,e.clean)(u)}update(i){return(0,e.aexists)(this),this.iHash.update(i),this}digestInto(i){(0,e.aexists)(this),(0,e.abytes)(i,this.outputLen),this.finished=!0,this.iHash.digestInto(i),this.oHash.update(i),this.oHash.digestInto(i),this.destroy()}digest(){const i=new Uint8Array(this.oHash.outputLen);return this.digestInto(i),i}_cloneInto(i){i||(i=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:a,finished:c,destroyed:u,blockLen:l,outputLen:d}=this;return i=i,i.finished=c,i.destroyed=u,i.blockLen=l,i.outputLen=d,i.oHash=o._cloneInto(i.oHash),i.iHash=a._cloneInto(i.iHash),i}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=r;const n=(s,i,o)=>new r(s,i).update(o).digest();t.hmac=n,t.hmac.create=(s,i)=>new r(s,i)})($P)),$P}var qP={},Ep={},$n={},Jr={},yq;function ig(){if(yq)return Jr;yq=1;Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.notImplemented=Jr.bitMask=void 0,Jr.isBytes=r,Jr.abytes=n,Jr.abool=s,Jr.numberToHexUnpadded=i,Jr.hexToNumber=o,Jr.bytesToHex=u,Jr.hexToBytes=f,Jr.bytesToNumberBE=p,Jr.bytesToNumberLE=g,Jr.numberToBytesBE=h,Jr.numberToBytesLE=y,Jr.numberToVarBytesBE=E,Jr.ensureBytes=S,Jr.concatBytes=C,Jr.equalBytes=_,Jr.utf8ToBytes=T,Jr.inRange=D,Jr.aInRange=F,Jr.bitLen=I,Jr.bitGet=U,Jr.bitSet=L,Jr.createHmacDrbg=b,Jr.validateObject=x,Jr.memoized=k;const t=BigInt(0),e=BigInt(1);function r(j){return j instanceof Uint8Array||ArrayBuffer.isView(j)&&j.constructor.name==="Uint8Array"}function n(j){if(!r(j))throw new Error("Uint8Array expected")}function s(j,N){if(typeof N!="boolean")throw new Error(j+" boolean expected, got "+N)}function i(j){const N=j.toString(16);return N.length&1?"0"+N:N}function o(j){if(typeof j!="string")throw new Error("hex string expected, got "+typeof j);return j===""?t:BigInt("0x"+j)}const a=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",c=Array.from({length:256},(j,N)=>N.toString(16).padStart(2,"0"));function u(j){if(n(j),a)return j.toHex();let N="";for(let v=0;v<j.length;v++)N+=c[j[v]];return N}const l={_0:48,_9:57,A:65,F:70,a:97,f:102};function d(j){if(j>=l._0&&j<=l._9)return j-l._0;if(j>=l.A&&j<=l.F)return j-(l.A-10);if(j>=l.a&&j<=l.f)return j-(l.a-10)}function f(j){if(typeof j!="string")throw new Error("hex string expected, got "+typeof j);if(a)return Uint8Array.fromHex(j);const N=j.length,v=N/2;if(N%2)throw new Error("hex string expected, got unpadded hex of length "+N);const R=new Uint8Array(v);for(let $=0,O=0;$<v;$++,O+=2){const H=d(j.charCodeAt(O)),W=d(j.charCodeAt(O+1));if(H===void 0||W===void 0){const G=j[O]+j[O+1];throw new Error('hex string expected, got non-hex character "'+G+'" at index '+O)}R[$]=H*16+W}return R}function p(j){return o(u(j))}function g(j){return n(j),o(u(Uint8Array.from(j).reverse()))}function h(j,N){return f(j.toString(16).padStart(N*2,"0"))}function y(j,N){return h(j,N).reverse()}function E(j){return f(i(j))}function S(j,N,v){let R;if(typeof N=="string")try{R=f(N)}catch(O){throw new Error(j+" must be hex string or Uint8Array, cause: "+O)}else if(r(N))R=Uint8Array.from(N);else throw new Error(j+" must be hex string or Uint8Array");const $=R.length;if(typeof v=="number"&&$!==v)throw new Error(j+" of length "+v+" expected, got "+$);return R}function C(...j){let N=0;for(let R=0;R<j.length;R++){const $=j[R];n($),N+=$.length}const v=new Uint8Array(N);for(let R=0,$=0;R<j.length;R++){const O=j[R];v.set(O,$),$+=O.length}return v}function _(j,N){if(j.length!==N.length)return!1;let v=0;for(let R=0;R<j.length;R++)v|=j[R]^N[R];return v===0}function T(j){if(typeof j!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(j))}const P=j=>typeof j=="bigint"&&t<=j;function D(j,N,v){return P(j)&&P(N)&&P(v)&&N<=j&&j<v}function F(j,N,v,R){if(!D(N,v,R))throw new Error("expected valid "+j+": "+v+" <= n < "+R+", got "+N)}function I(j){let N;for(N=0;j>t;j>>=e,N+=1);return N}function U(j,N){return j>>BigInt(N)&e}function L(j,N,v){return j|(v?e:t)<<BigInt(N)}const B=j=>(e<<BigInt(j))-e;Jr.bitMask=B;const A=j=>new Uint8Array(j),m=j=>Uint8Array.from(j);function b(j,N,v){if(typeof j!="number"||j<2)throw new Error("hashLen must be a number");if(typeof N!="number"||N<2)throw new Error("qByteLen must be a number");if(typeof v!="function")throw new Error("hmacFn must be a function");let R=A(j),$=A(j),O=0;const H=()=>{R.fill(1),$.fill(0),O=0},W=(...re)=>v($,R,...re),G=(re=A(0))=>{$=W(m([0]),re),R=W(),re.length!==0&&($=W(m([1]),re),R=W())},K=()=>{if(O++>=1e3)throw new Error("drbg: tried 1000 values");let re=0;const de=[];for(;re<N;){R=W();const le=R.slice();de.push(le),re+=R.length}return C(...de)};return(re,de)=>{H(),G(re);let le;for(;!(le=de(K()));)G();return H(),le}}const w={bigint:j=>typeof j=="bigint",function:j=>typeof j=="function",boolean:j=>typeof j=="boolean",string:j=>typeof j=="string",stringOrUint8Array:j=>typeof j=="string"||r(j),isSafeInteger:j=>Number.isSafeInteger(j),array:j=>Array.isArray(j),field:(j,N)=>N.Fp.isValid(j),hash:j=>typeof j=="function"&&Number.isSafeInteger(j.outputLen)};function x(j,N,v={}){const R=($,O,H)=>{const W=w[O];if(typeof W!="function")throw new Error("invalid validator function");const G=j[$];if(!(H&&G===void 0)&&!W(G,j))throw new Error("param "+String($)+" is invalid. Expected "+O+", got "+G)};for(const[$,O]of Object.entries(N))R($,O,!1);for(const[$,O]of Object.entries(v))R($,O,!0);return j}const M=()=>{throw new Error("not implemented")};Jr.notImplemented=M;function k(j){const N=new WeakMap;return(v,...R)=>{const $=N.get(v);if($!==void 0)return $;const O=j(v,...R);return N.set(v,O),O}}return Jr}var bq;function CT(){if(bq)return $n;bq=1,Object.defineProperty($n,"__esModule",{value:!0}),$n.isNegativeLE=void 0,$n.mod=u,$n.pow=l,$n.pow2=d,$n.invert=f,$n.tonelliShanks=h,$n.FpSqrt=y,$n.validateField=C,$n.FpPow=_,$n.FpInvertBatch=T,$n.FpDiv=P,$n.FpLegendre=D,$n.FpIsSquare=F,$n.nLength=I,$n.Field=U,$n.FpSqrtOdd=L,$n.FpSqrtEven=B,$n.hashToPrivateScalar=A,$n.getFieldBytesLength=m,$n.getMinHashLength=b,$n.mapHashToField=w;const t=Hh(),e=ig(),r=BigInt(0),n=BigInt(1),s=BigInt(2),i=BigInt(3),o=BigInt(4),a=BigInt(5),c=BigInt(8);function u(x,M){const k=x%M;return k>=r?k:M+k}function l(x,M,k){return _(U(k),x,M)}function d(x,M,k){let j=x;for(;M-- >r;)j*=j,j%=k;return j}function f(x,M){if(x===r)throw new Error("invert: expected non-zero number");if(M<=r)throw new Error("invert: expected positive modulus, got "+M);let k=u(x,M),j=M,N=r,v=n;for(;k!==r;){const $=j/k,O=j%k,H=N-v*$;j=k,k=O,N=v,v=H}if(j!==n)throw new Error("invert: does not exist");return u(N,M)}function p(x,M){const k=(x.ORDER+n)/o,j=x.pow(M,k);if(!x.eql(x.sqr(j),M))throw new Error("Cannot find square root");return j}function g(x,M){const k=(x.ORDER-a)/c,j=x.mul(M,s),N=x.pow(j,k),v=x.mul(M,N),R=x.mul(x.mul(v,s),N),$=x.mul(v,x.sub(R,x.ONE));if(!x.eql(x.sqr($),M))throw new Error("Cannot find square root");return $}function h(x){if(x<BigInt(3))throw new Error("sqrt is not defined for small field");let M=x-n,k=0;for(;M%s===r;)M/=s,k++;let j=s;const N=U(x);for(;D(N,j)===1;)if(j++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(k===1)return p;let v=N.pow(j,M);const R=(M+n)/s;return function(O,H){if(O.is0(H))return H;if(D(O,H)!==1)throw new Error("Cannot find square root");let W=k,G=O.mul(O.ONE,v),K=O.pow(H,M),Q=O.pow(H,R);for(;!O.eql(K,O.ONE);){if(O.is0(K))return O.ZERO;let re=1,de=O.sqr(K);for(;!O.eql(de,O.ONE);)if(re++,de=O.sqr(de),re===W)throw new Error("Cannot find square root");const le=n<<BigInt(W-re-1),se=O.pow(G,le);W=re,G=O.sqr(se),K=O.mul(K,G),Q=O.mul(Q,se)}return Q}}function y(x){return x%o===i?p:x%c===a?g:h(x)}const E=(x,M)=>(u(x,M)&n)===n;$n.isNegativeLE=E;const S=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function C(x){const M={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},k=S.reduce((j,N)=>(j[N]="function",j),M);return(0,e.validateObject)(x,k)}function _(x,M,k){if(k<r)throw new Error("invalid exponent, negatives unsupported");if(k===r)return x.ONE;if(k===n)return M;let j=x.ONE,N=M;for(;k>r;)k&n&&(j=x.mul(j,N)),N=x.sqr(N),k>>=n;return j}function T(x,M,k=!1){const j=new Array(M.length).fill(k?x.ZERO:void 0),N=M.reduce((R,$,O)=>x.is0($)?R:(j[O]=R,x.mul(R,$)),x.ONE),v=x.inv(N);return M.reduceRight((R,$,O)=>x.is0($)?R:(j[O]=x.mul(R,j[O]),x.mul(R,$)),v),j}function P(x,M,k){return x.mul(M,typeof k=="bigint"?f(k,x.ORDER):x.inv(k))}function D(x,M){const k=(x.ORDER-n)/s,j=x.pow(M,k),N=x.eql(j,x.ONE),v=x.eql(j,x.ZERO),R=x.eql(j,x.neg(x.ONE));if(!N&&!v&&!R)throw new Error("invalid Legendre symbol result");return N?1:v?0:-1}function F(x,M){return D(x,M)===1}function I(x,M){M!==void 0&&(0,t.anumber)(M);const k=M!==void 0?M:x.toString(2).length,j=Math.ceil(k/8);return{nBitLength:k,nByteLength:j}}function U(x,M,k=!1,j={}){if(x<=r)throw new Error("invalid field: expected ORDER > 0, got "+x);const{nBitLength:N,nByteLength:v}=I(x,M);if(v>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let R;const $=Object.freeze({ORDER:x,isLE:k,BITS:N,BYTES:v,MASK:(0,e.bitMask)(N),ZERO:r,ONE:n,create:O=>u(O,x),isValid:O=>{if(typeof O!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof O);return r<=O&&O<x},is0:O=>O===r,isOdd:O=>(O&n)===n,neg:O=>u(-O,x),eql:(O,H)=>O===H,sqr:O=>u(O*O,x),add:(O,H)=>u(O+H,x),sub:(O,H)=>u(O-H,x),mul:(O,H)=>u(O*H,x),pow:(O,H)=>_($,O,H),div:(O,H)=>u(O*f(H,x),x),sqrN:O=>O*O,addN:(O,H)=>O+H,subN:(O,H)=>O-H,mulN:(O,H)=>O*H,inv:O=>f(O,x),sqrt:j.sqrt||(O=>(R||(R=y(x)),R($,O))),toBytes:O=>k?(0,e.numberToBytesLE)(O,v):(0,e.numberToBytesBE)(O,v),fromBytes:O=>{if(O.length!==v)throw new Error("Field.fromBytes: expected "+v+" bytes, got "+O.length);return k?(0,e.bytesToNumberLE)(O):(0,e.bytesToNumberBE)(O)},invertBatch:O=>T($,O),cmov:(O,H,W)=>W?H:O});return Object.freeze($)}function L(x,M){if(!x.isOdd)throw new Error("Field doesn't have isOdd");const k=x.sqrt(M);return x.isOdd(k)?k:x.neg(k)}function B(x,M){if(!x.isOdd)throw new Error("Field doesn't have isOdd");const k=x.sqrt(M);return x.isOdd(k)?x.neg(k):k}function A(x,M,k=!1){x=(0,e.ensureBytes)("privateHash",x);const j=x.length,N=I(M).nByteLength+8;if(N<24||j<N||j>1024)throw new Error("hashToPrivateScalar: expected "+N+"-1024 bytes of input, got "+j);const v=k?(0,e.bytesToNumberLE)(x):(0,e.bytesToNumberBE)(x);return u(v,M-n)+n}function m(x){if(typeof x!="bigint")throw new Error("field order must be bigint");const M=x.toString(2).length;return Math.ceil(M/8)}function b(x){const M=m(x);return M+Math.ceil(M/2)}function w(x,M,k=!1){const j=x.length,N=m(M),v=b(M);if(j<16||j<v||j>1024)throw new Error("expected "+v+"-1024 bytes of input, got "+j);const R=k?(0,e.bytesToNumberLE)(x):(0,e.bytesToNumberBE)(x),$=u(R,M-n)+n;return k?(0,e.numberToBytesLE)($,N):(0,e.numberToBytesBE)($,N)}return $n}var wq;function mUe(){if(wq)return Ep;wq=1,Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.wNAF=p,Ep.pippenger=g,Ep.precomputeMSMUnsafe=h,Ep.validateBasic=y;const t=CT(),e=ig(),r=BigInt(0),n=BigInt(1);function s(E,S){const C=S.negate();return E?C:S}function i(E,S){if(!Number.isSafeInteger(E)||E<=0||E>S)throw new Error("invalid window size, expected [1.."+S+"], got W="+E)}function o(E,S){i(E,S);const C=Math.ceil(S/E)+1,_=2**(E-1),T=2**E,P=(0,e.bitMask)(E),D=BigInt(E);return{windows:C,windowSize:_,mask:P,maxNumber:T,shiftBy:D}}function a(E,S,C){const{windowSize:_,mask:T,maxNumber:P,shiftBy:D}=C;let F=Number(E&T),I=E>>D;F>_&&(F-=P,I+=n);const U=S*_,L=U+Math.abs(F)-1,B=F===0,A=F<0,m=S%2!==0;return{nextN:I,offset:L,isZero:B,isNeg:A,isNegF:m,offsetF:U}}function c(E,S){if(!Array.isArray(E))throw new Error("array expected");E.forEach((C,_)=>{if(!(C instanceof S))throw new Error("invalid point at index "+_)})}function u(E,S){if(!Array.isArray(E))throw new Error("array of scalars expected");E.forEach((C,_)=>{if(!S.isValid(C))throw new Error("invalid scalar at index "+_)})}const l=new WeakMap,d=new WeakMap;function f(E){return d.get(E)||1}function p(E,S){return{constTimeNegate:s,hasPrecomputes(C){return f(C)!==1},unsafeLadder(C,_,T=E.ZERO){let P=C;for(;_>r;)_&n&&(T=T.add(P)),P=P.double(),_>>=n;return T},precomputeWindow(C,_){const{windows:T,windowSize:P}=o(_,S),D=[];let F=C,I=F;for(let U=0;U<T;U++){I=F,D.push(I);for(let L=1;L<P;L++)I=I.add(F),D.push(I);F=I.double()}return D},wNAF(C,_,T){let P=E.ZERO,D=E.BASE;const F=o(C,S);for(let I=0;I<F.windows;I++){const{nextN:U,offset:L,isZero:B,isNeg:A,isNegF:m,offsetF:b}=a(T,I,F);T=U,B?D=D.add(s(m,_[b])):P=P.add(s(A,_[L]))}return{p:P,f:D}},wNAFUnsafe(C,_,T,P=E.ZERO){const D=o(C,S);for(let F=0;F<D.windows&&T!==r;F++){const{nextN:I,offset:U,isZero:L,isNeg:B}=a(T,F,D);if(T=I,!L){const A=_[U];P=P.add(B?A.negate():A)}}return P},getPrecomputes(C,_,T){let P=l.get(_);return P||(P=this.precomputeWindow(_,C),C!==1&&l.set(_,T(P))),P},wNAFCached(C,_,T){const P=f(C);return this.wNAF(P,this.getPrecomputes(P,C,T),_)},wNAFCachedUnsafe(C,_,T,P){const D=f(C);return D===1?this.unsafeLadder(C,_,P):this.wNAFUnsafe(D,this.getPrecomputes(D,C,T),_,P)},setWindowSize(C,_){i(_,S),d.set(C,_),l.delete(C)}}}function g(E,S,C,_){c(C,E),u(_,S);const T=C.length,P=_.length;if(T!==P)throw new Error("arrays of points and scalars must have equal length");const D=E.ZERO,F=(0,e.bitLen)(BigInt(T));let I=1;F>12?I=F-3:F>4?I=F-2:F>0&&(I=2);const U=(0,e.bitMask)(I),L=new Array(Number(U)+1).fill(D),B=Math.floor((S.BITS-1)/I)*I;let A=D;for(let m=B;m>=0;m-=I){L.fill(D);for(let w=0;w<P;w++){const x=_[w],M=Number(x>>BigInt(m)&U);L[M]=L[M].add(C[w])}let b=D;for(let w=L.length-1,x=D;w>0;w--)x=x.add(L[w]),b=b.add(x);if(A=A.add(b),m!==0)for(let w=0;w<I;w++)A=A.double()}return A}function h(E,S,C,_){i(_,S.BITS),c(C,E);const T=E.ZERO,P=2**_-1,D=Math.ceil(S.BITS/_),F=(0,e.bitMask)(_),I=C.map(U=>{const L=[];for(let B=0,A=U;B<P;B++)L.push(A),A=A.add(U);return L});return U=>{if(u(U,S),U.length>C.length)throw new Error("array of scalars must be smaller than array of points");let L=T;for(let B=0;B<D;B++){if(L!==T)for(let m=0;m<_;m++)L=L.double();const A=BigInt(D*_-(B+1)*_);for(let m=0;m<U.length;m++){const b=U[m],w=Number(b>>A&F);w&&(L=L.add(I[m][w-1]))}}return L}}function y(E){return(0,t.validateField)(E.Fp),(0,e.validateObject)(E,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,t.nLength)(E.n,E.nBitLength),...E,p:E.Fp.ORDER})}return Ep}var vq;function use(){return vq||(vq=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=t.DERErr=void 0,t.weierstrassPoints=p,t.weierstrass=h,t.SWUFpSqrtRatio=y,t.mapToCurveSimpleSWU=E;const e=mUe(),r=CT(),n=ig();function s(S){S.lowS!==void 0&&(0,n.abool)("lowS",S.lowS),S.prehash!==void 0&&(0,n.abool)("prehash",S.prehash)}function i(S){const C=(0,e.validateBasic)(S);(0,n.validateObject)(C,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:_,Fp:T,a:P}=C;if(_){if(!T.eql(P,T.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof _!="object"||typeof _.beta!="bigint"||typeof _.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...C})}class o extends Error{constructor(C=""){super(C)}}t.DERErr=o,t.DER={Err:o,_tlv:{encode:(S,C)=>{const{Err:_}=t.DER;if(S<0||S>256)throw new _("tlv.encode: wrong tag");if(C.length&1)throw new _("tlv.encode: unpadded data");const T=C.length/2,P=(0,n.numberToHexUnpadded)(T);if(P.length/2&128)throw new _("tlv.encode: long form length too big");const D=T>127?(0,n.numberToHexUnpadded)(P.length/2|128):"";return(0,n.numberToHexUnpadded)(S)+D+P+C},decode(S,C){const{Err:_}=t.DER;let T=0;if(S<0||S>256)throw new _("tlv.encode: wrong tag");if(C.length<2||C[T++]!==S)throw new _("tlv.decode: wrong tlv");const P=C[T++],D=!!(P&128);let F=0;if(!D)F=P;else{const U=P&127;if(!U)throw new _("tlv.decode(long): indefinite length not supported");if(U>4)throw new _("tlv.decode(long): byte length is too big");const L=C.subarray(T,T+U);if(L.length!==U)throw new _("tlv.decode: length bytes not complete");if(L[0]===0)throw new _("tlv.decode(long): zero leftmost byte");for(const B of L)F=F<<8|B;if(T+=U,F<128)throw new _("tlv.decode(long): not minimal encoding")}const I=C.subarray(T,T+F);if(I.length!==F)throw new _("tlv.decode: wrong value length");return{v:I,l:C.subarray(T+F)}}},_int:{encode(S){const{Err:C}=t.DER;if(S<c)throw new C("integer: negative integers are not allowed");let _=(0,n.numberToHexUnpadded)(S);if(Number.parseInt(_[0],16)&8&&(_="00"+_),_.length&1)throw new C("unexpected DER parsing assertion: unpadded hex");return _},decode(S){const{Err:C}=t.DER;if(S[0]&128)throw new C("invalid signature integer: negative");if(S[0]===0&&!(S[1]&128))throw new C("invalid signature integer: unnecessary leading zero");return(0,n.bytesToNumberBE)(S)}},toSig(S){const{Err:C,_int:_,_tlv:T}=t.DER,P=(0,n.ensureBytes)("signature",S),{v:D,l:F}=T.decode(48,P);if(F.length)throw new C("invalid signature: left bytes after parsing");const{v:I,l:U}=T.decode(2,D),{v:L,l:B}=T.decode(2,U);if(B.length)throw new C("invalid signature: left bytes after parsing");return{r:_.decode(I),s:_.decode(L)}},hexFromSig(S){const{_tlv:C,_int:_}=t.DER,T=C.encode(2,_.encode(S.r)),P=C.encode(2,_.encode(S.s)),D=T+P;return C.encode(48,D)}};function a(S,C){return(0,n.bytesToHex)((0,n.numberToBytesBE)(S,C))}const c=BigInt(0),u=BigInt(1),l=BigInt(2),d=BigInt(3),f=BigInt(4);function p(S){const C=i(S),{Fp:_}=C,T=(0,r.Field)(C.n,C.nBitLength),P=C.toBytes||((N,v,R)=>{const $=v.toAffine();return(0,n.concatBytes)(Uint8Array.from([4]),_.toBytes($.x),_.toBytes($.y))}),D=C.fromBytes||(N=>{const v=N.subarray(1),R=_.fromBytes(v.subarray(0,_.BYTES)),$=_.fromBytes(v.subarray(_.BYTES,2*_.BYTES));return{x:R,y:$}});function F(N){const{a:v,b:R}=C,$=_.sqr(N),O=_.mul($,N);return _.add(_.add(O,_.mul(N,v)),R)}function I(N,v){const R=_.sqr(v),$=F(N);return _.eql(R,$)}if(!I(C.Gx,C.Gy))throw new Error("bad curve params: generator point");const U=_.mul(_.pow(C.a,d),f),L=_.mul(_.sqr(C.b),BigInt(27));if(_.is0(_.add(U,L)))throw new Error("bad curve params: a or b");function B(N){return(0,n.inRange)(N,u,C.n)}function A(N){const{allowedPrivateKeyLengths:v,nByteLength:R,wrapPrivateKey:$,n:O}=C;if(v&&typeof N!="bigint"){if((0,n.isBytes)(N)&&(N=(0,n.bytesToHex)(N)),typeof N!="string"||!v.includes(N.length))throw new Error("invalid private key");N=N.padStart(R*2,"0")}let H;try{H=typeof N=="bigint"?N:(0,n.bytesToNumberBE)((0,n.ensureBytes)("private key",N,R))}catch{throw new Error("invalid private key, expected hex or "+R+" bytes, got "+typeof N)}return $&&(H=(0,r.mod)(H,O)),(0,n.aInRange)("private key",H,u,O),H}function m(N){if(!(N instanceof x))throw new Error("ProjectivePoint expected")}const b=(0,n.memoized)((N,v)=>{const{px:R,py:$,pz:O}=N;if(_.eql(O,_.ONE))return{x:R,y:$};const H=N.is0();v==null&&(v=H?_.ONE:_.inv(O));const W=_.mul(R,v),G=_.mul($,v),K=_.mul(O,v);if(H)return{x:_.ZERO,y:_.ZERO};if(!_.eql(K,_.ONE))throw new Error("invZ was invalid");return{x:W,y:G}}),w=(0,n.memoized)(N=>{if(N.is0()){if(C.allowInfinityPoint&&!_.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:v,y:R}=N.toAffine();if(!_.isValid(v)||!_.isValid(R))throw new Error("bad point: x or y not FE");if(!I(v,R))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class x{constructor(v,R,$){if(v==null||!_.isValid(v))throw new Error("x required");if(R==null||!_.isValid(R)||_.is0(R))throw new Error("y required");if($==null||!_.isValid($))throw new Error("z required");this.px=v,this.py=R,this.pz=$,Object.freeze(this)}static fromAffine(v){const{x:R,y:$}=v||{};if(!v||!_.isValid(R)||!_.isValid($))throw new Error("invalid affine point");if(v instanceof x)throw new Error("projective point not allowed");const O=H=>_.eql(H,_.ZERO);return O(R)&&O($)?x.ZERO:new x(R,$,_.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const R=(0,r.FpInvertBatch)(_,v.map($=>$.pz));return v.map(($,O)=>$.toAffine(R[O])).map(x.fromAffine)}static fromHex(v){const R=x.fromAffine(D((0,n.ensureBytes)("pointHex",v)));return R.assertValidity(),R}static fromPrivateKey(v){return x.BASE.multiply(A(v))}static msm(v,R){return(0,e.pippenger)(x,T,v,R)}_setWindowSize(v){j.setWindowSize(this,v)}assertValidity(){w(this)}hasEvenY(){const{y:v}=this.toAffine();if(_.isOdd)return!_.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){m(v);const{px:R,py:$,pz:O}=this,{px:H,py:W,pz:G}=v,K=_.eql(_.mul(R,G),_.mul(H,O)),Q=_.eql(_.mul($,G),_.mul(W,O));return K&&Q}negate(){return new x(this.px,_.neg(this.py),this.pz)}double(){const{a:v,b:R}=C,$=_.mul(R,d),{px:O,py:H,pz:W}=this;let G=_.ZERO,K=_.ZERO,Q=_.ZERO,re=_.mul(O,O),de=_.mul(H,H),le=_.mul(W,W),se=_.mul(O,H);return se=_.add(se,se),Q=_.mul(O,W),Q=_.add(Q,Q),G=_.mul(v,Q),K=_.mul($,le),K=_.add(G,K),G=_.sub(de,K),K=_.add(de,K),K=_.mul(G,K),G=_.mul(se,G),Q=_.mul($,Q),le=_.mul(v,le),se=_.sub(re,le),se=_.mul(v,se),se=_.add(se,Q),Q=_.add(re,re),re=_.add(Q,re),re=_.add(re,le),re=_.mul(re,se),K=_.add(K,re),le=_.mul(H,W),le=_.add(le,le),re=_.mul(le,se),G=_.sub(G,re),Q=_.mul(le,de),Q=_.add(Q,Q),Q=_.add(Q,Q),new x(G,K,Q)}add(v){m(v);const{px:R,py:$,pz:O}=this,{px:H,py:W,pz:G}=v;let K=_.ZERO,Q=_.ZERO,re=_.ZERO;const de=C.a,le=_.mul(C.b,d);let se=_.mul(R,H),be=_.mul($,W),We=_.mul(O,G),Ne=_.add(R,$),Be=_.add(H,W);Ne=_.mul(Ne,Be),Be=_.add(se,be),Ne=_.sub(Ne,Be),Be=_.add(R,O);let At=_.add(H,G);return Be=_.mul(Be,At),At=_.add(se,We),Be=_.sub(Be,At),At=_.add($,O),K=_.add(W,G),At=_.mul(At,K),K=_.add(be,We),At=_.sub(At,K),re=_.mul(de,Be),K=_.mul(le,We),re=_.add(K,re),K=_.sub(be,re),re=_.add(be,re),Q=_.mul(K,re),be=_.add(se,se),be=_.add(be,se),We=_.mul(de,We),Be=_.mul(le,Be),be=_.add(be,We),We=_.sub(se,We),We=_.mul(de,We),Be=_.add(Be,We),se=_.mul(be,Be),Q=_.add(Q,se),se=_.mul(At,Be),K=_.mul(Ne,K),K=_.sub(K,se),se=_.mul(Ne,be),re=_.mul(At,re),re=_.add(re,se),new x(K,Q,re)}subtract(v){return this.add(v.negate())}is0(){return this.equals(x.ZERO)}wNAF(v){return j.wNAFCached(this,v,x.normalizeZ)}multiplyUnsafe(v){const{endo:R,n:$}=C;(0,n.aInRange)("scalar",v,c,$);const O=x.ZERO;if(v===c)return O;if(this.is0()||v===u)return this;if(!R||j.hasPrecomputes(this))return j.wNAFCachedUnsafe(this,v,x.normalizeZ);let{k1neg:H,k1:W,k2neg:G,k2:K}=R.splitScalar(v),Q=O,re=O,de=this;for(;W>c||K>c;)W&u&&(Q=Q.add(de)),K&u&&(re=re.add(de)),de=de.double(),W>>=u,K>>=u;return H&&(Q=Q.negate()),G&&(re=re.negate()),re=new x(_.mul(re.px,R.beta),re.py,re.pz),Q.add(re)}multiply(v){const{endo:R,n:$}=C;(0,n.aInRange)("scalar",v,u,$);let O,H;if(R){const{k1neg:W,k1:G,k2neg:K,k2:Q}=R.splitScalar(v);let{p:re,f:de}=this.wNAF(G),{p:le,f:se}=this.wNAF(Q);re=j.constTimeNegate(W,re),le=j.constTimeNegate(K,le),le=new x(_.mul(le.px,R.beta),le.py,le.pz),O=re.add(le),H=de.add(se)}else{const{p:W,f:G}=this.wNAF(v);O=W,H=G}return x.normalizeZ([O,H])[0]}multiplyAndAddUnsafe(v,R,$){const O=x.BASE,H=(G,K)=>K===c||K===u||!G.equals(O)?G.multiplyUnsafe(K):G.multiply(K),W=H(this,R).add(H(v,$));return W.is0()?void 0:W}toAffine(v){return b(this,v)}isTorsionFree(){const{h:v,isTorsionFree:R}=C;if(v===u)return!0;if(R)return R(x,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:R}=C;return v===u?this:R?R(x,this):this.multiplyUnsafe(C.h)}toRawBytes(v=!0){return(0,n.abool)("isCompressed",v),this.assertValidity(),P(x,this,v)}toHex(v=!0){return(0,n.abool)("isCompressed",v),(0,n.bytesToHex)(this.toRawBytes(v))}}x.BASE=new x(C.Gx,C.Gy,_.ONE),x.ZERO=new x(_.ZERO,_.ONE,_.ZERO);const{endo:M,nBitLength:k}=C,j=(0,e.wNAF)(x,M?Math.ceil(k/2):k);return{CURVE:C,ProjectivePoint:x,normPrivateKeyToScalar:A,weierstrassEquation:F,isWithinCurveOrder:B}}function g(S){const C=(0,e.validateBasic)(S);return(0,n.validateObject)(C,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...C})}function h(S){const C=g(S),{Fp:_,n:T,nByteLength:P,nBitLength:D}=C,F=_.BYTES+1,I=2*_.BYTES+1;function U(le){return(0,r.mod)(le,T)}function L(le){return(0,r.invert)(le,T)}const{ProjectivePoint:B,normPrivateKeyToScalar:A,weierstrassEquation:m,isWithinCurveOrder:b}=p({...C,toBytes(le,se,be){const We=se.toAffine(),Ne=_.toBytes(We.x),Be=n.concatBytes;return(0,n.abool)("isCompressed",be),be?Be(Uint8Array.from([se.hasEvenY()?2:3]),Ne):Be(Uint8Array.from([4]),Ne,_.toBytes(We.y))},fromBytes(le){const se=le.length,be=le[0],We=le.subarray(1);if(se===F&&(be===2||be===3)){const Ne=(0,n.bytesToNumberBE)(We);if(!(0,n.inRange)(Ne,u,_.ORDER))throw new Error("Point is not on curve");const Be=m(Ne);let At;try{At=_.sqrt(Be)}catch(Mt){const bt=Mt instanceof Error?": "+Mt.message:"";throw new Error("Point is not on curve"+bt)}const Ee=(At&u)===u;return(be&1)===1!==Ee&&(At=_.neg(At)),{x:Ne,y:At}}else if(se===I&&be===4){const Ne=_.fromBytes(We.subarray(0,_.BYTES)),Be=_.fromBytes(We.subarray(_.BYTES,2*_.BYTES));return{x:Ne,y:Be}}else{const Ne=F,Be=I;throw new Error("invalid Point, expected length of "+Ne+", or uncompressed "+Be+", got "+se)}}});function w(le){const se=T>>u;return le>se}function x(le){return w(le)?U(-le):le}const M=(le,se,be)=>(0,n.bytesToNumberBE)(le.slice(se,be));class k{constructor(se,be,We){(0,n.aInRange)("r",se,u,T),(0,n.aInRange)("s",be,u,T),this.r=se,this.s=be,We!=null&&(this.recovery=We),Object.freeze(this)}static fromCompact(se){const be=P;return se=(0,n.ensureBytes)("compactSignature",se,be*2),new k(M(se,0,be),M(se,be,2*be))}static fromDER(se){const{r:be,s:We}=t.DER.toSig((0,n.ensureBytes)("DER",se));return new k(be,We)}assertValidity(){}addRecoveryBit(se){return new k(this.r,this.s,se)}recoverPublicKey(se){const{r:be,s:We,recovery:Ne}=this,Be=O((0,n.ensureBytes)("msgHash",se));if(Ne==null||![0,1,2,3].includes(Ne))throw new Error("recovery id invalid");const At=Ne===2||Ne===3?be+C.n:be;if(At>=_.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ee=(Ne&1)===0?"02":"03",fe=B.fromHex(Ee+a(At,_.BYTES)),Mt=L(At),bt=U(-Be*Mt),jt=U(We*Mt),ge=B.BASE.multiplyAndAddUnsafe(fe,bt,jt);if(!ge)throw new Error("point at infinify");return ge.assertValidity(),ge}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new k(this.r,U(-this.s),this.recovery):this}toDERRawBytes(){return(0,n.hexToBytes)(this.toDERHex())}toDERHex(){return t.DER.hexFromSig(this)}toCompactRawBytes(){return(0,n.hexToBytes)(this.toCompactHex())}toCompactHex(){const se=P;return a(this.r,se)+a(this.s,se)}}const j={isValidPrivateKey(le){try{return A(le),!0}catch{return!1}},normPrivateKeyToScalar:A,randomPrivateKey:()=>{const le=(0,r.getMinHashLength)(C.n);return(0,r.mapHashToField)(C.randomBytes(le),C.n)},precompute(le=8,se=B.BASE){return se._setWindowSize(le),se.multiply(BigInt(3)),se}};function N(le,se=!0){return B.fromPrivateKey(le).toRawBytes(se)}function v(le){if(typeof le=="bigint")return!1;if(le instanceof B)return!0;const be=(0,n.ensureBytes)("key",le).length,We=_.BYTES,Ne=We+1,Be=2*We+1;if(!(C.allowedPrivateKeyLengths||P===Ne))return be===Ne||be===Be}function R(le,se,be=!0){if(v(le)===!0)throw new Error("first arg must be private key");if(v(se)===!1)throw new Error("second arg must be public key");return B.fromHex(se).multiply(A(le)).toRawBytes(be)}const $=C.bits2int||function(le){if(le.length>8192)throw new Error("input is too large");const se=(0,n.bytesToNumberBE)(le),be=le.length*8-D;return be>0?se>>BigInt(be):se},O=C.bits2int_modN||function(le){return U($(le))},H=(0,n.bitMask)(D);function W(le){return(0,n.aInRange)("num < 2^"+D,le,c,H),(0,n.numberToBytesBE)(le,P)}function G(le,se,be=K){if(["recovered","canonical"].some(V=>V in be))throw new Error("sign() legacy options not supported");const{hash:We,randomBytes:Ne}=C;let{lowS:Be,prehash:At,extraEntropy:Ee}=be;Be==null&&(Be=!0),le=(0,n.ensureBytes)("msgHash",le),s(be),At&&(le=(0,n.ensureBytes)("prehashed msgHash",We(le)));const fe=O(le),Mt=A(se),bt=[W(Mt),W(fe)];if(Ee!=null&&Ee!==!1){const V=Ee===!0?Ne(_.BYTES):Ee;bt.push((0,n.ensureBytes)("extraEntropy",V))}const jt=(0,n.concatBytes)(...bt),ge=fe;function ve(V){const q=$(V);if(!b(q))return;const z=L(q),X=B.BASE.multiply(q).toAffine(),ne=U(X.x);if(ne===c)return;const ce=U(z*U(ge+ne*Mt));if(ce===c)return;let me=(X.x===ne?0:2)|Number(X.y&u),Rt=ce;return Be&&w(ce)&&(Rt=x(ce),me^=1),new k(ne,Rt,me)}return{seed:jt,k2sig:ve}}const K={lowS:C.lowS,prehash:!1},Q={lowS:C.lowS,prehash:!1};function re(le,se,be=K){const{seed:We,k2sig:Ne}=G(le,se,be),Be=C;return(0,n.createHmacDrbg)(Be.hash.outputLen,Be.nByteLength,Be.hmac)(We,Ne)}B.BASE._setWindowSize(8);function de(le,se,be,We=Q){const Ne=le;se=(0,n.ensureBytes)("msgHash",se),be=(0,n.ensureBytes)("publicKey",be);const{lowS:Be,prehash:At,format:Ee}=We;if(s(We),"strict"in We)throw new Error("options.strict was renamed to lowS");if(Ee!==void 0&&Ee!=="compact"&&Ee!=="der")throw new Error("format must be compact or der");const fe=typeof Ne=="string"||(0,n.isBytes)(Ne),Mt=!fe&&!Ee&&typeof Ne=="object"&&Ne!==null&&typeof Ne.r=="bigint"&&typeof Ne.s=="bigint";if(!fe&&!Mt)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let bt,jt;try{if(Mt&&(bt=new k(Ne.r,Ne.s)),fe){try{Ee!=="compact"&&(bt=k.fromDER(Ne))}catch(me){if(!(me instanceof t.DER.Err))throw me}!bt&&Ee!=="der"&&(bt=k.fromCompact(Ne))}jt=B.fromHex(be)}catch{return!1}if(!bt||Be&&bt.hasHighS())return!1;At&&(se=C.hash(se));const{r:ge,s:ve}=bt,V=O(se),q=L(ve),z=U(V*q),X=U(ge*q),ne=B.BASE.multiplyAndAddUnsafe(jt,z,X)?.toAffine();return ne?U(ne.x)===ge:!1}return{CURVE:C,getPublicKey:N,getSharedSecret:R,sign:re,verify:de,ProjectivePoint:B,Signature:k,utils:j}}function y(S,C){const _=S.ORDER;let T=c;for(let w=_-u;w%l===c;w/=l)T+=u;const P=T,D=l<<P-u-u,F=D*l,I=(_-u)/F,U=(I-u)/l,L=F-u,B=D,A=S.pow(C,I),m=S.pow(C,(I+u)/l);let b=(w,x)=>{let M=A,k=S.pow(x,L),j=S.sqr(k);j=S.mul(j,x);let N=S.mul(w,j);N=S.pow(N,U),N=S.mul(N,k),k=S.mul(N,x),j=S.mul(N,w);let v=S.mul(j,k);N=S.pow(v,B);let R=S.eql(N,S.ONE);k=S.mul(j,m),N=S.mul(v,M),j=S.cmov(k,j,R),v=S.cmov(N,v,R);for(let $=P;$>u;$--){let O=$-l;O=l<<O-u;let H=S.pow(v,O);const W=S.eql(H,S.ONE);k=S.mul(j,M),M=S.mul(M,M),H=S.mul(v,M),j=S.cmov(k,j,W),v=S.cmov(H,v,W)}return{isValid:R,value:j}};if(S.ORDER%f===d){const w=(S.ORDER-d)/f,x=S.sqrt(S.neg(C));b=(M,k)=>{let j=S.sqr(k);const N=S.mul(M,k);j=S.mul(j,N);let v=S.pow(j,w);v=S.mul(v,N);const R=S.mul(v,x),$=S.mul(S.sqr(v),k),O=S.eql($,M);let H=S.cmov(R,v,O);return{isValid:O,value:H}}}return b}function E(S,C){if((0,r.validateField)(S),!S.isValid(C.A)||!S.isValid(C.B)||!S.isValid(C.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const _=y(S,C.Z);if(!S.isOdd)throw new Error("Fp.isOdd is not implemented!");return T=>{let P,D,F,I,U,L,B,A;P=S.sqr(T),P=S.mul(P,C.Z),D=S.sqr(P),D=S.add(D,P),F=S.add(D,S.ONE),F=S.mul(F,C.B),I=S.cmov(C.Z,S.neg(D),!S.eql(D,S.ZERO)),I=S.mul(I,C.A),D=S.sqr(F),L=S.sqr(I),U=S.mul(L,C.A),D=S.add(D,U),D=S.mul(D,F),L=S.mul(L,I),U=S.mul(L,C.B),D=S.add(D,U),B=S.mul(P,F);const{isValid:m,value:b}=_(D,L);A=S.mul(P,T),A=S.mul(A,b),B=S.cmov(B,F,m),A=S.cmov(A,b,m);const w=S.isOdd(T)===S.isOdd(A);A=S.cmov(S.neg(A),A,w);const x=(0,r.FpInvertBatch)(S,[I],!0)[0];return B=S.mul(B,x),{x:B,y:A}}}})(qP)),qP}var Eq;function yUe(){if(Eq)return ww;Eq=1,Object.defineProperty(ww,"__esModule",{value:!0}),ww.getHash=n,ww.createCurve=s;const t=gUe(),e=Hh(),r=use();function n(i){return{hash:i,hmac:(o,...a)=>(0,t.hmac)(i,o,(0,e.concatBytes)(...a)),randomBytes:e.randomBytes}}function s(i,o){const a=c=>(0,r.weierstrass)({...i,...n(c)});return{...a(o),create:a}}return ww}var Df={},_q;function bUe(){if(_q)return Df;_q=1,Object.defineProperty(Df,"__esModule",{value:!0}),Df.expand_message_xmd=o,Df.expand_message_xof=a,Df.hash_to_field=c,Df.isogenyMap=u,Df.createHasher=l;const t=CT(),e=ig(),r=e.bytesToNumberBE;function n(d,f){if(i(d),i(f),d<0||d>=1<<8*f)throw new Error("invalid I2OSP input: "+d);const p=Array.from({length:f}).fill(0);for(let g=f-1;g>=0;g--)p[g]=d&255,d>>>=8;return new Uint8Array(p)}function s(d,f){const p=new Uint8Array(d.length);for(let g=0;g<d.length;g++)p[g]=d[g]^f[g];return p}function i(d){if(!Number.isSafeInteger(d))throw new Error("number expected")}function o(d,f,p,g){(0,e.abytes)(d),(0,e.abytes)(f),i(p),f.length>255&&(f=g((0,e.concatBytes)((0,e.utf8ToBytes)("H2C-OVERSIZE-DST-"),f)));const{outputLen:h,blockLen:y}=g,E=Math.ceil(p/h);if(p>65535||E>255)throw new Error("expand_message_xmd: invalid lenInBytes");const S=(0,e.concatBytes)(f,n(f.length,1)),C=n(0,y),_=n(p,2),T=new Array(E),P=g((0,e.concatBytes)(C,d,_,n(0,1),S));T[0]=g((0,e.concatBytes)(P,n(1,1),S));for(let F=1;F<=E;F++){const I=[s(P,T[F-1]),n(F+1,1),S];T[F]=g((0,e.concatBytes)(...I))}return(0,e.concatBytes)(...T).slice(0,p)}function a(d,f,p,g,h){if((0,e.abytes)(d),(0,e.abytes)(f),i(p),f.length>255){const y=Math.ceil(2*g/8);f=h.create({dkLen:y}).update((0,e.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(f).digest()}if(p>65535||f.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return h.create({dkLen:p}).update(d).update(n(p,2)).update(f).update(n(f.length,1)).digest()}function c(d,f,p){(0,e.validateObject)(p,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:g,k:h,m:y,hash:E,expand:S,DST:C}=p;(0,e.abytes)(d),i(f);const _=typeof C=="string"?(0,e.utf8ToBytes)(C):C,T=g.toString(2).length,P=Math.ceil((T+h)/8),D=f*y*P;let F;if(S==="xmd")F=o(d,_,D,E);else if(S==="xof")F=a(d,_,D,h,E);else if(S==="_internal_pass")F=d;else throw new Error('expand must be "xmd" or "xof"');const I=new Array(f);for(let U=0;U<f;U++){const L=new Array(y);for(let B=0;B<y;B++){const A=P*(B+U*y),m=F.subarray(A,A+P);L[B]=(0,t.mod)(r(m),g)}I[U]=L}return I}function u(d,f){const p=f.map(g=>Array.from(g).reverse());return(g,h)=>{const[y,E,S,C]=p.map(P=>P.reduce((D,F)=>d.add(d.mul(D,g),F))),[_,T]=(0,t.FpInvertBatch)(d,[E,C],!0);return g=d.mul(y,_),h=d.mul(h,d.mul(S,T)),{x:g,y:h}}}function l(d,f,p){if(typeof f!="function")throw new Error("mapToCurve() must be defined");function g(y){return d.fromAffine(f(y))}function h(y){const E=y.clearCofactor();return E.equals(d.ZERO)?d.ZERO:(E.assertValidity(),E)}return{defaults:p,hashToCurve(y,E){const S=c(y,2,{...p,DST:p.DST,...E}),C=g(S[0]),_=g(S[1]);return h(C.add(_))},encodeToCurve(y,E){const S=c(y,1,{...p,DST:p.encodeDST,...E});return h(g(S[0]))},mapToCurve(y){if(!Array.isArray(y))throw new Error("expected array of bigints");for(const E of y)if(typeof E!="bigint")throw new Error("expected array of bigints");return h(g(y))}}}return Df}var Aq;function og(){return Aq||(Aq=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.secp256k1_hasher=t.schnorr=t.secp256k1=void 0;const e=cse(),r=Hh(),n=yUe(),s=bUe(),i=CT(),o=ig(),a=use(),c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),u=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),l=BigInt(0),d=BigInt(1),f=BigInt(2),p=(x,M)=>(x+M/f)/M;function g(x){const M=c,k=BigInt(3),j=BigInt(6),N=BigInt(11),v=BigInt(22),R=BigInt(23),$=BigInt(44),O=BigInt(88),H=x*x*x%M,W=H*H*x%M,G=(0,i.pow2)(W,k,M)*W%M,K=(0,i.pow2)(G,k,M)*W%M,Q=(0,i.pow2)(K,f,M)*H%M,re=(0,i.pow2)(Q,N,M)*Q%M,de=(0,i.pow2)(re,v,M)*re%M,le=(0,i.pow2)(de,$,M)*de%M,se=(0,i.pow2)(le,O,M)*le%M,be=(0,i.pow2)(se,$,M)*de%M,We=(0,i.pow2)(be,k,M)*W%M,Ne=(0,i.pow2)(We,R,M)*re%M,Be=(0,i.pow2)(Ne,j,M)*H%M,At=(0,i.pow2)(Be,f,M);if(!h.eql(h.sqr(At),x))throw new Error("Cannot find square root");return At}const h=(0,i.Field)(c,void 0,void 0,{sqrt:g});t.secp256k1=(0,n.createCurve)({a:l,b:BigInt(7),Fp:h,n:u,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:x=>{const M=u,k=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),j=-d*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),N=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),v=k,R=BigInt("0x100000000000000000000000000000000"),$=p(v*x,M),O=p(-j*x,M);let H=(0,i.mod)(x-$*k-O*N,M),W=(0,i.mod)(-$*j-O*v,M);const G=H>R,K=W>R;if(G&&(H=M-H),K&&(W=M-W),H>R||W>R)throw new Error("splitScalar: Endomorphism failed, k="+x);return{k1neg:G,k1:H,k2neg:K,k2:W}}}},e.sha256);const y={};function E(x,...M){let k=y[x];if(k===void 0){const j=(0,e.sha256)(Uint8Array.from(x,N=>N.charCodeAt(0)));k=(0,o.concatBytes)(j,j),y[x]=k}return(0,e.sha256)((0,o.concatBytes)(k,...M))}const S=x=>x.toRawBytes(!0).slice(1),C=x=>(0,o.numberToBytesBE)(x,32),_=x=>(0,i.mod)(x,c),T=x=>(0,i.mod)(x,u),P=t.secp256k1.ProjectivePoint,D=(x,M,k)=>P.BASE.multiplyAndAddUnsafe(x,M,k);function F(x){let M=t.secp256k1.utils.normPrivateKeyToScalar(x),k=P.fromPrivateKey(M);return{scalar:k.hasEvenY()?M:T(-M),bytes:S(k)}}function I(x){(0,o.aInRange)("x",x,d,c);const M=_(x*x),k=_(M*x+BigInt(7));let j=g(k);j%f!==l&&(j=_(-j));const N=new P(x,j,d);return N.assertValidity(),N}const U=o.bytesToNumberBE;function L(...x){return T(U(E("BIP0340/challenge",...x)))}function B(x){return F(x).bytes}function A(x,M,k=(0,r.randomBytes)(32)){const j=(0,o.ensureBytes)("message",x),{bytes:N,scalar:v}=F(M),R=(0,o.ensureBytes)("auxRand",k,32),$=C(v^U(E("BIP0340/aux",R))),O=E("BIP0340/nonce",$,N,j),H=T(U(O));if(H===l)throw new Error("sign failed: k is zero");const{bytes:W,scalar:G}=F(H),K=L(W,N,j),Q=new Uint8Array(64);if(Q.set(W,0),Q.set(C(T(G+K*v)),32),!m(Q,j,N))throw new Error("sign: Invalid signature produced");return Q}function m(x,M,k){const j=(0,o.ensureBytes)("signature",x,64),N=(0,o.ensureBytes)("message",M),v=(0,o.ensureBytes)("publicKey",k,32);try{const R=I(U(v)),$=U(j.subarray(0,32));if(!(0,o.inRange)($,d,c))return!1;const O=U(j.subarray(32,64));if(!(0,o.inRange)(O,d,u))return!1;const H=L(C($),S(R),N),W=D(R,O,T(-H));return!(!W||!W.hasEvenY()||W.toAffine().x!==$)}catch{return!1}}t.schnorr={getPublicKey:B,sign:A,verify:m,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:I,pointToBytes:S,numberToBytesBE:o.numberToBytesBE,bytesToNumberBE:o.bytesToNumberBE,taggedHash:E,mod:i.mod}};const b=(0,s.isogenyMap)(h,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(x=>x.map(M=>BigInt(M)))),w=(0,a.mapToCurveSimpleSWU)(h,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:h.create(BigInt("-11"))});t.secp256k1_hasher=(0,s.createHasher)(t.secp256k1.ProjectivePoint,x=>{const{x:M,y:k}=w(h.create(x[0]));return b(M,k)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:h.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256}),t.hashToCurve=t.secp256k1_hasher.hashToCurve,t.encodeToCurve=t.secp256k1_hasher.encodeToCurve})(FP)),FP}var xq;function bB(){if(xq)return cA;xq=1,Object.defineProperty(cA,"__esModule",{value:!0}),cA.recoverPublicKey=s;const t=$o(),e=Ca(),r=ys(),n=tt();async function s({hash:o,signature:a}){const c=(0,t.isHex)(o)?o:(0,n.toHex)(o),{secp256k1:u}=await Promise.resolve().then(()=>og());return`0x${(()=>{if(typeof a=="object"&&"r"in a&&"s"in a){const{r:h,s:y,v:E,yParity:S}=a,C=Number(S??E),_=i(C);return new u.Signature((0,r.hexToBigInt)(h),(0,r.hexToBigInt)(y)).addRecoveryBit(_)}const f=(0,t.isHex)(a)?a:(0,n.toHex)(a);if((0,e.size)(f)!==65)throw new Error("invalid signature length");const p=(0,r.hexToNumber)(`0x${f.slice(130)}`),g=i(p);return u.Signature.fromCompact(f.substring(2,130)).addRecoveryBit(g)})().recoverPublicKey(c.substring(2)).toHex(!1)}`}function i(o){if(o===0||o===1)return o;if(o===27)return 0;if(o===28)return 1;throw new Error("Invalid yParityOrV value")}return cA}var Cq;function Kh(){if(Cq)return oA;Cq=1,Object.defineProperty(oA,"__esModule",{value:!0}),oA.recoverAddress=r;const t=ose(),e=bB();async function r({hash:n,signature:s}){return(0,t.publicKeyToAddress)(await(0,e.recoverPublicKey)({hash:n,signature:s}))}return oA}var uA={},$g={},Sq;function t_(){if(Sq)return $g;Sq=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.toRlp=s,$g.bytesToRlp=i,$g.hexToRlp=o;const t=Kt(),e=XE(),r=Pn(),n=tt();function s(d,f="hex"){const p=a(d),g=(0,e.createCursor)(new Uint8Array(p.length));return p.encode(g),f==="hex"?(0,n.bytesToHex)(g.bytes):g.bytes}function i(d,f="bytes"){return s(d,f)}function o(d,f="hex"){return s(d,f)}function a(d){return Array.isArray(d)?c(d.map(f=>a(f))):u(d)}function c(d){const f=d.reduce((h,y)=>h+y.length,0),p=l(f);return{length:f<=55?1+f:1+p+f,encode(h){f<=55?h.pushByte(192+f):(h.pushByte(247+p),p===1?h.pushUint8(f):p===2?h.pushUint16(f):p===3?h.pushUint24(f):h.pushUint32(f));for(const{encode:y}of d)y(h)}}}function u(d){const f=typeof d=="string"?(0,r.hexToBytes)(d):d,p=l(f.length);return{length:f.length===1&&f[0]<128?1:f.length<=55?1+f.length:1+p+f.length,encode(h){f.length===1&&f[0]<128?h.pushBytes(f):f.length<=55?(h.pushByte(128+f.length),h.pushBytes(f)):(h.pushByte(183+p),p===1?h.pushUint8(f.length):p===2?h.pushUint16(f.length):p===3?h.pushUint24(f.length):h.pushUint32(f.length),h.pushBytes(f))}}}function l(d){if(d<2**8)return 1;if(d<2**16)return 2;if(d<2**24)return 3;if(d<2**32)return 4;throw new t.BaseError("Length is too large.")}return $g}var Iq;function lse(){if(Iq)return uA;Iq=1,Object.defineProperty(uA,"__esModule",{value:!0}),uA.hashAuthorization=i;const t=fi(),e=Pn(),r=tt(),n=t_(),s=Sa();function i(o){const{chainId:a,nonce:c,to:u}=o,l=o.contractAddress??o.address,d=(0,s.keccak256)((0,t.concatHex)(["0x05",(0,n.toRlp)([a?(0,r.numberToHex)(a):"0x",l,c?(0,r.numberToHex)(c):"0x"])]));return u==="bytes"?(0,e.hexToBytes)(d):d}return uA}var Tq;function r_(){if(Tq)return iA;Tq=1,Object.defineProperty(iA,"__esModule",{value:!0}),iA.recoverAuthorizationAddress=r;const t=Kh(),e=lse();async function r(n){const{authorization:s,signature:i}=n;return(0,t.recoverAddress)({hash:(0,e.hashAuthorization)(s),signature:i??s})}return iA}var lA={},vw={},Nq;function dse(){if(Nq)return vw;Nq=1,Object.defineProperty(vw,"__esModule",{value:!0}),vw.EstimateGasExecutionError=void 0;const t=e_(),e=sg(),r=Kt(),n=Na();class s extends r.BaseError{constructor(o,{account:a,docsPath:c,chain:u,data:l,gas:d,gasPrice:f,maxFeePerGas:p,maxPriorityFeePerGas:g,nonce:h,to:y,value:E}){const S=(0,n.prettyPrint)({from:a?.address,to:y,value:typeof E<"u"&&`${(0,t.formatEther)(E)} ${u?.nativeCurrency?.symbol||"ETH"}`,data:l,gas:d,gasPrice:typeof f<"u"&&`${(0,e.formatGwei)(f)} gwei`,maxFeePerGas:typeof p<"u"&&`${(0,e.formatGwei)(p)} gwei`,maxPriorityFeePerGas:typeof g<"u"&&`${(0,e.formatGwei)(g)} gwei`,nonce:h});super(o.shortMessage,{cause:o,docsPath:c,metaMessages:[...o.metaMessages?[...o.metaMessages," "]:[],"Estimate Gas Arguments:",S].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=o}}return vw.EstimateGasExecutionError=s,vw}var In={},Pq;function uf(){if(Pq)return In;Pq=1,Object.defineProperty(In,"__esModule",{value:!0}),In.UnknownNodeError=In.TipAboveFeeCapError=In.TransactionTypeNotSupportedError=In.IntrinsicGasTooLowError=In.IntrinsicGasTooHighError=In.InsufficientFundsError=In.NonceMaxValueError=In.NonceTooLowError=In.NonceTooHighError=In.FeeCapTooLowError=In.FeeCapTooHighError=In.ExecutionRevertedError=void 0;const t=sg(),e=Kt();class r extends e.BaseError{constructor({cause:h,message:y}={}){const E=y?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${E?`with reason: ${E}`:"for an unknown reason"}.`,{cause:h,name:"ExecutionRevertedError"})}}In.ExecutionRevertedError=r,Object.defineProperty(r,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(r,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class n extends e.BaseError{constructor({cause:h,maxFeePerGas:y}={}){super(`The fee cap (\`maxFeePerGas\`${y?` = ${(0,t.formatGwei)(y)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:h,name:"FeeCapTooHighError"})}}In.FeeCapTooHighError=n,Object.defineProperty(n,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class s extends e.BaseError{constructor({cause:h,maxFeePerGas:y}={}){super(`The fee cap (\`maxFeePerGas\`${y?` = ${(0,t.formatGwei)(y)}`:""} gwei) cannot be lower than the block base fee.`,{cause:h,name:"FeeCapTooLowError"})}}In.FeeCapTooLowError=s,Object.defineProperty(s,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class i extends e.BaseError{constructor({cause:h,nonce:y}={}){super(`Nonce provided for the transaction ${y?`(${y}) `:""}is higher than the next one expected.`,{cause:h,name:"NonceTooHighError"})}}In.NonceTooHighError=i,Object.defineProperty(i,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class o extends e.BaseError{constructor({cause:h,nonce:y}={}){super([`Nonce provided for the transaction ${y?`(${y}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:h,name:"NonceTooLowError"})}}In.NonceTooLowError=o,Object.defineProperty(o,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class a extends e.BaseError{constructor({cause:h,nonce:y}={}){super(`Nonce provided for the transaction ${y?`(${y}) `:""}exceeds the maximum allowed nonce.`,{cause:h,name:"NonceMaxValueError"})}}In.NonceMaxValueError=a,Object.defineProperty(a,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class c extends e.BaseError{constructor({cause:h}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:h,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}In.InsufficientFundsError=c,Object.defineProperty(c,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class u extends e.BaseError{constructor({cause:h,gas:y}={}){super(`The amount of gas ${y?`(${y}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:h,name:"IntrinsicGasTooHighError"})}}In.IntrinsicGasTooHighError=u,Object.defineProperty(u,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class l extends e.BaseError{constructor({cause:h,gas:y}={}){super(`The amount of gas ${y?`(${y}) `:""}provided for the transaction is too low.`,{cause:h,name:"IntrinsicGasTooLowError"})}}In.IntrinsicGasTooLowError=l,Object.defineProperty(l,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class d extends e.BaseError{constructor({cause:h}){super("The transaction type is not supported for this chain.",{cause:h,name:"TransactionTypeNotSupportedError"})}}In.TransactionTypeNotSupportedError=d,Object.defineProperty(d,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class f extends e.BaseError{constructor({cause:h,maxPriorityFeePerGas:y,maxFeePerGas:E}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${y?` = ${(0,t.formatGwei)(y)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${E?` = ${(0,t.formatGwei)(E)} gwei`:""}).`].join(`
`),{cause:h,name:"TipAboveFeeCapError"})}}In.TipAboveFeeCapError=f,Object.defineProperty(f,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class p extends e.BaseError{constructor({cause:h}){super(`An error occurred while executing: ${h?.shortMessage}`,{cause:h,name:"UnknownNodeError"})}}return In.UnknownNodeError=p,In}var Ew={},Rq;function n_(){if(Rq)return Ew;Rq=1,Object.defineProperty(Ew,"__esModule",{value:!0}),Ew.containsNodeError=s,Ew.getNodeError=i;const t=Kt(),e=uf(),r=Hu(),n=Vh();function s(o){return o instanceof n.TransactionRejectedRpcError||o instanceof n.InvalidInputRpcError||o instanceof r.RpcRequestError&&o.code===e.ExecutionRevertedError.code}function i(o,a){const c=(o.details||"").toLowerCase(),u=o instanceof t.BaseError?o.walk(l=>l?.code===e.ExecutionRevertedError.code):o;return u instanceof t.BaseError?new e.ExecutionRevertedError({cause:o,message:u.details}):e.ExecutionRevertedError.nodeMessage.test(c)?new e.ExecutionRevertedError({cause:o,message:o.details}):e.FeeCapTooHighError.nodeMessage.test(c)?new e.FeeCapTooHighError({cause:o,maxFeePerGas:a?.maxFeePerGas}):e.FeeCapTooLowError.nodeMessage.test(c)?new e.FeeCapTooLowError({cause:o,maxFeePerGas:a?.maxFeePerGas}):e.NonceTooHighError.nodeMessage.test(c)?new e.NonceTooHighError({cause:o,nonce:a?.nonce}):e.NonceTooLowError.nodeMessage.test(c)?new e.NonceTooLowError({cause:o,nonce:a?.nonce}):e.NonceMaxValueError.nodeMessage.test(c)?new e.NonceMaxValueError({cause:o,nonce:a?.nonce}):e.InsufficientFundsError.nodeMessage.test(c)?new e.InsufficientFundsError({cause:o}):e.IntrinsicGasTooHighError.nodeMessage.test(c)?new e.IntrinsicGasTooHighError({cause:o,gas:a?.gas}):e.IntrinsicGasTooLowError.nodeMessage.test(c)?new e.IntrinsicGasTooLowError({cause:o,gas:a?.gas}):e.TransactionTypeNotSupportedError.nodeMessage.test(c)?new e.TransactionTypeNotSupportedError({cause:o}):e.TipAboveFeeCapError.nodeMessage.test(c)?new e.TipAboveFeeCapError({cause:o,maxFeePerGas:a?.maxFeePerGas,maxPriorityFeePerGas:a?.maxPriorityFeePerGas}):new e.UnknownNodeError({cause:o})}return Ew}var Oq;function fse(){if(Oq)return lA;Oq=1,Object.defineProperty(lA,"__esModule",{value:!0}),lA.getEstimateGasError=n;const t=dse(),e=uf(),r=n_();function n(s,{docsPath:i,...o}){const a=(()=>{const c=(0,r.getNodeError)(s,o);return c instanceof e.UnknownNodeError?s:c})();return new t.EstimateGasExecutionError(a,{docsPath:i,...o})}return lA}var dA={},kq;function Zh(){if(kq)return dA;kq=1,Object.defineProperty(dA,"__esModule",{value:!0}),dA.extract=t;function t(e,{format:r}){if(!r)return{};const n={};function s(o){const a=Object.keys(o);for(const c of a)c in e&&(n[c]=e[c]),o[c]&&typeof o[c]=="object"&&!Array.isArray(o[c])&&s(o[c])}const i=r(e||{});return s(i),n}return dA}var HP={},fA={},Bq;function s_(){if(Bq)return fA;Bq=1,Object.defineProperty(fA,"__esModule",{value:!0}),fA.defineFormatter=t;function t(e,r){return({exclude:n,format:s})=>({exclude:n,format:(i,o)=>{const a=r(i,o);if(n)for(const c of n)delete a[c];return{...a,...s(i,o)}},type:e})}return fA}var Uq;function zu(){return Uq||(Uq=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defineTransactionRequest=t.rpcTransactionType=void 0,t.formatTransactionRequest=n;const e=tt(),r=s_();t.rpcTransactionType={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function n(i,o){const a={};return typeof i.authorizationList<"u"&&(a.authorizationList=s(i.authorizationList)),typeof i.accessList<"u"&&(a.accessList=i.accessList),typeof i.blobVersionedHashes<"u"&&(a.blobVersionedHashes=i.blobVersionedHashes),typeof i.blobs<"u"&&(typeof i.blobs[0]!="string"?a.blobs=i.blobs.map(c=>(0,e.bytesToHex)(c)):a.blobs=i.blobs),typeof i.data<"u"&&(a.data=i.data),i.account&&(a.from=i.account.address),typeof i.from<"u"&&(a.from=i.from),typeof i.gas<"u"&&(a.gas=(0,e.numberToHex)(i.gas)),typeof i.gasPrice<"u"&&(a.gasPrice=(0,e.numberToHex)(i.gasPrice)),typeof i.maxFeePerBlobGas<"u"&&(a.maxFeePerBlobGas=(0,e.numberToHex)(i.maxFeePerBlobGas)),typeof i.maxFeePerGas<"u"&&(a.maxFeePerGas=(0,e.numberToHex)(i.maxFeePerGas)),typeof i.maxPriorityFeePerGas<"u"&&(a.maxPriorityFeePerGas=(0,e.numberToHex)(i.maxPriorityFeePerGas)),typeof i.nonce<"u"&&(a.nonce=(0,e.numberToHex)(i.nonce)),typeof i.to<"u"&&(a.to=i.to),typeof i.type<"u"&&(a.type=t.rpcTransactionType[i.type]),typeof i.value<"u"&&(a.value=(0,e.numberToHex)(i.value)),a}t.defineTransactionRequest=(0,r.defineFormatter)("transactionRequest",n);function s(i){return i.map(o=>({address:o.address,r:o.r?(0,e.numberToHex)(BigInt(o.r)):o.r,s:o.s?(0,e.numberToHex)(BigInt(o.s)):o.s,chainId:(0,e.numberToHex)(o.chainId),nonce:(0,e.numberToHex)(o.nonce),...typeof o.yParity<"u"?{yParity:(0,e.numberToHex)(o.yParity)}:{},...typeof o.v<"u"&&typeof o.yParity>"u"?{v:(0,e.numberToHex)(o.v)}:{}}))}})(HP)),HP}var qg={},Mq;function wB(){if(Mq)return qg;Mq=1,Object.defineProperty(qg,"__esModule",{value:!0}),qg.serializeStateMapping=i,qg.serializeAccountStateOverride=o,qg.serializeStateOverride=a;const t=$u(),e=wT(),r=mB(),n=Ia(),s=tt();function i(c){if(!(!c||c.length===0))return c.reduce((u,{slot:l,value:d})=>{if(l.length!==66)throw new e.InvalidBytesLengthError({size:l.length,targetSize:66,type:"hex"});if(d.length!==66)throw new e.InvalidBytesLengthError({size:d.length,targetSize:66,type:"hex"});return u[l]=d,u},{})}function o(c){const{balance:u,nonce:l,state:d,stateDiff:f,code:p}=c,g={};if(p!==void 0&&(g.code=p),u!==void 0&&(g.balance=(0,s.numberToHex)(u)),l!==void 0&&(g.nonce=(0,s.numberToHex)(l)),d!==void 0&&(g.state=i(d)),f!==void 0){if(g.state)throw new r.StateAssignmentConflictError;g.stateDiff=i(f)}return g}function a(c){if(!c)return;const u={};for(const{address:l,...d}of c){if(!(0,n.isAddress)(l,{strict:!1}))throw new t.InvalidAddressError({address:l});if(u[l])throw new r.AccountStateConflictError({address:l});u[l]=o(d)}return u}return qg}var hA={},oe={},Dq;function vB(){return Dq||(Dq=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.minInt144=oe.minInt136=oe.minInt128=oe.minInt120=oe.minInt112=oe.minInt104=oe.minInt96=oe.minInt88=oe.minInt80=oe.minInt72=oe.minInt64=oe.minInt56=oe.minInt48=oe.minInt40=oe.minInt32=oe.minInt24=oe.minInt16=oe.minInt8=oe.maxInt256=oe.maxInt248=oe.maxInt240=oe.maxInt232=oe.maxInt224=oe.maxInt216=oe.maxInt208=oe.maxInt200=oe.maxInt192=oe.maxInt184=oe.maxInt176=oe.maxInt168=oe.maxInt160=oe.maxInt152=oe.maxInt144=oe.maxInt136=oe.maxInt128=oe.maxInt120=oe.maxInt112=oe.maxInt104=oe.maxInt96=oe.maxInt88=oe.maxInt80=oe.maxInt72=oe.maxInt64=oe.maxInt56=oe.maxInt48=oe.maxInt40=oe.maxInt32=oe.maxInt24=oe.maxInt16=oe.maxInt8=void 0,oe.maxUint256=oe.maxUint248=oe.maxUint240=oe.maxUint232=oe.maxUint224=oe.maxUint216=oe.maxUint208=oe.maxUint200=oe.maxUint192=oe.maxUint184=oe.maxUint176=oe.maxUint168=oe.maxUint160=oe.maxUint152=oe.maxUint144=oe.maxUint136=oe.maxUint128=oe.maxUint120=oe.maxUint112=oe.maxUint104=oe.maxUint96=oe.maxUint88=oe.maxUint80=oe.maxUint72=oe.maxUint64=oe.maxUint56=oe.maxUint48=oe.maxUint40=oe.maxUint32=oe.maxUint24=oe.maxUint16=oe.maxUint8=oe.minInt256=oe.minInt248=oe.minInt240=oe.minInt232=oe.minInt224=oe.minInt216=oe.minInt208=oe.minInt200=oe.minInt192=oe.minInt184=oe.minInt176=oe.minInt168=oe.minInt160=oe.minInt152=void 0,oe.maxInt8=2n**(8n-1n)-1n,oe.maxInt16=2n**(16n-1n)-1n,oe.maxInt24=2n**(24n-1n)-1n,oe.maxInt32=2n**(32n-1n)-1n,oe.maxInt40=2n**(40n-1n)-1n,oe.maxInt48=2n**(48n-1n)-1n,oe.maxInt56=2n**(56n-1n)-1n,oe.maxInt64=2n**(64n-1n)-1n,oe.maxInt72=2n**(72n-1n)-1n,oe.maxInt80=2n**(80n-1n)-1n,oe.maxInt88=2n**(88n-1n)-1n,oe.maxInt96=2n**(96n-1n)-1n,oe.maxInt104=2n**(104n-1n)-1n,oe.maxInt112=2n**(112n-1n)-1n,oe.maxInt120=2n**(120n-1n)-1n,oe.maxInt128=2n**(128n-1n)-1n,oe.maxInt136=2n**(136n-1n)-1n,oe.maxInt144=2n**(144n-1n)-1n,oe.maxInt152=2n**(152n-1n)-1n,oe.maxInt160=2n**(160n-1n)-1n,oe.maxInt168=2n**(168n-1n)-1n,oe.maxInt176=2n**(176n-1n)-1n,oe.maxInt184=2n**(184n-1n)-1n,oe.maxInt192=2n**(192n-1n)-1n,oe.maxInt200=2n**(200n-1n)-1n,oe.maxInt208=2n**(208n-1n)-1n,oe.maxInt216=2n**(216n-1n)-1n,oe.maxInt224=2n**(224n-1n)-1n,oe.maxInt232=2n**(232n-1n)-1n,oe.maxInt240=2n**(240n-1n)-1n,oe.maxInt248=2n**(248n-1n)-1n,oe.maxInt256=2n**(256n-1n)-1n,oe.minInt8=-(2n**(8n-1n)),oe.minInt16=-(2n**(16n-1n)),oe.minInt24=-(2n**(24n-1n)),oe.minInt32=-(2n**(32n-1n)),oe.minInt40=-(2n**(40n-1n)),oe.minInt48=-(2n**(48n-1n)),oe.minInt56=-(2n**(56n-1n)),oe.minInt64=-(2n**(64n-1n)),oe.minInt72=-(2n**(72n-1n)),oe.minInt80=-(2n**(80n-1n)),oe.minInt88=-(2n**(88n-1n)),oe.minInt96=-(2n**(96n-1n)),oe.minInt104=-(2n**(104n-1n)),oe.minInt112=-(2n**(112n-1n)),oe.minInt120=-(2n**(120n-1n)),oe.minInt128=-(2n**(128n-1n)),oe.minInt136=-(2n**(136n-1n)),oe.minInt144=-(2n**(144n-1n)),oe.minInt152=-(2n**(152n-1n)),oe.minInt160=-(2n**(160n-1n)),oe.minInt168=-(2n**(168n-1n)),oe.minInt176=-(2n**(176n-1n)),oe.minInt184=-(2n**(184n-1n)),oe.minInt192=-(2n**(192n-1n)),oe.minInt200=-(2n**(200n-1n)),oe.minInt208=-(2n**(208n-1n)),oe.minInt216=-(2n**(216n-1n)),oe.minInt224=-(2n**(224n-1n)),oe.minInt232=-(2n**(232n-1n)),oe.minInt240=-(2n**(240n-1n)),oe.minInt248=-(2n**(248n-1n)),oe.minInt256=-(2n**(256n-1n)),oe.maxUint8=2n**8n-1n,oe.maxUint16=2n**16n-1n,oe.maxUint24=2n**24n-1n,oe.maxUint32=2n**32n-1n,oe.maxUint40=2n**40n-1n,oe.maxUint48=2n**48n-1n,oe.maxUint56=2n**56n-1n,oe.maxUint64=2n**64n-1n,oe.maxUint72=2n**72n-1n,oe.maxUint80=2n**80n-1n,oe.maxUint88=2n**88n-1n,oe.maxUint96=2n**96n-1n,oe.maxUint104=2n**104n-1n,oe.maxUint112=2n**112n-1n,oe.maxUint120=2n**120n-1n,oe.maxUint128=2n**128n-1n,oe.maxUint136=2n**136n-1n,oe.maxUint144=2n**144n-1n,oe.maxUint152=2n**152n-1n,oe.maxUint160=2n**160n-1n,oe.maxUint168=2n**168n-1n,oe.maxUint176=2n**176n-1n,oe.maxUint184=2n**184n-1n,oe.maxUint192=2n**192n-1n,oe.maxUint200=2n**200n-1n,oe.maxUint208=2n**208n-1n,oe.maxUint216=2n**216n-1n,oe.maxUint224=2n**224n-1n,oe.maxUint232=2n**232n-1n,oe.maxUint240=2n**240n-1n,oe.maxUint248=2n**248n-1n,oe.maxUint256=2n**256n-1n),oe}var jq;function Wu(){if(jq)return hA;jq=1,Object.defineProperty(hA,"__esModule",{value:!0}),hA.assertRequest=i;const t=is(),e=vB(),r=$u(),n=uf(),s=Ia();function i(o){const{account:a,maxFeePerGas:c,maxPriorityFeePerGas:u,to:l}=o,d=a?(0,t.parseAccount)(a):void 0;if(d&&!(0,s.isAddress)(d.address))throw new r.InvalidAddressError({address:d.address});if(l&&!(0,s.isAddress)(l))throw new r.InvalidAddressError({address:l});if(c&&c>e.maxUint256)throw new n.FeeCapTooHighError({maxFeePerGas:c});if(u&&c&&u>c)throw new n.TipAboveFeeCapError({maxFeePerGas:c,maxPriorityFeePerGas:u})}return hA}var zP={},_w={},yd={},Lq;function i_(){if(Lq)return yd;Lq=1,Object.defineProperty(yd,"__esModule",{value:!0}),yd.MaxFeePerGasTooLowError=yd.Eip1559FeesNotSupportedError=yd.BaseFeeScalarError=void 0;const t=sg(),e=Kt();class r extends e.BaseError{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}yd.BaseFeeScalarError=r;class n extends e.BaseError{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}yd.Eip1559FeesNotSupportedError=n;class s extends e.BaseError{constructor({maxPriorityFeePerGas:o}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${(0,t.formatGwei)(o)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}return yd.MaxFeePerGasTooLowError=s,yd}var Aw={},pA={},xw={},Fq;function EB(){if(Fq)return xw;Fq=1,Object.defineProperty(xw,"__esModule",{value:!0}),xw.BlockNotFoundError=void 0;const t=Kt();class e extends t.BaseError{constructor({blockHash:n,blockNumber:s}){let i="Block";n&&(i=`Block at hash "${n}"`),s&&(i=`Block at number "${s}"`),super(`${i} could not be found.`,{name:"BlockNotFoundError"})}}return xw.BlockNotFoundError=e,xw}var Hg={},WP={},$q;function eb(){return $q||($q=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defineTransaction=t.transactionType=void 0,t.formatTransaction=n;const e=ys(),r=s_();t.transactionType={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function n(i,o){const a={...i,blockHash:i.blockHash?i.blockHash:null,blockNumber:i.blockNumber?BigInt(i.blockNumber):null,chainId:i.chainId?(0,e.hexToNumber)(i.chainId):void 0,gas:i.gas?BigInt(i.gas):void 0,gasPrice:i.gasPrice?BigInt(i.gasPrice):void 0,maxFeePerBlobGas:i.maxFeePerBlobGas?BigInt(i.maxFeePerBlobGas):void 0,maxFeePerGas:i.maxFeePerGas?BigInt(i.maxFeePerGas):void 0,maxPriorityFeePerGas:i.maxPriorityFeePerGas?BigInt(i.maxPriorityFeePerGas):void 0,nonce:i.nonce?(0,e.hexToNumber)(i.nonce):void 0,to:i.to?i.to:null,transactionIndex:i.transactionIndex?Number(i.transactionIndex):null,type:i.type?t.transactionType[i.type]:void 0,typeHex:i.type?i.type:void 0,value:i.value?BigInt(i.value):void 0,v:i.v?BigInt(i.v):void 0};return i.authorizationList&&(a.authorizationList=s(i.authorizationList)),a.yParity=(()=>{if(i.yParity)return Number(i.yParity);if(typeof a.v=="bigint"){if(a.v===0n||a.v===27n)return 0;if(a.v===1n||a.v===28n)return 1;if(a.v>=35n)return a.v%2n===0n?1:0}})(),a.type==="legacy"&&(delete a.accessList,delete a.maxFeePerBlobGas,delete a.maxFeePerGas,delete a.maxPriorityFeePerGas,delete a.yParity),a.type==="eip2930"&&(delete a.maxFeePerBlobGas,delete a.maxFeePerGas,delete a.maxPriorityFeePerGas),a.type==="eip1559"&&delete a.maxFeePerBlobGas,a}t.defineTransaction=(0,r.defineFormatter)("transaction",n);function s(i){return i.map(o=>({address:o.address,chainId:Number(o.chainId),nonce:Number(o.nonce),r:o.r,s:o.s,yParity:Number(o.yParity)}))}})(WP)),WP}var qq;function ST(){if(qq)return Hg;qq=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.defineBlock=void 0,Hg.formatBlock=r;const t=s_(),e=eb();function r(n,s){const i=(n.transactions??[]).map(o=>typeof o=="string"?o:(0,e.formatTransaction)(o));return{...n,baseFeePerGas:n.baseFeePerGas?BigInt(n.baseFeePerGas):null,blobGasUsed:n.blobGasUsed?BigInt(n.blobGasUsed):void 0,difficulty:n.difficulty?BigInt(n.difficulty):void 0,excessBlobGas:n.excessBlobGas?BigInt(n.excessBlobGas):void 0,gasLimit:n.gasLimit?BigInt(n.gasLimit):void 0,gasUsed:n.gasUsed?BigInt(n.gasUsed):void 0,hash:n.hash?n.hash:null,logsBloom:n.logsBloom?n.logsBloom:null,nonce:n.nonce?n.nonce:null,number:n.number?BigInt(n.number):null,size:n.size?BigInt(n.size):void 0,timestamp:n.timestamp?BigInt(n.timestamp):void 0,transactions:i,totalDifficulty:n.totalDifficulty?BigInt(n.totalDifficulty):null}}return Hg.defineBlock=(0,t.defineFormatter)("block",r),Hg}var Hq;function ag(){if(Hq)return pA;Hq=1,Object.defineProperty(pA,"__esModule",{value:!0}),pA.getBlock=n;const t=EB(),e=tt(),r=ST();async function n(s,{blockHash:i,blockNumber:o,blockTag:a=s.experimental_blockTag??"latest",includeTransactions:c}={}){const u=c??!1,l=o!==void 0?(0,e.numberToHex)(o):void 0;let d=null;if(i?d=await s.request({method:"eth_getBlockByHash",params:[i,u]},{dedupe:!0}):d=await s.request({method:"eth_getBlockByNumber",params:[l||a,u]},{dedupe:!!l}),!d)throw new t.BlockNotFoundError({blockHash:i,blockNumber:o});return(s.chain?.formatters?.block?.format||r.formatBlock)(d,"getBlock")}return pA}var gA={},zq;function _B(){if(zq)return gA;zq=1,Object.defineProperty(gA,"__esModule",{value:!0}),gA.getGasPrice=t;async function t(e){const r=await e.request({method:"eth_gasPrice"});return BigInt(r)}return gA}var Wq;function hse(){if(Wq)return Aw;Wq=1,Object.defineProperty(Aw,"__esModule",{value:!0}),Aw.estimateMaxPriorityFeePerGas=i,Aw.internal_estimateMaxPriorityFeePerGas=o;const t=i_(),e=ys(),r=kr(),n=ag(),s=_B();async function i(a,c){return o(a,c)}async function o(a,c){const{block:u,chain:l=a.chain,request:d}=c||{};try{const f=l?.fees?.maxPriorityFeePerGas??l?.fees?.defaultPriorityFee;if(typeof f=="function"){const g=u||await(0,r.getAction)(a,n.getBlock,"getBlock")({}),h=await f({block:g,client:a,request:d});if(h===null)throw new Error;return h}if(typeof f<"u")return f;const p=await a.request({method:"eth_maxPriorityFeePerGas"});return(0,e.hexToBigInt)(p)}catch{const[f,p]=await Promise.all([u?Promise.resolve(u):(0,r.getAction)(a,n.getBlock,"getBlock")({}),(0,r.getAction)(a,s.getGasPrice,"getGasPrice")({})]);if(typeof f.baseFeePerGas!="bigint")throw new t.Eip1559FeesNotSupportedError;const g=p-f.baseFeePerGas;return g<0n?0n:g}}return Aw}var Vq;function pse(){if(Vq)return _w;Vq=1,Object.defineProperty(_w,"__esModule",{value:!0}),_w.estimateFeesPerGas=i,_w.internal_estimateFeesPerGas=o;const t=i_(),e=kr(),r=hse(),n=ag(),s=_B();async function i(a,c){return o(a,c)}async function o(a,c){const{block:u,chain:l=a.chain,request:d,type:f="eip1559"}=c||{},p=await(async()=>typeof l?.fees?.baseFeeMultiplier=="function"?l.fees.baseFeeMultiplier({block:u,client:a,request:d}):l?.fees?.baseFeeMultiplier??1.2)();if(p<1)throw new t.BaseFeeScalarError;const h=10**(p.toString().split(".")[1]?.length??0),y=C=>C*BigInt(Math.ceil(p*h))/BigInt(h),E=u||await(0,e.getAction)(a,n.getBlock,"getBlock")({});if(typeof l?.fees?.estimateFeesPerGas=="function"){const C=await l.fees.estimateFeesPerGas({block:u,client:a,multiply:y,request:d,type:f});if(C!==null)return C}if(f==="eip1559"){if(typeof E.baseFeePerGas!="bigint")throw new t.Eip1559FeesNotSupportedError;const C=typeof d?.maxPriorityFeePerGas=="bigint"?d.maxPriorityFeePerGas:await(0,r.internal_estimateMaxPriorityFeePerGas)(a,{block:E,chain:l,request:d}),_=y(E.baseFeePerGas);return{maxFeePerGas:d?.maxFeePerGas??_+C,maxPriorityFeePerGas:C}}return{gasPrice:d?.gasPrice??y(await(0,e.getAction)(a,s.getGasPrice,"getGasPrice")({}))}}return _w}var mA={},Gq;function IT(){if(Gq)return mA;Gq=1,Object.defineProperty(mA,"__esModule",{value:!0}),mA.getTransactionCount=r;const t=ys(),e=tt();async function r(n,{address:s,blockTag:i="latest",blockNumber:o}){const a=await n.request({method:"eth_getTransactionCount",params:[s,typeof o=="bigint"?(0,e.numberToHex)(o):i]},{dedupe:!!o});return(0,t.hexToNumber)(a)}return mA}var yA={},Kq;function TT(){if(Kq)return yA;Kq=1,Object.defineProperty(yA,"__esModule",{value:!0}),yA.blobsToCommitments=r;const t=Pn(),e=tt();function r(n){const{kzg:s}=n,i=n.to??(typeof n.blobs[0]=="string"?"hex":"bytes"),o=typeof n.blobs[0]=="string"?n.blobs.map(c=>(0,t.hexToBytes)(c)):n.blobs,a=[];for(const c of o)a.push(Uint8Array.from(s.blobToKzgCommitment(c)));return i==="bytes"?a:a.map(c=>(0,e.bytesToHex)(c))}return yA}var bA={},Zq;function NT(){if(Zq)return bA;Zq=1,Object.defineProperty(bA,"__esModule",{value:!0}),bA.blobsToProofs=r;const t=Pn(),e=tt();function r(n){const{kzg:s}=n,i=n.to??(typeof n.blobs[0]=="string"?"hex":"bytes"),o=typeof n.blobs[0]=="string"?n.blobs.map(u=>(0,t.hexToBytes)(u)):n.blobs,a=typeof n.commitments[0]=="string"?n.commitments.map(u=>(0,t.hexToBytes)(u)):n.commitments,c=[];for(let u=0;u<o.length;u++){const l=o[u],d=a[u];c.push(Uint8Array.from(s.computeBlobKzgProof(l,d)))}return i==="bytes"?c:c.map(u=>(0,e.bytesToHex)(u))}return bA}var wA={},vA={},EA={},iu={},Yq;function gse(){if(Yq)return iu;Yq=1,Object.defineProperty(iu,"__esModule",{value:!0}),iu.sha224=iu.SHA224=iu.sha256=iu.SHA256=void 0;const t=cse();return iu.SHA256=t.SHA256,iu.sha256=t.sha256,iu.SHA224=t.SHA224,iu.sha224=t.sha224,iu}var Jq;function AB(){if(Jq)return EA;Jq=1,Object.defineProperty(EA,"__esModule",{value:!0}),EA.sha256=s;const t=gse(),e=$o(),r=Pn(),n=tt();function s(i,o){const a=o||"hex",c=(0,t.sha256)((0,e.isHex)(i,{strict:!1})?(0,r.toBytes)(i):i);return a==="bytes"?c:(0,n.toHex)(c)}return EA}var Xq;function xB(){if(Xq)return vA;Xq=1,Object.defineProperty(vA,"__esModule",{value:!0}),vA.commitmentToVersionedHash=r;const t=tt(),e=AB();function r(n){const{commitment:s,version:i=1}=n,o=n.to??(typeof s=="string"?"hex":"bytes"),a=(0,e.sha256)(s,"bytes");return a.set([i],0),o==="bytes"?a:(0,t.bytesToHex)(a)}return vA}var Qq;function CB(){if(Qq)return wA;Qq=1,Object.defineProperty(wA,"__esModule",{value:!0}),wA.commitmentsToVersionedHashes=e;const t=xB();function e(r){const{commitments:n,version:s}=r,i=r.to??(typeof n[0]=="string"?"hex":"bytes"),o=[];for(const a of n)o.push((0,t.commitmentToVersionedHash)({commitment:a,to:i,version:s}));return o}return wA}var _A={},AA={},VP={},eH;function wUe(){return eH||(eH=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.maxBytesPerTransaction=t.bytesPerBlob=t.fieldElementsPerBlob=t.bytesPerFieldElement=void 0;const e=6;t.bytesPerFieldElement=32,t.fieldElementsPerBlob=4096,t.bytesPerBlob=t.bytesPerFieldElement*t.fieldElementsPerBlob,t.maxBytesPerTransaction=t.bytesPerBlob*e-1-1*t.fieldElementsPerBlob*e})(VP)),VP}var ou={},Cw={},tH;function mse(){return tH||(tH=1,Object.defineProperty(Cw,"__esModule",{value:!0}),Cw.versionedHashVersionKzg=void 0,Cw.versionedHashVersionKzg=1),Cw}var rH;function yse(){if(rH)return ou;rH=1,Object.defineProperty(ou,"__esModule",{value:!0}),ou.InvalidVersionedHashVersionError=ou.InvalidVersionedHashSizeError=ou.EmptyBlobError=ou.BlobSizeTooLargeError=void 0;const t=mse(),e=Kt();class r extends e.BaseError{constructor({maxSize:a,size:c}){super("Blob size is too large.",{metaMessages:[`Max: ${a} bytes`,`Given: ${c} bytes`],name:"BlobSizeTooLargeError"})}}ou.BlobSizeTooLargeError=r;class n extends e.BaseError{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}ou.EmptyBlobError=n;class s extends e.BaseError{constructor({hash:a,size:c}){super(`Versioned hash "${a}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${c}`],name:"InvalidVersionedHashSizeError"})}}ou.InvalidVersionedHashSizeError=s;class i extends e.BaseError{constructor({hash:a,version:c}){super(`Versioned hash "${a}" version is invalid.`,{metaMessages:[`Expected: ${t.versionedHashVersionKzg}`,`Received: ${c}`],name:"InvalidVersionedHashVersionError"})}}return ou.InvalidVersionedHashVersionError=i,ou}var nH;function bse(){if(nH)return AA;nH=1,Object.defineProperty(AA,"__esModule",{value:!0}),AA.toBlobs=o;const t=wUe(),e=yse(),r=XE(),n=Ca(),s=Pn(),i=tt();function o(a){const c=a.to??(typeof a.data=="string"?"hex":"bytes"),u=typeof a.data=="string"?(0,s.hexToBytes)(a.data):a.data,l=(0,n.size)(u);if(!l)throw new e.EmptyBlobError;if(l>t.maxBytesPerTransaction)throw new e.BlobSizeTooLargeError({maxSize:t.maxBytesPerTransaction,size:l});const d=[];let f=!0,p=0;for(;f;){const g=(0,r.createCursor)(new Uint8Array(t.bytesPerBlob));let h=0;for(;h<t.fieldElementsPerBlob;){const y=u.slice(p,p+(t.bytesPerFieldElement-1));if(g.pushByte(0),g.pushBytes(y),y.length<31){g.pushByte(128),f=!1;break}h++,p+=31}d.push(g)}return c==="bytes"?d.map(g=>g.bytes):d.map(g=>(0,i.bytesToHex)(g.bytes))}return AA}var sH;function PT(){if(sH)return _A;sH=1,Object.defineProperty(_A,"__esModule",{value:!0}),_A.toBlobSidecars=n;const t=TT(),e=NT(),r=bse();function n(s){const{data:i,kzg:o,to:a}=s,c=s.blobs??(0,r.toBlobs)({data:i,to:a}),u=s.commitments??(0,t.blobsToCommitments)({blobs:c,kzg:o,to:a}),l=s.proofs??(0,e.blobsToProofs)({blobs:c,commitments:u,kzg:o,to:a}),d=[];for(let f=0;f<c.length;f++)d.push({blob:c[f],commitment:u[f],proof:l[f]});return d}return _A}var xA={},iH;function RT(){if(iH)return xA;iH=1,Object.defineProperty(xA,"__esModule",{value:!0}),xA.getTransactionType=e;const t=Na();function e(r){if(r.type)return r.type;if(typeof r.authorizationList<"u")return"eip7702";if(typeof r.blobs<"u"||typeof r.blobVersionedHashes<"u"||typeof r.maxFeePerBlobGas<"u"||typeof r.sidecars<"u")return"eip4844";if(typeof r.maxFeePerGas<"u"||typeof r.maxPriorityFeePerGas<"u")return"eip1559";if(typeof r.gasPrice<"u")return typeof r.accessList<"u"?"eip2930":"legacy";throw new t.InvalidSerializableTransactionError({transaction:r})}return xA}var CA={},SA={},oH;function o_(){if(oH)return SA;oH=1,Object.defineProperty(SA,"__esModule",{value:!0}),SA.getTransactionError=n;const t=uf(),e=Na(),r=n_();function n(s,{docsPath:i,...o}){const a=(()=>{const c=(0,r.getNodeError)(s,o);return c instanceof t.UnknownNodeError?s:c})();return new e.TransactionExecutionError(a,{docsPath:i,...o})}return SA}var IA={},aH;function Yh(){if(aH)return IA;aH=1,Object.defineProperty(IA,"__esModule",{value:!0}),IA.getChainId=e;const t=ys();async function e(r){const n=await r.request({method:"eth_chainId"},{dedupe:!0});return(0,t.hexToNumber)(n)}return IA}var cH;function SB(){if(cH)return CA;cH=1,Object.defineProperty(CA,"__esModule",{value:!0}),CA.fillTransaction=l;const t=is(),e=i_(),r=o_(),n=Zh(),s=eb(),i=zu(),o=kr(),a=Wu(),c=ag(),u=Yh();async function l(d,f){const{account:p=d.account,accessList:g,authorizationList:h,chain:y=d.chain,blobVersionedHashes:E,blobs:S,data:C,gas:_,gasPrice:T,maxFeePerBlobGas:P,maxFeePerGas:D,maxPriorityFeePerGas:F,nonce:I,nonceManager:U,to:L,type:B,value:A,...m}=f,b=await(async()=>{if(!p||!U)return I;const k=(0,t.parseAccount)(p),j=y?y.id:await(0,o.getAction)(d,u.getChainId,"getChainId")({});return await U.consume({address:k.address,chainId:j,client:d})})();(0,a.assertRequest)(f);const w=y?.formatters?.transactionRequest?.format,M=(w||i.formatTransactionRequest)({...(0,n.extract)(m,{format:w}),account:p?(0,t.parseAccount)(p):void 0,accessList:g,authorizationList:h,blobs:S,blobVersionedHashes:E,data:C,gas:_,gasPrice:T,maxFeePerBlobGas:P,maxFeePerGas:D,maxPriorityFeePerGas:F,nonce:b,to:L,type:B,value:A},"fillTransaction");try{const k=await d.request({method:"eth_fillTransaction",params:[M]}),N=(y?.formatters?.transaction?.format||s.formatTransaction)(k.tx);delete N.blockHash,delete N.blockNumber,delete N.r,delete N.s,delete N.transactionIndex,delete N.v,delete N.yParity,N.data=N.input,N.gas&&(N.gas=f.gas??N.gas),N.gasPrice&&(N.gasPrice=f.gasPrice??N.gasPrice),N.maxFeePerBlobGas&&(N.maxFeePerBlobGas=f.maxFeePerBlobGas??N.maxFeePerBlobGas),N.maxFeePerGas&&(N.maxFeePerGas=f.maxFeePerGas??N.maxFeePerGas),N.maxPriorityFeePerGas&&(N.maxPriorityFeePerGas=f.maxPriorityFeePerGas??N.maxPriorityFeePerGas),N.nonce&&(N.nonce=f.nonce??N.nonce);const v=await(async()=>{if(typeof y?.fees?.baseFeeMultiplier=="function"){const H=await(0,o.getAction)(d,c.getBlock,"getBlock")({});return y.fees.baseFeeMultiplier({block:H,client:d,request:f})}return y?.fees?.baseFeeMultiplier??1.2})();if(v<1)throw new e.BaseFeeScalarError;const $=10**(v.toString().split(".")[1]?.length??0),O=H=>H*BigInt(Math.ceil(v*$))/BigInt($);return N.maxFeePerGas&&!f.maxFeePerGas&&(N.maxFeePerGas=O(N.maxFeePerGas)),N.gasPrice&&!f.gasPrice&&(N.gasPrice=O(N.gasPrice)),{raw:k.raw,transaction:{from:M.from,...N}}}catch(k){throw(0,r.getTransactionError)(k,{...f,chain:d.chain})}}return CA}var uH;function a_(){return uH||(uH=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.eip1559NetworkCache=t.defaultParameters=void 0,t.prepareTransactionRequest=S;const e=is(),r=pse(),n=IB(),s=ag(),i=IT(),o=i_(),a=TT(),c=NT(),u=CB(),l=PT(),d=kr(),f=tg(),p=Wu(),g=RT(),h=SB(),y=Yh();t.defaultParameters=["blobVersionedHashes","chainId","fees","gas","nonce","type"],t.eip1559NetworkCache=new Map;const E=new f.LruMap(128);async function S(C,_){const P=E.get(C.uid)!==!1&&["fees","gas"].some(v=>_.parameters?.includes(v))?await(0,d.getAction)(C,h.fillTransaction,"fillTransaction")(_).then(v=>{const{chainId:R,from:$,gas:O,gasPrice:H,nonce:W,maxFeePerBlobGas:G,maxFeePerGas:K,maxPriorityFeePerGas:Q,type:re}=v.transaction;return E.set(C.uid,!0),{..._,chainId:R,from:$,gas:O,gasPrice:H,nonce:W,maxFeePerBlobGas:G,maxFeePerGas:K,maxPriorityFeePerGas:Q,type:re}}).catch(v=>{const R=v;return(R.cause.name==="MethodNotFoundRpcError"||R.cause.name==="MethodNotSupportedRpcError")&&E.set(C.uid,!1),_}):_,{account:D=C.account,blobs:F,chain:I,gas:U,kzg:L,nonce:B,nonceManager:A,parameters:m=t.defaultParameters,type:b}=P,w=D&&(0,e.parseAccount)(D),x={...P,...w?{from:w?.address}:{}};let M;async function k(){return M||(M=await(0,d.getAction)(C,s.getBlock,"getBlock")({blockTag:"latest"}),M)}let j;async function N(){return j||(I?I.id:typeof x.chainId<"u"?x.chainId:(j=await(0,d.getAction)(C,y.getChainId,"getChainId")({}),j))}if(m.includes("nonce")&&typeof B>"u"&&w)if(A){const v=await N();x.nonce=await A.consume({address:w.address,chainId:v,client:C})}else x.nonce=await(0,d.getAction)(C,i.getTransactionCount,"getTransactionCount")({address:w.address,blockTag:"pending"});if((m.includes("blobVersionedHashes")||m.includes("sidecars"))&&F&&L){const v=(0,a.blobsToCommitments)({blobs:F,kzg:L});if(m.includes("blobVersionedHashes")){const R=(0,u.commitmentsToVersionedHashes)({commitments:v,to:"hex"});x.blobVersionedHashes=R}if(m.includes("sidecars")){const R=(0,c.blobsToProofs)({blobs:F,commitments:v,kzg:L}),$=(0,l.toBlobSidecars)({blobs:F,commitments:v,proofs:R,to:"hex"});x.sidecars=$}}if(m.includes("chainId")&&(x.chainId=await N()),(m.includes("fees")||m.includes("type"))&&typeof b>"u")try{x.type=(0,g.getTransactionType)(x)}catch{let v=t.eip1559NetworkCache.get(C.uid);typeof v>"u"&&(v=typeof(await k())?.baseFeePerGas=="bigint",t.eip1559NetworkCache.set(C.uid,v)),x.type=v?"eip1559":"legacy"}if(m.includes("fees"))if(x.type!=="legacy"&&x.type!=="eip2930"){if(typeof x.maxFeePerGas>"u"||typeof x.maxPriorityFeePerGas>"u"){const v=await k(),{maxFeePerGas:R,maxPriorityFeePerGas:$}=await(0,r.internal_estimateFeesPerGas)(C,{block:v,chain:I,request:x});if(typeof x.maxPriorityFeePerGas>"u"&&x.maxFeePerGas&&x.maxFeePerGas<$)throw new o.MaxFeePerGasTooLowError({maxPriorityFeePerGas:$});x.maxPriorityFeePerGas=$,x.maxFeePerGas=R}}else{if(typeof x.maxFeePerGas<"u"||typeof x.maxPriorityFeePerGas<"u")throw new o.Eip1559FeesNotSupportedError;if(typeof x.gasPrice>"u"){const v=await k(),{gasPrice:R}=await(0,r.internal_estimateFeesPerGas)(C,{block:v,chain:I,request:x,type:"legacy"});x.gasPrice=R}}return m.includes("gas")&&typeof U>"u"&&(x.gas=await(0,d.getAction)(C,n.estimateGas,"estimateGas")({...x,account:w,prepare:w?.type==="local"?[]:["blobVersionedHashes"]})),(0,p.assertRequest)(x),delete x.parameters,x}})(zP)),zP}var lH;function IB(){if(lH)return sA;lH=1,Object.defineProperty(sA,"__esModule",{value:!0}),sA.estimateGas=l;const t=is(),e=Kt(),r=r_(),n=tt(),s=fse(),i=Zh(),o=zu(),a=wB(),c=Wu(),u=a_();async function l(d,f){const{account:p=d.account,prepare:g=!0}=f,h=p?(0,t.parseAccount)(p):void 0,y=(()=>{if(Array.isArray(g))return g;if(h?.type!=="local")return["blobVersionedHashes"]})();try{const{accessList:E,authorizationList:S,blobs:C,blobVersionedHashes:_,blockNumber:T,blockTag:P,data:D,gas:F,gasPrice:I,maxFeePerBlobGas:U,maxFeePerGas:L,maxPriorityFeePerGas:B,nonce:A,value:m,stateOverride:b,...w}=g?await(0,u.prepareTransactionRequest)(d,{...f,parameters:y}):f,M=(typeof T=="bigint"?(0,n.numberToHex)(T):void 0)||P,k=(0,a.serializeStateOverride)(b),j=await(async()=>{if(w.to)return w.to;if(S&&S.length>0)return await(0,r.recoverAuthorizationAddress)({authorization:S[0]}).catch(()=>{throw new e.BaseError("`to` is required. Could not infer from `authorizationList`")})})();(0,c.assertRequest)(f);const N=d.chain?.formatters?.transactionRequest?.format,R=(N||o.formatTransactionRequest)({...(0,i.extract)(w,{format:N}),account:h,accessList:E,authorizationList:S,blobs:C,blobVersionedHashes:_,data:D,gas:F,gasPrice:I,maxFeePerBlobGas:U,maxFeePerGas:L,maxPriorityFeePerGas:B,nonce:A,to:j,value:m},"estimateGas");return BigInt(await d.request({method:"eth_estimateGas",params:k?[R,M??d.experimental_blockTag??"latest",k]:M?[R,M]:[R]}))}catch(E){throw(0,s.getEstimateGasError)(E,{...f,account:h,chain:d.chain})}}return sA}var dH;function wse(){if(dH)return V2;dH=1,Object.defineProperty(V2,"__esModule",{value:!0}),V2.estimateContractGas=i;const t=is(),e=Ta(),r=Gh(),n=kr(),s=IB();async function i(o,a){const{abi:c,address:u,args:l,functionName:d,dataSuffix:f,...p}=a,g=(0,e.encodeFunctionData)({abi:c,args:l,functionName:d});try{return await(0,n.getAction)(o,s.estimateGas,"estimateGas")({data:`${g}${f?f.replace("0x",""):""}`,to:u,...p})}catch(h){const y=p.account?(0,t.parseAccount)(p.account):void 0;throw(0,r.getContractError)(h,{abi:c,address:u,args:l,docsPath:"/docs/contract/estimateContractGas",functionName:d,sender:y?.address})}}return V2}var TA={},NA={},PA={},RA={},fH;function Vu(){if(fH)return RA;fH=1,Object.defineProperty(RA,"__esModule",{value:!0}),RA.isAddressEqual=r;const t=$u(),e=Ia();function r(n,s){if(!(0,e.isAddress)(n,{strict:!1}))throw new t.InvalidAddressError({address:n});if(!(0,e.isAddress)(s,{strict:!1}))throw new t.InvalidAddressError({address:s});return n.toLowerCase()===s.toLowerCase()}return RA}var OA={},hH;function c_(){if(hH)return OA;hH=1,Object.defineProperty(OA,"__esModule",{value:!0}),OA.decodeEventLog=a;const t=Jn(),e=sse(),r=Ca(),n=Qy(),s=zh(),i=of(),o="/docs/contract/decodeEventLog";function a(u){const{abi:l,data:d,strict:f,topics:p}=u,g=f??!0,[h,...y]=p;if(!h)throw new t.AbiEventSignatureEmptyTopicsError({docsPath:o});const E=l.find(F=>F.type==="event"&&h===(0,n.toEventSelector)((0,i.formatAbiItem)(F)));if(!(E&&"name"in E)||E.type!=="event")throw new t.AbiEventSignatureNotFoundError(h,{docsPath:o});const{name:S,inputs:C}=E,_=C?.some(F=>!("name"in F&&F.name)),T=_?[]:{},P=C.map((F,I)=>[F,I]).filter(([F])=>"indexed"in F&&F.indexed);for(let F=0;F<P.length;F++){const[I,U]=P[F],L=y[F];if(!L)throw new t.DecodeLogTopicsMismatch({abiItem:E,param:I});T[_?U:I.name||U]=c({param:I,value:L})}const D=C.filter(F=>!("indexed"in F&&F.indexed));if(D.length>0){if(d&&d!=="0x")try{const F=(0,s.decodeAbiParameters)(D,d);if(F)if(_)for(let I=0;I<C.length;I++)T[I]=T[I]??F.shift();else for(let I=0;I<D.length;I++)T[D[I].name]=F[I]}catch(F){if(g)throw F instanceof t.AbiDecodingDataSizeTooSmallError||F instanceof e.PositionOutOfBoundsError?new t.DecodeLogDataMismatch({abiItem:E,data:d,params:D,size:(0,r.size)(d)}):F}else if(g)throw new t.DecodeLogDataMismatch({abiItem:E,data:"0x",params:D,size:0})}return{eventName:S,args:Object.values(T).length>0?T:void 0}}function c({param:u,value:l}){return u.type==="string"||u.type==="bytes"||u.type==="tuple"||u.type.match(/^(.*)\[(\d+)?\]$/)?l:((0,s.decodeAbiParameters)([u],l)||[])[0]}return OA}var pH;function u_(){if(pH)return PA;pH=1,Object.defineProperty(PA,"__esModule",{value:!0}),PA.parseEventLogs=o;const t=Jn(),e=Vu(),r=Pn(),n=Sa(),s=Qy(),i=c_();function o(c){const{abi:u,args:l,logs:d,strict:f=!0}=c,p=(()=>{if(c.eventName)return Array.isArray(c.eventName)?c.eventName:[c.eventName]})();return d.map(g=>{try{const h=u.find(E=>E.type==="event"&&g.topics[0]===(0,s.toEventSelector)(E));if(!h)return null;const y=(0,i.decodeEventLog)({...g,abi:[h],strict:f});return p&&!p.includes(y.eventName)||!a({args:y.args,inputs:h.inputs,matchArgs:l})?null:{...y,...g}}catch(h){let y,E;if(h instanceof t.AbiEventSignatureNotFoundError)return null;if(h instanceof t.DecodeLogDataMismatch||h instanceof t.DecodeLogTopicsMismatch){if(f)return null;y=h.abiItem.name,E=h.abiItem.inputs?.some(S=>!("name"in S&&S.name))}return{...g,args:E?[]:{},eventName:y}}}).filter(Boolean)}function a(c){const{args:u,inputs:l,matchArgs:d}=c;if(!d)return!0;if(!u)return!1;function f(p,g,h){try{return p.type==="address"?(0,e.isAddressEqual)(g,h):p.type==="string"||p.type==="bytes"?(0,n.keccak256)((0,r.toBytes)(g))===h:g===h}catch{return!1}}return Array.isArray(u)&&Array.isArray(d)?d.every((p,g)=>{if(p==null)return!0;const h=l[g];return h?(Array.isArray(p)?p:[p]).some(E=>f(h,E,u[g])):!1}):typeof u=="object"&&!Array.isArray(u)&&typeof d=="object"&&!Array.isArray(d)?Object.entries(d).every(([p,g])=>{if(g==null)return!0;const h=l.find(E=>E.name===p);return h?(Array.isArray(g)?g:[g]).some(E=>f(h,E,u[p])):!1}):!1}return PA}var kA={},gH;function lf(){if(gH)return kA;gH=1,Object.defineProperty(kA,"__esModule",{value:!0}),kA.formatLog=t;function t(e,{args:r,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:r,eventName:n}:{}}}return kA}var mH;function TB(){if(mH)return NA;mH=1,Object.defineProperty(NA,"__esModule",{value:!0}),NA.getLogs=s;const t=ng(),e=u_(),r=tt(),n=lf();async function s(i,{address:o,blockHash:a,fromBlock:c,toBlock:u,event:l,events:d,args:f,strict:p}={}){const g=p??!1,h=d??(l?[l]:void 0);let y=[];h&&(y=[h.flatMap(_=>(0,t.encodeEventTopics)({abi:[_],eventName:_.name,args:d?void 0:f}))],l&&(y=y[0]));let E;a?E=await i.request({method:"eth_getLogs",params:[{address:o,topics:y,blockHash:a}]}):E=await i.request({method:"eth_getLogs",params:[{address:o,topics:y,fromBlock:typeof c=="bigint"?(0,r.numberToHex)(c):c,toBlock:typeof u=="bigint"?(0,r.numberToHex)(u):u}]});const S=E.map(C=>(0,n.formatLog)(C));return h?(0,e.parseEventLogs)({abi:h,args:f,logs:S,strict:g}):S}return NA}var yH;function NB(){if(yH)return TA;yH=1,Object.defineProperty(TA,"__esModule",{value:!0}),TA.getContractEvents=n;const t=cf(),e=kr(),r=TB();async function n(s,i){const{abi:o,address:a,args:c,blockHash:u,eventName:l,fromBlock:d,toBlock:f,strict:p}=i,g=l?(0,t.getAbiItem)({abi:o,name:l}):void 0,h=g?void 0:o.filter(y=>y.type==="event");return(0,e.getAction)(s,r.getLogs,"getLogs")({address:a,args:c,blockHash:u,event:g,events:h,fromBlock:d,toBlock:f,strict:p})}return TA}var BA={},UA={},bH;function df(){if(bH)return UA;bH=1,Object.defineProperty(UA,"__esModule",{value:!0}),UA.decodeFunctionResult=s;const t=Jn(),e=zh(),r=cf(),n="/docs/contract/decodeFunctionResult";function s(i){const{abi:o,args:a,functionName:c,data:u}=i;let l=o[0];if(c){const f=(0,r.getAbiItem)({abi:o,args:a,name:c});if(!f)throw new t.AbiFunctionNotFoundError(c,{docsPath:n});l=f}if(l.type!=="function")throw new t.AbiFunctionNotFoundError(void 0,{docsPath:n});if(!l.outputs)throw new t.AbiFunctionOutputsNotFoundError(l.name,{docsPath:n});const d=(0,e.decodeAbiParameters)(l.outputs,u);if(d&&d.length>1)return d;if(d&&d.length===1)return d[0]}return UA}var Sw={},Iw={},Qt={},pr={},Tw={},zg={},Nw={},wH;function vUe(){return wH||(wH=1,Object.defineProperty(Nw,"__esModule",{value:!0}),Nw.version=void 0,Nw.version="0.1.1"),Nw}var vH;function EUe(){if(vH)return zg;vH=1,Object.defineProperty(zg,"__esModule",{value:!0}),zg.getUrl=e,zg.getVersion=r,zg.prettyPrint=n;const t=vUe();function e(s){return s}function r(){return t.version}function n(s){if(!s)return"";const i=Object.entries(s).map(([a,c])=>c===void 0||c===!1?null:[a,c]).filter(Boolean),o=i.reduce((a,[c])=>Math.max(a,c.length),0);return i.map(([a,c])=>`  ${`${a}:`.padEnd(o+1)}  ${c}`).join(`
`)}return zg}var EH;function dc(){if(EH)return Tw;EH=1,Object.defineProperty(Tw,"__esModule",{value:!0}),Tw.BaseError=void 0;const t=EUe();class e extends Error{constructor(s,i={}){const o=(()=>{if(i.cause instanceof e){if(i.cause.details)return i.cause.details;if(i.cause.shortMessage)return i.cause.shortMessage}return i.cause&&"details"in i.cause&&typeof i.cause.details=="string"?i.cause.details:i.cause?.message?i.cause.message:i.details})(),a=i.cause instanceof e&&i.cause.docsPath||i.docsPath,u=`https://oxlib.sh${a??""}`,l=[s||"An error occurred.",...i.metaMessages?["",...i.metaMessages]:[],...o||a?["",o?`Details: ${o}`:void 0,a?`See: ${u}`:void 0]:[]].filter(d=>typeof d=="string").join(`
`);super(l,i.cause?{cause:i.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${(0,t.getVersion)()}`}),this.cause=i.cause,this.details=o,this.docs=u,this.docsPath=a,this.shortMessage=s}walk(s){return r(this,s)}}Tw.BaseError=e;function r(n,s){return s?.(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause?r(n.cause,s):s?null:n}return Tw}var GP={},_H;function vse(){return _H||(_H=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.charCodeMap=void 0,t.assertSize=r,t.assertStartOffset=n,t.assertEndOffset=s,t.charCodeToBase16=i,t.pad=o,t.trim=a;const e=Hl();function r(c,u){if(e.size(c)>u)throw new e.SizeOverflowError({givenSize:e.size(c),maxSize:u})}function n(c,u){if(typeof u=="number"&&u>0&&u>e.size(c)-1)throw new e.SliceOffsetOutOfBoundsError({offset:u,position:"start",size:e.size(c)})}function s(c,u,l){if(typeof u=="number"&&typeof l=="number"&&e.size(c)!==l-u)throw new e.SliceOffsetOutOfBoundsError({offset:l,position:"end",size:e.size(c)})}t.charCodeMap={zero:48,nine:57,A:65,F:70,a:97,f:102};function i(c){if(c>=t.charCodeMap.zero&&c<=t.charCodeMap.nine)return c-t.charCodeMap.zero;if(c>=t.charCodeMap.A&&c<=t.charCodeMap.F)return c-(t.charCodeMap.A-10);if(c>=t.charCodeMap.a&&c<=t.charCodeMap.f)return c-(t.charCodeMap.a-10)}function o(c,u={}){const{dir:l,size:d=32}=u;if(d===0)return c;if(c.length>d)throw new e.SizeExceedsPaddingSizeError({size:c.length,targetSize:d,type:"Bytes"});const f=new Uint8Array(d);for(let p=0;p<d;p++){const g=l==="right";f[g?p:d-p-1]=c[g?p:c.length-p-1]}return f}function a(c,u={}){const{dir:l="left"}=u;let d=c,f=0;for(let p=0;p<d.length-1&&d[l==="left"?p:d.length-p-1].toString()==="0";p++)f++;return d=l==="left"?d.slice(f):d.slice(0,d.length-f),d}})(GP)),GP}var jf={},AH;function Ese(){if(AH)return jf;AH=1,Object.defineProperty(jf,"__esModule",{value:!0}),jf.assertSize=e,jf.assertStartOffset=r,jf.assertEndOffset=n,jf.pad=s,jf.trim=i;const t=Fi();function e(o,a){if(t.size(o)>a)throw new t.SizeOverflowError({givenSize:t.size(o),maxSize:a})}function r(o,a){if(typeof a=="number"&&a>0&&a>t.size(o)-1)throw new t.SliceOffsetOutOfBoundsError({offset:a,position:"start",size:t.size(o)})}function n(o,a,c){if(typeof a=="number"&&typeof c=="number"&&t.size(o)!==c-a)throw new t.SliceOffsetOutOfBoundsError({offset:c,position:"end",size:t.size(o)})}function s(o,a={}){const{dir:c,size:u=32}=a;if(u===0)return o;const l=o.replace("0x","");if(l.length>u*2)throw new t.SizeExceedsPaddingSizeError({size:Math.ceil(l.length/2),targetSize:u,type:"Hex"});return`0x${l[c==="right"?"padEnd":"padStart"](u*2,"0")}`}function i(o,a={}){const{dir:c="left"}=a;let u=o.replace("0x",""),l=0;for(let d=0;d<u.length-1&&u[c==="left"?d:u.length-d-1].toString()==="0";d++)l++;return u=c==="left"?u.slice(l):u.slice(0,u.length-l),u==="0"?"0x":c==="right"&&u.length%2===1?`0x${u}0`:`0x${u}`}return jf}var Pw={},xH;function OT(){if(xH)return Pw;xH=1,Object.defineProperty(Pw,"__esModule",{value:!0}),Pw.parse=e,Pw.stringify=r;const t="#__bigint";function e(n,s){return JSON.parse(n,(i,o)=>{const a=o;return typeof a=="string"&&a.endsWith(t)?BigInt(a.slice(0,-t.length)):typeof s=="function"?s(i,a):a})}function r(n,s,i){return JSON.stringify(n,(o,a)=>typeof s=="function"?s(o,a):typeof a=="bigint"?a.toString()+t:a,i)}return Pw}var CH;function Hl(){if(CH)return pr;CH=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.SizeExceedsPaddingSizeError=pr.SliceOffsetOutOfBoundsError=pr.SizeOverflowError=pr.InvalidBytesTypeError=pr.InvalidBytesBooleanError=void 0,pr.assert=c,pr.concat=u,pr.from=l,pr.fromArray=d,pr.fromBoolean=f,pr.fromHex=p,pr.fromNumber=g,pr.fromString=h,pr.isEqual=y,pr.padLeft=E,pr.padRight=S,pr.random=C,pr.size=_,pr.slice=T,pr.toBigInt=P,pr.toBoolean=D,pr.toHex=F,pr.toNumber=I,pr.toString=U,pr.trimLeft=L,pr.trimRight=B,pr.validate=A;const t=ig(),e=dc(),r=Fi(),n=vse(),s=Ese(),i=OT(),o=new TextDecoder,a=new TextEncoder;function c(k){if(!(k instanceof Uint8Array)){if(!k)throw new b(k);if(typeof k!="object")throw new b(k);if(!("BYTES_PER_ELEMENT"in k))throw new b(k);if(k.BYTES_PER_ELEMENT!==1||k.constructor.name!=="Uint8Array")throw new b(k)}}function u(...k){let j=0;for(const v of k)j+=v.length;const N=new Uint8Array(j);for(let v=0,R=0;v<k.length;v++){const $=k[v];N.set($,R),R+=$.length}return N}function l(k){return k instanceof Uint8Array?k:typeof k=="string"?p(k):d(k)}function d(k){return k instanceof Uint8Array?k:new Uint8Array(k)}function f(k,j={}){const{size:N}=j,v=new Uint8Array(1);return v[0]=Number(k),typeof N=="number"?(n.assertSize(v,N),E(v,N)):v}function p(k,j={}){const{size:N}=j;let v=k;N&&(s.assertSize(k,N),v=r.padRight(k,N));let R=v.slice(2);R.length%2&&(R=`0${R}`);const $=R.length/2,O=new Uint8Array($);for(let H=0,W=0;H<$;H++){const G=n.charCodeToBase16(R.charCodeAt(W++)),K=n.charCodeToBase16(R.charCodeAt(W++));if(G===void 0||K===void 0)throw new e.BaseError(`Invalid byte sequence ("${R[W-2]}${R[W-1]}" in "${R}").`);O[H]=G*16+K}return O}function g(k,j){const N=r.fromNumber(k,j);return p(N)}function h(k,j={}){const{size:N}=j,v=a.encode(k);return typeof N=="number"?(n.assertSize(v,N),S(v,N)):v}function y(k,j){return(0,t.equalBytes)(k,j)}function E(k,j){return n.pad(k,{dir:"left",size:j})}function S(k,j){return n.pad(k,{dir:"right",size:j})}function C(k){return crypto.getRandomValues(new Uint8Array(k))}function _(k){return k.length}function T(k,j,N,v={}){const{strict:R}=v;n.assertStartOffset(k,j);const $=k.slice(j,N);return R&&n.assertEndOffset($,j,N),$}function P(k,j={}){const{size:N}=j;typeof N<"u"&&n.assertSize(k,N);const v=r.fromBytes(k,j);return r.toBigInt(v,j)}function D(k,j={}){const{size:N}=j;let v=k;if(typeof N<"u"&&(n.assertSize(v,N),v=L(v)),v.length>1||v[0]>1)throw new m(v);return!!v[0]}function F(k,j={}){return r.fromBytes(k,j)}function I(k,j={}){const{size:N}=j;typeof N<"u"&&n.assertSize(k,N);const v=r.fromBytes(k,j);return r.toNumber(v,j)}function U(k,j={}){const{size:N}=j;let v=k;return typeof N<"u"&&(n.assertSize(v,N),v=B(v)),o.decode(v)}function L(k){return n.trim(k,{dir:"left"})}function B(k){return n.trim(k,{dir:"right"})}function A(k){try{return c(k),!0}catch{return!1}}class m extends e.BaseError{constructor(j){super(`Bytes value \`${j}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}pr.InvalidBytesBooleanError=m;class b extends e.BaseError{constructor(j){super(`Value \`${typeof j=="object"?i.stringify(j):j}\` of type \`${typeof j}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}pr.InvalidBytesTypeError=b;class w extends e.BaseError{constructor({givenSize:j,maxSize:N}){super(`Size cannot exceed \`${N}\` bytes. Given size: \`${j}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}pr.SizeOverflowError=w;class x extends e.BaseError{constructor({offset:j,position:N,size:v}){super(`Slice ${N==="start"?"starting":"ending"} at offset \`${j}\` is out-of-bounds (size: \`${v}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}pr.SliceOffsetOutOfBoundsError=x;class M extends e.BaseError{constructor({size:j,targetSize:N,type:v}){super(`${v.charAt(0).toUpperCase()}${v.slice(1).toLowerCase()} size (\`${j}\`) exceeds padding size (\`${N}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}return pr.SizeExceedsPaddingSizeError=M,pr}var SH;function Fi(){if(SH)return Qt;SH=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.SizeExceedsPaddingSizeError=Qt.SliceOffsetOutOfBoundsError=Qt.SizeOverflowError=Qt.InvalidLengthError=Qt.InvalidHexValueError=Qt.InvalidHexTypeError=Qt.InvalidHexBooleanError=Qt.IntegerOutOfRangeError=void 0,Qt.assert=c,Qt.concat=u,Qt.from=l,Qt.fromBoolean=d,Qt.fromBytes=f,Qt.fromNumber=p,Qt.fromString=g,Qt.isEqual=h,Qt.padLeft=y,Qt.padRight=E,Qt.random=S,Qt.slice=C,Qt.size=_,Qt.trimLeft=T,Qt.trimRight=P,Qt.toBigInt=D,Qt.toBoolean=F,Qt.toBytes=I,Qt.toNumber=U,Qt.toString=L,Qt.validate=B;const t=ig(),e=Hl(),r=dc(),n=vse(),s=Ese(),i=OT(),o=new TextEncoder,a=Array.from({length:256},(N,v)=>v.toString(16).padStart(2,"0"));function c(N,v={}){const{strict:R=!1}=v;if(!N)throw new b(N);if(typeof N!="string")throw new b(N);if(R&&!/^0x[0-9a-fA-F]*$/.test(N))throw new w(N);if(!N.startsWith("0x"))throw new w(N)}function u(...N){return`0x${N.reduce((v,R)=>v+R.replace("0x",""),"")}`}function l(N){return N instanceof Uint8Array?f(N):Array.isArray(N)?f(new Uint8Array(N)):N}function d(N,v={}){const R=`0x${Number(N)}`;return typeof v.size=="number"?(s.assertSize(R,v.size),y(R,v.size)):R}function f(N,v={}){let R="";for(let O=0;O<N.length;O++)R+=a[N[O]];const $=`0x${R}`;return typeof v.size=="number"?(s.assertSize($,v.size),E($,v.size)):$}function p(N,v={}){const{signed:R,size:$}=v,O=BigInt(N);let H;$?R?H=(1n<<BigInt($)*8n-1n)-1n:H=2n**(BigInt($)*8n)-1n:typeof N=="number"&&(H=BigInt(Number.MAX_SAFE_INTEGER));const W=typeof H=="bigint"&&R?-H-1n:0;if(H&&O>H||O<W){const Q=typeof N=="bigint"?"n":"";throw new A({max:H?`${H}${Q}`:void 0,min:`${W}${Q}`,signed:R,size:$,value:`${N}${Q}`})}const K=`0x${(R&&O<0?(1n<<BigInt($*8))+BigInt(O):O).toString(16)}`;return $?y(K,$):K}function g(N,v={}){return f(o.encode(N),v)}function h(N,v){return(0,t.equalBytes)(e.fromHex(N),e.fromHex(v))}function y(N,v){return s.pad(N,{dir:"left",size:v})}function E(N,v){return s.pad(N,{dir:"right",size:v})}function S(N){return f(e.random(N))}function C(N,v,R,$={}){const{strict:O}=$;s.assertStartOffset(N,v);const H=`0x${N.replace("0x","").slice((v??0)*2,(R??N.length)*2)}`;return O&&s.assertEndOffset(H,v,R),H}function _(N){return Math.ceil((N.length-2)/2)}function T(N){return s.trim(N,{dir:"left"})}function P(N){return s.trim(N,{dir:"right"})}function D(N,v={}){const{signed:R}=v;v.size&&s.assertSize(N,v.size);const $=BigInt(N);if(!R)return $;const O=(N.length-2)/2,H=(1n<<BigInt(O)*8n)-1n,W=H>>1n;return $<=W?$:$-H-1n}function F(N,v={}){v.size&&s.assertSize(N,v.size);const R=T(N);if(R==="0x")return!1;if(R==="0x1")return!0;throw new m(N)}function I(N,v={}){return e.fromHex(N,v)}function U(N,v={}){const{signed:R,size:$}=v;return Number(!R&&!$?N:D(N,v))}function L(N,v={}){const{size:R}=v;let $=e.fromHex(N);return R&&(n.assertSize($,R),$=e.trimRight($)),new TextDecoder().decode($)}function B(N,v={}){const{strict:R=!1}=v;try{return c(N,{strict:R}),!0}catch{return!1}}class A extends r.BaseError{constructor({max:v,min:R,signed:$,size:O,value:H}){super(`Number \`${H}\` is not in safe${O?` ${O*8}-bit`:""}${$?" signed":" unsigned"} integer range ${v?`(\`${R}\` to \`${v}\`)`:`(above \`${R}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}Qt.IntegerOutOfRangeError=A;class m extends r.BaseError{constructor(v){super(`Hex value \`"${v}"\` is not a valid boolean.`,{metaMessages:['The hex value must be `"0x0"` (false) or `"0x1"` (true).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexBooleanError"})}}Qt.InvalidHexBooleanError=m;class b extends r.BaseError{constructor(v){super(`Value \`${typeof v=="object"?i.stringify(v):v}\` of type \`${typeof v}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}Qt.InvalidHexTypeError=b;class w extends r.BaseError{constructor(v){super(`Value \`${v}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}Qt.InvalidHexValueError=w;class x extends r.BaseError{constructor(v){super(`Hex value \`"${v}"\` is an odd length (${v.length-2} nibbles).`,{metaMessages:["It must be an even length."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidLengthError"})}}Qt.InvalidLengthError=x;class M extends r.BaseError{constructor({givenSize:v,maxSize:R}){super(`Size cannot exceed \`${R}\` bytes. Given size: \`${v}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}Qt.SizeOverflowError=M;class k extends r.BaseError{constructor({offset:v,position:R,size:$}){super(`Slice ${R==="start"?"starting":"ending"} at offset \`${v}\` is out-of-bounds (size: \`${$}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}Qt.SliceOffsetOutOfBoundsError=k;class j extends r.BaseError{constructor({size:v,targetSize:R,type:$}){super(`${$.charAt(0).toUpperCase()}${$.slice(1).toLowerCase()} size (\`${v}\`) exceeds padding size (\`${R}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}return Qt.SizeExceedsPaddingSizeError=j,Qt}var Rw={},IH;function _Ue(){if(IH)return Rw;IH=1,Object.defineProperty(Rw,"__esModule",{value:!0}),Rw.fromRpc=e,Rw.toRpc=r;const t=Fi();function e(n){return{...n,amount:BigInt(n.amount),index:Number(n.index),validatorIndex:Number(n.validatorIndex)}}function r(n){return{address:n.address,amount:t.fromNumber(n.amount),index:t.fromNumber(n.index),validatorIndex:t.fromNumber(n.validatorIndex)}}return Rw}var TH;function _se(){if(TH)return Iw;TH=1,Object.defineProperty(Iw,"__esModule",{value:!0}),Iw.fromRpc=r,Iw.toRpc=n;const t=Fi(),e=_Ue();function r(s){return{...s.baseFeePerGas&&{baseFeePerGas:BigInt(s.baseFeePerGas)},...s.blobBaseFee&&{blobBaseFee:BigInt(s.blobBaseFee)},...s.feeRecipient&&{feeRecipient:s.feeRecipient},...s.gasLimit&&{gasLimit:BigInt(s.gasLimit)},...s.number&&{number:BigInt(s.number)},...s.prevRandao&&{prevRandao:BigInt(s.prevRandao)},...s.time&&{time:BigInt(s.time)},...s.withdrawals&&{withdrawals:s.withdrawals.map(e.fromRpc)}}}function n(s){return{...typeof s.baseFeePerGas=="bigint"&&{baseFeePerGas:t.fromNumber(s.baseFeePerGas)},...typeof s.blobBaseFee=="bigint"&&{blobBaseFee:t.fromNumber(s.blobBaseFee)},...typeof s.feeRecipient=="string"&&{feeRecipient:s.feeRecipient},...typeof s.gasLimit=="bigint"&&{gasLimit:t.fromNumber(s.gasLimit)},...typeof s.number=="bigint"&&{number:t.fromNumber(s.number)},...typeof s.prevRandao=="bigint"&&{prevRandao:t.fromNumber(s.prevRandao)},...typeof s.time=="bigint"&&{time:t.fromNumber(s.time)},...s.withdrawals&&{withdrawals:s.withdrawals.map(e.toRpc)}}}return Iw}var hn={},NH;function Jh(){if(NH)return hn;NH=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.erc4626Abi=hn.erc721Abi=hn.erc1155Abi=hn.erc20Abi_bytes32=hn.erc20Abi=hn.erc6492SignatureValidatorAbi=hn.erc1271Abi=hn.addressResolverAbi=hn.textResolverAbi=hn.universalResolverReverseAbi=hn.universalResolverResolveAbi=hn.batchGatewayAbi=hn.multicall3Abi=void 0,hn.multicall3Abi=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],hn.batchGatewayAbi=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}];const t=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}];return hn.universalResolverResolveAbi=[...t,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],hn.universalResolverReverseAbi=[...t,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],hn.textResolverAbi=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],hn.addressResolverAbi=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],hn.erc1271Abi=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],hn.erc6492SignatureValidatorAbi=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],hn.erc20Abi=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],hn.erc20Abi_bytes32=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"bytes32"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"bytes32"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],hn.erc1155Abi=[{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC1155InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC1155InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"idsLength",type:"uint256"},{internalType:"uint256",name:"valuesLength",type:"uint256"}],name:"ERC1155InvalidArrayLength",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC1155InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC1155InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC1155InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC1155MissingApprovalForAll",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],hn.erc721Abi=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"event",name:"ApprovalForAll",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"operator",type:"address"},{indexed:!1,name:"approved",type:"bool"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"payable",inputs:[{name:"spender",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"getApproved",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"address"}]},{type:"function",name:"isApprovedForAll",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"operator",type:"address"}],outputs:[{type:"bool"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"ownerOf",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"owner",type:"address"}]},{type:"function",name:"safeTransferFrom",stateMutability:"payable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"safeTransferFrom",stateMutability:"nonpayable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"id",type:"uint256"},{name:"data",type:"bytes"}],outputs:[]},{type:"function",name:"setApprovalForAll",stateMutability:"nonpayable",inputs:[{name:"operator",type:"address"},{name:"approved",type:"bool"}],outputs:[]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"index",type:"uint256"}],outputs:[{type:"uint256"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"index",type:"uint256"}],outputs:[{name:"tokenId",type:"uint256"}]},{type:"function",name:"tokenURI",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transferFrom",stateMutability:"payable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]}],hn.erc4626Abi=[{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"receiver",type:"address"},{indexed:!1,name:"assets",type:"uint256"},{indexed:!1,name:"shares",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"receiver",type:"address"},{indexed:!0,name:"owner",type:"address"},{indexed:!1,name:"assets",type:"uint256"},{indexed:!1,name:"shares",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],name:"approve",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"asset",outputs:[{name:"assetTokenAddress",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"convertToAssets",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"convertToShares",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"},{name:"receiver",type:"address"}],name:"deposit",outputs:[{name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"caller",type:"address"}],name:"maxDeposit",outputs:[{name:"maxAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"caller",type:"address"}],name:"maxMint",outputs:[{name:"maxShares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"maxRedeem",outputs:[{name:"maxShares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"maxWithdraw",outputs:[{name:"maxAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"},{name:"receiver",type:"address"}],name:"mint",outputs:[{name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"previewDeposit",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"previewMint",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"previewRedeem",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"previewWithdraw",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"},{name:"receiver",type:"address"},{name:"owner",type:"address"}],name:"redeem",outputs:[{name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalAssets",outputs:[{name:"totalManagedAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"transfer",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"assets",type:"uint256"},{name:"receiver",type:"address"},{name:"owner",type:"address"}],name:"withdraw",outputs:[{name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],hn}var Ow={},PH;function AUe(){return PH||(PH=1,Object.defineProperty(Ow,"__esModule",{value:!0}),Ow.aggregate3Signature=void 0,Ow.aggregate3Signature="0x82ad56cb"),Ow}var au={},RH;function l_(){return RH||(RH=1,Object.defineProperty(au,"__esModule",{value:!0}),au.multicall3Bytecode=au.erc6492SignatureValidatorByteCode=au.deploylessCallViaFactoryBytecode=au.deploylessCallViaBytecodeBytecode=void 0,au.deploylessCallViaBytecodeBytecode="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",au.deploylessCallViaFactoryBytecode="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",au.erc6492SignatureValidatorByteCode="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",au.multicall3Bytecode="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033"),au}var Da={},OH;function d_(){if(OH)return Da;OH=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.InvalidChainIdError=Da.ClientChainNotConfiguredError=Da.ChainNotFoundError=Da.ChainMismatchError=Da.ChainDoesNotSupportContract=void 0;const t=Kt();class e extends t.BaseError{constructor({blockNumber:a,chain:c,contract:u}){super(`Chain "${c.name}" does not support contract "${u.name}".`,{metaMessages:["This could be due to any of the following:",...a&&u.blockCreated&&u.blockCreated>a?[`- The contract "${u.name}" was not deployed until block ${u.blockCreated} (current block ${a}).`]:[`- The chain does not have the contract "${u.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}Da.ChainDoesNotSupportContract=e;class r extends t.BaseError{constructor({chain:a,currentChainId:c}){super(`The current chain of the wallet (id: ${c}) does not match the target chain for the transaction (id: ${a.id} â€“ ${a.name}).`,{metaMessages:[`Current Chain ID:  ${c}`,`Expected Chain ID: ${a.id} â€“ ${a.name}`],name:"ChainMismatchError"})}}Da.ChainMismatchError=r;class n extends t.BaseError{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}Da.ChainNotFoundError=n;class s extends t.BaseError{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}Da.ClientChainNotConfiguredError=s;class i extends t.BaseError{constructor({chainId:a}){super(typeof a=="number"?`Chain ID "${a}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}return Da.InvalidChainIdError=i,Da}var MA={},kH;function f_(){if(kH)return MA;kH=1,Object.defineProperty(MA,"__esModule",{value:!0}),MA.encodeDeployData=s;const t=Jn(),e=fi(),r=qu(),n="/docs/contract/encodeDeployData";function s(i){const{abi:o,args:a,bytecode:c}=i;if(!a||a.length===0)return c;const u=o.find(d=>"type"in d&&d.type==="constructor");if(!u)throw new t.AbiConstructorNotFoundError({docsPath:n});if(!("inputs"in u))throw new t.AbiConstructorParamsNotFoundError({docsPath:n});if(!u.inputs||u.inputs.length===0)throw new t.AbiConstructorParamsNotFoundError({docsPath:n});const l=(0,r.encodeAbiParameters)(u.inputs,a);return(0,e.concatHex)([c,l])}return MA}var DA={},BH;function Xh(){if(BH)return DA;BH=1,Object.defineProperty(DA,"__esModule",{value:!0}),DA.getChainContractAddress=e;const t=d_();function e({blockNumber:r,chain:n,contract:s}){const i=n?.contracts?.[s];if(!i)throw new t.ChainDoesNotSupportContract({chain:n,contract:{name:s}});if(r&&i.blockCreated&&i.blockCreated>r)throw new t.ChainDoesNotSupportContract({blockNumber:r,chain:n,contract:{name:s,blockCreated:i.blockCreated}});return i.address}return DA}var jA={},UH;function PB(){if(UH)return jA;UH=1,Object.defineProperty(jA,"__esModule",{value:!0}),jA.getCallError=n;const t=Wh(),e=uf(),r=n_();function n(s,{docsPath:i,...o}){const a=(()=>{const c=(0,r.getNodeError)(s,o);return c instanceof e.UnknownNodeError?s:c})();return new t.CallExecutionError(a,{docsPath:i,...o})}return jA}var LA={},FA={},MH;function RB(){if(MH)return FA;MH=1,Object.defineProperty(FA,"__esModule",{value:!0}),FA.withResolvers=t;function t(){let e=()=>{},r=()=>{};return{promise:new Promise((s,i)=>{e=s,r=i}),resolve:e,reject:r}}return FA}var DH;function OB(){if(DH)return LA;DH=1,Object.defineProperty(LA,"__esModule",{value:!0}),LA.createBatchScheduler=r;const t=RB(),e=new Map;function r({fn:n,id:s,shouldSplitBatch:i,wait:o=0,sort:a}){const c=async()=>{const p=d();u();const g=p.map(({args:h})=>h);g.length!==0&&n(g).then(h=>{a&&Array.isArray(h)&&h.sort(a);for(let y=0;y<p.length;y++){const{resolve:E}=p[y];E?.([h[y],h])}}).catch(h=>{for(let y=0;y<p.length;y++){const{reject:E}=p[y];E?.(h)}})},u=()=>e.delete(s),l=()=>d().map(({args:p})=>p),d=()=>e.get(s)||[],f=p=>e.set(s,[...d(),p]);return{flush:u,async schedule(p){const{promise:g,resolve:h,reject:y}=(0,t.withResolvers)();return i?.([...l(),p])&&c(),d().length>0?(f({args:p,resolve:h,reject:y}),g):(f({args:p,resolve:h,reject:y}),setTimeout(c,o),g)}}}return LA}var KP={},bd={},jH;function xUe(){if(jH)return bd;jH=1,Object.defineProperty(bd,"__esModule",{value:!0}),bd.OffchainLookupSenderMismatchError=bd.OffchainLookupResponseMalformedError=bd.OffchainLookupError=void 0;const t=Li(),e=Kt(),r=yB();class n extends e.BaseError{constructor({callbackSelector:a,cause:c,data:u,extraData:l,sender:d,urls:f}){super(c.shortMessage||"An error occurred while fetching for an offchain result.",{cause:c,metaMessages:[...c.metaMessages||[],c.metaMessages?.length?"":[],"Offchain Gateway Call:",f&&["  Gateway URL(s):",...f.map(p=>`    ${(0,r.getUrl)(p)}`)],`  Sender: ${d}`,`  Data: ${u}`,`  Callback selector: ${a}`,`  Extra data: ${l}`].flat(),name:"OffchainLookupError"})}}bd.OffchainLookupError=n;class s extends e.BaseError{constructor({result:a,url:c}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${(0,r.getUrl)(c)}`,`Response: ${(0,t.stringify)(a)}`],name:"OffchainLookupResponseMalformedError"})}}bd.OffchainLookupResponseMalformedError=s;class i extends e.BaseError{constructor({sender:a,to:c}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${c}`,`OffchainLookup sender address: ${a}`],name:"OffchainLookupSenderMismatchError"})}}return bd.OffchainLookupSenderMismatchError=i,bd}var ZP={},$A={},LH;function kB(){if(LH)return $A;LH=1,Object.defineProperty($A,"__esModule",{value:!0}),$A.decodeFunctionData=i;const t=Jn(),e=Gc(),r=rg(),n=zh(),s=of();function i(o){const{abi:a,data:c}=o,u=(0,e.slice)(c,0,4),l=a.find(d=>d.type==="function"&&u===(0,r.toFunctionSelector)((0,s.formatAbiItem)(d)));if(!l)throw new t.AbiFunctionSignatureNotFoundError(u,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:l.name,args:"inputs"in l&&l.inputs&&l.inputs.length>0?(0,n.decodeAbiParameters)(l.inputs,(0,e.slice)(c,4)):void 0}}return $A}var qA={},FH;function BB(){if(FH)return qA;FH=1,Object.defineProperty(qA,"__esModule",{value:!0}),qA.encodeErrorResult=a;const t=Jn(),e=fi(),r=rg(),n=qu(),s=of(),i=cf(),o="/docs/contract/encodeErrorResult";function a(c){const{abi:u,errorName:l,args:d}=c;let f=u[0];if(l){const y=(0,i.getAbiItem)({abi:u,args:d,name:l});if(!y)throw new t.AbiErrorNotFoundError(l,{docsPath:o});f=y}if(f.type!=="error")throw new t.AbiErrorNotFoundError(void 0,{docsPath:o});const p=(0,s.formatAbiItem)(f),g=(0,r.toFunctionSelector)(p);let h="0x";if(d&&d.length>0){if(!f.inputs)throw new t.AbiErrorInputsNotFoundError(f.name,{docsPath:o});h=(0,n.encodeAbiParameters)(f.inputs,d)}return(0,e.concatHex)([g,h])}return qA}var HA={},$H;function UB(){if($H)return HA;$H=1,Object.defineProperty(HA,"__esModule",{value:!0}),HA.encodeFunctionResult=s;const t=Jn(),e=qu(),r=cf(),n="/docs/contract/encodeFunctionResult";function s(i){const{abi:o,functionName:a,result:c}=i;let u=o[0];if(a){const d=(0,r.getAbiItem)({abi:o,name:a});if(!d)throw new t.AbiFunctionNotFoundError(a,{docsPath:n});u=d}if(u.type!=="function")throw new t.AbiFunctionNotFoundError(void 0,{docsPath:n});if(!u.outputs)throw new t.AbiFunctionOutputsNotFoundError(u.name,{docsPath:n});const l=(()=>{if(u.outputs.length===0)return[];if(u.outputs.length===1)return[c];if(Array.isArray(c))return c;throw new t.InvalidArrayError(c)})();return(0,e.encodeAbiParameters)(u.outputs,l)}return HA}var qH;function kT(){return qH||(qH=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.localBatchGatewayUrl=void 0,t.localBatchGatewayRequest=o;const e=Jh(),r=pB(),n=kB(),s=BB(),i=UB();t.localBatchGatewayUrl="x-batch-gateway:true";async function o(c){const{data:u,ccipRequest:l}=c,{args:[d]}=(0,n.decodeFunctionData)({abi:e.batchGatewayAbi,data:u}),f=[],p=[];return await Promise.all(d.map(async(g,h)=>{try{p[h]=g.urls.includes(t.localBatchGatewayUrl)?await o({data:g.data,ccipRequest:l}):await l(g),f[h]=!1}catch(y){f[h]=!0,p[h]=a(y)}})),(0,i.encodeFunctionResult)({abi:e.batchGatewayAbi,functionName:"query",result:[f,p]})}function a(c){return c.name==="HttpRequestError"&&c.status?(0,s.encodeErrorResult)({abi:e.batchGatewayAbi,errorName:"HttpError",args:[c.status,c.shortMessage]}):(0,s.encodeErrorResult)({abi:[r.solidityError],errorName:"Error",args:["shortMessage"in c?c.shortMessage:c.message]})}})(ZP)),ZP}var HH;function MB(){return HH||(HH=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.offchainLookupAbiItem=t.offchainLookupSignature=void 0,t.offchainLookup=d,t.ccipRequest=f;const e=h_(),r=xUe(),n=Hu(),s=AT(),i=qu(),o=Vu(),a=fi(),c=$o(),u=kT(),l=Li();t.offchainLookupSignature="0x556f1830",t.offchainLookupAbiItem={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function d(p,{blockNumber:g,blockTag:h,data:y,to:E}){const{args:S}=(0,s.decodeErrorResult)({data:y,abi:[t.offchainLookupAbiItem]}),[C,_,T,P,D]=S,{ccipRead:F}=p,I=F&&typeof F?.request=="function"?F.request:f;try{if(!(0,o.isAddressEqual)(E,C))throw new r.OffchainLookupSenderMismatchError({sender:C,to:E});const U=_.includes(u.localBatchGatewayUrl)?await(0,u.localBatchGatewayRequest)({data:T,ccipRequest:I}):await I({data:T,sender:C,urls:_}),{data:L}=await(0,e.call)(p,{blockNumber:g,blockTag:h,data:(0,a.concat)([P,(0,i.encodeAbiParameters)([{type:"bytes"},{type:"bytes"}],[U,D])]),to:E});return L}catch(U){throw new r.OffchainLookupError({callbackSelector:P,cause:U,data:y,extraData:D,sender:C,urls:_})}}async function f({data:p,sender:g,urls:h}){let y=new Error("An unknown error occurred.");for(let E=0;E<h.length;E++){const S=h[E],C=S.includes("{data}")?"GET":"POST",_=C==="POST"?{data:p,sender:g}:void 0,T=C==="POST"?{"Content-Type":"application/json"}:{};try{const P=await fetch(S.replace("{sender}",g.toLowerCase()).replace("{data}",p),{body:JSON.stringify(_),headers:T,method:C});let D;if(P.headers.get("Content-Type")?.startsWith("application/json")?D=(await P.json()).data:D=await P.text(),!P.ok){y=new n.HttpRequestError({body:_,details:D?.error?(0,l.stringify)(D.error):P.statusText,headers:P.headers,status:P.status,url:S});continue}if(!(0,c.isHex)(D)){y=new r.OffchainLookupResponseMalformedError({result:D,url:S});continue}return D}catch(P){y=new n.HttpRequestError({body:_,details:P.message,url:S})}}throw y}})(KP)),KP}var zH;function h_(){if(zH)return Sw;zH=1,Object.defineProperty(Sw,"__esModule",{value:!0}),Sw.call=_,Sw.getRevertErrorData=I;const t=$h(),e=_se(),r=is(),n=Jh(),s=AUe(),i=l_(),o=Kt(),a=d_(),c=Wh(),u=df(),l=f_(),d=Ta(),f=Xh(),p=tt(),g=PB(),h=Zh(),y=zu(),E=OB(),S=wB(),C=Wu();async function _(U,L){const{account:B=U.account,authorizationList:A,batch:m=!!U.batch?.multicall,blockNumber:b,blockTag:w=U.experimental_blockTag??"latest",accessList:x,blobs:M,blockOverrides:k,code:j,data:N,factory:v,factoryData:R,gas:$,gasPrice:O,maxFeePerBlobGas:H,maxFeePerGas:W,maxPriorityFeePerGas:G,nonce:K,to:Q,value:re,stateOverride:de,...le}=L,se=B?(0,r.parseAccount)(B):void 0;if(j&&(v||R))throw new o.BaseError("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(j&&Q)throw new o.BaseError("Cannot provide both `code` & `to` as parameters.");const be=j&&N,We=v&&R&&Q&&N,Ne=be||We,Be=be?D({code:j,data:N}):We?F({data:N,factory:v,factoryData:R,to:Q}):N;try{(0,C.assertRequest)(L);const Ee=(typeof b=="bigint"?(0,p.numberToHex)(b):void 0)||w,fe=k?e.toRpc(k):void 0,Mt=(0,S.serializeStateOverride)(de),bt=U.chain?.formatters?.transactionRequest?.format,ge=(bt||y.formatTransactionRequest)({...(0,h.extract)(le,{format:bt}),accessList:x,account:se,authorizationList:A,blobs:M,data:Be,gas:$,gasPrice:O,maxFeePerBlobGas:H,maxFeePerGas:W,maxPriorityFeePerGas:G,nonce:K,to:Ne?void 0:Q,value:re},"call");if(m&&T({request:ge})&&!Mt&&!fe)try{return await P(U,{...ge,blockNumber:b,blockTag:w})}catch(q){if(!(q instanceof a.ClientChainNotConfiguredError)&&!(q instanceof a.ChainDoesNotSupportContract))throw q}const ve=(()=>{const q=[ge,Ee];return Mt&&fe?[...q,Mt,fe]:Mt?[...q,Mt]:fe?[...q,{},fe]:q})(),V=await U.request({method:"eth_call",params:ve});return V==="0x"?{data:void 0}:{data:V}}catch(At){const Ee=I(At),{offchainLookup:fe,offchainLookupSignature:Mt}=await Promise.resolve().then(()=>MB());if(U.ccipRead!==!1&&Ee?.slice(0,10)===Mt&&Q)return{data:await fe(U,{data:Ee,to:Q})};throw Ne&&Ee?.slice(0,10)==="0x101bb98d"?new c.CounterfactualDeploymentFailedError({factory:v}):(0,g.getCallError)(At,{...L,account:se,chain:U.chain})}}function T({request:U}){const{data:L,to:B,...A}=U;return!(!L||L.startsWith(s.aggregate3Signature)||!B||Object.values(A).filter(m=>typeof m<"u").length>0)}async function P(U,L){const{batchSize:B=1024,deployless:A=!1,wait:m=0}=typeof U.batch?.multicall=="object"?U.batch.multicall:{},{blockNumber:b,blockTag:w=U.experimental_blockTag??"latest",data:x,to:M}=L,k=(()=>{if(A)return null;if(L.multicallAddress)return L.multicallAddress;if(U.chain)return(0,f.getChainContractAddress)({blockNumber:b,chain:U.chain,contract:"multicall3"});throw new a.ClientChainNotConfiguredError})(),N=(typeof b=="bigint"?(0,p.numberToHex)(b):void 0)||w,{schedule:v}=(0,E.createBatchScheduler)({id:`${U.uid}.${N}`,wait:m,shouldSplitBatch(O){return O.reduce((W,{data:G})=>W+(G.length-2),0)>B*2},fn:async O=>{const H=O.map(K=>({allowFailure:!0,callData:K.data,target:K.to})),W=(0,d.encodeFunctionData)({abi:n.multicall3Abi,args:[H],functionName:"aggregate3"}),G=await U.request({method:"eth_call",params:[{...k===null?{data:D({code:i.multicall3Bytecode,data:W})}:{to:k,data:W}},N]});return(0,u.decodeFunctionResult)({abi:n.multicall3Abi,args:[H],functionName:"aggregate3",data:G||"0x"})}}),[{returnData:R,success:$}]=await v({data:x,to:M});if(!$)throw new c.RawContractError({data:R});return R==="0x"?{data:void 0}:{data:R}}function D(U){const{code:L,data:B}=U;return(0,l.encodeDeployData)({abi:(0,t.parseAbi)(["constructor(bytes, bytes)"]),bytecode:i.deploylessCallViaBytecodeBytecode,args:[L,B]})}function F(U){const{data:L,factory:B,factoryData:A,to:m}=U;return(0,l.encodeDeployData)({abi:(0,t.parseAbi)(["constructor(address, bytes, address, bytes)"]),bytecode:i.deploylessCallViaFactoryBytecode,args:[m,L,B,A]})}function I(U){if(!(U instanceof o.BaseError))return;const L=U.walk();return typeof L?.data=="object"?L.data?.data:L.data}return Sw}var WH;function zl(){if(WH)return BA;WH=1,Object.defineProperty(BA,"__esModule",{value:!0}),BA.readContract=i;const t=df(),e=Ta(),r=Gh(),n=kr(),s=h_();async function i(o,a){const{abi:c,address:u,args:l,functionName:d,...f}=a,p=(0,e.encodeFunctionData)({abi:c,args:l,functionName:d});try{const{data:g}=await(0,n.getAction)(o,s.call,"call")({...f,data:p,to:u});return(0,t.decodeFunctionResult)({abi:c,args:l,functionName:d,data:g||"0x"})}catch(g){throw(0,r.getContractError)(g,{abi:c,address:u,args:l,docsPath:"/docs/contract/readContract",functionName:d})}}return BA}var zA={},VH;function Ase(){if(VH)return zA;VH=1,Object.defineProperty(zA,"__esModule",{value:!0}),zA.simulateContract=o;const t=is(),e=df(),r=Ta(),n=Gh(),s=kr(),i=h_();async function o(a,c){const{abi:u,address:l,args:d,dataSuffix:f,functionName:p,...g}=c,h=g.account?(0,t.parseAccount)(g.account):a.account,y=(0,r.encodeFunctionData)({abi:u,args:d,functionName:p});try{const{data:E}=await(0,s.getAction)(a,i.call,"call")({batch:!1,data:`${y}${f?f.replace("0x",""):""}`,to:l,...g,account:h}),S=(0,e.decodeFunctionResult)({abi:u,args:d,functionName:p,data:E||"0x"}),C=u.filter(_=>"name"in _&&_.name===c.functionName);return{result:S,request:{abi:C,address:l,args:d,dataSuffix:f,functionName:p,...g,account:h}}}catch(E){throw(0,n.getContractError)(E,{abi:u,address:l,args:d,docsPath:"/docs/contract/simulateContract",functionName:p,sender:h?.address})}}return zA}var WA={},YP={},GH;function cg(){return GH||(GH=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.cleanupCache=t.listenersCache=void 0,t.observe=r,t.listenersCache=new Map,t.cleanupCache=new Map;let e=0;function r(n,s,i){const o=++e,a=()=>t.listenersCache.get(n)||[],c=()=>{const p=a();t.listenersCache.set(n,p.filter(g=>g.id!==o))},u=()=>{const p=a();if(!p.some(h=>h.id===o))return;const g=t.cleanupCache.get(n);if(p.length===1&&g){const h=g();h instanceof Promise&&h.catch(()=>{})}c()},l=a();if(t.listenersCache.set(n,[...l,{id:o,fns:s}]),l&&l.length>0)return u;const d={};for(const p in s)d[p]=((...g)=>{const h=a();if(h.length!==0)for(const y of h)y.fns[p]?.(...g)});const f=i(d);return typeof f=="function"&&t.cleanupCache.set(n,f),u}})(YP)),YP}var VA={},GA={},KH;function DB(){if(KH)return GA;KH=1,Object.defineProperty(GA,"__esModule",{value:!0}),GA.wait=t;async function t(e){return new Promise(r=>setTimeout(r,e))}return GA}var ZH;function tb(){if(ZH)return VA;ZH=1,Object.defineProperty(VA,"__esModule",{value:!0}),VA.poll=e;const t=DB();function e(r,{emitOnBegin:n,initialWaitTime:s,interval:i}){let o=!0;const a=()=>o=!1;return(async()=>{let u;n&&(u=await r({unpoll:a}));const l=await s?.(u)??i;await(0,t.wait)(l);const d=async()=>{o&&(await r({unpoll:a}),await(0,t.wait)(i),d())};d()})(),a}return VA}var kw={},JP={},YH;function xse(){return YH||(YH=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.responseCache=t.promiseCache=void 0,t.getCache=e,t.withCache=r,t.promiseCache=new Map,t.responseCache=new Map;function e(n){const s=(a,c)=>({clear:()=>c.delete(a),get:()=>c.get(a),set:u=>c.set(a,u)}),i=s(n,t.promiseCache),o=s(n,t.responseCache);return{clear:()=>{i.clear(),o.clear()},promise:i,response:o}}async function r(n,{cacheKey:s,cacheTime:i=Number.POSITIVE_INFINITY}){const o=e(s),a=o.response.get();if(a&&i>0&&Date.now()-a.created.getTime()<i)return a.data;let c=o.promise.get();c||(c=n(),o.promise.set(c));try{const u=await c;return o.response.set({created:new Date,data:u}),u}finally{o.promise.clear()}}})(JP)),JP}var JH;function p_(){if(JH)return kw;JH=1,Object.defineProperty(kw,"__esModule",{value:!0}),kw.getBlockNumberCache=r,kw.getBlockNumber=n;const t=xse(),e=s=>`blockNumber.${s}`;function r(s){return(0,t.getCache)(e(s))}async function n(s,{cacheTime:i=s.cacheTime}={}){const o=await(0,t.withCache)(()=>s.request({method:"eth_blockNumber"}),{cacheKey:e(s.uid),cacheTime:i});return BigInt(o)}return kw}var KA={},XH;function BT(){if(XH)return KA;XH=1,Object.defineProperty(KA,"__esModule",{value:!0}),KA.getFilterChanges=r;const t=u_(),e=lf();async function r(n,{filter:s}){const i="strict"in s&&s.strict,o=await s.request({method:"eth_getFilterChanges",params:[s.id]});if(typeof o[0]=="string")return o;const a=o.map(c=>(0,e.formatLog)(c));return!("abi"in s)||!s.abi?a:(0,t.parseEventLogs)({abi:s.abi,logs:a,strict:i})}return KA}var ZA={},QH;function UT(){if(QH)return ZA;QH=1,Object.defineProperty(ZA,"__esModule",{value:!0}),ZA.uninstallFilter=t;async function t(e,{filter:r}){return r.request({method:"eth_uninstallFilter",params:[r.id]})}return ZA}var ez;function Cse(){if(ez)return WA;ez=1,Object.defineProperty(WA,"__esModule",{value:!0}),WA.watchContractEvent=g;const t=Jn(),e=Vh(),r=c_(),n=ng(),s=lf(),i=kr(),o=cg(),a=tb(),c=Li(),u=hB(),l=p_(),d=NB(),f=BT(),p=UT();function g(h,y){const{abi:E,address:S,args:C,batch:_=!0,eventName:T,fromBlock:P,onError:D,onLogs:F,poll:I,pollingInterval:U=h.pollingInterval,strict:L}=y;return(typeof I<"u"?I:typeof P=="bigint"?!0:!(h.transport.type==="webSocket"||h.transport.type==="ipc"||h.transport.type==="fallback"&&(h.transport.transports[0].config.type==="webSocket"||h.transport.transports[0].config.type==="ipc")))?(()=>{const b=L??!1,w=(0,c.stringify)(["watchContractEvent",S,C,_,h.uid,T,U,b,P]);return(0,o.observe)(w,{onLogs:F,onError:D},x=>{let M;P!==void 0&&(M=P-1n);let k,j=!1;const N=(0,a.poll)(async()=>{if(!j){try{k=await(0,i.getAction)(h,u.createContractEventFilter,"createContractEventFilter")({abi:E,address:S,args:C,eventName:T,strict:b,fromBlock:P})}catch{}j=!0;return}try{let v;if(k)v=await(0,i.getAction)(h,f.getFilterChanges,"getFilterChanges")({filter:k});else{const R=await(0,i.getAction)(h,l.getBlockNumber,"getBlockNumber")({});M&&M<R?v=await(0,i.getAction)(h,d.getContractEvents,"getContractEvents")({abi:E,address:S,args:C,eventName:T,fromBlock:M+1n,toBlock:R,strict:b}):v=[],M=R}if(v.length===0)return;if(_)x.onLogs(v);else for(const R of v)x.onLogs([R])}catch(v){k&&v instanceof e.InvalidInputRpcError&&(j=!1),x.onError?.(v)}},{emitOnBegin:!0,interval:U});return async()=>{k&&await(0,i.getAction)(h,p.uninstallFilter,"uninstallFilter")({filter:k}),N()}})})():(()=>{const b=L??!1,w=(0,c.stringify)(["watchContractEvent",S,C,_,h.uid,T,U,b]);let x=!0,M=()=>x=!1;return(0,o.observe)(w,{onLogs:F,onError:D},k=>((async()=>{try{const j=(()=>{if(h.transport.type==="fallback"){const R=h.transport.transports.find($=>$.config.type==="webSocket"||$.config.type==="ipc");return R?R.value:h.transport}return h.transport})(),N=T?(0,n.encodeEventTopics)({abi:E,eventName:T,args:C}):[],{unsubscribe:v}=await j.subscribe({params:["logs",{address:S,topics:N}],onData(R){if(!x)return;const $=R.result;try{const{eventName:O,args:H}=(0,r.decodeEventLog)({abi:E,data:$.data,topics:$.topics,strict:L}),W=(0,s.formatLog)($,{args:H,eventName:O});k.onLogs([W])}catch(O){let H,W;if(O instanceof t.DecodeLogDataMismatch||O instanceof t.DecodeLogTopicsMismatch){if(L)return;H=O.abiItem.name,W=O.abiItem.inputs?.some(K=>!("name"in K&&K.name))}const G=(0,s.formatLog)($,{args:W?[]:{},eventName:H});k.onLogs([G])}},onError(R){k.onError?.(R)}});M=v,x||M()}catch(j){D?.(j)}})(),()=>M()))})()}return WA}var Bw={},_p={},tz;function Qh(){if(tz)return _p;tz=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.AccountTypeNotSupportedError=_p.AccountNotFoundError=void 0;const t=Kt();class e extends t.BaseError{constructor({docsPath:s}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:s,docsSlug:"account",name:"AccountNotFoundError"})}}_p.AccountNotFoundError=e;class r extends t.BaseError{constructor({docsPath:s,metaMessages:i,type:o}){super(`Account type "${o}" is not supported.`,{docsPath:s,metaMessages:i,name:"AccountTypeNotSupportedError"})}}return _p.AccountTypeNotSupportedError=r,_p}var YA={},JA={},rz;function g_(){if(rz)return JA;rz=1,Object.defineProperty(JA,"__esModule",{value:!0}),JA.assertCurrentChain=e;const t=d_();function e({chain:r,currentChainId:n}){if(!r)throw new t.ChainNotFoundError;if(n!==r.id)throw new t.ChainMismatchError({chain:r,currentChainId:n})}return JA}var XA={},nz;function jB(){if(nz)return XA;nz=1,Object.defineProperty(XA,"__esModule",{value:!0}),XA.sendRawTransaction=t;async function t(e,{serializedTransaction:r}){return e.request({method:"eth_sendRawTransaction",params:[r]},{retryCount:0})}return XA}var sz;function MT(){if(sz)return YA;sz=1,Object.defineProperty(YA,"__esModule",{value:!0}),YA.sendTransaction=h;const t=is(),e=Qh(),r=Kt(),n=r_(),s=g_(),i=o_(),o=Zh(),a=zu(),c=kr(),u=tg(),l=Wu(),d=Yh(),f=a_(),p=jB(),g=new u.LruMap(128);async function h(y,E){const{account:S=y.account,chain:C=y.chain,accessList:_,authorizationList:T,blobs:P,data:D,gas:F,gasPrice:I,maxFeePerBlobGas:U,maxFeePerGas:L,maxPriorityFeePerGas:B,nonce:A,type:m,value:b,...w}=E;if(typeof S>"u")throw new e.AccountNotFoundError({docsPath:"/docs/actions/wallet/sendTransaction"});const x=S?(0,t.parseAccount)(S):null;try{(0,l.assertRequest)(E);const M=await(async()=>{if(E.to)return E.to;if(E.to!==null&&T&&T.length>0)return await(0,n.recoverAuthorizationAddress)({authorization:T[0]}).catch(()=>{throw new r.BaseError("`to` is required. Could not infer from `authorizationList`.")})})();if(x?.type==="json-rpc"||x===null){let k;C!==null&&(k=await(0,c.getAction)(y,d.getChainId,"getChainId")({}),(0,s.assertCurrentChain)({currentChainId:k,chain:C}));const j=y.chain?.formatters?.transactionRequest?.format,v=(j||a.formatTransactionRequest)({...(0,o.extract)(w,{format:j}),accessList:_,account:x,authorizationList:T,blobs:P,chainId:k,data:D,gas:F,gasPrice:I,maxFeePerBlobGas:U,maxFeePerGas:L,maxPriorityFeePerGas:B,nonce:A,to:M,type:m,value:b},"sendTransaction"),R=g.get(y.uid),$=R?"wallet_sendTransaction":"eth_sendTransaction";try{return await y.request({method:$,params:[v]},{retryCount:0})}catch(O){if(R===!1)throw O;const H=O;if(H.name==="InvalidInputRpcError"||H.name==="InvalidParamsRpcError"||H.name==="MethodNotFoundRpcError"||H.name==="MethodNotSupportedRpcError")return await y.request({method:"wallet_sendTransaction",params:[v]},{retryCount:0}).then(W=>(g.set(y.uid,!0),W)).catch(W=>{const G=W;throw G.name==="MethodNotFoundRpcError"||G.name==="MethodNotSupportedRpcError"?(g.set(y.uid,!1),H):G});throw H}}if(x?.type==="local"){const k=await(0,c.getAction)(y,f.prepareTransactionRequest,"prepareTransactionRequest")({account:x,accessList:_,authorizationList:T,blobs:P,chain:C,data:D,gas:F,gasPrice:I,maxFeePerBlobGas:U,maxFeePerGas:L,maxPriorityFeePerGas:B,nonce:A,nonceManager:x.nonceManager,parameters:[...f.defaultParameters,"sidecars"],type:m,value:b,...w,to:M}),j=C?.serializers?.transaction,N=await x.signTransaction(k,{serializer:j});return await(0,c.getAction)(y,p.sendRawTransaction,"sendRawTransaction")({serializedTransaction:N})}throw x?.type==="smart"?new e.AccountTypeNotSupportedError({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new e.AccountTypeNotSupportedError({docsPath:"/docs/actions/wallet/sendTransaction",type:x?.type})}catch(M){throw M instanceof e.AccountTypeNotSupportedError?M:(0,i.getTransactionError)(M,{...E,account:x,chain:E.chain||void 0})}}return YA}var iz;function LB(){if(iz)return Bw;iz=1,Object.defineProperty(Bw,"__esModule",{value:!0}),Bw.writeContract=o;const t=is(),e=Qh(),r=Ta(),n=Gh(),s=kr(),i=MT();async function o(a,c){return o.internal(a,i.sendTransaction,"sendTransaction",c)}return(function(a){async function c(u,l,d,f){const{abi:p,account:g=u.account,address:h,args:y,dataSuffix:E,functionName:S,...C}=f;if(typeof g>"u")throw new e.AccountNotFoundError({docsPath:"/docs/contract/writeContract"});const _=g?(0,t.parseAccount)(g):null,T=(0,r.encodeFunctionData)({abi:p,args:y,functionName:S});try{return await(0,s.getAction)(u,l,d)({data:`${T}${E?E.replace("0x",""):""}`,to:h,account:_,...C})}catch(P){throw(0,n.getContractError)(P,{abi:p,address:h,args:y,docsPath:"/docs/contract/writeContract",functionName:S,sender:_?.address})}}a.internal=c})(o||(Bw.writeContract=o={})),Bw}var oz;function CUe(){if(oz)return Ug;oz=1,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.getContract=c,Ug.getFunctionParameters=u,Ug.getEventParameters=l;const t=kr(),e=hB(),r=wse(),n=NB(),s=zl(),i=Ase(),o=Cse(),a=LB();function c({abi:d,address:f,client:p}){const g=p,[h,y]=g?"public"in g&&"wallet"in g?[g.public,g.wallet]:"public"in g?[g.public,void 0]:"wallet"in g?[void 0,g.wallet]:[g,g]:[void 0,void 0],E=h!=null,S=y!=null,C={};let _=!1,T=!1,P=!1;for(const D of d)if(D.type==="function"?D.stateMutability==="view"||D.stateMutability==="pure"?_=!0:T=!0:D.type==="event"&&(P=!0),_&&T&&P)break;return E&&(_&&(C.read=new Proxy({},{get(D,F){return(...I)=>{const{args:U,options:L}=u(I);return(0,t.getAction)(h,s.readContract,"readContract")({abi:d,address:f,functionName:F,args:U,...L})}}})),T&&(C.simulate=new Proxy({},{get(D,F){return(...I)=>{const{args:U,options:L}=u(I);return(0,t.getAction)(h,i.simulateContract,"simulateContract")({abi:d,address:f,functionName:F,args:U,...L})}}})),P&&(C.createEventFilter=new Proxy({},{get(D,F){return(...I)=>{const U=d.find(A=>A.type==="event"&&A.name===F),{args:L,options:B}=l(I,U);return(0,t.getAction)(h,e.createContractEventFilter,"createContractEventFilter")({abi:d,address:f,eventName:F,args:L,...B})}}}),C.getEvents=new Proxy({},{get(D,F){return(...I)=>{const U=d.find(A=>A.type==="event"&&A.name===F),{args:L,options:B}=l(I,U);return(0,t.getAction)(h,n.getContractEvents,"getContractEvents")({abi:d,address:f,eventName:F,args:L,...B})}}}),C.watchEvent=new Proxy({},{get(D,F){return(...I)=>{const U=d.find(A=>A.type==="event"&&A.name===F),{args:L,options:B}=l(I,U);return(0,t.getAction)(h,o.watchContractEvent,"watchContractEvent")({abi:d,address:f,eventName:F,args:L,...B})}}}))),S&&T&&(C.write=new Proxy({},{get(D,F){return(...I)=>{const{args:U,options:L}=u(I);return(0,t.getAction)(y,a.writeContract,"writeContract")({abi:d,address:f,functionName:F,args:U,...L})}}})),(E||S)&&T&&(C.estimateGas=new Proxy({},{get(D,F){return(...I)=>{const{args:U,options:L}=u(I),B=h??y;return(0,t.getAction)(B,r.estimateContractGas,"estimateContractGas")({abi:d,address:f,functionName:F,args:U,...L,account:L.account??y.account})}}})),C.address=f,C.abi=d,C}function u(d){const f=d.length&&Array.isArray(d[0]),p=f?d[0]:[],g=(f?d[1]:d[0])??{};return{args:p,options:g}}function l(d,f){let p=!1;Array.isArray(d[0])?p=!0:d.length===1?p=f.inputs.some(y=>y.indexed):d.length===2&&(p=!0);const g=p?d[0]:void 0,h=(p?d[1]:d[0])??{};return{args:g,options:h}}return Ug}var Wg={},Uw={},az;function Sse(){if(az)return Uw;az=1,Object.defineProperty(Uw,"__esModule",{value:!0}),Uw.BundleFailedError=void 0;const t=Kt();class e extends t.BaseError{constructor(n){super(`Call bundle failed with status: ${n.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=n}}return Uw.BundleFailedError=e,Uw}var QA={},cz;function DT(){if(cz)return QA;cz=1,Object.defineProperty(QA,"__esModule",{value:!0}),QA.withRetry=e;const t=DB();function e(r,{delay:n=100,retryCount:s=2,shouldRetry:i=()=>!0}={}){return new Promise((o,a)=>{const c=async({count:u=0}={})=>{const l=async({error:d})=>{const f=typeof n=="function"?n({count:u,error:d}):n;f&&await(0,t.wait)(f),c({count:u+1})};try{const d=await r();o(d)}catch(d){if(u<s&&await i({count:u,error:d}))return l({error:d});a(d)}};c()})}return QA}var ex={},XP={},uz;function m_(){return uz||(uz=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defineTransactionReceipt=t.receiptStatuses=void 0,t.formatTransactionReceipt=i;const e=ys(),r=s_(),n=lf(),s=eb();t.receiptStatuses={"0x0":"reverted","0x1":"success"};function i(o,a){const c={...o,blockNumber:o.blockNumber?BigInt(o.blockNumber):null,contractAddress:o.contractAddress?o.contractAddress:null,cumulativeGasUsed:o.cumulativeGasUsed?BigInt(o.cumulativeGasUsed):null,effectiveGasPrice:o.effectiveGasPrice?BigInt(o.effectiveGasPrice):null,gasUsed:o.gasUsed?BigInt(o.gasUsed):null,logs:o.logs?o.logs.map(u=>(0,n.formatLog)(u)):null,to:o.to?o.to:null,transactionIndex:o.transactionIndex?(0,e.hexToNumber)(o.transactionIndex):null,status:o.status?t.receiptStatuses[o.status]:null,type:o.type?s.transactionType[o.type]||o.type:null};return o.blobGasPrice&&(c.blobGasPrice=BigInt(o.blobGasPrice)),o.blobGasUsed&&(c.blobGasUsed=BigInt(o.blobGasUsed)),c}t.defineTransactionReceipt=(0,r.defineFormatter)("transactionReceipt",i)})(XP)),XP}var QP={},lz;function FB(){return lz||(lz=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fallbackTransactionErrorMagicIdentifier=t.fallbackMagicIdentifier=void 0,t.sendCalls=l;const e=is(),r=Kt(),n=Vh(),s=Ta(),i=fi(),o=ys(),a=tt(),c=o_(),u=MT();t.fallbackMagicIdentifier="0x5792579257925792579257925792579257925792579257925792579257925792",t.fallbackTransactionErrorMagicIdentifier=(0,a.numberToHex)(0,{size:32});async function l(d,f){const{account:p=d.account,capabilities:g,chain:h=d.chain,experimental_fallback:y,experimental_fallbackDelay:E=32,forceAtomic:S=!1,id:C,version:_="2.0.0"}=f,T=p?(0,e.parseAccount)(p):null,P=f.calls.map(D=>{const F=D,I=F.abi?(0,s.encodeFunctionData)({abi:F.abi,functionName:F.functionName,args:F.args}):F.data;return{data:F.dataSuffix&&I?(0,i.concat)([I,F.dataSuffix]):I,to:F.to,value:F.value?(0,a.numberToHex)(F.value):void 0}});try{const D=await d.request({method:"wallet_sendCalls",params:[{atomicRequired:S,calls:P,capabilities:g,chainId:(0,a.numberToHex)(h.id),from:T?.address,id:C,version:_}]},{retryCount:0});return typeof D=="string"?{id:D}:D}catch(D){const F=D;if(y&&(F.name==="MethodNotFoundRpcError"||F.name==="MethodNotSupportedRpcError"||F.name==="UnknownRpcError"||F.details.toLowerCase().includes("does not exist / is not available")||F.details.toLowerCase().includes("missing or invalid. request()")||F.details.toLowerCase().includes("did not match any variant of untagged enum")||F.details.toLowerCase().includes("account upgraded to unsupported contract")||F.details.toLowerCase().includes("eip-7702 not supported")||F.details.toLowerCase().includes("unsupported wc_ method")||F.details.toLowerCase().includes("feature toggled misconfigured")||F.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(g&&Object.values(g).some(A=>!A.optional)){const A="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new n.UnsupportedNonOptionalCapabilityError(new r.BaseError(A,{details:A}))}if(S&&P.length>1){const B="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new n.AtomicityNotSupportedError(new r.BaseError(B,{details:B}))}const I=[];for(const B of P){const A=(0,u.sendTransaction)(d,{account:T,chain:h,data:B.data,to:B.to,value:B.value?(0,o.hexToBigInt)(B.value):void 0});I.push(A),E>0&&await new Promise(m=>setTimeout(m,E))}const U=await Promise.allSettled(I);if(U.every(B=>B.status==="rejected"))throw U[0].reason;const L=U.map(B=>B.status==="fulfilled"?B.value:t.fallbackTransactionErrorMagicIdentifier);return{id:(0,i.concat)([...L,(0,a.numberToHex)(h.id,{size:32}),t.fallbackMagicIdentifier])}}throw(0,c.getTransactionError)(D,{...f,account:T,chain:f.chain})}}})(QP)),QP}var dz;function Ise(){if(dz)return ex;dz=1,Object.defineProperty(ex,"__esModule",{value:!0}),ex.getCallsStatus=i;const t=Gc(),e=af(),r=ys(),n=m_(),s=FB();async function i(o,a){async function c(y){if(y.endsWith(s.fallbackMagicIdentifier.slice(2))){const S=(0,e.trim)((0,t.sliceHex)(y,-64,-32)),C=(0,t.sliceHex)(y,0,-64).slice(2).match(/.{1,64}/g),_=await Promise.all(C.map(P=>s.fallbackTransactionErrorMagicIdentifier.slice(2)!==P?o.request({method:"eth_getTransactionReceipt",params:[`0x${P}`]},{dedupe:!0}):void 0)),T=_.some(P=>P===null)?100:_.every(P=>P?.status==="0x1")?200:_.every(P=>P?.status==="0x0")?500:600;return{atomic:!1,chainId:(0,r.hexToNumber)(S),receipts:_.filter(Boolean),status:T,version:"2.0.0"}}return o.request({method:"wallet_getCallsStatus",params:[y]})}const{atomic:u=!1,chainId:l,receipts:d,version:f="2.0.0",...p}=await c(a.id),[g,h]=(()=>{const y=p.status;return y>=100&&y<200?["pending",y]:y>=200&&y<300?["success",y]:y>=300&&y<700?["failure",y]:y==="CONFIRMED"?["success",200]:y==="PENDING"?["pending",100]:[void 0,y]})();return{...p,atomic:u,chainId:l?(0,r.hexToNumber)(l):void 0,receipts:d?.map(y=>({...y,blockNumber:(0,r.hexToBigInt)(y.blockNumber),gasUsed:(0,r.hexToBigInt)(y.gasUsed),status:n.receiptStatuses[y.status]}))??[],statusCode:h,status:g,version:f}}return ex}var fz;function $B(){if(fz)return Wg;fz=1,Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.WaitForCallsStatusTimeoutError=void 0,Wg.waitForCallsStatus=u;const t=Kt(),e=Sse(),r=kr(),n=cg(),s=tb(),i=RB(),o=DT(),a=Li(),c=Ise();async function u(d,f){const{id:p,pollingInterval:g=d.pollingInterval,status:h=({statusCode:U})=>U===200||U>=300,retryCount:y=4,retryDelay:E=({count:U})=>~~(1<<U)*200,timeout:S=6e4,throwOnFailure:C=!1}=f,_=(0,a.stringify)(["waitForCallsStatus",d.uid,p]),{promise:T,resolve:P,reject:D}=(0,i.withResolvers)();let F;const I=(0,n.observe)(_,{resolve:P,reject:D},U=>{const L=(0,s.poll)(async()=>{const B=A=>{clearTimeout(F),L(),A(),I()};try{const A=await(0,o.withRetry)(async()=>{const m=await(0,r.getAction)(d,c.getCallsStatus,"getCallsStatus")({id:p});if(C&&m.status==="failure")throw new e.BundleFailedError(m);return m},{retryCount:y,delay:E});if(!h(A))return;B(()=>U.resolve(A))}catch(A){B(()=>U.reject(A))}},{interval:g,emitOnBegin:!0});return L});return F=S?setTimeout(()=>{I(),clearTimeout(F),D(new l({id:p}))},S):void 0,await T}class l extends t.BaseError{constructor({id:f}){super(`Timed out while waiting for call bundle with id "${f}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}return Wg.WaitForCallsStatusTimeoutError=l,Wg}var Mw={},tx={},hz;function Tse(){if(hz)return tx;hz=1,Object.defineProperty(tx,"__esModule",{value:!0}),tx.uid=n;const t=256;let e=t,r;function n(s=11){if(!r||e+s>t*2){r="",e=0;for(let i=0;i<t;i++)r+=(256+Math.random()*256|0).toString(16).substring(1)}return r.substring(e,e+++s)}return tx}var pz;function jT(){if(pz)return Mw;pz=1,Object.defineProperty(Mw,"__esModule",{value:!0}),Mw.createClient=r,Mw.rpcSchema=n;const t=is(),e=Tse();function r(s){const{batch:i,chain:o,ccipRead:a,key:c="base",name:u="Base Client",type:l="base"}=s,d=s.experimental_blockTag??(typeof o?.experimental_preconfirmationTime=="number"?"pending":void 0),f=o?.blockTime??12e3,p=Math.min(Math.max(Math.floor(f/2),500),4e3),g=s.pollingInterval??p,h=s.cacheTime??g,y=s.account?(0,t.parseAccount)(s.account):void 0,{config:E,request:S,value:C}=s.transport({account:y,chain:o,pollingInterval:g}),_={...E,...C},T={account:y,batch:i,cacheTime:h,ccipRead:a,chain:o,key:c,name:u,pollingInterval:g,request:S,transport:_,type:l,uid:(0,e.uid)(),...d?{experimental_blockTag:d}:{}};function P(D){return F=>{const I=F(D);for(const L in T)delete I[L];const U={...D,...I};return Object.assign(U,{extend:P(U)})}}return Object.assign(T,{extend:P(T)})}function n(){return null}return Mw}var rx={},nx={},sx={},ix={},gz;function qB(){if(gz)return ix;gz=1,Object.defineProperty(ix,"__esModule",{value:!0}),ix.isNullUniversalResolverError=r;const t=Kt(),e=Wh();function r(n){if(!(n instanceof t.BaseError))return!1;const s=n.walk(i=>i instanceof e.ContractFunctionRevertedError);return s instanceof e.ContractFunctionRevertedError?s.data?.errorName==="HttpError"||s.data?.errorName==="ResolverError"||s.data?.errorName==="ResolverNotContract"||s.data?.errorName==="ResolverNotFound"||s.data?.errorName==="ReverseAddressMismatch"||s.data?.errorName==="UnsupportedResolverProfile":!1}return ix}var ox={},ax={},mz;function Nse(){if(mz)return ax;mz=1,Object.defineProperty(ax,"__esModule",{value:!0}),ax.encodedLabelToLabelhash=e;const t=$o();function e(r){if(r.length!==66||r.indexOf("[")!==0||r.indexOf("]")!==65)return null;const n=`0x${r.slice(1,65)}`;return(0,t.isHex)(n)?n:null}return ax}var yz;function HB(){if(yz)return ox;yz=1,Object.defineProperty(ox,"__esModule",{value:!0}),ox.namehash=i;const t=fi(),e=Pn(),r=tt(),n=Sa(),s=Nse();function i(o){let a=new Uint8Array(32).fill(0);if(!o)return(0,r.bytesToHex)(a);const c=o.split(".");for(let u=c.length-1;u>=0;u-=1){const l=(0,s.encodedLabelToLabelhash)(c[u]),d=l?(0,e.toBytes)(l):(0,n.keccak256)((0,e.stringToBytes)(c[u]),"bytes");a=(0,n.keccak256)((0,t.concat)([a,d]),"bytes")}return(0,r.bytesToHex)(a)}return ox}var cx={},ux={},bz;function SUe(){if(bz)return ux;bz=1,Object.defineProperty(ux,"__esModule",{value:!0}),ux.encodeLabelhash=t;function t(e){return`[${e.slice(2)}]`}return ux}var lx={},wz;function Pse(){if(wz)return lx;wz=1,Object.defineProperty(lx,"__esModule",{value:!0}),lx.labelhash=s;const t=Pn(),e=tt(),r=Sa(),n=Nse();function s(i){const o=new Uint8Array(32).fill(0);return i?(0,n.encodedLabelToLabelhash)(i)||(0,r.keccak256)((0,t.stringToBytes)(i)):(0,e.bytesToHex)(o)}return lx}var vz;function zB(){if(vz)return cx;vz=1,Object.defineProperty(cx,"__esModule",{value:!0}),cx.packetToBytes=n;const t=Pn(),e=SUe(),r=Pse();function n(s){const i=s.replace(/^\.|\.$/gm,"");if(i.length===0)return new Uint8Array(1);const o=new Uint8Array((0,t.stringToBytes)(i).byteLength+2);let a=0;const c=i.split(".");for(let u=0;u<c.length;u++){let l=(0,t.stringToBytes)(c[u]);l.byteLength>255&&(l=(0,t.stringToBytes)((0,e.encodeLabelhash)((0,r.labelhash)(c[u])))),o[a]=l.length,o.set(l,a+1),a+=l.length+1}return o.byteLength!==a+1?o.slice(0,a+1):o}return cx}var Ez;function IUe(){if(Ez)return sx;Ez=1,Object.defineProperty(sx,"__esModule",{value:!0}),sx.getEnsAddress=f;const t=Jh(),e=df(),r=Ta(),n=Xh(),s=af(),i=tt(),o=qB(),a=kT(),c=HB(),u=zB(),l=kr(),d=zl();async function f(p,g){const{blockNumber:h,blockTag:y,coinType:E,name:S,gatewayUrls:C,strict:_}=g,{chain:T}=p,P=(()=>{if(g.universalResolverAddress)return g.universalResolverAddress;if(!T)throw new Error("client chain not configured. universalResolverAddress is required.");return(0,n.getChainContractAddress)({blockNumber:h,chain:T,contract:"ensUniversalResolver"})})(),D=T?.ensTlds;if(D&&!D.some(I=>S.endsWith(I)))return null;const F=E!=null?[(0,c.namehash)(S),BigInt(E)]:[(0,c.namehash)(S)];try{const I=(0,r.encodeFunctionData)({abi:t.addressResolverAbi,functionName:"addr",args:F}),U={address:P,abi:t.universalResolverResolveAbi,functionName:"resolveWithGateways",args:[(0,i.toHex)((0,u.packetToBytes)(S)),I,C??[a.localBatchGatewayUrl]],blockNumber:h,blockTag:y},B=await(0,l.getAction)(p,d.readContract,"readContract")(U);if(B[0]==="0x")return null;const A=(0,e.decodeFunctionResult)({abi:t.addressResolverAbi,args:F,functionName:"addr",data:B[0]});return A==="0x"||(0,s.trim)(A)==="0x00"?null:A}catch(I){if(_)throw I;if((0,o.isNullUniversalResolverError)(I))return null;throw I}}return sx}var dx={},fx={},cu={},ja={},_z;function WB(){if(_z)return ja;_z=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.EnsInvalidChainIdError=ja.EnsAvatarUnsupportedNamespaceError=ja.EnsAvatarUriResolutionError=ja.EnsAvatarInvalidNftUriError=ja.EnsAvatarInvalidMetadataError=void 0;const t=Kt();class e extends t.BaseError{constructor({data:a}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(a)}`],name:"EnsAvatarInvalidMetadataError"})}}ja.EnsAvatarInvalidMetadataError=e;class r extends t.BaseError{constructor({reason:a}){super(`ENS NFT avatar URI is invalid. ${a}`,{name:"EnsAvatarInvalidNftUriError"})}}ja.EnsAvatarInvalidNftUriError=r;class n extends t.BaseError{constructor({uri:a}){super(`Unable to resolve ENS avatar URI "${a}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}ja.EnsAvatarUriResolutionError=n;class s extends t.BaseError{constructor({namespace:a}){super(`ENS NFT avatar namespace "${a}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}ja.EnsAvatarUnsupportedNamespaceError=s;class i extends t.BaseError{constructor({chainId:a}){super(`Invalid ENSIP-11 chainId: ${a}. Must be between 0 and 0x7fffffff, or 1.`,{name:"EnsInvalidChainIdError"})}}return ja.EnsInvalidChainIdError=i,ja}var Az;function TUe(){if(Az)return cu;Az=1,Object.defineProperty(cu,"__esModule",{value:!0}),cu.isImageUri=o,cu.getGateway=a,cu.resolveAvatarUri=c,cu.getJsonImage=u,cu.getMetadataAvatarUri=l,cu.parseAvatarUri=d,cu.parseNftUri=f,cu.getNftTokenUri=p;const t=zl(),e=WB(),r=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,n=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,s=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,i=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function o(g){try{const h=await fetch(g,{method:"HEAD"});return h.status===200?h.headers.get("content-type")?.startsWith("image/"):!1}catch(h){return typeof h=="object"&&typeof h.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(y=>{const E=new Image;E.onload=()=>{y(!0)},E.onerror=()=>{y(!1)},E.src=g})}}function a(g,h){return g?g.endsWith("/")?g.slice(0,-1):g:h}function c({uri:g,gatewayUrls:h}){const y=s.test(g);if(y)return{uri:g,isOnChain:!0,isEncoded:y};const E=a(h?.ipfs,"https://ipfs.io"),S=a(h?.arweave,"https://arweave.net"),C=g.match(r),{protocol:_,subpath:T,target:P,subtarget:D=""}=C?.groups||{},F=_==="ipns:/"||T==="ipns/",I=_==="ipfs:/"||T==="ipfs/"||n.test(g);if(g.startsWith("http")&&!F&&!I){let L=g;return h?.arweave&&(L=g.replace(/https:\/\/arweave.net/g,h?.arweave)),{uri:L,isOnChain:!1,isEncoded:!1}}if((F||I)&&P)return{uri:`${E}/${F?"ipns":"ipfs"}/${P}${D}`,isOnChain:!1,isEncoded:!1};if(_==="ar:/"&&P)return{uri:`${S}/${P}${D||""}`,isOnChain:!1,isEncoded:!1};let U=g.replace(i,"");if(U.startsWith("<svg")&&(U=`data:image/svg+xml;base64,${btoa(U)}`),U.startsWith("data:")||U.startsWith("{"))return{uri:U,isOnChain:!0,isEncoded:!1};throw new e.EnsAvatarUriResolutionError({uri:g})}function u(g){if(typeof g!="object"||!("image"in g)&&!("image_url"in g)&&!("image_data"in g))throw new e.EnsAvatarInvalidMetadataError({data:g});return g.image||g.image_url||g.image_data}async function l({gatewayUrls:g,uri:h}){try{const y=await fetch(h).then(S=>S.json());return await d({gatewayUrls:g,uri:u(y)})}catch{throw new e.EnsAvatarUriResolutionError({uri:h})}}async function d({gatewayUrls:g,uri:h}){const{uri:y,isOnChain:E}=c({uri:h,gatewayUrls:g});if(E||await o(y))return y;throw new e.EnsAvatarUriResolutionError({uri:h})}function f(g){let h=g;h.startsWith("did:nft:")&&(h=h.replace("did:nft:","").replace(/_/g,"/"));const[y,E,S]=h.split("/"),[C,_]=y.split(":"),[T,P]=E.split(":");if(!C||C.toLowerCase()!=="eip155")throw new e.EnsAvatarInvalidNftUriError({reason:"Only EIP-155 supported"});if(!_)throw new e.EnsAvatarInvalidNftUriError({reason:"Chain ID not found"});if(!P)throw new e.EnsAvatarInvalidNftUriError({reason:"Contract address not found"});if(!S)throw new e.EnsAvatarInvalidNftUriError({reason:"Token ID not found"});if(!T)throw new e.EnsAvatarInvalidNftUriError({reason:"ERC namespace not found"});return{chainID:Number.parseInt(_,10),namespace:T.toLowerCase(),contractAddress:P,tokenID:S}}async function p(g,{nft:h}){if(h.namespace==="erc721")return(0,t.readContract)(g,{address:h.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(h.tokenID)]});if(h.namespace==="erc1155")return(0,t.readContract)(g,{address:h.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(h.tokenID)]});throw new e.EnsAvatarUnsupportedNamespaceError({namespace:h.namespace})}return cu}var xz;function NUe(){if(xz)return fx;xz=1,Object.defineProperty(fx,"__esModule",{value:!0}),fx.parseAvatarRecord=e;const t=TUe();async function e(n,{gatewayUrls:s,record:i}){return/eip155:/i.test(i)?r(n,{gatewayUrls:s,record:i}):(0,t.parseAvatarUri)({uri:i,gatewayUrls:s})}async function r(n,{gatewayUrls:s,record:i}){const o=(0,t.parseNftUri)(i),a=await(0,t.getNftTokenUri)(n,{nft:o}),{uri:c,isOnChain:u,isEncoded:l}=(0,t.resolveAvatarUri)({uri:a,gatewayUrls:s});if(u&&(c.includes("data:application/json;base64,")||c.startsWith("{"))){const f=l?atob(c.replace("data:application/json;base64,","")):c,p=JSON.parse(f);return(0,t.parseAvatarUri)({uri:(0,t.getJsonImage)(p),gatewayUrls:s})}let d=o.tokenID;return o.namespace==="erc1155"&&(d=d.replace("0x","").padStart(64,"0")),(0,t.getMetadataAvatarUri)({gatewayUrls:s,uri:c.replace(/(?:0x)?{id}/,d)})}return fx}var hx={},Cz;function Rse(){if(Cz)return hx;Cz=1,Object.defineProperty(hx,"__esModule",{value:!0}),hx.getEnsText=d;const t=Jh(),e=df(),r=Ta(),n=Xh(),s=tt(),i=qB(),o=kT(),a=HB(),c=zB(),u=kr(),l=zl();async function d(f,p){const{blockNumber:g,blockTag:h,key:y,name:E,gatewayUrls:S,strict:C}=p,{chain:_}=f,T=(()=>{if(p.universalResolverAddress)return p.universalResolverAddress;if(!_)throw new Error("client chain not configured. universalResolverAddress is required.");return(0,n.getChainContractAddress)({blockNumber:g,chain:_,contract:"ensUniversalResolver"})})(),P=_?.ensTlds;if(P&&!P.some(D=>E.endsWith(D)))return null;try{const D={address:T,abi:t.universalResolverResolveAbi,args:[(0,s.toHex)((0,c.packetToBytes)(E)),(0,r.encodeFunctionData)({abi:t.textResolverAbi,functionName:"text",args:[(0,a.namehash)(E),y]}),S??[o.localBatchGatewayUrl]],functionName:"resolveWithGateways",blockNumber:g,blockTag:h},I=await(0,u.getAction)(f,l.readContract,"readContract")(D);if(I[0]==="0x")return null;const U=(0,e.decodeFunctionResult)({abi:t.textResolverAbi,functionName:"text",data:I[0]});return U===""?null:U}catch(D){if(C)throw D;if((0,i.isNullUniversalResolverError)(D))return null;throw D}}return hx}var Sz;function PUe(){if(Sz)return dx;Sz=1,Object.defineProperty(dx,"__esModule",{value:!0}),dx.getEnsAvatar=n;const t=NUe(),e=kr(),r=Rse();async function n(s,{blockNumber:i,blockTag:o,assetGatewayUrls:a,name:c,gatewayUrls:u,strict:l,universalResolverAddress:d}){const f=await(0,e.getAction)(s,r.getEnsText,"getEnsText")({blockNumber:i,blockTag:o,key:"avatar",name:c,universalResolverAddress:d,gatewayUrls:u,strict:l});if(!f)return null;try{return await(0,t.parseAvatarRecord)(s,{record:f,gatewayUrls:a})}catch{return null}}return dx}var px={},Iz;function RUe(){if(Iz)return px;Iz=1,Object.defineProperty(px,"__esModule",{value:!0}),px.getEnsName=o;const t=Jh(),e=Xh(),r=qB(),n=kT(),s=kr(),i=zl();async function o(a,c){const{address:u,blockNumber:l,blockTag:d,coinType:f=60n,gatewayUrls:p,strict:g}=c,{chain:h}=a,y=(()=>{if(c.universalResolverAddress)return c.universalResolverAddress;if(!h)throw new Error("client chain not configured. universalResolverAddress is required.");return(0,e.getChainContractAddress)({blockNumber:l,chain:h,contract:"ensUniversalResolver"})})();try{const E={address:y,abi:t.universalResolverReverseAbi,args:[u,f,p??[n.localBatchGatewayUrl]],functionName:"reverseWithGateways",blockNumber:l,blockTag:d},S=(0,s.getAction)(a,i.readContract,"readContract"),[C]=await S(E);return C||null}catch(E){if(g)throw E;if((0,r.isNullUniversalResolverError)(E))return null;throw E}}return px}var gx={},Tz;function OUe(){if(Tz)return gx;Tz=1,Object.defineProperty(gx,"__esModule",{value:!0}),gx.getEnsResolver=i;const t=Xh(),e=tt(),r=zB(),n=kr(),s=zl();async function i(o,a){const{blockNumber:c,blockTag:u,name:l}=a,{chain:d}=o,f=(()=>{if(a.universalResolverAddress)return a.universalResolverAddress;if(!d)throw new Error("client chain not configured. universalResolverAddress is required.");return(0,t.getChainContractAddress)({blockNumber:c,chain:d,contract:"ensUniversalResolver"})})(),p=d?.ensTlds;if(p&&!p.some(h=>l.endsWith(h)))throw new Error(`${l} is not a valid ENS TLD (${p?.join(", ")}) for chain "${d.name}" (id: ${d.id}).`);const[g]=await(0,n.getAction)(o,s.readContract,"readContract")({address:f,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[(0,e.toHex)((0,r.packetToBytes)(l))],blockNumber:c,blockTag:u});return g}return gx}var mx={},Nz;function Ose(){if(Nz)return mx;Nz=1,Object.defineProperty(mx,"__esModule",{value:!0}),mx.createAccessList=o;const t=is(),e=tt(),r=PB(),n=Zh(),s=zu(),i=Wu();async function o(a,c){const{account:u=a.account,blockNumber:l,blockTag:d="latest",blobs:f,data:p,gas:g,gasPrice:h,maxFeePerBlobGas:y,maxFeePerGas:E,maxPriorityFeePerGas:S,to:C,value:_,...T}=c,P=u?(0,t.parseAccount)(u):void 0;try{(0,i.assertRequest)(c);const F=(typeof l=="bigint"?(0,e.numberToHex)(l):void 0)||d,I=a.chain?.formatters?.transactionRequest?.format,L=(I||s.formatTransactionRequest)({...(0,n.extract)(T,{format:I}),account:P,blobs:f,data:p,gas:g,gasPrice:h,maxFeePerBlobGas:y,maxFeePerGas:E,maxPriorityFeePerGas:S,to:C,value:_},"createAccessList"),B=await a.request({method:"eth_createAccessList",params:[L,F]});return{accessList:B.accessList,gasUsed:BigInt(B.gasUsed)}}catch(D){throw(0,r.getCallError)(D,{...c,account:P,chain:a.chain})}}return mx}var yx={},Pz;function kUe(){if(Pz)return yx;Pz=1,Object.defineProperty(yx,"__esModule",{value:!0}),yx.createBlockFilter=e;const t=_T();async function e(r){const n=(0,t.createFilterRequestScope)(r,{method:"eth_newBlockFilter"}),s=await r.request({method:"eth_newBlockFilter"});return{id:s,request:n(s),type:"block"}}return yx}var bx={},Rz;function kse(){if(Rz)return bx;Rz=1,Object.defineProperty(bx,"__esModule",{value:!0}),bx.createEventFilter=n;const t=ng(),e=tt(),r=_T();async function n(s,{address:i,args:o,event:a,events:c,fromBlock:u,strict:l,toBlock:d}={}){const f=c??(a?[a]:void 0),p=(0,r.createFilterRequestScope)(s,{method:"eth_newFilter"});let g=[];f&&(g=[f.flatMap(E=>(0,t.encodeEventTopics)({abi:[E],eventName:E.name,args:o}))],a&&(g=g[0]));const h=await s.request({method:"eth_newFilter",params:[{address:i,fromBlock:typeof u=="bigint"?(0,e.numberToHex)(u):u,toBlock:typeof d=="bigint"?(0,e.numberToHex)(d):d,...g.length?{topics:g}:{}}]});return{abi:f,args:o,eventName:a?a.name:void 0,fromBlock:u,id:h,request:p(h),strict:!!l,toBlock:d,type:"event"}}return bx}var wx={},Oz;function Bse(){if(Oz)return wx;Oz=1,Object.defineProperty(wx,"__esModule",{value:!0}),wx.createPendingTransactionFilter=e;const t=_T();async function e(r){const n=(0,t.createFilterRequestScope)(r,{method:"eth_newPendingTransactionFilter"}),s=await r.request({method:"eth_newPendingTransactionFilter"});return{id:s,request:n(s),type:"transaction"}}return wx}var vx={},kz;function BUe(){if(kz)return vx;kz=1,Object.defineProperty(vx,"__esModule",{value:!0}),vx.getBalance=e;const t=tt();async function e(r,{address:n,blockNumber:s,blockTag:i=r.experimental_blockTag??"latest"}){const o=typeof s=="bigint"?(0,t.numberToHex)(s):void 0,a=await r.request({method:"eth_getBalance",params:[n,o||i]});return BigInt(a)}return vx}var Ex={},Bz;function UUe(){if(Bz)return Ex;Bz=1,Object.defineProperty(Ex,"__esModule",{value:!0}),Ex.getBlobBaseFee=t;async function t(e){const r=await e.request({method:"eth_blobBaseFee"});return BigInt(r)}return Ex}var _x={},Uz;function MUe(){if(Uz)return _x;Uz=1,Object.defineProperty(_x,"__esModule",{value:!0}),_x.getBlockTransactionCount=r;const t=ys(),e=tt();async function r(n,{blockHash:s,blockNumber:i,blockTag:o="latest"}={}){const a=i!==void 0?(0,e.numberToHex)(i):void 0;let c;return s?c=await n.request({method:"eth_getBlockTransactionCountByHash",params:[s]},{dedupe:!0}):c=await n.request({method:"eth_getBlockTransactionCountByNumber",params:[a||o]},{dedupe:!!a}),(0,t.hexToNumber)(c)}return _x}var Ax={},Mz;function Use(){if(Mz)return Ax;Mz=1,Object.defineProperty(Ax,"__esModule",{value:!0}),Ax.getCode=e;const t=tt();async function e(r,{address:n,blockNumber:s,blockTag:i="latest"}){const o=s!==void 0?(0,t.numberToHex)(s):void 0,a=await r.request({method:"eth_getCode",params:[n,o||i]},{dedupe:!!o});if(a!=="0x")return a}return Ax}var xx={},Dw={},Dz;function DUe(){if(Dz)return Dw;Dz=1,Object.defineProperty(Dw,"__esModule",{value:!0}),Dw.Eip712DomainNotFoundError=void 0;const t=Kt();class e extends t.BaseError{constructor({address:n}){super(`No EIP-712 domain found on contract "${n}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${n}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}return Dw.Eip712DomainNotFoundError=e,Dw}var jz;function jUe(){if(jz)return xx;jz=1,Object.defineProperty(xx,"__esModule",{value:!0}),xx.getEip712Domain=n;const t=DUe(),e=kr(),r=zl();async function n(i,o){const{address:a,factory:c,factoryData:u}=o;try{const[l,d,f,p,g,h,y]=await(0,e.getAction)(i,r.readContract,"readContract")({abi:s,address:a,functionName:"eip712Domain",factory:c,factoryData:u});return{domain:{name:d,version:f,chainId:Number(p),verifyingContract:g,salt:h},extensions:y,fields:l}}catch(l){const d=l;throw d.name==="ContractFunctionExecutionError"&&d.cause.name==="ContractFunctionZeroDataError"?new t.Eip712DomainNotFoundError({address:a}):d}}const s=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];return xx}var Cx={},Sx={},Lz;function LUe(){if(Lz)return Sx;Lz=1,Object.defineProperty(Sx,"__esModule",{value:!0}),Sx.formatFeeHistory=t;function t(e){return{baseFeePerGas:e.baseFeePerGas.map(r=>BigInt(r)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map(r=>r.map(n=>BigInt(n)))}}return Sx}var Fz;function FUe(){if(Fz)return Cx;Fz=1,Object.defineProperty(Cx,"__esModule",{value:!0}),Cx.getFeeHistory=r;const t=tt(),e=LUe();async function r(n,{blockCount:s,blockNumber:i,blockTag:o="latest",rewardPercentiles:a}){const c=typeof i=="bigint"?(0,t.numberToHex)(i):void 0,u=await n.request({method:"eth_feeHistory",params:[(0,t.numberToHex)(s),c||o,a]},{dedupe:!!c});return(0,e.formatFeeHistory)(u)}return Cx}var Ix={},$z;function $Ue(){if($z)return Ix;$z=1,Object.defineProperty(Ix,"__esModule",{value:!0}),Ix.getFilterLogs=r;const t=u_(),e=lf();async function r(n,{filter:s}){const i=s.strict??!1,a=(await s.request({method:"eth_getFilterLogs",params:[s.id]})).map(c=>(0,e.formatLog)(c));return s.abi?(0,t.parseEventLogs)({abi:s.abi,logs:a,strict:i}):a}return Ix}var Tx={},Nx={},eR={},Px={},qz;function Mse(){if(qz)return Px;qz=1,Object.defineProperty(Px,"__esModule",{value:!0}),Px.encodePacked=a;const t=Jn(),e=$u(),r=Ia(),n=fi(),s=qh(),i=tt(),o=ET();function a(u,l){if(u.length!==l.length)throw new t.AbiEncodingLengthMismatchError({expectedLength:u.length,givenLength:l.length});const d=[];for(let f=0;f<u.length;f++){const p=u[f],g=l[f];d.push(c(p,g))}return(0,n.concatHex)(d)}function c(u,l,d=!1){if(u==="address"){const h=l;if(!(0,r.isAddress)(h))throw new e.InvalidAddressError({address:h});return(0,s.pad)(h.toLowerCase(),{size:d?32:null})}if(u==="string")return(0,i.stringToHex)(l);if(u==="bytes")return l;if(u==="bool")return(0,s.pad)((0,i.boolToHex)(l),{size:d?32:1});const f=u.match(o.integerRegex);if(f){const[h,y,E="256"]=f,S=Number.parseInt(E,10)/8;return(0,i.numberToHex)(l,{size:d?32:S,signed:y==="int"})}const p=u.match(o.bytesRegex);if(p){const[h,y]=p;if(Number.parseInt(y,10)!==(l.length-2)/2)throw new t.BytesSizeMismatchError({expectedSize:Number.parseInt(y,10),givenSize:(l.length-2)/2});return(0,s.pad)(l,{dir:"right",size:d?32:null})}const g=u.match(o.arrayRegex);if(g&&Array.isArray(l)){const[h,y]=g,E=[];for(let S=0;S<l.length;S++)E.push(c(y,l[S],!0));return E.length===0?"0x":(0,n.concatHex)(E)}throw new t.UnsupportedPackedAbiType(u)}return Px}var Vg={},Rx={},Hz;function VB(){if(Hz)return Rx;Hz=1,Object.defineProperty(Rx,"__esModule",{value:!0}),Rx.isBytes=t;function t(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}return Rx}var zz;function Dse(){if(zz)return Vg;zz=1,Object.defineProperty(Vg,"__esModule",{value:!0}),Vg.getContractAddress=c,Vg.getCreateAddress=u,Vg.getCreate2Address=l;const t=fi(),e=VB(),r=qh(),n=Gc(),s=Pn(),i=t_(),o=Sa(),a=lc();function c(d){return d.opcode==="CREATE2"?l(d):u(d)}function u(d){const f=(0,s.toBytes)((0,a.getAddress)(d.from));let p=(0,s.toBytes)(d.nonce);return p[0]===0&&(p=new Uint8Array([])),(0,a.getAddress)(`0x${(0,o.keccak256)((0,i.toRlp)([f,p],"bytes")).slice(26)}`)}function l(d){const f=(0,s.toBytes)((0,a.getAddress)(d.from)),p=(0,r.pad)((0,e.isBytes)(d.salt)?d.salt:(0,s.toBytes)(d.salt),{size:32}),g="bytecodeHash"in d?(0,e.isBytes)(d.bytecodeHash)?d.bytecodeHash:(0,s.toBytes)(d.bytecodeHash):(0,o.keccak256)(d.bytecode,"bytes");return(0,a.getAddress)((0,n.slice)((0,o.keccak256)((0,t.concat)([(0,s.toBytes)("0xff"),f,p,g])),12))}return Vg}var Ox={},jw={},Lf={},Wz;function LT(){if(Wz)return Lf;Wz=1,Object.defineProperty(Lf,"__esModule",{value:!0}),Lf.assertTransactionEIP7702=d,Lf.assertTransactionEIP4844=f,Lf.assertTransactionEIP1559=p,Lf.assertTransactionEIP2930=g,Lf.assertTransactionLegacy=h;const t=mse(),e=vB(),r=$u(),n=Kt(),s=yse(),i=d_(),o=uf(),a=Ia(),c=Ca(),u=Gc(),l=ys();function d(y){const{authorizationList:E}=y;if(E)for(const S of E){const{chainId:C}=S,_=S.address;if(!(0,a.isAddress)(_))throw new r.InvalidAddressError({address:_});if(C<0)throw new i.InvalidChainIdError({chainId:C})}p(y)}function f(y){const{blobVersionedHashes:E}=y;if(E){if(E.length===0)throw new s.EmptyBlobError;for(const S of E){const C=(0,c.size)(S),_=(0,l.hexToNumber)((0,u.slice)(S,0,1));if(C!==32)throw new s.InvalidVersionedHashSizeError({hash:S,size:C});if(_!==t.versionedHashVersionKzg)throw new s.InvalidVersionedHashVersionError({hash:S,version:_})}}p(y)}function p(y){const{chainId:E,maxPriorityFeePerGas:S,maxFeePerGas:C,to:_}=y;if(E<=0)throw new i.InvalidChainIdError({chainId:E});if(_&&!(0,a.isAddress)(_))throw new r.InvalidAddressError({address:_});if(C&&C>e.maxUint256)throw new o.FeeCapTooHighError({maxFeePerGas:C});if(S&&C&&S>C)throw new o.TipAboveFeeCapError({maxFeePerGas:C,maxPriorityFeePerGas:S})}function g(y){const{chainId:E,maxPriorityFeePerGas:S,gasPrice:C,maxFeePerGas:_,to:T}=y;if(E<=0)throw new i.InvalidChainIdError({chainId:E});if(T&&!(0,a.isAddress)(T))throw new r.InvalidAddressError({address:T});if(S||_)throw new n.BaseError("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(C&&C>e.maxUint256)throw new o.FeeCapTooHighError({maxFeePerGas:C})}function h(y){const{chainId:E,maxPriorityFeePerGas:S,gasPrice:C,maxFeePerGas:_,to:T}=y;if(T&&!(0,a.isAddress)(T))throw new r.InvalidAddressError({address:T});if(typeof E<"u"&&E<=0)throw new i.InvalidChainIdError({chainId:E});if(S||_)throw new n.BaseError("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(C&&C>e.maxUint256)throw new o.FeeCapTooHighError({maxFeePerGas:C})}return Lf}var kx={},Vz;function GB(){if(Vz)return kx;Vz=1,Object.defineProperty(kx,"__esModule",{value:!0}),kx.serializeAccessList=n;const t=$u(),e=Na(),r=Ia();function n(s){if(!s||s.length===0)return[];const i=[];for(let o=0;o<s.length;o++){const{address:a,storageKeys:c}=s[o];for(let u=0;u<c.length;u++)if(c[u].length-2!==64)throw new e.InvalidStorageKeySizeError({storageKey:c[u]});if(!(0,r.isAddress)(a,{strict:!1}))throw new t.InvalidAddressError({address:a});i.push([a,c])}return i}return kx}var Gz;function FT(){if(Gz)return jw;Gz=1,Object.defineProperty(jw,"__esModule",{value:!0}),jw.serializeTransaction=p,jw.toYParitySignatureArray=C;const t=Na(),e=jse(),r=TT(),n=NT(),s=CB(),i=PT(),o=fi(),a=af(),c=tt(),u=t_(),l=LT(),d=RT(),f=GB();function p(_,T){const P=(0,d.getTransactionType)(_);return P==="eip1559"?y(_,T):P==="eip2930"?E(_,T):P==="eip4844"?h(_,T):P==="eip7702"?g(_,T):S(_,T)}function g(_,T){const{authorizationList:P,chainId:D,gas:F,nonce:I,to:U,value:L,maxFeePerGas:B,maxPriorityFeePerGas:A,accessList:m,data:b}=_;(0,l.assertTransactionEIP7702)(_);const w=(0,f.serializeAccessList)(m),x=(0,e.serializeAuthorizationList)(P);return(0,o.concatHex)(["0x04",(0,u.toRlp)([(0,c.numberToHex)(D),I?(0,c.numberToHex)(I):"0x",A?(0,c.numberToHex)(A):"0x",B?(0,c.numberToHex)(B):"0x",F?(0,c.numberToHex)(F):"0x",U??"0x",L?(0,c.numberToHex)(L):"0x",b??"0x",w,x,...C(_,T)])])}function h(_,T){const{chainId:P,gas:D,nonce:F,to:I,value:U,maxFeePerBlobGas:L,maxFeePerGas:B,maxPriorityFeePerGas:A,accessList:m,data:b}=_;(0,l.assertTransactionEIP4844)(_);let w=_.blobVersionedHashes,x=_.sidecars;if(_.blobs&&(typeof w>"u"||typeof x>"u")){const R=typeof _.blobs[0]=="string"?_.blobs:_.blobs.map(H=>(0,c.bytesToHex)(H)),$=_.kzg,O=(0,r.blobsToCommitments)({blobs:R,kzg:$});if(typeof w>"u"&&(w=(0,s.commitmentsToVersionedHashes)({commitments:O})),typeof x>"u"){const H=(0,n.blobsToProofs)({blobs:R,commitments:O,kzg:$});x=(0,i.toBlobSidecars)({blobs:R,commitments:O,proofs:H})}}const M=(0,f.serializeAccessList)(m),k=[(0,c.numberToHex)(P),F?(0,c.numberToHex)(F):"0x",A?(0,c.numberToHex)(A):"0x",B?(0,c.numberToHex)(B):"0x",D?(0,c.numberToHex)(D):"0x",I??"0x",U?(0,c.numberToHex)(U):"0x",b??"0x",M,L?(0,c.numberToHex)(L):"0x",w??[],...C(_,T)],j=[],N=[],v=[];if(x)for(let R=0;R<x.length;R++){const{blob:$,commitment:O,proof:H}=x[R];j.push($),N.push(O),v.push(H)}return(0,o.concatHex)(["0x03",x?(0,u.toRlp)([k,j,N,v]):(0,u.toRlp)(k)])}function y(_,T){const{chainId:P,gas:D,nonce:F,to:I,value:U,maxFeePerGas:L,maxPriorityFeePerGas:B,accessList:A,data:m}=_;(0,l.assertTransactionEIP1559)(_);const b=(0,f.serializeAccessList)(A),w=[(0,c.numberToHex)(P),F?(0,c.numberToHex)(F):"0x",B?(0,c.numberToHex)(B):"0x",L?(0,c.numberToHex)(L):"0x",D?(0,c.numberToHex)(D):"0x",I??"0x",U?(0,c.numberToHex)(U):"0x",m??"0x",b,...C(_,T)];return(0,o.concatHex)(["0x02",(0,u.toRlp)(w)])}function E(_,T){const{chainId:P,gas:D,data:F,nonce:I,to:U,value:L,accessList:B,gasPrice:A}=_;(0,l.assertTransactionEIP2930)(_);const m=(0,f.serializeAccessList)(B),b=[(0,c.numberToHex)(P),I?(0,c.numberToHex)(I):"0x",A?(0,c.numberToHex)(A):"0x",D?(0,c.numberToHex)(D):"0x",U??"0x",L?(0,c.numberToHex)(L):"0x",F??"0x",m,...C(_,T)];return(0,o.concatHex)(["0x01",(0,u.toRlp)(b)])}function S(_,T){const{chainId:P=0,gas:D,data:F,nonce:I,to:U,value:L,gasPrice:B}=_;(0,l.assertTransactionLegacy)(_);let A=[I?(0,c.numberToHex)(I):"0x",B?(0,c.numberToHex)(B):"0x",D?(0,c.numberToHex)(D):"0x",U??"0x",L?(0,c.numberToHex)(L):"0x",F??"0x"];if(T){const m=(()=>{if(T.v>=35n)return(T.v-35n)/2n>0?T.v:27n+(T.v===35n?0n:1n);if(P>0)return BigInt(P*2)+BigInt(35n+T.v-27n);const x=27n+(T.v===27n?0n:1n);if(T.v!==x)throw new t.InvalidLegacyVError({v:T.v});return x})(),b=(0,a.trim)(T.r),w=(0,a.trim)(T.s);A=[...A,(0,c.numberToHex)(m),b==="0x00"?"0x":b,w==="0x00"?"0x":w]}else P>0&&(A=[...A,(0,c.numberToHex)(P),"0x","0x"]);return(0,u.toRlp)(A)}function C(_,T){const P=T??_,{v:D,yParity:F}=P;if(typeof P.r>"u")return[];if(typeof P.s>"u")return[];if(typeof D>"u"&&typeof F>"u")return[];const I=(0,a.trim)(P.r),U=(0,a.trim)(P.s);return[typeof F=="number"?F?(0,c.numberToHex)(1):"0x":D===0n?"0x":D===1n?(0,c.numberToHex)(1):D===27n?"0x":(0,c.numberToHex)(1),I==="0x00"?"0x":I,U==="0x00"?"0x":U]}return jw}var Kz;function jse(){if(Kz)return Ox;Kz=1,Object.defineProperty(Ox,"__esModule",{value:!0}),Ox.serializeAuthorizationList=r;const t=tt(),e=FT();function r(n){if(!n||n.length===0)return[];const s=[];for(const i of n){const{chainId:o,nonce:a,...c}=i,u=i.address;s.push([o?(0,t.toHex)(o):"0x",u,a?(0,t.toHex)(a):"0x",...(0,e.toYParitySignatureArray)({},c)])}return s}return Ox}var Bx={},Zz;function Lse(){if(Zz)return Bx;Zz=1,Object.defineProperty(Bx,"__esModule",{value:!0}),Bx.verifyAuthorization=n;const t=lc(),e=Vu(),r=r_();async function n({address:s,authorization:i,signature:o}){return(0,e.isAddressEqual)((0,t.getAddress)(s),await(0,r.recoverAuthorizationAddress)({authorization:i,signature:o}))}return Bx}var Lw={},tR={},Yz;function qUe(){return Yz||(Yz=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.promiseCache=void 0,t.withDedupe=r;const e=tg();t.promiseCache=new e.LruMap(8192);function r(n,{enabled:s=!0,id:i}){if(!s||!i)return n();if(t.promiseCache.get(i))return t.promiseCache.get(i);const o=n().finally(()=>t.promiseCache.delete(i));return t.promiseCache.set(i,o),o}})(tR)),tR}var Jz;function Fse(){if(Jz)return Lw;Jz=1,Object.defineProperty(Lw,"__esModule",{value:!0}),Lw.buildRequest=a,Lw.shouldRetry=c;const t=Kt(),e=Hu(),r=Vh(),n=tt(),s=qUe(),i=DT(),o=Li();function a(u,l={}){return async(d,f={})=>{const{dedupe:p=!1,methods:g,retryDelay:h=150,retryCount:y=3,uid:E}={...l,...f},{method:S}=d;if(g?.exclude?.includes(S))throw new r.MethodNotSupportedRpcError(new Error("method not supported"),{method:S});if(g?.include&&!g.include.includes(S))throw new r.MethodNotSupportedRpcError(new Error("method not supported"),{method:S});const C=p?(0,n.stringToHex)(`${E}.${(0,o.stringify)(d)}`):void 0;return(0,s.withDedupe)(()=>(0,i.withRetry)(async()=>{try{return await u(d)}catch(_){const T=_;switch(T.code){case r.ParseRpcError.code:throw new r.ParseRpcError(T);case r.InvalidRequestRpcError.code:throw new r.InvalidRequestRpcError(T);case r.MethodNotFoundRpcError.code:throw new r.MethodNotFoundRpcError(T,{method:d.method});case r.InvalidParamsRpcError.code:throw new r.InvalidParamsRpcError(T);case r.InternalRpcError.code:throw new r.InternalRpcError(T);case r.InvalidInputRpcError.code:throw new r.InvalidInputRpcError(T);case r.ResourceNotFoundRpcError.code:throw new r.ResourceNotFoundRpcError(T);case r.ResourceUnavailableRpcError.code:throw new r.ResourceUnavailableRpcError(T);case r.TransactionRejectedRpcError.code:throw new r.TransactionRejectedRpcError(T);case r.MethodNotSupportedRpcError.code:throw new r.MethodNotSupportedRpcError(T,{method:d.method});case r.LimitExceededRpcError.code:throw new r.LimitExceededRpcError(T);case r.JsonRpcVersionUnsupportedError.code:throw new r.JsonRpcVersionUnsupportedError(T);case r.UserRejectedRequestError.code:throw new r.UserRejectedRequestError(T);case r.UnauthorizedProviderError.code:throw new r.UnauthorizedProviderError(T);case r.UnsupportedProviderMethodError.code:throw new r.UnsupportedProviderMethodError(T);case r.ProviderDisconnectedError.code:throw new r.ProviderDisconnectedError(T);case r.ChainDisconnectedError.code:throw new r.ChainDisconnectedError(T);case r.SwitchChainError.code:throw new r.SwitchChainError(T);case r.UnsupportedNonOptionalCapabilityError.code:throw new r.UnsupportedNonOptionalCapabilityError(T);case r.UnsupportedChainIdError.code:throw new r.UnsupportedChainIdError(T);case r.DuplicateIdError.code:throw new r.DuplicateIdError(T);case r.UnknownBundleIdError.code:throw new r.UnknownBundleIdError(T);case r.BundleTooLargeError.code:throw new r.BundleTooLargeError(T);case r.AtomicReadyWalletRejectedUpgradeError.code:throw new r.AtomicReadyWalletRejectedUpgradeError(T);case r.AtomicityNotSupportedError.code:throw new r.AtomicityNotSupportedError(T);case 5e3:throw new r.UserRejectedRequestError(T);default:throw _ instanceof t.BaseError?_:new r.UnknownRpcError(T)}}},{delay:({count:_,error:T})=>{if(T&&T instanceof e.HttpRequestError){const P=T?.headers?.get("Retry-After");if(P?.match(/\d/))return Number.parseInt(P,10)*1e3}return~~(1<<_)*h},retryCount:y,shouldRetry:({error:_})=>c(_)}),{enabled:p,id:C})}}function c(u){return"code"in u&&typeof u.code=="number"?u.code===-1||u.code===r.LimitExceededRpcError.code||u.code===r.InternalRpcError.code:u instanceof e.HttpRequestError&&u.status?u.status===403||u.status===408||u.status===413||u.status===429||u.status===500||u.status===502||u.status===503||u.status===504:!0}return Lw}var Ux={},Xz;function $se(){if(Xz)return Ux;Xz=1,Object.defineProperty(Ux,"__esModule",{value:!0}),Ux.defineChain=t;function t(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}return Ux}var Mx={},Qz;function qse(){if(Qz)return Mx;Qz=1,Object.defineProperty(Mx,"__esModule",{value:!0}),Mx.extractChain=t;function t({chains:e,id:r}){return e.find(n=>n.id===r)}return Mx}var Dx={},eW;function KB(){if(eW)return Dx;eW=1,Object.defineProperty(Dx,"__esModule",{value:!0}),Dx.fromRlp=i;const t=Kt(),e=Xy(),r=XE(),n=Pn(),s=tt();function i(u,l="hex"){const d=(()=>{if(typeof u=="string"){if(u.length>3&&u.length%2!==0)throw new e.InvalidHexValueError(u);return(0,n.hexToBytes)(u)}return u})(),f=(0,r.createCursor)(d,{recursiveReadLimit:Number.POSITIVE_INFINITY});return o(f,l)}function o(u,l="hex"){if(u.bytes.length===0)return l==="hex"?(0,s.bytesToHex)(u.bytes):u.bytes;const d=u.readByte();if(d<128&&u.decrementPosition(1),d<192){const p=a(u,d,128),g=u.readBytes(p);return l==="hex"?(0,s.bytesToHex)(g):g}const f=a(u,d,192);return c(u,f,l)}function a(u,l,d){if(d===128&&l<128)return 1;if(l<=d+55)return l-d;if(l===d+55+1)return u.readUint8();if(l===d+55+2)return u.readUint16();if(l===d+55+3)return u.readUint24();if(l===d+55+4)return u.readUint32();throw new t.BaseError("Invalid RLP prefix")}function c(u,l,d){const f=u.position,p=[];for(;u.position-f<l;)p.push(o(u,d));return p}return Dx}var jx={},tW;function ZB(){if(tW)return jx;tW=1,Object.defineProperty(jx,"__esModule",{value:!0}),jx.isHash=r;const t=$o(),e=Ca();function r(n){return(0,t.isHex)(n)&&(0,e.size)(n)===32}return jx}var Lx={},Ap={},xo={},rW;function HUe(){if(rW)return xo;rW=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.ripemd160=xo.RIPEMD160=xo.md5=xo.MD5=xo.sha1=xo.SHA1=void 0;const t=ase(),e=Hh(),r=Uint32Array.from([1732584193,4023233417,2562383102,271733878,3285377520]),n=new Uint32Array(80);class s extends t.HashMD{constructor(){super(64,20,8,!1),this.A=r[0]|0,this.B=r[1]|0,this.C=r[2]|0,this.D=r[3]|0,this.E=r[4]|0}get(){const{A:I,B:U,C:L,D:B,E:A}=this;return[I,U,L,B,A]}set(I,U,L,B,A){this.A=I|0,this.B=U|0,this.C=L|0,this.D=B|0,this.E=A|0}process(I,U){for(let w=0;w<16;w++,U+=4)n[w]=I.getUint32(U,!1);for(let w=16;w<80;w++)n[w]=(0,e.rotl)(n[w-3]^n[w-8]^n[w-14]^n[w-16],1);let{A:L,B,C:A,D:m,E:b}=this;for(let w=0;w<80;w++){let x,M;w<20?(x=(0,t.Chi)(B,A,m),M=1518500249):w<40?(x=B^A^m,M=1859775393):w<60?(x=(0,t.Maj)(B,A,m),M=2400959708):(x=B^A^m,M=3395469782);const k=(0,e.rotl)(L,5)+x+b+M+n[w]|0;b=m,m=A,A=(0,e.rotl)(B,30),B=L,L=k}L=L+this.A|0,B=B+this.B|0,A=A+this.C|0,m=m+this.D|0,b=b+this.E|0,this.set(L,B,A,m,b)}roundClean(){(0,e.clean)(n)}destroy(){this.set(0,0,0,0,0),(0,e.clean)(this.buffer)}}xo.SHA1=s,xo.sha1=(0,e.createHasher)(()=>new s);const i=Math.pow(2,32),o=Array.from({length:64},(F,I)=>Math.floor(i*Math.abs(Math.sin(I+1)))),a=r.slice(0,4),c=new Uint32Array(16);class u extends t.HashMD{constructor(){super(64,16,8,!0),this.A=a[0]|0,this.B=a[1]|0,this.C=a[2]|0,this.D=a[3]|0}get(){const{A:I,B:U,C:L,D:B}=this;return[I,U,L,B]}set(I,U,L,B){this.A=I|0,this.B=U|0,this.C=L|0,this.D=B|0}process(I,U){for(let b=0;b<16;b++,U+=4)c[b]=I.getUint32(U,!0);let{A:L,B,C:A,D:m}=this;for(let b=0;b<64;b++){let w,x,M;b<16?(w=(0,t.Chi)(B,A,m),x=b,M=[7,12,17,22]):b<32?(w=(0,t.Chi)(m,B,A),x=(5*b+1)%16,M=[5,9,14,20]):b<48?(w=B^A^m,x=(3*b+5)%16,M=[4,11,16,23]):(w=A^(B|~m),x=7*b%16,M=[6,10,15,21]),w=w+L+o[b]+c[x],L=m,m=A,A=B,B=B+(0,e.rotl)(w,M[b%4])}L=L+this.A|0,B=B+this.B|0,A=A+this.C|0,m=m+this.D|0,this.set(L,B,A,m)}roundClean(){(0,e.clean)(c)}destroy(){this.set(0,0,0,0),(0,e.clean)(this.buffer)}}xo.MD5=u,xo.md5=(0,e.createHasher)(()=>new u);const l=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),d=Uint8Array.from(new Array(16).fill(0).map((F,I)=>I)),f=d.map(F=>(9*F+5)%16),p=(()=>{const U=[[d],[f]];for(let L=0;L<4;L++)for(let B of U)B.push(B[L].map(A=>l[A]));return U})(),g=p[0],h=p[1],y=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(F=>Uint8Array.from(F)),E=g.map((F,I)=>F.map(U=>y[I][U])),S=h.map((F,I)=>F.map(U=>y[I][U])),C=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),_=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function T(F,I,U,L){return F===0?I^U^L:F===1?I&U|~I&L:F===2?(I|~U)^L:F===3?I&L|U&~L:I^(U|~L)}const P=new Uint32Array(16);class D extends t.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:I,h1:U,h2:L,h3:B,h4:A}=this;return[I,U,L,B,A]}set(I,U,L,B,A){this.h0=I|0,this.h1=U|0,this.h2=L|0,this.h3=B|0,this.h4=A|0}process(I,U){for(let N=0;N<16;N++,U+=4)P[N]=I.getUint32(U,!0);let L=this.h0|0,B=L,A=this.h1|0,m=A,b=this.h2|0,w=b,x=this.h3|0,M=x,k=this.h4|0,j=k;for(let N=0;N<5;N++){const v=4-N,R=C[N],$=_[N],O=g[N],H=h[N],W=E[N],G=S[N];for(let K=0;K<16;K++){const Q=(0,e.rotl)(L+T(N,A,b,x)+P[O[K]]+R,W[K])+k|0;L=k,k=x,x=(0,e.rotl)(b,10)|0,b=A,A=Q}for(let K=0;K<16;K++){const Q=(0,e.rotl)(B+T(v,m,w,M)+P[H[K]]+$,G[K])+j|0;B=j,j=M,M=(0,e.rotl)(w,10)|0,w=m,m=Q}}this.set(this.h1+b+M|0,this.h2+x+j|0,this.h3+k+B|0,this.h4+L+m|0,this.h0+A+w|0)}roundClean(){(0,e.clean)(P)}destroy(){this.destroyed=!0,(0,e.clean)(this.buffer),this.set(0,0,0,0,0)}}return xo.RIPEMD160=D,xo.ripemd160=(0,e.createHasher)(()=>new D),xo}var nW;function Hse(){if(nW)return Ap;nW=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.ripemd160=Ap.RIPEMD160=void 0;const t=HUe();return Ap.RIPEMD160=t.RIPEMD160,Ap.ripemd160=t.ripemd160,Ap}var sW;function zse(){if(sW)return Lx;sW=1,Object.defineProperty(Lx,"__esModule",{value:!0}),Lx.ripemd160=s;const t=Hse(),e=$o(),r=Pn(),n=tt();function s(i,o){const a=o||"hex",c=(0,t.ripemd160)((0,e.isHex)(i,{strict:!1})?(0,r.toBytes)(i):i);return a==="bytes"?c:(0,n.toHex)(c)}return Lx}var rR={},iW;function Wse(){return iW||(iW=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toEventHash=void 0;var e=vT();Object.defineProperty(t,"toEventHash",{enumerable:!0,get:function(){return e.toSignatureHash}})})(rR)),rR}var nR={},oW;function Vse(){return oW||(oW=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toEventSignature=void 0;var e=fB();Object.defineProperty(t,"toEventSignature",{enumerable:!0,get:function(){return e.toSignature}})})(nR)),nR}var sR={},aW;function Gse(){return aW||(aW=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toFunctionHash=void 0;var e=vT();Object.defineProperty(t,"toFunctionHash",{enumerable:!0,get:function(){return e.toSignatureHash}})})(sR)),sR}var iR={},cW;function Kse(){return cW||(cW=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toFunctionSignature=void 0;var e=fB();Object.defineProperty(t,"toFunctionSignature",{enumerable:!0,get:function(){return e.toSignature}})})(iR)),iR}var xp={},uW;function Zse(){if(uW)return xp;uW=1,Object.defineProperty(xp,"__esModule",{value:!0}),xp.nonceManager=void 0,xp.createNonceManager=r,xp.jsonRpc=n;const t=IT(),e=tg();function r(s){const{source:i}=s,o=new Map,a=new e.LruMap(8192),c=new Map,u=({address:l,chainId:d})=>`${l}.${d}`;return{async consume({address:l,chainId:d,client:f}){const p=u({address:l,chainId:d}),g=this.get({address:l,chainId:d,client:f});this.increment({address:l,chainId:d});const h=await g;return await i.set({address:l,chainId:d},h),a.set(p,h),h},async increment({address:l,chainId:d}){const f=u({address:l,chainId:d}),p=o.get(f)??0;o.set(f,p+1)},async get({address:l,chainId:d,client:f}){const p=u({address:l,chainId:d});let g=c.get(p);return g||(g=(async()=>{try{const y=await i.get({address:l,chainId:d,client:f}),E=a.get(p)??0;return E>0&&y<=E?E+1:(a.delete(p),y)}finally{this.reset({address:l,chainId:d})}})(),c.set(p,g)),(o.get(p)??0)+await g},reset({address:l,chainId:d}){const f=u({address:l,chainId:d});o.delete(f),c.delete(f)}}}function n(){return{async get(s){const{address:i,client:o}=s;return(0,t.getTransactionCount)(o,{address:i,blockTag:"pending"})},set(){}}}return xp.nonceManager=r({source:n()}),xp}var Gg={},Fx={},$x={},lW;function YB(){if(lW)return $x;lW=1,Object.defineProperty($x,"__esModule",{value:!0}),$x.withTimeout=t;function t(e,{errorInstance:r=new Error("timed out"),timeout:n,signal:s}){return new Promise((i,o)=>{(async()=>{let a;try{const c=new AbortController;n>0&&(a=setTimeout(()=>{s?c.abort():o(r)},n)),i(await e({signal:c?.signal||null}))}catch(c){c?.name==="AbortError"&&o(r),o(c)}finally{clearTimeout(a)}})()})}return $x}var Fw={},dW;function Yse(){if(dW)return Fw;dW=1,Object.defineProperty(Fw,"__esModule",{value:!0}),Fw.idCache=void 0;function t(){return{current:0,take(){return this.current++},reset(){this.current=0}}}return Fw.idCache=t(),Fw}var fW;function JB(){if(fW)return Fx;fW=1,Object.defineProperty(Fx,"__esModule",{value:!0}),Fx.getHttpRpcClient=s;const t=Hu(),e=YB(),r=Li(),n=Yse();function s(i,o={}){return{async request(a){const{body:c,fetchFn:u=o.fetchFn??fetch,onRequest:l=o.onRequest,onResponse:d=o.onResponse,timeout:f=o.timeout??1e4}=a,p={...o.fetchOptions??{},...a.fetchOptions??{}},{headers:g,method:h,signal:y}=p;try{const E=await(0,e.withTimeout)(async({signal:C})=>{const _={...p,body:Array.isArray(c)?(0,r.stringify)(c.map(F=>({jsonrpc:"2.0",id:F.id??n.idCache.take(),...F}))):(0,r.stringify)({jsonrpc:"2.0",id:c.id??n.idCache.take(),...c}),headers:{"Content-Type":"application/json",...g},method:h||"POST",signal:y||(f>0?C:null)},T=new Request(i,_),P=await l?.(T,_)??{..._,url:i};return await u(P.url??i,P)},{errorInstance:new t.TimeoutError({body:c,url:i}),timeout:f,signal:!0});d&&await d(E);let S;if(E.headers.get("Content-Type")?.startsWith("application/json"))S=await E.json();else{S=await E.text();try{S=JSON.parse(S||"{}")}catch(C){if(E.ok)throw C;S={error:S}}}if(!E.ok)throw new t.HttpRequestError({body:c,details:(0,r.stringify)(S.error)||E.statusText,headers:E.headers,status:E.status,url:i});return S}catch(E){throw E instanceof t.HttpRequestError||E instanceof t.TimeoutError?E:new t.HttpRequestError({body:c,cause:E,url:i})}}}}return Fx}var qx={},oR={},hW;function Jse(){return hW||(hW=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.socketClientCache=void 0,t.getSocketRpcClient=i;const e=Hu(),r=OB(),n=YB(),s=Yse();t.socketClientCache=new Map;async function i(o){const{getSocket:a,keepAlive:c=!0,key:u="socket",reconnect:l=!0,url:d}=o,{interval:f=3e4}=typeof c=="object"?c:{},{attempts:p=5,delay:g=2e3}=typeof l=="object"?l:{},h=JSON.stringify({keepAlive:c,key:u,url:d,reconnect:l});let y=t.socketClientCache.get(h);if(y)return y;let E=0;const{schedule:S}=(0,r.createBatchScheduler)({id:h,fn:async()=>{const T=new Map,P=new Map;let D,F,I,U=!1;function L(){if(l&&E<p){if(U)return;U=!0,E++,F?.close(),setTimeout(async()=>{await B().catch(console.error),U=!1},g)}else T.clear(),P.clear()}async function B(){const A=await a({onClose(){for(const m of T.values())m.onError?.(new e.SocketClosedError({url:d}));for(const m of P.values())m.onError?.(new e.SocketClosedError({url:d}));L()},onError(m){D=m;for(const b of T.values())b.onError?.(D);for(const b of P.values())b.onError?.(D);L()},onOpen(){D=void 0,E=0},onResponse(m){const b=m.method==="eth_subscription",w=b?m.params.subscription:m.id,x=b?P:T,M=x.get(w);M&&M.onResponse(m),b||x.delete(w)}});if(F=A,c&&(I&&clearInterval(I),I=setInterval(()=>F.ping?.(),f)),l&&P.size>0){const m=P.entries();for(const[b,{onResponse:w,body:x,onError:M}]of m)x&&(P.delete(b),y?.request({body:x,onResponse:w,onError:M}))}return A}return await B(),D=void 0,y={close(){I&&clearInterval(I),F.close(),t.socketClientCache.delete(h)},get socket(){return F},request({body:A,onError:m,onResponse:b}){D&&m&&m(D);const w=A.id??s.idCache.take(),x=M=>{typeof M.id=="number"&&w!==M.id||(A.method==="eth_subscribe"&&typeof M.result=="string"&&P.set(M.result,{onResponse:x,onError:m,body:A}),A.method==="eth_unsubscribe"&&P.delete(A.params?.[0]),b(M))};T.set(w,{onResponse:x,onError:m});try{F.request({body:{jsonrpc:"2.0",id:w,...A}})}catch(M){m?.(M)}},requestAsync({body:A,timeout:m=1e4}){return(0,n.withTimeout)(()=>new Promise((b,w)=>this.request({body:A,onError:w,onResponse:b})),{errorInstance:new e.TimeoutError({body:A,url:d}),timeout:m})},requests:T,subscriptions:P,url:d},t.socketClientCache.set(h,y),[y]}}),[C,[_]]=await S();return _}})(oR)),oR}function zUe(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const WUe=zUe(),VUe=Object.freeze(Object.defineProperty({__proto__:null,WebSocket:WUe},Symbol.toStringTag,{value:"Module"})),GUe=Ln(VUe);var pW;function XB(){if(pW)return qx;pW=1,Object.defineProperty(qx,"__esModule",{value:!0}),qx.getWebSocketRpcClient=r;const t=Hu(),e=Jse();async function r(n,s={}){const{keepAlive:i,reconnect:o}=s;return(0,e.getSocketRpcClient)({async getSocket({onClose:a,onError:c,onOpen:u,onResponse:l}){const d=await Promise.resolve().then(()=>GUe).then(y=>y.WebSocket),f=new d(n);function p(){f.removeEventListener("close",p),f.removeEventListener("message",g),f.removeEventListener("error",c),f.removeEventListener("open",u),a()}function g({data:y}){if(!(typeof y=="string"&&y.trim().length===0))try{const E=JSON.parse(y);l(E)}catch(E){c(E)}}f.addEventListener("close",p),f.addEventListener("message",g),f.addEventListener("error",c),f.addEventListener("open",u),f.readyState===d.CONNECTING&&await new Promise((y,E)=>{f&&(f.onopen=y,f.onerror=E)});const{close:h}=f;return Object.assign(f,{close(){h.bind(f)(),p()},ping(){try{if(f.readyState===f.CLOSED||f.readyState===f.CLOSING)throw new t.WebSocketRequestError({url:f.url,cause:new t.SocketClosedError({url:f.url})});const y={jsonrpc:"2.0",id:null,method:"net_version",params:[]};f.send(JSON.stringify(y))}catch(y){c(y)}},request({body:y}){if(f.readyState===f.CLOSED||f.readyState===f.CLOSING)throw new t.WebSocketRequestError({body:y,url:f.url,cause:new t.SocketClosedError({url:f.url})});return f.send(JSON.stringify(y))}})},keepAlive:i,reconnect:o,url:n})}return qx}var gW;function Xse(){if(gW)return Gg;gW=1,Object.defineProperty(Gg,"__esModule",{value:!0}),Gg.rpc=void 0,Gg.getSocket=s;const t=JB(),e=XB();function r(i,{body:o,onError:a,onResponse:c}){return i.request({body:o,onError:a,onResponse:c}),i}async function n(i,{body:o,timeout:a=1e4}){return i.requestAsync({body:o,timeout:a})}async function s(i){const o=await(0,e.getWebSocketRpcClient)(i);return Object.assign(o.socket,{requests:o.requests,subscriptions:o.subscriptions})}return Gg.rpc={http(i,o){return(0,t.getHttpRpcClient)(i).request(o)},webSocket:r,webSocketAsync:n},Gg}var Hx={},zx={},$w={},mW;function Qse(){return mW||(mW=1,Object.defineProperty($w,"__esModule",{value:!0}),$w.presignMessagePrefix=void 0,$w.presignMessagePrefix=`Ethereum Signed Message:
`),$w}var yW;function eie(){if(yW)return zx;yW=1,Object.defineProperty(zx,"__esModule",{value:!0}),zx.toPrefixedMessage=s;const t=Qse(),e=fi(),r=Ca(),n=tt();function s(i){const o=typeof i=="string"?(0,n.stringToHex)(i):typeof i.raw=="string"?i.raw:(0,n.bytesToHex)(i.raw),a=(0,n.stringToHex)(`${t.presignMessagePrefix}${(0,r.size)(o)}`);return(0,e.concat)([a,o])}return zx}var bW;function y_(){if(bW)return Hx;bW=1,Object.defineProperty(Hx,"__esModule",{value:!0}),Hx.hashMessage=r;const t=Sa(),e=eie();function r(n,s){return(0,t.keccak256)((0,e.toPrefixedMessage)(n),s)}return Hx}var Cp={},Sp={},wd={},wW;function tie(){if(wW)return wd;wW=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.InvalidStructTypeError=wd.InvalidPrimaryTypeError=wd.InvalidDomainError=void 0;const t=Li(),e=Kt();class r extends e.BaseError{constructor({domain:o}){super(`Invalid domain "${(0,t.stringify)(o)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}wd.InvalidDomainError=r;class n extends e.BaseError{constructor({primaryType:o,types:a}){super(`Invalid primary type \`${o}\` must be one of \`${JSON.stringify(Object.keys(a))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}wd.InvalidPrimaryTypeError=n;class s extends e.BaseError{constructor({type:o}){super(`Struct type "${o}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}return wd.InvalidStructTypeError=s,wd}var vW;function $T(){if(vW)return Sp;vW=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.serializeTypedData=u,Sp.validateTypedData=l,Sp.getTypesForEIP712Domain=d,Sp.domainSeparator=f;const t=Jn(),e=$u(),r=tie(),n=Ia(),s=Ca(),i=tt(),o=ET(),a=b_(),c=Li();function u(g){const{domain:h,message:y,primaryType:E,types:S}=g,C=(P,D)=>{const F={...D};for(const I of P){const{name:U,type:L}=I;L==="address"&&(F[U]=F[U].toLowerCase())}return F},_=S.EIP712Domain?h?C(S.EIP712Domain,h):{}:{},T=(()=>{if(E!=="EIP712Domain")return C(S[E],y)})();return(0,c.stringify)({domain:_,message:T,primaryType:E,types:S})}function l(g){const{domain:h,message:y,primaryType:E,types:S}=g,C=(_,T)=>{for(const P of _){const{name:D,type:F}=P,I=T[D],U=F.match(o.integerRegex);if(U&&(typeof I=="number"||typeof I=="bigint")){const[A,m,b]=U;(0,i.numberToHex)(I,{signed:m==="int",size:Number.parseInt(b,10)/8})}if(F==="address"&&typeof I=="string"&&!(0,n.isAddress)(I))throw new e.InvalidAddressError({address:I});const L=F.match(o.bytesRegex);if(L){const[A,m]=L;if(m&&(0,s.size)(I)!==Number.parseInt(m,10))throw new t.BytesSizeMismatchError({expectedSize:Number.parseInt(m,10),givenSize:(0,s.size)(I)})}const B=S[F];B&&(p(F),C(B,I))}};if(S.EIP712Domain&&h){if(typeof h!="object")throw new r.InvalidDomainError({domain:h});C(S.EIP712Domain,h)}if(E!=="EIP712Domain")if(S[E])C(S[E],y);else throw new r.InvalidPrimaryTypeError({primaryType:E,types:S})}function d({domain:g}){return[typeof g?.name=="string"&&{name:"name",type:"string"},g?.version&&{name:"version",type:"string"},(typeof g?.chainId=="number"||typeof g?.chainId=="bigint")&&{name:"chainId",type:"uint256"},g?.verifyingContract&&{name:"verifyingContract",type:"address"},g?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function f({domain:g}){return(0,a.hashDomain)({domain:g,types:{EIP712Domain:d({domain:g})}})}function p(g){if(g==="address"||g==="bool"||g==="string"||g.startsWith("bytes")||g.startsWith("uint")||g.startsWith("int"))throw new r.InvalidStructTypeError({type:g})}return Sp}var EW;function b_(){if(EW)return Cp;EW=1,Object.defineProperty(Cp,"__esModule",{value:!0}),Cp.hashTypedData=i,Cp.hashDomain=o,Cp.hashStruct=a,Cp.encodeType=l;const t=qu(),e=fi(),r=tt(),n=Sa(),s=$T();function i(p){const{domain:g={},message:h,primaryType:y}=p,E={EIP712Domain:(0,s.getTypesForEIP712Domain)({domain:g}),...p.types};(0,s.validateTypedData)({domain:g,message:h,primaryType:y,types:E});const S=["0x1901"];return g&&S.push(o({domain:g,types:E})),y!=="EIP712Domain"&&S.push(a({data:h,primaryType:y,types:E})),(0,n.keccak256)((0,e.concat)(S))}function o({domain:p,types:g}){return a({data:p,primaryType:"EIP712Domain",types:g})}function a({data:p,primaryType:g,types:h}){const y=c({data:p,primaryType:g,types:h});return(0,n.keccak256)(y)}function c({data:p,primaryType:g,types:h}){const y=[{type:"bytes32"}],E=[u({primaryType:g,types:h})];for(const S of h[g]){const[C,_]=f({types:h,name:S.name,type:S.type,value:p[S.name]});y.push(C),E.push(_)}return(0,t.encodeAbiParameters)(y,E)}function u({primaryType:p,types:g}){const h=(0,r.toHex)(l({primaryType:p,types:g}));return(0,n.keccak256)(h)}function l({primaryType:p,types:g}){let h="";const y=d({primaryType:p,types:g});y.delete(p);const E=[p,...Array.from(y).sort()];for(const S of E)h+=`${S}(${g[S].map(({name:C,type:_})=>`${_} ${C}`).join(",")})`;return h}function d({primaryType:p,types:g},h=new Set){const E=p.match(/^\w*/u)?.[0];if(h.has(E)||g[E]===void 0)return h;h.add(E);for(const S of g[E])d({primaryType:S.type,types:g},h);return h}function f({types:p,name:g,type:h,value:y}){if(p[h]!==void 0)return[{type:"bytes32"},(0,n.keccak256)(c({data:y,primaryType:h,types:p}))];if(h==="bytes")return[{type:"bytes32"},(0,n.keccak256)(y)];if(h==="string")return[{type:"bytes32"},(0,n.keccak256)((0,r.toHex)(y))];if(h.lastIndexOf("]")===h.length-1){const E=h.slice(0,h.lastIndexOf("[")),S=y.map(C=>f({name:g,type:E,types:p,value:C}));return[{type:"bytes32"},(0,n.keccak256)((0,t.encodeAbiParameters)(S.map(([C])=>C),S.map(([,C])=>C)))]}return[{type:h},y]}return Cp}var Wx={},Ip={},_W;function QB(){return _W||(_W=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.zeroHash=Ip.erc6492MagicBytes=void 0,Ip.erc6492MagicBytes="0x6492649264926492649264926492649264926492649264926492649264926492",Ip.zeroHash="0x0000000000000000000000000000000000000000000000000000000000000000"),Ip}var AW;function e9(){if(AW)return Wx;AW=1,Object.defineProperty(Wx,"__esModule",{value:!0}),Wx.isErc6492Signature=r;const t=QB(),e=Gc();function r(n){return(0,e.sliceHex)(n,-32)===t.erc6492MagicBytes}return Wx}var Vx={},qw={},aR={},Qn={},Co={},Kg={},Hw={},xW;function KUe(){if(xW)return Hw;xW=1,Object.defineProperty(Hw,"__esModule",{value:!0}),Hw.LruMap=void 0;class t extends Map{constructor(r){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=r}get(r){const n=super.get(r);return super.has(r)&&n!==void 0&&(this.delete(r),super.set(r,n)),n}set(r,n){if(super.set(r,n),this.maxSize&&this.size>this.maxSize){const s=this.keys().next().value;s&&this.delete(s)}return this}}return Hw.LruMap=t,Hw}var CW;function ZUe(){if(CW)return Kg;CW=1,Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.checksum=void 0,Kg.clear=r;const t=KUe(),e={checksum:new t.LruMap(8192)};Kg.checksum=e.checksum;function r(){for(const n of Object.values(e))n.clear()}return Kg}var Tp={},SW;function t9(){if(SW)return Tp;SW=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.keccak256=i,Tp.ripemd160=o,Tp.sha256=a,Tp.validate=c;const t=Hse(),e=rse(),r=gse(),n=Hl(),s=Fi();function i(u,l={}){const{as:d=typeof u=="string"?"Hex":"Bytes"}=l,f=(0,e.keccak_256)(n.from(u));return d==="Bytes"?f:s.fromBytes(f)}function o(u,l={}){const{as:d=typeof u=="string"?"Hex":"Bytes"}=l,f=(0,t.ripemd160)(n.from(u));return d==="Bytes"?f:s.fromBytes(f)}function a(u,l={}){const{as:d=typeof u=="string"?"Hex":"Bytes"}=l,f=(0,r.sha256)(n.from(u));return d==="Bytes"?f:s.fromBytes(f)}function c(u){return s.validate(u)&&s.size(u)===32}return Tp}var bs={},IW;function rie(){if(IW)return bs;IW=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.InvalidSerializedSizeError=bs.InvalidUncompressedPrefixError=bs.InvalidCompressedPrefixError=bs.InvalidPrefixError=bs.InvalidError=void 0,bs.assert=s,bs.compress=i,bs.from=o,bs.fromBytes=a,bs.fromHex=c,bs.toBytes=u,bs.toHex=l,bs.validate=d;const t=Hl(),e=dc(),r=Fi(),n=OT();function s(E,S={}){const{compressed:C}=S,{prefix:_,x:T,y:P}=E;if(C===!1||typeof T=="bigint"&&typeof P=="bigint"){if(_!==4)throw new p({prefix:_,cause:new h});return}if(C===!0||typeof T=="bigint"&&typeof P>"u"){if(_!==3&&_!==2)throw new p({prefix:_,cause:new g});return}throw new f({publicKey:E})}function i(E){const{x:S,y:C}=E;return{prefix:C%2n===0n?2:3,x:S}}function o(E){const S=(()=>{if(r.validate(E))return c(E);if(t.validate(E))return a(E);const{prefix:C,x:_,y:T}=E;return typeof _=="bigint"&&typeof T=="bigint"?{prefix:C??4,x:_,y:T}:{prefix:C,x:_}})();return s(S),S}function a(E){return c(r.fromBytes(E))}function c(E){if(E.length!==132&&E.length!==130&&E.length!==68)throw new y({publicKey:E});if(E.length===130){const _=BigInt(r.slice(E,0,32)),T=BigInt(r.slice(E,32,64));return{prefix:4,x:_,y:T}}if(E.length===132){const _=Number(r.slice(E,0,1)),T=BigInt(r.slice(E,1,33)),P=BigInt(r.slice(E,33,65));return{prefix:_,x:T,y:P}}const S=Number(r.slice(E,0,1)),C=BigInt(r.slice(E,1,33));return{prefix:S,x:C}}function u(E,S={}){return t.fromHex(l(E,S))}function l(E,S={}){s(E);const{prefix:C,x:_,y:T}=E,{includePrefix:P=!0}=S;return r.concat(P?r.fromNumber(C,{size:1}):"0x",r.fromNumber(_,{size:32}),typeof T=="bigint"?r.fromNumber(T,{size:32}):"0x")}function d(E,S={}){try{return s(E,S),!0}catch{return!1}}class f extends e.BaseError{constructor({publicKey:S}){super(`Value \`${n.stringify(S)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}bs.InvalidError=f;class p extends e.BaseError{constructor({prefix:S,cause:C}){super(`Prefix "${S}" is invalid.`,{cause:C}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}bs.InvalidPrefixError=p;class g extends e.BaseError{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}bs.InvalidCompressedPrefixError=g;class h extends e.BaseError{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}bs.InvalidUncompressedPrefixError=h;class y extends e.BaseError{constructor({publicKey:S}){super(`Value \`${S}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${r.size(r.from(S))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}return bs.InvalidSerializedSizeError=y,bs}var TW;function qT(){if(TW)return Co;TW=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.InvalidChecksumError=Co.InvalidInputError=Co.InvalidAddressError=void 0,Co.assert=o,Co.checksum=a,Co.from=c,Co.fromPublicKey=u,Co.isEqual=l,Co.validate=d;const t=Hl(),e=ZUe(),r=dc(),n=t9(),s=rie(),i=/^0x[a-fA-F0-9]{40}$/;function o(h,y={}){const{strict:E=!0}=y;if(!i.test(h))throw new f({address:h,cause:new p});if(E){if(h.toLowerCase()===h)return;if(a(h)!==h)throw new f({address:h,cause:new g})}}function a(h){if(e.checksum.has(h))return e.checksum.get(h);o(h,{strict:!1});const y=h.substring(2).toLowerCase(),E=n.keccak256(t.fromString(y),{as:"Bytes"}),S=y.split("");for(let _=0;_<40;_+=2)E[_>>1]>>4>=8&&S[_]&&(S[_]=S[_].toUpperCase()),(E[_>>1]&15)>=8&&S[_+1]&&(S[_+1]=S[_+1].toUpperCase());const C=`0x${S.join("")}`;return e.checksum.set(h,C),C}function c(h,y={}){const{checksum:E=!1}=y;return o(h),E?a(h):h}function u(h,y={}){const E=n.keccak256(`0x${s.toHex(h).slice(4)}`).substring(26);return c(`0x${E}`,y)}function l(h,y){return o(h,{strict:!1}),o(y,{strict:!1}),h.toLowerCase()===y.toLowerCase()}function d(h,y={}){const{strict:E=!0}=y??{};try{return o(h,{strict:E}),!0}catch{return!1}}class f extends r.BaseError{constructor({address:y,cause:E}){super(`Address "${y}" is invalid.`,{cause:E}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}Co.InvalidAddressError=f;class p extends r.BaseError{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}Co.InvalidInputError=p;class g extends r.BaseError{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}return Co.InvalidChecksumError=g,Co}var es={},ie={},NW;function r9(){return NW||(NW=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.minInt120=ie.minInt112=ie.minInt104=ie.minInt96=ie.minInt88=ie.minInt80=ie.minInt72=ie.minInt64=ie.minInt56=ie.minInt48=ie.minInt40=ie.minInt32=ie.minInt24=ie.minInt16=ie.minInt8=ie.maxInt256=ie.maxInt248=ie.maxInt240=ie.maxInt232=ie.maxInt224=ie.maxInt216=ie.maxInt208=ie.maxInt200=ie.maxInt192=ie.maxInt184=ie.maxInt176=ie.maxInt168=ie.maxInt160=ie.maxInt152=ie.maxInt144=ie.maxInt136=ie.maxInt128=ie.maxInt120=ie.maxInt112=ie.maxInt104=ie.maxInt96=ie.maxInt88=ie.maxInt80=ie.maxInt72=ie.maxInt64=ie.maxInt56=ie.maxInt48=ie.maxInt40=ie.maxInt32=ie.maxInt24=ie.maxInt16=ie.maxInt8=ie.integerRegex=ie.bytesRegex=ie.arrayRegex=void 0,ie.maxUint256=ie.maxUint248=ie.maxUint240=ie.maxUint232=ie.maxUint224=ie.maxUint216=ie.maxUint208=ie.maxUint200=ie.maxUint192=ie.maxUint184=ie.maxUint176=ie.maxUint168=ie.maxUint160=ie.maxUint152=ie.maxUint144=ie.maxUint136=ie.maxUint128=ie.maxUint120=ie.maxUint112=ie.maxUint104=ie.maxUint96=ie.maxUint88=ie.maxUint80=ie.maxUint72=ie.maxUint64=ie.maxUint56=ie.maxUint48=ie.maxUint40=ie.maxUint32=ie.maxUint24=ie.maxUint16=ie.maxUint8=ie.minInt256=ie.minInt248=ie.minInt240=ie.minInt232=ie.minInt224=ie.minInt216=ie.minInt208=ie.minInt200=ie.minInt192=ie.minInt184=ie.minInt176=ie.minInt168=ie.minInt160=ie.minInt152=ie.minInt144=ie.minInt136=ie.minInt128=void 0,ie.arrayRegex=/^(.*)\[([0-9]*)\]$/,ie.bytesRegex=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,ie.integerRegex=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,ie.maxInt8=2n**(8n-1n)-1n,ie.maxInt16=2n**(16n-1n)-1n,ie.maxInt24=2n**(24n-1n)-1n,ie.maxInt32=2n**(32n-1n)-1n,ie.maxInt40=2n**(40n-1n)-1n,ie.maxInt48=2n**(48n-1n)-1n,ie.maxInt56=2n**(56n-1n)-1n,ie.maxInt64=2n**(64n-1n)-1n,ie.maxInt72=2n**(72n-1n)-1n,ie.maxInt80=2n**(80n-1n)-1n,ie.maxInt88=2n**(88n-1n)-1n,ie.maxInt96=2n**(96n-1n)-1n,ie.maxInt104=2n**(104n-1n)-1n,ie.maxInt112=2n**(112n-1n)-1n,ie.maxInt120=2n**(120n-1n)-1n,ie.maxInt128=2n**(128n-1n)-1n,ie.maxInt136=2n**(136n-1n)-1n,ie.maxInt144=2n**(144n-1n)-1n,ie.maxInt152=2n**(152n-1n)-1n,ie.maxInt160=2n**(160n-1n)-1n,ie.maxInt168=2n**(168n-1n)-1n,ie.maxInt176=2n**(176n-1n)-1n,ie.maxInt184=2n**(184n-1n)-1n,ie.maxInt192=2n**(192n-1n)-1n,ie.maxInt200=2n**(200n-1n)-1n,ie.maxInt208=2n**(208n-1n)-1n,ie.maxInt216=2n**(216n-1n)-1n,ie.maxInt224=2n**(224n-1n)-1n,ie.maxInt232=2n**(232n-1n)-1n,ie.maxInt240=2n**(240n-1n)-1n,ie.maxInt248=2n**(248n-1n)-1n,ie.maxInt256=2n**(256n-1n)-1n,ie.minInt8=-(2n**(8n-1n)),ie.minInt16=-(2n**(16n-1n)),ie.minInt24=-(2n**(24n-1n)),ie.minInt32=-(2n**(32n-1n)),ie.minInt40=-(2n**(40n-1n)),ie.minInt48=-(2n**(48n-1n)),ie.minInt56=-(2n**(56n-1n)),ie.minInt64=-(2n**(64n-1n)),ie.minInt72=-(2n**(72n-1n)),ie.minInt80=-(2n**(80n-1n)),ie.minInt88=-(2n**(88n-1n)),ie.minInt96=-(2n**(96n-1n)),ie.minInt104=-(2n**(104n-1n)),ie.minInt112=-(2n**(112n-1n)),ie.minInt120=-(2n**(120n-1n)),ie.minInt128=-(2n**(128n-1n)),ie.minInt136=-(2n**(136n-1n)),ie.minInt144=-(2n**(144n-1n)),ie.minInt152=-(2n**(152n-1n)),ie.minInt160=-(2n**(160n-1n)),ie.minInt168=-(2n**(168n-1n)),ie.minInt176=-(2n**(176n-1n)),ie.minInt184=-(2n**(184n-1n)),ie.minInt192=-(2n**(192n-1n)),ie.minInt200=-(2n**(200n-1n)),ie.minInt208=-(2n**(208n-1n)),ie.minInt216=-(2n**(216n-1n)),ie.minInt224=-(2n**(224n-1n)),ie.minInt232=-(2n**(232n-1n)),ie.minInt240=-(2n**(240n-1n)),ie.minInt248=-(2n**(248n-1n)),ie.minInt256=-(2n**(256n-1n)),ie.maxUint8=2n**8n-1n,ie.maxUint16=2n**16n-1n,ie.maxUint24=2n**24n-1n,ie.maxUint32=2n**32n-1n,ie.maxUint40=2n**40n-1n,ie.maxUint48=2n**48n-1n,ie.maxUint56=2n**56n-1n,ie.maxUint64=2n**64n-1n,ie.maxUint72=2n**72n-1n,ie.maxUint80=2n**80n-1n,ie.maxUint88=2n**88n-1n,ie.maxUint96=2n**96n-1n,ie.maxUint104=2n**104n-1n,ie.maxUint112=2n**112n-1n,ie.maxUint120=2n**120n-1n,ie.maxUint128=2n**128n-1n,ie.maxUint136=2n**136n-1n,ie.maxUint144=2n**144n-1n,ie.maxUint152=2n**152n-1n,ie.maxUint160=2n**160n-1n,ie.maxUint168=2n**168n-1n,ie.maxUint176=2n**176n-1n,ie.maxUint184=2n**184n-1n,ie.maxUint192=2n**192n-1n,ie.maxUint200=2n**200n-1n,ie.maxUint208=2n**208n-1n,ie.maxUint216=2n**216n-1n,ie.maxUint224=2n**224n-1n,ie.maxUint232=2n**232n-1n,ie.maxUint240=2n**240n-1n,ie.maxUint248=2n**248n-1n,ie.maxUint256=2n**256n-1n),ie}var PW;function YUe(){if(PW)return es;PW=1,Object.defineProperty(es,"__esModule",{value:!0}),es.decodeParameter=o,es.decodeAddress=u,es.decodeArray=l,es.decodeBool=d,es.decodeBytes=f,es.decodeNumber=p,es.decodeTuple=g,es.decodeString=h,es.prepareParameters=y,es.prepareParameter=E,es.encode=S,es.encodeAddress=C,es.encodeArray=_,es.encodeBytes=T,es.encodeBoolean=P,es.encodeNumber=D,es.encodeString=F,es.encodeTuple=I,es.getArrayComponents=U,es.hasDynamicChild=L;const t=w_(),e=qT(),r=Hl(),n=dc(),s=Fi(),i=r9();function o(B,A,m){const{checksumAddress:b,staticPosition:w}=m,x=U(A.type);if(x){const[M,k]=x;return l(B,{...A,type:k},{checksumAddress:b,length:M,staticPosition:w})}if(A.type==="tuple")return g(B,A,{checksumAddress:b,staticPosition:w});if(A.type==="address")return u(B,{checksum:b});if(A.type==="bool")return d(B);if(A.type.startsWith("bytes"))return f(B,A,{staticPosition:w});if(A.type.startsWith("uint")||A.type.startsWith("int"))return p(B,A);if(A.type==="string")return h(B,{staticPosition:w});throw new t.InvalidTypeError(A.type)}const a=32,c=32;function u(B,A={}){const{checksum:m=!1}=A,b=B.readBytes(32);return[(x=>m?e.checksum(x):x)(s.fromBytes(r.slice(b,-20))),32]}function l(B,A,m){const{checksumAddress:b,length:w,staticPosition:x}=m;if(!w){const j=r.toNumber(B.readBytes(c)),N=x+j,v=N+a;B.setPosition(N);const R=r.toNumber(B.readBytes(a)),$=L(A);let O=0;const H=[];for(let W=0;W<R;++W){B.setPosition(v+($?W*32:O));const[G,K]=o(B,A,{checksumAddress:b,staticPosition:v});O+=K,H.push(G)}return B.setPosition(x+32),[H,32]}if(L(A)){const j=r.toNumber(B.readBytes(c)),N=x+j,v=[];for(let R=0;R<w;++R){B.setPosition(N+R*32);const[$]=o(B,A,{checksumAddress:b,staticPosition:N});v.push($)}return B.setPosition(x+32),[v,32]}let M=0;const k=[];for(let j=0;j<w;++j){const[N,v]=o(B,A,{checksumAddress:b,staticPosition:x+M});M+=v,k.push(N)}return[k,M]}function d(B){return[r.toBoolean(B.readBytes(32),{size:32}),32]}function f(B,A,{staticPosition:m}){const[b,w]=A.type.split("bytes");if(!w){const M=r.toNumber(B.readBytes(32));B.setPosition(m+M);const k=r.toNumber(B.readBytes(32));if(k===0)return B.setPosition(m+32),["0x",32];const j=B.readBytes(k);return B.setPosition(m+32),[s.fromBytes(j),32]}return[s.fromBytes(B.readBytes(Number.parseInt(w,10),32)),32]}function p(B,A){const m=A.type.startsWith("int"),b=Number.parseInt(A.type.split("int")[1]||"256",10),w=B.readBytes(32);return[b>48?r.toBigInt(w,{signed:m}):r.toNumber(w,{signed:m}),32]}function g(B,A,m){const{checksumAddress:b,staticPosition:w}=m,x=A.components.length===0||A.components.some(({name:j})=>!j),M=x?[]:{};let k=0;if(L(A)){const j=r.toNumber(B.readBytes(c)),N=w+j;for(let v=0;v<A.components.length;++v){const R=A.components[v];B.setPosition(N+k);const[$,O]=o(B,R,{checksumAddress:b,staticPosition:N});k+=O,M[x?v:R?.name]=$}return B.setPosition(w+32),[M,32]}for(let j=0;j<A.components.length;++j){const N=A.components[j],[v,R]=o(B,N,{checksumAddress:b,staticPosition:w});M[x?j:N?.name]=v,k+=R}return[M,k]}function h(B,{staticPosition:A}){const m=r.toNumber(B.readBytes(32)),b=A+m;B.setPosition(b);const w=r.toNumber(B.readBytes(32));if(w===0)return B.setPosition(A+32),["",32];const x=B.readBytes(w,32),M=r.toString(r.trimLeft(x));return B.setPosition(A+32),[M,32]}function y({checksumAddress:B,parameters:A,values:m}){const b=[];for(let w=0;w<A.length;w++)b.push(E({checksumAddress:B,parameter:A[w],value:m[w]}));return b}function E({checksumAddress:B=!1,parameter:A,value:m}){const b=A,w=U(b.type);if(w){const[x,M]=w;return _(m,{checksumAddress:B,length:x,parameter:{...b,type:M}})}if(b.type==="tuple")return I(m,{checksumAddress:B,parameter:b});if(b.type==="address")return C(m,{checksum:B});if(b.type==="bool")return P(m);if(b.type.startsWith("uint")||b.type.startsWith("int")){const x=b.type.startsWith("int"),[,,M="256"]=i.integerRegex.exec(b.type)??[];return D(m,{signed:x,size:Number(M)})}if(b.type.startsWith("bytes"))return T(m,{type:b.type});if(b.type==="string")return F(m);throw new t.InvalidTypeError(b.type)}function S(B){let A=0;for(let x=0;x<B.length;x++){const{dynamic:M,encoded:k}=B[x];M?A+=32:A+=s.size(k)}const m=[],b=[];let w=0;for(let x=0;x<B.length;x++){const{dynamic:M,encoded:k}=B[x];M?(m.push(s.fromNumber(A+w,{size:32})),b.push(k),w+=s.size(k)):m.push(k)}return s.concat(...m,...b)}function C(B,A){const{checksum:m=!1}=A;return e.assert(B,{strict:m}),{dynamic:!1,encoded:s.padLeft(B.toLowerCase())}}function _(B,A){const{checksumAddress:m,length:b,parameter:w}=A,x=b===null;if(!Array.isArray(B))throw new t.InvalidArrayError(B);if(!x&&B.length!==b)throw new t.ArrayLengthMismatchError({expectedLength:b,givenLength:B.length,type:`${w.type}[${b}]`});let M=!1;const k=[];for(let j=0;j<B.length;j++){const N=E({checksumAddress:m,parameter:w,value:B[j]});N.dynamic&&(M=!0),k.push(N)}if(x||M){const j=S(k);if(x){const N=s.fromNumber(k.length,{size:32});return{dynamic:!0,encoded:k.length>0?s.concat(N,j):N}}if(M)return{dynamic:!0,encoded:j}}return{dynamic:!1,encoded:s.concat(...k.map(({encoded:j})=>j))}}function T(B,{type:A}){const[,m]=A.split("bytes"),b=s.size(B);if(!m){let w=B;return b%32!==0&&(w=s.padRight(w,Math.ceil((B.length-2)/2/32)*32)),{dynamic:!0,encoded:s.concat(s.padLeft(s.fromNumber(b,{size:32})),w)}}if(b!==Number.parseInt(m,10))throw new t.BytesSizeMismatchError({expectedSize:Number.parseInt(m,10),value:B});return{dynamic:!1,encoded:s.padRight(B)}}function P(B){if(typeof B!="boolean")throw new n.BaseError(`Invalid boolean value: "${B}" (type: ${typeof B}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:s.padLeft(s.fromBoolean(B))}}function D(B,{signed:A,size:m}){if(typeof m=="number"){const b=2n**(BigInt(m)-(A?1n:0n))-1n,w=A?-b-1n:0n;if(B>b||B<w)throw new s.IntegerOutOfRangeError({max:b.toString(),min:w.toString(),signed:A,size:m/8,value:B.toString()})}return{dynamic:!1,encoded:s.fromNumber(B,{size:32,signed:A})}}function F(B){const A=s.fromString(B),m=Math.ceil(s.size(A)/32),b=[];for(let w=0;w<m;w++)b.push(s.padRight(s.slice(A,w*32,(w+1)*32)));return{dynamic:!0,encoded:s.concat(s.padRight(s.fromNumber(s.size(A),{size:32})),...b)}}function I(B,A){const{checksumAddress:m,parameter:b}=A;let w=!1;const x=[];for(let M=0;M<b.components.length;M++){const k=b.components[M],j=Array.isArray(B)?M:k.name,N=E({checksumAddress:m,parameter:k,value:B[j]});x.push(N),N.dynamic&&(w=!0)}return{dynamic:w,encoded:w?S(x):s.concat(...x.map(({encoded:M})=>M))}}function U(B){const A=B.match(/^(.*)\[(\d+)?\]$/);return A?[A[2]?Number(A[2]):null,A[1]]:void 0}function L(B){const{type:A}=B;if(A==="string"||A==="bytes"||A.endsWith("[]"))return!0;if(A==="tuple")return B.components?.some(L);const m=U(B.type);return!!(m&&L({...B,type:m[1]}))}return es}var rl={},RW;function nie(){if(RW)return rl;RW=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.RecursiveReadLimitExceededError=rl.PositionOutOfBoundsError=rl.NegativeOffsetError=void 0,rl.create=r;const t=dc(),e={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new i({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(o){if(o<0||o>this.bytes.length-1)throw new s({length:this.bytes.length,position:o})},decrementPosition(o){if(o<0)throw new n({offset:o});const a=this.position-o;this.assertPosition(a),this.position=a},getReadCount(o){return this.positionReadCount.get(o||this.position)||0},incrementPosition(o){if(o<0)throw new n({offset:o});const a=this.position+o;this.assertPosition(a),this.position=a},inspectByte(o){const a=o??this.position;return this.assertPosition(a),this.bytes[a]},inspectBytes(o,a){const c=a??this.position;return this.assertPosition(c+o-1),this.bytes.subarray(c,c+o)},inspectUint8(o){const a=o??this.position;return this.assertPosition(a),this.bytes[a]},inspectUint16(o){const a=o??this.position;return this.assertPosition(a+1),this.dataView.getUint16(a)},inspectUint24(o){const a=o??this.position;return this.assertPosition(a+2),(this.dataView.getUint16(a)<<8)+this.dataView.getUint8(a+2)},inspectUint32(o){const a=o??this.position;return this.assertPosition(a+3),this.dataView.getUint32(a)},pushByte(o){this.assertPosition(this.position),this.bytes[this.position]=o,this.position++},pushBytes(o){this.assertPosition(this.position+o.length-1),this.bytes.set(o,this.position),this.position+=o.length},pushUint8(o){this.assertPosition(this.position),this.bytes[this.position]=o,this.position++},pushUint16(o){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,o),this.position+=2},pushUint24(o){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,o>>8),this.dataView.setUint8(this.position+2,o&255),this.position+=3},pushUint32(o){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,o),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const o=this.inspectByte();return this.position++,o},readBytes(o,a){this.assertReadLimit(),this._touch();const c=this.inspectBytes(o);return this.position+=a??o,c},readUint8(){this.assertReadLimit(),this._touch();const o=this.inspectUint8();return this.position+=1,o},readUint16(){this.assertReadLimit(),this._touch();const o=this.inspectUint16();return this.position+=2,o},readUint24(){this.assertReadLimit(),this._touch();const o=this.inspectUint24();return this.position+=3,o},readUint32(){this.assertReadLimit(),this._touch();const o=this.inspectUint32();return this.position+=4,o},get remaining(){return this.bytes.length-this.position},setPosition(o){const a=this.position;return this.assertPosition(o),this.position=o,()=>this.position=a},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const o=this.getReadCount();this.positionReadCount.set(this.position,o+1),o>0&&this.recursiveReadCount++}};function r(o,{recursiveReadLimit:a=8192}={}){const c=Object.create(e);return c.bytes=o,c.dataView=new DataView(o.buffer,o.byteOffset,o.byteLength),c.positionReadCount=new Map,c.recursiveReadLimit=a,c}class n extends t.BaseError{constructor({offset:a}){super(`Offset \`${a}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}rl.NegativeOffsetError=n;class s extends t.BaseError{constructor({length:a,position:c}){super(`Position \`${c}\` is out of bounds (\`0 < position < ${a}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}rl.PositionOutOfBoundsError=s;class i extends t.BaseError{constructor({count:a,limit:c}){super(`Recursive read limit of \`${c}\` exceeded (recursive read count: \`${a}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}return rl.RecursiveReadLimitExceededError=i,rl}var OW;function w_(){if(OW)return Qn;OW=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.InvalidTypeError=Qn.InvalidArrayError=Qn.LengthMismatchError=Qn.BytesSizeMismatchError=Qn.ArrayLengthMismatchError=Qn.ZeroDataError=Qn.DataSizeTooSmallError=void 0,Qn.decode=c,Qn.encode=u,Qn.encodePacked=l,Qn.format=d,Qn.from=f;const t=$h(),e=qT(),r=Hl(),n=dc(),s=Fi(),i=YUe(),o=nie(),a=r9();function c(_,T,P={}){const{as:D="Array",checksumAddress:F=!1}=P,I=typeof T=="string"?r.fromHex(T):T,U=o.create(I);if(r.size(I)===0&&_.length>0)throw new g;if(r.size(I)&&r.size(I)<32)throw new p({data:typeof T=="string"?T:s.fromBytes(T),parameters:_,size:r.size(I)});let L=0;const B=D==="Array"?[]:{};for(let A=0;A<_.length;++A){const m=_[A];U.setPosition(L);const[b,w]=i.decodeParameter(U,m,{checksumAddress:F,staticPosition:0});L+=w,D==="Array"?B.push(b):B[m.name??A]=b}return B}function u(_,T,P){const{checksumAddress:D=!1}=P??{};if(_.length!==T.length)throw new E({expectedLength:_.length,givenLength:T.length});const F=i.prepareParameters({checksumAddress:D,parameters:_,values:T}),I=i.encode(F);return I.length===0?"0x":I}function l(_,T){if(_.length!==T.length)throw new E({expectedLength:_.length,givenLength:T.length});const P=[];for(let D=0;D<_.length;D++){const F=_[D],I=T[D];P.push(l.encode(F,I))}return s.concat(...P)}(function(_){function T(P,D,F=!1){if(P==="address"){const B=D;return e.assert(B),s.padLeft(B.toLowerCase(),F?32:0)}if(P==="string")return s.fromString(D);if(P==="bytes")return D;if(P==="bool")return s.padLeft(s.fromBoolean(D),F?32:1);const I=P.match(a.integerRegex);if(I){const[B,A,m="256"]=I,b=Number.parseInt(m,10)/8;return s.fromNumber(D,{size:F?32:b,signed:A==="int"})}const U=P.match(a.bytesRegex);if(U){const[B,A]=U;if(Number.parseInt(A,10)!==(D.length-2)/2)throw new y({expectedSize:Number.parseInt(A,10),value:D});return s.padRight(D,F?32:0)}const L=P.match(a.arrayRegex);if(L&&Array.isArray(D)){const[B,A]=L,m=[];for(let b=0;b<D.length;b++)m.push(T(A,D[b],!0));return m.length===0?"0x":s.concat(...m)}throw new C(P)}_.encode=T})(l||(Qn.encodePacked=l={}));function d(_){return t.formatAbiParameters(_)}function f(_){return Array.isArray(_)&&typeof _[0]=="string"||typeof _=="string"?t.parseAbiParameters(_):_}class p extends n.BaseError{constructor({data:T,parameters:P,size:D}){super(`Data size of ${D} bytes is too small for given parameters.`,{metaMessages:[`Params: (${t.formatAbiParameters(P)})`,`Data:   ${T} (${D} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}Qn.DataSizeTooSmallError=p;class g extends n.BaseError{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}Qn.ZeroDataError=g;class h extends n.BaseError{constructor({expectedLength:T,givenLength:P,type:D}){super(`Array length mismatch for type \`${D}\`. Expected: \`${T}\`. Given: \`${P}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}Qn.ArrayLengthMismatchError=h;class y extends n.BaseError{constructor({expectedSize:T,value:P}){super(`Size of bytes "${P}" (bytes${s.size(P)}) does not match expected size (bytes${T}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}Qn.BytesSizeMismatchError=y;class E extends n.BaseError{constructor({expectedLength:T,givenLength:P}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${T}`,`Given length (values): ${P}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}Qn.LengthMismatchError=E;class S extends n.BaseError{constructor(T){super(`Value \`${T}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}Qn.InvalidArrayError=S;class C extends n.BaseError{constructor(T){super(`Type \`${T}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}return Qn.InvalidTypeError=C,Qn}var Ko={},xc={},kW;function JUe(){if(kW)return xc;kW=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.toBytes=s,xc.toHex=i,xc.to=o,xc.decodeRlpCursor=a,xc.readLength=c,xc.readList=u,xc.from=l,xc.fromBytes=d,xc.fromHex=f;const t=Hl(),e=dc(),r=Fi(),n=nie();function s(E){return o(E,"Bytes")}function i(E){return o(E,"Hex")}function o(E,S){const C=S??(typeof E=="string"?"Hex":"Bytes"),_=(()=>{if(typeof E=="string"){if(E.length>3&&E.length%2!==0)throw new r.InvalidLengthError(E);return t.fromHex(E)}return E})(),T=n.create(_,{recursiveReadLimit:Number.POSITIVE_INFINITY});return a(T,C)}function a(E,S="Hex"){if(E.bytes.length===0)return S==="Hex"?r.fromBytes(E.bytes):E.bytes;const C=E.readByte();if(C<128&&E.decrementPosition(1),C<192){const T=c(E,C,128),P=E.readBytes(T);return S==="Hex"?r.fromBytes(P):P}const _=c(E,C,192);return u(E,_,S)}function c(E,S,C){if(C===128&&S<128)return 1;if(S<=C+55)return S-C;if(S===C+55+1)return E.readUint8();if(S===C+55+2)return E.readUint16();if(S===C+55+3)return E.readUint24();if(S===C+55+4)return E.readUint32();throw new e.BaseError("Invalid RLP prefix")}function u(E,S,C){const _=E.position,T=[];for(;E.position-_<S;)T.push(a(E,C));return T}function l(E,S){const{as:C}=S,_=p(E),T=n.create(new Uint8Array(_.length));return _.encode(T),C==="Hex"?r.fromBytes(T.bytes):T.bytes}function d(E,S={}){const{as:C="Bytes"}=S;return l(E,{as:C})}function f(E,S={}){const{as:C="Hex"}=S;return l(E,{as:C})}function p(E){return Array.isArray(E)?g(E.map(S=>p(S))):h(E)}function g(E){const S=E.reduce((T,P)=>T+P.length,0),C=y(S);return{length:S<=55?1+S:1+C+S,encode(T){S<=55?T.pushByte(192+S):(T.pushByte(247+C),C===1?T.pushUint8(S):C===2?T.pushUint16(S):C===3?T.pushUint24(S):T.pushUint32(S));for(const{encode:P}of E)P(T)}}}function h(E){const S=typeof E=="string"?t.fromHex(E):E,C=y(S.length);return{length:S.length===1&&S[0]<128?1:S.length<=55?1+S.length:1+C+S.length,encode(T){S.length===1&&S[0]<128?T.pushBytes(S):S.length<=55?(T.pushByte(128+S.length),T.pushBytes(S)):(T.pushByte(183+C),C===1?T.pushUint8(S.length):C===2?T.pushUint16(S.length):C===3?T.pushUint24(S.length):T.pushUint32(S.length),T.pushBytes(S))}}}function y(E){if(E<2**8)return 1;if(E<2**16)return 2;if(E<2**24)return 3;if(E<2**32)return 4;throw new e.BaseError("Length is too large.")}return xc}var gr={},BW;function sie(){if(BW)return gr;BW=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.InvalidVError=gr.InvalidYParityError=gr.InvalidSError=gr.InvalidRError=gr.MissingPropertiesError=gr.InvalidSerializedSizeError=void 0,gr.assert=o,gr.fromBytes=a,gr.fromHex=c,gr.extract=u,gr.from=l,gr.fromDerBytes=d,gr.fromDerHex=f,gr.fromLegacy=p,gr.fromRpc=g,gr.fromTuple=h,gr.toBytes=y,gr.toHex=E,gr.toDerBytes=S,gr.toDerHex=C,gr.toLegacy=_,gr.toRpc=T,gr.toTuple=P,gr.validate=D,gr.vToYParity=F,gr.yParityToV=I;const t=og(),e=Hl(),r=dc(),n=Fi(),s=OT(),i=r9();function o(w,x={}){const{recovered:M}=x;if(typeof w.r>"u")throw new L({signature:w});if(typeof w.s>"u")throw new L({signature:w});if(M&&typeof w.yParity>"u")throw new L({signature:w});if(w.r<0n||w.r>i.maxUint256)throw new B({value:w.r});if(w.s<0n||w.s>i.maxUint256)throw new A({value:w.s});if(typeof w.yParity=="number"&&w.yParity!==0&&w.yParity!==1)throw new m({value:w.yParity})}function a(w){return c(n.fromBytes(w))}function c(w){if(w.length!==130&&w.length!==132)throw new U({signature:w});const x=BigInt(n.slice(w,0,32)),M=BigInt(n.slice(w,32,64)),k=(()=>{const j=+`0x${w.slice(130)}`;if(!Number.isNaN(j))try{return F(j)}catch{throw new m({value:j})}})();return typeof k>"u"?{r:x,s:M}:{r:x,s:M,yParity:k}}function u(w){if(!(typeof w.r>"u")&&!(typeof w.s>"u"))return l(w)}function l(w){const x=typeof w=="string"?c(w):w instanceof Uint8Array?a(w):typeof w.r=="string"?g(w):w.v?p(w):{r:w.r,s:w.s,...typeof w.yParity<"u"?{yParity:w.yParity}:{}};return o(x),x}function d(w){return f(n.fromBytes(w))}function f(w){const{r:x,s:M}=t.secp256k1.Signature.fromDER(n.from(w).slice(2));return{r:x,s:M}}function p(w){return{r:w.r,s:w.s,yParity:F(w.v)}}function g(w){const x=(()=>{const M=w.v?Number(w.v):void 0;let k=w.yParity?Number(w.yParity):void 0;if(typeof M=="number"&&typeof k!="number"&&(k=F(M)),typeof k!="number")throw new m({value:w.yParity});return k})();return{r:BigInt(w.r),s:BigInt(w.s),yParity:x}}function h(w){const[x,M,k]=w;return l({r:M==="0x"?0n:BigInt(M),s:k==="0x"?0n:BigInt(k),yParity:x==="0x"?0:Number(x)})}function y(w){return e.fromHex(E(w))}function E(w){o(w);const x=w.r,M=w.s;return n.concat(n.fromNumber(x,{size:32}),n.fromNumber(M,{size:32}),typeof w.yParity=="number"?n.fromNumber(I(w.yParity),{size:1}):"0x")}function S(w){return new t.secp256k1.Signature(w.r,w.s).toDERRawBytes()}function C(w){return`0x${new t.secp256k1.Signature(w.r,w.s).toDERHex()}`}function _(w){return{r:w.r,s:w.s,v:I(w.yParity)}}function T(w){const{r:x,s:M,yParity:k}=w;return{r:n.fromNumber(x,{size:32}),s:n.fromNumber(M,{size:32}),yParity:k===0?"0x0":"0x1"}}function P(w){const{r:x,s:M,yParity:k}=w;return[k?"0x01":"0x",x===0n?"0x":n.trimLeft(n.fromNumber(x)),M===0n?"0x":n.trimLeft(n.fromNumber(M))]}function D(w,x={}){try{return o(w,x),!0}catch{return!1}}function F(w){if(w===0||w===27)return 0;if(w===1||w===28)return 1;if(w>=35)return w%2===0?1:0;throw new b({value:w})}function I(w){if(w===0)return 27;if(w===1)return 28;throw new m({value:w})}class U extends r.BaseError{constructor({signature:x}){super(`Value \`${x}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${n.size(n.from(x))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}gr.InvalidSerializedSizeError=U;class L extends r.BaseError{constructor({signature:x}){super(`Signature \`${s.stringify(x)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}gr.MissingPropertiesError=L;class B extends r.BaseError{constructor({value:x}){super(`Value \`${x}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}gr.InvalidRError=B;class A extends r.BaseError{constructor({value:x}){super(`Value \`${x}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}gr.InvalidSError=A;class m extends r.BaseError{constructor({value:x}){super(`Value \`${x}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}gr.InvalidYParityError=m;class b extends r.BaseError{constructor({value:x}){super(`Value \`${x}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}return gr.InvalidVError=b,gr}var UW;function XUe(){if(UW)return Ko;UW=1,Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.from=s,Ko.fromRpc=i,Ko.fromRpcList=o,Ko.fromTuple=a,Ko.fromTupleList=c,Ko.getSignPayload=u,Ko.hash=l,Ko.toRpc=d,Ko.toRpcList=f,Ko.toTuple=p,Ko.toTupleList=g;const t=t9(),e=Fi(),r=JUe(),n=sie();function s(h,y={}){return typeof h.chainId=="string"?i(h):{...h,...y.signature}}function i(h){const{address:y,chainId:E,nonce:S}=h,C=n.extract(h);return{address:y,chainId:Number(E),nonce:BigInt(S),...C}}function o(h){return h.map(i)}function a(h){const[y,E,S,C,_,T]=h;let P={address:E,chainId:y==="0x"?0:Number(y),nonce:S==="0x"?0n:BigInt(S)};return C&&_&&T&&(P={...P,...n.fromTuple([C,_,T])}),s(P)}function c(h){const y=[];for(const E of h)y.push(a(E));return y}function u(h){return l(h,{presign:!0})}function l(h,y={}){const{presign:E}=y;return t.keccak256(e.concat("0x05",r.fromHex(p(E?{address:h.address,chainId:h.chainId,nonce:h.nonce}:h))))}function d(h){const{address:y,chainId:E,nonce:S,...C}=h;return{address:y,chainId:e.fromNumber(E),nonce:e.fromNumber(S),...n.toRpc(C)}}function f(h){return h.map(d)}function p(h){const{address:y,chainId:E,nonce:S}=h,C=n.extract(h);return[E?e.fromNumber(E):"0x",y,S?e.fromNumber(S):"0x",...C?n.toTuple(C):[]]}function g(h){if(!h||h.length===0)return[];const y=[];for(const E of h)y.push(p(E));return y}return Ko}var La={},Np={},MW;function QUe(){if(MW)return Np;MW=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.extraEntropy=void 0,Np.setExtraEntropy=t,Np.extraEntropy=!1;function t(e){Np.extraEntropy=e}return Np}var DW;function eMe(){if(DW)return La;DW=1,Object.defineProperty(La,"__esModule",{value:!0}),La.noble=void 0,La.createKeyPair=o,La.getPublicKey=a,La.getSharedSecret=c,La.randomPrivateKey=u,La.recoverAddress=l,La.recoverPublicKey=d,La.sign=f,La.verify=p;const t=og(),e=qT(),r=Hl(),n=Fi(),s=QUe(),i=rie();La.noble=t.secp256k1;function o(g={}){const{as:h="Hex"}=g,y=u({as:h}),E=a({privateKey:y});return{privateKey:y,publicKey:E}}function a(g){const{privateKey:h}=g,y=t.secp256k1.ProjectivePoint.fromPrivateKey(n.from(h).slice(2));return i.from(y)}function c(g){const{as:h="Hex",privateKey:y,publicKey:E}=g,_=t.secp256k1.ProjectivePoint.fromHex(i.toHex(E).slice(2)).multiply(t.secp256k1.utils.normPrivateKeyToScalar(n.from(y).slice(2))).toRawBytes(!0);return h==="Hex"?n.fromBytes(_):_}function u(g={}){const{as:h="Hex"}=g,y=t.secp256k1.utils.randomPrivateKey();return h==="Hex"?n.fromBytes(y):y}function l(g){return e.fromPublicKey(d(g))}function d(g){const{payload:h,signature:y}=g,{r:E,s:S,yParity:C}=y,T=new t.secp256k1.Signature(BigInt(E),BigInt(S)).addRecoveryBit(C).recoverPublicKey(n.from(h).substring(2));return i.from(T)}function f(g){const{extraEntropy:h=s.extraEntropy,hash:y,payload:E,privateKey:S}=g,{r:C,s:_,recovery:T}=t.secp256k1.sign(r.from(E),r.from(S),{extraEntropy:typeof h=="boolean"?h:n.from(h).slice(2),lowS:!0,...y?{prehash:!0}:{}});return{r:C,s:_,yParity:T}}function p(g){const{address:h,hash:y,payload:E,publicKey:S,signature:C}=g;return h?e.isEqual(h,l({payload:E,signature:C})):t.secp256k1.verify(C,r.from(E),i.toBytes(S),...y?[{prehash:!0,lowS:!0}]:[])}return La}var jW;function tMe(){return jW||(jW=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidWrappedSignatureError=t.suffixParameters=t.magicBytes=void 0,t.assert=a,t.from=c,t.unwrap=u,t.wrap=l,t.validate=d;const e=w_(),r=XUe(),n=dc(),s=Fi(),i=eMe(),o=sie();t.magicBytes="0x8010801080108010801080108010801080108010801080108010801080108010",t.suffixParameters=e.from("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function a(p){if(typeof p=="string"){if(s.slice(p,-32)!==t.magicBytes)throw new f(p)}else o.assert(p.authorization)}function c(p){return typeof p=="string"?u(p):p}function u(p){a(p);const g=s.toNumber(s.slice(p,-64,-32)),h=s.slice(p,-g-64,-64),y=s.slice(p,0,-g-64),[E,S,C]=e.decode(t.suffixParameters,h);return{authorization:r.from({address:E.delegation,chainId:Number(E.chainId),nonce:E.nonce,yParity:E.yParity,r:E.r,s:E.s}),signature:y,...C&&C!=="0x"?{data:C,to:S}:{}}}function l(p){const{data:g,signature:h}=p;a(p);const y=i.recoverAddress({payload:r.getSignPayload(p.authorization),signature:o.from(p.authorization)}),E=e.encode(t.suffixParameters,[{...p.authorization,delegation:p.authorization.address,chainId:BigInt(p.authorization.chainId)},p.to??y,g??"0x"]),S=s.fromNumber(s.size(E),{size:32});return s.concat(h,E,S,t.magicBytes)}function d(p){try{return a(p),!0}catch{return!1}}class f extends n.BaseError{constructor(g){super(`Value \`${g}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}}t.InvalidWrappedSignatureError=f})(aR)),aR}var LW;function HT(){return LW||(LW=1,Object.defineProperty(qw,"__esModule",{value:!0}),qw.SignatureErc8010=void 0,qw.SignatureErc8010=tMe()),qw}var FW;function n9(){if(FW)return Vx;FW=1,Object.defineProperty(Vx,"__esModule",{value:!0}),Vx.isErc8010Signature=e;const t=HT();function e(r){return t.SignatureErc8010.validate(r)}return Vx}var Gx={},$W;function iie(){if($W)return Gx;$W=1,Object.defineProperty(Gx,"__esModule",{value:!0}),Gx.parseErc6492Signature=r;const t=zh(),e=e9();function r(n){if(!(0,e.isErc6492Signature)(n))return{signature:n};const[s,i,o]=(0,t.decodeAbiParameters)([{type:"address"},{type:"bytes"},{type:"bytes"}],n);return{address:s,data:i,signature:o}}return Gx}var Kx={},qW;function oie(){if(qW)return Kx;qW=1,Object.defineProperty(Kx,"__esModule",{value:!0}),Kx.parseErc8010Signature=n;const t=HT(),e=tt(),r=n9();function n(s){if(!(0,r.isErc8010Signature)(s))return{signature:s};const{authorization:i,to:o,...a}=t.SignatureErc8010.unwrap(s);return{authorization:{address:i.address,chainId:i.chainId,nonce:Number(i.nonce),r:(0,e.numberToHex)(i.r,{size:32}),s:(0,e.numberToHex)(i.s,{size:32}),yParity:i.yParity},...o?{address:o}:{},...a}}return Kx}var Zx={},HW;function s9(){if(HW)return Zx;HW=1,Object.defineProperty(Zx,"__esModule",{value:!0}),Zx.recoverMessageAddress=r;const t=y_(),e=Kh();async function r({message:n,signature:s}){return(0,e.recoverAddress)({hash:(0,t.hashMessage)(n),signature:s})}return Zx}var Yx={},zW;function i9(){if(zW)return Yx;zW=1,Object.defineProperty(Yx,"__esModule",{value:!0}),Yx.recoverTypedDataAddress=r;const t=b_(),e=Kh();async function r(n){const{domain:s,message:i,primaryType:o,signature:a,types:c}=n;return(0,e.recoverAddress)({hash:(0,t.hashTypedData)({domain:s,message:i,primaryType:o,types:c}),signature:a})}return Yx}var Jx={},WW;function aie(){if(WW)return Jx;WW=1,Object.defineProperty(Jx,"__esModule",{value:!0}),Jx.serializeErc6492Signature=s;const t=QB(),e=qu(),r=fi(),n=Pn();function s(i){const{address:o,data:a,signature:c,to:u="hex"}=i,l=(0,r.concatHex)([(0,e.encodeAbiParameters)([{type:"address"},{type:"bytes"},{type:"bytes"}],[o,a,c]),t.erc6492MagicBytes]);return u==="hex"?l:(0,n.hexToBytes)(l)}return Jx}var Xx={},VW;function cie(){if(VW)return Xx;VW=1,Object.defineProperty(Xx,"__esModule",{value:!0}),Xx.serializeErc8010Signature=r;const t=HT(),e=Pn();function r(n){const{address:s,data:i,signature:o,to:a="hex"}=n,c=t.SignatureErc8010.wrap({authorization:{address:n.authorization.address,chainId:n.authorization.chainId,nonce:BigInt(n.authorization.nonce),r:BigInt(n.authorization.r),s:BigInt(n.authorization.s),yParity:n.authorization.yParity},data:i,signature:o,to:s});return a==="hex"?c:(0,e.hexToBytes)(c)}return Xx}var Qx={},GW;function uie(){if(GW)return Qx;GW=1,Object.defineProperty(Qx,"__esModule",{value:!0}),Qx.verifyHash=n;const t=lc(),e=Vu(),r=Kh();async function n({address:s,hash:i,signature:o}){return(0,e.isAddressEqual)((0,t.getAddress)(s),await(0,r.recoverAddress)({hash:i,signature:o}))}return Qx}var eC={},KW;function lie(){if(KW)return eC;KW=1,Object.defineProperty(eC,"__esModule",{value:!0}),eC.verifyMessage=n;const t=lc(),e=Vu(),r=s9();async function n({address:s,message:i,signature:o}){return(0,e.isAddressEqual)((0,t.getAddress)(s),await(0,r.recoverMessageAddress)({message:i,signature:o}))}return eC}var tC={},ZW;function die(){if(ZW)return tC;ZW=1,Object.defineProperty(tC,"__esModule",{value:!0}),tC.verifyTypedData=n;const t=lc(),e=Vu(),r=i9();async function n(s){const{address:i,domain:o,message:a,primaryType:c,signature:u,types:l}=s;return(0,e.isAddressEqual)((0,t.getAddress)(i),await(0,r.recoverTypedDataAddress)({domain:o,message:a,primaryType:c,signature:u,types:l}))}return tC}var rC={},YW;function o9(){if(YW)return rC;YW=1,Object.defineProperty(rC,"__esModule",{value:!0}),rC.getSerializedTransactionType=n;const t=Na(),e=Gc(),r=ys();function n(s){const i=(0,e.sliceHex)(s,0,1);if(i==="0x04")return"eip7702";if(i==="0x03")return"eip4844";if(i==="0x02")return"eip1559";if(i==="0x01")return"eip2930";if(i!=="0x"&&(0,r.hexToNumber)(i)>=192)return"legacy";throw new t.InvalidSerializedTransactionTypeError({serializedType:i})}return rC}var Zg={},JW;function a9(){if(JW)return Zg;JW=1,Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.parseTransaction=f,Zg.toTransactionArray=S,Zg.parseAccessList=C;const t=$u(),e=Na(),r=Ia(),n=PT(),s=$o(),i=qh(),o=af(),a=ys(),c=KB(),u=ZB(),l=LT(),d=o9();function f(P){const D=(0,d.getSerializedTransactionType)(P);return D==="eip1559"?h(P):D==="eip2930"?y(P):D==="eip4844"?g(P):D==="eip7702"?p(P):E(P)}function p(P){const D=S(P),[F,I,U,L,B,A,m,b,w,x,M,k,j]=D;if(D.length!==10&&D.length!==13)throw new e.InvalidSerializedTransactionError({attributes:{chainId:F,nonce:I,maxPriorityFeePerGas:U,maxFeePerGas:L,gas:B,to:A,value:m,data:b,accessList:w,authorizationList:x,...D.length>9?{v:M,r:k,s:j}:{}},serializedTransaction:P,type:"eip7702"});const N={chainId:(0,a.hexToNumber)(F),type:"eip7702"};return(0,s.isHex)(A)&&A!=="0x"&&(N.to=A),(0,s.isHex)(B)&&B!=="0x"&&(N.gas=(0,a.hexToBigInt)(B)),(0,s.isHex)(b)&&b!=="0x"&&(N.data=b),(0,s.isHex)(I)&&(N.nonce=I==="0x"?0:(0,a.hexToNumber)(I)),(0,s.isHex)(m)&&m!=="0x"&&(N.value=(0,a.hexToBigInt)(m)),(0,s.isHex)(L)&&L!=="0x"&&(N.maxFeePerGas=(0,a.hexToBigInt)(L)),(0,s.isHex)(U)&&U!=="0x"&&(N.maxPriorityFeePerGas=(0,a.hexToBigInt)(U)),w.length!==0&&w!=="0x"&&(N.accessList=C(w)),x.length!==0&&x!=="0x"&&(N.authorizationList=_(x)),(0,l.assertTransactionEIP7702)(N),{...D.length===13?T(D):void 0,...N}}function g(P){const D=S(P),F=D.length===4,I=F?D[0]:D,U=F?D.slice(1):[],[L,B,A,m,b,w,x,M,k,j,N,v,R,$]=I,[O,H,W]=U;if(!(I.length===11||I.length===14))throw new e.InvalidSerializedTransactionError({attributes:{chainId:L,nonce:B,maxPriorityFeePerGas:A,maxFeePerGas:m,gas:b,to:w,value:x,data:M,accessList:k,...I.length>9?{v,r:R,s:$}:{}},serializedTransaction:P,type:"eip4844"});const G={blobVersionedHashes:N,chainId:(0,a.hexToNumber)(L),to:w,type:"eip4844"};return(0,s.isHex)(b)&&b!=="0x"&&(G.gas=(0,a.hexToBigInt)(b)),(0,s.isHex)(M)&&M!=="0x"&&(G.data=M),(0,s.isHex)(B)&&(G.nonce=B==="0x"?0:(0,a.hexToNumber)(B)),(0,s.isHex)(x)&&x!=="0x"&&(G.value=(0,a.hexToBigInt)(x)),(0,s.isHex)(j)&&j!=="0x"&&(G.maxFeePerBlobGas=(0,a.hexToBigInt)(j)),(0,s.isHex)(m)&&m!=="0x"&&(G.maxFeePerGas=(0,a.hexToBigInt)(m)),(0,s.isHex)(A)&&A!=="0x"&&(G.maxPriorityFeePerGas=(0,a.hexToBigInt)(A)),k.length!==0&&k!=="0x"&&(G.accessList=C(k)),O&&H&&W&&(G.sidecars=(0,n.toBlobSidecars)({blobs:O,commitments:H,proofs:W})),(0,l.assertTransactionEIP4844)(G),{...I.length===14?T(I):void 0,...G}}function h(P){const D=S(P),[F,I,U,L,B,A,m,b,w,x,M,k]=D;if(!(D.length===9||D.length===12))throw new e.InvalidSerializedTransactionError({attributes:{chainId:F,nonce:I,maxPriorityFeePerGas:U,maxFeePerGas:L,gas:B,to:A,value:m,data:b,accessList:w,...D.length>9?{v:x,r:M,s:k}:{}},serializedTransaction:P,type:"eip1559"});const j={chainId:(0,a.hexToNumber)(F),type:"eip1559"};return(0,s.isHex)(A)&&A!=="0x"&&(j.to=A),(0,s.isHex)(B)&&B!=="0x"&&(j.gas=(0,a.hexToBigInt)(B)),(0,s.isHex)(b)&&b!=="0x"&&(j.data=b),(0,s.isHex)(I)&&(j.nonce=I==="0x"?0:(0,a.hexToNumber)(I)),(0,s.isHex)(m)&&m!=="0x"&&(j.value=(0,a.hexToBigInt)(m)),(0,s.isHex)(L)&&L!=="0x"&&(j.maxFeePerGas=(0,a.hexToBigInt)(L)),(0,s.isHex)(U)&&U!=="0x"&&(j.maxPriorityFeePerGas=(0,a.hexToBigInt)(U)),w.length!==0&&w!=="0x"&&(j.accessList=C(w)),(0,l.assertTransactionEIP1559)(j),{...D.length===12?T(D):void 0,...j}}function y(P){const D=S(P),[F,I,U,L,B,A,m,b,w,x,M]=D;if(!(D.length===8||D.length===11))throw new e.InvalidSerializedTransactionError({attributes:{chainId:F,nonce:I,gasPrice:U,gas:L,to:B,value:A,data:m,accessList:b,...D.length>8?{v:w,r:x,s:M}:{}},serializedTransaction:P,type:"eip2930"});const k={chainId:(0,a.hexToNumber)(F),type:"eip2930"};return(0,s.isHex)(B)&&B!=="0x"&&(k.to=B),(0,s.isHex)(L)&&L!=="0x"&&(k.gas=(0,a.hexToBigInt)(L)),(0,s.isHex)(m)&&m!=="0x"&&(k.data=m),(0,s.isHex)(I)&&(k.nonce=I==="0x"?0:(0,a.hexToNumber)(I)),(0,s.isHex)(A)&&A!=="0x"&&(k.value=(0,a.hexToBigInt)(A)),(0,s.isHex)(U)&&U!=="0x"&&(k.gasPrice=(0,a.hexToBigInt)(U)),b.length!==0&&b!=="0x"&&(k.accessList=C(b)),(0,l.assertTransactionEIP2930)(k),{...D.length===11?T(D):void 0,...k}}function E(P){const D=(0,c.fromRlp)(P,"hex"),[F,I,U,L,B,A,m,b,w]=D;if(!(D.length===6||D.length===9))throw new e.InvalidSerializedTransactionError({attributes:{nonce:F,gasPrice:I,gas:U,to:L,value:B,data:A,...D.length>6?{v:m,r:b,s:w}:{}},serializedTransaction:P,type:"legacy"});const x={type:"legacy"};if((0,s.isHex)(L)&&L!=="0x"&&(x.to=L),(0,s.isHex)(U)&&U!=="0x"&&(x.gas=(0,a.hexToBigInt)(U)),(0,s.isHex)(A)&&A!=="0x"&&(x.data=A),(0,s.isHex)(F)&&(x.nonce=F==="0x"?0:(0,a.hexToNumber)(F)),(0,s.isHex)(B)&&B!=="0x"&&(x.value=(0,a.hexToBigInt)(B)),(0,s.isHex)(I)&&I!=="0x"&&(x.gasPrice=(0,a.hexToBigInt)(I)),(0,l.assertTransactionLegacy)(x),D.length===6)return x;const M=(0,s.isHex)(m)&&m!=="0x"?(0,a.hexToBigInt)(m):0n;if(w==="0x"&&b==="0x")return M>0&&(x.chainId=Number(M)),x;const k=M,j=Number((k-35n)/2n);if(j>0)x.chainId=j;else if(k!==27n&&k!==28n)throw new e.InvalidLegacyVError({v:k});return x.v=k,x.s=w,x.r=b,x.yParity=k%2n===0n?1:0,x}function S(P){return(0,c.fromRlp)(`0x${P.slice(4)}`,"hex")}function C(P){const D=[];for(let F=0;F<P.length;F++){const[I,U]=P[F];if(!(0,r.isAddress)(I,{strict:!1}))throw new t.InvalidAddressError({address:I});D.push({address:I,storageKeys:U.map(L=>(0,u.isHash)(L)?L:(0,o.trim)(L))})}return D}function _(P){const D=[];for(let F=0;F<P.length;F++){const[I,U,L,B,A,m]=P[F];D.push({address:U,chainId:I==="0x"?0:(0,a.hexToNumber)(I),nonce:L==="0x"?0:(0,a.hexToNumber)(L),...T([B,A,m])})}return D}function T(P){const D=P.slice(-3),F=D[0]==="0x"||(0,a.hexToBigInt)(D[0])===0n?27n:28n;return{r:(0,i.padHex)(D[1],{size:32}),s:(0,i.padHex)(D[2],{size:32}),v:F,yParity:F===27n?0:1}}return Zg}var nC={},sC={},zw={},XW;function fie(){if(XW)return zw;XW=1,Object.defineProperty(zw,"__esModule",{value:!0}),zw.InvalidDecimalNumberError=void 0;const t=Kt();class e extends t.BaseError{constructor({value:n}){super(`Number \`${n}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}return zw.InvalidDecimalNumberError=e,zw}var QW;function zT(){if(QW)return sC;QW=1,Object.defineProperty(sC,"__esModule",{value:!0}),sC.parseUnits=e;const t=fie();function e(r,n){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(r))throw new t.InvalidDecimalNumberError({value:r});let[s,i="0"]=r.split(".");const o=s.startsWith("-");if(o&&(s=s.slice(1)),i=i.replace(/(0+)$/,""),n===0)Math.round(+`.${i}`)===1&&(s=`${BigInt(s)+1n}`),i="";else if(i.length>n){const[a,c,u]=[i.slice(0,n-1),i.slice(n-1,n),i.slice(n)],l=Math.round(+`${c}.${u}`);l>9?i=`${BigInt(a)+BigInt(1)}0`.padStart(a.length+1,"0"):i=`${a}${l}`,i.length>n&&(i=i.slice(1),s=`${BigInt(s)+1n}`),i=i.slice(0,n)}else i=i.padEnd(n,"0");return BigInt(`${o?"-":""}${s}${i}`)}return sC}var eV;function hie(){if(eV)return nC;eV=1,Object.defineProperty(nC,"__esModule",{value:!0}),nC.parseEther=r;const t=QE(),e=zT();function r(n,s="wei"){return(0,e.parseUnits)(n,t.etherUnits[s])}return nC}var iC={},tV;function pie(){if(tV)return iC;tV=1,Object.defineProperty(iC,"__esModule",{value:!0}),iC.parseGwei=r;const t=QE(),e=zT();function r(n,s="wei"){return(0,e.parseUnits)(n,t.gweiUnits[s])}return iC}var rV;function c9(){return rV||(rV=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.padBytes=t.pad=t.isHex=t.isBytes=t.concatHex=t.concatBytes=t.concat=t.getChainContractAddress=t.extractChain=t.defineChain=t.assertCurrentChain=t.offchainLookupSignature=t.offchainLookupAbiItem=t.offchainLookup=t.ccipFetch=t.ccipRequest=t.buildRequest=t.verifyAuthorization=t.serializeAuthorizationList=t.recoverAuthorizationAddress=t.hashAuthorization=t.isAddressEqual=t.isAddress=t.getCreateAddress=t.getCreate2Address=t.getContractAddress=t.getAddress=t.parseEventLogs=t.getAbiItem=t.formatAbiItemWithArgs=t.formatAbiParams=t.formatAbiItem=t.encodePacked=t.encodeFunctionResult=t.encodeFunctionData=t.encodeEventTopics=t.encodeErrorResult=t.encodeDeployData=t.encodeAbiParameters=t.decodeFunctionResult=t.decodeFunctionData=t.decodeEventLog=t.decodeErrorResult=t.decodeAbiParameters=t.publicKeyToAddress=t.parseAccount=t.parseAbiParameters=t.parseAbiParameter=t.parseAbiItem=t.parseAbi=void 0,t.ripemd160=t.keccak256=t.isHash=t.getAction=t.formatTransactionRequest=t.defineTransactionRequest=t.defineTransactionReceipt=t.transactionType=t.formatTransaction=t.defineTransaction=t.formatLog=t.defineFormatter=t.extract=t.formatBlock=t.defineBlock=t.getTransactionError=t.getNodeError=t.containsNodeError=t.getEstimateGasError=t.getContractError=t.getCallError=t.toRlp=t.toHex=t.stringToHex=t.numberToHex=t.bytesToHex=t.boolToHex=t.toBytes=t.stringToBytes=t.numberToBytes=t.hexToBytes=t.boolToBytes=t.fromRlp=t.hexToString=t.hexToNumber=t.hexToBool=t.hexToBigInt=t.fromHex=t.fromBytes=t.bytesToString=t.bytesToNumber=t.bytesToBool=t.bytesToBigint=t.bytesToBigInt=t.trim=t.sliceHex=t.sliceBytes=t.slice=t.size=t.padHex=void 0,t.validateTypedData=t.serializeTypedData=t.serializeTransaction=t.serializeAccessList=t.parseTransaction=t.getTransactionType=t.getSerializedTransactionType=t.assertTransactionLegacy=t.assertTransactionEIP2930=t.assertTransactionEIP1559=t.assertRequest=t.stringify=t.verifyTypedData=t.verifyMessage=t.verifyHash=t.serializeErc8010Signature=t.serializeErc6492Signature=t.recoverTypedDataAddress=t.recoverPublicKey=t.recoverMessageAddress=t.recoverAddress=t.parseErc8010Signature=t.parseErc6492Signature=t.isErc8010Signature=t.isErc6492Signature=t.hashTypedData=t.hashStruct=t.hashMessage=t.getWebSocketRpcClient=t.socketClientCache=t.getSocketRpcClient=t.getHttpRpcClient=t.rpc=t.getSocket=t.integerRegex=t.bytesRegex=t.arrayRegex=t.nonceManager=t.createNonceManager=t.getFunctionSignature=t.toFunctionSignature=t.getFunctionSelector=t.toFunctionSelector=t.toFunctionHash=t.getEventSignature=t.toEventSignature=t.getEventSelector=t.toEventSelector=t.toEventHash=t.sha256=void 0,t.parseUnits=t.parseGwei=t.parseEther=t.formatUnits=t.formatGwei=t.formatEther=void 0;var e=$h();Object.defineProperty(t,"parseAbi",{enumerable:!0,get:function(){return e.parseAbi}}),Object.defineProperty(t,"parseAbiItem",{enumerable:!0,get:function(){return e.parseAbiItem}}),Object.defineProperty(t,"parseAbiParameter",{enumerable:!0,get:function(){return e.parseAbiParameter}}),Object.defineProperty(t,"parseAbiParameters",{enumerable:!0,get:function(){return e.parseAbiParameters}});var r=is();Object.defineProperty(t,"parseAccount",{enumerable:!0,get:function(){return r.parseAccount}});var n=ose();Object.defineProperty(t,"publicKeyToAddress",{enumerable:!0,get:function(){return n.publicKeyToAddress}});var s=zh();Object.defineProperty(t,"decodeAbiParameters",{enumerable:!0,get:function(){return s.decodeAbiParameters}});var i=AT();Object.defineProperty(t,"decodeErrorResult",{enumerable:!0,get:function(){return i.decodeErrorResult}});var o=c_();Object.defineProperty(t,"decodeEventLog",{enumerable:!0,get:function(){return o.decodeEventLog}});var a=kB();Object.defineProperty(t,"decodeFunctionData",{enumerable:!0,get:function(){return a.decodeFunctionData}});var c=df();Object.defineProperty(t,"decodeFunctionResult",{enumerable:!0,get:function(){return c.decodeFunctionResult}});var u=qu();Object.defineProperty(t,"encodeAbiParameters",{enumerable:!0,get:function(){return u.encodeAbiParameters}});var l=f_();Object.defineProperty(t,"encodeDeployData",{enumerable:!0,get:function(){return l.encodeDeployData}});var d=BB();Object.defineProperty(t,"encodeErrorResult",{enumerable:!0,get:function(){return d.encodeErrorResult}});var f=ng();Object.defineProperty(t,"encodeEventTopics",{enumerable:!0,get:function(){return f.encodeEventTopics}});var p=Ta();Object.defineProperty(t,"encodeFunctionData",{enumerable:!0,get:function(){return p.encodeFunctionData}});var g=UB();Object.defineProperty(t,"encodeFunctionResult",{enumerable:!0,get:function(){return g.encodeFunctionResult}});var h=Mse();Object.defineProperty(t,"encodePacked",{enumerable:!0,get:function(){return h.encodePacked}});var y=of();Object.defineProperty(t,"formatAbiItem",{enumerable:!0,get:function(){return y.formatAbiItem}}),Object.defineProperty(t,"formatAbiParams",{enumerable:!0,get:function(){return y.formatAbiParams}});var E=ise();Object.defineProperty(t,"formatAbiItemWithArgs",{enumerable:!0,get:function(){return E.formatAbiItemWithArgs}});var S=cf();Object.defineProperty(t,"getAbiItem",{enumerable:!0,get:function(){return S.getAbiItem}});var C=u_();Object.defineProperty(t,"parseEventLogs",{enumerable:!0,get:function(){return C.parseEventLogs}});var _=lc();Object.defineProperty(t,"getAddress",{enumerable:!0,get:function(){return _.getAddress}});var T=Dse();Object.defineProperty(t,"getContractAddress",{enumerable:!0,get:function(){return T.getContractAddress}}),Object.defineProperty(t,"getCreate2Address",{enumerable:!0,get:function(){return T.getCreate2Address}}),Object.defineProperty(t,"getCreateAddress",{enumerable:!0,get:function(){return T.getCreateAddress}});var P=Ia();Object.defineProperty(t,"isAddress",{enumerable:!0,get:function(){return P.isAddress}});var D=Vu();Object.defineProperty(t,"isAddressEqual",{enumerable:!0,get:function(){return D.isAddressEqual}});var F=lse();Object.defineProperty(t,"hashAuthorization",{enumerable:!0,get:function(){return F.hashAuthorization}});var I=r_();Object.defineProperty(t,"recoverAuthorizationAddress",{enumerable:!0,get:function(){return I.recoverAuthorizationAddress}});var U=jse();Object.defineProperty(t,"serializeAuthorizationList",{enumerable:!0,get:function(){return U.serializeAuthorizationList}});var L=Lse();Object.defineProperty(t,"verifyAuthorization",{enumerable:!0,get:function(){return L.verifyAuthorization}});var B=Fse();Object.defineProperty(t,"buildRequest",{enumerable:!0,get:function(){return B.buildRequest}});var A=MB();Object.defineProperty(t,"ccipRequest",{enumerable:!0,get:function(){return A.ccipRequest}}),Object.defineProperty(t,"ccipFetch",{enumerable:!0,get:function(){return A.ccipRequest}}),Object.defineProperty(t,"offchainLookup",{enumerable:!0,get:function(){return A.offchainLookup}}),Object.defineProperty(t,"offchainLookupAbiItem",{enumerable:!0,get:function(){return A.offchainLookupAbiItem}}),Object.defineProperty(t,"offchainLookupSignature",{enumerable:!0,get:function(){return A.offchainLookupSignature}});var m=g_();Object.defineProperty(t,"assertCurrentChain",{enumerable:!0,get:function(){return m.assertCurrentChain}});var b=$se();Object.defineProperty(t,"defineChain",{enumerable:!0,get:function(){return b.defineChain}});var w=qse();Object.defineProperty(t,"extractChain",{enumerable:!0,get:function(){return w.extractChain}});var x=Xh();Object.defineProperty(t,"getChainContractAddress",{enumerable:!0,get:function(){return x.getChainContractAddress}});var M=fi();Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return M.concat}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return M.concatBytes}}),Object.defineProperty(t,"concatHex",{enumerable:!0,get:function(){return M.concatHex}});var k=VB();Object.defineProperty(t,"isBytes",{enumerable:!0,get:function(){return k.isBytes}});var j=$o();Object.defineProperty(t,"isHex",{enumerable:!0,get:function(){return j.isHex}});var N=qh();Object.defineProperty(t,"pad",{enumerable:!0,get:function(){return N.pad}}),Object.defineProperty(t,"padBytes",{enumerable:!0,get:function(){return N.padBytes}}),Object.defineProperty(t,"padHex",{enumerable:!0,get:function(){return N.padHex}});var v=Ca();Object.defineProperty(t,"size",{enumerable:!0,get:function(){return v.size}});var R=Gc();Object.defineProperty(t,"slice",{enumerable:!0,get:function(){return R.slice}}),Object.defineProperty(t,"sliceBytes",{enumerable:!0,get:function(){return R.sliceBytes}}),Object.defineProperty(t,"sliceHex",{enumerable:!0,get:function(){return R.sliceHex}});var $=af();Object.defineProperty(t,"trim",{enumerable:!0,get:function(){return $.trim}});var O=gB();Object.defineProperty(t,"bytesToBigInt",{enumerable:!0,get:function(){return O.bytesToBigInt}}),Object.defineProperty(t,"bytesToBigint",{enumerable:!0,get:function(){return O.bytesToBigInt}}),Object.defineProperty(t,"bytesToBool",{enumerable:!0,get:function(){return O.bytesToBool}}),Object.defineProperty(t,"bytesToNumber",{enumerable:!0,get:function(){return O.bytesToNumber}}),Object.defineProperty(t,"bytesToString",{enumerable:!0,get:function(){return O.bytesToString}}),Object.defineProperty(t,"fromBytes",{enumerable:!0,get:function(){return O.fromBytes}});var H=ys();Object.defineProperty(t,"fromHex",{enumerable:!0,get:function(){return H.fromHex}}),Object.defineProperty(t,"hexToBigInt",{enumerable:!0,get:function(){return H.hexToBigInt}}),Object.defineProperty(t,"hexToBool",{enumerable:!0,get:function(){return H.hexToBool}}),Object.defineProperty(t,"hexToNumber",{enumerable:!0,get:function(){return H.hexToNumber}}),Object.defineProperty(t,"hexToString",{enumerable:!0,get:function(){return H.hexToString}});var W=KB();Object.defineProperty(t,"fromRlp",{enumerable:!0,get:function(){return W.fromRlp}});var G=Pn();Object.defineProperty(t,"boolToBytes",{enumerable:!0,get:function(){return G.boolToBytes}}),Object.defineProperty(t,"hexToBytes",{enumerable:!0,get:function(){return G.hexToBytes}}),Object.defineProperty(t,"numberToBytes",{enumerable:!0,get:function(){return G.numberToBytes}}),Object.defineProperty(t,"stringToBytes",{enumerable:!0,get:function(){return G.stringToBytes}}),Object.defineProperty(t,"toBytes",{enumerable:!0,get:function(){return G.toBytes}});var K=tt();Object.defineProperty(t,"boolToHex",{enumerable:!0,get:function(){return K.boolToHex}}),Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return K.bytesToHex}}),Object.defineProperty(t,"numberToHex",{enumerable:!0,get:function(){return K.numberToHex}}),Object.defineProperty(t,"stringToHex",{enumerable:!0,get:function(){return K.stringToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return K.toHex}});var Q=t_();Object.defineProperty(t,"toRlp",{enumerable:!0,get:function(){return Q.toRlp}});var re=PB();Object.defineProperty(t,"getCallError",{enumerable:!0,get:function(){return re.getCallError}});var de=Gh();Object.defineProperty(t,"getContractError",{enumerable:!0,get:function(){return de.getContractError}});var le=fse();Object.defineProperty(t,"getEstimateGasError",{enumerable:!0,get:function(){return le.getEstimateGasError}});var se=n_();Object.defineProperty(t,"containsNodeError",{enumerable:!0,get:function(){return se.containsNodeError}}),Object.defineProperty(t,"getNodeError",{enumerable:!0,get:function(){return se.getNodeError}});var be=o_();Object.defineProperty(t,"getTransactionError",{enumerable:!0,get:function(){return be.getTransactionError}});var We=ST();Object.defineProperty(t,"defineBlock",{enumerable:!0,get:function(){return We.defineBlock}}),Object.defineProperty(t,"formatBlock",{enumerable:!0,get:function(){return We.formatBlock}});var Ne=Zh();Object.defineProperty(t,"extract",{enumerable:!0,get:function(){return Ne.extract}});var Be=s_();Object.defineProperty(t,"defineFormatter",{enumerable:!0,get:function(){return Be.defineFormatter}});var At=lf();Object.defineProperty(t,"formatLog",{enumerable:!0,get:function(){return At.formatLog}});var Ee=eb();Object.defineProperty(t,"defineTransaction",{enumerable:!0,get:function(){return Ee.defineTransaction}}),Object.defineProperty(t,"formatTransaction",{enumerable:!0,get:function(){return Ee.formatTransaction}}),Object.defineProperty(t,"transactionType",{enumerable:!0,get:function(){return Ee.transactionType}});var fe=m_();Object.defineProperty(t,"defineTransactionReceipt",{enumerable:!0,get:function(){return fe.defineTransactionReceipt}});var Mt=zu();Object.defineProperty(t,"defineTransactionRequest",{enumerable:!0,get:function(){return Mt.defineTransactionRequest}}),Object.defineProperty(t,"formatTransactionRequest",{enumerable:!0,get:function(){return Mt.formatTransactionRequest}});var bt=kr();Object.defineProperty(t,"getAction",{enumerable:!0,get:function(){return bt.getAction}});var jt=ZB();Object.defineProperty(t,"isHash",{enumerable:!0,get:function(){return jt.isHash}});var ge=Sa();Object.defineProperty(t,"keccak256",{enumerable:!0,get:function(){return ge.keccak256}});var ve=zse();Object.defineProperty(t,"ripemd160",{enumerable:!0,get:function(){return ve.ripemd160}});var V=AB();Object.defineProperty(t,"sha256",{enumerable:!0,get:function(){return V.sha256}});var q=Wse();Object.defineProperty(t,"toEventHash",{enumerable:!0,get:function(){return q.toEventHash}});var z=Qy();Object.defineProperty(t,"toEventSelector",{enumerable:!0,get:function(){return z.toEventSelector}}),Object.defineProperty(t,"getEventSelector",{enumerable:!0,get:function(){return z.toEventSelector}});var X=Vse();Object.defineProperty(t,"toEventSignature",{enumerable:!0,get:function(){return X.toEventSignature}}),Object.defineProperty(t,"getEventSignature",{enumerable:!0,get:function(){return X.toEventSignature}});var ne=Gse();Object.defineProperty(t,"toFunctionHash",{enumerable:!0,get:function(){return ne.toFunctionHash}});var ce=rg();Object.defineProperty(t,"toFunctionSelector",{enumerable:!0,get:function(){return ce.toFunctionSelector}}),Object.defineProperty(t,"getFunctionSelector",{enumerable:!0,get:function(){return ce.toFunctionSelector}});var me=Kse();Object.defineProperty(t,"toFunctionSignature",{enumerable:!0,get:function(){return me.toFunctionSignature}}),Object.defineProperty(t,"getFunctionSignature",{enumerable:!0,get:function(){return me.toFunctionSignature}});var Rt=Zse();Object.defineProperty(t,"createNonceManager",{enumerable:!0,get:function(){return Rt.createNonceManager}}),Object.defineProperty(t,"nonceManager",{enumerable:!0,get:function(){return Rt.nonceManager}});var Tt=ET();Object.defineProperty(t,"arrayRegex",{enumerable:!0,get:function(){return Tt.arrayRegex}}),Object.defineProperty(t,"bytesRegex",{enumerable:!0,get:function(){return Tt.bytesRegex}}),Object.defineProperty(t,"integerRegex",{enumerable:!0,get:function(){return Tt.integerRegex}});var Ct=Xse();Object.defineProperty(t,"getSocket",{enumerable:!0,get:function(){return Ct.getSocket}}),Object.defineProperty(t,"rpc",{enumerable:!0,get:function(){return Ct.rpc}});var or=JB();Object.defineProperty(t,"getHttpRpcClient",{enumerable:!0,get:function(){return or.getHttpRpcClient}});var Et=Jse();Object.defineProperty(t,"getSocketRpcClient",{enumerable:!0,get:function(){return Et.getSocketRpcClient}}),Object.defineProperty(t,"socketClientCache",{enumerable:!0,get:function(){return Et.socketClientCache}});var on=XB();Object.defineProperty(t,"getWebSocketRpcClient",{enumerable:!0,get:function(){return on.getWebSocketRpcClient}});var Zc=y_();Object.defineProperty(t,"hashMessage",{enumerable:!0,get:function(){return Zc.hashMessage}});var Qr=b_();Object.defineProperty(t,"hashStruct",{enumerable:!0,get:function(){return Qr.hashStruct}}),Object.defineProperty(t,"hashTypedData",{enumerable:!0,get:function(){return Qr.hashTypedData}});var Wr=e9();Object.defineProperty(t,"isErc6492Signature",{enumerable:!0,get:function(){return Wr.isErc6492Signature}});var Yc=n9();Object.defineProperty(t,"isErc8010Signature",{enumerable:!0,get:function(){return Yc.isErc8010Signature}});var an=iie();Object.defineProperty(t,"parseErc6492Signature",{enumerable:!0,get:function(){return an.parseErc6492Signature}});var Vr=oie();Object.defineProperty(t,"parseErc8010Signature",{enumerable:!0,get:function(){return Vr.parseErc8010Signature}});var Jc=Kh();Object.defineProperty(t,"recoverAddress",{enumerable:!0,get:function(){return Jc.recoverAddress}});var Gr=s9();Object.defineProperty(t,"recoverMessageAddress",{enumerable:!0,get:function(){return Gr.recoverMessageAddress}});var cn=bB();Object.defineProperty(t,"recoverPublicKey",{enumerable:!0,get:function(){return cn.recoverPublicKey}});var wo=i9();Object.defineProperty(t,"recoverTypedDataAddress",{enumerable:!0,get:function(){return wo.recoverTypedDataAddress}});var Sr=aie();Object.defineProperty(t,"serializeErc6492Signature",{enumerable:!0,get:function(){return Sr.serializeErc6492Signature}});var un=cie();Object.defineProperty(t,"serializeErc8010Signature",{enumerable:!0,get:function(){return un.serializeErc8010Signature}});var vo=uie();Object.defineProperty(t,"verifyHash",{enumerable:!0,get:function(){return vo.verifyHash}});var Ir=lie();Object.defineProperty(t,"verifyMessage",{enumerable:!0,get:function(){return Ir.verifyMessage}});var Kr=die();Object.defineProperty(t,"verifyTypedData",{enumerable:!0,get:function(){return Kr.verifyTypedData}});var Xc=Li();Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return Xc.stringify}});var ln=Wu();Object.defineProperty(t,"assertRequest",{enumerable:!0,get:function(){return ln.assertRequest}});var Zr=LT();Object.defineProperty(t,"assertTransactionEIP1559",{enumerable:!0,get:function(){return Zr.assertTransactionEIP1559}}),Object.defineProperty(t,"assertTransactionEIP2930",{enumerable:!0,get:function(){return Zr.assertTransactionEIP2930}}),Object.defineProperty(t,"assertTransactionLegacy",{enumerable:!0,get:function(){return Zr.assertTransactionLegacy}});var Qc=o9();Object.defineProperty(t,"getSerializedTransactionType",{enumerable:!0,get:function(){return Qc.getSerializedTransactionType}});var en=RT();Object.defineProperty(t,"getTransactionType",{enumerable:!0,get:function(){return en.getTransactionType}});var dn=a9();Object.defineProperty(t,"parseTransaction",{enumerable:!0,get:function(){return dn.parseTransaction}});var Ra=GB();Object.defineProperty(t,"serializeAccessList",{enumerable:!0,get:function(){return Ra.serializeAccessList}});var tn=FT();Object.defineProperty(t,"serializeTransaction",{enumerable:!0,get:function(){return tn.serializeTransaction}});var Br=$T();Object.defineProperty(t,"serializeTypedData",{enumerable:!0,get:function(){return Br.serializeTypedData}}),Object.defineProperty(t,"validateTypedData",{enumerable:!0,get:function(){return Br.validateTypedData}});var hc=e_();Object.defineProperty(t,"formatEther",{enumerable:!0,get:function(){return hc.formatEther}});var pc=sg();Object.defineProperty(t,"formatGwei",{enumerable:!0,get:function(){return pc.formatGwei}});var gc=xT();Object.defineProperty(t,"formatUnits",{enumerable:!0,get:function(){return gc.formatUnits}});var mc=hie();Object.defineProperty(t,"parseEther",{enumerable:!0,get:function(){return mc.parseEther}});var yc=pie();Object.defineProperty(t,"parseGwei",{enumerable:!0,get:function(){return yc.parseGwei}});var ff=zT();Object.defineProperty(t,"parseUnits",{enumerable:!0,get:function(){return ff.parseUnits}})})(eR)),eR}var nV;function rMe(){if(nV)return Nx;nV=1,Object.defineProperty(Nx,"__esModule",{value:!0}),Nx.formatProof=r;const t=c9();function e(n){return n.map(s=>({...s,value:BigInt(s.value)}))}function r(n){return{...n,balance:n.balance?BigInt(n.balance):void 0,nonce:n.nonce?(0,t.hexToNumber)(n.nonce):void 0,storageProof:n.storageProof?e(n.storageProof):void 0}}return Nx}var sV;function nMe(){if(sV)return Tx;sV=1,Object.defineProperty(Tx,"__esModule",{value:!0}),Tx.getProof=r;const t=tt(),e=rMe();async function r(n,{address:s,blockNumber:i,blockTag:o,storageKeys:a}){const c=o??"latest",u=i!==void 0?(0,t.numberToHex)(i):void 0,l=await n.request({method:"eth_getProof",params:[s,a,u||c]});return(0,e.formatProof)(l)}return Tx}var oC={},iV;function sMe(){if(iV)return oC;iV=1,Object.defineProperty(oC,"__esModule",{value:!0}),oC.getStorageAt=e;const t=tt();async function e(r,{address:n,blockNumber:s,blockTag:i="latest",slot:o}){const a=s!==void 0?(0,t.numberToHex)(s):void 0;return await r.request({method:"eth_getStorageAt",params:[n,o,a||i]})}return oC}var aC={},oV;function u9(){if(oV)return aC;oV=1,Object.defineProperty(aC,"__esModule",{value:!0}),aC.getTransaction=n;const t=Na(),e=tt(),r=eb();async function n(s,{blockHash:i,blockNumber:o,blockTag:a,hash:c,index:u,sender:l,nonce:d}){const f=a||"latest",p=o!==void 0?(0,e.numberToHex)(o):void 0;let g=null;if(c?g=await s.request({method:"eth_getTransactionByHash",params:[c]},{dedupe:!0}):i?g=await s.request({method:"eth_getTransactionByBlockHashAndIndex",params:[i,(0,e.numberToHex)(u)]},{dedupe:!0}):typeof u=="number"?g=await s.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[p||f,(0,e.numberToHex)(u)]},{dedupe:!!p}):l&&typeof d=="number"&&(g=await s.request({method:"eth_getTransactionBySenderAndNonce",params:[l,(0,e.numberToHex)(d)]},{dedupe:!0})),!g)throw new t.TransactionNotFoundError({blockHash:i,blockNumber:o,blockTag:f,hash:c,index:u});return(s.chain?.formatters?.transaction?.format||r.formatTransaction)(g,"getTransaction")}return aC}var cC={},aV;function iMe(){if(aV)return cC;aV=1,Object.defineProperty(cC,"__esModule",{value:!0}),cC.getTransactionConfirmations=n;const t=kr(),e=p_(),r=u9();async function n(s,{hash:i,transactionReceipt:o}){const[a,c]=await Promise.all([(0,t.getAction)(s,e.getBlockNumber,"getBlockNumber")({}),i?(0,t.getAction)(s,r.getTransaction,"getTransaction")({hash:i}):void 0]),u=o?.blockNumber||c?.blockNumber;return u?a-u+1n:0n}return cC}var uC={},cV;function gie(){if(cV)return uC;cV=1,Object.defineProperty(uC,"__esModule",{value:!0}),uC.getTransactionReceipt=r;const t=Na(),e=m_();async function r(n,{hash:s}){const i=await n.request({method:"eth_getTransactionReceipt",params:[s]},{dedupe:!0});if(!i)throw new t.TransactionReceiptNotFoundError({hash:s});return(n.chain?.formatters?.transactionReceipt?.format||e.formatTransactionReceipt)(i,"getTransactionReceipt")}return uC}var lC={},uV;function oMe(){if(uV)return lC;uV=1,Object.defineProperty(lC,"__esModule",{value:!0}),lC.multicall=d;const t=Jh(),e=l_(),r=Jn(),n=Kt(),s=Wh(),i=df(),o=Ta(),a=Xh(),c=Gh(),u=kr(),l=zl();async function d(f,p){const{account:g,authorizationList:h,allowFailure:y=!0,blockNumber:E,blockOverrides:S,blockTag:C,stateOverride:_}=p,T=p.contracts,{batchSize:P=p.batchSize??1024,deployless:D=p.deployless??!1}=typeof f.batch?.multicall=="object"?f.batch.multicall:{},F=(()=>{if(p.multicallAddress)return p.multicallAddress;if(D)return null;if(f.chain)return(0,a.getChainContractAddress)({blockNumber:E,chain:f.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),I=[[]];let U=0,L=0;for(let m=0;m<T.length;m++){const{abi:b,address:w,args:x,functionName:M}=T[m];try{const k=(0,o.encodeFunctionData)({abi:b,args:x,functionName:M});L+=(k.length-2)/2,P>0&&L>P&&I[U].length>0&&(U++,L=(k.length-2)/2,I[U]=[]),I[U]=[...I[U],{allowFailure:!0,callData:k,target:w}]}catch(k){const j=(0,c.getContractError)(k,{abi:b,address:w,args:x,docsPath:"/docs/contract/multicall",functionName:M,sender:g});if(!y)throw j;I[U]=[...I[U],{allowFailure:!0,callData:"0x",target:w}]}}const B=await Promise.allSettled(I.map(m=>(0,u.getAction)(f,l.readContract,"readContract")({...F===null?{code:e.multicall3Bytecode}:{address:F},abi:t.multicall3Abi,account:g,args:[m],authorizationList:h,blockNumber:E,blockOverrides:S,blockTag:C,functionName:"aggregate3",stateOverride:_}))),A=[];for(let m=0;m<B.length;m++){const b=B[m];if(b.status==="rejected"){if(!y)throw b.reason;for(let x=0;x<I[m].length;x++)A.push({status:"failure",error:b.reason,result:void 0});continue}const w=b.value;for(let x=0;x<w.length;x++){const{returnData:M,success:k}=w[x],{callData:j}=I[m][x],{abi:N,address:v,functionName:R,args:$}=T[A.length];try{if(j==="0x")throw new r.AbiDecodingZeroDataError;if(!k)throw new s.RawContractError({data:M});const O=(0,i.decodeFunctionResult)({abi:N,args:$,data:M,functionName:R});A.push(y?{result:O,status:"success"}:O)}catch(O){const H=(0,c.getContractError)(O,{abi:N,address:v,args:$,docsPath:"/docs/contract/multicall",functionName:R});if(!y)throw H;A.push({error:H,result:void 0,status:"failure"})}}}if(A.length!==T.length)throw new n.BaseError("multicall results mismatch");return A}return lC}var dC={},lV;function mie(){if(lV)return dC;lV=1,Object.defineProperty(dC,"__esModule",{value:!0}),dC.simulateBlocks=y;const t=_se(),e=is(),r=Jn(),n=Wh(),s=uf(),i=df(),o=Ta(),a=fi(),c=tt(),u=Gh(),l=n_(),d=ST(),f=lf(),p=zu(),g=wB(),h=Wu();async function y(E,S){const{blockNumber:C,blockTag:_=E.experimental_blockTag??"latest",blocks:T,returnFullTransactions:P,traceTransfers:D,validation:F}=S;try{const I=[];for(const A of T){const m=A.blockOverrides?t.toRpc(A.blockOverrides):void 0,b=A.calls.map(x=>{const M=x,k=M.account?(0,e.parseAccount)(M.account):void 0,j=M.abi?(0,o.encodeFunctionData)(M):M.data,N={...M,account:k,data:M.dataSuffix?(0,a.concat)([j||"0x",M.dataSuffix]):j,from:M.from??k?.address};return(0,h.assertRequest)(N),(0,p.formatTransactionRequest)(N)}),w=A.stateOverrides?(0,g.serializeStateOverride)(A.stateOverrides):void 0;I.push({blockOverrides:m,calls:b,stateOverrides:w})}const L=(typeof C=="bigint"?(0,c.numberToHex)(C):void 0)||_;return(await E.request({method:"eth_simulateV1",params:[{blockStateCalls:I,returnFullTransactions:P,traceTransfers:D,validation:F},L]})).map((A,m)=>({...(0,d.formatBlock)(A),calls:A.calls.map((b,w)=>{const{abi:x,args:M,functionName:k,to:j}=T[m].calls[w],N=b.error?.data??b.returnData,v=BigInt(b.gasUsed),R=b.logs?.map(W=>(0,f.formatLog)(W)),$=b.status==="0x1"?"success":"failure",O=x&&$==="success"&&N!=="0x"?(0,i.decodeFunctionResult)({abi:x,data:N,functionName:k}):null,H=(()=>{if($==="success")return;let W;if(b.error?.data==="0x"?W=new r.AbiDecodingZeroDataError:b.error&&(W=new n.RawContractError(b.error)),!!W)return(0,u.getContractError)(W,{abi:x??[],address:j??"0x",args:M,functionName:k??"<unknown>"})})();return{data:N,gasUsed:v,logs:R,status:$,...$==="success"?{result:O}:{error:H}}})}))}catch(I){const U=I,L=(0,l.getNodeError)(U,{});throw L instanceof s.UnknownNodeError?U:L}}return dC}var fC={},Ff={},So={},Yg={},dV;function aMe(){if(dV)return Yg;dV=1,Object.defineProperty(Yg,"__esModule",{value:!0}),Yg.normalizeSignature=r,Yg.isArgOfType=n,Yg.getAmbiguousTypes=s;const t=qT(),e=dc();function r(i){let o=!0,a="",c=0,u="",l=!1;for(let d=0;d<i.length;d++){const f=i[d];if(["(",")",","].includes(f)&&(o=!0),f==="("&&c++,f===")"&&c--,!!o){if(c===0){if(f===" "&&["event","function","error",""].includes(u))u="";else if(u+=f,f===")"){l=!0;break}continue}if(f===" "){i[d-1]!==","&&a!==","&&a!==",("&&(a="",o=!1);continue}u+=f,a+=f}}if(!l)throw new e.BaseError("Unable to normalize signature.");return u}function n(i,o){const a=typeof i,c=o.type;switch(c){case"address":return t.validate(i,{strict:!1});case"bool":return a==="boolean";case"function":return a==="string";case"string":return a==="string";default:return c==="tuple"&&"components"in o?Object.values(o.components).every((u,l)=>n(Object.values(i)[l],u)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(c)?a==="number"||a==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(c)?a==="string"||i instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(c)?Array.isArray(i)&&i.every(u=>n(u,{...o,type:c.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function s(i,o,a){for(const c in i){const u=i[c],l=o[c];if(u.type==="tuple"&&l.type==="tuple"&&"components"in u&&"components"in l)return s(u.components,l.components,a[c]);const d=[u.type,l.type];if(d.includes("address")&&d.includes("bytes20")?!0:d.includes("address")&&d.includes("string")?t.validate(a[c],{strict:!1}):d.includes("address")&&d.includes("bytes")?t.validate(a[c],{strict:!1}):!1)return d}}return Yg}var fV;function yie(){if(fV)return So;fV=1,Object.defineProperty(So,"__esModule",{value:!0}),So.InvalidSelectorSizeError=So.NotFoundError=So.AmbiguityError=void 0,So.format=i,So.from=o,So.fromAbi=a,So.getSelector=c,So.getSignature=u,So.getSignatureHash=l;const t=$h(),e=dc(),r=t9(),n=Fi(),s=aMe();function i(g){return t.formatAbiItem(g)}function o(g,h={}){const{prepare:y=!0}=h,E=Array.isArray(g)||typeof g=="string"?t.parseAbiItem(g):g;return{...E,...y?{hash:l(E)}:{}}}function a(g,h,y){const{args:E=[],prepare:S=!0}=y??{},C=n.validate(h,{strict:!1}),_=g.filter(D=>C?D.type==="function"||D.type==="error"?c(D)===n.slice(h,0,4):D.type==="event"?l(D)===h:!1:"name"in D&&D.name===h);if(_.length===0)throw new f({name:h});if(_.length===1)return{..._[0],...S?{hash:l(_[0])}:{}};let T;for(const D of _){if(!("inputs"in D))continue;if(!E||E.length===0){if(!D.inputs||D.inputs.length===0)return{...D,...S?{hash:l(D)}:{}};continue}if(!D.inputs||D.inputs.length===0||D.inputs.length!==E.length)continue;if(E.every((I,U)=>{const L="inputs"in D&&D.inputs[U];return L?s.isArgOfType(I,L):!1})){if(T&&"inputs"in T&&T.inputs){const I=s.getAmbiguousTypes(D.inputs,T.inputs,E);if(I)throw new d({abiItem:D,type:I[0]},{abiItem:T,type:I[1]})}T=D}}const P=(()=>{if(T)return T;const[D,...F]=_;return{...D,overloads:F}})();if(!P)throw new f({name:h});return{...P,...S?{hash:l(P)}:{}}}function c(...g){const h=(()=>{if(Array.isArray(g[0])){const[y,E]=g;return a(y,E)}return g[0]})();return n.slice(l(h),0,4)}function u(...g){const h=(()=>{if(Array.isArray(g[0])){const[E,S]=g;return a(E,S)}return g[0]})(),y=typeof h=="string"?h:t.formatAbiItem(h);return s.normalizeSignature(y)}function l(...g){const h=(()=>{if(Array.isArray(g[0])){const[y,E]=g;return a(y,E)}return g[0]})();return typeof h!="string"&&"hash"in h&&h.hash?h.hash:r.keccak256(n.fromString(u(h)))}class d extends e.BaseError{constructor(h,y){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${h.type}\` in \`${s.normalizeSignature(t.formatAbiItem(h.abiItem))}\`, and`,`\`${y.type}\` in \`${s.normalizeSignature(t.formatAbiItem(y.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}So.AmbiguityError=d;class f extends e.BaseError{constructor({name:h,data:y,type:E="item"}){const S=h?` with name "${h}"`:y?` with data "${y}"`:"";super(`ABI ${E}${S} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}So.NotFoundError=f;class p extends e.BaseError{constructor({data:h}){super(`Selector size is invalid. Expected 4 bytes. Received ${n.size(h)} bytes ("${h}").`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.InvalidSelectorSizeError"})}}return So.InvalidSelectorSizeError=p,So}var hV;function cMe(){if(hV)return Ff;hV=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.decode=s,Ff.encode=i,Ff.format=o,Ff.from=a,Ff.fromAbi=c;const t=$h(),e=yie(),r=w_(),n=Fi();function s(...u){const[l,d]=(()=>{if(Array.isArray(u[0])){const[g,h]=u;return[c(g),h]}return u})(),{bytecode:f}=d;if(l.inputs.length===0)return;const p=d.data.replace(f,"0x");return r.decode(l.inputs,p)}function i(...u){const[l,d]=(()=>{if(Array.isArray(u[0])){const[g,h]=u;return[c(g),h]}return u})(),{bytecode:f,args:p}=d;return n.concat(f,l.inputs?.length&&p?.length?r.encode(l.inputs,p):"0x")}function o(u){return t.formatAbiItem(u)}function a(u){return e.from(u)}function c(u){const l=u.find(d=>d.type==="constructor");if(!l)throw new e.NotFoundError({name:"constructor"});return l}return Ff}var uu={},pV;function uMe(){if(pV)return uu;pV=1,Object.defineProperty(uu,"__esModule",{value:!0}),uu.decodeData=s,uu.decodeResult=i,uu.encodeData=o,uu.encodeResult=a,uu.format=c,uu.from=u,uu.fromAbi=l,uu.getSelector=d;const t=$h(),e=yie(),r=w_(),n=Fi();function s(...f){const[p,g]=(()=>{if(Array.isArray(f[0])){const[E,S,C]=f;return[l(E,S),C]}return f})(),{overloads:h}=p;if(n.size(g)<4)throw new e.InvalidSelectorSizeError({data:g});if(p.inputs.length===0)return;const y=h?l([p,...h],g):p;if(!(n.size(g)<=4))return r.decode(y.inputs,n.slice(g,4))}function i(...f){const[p,g,h={}]=(()=>{if(Array.isArray(f[0])){const[E,S,C,_]=f;return[l(E,S),C,_]}return f})(),y=r.decode(p.outputs,g,h);if(!(y&&Object.keys(y).length===0))return y&&Object.keys(y).length===1?Array.isArray(y)?y[0]:Object.values(y)[0]:y}function o(...f){const[p,g=[]]=(()=>{if(Array.isArray(f[0])){const[T,P,D]=f;return[l(T,P,{args:D}),D]}const[C,_]=f;return[C,_]})(),{overloads:h}=p,y=h?l([p,...h],p.name,{args:g}):p,E=d(y),S=g.length>0?r.encode(y.inputs,g):void 0;return S?n.concat(E,S):E}function a(...f){const[p,g,h={}]=(()=>{if(Array.isArray(f[0])){const[S,C,_,T]=f;return[l(S,C),_,T]}return f})(),{as:y="Array"}=h,E=p.outputs.length===1?[g]:Array.isArray(g)?g:y==="Object"?Object.values(g):[g];return r.encode(p.outputs,E)}function c(f){return t.formatAbiItem(f)}function u(f,p={}){return e.from(f,p)}function l(f,p,g){const h=e.fromAbi(f,p,g);if(h.type!=="function")throw new e.NotFoundError({name:p,type:"function"});return h}function d(f){return e.getSelector(f)}return uu}var Fa={},gV;function bie(){return gV||(gV=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.zeroAddress=Fa.ethAddress=Fa.entryPoint08Address=Fa.entryPoint07Address=Fa.entryPoint06Address=void 0,Fa.entryPoint06Address="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",Fa.entryPoint07Address="0x0000000071727De22E5E9d8BAf0edAc6f37da032",Fa.entryPoint08Address="0x4337084D9E255Ff0702461CF8895CE9E3b5Ff108",Fa.ethAddress="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Fa.zeroAddress="0x0000000000000000000000000000000000000000"),Fa}var mV;function lMe(){if(mV)return fC;mV=1,Object.defineProperty(fC,"__esModule",{value:!0}),fC.simulateCalls=d;const t=cMe(),e=uMe(),r=is(),n=bie(),s=l_(),i=Kt(),o=Ta(),a=c9(),c=Ose(),u=mie(),l="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function d(f,p){const{blockNumber:g,blockTag:h,calls:y,stateOverrides:E,traceAssetChanges:S,traceTransfers:C,validation:_}=p,T=p.account?(0,r.parseAccount)(p.account):void 0;if(S&&!T)throw new i.BaseError("`account` is required when `traceAssetChanges` is true");const P=T?t.encode(t.from("constructor(bytes, bytes)"),{bytecode:s.deploylessCallViaBytecodeBytecode,args:[l,e.encodeData(e.from("function getBalance(address)"),[T.address])]}):void 0,D=S?await Promise.all(p.calls.map(async Q=>{if(!Q.data&&!Q.abi)return;const{accessList:re}=await(0,c.createAccessList)(f,{account:T.address,...Q,data:Q.abi?(0,o.encodeFunctionData)(Q):Q.data});return re.map(({address:de,storageKeys:le})=>le.length>0?de:null)})).then(Q=>Q.flat().filter(Boolean)):[],F=await(0,u.simulateBlocks)(f,{blockNumber:g,blockTag:h,blocks:[...S?[{calls:[{data:P}],stateOverrides:E},{calls:D.map((Q,re)=>({abi:[e.from("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[T.address],to:Q,from:n.zeroAddress,nonce:re})),stateOverrides:[{address:n.zeroAddress,nonce:0}]}]:[],{calls:[...y,{}].map(Q=>({...Q,from:T?.address})),stateOverrides:E},...S?[{calls:[{data:P}]},{calls:D.map((Q,re)=>({abi:[e.from("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[T.address],to:Q,from:n.zeroAddress,nonce:re})),stateOverrides:[{address:n.zeroAddress,nonce:0}]},{calls:D.map((Q,re)=>({to:Q,abi:[e.from("function decimals() returns (uint256)")],functionName:"decimals",from:n.zeroAddress,nonce:re})),stateOverrides:[{address:n.zeroAddress,nonce:0}]},{calls:D.map((Q,re)=>({to:Q,abi:[e.from("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:n.zeroAddress,nonce:re})),stateOverrides:[{address:n.zeroAddress,nonce:0}]},{calls:D.map((Q,re)=>({to:Q,abi:[e.from("function symbol() returns (string)")],functionName:"symbol",from:n.zeroAddress,nonce:re})),stateOverrides:[{address:n.zeroAddress,nonce:0}]}]:[]],traceTransfers:C,validation:_}),I=S?F[2]:F[0],[U,L,,B,A,m,b,w]=S?F:[],{calls:x,...M}=I,k=x.slice(0,-1)??[],j=U?.calls??[],N=L?.calls??[],v=[...j,...N].map(Q=>Q.status==="success"?(0,a.hexToBigInt)(Q.data):null),R=B?.calls??[],$=A?.calls??[],O=[...R,...$].map(Q=>Q.status==="success"?(0,a.hexToBigInt)(Q.data):null),H=(m?.calls??[]).map(Q=>Q.status==="success"?Q.result:null),W=(w?.calls??[]).map(Q=>Q.status==="success"?Q.result:null),G=(b?.calls??[]).map(Q=>Q.status==="success"?Q.result:null),K=[];for(const[Q,re]of O.entries()){const de=v[Q];if(typeof re!="bigint"||typeof de!="bigint")continue;const le=H[Q-1],se=W[Q-1],be=G[Q-1],We=Q===0?{address:n.ethAddress,decimals:18,symbol:"ETH"}:{address:D[Q-1],decimals:be||le?Number(le??1):void 0,symbol:se??void 0};K.some(Ne=>Ne.token.address===We.address)||K.push({token:We,value:{pre:de,post:re,diff:re-de}})}return{assetChanges:K,block:M,results:k}}return fC}var Jg={},Ww={},cR={},yV;function dMe(){return yV||(yV=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidWrappedSignatureError=t.universalSignatureValidatorAbi=t.universalSignatureValidatorBytecode=t.magicBytes=void 0,t.assert=s,t.from=i,t.unwrap=o,t.wrap=a,t.validate=c;const e=w_(),r=dc(),n=Fi();t.magicBytes="0x6492649264926492649264926492649264926492649264926492649264926492",t.universalSignatureValidatorBytecode="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",t.universalSignatureValidatorAbi=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function s(l){if(n.slice(l,-32)!==t.magicBytes)throw new u(l)}function i(l){return typeof l=="string"?o(l):l}function o(l){s(l);const[d,f,p]=e.decode(e.from("address, bytes, bytes"),l);return{data:f,signature:p,to:d}}function a(l){const{data:d,signature:f,to:p}=l;return n.concat(e.encode(e.from("address, bytes, bytes"),[p,d,f]),t.magicBytes)}function c(l){try{return s(l),!0}catch{return!1}}class u extends r.BaseError{constructor(d){super(`Value \`${d}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}t.InvalidWrappedSignatureError=u})(cR)),cR}var bV;function fMe(){return bV||(bV=1,Object.defineProperty(Ww,"__esModule",{value:!0}),Ww.SignatureErc6492=void 0,Ww.SignatureErc6492=dMe()),Ww}var hC={},wV;function wie(){if(wV)return hC;wV=1,Object.defineProperty(hC,"__esModule",{value:!0}),hC.serializeSignature=n;const t=og(),e=ys(),r=Pn();function n({r:s,s:i,to:o="hex",v:a,yParity:c}){const u=(()=>{if(c===0||c===1)return c;if(a&&(a===27n||a===28n||a>=35n))return a%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),l=`0x${new t.secp256k1.Signature((0,e.hexToBigInt)(s),(0,e.hexToBigInt)(i)).toCompactHex()}${u===0?"1b":"1c"}`;return o==="hex"?l:(0,r.hexToBytes)(l)}return hC}var vV;function WT(){if(vV)return Jg;vV=1,Object.defineProperty(Jg,"__esModule",{value:!0}),Jg.verifyHash=_,Jg.verifyErc8010=T,Jg.verifyErc1271=D;const t=fMe(),e=HT(),r=Jh(),n=l_(),s=Wh(),i=f_(),o=Ta(),a=lc(),c=Vu(),u=Lse(),l=fi(),d=$o(),f=ys(),p=tt(),g=kr(),h=Kh(),y=wie(),E=h_(),S=Use(),C=zl();async function _(I,U){const{address:L,hash:B,erc6492VerifierAddress:A=U.universalSignatureVerifierAddress??I.chain?.contracts?.erc6492Verifier?.address,multicallAddress:m=U.multicallAddress??I.chain?.contracts?.multicall3?.address}=U,b=(()=>{const w=U.signature;return(0,d.isHex)(w)?w:typeof w=="object"&&"r"in w&&"s"in w?(0,y.serializeSignature)(w):(0,p.bytesToHex)(w)})();try{return e.SignatureErc8010.validate(b)?await T(I,{...U,multicallAddress:m,signature:b}):await P(I,{...U,verifierAddress:A,signature:b})}catch(w){try{if((0,c.isAddressEqual)((0,a.getAddress)(L),await(0,h.recoverAddress)({hash:B,signature:b})))return!0}catch{}if(w instanceof F)return!1;throw w}}async function T(I,U){const{address:L,blockNumber:B,blockTag:A,hash:m,multicallAddress:b}=U,{authorization:w,data:x,signature:M,to:k}=e.SignatureErc8010.unwrap(U.signature);if(await(0,S.getCode)(I,{address:L,blockNumber:B,blockTag:A})===(0,l.concatHex)(["0xef0100",w.address]))return await D(I,{address:L,blockNumber:B,blockTag:A,hash:m,signature:M});const N={address:w.address,chainId:Number(w.chainId),nonce:Number(w.nonce),r:(0,p.numberToHex)(w.r,{size:32}),s:(0,p.numberToHex)(w.s,{size:32}),yParity:w.yParity};if(!await(0,u.verifyAuthorization)({address:L,authorization:N}))throw new F;const R=await(0,g.getAction)(I,C.readContract,"readContract")({...b?{address:b}:{code:n.multicall3Bytecode},authorizationList:[N],abi:r.multicall3Abi,blockNumber:B,blockTag:"pending",functionName:"aggregate3",args:[[...x?[{allowFailure:!0,target:k??L,callData:x}]:[],{allowFailure:!0,target:L,callData:(0,o.encodeFunctionData)({abi:r.erc1271Abi,functionName:"isValidSignature",args:[m,M]})}]]});if(R[R.length-1]?.returnData?.startsWith("0x1626ba7e"))return!0;throw new F}async function P(I,U){const{address:L,factory:B,factoryData:A,hash:m,signature:b,verifierAddress:w,...x}=U,M=await(async()=>!B&&!A||t.SignatureErc6492.validate(b)?b:t.SignatureErc6492.wrap({data:A,signature:b,to:B}))(),k=w?{to:w,data:(0,o.encodeFunctionData)({abi:r.erc6492SignatureValidatorAbi,functionName:"isValidSig",args:[L,m,M]}),...x}:{data:(0,i.encodeDeployData)({abi:r.erc6492SignatureValidatorAbi,args:[L,m,M],bytecode:n.erc6492SignatureValidatorByteCode}),...x},{data:j}=await(0,g.getAction)(I,E.call,"call")(k).catch(N=>{throw N instanceof s.CallExecutionError?new F:N});if((0,f.hexToBool)(j??"0x0"))return!0;throw new F}async function D(I,U){const{address:L,blockNumber:B,blockTag:A,hash:m,signature:b}=U;if((await(0,g.getAction)(I,C.readContract,"readContract")({address:L,abi:r.erc1271Abi,args:[m,b],blockNumber:B,blockTag:A,functionName:"isValidSignature"}).catch(x=>{throw x instanceof s.ContractFunctionExecutionError?new F:x})).startsWith("0x1626ba7e"))return!0;throw new F}class F extends Error{}return Jg}var pC={},EV;function hMe(){if(EV)return pC;EV=1,Object.defineProperty(pC,"__esModule",{value:!0}),pC.verifyMessage=n;const t=kr(),e=y_(),r=WT();async function n(s,{address:i,message:o,factory:a,factoryData:c,signature:u,...l}){const d=(0,e.hashMessage)(o);return(0,t.getAction)(s,r.verifyHash,"verifyHash")({address:i,factory:a,factoryData:c,hash:d,signature:u,...l})}return pC}var gC={},_V;function pMe(){if(_V)return gC;_V=1,Object.defineProperty(gC,"__esModule",{value:!0}),gC.verifyTypedData=n;const t=kr(),e=b_(),r=WT();async function n(s,i){const{address:o,factory:a,factoryData:c,signature:u,message:l,primaryType:d,types:f,domain:p,...g}=i,h=(0,e.hashTypedData)({message:l,primaryType:d,types:f,domain:p});return(0,t.getAction)(s,r.verifyHash,"verifyHash")({address:o,factory:a,factoryData:c,hash:h,signature:u,...g})}return gC}var mC={},yC={},AV;function vie(){if(AV)return yC;AV=1,Object.defineProperty(yC,"__esModule",{value:!0}),yC.watchBlockNumber=o;const t=ys(),e=kr(),r=cg(),n=tb(),s=Li(),i=p_();function o(a,{emitOnBegin:c=!1,emitMissed:u=!1,onBlockNumber:l,onError:d,poll:f,pollingInterval:p=a.pollingInterval}){const g=typeof f<"u"?f:!(a.transport.type==="webSocket"||a.transport.type==="ipc"||a.transport.type==="fallback"&&(a.transport.transports[0].config.type==="webSocket"||a.transport.transports[0].config.type==="ipc"));let h;return g?(()=>{const S=(0,s.stringify)(["watchBlockNumber",a.uid,c,u,p]);return(0,r.observe)(S,{onBlockNumber:l,onError:d},C=>(0,n.poll)(async()=>{try{const _=await(0,e.getAction)(a,i.getBlockNumber,"getBlockNumber")({cacheTime:0});if(h!==void 0){if(_===h)return;if(_-h>1&&u)for(let T=h+1n;T<_;T++)C.onBlockNumber(T,h),h=T}(h===void 0||_>h)&&(C.onBlockNumber(_,h),h=_)}catch(_){C.onError?.(_)}},{emitOnBegin:c,interval:p}))})():(()=>{const S=(0,s.stringify)(["watchBlockNumber",a.uid,c,u]);return(0,r.observe)(S,{onBlockNumber:l,onError:d},C=>{let _=!0,T=()=>_=!1;return(async()=>{try{const P=(()=>{if(a.transport.type==="fallback"){const F=a.transport.transports.find(I=>I.config.type==="webSocket"||I.config.type==="ipc");return F?F.value:a.transport}return a.transport})(),{unsubscribe:D}=await P.subscribe({params:["newHeads"],onData(F){if(!_)return;const I=(0,t.hexToBigInt)(F.result?.number);C.onBlockNumber(I,h),h=I},onError(F){C.onError?.(F)}});T=D,_||T()}catch(P){d?.(P)}})(),()=>T()})})()}return yC}var xV;function Eie(){if(xV)return mC;xV=1,Object.defineProperty(mC,"__esModule",{value:!0}),mC.waitForTransactionReceipt=d;const t=EB(),e=Na(),r=kr(),n=cg(),s=RB(),i=DT(),o=Li(),a=ag(),c=u9(),u=gie(),l=vie();async function d(f,p){const{checkReplacement:g=!0,confirmations:h=1,hash:y,onReplaced:E,retryCount:S=6,retryDelay:C=({count:x})=>~~(1<<x)*200,timeout:_=18e4}=p,T=(0,o.stringify)(["waitForTransactionReceipt",f.uid,y]),P=p.pollingInterval?p.pollingInterval:f.chain?.experimental_preconfirmationTime?f.chain.experimental_preconfirmationTime:f.pollingInterval;let D,F,I,U=!1,L,B;const{promise:A,resolve:m,reject:b}=(0,s.withResolvers)(),w=_?setTimeout(()=>{B?.(),L?.(),b(new e.WaitForTransactionReceiptTimeoutError({hash:y}))},_):void 0;return L=(0,n.observe)(T,{onReplaced:E,resolve:m,reject:b},async x=>{if(I=await(0,r.getAction)(f,u.getTransactionReceipt,"getTransactionReceipt")({hash:y}).catch(()=>{}),I&&h<=1){clearTimeout(w),x.resolve(I),L?.();return}B=(0,r.getAction)(f,l.watchBlockNumber,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:P,async onBlockNumber(M){const k=N=>{clearTimeout(w),B?.(),N(),L?.()};let j=M;if(!U)try{if(I){if(h>1&&(!I.blockNumber||j-I.blockNumber+1n<h))return;k(()=>x.resolve(I));return}if(g&&!D&&(U=!0,await(0,i.withRetry)(async()=>{D=await(0,r.getAction)(f,c.getTransaction,"getTransaction")({hash:y}),D.blockNumber&&(j=D.blockNumber)},{delay:C,retryCount:S}),U=!1),I=await(0,r.getAction)(f,u.getTransactionReceipt,"getTransactionReceipt")({hash:y}),h>1&&(!I.blockNumber||j-I.blockNumber+1n<h))return;k(()=>x.resolve(I))}catch(N){if(N instanceof e.TransactionNotFoundError||N instanceof e.TransactionReceiptNotFoundError){if(!D){U=!1;return}try{F=D,U=!0;const v=await(0,i.withRetry)(()=>(0,r.getAction)(f,a.getBlock,"getBlock")({blockNumber:j,includeTransactions:!0}),{delay:C,retryCount:S,shouldRetry:({error:O})=>O instanceof t.BlockNotFoundError});U=!1;const R=v.transactions.find(({from:O,nonce:H})=>O===F.from&&H===F.nonce);if(!R||(I=await(0,r.getAction)(f,u.getTransactionReceipt,"getTransactionReceipt")({hash:R.hash}),h>1&&(!I.blockNumber||j-I.blockNumber+1n<h)))return;let $="replaced";R.to===F.to&&R.value===F.value&&R.input===F.input?$="repriced":R.from===R.to&&R.value===0n&&($="cancelled"),k(()=>{x.onReplaced?.({reason:$,replacedTransaction:F,transaction:R,transactionReceipt:I}),x.resolve(I)})}catch(v){k(()=>x.reject(v))}}else k(()=>x.reject(N))}}})}),A}return mC}var bC={},CV;function gMe(){if(CV)return bC;CV=1,Object.defineProperty(bC,"__esModule",{value:!0}),bC.watchBlocks=i;const t=kr(),e=cg(),r=tb(),n=Li(),s=ag();function i(o,{blockTag:a=o.experimental_blockTag??"latest",emitMissed:c=!1,emitOnBegin:u=!1,onBlock:l,onError:d,includeTransactions:f,poll:p,pollingInterval:g=o.pollingInterval}){const h=typeof p<"u"?p:!(o.transport.type==="webSocket"||o.transport.type==="ipc"||o.transport.type==="fallback"&&(o.transport.transports[0].config.type==="webSocket"||o.transport.transports[0].config.type==="ipc")),y=f??!1;let E;return h?(()=>{const _=(0,n.stringify)(["watchBlocks",o.uid,a,c,u,y,g]);return(0,e.observe)(_,{onBlock:l,onError:d},T=>(0,r.poll)(async()=>{try{const P=await(0,t.getAction)(o,s.getBlock,"getBlock")({blockTag:a,includeTransactions:y});if(P.number!==null&&E?.number!=null){if(P.number===E.number)return;if(P.number-E.number>1&&c)for(let D=E?.number+1n;D<P.number;D++){const F=await(0,t.getAction)(o,s.getBlock,"getBlock")({blockNumber:D,includeTransactions:y});T.onBlock(F,E),E=F}}(E?.number==null||a==="pending"&&P?.number==null||P.number!==null&&P.number>E.number)&&(T.onBlock(P,E),E=P)}catch(P){T.onError?.(P)}},{emitOnBegin:u,interval:g}))})():(()=>{let _=!0,T=!0,P=()=>_=!1;return(async()=>{try{u&&(0,t.getAction)(o,s.getBlock,"getBlock")({blockTag:a,includeTransactions:y}).then(I=>{_&&T&&(l(I,void 0),T=!1)}).catch(d);const D=(()=>{if(o.transport.type==="fallback"){const I=o.transport.transports.find(U=>U.config.type==="webSocket"||U.config.type==="ipc");return I?I.value:o.transport}return o.transport})(),{unsubscribe:F}=await D.subscribe({params:["newHeads"],async onData(I){if(!_)return;const U=await(0,t.getAction)(o,s.getBlock,"getBlock")({blockNumber:I.result?.number,includeTransactions:y}).catch(()=>{});_&&(l(U,E),T=!1,E=U)},onError(I){d?.(I)}});P=F,_||P()}catch(D){d?.(D)}})(),()=>P()})()}return bC}var wC={},SV;function mMe(){if(SV)return wC;SV=1,Object.defineProperty(wC,"__esModule",{value:!0}),wC.watchEvent=g;const t=Jn(),e=Vh(),r=c_(),n=ng(),s=lf(),i=kr(),o=cg(),a=tb(),c=Li(),u=kse(),l=p_(),d=BT(),f=TB(),p=UT();function g(h,{address:y,args:E,batch:S=!0,event:C,events:_,fromBlock:T,onError:P,onLogs:D,poll:F,pollingInterval:I=h.pollingInterval,strict:U}){const L=typeof F<"u"?F:typeof T=="bigint"?!0:!(h.transport.type==="webSocket"||h.transport.type==="ipc"||h.transport.type==="fallback"&&(h.transport.transports[0].config.type==="webSocket"||h.transport.transports[0].config.type==="ipc")),B=U??!1;return L?(()=>{const b=(0,c.stringify)(["watchEvent",y,E,S,h.uid,C,I,T]);return(0,o.observe)(b,{onLogs:D,onError:P},w=>{let x;T!==void 0&&(x=T-1n);let M,k=!1;const j=(0,a.poll)(async()=>{if(!k){try{M=await(0,i.getAction)(h,u.createEventFilter,"createEventFilter")({address:y,args:E,event:C,events:_,strict:B,fromBlock:T})}catch{}k=!0;return}try{let N;if(M)N=await(0,i.getAction)(h,d.getFilterChanges,"getFilterChanges")({filter:M});else{const v=await(0,i.getAction)(h,l.getBlockNumber,"getBlockNumber")({});x&&x!==v?N=await(0,i.getAction)(h,f.getLogs,"getLogs")({address:y,args:E,event:C,events:_,fromBlock:x+1n,toBlock:v}):N=[],x=v}if(N.length===0)return;if(S)w.onLogs(N);else for(const v of N)w.onLogs([v])}catch(N){M&&N instanceof e.InvalidInputRpcError&&(k=!1),w.onError?.(N)}},{emitOnBegin:!0,interval:I});return async()=>{M&&await(0,i.getAction)(h,p.uninstallFilter,"uninstallFilter")({filter:M}),j()}})})():(()=>{let b=!0,w=()=>b=!1;return(async()=>{try{const x=(()=>{if(h.transport.type==="fallback"){const N=h.transport.transports.find(v=>v.config.type==="webSocket"||v.config.type==="ipc");return N?N.value:h.transport}return h.transport})(),M=_??(C?[C]:void 0);let k=[];M&&(k=[M.flatMap(v=>(0,n.encodeEventTopics)({abi:[v],eventName:v.name,args:E}))],C&&(k=k[0]));const{unsubscribe:j}=await x.subscribe({params:["logs",{address:y,topics:k}],onData(N){if(!b)return;const v=N.result;try{const{eventName:R,args:$}=(0,r.decodeEventLog)({abi:M??[],data:v.data,topics:v.topics,strict:B}),O=(0,s.formatLog)(v,{args:$,eventName:R});D([O])}catch(R){let $,O;if(R instanceof t.DecodeLogDataMismatch||R instanceof t.DecodeLogTopicsMismatch){if(U)return;$=R.abiItem.name,O=R.abiItem.inputs?.some(W=>!("name"in W&&W.name))}const H=(0,s.formatLog)(v,{args:O?[]:{},eventName:$});D([H])}},onError(N){P?.(N)}});w=j,b||w()}catch(x){P?.(x)}})(),()=>w()})()}return wC}var vC={},IV;function yMe(){if(IV)return vC;IV=1,Object.defineProperty(vC,"__esModule",{value:!0}),vC.watchPendingTransactions=a;const t=kr(),e=cg(),r=tb(),n=Li(),s=Bse(),i=BT(),o=UT();function a(c,{batch:u=!0,onError:l,onTransactions:d,poll:f,pollingInterval:p=c.pollingInterval}){return(typeof f<"u"?f:c.transport.type!=="webSocket"&&c.transport.type!=="ipc")?(()=>{const E=(0,n.stringify)(["watchPendingTransactions",c.uid,u,p]);return(0,e.observe)(E,{onTransactions:d,onError:l},S=>{let C;const _=(0,r.poll)(async()=>{try{if(!C)try{C=await(0,t.getAction)(c,s.createPendingTransactionFilter,"createPendingTransactionFilter")({});return}catch(P){throw _(),P}const T=await(0,t.getAction)(c,i.getFilterChanges,"getFilterChanges")({filter:C});if(T.length===0)return;if(u)S.onTransactions(T);else for(const P of T)S.onTransactions([P])}catch(T){S.onError?.(T)}},{emitOnBegin:!0,interval:p});return async()=>{C&&await(0,t.getAction)(c,o.uninstallFilter,"uninstallFilter")({filter:C}),_()}})})():(()=>{let E=!0,S=()=>E=!1;return(async()=>{try{const{unsubscribe:C}=await c.transport.subscribe({params:["newPendingTransactions"],onData(_){if(!E)return;const T=_.result;d([T])},onError(_){l?.(_)}});S=C,E||S()}catch(C){l?.(C)}})(),()=>S()})()}return vC}var EC={},_C={},TV;function bMe(){if(TV)return _C;TV=1,Object.defineProperty(_C,"__esModule",{value:!0}),_C.parseSiweMessage=t;function t(n){const{scheme:s,statement:i,...o}=n.match(e)?.groups??{},{chainId:a,expirationTime:c,issuedAt:u,notBefore:l,requestId:d,...f}=n.match(r)?.groups??{},p=n.split("Resources:")[1]?.split(`
- `).slice(1);return{...o,...f,...a?{chainId:Number(a)}:{},...c?{expirationTime:new Date(c)}:{},...u?{issuedAt:new Date(u)}:{},...l?{notBefore:new Date(l)}:{},...d?{requestId:d}:{},...p?{resources:p}:{},...s?{scheme:s}:{},...i?{statement:i}:{}}}const e=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,r=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;return _C}var AC={},NV;function wMe(){if(NV)return AC;NV=1,Object.defineProperty(AC,"__esModule",{value:!0}),AC.validateSiweMessage=r;const t=Ia(),e=Vu();function r(n){const{address:s,domain:i,message:o,nonce:a,scheme:c,time:u=new Date}=n;if(i&&o.domain!==i||a&&o.nonce!==a||c&&o.scheme!==c||o.expirationTime&&u>=o.expirationTime||o.notBefore&&u<o.notBefore)return!1;try{if(!o.address||!(0,t.isAddress)(o.address,{strict:!1})||s&&!(0,e.isAddressEqual)(o.address,s))return!1}catch{return!1}return!0}return AC}var PV;function vMe(){if(PV)return EC;PV=1,Object.defineProperty(EC,"__esModule",{value:!0}),EC.verifySiweMessage=s;const t=y_(),e=bMe(),r=wMe(),n=WT();async function s(i,o){const{address:a,domain:c,message:u,nonce:l,scheme:d,signature:f,time:p=new Date,...g}=o,h=(0,e.parseSiweMessage)(u);if(!h.address||!(0,r.validateSiweMessage)({address:a,domain:c,message:h,nonce:l,scheme:d,time:p}))return!1;const E=(0,t.hashMessage)(u);return(0,n.verifyHash)(i,{address:h.address,hash:E,signature:f,...g})}return EC}var xC={},RV;function l9(){if(RV)return xC;RV=1,Object.defineProperty(xC,"__esModule",{value:!0}),xC.sendRawTransactionSync=n;const t=Na(),e=m_(),r=c9();async function n(s,{serializedTransaction:i,throwOnReceiptRevert:o,timeout:a}){const c=await s.request({method:"eth_sendRawTransactionSync",params:a?[i,(0,r.numberToHex)(a)]:[i]},{retryCount:0}),l=(s.chain?.formatters?.transactionReceipt?.format||e.formatTransactionReceipt)(c);if(l.status==="reverted"&&o)throw new t.TransactionReceiptRevertedError({receipt:l});return l}return xC}var OV;function _ie(){if(OV)return nx;OV=1,Object.defineProperty(nx,"__esModule",{value:!0}),nx.publicActions=At;const t=IUe(),e=PUe(),r=RUe(),n=OUe(),s=Rse(),i=h_(),o=Ose(),a=kUe(),c=hB(),u=kse(),l=Bse(),d=wse(),f=pse(),p=IB(),g=hse(),h=SB(),y=BUe(),E=UUe(),S=ag(),C=p_(),_=MUe(),T=Yh(),P=Use(),D=NB(),F=jUe(),I=FUe(),U=BT(),L=$Ue(),B=_B(),A=TB(),m=nMe(),b=sMe(),w=u9(),x=iMe(),M=IT(),k=gie(),j=oMe(),N=zl(),v=mie(),R=lMe(),$=Ase(),O=UT(),H=WT(),W=hMe(),G=pMe(),K=Eie(),Q=vie(),re=gMe(),de=Cse(),le=mMe(),se=yMe(),be=vMe(),We=a_(),Ne=jB(),Be=l9();function At(Ee){return{call:fe=>(0,i.call)(Ee,fe),createAccessList:fe=>(0,o.createAccessList)(Ee,fe),createBlockFilter:()=>(0,a.createBlockFilter)(Ee),createContractEventFilter:fe=>(0,c.createContractEventFilter)(Ee,fe),createEventFilter:fe=>(0,u.createEventFilter)(Ee,fe),createPendingTransactionFilter:()=>(0,l.createPendingTransactionFilter)(Ee),estimateContractGas:fe=>(0,d.estimateContractGas)(Ee,fe),estimateGas:fe=>(0,p.estimateGas)(Ee,fe),getBalance:fe=>(0,y.getBalance)(Ee,fe),getBlobBaseFee:()=>(0,E.getBlobBaseFee)(Ee),getBlock:fe=>(0,S.getBlock)(Ee,fe),getBlockNumber:fe=>(0,C.getBlockNumber)(Ee,fe),getBlockTransactionCount:fe=>(0,_.getBlockTransactionCount)(Ee,fe),getBytecode:fe=>(0,P.getCode)(Ee,fe),getChainId:()=>(0,T.getChainId)(Ee),getCode:fe=>(0,P.getCode)(Ee,fe),getContractEvents:fe=>(0,D.getContractEvents)(Ee,fe),getEip712Domain:fe=>(0,F.getEip712Domain)(Ee,fe),getEnsAddress:fe=>(0,t.getEnsAddress)(Ee,fe),getEnsAvatar:fe=>(0,e.getEnsAvatar)(Ee,fe),getEnsName:fe=>(0,r.getEnsName)(Ee,fe),getEnsResolver:fe=>(0,n.getEnsResolver)(Ee,fe),getEnsText:fe=>(0,s.getEnsText)(Ee,fe),getFeeHistory:fe=>(0,I.getFeeHistory)(Ee,fe),estimateFeesPerGas:fe=>(0,f.estimateFeesPerGas)(Ee,fe),getFilterChanges:fe=>(0,U.getFilterChanges)(Ee,fe),getFilterLogs:fe=>(0,L.getFilterLogs)(Ee,fe),getGasPrice:()=>(0,B.getGasPrice)(Ee),getLogs:fe=>(0,A.getLogs)(Ee,fe),getProof:fe=>(0,m.getProof)(Ee,fe),estimateMaxPriorityFeePerGas:fe=>(0,g.estimateMaxPriorityFeePerGas)(Ee,fe),fillTransaction:fe=>(0,h.fillTransaction)(Ee,fe),getStorageAt:fe=>(0,b.getStorageAt)(Ee,fe),getTransaction:fe=>(0,w.getTransaction)(Ee,fe),getTransactionConfirmations:fe=>(0,x.getTransactionConfirmations)(Ee,fe),getTransactionCount:fe=>(0,M.getTransactionCount)(Ee,fe),getTransactionReceipt:fe=>(0,k.getTransactionReceipt)(Ee,fe),multicall:fe=>(0,j.multicall)(Ee,fe),prepareTransactionRequest:fe=>(0,We.prepareTransactionRequest)(Ee,fe),readContract:fe=>(0,N.readContract)(Ee,fe),sendRawTransaction:fe=>(0,Ne.sendRawTransaction)(Ee,fe),sendRawTransactionSync:fe=>(0,Be.sendRawTransactionSync)(Ee,fe),simulate:fe=>(0,v.simulateBlocks)(Ee,fe),simulateBlocks:fe=>(0,v.simulateBlocks)(Ee,fe),simulateCalls:fe=>(0,R.simulateCalls)(Ee,fe),simulateContract:fe=>(0,$.simulateContract)(Ee,fe),verifyHash:fe=>(0,H.verifyHash)(Ee,fe),verifyMessage:fe=>(0,W.verifyMessage)(Ee,fe),verifySiweMessage:fe=>(0,be.verifySiweMessage)(Ee,fe),verifyTypedData:fe=>(0,G.verifyTypedData)(Ee,fe),uninstallFilter:fe=>(0,O.uninstallFilter)(Ee,fe),waitForTransactionReceipt:fe=>(0,K.waitForTransactionReceipt)(Ee,fe),watchBlocks:fe=>(0,re.watchBlocks)(Ee,fe),watchBlockNumber:fe=>(0,Q.watchBlockNumber)(Ee,fe),watchContractEvent:fe=>(0,de.watchContractEvent)(Ee,fe),watchEvent:fe=>(0,le.watchEvent)(Ee,fe),watchPendingTransactions:fe=>(0,se.watchPendingTransactions)(Ee,fe)}}return nx}var kV;function EMe(){if(kV)return rx;kV=1,Object.defineProperty(rx,"__esModule",{value:!0}),rx.createPublicClient=r;const t=jT(),e=_ie();function r(n){const{key:s="public",name:i="Public Client"}=n;return(0,t.createClient)({...n,key:s,name:i,type:"publicClient"}).extend(e.publicActions)}return rx}var CC={},SC={},IC={},BV;function _Me(){if(BV)return IC;BV=1,Object.defineProperty(IC,"__esModule",{value:!0}),IC.dropTransaction=t;async function t(e,{hash:r}){await e.request({method:`${e.mode}_dropTransaction`,params:[r]})}return IC}var TC={},UV;function AMe(){if(UV)return TC;UV=1,Object.defineProperty(TC,"__esModule",{value:!0}),TC.dumpState=t;async function t(e){return e.request({method:`${e.mode}_dumpState`})}return TC}var NC={},MV;function xMe(){if(MV)return NC;MV=1,Object.defineProperty(NC,"__esModule",{value:!0}),NC.getAutomine=t;async function t(e){return e.mode==="ganache"?await e.request({method:"eth_mining"}):await e.request({method:`${e.mode}_getAutomine`})}return NC}var PC={},DV;function CMe(){if(DV)return PC;DV=1,Object.defineProperty(PC,"__esModule",{value:!0}),PC.getTxpoolContent=t;async function t(e){return await e.request({method:"txpool_content"})}return PC}var RC={},jV;function SMe(){if(jV)return RC;jV=1,Object.defineProperty(RC,"__esModule",{value:!0}),RC.getTxpoolStatus=e;const t=ys();async function e(r){const{pending:n,queued:s}=await r.request({method:"txpool_status"});return{pending:(0,t.hexToNumber)(n),queued:(0,t.hexToNumber)(s)}}return RC}var OC={},LV;function IMe(){if(LV)return OC;LV=1,Object.defineProperty(OC,"__esModule",{value:!0}),OC.impersonateAccount=t;async function t(e,{address:r}){await e.request({method:`${e.mode}_impersonateAccount`,params:[r]})}return OC}var kC={},FV;function TMe(){if(FV)return kC;FV=1,Object.defineProperty(kC,"__esModule",{value:!0}),kC.increaseTime=e;const t=tt();async function e(r,{seconds:n}){return await r.request({method:"evm_increaseTime",params:[(0,t.numberToHex)(n)]})}return kC}var BC={},$V;function NMe(){if($V)return BC;$V=1,Object.defineProperty(BC,"__esModule",{value:!0}),BC.inspectTxpool=t;async function t(e){return await e.request({method:"txpool_inspect"})}return BC}var UC={},qV;function PMe(){if(qV)return UC;qV=1,Object.defineProperty(UC,"__esModule",{value:!0}),UC.loadState=t;async function t(e,{state:r}){await e.request({method:`${e.mode}_loadState`,params:[r]})}return UC}var MC={},HV;function RMe(){if(HV)return MC;HV=1,Object.defineProperty(MC,"__esModule",{value:!0}),MC.mine=e;const t=tt();async function e(r,{blocks:n,interval:s}){r.mode==="ganache"?await r.request({method:"evm_mine",params:[{blocks:(0,t.numberToHex)(n)}]}):await r.request({method:`${r.mode}_mine`,params:[(0,t.numberToHex)(n),(0,t.numberToHex)(s||0)]})}return MC}var DC={},zV;function OMe(){if(zV)return DC;zV=1,Object.defineProperty(DC,"__esModule",{value:!0}),DC.removeBlockTimestampInterval=t;async function t(e){await e.request({method:`${e.mode}_removeBlockTimestampInterval`})}return DC}var jC={},WV;function kMe(){if(WV)return jC;WV=1,Object.defineProperty(jC,"__esModule",{value:!0}),jC.reset=t;async function t(e,{blockNumber:r,jsonRpcUrl:n}={}){await e.request({method:`${e.mode}_reset`,params:[{forking:{blockNumber:Number(r),jsonRpcUrl:n}}]})}return jC}var LC={},VV;function BMe(){if(VV)return LC;VV=1,Object.defineProperty(LC,"__esModule",{value:!0}),LC.revert=t;async function t(e,{id:r}){await e.request({method:"evm_revert",params:[r]})}return LC}var FC={},GV;function UMe(){if(GV)return FC;GV=1,Object.defineProperty(FC,"__esModule",{value:!0}),FC.sendUnsignedTransaction=r;const t=Zh(),e=zu();async function r(n,s){const{accessList:i,data:o,from:a,gas:c,gasPrice:u,maxFeePerGas:l,maxPriorityFeePerGas:d,nonce:f,to:p,value:g,...h}=s,y=n.chain?.formatters?.transactionRequest?.format,S=(y||e.formatTransactionRequest)({...(0,t.extract)(h,{format:y}),accessList:i,data:o,from:a,gas:c,gasPrice:u,maxFeePerGas:l,maxPriorityFeePerGas:d,nonce:f,to:p,value:g},"sendUnsignedTransaction");return await n.request({method:"eth_sendUnsignedTransaction",params:[S]})}return FC}var $C={},KV;function MMe(){if(KV)return $C;KV=1,Object.defineProperty($C,"__esModule",{value:!0}),$C.setAutomine=t;async function t(e,r){e.mode==="ganache"?r?await e.request({method:"miner_start"}):await e.request({method:"miner_stop"}):await e.request({method:"evm_setAutomine",params:[r]})}return $C}var qC={},ZV;function DMe(){if(ZV)return qC;ZV=1,Object.defineProperty(qC,"__esModule",{value:!0}),qC.setBalance=e;const t=tt();async function e(r,{address:n,value:s}){r.mode==="ganache"?await r.request({method:"evm_setAccountBalance",params:[n,(0,t.numberToHex)(s)]}):await r.request({method:`${r.mode}_setBalance`,params:[n,(0,t.numberToHex)(s)]})}return qC}var HC={},YV;function jMe(){if(YV)return HC;YV=1,Object.defineProperty(HC,"__esModule",{value:!0}),HC.setBlockGasLimit=e;const t=tt();async function e(r,{gasLimit:n}){await r.request({method:"evm_setBlockGasLimit",params:[(0,t.numberToHex)(n)]})}return HC}var zC={},JV;function LMe(){if(JV)return zC;JV=1,Object.defineProperty(zC,"__esModule",{value:!0}),zC.setBlockTimestampInterval=t;async function t(e,{interval:r}){const n=e.mode==="hardhat"?r*1e3:r;await e.request({method:`${e.mode}_setBlockTimestampInterval`,params:[n]})}return zC}var WC={},XV;function FMe(){if(XV)return WC;XV=1,Object.defineProperty(WC,"__esModule",{value:!0}),WC.setCode=t;async function t(e,{address:r,bytecode:n}){e.mode==="ganache"?await e.request({method:"evm_setAccountCode",params:[r,n]}):await e.request({method:`${e.mode}_setCode`,params:[r,n]})}return WC}var VC={},QV;function $Me(){if(QV)return VC;QV=1,Object.defineProperty(VC,"__esModule",{value:!0}),VC.setCoinbase=t;async function t(e,{address:r}){await e.request({method:`${e.mode}_setCoinbase`,params:[r]})}return VC}var GC={},eG;function qMe(){if(eG)return GC;eG=1,Object.defineProperty(GC,"__esModule",{value:!0}),GC.setIntervalMining=t;async function t(e,{interval:r}){const n=e.mode==="hardhat"?r*1e3:r;await e.request({method:"evm_setIntervalMining",params:[n]})}return GC}var KC={},tG;function HMe(){if(tG)return KC;tG=1,Object.defineProperty(KC,"__esModule",{value:!0}),KC.setLoggingEnabled=t;async function t(e,r){await e.request({method:`${e.mode}_setLoggingEnabled`,params:[r]})}return KC}var ZC={},rG;function zMe(){if(rG)return ZC;rG=1,Object.defineProperty(ZC,"__esModule",{value:!0}),ZC.setMinGasPrice=e;const t=tt();async function e(r,{gasPrice:n}){await r.request({method:`${r.mode}_setMinGasPrice`,params:[(0,t.numberToHex)(n)]})}return ZC}var YC={},nG;function WMe(){if(nG)return YC;nG=1,Object.defineProperty(YC,"__esModule",{value:!0}),YC.setNextBlockBaseFeePerGas=e;const t=tt();async function e(r,{baseFeePerGas:n}){await r.request({method:`${r.mode}_setNextBlockBaseFeePerGas`,params:[(0,t.numberToHex)(n)]})}return YC}var JC={},sG;function VMe(){if(sG)return JC;sG=1,Object.defineProperty(JC,"__esModule",{value:!0}),JC.setNextBlockTimestamp=e;const t=tt();async function e(r,{timestamp:n}){await r.request({method:"evm_setNextBlockTimestamp",params:[(0,t.numberToHex)(n)]})}return JC}var XC={},iG;function GMe(){if(iG)return XC;iG=1,Object.defineProperty(XC,"__esModule",{value:!0}),XC.setNonce=e;const t=tt();async function e(r,{address:n,nonce:s}){await r.request({method:`${r.mode}_setNonce`,params:[n,(0,t.numberToHex)(s)]})}return XC}var QC={},oG;function KMe(){if(oG)return QC;oG=1,Object.defineProperty(QC,"__esModule",{value:!0}),QC.setRpcUrl=t;async function t(e,r){await e.request({method:`${e.mode}_setRpcUrl`,params:[r]})}return QC}var eS={},aG;function ZMe(){if(aG)return eS;aG=1,Object.defineProperty(eS,"__esModule",{value:!0}),eS.setStorageAt=e;const t=tt();async function e(r,{address:n,index:s,value:i}){await r.request({method:`${r.mode}_setStorageAt`,params:[n,typeof s=="number"?(0,t.numberToHex)(s):s,i]})}return eS}var tS={},cG;function YMe(){if(cG)return tS;cG=1,Object.defineProperty(tS,"__esModule",{value:!0}),tS.snapshot=t;async function t(e){return await e.request({method:"evm_snapshot"})}return tS}var rS={},uG;function JMe(){if(uG)return rS;uG=1,Object.defineProperty(rS,"__esModule",{value:!0}),rS.stopImpersonatingAccount=t;async function t(e,{address:r}){await e.request({method:`${e.mode}_stopImpersonatingAccount`,params:[r]})}return rS}var lG;function Aie(){if(lG)return SC;lG=1,Object.defineProperty(SC,"__esModule",{value:!0}),SC.testActions=m;const t=_Me(),e=AMe(),r=xMe(),n=CMe(),s=SMe(),i=IMe(),o=TMe(),a=NMe(),c=PMe(),u=RMe(),l=OMe(),d=kMe(),f=BMe(),p=UMe(),g=MMe(),h=DMe(),y=jMe(),E=LMe(),S=FMe(),C=$Me(),_=qMe(),T=HMe(),P=zMe(),D=WMe(),F=VMe(),I=GMe(),U=KMe(),L=ZMe(),B=YMe(),A=JMe();function m({mode:b}){return w=>{const x=w.extend(()=>({mode:b}));return{dropTransaction:M=>(0,t.dropTransaction)(x,M),dumpState:()=>(0,e.dumpState)(x),getAutomine:()=>(0,r.getAutomine)(x),getTxpoolContent:()=>(0,n.getTxpoolContent)(x),getTxpoolStatus:()=>(0,s.getTxpoolStatus)(x),impersonateAccount:M=>(0,i.impersonateAccount)(x,M),increaseTime:M=>(0,o.increaseTime)(x,M),inspectTxpool:()=>(0,a.inspectTxpool)(x),loadState:M=>(0,c.loadState)(x,M),mine:M=>(0,u.mine)(x,M),removeBlockTimestampInterval:()=>(0,l.removeBlockTimestampInterval)(x),reset:M=>(0,d.reset)(x,M),revert:M=>(0,f.revert)(x,M),sendUnsignedTransaction:M=>(0,p.sendUnsignedTransaction)(x,M),setAutomine:M=>(0,g.setAutomine)(x,M),setBalance:M=>(0,h.setBalance)(x,M),setBlockGasLimit:M=>(0,y.setBlockGasLimit)(x,M),setBlockTimestampInterval:M=>(0,E.setBlockTimestampInterval)(x,M),setCode:M=>(0,S.setCode)(x,M),setCoinbase:M=>(0,C.setCoinbase)(x,M),setIntervalMining:M=>(0,_.setIntervalMining)(x,M),setLoggingEnabled:M=>(0,T.setLoggingEnabled)(x,M),setMinGasPrice:M=>(0,P.setMinGasPrice)(x,M),setNextBlockBaseFeePerGas:M=>(0,D.setNextBlockBaseFeePerGas)(x,M),setNextBlockTimestamp:M=>(0,F.setNextBlockTimestamp)(x,M),setNonce:M=>(0,I.setNonce)(x,M),setRpcUrl:M=>(0,U.setRpcUrl)(x,M),setStorageAt:M=>(0,L.setStorageAt)(x,M),snapshot:()=>(0,B.snapshot)(x),stopImpersonatingAccount:M=>(0,A.stopImpersonatingAccount)(x,M)}}}return SC}var dG;function XMe(){if(dG)return CC;dG=1,Object.defineProperty(CC,"__esModule",{value:!0}),CC.createTestClient=r;const t=jT(),e=Aie();function r(n){const{key:s="test",name:i="Test Client",mode:o}=n;return(0,t.createClient)({...n,key:s,name:i,type:"testClient"}).extend(c=>({mode:o,...(0,e.testActions)({mode:o})(c)}))}return CC}var nS={},sS={},iS={},fG;function QMe(){if(fG)return iS;fG=1,Object.defineProperty(iS,"__esModule",{value:!0}),iS.addChain=e;const t=tt();async function e(r,{chain:n}){const{id:s,name:i,nativeCurrency:o,rpcUrls:a,blockExplorers:c}=n;await r.request({method:"wallet_addEthereumChain",params:[{chainId:(0,t.numberToHex)(s),chainName:i,nativeCurrency:o,rpcUrls:a.default.http,blockExplorerUrls:c?Object.values(c).map(({url:u})=>u):void 0}]},{dedupe:!0,retryCount:0})}return iS}var oS={},hG;function e7e(){if(hG)return oS;hG=1,Object.defineProperty(oS,"__esModule",{value:!0}),oS.deployContract=r;const t=f_(),e=MT();function r(n,s){const{abi:i,args:o,bytecode:a,...c}=s,u=(0,t.encodeDeployData)({abi:i,args:o,bytecode:a});return(0,e.sendTransaction)(n,{...c,...c.authorizationList?{to:null}:{},data:u})}return oS}var aS={},pG;function t7e(){if(pG)return aS;pG=1,Object.defineProperty(aS,"__esModule",{value:!0}),aS.getAddresses=e;const t=lc();async function e(r){return r.account?.type==="local"?[r.account.address]:(await r.request({method:"eth_accounts"},{dedupe:!0})).map(s=>(0,t.checksumAddress)(s))}return aS}var cS={},gG;function r7e(){if(gG)return cS;gG=1,Object.defineProperty(cS,"__esModule",{value:!0}),cS.getCapabilities=r;const t=is(),e=tt();async function r(n,s={}){const{account:i=n.account,chainId:o}=s,a=i?(0,t.parseAccount)(i):void 0,c=o?[a?.address,[(0,e.numberToHex)(o)]]:[a?.address],u=await n.request({method:"wallet_getCapabilities",params:c}),l={};for(const[d,f]of Object.entries(u)){l[Number(d)]={};for(let[p,g]of Object.entries(f))p==="addSubAccount"&&(p="unstable_addSubAccount"),l[Number(d)][p]=g}return typeof o=="number"?l[o]:l}return cS}var uS={},mG;function n7e(){if(mG)return uS;mG=1,Object.defineProperty(uS,"__esModule",{value:!0}),uS.getPermissions=t;async function t(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}return uS}var lS={},yG;function xie(){if(yG)return lS;yG=1,Object.defineProperty(lS,"__esModule",{value:!0}),lS.prepareAuthorization=o;const t=is(),e=Qh(),r=Vu(),n=kr(),s=Yh(),i=IT();async function o(a,c){const{account:u=a.account,chainId:l,nonce:d}=c;if(!u)throw new e.AccountNotFoundError({docsPath:"/docs/eip7702/prepareAuthorization"});const f=(0,t.parseAccount)(u),p=(()=>{if(c.executor)return c.executor==="self"?c.executor:(0,t.parseAccount)(c.executor)})(),g={address:c.contractAddress??c.address,chainId:l,nonce:d};return typeof g.chainId>"u"&&(g.chainId=a.chain?.id??await(0,n.getAction)(a,s.getChainId,"getChainId")({})),typeof g.nonce>"u"&&(g.nonce=await(0,n.getAction)(a,i.getTransactionCount,"getTransactionCount")({address:f.address,blockTag:"pending"}),(p==="self"||p?.address&&(0,r.isAddressEqual)(p.address,f.address))&&(g.nonce+=1)),g}return lS}var dS={},bG;function s7e(){if(bG)return dS;bG=1,Object.defineProperty(dS,"__esModule",{value:!0}),dS.requestAddresses=e;const t=lc();async function e(r){return(await r.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(s=>(0,t.getAddress)(s))}return dS}var fS={},wG;function i7e(){if(wG)return fS;wG=1,Object.defineProperty(fS,"__esModule",{value:!0}),fS.requestPermissions=t;async function t(e,r){return e.request({method:"wallet_requestPermissions",params:[r]},{retryCount:0})}return fS}var hS={},vG;function o7e(){if(vG)return hS;vG=1,Object.defineProperty(hS,"__esModule",{value:!0}),hS.sendCallsSync=r;const t=FB(),e=$B();async function r(n,s){const{chain:i=n.chain}=s,o=s.timeout??Math.max((i?.blockTime??0)*3,5e3),a=await(0,t.sendCalls)(n,s);return await(0,e.waitForCallsStatus)(n,{...s,id:a.id,timeout:o})}return hS}var pS={},EG;function Cie(){if(EG)return pS;EG=1,Object.defineProperty(pS,"__esModule",{value:!0}),pS.sendTransactionSync=E;const t=is(),e=Qh(),r=Kt(),n=Na(),s=r_(),i=g_(),o=o_(),a=Zh(),c=zu(),u=kr(),l=tg(),d=Wu(),f=Yh(),p=Eie(),g=a_(),h=l9(),y=new l.LruMap(128);async function E(S,C){const{account:_=S.account,chain:T=S.chain,accessList:P,authorizationList:D,blobs:F,data:I,gas:U,gasPrice:L,maxFeePerBlobGas:B,maxFeePerGas:A,maxPriorityFeePerGas:m,nonce:b,pollingInterval:w,throwOnReceiptRevert:x,type:M,value:k,...j}=C,N=C.timeout??Math.max((T?.blockTime??0)*3,5e3);if(typeof _>"u")throw new e.AccountNotFoundError({docsPath:"/docs/actions/wallet/sendTransactionSync"});const v=_?(0,t.parseAccount)(_):null;try{(0,d.assertRequest)(C);const R=await(async()=>{if(C.to)return C.to;if(C.to!==null&&D&&D.length>0)return await(0,s.recoverAuthorizationAddress)({authorization:D[0]}).catch(()=>{throw new r.BaseError("`to` is required. Could not infer from `authorizationList`.")})})();if(v?.type==="json-rpc"||v===null){let $;T!==null&&($=await(0,u.getAction)(S,f.getChainId,"getChainId")({}),(0,i.assertCurrentChain)({currentChainId:$,chain:T}));const O=S.chain?.formatters?.transactionRequest?.format,W=(O||c.formatTransactionRequest)({...(0,a.extract)(j,{format:O}),accessList:P,account:v,authorizationList:D,blobs:F,chainId:$,data:I,gas:U,gasPrice:L,maxFeePerBlobGas:B,maxFeePerGas:A,maxPriorityFeePerGas:m,nonce:b,to:R,type:M,value:k},"sendTransaction"),G=y.get(S.uid),K=G?"wallet_sendTransaction":"eth_sendTransaction",Q=await(async()=>{try{return await S.request({method:K,params:[W]},{retryCount:0})}catch(de){if(G===!1)throw de;const le=de;if(le.name==="InvalidInputRpcError"||le.name==="InvalidParamsRpcError"||le.name==="MethodNotFoundRpcError"||le.name==="MethodNotSupportedRpcError")return await S.request({method:"wallet_sendTransaction",params:[W]},{retryCount:0}).then(se=>(y.set(S.uid,!0),se)).catch(se=>{const be=se;throw be.name==="MethodNotFoundRpcError"||be.name==="MethodNotSupportedRpcError"?(y.set(S.uid,!1),le):be});throw le}})(),re=await(0,u.getAction)(S,p.waitForTransactionReceipt,"waitForTransactionReceipt")({checkReplacement:!1,hash:Q,pollingInterval:w,timeout:N});if(x&&re.status==="reverted")throw new n.TransactionReceiptRevertedError({receipt:re});return re}if(v?.type==="local"){const $=await(0,u.getAction)(S,g.prepareTransactionRequest,"prepareTransactionRequest")({account:v,accessList:P,authorizationList:D,blobs:F,chain:T,data:I,gas:U,gasPrice:L,maxFeePerBlobGas:B,maxFeePerGas:A,maxPriorityFeePerGas:m,nonce:b,nonceManager:v.nonceManager,parameters:[...g.defaultParameters,"sidecars"],type:M,value:k,...j,to:R}),O=T?.serializers?.transaction,H=await v.signTransaction($,{serializer:O});return await(0,u.getAction)(S,h.sendRawTransactionSync,"sendRawTransactionSync")({serializedTransaction:H,throwOnReceiptRevert:x})}throw v?.type==="smart"?new e.AccountTypeNotSupportedError({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new e.AccountTypeNotSupportedError({docsPath:"/docs/actions/wallet/sendTransactionSync",type:v?.type})}catch(R){throw R instanceof e.AccountTypeNotSupportedError?R:(0,o.getTransactionError)(R,{...C,account:v,chain:C.chain||void 0})}}return pS}var gS={},_G;function a7e(){if(_G)return gS;_G=1,Object.defineProperty(gS,"__esModule",{value:!0}),gS.showCallsStatus=t;async function t(e,r){const{id:n}=r;await e.request({method:"wallet_showCallsStatus",params:[n]})}return gS}var mS={},AG;function c7e(){if(AG)return mS;AG=1,Object.defineProperty(mS,"__esModule",{value:!0}),mS.signAuthorization=n;const t=is(),e=Qh(),r=xie();async function n(s,i){const{account:o=s.account}=i;if(!o)throw new e.AccountNotFoundError({docsPath:"/docs/eip7702/signAuthorization"});const a=(0,t.parseAccount)(o);if(!a.signAuthorization)throw new e.AccountTypeNotSupportedError({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:a.type});const c=await(0,r.prepareAuthorization)(s,i);return a.signAuthorization(c)}return mS}var yS={},xG;function u7e(){if(xG)return yS;xG=1,Object.defineProperty(yS,"__esModule",{value:!0}),yS.signMessage=n;const t=is(),e=Qh(),r=tt();async function n(s,{account:i=s.account,message:o}){if(!i)throw new e.AccountNotFoundError({docsPath:"/docs/actions/wallet/signMessage"});const a=(0,t.parseAccount)(i);if(a.signMessage)return a.signMessage({message:o});const c=typeof o=="string"?(0,r.stringToHex)(o):o.raw instanceof Uint8Array?(0,r.toHex)(o.raw):o.raw;return s.request({method:"personal_sign",params:[c,a.address]},{retryCount:0})}return yS}var bS={},CG;function l7e(){if(CG)return bS;CG=1,Object.defineProperty(bS,"__esModule",{value:!0}),bS.signTransaction=c;const t=is(),e=Qh(),r=g_(),n=tt(),s=zu(),i=kr(),o=Wu(),a=Yh();async function c(u,l){const{account:d=u.account,chain:f=u.chain,...p}=l;if(!d)throw new e.AccountNotFoundError({docsPath:"/docs/actions/wallet/signTransaction"});const g=(0,t.parseAccount)(d);(0,o.assertRequest)({account:g,...l});const h=await(0,i.getAction)(u,a.getChainId,"getChainId")({});f!==null&&(0,r.assertCurrentChain)({currentChainId:h,chain:f});const E=(f?.formatters||u.chain?.formatters)?.transactionRequest?.format||s.formatTransactionRequest;return g.signTransaction?g.signTransaction({...p,chainId:h},{serializer:u.chain?.serializers?.transaction}):await u.request({method:"eth_signTransaction",params:[{...E({...p,account:g},"signTransaction"),chainId:(0,n.numberToHex)(h),from:g.address}]},{retryCount:0})}return bS}var wS={},SG;function d7e(){if(SG)return wS;SG=1,Object.defineProperty(wS,"__esModule",{value:!0}),wS.signTypedData=n;const t=is(),e=Qh(),r=$T();async function n(s,i){const{account:o=s.account,domain:a,message:c,primaryType:u}=i;if(!o)throw new e.AccountNotFoundError({docsPath:"/docs/actions/wallet/signTypedData"});const l=(0,t.parseAccount)(o),d={EIP712Domain:(0,r.getTypesForEIP712Domain)({domain:a}),...i.types};if((0,r.validateTypedData)({domain:a,message:c,primaryType:u,types:d}),l.signTypedData)return l.signTypedData({domain:a,message:c,primaryType:u,types:d});const f=(0,r.serializeTypedData)({domain:a,message:c,primaryType:u,types:d});return s.request({method:"eth_signTypedData_v4",params:[l.address,f]},{retryCount:0})}return wS}var vS={},IG;function f7e(){if(IG)return vS;IG=1,Object.defineProperty(vS,"__esModule",{value:!0}),vS.switchChain=e;const t=tt();async function e(r,{id:n}){await r.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,t.numberToHex)(n)}]},{retryCount:0})}return vS}var ES={},TG;function h7e(){if(TG)return ES;TG=1,Object.defineProperty(ES,"__esModule",{value:!0}),ES.watchAsset=t;async function t(e,r){return await e.request({method:"wallet_watchAsset",params:r},{retryCount:0})}return ES}var _S={},NG;function p7e(){if(NG)return _S;NG=1,Object.defineProperty(_S,"__esModule",{value:!0}),_S.writeContractSync=r;const t=Cie(),e=LB();async function r(n,s){return e.writeContract.internal(n,t.sendTransactionSync,"sendTransactionSync",s)}return _S}var PG;function Sie(){if(PG)return sS;PG=1,Object.defineProperty(sS,"__esModule",{value:!0}),sS.walletActions=B;const t=SB(),e=Yh(),r=QMe(),n=e7e(),s=t7e(),i=Ise(),o=r7e(),a=n7e(),c=xie(),u=a_(),l=s7e(),d=i7e(),f=FB(),p=o7e(),g=jB(),h=l9(),y=MT(),E=Cie(),S=a7e(),C=c7e(),_=u7e(),T=l7e(),P=d7e(),D=f7e(),F=$B(),I=h7e(),U=LB(),L=p7e();function B(A){return{addChain:m=>(0,r.addChain)(A,m),deployContract:m=>(0,n.deployContract)(A,m),fillTransaction:m=>(0,t.fillTransaction)(A,m),getAddresses:()=>(0,s.getAddresses)(A),getCallsStatus:m=>(0,i.getCallsStatus)(A,m),getCapabilities:m=>(0,o.getCapabilities)(A,m),getChainId:()=>(0,e.getChainId)(A),getPermissions:()=>(0,a.getPermissions)(A),prepareAuthorization:m=>(0,c.prepareAuthorization)(A,m),prepareTransactionRequest:m=>(0,u.prepareTransactionRequest)(A,m),requestAddresses:()=>(0,l.requestAddresses)(A),requestPermissions:m=>(0,d.requestPermissions)(A,m),sendCalls:m=>(0,f.sendCalls)(A,m),sendCallsSync:m=>(0,p.sendCallsSync)(A,m),sendRawTransaction:m=>(0,g.sendRawTransaction)(A,m),sendRawTransactionSync:m=>(0,h.sendRawTransactionSync)(A,m),sendTransaction:m=>(0,y.sendTransaction)(A,m),sendTransactionSync:m=>(0,E.sendTransactionSync)(A,m),showCallsStatus:m=>(0,S.showCallsStatus)(A,m),signAuthorization:m=>(0,C.signAuthorization)(A,m),signMessage:m=>(0,_.signMessage)(A,m),signTransaction:m=>(0,T.signTransaction)(A,m),signTypedData:m=>(0,P.signTypedData)(A,m),switchChain:m=>(0,D.switchChain)(A,m),waitForCallsStatus:m=>(0,F.waitForCallsStatus)(A,m),watchAsset:m=>(0,I.watchAsset)(A,m),writeContract:m=>(0,U.writeContract)(A,m),writeContractSync:m=>(0,L.writeContractSync)(A,m)}}return sS}var RG;function g7e(){if(RG)return nS;RG=1,Object.defineProperty(nS,"__esModule",{value:!0}),nS.createWalletClient=r;const t=jT(),e=Sie();function r(n){const{key:s="wallet",name:i="Wallet Client",transport:o}=n;return(0,t.createClient)({...n,key:s,name:i,transport:o,type:"walletClient"}).extend(e.walletActions)}return nS}var AS={},OG;function v_(){if(OG)return AS;OG=1,Object.defineProperty(AS,"__esModule",{value:!0}),AS.createTransport=r;const t=Fse(),e=Tse();function r({key:n,methods:s,name:i,request:o,retryCount:a=3,retryDelay:c=150,timeout:u,type:l},d){const f=(0,e.uid)();return{config:{key:n,methods:s,name:i,request:o,retryCount:a,retryDelay:c,timeout:u,type:l},request:(0,t.buildRequest)(o,{methods:s,retryCount:a,retryDelay:c,uid:f}),value:d}}return AS}var xS={},kG;function m7e(){if(kG)return xS;kG=1,Object.defineProperty(xS,"__esModule",{value:!0}),xS.custom=e;const t=v_();function e(r,n={}){const{key:s="custom",methods:i,name:o="Custom Provider",retryDelay:a}=n;return({retryCount:c})=>(0,t.createTransport)({key:s,methods:i,name:o,request:r.request.bind(r),retryCount:n.retryCount??c,retryDelay:a,type:"custom"})}return xS}var Xg={},BG;function y7e(){if(BG)return Xg;BG=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.fallback=s,Xg.shouldThrow=i,Xg.rankTransports=o;const t=uf(),e=Vh(),r=DB(),n=v_();function s(a,c={}){const{key:u="fallback",name:l="Fallback",rank:d=!1,shouldThrow:f=i,retryCount:p,retryDelay:g}=c;return(({chain:h,pollingInterval:y=4e3,timeout:E,...S})=>{let C=a,_=()=>{};const T=(0,n.createTransport)({key:u,name:l,async request({method:P,params:D}){let F;const I=async(U=0)=>{const L=C[U]({...S,chain:h,retryCount:0,timeout:E});try{const B=await L.request({method:P,params:D});return _({method:P,params:D,response:B,transport:L,status:"success"}),B}catch(B){if(_({error:B,method:P,params:D,transport:L,status:"error"}),f(B)||U===C.length-1||(F??=C.slice(U+1).some(A=>{const{include:m,exclude:b}=A({chain:h}).config.methods||{};return m?m.includes(P):b?!b.includes(P):!0}),!F))throw B;return I(U+1)}};return I()},retryCount:p,retryDelay:g,type:"fallback"},{onResponse:P=>_=P,transports:C.map(P=>P({chain:h,retryCount:0}))});if(d){const P=typeof d=="object"?d:{};o({chain:h,interval:P.interval??y,onTransports:D=>C=D,ping:P.ping,sampleCount:P.sampleCount,timeout:P.timeout,transports:C,weights:P.weights})}return T})}function i(a){return!!("code"in a&&typeof a.code=="number"&&(a.code===e.TransactionRejectedRpcError.code||a.code===e.UserRejectedRequestError.code||t.ExecutionRevertedError.nodeMessage.test(a.message)||a.code===5e3))}function o({chain:a,interval:c=4e3,onTransports:u,ping:l,sampleCount:d=10,timeout:f=1e3,transports:p,weights:g={}}){const{stability:h=.7,latency:y=.3}=g,E=[],S=async()=>{const C=await Promise.all(p.map(async P=>{const D=P({chain:a,retryCount:0,timeout:f}),F=Date.now();let I,U;try{await(l?l({transport:D}):D.request({method:"net_listening"})),U=1}catch{U=0}finally{I=Date.now()}return{latency:I-F,success:U}}));E.push(C),E.length>d&&E.shift();const _=Math.max(...E.map(P=>Math.max(...P.map(({latency:D})=>D)))),T=p.map((P,D)=>{const F=E.map(A=>A[D].latency),U=1-F.reduce((A,m)=>A+m,0)/F.length/_,L=E.map(A=>A[D].success),B=L.reduce((A,m)=>A+m,0)/L.length;return B===0?[0,D]:[y*U+h*B,D]}).sort((P,D)=>D[0]-P[0]);u(T.map(([,P])=>p[P])),await(0,r.wait)(c),S()};S()}return Xg}var CS={},Vw={},UG;function d9(){if(UG)return Vw;UG=1,Object.defineProperty(Vw,"__esModule",{value:!0}),Vw.UrlRequiredError=void 0;const t=Kt();class e extends t.BaseError{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}return Vw.UrlRequiredError=e,Vw}var MG;function b7e(){if(MG)return CS;MG=1,Object.defineProperty(CS,"__esModule",{value:!0}),CS.http=i;const t=Hu(),e=d9(),r=OB(),n=JB(),s=v_();function i(o,a={}){const{batch:c,fetchFn:u,fetchOptions:l,key:d="http",methods:f,name:p="HTTP JSON-RPC",onFetchRequest:g,onFetchResponse:h,retryDelay:y,raw:E}=a;return({chain:S,retryCount:C,timeout:_})=>{const{batchSize:T=1e3,wait:P=0}=typeof c=="object"?c:{},D=a.retryCount??C,F=_??a.timeout??1e4,I=o||S?.rpcUrls.default.http[0];if(!I)throw new e.UrlRequiredError;const U=(0,n.getHttpRpcClient)(I,{fetchFn:u,fetchOptions:l,onRequest:g,onResponse:h,timeout:F});return(0,s.createTransport)({key:d,methods:f,name:p,async request({method:L,params:B}){const A={method:L,params:B},{schedule:m}=(0,r.createBatchScheduler)({id:I,wait:P,shouldSplitBatch(M){return M.length>T},fn:M=>U.request({body:M}),sort:(M,k)=>M.id-k.id}),b=async M=>c?m(M):[await U.request({body:M})],[{error:w,result:x}]=await b(A);if(E)return{error:w,result:x};if(w)throw new t.RpcRequestError({body:A,error:w,url:I});return x},retryCount:D,retryDelay:y,timeout:F,type:"http"},{fetchOptions:l,url:I})}}return CS}var SS={},DG;function w7e(){if(DG)return SS;DG=1,Object.defineProperty(SS,"__esModule",{value:!0}),SS.webSocket=i;const t=Hu(),e=d9(),r=Xse(),n=XB(),s=v_();function i(o,a={}){const{keepAlive:c,key:u="webSocket",methods:l,name:d="WebSocket JSON-RPC",reconnect:f,retryDelay:p}=a;return({chain:g,retryCount:h,timeout:y})=>{const E=a.retryCount??h,S=y??a.timeout??1e4,C=o||g?.rpcUrls.default.webSocket?.[0],_={keepAlive:c,reconnect:f};if(!C)throw new e.UrlRequiredError;return(0,s.createTransport)({key:u,methods:l,name:d,async request({method:T,params:P}){const D={method:T,params:P},F=await(0,n.getWebSocketRpcClient)(C,_),{error:I,result:U}=await F.requestAsync({body:D,timeout:S});if(I)throw new t.RpcRequestError({body:D,error:I,url:C});return U},retryCount:E,retryDelay:p,timeout:S,type:"webSocket"},{getSocket(){return(0,r.getSocket)(C)},getRpcClient(){return(0,n.getWebSocketRpcClient)(C,_)},async subscribe({params:T,onData:P,onError:D}){const F=await(0,n.getWebSocketRpcClient)(C,_),{result:I}=await new Promise((U,L)=>F.request({body:{method:"eth_subscribe",params:T},onError(B){L(B),D?.(B)},onResponse(B){if(B.error){L(B.error),D?.(B.error);return}if(typeof B.id=="number"){U(B);return}B.method==="eth_subscription"&&P(B.params)}}));return{subscriptionId:I,async unsubscribe(){return new Promise(U=>F.request({body:{method:"eth_unsubscribe",params:[I]},onResponse:U}))}}}})}}return SS}var Gw={},jG;function v7e(){if(jG)return Gw;jG=1,Object.defineProperty(Gw,"__esModule",{value:!0}),Gw.ProviderRpcError=void 0;class t extends Error{constructor(r,n){super(n),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r,this.details=n}}return Gw.ProviderRpcError=t,Gw}var IS={},LG;function E7e(){if(LG)return IS;LG=1,Object.defineProperty(IS,"__esModule",{value:!0}),IS.decodeDeployData=n;const t=Jn(),e=zh(),r="/docs/contract/decodeDeployData";function n(s){const{abi:i,bytecode:o,data:a}=s;if(a===o)return{bytecode:o};const c=i.find(l=>"type"in l&&l.type==="constructor");if(!c)throw new t.AbiConstructorNotFoundError({docsPath:r});if(!("inputs"in c))throw new t.AbiConstructorParamsNotFoundError({docsPath:r});if(!c.inputs||c.inputs.length===0)throw new t.AbiConstructorParamsNotFoundError({docsPath:r});return{args:(0,e.decodeAbiParameters)(c.inputs,`0x${a.replace(o,"")}`),bytecode:o}}return IS}var TS={},FG;function _7e(){if(FG)return TS;FG=1,Object.defineProperty(TS,"__esModule",{value:!0}),TS.fromBlobs=n;const t=XE(),e=Pn(),r=tt();function n(s){const i=s.to??(typeof s.blobs[0]=="string"?"hex":"bytes"),o=typeof s.blobs[0]=="string"?s.blobs.map(d=>(0,e.hexToBytes)(d)):s.blobs,a=o.reduce((d,f)=>d+f.length,0),c=(0,t.createCursor)(new Uint8Array(a));let u=!0;for(const d of o){const f=(0,t.createCursor)(d);for(;u&&f.position<d.length;){f.incrementPosition(1);let p=31;d.length-f.position<31&&(p=d.length-f.position);for(const g in Array.from({length:p})){const h=f.readByte();if(h===128&&!f.inspectBytes(f.remaining).includes(128)){u=!1;break}c.pushByte(h)}}}const l=c.bytes.slice(0,c.position);return i==="hex"?(0,r.bytesToHex)(l):l}return TS}var NS={},$G;function A7e(){if($G)return NS;$G=1,Object.defineProperty(NS,"__esModule",{value:!0}),NS.sidecarsToVersionedHashes=e;const t=xB();function e(r){const{sidecars:n,version:s}=r,i=r.to??(typeof n[0].blob=="string"?"hex":"bytes"),o=[];for(const{commitment:a}of n)o.push((0,t.commitmentToVersionedHash)({commitment:a,to:i,version:s}));return o}return NS}var PS={},qG;function x7e(){if(qG)return PS;qG=1,Object.defineProperty(PS,"__esModule",{value:!0}),PS.toCoinType=r;const t=WB(),e=2147483648;function r(n){if(n===1)return 60n;if(n>=e||n<0)throw new t.EnsInvalidChainIdError({chainId:n});return BigInt((2147483648|n)>>>0)}return PS}var RS={},HG;function Iie(){if(HG)return RS;HG=1,Object.defineProperty(RS,"__esModule",{value:!0}),RS.defineKzg=t;function t({blobToKzgCommitment:e,computeBlobKzgProof:r}){return{blobToKzgCommitment:e,computeBlobKzgProof:r}}return RS}var OS={},zG;function C7e(){if(zG)return OS;zG=1,Object.defineProperty(OS,"__esModule",{value:!0}),OS.setupKzg=e;const t=Iie();function e(r,n){try{r.loadTrustedSetup(n)}catch(s){const i=s;if(!i.message.includes("trusted setup is already loaded"))throw i}return(0,t.defineKzg)(r)}return OS}var kS={},WG;function S7e(){if(WG)return kS;WG=1,Object.defineProperty(kS,"__esModule",{value:!0}),kS.compactSignatureToSignature=r;const t=Pn(),e=tt();function r({r:n,yParityAndS:s}){const i=(0,t.hexToBytes)(s),o=i[0]&128?1:0,a=i;return o===1&&(a[0]&=127),{r:n,s:(0,e.bytesToHex)(a),yParity:o}}return kS}var BS={},VG;function I7e(){if(VG)return BS;VG=1,Object.defineProperty(BS,"__esModule",{value:!0}),BS.parseCompactSignature=r;const t=og(),e=tt();function r(n){const{r:s,s:i}=t.secp256k1.Signature.fromCompact(n.slice(2,130));return{r:(0,e.numberToHex)(s,{size:32}),yParityAndS:(0,e.numberToHex)(i,{size:32})}}return BS}var US={},GG;function T7e(){if(GG)return US;GG=1,Object.defineProperty(US,"__esModule",{value:!0}),US.parseSignature=r;const t=og(),e=tt();function r(n){const{r:s,s:i}=t.secp256k1.Signature.fromCompact(n.slice(2,130)),o=+`0x${n.slice(130)}`,[a,c]=(()=>{if(o===0||o===1)return[void 0,o];if(o===27)return[BigInt(o),0];if(o===28)return[BigInt(o),1];throw new Error("Invalid yParityOrV value")})();return typeof a<"u"?{r:(0,e.numberToHex)(s,{size:32}),s:(0,e.numberToHex)(i,{size:32}),v:a,yParity:c}:{r:(0,e.numberToHex)(s,{size:32}),s:(0,e.numberToHex)(i,{size:32}),yParity:c}}return US}var MS={},KG;function N7e(){if(KG)return MS;KG=1,Object.defineProperty(MS,"__esModule",{value:!0}),MS.recoverTransactionAddress=s;const t=Sa(),e=a9(),r=FT(),n=Kh();async function s(i){const{serializedTransaction:o,signature:a}=i,c=(0,e.parseTransaction)(o),u=a??{r:c.r,s:c.s,v:c.v,yParity:c.yParity},l=(0,r.serializeTransaction)({...c,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await(0,n.recoverAddress)({hash:(0,t.keccak256)(l),signature:u})}return MS}var DS={},ZG;function P7e(){if(ZG)return DS;ZG=1,Object.defineProperty(DS,"__esModule",{value:!0}),DS.serializeCompactSignature=r;const t=og(),e=ys();function r({r:n,yParityAndS:s}){return`0x${new t.secp256k1.Signature((0,e.hexToBigInt)(n),(0,e.hexToBigInt)(s)).toCompactHex()}`}return DS}var jS={},YG;function R7e(){if(YG)return jS;YG=1,Object.defineProperty(jS,"__esModule",{value:!0}),jS.signatureToCompactSignature=r;const t=Pn(),e=tt();function r(n){const{r:s,s:i,v:o,yParity:a}=n,c=Number(a??o-27n);let u=i;if(c===1){const l=(0,t.hexToBytes)(i);l[0]|=128,u=(0,e.bytesToHex)(l)}return{r:s,yParityAndS:u}}return jS}var JG;function O7e(){return JG||(JG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.maxInt8=t.universalSignatureValidatorByteCode=t.erc6492SignatureValidatorByteCode=t.deploylessCallViaFactoryBytecode=t.deploylessCallViaBytecodeBytecode=t.zeroHash=t.zeroAddress=t.ethAddress=t.multicall3Abi=t.universalSignatureValidatorAbi=t.erc6492SignatureValidatorAbi=t.erc4626Abi=t.erc1155Abi=t.erc721Abi=t.erc20Abi_bytes32=t.erc20Abi=t.webSocket=t.http=t.shouldThrow=t.fallback=t.custom=t.createTransport=t.walletActions=t.testActions=t.publicActions=t.createWalletClient=t.createTestClient=t.createPublicClient=t.rpcSchema=t.createClient=t.WaitForCallsStatusTimeoutError=t.getContract=t.UnknownTypeError=t.UnknownSignatureError=t.SolidityProtectedKeywordError=t.parseAbiParameters=t.parseAbiParameter=t.parseAbiItem=t.parseAbi=t.InvalidStructSignatureError=t.InvalidSignatureError=t.InvalidParenthesisError=t.InvalidParameterError=t.InvalidModifierError=t.InvalidFunctionModifierError=t.InvalidAbiTypeParameterError=t.InvalidAbiParametersError=t.InvalidAbiParameterError=t.InvalidAbiItemError=t.CircularReferenceError=void 0,t.maxUint152=t.maxUint144=t.maxUint136=t.maxUint128=t.maxUint120=t.maxUint112=t.maxUint104=t.maxUint96=t.maxUint88=t.maxUint80=t.maxUint72=t.maxUint64=t.maxUint56=t.maxUint48=t.maxUint40=t.maxUint32=t.maxUint24=t.maxUint16=t.maxUint8=t.maxInt256=t.maxInt248=t.maxInt240=t.maxInt232=t.maxInt224=t.maxInt216=t.maxInt208=t.maxInt200=t.maxInt192=t.maxInt184=t.maxInt176=t.maxInt168=t.maxInt160=t.maxInt152=t.maxInt144=t.maxInt136=t.maxInt128=t.maxInt120=t.maxInt112=t.maxInt104=t.maxInt96=t.maxInt88=t.maxInt80=t.maxInt72=t.maxInt64=t.maxInt56=t.maxInt48=t.maxInt40=t.maxInt32=t.maxInt24=t.maxInt16=void 0,t.AbiConstructorNotFoundError=t.weiUnits=t.gweiUnits=t.etherUnits=t.presignMessagePrefix=t.minInt256=t.minInt248=t.minInt240=t.minInt232=t.minInt224=t.minInt216=t.minInt208=t.minInt200=t.minInt192=t.minInt184=t.minInt176=t.minInt168=t.minInt160=t.minInt152=t.minInt144=t.minInt136=t.minInt128=t.minInt120=t.minInt112=t.minInt104=t.minInt96=t.minInt88=t.minInt80=t.minInt72=t.minInt64=t.minInt56=t.minInt48=t.minInt40=t.minInt32=t.minInt24=t.minInt16=t.minInt8=t.maxUint256=t.maxUint248=t.maxUint240=t.maxUint232=t.maxUint224=t.maxUint216=t.maxUint208=t.maxUint200=t.maxUint192=t.maxUint184=t.maxUint176=t.maxUint168=t.maxUint160=void 0,t.EnsAvatarUriResolutionError=t.EnsAvatarUnsupportedNamespaceError=t.EnsAvatarInvalidNftUriError=t.SizeOverflowError=t.InvalidHexValueError=t.InvalidHexBooleanError=t.InvalidBytesBooleanError=t.IntegerOutOfRangeError=t.SliceOffsetOutOfBoundsError=t.SizeExceedsPaddingSizeError=t.RawContractError=t.CounterfactualDeploymentFailedError=t.ContractFunctionZeroDataError=t.ContractFunctionRevertedError=t.ContractFunctionExecutionError=t.CallExecutionError=t.InvalidChainIdError=t.ClientChainNotConfiguredError=t.ChainNotFoundError=t.ChainMismatchError=t.ChainDoesNotSupportContract=t.BundleFailedError=t.BlockNotFoundError=t.setErrorConfig=t.BaseError=t.InvalidAddressError=t.UnsupportedPackedAbiType=t.InvalidDefinitionTypeError=t.InvalidArrayError=t.InvalidAbiEncodingTypeError=t.InvalidAbiDecodingTypeError=t.DecodeLogTopicsMismatch=t.DecodeLogDataMismatch=t.BytesSizeMismatchError=t.AbiFunctionSignatureNotFoundError=t.AbiFunctionOutputsNotFoundError=t.AbiFunctionNotFoundError=t.AbiEventSignatureNotFoundError=t.AbiEventSignatureEmptyTopicsError=t.AbiEventNotFoundError=t.AbiErrorSignatureNotFoundError=t.AbiErrorNotFoundError=t.AbiErrorInputsNotFoundError=t.AbiEncodingLengthMismatchError=t.AbiEncodingBytesSizeMismatchError=t.AbiEncodingArrayLengthMismatchError=t.AbiDecodingZeroDataError=t.AbiDecodingDataSizeTooSmallError=t.AbiDecodingDataSizeInvalidError=t.AbiConstructorParamsNotFoundError=void 0,t.UnsupportedProviderMethodError=t.UnsupportedNonOptionalCapabilityError=t.UnsupportedChainIdError=t.UnknownRpcError=t.UnknownBundleIdError=t.UnauthorizedProviderError=t.TransactionRejectedRpcError=t.SwitchChainError=t.RpcError=t.ResourceUnavailableRpcError=t.ResourceNotFoundRpcError=t.ProviderRpcError=t.ProviderDisconnectedError=t.ParseRpcError=t.MethodNotSupportedRpcError=t.MethodNotFoundRpcError=t.LimitExceededRpcError=t.JsonRpcVersionUnsupportedError=t.InvalidRequestRpcError=t.InvalidParamsRpcError=t.InvalidInputRpcError=t.InternalRpcError=t.DuplicateIdError=t.ChainDisconnectedError=t.BundleTooLargeError=t.AtomicReadyWalletRejectedUpgradeError=t.AtomicityNotSupportedError=t.WebSocketRequestError=t.TimeoutError=t.SocketClosedError=t.RpcRequestError=t.HttpRequestError=t.UnknownNodeError=t.TransactionTypeNotSupportedError=t.TipAboveFeeCapError=t.NonceTooLowError=t.NonceTooHighError=t.NonceMaxValueError=t.IntrinsicGasTooLowError=t.IntrinsicGasTooHighError=t.InsufficientFundsError=t.FeeCapTooLowError=t.FeeCapTooHighError=t.ExecutionRevertedError=t.FilterTypeNotSupportedError=t.MaxFeePerGasTooLowError=t.Eip1559FeesNotSupportedError=t.BaseFeeScalarError=t.EstimateGasExecutionError=t.EnsInvalidChainIdError=void 0,t.toBlobs=t.toBlobSidecars=t.sidecarsToVersionedHashes=t.fromBlobs=t.commitmentToVersionedHash=t.commitmentsToVersionedHashes=t.blobsToProofs=t.blobsToCommitments=t.isAddressEqual=t.isAddress=t.getCreateAddress=t.getCreate2Address=t.getContractAddress=t.getAddress=t.checksumAddress=t.prepareEncodeFunctionData=t.parseEventLogs=t.getAbiItem=t.encodePacked=t.encodeFunctionResult=t.encodeFunctionData=t.encodeEventTopics=t.encodeErrorResult=t.encodeDeployData=t.encodeAbiParameters=t.decodeFunctionResult=t.decodeFunctionData=t.decodeEventLog=t.decodeErrorResult=t.decodeDeployData=t.decodeAbiParameters=t.EIP1193ProviderRpcError=t.InvalidDecimalNumberError=t.InvalidStructTypeError=t.InvalidPrimaryTypeError=t.InvalidDomainError=t.UrlRequiredError=t.WaitForTransactionReceiptTimeoutError=t.TransactionReceiptNotFoundError=t.TransactionNotFoundError=t.TransactionExecutionError=t.InvalidStorageKeySizeError=t.InvalidSerializedTransactionTypeError=t.InvalidSerializedTransactionError=t.InvalidSerializableTransactionError=t.InvalidLegacyVError=t.FeeConflictError=t.StateAssignmentConflictError=t.AccountStateConflictError=t.UserRejectedRequestError=void 0,t.getContractError=t.toCoinType=t.namehash=t.labelhash=t.toRlp=t.hexToRlp=t.bytesToRlp=t.toHex=t.stringToHex=t.numberToHex=t.bytesToHex=t.boolToHex=t.toBytes=t.stringToBytes=t.numberToBytes=t.hexToBytes=t.boolToBytes=t.fromRlp=t.hexToString=t.hexToNumber=t.hexToBool=t.hexToBigInt=t.fromHex=t.fromBytes=t.bytesToString=t.bytesToNumber=t.bytesToBool=t.bytesToBigInt=t.trim=t.sliceHex=t.sliceBytes=t.slice=t.size=t.padHex=t.padBytes=t.pad=t.isHex=t.isBytes=t.concatHex=t.concatBytes=t.concat=t.getChainContractAddress=t.extractChain=t.defineChain=t.assertCurrentChain=t.offchainLookupSignature=t.offchainLookupAbiItem=t.offchainLookup=t.ccipFetch=t.ccipRequest=void 0,t.recoverTypedDataAddress=t.recoverTransactionAddress=t.recoverPublicKey=t.recoverMessageAddress=t.recoverAddress=t.parseSignature=t.hexToSignature=t.parseErc8010Signature=t.parseErc6492Signature=t.parseCompactSignature=t.hexToCompactSignature=t.isErc8010Signature=t.isErc6492Signature=t.hashTypedData=t.hashStruct=t.hashDomain=t.hashMessage=t.compactSignatureToSignature=t.withTimeout=t.withRetry=t.withCache=t.nonceManager=t.createNonceManager=t.setupKzg=t.defineKzg=t.getFunctionSignature=t.toFunctionSignature=t.getFunctionSelector=t.toFunctionSelector=t.toFunctionHash=t.getEventSignature=t.toEventSignature=t.getEventSelector=t.toEventSelector=t.toEventHash=t.sha256=t.ripemd160=t.keccak256=t.isHash=t.rpcTransactionType=t.formatTransactionRequest=t.defineTransactionRequest=t.formatTransactionReceipt=t.defineTransactionReceipt=t.transactionType=t.formatTransaction=t.defineTransaction=t.formatLog=t.formatBlock=t.defineBlock=void 0,t.parseUnits=t.parseGwei=t.parseEther=t.formatUnits=t.formatGwei=t.formatEther=t.validateTypedData=t.serializeTypedData=t.getTypesForEIP712Domain=t.domainSeparator=t.serializeTransaction=t.serializeAccessList=t.parseTransaction=t.getTransactionType=t.getSerializedTransactionType=t.assertTransactionLegacy=t.assertTransactionEIP2930=t.assertTransactionEIP1559=t.assertRequest=t.stringify=t.verifyTypedData=t.verifyMessage=t.verifyHash=t.toPrefixedMessage=t.signatureToCompactSignature=t.serializeSignature=t.signatureToHex=t.serializeErc8010Signature=t.serializeErc6492Signature=t.serializeCompactSignature=t.compactSignatureToHex=void 0;var e=$h();Object.defineProperty(t,"CircularReferenceError",{enumerable:!0,get:function(){return e.CircularReferenceError}}),Object.defineProperty(t,"InvalidAbiItemError",{enumerable:!0,get:function(){return e.InvalidAbiItemError}}),Object.defineProperty(t,"InvalidAbiParameterError",{enumerable:!0,get:function(){return e.InvalidAbiParameterError}}),Object.defineProperty(t,"InvalidAbiParametersError",{enumerable:!0,get:function(){return e.InvalidAbiParametersError}}),Object.defineProperty(t,"InvalidAbiTypeParameterError",{enumerable:!0,get:function(){return e.InvalidAbiTypeParameterError}}),Object.defineProperty(t,"InvalidFunctionModifierError",{enumerable:!0,get:function(){return e.InvalidFunctionModifierError}}),Object.defineProperty(t,"InvalidModifierError",{enumerable:!0,get:function(){return e.InvalidModifierError}}),Object.defineProperty(t,"InvalidParameterError",{enumerable:!0,get:function(){return e.InvalidParameterError}}),Object.defineProperty(t,"InvalidParenthesisError",{enumerable:!0,get:function(){return e.InvalidParenthesisError}}),Object.defineProperty(t,"InvalidSignatureError",{enumerable:!0,get:function(){return e.InvalidSignatureError}}),Object.defineProperty(t,"InvalidStructSignatureError",{enumerable:!0,get:function(){return e.InvalidStructSignatureError}}),Object.defineProperty(t,"parseAbi",{enumerable:!0,get:function(){return e.parseAbi}}),Object.defineProperty(t,"parseAbiItem",{enumerable:!0,get:function(){return e.parseAbiItem}}),Object.defineProperty(t,"parseAbiParameter",{enumerable:!0,get:function(){return e.parseAbiParameter}}),Object.defineProperty(t,"parseAbiParameters",{enumerable:!0,get:function(){return e.parseAbiParameters}}),Object.defineProperty(t,"SolidityProtectedKeywordError",{enumerable:!0,get:function(){return e.SolidityProtectedKeywordError}}),Object.defineProperty(t,"UnknownSignatureError",{enumerable:!0,get:function(){return e.UnknownSignatureError}}),Object.defineProperty(t,"UnknownTypeError",{enumerable:!0,get:function(){return e.UnknownTypeError}});var r=CUe();Object.defineProperty(t,"getContract",{enumerable:!0,get:function(){return r.getContract}});var n=$B();Object.defineProperty(t,"WaitForCallsStatusTimeoutError",{enumerable:!0,get:function(){return n.WaitForCallsStatusTimeoutError}});var s=jT();Object.defineProperty(t,"createClient",{enumerable:!0,get:function(){return s.createClient}}),Object.defineProperty(t,"rpcSchema",{enumerable:!0,get:function(){return s.rpcSchema}});var i=EMe();Object.defineProperty(t,"createPublicClient",{enumerable:!0,get:function(){return i.createPublicClient}});var o=XMe();Object.defineProperty(t,"createTestClient",{enumerable:!0,get:function(){return o.createTestClient}});var a=g7e();Object.defineProperty(t,"createWalletClient",{enumerable:!0,get:function(){return a.createWalletClient}});var c=_ie();Object.defineProperty(t,"publicActions",{enumerable:!0,get:function(){return c.publicActions}});var u=Aie();Object.defineProperty(t,"testActions",{enumerable:!0,get:function(){return u.testActions}});var l=Sie();Object.defineProperty(t,"walletActions",{enumerable:!0,get:function(){return l.walletActions}});var d=v_();Object.defineProperty(t,"createTransport",{enumerable:!0,get:function(){return d.createTransport}});var f=m7e();Object.defineProperty(t,"custom",{enumerable:!0,get:function(){return f.custom}});var p=y7e();Object.defineProperty(t,"fallback",{enumerable:!0,get:function(){return p.fallback}}),Object.defineProperty(t,"shouldThrow",{enumerable:!0,get:function(){return p.shouldThrow}});var g=b7e();Object.defineProperty(t,"http",{enumerable:!0,get:function(){return g.http}});var h=w7e();Object.defineProperty(t,"webSocket",{enumerable:!0,get:function(){return h.webSocket}});var y=Jh();Object.defineProperty(t,"erc20Abi",{enumerable:!0,get:function(){return y.erc20Abi}}),Object.defineProperty(t,"erc20Abi_bytes32",{enumerable:!0,get:function(){return y.erc20Abi_bytes32}}),Object.defineProperty(t,"erc721Abi",{enumerable:!0,get:function(){return y.erc721Abi}}),Object.defineProperty(t,"erc1155Abi",{enumerable:!0,get:function(){return y.erc1155Abi}}),Object.defineProperty(t,"erc4626Abi",{enumerable:!0,get:function(){return y.erc4626Abi}}),Object.defineProperty(t,"erc6492SignatureValidatorAbi",{enumerable:!0,get:function(){return y.erc6492SignatureValidatorAbi}}),Object.defineProperty(t,"universalSignatureValidatorAbi",{enumerable:!0,get:function(){return y.erc6492SignatureValidatorAbi}}),Object.defineProperty(t,"multicall3Abi",{enumerable:!0,get:function(){return y.multicall3Abi}});var E=bie();Object.defineProperty(t,"ethAddress",{enumerable:!0,get:function(){return E.ethAddress}}),Object.defineProperty(t,"zeroAddress",{enumerable:!0,get:function(){return E.zeroAddress}});var S=QB();Object.defineProperty(t,"zeroHash",{enumerable:!0,get:function(){return S.zeroHash}});var C=l_();Object.defineProperty(t,"deploylessCallViaBytecodeBytecode",{enumerable:!0,get:function(){return C.deploylessCallViaBytecodeBytecode}}),Object.defineProperty(t,"deploylessCallViaFactoryBytecode",{enumerable:!0,get:function(){return C.deploylessCallViaFactoryBytecode}}),Object.defineProperty(t,"erc6492SignatureValidatorByteCode",{enumerable:!0,get:function(){return C.erc6492SignatureValidatorByteCode}}),Object.defineProperty(t,"universalSignatureValidatorByteCode",{enumerable:!0,get:function(){return C.erc6492SignatureValidatorByteCode}});var _=vB();Object.defineProperty(t,"maxInt8",{enumerable:!0,get:function(){return _.maxInt8}}),Object.defineProperty(t,"maxInt16",{enumerable:!0,get:function(){return _.maxInt16}}),Object.defineProperty(t,"maxInt24",{enumerable:!0,get:function(){return _.maxInt24}}),Object.defineProperty(t,"maxInt32",{enumerable:!0,get:function(){return _.maxInt32}}),Object.defineProperty(t,"maxInt40",{enumerable:!0,get:function(){return _.maxInt40}}),Object.defineProperty(t,"maxInt48",{enumerable:!0,get:function(){return _.maxInt48}}),Object.defineProperty(t,"maxInt56",{enumerable:!0,get:function(){return _.maxInt56}}),Object.defineProperty(t,"maxInt64",{enumerable:!0,get:function(){return _.maxInt64}}),Object.defineProperty(t,"maxInt72",{enumerable:!0,get:function(){return _.maxInt72}}),Object.defineProperty(t,"maxInt80",{enumerable:!0,get:function(){return _.maxInt80}}),Object.defineProperty(t,"maxInt88",{enumerable:!0,get:function(){return _.maxInt88}}),Object.defineProperty(t,"maxInt96",{enumerable:!0,get:function(){return _.maxInt96}}),Object.defineProperty(t,"maxInt104",{enumerable:!0,get:function(){return _.maxInt104}}),Object.defineProperty(t,"maxInt112",{enumerable:!0,get:function(){return _.maxInt112}}),Object.defineProperty(t,"maxInt120",{enumerable:!0,get:function(){return _.maxInt120}}),Object.defineProperty(t,"maxInt128",{enumerable:!0,get:function(){return _.maxInt128}}),Object.defineProperty(t,"maxInt136",{enumerable:!0,get:function(){return _.maxInt136}}),Object.defineProperty(t,"maxInt144",{enumerable:!0,get:function(){return _.maxInt144}}),Object.defineProperty(t,"maxInt152",{enumerable:!0,get:function(){return _.maxInt152}}),Object.defineProperty(t,"maxInt160",{enumerable:!0,get:function(){return _.maxInt160}}),Object.defineProperty(t,"maxInt168",{enumerable:!0,get:function(){return _.maxInt168}}),Object.defineProperty(t,"maxInt176",{enumerable:!0,get:function(){return _.maxInt176}}),Object.defineProperty(t,"maxInt184",{enumerable:!0,get:function(){return _.maxInt184}}),Object.defineProperty(t,"maxInt192",{enumerable:!0,get:function(){return _.maxInt192}}),Object.defineProperty(t,"maxInt200",{enumerable:!0,get:function(){return _.maxInt200}}),Object.defineProperty(t,"maxInt208",{enumerable:!0,get:function(){return _.maxInt208}}),Object.defineProperty(t,"maxInt216",{enumerable:!0,get:function(){return _.maxInt216}}),Object.defineProperty(t,"maxInt224",{enumerable:!0,get:function(){return _.maxInt224}}),Object.defineProperty(t,"maxInt232",{enumerable:!0,get:function(){return _.maxInt232}}),Object.defineProperty(t,"maxInt240",{enumerable:!0,get:function(){return _.maxInt240}}),Object.defineProperty(t,"maxInt248",{enumerable:!0,get:function(){return _.maxInt248}}),Object.defineProperty(t,"maxInt256",{enumerable:!0,get:function(){return _.maxInt256}}),Object.defineProperty(t,"maxUint8",{enumerable:!0,get:function(){return _.maxUint8}}),Object.defineProperty(t,"maxUint16",{enumerable:!0,get:function(){return _.maxUint16}}),Object.defineProperty(t,"maxUint24",{enumerable:!0,get:function(){return _.maxUint24}}),Object.defineProperty(t,"maxUint32",{enumerable:!0,get:function(){return _.maxUint32}}),Object.defineProperty(t,"maxUint40",{enumerable:!0,get:function(){return _.maxUint40}}),Object.defineProperty(t,"maxUint48",{enumerable:!0,get:function(){return _.maxUint48}}),Object.defineProperty(t,"maxUint56",{enumerable:!0,get:function(){return _.maxUint56}}),Object.defineProperty(t,"maxUint64",{enumerable:!0,get:function(){return _.maxUint64}}),Object.defineProperty(t,"maxUint72",{enumerable:!0,get:function(){return _.maxUint72}}),Object.defineProperty(t,"maxUint80",{enumerable:!0,get:function(){return _.maxUint80}}),Object.defineProperty(t,"maxUint88",{enumerable:!0,get:function(){return _.maxUint88}}),Object.defineProperty(t,"maxUint96",{enumerable:!0,get:function(){return _.maxUint96}}),Object.defineProperty(t,"maxUint104",{enumerable:!0,get:function(){return _.maxUint104}}),Object.defineProperty(t,"maxUint112",{enumerable:!0,get:function(){return _.maxUint112}}),Object.defineProperty(t,"maxUint120",{enumerable:!0,get:function(){return _.maxUint120}}),Object.defineProperty(t,"maxUint128",{enumerable:!0,get:function(){return _.maxUint128}}),Object.defineProperty(t,"maxUint136",{enumerable:!0,get:function(){return _.maxUint136}}),Object.defineProperty(t,"maxUint144",{enumerable:!0,get:function(){return _.maxUint144}}),Object.defineProperty(t,"maxUint152",{enumerable:!0,get:function(){return _.maxUint152}}),Object.defineProperty(t,"maxUint160",{enumerable:!0,get:function(){return _.maxUint160}}),Object.defineProperty(t,"maxUint168",{enumerable:!0,get:function(){return _.maxUint168}}),Object.defineProperty(t,"maxUint176",{enumerable:!0,get:function(){return _.maxUint176}}),Object.defineProperty(t,"maxUint184",{enumerable:!0,get:function(){return _.maxUint184}}),Object.defineProperty(t,"maxUint192",{enumerable:!0,get:function(){return _.maxUint192}}),Object.defineProperty(t,"maxUint200",{enumerable:!0,get:function(){return _.maxUint200}}),Object.defineProperty(t,"maxUint208",{enumerable:!0,get:function(){return _.maxUint208}}),Object.defineProperty(t,"maxUint216",{enumerable:!0,get:function(){return _.maxUint216}}),Object.defineProperty(t,"maxUint224",{enumerable:!0,get:function(){return _.maxUint224}}),Object.defineProperty(t,"maxUint232",{enumerable:!0,get:function(){return _.maxUint232}}),Object.defineProperty(t,"maxUint240",{enumerable:!0,get:function(){return _.maxUint240}}),Object.defineProperty(t,"maxUint248",{enumerable:!0,get:function(){return _.maxUint248}}),Object.defineProperty(t,"maxUint256",{enumerable:!0,get:function(){return _.maxUint256}}),Object.defineProperty(t,"minInt8",{enumerable:!0,get:function(){return _.minInt8}}),Object.defineProperty(t,"minInt16",{enumerable:!0,get:function(){return _.minInt16}}),Object.defineProperty(t,"minInt24",{enumerable:!0,get:function(){return _.minInt24}}),Object.defineProperty(t,"minInt32",{enumerable:!0,get:function(){return _.minInt32}}),Object.defineProperty(t,"minInt40",{enumerable:!0,get:function(){return _.minInt40}}),Object.defineProperty(t,"minInt48",{enumerable:!0,get:function(){return _.minInt48}}),Object.defineProperty(t,"minInt56",{enumerable:!0,get:function(){return _.minInt56}}),Object.defineProperty(t,"minInt64",{enumerable:!0,get:function(){return _.minInt64}}),Object.defineProperty(t,"minInt72",{enumerable:!0,get:function(){return _.minInt72}}),Object.defineProperty(t,"minInt80",{enumerable:!0,get:function(){return _.minInt80}}),Object.defineProperty(t,"minInt88",{enumerable:!0,get:function(){return _.minInt88}}),Object.defineProperty(t,"minInt96",{enumerable:!0,get:function(){return _.minInt96}}),Object.defineProperty(t,"minInt104",{enumerable:!0,get:function(){return _.minInt104}}),Object.defineProperty(t,"minInt112",{enumerable:!0,get:function(){return _.minInt112}}),Object.defineProperty(t,"minInt120",{enumerable:!0,get:function(){return _.minInt120}}),Object.defineProperty(t,"minInt128",{enumerable:!0,get:function(){return _.minInt128}}),Object.defineProperty(t,"minInt136",{enumerable:!0,get:function(){return _.minInt136}}),Object.defineProperty(t,"minInt144",{enumerable:!0,get:function(){return _.minInt144}}),Object.defineProperty(t,"minInt152",{enumerable:!0,get:function(){return _.minInt152}}),Object.defineProperty(t,"minInt160",{enumerable:!0,get:function(){return _.minInt160}}),Object.defineProperty(t,"minInt168",{enumerable:!0,get:function(){return _.minInt168}}),Object.defineProperty(t,"minInt176",{enumerable:!0,get:function(){return _.minInt176}}),Object.defineProperty(t,"minInt184",{enumerable:!0,get:function(){return _.minInt184}}),Object.defineProperty(t,"minInt192",{enumerable:!0,get:function(){return _.minInt192}}),Object.defineProperty(t,"minInt200",{enumerable:!0,get:function(){return _.minInt200}}),Object.defineProperty(t,"minInt208",{enumerable:!0,get:function(){return _.minInt208}}),Object.defineProperty(t,"minInt216",{enumerable:!0,get:function(){return _.minInt216}}),Object.defineProperty(t,"minInt224",{enumerable:!0,get:function(){return _.minInt224}}),Object.defineProperty(t,"minInt232",{enumerable:!0,get:function(){return _.minInt232}}),Object.defineProperty(t,"minInt240",{enumerable:!0,get:function(){return _.minInt240}}),Object.defineProperty(t,"minInt248",{enumerable:!0,get:function(){return _.minInt248}}),Object.defineProperty(t,"minInt256",{enumerable:!0,get:function(){return _.minInt256}});var T=Qse();Object.defineProperty(t,"presignMessagePrefix",{enumerable:!0,get:function(){return T.presignMessagePrefix}});var P=QE();Object.defineProperty(t,"etherUnits",{enumerable:!0,get:function(){return P.etherUnits}}),Object.defineProperty(t,"gweiUnits",{enumerable:!0,get:function(){return P.gweiUnits}}),Object.defineProperty(t,"weiUnits",{enumerable:!0,get:function(){return P.weiUnits}});var D=Jn();Object.defineProperty(t,"AbiConstructorNotFoundError",{enumerable:!0,get:function(){return D.AbiConstructorNotFoundError}}),Object.defineProperty(t,"AbiConstructorParamsNotFoundError",{enumerable:!0,get:function(){return D.AbiConstructorParamsNotFoundError}}),Object.defineProperty(t,"AbiDecodingDataSizeInvalidError",{enumerable:!0,get:function(){return D.AbiDecodingDataSizeInvalidError}}),Object.defineProperty(t,"AbiDecodingDataSizeTooSmallError",{enumerable:!0,get:function(){return D.AbiDecodingDataSizeTooSmallError}}),Object.defineProperty(t,"AbiDecodingZeroDataError",{enumerable:!0,get:function(){return D.AbiDecodingZeroDataError}}),Object.defineProperty(t,"AbiEncodingArrayLengthMismatchError",{enumerable:!0,get:function(){return D.AbiEncodingArrayLengthMismatchError}}),Object.defineProperty(t,"AbiEncodingBytesSizeMismatchError",{enumerable:!0,get:function(){return D.AbiEncodingBytesSizeMismatchError}}),Object.defineProperty(t,"AbiEncodingLengthMismatchError",{enumerable:!0,get:function(){return D.AbiEncodingLengthMismatchError}}),Object.defineProperty(t,"AbiErrorInputsNotFoundError",{enumerable:!0,get:function(){return D.AbiErrorInputsNotFoundError}}),Object.defineProperty(t,"AbiErrorNotFoundError",{enumerable:!0,get:function(){return D.AbiErrorNotFoundError}}),Object.defineProperty(t,"AbiErrorSignatureNotFoundError",{enumerable:!0,get:function(){return D.AbiErrorSignatureNotFoundError}}),Object.defineProperty(t,"AbiEventNotFoundError",{enumerable:!0,get:function(){return D.AbiEventNotFoundError}}),Object.defineProperty(t,"AbiEventSignatureEmptyTopicsError",{enumerable:!0,get:function(){return D.AbiEventSignatureEmptyTopicsError}}),Object.defineProperty(t,"AbiEventSignatureNotFoundError",{enumerable:!0,get:function(){return D.AbiEventSignatureNotFoundError}}),Object.defineProperty(t,"AbiFunctionNotFoundError",{enumerable:!0,get:function(){return D.AbiFunctionNotFoundError}}),Object.defineProperty(t,"AbiFunctionOutputsNotFoundError",{enumerable:!0,get:function(){return D.AbiFunctionOutputsNotFoundError}}),Object.defineProperty(t,"AbiFunctionSignatureNotFoundError",{enumerable:!0,get:function(){return D.AbiFunctionSignatureNotFoundError}}),Object.defineProperty(t,"BytesSizeMismatchError",{enumerable:!0,get:function(){return D.BytesSizeMismatchError}}),Object.defineProperty(t,"DecodeLogDataMismatch",{enumerable:!0,get:function(){return D.DecodeLogDataMismatch}}),Object.defineProperty(t,"DecodeLogTopicsMismatch",{enumerable:!0,get:function(){return D.DecodeLogTopicsMismatch}}),Object.defineProperty(t,"InvalidAbiDecodingTypeError",{enumerable:!0,get:function(){return D.InvalidAbiDecodingTypeError}}),Object.defineProperty(t,"InvalidAbiEncodingTypeError",{enumerable:!0,get:function(){return D.InvalidAbiEncodingTypeError}}),Object.defineProperty(t,"InvalidArrayError",{enumerable:!0,get:function(){return D.InvalidArrayError}}),Object.defineProperty(t,"InvalidDefinitionTypeError",{enumerable:!0,get:function(){return D.InvalidDefinitionTypeError}}),Object.defineProperty(t,"UnsupportedPackedAbiType",{enumerable:!0,get:function(){return D.UnsupportedPackedAbiType}});var F=$u();Object.defineProperty(t,"InvalidAddressError",{enumerable:!0,get:function(){return F.InvalidAddressError}});var I=Kt();Object.defineProperty(t,"BaseError",{enumerable:!0,get:function(){return I.BaseError}}),Object.defineProperty(t,"setErrorConfig",{enumerable:!0,get:function(){return I.setErrorConfig}});var U=EB();Object.defineProperty(t,"BlockNotFoundError",{enumerable:!0,get:function(){return U.BlockNotFoundError}});var L=Sse();Object.defineProperty(t,"BundleFailedError",{enumerable:!0,get:function(){return L.BundleFailedError}});var B=d_();Object.defineProperty(t,"ChainDoesNotSupportContract",{enumerable:!0,get:function(){return B.ChainDoesNotSupportContract}}),Object.defineProperty(t,"ChainMismatchError",{enumerable:!0,get:function(){return B.ChainMismatchError}}),Object.defineProperty(t,"ChainNotFoundError",{enumerable:!0,get:function(){return B.ChainNotFoundError}}),Object.defineProperty(t,"ClientChainNotConfiguredError",{enumerable:!0,get:function(){return B.ClientChainNotConfiguredError}}),Object.defineProperty(t,"InvalidChainIdError",{enumerable:!0,get:function(){return B.InvalidChainIdError}});var A=Wh();Object.defineProperty(t,"CallExecutionError",{enumerable:!0,get:function(){return A.CallExecutionError}}),Object.defineProperty(t,"ContractFunctionExecutionError",{enumerable:!0,get:function(){return A.ContractFunctionExecutionError}}),Object.defineProperty(t,"ContractFunctionRevertedError",{enumerable:!0,get:function(){return A.ContractFunctionRevertedError}}),Object.defineProperty(t,"ContractFunctionZeroDataError",{enumerable:!0,get:function(){return A.ContractFunctionZeroDataError}}),Object.defineProperty(t,"CounterfactualDeploymentFailedError",{enumerable:!0,get:function(){return A.CounterfactualDeploymentFailedError}}),Object.defineProperty(t,"RawContractError",{enumerable:!0,get:function(){return A.RawContractError}});var m=wT();Object.defineProperty(t,"SizeExceedsPaddingSizeError",{enumerable:!0,get:function(){return m.SizeExceedsPaddingSizeError}}),Object.defineProperty(t,"SliceOffsetOutOfBoundsError",{enumerable:!0,get:function(){return m.SliceOffsetOutOfBoundsError}});var b=Xy();Object.defineProperty(t,"IntegerOutOfRangeError",{enumerable:!0,get:function(){return b.IntegerOutOfRangeError}}),Object.defineProperty(t,"InvalidBytesBooleanError",{enumerable:!0,get:function(){return b.InvalidBytesBooleanError}}),Object.defineProperty(t,"InvalidHexBooleanError",{enumerable:!0,get:function(){return b.InvalidHexBooleanError}}),Object.defineProperty(t,"InvalidHexValueError",{enumerable:!0,get:function(){return b.InvalidHexValueError}}),Object.defineProperty(t,"SizeOverflowError",{enumerable:!0,get:function(){return b.SizeOverflowError}});var w=WB();Object.defineProperty(t,"EnsAvatarInvalidNftUriError",{enumerable:!0,get:function(){return w.EnsAvatarInvalidNftUriError}}),Object.defineProperty(t,"EnsAvatarUnsupportedNamespaceError",{enumerable:!0,get:function(){return w.EnsAvatarUnsupportedNamespaceError}}),Object.defineProperty(t,"EnsAvatarUriResolutionError",{enumerable:!0,get:function(){return w.EnsAvatarUriResolutionError}}),Object.defineProperty(t,"EnsInvalidChainIdError",{enumerable:!0,get:function(){return w.EnsInvalidChainIdError}});var x=dse();Object.defineProperty(t,"EstimateGasExecutionError",{enumerable:!0,get:function(){return x.EstimateGasExecutionError}});var M=i_();Object.defineProperty(t,"BaseFeeScalarError",{enumerable:!0,get:function(){return M.BaseFeeScalarError}}),Object.defineProperty(t,"Eip1559FeesNotSupportedError",{enumerable:!0,get:function(){return M.Eip1559FeesNotSupportedError}}),Object.defineProperty(t,"MaxFeePerGasTooLowError",{enumerable:!0,get:function(){return M.MaxFeePerGasTooLowError}});var k=ese();Object.defineProperty(t,"FilterTypeNotSupportedError",{enumerable:!0,get:function(){return k.FilterTypeNotSupportedError}});var j=uf();Object.defineProperty(t,"ExecutionRevertedError",{enumerable:!0,get:function(){return j.ExecutionRevertedError}}),Object.defineProperty(t,"FeeCapTooHighError",{enumerable:!0,get:function(){return j.FeeCapTooHighError}}),Object.defineProperty(t,"FeeCapTooLowError",{enumerable:!0,get:function(){return j.FeeCapTooLowError}}),Object.defineProperty(t,"InsufficientFundsError",{enumerable:!0,get:function(){return j.InsufficientFundsError}}),Object.defineProperty(t,"IntrinsicGasTooHighError",{enumerable:!0,get:function(){return j.IntrinsicGasTooHighError}}),Object.defineProperty(t,"IntrinsicGasTooLowError",{enumerable:!0,get:function(){return j.IntrinsicGasTooLowError}}),Object.defineProperty(t,"NonceMaxValueError",{enumerable:!0,get:function(){return j.NonceMaxValueError}}),Object.defineProperty(t,"NonceTooHighError",{enumerable:!0,get:function(){return j.NonceTooHighError}}),Object.defineProperty(t,"NonceTooLowError",{enumerable:!0,get:function(){return j.NonceTooLowError}}),Object.defineProperty(t,"TipAboveFeeCapError",{enumerable:!0,get:function(){return j.TipAboveFeeCapError}}),Object.defineProperty(t,"TransactionTypeNotSupportedError",{enumerable:!0,get:function(){return j.TransactionTypeNotSupportedError}}),Object.defineProperty(t,"UnknownNodeError",{enumerable:!0,get:function(){return j.UnknownNodeError}});var N=Hu();Object.defineProperty(t,"HttpRequestError",{enumerable:!0,get:function(){return N.HttpRequestError}}),Object.defineProperty(t,"RpcRequestError",{enumerable:!0,get:function(){return N.RpcRequestError}}),Object.defineProperty(t,"SocketClosedError",{enumerable:!0,get:function(){return N.SocketClosedError}}),Object.defineProperty(t,"TimeoutError",{enumerable:!0,get:function(){return N.TimeoutError}}),Object.defineProperty(t,"WebSocketRequestError",{enumerable:!0,get:function(){return N.WebSocketRequestError}});var v=Vh();Object.defineProperty(t,"AtomicityNotSupportedError",{enumerable:!0,get:function(){return v.AtomicityNotSupportedError}}),Object.defineProperty(t,"AtomicReadyWalletRejectedUpgradeError",{enumerable:!0,get:function(){return v.AtomicReadyWalletRejectedUpgradeError}}),Object.defineProperty(t,"BundleTooLargeError",{enumerable:!0,get:function(){return v.BundleTooLargeError}}),Object.defineProperty(t,"ChainDisconnectedError",{enumerable:!0,get:function(){return v.ChainDisconnectedError}}),Object.defineProperty(t,"DuplicateIdError",{enumerable:!0,get:function(){return v.DuplicateIdError}}),Object.defineProperty(t,"InternalRpcError",{enumerable:!0,get:function(){return v.InternalRpcError}}),Object.defineProperty(t,"InvalidInputRpcError",{enumerable:!0,get:function(){return v.InvalidInputRpcError}}),Object.defineProperty(t,"InvalidParamsRpcError",{enumerable:!0,get:function(){return v.InvalidParamsRpcError}}),Object.defineProperty(t,"InvalidRequestRpcError",{enumerable:!0,get:function(){return v.InvalidRequestRpcError}}),Object.defineProperty(t,"JsonRpcVersionUnsupportedError",{enumerable:!0,get:function(){return v.JsonRpcVersionUnsupportedError}}),Object.defineProperty(t,"LimitExceededRpcError",{enumerable:!0,get:function(){return v.LimitExceededRpcError}}),Object.defineProperty(t,"MethodNotFoundRpcError",{enumerable:!0,get:function(){return v.MethodNotFoundRpcError}}),Object.defineProperty(t,"MethodNotSupportedRpcError",{enumerable:!0,get:function(){return v.MethodNotSupportedRpcError}}),Object.defineProperty(t,"ParseRpcError",{enumerable:!0,get:function(){return v.ParseRpcError}}),Object.defineProperty(t,"ProviderDisconnectedError",{enumerable:!0,get:function(){return v.ProviderDisconnectedError}}),Object.defineProperty(t,"ProviderRpcError",{enumerable:!0,get:function(){return v.ProviderRpcError}}),Object.defineProperty(t,"ResourceNotFoundRpcError",{enumerable:!0,get:function(){return v.ResourceNotFoundRpcError}}),Object.defineProperty(t,"ResourceUnavailableRpcError",{enumerable:!0,get:function(){return v.ResourceUnavailableRpcError}}),Object.defineProperty(t,"RpcError",{enumerable:!0,get:function(){return v.RpcError}}),Object.defineProperty(t,"SwitchChainError",{enumerable:!0,get:function(){return v.SwitchChainError}}),Object.defineProperty(t,"TransactionRejectedRpcError",{enumerable:!0,get:function(){return v.TransactionRejectedRpcError}}),Object.defineProperty(t,"UnauthorizedProviderError",{enumerable:!0,get:function(){return v.UnauthorizedProviderError}}),Object.defineProperty(t,"UnknownBundleIdError",{enumerable:!0,get:function(){return v.UnknownBundleIdError}}),Object.defineProperty(t,"UnknownRpcError",{enumerable:!0,get:function(){return v.UnknownRpcError}}),Object.defineProperty(t,"UnsupportedChainIdError",{enumerable:!0,get:function(){return v.UnsupportedChainIdError}}),Object.defineProperty(t,"UnsupportedNonOptionalCapabilityError",{enumerable:!0,get:function(){return v.UnsupportedNonOptionalCapabilityError}}),Object.defineProperty(t,"UnsupportedProviderMethodError",{enumerable:!0,get:function(){return v.UnsupportedProviderMethodError}}),Object.defineProperty(t,"UserRejectedRequestError",{enumerable:!0,get:function(){return v.UserRejectedRequestError}});var R=mB();Object.defineProperty(t,"AccountStateConflictError",{enumerable:!0,get:function(){return R.AccountStateConflictError}}),Object.defineProperty(t,"StateAssignmentConflictError",{enumerable:!0,get:function(){return R.StateAssignmentConflictError}});var $=Na();Object.defineProperty(t,"FeeConflictError",{enumerable:!0,get:function(){return $.FeeConflictError}}),Object.defineProperty(t,"InvalidLegacyVError",{enumerable:!0,get:function(){return $.InvalidLegacyVError}}),Object.defineProperty(t,"InvalidSerializableTransactionError",{enumerable:!0,get:function(){return $.InvalidSerializableTransactionError}}),Object.defineProperty(t,"InvalidSerializedTransactionError",{enumerable:!0,get:function(){return $.InvalidSerializedTransactionError}}),Object.defineProperty(t,"InvalidSerializedTransactionTypeError",{enumerable:!0,get:function(){return $.InvalidSerializedTransactionTypeError}}),Object.defineProperty(t,"InvalidStorageKeySizeError",{enumerable:!0,get:function(){return $.InvalidStorageKeySizeError}}),Object.defineProperty(t,"TransactionExecutionError",{enumerable:!0,get:function(){return $.TransactionExecutionError}}),Object.defineProperty(t,"TransactionNotFoundError",{enumerable:!0,get:function(){return $.TransactionNotFoundError}}),Object.defineProperty(t,"TransactionReceiptNotFoundError",{enumerable:!0,get:function(){return $.TransactionReceiptNotFoundError}}),Object.defineProperty(t,"WaitForTransactionReceiptTimeoutError",{enumerable:!0,get:function(){return $.WaitForTransactionReceiptTimeoutError}});var O=d9();Object.defineProperty(t,"UrlRequiredError",{enumerable:!0,get:function(){return O.UrlRequiredError}});var H=tie();Object.defineProperty(t,"InvalidDomainError",{enumerable:!0,get:function(){return H.InvalidDomainError}}),Object.defineProperty(t,"InvalidPrimaryTypeError",{enumerable:!0,get:function(){return H.InvalidPrimaryTypeError}}),Object.defineProperty(t,"InvalidStructTypeError",{enumerable:!0,get:function(){return H.InvalidStructTypeError}});var W=fie();Object.defineProperty(t,"InvalidDecimalNumberError",{enumerable:!0,get:function(){return W.InvalidDecimalNumberError}});var G=v7e();Object.defineProperty(t,"EIP1193ProviderRpcError",{enumerable:!0,get:function(){return G.ProviderRpcError}});var K=zh();Object.defineProperty(t,"decodeAbiParameters",{enumerable:!0,get:function(){return K.decodeAbiParameters}});var Q=E7e();Object.defineProperty(t,"decodeDeployData",{enumerable:!0,get:function(){return Q.decodeDeployData}});var re=AT();Object.defineProperty(t,"decodeErrorResult",{enumerable:!0,get:function(){return re.decodeErrorResult}});var de=c_();Object.defineProperty(t,"decodeEventLog",{enumerable:!0,get:function(){return de.decodeEventLog}});var le=kB();Object.defineProperty(t,"decodeFunctionData",{enumerable:!0,get:function(){return le.decodeFunctionData}});var se=df();Object.defineProperty(t,"decodeFunctionResult",{enumerable:!0,get:function(){return se.decodeFunctionResult}});var be=qu();Object.defineProperty(t,"encodeAbiParameters",{enumerable:!0,get:function(){return be.encodeAbiParameters}});var We=f_();Object.defineProperty(t,"encodeDeployData",{enumerable:!0,get:function(){return We.encodeDeployData}});var Ne=BB();Object.defineProperty(t,"encodeErrorResult",{enumerable:!0,get:function(){return Ne.encodeErrorResult}});var Be=ng();Object.defineProperty(t,"encodeEventTopics",{enumerable:!0,get:function(){return Be.encodeEventTopics}});var At=Ta();Object.defineProperty(t,"encodeFunctionData",{enumerable:!0,get:function(){return At.encodeFunctionData}});var Ee=UB();Object.defineProperty(t,"encodeFunctionResult",{enumerable:!0,get:function(){return Ee.encodeFunctionResult}});var fe=Mse();Object.defineProperty(t,"encodePacked",{enumerable:!0,get:function(){return fe.encodePacked}});var Mt=cf();Object.defineProperty(t,"getAbiItem",{enumerable:!0,get:function(){return Mt.getAbiItem}});var bt=u_();Object.defineProperty(t,"parseEventLogs",{enumerable:!0,get:function(){return bt.parseEventLogs}});var jt=nse();Object.defineProperty(t,"prepareEncodeFunctionData",{enumerable:!0,get:function(){return jt.prepareEncodeFunctionData}});var ge=lc();Object.defineProperty(t,"checksumAddress",{enumerable:!0,get:function(){return ge.checksumAddress}}),Object.defineProperty(t,"getAddress",{enumerable:!0,get:function(){return ge.getAddress}});var ve=Dse();Object.defineProperty(t,"getContractAddress",{enumerable:!0,get:function(){return ve.getContractAddress}}),Object.defineProperty(t,"getCreate2Address",{enumerable:!0,get:function(){return ve.getCreate2Address}}),Object.defineProperty(t,"getCreateAddress",{enumerable:!0,get:function(){return ve.getCreateAddress}});var V=Ia();Object.defineProperty(t,"isAddress",{enumerable:!0,get:function(){return V.isAddress}});var q=Vu();Object.defineProperty(t,"isAddressEqual",{enumerable:!0,get:function(){return q.isAddressEqual}});var z=TT();Object.defineProperty(t,"blobsToCommitments",{enumerable:!0,get:function(){return z.blobsToCommitments}});var X=NT();Object.defineProperty(t,"blobsToProofs",{enumerable:!0,get:function(){return X.blobsToProofs}});var ne=CB();Object.defineProperty(t,"commitmentsToVersionedHashes",{enumerable:!0,get:function(){return ne.commitmentsToVersionedHashes}});var ce=xB();Object.defineProperty(t,"commitmentToVersionedHash",{enumerable:!0,get:function(){return ce.commitmentToVersionedHash}});var me=_7e();Object.defineProperty(t,"fromBlobs",{enumerable:!0,get:function(){return me.fromBlobs}});var Rt=A7e();Object.defineProperty(t,"sidecarsToVersionedHashes",{enumerable:!0,get:function(){return Rt.sidecarsToVersionedHashes}});var Tt=PT();Object.defineProperty(t,"toBlobSidecars",{enumerable:!0,get:function(){return Tt.toBlobSidecars}});var Ct=bse();Object.defineProperty(t,"toBlobs",{enumerable:!0,get:function(){return Ct.toBlobs}});var or=MB();Object.defineProperty(t,"ccipRequest",{enumerable:!0,get:function(){return or.ccipRequest}}),Object.defineProperty(t,"ccipFetch",{enumerable:!0,get:function(){return or.ccipRequest}}),Object.defineProperty(t,"offchainLookup",{enumerable:!0,get:function(){return or.offchainLookup}}),Object.defineProperty(t,"offchainLookupAbiItem",{enumerable:!0,get:function(){return or.offchainLookupAbiItem}}),Object.defineProperty(t,"offchainLookupSignature",{enumerable:!0,get:function(){return or.offchainLookupSignature}});var Et=g_();Object.defineProperty(t,"assertCurrentChain",{enumerable:!0,get:function(){return Et.assertCurrentChain}});var on=$se();Object.defineProperty(t,"defineChain",{enumerable:!0,get:function(){return on.defineChain}});var Zc=qse();Object.defineProperty(t,"extractChain",{enumerable:!0,get:function(){return Zc.extractChain}});var Qr=Xh();Object.defineProperty(t,"getChainContractAddress",{enumerable:!0,get:function(){return Qr.getChainContractAddress}});var Wr=fi();Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return Wr.concat}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return Wr.concatBytes}}),Object.defineProperty(t,"concatHex",{enumerable:!0,get:function(){return Wr.concatHex}});var Yc=VB();Object.defineProperty(t,"isBytes",{enumerable:!0,get:function(){return Yc.isBytes}});var an=$o();Object.defineProperty(t,"isHex",{enumerable:!0,get:function(){return an.isHex}});var Vr=qh();Object.defineProperty(t,"pad",{enumerable:!0,get:function(){return Vr.pad}}),Object.defineProperty(t,"padBytes",{enumerable:!0,get:function(){return Vr.padBytes}}),Object.defineProperty(t,"padHex",{enumerable:!0,get:function(){return Vr.padHex}});var Jc=Ca();Object.defineProperty(t,"size",{enumerable:!0,get:function(){return Jc.size}});var Gr=Gc();Object.defineProperty(t,"slice",{enumerable:!0,get:function(){return Gr.slice}}),Object.defineProperty(t,"sliceBytes",{enumerable:!0,get:function(){return Gr.sliceBytes}}),Object.defineProperty(t,"sliceHex",{enumerable:!0,get:function(){return Gr.sliceHex}});var cn=af();Object.defineProperty(t,"trim",{enumerable:!0,get:function(){return cn.trim}});var wo=gB();Object.defineProperty(t,"bytesToBigInt",{enumerable:!0,get:function(){return wo.bytesToBigInt}}),Object.defineProperty(t,"bytesToBool",{enumerable:!0,get:function(){return wo.bytesToBool}}),Object.defineProperty(t,"bytesToNumber",{enumerable:!0,get:function(){return wo.bytesToNumber}}),Object.defineProperty(t,"bytesToString",{enumerable:!0,get:function(){return wo.bytesToString}}),Object.defineProperty(t,"fromBytes",{enumerable:!0,get:function(){return wo.fromBytes}});var Sr=ys();Object.defineProperty(t,"fromHex",{enumerable:!0,get:function(){return Sr.fromHex}}),Object.defineProperty(t,"hexToBigInt",{enumerable:!0,get:function(){return Sr.hexToBigInt}}),Object.defineProperty(t,"hexToBool",{enumerable:!0,get:function(){return Sr.hexToBool}}),Object.defineProperty(t,"hexToNumber",{enumerable:!0,get:function(){return Sr.hexToNumber}}),Object.defineProperty(t,"hexToString",{enumerable:!0,get:function(){return Sr.hexToString}});var un=KB();Object.defineProperty(t,"fromRlp",{enumerable:!0,get:function(){return un.fromRlp}});var vo=Pn();Object.defineProperty(t,"boolToBytes",{enumerable:!0,get:function(){return vo.boolToBytes}}),Object.defineProperty(t,"hexToBytes",{enumerable:!0,get:function(){return vo.hexToBytes}}),Object.defineProperty(t,"numberToBytes",{enumerable:!0,get:function(){return vo.numberToBytes}}),Object.defineProperty(t,"stringToBytes",{enumerable:!0,get:function(){return vo.stringToBytes}}),Object.defineProperty(t,"toBytes",{enumerable:!0,get:function(){return vo.toBytes}});var Ir=tt();Object.defineProperty(t,"boolToHex",{enumerable:!0,get:function(){return Ir.boolToHex}}),Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return Ir.bytesToHex}}),Object.defineProperty(t,"numberToHex",{enumerable:!0,get:function(){return Ir.numberToHex}}),Object.defineProperty(t,"stringToHex",{enumerable:!0,get:function(){return Ir.stringToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return Ir.toHex}});var Kr=t_();Object.defineProperty(t,"bytesToRlp",{enumerable:!0,get:function(){return Kr.bytesToRlp}}),Object.defineProperty(t,"hexToRlp",{enumerable:!0,get:function(){return Kr.hexToRlp}}),Object.defineProperty(t,"toRlp",{enumerable:!0,get:function(){return Kr.toRlp}});var Xc=Pse();Object.defineProperty(t,"labelhash",{enumerable:!0,get:function(){return Xc.labelhash}});var ln=HB();Object.defineProperty(t,"namehash",{enumerable:!0,get:function(){return ln.namehash}});var Zr=x7e();Object.defineProperty(t,"toCoinType",{enumerable:!0,get:function(){return Zr.toCoinType}});var Qc=Gh();Object.defineProperty(t,"getContractError",{enumerable:!0,get:function(){return Qc.getContractError}});var en=ST();Object.defineProperty(t,"defineBlock",{enumerable:!0,get:function(){return en.defineBlock}}),Object.defineProperty(t,"formatBlock",{enumerable:!0,get:function(){return en.formatBlock}});var dn=lf();Object.defineProperty(t,"formatLog",{enumerable:!0,get:function(){return dn.formatLog}});var Ra=eb();Object.defineProperty(t,"defineTransaction",{enumerable:!0,get:function(){return Ra.defineTransaction}}),Object.defineProperty(t,"formatTransaction",{enumerable:!0,get:function(){return Ra.formatTransaction}}),Object.defineProperty(t,"transactionType",{enumerable:!0,get:function(){return Ra.transactionType}});var tn=m_();Object.defineProperty(t,"defineTransactionReceipt",{enumerable:!0,get:function(){return tn.defineTransactionReceipt}}),Object.defineProperty(t,"formatTransactionReceipt",{enumerable:!0,get:function(){return tn.formatTransactionReceipt}});var Br=zu();Object.defineProperty(t,"defineTransactionRequest",{enumerable:!0,get:function(){return Br.defineTransactionRequest}}),Object.defineProperty(t,"formatTransactionRequest",{enumerable:!0,get:function(){return Br.formatTransactionRequest}}),Object.defineProperty(t,"rpcTransactionType",{enumerable:!0,get:function(){return Br.rpcTransactionType}});var hc=ZB();Object.defineProperty(t,"isHash",{enumerable:!0,get:function(){return hc.isHash}});var pc=Sa();Object.defineProperty(t,"keccak256",{enumerable:!0,get:function(){return pc.keccak256}});var gc=zse();Object.defineProperty(t,"ripemd160",{enumerable:!0,get:function(){return gc.ripemd160}});var mc=AB();Object.defineProperty(t,"sha256",{enumerable:!0,get:function(){return mc.sha256}});var yc=Wse();Object.defineProperty(t,"toEventHash",{enumerable:!0,get:function(){return yc.toEventHash}});var ff=Qy();Object.defineProperty(t,"toEventSelector",{enumerable:!0,get:function(){return ff.toEventSelector}}),Object.defineProperty(t,"getEventSelector",{enumerable:!0,get:function(){return ff.toEventSelector}});var dg=Vse();Object.defineProperty(t,"toEventSignature",{enumerable:!0,get:function(){return dg.toEventSignature}}),Object.defineProperty(t,"getEventSignature",{enumerable:!0,get:function(){return dg.toEventSignature}});var ub=Gse();Object.defineProperty(t,"toFunctionHash",{enumerable:!0,get:function(){return ub.toFunctionHash}});var fg=rg();Object.defineProperty(t,"toFunctionSelector",{enumerable:!0,get:function(){return fg.toFunctionSelector}}),Object.defineProperty(t,"getFunctionSelector",{enumerable:!0,get:function(){return fg.toFunctionSelector}});var hg=Kse();Object.defineProperty(t,"toFunctionSignature",{enumerable:!0,get:function(){return hg.toFunctionSignature}}),Object.defineProperty(t,"getFunctionSignature",{enumerable:!0,get:function(){return hg.toFunctionSignature}});var lb=Iie();Object.defineProperty(t,"defineKzg",{enumerable:!0,get:function(){return lb.defineKzg}});var db=C7e();Object.defineProperty(t,"setupKzg",{enumerable:!0,get:function(){return db.setupKzg}});var pg=Zse();Object.defineProperty(t,"createNonceManager",{enumerable:!0,get:function(){return pg.createNonceManager}}),Object.defineProperty(t,"nonceManager",{enumerable:!0,get:function(){return pg.nonceManager}});var fb=xse();Object.defineProperty(t,"withCache",{enumerable:!0,get:function(){return fb.withCache}});var hb=DT();Object.defineProperty(t,"withRetry",{enumerable:!0,get:function(){return hb.withRetry}});var pb=YB();Object.defineProperty(t,"withTimeout",{enumerable:!0,get:function(){return pb.withTimeout}});var gb=S7e();Object.defineProperty(t,"compactSignatureToSignature",{enumerable:!0,get:function(){return gb.compactSignatureToSignature}});var mb=y_();Object.defineProperty(t,"hashMessage",{enumerable:!0,get:function(){return mb.hashMessage}});var rp=b_();Object.defineProperty(t,"hashDomain",{enumerable:!0,get:function(){return rp.hashDomain}}),Object.defineProperty(t,"hashStruct",{enumerable:!0,get:function(){return rp.hashStruct}}),Object.defineProperty(t,"hashTypedData",{enumerable:!0,get:function(){return rp.hashTypedData}});var Hae=e9();Object.defineProperty(t,"isErc6492Signature",{enumerable:!0,get:function(){return Hae.isErc6492Signature}});var zae=n9();Object.defineProperty(t,"isErc8010Signature",{enumerable:!0,get:function(){return zae.isErc8010Signature}});var U9=I7e();Object.defineProperty(t,"hexToCompactSignature",{enumerable:!0,get:function(){return U9.parseCompactSignature}}),Object.defineProperty(t,"parseCompactSignature",{enumerable:!0,get:function(){return U9.parseCompactSignature}});var Wae=iie();Object.defineProperty(t,"parseErc6492Signature",{enumerable:!0,get:function(){return Wae.parseErc6492Signature}});var Vae=oie();Object.defineProperty(t,"parseErc8010Signature",{enumerable:!0,get:function(){return Vae.parseErc8010Signature}});var M9=T7e();Object.defineProperty(t,"hexToSignature",{enumerable:!0,get:function(){return M9.parseSignature}}),Object.defineProperty(t,"parseSignature",{enumerable:!0,get:function(){return M9.parseSignature}});var Gae=Kh();Object.defineProperty(t,"recoverAddress",{enumerable:!0,get:function(){return Gae.recoverAddress}});var Kae=s9();Object.defineProperty(t,"recoverMessageAddress",{enumerable:!0,get:function(){return Kae.recoverMessageAddress}});var Zae=bB();Object.defineProperty(t,"recoverPublicKey",{enumerable:!0,get:function(){return Zae.recoverPublicKey}});var Yae=N7e();Object.defineProperty(t,"recoverTransactionAddress",{enumerable:!0,get:function(){return Yae.recoverTransactionAddress}});var Jae=i9();Object.defineProperty(t,"recoverTypedDataAddress",{enumerable:!0,get:function(){return Jae.recoverTypedDataAddress}});var D9=P7e();Object.defineProperty(t,"compactSignatureToHex",{enumerable:!0,get:function(){return D9.serializeCompactSignature}}),Object.defineProperty(t,"serializeCompactSignature",{enumerable:!0,get:function(){return D9.serializeCompactSignature}});var Xae=aie();Object.defineProperty(t,"serializeErc6492Signature",{enumerable:!0,get:function(){return Xae.serializeErc6492Signature}});var Qae=cie();Object.defineProperty(t,"serializeErc8010Signature",{enumerable:!0,get:function(){return Qae.serializeErc8010Signature}});var j9=wie();Object.defineProperty(t,"signatureToHex",{enumerable:!0,get:function(){return j9.serializeSignature}}),Object.defineProperty(t,"serializeSignature",{enumerable:!0,get:function(){return j9.serializeSignature}});var ece=R7e();Object.defineProperty(t,"signatureToCompactSignature",{enumerable:!0,get:function(){return ece.signatureToCompactSignature}});var tce=eie();Object.defineProperty(t,"toPrefixedMessage",{enumerable:!0,get:function(){return tce.toPrefixedMessage}});var rce=uie();Object.defineProperty(t,"verifyHash",{enumerable:!0,get:function(){return rce.verifyHash}});var nce=lie();Object.defineProperty(t,"verifyMessage",{enumerable:!0,get:function(){return nce.verifyMessage}});var sce=die();Object.defineProperty(t,"verifyTypedData",{enumerable:!0,get:function(){return sce.verifyTypedData}});var ice=Li();Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return ice.stringify}});var oce=Wu();Object.defineProperty(t,"assertRequest",{enumerable:!0,get:function(){return oce.assertRequest}});var i3=LT();Object.defineProperty(t,"assertTransactionEIP1559",{enumerable:!0,get:function(){return i3.assertTransactionEIP1559}}),Object.defineProperty(t,"assertTransactionEIP2930",{enumerable:!0,get:function(){return i3.assertTransactionEIP2930}}),Object.defineProperty(t,"assertTransactionLegacy",{enumerable:!0,get:function(){return i3.assertTransactionLegacy}});var ace=o9();Object.defineProperty(t,"getSerializedTransactionType",{enumerable:!0,get:function(){return ace.getSerializedTransactionType}});var cce=RT();Object.defineProperty(t,"getTransactionType",{enumerable:!0,get:function(){return cce.getTransactionType}});var uce=a9();Object.defineProperty(t,"parseTransaction",{enumerable:!0,get:function(){return uce.parseTransaction}});var lce=GB();Object.defineProperty(t,"serializeAccessList",{enumerable:!0,get:function(){return lce.serializeAccessList}});var dce=FT();Object.defineProperty(t,"serializeTransaction",{enumerable:!0,get:function(){return dce.serializeTransaction}});var R_=$T();Object.defineProperty(t,"domainSeparator",{enumerable:!0,get:function(){return R_.domainSeparator}}),Object.defineProperty(t,"getTypesForEIP712Domain",{enumerable:!0,get:function(){return R_.getTypesForEIP712Domain}}),Object.defineProperty(t,"serializeTypedData",{enumerable:!0,get:function(){return R_.serializeTypedData}}),Object.defineProperty(t,"validateTypedData",{enumerable:!0,get:function(){return R_.validateTypedData}});var fce=e_();Object.defineProperty(t,"formatEther",{enumerable:!0,get:function(){return fce.formatEther}});var hce=sg();Object.defineProperty(t,"formatGwei",{enumerable:!0,get:function(){return hce.formatGwei}});var pce=xT();Object.defineProperty(t,"formatUnits",{enumerable:!0,get:function(){return pce.formatUnits}});var gce=hie();Object.defineProperty(t,"parseEther",{enumerable:!0,get:function(){return gce.parseEther}});var mce=pie();Object.defineProperty(t,"parseGwei",{enumerable:!0,get:function(){return mce.parseGwei}});var yce=zT();Object.defineProperty(t,"parseUnits",{enumerable:!0,get:function(){return yce.parseUnits}})})(MP)),MP}var Pp={},XG;function k7e(){if(XG)return Pp;XG=1,Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.MAGIC_VALUE_BYTES=Pp.MAGIC_VALUE=void 0;const t="0x1626ba7e";Pp.MAGIC_VALUE=t;const e="0x20c13b0b";return Pp.MAGIC_VALUE_BYTES=e,Pp}var LS={},Kw={},Rp={},QG;function Tie(){if(QG)return Rp;QG=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.PermissionsError=Rp.PERMISSIONS_REQUEST_REJECTED=void 0,Rp.PERMISSIONS_REQUEST_REJECTED=4001;class t extends Error{constructor(r,n,s){super(r),this.code=n,this.data=s,Object.setPrototypeOf(this,t.prototype)}}return Rp.PermissionsError=t,Rp}var eK;function Nie(){if(eK)return Kw;eK=1,Object.defineProperty(Kw,"__esModule",{value:!0}),Kw.Wallet=void 0;const t=eg(),e=Tie();class r{constructor(s){this.communicator=s}async getPermissions(){return(await this.communicator.send(t.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(s){if(!this.isPermissionRequestValid(s))throw new e.PermissionsError("Permissions request is invalid",e.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(t.Methods.wallet_requestPermissions,s)).data}catch{throw new e.PermissionsError("Permissions rejected",e.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(s){return s.every(i=>typeof i=="object"?Object.keys(i).every(o=>!!Object.values(t.RestrictedMethods).includes(o)):!1)}}return Kw.Wallet=r,Kw}var tK;function B7e(){if(tK)return LS;tK=1,Object.defineProperty(LS,"__esModule",{value:!0});const t=Nie(),e=Tie(),r=(s,i)=>i.some(o=>o.parentCapability===s),n=()=>(s,i,o)=>{const a=o.value;return o.value=async function(){const c=new t.Wallet(this.communicator);let u=await c.getPermissions();if(r(i,u)||(u=await c.requestPermissions([{[i]:{}}])),!r(i,u))throw new e.PermissionsError("Permissions rejected",e.PERMISSIONS_REQUEST_REJECTED);return a.apply(this)},o};return LS.default=n,LS}var rK;function U7e(){if(rK)return ad;rK=1;var t=ad&&ad.__decorate||function(u,l,d,f){var p=arguments.length,g=p<3?l:f===null?f=Object.getOwnPropertyDescriptor(l,d):f,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(u,l,d,f);else for(var y=u.length-1;y>=0;y--)(h=u[y])&&(g=(p<3?h(g):p>3?h(l,d,g):h(l,d))||g);return p>3&&g&&Object.defineProperty(l,d,g),g},e=ad&&ad.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(ad,"__esModule",{value:!0}),ad.Safe=void 0;const r=O7e(),n=k7e(),s=eg(),i=lB(),o=uB(),a=e(B7e());class c{constructor(l){this.communicator=l}async getChainInfo(){return(await this.communicator.send(s.Methods.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(s.Methods.getSafeInfo,void 0)).data}async experimental_getBalances({currency:l="usd"}={}){return(await this.communicator.send(s.Methods.getSafeBalances,{currency:l})).data}async check1271Signature(l,d="0x"){const f=await this.getInfo(),p=(0,r.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[l,d]}),g={call:i.RPC_CALLS.eth_call,params:[{to:f.safeAddress,data:p},"latest"]};try{return(await this.communicator.send(s.Methods.rpcCall,g)).data.slice(0,10).toLowerCase()===n.MAGIC_VALUE}catch{return!1}}async check1271SignatureBytes(l,d="0x"){const f=await this.getInfo(),p=(0,r.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[l,d]}),g={call:i.RPC_CALLS.eth_call,params:[{to:f.safeAddress,data:p},"latest"]};try{return(await this.communicator.send(s.Methods.rpcCall,g)).data.slice(0,10).toLowerCase()===n.MAGIC_VALUE_BYTES}catch{return!1}}calculateMessageHash(l){return(0,r.hashMessage)(l)}calculateTypedMessageHash(l){const d=typeof l.domain.chainId=="object"?l.domain.chainId.toNumber():Number(l.domain.chainId);let f=l.primaryType;if(!f){const p=Object.values(l.types),g=Object.keys(l.types).filter(h=>p.every(y=>y.every(({type:E})=>E.replace("[","").replace("]","")!==h)));if(g.length===0||g.length>1)throw new Error("Please specify primaryType");f=g[0]}return(0,r.hashTypedData)({message:l.message,domain:{...l.domain,chainId:d,verifyingContract:l.domain.verifyingContract,salt:l.domain.salt},types:l.types,primaryType:f})}async getOffChainSignature(l){return(await this.communicator.send(s.Methods.getOffChainSignature,l)).data}async isMessageSigned(l,d="0x"){let f;if(typeof l=="string"&&(f=async()=>{const p=this.calculateMessageHash(l);return await this.isMessageHashSigned(p,d)}),(0,o.isObjectEIP712TypedData)(l)&&(f=async()=>{const p=this.calculateTypedMessageHash(l);return await this.isMessageHashSigned(p,d)}),f)return await f();throw new Error("Invalid message type")}async isMessageHashSigned(l,d="0x"){const f=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const p of f)if(await p(l,d))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(s.Methods.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(s.Methods.requestAddressBook,void 0)).data}}return ad.Safe=c,t([(0,a.default)()],c.prototype,"requestAddressBook",null),ad}var nK;function sK(){if(nK)return kg;nK=1;var t=kg&&kg.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(kg,"__esModule",{value:!0});const e=t(M9e()),r=tUe(),n=rUe(),s=U7e(),i=Nie();class o{constructor(c={}){const{allowedDomains:u=null,debug:l=!1}=c;this.communicator=new e.default(u,l),this.eth=new n.Eth(this.communicator),this.txs=new r.TXs(this.communicator),this.safe=new s.Safe(this.communicator),this.wallet=new i.Wallet(this.communicator)}}return kg.default=o,kg}var iK;function M7e(){return iK||(iK=1,(function(t){var e=nd&&nd.__createBinding||(Object.create?(function(o,a,c,u){u===void 0&&(u=c);var l=Object.getOwnPropertyDescriptor(a,c);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,u,l)}):(function(o,a,c,u){u===void 0&&(u=c),o[u]=a[c]})),r=nd&&nd.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,o,c)},n=nd&&nd.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSDKVersion=void 0;const s=n(sK());t.default=s.default,r(sK(),t),r(uB(),t),r(eg(),t),r(Kne(),t);var i=Gne();Object.defineProperty(t,"getSDKVersion",{enumerable:!0,get:function(){return i.getSDKVersion}}),r(lB(),t)})(nd)),nd}var Op={},oK;function D7e(){if(oK)return Op;oK=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.numberToHex=Op.getLowerCase=void 0;function t(r){return r&&r.toLowerCase()}Op.getLowerCase=t;function e(r){return`0x${r.toString(16)}`}return Op.numberToHex=e,Op}var aK;function j7e(){if(aK)return Wb;aK=1,Object.defineProperty(Wb,"__esModule",{value:!0}),Wb.SafeAppProvider=void 0;const t=M7e(),e=yJ(),r=D7e();class n extends e.EventEmitter{constructor(i,o){super(),this.submittedTxs=new Map,this.safe=i,this.sdk=o}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(i){const{method:o,params:a=[]}=i;switch(o){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,r.numberToHex)(this.chainId);case"personal_sign":{const[f,p]=a;if(this.safe.safeAddress.toLowerCase()!==p.toLowerCase())throw new Error("The address or message hash is invalid");const g=await this.sdk.txs.signMessage(f);return("signature"in g?g.signature:void 0)||"0x"}case"eth_sign":{const[f,p]=a;if(this.safe.safeAddress.toLowerCase()!==f.toLowerCase()||!p.startsWith("0x"))throw new Error("The address or message hash is invalid");const g=await this.sdk.txs.signMessage(p);return("signature"in g?g.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[f,p]=a,g=typeof p=="string"?JSON.parse(p):p;if(this.safe.safeAddress.toLowerCase()!==f.toLowerCase())throw new Error("The address is invalid");const h=await this.sdk.txs.signTypedMessage(g);return("signature"in h?h.signature:void 0)||"0x"}case"eth_sendTransaction":const c={...a[0],value:a[0].value||"0",data:a[0].data||"0x"};typeof c.gas=="string"&&c.gas.startsWith("0x")&&(c.gas=parseInt(c.gas,16));const u=await this.sdk.txs.send({txs:[c],params:{safeTxGas:c.gas}});return this.submittedTxs.set(u.safeTxHash,{from:this.safe.safeAddress,hash:u.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:c.data,value:c.value,to:c.to,blockHash:null,blockNumber:null,transactionIndex:null}),u.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,r.getLowerCase)(a[0]),a[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,r.getLowerCase)(a[0]),a[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,r.getLowerCase)(a[0]),a[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,r.getLowerCase)(a[0]),a[1],a[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([a[0],a[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([a[0],a[1]]);case"eth_getTransactionByHash":let d=a[0];try{d=(await this.sdk.txs.getBySafeTxHash(d)).txHash||d}catch{}return this.submittedTxs.has(d)?this.submittedTxs.get(d):this.sdk.eth.getTransactionByHash([d]).then(f=>(f&&(f.hash=a[0]),f));case"eth_getTransactionReceipt":{let f=a[0];try{f=(await this.sdk.txs.getBySafeTxHash(f)).txHash||f}catch{}return this.sdk.eth.getTransactionReceipt([f]).then(p=>(p&&(p.transactionHash=a[0]),p))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(a[0]);case"eth_call":return this.sdk.eth.call([a[0],a[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([a[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(a[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([a[0]]);case"wallet_sendCalls":{const{from:f,calls:p,chainId:g}=a[0];if(g!==(0,r.numberToHex)(this.chainId))throw new Error(`Safe is not on chain ${g}`);if(f!==this.safe.safeAddress)throw Error("Invalid from address");const h=p.map((S,C)=>{if(!S.to)throw new Error(`Invalid call #${C}: missing "to" field`);return{to:S.to,data:S.data??"0x",value:S.value??(0,r.numberToHex)(0)}}),{safeTxHash:y}=await this.sdk.txs.send({txs:h});return{id:y}}case"wallet_getCallsStatus":{const f=a[0],p={[t.TransactionStatus.AWAITING_CONFIRMATIONS]:100,[t.TransactionStatus.AWAITING_EXECUTION]:100,[t.TransactionStatus.SUCCESS]:200,[t.TransactionStatus.CANCELLED]:400,[t.TransactionStatus.FAILED]:500},g=await this.sdk.txs.getBySafeTxHash(f),h={version:"1.0",id:f,chainId:(0,r.numberToHex)(this.chainId),status:p[g.txStatus]};if(!g.txHash)return h;const y=await this.sdk.eth.getTransactionReceipt([g.txHash]);if(!y)return h;const E=g.txData?.dataDecoded?.method!=="multiSend"?1:g.txData.dataDecoded.parameters?.[0].valueDecoded?.length??1,S=Number(y.blockNumber),C=Number(y.gasUsed);return h.receipts=Array(E).fill({logs:y.logs,status:(0,r.numberToHex)(g.txStatus===t.TransactionStatus.SUCCESS?1:0),blockHash:y.blockHash,blockNumber:(0,r.numberToHex)(S),gasUsed:(0,r.numberToHex)(C),transactionHash:g.txHash}),h}case"wallet_showCallsStatus":throw new Error(`"${i.method}" not supported`);case"wallet_getCapabilities":return{[(0,r.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${i.method}" not implemented`)}}send(i,o){i||o("Undefined request"),this.request(i).then(a=>o(null,{jsonrpc:"2.0",id:i.id,result:a})).catch(a=>o(a,null))}}return Wb.SafeAppProvider=n,Wb}var cK;function L7e(){return cK||(cK=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SafeAppProvider=void 0;var e=j7e();Object.defineProperty(t,"SafeAppProvider",{enumerable:!0,get:function(){return e.SafeAppProvider}})})(PP)),PP}var F7e=L7e();class $7e extends F7e.SafeAppProvider{request(e){return e.method==="eth_requestAccounts"?this.request({method:"eth_accounts",params:[]}):super.request(e)}}class q7e extends cB{async initialize(){const{default:e}=await Pr(async()=>{const{default:i}=await import("./index-tlUtzmPx.js");return{default:i}},__vite__mapDeps([58,2])),r=new e,n=await r.safe.getInfo(),s=new $7e(n,r);await s.connect().catch(i=>{console.info("Failed to auto-connect to Safe:",i)}),this.provider=s,this.initialized=!0}async getProvider(){return Promise.resolve(this.provider)}}class H7e extends cB{async initialize(){if(!(typeof window>"u")&&window.ethereum)return this.provider=window.ethereum,this.initialized=!0,Promise.resolve()}}const Qg={signMessage:async(t,e,r)=>{if(!e)throw new Error("signMessage - provider is undefined");const n=Er(t)?t:je(ms(t));return await e.request({method:"personal_sign",params:[n,r]})},estimateGas:async(t,e,r,n)=>{if(!e)throw new Error("estimateGas - provider is undefined");if(!r)throw new Error("estimateGas - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("estimateGas - chainNamespace is not eip155");const s={from:t.address,to:t.to,data:t.data,type:0};return(await new NP(e,n).getSigner(r).estimateGas(s)).toBigInt()},sendTransaction:async(t,e,r,n)=>{if(!e)throw new Error("sendTransaction - provider is undefined");if(!r)throw new Error("sendTransaction - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("sendTransaction - chainNamespace is not eip155");const s={to:t.to,value:t.value,gasLimit:t.gas,gasPrice:t.gasPrice,data:t.data,type:0};return(await(await new NP(e,n).getSigner(r).sendTransaction(s)).wait())?.blockHash||null},writeContract:async(t,e,r,n)=>{if(!e)throw new Error("writeContract - provider is undefined");if(!r)throw new Error("writeContract - address is undefined");const i=new NP(e,n).getSigner(r),o=new qke(t.tokenAddress,t.abi,i);if(!o||!t.method)throw new Error("Contract method is undefined");const a=o[t.method];if(a)return await a(...t.args);throw new Error("Contract method is undefined")},parseWalletCapabilities:t=>{try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}},parseUnits:(t,e)=>aB(t,e).toBigInt(),formatUnits:oB};class z7e extends H5{constructor(){super({adapterType:ae.ADAPTER_TYPES.ETHERS5,namespace:ae.CHAIN.EVM}),this.balancePromises={},this.ethersProviders={}}async createEthersConfig(){const{metadata:e,enableCoinbase:r,enableInjected:n,enableEIP6963:s}=we.state;if(e){if(n!==!1){const i=new H7e;await i.initialize(),this.ethersProviders.injected=i}if(r!==!1&&(this.ethersProviders.baseAccount=new B9e),ke.isSafeApp()){const i=new q7e;await i.initialize(),this.ethersProviders.safe=i}return{...this.ethersProviders,EIP6963:s!==!1,metadata:e}}}async signMessage(e){const{message:r,address:n,provider:s}=e;if(!s)throw new Error("Provider is undefined");try{return{signature:await Qg.signMessage(r,s,n)}}catch{throw new Error("EthersAdapter:signMessage - Sign message failed")}}async sendTransaction(e){if(!e.provider)throw new Error("Provider is undefined");const r=J.getAccountData(ae.CHAIN.EVM)?.address;if(!r)throw new Error("Address is undefined");return{hash:await Qg.sendTransaction({value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),to:e.to,data:e.data?e.data:"0x",gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,address:r},e.provider,r,Number(e.caipNetwork?.id))}}async writeContract(e){if(!e.provider)throw new Error("Provider is undefined");const{address:r}=xs.parseCaipAddress(e.caipAddress);return{hash:await Qg.writeContract(e,e.provider,r,Number(e.caipNetwork?.id))}}async estimateGas(e){const{provider:r,caipNetwork:n,address:s}=e;if(!r)throw new Error("Provider is undefined");try{return{gas:await Qg.estimateGas({data:e.data,to:e.to,address:s},r,s,Number(n?.id))}}catch{throw new Error("EthersAdapter:estimateGas - Estimate gas failed")}}parseUnits(e){return Qg.parseUnits(e.value,e.decimals)}formatUnits(e){return Qg.formatUnits(e.value,e.decimals)}async syncConnection(e){const{id:r,chainId:n}=e,s=this.connectors.find(c=>c.id===r),i=s?.provider;if(!i)throw new Error("Provider not found");const o=await i.request({method:"eth_requestAccounts"}),a=await i.request({method:"eth_chainId"});if(this.listenProviderEvents(r,i),!o[0])throw new Error("No accounts found");if(!s?.type)throw new Error("Connector type not found");return{address:this.toChecksummedAddress(o[0]),chainId:Number(a)||Number(n),provider:i,type:s.type,id:r}}async syncConnectors(){this.ethersConfig=await this.createEthersConfig(),this.ethersConfig?.EIP6963&&this.listenInjectedConnector(!0),Object.keys(this.ethersConfig||{}).filter(r=>r!=="metadata"&&r!=="EIP6963").forEach(async r=>{const n=r===ae.CONNECTOR_ID.INJECTED;if(this.namespace){const s=this.ethersProviders[r];this.addConnector({id:r,explorerId:ii.ConnectorExplorerIds[r],imageUrl:aa.state.connectorImages?.[r],name:ii.ConnectorNamesMap[r]||"Unknown",imageId:ii.ConnectorImageIds[r],type:ii.ConnectorTypesMap[r]??"EXTERNAL",info:n?void 0:{rdns:r},chain:this.namespace,chains:[],provider:await s?.getProvider()})}})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async r=>{const n=this.connectors.find(s=>ho.isLowerCaseMatch(s.id,r.connectorId));if(!n)throw new Error("Connector not found");return await this.disconnect({id:n.id}),r}))}}async syncConnections({connectToFirstConnector:e}){const r=this.getCaipNetworks();await Promise.all(this.connectors.filter(n=>{const{hasDisconnected:s,hasConnected:i}=ho.getConnectorStorageInfo(n.id,this.namespace);return!s&&i}).map(async n=>{if(n.id===ae.CONNECTOR_ID.WALLET_CONNECT){const s=po.getWalletConnectAccounts(this.universalProvider,this.namespace),i=r.find(o=>o.chainNamespace===this.namespace&&o.id.toString()===s[0]?.chainId?.toString());s.length>0&&this.addConnection({connectorId:n.id,accounts:s.map(o=>({address:o.address})),caipNetwork:i})}else{const{accounts:s,chainId:i}=await gI.fetchProviderData(n);if(s.length>0&&i){const o=r.find(a=>a.chainNamespace===this.namespace&&a.id.toString()===i.toString());this.addConnection({connectorId:n.id,accounts:s.map(a=>({address:a})),caipNetwork:o}),n.provider&&n.id!==ae.CONNECTOR_ID.AUTH&&n.id!==ae.CONNECTOR_ID.WALLET_CONNECT&&this.listenProviderEvents(n.id,n.provider)}}})),e&&this.emitFirstAvailableConnection()}async setUniversalProvider(e){this.universalProvider=e;const r=ae.CONNECTOR_ID.WALLET_CONNECT;return po.listenWcProvider({universalProvider:e,namespace:ae.CHAIN.EVM,onConnect:n=>this.onConnect(n,r),onDisconnect:()=>this.onDisconnect(r),onAccountsChanged:n=>this.onAccountsChanged(n,r,!1),onChainChanged:n=>this.onChainChanged(n,r)}),this.addConnector(new z5({provider:e,caipNetworks:this.getCaipNetworks(),namespace:ae.CHAIN.EVM})),Promise.resolve()}eip6963EventHandler(e){if(e.detail){const{info:r,provider:n}=e.detail;if(!this.connectors?.find(i=>i.name===r?.name)){const i=ii.ConnectorTypesMap[ae.CONNECTOR_ID.EIP6963],o=r?.rdns||r?.name||r?.uuid;this.namespace&&o&&this.addConnector({id:o,type:i,imageUrl:r?.icon,name:r?.name||"Unknown",provider:n,info:r,chain:this.namespace,chains:[]})}}}listenInjectedConnector(e){if(typeof window<"u"&&e){const r=this.eip6963EventHandler.bind(this);window.addEventListener(cr.EIP6963_ANNOUNCE_EVENT,r),window.dispatchEvent(new Event(cr.EIP6963_REQUEST_EVENT))}}async connect({id:e,address:r,type:n,chainId:s,socialUri:i}){try{const o=this.connectors.find(f=>ho.isLowerCaseMatch(f.id,e));if(!o)throw new Error("Connector not found");const a=this.getConnection({address:r,connectorId:e,connections:this.connections,connectors:this.connectors});if(a){const f=a.caipNetwork;if(!f)throw new Error("Ethers5Adapter:connect - could not find the caipNetwork to connect");if(a.account)return this.emit("accountChanged",{address:this.toChecksummedAddress(a.account.address),chainId:f.id,connector:o}),{address:this.toChecksummedAddress(a.account.address),chainId:f.id,provider:o.provider,type:o.type,id:e}}let c=o?.provider;const u=this.ethersProviders[o.id];if(u&&(await u.initialize(),c=await u.getProvider()),!c)throw new Error("Provider not found");o.provider=c;let l=[],d;if(n==="AUTH"){const{address:f,accounts:p}=await To.authConnectorAuthenticate({authConnector:c,chainNamespace:ae.CHAIN.EVM,chainId:s,socialUri:i,preferredAccountType:fo("eip155")}),g=this.getCaipNetworks().find(h=>h.id.toString()===s?.toString());l=[f],this.addConnection({connectorId:e,accounts:p?p.map(h=>({address:h.address})):l.map(h=>({address:h})),caipNetwork:g,auth:{name:Ae.getConnectedSocialProvider(),username:Ae.getConnectedSocialUsername()}}),this.emit("accountChanged",{address:this.toChecksummedAddress(l[0]),chainId:Number(s),connector:o})}else{l=await c.request({method:"eth_requestAccounts"}),d=await c.request({method:"eth_chainId"});const f=this.getCaipNetworks().find(p=>p.id.toString()===s?.toString());if(d!==s){if(!f)throw new Error("Ethers5Adapter:connect - could not find the caipNetwork to switch");try{await c?.request({method:"wallet_switchEthereumChain",params:[{chainId:ry.numberToHexString(f.id)}]})}catch{throw new Error("Ethers5Adapter:connect - Switch network failed")}}this.emit("accountChanged",{address:this.toChecksummedAddress(l[0]),chainId:Number(s),connector:o}),this.addConnection({connectorId:e,accounts:l.map(p=>({address:p})),caipNetwork:f}),o.id!==ae.CONNECTOR_ID.WALLET_CONNECT&&this.listenProviderEvents(e,c)}return{address:this.toChecksummedAddress(l[0]),chainId:Number(s),provider:c,type:n,id:e}}catch(o){throw hl.isUserRejectedRequestError(o)?new My(o):o}}async getAccounts(e){const r=this.connectors.find(o=>o.id===e.id),n=r?.provider;if(!n||!r)throw new Error("Provider not found");const s=this.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});if(s)return{accounts:s.accounts.map(({address:o})=>ke.createAccount(ae.CHAIN.EVM,o,"eoa"))};if(e.id===ae.CONNECTOR_ID.AUTH){const o=r.provider;if(!o.user)return{accounts:[]};const{accounts:a,address:c}=o.user;return Promise.resolve({accounts:(a||[{address:c,type:"eoa"}]).map(u=>ke.createAccount(ae.CHAIN.EVM,u.address,u.type))})}return{accounts:(await n.request({method:"eth_requestAccounts"})).map(o=>ke.createAccount(ae.CHAIN.EVM,o,"eoa"))}}async reconnect(e){const{id:r,chainId:n}=e,s=this.connectors.find(i=>i.id===r);s&&s.type==="AUTH"&&n&&await To.authConnectorAuthenticate({authConnector:s.provider,chainNamespace:ae.CHAIN.EVM,chainId:n,preferredAccountType:fo("eip155")})}async disconnect(e){if(e.id){const r=this.connectors.find(s=>ho.isLowerCaseMatch(s.id,e.id));if(!r)throw new Error("Connector not found");const n=this.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});switch(r.type){case cr.CONNECTOR_TYPE_WALLET_CONNECT:r.provider.session&&r.provider.disconnect();break;case cr.CONNECTOR_TYPE_AUTH:await r.provider?.disconnect();break;case cr.CONNECTOR_TYPE_ANNOUNCED:case cr.CONNECTOR_TYPE_EXTERNAL:await this.revokeProviderPermissions(r.provider);break;default:throw new Error("Unsupported provider type")}return r.id&&(this.removeProviderListeners(r.id),this.deleteConnection(r.id)),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:n?[n]:[]}}return this.disconnectAll()}async getBalance(e){const r=e.address,n=this.getCaipNetworks().find(s=>s.id.toString()===e.chainId?.toString());if(!r)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(n){const s=`${n.caipNetworkId}:${r}`,i=this.balancePromises[s];if(i)return i;const o=Ae.getNativeBalanceCacheForCaipAddress(s);if(o)return{balance:o.balance,symbol:o.symbol};const a=new Hne(n.rpcUrls.default.http[0],{chainId:n.id,name:n.name});if(a)try{return this.balancePromises[s]=new Promise(async c=>{try{const u=await a.getBalance(r),l=k9e.formatEther(u);Ae.updateNativeBalanceCache({caipAddress:s,balance:l,symbol:n.nativeCurrency.symbol,timestamp:Date.now()}),c({balance:l,symbol:n.nativeCurrency.symbol})}catch{c({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"}}catch{return{balance:"0.00",symbol:"ETH"}}}return{balance:"0.00",symbol:"ETH"}}async switchNetwork(e){const{caipNetwork:r}=e,n=br.getProviderId(r.chainNamespace),s=br.getProvider(r.chainNamespace);if(n==="AUTH"||n==="WALLET_CONNECT"){await super.switchNetwork(e);return}if(!s)throw new Error("Provider not found");try{await s.request({method:"wallet_switchEthereumChain",params:[{chainId:ry.numberToHexString(r.id)}]})}catch(i){if(i.code===fh.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||i.code===fh.ERROR_INVALID_CHAIN_ID||i.code===fh.ERROR_CODE_DEFAULT||i?.data?.originalError?.code===fh.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)await ry.addEthereumChain(s,r);else if(n==="ANNOUNCED"||n==="EXTERNAL"||n==="INJECTED")throw new Error("Chain is not supported")}}getWalletConnectProvider(){return this.connectors.find(e=>e.type==="WALLET_CONNECT")?.provider}async revokeProviderPermissions(e){try{(await e.request({method:"wallet_getPermissions"})).find(s=>s.parentCapability==="eth_accounts")&&await e.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch(r){console.info("Could not revoke permissions from wallet. Disconnecting...",r)}}async getCapabilities(e){const r=br.getProvider(ae.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){const r=br.getProvider(ae.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){const r=br.getProvider(ae.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_revokePermissions",params:[e]})}async walletGetAssets(e){const r=br.getProvider(ae.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_getAssets",params:[e]})}toChecksummedAddress(e){try{return sn(e.toLowerCase())}catch{return e}}}class Pie{constructor(){this.listeners={accountsChanged:[],chainChanged:[],connect:[],disconnect:[],display_uri:[],message:[]}}on(e,r){this.listeners[e].push(r)}removeListener(e,r){e in this.listeners&&(this.listeners[e]=this.listeners[e].filter(n=>n!==r))}emit(e,r){e in this.listeners&&this.listeners[e].forEach(n=>n(r))}}const W7e="https://api.reown.com/ton/v1/manifest",Ha={getTonConnectManifestUrl(){const{metadata:t,projectId:e}=we.state,{st:r,sv:n}=kt.getSdkProperties(),s=t?.url||(typeof window>"u"?"":window.location.origin),i=t?.name||"",o=t?.icons?.[0]||"",a=new URL(W7e);return a.searchParams.set("projectId",e),a.searchParams.set("st",r),a.searchParams.set("sv",n),a.searchParams.set("url",s),a.searchParams.set("name",i),a.searchParams.set("iconUrl",o),a.toString()},async connectInjected(t,e){if(!ke.isClient())return Promise.resolve("");const r=this.getTonConnect(t);if(!r)throw new Error(`TonConnectConnector.connectInjected: Injected wallet "${t}" not available`);const n=this.getTonConnectManifestUrl(),s=this.createConnectRequest(n,e),i=2;try{if(typeof r.restoreConnection=="function"){const o=await r.restoreConnection();if(o?.event==="connect"){const a=o?.payload?.items?.find?.(c=>c?.name==="ton_addr")?.address;if(a)return a}}}catch{}return await new Promise((o,a)=>{let c=!1,u;const d=setTimeout(()=>{if(!c){c=!0;try{u?.()}catch{}a(new Error("TON connect timeout"))}},12e3);function f(g){if(!c){c=!0,clearTimeout(d);try{u?.()}catch{}g()}}function p(g){if(g?.event==="connect"){const h=g?.payload?.items?.find?.(y=>y?.name==="ton_addr")?.address;h&&f(()=>o(h))}else if(g?.event==="connect_error"){const h=g?.payload?.message||"TON connect error";f(()=>a(new Error(h)))}}typeof r.listen=="function"&&(u=r.listen(p));try{const g=typeof r.connect=="function"?r.connect(i,s):void 0;g&&typeof g.then=="function"&&g.then(h=>{if(!c){if(h?.event==="connect"){const y=h?.payload?.items?.find?.(E=>E?.name==="ton_addr")?.address;y&&f(()=>o(y))}else if(h?.event==="connect_error"){const y=h?.payload?.message||"TON connect error";f(()=>a(new Error(y)))}}}).catch(()=>{})}catch(g){f(()=>a(g))}})},createConnectRequest(t,e){const r=[{name:"ton_addr"}];return e&&r.push({name:"ton_proof",payload:e}),{manifestUrl:t,items:r}},normalizeBase64(t){if(typeof t!="string")return;const e=t.length+(4-t.length%4)%4;return t.replace(/-/gu,"+").replace(/_/gu,"/").padEnd(e,"=")},async getInjectedWallets(){const t=await this.fetchWalletsListDTO(),e=new Map;for(const s of t)for(const i of s.bridge??[])i.type==="js"&&e.set(i.key,s);const r=ke.getWindow(),n=[];if(r){let s=[];try{s=Object.entries(r)}catch{s=[]}for(const[i,o]of s)try{const a=o;if(!!!(a&&typeof a=="object"&&a.tonconnect))continue;const u=a?.tonconnect,l=u?.walletInfo,d=e.get(i),f=l?.name||d?.name||i,p=l?.app_name||d?.app_name||f,g=l?.image||d?.image||"",h=l?.about_url||d?.about_url||"",y=l?.tondns||d?.tondns,E=l?.platforms||d?.platforms||[],S=l?.features||d?.features;n.push({name:f,appName:p,imageUrl:g,aboutUrl:h,tondns:y,platforms:E,features:S,jsBridgeKey:i,injected:!0,embedded:!!u?.isWalletBrowser})}catch{}}return n},isWalletInjected(t){const e=ke.getWindow();if(!e)return!1;try{const r=e[t];return!!this.isJSBridgeWithMetadata(r)}catch{return!1}},isInsideWalletBrowser(t){const e=ke.getWindow();if(!e)return!1;try{const r=e[t];return this.isJSBridgeWithMetadata(r)?!!r.tonconnect.isWalletBrowser:!1}catch{return!1}},getCurrentlyInjectedWallets(){const t=ke.getWindow();if(!t)return[];let e=[];try{e=Object.entries(t)}catch{return[]}const r=[];for(const[n,s]of e)try{if(s&&typeof s=="object"&&s.tonconnect&&!this.isJSBridgeWithMetadata(s)||!this.isJSBridgeWithMetadata(s))continue;const i=s.tonconnect.walletInfo;r.push({name:i.name,appName:i.app_name,imageUrl:i.image,aboutUrl:i.about_url,tondns:i.tondns,jsBridgeKey:n,injected:!0,embedded:!!s.tonconnect.isWalletBrowser,platforms:i.platforms,features:i.features})}catch{}return r},async fetchWalletsListDTO(){const t=new jy({baseUrl:ke.getApiUrl(),clientId:null}),e=Ae.getTonWalletsCache();if(e)return e.wallets.filter(this.isCorrectWalletInfoDTO);const r=await t.get({path:"/ton/v1/wallets",params:pt._getSdkProperties()});return Ae.updateTonWalletsCache(r),r.filter(this.isCorrectWalletInfoDTO)},isCorrectWalletInfoDTO(t){if(!t||typeof t!="object")return!1;const e=t;if(!e.name||!e.app_name||!e.image||!e.about_url||!Array.isArray(e.platforms)||!Array.isArray(e.bridge)||e.bridge.length===0)return!1;for(const r of e.bridge)if(!r||typeof r!="object"||!("type"in r)||r.type==="sse"&&(!("url"in r)||!e.universal_url)||r.type==="js"&&(!("key"in r)||!r.key))return!1;return!0},isJSBridgeWithMetadata(t){try{return!!(t&&typeof t=="object"&&"tonconnect"in t&&t.tonconnect&&typeof t.tonconnect=="object"&&"walletInfo"in t.tonconnect&&t.tonconnect.walletInfo&&typeof t.tonconnect.walletInfo=="object"&&"name"in t.tonconnect.walletInfo&&typeof t.tonconnect.walletInfo.name=="string"&&"app_name"in t.tonconnect.walletInfo&&typeof t.tonconnect.walletInfo.app_name=="string"&&"image"in t.tonconnect.walletInfo&&typeof t.tonconnect.walletInfo.image=="string"&&"about_url"in t.tonconnect.walletInfo&&typeof t.tonconnect.walletInfo.about_url=="string"&&"platforms"in t.tonconnect.walletInfo&&Array.isArray(t.tonconnect.walletInfo.platforms))}catch{return!1}},getWalletFeatures(t){const e=t?.features;return Array.isArray(e)?e:void 0},assertSendTransactionSupported(t,e,r){const n=this.getWalletFeatures(t);if(!n)return;const s=n.includes?.("SendTransaction"),i=n.find?.(o=>o&&typeof o=="object"&&o.name==="SendTransaction");if(!s&&!i)throw new Error("Wallet doesn't support SendTransaction feature.");if(r&&(!i||typeof i=="string"||i.name!=="SendTransaction"||!i.extraCurrencySupported))throw new Error("Wallet is not able to handle such SendTransaction request. Extra currencies support is required.");if(i&&typeof i!="string"&&i.name==="SendTransaction"&&typeof i.maxMessages=="number"&&i.maxMessages<e)throw new Error(`Wallet is not able to handle such SendTransaction request. Max support messages number is ${i.maxMessages}, but ${e} is required.`)},assertSignDataSupported(t,e){const r=this.getWalletFeatures(t);if(!r)return;const n=r.find?.(o=>o&&typeof o=="object"&&o.name==="SignData");if(!n||typeof n=="string"||n.name!=="SignData")throw new Error("Wallet doesn't support SignData feature.");const s=Array.isArray(n.types)?n.types:[],i=e.filter(o=>!s.includes(o));if(i.length)throw new Error(`Wallet doesn't support required SignData types: ${i.join(", ")}.`)},getJSBridgeKey(t){return t?.jsBridgeKey},getTonConnect(t){if(t)return window[t]?.tonconnect}};var NI={exports:{}},V7e=NI.exports,uK;function G7e(){return uK||(uK=1,(function(t){(function(e,r){t.exports?t.exports=r():(e.nacl||(e.nacl={}),e.nacl.util=r())})(V7e,function(){var e={};function r(n){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(n))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(n){if(typeof n!="string")throw new TypeError("expected string");var s,i=unescape(encodeURIComponent(n)),o=new Uint8Array(i.length);for(s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return o},e.encodeUTF8=function(n){var s,i=[];for(s=0;s<n.length;s++)i.push(String.fromCharCode(n[s]));return decodeURIComponent(escape(i.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(n){return Buffer.from(n).toString("base64")},e.decodeBase64=function(n){return r(n),new Uint8Array(Array.prototype.slice.call(Buffer.from(n,"base64"),0))}):(e.encodeBase64=function(n){return new Buffer(n).toString("base64")},e.decodeBase64=function(n){return r(n),new Uint8Array(Array.prototype.slice.call(new Buffer(n,"base64"),0))}):(e.encodeBase64=function(n){var s,i=[],o=n.length;for(s=0;s<o;s++)i.push(String.fromCharCode(n[s]));return btoa(i.join(""))},e.decodeBase64=function(n){r(n);var s,i=atob(n),o=new Uint8Array(i.length);for(s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return o}),e})})(NI)),NI.exports}var K7e=G7e();const Qv=Ea(K7e);function Z7e(t,e){const r=Qv.encodeBase64(t);return e?encodeURIComponent(r):r}function Y7e(t,e){const r=e?decodeURIComponent(t):t;return Qv.decodeBase64(r)}function J7e(t,e=!1){let r;if(t instanceof Uint8Array)r=t;else{const n=typeof t=="string"?t:JSON.stringify(t);r=Qv.decodeUTF8(n)}return Z7e(r,e)}function X7e(t,e=!1){const r=Y7e(t,e);return{toString(){return Qv.encodeUTF8(r)},toObject(){try{return JSON.parse(Qv.encodeUTF8(r))}catch{return null}},toUint8Array(){return r}}}const Rie={encode:J7e,decode:X7e},lK=17,Oie=81,NO=128;function Q7e(t,e=!1){const{wc:r,hex:n}=eDe(t);let s=Oie;e&&(s|=NO);const i=new Int8Array(34);i[0]=s,i[1]=r,i.set(n,2);const o=new Uint8Array(36);return o.set(i),o.set(kie(Uint8Array.from(i)),34),Rie.encode(o).replace(/\+/gu,"-").replace(/\//gu,"_")}function eDe(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid address (expected "wc:hex"): ${t}`);const r=e[0];if(!r)throw new Error("Missing workchain");const n=parseInt(r,10);if(n!==0&&n!==-1)throw new Error(`Invalid workchain: ${n}`);const s=e[1];if(!s)throw new Error("Missing hex part");const i=s.toLowerCase();if(!/^[0-9a-f]{64}$/u.test(i))throw new Error(`Hex must be 64 chars (32 bytes): ${i}`);return{wc:n,hex:tDe(i)}}const PO={};for(let t=0;t<=255;t+=1){let e=t.toString(16);e.length<2&&(e=`0${e}`),PO[e]=t}function tDe(t){const e=t.toLowerCase(),r=e.length;if(r%2!==0)throw new Error(`Hex string must have length a multiple of 2: ${e}`);const n=r/2,s=new Uint8Array(n);for(let i=0;i<n;i+=1){const o=i*2,a=e.substring(o,o+2);if(!Object.hasOwn(PO,a))throw new Error(`Invalid hex character: ${a}`);const c=PO[a];if(c===void 0)throw new Error(`Invalid hex character: ${a}`);s[i]=c}return s}function kie(t){let r=0;const n=new Uint8Array(t.length+2);n.set(t);for(const s of n){let i=128;for(;i;)r<<=1,s&i&&(r+=1),i>>=1,r>65535&&(r&=65535,r^=4129)}return new Uint8Array([Math.floor(r/256),r%256])}function rDe(t){const e=t.replace(/-/gu,"+").replace(/_/gu,"/");let r;try{r=Rie.decode(e).toUint8Array()}catch{throw new Error(`Invalid base64 encoding in address: ${t}`)}if(r.length!==36)throw new Error(`Invalid address length: ${t}`);const n=r.slice(0,34),s=r.slice(34,36),i=kie(n);if(!s.every((f,p)=>f===i[p]))throw new Error(`Invalid checksum in address: ${t}`);const o=n[0];if(o===void 0)throw new Error("Invalid address: missing tag byte");let a=o,c=!1,u=!1;if(a&NO&&(c=!0,a^=NO),a!==lK&&a!==Oie)throw new Error(`Unknown address tag: ${a}`);u=a===lK;let l=null;n[1]===255?l=-1:l=n[1];const d=n.slice(2);if(l!==0&&l!==-1)throw new Error(`Invalid workchain: ${l}`);return{wc:l,hex:Array.from(d).map(f=>f.toString(16).padStart(2,"0")).join(""),testOnly:c,isBounceable:u}}class nDe{constructor({wallet:e,chains:r}){this.chain="ton",this.type="INJECTED",this.eventEmitter=new Pie,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter),this.wallet=e,this.requestedChains=r}request(e){return this.internalRequest(e)}get id(){return this.name}get name(){return this.wallet.name}get imageUrl(){return this.wallet.imageUrl}get chains(){return this.requestedChains}async connect(){if("jsBridgeKey"in this.wallet&&this.wallet.jsBridgeKey){const e=await Ha.connectInjected(this.wallet.jsBridgeKey);if(!e)throw new Error("No address available");return this.currentAddress=Q7e(e),this.emit("accountsChanged",[this.currentAddress]),this.currentAddress}throw new Error("TON remote connect (bridge) not implemented")}async disconnect(){try{if(!ke.isClient())return;const e=Ha.getJSBridgeKey(this.wallet),r=Ha.getTonConnect(e);if(!r)return;if(typeof r.disconnect=="function"&&await r.disconnect(),typeof r.send=="function"){const n=String(ke.getUUID());r.send({method:"disconnect",params:[],id:n})}this.clearSession()}catch{}}async signData(e){if(!ke.isClient())return Promise.resolve("");const r=Ha.getJSBridgeKey(this.wallet);if(!r)throw new Error("TON signData over bridge not implemented");const n=Ha.getTonConnect(r);if(!n||typeof n.send!="function")throw new Error("Injected wallet not available");const s=e||{},{wc:i,hex:o}=rDe(s.from||this.currentAddress||""),a=`${i}:${o}`,c={...s,from:a};let u={};c?.type==="cell"?u={...c,cell:Ha.normalizeBase64(c.cell)}:c?.type==="binary"?u={...c,bytes:Ha.normalizeBase64(c.bytes)}:u={...c,network:c.network||"-239"};const l=String(u.type||"");if(l==="text"||l==="binary"||l==="cell")try{Ha.assertSignDataSupported(this.wallet,[l])}catch(f){const p=f instanceof Error?f.message:`Wallet does not support SignData type: ${l}`;throw new Error(p)}const d=await n.send({method:"signData",params:[JSON.stringify(u)],id:ke.getUUID()});return d?.signature||d?.result?.signature||""}async sendMessage(e){if(!ke.isClient())return Promise.resolve("");if(!("jsBridgeKey"in this.wallet)||!this.wallet.jsBridgeKey)throw new Error("TON sendMessage over bridge not implemented");const r=Ha.getTonConnect(this.wallet.jsBridgeKey);if(!r||typeof r.send!="function")throw new Error(`TonConnectConnector.sendMessage: Injected wallet "${this.wallet.jsBridgeKey}" not available`);const n=e||{},s=(n.messages||[]).map((p,g)=>{const h=String(p?.amount??"");if(!/^[0-9]+$/u.test(h))throw new Error(`messages[${g}].amount must be a string of digits`);if(!p?.address)throw new Error(`messages[${g}].address is required (user-friendly)`);return{address:p.address,amount:h,payload:Ha.normalizeBase64(p.payload),stateInit:Ha.normalizeBase64(p.stateInit),extra_currency:p.extraCurrency}});if(s.length===0)throw new Error("messages must contain at least 1 item");const i=(n.messages||[]).some(p=>p?.extraCurrency&&Object.keys(p.extraCurrency).length>0);try{Ha.assertSendTransactionSupported(this.wallet,s.length,i)}catch(p){const g=p instanceof Error?p.message:"Wallet does not support SendTransaction";throw new Error(g)}const o=this,a=n.from??o.account?.address??void 0,c=n.network??o.account?.chain??void 0,u={valid_until:n.validUntil??Math.floor(Date.now()/1e3)+60,network:c,from:a,messages:(n.messages||[]).map(p=>({address:p.address,amount:String(p.amount??"0")}))},l={method:"sendTransaction",params:[JSON.stringify(u)],id:ke.getUUID()},d=await r.send(l);if(d?.error)throw new Error(d.error.message||`sendTransaction failed (code ${d.error.code})`);const f=d?.result??d?.boc;if(!f)throw new Error("No boc in response");return f}async switchNetwork(){return Promise.resolve()}clearSession(){this.currentAddress=void 0}}class dK extends z5{constructor({provider:e,chains:r}){super({provider:e,caipNetworks:r,namespace:ae.CHAIN.TON}),this.chain=ae.CHAIN.TON,this.eventEmitter=new Pie,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter)}get imageUrl(){}get info(){}get chainsList(){return this.chains}get chains(){return this.sessionChains.map(e=>this.caipNetworks.find(r=>r.caipNetworkId===e)).filter(Boolean)}async connect(){return Promise.reject(new Error("Connection of WalletConnectProvider should be done via UniversalAdapter"))}async signData(e){const r=J.getCaipNetworkByNamespace(ae.CHAIN.TON);if(!r)throw new Error("Chain not found");const n={method:"ton_signData",params:[e]},s=await this.provider.request(n,r.caipNetworkId);return s?.signature||s?.result?.signature||""}async sendMessage(e){const r=J.getCaipNetworkByNamespace(ae.CHAIN.TON);if(!r)throw new Error("Chain not found");const n={method:"ton_sendMessage",params:[e]},s=await this.provider.request(n,r.caipNetworkId);return s?.boc||s?.result||""}async switchNetwork(){return Promise.resolve()}request(e){return this.internalRequest(e)}setDefaultChain(e){this.provider.setDefaultChain(e)}get sessionChains(){return po.getChainsFromNamespaces(this.provider.session?.namespaces)}}class sDe extends H5{constructor(e){super({namespace:ae.CHAIN.TON,adapterType:ae.ADAPTER_TYPES.TON,...e}),this.universalProvider=void 0}async syncConnectors(){const e=await Ha.getInjectedWallets(),r=J.getCaipNetworks();e.forEach(n=>this.addConnector(new nDe({wallet:n,chains:r})))}async connect(e){const r=this.connectors.find(o=>o.id===e.id);if(!r)throw new Error("Connector not found");const n=r.chains.find(o=>o.id===e.chainId)||r.chains[0];if(!n)throw new Error("The connector does not support any of the requested chains");const s=this.getConnection({address:e.address,connectorId:r.id,connections:this.connections,connectors:this.connectors});if(s?.account)return this.emit("accountChanged",{address:s.account.address,chainId:s.caipNetwork?.id,connector:r}),{id:r.id,type:r.type,address:s.account.address,chainId:n.id,provider:r};const i=await r.connect().catch(o=>{throw new My(o)});return this.emit("accountChanged",{address:i,chainId:n.id,connector:r}),this.addConnection({connectorId:r.id,accounts:[{address:i,type:"eoa"}],caipNetwork:n}),r.id!==ae.CONNECTOR_ID.WALLET_CONNECT&&this.listenProviderEvents(r.id,r),{id:r.id,type:r.type,address:i,chainId:n.id,provider:r}}getActiveConnector(){return this.connector}async getAccounts(){return Promise.resolve({accounts:[]})}async signMessage(){return Promise.resolve({signature:""})}async sendTransaction(){return Promise.resolve({hash:""})}async disconnect(e){if(e?.id){const r=this.connectors.find(s=>s.id===e.id);if(!r)throw new Error("TonAdapter:disconnect - connector not found");const n=this.getConnection({connectorId:r.id,connections:this.connections,connectors:this.connectors});try{await r.disconnect()}catch(s){console.error("TonAdapter:disconnect - error",s)}return this.removeProviderListeners(r.id),this.deleteConnection(r.id),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:n?[n]:[]}}return this.disconnectAll()}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async r=>{const n=this.connectors.find(s=>ho.isLowerCaseMatch(s.id,r.connectorId));if(!n)throw new Error("Connector not found");return await this.disconnect({id:n.id}),r}))}}async switchNetwork(e){const r=br.getProviderId(e.caipNetwork.chainNamespace),n=br.getProvider(e.caipNetwork.chainNamespace);if(r==="WALLET_CONNECT"||r==="AUTH")return await super.switchNetwork(e);if(!n)throw new Error("Provider not found");return await n.switchNetwork(e.caipNetwork.caipNetworkId)}async setUniversalProvider(e){this.universalProvider=e;const r=ae.CONNECTOR_ID.WALLET_CONNECT;return po.listenWcProvider({universalProvider:e,namespace:ae.CHAIN.TON,onConnect:n=>this.onConnect(n,r),onDisconnect:()=>this.onDisconnect(r),onAccountsChanged:n=>super.onAccountsChanged(n,r,!1)}),this.addConnector(new dK({provider:e,chains:J.getCaipNetworks()})),Promise.resolve()}async getBalance(e){const r=e.caipNetwork?.caipNetworkId,n=e.address;if(!n||!r)return{balance:"0",symbol:"TON"};const s=await kt.getAddressBalance({caipNetworkId:r,address:n});return{balance:kY.bigNumber(s).div(10**9).toString(),symbol:"TON"}}parseUnits(){return BigInt(0)}formatUnits(){return""}async syncConnections({connectToFirstConnector:e,caipNetwork:r}){await Promise.all(this.connectors.filter(n=>{const{hasDisconnected:s,hasConnected:i}=ho.getConnectorStorageInfo(n.id,this.namespace);return!s&&i}).map(async n=>{if(n.id===ae.CONNECTOR_ID.WALLET_CONNECT){const s=po.getWalletConnectAccounts(this.universalProvider,this.namespace);s.length>0&&this.addConnection({connectorId:n.id,accounts:s.map(i=>({address:i.address})),caipNetwork:r})}else{const s=await n.connect({});s&&(this.addConnection({connectorId:n.id,accounts:[{address:s}],caipNetwork:r}),this.listenProviderEvents(n.id,n))}})),e&&this.emitFirstAvailableConnection()}async syncConnection(e){const r=this.connectors.find(n=>n.id===e.id);return r?this.connect({id:r.id,chainId:e.chainId,type:r.type}):{id:"",address:"",chainId:"",provider:void 0,type:"EXTERNAL"}}async estimateGas(e){return Promise.resolve({gas:BigInt(0)})}async writeContract(e){return Promise.resolve({hash:""})}async grantPermissions(e){return Promise.resolve({})}async getCapabilities(e){return Promise.resolve({})}async revokePermissions(e){return Promise.resolve("0x0000000000000000000000000000000000000000")}async walletGetAssets(e){return Promise.resolve({})}getWalletConnectProvider(e){return new dK({provider:e.provider,chains:e.caipNetworks})}}const f9=new z7e,Bie=new rOe,Uie=new sDe,iDe="a5498791a3ace64d6c1fb542a5a659bf",oDe={name:"zEnvelope",description:"zEnvelope App",url:"https://zenvelope.app",icons:["https://avatars.githubusercontent.com/u/179229932"]};console.log("Initializing AppKit with adapters:",{ethersAdapter:f9,solanaWeb3JsAdapter:Bie,tonAdapter:Uie});const aDe=S3e({adapters:[f9,Bie,Uie],networks:[w8e,_8e,b8e,E8e,v8e,kk,Ere,vre,A8e,x8e],metadata:oDe,projectId:iDe,features:{analytics:!0,email:!1,socials:[]}}),Ytt=Object.freeze(Object.defineProperty({__proto__:null,ethersAdapter:f9,modal:aDe},Symbol.toStringTag,{value:"Module"})),J6={},h9=t=>typeof t=="object"&&t!==null,cDe=t=>h9(t)&&!E_.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),Mie=(t,e)=>{const r=RO.get(t);if(r?.[0]===e)return r[1];const n=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return jI(n,!0),RO.set(t,[e,n]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(n,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(E_.has(i))jI(i,!1);else if(Nh.has(i)){const[c,u]=Nh.get(i);a.value=Mie(c,u())}Object.defineProperty(n,s,a)}),Object.preventExtensions(n)},uDe=(t,e,r,n)=>({deleteProperty(s,i){const o=Reflect.get(s,i);r(i);const a=Reflect.deleteProperty(s,i);return a&&n(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),u=Reflect.get(s,i,a);if(c&&(fK(u,o)||eE.has(o)&&fK(u,eE.get(o))))return!0;r(i),h9(o)&&(o=IY(o)||o);const l=!Nh.has(o)&&dDe(o)?jn(o):o;return e(i,l),Reflect.set(s,i,l,a),n(["set",[i],o,u]),!0}}),Nh=new WeakMap,E_=new WeakSet,RO=new WeakMap,p1=[1,1],eE=new WeakMap;let fK=Object.is,lDe=(t,e)=>new Proxy(t,e),dDe=cDe,fDe=Mie,hDe=uDe;function jn(t={}){if(!h9(t))throw new Error("object required");const e=eE.get(t);if(e)return e;let r=p1[0];const n=new Set,s=(y,E=++p1[0])=>{r!==E&&(r=E,n.forEach(S=>S(y,E)))};let i=p1[1];const o=(y=++p1[1])=>(i!==y&&!n.size&&(i=y,c.forEach(([E])=>{const S=E[1](y);S>r&&(r=S)})),r),a=y=>(E,S)=>{const C=[...E];C[1]=[y,...C[1]],s(C,S)},c=new Map,u=(y,E)=>{const S=!E_.has(E)&&Nh.get(E);if(S){if((J6?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(n.size){const C=S[2](a(y));c.set(y,[S,C])}else c.set(y,[S])}},l=y=>{var E;const S=c.get(y);S&&(c.delete(y),(E=S[1])==null||E.call(S))},d=y=>(n.add(y),n.size===1&&c.forEach(([S,C],_)=>{if((J6?"production":void 0)!=="production"&&C)throw new Error("remove already exists");const T=S[2](a(_));c.set(_,[S,T])}),()=>{n.delete(y),n.size===0&&c.forEach(([S,C],_)=>{C&&(C(),c.set(_,[S]))})});let f=!0;const p=hDe(()=>f,u,l,s),g=lDe(t,p);eE.set(t,g);const h=[t,o,d];return Nh.set(g,h),Reflect.ownKeys(t).forEach(y=>{const E=Object.getOwnPropertyDescriptor(t,y);"value"in E&&E.writable&&(g[y]=t[y])}),f=!1,g}function Bi(t,e,r){const n=Nh.get(t);(J6?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let s;const i=[],o=n[2];let a=!1;const u=o(l=>{i.push(l),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,u()}}function tE(t){const e=Nh.get(t);(J6?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[r,n]=e;return fDe(r,n())}function R0(t){return E_.add(t),t}function pDe(){return{proxyStateMap:Nh,refSet:E_,snapCache:RO,versionHolder:p1,proxyCache:eE}}function yo(t,e,r,n){let s=t[e];return Bi(t,()=>{const i=t[e];Object.is(s,i)||r(s=i)})}const{proxyStateMap:gDe,snapCache:mDe}=pDe(),FS=t=>gDe.has(t);function yDe(t){const e=[];let r=0;const n=new Map,s=new WeakMap,i=()=>{const u=mDe.get(a),l=u?.[1];if(l&&!s.has(l)){const d=new Map(n);s.set(l,d)}},o=u=>s.get(u)||n,a={data:e,index:r,epoch:0,get size(){return FS(this)||i(),o(this).size},get(u){const d=o(this).get(u);if(d===void 0){this.epoch;return}return this.data[d]},has(u){const l=o(this);return this.epoch,l.has(u)},set(u,l){if(!FS(this))throw new Error("Cannot perform mutations on a snapshot");const d=n.get(u);return d===void 0?(n.set(u,this.index),this.data[this.index++]=l):this.data[d]=l,this.epoch++,this},delete(u){if(!FS(this))throw new Error("Cannot perform mutations on a snapshot");const l=n.get(u);return l===void 0?!1:(delete this.data[l],n.delete(u),this.epoch++,!0)},clear(){if(!FS(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,n.clear()},forEach(u){this.epoch,o(this).forEach((d,f)=>{u(this.data[d],f,this)})},*entries(){this.epoch;const u=o(this);for(const[l,d]of u)yield[l,this.data[d]]},*keys(){this.epoch;const u=o(this);for(const l of u.keys())yield l},*values(){this.epoch;const u=o(this);for(const l of u.values())yield this.data[l]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=jn(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var hK={};const _e={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof hK<"u"?hK.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},Die={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return t?.filter(r=>r.chainNamespace===e)||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){if(!e)return;const r=t.find(s=>s.caipNetworkId===e);if(r)return r.name;const[n]=e.split(":");return _e.CHAIN_NAME_MAP?.[n]||void 0}},jie=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"],bDe={bigNumber(t){return t?new ao(t):new ao(0)},multiply(t,e){if(t===void 0||e===void 0)return new ao(0);const r=new ao(t),n=new ao(e);return r.times(n)},toFixed(t,e=2){return t===void 0||t===""?new ao(0).toFixed(e):new ao(t).toFixed(e)},formatNumberToLocalString(t,e=2){return t===void 0||t===""?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"})},parseLocalStringToNumber(t){if(t===void 0||t==="")return 0;const e=t.replace(/,/gu,"");return new ao(e).toNumber()}},wDe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],vDe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],EDe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],_De={getERC20Abi:t=>_e.USDT_CONTRACT_ADDRESSES.includes(t)?EDe:wDe,getSwapAbi:()=>vDe},pa={validateCaipAddress(t){if(t.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,s]=e;if(!r||!n||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},Ot={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails"};function uR(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const xt={setItem(t,e){$m()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if($m())return localStorage.getItem(t)||void 0},removeItem(t){$m()&&localStorage.removeItem(t)},clear(){$m()&&localStorage.clear()}};function $m(){return typeof window<"u"&&typeof localStorage<"u"}function Hd(t,e){return e==="light"?{"--w3m-accent":t?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":t?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var pK={};const lR=(typeof process<"u"&&typeof pK<"u"?pK.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",Lie=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],ADe="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Cr={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:lR,SECURE_SITE_DASHBOARD:`${lR}/dashboard`,SECURE_SITE_FAVICON:`${lR}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[_e.CHAIN.EVM,_e.CHAIN.SOLANA],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[_e.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[_e.CHAIN.EVM,_e.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[_e.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[_e.CHAIN.EVM,_e.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},Pe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Pe.getActiveNamespace(),e=Pe.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{xt.setItem(Ot.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=xt.getItem(Ot.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{xt.removeItem(Ot.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{xt.setItem(Ot.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{xt.setItem(Ot.ACTIVE_CAIP_NETWORK_ID,t),Pe.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return xt.getItem(Ot.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{xt.removeItem(Ot.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=uR(t);xt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Pe.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),xt.setItem(Ot.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=xt.getItem(Ot.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const r=uR(t);xt.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return xt.getItem(Ot.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=uR(t);return xt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{xt.setItem(Ot.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return xt.getItem(Ot.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{xt.removeItem(Ot.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return xt.getItem(Ot.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return xt.getItem(Ot.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(t){try{xt.setItem(Ot.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return xt.getItem(Ot.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=xt.getItem(Ot.CONNECTED_NAMESPACES);return t?.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));xt.setItem(Ot.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Pe.getConnectedNamespaces();e.includes(t)||(e.push(t),Pe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Pe.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),Pe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return xt.getItem(Ot.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{xt.setItem(Ot.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{xt.removeItem(Ot.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=xt.getItem(Ot.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Pe.getBalanceCache();xt.setItem(Ot.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=Pe.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;Pe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Pe.getBalanceCache();e[t.caipAddress]=t,xt.setItem(Ot.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=xt.getItem(Ot.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Pe.getBalanceCache();xt.setItem(Ot.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=Pe.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),Pe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Pe.getNativeBalanceCache();e[t.caipAddress]=t,xt.setItem(Ot.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=xt.getItem(Ot.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=Pe.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;Pe.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Pe.getEnsCache();e[t.address]=t,xt.setItem(Ot.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Pe.getEnsCache();xt.setItem(Ot.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=xt.getItem(Ot.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=Pe.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;Pe.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Pe.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},xt.setItem(Ot.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Pe.getIdentityCache();xt.setItem(Ot.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{xt.removeItem(Ot.PORTFOLIO_CACHE),xt.removeItem(Ot.NATIVE_BALANCE_CACHE),xt.removeItem(Ot.ENS_CACHE),xt.removeItem(Ot.IDENTITY_CACHE),xt.removeItem(Ot.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{xt.setItem(Ot.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=xt.getItem(Ot.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const r=Pe.getConnections(),n=r[e]??[],s=new Map;for(const o of n)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===_e.CONNECTOR_ID.AUTH;if(a&&!c){const u=new Set(a.accounts.map(d=>d.address.toLowerCase())),l=o.accounts.filter(d=>!u.has(d.address.toLowerCase()));a.accounts.push(...l)}else s.set(o.connectorId,{...o})}const i={...r,[e]:Array.from(s.values())};xt.setItem(Ot.CONNECTIONS,JSON.stringify(i))}catch(r){console.error("Unable to sync connections to storage",r)}},getConnections(){try{const t=xt.getItem(Ot.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:r}){try{const n=Pe.getConnections(),s=n[r]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),xt.setItem(Ot.CONNECTIONS,JSON.stringify({...n,[r]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${r}"`)}},getDisconnectedConnectorIds(){try{const t=xt.getItem(Ot.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const r=Pe.getDisconnectedConnectorIds(),n=r[e]??[];n.push(t),xt.setItem(Ot.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...r,[e]:Array.from(new Set(n))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const r=Pe.getDisconnectedConnectorIds();let n=r[e]??[];n=n.filter(s=>s.toLowerCase()!==t.toLowerCase()),xt.setItem(Ot.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...r,[e]:Array.from(new Set(n))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(Pe.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=xt.getItem(Ot.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){try{const n=Pe.getTransactionsCache()[t]?.[e];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.transactionsHistory))return n.transactions;Pe.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:r,transactions:n}){try{const s=Pe.getTransactionsCache();s[t]={...s[t],[e]:{timestamp:r,transactions:n}},xt.setItem(Ot.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:r,transactions:n})}},removeTransactionsCache({address:t,chainId:e}){try{const r=Pe.getTransactionsCache(),n=r?.[t]||{},{[e]:s,...i}=n;xt.setItem(Ot.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...r,[t]:i}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=xt.getItem(Ot.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const r=Pe.getTokenPriceCache()[t.join(",")];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.tokenPrice))return r.tokenPrice;Pe.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=Pe.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},xt.setItem(Ot.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=Pe.getTokenPriceCache();xt.setItem(Ot.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}}},gt={isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return gt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Cr.TEN_SEC_MS:!0},isAllowedRetry(t,e=Cr.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(gt.isClient()&&window.self!==window.top)try{const t=window?.location?.ancestorOrigins?.[0],e="https://app.safe.global";if(t){const r=new URL(t),n=new URL(e);return r.hostname===n.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Cr.FOUR_MINUTES_MS},getNetworkId(t){return t?.split(":")[1]},getPlainAddress(t){return t?.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function s(){t(...n)}r&&clearTimeout(r),r=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,r=null){if(gt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let n=t,s=r;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),s&&!s?.endsWith("/")&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${n}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:n}},formatUniversalUrl(t,e){if(!gt.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Pe.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window?.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window?.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;const t=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,e=window?.navigator?.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((r,n)=>{const s=new Image;s.onload=r,s.onerror=n,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,gt.wait(2e3)])},formatBalance(t,e){let r="0.000";if(typeof t=="string"){const n=Number(t);if(n){const s=Math.floor(n*1e3)/1e3;s&&(r=s.toString())}}return`${r}${e?` ${e}`:""}`},getApiUrl(){return _e.W3M_API_URL},getBlockchainApiUrl(){return _e.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return _e.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){return typeof t=="string"?t:typeof t?.issues?.[0]?.message=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,s)=>{r[n]=s}),e.sort((n,s)=>{const i=r[n.id],o=r[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const s=n[e];return r.has(s)?!1:(r.add(s),!0)})},generateSdkVersion(t,e,r){const s=t.length===0?Cr.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${r}`},createAccount(t,e,r,n,s){return{namespace:t,address:e,type:r,publicKey:n,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in _e.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window?.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window?.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),r,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",n),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,n+i),c=t.substring(n+i,o),u=t.substring(s),l=c+r;return a+l+u}};async function Zw(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class __{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...s}){const i=this.createUrl(s);return(await Zw(i,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const s=this.createUrl(n);return(await Zw(s,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await Zw(i,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await Zw(i,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await Zw(i,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([s,i])=>{i&&n.searchParams.append(s,i)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}}const xDe={getFeatureValue(t,e){const r=e?.[t];return r===void 0?Cr.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(gt.isTelegram()){if(gt.isIos())return t.filter(e=>e!=="google");if(gt.isMac())return t.filter(e=>e!=="x");if(gt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},vt=jn({features:Cr.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Cr.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),Ce={state:vt,subscribeKey(t,e){return yo(vt,t,e)},setOptions(t){Object.assign(vt,t)},setRemoteFeatures(t){if(!t)return;const e={...vt.remoteFeatures,...t};vt.remoteFeatures=e,vt.remoteFeatures?.socials&&(vt.remoteFeatures.socials=xDe.filterSocialsByPlatform(vt.remoteFeatures.socials)),vt.features?.pay&&(vt.remoteFeatures.email=!1,vt.remoteFeatures.socials=!1)},setFeatures(t){if(!t)return;vt.features||(vt.features=Cr.DEFAULT_FEATURES);const e={...vt.features,...t};vt.features=e,vt.features?.pay&&vt.remoteFeatures&&(vt.remoteFeatures.email=!1,vt.remoteFeatures.socials=!1)},setProjectId(t){vt.projectId=t},setCustomRpcUrls(t){vt.customRpcUrls=t},setAllWallets(t){vt.allWallets=t},setIncludeWalletIds(t){vt.includeWalletIds=t},setExcludeWalletIds(t){vt.excludeWalletIds=t},setFeaturedWalletIds(t){vt.featuredWalletIds=t},setTokens(t){vt.tokens=t},setTermsConditionsUrl(t){vt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){vt.privacyPolicyUrl=t},setCustomWallets(t){vt.customWallets=t},setIsSiweEnabled(t){vt.isSiweEnabled=t},setIsUniversalProvider(t){vt.isUniversalProvider=t},setSdkVersion(t){vt.sdkVersion=t},setMetadata(t){vt.metadata=t},setDisableAppend(t){vt.disableAppend=t},setEIP6963Enabled(t){vt.enableEIP6963=t},setDebug(t){vt.debug=t},setEnableWalletConnect(t){vt.enableWalletConnect=t},setEnableWalletGuide(t){vt.enableWalletGuide=t},setEnableAuthLogger(t){vt.enableAuthLogger=t},setEnableWallets(t){vt.enableWallets=t},setPreferUniversalLinks(t){vt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,r]of Object.entries(Cr.SIWX_DEFAULTS))t[e]??=r;vt.siwx=t},setConnectMethodsOrder(t){vt.features={...vt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){vt.features={...vt.features,walletFeaturesOrder:t}},setSocialsOrder(t){vt.remoteFeatures={...vt.remoteFeatures,socials:t}},setCollapseWallets(t){vt.features={...vt.features,collapseWallets:t}},setEnableEmbedded(t){vt.enableEmbedded=t},setAllowUnsupportedChain(t){vt.allowUnsupportedChain=t},setManualWCControl(t){vt.manualWCControl=t},setEnableNetworkSwitch(t){vt.enableNetworkSwitch=t},setEnableReconnect(t){vt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(vt.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){vt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return vt.universalProviderConfigOverride},getSnapshot(){return tE(vt)}},CDe=Object.freeze({enabled:!0,events:[]}),SDe=new __({baseUrl:gt.getAnalyticsUrl(),clientId:null}),IDe=5,TDe=60*1e3,$f=jn({...CDe}),NDe={state:$f,subscribeKey(t,e){return yo($f,t,e)},async sendError(t,e){if(!$f.enabled)return;const r=Date.now();if($f.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return r-o<TDe}).length>=IDe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};$f.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=Ce.state;await SDe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:gt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){$f.enabled=!0},disable(){$f.enabled=!1},clearEvents(){$f.events=[]}};class Ny extends Error{constructor(e,r,n){super(e),this.name="AppKitError",this.category=r,this.originalError=n,Object.setPrototypeOf(this,Ny.prototype);let s=!1;if(n instanceof Error&&typeof n.stack=="string"&&n.stack){const i=n.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Ny):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function gK(t,e){let r="";try{t instanceof Error?r=t.message:typeof t=="string"?r=t:typeof t=="object"&&t!==null?r=JSON.stringify(t):r=String(t)}catch(s){r="Unknown error",console.error("Error parsing error message",s)}const n=t instanceof Ny?t:new Ny(r,e,t);throw NDe.sendError(n,n.category),n}function fc(t,e="INTERNAL_SDK_ERROR"){const r={};return Object.keys(t).forEach(n=>{const s=t[n];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return gK(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return gK(a,e)}},r[n]=i}else r[n]=s}),r}var Py={};const PDe="https://secure.walletconnect.org/sdk",RDe=(typeof process<"u"&&typeof Py<"u"?Py.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||PDe,ODe=(typeof process<"u"&&typeof Py<"u"?Py.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",kDe=(typeof process<"u"&&typeof Py<"u"?Py.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",ut={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Zs={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Io={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},BDe={handleMobileDeeplinkRedirect(t,e){const r=window.location.href,n=encodeURIComponent(r);if(t===Io.PHANTOM.id&&!("phantom"in window)){const s=r.startsWith("https")?"https":"http",i=r.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Io.PHANTOM.url}/ul/browse/${n}?ref=${o}`}if(t===Io.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Io.SOLFLARE.url}/ul/v1/browse/${n}?ref=${n}`),e===_e.CHAIN.SOLANA&&t===Io.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Io.COINBASE.url}/dapp?cb_url=${n}`),e===_e.CHAIN.BITCOIN&&t===Io.BINANCE.id&&!("binancew3w"in window)){const s=ee.state.activeCaipNetwork,i=window.btoa("/pages/browser/index"),o=window.btoa(`url=${n}&defaultChainId=${s?.id??1}`),a=new URL(Io.BINANCE.deeplink);a.searchParams.set("appId",Io.BINANCE.appId),a.searchParams.set("startPagePath",i),a.searchParams.set("startPageQuery",o);const c=new URL(Io.BINANCE.url);c.searchParams.set("_dp",window.btoa(a.toString())),window.location.href=c.toString()}}},$a=jn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),UDe={state:$a,subscribeNetworkImages(t){return Bi($a.networkImages,()=>t($a.networkImages))},subscribeKey(t,e){return yo($a,t,e)},subscribe(t){return Bi($a,()=>t($a))},setWalletImage(t,e){$a.walletImages[t]=e},setNetworkImage(t,e){$a.networkImages[t]=e},setChainImage(t,e){$a.chainImages[t]=e},setConnectorImage(t,e){$a.connectorImages={...$a.connectorImages,[t]:e}},setTokenImage(t,e){$a.tokenImages[t]=e},setCurrencyImage(t,e){$a.currencyImages[t]=e}},vu=fc(UDe),MDe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:""},dR=jn({networkImagePromises:{}}),Fie={async fetchWalletImage(t){if(t)return await Nt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(dR.networkImagePromises[t]||(dR.networkImagePromises[t]=Nt._fetchNetworkImage(t)),await dR.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return vu.state.walletImages[t]},getWalletImage(t){if(t?.image_url)return t?.image_url;if(t?.image_id)return vu.state.walletImages[t.image_id]},getNetworkImage(t){if(t?.assets?.imageUrl)return t?.assets?.imageUrl;if(t?.assets?.imageId)return vu.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return vu.state.networkImages[t]},getConnectorImage(t){if(t?.imageUrl)return t.imageUrl;if(t?.info?.icon)return t.info.icon;if(t?.imageId)return vu.state.connectorImages[t.imageId]},getChainImage(t){return vu.state.networkImages[MDe[t]]}},qf=jn({message:"",variant:"info",open:!1}),DDe={state:qf,subscribeKey(t,e){return yo(qf,t,e)},open(t,e){const{debug:r}=Ce.state,{code:n,displayMessage:s,debugMessage:i}=t;s&&r&&(qf.message=s,qf.variant=e,qf.open=!0),i&&console.error(typeof i=="function"?i():i,n?{code:n}:void 0)},close(){qf.open=!1,qf.message="",qf.variant="info"}},Hs=fc(DDe),jDe=gt.getAnalyticsUrl(),LDe=new __({baseUrl:jDe,clientId:null}),FDe=["MODAL_CREATED"],vd=jn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Or={state:vd,subscribe(t){return Bi(vd,()=>t(vd))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=Ce.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{let e=lt.state.address;if("address"in t.data&&t.data.address&&(e=t.data.address),FDe.includes(t.data.event)||typeof window>"u")return;const r=ee.getActiveCaipNetwork()?.caipNetworkId;await LDe.post({path:"/e",params:Or.getSdkProperties(),body:{eventId:gt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e,properties:{..."properties"in t.data?t.data.properties:{},caipNetworkId:r}}}}),vd.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===_e.HTTP_STATUS_CODES.FORBIDDEN&&!vd.reportedErrors.FORBIDDEN&&(Hs.open({displayMessage:"Invalid App Configuration",debugMessage:`Origin ${$m()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),vd.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){vd.timestamp=Date.now(),vd.data=t;const e=["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"];(Ce.state.features?.analytics||e.includes(t.event))&&Or._sendAnalyticsEvent(vd)}},$De=gt.getApiUrl(),Zo=new __({baseUrl:$De,clientId:null}),qDe=40,mK=4,HDe=20,Yt=jn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Nt={state:Yt,subscribeKey(t,e){return yo(Yt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=Ce.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return Ce.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Zo.baseUrl}/getWalletImage/${t}`,r=await Zo.getBlob({path:e,params:Nt._getSdkProperties()});vu.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${Zo.baseUrl}/public/getAssetImage/${t}`,r=await Zo.getBlob({path:e,params:Nt._getSdkProperties()});vu.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${Zo.baseUrl}/public/getAssetImage/${t}`,r=await Zo.getBlob({path:e,params:Nt._getSdkProperties()});vu.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${Zo.baseUrl}/public/getCurrencyImage/${t}`,r=await Zo.getBlob({path:e,params:Nt._getSdkProperties()});vu.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${Zo.baseUrl}/public/getTokenImage/${t}`,r=await Zo.getBlob({path:e,params:Nt._getSdkProperties()});vu.setTokenImage(t,URL.createObjectURL(r))},_filterWalletsByPlatform(t){return gt.isMobile()?t?.filter(r=>r.mobile_link||r.id===Io.COINBASE.id||r.id===Io.BINANCE.id?!0:ee.state.activeChain==="solana"&&(r.id===Io.SOLFLARE.id||r.id===Io.PHANTOM.id)):t},async fetchProjectConfig(){return(await Zo.get({path:"/appkit/v1/config",params:Nt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Zo.get({path:"/projects/v1/origins",params:Nt._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===_e.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=_e.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const e=ee.getAllRequestedCaipNetworks()?.map(({assets:r})=>r?.imageId).filter(Boolean).filter(r=>!Fie.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>Nt._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=qe.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>Nt._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Nt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Nt._fetchTokenImage(e)))},async fetchWallets(t){const e=t.exclude??[];Nt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Io).map(i=>i.id));const n=await Zo.get({path:"/getWallets",params:{...Nt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:t.include?.join(","),exclude:e.join(",")}});return{data:Nt._filterWalletsByPlatform(n?.data)||[],count:n?.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=Ce.state;if(t?.length){const e={...Nt._getSdkProperties(),page:1,entries:t?.length??mK,include:t},{data:r}=await Nt.fetchWallets(e),n=[...r].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=n.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Nt._fetchWalletImage(i))),Yt.featured=n,Yt.allFeatured=n}},async fetchRecommendedWallets(){try{Yt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=Ce.state,n=[...e??[],...r??[]].filter(Boolean),s=ee.getRequestedCaipNetworkIds().join(","),i={page:1,entries:mK,include:t,exclude:n,chains:s},{data:o,count:a}=await Nt.fetchWallets(i),c=Pe.getRecentWallets(),u=o.map(d=>d.image_id).filter(Boolean),l=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...u,...l].map(d=>Nt._fetchWalletImage(d))),Yt.recommended=o,Yt.allRecommended=o,Yt.count=a??0}catch{}finally{Yt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=Ce.state,s=ee.getRequestedCaipNetworkIds().join(","),i=[...Yt.recommended.map(({id:l})=>l),...r??[],...n??[]].filter(Boolean),o={page:t,entries:qDe,include:e,exclude:i,chains:s},{data:a,count:c}=await Nt.fetchWallets(o),u=a.slice(0,HDe).map(l=>l.image_id).filter(Boolean);await Promise.allSettled(u.map(l=>Nt._fetchWalletImage(l))),Yt.wallets=gt.uniqueBy([...Yt.wallets,...Nt._filterOutExtensions(a)],"id").filter(l=>l.chains?.some(d=>s.includes(d))),Yt.count=c>Yt.count?c:Yt.count,Yt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:r}=await Nt.fetchWallets(e);r&&r.forEach(n=>{Yt.excludedWallets.push({rdns:n.rdns,name:n.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=Ce.state,s=ee.getRequestedCaipNetworkIds().join(",");Yt.search=[];const i={page:1,entries:100,search:t?.trim(),badge_type:e,include:r,exclude:n,chains:s},{data:o}=await Nt.fetchWallets(i);Or.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Nt._fetchWalletImage(c)),gt.wait(300)]),Yt.search=Nt._filterOutExtensions(o)},initPromise(t,e){const r=Yt.promises[t];return r||(Yt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0}={}){const s=[t&&Nt.initPromise("connectorImages",Nt.fetchConnectorImages),e&&Nt.initPromise("featuredWallets",Nt.fetchFeaturedWallets),r&&Nt.initPromise("recommendedWallets",Nt.fetchRecommendedWallets),n&&Nt.initPromise("networkImages",Nt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){Ce.state.features?.analytics&&Nt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Zo.get({path:"/getAnalyticsConfig",params:Nt._getSdkProperties()});Ce.setFeatures({analytics:t})}catch{Ce.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!t?.length){Yt.featured=Yt.allFeatured,Yt.recommended=Yt.allRecommended;return}const e=ee.getRequestedCaipNetworkIds().join(",");Yt.featured=Yt.allFeatured.filter(r=>r.chains?.some(n=>e.includes(n))),Yt.recommended=Yt.allRecommended.filter(r=>r.chains?.some(n=>e.includes(n))),Yt.filteredWallets=Yt.wallets.filter(r=>r.chains?.some(n=>e.includes(n)))},clearFilterByNamespaces(){Yt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Yt.featured=Yt.allFeatured,Yt.recommended=Yt.allRecommended;return}const e=ee.getRequestedCaipNetworkIds().join(",");Yt.featured=Yt.allFeatured.filter(r=>r.chains?.some(n=>e.includes(n))),Yt.recommended=Yt.allRecommended.filter(r=>r.chains?.some(n=>e.includes(n))),Yt.filteredWallets=Yt.wallets.filter(r=>r.chains?.some(n=>e.includes(n)))}},wn=jn({view:"Connect",history:["Connect"],transactionStack:[]}),zDe={state:wn,subscribeKey(t,e){return yo(wn,t,e)},pushTransactionStack(t){wn.transactionStack.push(t)},popTransactionStack(t){const e=wn.transactionStack.pop();if(!e)return;const{onSuccess:r,onError:n,onCancel:s}=e;switch(t){case"success":r?.();break;case"error":n?.(),Lt.goBack();break;case"cancel":s?.(),Lt.goBack();break}},push(t,e){t!==wn.view&&(wn.view=t,wn.history.push(t),wn.data=e)},reset(t,e){wn.view=t,wn.history=[t],wn.data=e},replace(t,e){wn.history.at(-1)===t||(wn.view=t,wn.history[wn.history.length-1]=t,wn.data=e)},goBack(){const t=ee.state.activeCaipAddress,e=Lt.state.view==="ConnectingFarcaster",r=!t&&e;if(wn.history.length>1){wn.history.pop();const[n]=wn.history.slice(-1);n&&(t&&n==="Connect"?wn.view="Account":wn.view=n)}else vr.close();wn.data?.wallet&&(wn.data.wallet=void 0),setTimeout(()=>{if(r){lt.setFarcasterUrl(void 0,ee.state.activeChain);const n=qe.getAuthConnector();n?.provider?.reload();const s=tE(Ce.state);n?.provider?.syncDappData?.({metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType})}},100)},goBackToIndex(t){if(wn.history.length>1){wn.history=wn.history.slice(0,t+1);const[e]=wn.history.slice(-1);e&&(wn.view=e)}},goBackOrCloseModal(){Lt.state.history.length>1?Lt.goBack():vr.close()}},Lt=fc(zDe),Ed=jn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),OO={state:Ed,subscribe(t){return Bi(Ed,()=>t(Ed))},setThemeMode(t){Ed.themeMode=t;try{const e=qe.getAuthConnector();if(e){const r=OO.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:Hd(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Ed.themeVariables={...Ed.themeVariables,...t};try{const e=qe.getAuthConnector();if(e){const r=OO.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:Hd(Ed.themeVariables,Ed.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return tE(Ed)}},sa=fc(OO),$ie=Object.fromEntries(jie.map(t=>[t,void 0])),WDe=Object.fromEntries(jie.map(t=>[t,!0])),jr=jn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:$ie,filterByNamespaceMap:WDe}),VDe={state:jr,subscribe(t){return Bi(jr,()=>{t(jr)})},subscribeKey(t,e){return yo(jr,t,e)},initialize(t){t.forEach(e=>{const r=Pe.getConnectedConnectorId(e);r&&qe.setConnectorId(r,e)})},setActiveConnector(t){t&&(jr.activeConnector=R0(t))},setConnectors(t){t.filter(s=>!jr.allConnectors.some(i=>i.id===s.id&&qe.getConnectorName(i.name)===qe.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&jr.allConnectors.push(R0(s))});const r=qe.getEnabledNamespaces(),n=qe.getEnabledConnectors(r);jr.connectors=qe.mergeMultiChainConnectors(n)},filterByNamespaces(t){Object.keys(jr.filterByNamespaceMap).forEach(e=>{jr.filterByNamespaceMap[e]=!1}),t.forEach(e=>{jr.filterByNamespaceMap[e]=!0}),qe.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){jr.filterByNamespaceMap[t]=e,qe.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=qe.getEnabledNamespaces(),e=qe.getEnabledConnectors(t),r=qe.areAllNamespacesEnabled();jr.connectors=qe.mergeMultiChainConnectors(e),r?Nt.clearFilterByNamespaces():Nt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(jr.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return jr.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(jr.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=qe.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const s=n[0],i=s?.id===_e.CONNECTOR_ID.AUTH;n.length>1&&s?r.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...n],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:s?.id||""}):s&&r.push(s)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,s=qe.getConnectorName(n);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===r.chain)||i.push(r),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){if(t.id===_e.CONNECTOR_ID.AUTH){const e=t,r=tE(Ce.state),n=sa.getSnapshot().themeMode,s=sa.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e?.provider?.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:Hd(s,n)}),qe.setConnectors([t])}else qe.setConnectors([t])},getAuthConnector(t){const e=t||ee.state.activeChain,r=jr.connectors.find(n=>n.id===_e.CONNECTOR_ID.AUTH);if(r)return r?.connectors?.length?r.connectors.find(s=>s.chain===e):r},getAnnouncedConnectorRdns(){return jr.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>t.info?.rdns)},getConnectorById(t){return jr.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:r}){const n=r||ee.state.activeChain;return jr.allConnectors.filter(i=>i.chain===n).find(i=>i.explorerId===t||i.info?.rdns===e)},syncIfAuthConnector(t){if(t.id!=="ID_AUTH")return;const e=t,r=tE(Ce.state),n=sa.getSnapshot().themeMode,s=sa.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:Hd(s,n)})},getConnectorsByNamespace(t){const e=jr.allConnectors.filter(r=>r.chain===t);return qe.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return ee.checkIfSmartAccountEnabled()&&Lu(t)===Zs.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=qe.getConnector({id:t.id,rdns:t.rdns});BDe.handleMobileDeeplinkRedirect(e?.explorerId||t.id,ee.state.activeChain),e?Lt.push("ConnectingExternal",{connector:e,wallet:t}):Lt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?qe.getConnectorsByNamespace(t):qe.mergeMultiChainConnectors(jr.allConnectors)},setFilterByNamespace(t){jr.filterByNamespace=t,jr.connectors=qe.getConnectors(t),Nt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(jr.activeConnectorIds={...jr.activeConnectorIds,[e]:t},Pe.setConnectedConnectorId(e,t))},removeConnectorId(t){jr.activeConnectorIds={...jr.activeConnectorIds,[t]:void 0},Pe.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return jr.activeConnectorIds[t]},isConnected(t){return t?!!jr.activeConnectorIds[t]:Object.values(jr.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){jr.activeConnectorIds={...$ie}}},qe=fc(VDe),GDe=1e3,Yw={checkNamespaceConnectorId(t,e){return qe.getConnectorId(t)===e},isSocialProvider(t){return Cr.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:r=!0,redirectViewOnModalClose:n="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&qe.setActiveConnector(e),s?.(gt.isMobile()&&t),n){const u=vr.subscribeKey("open",l=>{l||(Lt.state.view!==n&&Lt.replace(n),u(),a(new Error("Modal closed")))})}const c=ee.subscribeKey("activeCaipAddress",u=>{u&&(i?.(),r&&vr.close(),c(),o(pa.parseCaipAddress(u)))})})},connectExternal(t){return new Promise((e,r)=>{const n=ee.subscribeKey("activeCaipAddress",s=>{s&&(vr.close(),n(),e(pa.parseCaipAddress(s)))});Ge.connectExternal(t,t.chain).catch(()=>{n(),r(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:r=!0,onOpenFarcaster:n,onConnect:s}){let i=lt.state.socialWindow,o=lt.state.socialProvider,a=!1,c=null;const u=e||ee.state.activeChain,l=ee.subscribeKey("activeCaipAddress",d=>{d&&(r&&vr.close(),l())});return new Promise((d,f)=>{async function p(h){if(h.data?.resultUri)if(h.origin===_e.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",p,!1);try{const y=qe.getAuthConnector(u);if(y&&!a){i&&(i.close(),lt.setSocialWindow(void 0,u),i=lt.state.socialWindow),a=!0;const E=h.data.resultUri;if(o&&Or.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:o}}),o){Pe.setConnectedSocialProvider(o),await Ge.connectExternal({id:y.id,type:y.type,socialUri:E},y.chain);const S=ee.state.activeCaipAddress;if(!S){f(new Error("Failed to connect"));return}d(pa.parseCaipAddress(S)),Or.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:o}})}}}catch{o&&Or.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}}),f(new Error("Failed to connect"))}}else o&&Or.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}})}async function g(){if(t&&(lt.setSocialProvider(t,u),o=lt.state.socialProvider,Or.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:o}})),o==="farcaster"){n?.();const h=vr.subscribeKey("open",E=>{!E&&t==="farcaster"&&(f(new Error("Popup closed")),s?.(),h())}),y=qe.getAuthConnector();if(y&&!lt.state.farcasterUrl)try{const{url:E}=await y.provider.getFarcasterUri();lt.setFarcasterUrl(E,u)}catch{f(new Error("Failed to connect to farcaster"))}}else{const h=qe.getAuthConnector();c=gt.returnOpenHref(`${_e.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(h&&o){const{uri:y}=await h.provider.getSocialRedirectUri({provider:o});if(c&&y){lt.setSocialWindow(c,u),i=lt.state.socialWindow,c.location.href=y;const E=setInterval(()=>{i?.closed&&!a&&(f(new Error("Popup closed")),clearInterval(E))},1e3);window.addEventListener("message",p,!1)}else c?.close(),f(new Error("Failed to initiate social connection"))}}catch{f(new Error("Failed to initiate social connection")),c?.close()}}}g()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:r,onConnect:n}){return new Promise((s,i)=>{if(r?.(),e){const a=vr.subscribeKey("open",c=>{c||(Lt.state.view!==e&&Lt.replace(e),a(),i(new Error("Modal closed")))})}const o=ee.subscribeKey("activeCaipAddress",a=>{a&&(n?.(),t&&vr.close(),o(),s(pa.parseCaipAddress(a)))})})},async updateEmail(){const t=Pe.getConnectedConnectorId(ee.state.activeChain),e=qe.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==_e.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const r=e.provider.getEmail()??"";return await vr.open({view:"UpdateEmailWallet",data:{email:r,redirectView:void 0}}),new Promise((n,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==r&&(vr.close(),clearInterval(i),o(),n({email:a}))},GDe),o=vr.subscribeKey("open",a=>{a||(Lt.state.view!=="Connect"&&Lt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return ee.checkIfSmartAccountEnabled()&&Lu(t)===Zs.ACCOUNT_TYPES.EOA}};function qie(){const t=ee.state.activeCaipNetwork?.chainNamespace||"eip155",e=ee.state.activeCaipNetwork?.id||1,r=Cr.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`}function Lu(t){return ee.getAccountData(t)?.preferredAccountType}function g1(t){return t?ee.state.chains.get(t)?.networkState?.caipNetwork:ee.state.activeCaipNetwork}const X6={getConnectionStatus(t,e){const r=qe.state.activeConnectorIds[e],n=Ge.getConnections(e);return!!r&&t.connectorId===r?"connected":n.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:r}){return t.map(n=>{if((e?n.connectorId.toLowerCase()===e.toLowerCase():!1)&&r){const i=n.accounts.filter(o=>!r.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...n,accounts:i}}return n})},excludeExistingConnections(t,e){const r=new Set(t);return e.filter(n=>!r.has(n.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(r=>r.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){const e=!!Ce.state.remoteFeatures?.multiWallet,r=qe.state.activeConnectorIds[t],n=Ge.getConnections(t),i=(Ge.state.recentConnections.get(t)??[]).filter(a=>qe.getConnectorById(a.connectorId)),o=X6.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return e?{connections:n,recentConnections:o}:{connections:n.filter(a=>a.connectorId.toLowerCase()===r?.toLowerCase()),recentConnections:[]}}},jp=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Fs=jn({...jp}),KDe={state:Fs,subscribeKey(t,e){return yo(Fs,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=gt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Fs.message=jp.message,Fs.variant=jp.variant,Fs.svg=jp.svg,Fs.open=jp.open,Fs.autoClose=jp.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=jp.autoClose}){Fs.open?(Fs.open=!1,setTimeout(()=>{Fs.message=t,Fs.variant=r,Fs.svg=e,Fs.open=!0,Fs.autoClose=n},150)):(Fs.message=t,Fs.variant=r,Fs.svg=e,Fs.open=!0,Fs.autoClose=n)}},El=KDe,Vn=jn({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),ZDe={state:Vn,subscribe(t){return Bi(Vn,()=>t(Vn))},setLastNetworkInView(t){Vn.lastNetworkInView=t},async fetchTransactions(t){if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Vn.loading=!0;try{const e=await Dt.fetchTransactions({account:t,cursor:Vn.next,chainId:ee.state.activeCaipNetwork?.caipNetworkId}),r=PI.filterSpamTransactions(e.data),n=PI.filterByConnectedChain(r),s=[...Vn.transactions,...n];Vn.loading=!1,Vn.transactions=s,Vn.transactionsByYear=PI.groupTransactionsByYearAndMonth(Vn.transactionsByYear,n),Vn.empty=s.length===0,Vn.next=e.next?e.next:void 0}catch{const r=ee.state.activeChain;Or.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:Ce.state.projectId,cursor:Vn.next,isSmartAccount:Lu(r)===Zs.ACCOUNT_TYPES.SMART_ACCOUNT}}),El.showError("Failed to fetch transactions"),Vn.loading=!1,Vn.empty=!0,Vn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const s=new Date(n.metadata.minedAt).getFullYear(),i=new Date(n.metadata.minedAt).getMonth(),o=r[s]??{},c=(o[i]??[]).filter(u=>u.id!==n.id);r[s]={...o,[i]:[...c,n].sort((u,l)=>new Date(l.metadata.minedAt).getTime()-new Date(u.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>n.nft_info?.flags.is_spam===!0))},filterByConnectedChain(t){const e=ee.state.activeCaipNetwork?.caipNetworkId;return t.filter(n=>n.metadata.chain===e)},clearCursor(){Vn.next=void 0},resetTransactions(){Vn.transactions=[],Vn.transactionsByYear={},Vn.lastNetworkInView=void 0,Vn.loading=!1,Vn.empty=!1,Vn.next=void 0}},PI=fc(ZDe,"API_ERROR"),Lr=jn({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let kp;const YDe={state:Lr,subscribe(t){return Bi(Lr,()=>t(Lr))},subscribeKey(t,e){return yo(Lr,t,e)},_getClient(){return Lr._client},setClient(t){Lr._client=R0(t)},initialize(t){const e=t.filter(r=>!!r.namespace).map(r=>r.namespace);Ge.syncStorageConnections(e)},syncStorageConnections(t){const e=Pe.getConnections(),r=t??Array.from(ee.state.chains.keys());for(const n of r){const s=e[n]??[],i=new Map(Lr.recentConnections);i.set(n,s),Lr.recentConnections=i}},getConnections(t){return t?Lr.connections.get(t)??[]:[]},hasAnyConnection(t){const e=Ge.state.connections;return Array.from(e.values()).flatMap(r=>r).some(({connectorId:r})=>r===t)},async connectWalletConnect({cache:t="auto"}={}){const e=gt.isTelegram()||gt.isSafari()&&gt.isIos();if(t==="always"||t==="auto"&&e){if(kp){await kp,kp=void 0;return}if(!gt.isPairingExpired(Lr?.wcPairingExpiry)){const r=Lr.wcUri;Lr.wcUri=r;return}kp=Ge._getClient()?.connectWalletConnect?.().catch(()=>{}),Ge.state.status="connecting",await kp,kp=void 0,Lr.wcPairingExpiry=void 0,Ge.state.status="connected"}else await Ge._getClient()?.connectWalletConnect?.()},async connectExternal(t,e,r=!0){const n=await Ge._getClient()?.connectExternal?.(t);return r&&ee.setActiveNamespace(e),n},async reconnectExternal(t){await Ge._getClient()?.reconnectExternal?.(t);const e=t.chain||ee.state.activeChain;e&&qe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){if(!e)return;vr.setLoading(!0,ee.state.activeChain);const r=qe.getAuthConnector();r&&(lt.setPreferredAccountType(t,e),await r.provider.setPreferredAccount(t),Pe.setPreferredAccountTypes(Object.entries(ee.state.chains).reduce((n,[s,i])=>{const o=s,a=Lu(o);return a!==void 0&&(n[o]=a),n},{})),await Ge.reconnectExternal(r),vr.setLoading(!1,ee.state.activeChain),Or.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:ee.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(t){return Ge._getClient()?.signMessage(t)},parseUnits(t,e){return Ge._getClient()?.parseUnits(t,e)},formatUnits(t,e){return Ge._getClient()?.formatUnits(t,e)},async sendTransaction(t){return Ge._getClient()?.sendTransaction(t)},async getCapabilities(t){return Ge._getClient()?.getCapabilities(t)},async grantPermissions(t){return Ge._getClient()?.grantPermissions(t)},async walletGetAssets(t){return Ge._getClient()?.walletGetAssets(t)??{}},async estimateGas(t){return Ge._getClient()?.estimateGas(t)},async writeContract(t){return Ge._getClient()?.writeContract(t)},async getEnsAddress(t){return Ge._getClient()?.getEnsAddress(t)},async getEnsAvatar(t){return Ge._getClient()?.getEnsAvatar(t)},checkInstalled(t){return Ge._getClient()?.checkInstalled?.(t)||!1},resetWcConnection(){Lr.wcUri=void 0,Lr.wcPairingExpiry=void 0,Lr.wcLinking=void 0,Lr.recentWallet=void 0,Lr.status="disconnected",PI.resetTransactions(),Pe.deleteWalletConnectDeepLink()},resetUri(){Lr.wcUri=void 0,Lr.wcPairingExpiry=void 0,kp=void 0},finalizeWcConnection(t){const{wcLinking:e,recentWallet:r}=Ge.state;e&&Pe.setWalletConnectDeepLink(e),r&&Pe.setAppKitRecent(r),Or.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:t,properties:{method:e?"mobile":"qrcode",name:Lt.state.data?.wallet?.name||"Unknown"}})},setWcBasic(t){Lr.wcBasic=t},setUri(t){Lr.wcUri=t,Lr.wcPairingExpiry=gt.getPairingExpiry()},setWcLinking(t){Lr.wcLinking=t},setWcError(t){Lr.wcError=t,Lr.buffering=!1},setRecentWallet(t){Lr.recentWallet=t},setBuffering(t){Lr.buffering=t},setStatus(t){Lr.status=t},setIsSwitchingConnection(t){Lr.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:r}={}){try{await Ge._getClient()?.disconnect({id:t,chainNamespace:e,initialDisconnect:r})}catch(n){throw new Ny("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){const r=new Map(Lr.connections);r.set(e,t),Lr.connections=r},async handleAuthAccountSwitch({address:t,namespace:e}){const r=lt.state.user?.accounts?.find(s=>s.type==="smartAccount"),n=r&&r.address.toLowerCase()===t.toLowerCase()&&Yw.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await Ge.setPreferredAccountType(n,e)},async handleActiveConnection({connection:t,namespace:e,address:r}){const n=qe.getConnectorById(t.connectorId),s=t.connectorId===_e.CONNECTOR_ID.AUTH;if(!n)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&r&&await Ge.handleAuthAccountSwitch({address:r,namespace:e});else return(await Ge.connectExternal({id:n.id,type:n.type,provider:n.provider,address:r,chain:e},e))?.address;return r},async handleDisconnectedConnection({connection:t,namespace:e,address:r,closeModalOnConnect:n}){const s=qe.getConnectorById(t.connectorId),i=t.auth?.name?.toLowerCase(),o=t.connectorId===_e.CONNECTOR_ID.AUTH,a=t.connectorId===_e.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Yw.isSocialProvider(i)){const{address:u}=await Yw.connectSocial({social:i,closeModalOnConnect:n,onOpenFarcaster(){vr.open({view:"ConnectingFarcaster"})},onConnect(){Lt.replace("ProfileWallets")}});c=u}else{const{address:u}=await Yw.connectEmail({closeModalOnConnect:n,onOpen(){vr.open({view:"EmailLogin"})},onConnect(){Lt.replace("ProfileWallets")}});c=u}else if(a){const{address:u}=await Yw.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:n,onOpen(l){const d=l?"AllWallets":"ConnectingWalletConnect";vr.state.open?Lt.push(d):vr.open({view:d})},onConnect(){Lt.replace("ProfileWallets")}});c=u}else{const u=await Ge.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);u&&(c=u.address)}return o&&r&&await Ge.handleAuthAccountSwitch({address:r,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:r,closeModalOnConnect:n,onChange:s}){let i;const o=lt.getCaipAddress(r);if(o){const{address:c}=pa.parseCaipAddress(o);i=c}const a=X6.getConnectionStatus(t,r);switch(a){case"connected":case"active":{const c=await Ge.handleActiveConnection({connection:t,namespace:r,address:e});if(i&&c){const u=c.toLowerCase()!==i.toLowerCase();s?.({address:c,namespace:r,hasSwitchedAccount:u,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Ge.handleDisconnectedConnection({connection:t,namespace:r,address:e,closeModalOnConnect:n});c&&s?.({address:c,namespace:r,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${a}`)}}},Ge=fc(YDe),em=jn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Nu={state:em,subscribe(t){return Bi(em,()=>t(em))},subscribeOpen(t){return yo(em,"open",t)},set(t){Object.assign(em,{...em,...t})}},JDe={async getTokenList(t){return(await Dt.fetchSwapTokens({chainId:t}))?.tokens?.map(n=>({...n,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){const t=ee.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const e=(await Ge?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e};case"eip155":default:return await Dt.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:r,sourceTokenDecimals:n}){const s=await Dt.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s?.allowance&&r&&n){const i=Ge.parseUnits(r,n)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await p9.getMyTokensWithBalance(t);return lt.setTokenBalance(e,ee.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return t?.map(e=>({...e,address:e?.address?e.address:qie(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]}},pn=jn({tokenBalances:[],loading:!1}),XDe={state:pn,subscribe(t){return Bi(pn,()=>t(pn))},subscribeKey(t,e){return yo(pn,t,e)},setToken(t){t&&(pn.token=R0(t))},setTokenAmount(t){pn.sendTokenAmount=t},setReceiverAddress(t){pn.receiverAddress=t},setReceiverProfileImageUrl(t){pn.receiverProfileImageUrl=t},setReceiverProfileName(t){pn.receiverProfileName=t},setNetworkBalanceInUsd(t){pn.networkBalanceInUSD=t},setLoading(t){pn.loading=t},async sendToken(){try{switch(Xr.setLoading(!0),ee.state.activeCaipNetwork?.chainNamespace){case"eip155":await Xr.sendEvmToken();return;case"solana":await Xr.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Xr.setLoading(!1)}},async sendEvmToken(){const t=ee.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Lu(t);if(!Xr.state.sendTokenAmount||!Xr.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Xr.state.token)throw new Error("A token is required");Xr.state.token?.address?(Or.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Zs.ACCOUNT_TYPES.SMART_ACCOUNT,token:Xr.state.token.address,amount:Xr.state.sendTokenAmount,network:ee.state.activeCaipNetwork?.caipNetworkId||""}}),await Xr.sendERC20Token({receiverAddress:Xr.state.receiverAddress,tokenAddress:Xr.state.token.address,sendTokenAmount:Xr.state.sendTokenAmount,decimals:Xr.state.token.quantity.decimals})):(Or.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Zs.ACCOUNT_TYPES.SMART_ACCOUNT,token:Xr.state.token.symbol||"",amount:Xr.state.sendTokenAmount,network:ee.state.activeCaipNetwork?.caipNetworkId||""}}),await Xr.sendNativeToken({receiverAddress:Xr.state.receiverAddress,sendTokenAmount:Xr.state.sendTokenAmount,decimals:Xr.state.token.quantity.decimals}))},async fetchTokenBalance(t){pn.loading=!0;const e=ee.state.activeChain,r=ee.state.activeCaipNetwork?.caipNetworkId,n=ee.state.activeCaipNetwork?.chainNamespace,s=lt.getCaipAddress(e)??ee.state.activeCaipAddress,i=s?gt.getPlainAddress(s):void 0;if(pn.lastRetry&&!gt.isAllowedRetry(pn.lastRetry,30*Cr.ONE_SEC_MS))return pn.loading=!1,[];try{if(i&&r&&n){const o=await p9.getMyTokensWithBalance();return pn.tokenBalances=o,pn.lastRetry=void 0,o}}catch(o){pn.lastRetry=Date.now(),t?.(o),El.showError("Token Balance Unavailable")}finally{pn.loading=!1}return[]},fetchNetworkBalance(){if(pn.tokenBalances.length===0)return;const t=JDe.mapBalancesToSwapTokens(pn.tokenBalances);if(!t)return;const e=t.find(r=>r.address===qie());e&&(pn.networkBalanceInUSD=e?bDe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){Lt.pushTransactionStack({});const e=t.receiverAddress,r=lt.state.address,n=Ge.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Ge.sendTransaction({chainNamespace:_e.CHAIN.EVM,to:e,address:r,data:"0x",value:n??BigInt(0)}),Or.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Lu("eip155")===Zs.ACCOUNT_TYPES.SMART_ACCOUNT,token:Xr.state.token?.symbol||"",amount:t.sendTokenAmount,network:ee.state.activeCaipNetwork?.caipNetworkId||""}}),Ge._getClient()?.updateBalance("eip155"),Xr.resetSend()},async sendERC20Token(t){Lt.pushTransactionStack({onSuccess(){Lt.replace("Account")}});const e=Ge.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(lt.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const r=gt.getPlainAddress(t.tokenAddress);if(!r)throw new Error("SendController:sendERC20Token - tokenAddress is required");await Ge.writeContract({fromAddress:lt.state.address,tokenAddress:r,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:_De.getERC20Abi(r),chainNamespace:_e.CHAIN.EVM}),Xr.resetSend()}},async sendSolanaToken(){if(!Xr.state.sendTokenAmount||!Xr.state.receiverAddress)throw new Error("An amount and receiver address are required");Lt.pushTransactionStack({onSuccess(){Lt.replace("Account")}}),await Ge.sendTransaction({chainNamespace:"solana",to:Xr.state.receiverAddress,value:Xr.state.sendTokenAmount}),Ge._getClient()?.updateBalance("solana"),Xr.resetSend()},resetSend(){pn.token=void 0,pn.sendTokenAmount=void 0,pn.receiverAddress=void 0,pn.receiverProfileImageUrl=void 0,pn.receiverProfileName=void 0,pn.loading=!1,pn.tokenBalances=[]}},Xr=fc(XDe),fR={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},$S={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ye=jn({chains:yDe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),QDe={state:Ye,subscribe(t){return Bi(Ye,()=>{t(Ye)})},subscribeKey(t,e){return yo(Ye,t,e)},subscribeChainProp(t,e,r){let n;return Bi(Ye.chains,()=>{const s=r||Ye.activeChain;if(s){const i=Ye.chains.get(s)?.[t];n!==i&&(n=i,e(i))}})},initialize(t,e,r){const{chainId:n,namespace:s}=Pe.getActiveNetworkProps(),i=e?.find(l=>l.id.toString()===n?.toString()),a=t.find(l=>l?.namespace===s)||t?.[0],c=t.map(l=>l.namespace).filter(l=>l!==void 0),u=Ce.state.enableEmbedded?new Set([...c]):new Set([...e?.map(l=>l.chainNamespace)??[]]);(t?.length===0||!a)&&(Ye.noAdapters=!0),Ye.noAdapters||(Ye.activeChain=a?.namespace,Ye.activeCaipNetwork=i,ee.setChainNetworkData(a?.namespace,{caipNetwork:i}),Ye.activeChain&&Nu.set({activeChain:a?.namespace})),u.forEach(l=>{const d=e?.filter(g=>g.chainNamespace===l),f=Pe.getPreferredAccountTypes()||{},p={...Ce.state.defaultAccountTypes,...f};ee.state.chains.set(l,{namespace:l,networkState:jn({...$S,caipNetwork:d?.[0]}),accountState:jn({...fR,preferredAccountType:p[l]}),caipNetworks:d??[],...r}),ee.setRequestedCaipNetworks(d??[],l)})},removeAdapter(t){if(Ye.activeChain===t){const e=Array.from(Ye.chains.entries()).find(([r])=>r!==t);if(e){const r=e[1]?.caipNetworks?.[0];r&&ee.setActiveCaipNetwork(r)}}Ye.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:r},n){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Ye.chains.set(t.namespace,{namespace:t.namespace,networkState:{...$S,caipNetwork:n[0]},accountState:fR,caipNetworks:n,connectionControllerClient:r,networkControllerClient:e}),ee.setRequestedCaipNetworks(n?.filter(s=>s.chainNamespace===t.namespace)??[],t.namespace)},addNetwork(t){const e=Ye.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];e.caipNetworks?.find(n=>n.id===t.id)||r.push(t),Ye.chains.set(t.chainNamespace,{...e,caipNetworks:r}),ee.setRequestedCaipNetworks(r,t.chainNamespace),qe.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){const r=Ye.chains.get(t);if(r){const n=Ye.activeCaipNetwork?.id===e,s=[...r.caipNetworks?.filter(i=>i.id!==e)||[]];n&&r?.caipNetworks?.[0]&&ee.setActiveCaipNetwork(r.caipNetworks[0]),Ye.chains.set(t,{...r,caipNetworks:s}),ee.setRequestedCaipNetworks(s||[],t),s.length===0&&qe.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const r=Ye.chains.get(t);r&&(r.networkState={...r.networkState||$S,...e},Ye.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=Ye.chains.get(t);if(n){const s={...n.accountState||fR,...e};Ye.chains.set(t,{...n,accountState:s}),(Ye.chains.size===1||Ye.activeChain===t)&&(e.caipAddress&&(Ye.activeCaipAddress=e.caipAddress),lt.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const r=Ye.chains.get(t);if(r){const n={...r.networkState||$S,...e};Ye.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){ee.setChainAccountData(r,{[t]:e},n)},setActiveNamespace(t){Ye.activeChain=t;const e=t?Ye.chains.get(t):void 0,r=e?.networkState?.caipNetwork;r?.id&&t&&(Ye.activeCaipAddress=e?.accountState?.caipAddress,Ye.activeCaipNetwork=r,ee.setChainNetworkData(t,{caipNetwork:r}),Pe.setActiveCaipNetworkId(r?.caipNetworkId),Nu.set({activeChain:t,selectedNetworkId:r?.caipNetworkId}))},setActiveCaipNetwork(t){if(!t)return;Ye.activeChain!==t.chainNamespace&&ee.setIsSwitchingNamespace(!0);const e=Ye.chains.get(t.chainNamespace);Ye.activeChain=t.chainNamespace,Ye.activeCaipNetwork=t,ee.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),e?.accountState?.address?Ye.activeCaipAddress=`${t.chainNamespace}:${t.id}:${e?.accountState?.address}`:Ye.activeCaipAddress=void 0,ee.setAccountProp("caipAddress",Ye.activeCaipAddress,t.chainNamespace),e&&lt.replaceState(e.accountState),Xr.resetSend(),Nu.set({activeChain:Ye.activeChain,selectedNetworkId:Ye.activeCaipNetwork?.caipNetworkId}),Pe.setActiveCaipNetworkId(t.caipNetworkId),!ee.checkIfSupportedNetwork(t.chainNamespace)&&Ce.state.enableNetworkSwitch&&!Ce.state.allowUnsupportedChain&&!Ge.state.wcBasic&&ee.showUnsupportedChainUI()},addCaipNetwork(t){if(!t)return;const e=Ye.chains.get(t.chainNamespace);e&&e?.caipNetworks?.push(t)},async switchActiveNamespace(t){if(!t)return;const e=t!==ee.state.activeChain,r=ee.getNetworkData(t)?.caipNetwork,n=ee.getCaipNetworkByNamespace(t,r?.id);e&&n&&await ee.switchActiveNetwork(n)},async switchActiveNetwork(t){const e=ee.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=!ee.state.chains.get(e)?.caipNetworks?.some(i=>i.id===Ye.activeCaipNetwork?.id),s=ee.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),n&&vr.close()}catch{Lt.goBack()}Or.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Ye.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const r=Ye.chains.get(e);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(t){const e=t||Ye.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=Ye.chains.get(e);if(!r?.connectionControllerClient)throw new Error("ConnectionController client not set");return r.connectionControllerClient},getNetworkProp(t,e){const r=Ye.chains.get(e)?.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=Ye.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=e?.networkState||{};return gt.sortRequestedNetworks(r,n).filter(o=>o?.id)},getAllRequestedCaipNetworks(){const t=[];return Ye.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const r=ee.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){ee.setAdapterNetworkState(e,{requestedCaipNetworks:t});const n=ee.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(n));qe.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Ye.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const r=ee.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(t){return t?Ye.chains.get(t)?.networkState?.caipNetwork:Ye.activeCaipNetwork},getActiveCaipAddress(){return Ye.activeCaipAddress},getApprovedCaipNetworkIds(t){return Ye.chains.get(t)?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(t){const r=await ee.getNetworkControllerClient()?.getApprovedCaipNetworksData();ee.setAdapterNetworkState(t,{approvedCaipNetworkIds:r?.approvedCaipNetworkIds,supportsAllNetworks:r?.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const r=e||Ye.activeCaipNetwork?.caipNetworkId,n=ee.getRequestedCaipNetworks(t);return n.length?n?.some(s=>s.caipNetworkId===r):!0},checkIfSupportedChainId(t){return Ye.activeChain?ee.getRequestedCaipNetworks(Ye.activeChain)?.some(r=>r.id===t):!0},setSmartAccountEnabledNetworks(t,e){ee.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){const t=Die.caipNetworkIdToNumber(Ye.activeCaipNetwork?.caipNetworkId),e=Ye.activeChain;return!e||!t?!1:!!ee.getNetworkProp("smartAccountEnabledNetworks",e)?.includes(Number(t))},showUnsupportedChainUI(){vr.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Ye.activeCaipNetwork;return!!(t?.chainNamespace&&Cr.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){ee.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const r=ee.state.chains.get(e)?.accountState?.preferredAccountType,n=Ce.state.defaultAccountTypes[e];Ye.activeCaipAddress=void 0,ee.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),qe.removeConnectorId(e)},setIsSwitchingNamespace(t){Ye.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){const t=[];let e;if(Ye.chains.forEach(r=>{_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(n=>n===r.namespace)&&r.namespace&&t.push(r.namespace)}),t.length>0){const r=t[0];return e=r?Ye.chains.get(r)?.caipNetworks?.[0]:void 0,e}},getAccountData(t){const e=t||Ye.activeChain;if(e)return ee.state.chains.get(e)?.accountState},getNetworkData(t){const e=t||Ye.activeChain;if(e)return ee.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(t,e){if(!t)return;const r=ee.state.chains.get(t),n=r?.caipNetworks?.find(s=>s.id===e);return n||r?.networkState?.caipNetwork||r?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const t=qe.state.filterByNamespace;return(t?[Ye.chains.get(t)]:Array.from(Ye.chains.values())).flatMap(r=>r?.caipNetworks||[]).map(r=>r.caipNetworkId)},getCaipNetworks(t){return t?ee.getRequestedCaipNetworks(t):ee.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Ye.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Ye.lastConnectedSIWECaipNetwork}},ee=fc(QDe),eje={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},Hie=gt.getBlockchainApiUrl(),Yo=jn({clientId:null,api:new __({baseUrl:Hie,clientId:null}),supportedChains:{http:[],ws:[]}}),Dt={state:Yo,async get(t){const{st:e,sv:r}=Dt.getSdkProperties(),n=Ce.state.projectId,s={...t.params||{},st:e,sv:r,projectId:n};return Yo.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=Ce.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Yo.supportedChains.http.length||await Dt.getSupportedNetworks()}catch{return!1}return Yo.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Dt.get({path:"v1/supported-chains"});return Yo.supportedChains=t,t}catch{return Yo.supportedChains}},async fetchIdentity({address:t}){const e=Pe.getIdentityFromCacheForAddress(t);if(e)return e;const r=await Dt.get({path:`/v1/identity/${t}`,params:{sender:ee.state.activeCaipAddress?gt.getPlainAddress(ee.state.activeCaipAddress):void 0}});return Pe.updateIdentityCache({address:t,identity:r,timestamp:Date.now()}),r},async fetchTransactions({account:t,cursor:e,signal:r,cache:n,chainId:s}){if(!await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))return{data:[],next:void 0};const o=Pe.getTransactionsCacheForAddress({address:t,chainId:s});if(o)return o;const a=await Dt.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:r,cache:n});return Pe.updateTransactionsCache({address:t,chainId:s,timestamp:Date.now(),transactions:a}),a},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:s}){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Dt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Dt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){if(!await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))return{fungibles:[]};const r=Pe.getTokenPriceCacheForAddresses(t);if(r)return r;const n=await Yo.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:Ce.state.projectId},headers:{"Content-Type":"application/json"}});return Pe.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:n}),n},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Dt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){const{st:e,sv:r}=Dt.getSdkProperties();if(!await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return Dt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:s}){if(!await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return Yo.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Cr.CONVERT_SLIPPAGE_TOLERANCE},projectId:Ce.state.projectId,from:e,to:r,userAddress:n,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){const{st:n,sv:s}=Dt.getSdkProperties();if(!await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return Dt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:s}})},async getBalance(t,e,r){const{st:n,sv:s}=Dt.getSdkProperties();if(!await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))return El.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Pe.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Dt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:s}});return Pe.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Dt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Dt.get({path:`/v1/profile/reverse/${t}`,params:{sender:lt.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Dt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Yo.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:s}){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?(await Yo.api.post({path:"/v1/generators/onrampurl",params:{projectId:Ce.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:s}})).url:""},async getOnrampOptions(){if(!await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Dt.get({path:"/v1/onramp/options"})}catch{return eje}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){try{return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?await Yo.api.post({path:"/v1/onramp/quote",params:{projectId:Ce.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Dt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){return await Dt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Yo.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:Ce.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){Yo.clientId=t,Yo.api=new __({baseUrl:Hie,clientId:t})}},hR={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return _5(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},p9={async getMyTokensWithBalance(t){const e=lt.state.address,r=ee.state.activeCaipNetwork,n=qe.getConnectorId("eip155")===_e.CONNECTOR_ID.AUTH;if(!e||!r)return[];const s=`${r.caipNetworkId}:${e}`,i=Pe.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(r.chainNamespace===_e.CHAIN.EVM&&n){const a=await this.getEIP155Balances(e,r);if(a)return this.filterLowQualityTokens(a)}const o=await Dt.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){try{const r=hR.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await Ge.getCapabilities(t))?.[r]?.assetDiscovery?.supported)return null;const s=await Ge.walletGetAssets({account:t,chainFilter:[r]});if(!hR.isWalletGetAssetsResponse(s))return null;const o=(s[r]||[]).map(a=>hR.createBalance(a,e.caipNetworkId));return Pe.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:o},timestamp:Date.now()}),o}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},nl=jn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),tje={state:nl,replaceState(t){t&&Object.assign(nl,R0(t))},subscribe(t){return ee.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,r){let n;return ee.subscribeChainProp("accountState",s=>{if(s){const i=s[t];n!==i&&(n=i,e(i))}},r)},setStatus(t,e){ee.setAccountProp("status",t,e)},getCaipAddress(t){if(t)return ee.state.chains.get(t)?.accountState?.caipAddress},setCaipAddress(t,e){const r=t?gt.getPlainAddress(t):void 0;e===ee.state.activeChain&&(ee.state.activeCaipAddress=t),ee.setAccountProp("caipAddress",t,e),ee.setAccountProp("address",r,e)},setBalance(t,e,r){ee.setAccountProp("balance",t,r),ee.setAccountProp("balanceSymbol",e,r)},setProfileName(t,e){ee.setAccountProp("profileName",t,e)},setProfileImage(t,e){ee.setAccountProp("profileImage",t,e)},setUser(t,e){ee.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){ee.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){ee.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){ee.setAccountProp("currentTab",t,ee.state.activeChain)},setTokenBalance(t,e){t&&ee.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){ee.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,r){if(!r)return;const n=ee.state.chains.get(r)?.accountState?.addressLabels||new Map;n.set(t,e),ee.setAccountProp("addressLabels",n,r)},removeAddressLabel(t,e){if(!e)return;const r=ee.state.chains.get(e)?.accountState?.addressLabels||new Map;r.delete(t),ee.setAccountProp("addressLabels",r,e)},setConnectedWalletInfo(t,e){ee.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){ee.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&ee.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){ee.setAccountProp("socialWindow",t?R0(t):void 0,e)},setFarcasterUrl(t,e){ee.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){nl.balanceLoading=!0;const e=ee.state.activeCaipNetwork?.caipNetworkId,r=ee.state.activeCaipNetwork?.chainNamespace,n=ee.state.activeCaipAddress,s=n?gt.getPlainAddress(n):void 0;if(nl.lastRetry&&!gt.isAllowedRetry(nl.lastRetry,30*Cr.ONE_SEC_MS))return nl.balanceLoading=!1,[];try{if(s&&e&&r){const i=await p9.getMyTokensWithBalance();return lt.setTokenBalance(i,r),nl.lastRetry=void 0,nl.balanceLoading=!1,i}}catch(i){nl.lastRetry=Date.now(),t?.(i),El.showError("Token Balance Unavailable")}finally{nl.balanceLoading=!1}return[]},resetAccount(t){ee.resetAccount(t)}},lt=fc(tje),rje={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const r=ee.state.activeCaipNetwork,n=Lt.state.data;if(t.id===r?.id)return;const i=lt.getCaipAddress(ee.state.activeChain),o=t.chainNamespace!==ee.state.activeChain,a=lt.getCaipAddress(t.chainNamespace),u=qe.getConnectorId(ee.state.activeChain)===_e.CONNECTOR_ID.AUTH,l=_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||u&&l?Lt.push("SwitchNetwork",{...n,network:t}):i&&o&&!a?Lt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Lt.push("SwitchNetwork",{...n,network:t})}},Jo=jn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),nje={state:Jo,subscribe(t){return Bi(Jo,()=>t(Jo))},subscribeKey(t,e){return yo(Jo,t,e)},async open(t){const e=t?.namespace,r=ee.state.activeChain,n=e&&e!==r,s=ee.getAccountData(t?.namespace)?.caipAddress;if(Ge.state.wcBasic?Nt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Nt.prefetch(),qe.setFilterByNamespace(t?.namespace),vr.setLoading(!0,e),e&&n){const i=ee.getNetworkData(e)?.caipNetwork||ee.getRequestedCaipNetworks(e)[0];i&&rje.onSwitchNetwork({network:i,ignoreSwitchConfirmation:!0})}else{const i=ee.state.noAdapters;Ce.state.manualWCControl||i&&!s?gt.isMobile()?Lt.reset("AllWallets"):Lt.reset("ConnectingWalletConnectBasic"):t?.view?Lt.reset(t.view,t.data):s?Lt.reset("Account"):Lt.reset("Connect")}Jo.open=!0,Nu.set({open:!0}),Or.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=Ce.state.enableEmbedded,e=!!ee.state.activeCaipAddress;Jo.open&&Or.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Jo.open=!1,Lt.reset("Connect"),vr.clearLoading(),t?e?Lt.replace("Account"):Lt.push("Connect"):Nu.set({open:!1}),Ge.resetUri()},setLoading(t,e){e&&Jo.loadingNamespaceMap.set(e,t),Jo.loading=t,Nu.set({loading:t})},clearLoading(){Jo.loadingNamespaceMap.clear(),Jo.loading=!1,Nu.set({loading:!1})},shake(){Jo.shake||(Jo.shake=!0,setTimeout(()=>{Jo.shake=!1},500))}},vr=fc(nje),j1={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},kO={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},sje={providers:Lie,selectedProvider:null,error:null,purchaseCurrency:j1,paymentCurrency:kO,purchaseCurrencies:[j1],paymentCurrencies:[],quotesLoading:!1},Nr=jn(sje),ije={state:Nr,subscribe(t){return Bi(Nr,()=>t(Nr))},subscribeKey(t,e){return yo(Nr,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=ee.state.activeChain,r=e===_e.CHAIN.SOLANA?"SOL":"USDC",n=e?ee.state.chains.get(e)?.accountState?.address??"":"",s=new URL(t.url);s.searchParams.append("publicKey",ADe),s.searchParams.append("destinationCurrencyCode",r),s.searchParams.append("walletAddress",n),s.searchParams.append("externalCustomerId",Ce.state.projectId),Nr.selectedProvider={...t,url:s.toString()}}else Nr.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,r=Lie.filter(n=>e.includes(n.name));Nr.providers=r}else Nr.providers=[]},setPurchaseCurrency(t){Nr.purchaseCurrency=t},setPaymentCurrency(t){Nr.paymentCurrency=t},setPurchaseAmount(t){BO.state.purchaseAmount=t},setPaymentAmount(t){BO.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Dt.getOnrampOptions();Nr.purchaseCurrencies=t.purchaseCurrencies,Nr.paymentCurrencies=t.paymentCurrencies,Nr.paymentCurrency=t.paymentCurrencies[0]||kO,Nr.purchaseCurrency=t.purchaseCurrencies[0]||j1,await Nt.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Nt.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){Nr.quotesLoading=!0;try{const t=await Dt.getOnrampQuote({purchaseCurrency:Nr.purchaseCurrency,paymentCurrency:Nr.paymentCurrency,amount:Nr.paymentAmount?.toString()||"0",network:Nr.purchaseCurrency?.symbol});return Nr.quotesLoading=!1,Nr.purchaseAmount=Number(t?.purchaseAmount.amount),t}catch(t){return Nr.error=t.message,Nr.quotesLoading=!1,null}finally{Nr.quotesLoading=!1}},resetState(){Nr.selectedProvider=null,Nr.error=null,Nr.purchaseCurrency=j1,Nr.paymentCurrency=kO,Nr.purchaseCurrencies=[j1],Nr.paymentCurrencies=[],Nr.paymentAmount=void 0,Nr.purchaseAmount=void 0,Nr.quotesLoading=!1}},BO=fc(ije),yK=2147483648,oje={convertEVMChainIdToCoinType(t){if(t>=yK)throw new Error("Invalid chainId");return(yK|t)>>>0}},Cc=jn({suggestions:[],loading:!1}),aje={state:Cc,subscribe(t){return Bi(Cc,()=>t(Cc))},subscribeKey(t,e){return yo(Cc,t,e)},async resolveName(t){try{return await Dt.lookupEnsName(t)}catch(e){const r=e;throw new Error(r?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(t){try{return await Dt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Cc.loading=!0,Cc.suggestions=[];const e=await Dt.getEnsNameSuggestions(t);return Cc.suggestions=e.suggestions||[],Cc.suggestions}catch(e){const r=L1.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{Cc.loading=!1}},async getNamesForAddress(t){try{if(!ee.state.activeCaipNetwork)return[];const r=Pe.getEnsFromCacheForAddress(t);if(r)return r;const n=await Dt.reverseLookupEnsName({address:t});return Pe.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=L1.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=ee.state.activeCaipNetwork,r=lt.state.address,n=qe.getAuthConnector();if(!e)throw new Error("Network not found");if(!r||!n)throw new Error("Address or auth connector not found");Cc.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Lt.pushTransactionStack({onCancel(){Lt.replace("RegisterAccountName")}});const i=await Ge.signMessage(s);Cc.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=oje.convertEVMChainIdToCoinType(Number(o));await Dt.registerEnsName({coinType:a,address:r,signature:i,message:s}),lt.setProfileName(t,e.chainNamespace),Pe.updateEnsCache({address:r,ens:[{name:t,registered_at:new Date().toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),Lt.replace("RegisterAccountNameSuccess")}catch(s){const i=L1.parseEnsApiError(s,`Error registering name ${t}`);throw Lt.replace("RegisterAccountName"),new Error(i)}finally{Cc.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){return t?.reasons?.[0]?.description||e}},L1=fc(aje);var pR,bK;function cje(){if(bK)return pR;bK=1;const t=JY();pR=s;const e=T().console||{},r={mapHttpRequest:g,mapHttpResponse:g,wrapRequestSerializer:h,wrapResponseSerializer:h,wrapErrorSerializer:h,req:g,res:g,err:f};function n(P,D){return Array.isArray(P)?P.filter(function(I){return I!=="!stdSerializers.err"}):P===!0?Object.keys(D):!1}function s(P){P=P||{},P.browser=P.browser||{};const D=P.browser.transmit;if(D&&typeof D.send!="function")throw Error("pino: transmit option must have a send function");const F=P.browser.write||e;P.browser.write&&(P.browser.asObject=!0);const I=P.serializers||{},U=n(P.browser.serialize,I);let L=P.browser.serialize;Array.isArray(P.browser.serialize)&&P.browser.serialize.indexOf("!stdSerializers.err")>-1&&(L=!1);const B=["error","fatal","warn","info","debug","trace"];typeof F=="function"&&(F.error=F.fatal=F.warn=F.info=F.debug=F.trace=F),P.enabled===!1&&(P.level="silent");const A=P.level||"info",m=Object.create(F);m.log||(m.log=y),Object.defineProperty(m,"levelVal",{get:w}),Object.defineProperty(m,"level",{get:x,set:M});const b={transmit:D,serialize:U,asObject:P.browser.asObject,levels:B,timestamp:p(P)};m.levels=s.levels,m.level=A,m.setMaxListeners=m.getMaxListeners=m.emit=m.addListener=m.on=m.prependListener=m.once=m.prependOnceListener=m.removeListener=m.removeAllListeners=m.listeners=m.listenerCount=m.eventNames=m.write=m.flush=y,m.serializers=I,m._serialize=U,m._stdErrSerialize=L,m.child=k,D&&(m._logEvent=d());function w(){return this.level==="silent"?1/0:this.levels.values[this.level]}function x(){return this._level}function M(j){if(j!=="silent"&&!this.levels.values[j])throw Error("unknown level "+j);this._level=j,i(b,m,"error","log"),i(b,m,"fatal","error"),i(b,m,"warn","error"),i(b,m,"info","log"),i(b,m,"debug","log"),i(b,m,"trace","log")}function k(j,N){if(!j)throw new Error("missing bindings for child Pino");N=N||{},U&&j.serializers&&(N.serializers=j.serializers);const v=N.serializers;if(U&&v){var R=Object.assign({},I,v),$=P.browser.serialize===!0?Object.keys(R):U;delete j.serializers,c([j],$,R,this._stdErrSerialize)}function O(H){this._childLevel=(H._childLevel|0)+1,this.error=u(H,j,"error"),this.fatal=u(H,j,"fatal"),this.warn=u(H,j,"warn"),this.info=u(H,j,"info"),this.debug=u(H,j,"debug"),this.trace=u(H,j,"trace"),R&&(this.serializers=R,this._serialize=$),D&&(this._logEvent=d([].concat(H._logEvent.bindings,j)))}return O.prototype=this,new O(this)}return m}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=r,s.stdTimeFunctions=Object.assign({},{nullTime:E,epochTime:S,unixTime:C,isoTime:_});function i(P,D,F,I){const U=Object.getPrototypeOf(D);D[F]=D.levelVal>D.levels.values[F]?y:U[F]?U[F]:e[F]||e[I]||y,o(P,D,F)}function o(P,D,F){!P.transmit&&D[F]===y||(D[F]=(function(I){return function(){const L=P.timestamp(),B=new Array(arguments.length),A=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var m=0;m<B.length;m++)B[m]=arguments[m];if(P.serialize&&!P.asObject&&c(B,this._serialize,this.serializers,this._stdErrSerialize),P.asObject?I.call(A,a(this,F,B,L)):I.apply(A,B),P.transmit){const b=P.transmit.level||D.level,w=s.levels.values[b],x=s.levels.values[F];if(x<w)return;l(this,{ts:L,methodLevel:F,methodValue:x,transmitValue:s.levels.values[P.transmit.level||D.level],send:P.transmit.send,val:D.levelVal},B)}}})(D[F]))}function a(P,D,F,I){P._serialize&&c(F,P._serialize,P.serializers,P._stdErrSerialize);const U=F.slice();let L=U[0];const B={};I&&(B.time=I),B.level=s.levels.values[D];let A=(P._childLevel|0)+1;if(A<1&&(A=1),L!==null&&typeof L=="object"){for(;A--&&typeof U[0]=="object";)Object.assign(B,U.shift());L=U.length?t(U.shift(),U):void 0}else typeof L=="string"&&(L=t(U.shift(),U));return L!==void 0&&(B.msg=L),B}function c(P,D,F,I){for(const U in P)if(I&&P[U]instanceof Error)P[U]=s.stdSerializers.err(P[U]);else if(typeof P[U]=="object"&&!Array.isArray(P[U]))for(const L in P[U])D&&D.indexOf(L)>-1&&L in F&&(P[U][L]=F[L](P[U][L]))}function u(P,D,F){return function(){const I=new Array(1+arguments.length);I[0]=D;for(var U=1;U<I.length;U++)I[U]=arguments[U-1];return P[F].apply(this,I)}}function l(P,D,F){const I=D.send,U=D.ts,L=D.methodLevel,B=D.methodValue,A=D.val,m=P._logEvent.bindings;c(F,P._serialize||Object.keys(P.serializers),P.serializers,P._stdErrSerialize===void 0?!0:P._stdErrSerialize),P._logEvent.ts=U,P._logEvent.messages=F.filter(function(b){return m.indexOf(b)===-1}),P._logEvent.level.label=L,P._logEvent.level.value=B,I(L,P._logEvent,A),P._logEvent=d(m)}function d(P){return{ts:0,messages:[],bindings:P||[],level:{label:"",value:0}}}function f(P){const D={type:P.constructor.name,msg:P.message,stack:P.stack};for(const F in P)D[F]===void 0&&(D[F]=P[F]);return D}function p(P){return typeof P.timestamp=="function"?P.timestamp:P.timestamp===!1?E:S}function g(){return{}}function h(P){return P}function y(){}function E(){return!1}function S(){return Date.now()}function C(){return Math.round(Date.now()/1e3)}function _(){return new Date(Date.now()).toISOString()}function T(){function P(D){return typeof D<"u"&&D}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return P(self)||P(window)||P(this)||{}}}return pR}var Tm=cje();const A_=Ea(Tm),uje={level:"info"},x_="custom_context",g9=1e3*1024;let lje=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},wK=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new lje(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},zie=class{constructor(e,r=g9){this.level=e??"error",this.levelValue=Tm.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new wK(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===Tm.levels.values.error?console.error(e):r===Tm.levels.values.warn?console.warn(e):r===Tm.levels.values.debug?console.debug(e):r===Tm.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Lc({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new wK(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(Lc({extraMetadata:e})),new Blob(r,{type:"application/json"})}},dje=class{constructor(e,r=g9){this.baseChunkLogger=new zie(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},fje=class{constructor(e,r=g9){this.baseChunkLogger=new zie(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var hje=Object.defineProperty,pje=Object.defineProperties,gje=Object.getOwnPropertyDescriptors,vK=Object.getOwnPropertySymbols,mje=Object.prototype.hasOwnProperty,yje=Object.prototype.propertyIsEnumerable,EK=(t,e,r)=>e in t?hje(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Q6=(t,e)=>{for(var r in e||(e={}))mje.call(e,r)&&EK(t,r,e[r]);if(vK)for(var r of vK(e))yje.call(e,r)&&EK(t,r,e[r]);return t},e5=(t,e)=>pje(t,gje(e));function rb(t){return e5(Q6({},t),{level:t?.level||uje.level})}function bje(t,e=x_){return t[e]||""}function wje(t,e,r=x_){return t[r]=e,t}function Pa(t,e=x_){let r="";return typeof t.bindings>"u"?r=bje(t,e):r=t.bindings().context||"",r}function vje(t,e,r=x_){const n=Pa(t,r);return n.trim()?`${n}/${e}`:e}function bo(t,e,r=x_){const n=vje(t,e,r),s=t.child({context:n});return wje(s,n,r)}function Eje(t){var e,r;const n=new dje((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:A_(e5(Q6({},t.opts),{level:"trace",browser:e5(Q6({},(r=t.opts)==null?void 0:r.browser),{write:s=>n.write(s)})})),chunkLoggerController:n}}function _je(t){var e;const r=new fje((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:A_(e5(Q6({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function m9(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Eje(t):_je(t)}var Aje=Object.defineProperty,xje=(t,e,r)=>e in t?Aje(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_K=(t,e,r)=>xje(t,typeof e!="symbol"?e+"":e,r);let Cje=class extends oc{constructor(e){super(),this.opts=e,_K(this,"protocol","wc"),_K(this,"version",2)}};var Sje=Object.defineProperty,Ije=(t,e,r)=>e in t?Sje(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tje=(t,e,r)=>Ije(t,e+"",r);let Nje=class extends oc{constructor(e,r){super(),this.core=e,this.logger=r,Tje(this,"records",new Map)}},Pje=class{constructor(e,r){this.logger=e,this.core=r}};class Rje extends oc{constructor(e,r){super(),this.relayer=e,this.logger=r}}let Oje=class extends oc{constructor(e){super()}},kje=class{constructor(e,r,n,s){this.core=e,this.logger=r,this.name=n}},Bje=class extends oc{constructor(e,r){super(),this.relayer=e,this.logger=r}},Uje=class extends oc{constructor(e,r){super(),this.core=e,this.logger=r}},Mje=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},Dje=class{constructor(e,r){this.projectId=e,this.logger=r}},jje=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};var Lje=Object.defineProperty,Fje=(t,e,r)=>e in t?Lje(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,AK=(t,e,r)=>Fje(t,typeof e!="symbol"?e+"":e,r);let $je=class{constructor(e){this.opts=e,AK(this,"protocol","wc"),AK(this,"version",2)}},qje=class{constructor(e){this.client=e}};function rE(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function UO(t){return rE(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Wie="2.31.0";let gR={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${Wie}`};class O0 extends Error{constructor(e,r={}){const n=r.cause instanceof O0?r.cause.details:r.cause?.message?r.cause.message:r.details,s=r.cause instanceof O0&&r.cause.docsPath||r.docsPath,i=gR.getDocsUrl?.({...r,docsPath:s}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...gR.version?[`Version: ${gR.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=Wie}walk(e){return Vie(this,e)}}function Vie(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Vie(t.cause,e):e?null:t}class Gie extends O0{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function nb(t,{dir:e,size:r=32}={}){return typeof t=="string"?Hje(t,{dir:e,size:r}):zje(t,{dir:e,size:r})}function Hje(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new Gie({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function zje(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new Gie({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let s=0;s<r;s++){const i=e==="right";n[i?s:r-s-1]=t[i?s:t.length-s-1]}return n}class Wje extends O0{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class Vje extends O0{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function sb(t,{size:e}){if(UO(t)>e)throw new Vje({givenSize:UO(t),maxSize:e})}function MO(t,e={}){const{signed:r}=e;e.size&&sb(t,{size:e.size});const n=BigInt(t);if(!r)return n;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return n<=i?n:n-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Gje(t,e={}){return Number(MO(t,e))}const Kje=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function DO(t,e={}){return typeof t=="number"||typeof t=="bigint"?Zie(t,e):typeof t=="string"?Jje(t,e):typeof t=="boolean"?Zje(t,e):Kie(t,e)}function Zje(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(sb(r,{size:e.size}),nb(r,{size:e.size})):r}function Kie(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=Kje[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(sb(n,{size:e.size}),nb(n,{dir:"right",size:e.size})):n}function Zie(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new Wje({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?nb(a,{size:n}):a}const Yje=new TextEncoder;function Jje(t,e={}){const r=Yje.encode(t);return Kie(r,e)}const Xje=new TextEncoder;function Qje(t,e={}){return typeof t=="number"||typeof t=="bigint"?tLe(t,e):typeof t=="boolean"?eLe(t,e):rE(t)?Yie(t,e):Jie(t,e)}function eLe(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(sb(r,{size:e.size}),nb(r,{size:e.size})):r}const _d={zero:48,nine:57,A:65,F:70,a:97,f:102};function xK(t){if(t>=_d.zero&&t<=_d.nine)return t-_d.zero;if(t>=_d.A&&t<=_d.F)return t-(_d.A-10);if(t>=_d.a&&t<=_d.f)return t-(_d.a-10)}function Yie(t,e={}){let r=t;e.size&&(sb(r,{size:e.size}),r=nb(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const s=n.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=xK(n.charCodeAt(a++)),u=xK(n.charCodeAt(a++));if(c===void 0||u===void 0)throw new O0(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);i[o]=c*16+u}return i}function tLe(t,e){const r=Zie(t,e);return Yie(r)}function Jie(t,e={}){const r=Xje.encode(t);return typeof e.size=="number"?(sb(r,{size:e.size}),nb(r,{dir:"right",size:e.size})):r}const qS=BigInt(2**32-1),CK=BigInt(32);function rLe(t,e=!1){return e?{h:Number(t&qS),l:Number(t>>CK&qS)}:{h:Number(t>>CK&qS)|0,l:Number(t&qS)|0}}function nLe(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:o,l:a}=rLe(t[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const sLe=(t,e,r)=>t<<r|e>>>32-r,iLe=(t,e,r)=>e<<r|t>>>32-r,oLe=(t,e,r)=>e<<r-32|t>>>64-r,aLe=(t,e,r)=>t<<r-32|e>>>64-r,tm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function cLe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function t5(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function nE(t,...e){if(!cLe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function prt(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");t5(t.outputLen),t5(t.blockLen)}function SK(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function uLe(t,e){nE(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function lLe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Xie(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function grt(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function mrt(t,e){return t<<32-e|t>>>e}const dLe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function fLe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function hLe(t){for(let e=0;e<t.length;e++)t[e]=fLe(t[e]);return t}const IK=dLe?t=>t:hLe;function pLe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Qie(t){return typeof t=="string"&&(t=pLe(t)),nE(t),t}function yrt(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];nE(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}class gLe{}function mLe(t){const e=n=>t().update(Qie(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function brt(t=32){if(tm&&typeof tm.getRandomValues=="function")return tm.getRandomValues(new Uint8Array(t));if(tm&&typeof tm.randomBytes=="function")return Uint8Array.from(tm.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const yLe=BigInt(0),Jw=BigInt(1),bLe=BigInt(2),wLe=BigInt(7),vLe=BigInt(256),ELe=BigInt(113),eoe=[],toe=[],roe=[];for(let t=0,e=Jw,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],eoe.push(2*(5*n+r)),toe.push((t+1)*(t+2)/2%64);let s=yLe;for(let i=0;i<7;i++)e=(e<<Jw^(e>>wLe)*ELe)%vLe,e&bLe&&(s^=Jw<<(Jw<<BigInt(i))-Jw);roe.push(s)}const noe=nLe(roe,!0),_Le=noe[0],ALe=noe[1],TK=(t,e,r)=>r>32?oLe(t,e,r):sLe(t,e,r),NK=(t,e,r)=>r>32?aLe(t,e,r):iLe(t,e,r);function xLe(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],d=TK(u,l,1)^r[a],f=NK(u,l,1)^r[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=toe[o],c=TK(s,i,a),u=NK(s,i,a),l=eoe[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=_Le[n],t[1]^=ALe[n]}Xie(r)}class y9 extends gLe{constructor(e,r,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,t5(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=lLe(this.state)}clone(){return this._cloneInto()}keccak(){IK(this.state32),xLe(this.state32,this.rounds),IK(this.state32),this.posOut=0,this.pos=0}update(e){SK(this),e=Qie(e),nE(e);const{blockLen:r,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){SK(this,!1),nE(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return t5(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(uLe(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Xie(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new y9(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const CLe=(t,e,r)=>mLe(()=>new y9(e,t,r)),SLe=CLe(1,136,256/8);function soe(t,e){const r=e||"hex",n=SLe(rE(t,{strict:!1})?Qje(t):t);return r==="bytes"?n:DO(n)}class ILe extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const mR=new ILe(8192);function TLe(t,e){if(mR.has(`${t}.${e}`))return mR.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=soe(Jie(r),"bytes"),s=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(n[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return mR.set(`${t}.${e}`,i),i}function NLe(t){const e=soe(`0x${t.substring(4)}`).substring(26);return TLe(`0x${e}`)}async function PLe({hash:t,signature:e}){const r=rE(t)?t:DO(t),{secp256k1:n}=await Pr(async()=>{const{secp256k1:o}=await import("./secp256k1-Bmlm_rcI.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:d,yParity:f}=e,p=Number(f??d),g=PK(p);return new n.Signature(MO(u),MO(l)).addRecoveryBit(g)}const o=rE(e)?e:DO(e);if(UO(o)!==65)throw new Error("invalid signature length");const a=Gje(`0x${o.slice(130)}`),c=PK(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function PK(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function RLe({hash:t,signature:e}){return NLe(await PLe({hash:t,signature:e}))}var OLe={};const kLe=":";function b0(t){const[e,r]=t.split(kLe);return{namespace:e,reference:r}}function ioe(t,e){return t.includes(":")?[t]:e.chains||[]}var BLe=Object.defineProperty,ULe=Object.defineProperties,MLe=Object.getOwnPropertyDescriptors,RK=Object.getOwnPropertySymbols,DLe=Object.prototype.hasOwnProperty,jLe=Object.prototype.propertyIsEnumerable,jO=(t,e,r)=>e in t?BLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,OK=(t,e)=>{for(var r in e||(e={}))DLe.call(e,r)&&jO(t,r,e[r]);if(RK)for(var r of RK(e))jLe.call(e,r)&&jO(t,r,e[r]);return t},LLe=(t,e)=>ULe(t,MLe(e)),kK=(t,e,r)=>jO(t,typeof e!="symbol"?e+"":e,r);const FLe="ReactNative",nc={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},$Le="js";function r5(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ep(){return!li.getDocument()&&!!li.getNavigator()&&navigator.product===FLe}function qLe(){return ep()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function HLe(){return ep()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function ib(){return!r5()&&!!li.getNavigator()&&!!li.getDocument()}function C_(){return ep()?nc.reactNative:r5()?nc.node:ib()?nc.browser:nc.unknown}function BK(){var t;try{return ep()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function zLe(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const s=e[n];s!==void 0&&r.set(n,s)}return r.toString()}function WLe(t){var e,r;const n=ooe();try{return t!=null&&t.url&&n.url&&new URL(t.url).host!==new URL(n.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),t.url=n.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),LLe(OK(OK({},n),t),{url:t?.url||n.url,name:t?.name||n.name,description:t?.description||n.description,icons:(r=t?.icons)!=null&&r.length&&t.icons.length>0?t.icons:n.icons})}catch(s){return console.warn("Error populating app metadata",s),t||n}}function ooe(){return tX.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function VLe(){if(C_()===nc.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=QJ();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function GLe(){var t;const e=C_();return e===nc.browser?[e,((t=li.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function aoe(t,e,r){const n=VLe(),s=GLe();return[[t,e].join("-"),[$Le,r].join("-"),n,s].join("/")}function KLe({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=r.split("?"),l=aoe(t,e,n),d={auth:s,ua:l,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},f=zLe(u[1]||"",d);return u[0]+"?"+f}function o0(t,e){return t.filter(r=>e.includes(r)).length===t.length}function LO(t){return Object.fromEntries(t.entries())}function FO(t){return new Map(Object.entries(t))}function Lp(t=he.FIVE_MINUTES,e){const r=he.toMiliseconds(t||he.FIVE_MINUTES);let n,s,i,o;return{resolve:a=>{i&&n&&(clearTimeout(i),n(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),c(u)},r),n=a,s=c})}}function _l(t,e,r){return new Promise(async(n,s)=>{const i=setTimeout(()=>s(new Error(r)),e);try{const o=await t;n(o)}catch(o){s(o)}clearTimeout(i)})}function coe(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function ZLe(t){return coe("topic",t)}function YLe(t){return coe("id",t)}function uoe(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function zs(t,e){return he.fromMiliseconds(Date.now()+he.toMiliseconds(t))}function Qf(t){return Date.now()>=he.toMiliseconds(t)}function nn(t,e){return`${t}${e?`:${e}`:""}`}function Tl(t=[],e=[]){return[...new Set([...t,...e])]}async function JLe({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r,i=s?.href;if(typeof i!="string")return;const o=XLe(i,t,e),a=C_();if(a===nc.browser){if(!((n=li.getDocument())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}QLe(o)}else a===nc.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function XLe(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${nFe(n,!0)}`}else s=`${s}/wc?${n}`;return s}function QLe(t){let e="_self";rFe()?e="_top":(tFe()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function eFe(t,e){let r="";try{if(ib()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function UK(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function MK(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function b9(){return typeof process<"u"&&OLe.IS_VITEST==="true"}function tFe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function rFe(){try{return window.self!==window.top}catch{return!1}}function nFe(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function loe(t){return Buffer.from(t,"base64").toString("utf-8")}function sFe(t){return new Promise(e=>setTimeout(e,t))}let iFe=class{constructor({limit:e}){kK(this,"limit"),kK(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const r=this.set.values().next().value;r&&this.set.delete(r)}this.set.add(e)}}has(e){return this.set.has(e)}};const HS=BigInt(2**32-1),DK=BigInt(32);function doe(t,e=!1){return e?{h:Number(t&HS),l:Number(t>>DK&HS)}:{h:Number(t>>DK&HS)|0,l:Number(t&HS)|0}}function foe(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:o,l:a}=doe(t[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const jK=(t,e,r)=>t>>>r,LK=(t,e,r)=>t<<32-r|e>>>r,eh=(t,e,r)=>t>>>r|e<<32-r,th=(t,e,r)=>t<<32-r|e>>>r,m1=(t,e,r)=>t<<64-r|e>>>r-32,y1=(t,e,r)=>t>>>r-32|e<<64-r,oFe=(t,e)=>e,aFe=(t,e)=>t,cFe=(t,e,r)=>t<<r|e>>>32-r,uFe=(t,e,r)=>e<<r|t>>>32-r,lFe=(t,e,r)=>e<<r-32|t>>>64-r,dFe=(t,e,r)=>t<<r-32|e>>>64-r;function yu(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const w9=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),v9=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,fFe=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),hFe=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,pFe=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),gFe=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,rm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function E9(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function rf(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function qc(t,...e){if(!E9(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function _9(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");rf(t.outputLen),rf(t.blockLen)}function Ph(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function A9(t,e){qc(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function sE(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Hc(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function yR(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function sl(t,e){return t<<32-e|t>>>e}const hoe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function poe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Id=hoe?t=>t:t=>poe(t);function mFe(t){for(let e=0;e<t.length;e++)t[e]=poe(t[e]);return t}const rh=hoe?t=>t:mFe,goe=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",yFe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function iE(t){if(qc(t),goe)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=yFe[t[r]];return e}const Ad={_0:48,_9:57,A:65,F:70,a:97,f:102};function FK(t){if(t>=Ad._0&&t<=Ad._9)return t-Ad._0;if(t>=Ad.A&&t<=Ad.F)return t-(Ad.A-10);if(t>=Ad.a&&t<=Ad.f)return t-(Ad.a-10)}function x9(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(goe)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=FK(t.charCodeAt(i)),a=FK(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function bFe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ku(t){return typeof t=="string"&&(t=bFe(t)),qc(t),t}function a0(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];qc(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let VT=class{};function S_(t){const e=n=>t().update(ku(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function wFe(t){const e=(n,s)=>t(s).update(ku(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function ob(t=32){if(rm&&typeof rm.getRandomValues=="function")return rm.getRandomValues(new Uint8Array(t));if(rm&&typeof rm.randomBytes=="function")return Uint8Array.from(rm.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const vFe=BigInt(0),Xw=BigInt(1),EFe=BigInt(2),_Fe=BigInt(7),AFe=BigInt(256),xFe=BigInt(113),moe=[],yoe=[],boe=[];for(let t=0,e=Xw,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],moe.push(2*(5*n+r)),yoe.push((t+1)*(t+2)/2%64);let s=vFe;for(let i=0;i<7;i++)e=(e<<Xw^(e>>_Fe)*xFe)%AFe,e&EFe&&(s^=Xw<<(Xw<<BigInt(i))-Xw);boe.push(s)}const woe=foe(boe,!0),CFe=woe[0],SFe=woe[1],$K=(t,e,r)=>r>32?lFe(t,e,r):cFe(t,e,r),qK=(t,e,r)=>r>32?dFe(t,e,r):uFe(t,e,r);function IFe(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],d=$K(u,l,1)^r[a],f=qK(u,l,1)^r[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=yoe[o],c=$K(s,i,a),u=qK(s,i,a),l=moe[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=CFe[n],t[1]^=SFe[n]}Hc(r)}let TFe=class voe extends VT{constructor(e,r,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,rf(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=sE(this.state)}clone(){return this._cloneInto()}keccak(){rh(this.state32),IFe(this.state32,this.rounds),rh(this.state32),this.posOut=0,this.pos=0}update(e){Ph(this),e=ku(e),qc(e);const{blockLen:r,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Ph(this,!1),qc(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return rf(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(A9(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Hc(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new voe(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const NFe=(t,e,r)=>S_(()=>new TFe(e,t,r)),PFe=NFe(1,136,256/8);function RFe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function OFe(t,e,r){return t&e^~t&r}function kFe(t,e,r){return t&e^t&r^e&r}let Eoe=class extends VT{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=yR(this.buffer)}update(e){Ph(this),e=ku(e),qc(e);const{view:r,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=yR(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ph(this),A9(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,Hc(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;RFe(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=yR(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}};const Hf=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qi=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),eo=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),BFe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),zf=new Uint32Array(64);let UFe=class extends Eoe{constructor(e=32){super(64,e,8,!1),this.A=Hf[0]|0,this.B=Hf[1]|0,this.C=Hf[2]|0,this.D=Hf[3]|0,this.E=Hf[4]|0,this.F=Hf[5]|0,this.G=Hf[6]|0,this.H=Hf[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)zf[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const f=zf[d-15],p=zf[d-2],g=sl(f,7)^sl(f,18)^f>>>3,h=sl(p,17)^sl(p,19)^p>>>10;zf[d]=h+zf[d-7]+g+zf[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=sl(a,6)^sl(a,11)^sl(a,25),p=l+f+OFe(a,c,u)+BFe[d]+zf[d]|0,g=(sl(n,2)^sl(n,13)^sl(n,22))+kFe(n,s,i)|0;l=u,u=c,c=a,a=o+p|0,o=i,i=s,s=n,n=p+g|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){Hc(zf)}destroy(){this.set(0,0,0,0,0,0,0,0),Hc(this.buffer)}};const _oe=foe(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),MFe=_oe[0],DFe=_oe[1],Wf=new Uint32Array(80),Vf=new Uint32Array(80);let C9=class extends Eoe{constructor(e=64){super(128,e,16,!1),this.Ah=eo[0]|0,this.Al=eo[1]|0,this.Bh=eo[2]|0,this.Bl=eo[3]|0,this.Ch=eo[4]|0,this.Cl=eo[5]|0,this.Dh=eo[6]|0,this.Dl=eo[7]|0,this.Eh=eo[8]|0,this.El=eo[9]|0,this.Fh=eo[10]|0,this.Fl=eo[11]|0,this.Gh=eo[12]|0,this.Gl=eo[13]|0,this.Hh=eo[14]|0,this.Hl=eo[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:p,Gl:g,Hh:h,Hl:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=p|0,this.Gl=g|0,this.Hh=h|0,this.Hl=y|0}process(e,r){for(let C=0;C<16;C++,r+=4)Wf[C]=e.getUint32(r),Vf[C]=e.getUint32(r+=4);for(let C=16;C<80;C++){const _=Wf[C-15]|0,T=Vf[C-15]|0,P=eh(_,T,1)^eh(_,T,8)^jK(_,T,7),D=th(_,T,1)^th(_,T,8)^LK(_,T,7),F=Wf[C-2]|0,I=Vf[C-2]|0,U=eh(F,I,19)^m1(F,I,61)^jK(F,I,6),L=th(F,I,19)^y1(F,I,61)^LK(F,I,6),B=fFe(D,L,Vf[C-7],Vf[C-16]),A=hFe(B,P,U,Wf[C-7],Wf[C-16]);Wf[C]=A|0,Vf[C]=B|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:p,Fl:g,Gh:h,Gl:y,Hh:E,Hl:S}=this;for(let C=0;C<80;C++){const _=eh(d,f,14)^eh(d,f,18)^m1(d,f,41),T=th(d,f,14)^th(d,f,18)^y1(d,f,41),P=d&p^~d&h,D=f&g^~f&y,F=pFe(S,T,D,DFe[C],Vf[C]),I=gFe(F,E,_,P,MFe[C],Wf[C]),U=F|0,L=eh(n,s,28)^m1(n,s,34)^m1(n,s,39),B=th(n,s,28)^y1(n,s,34)^y1(n,s,39),A=n&i^n&a^i&a,m=s&o^s&c^o&c;E=h|0,S=y|0,h=p|0,y=g|0,p=d|0,g=f|0,{h:d,l:f}=yu(u|0,l|0,I|0,U|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const b=w9(U,B,m);n=v9(b,I,L,A),s=b|0}({h:n,l:s}=yu(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=yu(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=yu(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=yu(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=yu(this.Eh|0,this.El|0,d|0,f|0),{h:p,l:g}=yu(this.Fh|0,this.Fl|0,p|0,g|0),{h,l:y}=yu(this.Gh|0,this.Gl|0,h|0,y|0),{h:E,l:S}=yu(this.Hh|0,this.Hl|0,E|0,S|0),this.set(n,s,i,o,a,c,u,l,d,f,p,g,h,y,E,S)}roundClean(){Hc(Wf,Vf)}destroy(){Hc(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},jFe=class extends C9{constructor(){super(48),this.Ah=Qi[0]|0,this.Al=Qi[1]|0,this.Bh=Qi[2]|0,this.Bl=Qi[3]|0,this.Ch=Qi[4]|0,this.Cl=Qi[5]|0,this.Dh=Qi[6]|0,this.Dl=Qi[7]|0,this.Eh=Qi[8]|0,this.El=Qi[9]|0,this.Fh=Qi[10]|0,this.Fl=Qi[11]|0,this.Gh=Qi[12]|0,this.Gl=Qi[13]|0,this.Hh=Qi[14]|0,this.Hl=Qi[15]|0}};const to=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class LFe extends C9{constructor(){super(32),this.Ah=to[0]|0,this.Al=to[1]|0,this.Bh=to[2]|0,this.Bl=to[3]|0,this.Ch=to[4]|0,this.Cl=to[5]|0,this.Dh=to[6]|0,this.Dl=to[7]|0,this.Eh=to[8]|0,this.El=to[9]|0,this.Fh=to[10]|0,this.Fl=to[11]|0,this.Gh=to[12]|0,this.Gl=to[13]|0,this.Hh=to[14]|0,this.Hl=to[15]|0}}const GT=S_(()=>new UFe),FFe=S_(()=>new C9),$Fe=S_(()=>new jFe),qFe=S_(()=>new LFe),HFe=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),$s=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Xe=new Uint32Array(32);function Gf(t,e,r,n,s,i){const o=s[i],a=s[i+1];let c=Xe[2*t],u=Xe[2*t+1],l=Xe[2*e],d=Xe[2*e+1],f=Xe[2*r],p=Xe[2*r+1],g=Xe[2*n],h=Xe[2*n+1],y=w9(c,l,o);u=v9(y,u,d,a),c=y|0,{Dh:h,Dl:g}={Dh:h^u,Dl:g^c},{Dh:h,Dl:g}={Dh:oFe(h,g),Dl:aFe(h)},{h:p,l:f}=yu(p,f,h,g),{Bh:d,Bl:l}={Bh:d^p,Bl:l^f},{Bh:d,Bl:l}={Bh:eh(d,l,24),Bl:th(d,l,24)},Xe[2*t]=c,Xe[2*t+1]=u,Xe[2*e]=l,Xe[2*e+1]=d,Xe[2*r]=f,Xe[2*r+1]=p,Xe[2*n]=g,Xe[2*n+1]=h}function Kf(t,e,r,n,s,i){const o=s[i],a=s[i+1];let c=Xe[2*t],u=Xe[2*t+1],l=Xe[2*e],d=Xe[2*e+1],f=Xe[2*r],p=Xe[2*r+1],g=Xe[2*n],h=Xe[2*n+1],y=w9(c,l,o);u=v9(y,u,d,a),c=y|0,{Dh:h,Dl:g}={Dh:h^u,Dl:g^c},{Dh:h,Dl:g}={Dh:eh(h,g,16),Dl:th(h,g,16)},{h:p,l:f}=yu(p,f,h,g),{Bh:d,Bl:l}={Bh:d^p,Bl:l^f},{Bh:d,Bl:l}={Bh:m1(d,l,63),Bl:y1(d,l,63)},Xe[2*t]=c,Xe[2*t+1]=u,Xe[2*e]=l,Xe[2*e+1]=d,Xe[2*r]=f,Xe[2*r+1]=p,Xe[2*n]=g,Xe[2*n+1]=h}function zFe(t,e={},r,n,s){if(rf(r),t<0||t>r)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>r))throw new Error("key length must be undefined or 1.."+r);if(o!==void 0&&o.length!==n)throw new Error("salt must be undefined or "+n);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class WFe extends VT{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,rf(e),rf(r),this.blockLen=e,this.outputLen=r,this.buffer=new Uint8Array(e),this.buffer32=sE(this.buffer)}update(e){Ph(this),e=ku(e),qc(e);const{blockLen:r,buffer:n,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===r&&(rh(s),this.compress(s,0,!1),rh(s),this.pos=0);const u=Math.min(r-this.pos,i-c),l=o+c;if(u===r&&!(l%4)&&c+u<i){const d=new Uint32Array(a,l,Math.floor((i-c)/4));rh(d);for(let f=0;c+r<i;f+=s.length,c+=r)this.length+=r,this.compress(d,f,!1);rh(d);continue}n.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){Ph(this),A9(e,this);const{pos:r,buffer32:n}=this;this.finished=!0,Hc(this.buffer.subarray(r)),rh(n),this.compress(n,0,!0),rh(n);const s=sE(e);this.get().forEach((i,o)=>s[o]=Id(i))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){const{buffer:r,length:n,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(r),e.destroyed=i,e.finished=s,e.length=n,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class VFe extends WFe{constructor(e={}){const r=e.dkLen===void 0?64:e.dkLen;super(128,r),this.v0l=$s[0]|0,this.v0h=$s[1]|0,this.v1l=$s[2]|0,this.v1h=$s[3]|0,this.v2l=$s[4]|0,this.v2h=$s[5]|0,this.v3l=$s[6]|0,this.v3h=$s[7]|0,this.v4l=$s[8]|0,this.v4h=$s[9]|0,this.v5l=$s[10]|0,this.v5h=$s[11]|0,this.v6l=$s[12]|0,this.v6h=$s[13]|0,this.v7l=$s[14]|0,this.v7h=$s[15]|0,zFe(r,e,64,16,16);let{key:n,personalization:s,salt:i}=e,o=0;if(n!==void 0&&(n=ku(n),o=n.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=ku(i);const a=sE(i);this.v4l^=Id(a[0]),this.v4h^=Id(a[1]),this.v5l^=Id(a[2]),this.v5h^=Id(a[3])}if(s!==void 0){s=ku(s);const a=sE(s);this.v6l^=Id(a[0]),this.v6h^=Id(a[1]),this.v7l^=Id(a[2]),this.v7h^=Id(a[3])}if(n!==void 0){const a=new Uint8Array(this.blockLen);a.set(n),this.update(a)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:u,v4h:l,v5l:d,v5h:f,v6l:p,v6h:g,v7l:h,v7h:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,p,g,h,y){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=l|0,this.v5l=d|0,this.v5h=f|0,this.v6l=p|0,this.v6h=g|0,this.v7l=h|0,this.v7h=y|0}compress(e,r,n){this.get().forEach((c,u)=>Xe[u]=c),Xe.set($s,16);let{h:s,l:i}=doe(BigInt(this.length));Xe[24]=$s[8]^i,Xe[25]=$s[9]^s,n&&(Xe[28]=~Xe[28],Xe[29]=~Xe[29]);let o=0;const a=HFe;for(let c=0;c<12;c++)Gf(0,4,8,12,e,r+2*a[o++]),Kf(0,4,8,12,e,r+2*a[o++]),Gf(1,5,9,13,e,r+2*a[o++]),Kf(1,5,9,13,e,r+2*a[o++]),Gf(2,6,10,14,e,r+2*a[o++]),Kf(2,6,10,14,e,r+2*a[o++]),Gf(3,7,11,15,e,r+2*a[o++]),Kf(3,7,11,15,e,r+2*a[o++]),Gf(0,5,10,15,e,r+2*a[o++]),Kf(0,5,10,15,e,r+2*a[o++]),Gf(1,6,11,12,e,r+2*a[o++]),Kf(1,6,11,12,e,r+2*a[o++]),Gf(2,7,8,13,e,r+2*a[o++]),Kf(2,7,8,13,e,r+2*a[o++]),Gf(3,4,9,14,e,r+2*a[o++]),Kf(3,4,9,14,e,r+2*a[o++]);this.v0l^=Xe[0]^Xe[16],this.v0h^=Xe[1]^Xe[17],this.v1l^=Xe[2]^Xe[18],this.v1h^=Xe[3]^Xe[19],this.v2l^=Xe[4]^Xe[20],this.v2h^=Xe[5]^Xe[21],this.v3l^=Xe[6]^Xe[22],this.v3h^=Xe[7]^Xe[23],this.v4l^=Xe[8]^Xe[24],this.v4h^=Xe[9]^Xe[25],this.v5l^=Xe[10]^Xe[26],this.v5h^=Xe[11]^Xe[27],this.v6l^=Xe[12]^Xe[28],this.v6h^=Xe[13]^Xe[29],this.v7l^=Xe[14]^Xe[30],this.v7h^=Xe[15]^Xe[31],Hc(Xe)}destroy(){this.destroyed=!0,Hc(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const GFe=wFe(t=>new VFe(t)),KFe="https://rpc.walletconnect.org/v1";function Aoe(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(PFe(r)).toString("hex")}async function ZFe(t,e,r,n,s,i){switch(r.t){case"eip191":return await YFe(t,e,r.s);case"eip1271":return await JFe(t,e,r.s,n,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function YFe(t,e,r){return(await RLe({hash:Aoe(e),signature:r})).toLowerCase()===t.toLowerCase()}async function JFe(t,e,r,n,s,i){const o=b0(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u=r.substring(2),l=(u.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:Aoe(e)).substring(2),f=a+d+c+l+u,p=await fetch(`${i||KFe}/?chainId=${n}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:XFe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:f},"latest"]})}),{result:g}=await p.json();return g?g.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function XFe(){return Date.now()+Math.floor(Math.random()*1e3)}function QFe(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const s=1+n*64;if(r.length<s)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Zn.encode(i)}function e$e(t){const e=new Uint8Array(Buffer.from(t,"base64")),r=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),n=new Uint8Array(r.length+e.length);n.set(r),n.set(e,r.length);const s=GFe(n,{dkLen:32});return Zn.encode(s)}function HK(t){const e=new Uint8Array(GT(t$e(t)));return Zn.encode(e)}function t$e(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function zK(t){const e=Buffer.from(t,"base64"),r=xQ(e).txn;if(!r)throw new Error("Invalid signed transaction: missing 'txn' field");const n=EQ(r),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(n)]),o=qFe(i);return gQ.encode(o).replace(/=+$/,"")}function bR(t){const e=[];let r=BigInt(t);for(;r>=BigInt(128);)e.push(Number(r&BigInt(127)|BigInt(128))),r>>=BigInt(7);return e.push(Number(r)),Buffer.from(e)}function r$e(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),r=Buffer.from(t.signed.authInfoBytes,"base64"),n=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(bR(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(bR(r.length)),s.push(r),s.push(Buffer.from([26])),s.push(bR(n.length)),s.push(n);const i=Buffer.concat(s),o=GT(i);return Buffer.from(o).toString("hex").toUpperCase()}var n$e=Object.defineProperty,s$e=Object.defineProperties,i$e=Object.getOwnPropertyDescriptors,WK=Object.getOwnPropertySymbols,o$e=Object.prototype.hasOwnProperty,a$e=Object.prototype.propertyIsEnumerable,VK=(t,e,r)=>e in t?n$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c$e=(t,e)=>{for(var r in e||(e={}))o$e.call(e,r)&&VK(t,r,e[r]);if(WK)for(var r of WK(e))a$e.call(e,r)&&VK(t,r,e[r]);return t},u$e=(t,e)=>s$e(t,i$e(e));const l$e="did:pkh:",S9=t=>t?.split(":"),d$e=t=>{const e=t&&S9(t);if(e)return t.includes(l$e)?e[3]:e[1]},$O=t=>{const e=t&&S9(t);if(e)return e[2]+":"+e[3]},n5=t=>{const e=t&&S9(t);if(e)return e.pop()};async function GK(t){const{cacao:e,projectId:r}=t,{s:n,p:s}=e,i=xoe(s,s.iss),o=n5(s.iss);return await ZFe(o,i,n,$O(s.iss),r)}const xoe=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=n5(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${d$e(e)}`,c=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,l=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,f=t.requestId?`Request ID: ${t.requestId}`:void 0,p=t.resources?`Resources:${t.resources.map(h=>`
- ${h}`).join("")}`:void 0,g=RI(t.resources);if(g){const h=oE(g);s=v$e(s,h)}return[r,n,"",s,"",i,o,a,c,u,l,d,f,p].filter(h=>h!=null).join(`
`)};function f$e(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function h$e(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function k0(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(s=>{const i=n[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function p$e(t,e,r,n={}){return r?.sort((s,i)=>s.localeCompare(i)),{att:{[t]:g$e(e,r,n)}}}function g$e(t,e,r={}){e=e?.sort((s,i)=>s.localeCompare(i));const n=e.map(s=>({[`${t}/${s}`]:[r]}));return Object.assign({},...n)}function Coe(t){return k0(t),`urn:recap:${f$e(t).replace(/=/g,"")}`}function oE(t){const e=h$e(t.replace("urn:recap:",""));return k0(e),e}function m$e(t,e,r){const n=p$e(t,e,r);return Coe(n)}function y$e(t){return t&&t.includes("urn:recap:")}function b$e(t,e){const r=oE(t),n=oE(e),s=w$e(r,n);return Coe(s)}function w$e(t,e){k0(t),k0(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),n={att:{}};return r.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;n.att[s]=u$e(c$e({},n.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((u=e.att[s])==null?void 0:u[a])})})}),n}function v$e(t="",e){k0(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,f)=>d.action.localeCompare(f.action));const u={};c.forEach(d=>{u[d.ability]||(u[d.ability]=[]),u[d.ability].push(d.action)});const l=Object.keys(u).map(d=>(s++,`(${s}) '${d}': '${u[d].join("', '")}' for '${a}'.`));n.push(l.join(", ").replace(".,","."))});const i=n.join(" "),o=`${r}${i}`;return`${t?t+" ":""}${o}`}function KK(t){var e;const r=oE(t);k0(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(s=>s.split("/")[1]):[]}function ZK(t){const e=oE(t);k0(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(s=>{var i;(i=s?.[0])!=null&&i.chains&&r.push(s[0].chains)})}),[...new Set(r.flat())]}function RI(t){if(!t)return;const e=t?.[t.length-1];return y$e(e)?e:void 0}function Soe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function qO(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function wR(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function fa(t,...e){if(!Soe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function YK(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function E$e(t,e){fa(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function wh(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ry(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function _$e(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const A$e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function x$e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function HO(t){if(typeof t=="string")t=x$e(t);else if(Soe(t))t=zO(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function C$e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function S$e(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const I$e=(t,e)=>{function r(n,...s){if(fa(n),!A$e)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?fa(u):fa(u,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&fa(s[1]);const o=e(n,...s),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");fa(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,fa(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(fa(u),i&&u.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(r,t),r};function JK(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!N$e(e))throw new Error("invalid output, must be aligned");return e}function XK(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function T$e(t,e,r){qO(r);const n=new Uint8Array(16),s=_$e(n);return XK(s,0,BigInt(e),r),XK(s,8,BigInt(t),r),n}function N$e(t){return t.byteOffset%4===0}function zO(t){return Uint8Array.from(t)}const Ioe=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),P$e=Ioe("expand 16-byte k"),R$e=Ioe("expand 32-byte k"),O$e=wh(P$e),k$e=wh(R$e);function Fr(t,e){return t<<e|t>>>32-e}function WO(t){return t.byteOffset%4===0}const zS=64,B$e=16,Toe=2**32-1,QK=new Uint32Array;function U$e(t,e,r,n,s,i,o,a){const c=s.length,u=new Uint8Array(zS),l=wh(u),d=WO(s)&&WO(i),f=d?wh(s):QK,p=d?wh(i):QK;for(let g=0;g<c;o++){if(t(e,r,n,l,o,a),o>=Toe)throw new Error("arx: counter overflow");const h=Math.min(zS,c-g);if(d&&h===zS){const y=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let E=0,S;E<B$e;E++)S=y+E,p[S]=f[S]^l[E];g+=zS;continue}for(let y=0,E;y<h;y++)E=g+y,i[E]=s[E]^u[y];g+=h}}function M$e(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=C$e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return wR(s),wR(o),qO(i),qO(r),(a,c,u,l,d=0)=>{fa(a),fa(c),fa(u);const f=u.length;if(l===void 0&&(l=new Uint8Array(f)),fa(l),wR(d),d<0||d>=Toe)throw new Error("arx: counter overflow");if(l.length<f)throw new Error(`arx: output (${l.length}) is shorter than data (${f})`);const p=[];let g=a.length,h,y;if(g===32)p.push(h=zO(a)),y=k$e;else if(g===16&&r)h=new Uint8Array(32),h.set(a),h.set(a,16),y=O$e,p.push(h);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);WO(c)||p.push(c=zO(c));const E=wh(h);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(y,E,wh(c.subarray(0,16)),E),c=c.subarray(16)}const S=16-s;if(S!==c.length)throw new Error(`arx: nonce must be ${S} or 16 bytes`);if(S!==12){const _=new Uint8Array(12);_.set(c,i?0:12-c.length),c=_,p.push(c)}const C=wh(c);return U$e(t,y,E,C,u,l,d,o),Ry(...p),l}}const bi=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class D$e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=HO(e),fa(e,32);const r=bi(e,0),n=bi(e,2),s=bi(e,4),i=bi(e,6),o=bi(e,8),a=bi(e,10),c=bi(e,12),u=bi(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=bi(e,16+2*l)}process(e,r,n=!1){const s=n?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],d=o[4],f=o[5],p=o[6],g=o[7],h=o[8],y=o[9],E=bi(e,r+0),S=bi(e,r+2),C=bi(e,r+4),_=bi(e,r+6),T=bi(e,r+8),P=bi(e,r+10),D=bi(e,r+12),F=bi(e,r+14);let I=i[0]+(E&8191),U=i[1]+((E>>>13|S<<3)&8191),L=i[2]+((S>>>10|C<<6)&8191),B=i[3]+((C>>>7|_<<9)&8191),A=i[4]+((_>>>4|T<<12)&8191),m=i[5]+(T>>>1&8191),b=i[6]+((T>>>14|P<<2)&8191),w=i[7]+((P>>>11|D<<5)&8191),x=i[8]+((D>>>8|F<<8)&8191),M=i[9]+(F>>>5|s),k=0,j=k+I*a+U*(5*y)+L*(5*h)+B*(5*g)+A*(5*p);k=j>>>13,j&=8191,j+=m*(5*f)+b*(5*d)+w*(5*l)+x*(5*u)+M*(5*c),k+=j>>>13,j&=8191;let N=k+I*c+U*a+L*(5*y)+B*(5*h)+A*(5*g);k=N>>>13,N&=8191,N+=m*(5*p)+b*(5*f)+w*(5*d)+x*(5*l)+M*(5*u),k+=N>>>13,N&=8191;let v=k+I*u+U*c+L*a+B*(5*y)+A*(5*h);k=v>>>13,v&=8191,v+=m*(5*g)+b*(5*p)+w*(5*f)+x*(5*d)+M*(5*l),k+=v>>>13,v&=8191;let R=k+I*l+U*u+L*c+B*a+A*(5*y);k=R>>>13,R&=8191,R+=m*(5*h)+b*(5*g)+w*(5*p)+x*(5*f)+M*(5*d),k+=R>>>13,R&=8191;let $=k+I*d+U*l+L*u+B*c+A*a;k=$>>>13,$&=8191,$+=m*(5*y)+b*(5*h)+w*(5*g)+x*(5*p)+M*(5*f),k+=$>>>13,$&=8191;let O=k+I*f+U*d+L*l+B*u+A*c;k=O>>>13,O&=8191,O+=m*a+b*(5*y)+w*(5*h)+x*(5*g)+M*(5*p),k+=O>>>13,O&=8191;let H=k+I*p+U*f+L*d+B*l+A*u;k=H>>>13,H&=8191,H+=m*c+b*a+w*(5*y)+x*(5*h)+M*(5*g),k+=H>>>13,H&=8191;let W=k+I*g+U*p+L*f+B*d+A*l;k=W>>>13,W&=8191,W+=m*u+b*c+w*a+x*(5*y)+M*(5*h),k+=W>>>13,W&=8191;let G=k+I*h+U*g+L*p+B*f+A*d;k=G>>>13,G&=8191,G+=m*l+b*u+w*c+x*a+M*(5*y),k+=G>>>13,G&=8191;let K=k+I*y+U*h+L*g+B*p+A*f;k=K>>>13,K&=8191,K+=m*d+b*l+w*u+x*c+M*a,k+=K>>>13,K&=8191,k=(k<<2)+k|0,k=k+j|0,j=k&8191,k=k>>>13,N+=k,i[0]=j,i[1]=N,i[2]=v,i[3]=R,i[4]=$,i[5]=O,i[6]=H,i[7]=W,i[8]=G,i[9]=K}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;Ry(n)}update(e){YK(this),e=HO(e),fa(e);const{buffer:r,blockLen:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Ry(this.h,this.r,this.buffer,this.pad)}digestInto(e){YK(this),E$e(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function j$e(t){const e=(n,s)=>t(s).update(HO(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const L$e=j$e(t=>new D$e(t));function F$e(t,e,r,n,s,i=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],d=e[1],f=e[2],p=e[3],g=e[4],h=e[5],y=e[6],E=e[7],S=s,C=r[0],_=r[1],T=r[2],P=o,D=a,F=c,I=u,U=l,L=d,B=f,A=p,m=g,b=h,w=y,x=E,M=S,k=C,j=_,N=T;for(let R=0;R<i;R+=2)P=P+U|0,M=Fr(M^P,16),m=m+M|0,U=Fr(U^m,12),P=P+U|0,M=Fr(M^P,8),m=m+M|0,U=Fr(U^m,7),D=D+L|0,k=Fr(k^D,16),b=b+k|0,L=Fr(L^b,12),D=D+L|0,k=Fr(k^D,8),b=b+k|0,L=Fr(L^b,7),F=F+B|0,j=Fr(j^F,16),w=w+j|0,B=Fr(B^w,12),F=F+B|0,j=Fr(j^F,8),w=w+j|0,B=Fr(B^w,7),I=I+A|0,N=Fr(N^I,16),x=x+N|0,A=Fr(A^x,12),I=I+A|0,N=Fr(N^I,8),x=x+N|0,A=Fr(A^x,7),P=P+L|0,N=Fr(N^P,16),w=w+N|0,L=Fr(L^w,12),P=P+L|0,N=Fr(N^P,8),w=w+N|0,L=Fr(L^w,7),D=D+B|0,M=Fr(M^D,16),x=x+M|0,B=Fr(B^x,12),D=D+B|0,M=Fr(M^D,8),x=x+M|0,B=Fr(B^x,7),F=F+A|0,k=Fr(k^F,16),m=m+k|0,A=Fr(A^m,12),F=F+A|0,k=Fr(k^F,8),m=m+k|0,A=Fr(A^m,7),I=I+U|0,j=Fr(j^I,16),b=b+j|0,U=Fr(U^b,12),I=I+U|0,j=Fr(j^I,8),b=b+j|0,U=Fr(U^b,7);let v=0;n[v++]=o+P|0,n[v++]=a+D|0,n[v++]=c+F|0,n[v++]=u+I|0,n[v++]=l+U|0,n[v++]=d+L|0,n[v++]=f+B|0,n[v++]=p+A|0,n[v++]=g+m|0,n[v++]=h+b|0,n[v++]=y+w|0,n[v++]=E+x|0,n[v++]=S+M|0,n[v++]=C+k|0,n[v++]=_+j|0,n[v++]=T+N|0}const $$e=M$e(F$e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),q$e=new Uint8Array(16),eZ=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(q$e.subarray(r))},H$e=new Uint8Array(32);function tZ(t,e,r,n,s){const i=t(e,r,H$e),o=L$e.create(i);s&&eZ(o,s),eZ(o,n);const a=T$e(n.length,s?s.length:0,!0);o.update(a);const c=o.digest();return Ry(i,a),c}const z$e=t=>(e,r,n)=>({encrypt(s,i){const o=s.length;i=JK(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,r,a,a,1);const c=tZ(t,e,r,a,n);return i.set(c,o),Ry(c),i},decrypt(s,i){i=JK(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=tZ(t,e,r,o,n);if(!S$e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,r,i,i,1),Ry(c),i}}),Noe=I$e({blockSize:64,nonceLength:12,tagLength:16},z$e($$e));let Poe=class extends VT{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,_9(e);const n=ku(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Hc(i)}update(e){return Ph(this),this.iHash.update(e),this}digestInto(e){Ph(this),qc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const KT=(t,e,r)=>new Poe(t,e).update(r).digest();KT.create=(t,e)=>new Poe(t,e);function W$e(t,e,r){return _9(t),r===void 0&&(r=new Uint8Array(t.outputLen)),KT(t,ku(r),ku(e))}const vR=Uint8Array.from([0]),rZ=Uint8Array.of();function V$e(t,e,r,n=32){_9(t),rf(n);const s=t.outputLen;if(n>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/s);r===void 0&&(r=rZ);const o=new Uint8Array(i*s),a=KT.create(t,e),c=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let l=0;l<i;l++)vR[0]=l+1,c.update(l===0?rZ:u).update(r).update(vR).digestInto(u),o.set(u,s*l),a._cloneInto(c);return a.destroy(),c.destroy(),Hc(u,vR),o.slice(0,n)}const G$e=(t,e,r,n,s)=>V$e(t,W$e(t,e,r),n,s),ZT=GT,I9=BigInt(0),VO=BigInt(1);function s5(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function WS(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Roe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?I9:BigInt("0x"+t)}function YT(t){return Roe(iE(t))}function i5(t){return qc(t),Roe(iE(Uint8Array.from(t).reverse()))}function T9(t,e){return x9(t.toString(16).padStart(e*2,"0"))}function N9(t,e){return T9(t,e).reverse()}function ia(t,e,r){let n;if(typeof e=="string")try{n=x9(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(E9(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}const ER=t=>typeof t=="bigint"&&I9<=t;function K$e(t,e,r){return ER(t)&&ER(e)&&ER(r)&&e<=t&&t<r}function GO(t,e,r,n){if(!K$e(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function Z$e(t){let e;for(e=0;t>I9;t>>=VO,e+=1);return e}const JT=t=>(VO<<BigInt(t))-VO;function Y$e(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=n(t),o=n(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...f)=>r(o,i,...f),l=(f=n(0))=>{o=u(s(0),f),i=u(),f.length!==0&&(o=u(s(1),f),i=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=u();const g=i.slice();p.push(g),f+=i.length}return a0(...p)};return(f,p)=>{c(),l(f);let g;for(;!(g=p(d()));)l();return c(),g}}function XT(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(r).forEach(([s,i])=>n(s,i,!0))}function nZ(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const wa=BigInt(0),Uo=BigInt(1),c0=BigInt(2),J$e=BigInt(3),Ooe=BigInt(4),koe=BigInt(5),Boe=BigInt(8);function Dc(t,e){const r=t%e;return r>=wa?r:e+r}function gu(t,e,r){let n=t;for(;e-- >wa;)n*=n,n%=r;return n}function sZ(t,e){if(t===wa)throw new Error("invert: expected non-zero number");if(e<=wa)throw new Error("invert: expected positive modulus, got "+e);let r=Dc(t,e),n=e,s=wa,i=Uo;for(;r!==wa;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==Uo)throw new Error("invert: does not exist");return Dc(s,e)}function Uoe(t,e){const r=(t.ORDER+Uo)/Ooe,n=t.pow(e,r);if(!t.eql(t.sqr(n),e))throw new Error("Cannot find square root");return n}function X$e(t,e){const r=(t.ORDER-koe)/Boe,n=t.mul(e,c0),s=t.pow(n,r),i=t.mul(e,s),o=t.mul(t.mul(i,c0),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function Q$e(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Uo,r=0;for(;e%c0===wa;)e/=c0,r++;let n=c0;const s=ab(t);for(;iZ(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return Uoe;let i=s.pow(n,e);const o=(e+Uo)/c0;return function(a,c){if(a.is0(c))return c;if(iZ(a,c)!==1)throw new Error("Cannot find square root");let u=r,l=a.mul(a.ONE,i),d=a.pow(c,e),f=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let p=1,g=a.sqr(d);for(;!a.eql(g,a.ONE);)if(p++,g=a.sqr(g),p===u)throw new Error("Cannot find square root");const h=Uo<<BigInt(u-p-1),y=a.pow(l,h);u=p,l=a.sqr(y),d=a.mul(d,l),f=a.mul(f,y)}return f}}function eqe(t){return t%Ooe===J$e?Uoe:t%Boe===koe?X$e:Q$e(t)}const tqe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function rqe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=tqe.reduce((n,s)=>(n[s]="function",n),e);return XT(t,r),t}function nqe(t,e,r){if(r<wa)throw new Error("invalid exponent, negatives unsupported");if(r===wa)return t.ONE;if(r===Uo)return e;let n=t.ONE,s=e;for(;r>wa;)r&Uo&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Uo;return n}function Moe(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),i),n}function iZ(t,e){const r=(t.ORDER-Uo)/c0,n=t.pow(e,r),s=t.eql(n,t.ONE),i=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function sqe(t,e){e!==void 0&&rf(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function ab(t,e,r=!1,n={}){if(t<=wa)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const l=e;l.BITS&&(s=l.BITS),l.sqrt&&(i=l.sqrt),typeof l.isLE=="boolean"&&(r=l.isLE)}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:o,nByteLength:a}=sqe(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const u=Object.freeze({ORDER:t,isLE:r,BITS:o,BYTES:a,MASK:JT(o),ZERO:wa,ONE:Uo,create:l=>Dc(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return wa<=l&&l<t},is0:l=>l===wa,isValidNot0:l=>!u.is0(l)&&u.isValid(l),isOdd:l=>(l&Uo)===Uo,neg:l=>Dc(-l,t),eql:(l,d)=>l===d,sqr:l=>Dc(l*l,t),add:(l,d)=>Dc(l+d,t),sub:(l,d)=>Dc(l-d,t),mul:(l,d)=>Dc(l*d,t),pow:(l,d)=>nqe(u,l,d),div:(l,d)=>Dc(l*sZ(d,t),t),sqrN:l=>l*l,addN:(l,d)=>l+d,subN:(l,d)=>l-d,mulN:(l,d)=>l*d,inv:l=>sZ(l,t),sqrt:i||(l=>(c||(c=eqe(t)),c(u,l))),toBytes:l=>r?N9(l,a):T9(l,a),fromBytes:l=>{if(l.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+l.length);return r?i5(l):YT(l)},invertBatch:l=>Moe(u,l),cmov:(l,d,f)=>f?d:l});return Object.freeze(u)}function Doe(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function joe(t){const e=Doe(t);return e+Math.ceil(e/2)}function iqe(t,e,r=!1){const n=t.length,s=Doe(e),i=joe(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?i5(t):YT(t),a=Dc(o,e-Uo)+Uo;return r?N9(a,s):T9(a,s)}const Oy=BigInt(0),u0=BigInt(1);function F1(t,e){const r=e.negate();return t?r:e}function oqe(t,e,r){const n=i=>i.pz,s=Moe(t.Fp,r.map(n));return r.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function Loe(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function _R(t,e){Loe(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),s=2**t,i=JT(t),o=BigInt(t);return{windows:r,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function oZ(t,e,r){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=r;let a=Number(t&s),c=t>>o;a>n&&(a-=i,c+=u0);const u=e*n,l=u+Math.abs(a)-1,d=a===0,f=a<0,p=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:p,offsetF:u}}function aqe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function cqe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const AR=new WeakMap,Foe=new WeakMap;function xR(t){return Foe.get(t)||1}function aZ(t){if(t!==Oy)throw new Error("invalid wNAF")}function uqe(t,e){return{constTimeNegate:F1,hasPrecomputes(r){return xR(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>Oy;)n&u0&&(s=s.add(i)),i=i.double(),n>>=u0;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=_R(n,e),o=[];let a=r,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){let i=t.ZERO,o=t.BASE;const a=_R(r,e);for(let c=0;c<a.windows;c++){const{nextN:u,offset:l,isZero:d,isNeg:f,isNegF:p,offsetF:g}=oZ(s,c,a);s=u,d?o=o.add(F1(p,n[g])):i=i.add(F1(f,n[l]))}return aZ(s),{p:i,f:o}},wNAFUnsafe(r,n,s,i=t.ZERO){const o=_R(r,e);for(let a=0;a<o.windows&&s!==Oy;a++){const{nextN:c,offset:u,isZero:l,isNeg:d}=oZ(s,a,o);if(s=c,!l){const f=n[u];i=i.add(d?f.negate():f)}}return aZ(s),i},getPrecomputes(r,n,s){let i=AR.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&(typeof s=="function"&&(i=s(i)),AR.set(n,i))),i},wNAFCached(r,n,s){const i=xR(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=xR(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){Loe(n,e),Foe.set(r,n),AR.delete(r)}}}function lqe(t,e,r,n){let s=e,i=t.ZERO,o=t.ZERO;for(;r>Oy||n>Oy;)r&u0&&(i=i.add(s)),n&u0&&(o=o.add(s)),s=s.double(),r>>=u0,n>>=u0;return{p1:i,p2:o}}function dqe(t,e,r,n){aqe(r,t),cqe(n,e);const s=r.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Z$e(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=JT(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let p=d;p>=0;p-=c){l.fill(o);for(let h=0;h<i;h++){const y=n[h],E=Number(y>>BigInt(p)&u);l[E]=l[E].add(r[h])}let g=o;for(let h=l.length-1,y=o;h>0;h--)y=y.add(l[h]),g=g.add(y);if(f=f.add(g),p!==0)for(let h=0;h<c;h++)f=f.double()}return f}function cZ(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return rqe(e),e}else return ab(t)}function fqe(t,e,r={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>Oy))throw new Error(`CURVE.${o} must be positive bigint`)}const n=cZ(e.p,r.Fp),s=cZ(e.n,r.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!n.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Qw=BigInt(0),nm=BigInt(1),VS=BigInt(2);function hqe(t){return XT(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function pqe(t){const e=hqe(t),{P:r,type:n,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=n==="x25519";if(!a&&n!=="x448")throw new Error("invalid type");const c=o||ob,u=a?255:448,l=a?32:56,d=BigInt(a?9:5),f=BigInt(a?121665:39081),p=a?VS**BigInt(254):VS**BigInt(447),g=a?BigInt(8)*VS**BigInt(251)-nm:BigInt(4)*VS**BigInt(445)-nm,h=p+g+nm,y=I=>Dc(I,r),E=S(d);function S(I){return N9(y(I),l)}function C(I){const U=ia("u coordinate",I,l);return a&&(U[31]&=127),y(i5(U))}function _(I){return i5(s(ia("scalar",I,l)))}function T(I,U){const L=F(C(U),_(I));if(L===Qw)throw new Error("invalid private or public key received");return S(L)}function P(I){return T(I,E)}function D(I,U,L){const B=y(I*(U-L));return U=y(U-B),L=y(L+B),{x_2:U,x_3:L}}function F(I,U){GO("u",I,Qw,r),GO("scalar",U,p,h);const L=U,B=I;let A=nm,m=Qw,b=I,w=nm,x=Qw;for(let k=BigInt(u-1);k>=Qw;k--){const j=L>>k&nm;x^=j,{x_2:A,x_3:b}=D(x,A,b),{x_2:m,x_3:w}=D(x,m,w),x=j;const N=A+m,v=y(N*N),R=A-m,$=y(R*R),O=v-$,H=b+w,W=b-w,G=y(W*N),K=y(H*R),Q=G+K,re=G-K;b=y(Q*Q),w=y(B*y(re*re)),A=y(v*$),m=y(O*(v+y(f*O)))}({x_2:A,x_3:b}=D(x,A,b)),{x_2:m,x_3:w}=D(x,m,w);const M=i(m);return y(A*M)}return{scalarMult:T,scalarMultBase:P,getSharedSecret:(I,U)=>T(I,U),getPublicKey:I=>P(I),utils:{randomPrivateKey:()=>c(l)},GuBytes:E.slice()}}BigInt(0);const gqe=BigInt(1),uZ=BigInt(2),mqe=BigInt(3),yqe=BigInt(5);BigInt(8);const $oe={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function bqe(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=$oe.p,o=t*t%i*t%i,a=gu(o,uZ,i)*o%i,c=gu(a,gqe,i)*t%i,u=gu(c,yqe,i)*c%i,l=gu(u,e,i)*u%i,d=gu(l,r,i)*l%i,f=gu(d,n,i)*d%i,p=gu(f,s,i)*f%i,g=gu(p,s,i)*f%i,h=gu(g,e,i)*u%i;return{pow_p_5_8:gu(h,uZ,i)*t%i,b2:o}}function wqe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const KO=(()=>{const t=$oe.p;return pqe({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:r,b2:n}=bqe(e);return Dc(gu(r,mqe,t)*n,t)},adjustScalarBytes:wqe})})();function lZ(t){t.lowS!==void 0&&s5("lowS",t.lowS),t.prehash!==void 0&&s5("prehash",t.prehash)}class vqe extends Error{constructor(e=""){super(e)}}const Md={Err:vqe,_tlv:{encode:(t,e)=>{const{Err:r}=Md;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=WS(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?WS(s.length/2|128):"";return WS(t)+i+s+e},decode(t,e){const{Err:r}=Md;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=Md;if(t<$1)throw new e("integer: negative integers are not allowed");let r=WS(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Md;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return YT(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Md,s=ia("signature",t),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=Md,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}},$1=BigInt(0),q1=BigInt(1),Eqe=BigInt(2),GS=BigInt(3),_qe=BigInt(4);function Aqe(t,e,r){function n(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),r)}return n}function qoe(t,e,r){const{BYTES:n}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=ia("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(n);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof i}`)}}if(r&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function xqe(t,e={}){const{Fp:r,Fn:n}=fqe("weierstrass",t,e),{h:s,n:i}=t;XT(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!r.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(F,I,U){const{x:L,y:B}=I.toAffine(),A=r.toBytes(L);if(s5("isCompressed",U),U){a();const m=!r.isOdd(B);return a0(Hoe(m),A)}else return a0(Uint8Array.of(4),A,r.toBytes(B))}function u(F){qc(F);const I=r.BYTES,U=I+1,L=2*I+1,B=F.length,A=F[0],m=F.subarray(1);if(B===U&&(A===2||A===3)){const b=r.fromBytes(m);if(!r.isValid(b))throw new Error("bad point: is not on curve, wrong x");const w=f(b);let x;try{x=r.sqrt(w)}catch(k){const j=k instanceof Error?": "+k.message:"";throw new Error("bad point: is not on curve, sqrt error"+j)}a();const M=r.isOdd(x);return(A&1)===1!==M&&(x=r.neg(x)),{x:b,y:x}}else if(B===L&&A===4){const b=r.fromBytes(m.subarray(I*0,I*1)),w=r.fromBytes(m.subarray(I*1,I*2));if(!p(b,w))throw new Error("bad point: is not on curve");return{x:b,y:w}}else throw new Error(`bad point: got length ${B}, expected compressed=${U} or uncompressed=${L}`)}const l=e.toBytes||c,d=e.fromBytes||u,f=Aqe(r,t.a,t.b);function p(F,I){const U=r.sqr(I),L=f(F);return r.eql(U,L)}if(!p(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const g=r.mul(r.pow(t.a,GS),_qe),h=r.mul(r.sqr(t.b),BigInt(27));if(r.is0(r.add(g,h)))throw new Error("bad curve params: a or b");function y(F,I,U=!1){if(!r.isValid(I)||U&&r.is0(I))throw new Error(`bad point coordinate ${F}`);return I}function E(F){if(!(F instanceof T))throw new Error("ProjectivePoint expected")}const S=nZ((F,I)=>{const{px:U,py:L,pz:B}=F;if(r.eql(B,r.ONE))return{x:U,y:L};const A=F.is0();I==null&&(I=A?r.ONE:r.inv(B));const m=r.mul(U,I),b=r.mul(L,I),w=r.mul(B,I);if(A)return{x:r.ZERO,y:r.ZERO};if(!r.eql(w,r.ONE))throw new Error("invZ was invalid");return{x:m,y:b}}),C=nZ(F=>{if(F.is0()){if(e.allowInfinityPoint&&!r.is0(F.py))return;throw new Error("bad point: ZERO")}const{x:I,y:U}=F.toAffine();if(!r.isValid(I)||!r.isValid(U))throw new Error("bad point: x or y not field elements");if(!p(I,U))throw new Error("bad point: equation left != right");if(!F.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function _(F,I,U,L,B){return U=new T(r.mul(U.px,F),U.py,U.pz),I=F1(L,I),U=F1(B,U),I.add(U)}class T{constructor(I,U,L){this.px=y("x",I),this.py=y("y",U,!0),this.pz=y("z",L),Object.freeze(this)}static fromAffine(I){const{x:U,y:L}=I||{};if(!I||!r.isValid(U)||!r.isValid(L))throw new Error("invalid affine point");if(I instanceof T)throw new Error("projective point not allowed");return r.is0(U)&&r.is0(L)?T.ZERO:new T(U,L,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){return oqe(T,"pz",I)}static fromBytes(I){return qc(I),T.fromHex(I)}static fromHex(I){const U=T.fromAffine(d(ia("pointHex",I)));return U.assertValidity(),U}static fromPrivateKey(I){const U=qoe(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return T.BASE.multiply(U(I))}static msm(I,U){return dqe(T,n,I,U)}precompute(I=8,U=!0){return D.setWindowSize(this,I),U||this.multiply(GS),this}_setWindowSize(I){this.precompute(I)}assertValidity(){C(this)}hasEvenY(){const{y:I}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(I)}equals(I){E(I);const{px:U,py:L,pz:B}=this,{px:A,py:m,pz:b}=I,w=r.eql(r.mul(U,b),r.mul(A,B)),x=r.eql(r.mul(L,b),r.mul(m,B));return w&&x}negate(){return new T(this.px,r.neg(this.py),this.pz)}double(){const{a:I,b:U}=t,L=r.mul(U,GS),{px:B,py:A,pz:m}=this;let b=r.ZERO,w=r.ZERO,x=r.ZERO,M=r.mul(B,B),k=r.mul(A,A),j=r.mul(m,m),N=r.mul(B,A);return N=r.add(N,N),x=r.mul(B,m),x=r.add(x,x),b=r.mul(I,x),w=r.mul(L,j),w=r.add(b,w),b=r.sub(k,w),w=r.add(k,w),w=r.mul(b,w),b=r.mul(N,b),x=r.mul(L,x),j=r.mul(I,j),N=r.sub(M,j),N=r.mul(I,N),N=r.add(N,x),x=r.add(M,M),M=r.add(x,M),M=r.add(M,j),M=r.mul(M,N),w=r.add(w,M),j=r.mul(A,m),j=r.add(j,j),M=r.mul(j,N),b=r.sub(b,M),x=r.mul(j,k),x=r.add(x,x),x=r.add(x,x),new T(b,w,x)}add(I){E(I);const{px:U,py:L,pz:B}=this,{px:A,py:m,pz:b}=I;let w=r.ZERO,x=r.ZERO,M=r.ZERO;const k=t.a,j=r.mul(t.b,GS);let N=r.mul(U,A),v=r.mul(L,m),R=r.mul(B,b),$=r.add(U,L),O=r.add(A,m);$=r.mul($,O),O=r.add(N,v),$=r.sub($,O),O=r.add(U,B);let H=r.add(A,b);return O=r.mul(O,H),H=r.add(N,R),O=r.sub(O,H),H=r.add(L,B),w=r.add(m,b),H=r.mul(H,w),w=r.add(v,R),H=r.sub(H,w),M=r.mul(k,O),w=r.mul(j,R),M=r.add(w,M),w=r.sub(v,M),M=r.add(v,M),x=r.mul(w,M),v=r.add(N,N),v=r.add(v,N),R=r.mul(k,R),O=r.mul(j,O),v=r.add(v,R),R=r.sub(N,R),R=r.mul(k,R),O=r.add(O,R),N=r.mul(v,O),x=r.add(x,N),N=r.mul(H,O),w=r.mul($,w),w=r.sub(w,N),N=r.mul($,v),M=r.mul(H,M),M=r.add(M,N),new T(w,x,M)}subtract(I){return this.add(I.negate())}is0(){return this.equals(T.ZERO)}multiply(I){const{endo:U}=e;if(!n.isValidNot0(I))throw new Error("invalid scalar: out of range");let L,B;const A=m=>D.wNAFCached(this,m,T.normalizeZ);if(U){const{k1neg:m,k1:b,k2neg:w,k2:x}=U.splitScalar(I),{p:M,f:k}=A(b),{p:j,f:N}=A(x);B=k.add(N),L=_(U.beta,M,j,m,w)}else{const{p:m,f:b}=A(I);L=m,B=b}return T.normalizeZ([L,B])[0]}multiplyUnsafe(I){const{endo:U}=e,L=this;if(!n.isValid(I))throw new Error("invalid scalar: out of range");if(I===$1||L.is0())return T.ZERO;if(I===q1)return L;if(D.hasPrecomputes(this))return this.multiply(I);if(U){const{k1neg:B,k1:A,k2neg:m,k2:b}=U.splitScalar(I),{p1:w,p2:x}=lqe(T,L,A,b);return _(U.beta,w,x,B,m)}else return D.wNAFCachedUnsafe(L,I)}multiplyAndAddUnsafe(I,U,L){const B=this.multiplyUnsafe(U).add(I.multiplyUnsafe(L));return B.is0()?void 0:B}toAffine(I){return S(this,I)}isTorsionFree(){const{isTorsionFree:I}=e;return s===q1?!0:I?I(T,this):D.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:I}=e;return s===q1?this:I?I(T,this):this.multiplyUnsafe(s)}toBytes(I=!0){return s5("isCompressed",I),this.assertValidity(),l(T,this,I)}toRawBytes(I=!0){return this.toBytes(I)}toHex(I=!0){return iE(this.toBytes(I))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}T.BASE=new T(t.Gx,t.Gy,r.ONE),T.ZERO=new T(r.ZERO,r.ONE,r.ZERO),T.Fp=r,T.Fn=n;const P=n.BITS,D=uqe(T,e.endo?Math.ceil(P/2):P);return T}function Hoe(t){return Uint8Array.of(t?2:3)}function Cqe(t,e,r={}){XT(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||ob,s=e.hmac||((L,...B)=>KT(e.hash,L,a0(...B))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function u(L){const B=a>>q1;return L>B}function l(L){return u(L)?o.neg(L):L}function d(L,B){if(!o.isValidNot0(B))throw new Error(`invalid signature ${L}: out of range 1..CURVE.n`)}class f{constructor(B,A,m){d("r",B),d("s",A),this.r=B,this.s=A,m!=null&&(this.recovery=m),Object.freeze(this)}static fromCompact(B){const A=o.BYTES,m=ia("compactSignature",B,A*2);return new f(o.fromBytes(m.subarray(0,A)),o.fromBytes(m.subarray(A,A*2)))}static fromDER(B){const{r:A,s:m}=Md.toSig(ia("DER",B));return new f(A,m)}assertValidity(){}addRecoveryBit(B){return new f(this.r,this.s,B)}recoverPublicKey(B){const A=i.ORDER,{r:m,s:b,recovery:w}=this;if(w==null||![0,1,2,3].includes(w))throw new Error("recovery id invalid");if(a*Eqe<A&&w>1)throw new Error("recovery id is ambiguous for h>1 curve");const x=w===2||w===3?m+a:m;if(!i.isValid(x))throw new Error("recovery id 2 or 3 invalid");const M=i.toBytes(x),k=t.fromHex(a0(Hoe((w&1)===0),M)),j=o.inv(x),N=C(ia("msgHash",B)),v=o.create(-N*j),R=o.create(b*j),$=t.BASE.multiplyUnsafe(v).add(k.multiplyUnsafe(R));if($.is0())throw new Error("point at infinify");return $.assertValidity(),$}hasHighS(){return u(this.s)}normalizeS(){return this.hasHighS()?new f(this.r,o.neg(this.s),this.recovery):this}toBytes(B){if(B==="compact")return a0(o.toBytes(this.r),o.toBytes(this.s));if(B==="der")return x9(Md.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return iE(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return iE(this.toBytes("compact"))}}const p=qoe(o,r.allowedPrivateKeyLengths,r.wrapPrivateKey),g={isValidPrivateKey(L){try{return p(L),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const L=a;return iqe(n(joe(L)),L)},precompute(L=8,B=t.BASE){return B.precompute(L,!1)}};function h(L,B=!0){return t.fromPrivateKey(L).toBytes(B)}function y(L){if(typeof L=="bigint")return!1;if(L instanceof t)return!0;const B=ia("key",L).length,A=i.BYTES,m=A+1,b=2*A+1;if(!(r.allowedPrivateKeyLengths||o.BYTES===m))return B===m||B===b}function E(L,B,A=!0){if(y(L)===!0)throw new Error("first arg must be private key");if(y(B)===!1)throw new Error("second arg must be public key");return t.fromHex(B).multiply(p(L)).toBytes(A)}const S=e.bits2int||function(L){if(L.length>8192)throw new Error("input is too large");const B=YT(L),A=L.length*8-c;return A>0?B>>BigInt(A):B},C=e.bits2int_modN||function(L){return o.create(S(L))},_=JT(c);function T(L){return GO("num < 2^"+c,L,$1,_),o.toBytes(L)}function P(L,B,A=D){if(["recovered","canonical"].some($=>$ in A))throw new Error("sign() legacy options not supported");const{hash:m}=e;let{lowS:b,prehash:w,extraEntropy:x}=A;b==null&&(b=!0),L=ia("msgHash",L),lZ(A),w&&(L=ia("prehashed msgHash",m(L)));const M=C(L),k=p(B),j=[T(k),T(M)];if(x!=null&&x!==!1){const $=x===!0?n(i.BYTES):x;j.push(ia("extraEntropy",$))}const N=a0(...j),v=M;function R($){const O=S($);if(!o.isValidNot0(O))return;const H=o.inv(O),W=t.BASE.multiply(O).toAffine(),G=o.create(W.x);if(G===$1)return;const K=o.create(H*o.create(v+G*k));if(K===$1)return;let Q=(W.x===G?0:2)|Number(W.y&q1),re=K;return b&&u(K)&&(re=l(K),Q^=1),new f(G,re,Q)}return{seed:N,k2sig:R}}const D={lowS:e.lowS,prehash:!1},F={lowS:e.lowS,prehash:!1};function I(L,B,A=D){const{seed:m,k2sig:b}=P(L,B,A);return Y$e(e.hash.outputLen,o.BYTES,s)(m,b)}t.BASE.precompute(8);function U(L,B,A,m=F){const b=L;B=ia("msgHash",B),A=ia("publicKey",A),lZ(m);const{lowS:w,prehash:x,format:M}=m;if("strict"in m)throw new Error("options.strict was renamed to lowS");if(M!==void 0&&!["compact","der","js"].includes(M))throw new Error('format must be "compact", "der" or "js"');const k=typeof b=="string"||E9(b),j=!k&&!M&&typeof b=="object"&&b!==null&&typeof b.r=="bigint"&&typeof b.s=="bigint";if(!k&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let N,v;try{if(j)if(M===void 0||M==="js")N=new f(b.r,b.s);else throw new Error("invalid format");if(k){try{M!=="compact"&&(N=f.fromDER(b))}catch(Q){if(!(Q instanceof Md.Err))throw Q}!N&&M!=="der"&&(N=f.fromCompact(b))}v=t.fromHex(A)}catch{return!1}if(!N||w&&N.hasHighS())return!1;x&&(B=e.hash(B));const{r:R,s:$}=N,O=C(B),H=o.inv($),W=o.create(O*H),G=o.create(R*H),K=t.BASE.multiplyUnsafe(W).add(v.multiplyUnsafe(G));return K.is0()?!1:o.create(K.x)===R}return Object.freeze({getPublicKey:h,getSharedSecret:E,sign:I,verify:U,utils:g,Point:t,Signature:f})}function Sqe(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=ab(e.n,t.nBitLength),s={Fp:r,Fn:n,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Iqe(t){const{CURVE:e,curveOpts:r}=Sqe(t),n={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,ecdsaOpts:n}}function Tqe(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function Nqe(t){const{CURVE:e,curveOpts:r,ecdsaOpts:n}=Iqe(t),s=xqe(e,r),i=Cqe(s,n,r);return Tqe(t,i)}function ZO(t,e){const r=n=>Nqe({...t,hash:n});return{...r(e),create:r}}const zoe={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Woe={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Voe={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Pqe=ab(zoe.p),Rqe=ab(Woe.p),Oqe=ab(Voe.p),kqe=ZO({...zoe,Fp:Pqe,lowS:!1},GT);ZO({...Woe,Fp:Rqe,lowS:!1},$Fe),ZO({...Voe,Fp:Oqe,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},FFe);const Bqe=kqe,Goe="base10",Mo="base16",ha="base64pad",uh="base64url",I_="utf8",Koe=0,Kd=1,T_=2,Uqe=0,dZ=1,H1=12,P9=32;function Mqe(){const t=KO.utils.randomPrivateKey(),e=KO.getPublicKey(t);return{privateKey:_n(t,Mo),publicKey:_n(e,Mo)}}function YO(){const t=ob(P9);return _n(t,Mo)}function Dqe(t,e){const r=KO.getSharedSecret(Yn(t,Mo),Yn(e,Mo)),n=G$e(ZT,r,void 0,void 0,P9);return _n(n,Mo)}function OI(t){const e=ZT(Yn(t,Mo));return _n(e,Mo)}function Mc(t){const e=ZT(Yn(t,I_));return _n(e,Mo)}function Zoe(t){return Yn(`${t}`,Goe)}function B0(t){return Number(_n(t,Goe))}function Yoe(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Joe(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return e+"=".repeat(r)}function jqe(t){const e=Zoe(typeof t.type<"u"?t.type:Koe);if(B0(e)===Kd&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Yn(t.senderPublicKey,Mo):void 0,n=typeof t.iv<"u"?Yn(t.iv,Mo):ob(H1),s=Yn(t.symKey,Mo),i=Noe(s,n).encrypt(Yn(t.message,I_)),o=Xoe({type:e,sealed:i,iv:n,senderPublicKey:r});return t.encoding===uh?Yoe(o):o}function Lqe(t){const e=Yn(t.symKey,Mo),{sealed:r,iv:n}=aE({encoded:t.encoded,encoding:t.encoding}),s=Noe(e,n).decrypt(r);if(s===null)throw new Error("Failed to decrypt");return _n(s,I_)}function Fqe(t,e){const r=Zoe(T_),n=ob(H1),s=Yn(t,I_),i=Xoe({type:r,sealed:s,iv:n});return e===uh?Yoe(i):i}function $qe(t,e){const{sealed:r}=aE({encoded:t,encoding:e});return _n(r,I_)}function Xoe(t){if(B0(t.type)===T_)return _n(xl([t.type,t.sealed]),ha);if(B0(t.type)===Kd){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return _n(xl([t.type,t.senderPublicKey,t.iv,t.sealed]),ha)}return _n(xl([t.type,t.iv,t.sealed]),ha)}function aE(t){const e=(t.encoding||ha)===uh?Joe(t.encoded):t.encoded,r=Yn(e,ha),n=r.slice(Uqe,dZ),s=dZ;if(B0(n)===Kd){const c=s+P9,u=c+H1,l=r.slice(s,c),d=r.slice(c,u),f=r.slice(u);return{type:n,sealed:f,iv:d,senderPublicKey:l}}if(B0(n)===T_){const c=r.slice(s),u=ob(H1);return{type:n,sealed:c,iv:u}}const i=s+H1,o=r.slice(s,i),a=r.slice(i);return{type:n,sealed:a,iv:o}}function qqe(t,e){const r=aE({encoded:t,encoding:e?.encoding});return Qoe({type:B0(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?_n(r.senderPublicKey,Mo):void 0,receiverPublicKey:e?.receiverPublicKey})}function Qoe(t){const e=t?.type||Koe;if(e===Kd){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function fZ(t){return t.type===Kd&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function hZ(t){return t.type===T_}function Hqe(t){const e=Buffer.from(t.x,"base64"),r=Buffer.from(t.y,"base64");return xl([new Uint8Array([4]),e,r])}function zqe(t,e){const[r,n,s]=t.split("."),i=Buffer.from(Joe(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${r}.${n}`,u=ZT(c),l=Hqe(e);if(!Bqe.verify(xl([o,a]),u,l))throw new Error("Invalid signature");return hy(t).payload}const Wqe="irn";function o5(t){return t?.relay||{protocol:Wqe}}function qm(t){const e=PQ[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function Vqe(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(n)){const i=s.replace(n,""),o=t[s];r[i]=o}}),r}function pZ(t){if(!t.includes("wc:")){const u=loe(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),s=t.substring(e+1,r).split("@"),i=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(i),a={};o.forEach((u,l)=>{a[l]=u});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:Gqe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:Vqe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Gqe(t){return t.startsWith("//")?t.substring(2):t}function Kqe(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(s=>{const i=s,o=r+e+i;t[i]&&(n[o]=t[i])}),n}function gZ(t){const e=new URLSearchParams,r=Kqe(t.relay);Object.keys(r).sort().forEach(s=>{e.set(s,r[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function KS(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}var Zqe=Object.defineProperty,Yqe=Object.defineProperties,Jqe=Object.getOwnPropertyDescriptors,mZ=Object.getOwnPropertySymbols,Xqe=Object.prototype.hasOwnProperty,Qqe=Object.prototype.propertyIsEnumerable,yZ=(t,e,r)=>e in t?Zqe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,eHe=(t,e)=>{for(var r in e||(e={}))Xqe.call(e,r)&&yZ(t,r,e[r]);if(mZ)for(var r of mZ(e))Qqe.call(e,r)&&yZ(t,r,e[r]);return t},tHe=(t,e)=>Yqe(t,Jqe(e));function cb(t){const e=[];return t.forEach(r=>{const[n,s]=r.split(":");e.push(`${n}:${s}`)}),e}function rHe(t){const e=[];return Object.values(t).forEach(r=>{e.push(...cb(r.accounts))}),e}function nHe(t,e){const r=[];return Object.values(t).forEach(n=>{cb(n.accounts).includes(e)&&r.push(...n.methods)}),r}function sHe(t,e){const r=[];return Object.values(t).forEach(n=>{cb(n.accounts).includes(e)&&r.push(...n.events)}),r}function QT(t){return t.includes(":")}function Hm(t){return QT(t)?t.split(":")[0]:t}function bZ(t){var e,r,n;const s={};if(!Nl(t))return s;for(const[i,o]of Object.entries(t)){const a=QT(i)?[i]:o.chains,c=o.methods||[],u=o.events||[],l=Hm(i);s[l]=tHe(eHe({},s[l]),{chains:Tl(a,(e=s[l])==null?void 0:e.chains),methods:Tl(c,(r=s[l])==null?void 0:r.methods),events:Tl(u,(n=s[l])==null?void 0:n.events)})}return s}function iHe(t){const e={};return t?.forEach(r=>{var n;const[s,i]=r.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(r),(n=e[s].chains)==null||n.push(`${s}:${i}`)}),e}function wZ(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=iHe(e);for(const[n,s]of Object.entries(r))s.methods?s.methods=Tl(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return r}function oHe(t,e){var r,n,s,i,o,a;const c=bZ(t),u=bZ(e),l={},d=Object.keys(c).concat(Object.keys(u));for(const f of d)l[f]={chains:Tl((r=c[f])==null?void 0:r.chains,(n=u[f])==null?void 0:n.chains),methods:Tl((s=c[f])==null?void 0:s.methods,(i=u[f])==null?void 0:i.methods),events:Tl((o=c[f])==null?void 0:o.events,(a=u[f])==null?void 0:a.events)};return l}const aHe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},cHe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function $e(t,e){const{message:r,code:n}=cHe[t];return{message:e?`${r} ${e}`:r,code:n}}function zn(t,e){const{message:r,code:n}=aHe[t];return{message:e?`${r} ${e}`:r,code:n}}function Zd(t,e){return!!Array.isArray(t)}function Nl(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ks(t){return typeof t>"u"}function Us(t,e){return e&&Ks(t)?!0:typeof t=="string"&&!!t.trim().length}function R9(t,e){return e&&Ks(t)?!0:typeof t=="number"&&!isNaN(t)}function uHe(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),s=Object.keys(r);let i=!0;return o0(s,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],l=cb(a),d=r[o];(!o0(ioe(o,d),l)||!o0(d.methods,c)||!o0(d.events,u))&&(i=!1)}),i):!1}function a5(t){return Us(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function lHe(t){if(Us(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&a5(r)}}return!1}function dHe(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(Us(t,!1)){if(e(t))return!0;const r=loe(t);return e(r)}}catch{}return!1}function fHe(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function hHe(t){return t?.topic}function pHe(t,e){let r=null;return Us(t?.publicKey,!1)||(r=$e("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function vZ(t){let e=!0;return Zd(t)?t.length&&(e=t.every(r=>Us(r,!1))):e=!1,e}function gHe(t,e,r){let n=null;return Zd(e)&&e.length?e.forEach(s=>{n||a5(s)||(n=zn("UNSUPPORTED_CHAINS",`${r}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):a5(t)||(n=zn("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function mHe(t,e,r){let n=null;return Object.entries(t).forEach(([s,i])=>{if(n)return;const o=gHe(s,ioe(s,i),`${e} ${r}`);o&&(n=o)}),n}function yHe(t,e){let r=null;return Zd(t)?t.forEach(n=>{r||lHe(n)||(r=zn("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=zn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function bHe(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=yHe(n?.accounts,`${e} namespace`);s&&(r=s)}),r}function wHe(t,e){let r=null;return vZ(t?.methods)?vZ(t?.events)||(r=zn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=zn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function eae(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=wHe(n,`${e}, namespace`);s&&(r=s)}),r}function vHe(t,e,r){let n=null;if(t&&Nl(t)){const s=eae(t,e);s&&(n=s);const i=mHe(t,e,r);i&&(n=i)}else n=$e("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function CR(t,e){let r=null;if(t&&Nl(t)){const n=eae(t,e);n&&(r=n);const s=bHe(t,e);s&&(r=s)}else r=$e("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function tae(t){return Us(t.protocol,!0)}function EHe(t,e){let r=!1;return t?t&&Zd(t)&&t.length&&t.forEach(n=>{r=tae(n)}):r=!0,r}function _He(t){return typeof t=="number"}function ra(t){return typeof t<"u"&&typeof t!==null}function AHe(t){return!(!t||typeof t!="object"||!t.code||!R9(t.code,!1)||!t.message||!Us(t.message,!1))}function xHe(t){return!(Ks(t)||!Us(t.method,!1))}function CHe(t){return!(Ks(t)||Ks(t.result)&&Ks(t.error)||!R9(t.id,!1)||!Us(t.jsonrpc,!1))}function SHe(t){return!(Ks(t)||!Us(t.name,!1))}function EZ(t,e){return!(!a5(e)||!rHe(t).includes(e))}function IHe(t,e,r){return Us(r,!1)?nHe(t,e).includes(r):!1}function THe(t,e,r){return Us(r,!1)?sHe(t,e).includes(r):!1}function _Z(t,e,r){let n=null;const s=NHe(t),i=PHe(e),o=Object.keys(s),a=Object.keys(i),c=AZ(Object.keys(t)),u=AZ(Object.keys(e)),l=c.filter(d=>!u.includes(d));return l.length&&(n=$e("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(e).toString()}`)),o0(o,a)||(n=$e("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||n)return;const f=cb(e[d].accounts);f.includes(d)||(n=$e("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${f.toString()}`))}),o.forEach(d=>{n||(o0(s[d].methods,i[d].methods)?o0(s[d].events,i[d].events)||(n=$e("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${d}`)):n=$e("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${d}`))}),n}function NHe(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(s=>{e[s]={methods:t[r].methods,events:t[r].events}})}),e}function AZ(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function PHe(t){const e={};return Object.keys(t).forEach(r=>{r.includes(":")?e[r]=t[r]:cb(t[r].accounts)?.forEach(s=>{e[s]={accounts:t[r].accounts.filter(i=>i.includes(`${s}:`)),methods:t[r].methods,events:t[r].events}})}),e}function RHe(t,e){return R9(t,!1)&&t<=e.max&&t>=e.min}function xZ(){const t=C_();return new Promise(e=>{switch(t){case nc.browser:e(OHe());break;case nc.reactNative:e(kHe());break;case nc.node:e(BHe());break;default:e(!0)}})}function OHe(){return ib()&&navigator?.onLine}async function kHe(){return ep()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function BHe(){return!0}function UHe(t){switch(C_()){case nc.browser:MHe(t);break;case nc.reactNative:DHe(t);break}}function MHe(t){!ep()&&ib()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function DHe(t){ep()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function jHe(){var t;return ib()&&li.getDocument()?((t=li.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const SR={};class e1{static get(e){return SR[e]}static set(e,r){SR[e]=r}static delete(e){delete SR[e]}}function LHe(t){const e=Zn.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function FHe({publicKey:t,signature:e,payload:r}){var n;const s=JO(r.method),i=128|parseInt(((n=r.version)==null?void 0:n.toString())||"4"),o=HHe(r.address),a=r.era==="00"?new Uint8Array([0]):JO(r.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(r.nonce,16),u=new Uint8Array([c&255,c>>8&255]),l=BigInt(`0x${qHe(r.tip)}`),d=WHe(l),f=new Uint8Array([0,...t,o,...e,...a,...u,...d,...s]),p=zHe(f.length+1);return new Uint8Array([...p,i,...f])}function $He(t){const e=JO(t),r=OQ.blake2b(e,void 0,32);return"0x"+Buffer.from(r).toString("hex")}function JO(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function qHe(t){return t.startsWith("0x")?t.slice(2):t}function HHe(t){const e=Zn.decode(t)[0];return e===42?0:e===60?2:1}function zHe(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function WHe(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function VHe(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),r=LHe(t.transaction.address),n=FHe({publicKey:r,signature:e,payload:t.transaction}),s=Buffer.from(n).toString("hex");return $He(s)}var GHe={};const rae="wc",nae=2,XO="core",jl=`${rae}@2:${XO}:`,KHe={logger:"error"},ZHe={database:":memory:"},YHe="crypto",CZ="client_ed25519_seed",JHe=he.ONE_DAY,XHe="keychain",QHe="0.3",eze="messages",tze="0.3",rze=he.SIX_HOURS,nze="publisher",sae="irn",sze="error",iae="wss://relay.walletconnect.org",ize="relayer",_s={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},oze="_subscription",Sc={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},aze=.1,QO="2.21.7",Hn={link_mode:"link_mode",relay:"relay"},kI={inbound:"inbound",outbound:"outbound"},cze="0.3",uze="WALLETCONNECT_CLIENT_ID",SZ="WALLETCONNECT_LINK_MODE_APPS",Wa={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},lze="subscription",dze="0.3",fze="pairing",hze="0.3",t1={wc_pairingDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:he.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:he.ONE_DAY,prompt:!1,tag:0},res:{ttl:he.ONE_DAY,prompt:!1,tag:0}}},Vp={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},lu={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},pze="history",gze="0.3",mze="expirer",Oc={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},yze="0.3",bze="verify-api",wze="https://verify.walletconnect.com",oae="https://verify.walletconnect.org",z1=oae,vze=`${z1}/v3`,Eze=[wze,oae],_ze="echo",Aze="https://echo.walletconnect.com",ul={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Td={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Zf={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},r1={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Bp={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},n1={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},xze=.1,Cze="event-client",Sze=86400,Ize="https://pulse.walletconnect.org/batch";function Tze(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var h=0,y=0,E=0,S=g.length;E!==S&&g[E]===0;)E++,h++;for(var C=(S-E)*l+1>>>0,_=new Uint8Array(C);E!==S;){for(var T=g[E],P=0,D=C-1;(T!==0||P<y)&&D!==-1;D--,P++)T+=256*_[D]>>>0,_[D]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");y=P,E++}for(var F=C-y;F!==C&&_[F]===0;)F++;for(var I=c.repeat(h);F<C;++F)I+=t.charAt(_[F]);return I}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var h=0;if(g[h]!==" "){for(var y=0,E=0;g[h]===c;)y++,h++;for(var S=(g.length-h)*u+1>>>0,C=new Uint8Array(S);g[h];){var _=r[g.charCodeAt(h)];if(_===255)return;for(var T=0,P=S-1;(_!==0||T<E)&&P!==-1;P--,T++)_+=a*C[P]>>>0,C[P]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");E=T,h++}if(g[h]!==" "){for(var D=S-E;D!==S&&C[D]===0;)D++;for(var F=new Uint8Array(y+(S-D)),I=y;D!==S;)F[I++]=C[D++];return F}}}function p(g){var h=f(g);if(h)return h;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:p}}var Nze=Tze,Pze=Nze;const aae=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Rze=t=>new TextEncoder().encode(t),Oze=t=>new TextDecoder().decode(t);class kze{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Bze{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return cae(this,e)}}class Uze{constructor(e){this.decoders=e}or(e){return cae(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const cae=(t,e)=>new Uze({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Mze{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new kze(e,r,n),this.decoder=new Bze(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const e3=({name:t,prefix:e,encode:r,decode:n})=>new Mze(t,e,r,n),N_=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=Pze(r,e);return e3({prefix:t,name:e,encode:n,decode:i=>aae(s(i))})},Dze=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},jze=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},$i=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>e3({prefix:e,name:t,encode(s){return jze(s,n,r)},decode(s){return Dze(s,n,r,t)}}),Lze=e3({prefix:"\0",name:"identity",encode:t=>Oze(t),decode:t=>Rze(t)});var Fze=Object.freeze({__proto__:null,identity:Lze});const $ze=$i({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var qze=Object.freeze({__proto__:null,base2:$ze});const Hze=$i({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var zze=Object.freeze({__proto__:null,base8:Hze});const Wze=N_({prefix:"9",name:"base10",alphabet:"0123456789"});var Vze=Object.freeze({__proto__:null,base10:Wze});const Gze=$i({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Kze=$i({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Zze=Object.freeze({__proto__:null,base16:Gze,base16upper:Kze});const Yze=$i({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Jze=$i({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Xze=$i({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Qze=$i({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),eWe=$i({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),tWe=$i({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),rWe=$i({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),nWe=$i({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),sWe=$i({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var iWe=Object.freeze({__proto__:null,base32:Yze,base32upper:Jze,base32pad:Xze,base32padupper:Qze,base32hex:eWe,base32hexupper:tWe,base32hexpad:rWe,base32hexpadupper:nWe,base32z:sWe});const oWe=N_({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),aWe=N_({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var cWe=Object.freeze({__proto__:null,base36:oWe,base36upper:aWe});const uWe=N_({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),lWe=N_({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var dWe=Object.freeze({__proto__:null,base58btc:uWe,base58flickr:lWe});const fWe=$i({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),hWe=$i({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),pWe=$i({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),gWe=$i({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var mWe=Object.freeze({__proto__:null,base64:fWe,base64pad:hWe,base64url:pWe,base64urlpad:gWe});const uae=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),yWe=uae.reduce((t,e,r)=>(t[r]=e,t),[]),bWe=uae.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function wWe(t){return t.reduce((e,r)=>(e+=yWe[r],e),"")}function vWe(t){const e=[];for(const r of t){const n=bWe[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const EWe=e3({prefix:"ðŸš€",name:"base256emoji",encode:wWe,decode:vWe});var _We=Object.freeze({__proto__:null,base256emoji:EWe}),AWe=lae,IZ=128,xWe=-128,CWe=Math.pow(2,31);function lae(t,e,r){e=e||[],r=r||0;for(var n=r;t>=CWe;)e[r++]=t&255|IZ,t/=128;for(;t&xWe;)e[r++]=t&255|IZ,t>>>=7;return e[r]=t|0,lae.bytes=r-n+1,e}var SWe=e4,IWe=128,TZ=127;function e4(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw e4.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&TZ)<<s:(o&TZ)*Math.pow(2,s),s+=7}while(o>=IWe);return e4.bytes=i-n,r}var TWe=Math.pow(2,7),NWe=Math.pow(2,14),PWe=Math.pow(2,21),RWe=Math.pow(2,28),OWe=Math.pow(2,35),kWe=Math.pow(2,42),BWe=Math.pow(2,49),UWe=Math.pow(2,56),MWe=Math.pow(2,63),DWe=function(t){return t<TWe?1:t<NWe?2:t<PWe?3:t<RWe?4:t<OWe?5:t<kWe?6:t<BWe?7:t<UWe?8:t<MWe?9:10},jWe={encode:AWe,decode:SWe,encodingLength:DWe},dae=jWe;const NZ=(t,e,r=0)=>(dae.encode(t,e,r),e),PZ=t=>dae.encodingLength(t),t4=(t,e)=>{const r=e.byteLength,n=PZ(t),s=n+PZ(r),i=new Uint8Array(s+r);return NZ(t,i,0),NZ(r,i,n),i.set(e,s),new LWe(t,r,e,i)};class LWe{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}const fae=({name:t,code:e,encode:r})=>new FWe(t,e,r);class FWe{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?t4(this.code,r):r.then(n=>t4(this.code,n))}else throw Error("Unknown type, must be binary type")}}const hae=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),$We=fae({name:"sha2-256",code:18,encode:hae("SHA-256")}),qWe=fae({name:"sha2-512",code:19,encode:hae("SHA-512")});var HWe=Object.freeze({__proto__:null,sha256:$We,sha512:qWe});const pae=0,zWe="identity",gae=aae,WWe=t=>t4(pae,gae(t)),VWe={code:pae,name:zWe,encode:gae,digest:WWe};var GWe=Object.freeze({__proto__:null,identity:VWe});new TextEncoder,new TextDecoder;const RZ={...Fze,...qze,...zze,...Vze,...Zze,...iWe,...cWe,...dWe,...mWe,..._We};({...HWe,...GWe});function mae(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function KWe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?mae(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function yae(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const OZ=yae("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),IR=yae("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=KWe(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),ZWe={utf8:OZ,"utf-8":OZ,hex:RZ.base16,latin1:IR,ascii:IR,binary:IR,...RZ};function YWe(t,e="utf8"){const r=ZWe[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?mae(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var JWe=Object.defineProperty,XWe=(t,e,r)=>e in t?JWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,il=(t,e,r)=>XWe(t,typeof e!="symbol"?e+"":e,r);class QWe{constructor(e,r){this.core=e,this.logger=r,il(this,"keychain",new Map),il(this,"name",XHe),il(this,"version",QHe),il(this,"initialized",!1),il(this,"storagePrefix",jl),il(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),il(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),il(this,"set",async(n,s)=>{this.isInitialized(),this.keychain.set(n,s),await this.persist()}),il(this,"get",n=>{this.isInitialized();const s=this.keychain.get(n);if(typeof s>"u"){const{message:i}=$e("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(i)}return s}),il(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=bo(r,this.name)}get context(){return Pa(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,LO(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?FO(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var eVe=Object.defineProperty,tVe=(t,e,r)=>e in t?eVe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wi=(t,e,r)=>tVe(t,typeof e!="symbol"?e+"":e,r);class rVe{constructor(e,r,n){this.core=e,this.logger=r,wi(this,"name",YHe),wi(this,"keychain"),wi(this,"randomSessionIdentifier",YO()),wi(this,"initialized",!1),wi(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),wi(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),wi(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=o6(s);return U4(i.publicKey)}),wi(this,"generateKeyPair",()=>{this.isInitialized();const s=Mqe();return this.setPrivateKey(s.publicKey,s.privateKey)}),wi(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=o6(i),a=this.randomSessionIdentifier;return await XJ(a,s,JHe,o)}),wi(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=Dqe(a,i);return this.setSymKey(c,o)}),wi(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||OI(s);return await this.keychain.set(o,s),o}),wi(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),wi(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),wi(this,"encode",async(s,i,o)=>{this.isInitialized();const a=Qoe(o),c=Lc(i);if(hZ(a))return Fqe(c,o?.encoding);if(fZ(a)){const f=a.senderPublicKey,p=a.receiverPublicKey;s=await this.generateSharedKey(f,p)}const u=this.getSymKey(s),{type:l,senderPublicKey:d}=a;return jqe({type:l,symKey:u,message:c,senderPublicKey:d,encoding:o?.encoding})}),wi(this,"decode",async(s,i,o)=>{this.isInitialized();const a=qqe(i,o);if(hZ(a)){const c=$qe(i,o?.encoding);return Xd(c)}if(fZ(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;s=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(s),u=Lqe({symKey:c,encoded:i,encoding:o?.encoding});return Xd(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),wi(this,"getPayloadType",(s,i=ha)=>{const o=aE({encoded:s,encoding:i});return B0(o.type)}),wi(this,"getPayloadSenderPublicKey",(s,i=ha)=>{const o=aE({encoded:s,encoding:i});return o.senderPublicKey?_n(o.senderPublicKey,Mo):void 0}),this.core=e,this.logger=bo(r,this.name),this.keychain=n||new QWe(this.core,this.logger)}get context(){return Pa(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(CZ)}catch{e=YO(),await this.keychain.set(CZ,e)}return YWe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var nVe=Object.defineProperty,sVe=Object.defineProperties,iVe=Object.getOwnPropertyDescriptors,kZ=Object.getOwnPropertySymbols,oVe=Object.prototype.hasOwnProperty,aVe=Object.prototype.propertyIsEnumerable,r4=(t,e,r)=>e in t?nVe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cVe=(t,e)=>{for(var r in e||(e={}))oVe.call(e,r)&&r4(t,r,e[r]);if(kZ)for(var r of kZ(e))aVe.call(e,r)&&r4(t,r,e[r]);return t},uVe=(t,e)=>sVe(t,iVe(e)),qa=(t,e,r)=>r4(t,typeof e!="symbol"?e+"":e,r);class lVe extends Pje{constructor(e,r){super(e,r),this.logger=e,this.core=r,qa(this,"messages",new Map),qa(this,"messagesWithoutClientAck",new Map),qa(this,"name",eze),qa(this,"version",tze),qa(this,"initialized",!1),qa(this,"storagePrefix",jl),qa(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),qa(this,"set",async(n,s,i)=>{this.isInitialized();const o=Mc(s);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(n,a),i===kI.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,uVe(cVe({},c),{[o]:s}))}return await this.persist(),o}),qa(this,"get",n=>{this.isInitialized();let s=this.messages.get(n);return typeof s>"u"&&(s={}),s}),qa(this,"getWithoutAck",n=>{this.isInitialized();const s={};for(const i of n){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),qa(this,"has",(n,s)=>{this.isInitialized();const i=this.get(n),o=Mc(s);return typeof i[o]<"u"}),qa(this,"ack",async(n,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(n);if(typeof i>"u")return;const o=Mc(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,i),await this.persist()}),qa(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=bo(e,this.name),this.core=r}get context(){return Pa(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,LO(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,LO(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?FO(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?FO(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var dVe=Object.defineProperty,fVe=Object.defineProperties,hVe=Object.getOwnPropertyDescriptors,BZ=Object.getOwnPropertySymbols,pVe=Object.prototype.hasOwnProperty,gVe=Object.prototype.propertyIsEnumerable,n4=(t,e,r)=>e in t?dVe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,sm=(t,e)=>{for(var r in e||(e={}))pVe.call(e,r)&&n4(t,r,e[r]);if(BZ)for(var r of BZ(e))gVe.call(e,r)&&n4(t,r,e[r]);return t},UZ=(t,e)=>fVe(t,hVe(e)),Ic=(t,e,r)=>n4(t,typeof e!="symbol"?e+"":e,r);class mVe extends Rje{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Ic(this,"events",new Ys.EventEmitter),Ic(this,"name",nze),Ic(this,"queue",new Map),Ic(this,"publishTimeout",he.toMiliseconds(he.ONE_MINUTE)),Ic(this,"initialPublishTimeout",he.toMiliseconds(he.ONE_SECOND*15)),Ic(this,"needsTransportRestart",!1),Ic(this,"publish",async(n,s,i)=>{var o,a,c,u,l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:i}});const d=i?.ttl||rze,f=i?.prompt||!1,p=i?.tag||0,g=i?.id||Ro().toString(),h=qm(o5().protocol),y={id:g,method:i?.publishMethod||h.publish,params:sm({topic:n,message:s,ttl:d,prompt:f,tag:p,attestation:i?.attestation},i?.tvf&&{tvf:i.tvf})},E=`Failed to publish payload, please try again. id:${g} tag:${p}`;try{Ks((o=y.params)==null?void 0:o.prompt)&&((a=y.params)==null||delete a.prompt),Ks((c=y.params)==null?void 0:c.tag)&&((u=y.params)==null||delete u.tag);const S=new Promise(async C=>{const _=({id:P})=>{var D;((D=y.id)==null?void 0:D.toString())===P.toString()&&(this.removeRequestFromQueue(P),this.relayer.events.removeListener(_s.publish,_),C())};this.relayer.events.on(_s.publish,_);const T=_l(new Promise((P,D)=>{this.rpcPublish(y,i).then(P).catch(F=>{this.logger.warn(F,F?.message),D(F)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${g} tag:${p}`);try{await T,this.events.removeListener(_s.publish,_)}catch(P){this.queue.set(g,{request:y,opts:i,attempt:1}),this.logger.warn(P,P?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:g,topic:n,message:s,opts:i}}),await _l(S,this.publishTimeout,E)}catch(S){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(S),(l=i?.internal)!=null&&l.throwOnFailedPublish)throw S}finally{this.queue.delete(g)}}),Ic(this,"publishCustom",async n=>{var s,i,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:n});const{payload:u,opts:l={}}=n,{attestation:d,tvf:f,publishMethod:p,prompt:g,tag:h,ttl:y=he.FIVE_MINUTES}=l,E=l.id||Ro().toString(),S=qm(o5().protocol),C=p||S.publish,_={id:E,method:C,params:sm(UZ(sm({},u),{ttl:y,prompt:g,tag:h,attestation:d}),f)},T=`Failed to publish custom payload, please try again. id:${E} tag:${h}`;try{Ks((s=_.params)==null?void 0:s.prompt)&&((i=_.params)==null||delete i.prompt),Ks((o=_.params)==null?void 0:o.tag)&&((a=_.params)==null||delete a.tag);const P=new Promise(async D=>{const F=({id:U})=>{var L;((L=_.id)==null?void 0:L.toString())===U.toString()&&(this.removeRequestFromQueue(U),this.relayer.events.removeListener(_s.publish,F),D())};this.relayer.events.on(_s.publish,F);const I=_l(new Promise((U,L)=>{this.rpcPublish(_,l).then(U).catch(B=>{this.logger.warn(B,B?.message),L(B)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${C} id:${E} tag:${h}`);try{await I,this.events.removeListener(_s.publish,F)}catch(U){this.queue.set(E,{request:_,opts:l,attempt:1}),this.logger.warn(U,U?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:E,payload:u,opts:l}}),await _l(P,this.publishTimeout,T)}catch(P){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(P),(c=l?.internal)!=null&&c.throwOnFailedPublish)throw P}finally{this.queue.delete(E)}}),Ic(this,"on",(n,s)=>{this.events.on(n,s)}),Ic(this,"once",(n,s)=>{this.events.once(n,s)}),Ic(this,"off",(n,s)=>{this.events.off(n,s)}),Ic(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.relayer=e,this.logger=bo(r,this.name),this.registerEventListeners()}get context(){return Pa(this.logger)}async rpcPublish(e,r){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const n=await this.relayer.request(e);return this.relayer.events.emit(_s.publish,sm(sm({},e),r)),this.logger.debug("Successfully Published Payload"),n}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{var n;const s=e.attempt+1;this.queue.set(r,UZ(sm({},e),{attempt:s})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(n=e.request.params)==null?void 0:n.tag}, attempt: ${s}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(ac.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(_s.connection_stalled);return}this.checkQueue()}),this.relayer.on(_s.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var yVe=Object.defineProperty,bVe=(t,e,r)=>e in t?yVe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,im=(t,e,r)=>bVe(t,typeof e!="symbol"?e+"":e,r);class wVe{constructor(){im(this,"map",new Map),im(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),im(this,"get",e=>this.map.get(e)||[]),im(this,"exists",(e,r)=>this.get(e).includes(r)),im(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const s=n.filter(i=>i!==r);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),im(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var vVe=Object.defineProperty,EVe=Object.defineProperties,_Ve=Object.getOwnPropertyDescriptors,MZ=Object.getOwnPropertySymbols,AVe=Object.prototype.hasOwnProperty,xVe=Object.prototype.propertyIsEnumerable,s4=(t,e,r)=>e in t?vVe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,s1=(t,e)=>{for(var r in e||(e={}))AVe.call(e,r)&&s4(t,r,e[r]);if(MZ)for(var r of MZ(e))xVe.call(e,r)&&s4(t,r,e[r]);return t},TR=(t,e)=>EVe(t,_Ve(e)),Tn=(t,e,r)=>s4(t,typeof e!="symbol"?e+"":e,r);class CVe extends Bje{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Tn(this,"subscriptions",new Map),Tn(this,"topicMap",new wVe),Tn(this,"events",new Ys.EventEmitter),Tn(this,"name",lze),Tn(this,"version",dze),Tn(this,"pending",new Map),Tn(this,"cached",[]),Tn(this,"initialized",!1),Tn(this,"storagePrefix",jl),Tn(this,"subscribeTimeout",he.toMiliseconds(he.ONE_MINUTE)),Tn(this,"initialSubscribeTimeout",he.toMiliseconds(he.ONE_SECOND*15)),Tn(this,"clientId"),Tn(this,"batchSubscribeTopicsLimit",500),Tn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Tn(this,"subscribe",async(n,s)=>{var i;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}});try{const o=o5(s),a={topic:n,relay:o,transportType:s?.transportType};(i=s?.internal)!=null&&i.skipSubscribe||this.pending.set(n,a);const c=await this.rpcSubscribe(n,o,s);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),Tn(this,"unsubscribe",async(n,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(n,s.id,s):await this.unsubscribeByTopic(n,s)}),Tn(this,"isSubscribed",n=>new Promise(s=>{s(this.topicMap.topics.includes(n))})),Tn(this,"isKnownTopic",n=>new Promise(s=>{s(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(i=>i.topic===n))})),Tn(this,"on",(n,s)=>{this.events.on(n,s)}),Tn(this,"once",(n,s)=>{this.events.once(n,s)}),Tn(this,"off",(n,s)=>{this.events.off(n,s)}),Tn(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),Tn(this,"start",async()=>{await this.onConnect()}),Tn(this,"stop",async()=>{await this.onDisconnect()}),Tn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Tn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(s=>{n.push(s)}),await this.batchSubscribe(n)}),Tn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(ac.pulse,async()=>{await this.checkPending()}),this.events.on(Wa.created,async n=>{const s=Wa.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()}),this.events.on(Wa.deleted,async n=>{const s=Wa.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()})}),this.relayer=e,this.logger=bo(r,this.name),this.clientId=""}get context(){return Pa(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async s=>await this.unsubscribeById(e,s,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const s=o5(n);await this.restartToComplete({topic:e,id:r,relay:s}),await this.rpcUnsubscribe(e,r,s);const i=zn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,r,n){var s,i;const o=await this.getSubscriptionId(e);if((s=n?.internal)!=null&&s.skipSubscribe)return o;(!n||n?.transportType===Hn.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const a={method:qm(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(i=n?.internal)==null?void 0:i.throwOnFailedPublish;try{if(n?.transportType===Hn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(d=>this.logger.warn(d))},he.toMiliseconds(he.ONE_SECOND)),o;const u=new Promise(async d=>{const f=p=>{p.topic===e&&(this.events.removeListener(Wa.created,f),d(p.id))};this.events.on(Wa.created,f);try{const p=await _l(new Promise((g,h)=>{this.relayer.request(a).catch(y=>{this.logger.warn(y,y?.message),h(y)}).then(g)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Wa.created,f),d(p)}catch{}}),l=await _l(u,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return l?o:null}catch(u){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(_s.connection_stalled),c)throw u}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:qm(r.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await _l(new Promise(s=>{this.relayer.request(n).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(_s.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:qm(r.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s;try{s=await await _l(new Promise((i,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(_s.connection_stalled)}return s}rpcUnsubscribe(e,r,n){const s={method:qm(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,r){this.setSubscription(e,TR(s1({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,s1({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,s1({},r)),this.topicMap.set(r.topic,e),this.events.emit(Wa.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=$e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Wa.deleted,TR(s1({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Wa.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Wa.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(r=>{var n;return r.topic===((n=this.subscriptions.get(r.id))==null?void 0:n.topic)})){const{message:r}=$e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>TR(s1({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await sFe(he.toMiliseconds(he.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Mc(e+await this.getClientId())}}var SVe=Object.defineProperty,DZ=Object.getOwnPropertySymbols,IVe=Object.prototype.hasOwnProperty,TVe=Object.prototype.propertyIsEnumerable,i4=(t,e,r)=>e in t?SVe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jZ=(t,e)=>{for(var r in e||(e={}))IVe.call(e,r)&&i4(t,r,e[r]);if(DZ)for(var r of DZ(e))TVe.call(e,r)&&i4(t,r,e[r]);return t},$r=(t,e,r)=>i4(t,typeof e!="symbol"?e+"":e,r);class NVe extends Oje{constructor(e){super(e),$r(this,"protocol","wc"),$r(this,"version",2),$r(this,"core"),$r(this,"logger"),$r(this,"events",new Ys.EventEmitter),$r(this,"provider"),$r(this,"messages"),$r(this,"subscriber"),$r(this,"publisher"),$r(this,"name",ize),$r(this,"transportExplicitlyClosed",!1),$r(this,"initialized",!1),$r(this,"connectionAttemptInProgress",!1),$r(this,"relayUrl"),$r(this,"projectId"),$r(this,"packageName"),$r(this,"bundleId"),$r(this,"hasExperiencedNetworkDisruption",!1),$r(this,"pingTimeout"),$r(this,"heartBeatTimeout",he.toMiliseconds(he.THIRTY_SECONDS+he.FIVE_SECONDS)),$r(this,"reconnectTimeout"),$r(this,"connectPromise"),$r(this,"reconnectInProgress",!1),$r(this,"requestsInFlight",[]),$r(this,"connectTimeout",he.toMiliseconds(he.ONE_SECOND*15)),$r(this,"request",async r=>{var n,s;this.logger.debug("Publishing Request Payload");const i=r.id||Ro().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${i}:${((s=r.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),$r(this,"resetPingTimeout",()=>{r5()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),$r(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),$r(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected ðŸ›œ"),this.startPingTimeout(),this.events.emit(_s.connect)}),$r(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected ðŸ›‘"),this.requestsInFlight=[],this.onProviderDisconnect()}),$r(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(_s.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),$r(this,"registerProviderListeners",()=>{this.provider.on(Sc.payload,this.onPayloadHandler),this.provider.on(Sc.connect,this.onConnectHandler),this.provider.on(Sc.disconnect,this.onDisconnectHandler),this.provider.on(Sc.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?bo(e.logger,this.name):A_(rb({level:e.logger||sze})),this.messages=new lVe(this.logger,e.core),this.subscriber=new CVe(this,this.logger),this.publisher=new mVe(this,this.logger),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||iae,qLe()?this.packageName=BK():HLe()&&(this.bundleId=BK()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return Pa(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Hn.relay},kI.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,r){var n,s,i;this.isInitialized(),(!(r!=null&&r.transportType)||r?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((n=r?.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(s=r?.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const u=l=>{l.topic===e&&(this.subscriber.off(Wa.created,u),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(Wa.created,u)}),new Promise(async(l,d)=>{a=await this.subscriber.subscribe(e,jZ({internal:{throwOnFailedPublish:o}},r)).catch(f=>{o&&d(f)})||a,l()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await _l(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await xZ())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,s)=>n.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const s=zs(he.FIVE_MINUTES),i={topic:n,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,i)}this.events.emit(_s.message,e),await this.recordMessageEvent(e,kI.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Sc.disconnect,i),await _l(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Sc.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Sc.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Sc.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const s=n;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,he.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,s,i;if(r5())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Fo(new zee(KLe({sdkVersion:QO,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:s}=e;await this.messages.set(n,s,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const s=this.messages.has(r,n);return s&&this.logger.warn(`Ignoring duplicate message: ${n}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),zy(e)){if(!e.method.endsWith(oze))return;const r=e.params,{topic:n,message:s,publishedAt:i,attestation:o}=r.data,a={topic:n,message:s,publishedAt:i,transportType:Hn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(jZ({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else W0(e)&&this.events.emit(_s.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,kI.inbound),this.events.emit(_s.message,e))}async acknowledgePayload(e){const r=Rl(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Sc.payload,this.onPayloadHandler),this.provider.off(Sc.connect,this.onConnectHandler),this.provider.off(Sc.disconnect,this.onDisconnectHandler),this.provider.off(Sc.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await xZ();UHe(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(ac.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&jHe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(r){this.logger.warn(r,r?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(_s.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},he.toMiliseconds(aze)))))}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function PVe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function LZ(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function FZ(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const RVe="[object RegExp]",OVe="[object String]",kVe="[object Number]",BVe="[object Boolean]",$Z="[object Arguments]",UVe="[object Symbol]",MVe="[object Date]",DVe="[object Map]",jVe="[object Set]",LVe="[object Array]",FVe="[object Function]",$Ve="[object ArrayBuffer]",NR="[object Object]",qVe="[object Error]",HVe="[object DataView]",zVe="[object Uint8Array]",WVe="[object Uint8ClampedArray]",VVe="[object Uint16Array]",GVe="[object Uint32Array]",KVe="[object BigUint64Array]",ZVe="[object Int8Array]",YVe="[object Int16Array]",JVe="[object Int32Array]",XVe="[object BigInt64Array]",QVe="[object Float32Array]",eGe="[object Float64Array]";function tGe(){}function qZ(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function rGe(t,e,r){return b1(t,e,void 0,void 0,void 0,void 0,r)}function b1(t,e,r,n,s,i,o){const a=o(t,e,r,n,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return W1(t,e,i,o)}return W1(t,e,i,o)}function W1(t,e,r,n){if(Object.is(t,e))return!0;let s=FZ(t),i=FZ(e);if(s===$Z&&(s=NR),i===$Z&&(i=NR),s!==i)return!1;switch(s){case OVe:return t.toString()===e.toString();case kVe:{const c=t.valueOf(),u=e.valueOf();return PVe(c,u)}case BVe:case MVe:case UVe:return Object.is(t.valueOf(),e.valueOf());case RVe:return t.source===e.source&&t.flags===e.flags;case FVe:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(s){case DVe:{if(t.size!==e.size)return!1;for(const[c,u]of t.entries())if(!e.has(c)||!b1(u,e.get(c),c,t,e,r,n))return!1;return!0}case jVe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),u=Array.from(e.values());for(let l=0;l<c.length;l++){const d=c[l],f=u.findIndex(p=>b1(d,p,void 0,t,e,r,n));if(f===-1)return!1;u.splice(f,1)}return!0}case LVe:case zVe:case WVe:case VVe:case GVe:case KVe:case ZVe:case YVe:case JVe:case XVe:case QVe:case eGe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!b1(t[c],e[c],c,t,e,r,n))return!1;return!0}case $Ve:return t.byteLength!==e.byteLength?!1:W1(new Uint8Array(t),new Uint8Array(e),r,n);case HVe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:W1(new Uint8Array(t),new Uint8Array(e),r,n);case qVe:return t.name===e.name&&t.message===e.message;case NR:{if(!(W1(t.constructor,e.constructor,r,n)||qZ(t)&&qZ(e)))return!1;const c=[...Object.keys(t),...LZ(t)],u=[...Object.keys(e),...LZ(e)];if(c.length!==u.length)return!1;for(let l=0;l<c.length;l++){const d=c[l],f=t[d];if(!Object.hasOwn(e,d))return!1;const p=e[d];if(!b1(f,p,d,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function nGe(t,e){return rGe(t,e,tGe)}var sGe=Object.defineProperty,HZ=Object.getOwnPropertySymbols,iGe=Object.prototype.hasOwnProperty,oGe=Object.prototype.propertyIsEnumerable,o4=(t,e,r)=>e in t?sGe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zZ=(t,e)=>{for(var r in e||(e={}))iGe.call(e,r)&&o4(t,r,e[r]);if(HZ)for(var r of HZ(e))oGe.call(e,r)&&o4(t,r,e[r]);return t},Xo=(t,e,r)=>o4(t,typeof e!="symbol"?e+"":e,r);class ug extends kje{constructor(e,r,n,s=jl,i=void 0){super(e,r,n,s),this.core=e,this.logger=r,this.name=n,Xo(this,"map",new Map),Xo(this,"version",cze),Xo(this,"cached",[]),Xo(this,"initialized",!1),Xo(this,"getKey"),Xo(this,"storagePrefix",jl),Xo(this,"recentlyDeleted",[]),Xo(this,"recentlyDeletedLimit",200),Xo(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ks(o)?this.map.set(this.getKey(o),o):fHe(o)?this.map.set(o.id,o):hHe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Xo(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Xo(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Xo(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>nGe(a[c],o[c]))):this.values)),Xo(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=zZ(zZ({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Xo(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=bo(r,this.name),this.storagePrefix=s,this.getKey=i}get context(){return Pa(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:s}=$e("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:n}=$e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=$e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var aGe=Object.defineProperty,cGe=(t,e,r)=>e in t?aGe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mr=(t,e,r)=>cGe(t,typeof e!="symbol"?e+"":e,r);class uGe{constructor(e,r){this.core=e,this.logger=r,mr(this,"name",fze),mr(this,"version",hze),mr(this,"events",new Ly),mr(this,"pairings"),mr(this,"initialized",!1),mr(this,"storagePrefix",jl),mr(this,"ignoredPayloadTypes",[Kd]),mr(this,"registeredMethods",[]),mr(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),mr(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),mr(this,"create",async n=>{this.isInitialized();const s=YO(),i=await this.core.crypto.setSymKey(s),o=zs(he.FIVE_MINUTES),a={protocol:sae},c={topic:i,expiry:o,relay:a,active:!1,methods:n?.methods},u=gZ({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:n?.methods});return this.events.emit(Vp.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:n?.transportType,internal:n?.internal}),{topic:i,uri:u}}),mr(this,"pair",async n=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:n?.uri,trace:[ul.pairing_started]}});this.isValidPair(n,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:u}=pZ(n.uri);s.props.properties.topic=i,s.addTrace(ul.pairing_uri_validation_success),s.addTrace(ul.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(i)){if(l=this.pairings.get(i),s.addTrace(ul.existing_pairing),l.active)throw s.setError(Td.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(ul.pairing_not_expired)}const d=c||zs(he.FIVE_MINUTES),f={topic:i,relay:a,expiry:d,active:!1,methods:u};this.core.expirer.set(i,d),await this.pairings.set(i,f),s.addTrace(ul.store_new_pairing),n.activatePairing&&await this.activate({topic:i}),this.events.emit(Vp.create,f),s.addTrace(ul.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(ul.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Td.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(p){throw s.setError(Td.subscribe_pairing_topic_failure),p}return s.addTrace(ul.subscribe_pairing_topic_success),f}),mr(this,"activate",async({topic:n})=>{this.isInitialized();const s=zs(he.FIVE_MINUTES);this.core.expirer.set(n,s),await this.pairings.update(n,{active:!0,expiry:s})}),mr(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=n;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Lp();this.events.once(nn("pairing_ping",i),({error:u})=>{u?c(u):a()}),await o()}}),mr(this,"updateExpiry",async({topic:n,expiry:s})=>{this.isInitialized(),await this.pairings.update(n,{expiry:s})}),mr(this,"updateMetadata",async({topic:n,metadata:s})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:s})}),mr(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),mr(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",zn("USER_DISCONNECTED")),await this.deletePairing(s))}),mr(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(s);return gZ({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),mr(this,"sendRequest",async(n,s,i)=>{const o=Ms(s,i),a=await this.core.crypto.encode(n,o),c=t1[s].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),mr(this,"sendResult",async(n,s,i)=>{const o=Rl(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=t1[c].res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),mr(this,"sendError",async(n,s,i)=>{const o=Hy(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=t1[c]?t1[c].res:t1.unregistered_method.res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),mr(this,"deletePairing",async(n,s)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,zn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),s?Promise.resolve():this.core.expirer.del(n)])}),mr(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(s=>Qf(s.expiry));await Promise.all(n.map(s=>this.deletePairing(s.topic)))}),mr(this,"onRelayEventRequest",async n=>{const{topic:s,payload:i}=n;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),mr(this,"onRelayEventResponse",async n=>{const{topic:s,payload:i}=n,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),mr(this,"onPairingPingRequest",async(n,s)=>{const{id:i}=s;try{this.isValidPing({topic:n}),await this.sendResult(i,n,!0),this.events.emit(Vp.ping,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),mr(this,"onPairingPingResponse",(n,s)=>{const{id:i}=s;setTimeout(()=>{Vs(s)?this.events.emit(nn("pairing_ping",i),{}):gs(s)&&this.events.emit(nn("pairing_ping",i),{error:s.error})},500)}),mr(this,"onPairingDeleteRequest",async(n,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Vp.delete,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),mr(this,"onUnknownRpcMethodRequest",async(n,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=zn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,n,a),this.logger.error(a)}catch(a){await this.sendError(i,n,a),this.logger.error(a)}}),mr(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(zn("WC_METHOD_UNSUPPORTED",n))}),mr(this,"isValidPair",(n,s)=>{var i;if(!ra(n)){const{message:a}=$e("MISSING_OR_INVALID",`pair() params: ${n}`);throw s.setError(Td.malformed_pairing_uri),new Error(a)}if(!dHe(n.uri)){const{message:a}=$e("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw s.setError(Td.malformed_pairing_uri),new Error(a)}const o=pZ(n?.uri);if(!((i=o?.relay)!=null&&i.protocol)){const{message:a}=$e("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Td.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=$e("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Td.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&he.toMiliseconds(o?.expiryTimestamp)<Date.now()){s.setError(Td.pairing_expired);const{message:a}=$e("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),mr(this,"isValidPing",async n=>{if(!ra(n)){const{message:i}=$e("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),mr(this,"isValidDisconnect",async n=>{if(!ra(n)){const{message:i}=$e("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),mr(this,"isValidPairingTopic",async n=>{if(!Us(n,!1)){const{message:s}=$e("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(s)}if(!this.pairings.keys.includes(n)){const{message:s}=$e("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(s)}if(Qf(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:s}=$e("EXPIRED",`pairing topic: ${n}`);throw new Error(s)}}),this.core=e,this.logger=bo(r,this.name),this.pairings=new ug(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Pa(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(_s.message,async e=>{const{topic:r,message:n,transportType:s}=e;if(this.pairings.keys.includes(r)&&s!==Hn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const i=await this.core.crypto.decode(r,n);zy(i)?(this.core.history.set(r,i),await this.onRelayEventRequest({topic:r,payload:i})):W0(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id)),await this.core.relayer.messages.ack(r,n)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Oc.expired,async e=>{const{topic:r}=uoe(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Vp.expire,{topic:r}))})}}var lGe=Object.defineProperty,dGe=(t,e,r)=>e in t?lGe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vi=(t,e,r)=>dGe(t,typeof e!="symbol"?e+"":e,r);class fGe extends Nje{constructor(e,r){super(e,r),this.core=e,this.logger=r,vi(this,"records",new Map),vi(this,"events",new Ys.EventEmitter),vi(this,"name",pze),vi(this,"version",gze),vi(this,"cached",[]),vi(this,"initialized",!1),vi(this,"storagePrefix",jl),vi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),vi(this,"set",(n,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:n,request:{method:s.method,params:s.params||null},chainId:i,expiry:zs(he.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(lu.created,o)}),vi(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const s=await this.getRecord(n.id);typeof s.response>"u"&&(s.response=gs(n)?{error:n.error}:{result:n.result},this.records.set(s.id,s),this.persist(),this.events.emit(lu.updated,s))}),vi(this,"get",async(n,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:s}),await this.getRecord(s))),vi(this,"delete",(n,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===n){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(lu.deleted,i)}}),this.persist()}),vi(this,"exists",async(n,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===n:!1)),vi(this,"on",(n,s)=>{this.events.on(n,s)}),vi(this,"once",(n,s)=>{this.events.once(n,s)}),vi(this,"off",(n,s)=>{this.events.off(n,s)}),vi(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=bo(r,this.name)}get context(){return Pa(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Ms(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=$e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(lu.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=$e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(lu.created,e=>{const r=lu.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(lu.updated,e=>{const r=lu.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(lu.deleted,e=>{const r=lu.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(ac.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{he.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(lu.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var hGe=Object.defineProperty,pGe=(t,e,r)=>e in t?hGe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ro=(t,e,r)=>pGe(t,typeof e!="symbol"?e+"":e,r);class gGe extends Uje{constructor(e,r){super(e,r),this.core=e,this.logger=r,ro(this,"expirations",new Map),ro(this,"events",new Ys.EventEmitter),ro(this,"name",mze),ro(this,"version",yze),ro(this,"cached",[]),ro(this,"initialized",!1),ro(this,"storagePrefix",jl),ro(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ro(this,"has",n=>{try{const s=this.formatTarget(n);return typeof this.getExpiration(s)<"u"}catch{return!1}}),ro(this,"set",(n,s)=>{this.isInitialized();const i=this.formatTarget(n),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Oc.created,{target:i,expiration:o})}),ro(this,"get",n=>{this.isInitialized();const s=this.formatTarget(n);return this.getExpiration(s)}),ro(this,"del",n=>{if(this.isInitialized(),this.has(n)){const s=this.formatTarget(n),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Oc.deleted,{target:s,expiration:i})}}),ro(this,"on",(n,s)=>{this.events.on(n,s)}),ro(this,"once",(n,s)=>{this.events.once(n,s)}),ro(this,"off",(n,s)=>{this.events.off(n,s)}),ro(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=bo(r,this.name)}get context(){return Pa(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return ZLe(e);if(typeof e=="number")return YLe(e);const{message:r}=$e("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Oc.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=$e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=$e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;he.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Oc.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(ac.pulse,()=>this.checkExpirations()),this.events.on(Oc.created,e=>{const r=Oc.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Oc.expired,e=>{const r=Oc.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Oc.deleted,e=>{const r=Oc.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var mGe=Object.defineProperty,yGe=(t,e,r)=>e in t?mGe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ns=(t,e,r)=>yGe(t,typeof e!="symbol"?e+"":e,r);class bGe extends Mje{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,Ns(this,"name",bze),Ns(this,"abortController"),Ns(this,"isDevEnv"),Ns(this,"verifyUrlV3",vze),Ns(this,"storagePrefix",jl),Ns(this,"version",nae),Ns(this,"publicKey"),Ns(this,"fetchPromise"),Ns(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&he.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Ns(this,"register",async s=>{if(!ib()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const u=li.getDocument(),l=this.startAbortTimer(he.ONE_SECOND*5),d=await new Promise((f,p)=>{const g=()=>{window.removeEventListener("message",y),u.body.removeChild(h),p("attestation aborted")};this.abortController.signal.addEventListener("abort",g);const h=u.createElement("iframe");h.src=c,h.style.display="none",h.addEventListener("error",g,{signal:this.abortController.signal});const y=E=>{if(E.data&&typeof E.data=="string")try{const S=JSON.parse(E.data);if(S.type==="verify_attestation"){if(hy(S.attestation).payload.id!==o)return;clearInterval(l),u.body.removeChild(h),this.abortController.signal.removeEventListener("abort",g),window.removeEventListener("message",y),f(S.attestation===null?"":S.attestation)}}catch(S){this.logger.warn(S)}};u.body.appendChild(h),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(u){this.logger.warn(u)}return""}),Ns(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(hy(i).payload.id!==a)return;const u=await this.isValidJwtAttestation(i);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const c=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(o,c)}),Ns(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(he.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Ns(this,"getVerifyUrl",s=>{let i=s||z1;return Eze.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${z1}`),i=z1),i}),Ns(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(he.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Ns(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Ns(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Ns(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Ns(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Ns(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Ns(this,"validateAttestation",(s,i)=>{const o=zqe(s,i.publicKey),a={hasExpired:he.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=bo(r,this.name),this.abortController=new AbortController,this.isDevEnv=b9(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Pa(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),he.toMiliseconds(e))}}var wGe=Object.defineProperty,vGe=(t,e,r)=>e in t?wGe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,WZ=(t,e,r)=>vGe(t,typeof e!="symbol"?e+"":e,r);class EGe extends Dje{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,WZ(this,"context",_ze),WZ(this,"registerDeviceToken",async n=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=n,c=`${Aze}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=bo(r,this.context)}}var _Ge=Object.defineProperty,VZ=Object.getOwnPropertySymbols,AGe=Object.prototype.hasOwnProperty,xGe=Object.prototype.propertyIsEnumerable,a4=(t,e,r)=>e in t?_Ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,i1=(t,e)=>{for(var r in e||(e={}))AGe.call(e,r)&&a4(t,r,e[r]);if(VZ)for(var r of VZ(e))xGe.call(e,r)&&a4(t,r,e[r]);return t},Qs=(t,e,r)=>a4(t,typeof e!="symbol"?e+"":e,r);class CGe extends jje{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,Qs(this,"context",Cze),Qs(this,"storagePrefix",jl),Qs(this,"storageVersion",xze),Qs(this,"events",new Map),Qs(this,"shouldPersist",!1),Qs(this,"init",async()=>{if(!b9())try{const s={eventId:MK(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:aoe(this.core.relayer.protocol,this.core.relayer.version,QO)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Qs(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,u=MK(),l=this.core.projectId||"",d=Date.now(),f=i1({eventId:u,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,f),this.shouldPersist=!0),f}),Qs(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return i1(i1({},a),this.setMethods(a.eventId))}),Qs(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Qs(this,"setEventListeners",()=>{this.core.heartbeat.on(ac.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{he.fromMiliseconds(Date.now())-he.fromMiliseconds(s.timestamp)>Sze&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Qs(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Qs(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Qs(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Qs(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Qs(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,i1(i1({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Qs(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Qs(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Ize}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${QO}${i}`,{method:"POST",body:JSON.stringify(s)})}),Qs(this,"getAppDomain",()=>ooe().url),this.logger=bo(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var SGe=Object.defineProperty,GZ=Object.getOwnPropertySymbols,IGe=Object.prototype.hasOwnProperty,TGe=Object.prototype.propertyIsEnumerable,c4=(t,e,r)=>e in t?SGe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,KZ=(t,e)=>{for(var r in e||(e={}))IGe.call(e,r)&&c4(t,r,e[r]);if(GZ)for(var r of GZ(e))TGe.call(e,r)&&c4(t,r,e[r]);return t},Un=(t,e,r)=>c4(t,typeof e!="symbol"?e+"":e,r);let NGe=class bae extends Cje{constructor(e){var r;super(e),Un(this,"protocol",rae),Un(this,"version",nae),Un(this,"name",XO),Un(this,"relayUrl"),Un(this,"projectId"),Un(this,"customStoragePrefix"),Un(this,"events",new Ys.EventEmitter),Un(this,"logger"),Un(this,"heartbeat"),Un(this,"relayer"),Un(this,"crypto"),Un(this,"storage"),Un(this,"history"),Un(this,"expirer"),Un(this,"pairing"),Un(this,"verify"),Un(this,"echoClient"),Un(this,"linkModeSupportedApps"),Un(this,"eventClient"),Un(this,"initialized",!1),Un(this,"logChunkController"),Un(this,"on",(a,c)=>this.events.on(a,c)),Un(this,"once",(a,c)=>this.events.once(a,c)),Un(this,"off",(a,c)=>this.events.off(a,c)),Un(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Un(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const l={topic:a,message:c,publishedAt:Date.now(),transportType:Hn.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})});const n=this.getGlobalCore(e?.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||iae,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=rb({level:typeof e?.logger=="string"&&e.logger?e.logger:KHe.logger,name:XO}),{logger:i,chunkLoggerController:o}=m9({opts:s,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=bo(i,this.name),this.heartbeat=new vJ,this.crypto=new rVe(this,this.logger,e?.keychain),this.history=new fGe(this,this.logger),this.expirer=new gGe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new AJ(KZ(KZ({},ZHe),e?.storageOptions)),this.relayer=new NVe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new uGe(this,this.logger),this.verify=new bGe(this,this.logger,this.storage),this.echoClient=new EGe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new CGe(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const r=new bae(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(uze,n),r}get context(){return Pa(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(SZ,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(SZ)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${e}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(e){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=e.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&GHe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const PGe=NGe,wae="wc",vae=2,Eae="client",O9=`${wae}@${vae}:${Eae}:`,PR={name:Eae,logger:"error"},ZZ="WALLETCONNECT_DEEPLINK_CHOICE",RGe="proposal",YZ="Proposal expired",OGe="session",om=he.SEVEN_DAYS,kGe="engine",Ei={wc_sessionPropose:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1104},res:{ttl:he.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1106},res:{ttl:he.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1112},res:{ttl:he.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1114},res:{ttl:he.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:he.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:he.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1119}}},RR={min:he.FIVE_MINUTES,max:he.SEVEN_DAYS},ol={idle:"IDLE",active:"ACTIVE"},BGe={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},UGe="request",MGe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],DGe="wc",jGe="auth",LGe="authKeys",FGe="pairingTopics",$Ge="requests",t3=`${DGe}@${1.5}:${jGe}:`,BI=`${t3}:PUB_KEY`;var qGe=Object.defineProperty,HGe=Object.defineProperties,zGe=Object.getOwnPropertyDescriptors,JZ=Object.getOwnPropertySymbols,WGe=Object.prototype.hasOwnProperty,VGe=Object.prototype.propertyIsEnumerable,u4=(t,e,r)=>e in t?qGe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gn=(t,e)=>{for(var r in e||(e={}))WGe.call(e,r)&&u4(t,r,e[r]);if(JZ)for(var r of JZ(e))VGe.call(e,r)&&u4(t,r,e[r]);return t},no=(t,e)=>HGe(t,zGe(e)),Ie=(t,e,r)=>u4(t,typeof e!="symbol"?e+"":e,r);class GGe extends qje{constructor(e){super(e),Ie(this,"name",kGe),Ie(this,"events",new Ly),Ie(this,"initialized",!1),Ie(this,"requestQueue",{state:ol.idle,queue:[]}),Ie(this,"sessionRequestQueue",{state:ol.idle,queue:[]}),Ie(this,"emittedSessionRequests",new iFe({limit:500})),Ie(this,"requestQueueDelay",he.ONE_SECOND),Ie(this,"expectedPairingMethodMap",new Map),Ie(this,"recentlyDeletedMap",new Map),Ie(this,"recentlyDeletedLimit",200),Ie(this,"relayMessageCache",[]),Ie(this,"pendingSessions",new Map),Ie(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Ei)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay)))}),Ie(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=no(gn({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n),n.optionalNamespaces=oHe(n.requiredNamespaces,n.optionalNamespaces),n.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:u}=n;let l=s,d,f=!1;try{if(l){const P=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),f=P.active}}catch(P){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),P}if(!l||!f){const{topic:P,uri:D}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});l=P,d=D}if(!l){const{message:P}=$e("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(P)}const p=await this.client.core.crypto.generateKeyPair(),g=Ei.wc_sessionPropose.req.ttl||he.FIVE_MINUTES,h=zs(g),y=no(gn(gn({requiredNamespaces:i,optionalNamespaces:o,relays:u??[{protocol:sae}],proposer:{publicKey:p,metadata:this.client.metadata},expiryTimestamp:h,pairingTopic:l},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:ni()}),E=nn("session_connect",y.id),{reject:S,resolve:C,done:_}=Lp(g,YZ),T=({id:P})=>{P===y.id&&(this.client.events.off("proposal_expire",T),this.pendingSessions.delete(y.id),this.events.emit(E,{error:{message:YZ,code:0}}))};return this.client.events.on("proposal_expire",T),this.events.once(E,({error:P,session:D})=>{this.client.events.off("proposal_expire",T),P?S(P):D&&C(D)}),await this.sendProposeSession({proposal:y,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:y.id}}}),await this.setProposal(y.id,y),{uri:d,approval:_}}),Ie(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),Ie(this,"approve",async r=>{var n,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r?.id)==null?void 0:n.toString(),trace:[Zf.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(I){throw o.setError(r1.no_internet_connection),I}try{await this.isValidProposalId(r?.id)}catch(I){throw this.client.logger.error(`approve() -> proposal.get(${r?.id}) failed`),o.setError(r1.proposal_not_found),I}try{await this.isValidApprove(r)}catch(I){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(r1.session_approve_namespace_validation_failure),I}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:f}=r,p=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:g,proposer:h,requiredNamespaces:y,optionalNamespaces:E}=p;let S=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:g});S||(S=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Zf.session_approve_started,properties:{topic:g,trace:[Zf.session_approve_started,Zf.session_namespaces_validation_success]}}));const C=await this.client.core.crypto.generateKeyPair(),_=h.publicKey,T=await this.client.core.crypto.generateSharedKey(C,_),P=gn(gn(gn({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:C,metadata:this.client.metadata},expiry:zs(om)},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),D=Hn.relay;S.addTrace(Zf.subscribing_session_topic);try{await this.client.core.relayer.subscribe(T,{transportType:D,internal:{skipSubscribe:!0}})}catch(I){throw S.setError(r1.subscribe_session_topic_failure),I}S.addTrace(Zf.subscribe_session_topic_success);const F=no(gn({},P),{topic:T,requiredNamespaces:y,optionalNamespaces:E,pairingTopic:g,acknowledged:!1,self:P.controller,peer:{publicKey:h.publicKey,metadata:h.metadata},controller:C,transportType:Hn.relay});await this.client.session.set(T,F),S.addTrace(Zf.store_session);try{await this.sendApproveSession({sessionTopic:T,proposal:p,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:C},sessionSettleRequest:P,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:a}}}),S.addTrace(Zf.session_approve_publish_success)}catch(I){throw this.client.logger.error(I),this.client.session.delete(T,zn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(T),I}return this.client.core.eventClient.deleteEvent({eventId:S.eventId}),await this.client.core.pairing.updateMetadata({topic:g,metadata:h.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(T,zs(om)),{topic:T,acknowledged:()=>Promise.resolve(this.client.session.get(T))}}),Ie(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:s}=r;let i;try{i=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}i&&await this.sendError({id:n,topic:i,error:s,rpcOpts:Ei.wc_sessionPropose.reject}),await this.deleteProposal(n)}),Ie(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:n,namespaces:s}=r,{done:i,resolve:o,reject:a}=Lp(),c=ni(),u=Ro().toString(),l=this.client.session.get(n).namespaces;return this.events.once(nn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(n,{namespaces:s}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(d=>{this.client.logger.error(d),this.client.session.update(n,{namespaces:l}),a(d)}),{acknowledged:i}}),Ie(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,s=ni(),{done:i,resolve:o,reject:a}=Lp();return this.events.once(nn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,zs(om)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),Ie(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:n,request:s,topic:i,expiry:o=Ei.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(i);a?.transportType===Hn.relay&&await this.confirmOnlineStateOrThrow();const c=ni(),u=Ro().toString(),{done:l,resolve:d,reject:f}=Lp(o,"Request expired. Please try again.");this.events.once(nn("session_request",c),({error:y,result:E})=>{y?f(y):d(E)});const p="wc_sessionRequest",g=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(g)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:p,params:{request:no(gn({},s),{expiryTimestamp:zs(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:g}).catch(y=>f(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),await l();const h={request:no(gn({},s),{expiryTimestamp:zs(o)}),chainId:n};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:p,params:h,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,h)}).catch(E=>f(E)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),y()}),new Promise(async y=>{var E;if(!((E=a.sessionConfig)!=null&&E.disableDeepLink)){const S=await eFe(this.client.core.storage,ZZ);await JLe({id:c,topic:i,wcDeepLink:S})}y()}),l()]).then(y=>y[2])}),Ie(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:s}=r,{id:i}=s,o=this.client.session.get(n);o.transportType===Hn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Vs(s)?await this.sendResult({id:i,topic:n,result:s.result,throwOnFailedPublish:!0,appLink:a}):gs(s)&&await this.sendError({id:i,topic:n,error:s.error,appLink:a}),this.cleanupAfterResponse(r)}),Ie(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:n}=r;if(this.client.session.keys.includes(n)){const s=ni(),i=Ro().toString(),{done:o,resolve:a,reject:c}=Lp();this.events.once(nn("session_ping",s),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),Ie(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:s,chainId:i}=r,o=Ro().toString(),a=ni();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),Ie(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:zn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:s}=$e("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(s)}}),Ie(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>uHe(n,r)))),Ie(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Ie(this,"authenticate",async(r,n)=>{var s;this.isInitialized(),this.isValidAuthenticate(r);const i=n&&this.client.core.linkModeSupportedApps.includes(n)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Hn.link_mode:Hn.relay;o===Hn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:l,nonce:d,type:f,exp:p,nbf:g,methods:h=[],expiry:y}=r,E=[...r.resources||[]],{topic:S,uri:C}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:S,uri:C}});const _=await this.client.core.crypto.generateKeyPair(),T=OI(_);if(await Promise.all([this.client.auth.authKeys.set(BI,{responseTopic:T,publicKey:_}),this.client.auth.pairingTopics.set(T,{topic:T,pairingTopic:S})]),await this.client.core.relayer.subscribe(T,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${S}`),h.length>0){const{namespace:k}=b0(a[0]);let j=m$e(k,"request",h);RI(E)&&(j=b$e(j,E.pop())),E.push(j)}const P=y&&y>Ei.wc_sessionAuthenticate.req.ttl?y:Ei.wc_sessionAuthenticate.req.ttl,D={authPayload:{type:f??"caip122",chains:a,statement:c,aud:u,domain:l,version:"1",nonce:d,iat:new Date().toISOString(),exp:p,nbf:g,resources:E},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:zs(P)},F={eip155:{chains:a,methods:[...new Set(["personal_sign",...h])],events:["chainChanged","accountsChanged"]}},I={requiredNamespaces:{},optionalNamespaces:F,relays:[{protocol:"irn"}],pairingTopic:S,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:zs(Ei.wc_sessionPropose.req.ttl),id:ni()},{done:U,resolve:L,reject:B}=Lp(P,"Request expired"),A=ni(),m=nn("session_connect",I.id),b=nn("session_request",A),w=async({error:k,session:j})=>{this.events.off(b,x),k?B(k):j&&L({session:j})},x=async k=>{var j,N,v;if(await this.deletePendingAuthRequest(A,{message:"fulfilled",code:0}),k.error){const K=zn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return k.error.code===K.code?void 0:(this.events.off(m,w),B(k.error.message))}await this.deleteProposal(I.id),this.events.off(m,w);const{cacaos:R,responder:$}=k.result,O=[],H=[];for(const K of R){await GK({cacao:K,projectId:this.client.core.projectId})||(this.client.logger.error(K,"Signature verification failed"),B(zn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Q}=K,re=RI(Q.resources),de=[$O(Q.iss)],le=n5(Q.iss);if(re){const se=KK(re),be=ZK(re);O.push(...se),de.push(...be)}for(const se of de)H.push(`${se}:${le}`)}const W=await this.client.core.crypto.generateSharedKey(_,$.publicKey);let G;O.length>0&&(G={topic:W,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:$,controller:$.publicKey,expiry:zs(om),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:S,namespaces:wZ([...new Set(O)],[...new Set(H)]),transportType:o},await this.client.core.relayer.subscribe(W,{transportType:o}),await this.client.session.set(W,G),S&&await this.client.core.pairing.updateMetadata({topic:S,metadata:$.metadata}),G=this.client.session.get(W)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(N=$.metadata.redirect)!=null&&N.linkMode&&(v=$.metadata.redirect)!=null&&v.universal&&n&&(this.client.core.addLinkModeSupportedApp($.metadata.redirect.universal),this.client.session.update(W,{transportType:Hn.link_mode})),L({auths:R,session:G})};this.events.once(m,w),this.events.once(b,x);let M;try{if(i){const k=Ms("wc_sessionAuthenticate",D,A);this.client.core.history.set(S,k);const j=await this.client.core.crypto.encode("",k,{type:T_,encoding:uh});M=KS(n,S,j)}else await Promise.all([this.sendRequest({topic:S,method:"wc_sessionAuthenticate",params:D,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:A}),this.sendRequest({topic:S,method:"wc_sessionPropose",params:I,expiry:Ei.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:I.id})])}catch(k){throw this.events.off(m,w),this.events.off(b,x),k}return await this.setProposal(I.id,I),await this.setAuthRequest(A,{request:no(gn({},D),{verifyContext:{}}),pairingTopic:S,transportType:o}),{uri:M??C,response:U}}),Ie(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:s}=r,i=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[Bp.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(n1.no_internet_connection),y}const o=this.getPendingAuthRequest(n);if(!o)throw i.setError(n1.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Hn.relay;a===Hn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=OI(c),d={type:Kd,receiverPublicKey:c,senderPublicKey:u},f=[],p=[];for(const y of s){if(!await GK({cacao:y,projectId:this.client.core.projectId})){i.setError(n1.invalid_cacao);const T=zn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:l,error:T,encodeOpts:d}),new Error(T.message)}i.addTrace(Bp.cacaos_verified);const{p:E}=y,S=RI(E.resources),C=[$O(E.iss)],_=n5(E.iss);if(S){const T=KK(S),P=ZK(S);f.push(...T),C.push(...P)}for(const T of C)p.push(`${T}:${_}`)}const g=await this.client.core.crypto.generateSharedKey(u,c);i.addTrace(Bp.create_authenticated_session_topic);let h;if(f?.length>0){h={topic:g,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:zs(om),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:wZ([...new Set(f)],[...new Set(p)]),transportType:a},i.addTrace(Bp.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(g,{transportType:a})}catch(y){throw i.setError(n1.subscribe_authenticated_session_topic_failure),y}i.addTrace(Bp.subscribe_authenticated_session_topic_success),await this.client.session.set(g,h),i.addTrace(Bp.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Bp.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:n,result:{cacaos:s,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(n1.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:h}}),Ie(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:s}=r,i=this.getPendingAuthRequest(n);if(!i)throw new Error(`Could not find pending auth request with id ${n}`);i.transportType===Hn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=OI(o),u={type:Kd,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:s,encodeOpts:u,rpcOpts:Ei.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.deleteProposal(n)}),Ie(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:s}=r;return xoe(n,s)}),Ie(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),Ie(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&i.topic&&i.topic!==n.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),Ie(this,"deleteSession",async r=>{var n;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,zn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(ZZ).catch(u=>this.client.logger.warn(u)),this.getPendingSessionRequests().forEach(u=>{u.topic===s&&this.deletePendingSessionRequest(u.id,zn("USER_DISCONNECTED"))}),s===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=ol.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),Ie(this,"deleteProposal",async(r,n)=>{if(n)try{const s=this.client.proposal.get(r);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(r1.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,zn("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),Ie(this,"deletePendingSessionRequest",async(r,n,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==r),s&&(this.sessionRequestQueue.state=ol.idle,this.client.events.emit("session_request_expire",{id:r}))}),Ie(this,"deletePendingAuthRequest",async(r,n,s=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)])}),Ie(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),Ie(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,zs(Ei.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),Ie(this,"setAuthRequest",async(r,n)=>{const{request:s,pairingTopic:i,transportType:o=Hn.relay}=n;this.client.core.expirer.set(r,s.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:r,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),Ie(this,"setPendingSessionRequest",async r=>{const{id:n,topic:s,params:i,verifyContext:o}=r,a=i.request.expiryTimestamp||zs(Ei.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:s,params:i,verifyContext:o})}),Ie(this,"sendRequest",async r=>{const{topic:n,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:l,tvf:d,publishOpts:f={}}=r,p=Ms(s,i,c);let g;const h=!!l;try{const S=h?uh:ha;g=await this.client.core.crypto.encode(n,p,{encoding:S})}catch(S){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),S}let y;if(MGe.includes(s)){const S=Mc(JSON.stringify(p)),C=Mc(g);y=await this.client.core.verify.register({id:C,decryptedId:S})}const E=gn(gn({},Ei[s].req),f);if(E.attestation=y,o&&(E.ttl=o),a&&(E.id=a),this.client.core.history.set(n,p),h){const S=KS(l,n,g);await global.Linking.openURL(S,this.client.name)}else E.tvf=no(gn({},d),{correlationId:p.id}),u?(E.internal=no(gn({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,g,E)):this.client.core.relayer.publish(n,g,E).catch(S=>this.client.logger.error(S));return p.id}),Ie(this,"sendProposeSession",async r=>{const{proposal:n,publishOpts:s}=r,i=Ms("wc_sessionPropose",n,n.id);this.client.core.history.set(n.pairingTopic,i);const o=await this.client.core.crypto.encode(n.pairingTopic,i,{encoding:ha}),a=Mc(JSON.stringify(i)),c=Mc(o),u=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:n.pairingTopic,sessionProposal:o},opts:no(gn({},s),{publishMethod:"wc_proposeSession",attestation:u})})}),Ie(this,"sendApproveSession",async r=>{const{sessionTopic:n,pairingProposalResponse:s,proposal:i,sessionSettleRequest:o,publishOpts:a}=r,c=Rl(i.id,s),u=await this.client.core.crypto.encode(i.pairingTopic,c,{encoding:ha}),l=Ms("wc_sessionSettle",o,a?.id),d=await this.client.core.crypto.encode(n,l,{encoding:ha});this.client.core.history.set(n,l),await this.client.core.relayer.publishCustom({payload:{sessionTopic:n,pairingTopic:i.pairingTopic,sessionProposalResponse:u,sessionSettlementRequest:d},opts:no(gn({},a),{publishMethod:"wc_approveSession"})})}),Ie(this,"sendResult",async r=>{const{id:n,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,u=Rl(n,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=d?uh:ha;l=await this.client.core.crypto.encode(s,u,no(gn({},a||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),g}let f,p;try{f=await this.client.core.history.get(s,n);const g=f.request;try{p=this.getTVFParams(n,g.params,i)}catch(h){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${h?.message}`)}}catch(g){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${n}) failed`),g}if(d){const g=KS(c,s,l);await global.Linking.openURL(g,this.client.name)}else{const g=f.request.method,h=Ei[g].res;h.tvf=no(gn({},p),{correlationId:n}),o?(h.internal=no(gn({},h.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,l,h)):this.client.core.relayer.publish(s,l,h).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(u)}),Ie(this,"sendError",async r=>{const{id:n,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=r,u=Hy(n,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?uh:ha;l=await this.client.core.crypto.encode(s,u,no(gn({},o||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),p}let f;try{f=await this.client.core.history.get(s,n)}catch(p){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),p}if(d){const p=KS(c,s,l);await global.Linking.openURL(p,this.client.name)}else{const p=f.request.method,g=a||Ei[p].res;this.client.core.relayer.publish(s,l,g)}await this.client.core.history.resolve(u)}),Ie(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(s=>{let i=!1;Qf(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&r.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Qf(s.expiryTimestamp)&&n.push(s.id)}),await Promise.all([...r.map(s=>this.deleteSession({topic:s})),...n.map(s=>this.deleteProposal(s))])}),Ie(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),Ie(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),Ie(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ol.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ol.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=ol.idle}),Ie(this,"processRequest",async r=>{const{topic:n,payload:s,attestation:i,transportType:o,encryptedId:a}=r,c=s.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,s);case"wc_sessionPing":return await this.onSessionPingRequest(n,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),Ie(this,"onRelayEventResponse",async r=>{const{topic:n,payload:s,transportType:i}=r,o=(await this.client.core.history.get(n,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,s);case"wc_sessionExtend":return this.onSessionExtendResponse(n,s);case"wc_sessionPing":return this.onSessionPingResponse(n,s);case"wc_sessionRequest":return this.onSessionRequestResponse(n,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Ie(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:s}=$e("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),Ie(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:s}=r,i=this.expectedPairingMethodMap.get(n);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Ie(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:s,attestation:i,encryptedId:o}=r,{params:a,id:c}=s;try{const u=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u?.setError(Td.proposal_listener_not_found)),this.isValidConnect(gn({},s.params));const l=a.expiryTimestamp||zs(Ei.wc_sessionPropose.req.ttl),d=gn({id:c,pairingTopic:n,expiryTimestamp:l,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const f=await this.getVerifyContext({attestationId:i,hash:Mc(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});u?.addTrace(ul.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:f})}catch(u){await this.sendError({id:c,topic:n,error:u,rpcOpts:Ei.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),Ie(this,"onSessionProposeResponse",async(r,n,s)=>{const{id:i}=n;if(Vs(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:r,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(l,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else if(gs(n)){await this.deleteProposal(i);const o=nn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),Ie(this,"onSessionSettleRequest",async(r,n)=>{const{id:s,params:i}=n;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:f}=n.params,p=[...this.pendingSessions.values()].find(y=>y.sessionTopic===r);if(!p)return this.client.logger.error(`Pending session not found for topic ${r}`);const g=this.client.proposal.get(p.proposalId),h=no(gn(gn(gn({topic:r,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:p.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:a.publicKey,self:{publicKey:p.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{transportType:Hn.relay});await this.client.session.set(h.topic,h),await this.setExpiry(h.topic,h.expiry),await this.client.core.pairing.updateMetadata({topic:p.pairingTopic,metadata:h.peer.metadata}),this.client.events.emit("session_connect",{session:h}),this.events.emit(nn("session_connect",p.proposalId),{session:h}),this.pendingSessions.delete(p.proposalId),this.deleteProposal(p.proposalId,!1),this.cleanupDuplicatePairings(h),await this.sendResult({id:n.id,topic:r,result:!0})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),Ie(this,"onSessionSettleResponse",async(r,n)=>{const{id:s}=n;Vs(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(nn("session_approve",s),{})):gs(n)&&(await this.client.session.delete(r,zn("USER_DISCONNECTED")),this.events.emit(nn("session_approve",s),{error:n.error}))}),Ie(this,"onSessionUpdateRequest",async(r,n)=>{const{params:s,id:i}=n;try{const o=`${r}_session_update`,a=e1.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:r,error:zn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(gn({topic:r},s));try{e1.set(o,i),await this.client.session.update(r,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:r,result:!0})}catch(c){throw e1.delete(o),c}this.client.events.emit("session_update",{id:i,topic:r,params:s})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),Ie(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),Ie(this,"onSessionUpdateResponse",(r,n)=>{const{id:s}=n,i=nn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vs(n)?this.events.emit(nn("session_update",s),{}):gs(n)&&this.events.emit(nn("session_update",s),{error:n.error})}),Ie(this,"onSessionExtendRequest",async(r,n)=>{const{id:s}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,zs(om)),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_extend",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),Ie(this,"onSessionExtendResponse",(r,n)=>{const{id:s}=n,i=nn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vs(n)?this.events.emit(nn("session_extend",s),{}):gs(n)&&this.events.emit(nn("session_extend",s),{error:n.error})}),Ie(this,"onSessionPingRequest",async(r,n)=>{const{id:s}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),Ie(this,"onSessionPingResponse",(r,n)=>{const{id:s}=n,i=nn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Vs(n)?this.events.emit(nn("session_ping",s),{}):gs(n)&&this.events.emit(nn("session_ping",s),{error:n.error})},500)}),Ie(this,"onSessionDeleteRequest",async(r,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(i=>{this.client.core.relayer.once(_s.publish,async()=>{i(await this.deleteSession({topic:r,id:s}))})}),this.sendResult({id:s,topic:r,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:zn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),Ie(this,"onSessionRequest",async r=>{var n,s,i;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:l}=r,{id:d,params:f}=a;try{await this.isValidRequest(gn({topic:o},f));const p=this.client.session.get(o),g=await this.getVerifyContext({attestationId:c,hash:Mc(JSON.stringify(Ms("wc_sessionRequest",f,d))),encryptedId:u,metadata:p.peer.metadata,transportType:l}),h={id:d,topic:o,params:f,verifyContext:g};await this.setPendingSessionRequest(h),l===Hn.link_mode&&(n=p.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((s=p.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(h):(this.addSessionRequestToSessionRequestQueue(h),this.processSessionRequestQueue())}catch(p){await this.sendError({id:d,topic:o,error:p}),this.client.logger.error(p)}}),Ie(this,"onSessionRequestResponse",(r,n)=>{const{id:s}=n,i=nn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vs(n)?this.events.emit(nn("session_request",s),{result:n.result}):gs(n)&&this.events.emit(nn("session_request",s),{error:n.error})}),Ie(this,"onSessionEventRequest",async(r,n)=>{const{id:s,params:i}=n;try{const o=`${r}_session_event_${i.event.name}`,a=e1.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(gn({topic:r},i)),this.client.events.emit("session_event",{id:s,topic:r,params:i}),e1.set(o,s)}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),Ie(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:s}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Vs(n)?this.events.emit(nn("session_request",s),{result:n.result}):gs(n)&&this.events.emit(nn("session_request",s),{error:n.error})}),Ie(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:u,authPayload:l,expiryTimestamp:d}=i.params,f=await this.getVerifyContext({attestationId:o,hash:Mc(JSON.stringify(i)),encryptedId:a,metadata:u.metadata,transportType:c}),p={requester:u,pairingTopic:s,id:i.id,authPayload:l,verifyContext:f,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:p,pairingTopic:s,transportType:c}),c===Hn.link_mode&&(n=u.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:f})}catch(u){this.client.logger.error(u);const l=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(i.params.requester.metadata,c),p={type:Kd,receiverPublicKey:l,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:u,encodeOpts:p,rpcOpts:Ei.wc_sessionAuthenticate.autoReject,appLink:f})}}),Ie(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),Ie(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ol.idle,this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay))}),Ie(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===r&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=nn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(nn("session_request",i.request.id),{error:n})})}),Ie(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ol.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),Ie(this,"emitSessionRequest",r=>{if(this.emittedSessionRequests.has(r.id)){this.client.logger.warn({id:r.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${r.id}`);return}this.sessionRequestQueue.state=ol.active,this.emittedSessionRequests.add(r.id),this.client.events.emit("session_request",r)}),Ie(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(s=>s.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:Ms("wc_sessionPropose",no(gn({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id),attestation:n.attestation,encryptedId:n.encryptedId})}),Ie(this,"isValidConnect",async r=>{if(!ra(r)){const{message:u}=$e("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=r;if(Ks(n)||await this.isValidPairingTopic(n),!EHe(c)){const{message:u}=$e("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(!Ks(s)&&Nl(s)!==0){const u="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(u):this.client.logger.warn(u),this.validateNamespaces(s,"requiredNamespaces")}if(!Ks(i)&&Nl(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Ks(o)||this.validateSessionProps(o,"sessionProperties"),!Ks(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(l=>u.includes(l.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),Ie(this,"validateNamespaces",(r,n)=>{const s=vHe(r,"connect()",n);if(s)throw new Error(s.message)}),Ie(this,"isValidApprove",async r=>{if(!ra(r))throw new Error($e("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),u=CR(s,"approve()");if(u)throw new Error(u.message);const l=_Z(c.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!Us(i,!0)){const{message:d}=$e("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Ks(o)||this.validateSessionProps(o,"sessionProperties"),!Ks(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(f=>d.has(f.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),Ie(this,"isValidReject",async r=>{if(!ra(r)){const{message:i}=$e("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(i)}const{id:n,reason:s}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!AHe(s)){const{message:i}=$e("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),Ie(this,"isValidSessionSettleRequest",r=>{if(!ra(r)){const{message:u}=$e("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:s,namespaces:i,expiry:o}=r;if(!tae(n)){const{message:u}=$e("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=pHe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=CR(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Qf(o)){const{message:u}=$e("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),Ie(this,"isValidUpdate",async r=>{if(!ra(r)){const{message:c}=$e("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:s}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const i=this.client.session.get(n),o=CR(s,"update()");if(o)throw new Error(o.message);const a=_Z(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),Ie(this,"isValidExtend",async r=>{if(!ra(r)){const{message:s}=$e("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(s)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),Ie(this,"isValidRequest",async r=>{if(!ra(r)){const{message:c}=$e("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:s,chainId:i,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!EZ(a,i)){const{message:c}=$e("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!xHe(s)){const{message:c}=$e("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!IHe(a,i,s.method)){const{message:c}=$e("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!RHe(o,RR)){const{message:c}=$e("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${RR.min} and ${RR.max}`);throw new Error(c)}}),Ie(this,"isValidRespond",async r=>{var n;if(!ra(r)){const{message:o}=$e("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:s,response:i}=r;try{await this.isValidSessionTopic(s)}catch(o){throw(n=r?.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!CHe(i)){const{message:o}=$e("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),Ie(this,"isValidPing",async r=>{if(!ra(r)){const{message:s}=$e("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),Ie(this,"isValidEmit",async r=>{if(!ra(r)){const{message:a}=$e("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:s,chainId:i}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!EZ(o,i)){const{message:a}=$e("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!SHe(s)){const{message:a}=$e("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!THe(o,i,s.name)){const{message:a}=$e("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),Ie(this,"isValidDisconnect",async r=>{if(!ra(r)){const{message:s}=$e("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),Ie(this,"isValidAuthenticate",r=>{const{chains:n,uri:s,domain:i,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!Us(s,!1))throw new Error("uri is required parameter");if(!Us(i,!1))throw new Error("domain is required parameter");if(!Us(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>b0(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=b0(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Ie(this,"getVerifyContext",async r=>{const{attestationId:n,hash:s,encryptedId:i,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||z1,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Hn.link_mode){const l=this.getAppLinkIfEnabled(o,a);return c.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:n,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),Ie(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((s,i)=>{if(s==null){const{message:o}=$e("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${s} for key ${Object.keys(r)[i]}`);throw new Error(o)}})}),Ie(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),Ie(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),Ie(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:s}=$e("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(s)}}),Ie(this,"isLinkModeEnabled",(r,n)=>{var s,i,o,a,c,u,l,d,f;return!r||n!==Hn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==""&&((l=r?.redirect)==null?void 0:l.universal)!==void 0&&((d=r?.redirect)==null?void 0:d.universal)!==""&&((f=r?.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Ie(this,"getAppLinkIfEnabled",(r,n)=>{var s;return this.isLinkModeEnabled(r,n)?(s=r?.redirect)==null?void 0:s.universal:void 0}),Ie(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=UK(r,"topic")||"",s=decodeURIComponent(UK(r,"wc_ev")||""),i=this.client.session.keys.includes(n);i&&this.client.session.update(n,{transportType:Hn.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:s,sessionExists:i})}),Ie(this,"registerLinkModeListeners",async()=>{var r;if(b9()||ep()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await n.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),Ie(this,"getTVFParams",(r,n,s)=>{var i,o,a;if(!((i=n.request)!=null&&i.method))return{};const c={correlationId:r,rpcMethods:[n.request.method],chainId:n.chainId};try{const u=this.extractTxHashesFromResult(n.request,s);c.txHashes=u,c.contractAddresses=this.isValidContractData(n.request.params)?[(a=(o=n.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(u){this.client.logger.warn("Error getting TVF params",u)}return c}),Ie(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const s=r?.data||((n=r?.[0])==null?void 0:n.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),Ie(this,"extractTxHashesFromResult",(r,n)=>{var s;try{if(!n)return[];const i=r.method,o=BGe[i];if(i==="sui_signTransaction")return[e$e(n.transactionBytes)];if(i==="near_signTransaction")return[HK(n)];if(i==="near_signTransactions")return n.map(c=>HK(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=n.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[VHe({transaction:r.params.transactionPayload,signature:n.signature})];if(i==="algo_signTxn")return Zd(n)?n.map(c=>zK(c)):[zK(n)];if(i==="cosmos_signDirect")return[r$e(n)];if(typeof n=="string")return[n];const a=n[o.key];if(Zd(a))return i==="solana_signAllTransactions"?a.map(c=>QFe(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,s]of Object.entries(r))for(const i of s)try{await this.onProviderMessageEvent({topic:n,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(_s.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(BI)?this.client.auth.authKeys.get(BI):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:i===Hn.link_mode?uh:ha});zy(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:s,transportType:i,encryptedId:Mc(n)})):W0(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:i}),this.client.core.history.delete(r,a.id)):await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Oc.expired,async e=>{const{topic:r,id:n}=uoe(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,$e("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,$e("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Vp.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Vp.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Us(e,!1)){const{message:r}=$e("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=$e("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Qf(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=$e("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Us(e,!1)){const{message:r}=$e("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=$e("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Qf(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=$e("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=$e("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Us(e,!1)){const{message:r}=$e("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=$e("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!_He(e)){const{message:r}=$e("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=$e("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Qf(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=$e("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class KGe extends ug{constructor(e,r){super(e,r,RGe,O9),this.core=e,this.logger=r}}let ZGe=class extends ug{constructor(e,r){super(e,r,OGe,O9),this.core=e,this.logger=r}};class YGe extends ug{constructor(e,r){super(e,r,UGe,O9,n=>n.id),this.core=e,this.logger=r}}class JGe extends ug{constructor(e,r){super(e,r,LGe,t3,()=>BI),this.core=e,this.logger=r}}class XGe extends ug{constructor(e,r){super(e,r,FGe,t3),this.core=e,this.logger=r}}class QGe extends ug{constructor(e,r){super(e,r,$Ge,t3,n=>n.id),this.core=e,this.logger=r}}var eKe=Object.defineProperty,tKe=(t,e,r)=>e in t?eKe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,OR=(t,e,r)=>tKe(t,typeof e!="symbol"?e+"":e,r);class rKe{constructor(e,r){this.core=e,this.logger=r,OR(this,"authKeys"),OR(this,"pairingTopics"),OR(this,"requests"),this.authKeys=new JGe(this.core,this.logger),this.pairingTopics=new XGe(this.core,this.logger),this.requests=new QGe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var nKe=Object.defineProperty,sKe=(t,e,r)=>e in t?nKe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yr=(t,e,r)=>sKe(t,typeof e!="symbol"?e+"":e,r);let iKe=class _ae extends $je{constructor(e){super(e),yr(this,"protocol",wae),yr(this,"version",vae),yr(this,"name",PR.name),yr(this,"metadata"),yr(this,"core"),yr(this,"logger"),yr(this,"events",new Ys.EventEmitter),yr(this,"engine"),yr(this,"session"),yr(this,"proposal"),yr(this,"pendingRequest"),yr(this,"auth"),yr(this,"signConfig"),yr(this,"on",(n,s)=>this.events.on(n,s)),yr(this,"once",(n,s)=>this.events.once(n,s)),yr(this,"off",(n,s)=>this.events.off(n,s)),yr(this,"removeListener",(n,s)=>this.events.removeListener(n,s)),yr(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),yr(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"update",async n=>{try{return await this.engine.update(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"request",async n=>{try{return await this.engine.request(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"find",n=>{try{return this.engine.find(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),yr(this,"authenticate",async(n,s)=>{try{return await this.engine.authenticate(n,s)}catch(i){throw this.logger.error(i.message),i}}),yr(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),yr(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),this.name=e?.name||PR.name,this.metadata=WLe(e?.metadata),this.signConfig=e?.signConfig;const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:A_(rb({level:e?.logger||PR.logger}));this.core=e?.core||new PGe(e),this.logger=bo(r,this.name),this.session=new ZGe(this.core,this.logger),this.proposal=new KGe(this.core,this.logger),this.pendingRequest=new YGe(this.core,this.logger),this.engine=new GGe(this),this.auth=new rKe(this.core,this.logger)}static async init(e){const r=new _ae(e);return await r.initialize(),r}get context(){return Pa(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const XZ="error",oKe="wss://relay.walletconnect.org",aKe="wc",cKe="universal_provider",ZS=`${aKe}@2:${cKe}:`,Aae="https://rpc.walletconnect.org/v1/",xae="generic",uKe=`${Aae}bundler`,Kc={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function k9(t){return t==null||typeof t!="object"&&typeof t!="function"}function Cae(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Sae(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const lKe="[object RegExp]",Iae="[object String]",Tae="[object Number]",Nae="[object Boolean]",Pae="[object Arguments]",dKe="[object Symbol]",fKe="[object Date]",hKe="[object Map]",pKe="[object Set]",gKe="[object Array]",mKe="[object ArrayBuffer]",yKe="[object Object]",bKe="[object DataView]",wKe="[object Uint8Array]",vKe="[object Uint8ClampedArray]",EKe="[object Uint16Array]",_Ke="[object Uint32Array]",AKe="[object Int8Array]",xKe="[object Int16Array]",CKe="[object Int32Array]",SKe="[object Float32Array]",IKe="[object Float64Array]";function B9(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function TKe(t,e){return zm(t,void 0,t,new Map,e)}function zm(t,e,r,n=new Map,s=void 0){const i=s?.(t,e,r,n);if(i!=null)return i;if(k9(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=zm(t[a],a,r,n,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,zm(c,a,r,n,s));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(zm(a,void 0,r,n,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(B9(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=zm(t[a],a,r,n,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),Gp(o,t,r,n,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),Gp(o,t,r,n,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),Gp(o,t,r,n,s),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Gp(o,t,r,n,s),o}if(typeof t=="object"&&NKe(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),Gp(o,t,r,n,s),o}return t}function Gp(t,e,r=t,n,s){const i=[...Object.keys(e),...Cae(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=zm(e[a],a,r,n,s))}}function NKe(t){switch(Sae(t)){case Pae:case gKe:case mKe:case bKe:case Nae:case fKe:case SKe:case IKe:case AKe:case xKe:case CKe:case hKe:case Tae:case yKe:case lKe:case pKe:case Iae:case dKe:case wKe:case vKe:case EKe:case _Ke:return!0;default:return!1}}function PKe(t,e){return TKe(t,(r,n,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case Tae:case Iae:case Nae:{const o=new t.constructor(t?.valueOf());return Gp(o,t),o}case Pae:{const o={};return Gp(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function QZ(t){return PKe(t)}function eY(t){return t!==null&&typeof t=="object"&&Sae(t)==="[object Arguments]"}function tY(t){return typeof t=="object"&&t!==null}function RKe(){}function OKe(t){return B9(t)}function kKe(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function BKe(t){if(k9(t))return t;if(Array.isArray(t)||B9(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function UKe(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let s=t;for(let i=0;i<r.length;i++){const o=r[i];s=l4(s,o,n,new Map)}return s}function l4(t,e,r,n){if(k9(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return BKe(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...Cae(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(eY(a)&&(a={...a}),eY(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=QZ(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const l=[],d=Reflect.ownKeys(c);for(let f=0;f<d.length;f++){const p=d[f];l[p]=c[p]}c=l}else c=[];const u=r(c,a,o,t,e,n);u!=null?t[o]=u:Array.isArray(a)||tY(c)&&tY(a)?t[o]=l4(c,a,r,n):c==null&&kKe(a)?t[o]=l4({},a,r,n):c==null&&OKe(a)?t[o]=QZ(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function MKe(t,...e){return UKe(t,...e,RKe)}var DKe=Object.defineProperty,jKe=Object.defineProperties,LKe=Object.getOwnPropertyDescriptors,rY=Object.getOwnPropertySymbols,FKe=Object.prototype.hasOwnProperty,$Ke=Object.prototype.propertyIsEnumerable,nY=(t,e,r)=>e in t?DKe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,YS=(t,e)=>{for(var r in e||(e={}))FKe.call(e,r)&&nY(t,r,e[r]);if(rY)for(var r of rY(e))$Ke.call(e,r)&&nY(t,r,e[r]);return t},qKe=(t,e)=>jKe(t,LKe(e));function sc(t,e,r){var n;const s=b0(t);return((n=e.rpcMap)==null?void 0:n[s.reference])||`${Aae}?chainId=${s.namespace}:${s.reference}&projectId=${r}`}function lg(t){return t.includes(":")?t.split(":")[1]:t}function Rae(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function HKe(t,e){const r=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!r.length)return[];const n=[];return r.forEach(s=>{const i=e.namespaces[s].accounts;n.push(...i)}),n}function sY(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>{var n,s;return((n=r?.chains)==null?void 0:n.length)&&((s=r?.chains)==null?void 0:s.length)>0}))}function JS(t={},e={}){const r=sY(iY(t)),n=sY(iY(e));return MKe(r,n)}function iY(t){var e,r,n,s,i;const o={};if(!Nl(t))return o;for(const[a,c]of Object.entries(t)){const u=QT(a)?[a]:c.chains,l=c.methods||[],d=c.events||[],f=c.rpcMap||{},p=Hm(a);o[p]=qKe(YS(YS({},o[p]),c),{chains:Tl(u,(e=o[p])==null?void 0:e.chains),methods:Tl(l,(r=o[p])==null?void 0:r.methods),events:Tl(d,(n=o[p])==null?void 0:n.events)}),(Nl(f)||Nl(((s=o[p])==null?void 0:s.rpcMap)||{}))&&(o[p].rpcMap=YS(YS({},f),(i=o[p])==null?void 0:i.rpcMap))}return o}function oY(t){return t.includes(":")?t.split(":")[2]:t}function aY(t){const e={};for(const[r,n]of Object.entries(t)){const s=n.methods||[],i=n.events||[],o=n.accounts||[],a=QT(r)?[r]:n.chains?n.chains:Rae(n.accounts);e[r]={chains:a,methods:s,events:i,accounts:o}}return e}function kR(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const Oae={},zr=t=>Oae[t],BR=(t,e)=>{Oae[t]=e};var zKe=Object.defineProperty,cY=Object.getOwnPropertySymbols,WKe=Object.prototype.hasOwnProperty,VKe=Object.prototype.propertyIsEnumerable,uY=(t,e,r)=>e in t?zKe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lY=(t,e)=>{for(var r in e||(e={}))WKe.call(e,r)&&uY(t,r,e[r]);if(cY)for(var r of cY(e))VKe.call(e,r)&&uY(t,r,e[r]);return t};const dY="eip155",GKe=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],KKe=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,UR=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,fY=t=>Object.keys(t).filter(e=>GKe.includes(e)).reduce((e,r)=>(e[r]=t[r],e),{}),ZKe=(t,e,r)=>{const{sessionProperties:n={},scopedProperties:s={}}=t,i={};if(!Nl(s)&&!Nl(n))return;const o=fY(n);for(const a of r){const c=KKe(a);if(!c)continue;i[UR(c)]=o;const u=s?.[`${dY}:${c}`];if(u){const l=u?.[`${dY}:${c}:${e}`];i[UR(c)]=lY(lY({},i[UR(c)]),fY(l||u))}}for(const[a,c]of Object.entries(i))Object.keys(c).length===0&&delete i[a];return Object.keys(i).length>0?i:void 0};var YKe=Object.defineProperty,JKe=(t,e,r)=>e in t?YKe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,am=(t,e,r)=>JKe(t,typeof e!="symbol"?e+"":e,r);class XKe{constructor(e){am(this,"name","polkadot"),am(this,"client"),am(this,"httpProviders"),am(this,"events"),am(this,"namespace"),am(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Kc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=lg(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||sc(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fo(new cc(n,zr("disableProviderPing")))}}var QKe=Object.defineProperty,eZe=Object.defineProperties,tZe=Object.getOwnPropertyDescriptors,hY=Object.getOwnPropertySymbols,rZe=Object.prototype.hasOwnProperty,nZe=Object.prototype.propertyIsEnumerable,d4=(t,e,r)=>e in t?QKe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pY=(t,e)=>{for(var r in e||(e={}))rZe.call(e,r)&&d4(t,r,e[r]);if(hY)for(var r of hY(e))nZe.call(e,r)&&d4(t,r,e[r]);return t},gY=(t,e)=>eZe(t,tZe(e)),cm=(t,e,r)=>d4(t,typeof e!="symbol"?e+"":e,r);class sZe{constructor(e){cm(this,"name","eip155"),cm(this,"client"),cm(this,"chainId"),cm(this,"namespace"),cm(this,"httpProviders"),cm(this,"events"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(Kc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||sc(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fo(new cc(n,zr("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=parseInt(lg(r));e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let s=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,s,i,o;const a=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),l=((o=u?.sessionProperties)==null?void 0:o.capabilities)||{},d=`${a}${c.join(",")}`,f=l?.[d];if(f)return f;let p;try{p=ZKe(u,a,c)}catch(h){console.warn("Failed to extract capabilities from session",h)}if(p)return p;const g=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:gY(pY({},u.sessionProperties||{}),{capabilities:gY(pY({},l||{}),{[d]:g})})})}catch(h){console.warn("Failed to update session with capabilities",h)}return g}async getCallStatus(e){var r,n;const s=this.client.session.get(e.topic),i=(r=s.sessionProperties)==null?void 0:r.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(n=s.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ms("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,r){return`${uKe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var iZe=Object.defineProperty,oZe=(t,e,r)=>e in t?iZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,um=(t,e,r)=>oZe(t,typeof e!="symbol"?e+"":e,r);class aZe{constructor(e){um(this,"name","solana"),um(this,"client"),um(this,"httpProviders"),um(this,"events"),um(this,"namespace"),um(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Kc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=lg(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||sc(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fo(new cc(n,zr("disableProviderPing")))}}var cZe=Object.defineProperty,uZe=(t,e,r)=>e in t?cZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lm=(t,e,r)=>uZe(t,typeof e!="symbol"?e+"":e,r);class lZe{constructor(e){lm(this,"name","cosmos"),lm(this,"client"),lm(this,"httpProviders"),lm(this,"events"),lm(this,"namespace"),lm(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Kc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=lg(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||sc(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fo(new cc(n,zr("disableProviderPing")))}}var dZe=Object.defineProperty,fZe=(t,e,r)=>e in t?dZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dm=(t,e,r)=>fZe(t,typeof e!="symbol"?e+"":e,r);class hZe{constructor(e){dm(this,"name","algorand"),dm(this,"client"),dm(this,"httpProviders"),dm(this,"events"),dm(this,"namespace"),dm(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||sc(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(Kc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||sc(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Fo(new cc(n,zr("disableProviderPing")))}}var pZe=Object.defineProperty,gZe=(t,e,r)=>e in t?pZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fm=(t,e,r)=>gZe(t,typeof e!="symbol"?e+"":e,r);class mZe{constructor(e){fm(this,"name","cip34"),fm(this,"client"),fm(this,"httpProviders"),fm(this,"events"),fm(this,"namespace"),fm(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Kc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),s=lg(r);e[s]=this.createHttpProvider(s,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fo(new cc(n,zr("disableProviderPing")))}}var yZe=Object.defineProperty,bZe=(t,e,r)=>e in t?yZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hm=(t,e,r)=>bZe(t,typeof e!="symbol"?e+"":e,r);class wZe{constructor(e){hm(this,"name","elrond"),hm(this,"client"),hm(this,"httpProviders"),hm(this,"events"),hm(this,"namespace"),hm(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Kc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=lg(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||sc(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fo(new cc(n,zr("disableProviderPing")))}}var vZe=Object.defineProperty,EZe=(t,e,r)=>e in t?vZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pm=(t,e,r)=>EZe(t,typeof e!="symbol"?e+"":e,r);class _Ze{constructor(e){pm(this,"name","multiversx"),pm(this,"client"),pm(this,"httpProviders"),pm(this,"events"),pm(this,"namespace"),pm(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Kc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=lg(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||sc(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fo(new cc(n,zr("disableProviderPing")))}}var AZe=Object.defineProperty,xZe=(t,e,r)=>e in t?AZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gm=(t,e,r)=>xZe(t,typeof e!="symbol"?e+"":e,r);class CZe{constructor(e){gm(this,"name","near"),gm(this,"client"),gm(this,"httpProviders"),gm(this,"events"),gm(this,"namespace"),gm(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||sc(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Kc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||sc(e,this.namespace);return typeof n>"u"?void 0:new Fo(new cc(n,zr("disableProviderPing")))}}var SZe=Object.defineProperty,IZe=(t,e,r)=>e in t?SZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mm=(t,e,r)=>IZe(t,typeof e!="symbol"?e+"":e,r);class TZe{constructor(e){mm(this,"name","tezos"),mm(this,"client"),mm(this,"httpProviders"),mm(this,"events"),mm(this,"namespace"),mm(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||sc(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Kc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||sc(e,this.namespace);return typeof n>"u"?void 0:new Fo(new cc(n))}}var NZe=Object.defineProperty,PZe=(t,e,r)=>e in t?NZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ym=(t,e,r)=>PZe(t,typeof e!="symbol"?e+"":e,r);class RZe{constructor(e){ym(this,"name",xae),ym(this,"client"),ym(this,"httpProviders"),ym(this,"events"),ym(this,"namespace"),ym(this,"chainId"),this.namespace=e.namespace,this.events=zr("events"),this.client=zr("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Kc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return b0(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(s=>{const i=b0(s);n[i.reference]=this.createHttpProvider(s)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||sc(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fo(new cc(n,zr("disableProviderPing")))}}var OZe=Object.defineProperty,kZe=Object.defineProperties,BZe=Object.getOwnPropertyDescriptors,mY=Object.getOwnPropertySymbols,UZe=Object.prototype.hasOwnProperty,MZe=Object.prototype.propertyIsEnumerable,f4=(t,e,r)=>e in t?OZe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,XS=(t,e)=>{for(var r in e||(e={}))UZe.call(e,r)&&f4(t,r,e[r]);if(mY)for(var r of mY(e))MZe.call(e,r)&&f4(t,r,e[r]);return t},MR=(t,e)=>kZe(t,BZe(e)),Tc=(t,e,r)=>f4(t,typeof e!="symbol"?e+"":e,r);class r3{constructor(e){Tc(this,"client"),Tc(this,"namespaces"),Tc(this,"optionalNamespaces"),Tc(this,"sessionProperties"),Tc(this,"scopedProperties"),Tc(this,"events",new Ly),Tc(this,"rpcProviders",{}),Tc(this,"session"),Tc(this,"providerOpts"),Tc(this,"logger"),Tc(this,"uri"),Tc(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:A_(rb({level:e?.logger||XZ})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const r=new r3(e);return await r.initialize(),r}async request(e,r,n){const[s,i]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:XS({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,s){const i=new Date().getTime();this.request(e,n,s).then(o=>r(null,Rl(i,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:zn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:s}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const i=await s();if(this.session=i.session,this.session){const o=aY(this.session.namespaces);this.namespaces=JS(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const s=await n();this.session=s;const i=aY(s.namespaces);return this.namespaces=JS(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,s]=this.validateChain(e);this.getProvider(n).setDefaultChain(s,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(!Zd(r))return;for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}catch(r){this.logger.warn("Failed to cleanup pending pairings",r)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await iKe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||XZ,relayUrl:this.providerOpts.relayUrl||oKe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>Hm(r)))];BR("client",this.client),BR("events",this.events),BR("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=HKe(r,this.session);if(n?.length===0)return;const s=Rae(n),i=JS(this.namespaces,this.optionalNamespaces),o=MR(XS({},i[r]),{accounts:n,chains:s});switch(r){case"eip155":this.rpcProviders[r]=new sZe({namespace:o});break;case"algorand":this.rpcProviders[r]=new hZe({namespace:o});break;case"solana":this.rpcProviders[r]=new aZe({namespace:o});break;case"cosmos":this.rpcProviders[r]=new lZe({namespace:o});break;case"polkadot":this.rpcProviders[r]=new XKe({namespace:o});break;case"cip34":this.rpcProviders[r]=new mZe({namespace:o});break;case"elrond":this.rpcProviders[r]=new wZe({namespace:o});break;case"multiversx":this.rpcProviders[r]=new _Ze({namespace:o});break;case"near":this.rpcProviders[r]=new CZe({namespace:o});break;case"tezos":this.rpcProviders[r]=new TZe({namespace:o});break;default:this.rpcProviders[r]=new RZe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:s}=e;if(s!==((r=this.session)==null?void 0:r.topic))return;const{event:i}=n;if(i.name==="accountsChanged"){const o=i.data;o&&Zd(o)&&this.events.emit("accountsChanged",o.map(oY))}else if(i.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=Hm(o),u=kR(o)!==kR(a)?`${c}:${kR(a)}`:o;this.onChainChanged(u)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,s;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:i}=r,o=(s=this.client)==null?void 0:s.session.get(e);this.session=MR(XS({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",MR(XS({},zn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Kc.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[xae]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r={},optionalNamespaces:n={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=JS(r,n),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[r,n]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>Hm(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const s=Hm(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(n,s);const i=this.getProvider(n).getDefaultChain();r?(this.events.emit("chainChanged",s),this.emitAccountsChangedOnChainChange({namespace:n,previousChainId:i,newChainId:e})):this.getProvider(n).setDefaultChain(s),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:r,newChainId:n}){var s,i;try{if(r===n)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(oY);if(!Zd(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,r){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${r}`,s={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const s=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${ZS}/${e}${s}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${ZS}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${ZS}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(ZS)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}}const DZe=r3;let Up=null;const Eu={getSIWX(){return Ce.state.siwx},async initializeIfEnabled(t=ee.getActiveCaipAddress()){const e=Ce.state.siwx;if(!(e&&t))return;const[r,n,s]=t.split(":");if(ee.checkIfSupportedNetwork(r,`${r}:${n}`))try{if(Ce.state.remoteFeatures?.emailCapture){const o=ee.getAccountData(r)?.user;await vr.open({view:"DataCapture",data:{email:o?.email??void 0}});return}if(Up&&await Up,(await e.getSessions(`${r}:${n}`,s)).length)return;await vr.open({view:"SIWXSignMessage"})}catch(i){console.error("SIWXUtil:initializeIfEnabled",i),Or.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await Ge._getClient()?.disconnect().catch(console.error),Lt.reset("Connect"),El.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=Ce.state.siwx,e=gt.getPlainAddress(ee.getActiveCaipAddress()),r=g1(),n=Ge._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!n)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),i=s.toString();qe.getConnectorId(r.chainNamespace)===_e.CONNECTOR_ID.AUTH&&Lt.pushTransactionStack({});const a=await n.signMessage(i);await t.addSession({data:s,message:i,signature:a}),ee.setLastConnectedSIWECaipNetwork(r),vr.close(),Or.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!vr.state.open||Lt.state.view==="ApproveTransaction")&&await vr.open({view:"SIWXSignMessage"}),El.showError("Error signing message"),Or.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){try{const t=this.getSIWX();if(t?.getRequired?.()){const r=ee.getLastConnectedSIWECaipNetwork();if(r){const n=await t?.getSessions(r?.caipNetworkId,gt.getPlainAddress(ee.getActiveCaipAddress())||"");n&&n.length>0?await ee.switchActiveNetwork(r):await Ge.disconnect()}else await Ge.disconnect()}else vr.close();vr.close(),Or.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(t){console.error("SIWXUtil:cancelSignMessage",t)}},async getAllSessions(){const t=this.getSIWX(),e=ee.getAllRequestedCaipNetworks(),r=[];return await Promise.all(e.map(async n=>{const s=await t?.getSessions(n.caipNetworkId,gt.getPlainAddress(ee.getActiveCaipAddress())||"");s&&r.push(...s)})),r},async getSessions(t){const e=Ce.state.siwx;let r=t?.address;if(!r){const s=ee.getActiveCaipAddress();r=gt.getPlainAddress(s)}let n=t?.caipNetworkId;return n||(n=ee.getActiveCaipNetwork()?.caipNetworkId),e&&r&&n?e.getSessions(n,r):[]},async isSIWXCloseDisabled(){const t=this.getSIWX();if(t){const e=Lt.state.view==="ApproveTransaction",r=Lt.state.view==="SIWXSignMessage";if(e||r)return t.getRequired?.()&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:r,preferredAccountType:n,chainNamespace:s}){const i=Eu.getSIWX(),o=g1();if(!i||!s.includes(_e.CHAIN.EVM)||Ce.state.remoteFeatures?.emailCapture){const d=await t.connect({chainId:e,socialUri:r,preferredAccountType:n});return{address:d.address,chainId:d.chainId,accounts:d.accounts}}const a=`${s}:${e}`,c=await i.createMessage({chainId:a,accountAddress:"<<AccountAddress>>"}),u={accountAddress:c.accountAddress,chainId:c.chainId,domain:c.domain,uri:c.uri,version:c.version,nonce:c.nonce,notBefore:c.notBefore,statement:c.statement,resources:c.resources,requestId:c.requestId,issuedAt:c.issuedAt,expirationTime:c.expirationTime,serializedMessage:c.toString()},l=await t.connect({chainId:e,socialUri:r,siwxMessage:u,preferredAccountType:n});return u.accountAddress=l.address,u.serializedMessage=l.message||"",l.signature&&l.message&&await Eu.addEmbeddedWalletSession(u,l.message,l.signature),ee.setLastConnectedSIWECaipNetwork(o),{address:l.address,chainId:l.chainId,accounts:l.accounts}},async addEmbeddedWalletSession(t,e,r){if(Up)return Up;const n=Eu.getSIWX();return n?(Up=n.addSession({data:t,message:e,signature:r}).finally(()=>{Up=null}),Up):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){const n=Eu.getSIWX(),s=g1(),i=new Set(e.map(c=>c.split(":")[0]));if(!n||i.size!==1||!i.has("eip155"))return!1;const o=await n.createMessage({chainId:g1()?.caipNetworkId||"",accountAddress:""}),a=await t.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:r,chains:[o.chainId,...e.filter(c=>c!==o.chainId)]});if(El.showLoading("Authenticating...",{autoClose:!1}),lt.setConnectedWalletInfo({...a.session.peer.metadata,name:a.session.peer.metadata.name,icon:a.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(i)[0]),a?.auths?.length){const c=a.auths.map(u=>{const l=t.client.formatAuthMessage({request:u.p,iss:u.p.iss});return{data:{...u.p,accountAddress:u.p.iss.split(":").slice(-1).join(""),chainId:u.p.iss.split(":").slice(2,4).join(":"),uri:u.p.aud,version:u.p.version||o.version,expirationTime:u.p.exp,issuedAt:u.p.iat,notBefore:u.p.nbf},message:l,signature:u.s.s,cacao:u}});try{await n.setSessions(c),s&&ee.setLastConnectedSIWECaipNetwork(s),Or.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Eu.getSIWXEventProperties()})}catch(u){throw console.error("SIWX:universalProviderAuth - failed to set sessions",u),Or.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Eu.getSIWXEventProperties()}),await t.disconnect().catch(console.error),u}finally{El.hide()}}return!0},getSIWXEventProperties(){const t=ee.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:ee.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:Lu(t)===Zs.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},ec={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",EIP155:_e.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},cE={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[_e.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[_e.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[_e.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[_e.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[_e.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[_e.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[_e.CONNECTOR_ID.INJECTED]:"Browser Wallet",[_e.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[_e.CONNECTOR_ID.COINBASE]:"Coinbase",[_e.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[_e.CONNECTOR_ID.LEDGER]:"Ledger",[_e.CONNECTOR_ID.SAFE]:"Safe"}},ga={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${ec.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return t?.toLowerCase()===e?.toLowerCase()},getActiveNamespaceConnectedToAuth(){const t=ee.state.activeChain;return _e.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>qe.getConnectorId(e)===_e.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:r}){let n=0;return new Promise(s=>{async function i(){return n+=1,await t()?s(!0):n>=r?s(!1):(setTimeout(i,e),null)}i()})}},jZe=new AbortController,io={EmbeddedWalletAbortController:jZe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${$m()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com.`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your systemâ€™s date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`}}},LZe={createLogger(t,e="error"){const r=rb({level:e}),{logger:n}=m9({opts:r});return n.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},n}},FZe="rpc.walletconnect.org";function yY(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const DR=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","eip155:80094","eip155:80069","eip155:560048","eip155:31","eip155:2818","eip155:57054","eip155:911867","eip155:534351","eip155:1112","eip155:534352","eip155:1111","eip155:146","eip155:130","eip155:1284","eip155:30","eip155:2810","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Nm={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===FZe}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:_e.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${_e.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){const n=t.rpcUrls?.default?.http?.[0];return DR.includes(e)?yY(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=t.rpcUrls?.default?.http?.[0],a=this.getDefaultRpcUrl(t,i,r),c=t?.rpcUrls?.chainDefault?.http?.[0]||o,u=n?.[i]?.map(f=>f.url)||[],l=[...u,...a?[a]:[]],d=[...u];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:cE.NetworkImageIds[t.id],imageUrl:e?.[t.id]},rpcUrls:{...t.rpcUrls,default:{http:l},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(s=>Nm.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){const n=[];return r?.forEach(s=>{n.push(dh(s.url,s.config))}),DR.includes(t.caipNetworkId)&&n.push(dh(yY(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),t?.rpcUrls?.default?.http?.forEach(s=>{n.push(dh(s))}),e6(n)},extendWagmiTransports(t,e,r){if(DR.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return e6([r,dh(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:_e.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){const e=Pe.getActiveCaipNetworkId(),r=ee.getAllRequestedCaipNetworks(),n=Array.from(ee.state.chains?.keys()||[]),s=e?.split(":")[0],i=s?n.includes(s):!1,o=r?.find(c=>c.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||r?.[0]}},c5={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0},Qo=jn({providers:{...c5},providerIds:{...c5}}),vn={state:Qo,subscribeKey(t,e){return yo(Qo,t,e)},subscribe(t){return Bi(Qo,()=>{t(Qo)})},subscribeProviders(t){return Bi(Qo.providers,()=>t(Qo.providers))},setProvider(t,e){t&&e&&(Qo.providers[t]=R0(e))},getProvider(t){if(t)return Qo.providers[t]},setProviderId(t,e){e&&(Qo.providerIds[t]=e)},getProviderId(t){if(t)return Qo.providerIds[t]},reset(){Qo.providers={...c5},Qo.providerIds={...c5}},resetChain(t){Qo.providers[t]=void 0,Qo.providerIds[t]=void 0}},bY={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ai={set(t,e){tc.isClient&&localStorage.setItem(`${ut.STORAGE_KEY}${t}`,e)},get(t){return tc.isClient?localStorage.getItem(`${ut.STORAGE_KEY}${t}`):null},delete(t,e){tc.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${ut.STORAGE_KEY}${t}`))}},QS=30*1e3,tc={checkIfAllowedToTriggerEmail(){const t=Ai.get(ut.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<QS){const r=Math.ceil((QS-e)/1e3);throw new Error(`Please try again after ${r} seconds`)}}},getTimeToNextEmailLogin(){const t=Ai.get(ut.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<QS)return Math.ceil((QS-e)/1e3)}return 0},checkIfRequestExists(t){return Zs.NOT_SAFE_RPC_METHODS.includes(t.method)||Zs.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&(t?.match(bY.transactionHash)||t?.match(bY.signedMessage))?ut.RPC_RESPONSE_TYPE_TX:ut.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Zs.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Hr;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Hr||(Hr={}));var h4;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(h4||(h4={}));const et=Hr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),lh=t=>{switch(typeof t){case"undefined":return et.undefined;case"string":return et.string;case"number":return isNaN(t)?et.nan:et.number;case"boolean":return et.boolean;case"function":return et.function;case"bigint":return et.bigint;case"symbol":return et.symbol;case"object":return Array.isArray(t)?et.array:t===null?et.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?et.promise:typeof Map<"u"&&t instanceof Map?et.map:typeof Set<"u"&&t instanceof Set?et.set:typeof Date<"u"&&t instanceof Date?et.date:et.object;default:return et.unknown}},De=Hr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),$Ze=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Bu extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Hr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Bu.create=t=>new Bu(t);const uE=(t,e)=>{let r;switch(t.code){case De.invalid_type:t.received===et.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case De.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Hr.jsonStringifyReplacer)}`;break;case De.unrecognized_keys:r=`Unrecognized key(s) in object: ${Hr.joinValues(t.keys,", ")}`;break;case De.invalid_union:r="Invalid input";break;case De.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Hr.joinValues(t.options)}`;break;case De.invalid_enum_value:r=`Invalid enum value. Expected ${Hr.joinValues(t.options)}, received '${t.received}'`;break;case De.invalid_arguments:r="Invalid function arguments";break;case De.invalid_return_type:r="Invalid function return type";break;case De.invalid_date:r="Invalid date";break;case De.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Hr.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case De.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case De.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case De.custom:r="Invalid input";break;case De.invalid_intersection_types:r="Intersection results could not be merged";break;case De.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case De.not_finite:r="Number must be finite";break;default:r=e.defaultError,Hr.assertNever(t)}return{message:r}};let kae=uE;function qZe(t){kae=t}function u5(){return kae}const l5=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};let a="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},HZe=[];function at(t,e){const r=l5({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,u5(),uE].filter(n=>!!n)});t.common.issues.push(r)}class mo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return Gt;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r)n.push({key:await s.key,value:await s.value});return mo.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Gt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const Gt=Object.freeze({status:"aborted"}),Bae=t=>({status:"dirty",value:t}),Lo=t=>({status:"valid",value:t}),p4=t=>t.status==="aborted",g4=t=>t.status==="dirty",lE=t=>t.status==="valid",d5=t=>typeof Promise<"u"&&t instanceof Promise;var Ut;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Ut||(Ut={}));class Ll{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const wY=(t,e)=>{if(lE(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Bu(t.common.issues);return this._error=r,this._error}}};function Xt(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:s}}class ir{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return lh(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:lh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new mo,ctx:{common:e.parent.common,data:e.data,parsedType:lh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(d5(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lh(e)},i=this._parseSync({data:e,path:s.path,parent:s});return wY(s,i)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lh(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(d5(s)?s:Promise.resolve(s));return wY(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:De.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Fu({schema:this,typeName:qt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Yd.create(this,this._def)}nullable(){return D0.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Uu.create(this,this._def)}promise(){return By.create(this,this._def)}or(e){return pE.create([this,e],this._def)}and(e){return gE.create(this,e,this._def)}transform(e){return new Fu({...Xt(this._def),schema:this,typeName:qt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new vE({...Xt(this._def),innerType:this,defaultValue:r,typeName:qt.ZodDefault})}brand(){return new Mae({typeName:qt.ZodBranded,type:this,...Xt(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new g5({...Xt(this._def),innerType:this,catchValue:r,typeName:qt.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return P_.create(this,e)}readonly(){return y5.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zZe=/^c[^\s-]{8,}$/i,WZe=/^[a-z][a-z0-9]*$/,VZe=/^[0-9A-HJKMNP-TV-Z]{26}$/,GZe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,KZe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ZZe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let jR;const YZe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,JZe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,XZe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function QZe(t,e){return!!((e==="v4"||!e)&&YZe.test(t)||(e==="v6"||!e)&&JZe.test(t))}class Pu extends ir{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==et.string){const i=this._getOrReturnCtx(e);return at(i,{code:De.invalid_type,expected:et.string,received:i.parsedType}),Gt}const n=new mo;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),at(s,{code:De.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),at(s,{code:De.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?at(s,{code:De.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&at(s,{code:De.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")KZe.test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"email",code:De.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")jR||(jR=new RegExp(ZZe,"u")),jR.test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"emoji",code:De.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")GZe.test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"uuid",code:De.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")zZe.test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"cuid",code:De.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")WZe.test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"cuid2",code:De.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")VZe.test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"ulid",code:De.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),at(s,{validation:"url",code:De.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"regex",code:De.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),at(s,{code:De.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),at(s,{code:De.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),at(s,{code:De.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?XZe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),at(s,{code:De.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?QZe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),at(s,{validation:"ip",code:De.invalid_string,message:i.message}),n.dirty()):Hr.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:De.invalid_string,...Ut.errToObj(n)})}_addCheck(e){return new Pu({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ut.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ut.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ut.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ut.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ut.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ut.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ut.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ut.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...Ut.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Ut.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Ut.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Ut.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Ut.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Ut.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Ut.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Ut.errToObj(r)})}nonempty(e){return this.min(1,Ut.errToObj(e))}trim(){return new Pu({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Pu({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Pu({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Pu.create=t=>{var e;return new Pu({checks:[],typeName:qt.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Xt(t)})};function eYe(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Rh extends ir{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==et.number){const i=this._getOrReturnCtx(e);return at(i,{code:De.invalid_type,expected:et.number,received:i.parsedType}),Gt}let n;const s=new mo;for(const i of this._def.checks)i.kind==="int"?Hr.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),at(n,{code:De.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),at(n,{code:De.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),at(n,{code:De.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?eYe(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),at(n,{code:De.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),at(n,{code:De.not_finite,message:i.message}),s.dirty()):Hr.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ut.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ut.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ut.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ut.toString(r))}setLimit(e,r,n,s){return new Rh({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ut.toString(s)}]})}_addCheck(e){return new Rh({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ut.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ut.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ut.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ut.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ut.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ut.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Ut.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ut.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ut.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Hr.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Rh.create=t=>new Rh({checks:[],typeName:qt.ZodNumber,coerce:t?.coerce||!1,...Xt(t)});class Oh extends ir{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==et.bigint){const i=this._getOrReturnCtx(e);return at(i,{code:De.invalid_type,expected:et.bigint,received:i.parsedType}),Gt}let n;const s=new mo;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),at(n,{code:De.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),at(n,{code:De.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),at(n,{code:De.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Hr.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ut.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ut.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ut.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ut.toString(r))}setLimit(e,r,n,s){return new Oh({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ut.toString(s)}]})}_addCheck(e){return new Oh({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ut.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ut.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ut.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ut.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ut.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Oh.create=t=>{var e;return new Oh({checks:[],typeName:qt.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Xt(t)})};class dE extends ir{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==et.boolean){const n=this._getOrReturnCtx(e);return at(n,{code:De.invalid_type,expected:et.boolean,received:n.parsedType}),Gt}return Lo(e.data)}}dE.create=t=>new dE({typeName:qt.ZodBoolean,coerce:t?.coerce||!1,...Xt(t)});class U0 extends ir{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==et.date){const i=this._getOrReturnCtx(e);return at(i,{code:De.invalid_type,expected:et.date,received:i.parsedType}),Gt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return at(i,{code:De.invalid_date}),Gt}const n=new mo;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),at(s,{code:De.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),at(s,{code:De.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Hr.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new U0({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Ut.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Ut.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}U0.create=t=>new U0({checks:[],coerce:t?.coerce||!1,typeName:qt.ZodDate,...Xt(t)});class f5 extends ir{_parse(e){if(this._getType(e)!==et.symbol){const n=this._getOrReturnCtx(e);return at(n,{code:De.invalid_type,expected:et.symbol,received:n.parsedType}),Gt}return Lo(e.data)}}f5.create=t=>new f5({typeName:qt.ZodSymbol,...Xt(t)});class fE extends ir{_parse(e){if(this._getType(e)!==et.undefined){const n=this._getOrReturnCtx(e);return at(n,{code:De.invalid_type,expected:et.undefined,received:n.parsedType}),Gt}return Lo(e.data)}}fE.create=t=>new fE({typeName:qt.ZodUndefined,...Xt(t)});class hE extends ir{_parse(e){if(this._getType(e)!==et.null){const n=this._getOrReturnCtx(e);return at(n,{code:De.invalid_type,expected:et.null,received:n.parsedType}),Gt}return Lo(e.data)}}hE.create=t=>new hE({typeName:qt.ZodNull,...Xt(t)});class ky extends ir{constructor(){super(...arguments),this._any=!0}_parse(e){return Lo(e.data)}}ky.create=t=>new ky({typeName:qt.ZodAny,...Xt(t)});class w0 extends ir{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Lo(e.data)}}w0.create=t=>new w0({typeName:qt.ZodUnknown,...Xt(t)});class nf extends ir{_parse(e){const r=this._getOrReturnCtx(e);return at(r,{code:De.invalid_type,expected:et.never,received:r.parsedType}),Gt}}nf.create=t=>new nf({typeName:qt.ZodNever,...Xt(t)});class h5 extends ir{_parse(e){if(this._getType(e)!==et.undefined){const n=this._getOrReturnCtx(e);return at(n,{code:De.invalid_type,expected:et.void,received:n.parsedType}),Gt}return Lo(e.data)}}h5.create=t=>new h5({typeName:qt.ZodVoid,...Xt(t)});class Uu extends ir{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==et.array)return at(r,{code:De.invalid_type,expected:et.array,received:r.parsedType}),Gt;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(at(r,{code:o?De.too_big:De.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(at(r,{code:De.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(at(r,{code:De.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new Ll(r,o,r.path,a)))).then(o=>mo.mergeArray(n,o));const i=[...r.data].map((o,a)=>s.type._parseSync(new Ll(r,o,r.path,a)));return mo.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new Uu({...this._def,minLength:{value:e,message:Ut.toString(r)}})}max(e,r){return new Uu({...this._def,maxLength:{value:e,message:Ut.toString(r)}})}length(e,r){return new Uu({...this._def,exactLength:{value:e,message:Ut.toString(r)}})}nonempty(e){return this.min(1,e)}}Uu.create=(t,e)=>new Uu({type:t,minLength:null,maxLength:null,exactLength:null,typeName:qt.ZodArray,...Xt(e)});function Pm(t){if(t instanceof rs){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Yd.create(Pm(n))}return new rs({...t._def,shape:()=>e})}else return t instanceof Uu?new Uu({...t._def,type:Pm(t.element)}):t instanceof Yd?Yd.create(Pm(t.unwrap())):t instanceof D0?D0.create(Pm(t.unwrap())):t instanceof Fl?Fl.create(t.items.map(e=>Pm(e))):t}class rs extends ir{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=Hr.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==et.object){const u=this._getOrReturnCtx(e);return at(u,{code:De.invalid_type,expected:et.object,received:u.parsedType}),Gt}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof nf&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=i[u],d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Ll(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof nf){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(at(s,{code:De.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Ll(s,d,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const d=await l.key;u.push({key:d,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>mo.mergeObjectSync(n,u)):mo.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return Ut.errToObj,new rs({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=Ut.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new rs({...this._def,unknownKeys:"strip"})}passthrough(){return new rs({...this._def,unknownKeys:"passthrough"})}extend(e){return new rs({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new rs({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:qt.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new rs({...this._def,catchall:e})}pick(e){const r={};return Hr.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new rs({...this._def,shape:()=>r})}omit(e){const r={};return Hr.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new rs({...this._def,shape:()=>r})}deepPartial(){return Pm(this)}partial(e){const r={};return Hr.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new rs({...this._def,shape:()=>r})}required(e){const r={};return Hr.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Yd;)i=i._def.innerType;r[n]=i}}),new rs({...this._def,shape:()=>r})}keyof(){return Uae(Hr.objectKeys(this.shape))}}rs.create=(t,e)=>new rs({shape:()=>t,unknownKeys:"strip",catchall:nf.create(),typeName:qt.ZodObject,...Xt(e)});rs.strictCreate=(t,e)=>new rs({shape:()=>t,unknownKeys:"strict",catchall:nf.create(),typeName:qt.ZodObject,...Xt(e)});rs.lazycreate=(t,e)=>new rs({shape:t,unknownKeys:"strip",catchall:nf.create(),typeName:qt.ZodObject,...Xt(e)});class pE extends ir{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Bu(a.ctx.common.issues));return at(r,{code:De.invalid_union,unionErrors:o}),Gt}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},l=c._parseSync({data:r.data,path:r.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Bu(c));return at(r,{code:De.invalid_union,unionErrors:a}),Gt}}get options(){return this._def.options}}pE.create=(t,e)=>new pE({options:t,typeName:qt.ZodUnion,...Xt(e)});const UI=t=>t instanceof yE?UI(t.schema):t instanceof Fu?UI(t.innerType()):t instanceof bE?[t.value]:t instanceof kh?t.options:t instanceof wE?Object.keys(t.enum):t instanceof vE?UI(t._def.innerType):t instanceof fE?[void 0]:t instanceof hE?[null]:null;class n3 extends ir{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==et.object)return at(r,{code:De.invalid_type,expected:et.object,received:r.parsedType}),Gt;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(at(r,{code:De.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Gt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const o=UI(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new n3({typeName:qt.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...Xt(n)})}}function m4(t,e){const r=lh(t),n=lh(e);if(t===e)return{valid:!0,data:t};if(r===et.object&&n===et.object){const s=Hr.objectKeys(e),i=Hr.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=m4(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===et.array&&n===et.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=m4(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===et.date&&n===et.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class gE extends ir{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(p4(i)||p4(o))return Gt;const a=m4(i.value,o.value);return a.valid?((g4(i)||g4(o))&&r.dirty(),{status:r.value,value:a.data}):(at(n,{code:De.invalid_intersection_types}),Gt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}gE.create=(t,e,r)=>new gE({left:t,right:e,typeName:qt.ZodIntersection,...Xt(r)});class Fl extends ir{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==et.array)return at(n,{code:De.invalid_type,expected:et.array,received:n.parsedType}),Gt;if(n.data.length<this._def.items.length)return at(n,{code:De.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Gt;!this._def.rest&&n.data.length>this._def.items.length&&(at(n,{code:De.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Ll(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>mo.mergeArray(r,o)):mo.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new Fl({...this._def,rest:e})}}Fl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Fl({items:t,typeName:qt.ZodTuple,rest:null,...Xt(e)})};class mE extends ir{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==et.object)return at(n,{code:De.invalid_type,expected:et.object,received:n.parsedType}),Gt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in n.data)s.push({key:i._parse(new Ll(n,a,n.path,a)),value:o._parse(new Ll(n,n.data[a],n.path,a))});return n.common.async?mo.mergeObjectAsync(r,s):mo.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ir?new mE({keyType:e,valueType:r,typeName:qt.ZodRecord,...Xt(n)}):new mE({keyType:Pu.create(),valueType:e,typeName:qt.ZodRecord,...Xt(r)})}}class p5 extends ir{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==et.map)return at(n,{code:De.invalid_type,expected:et.map,received:n.parsedType}),Gt;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:s._parse(new Ll(n,a,n.path,[u,"key"])),value:i._parse(new Ll(n,c,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return Gt;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return Gt;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}}}}p5.create=(t,e,r)=>new p5({valueType:e,keyType:t,typeName:qt.ZodMap,...Xt(r)});class M0 extends ir{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==et.set)return at(n,{code:De.invalid_type,expected:et.set,received:n.parsedType}),Gt;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(at(n,{code:De.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(at(n,{code:De.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return Gt;l.status==="dirty"&&r.dirty(),u.add(l.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((c,u)=>i._parse(new Ll(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new M0({...this._def,minSize:{value:e,message:Ut.toString(r)}})}max(e,r){return new M0({...this._def,maxSize:{value:e,message:Ut.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}M0.create=(t,e)=>new M0({valueType:t,minSize:null,maxSize:null,typeName:qt.ZodSet,...Xt(e)});class ny extends ir{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==et.function)return at(r,{code:De.invalid_type,expected:et.function,received:r.parsedType}),Gt;function n(a,c){return l5({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,u5(),uE].filter(u=>!!u),issueData:{code:De.invalid_arguments,argumentsError:c}})}function s(a,c){return l5({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,u5(),uE].filter(u=>!!u),issueData:{code:De.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof By){const a=this;return Lo(async function(...c){const u=new Bu([]),l=await a._def.args.parseAsync(c,i).catch(p=>{throw u.addIssue(n(c,p)),u}),d=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(d,i).catch(p=>{throw u.addIssue(s(d,p)),u})})}else{const a=this;return Lo(function(...c){const u=a._def.args.safeParse(c,i);if(!u.success)throw new Bu([n(c,u.error)]);const l=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(l,i);if(!d.success)throw new Bu([s(l,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ny({...this._def,args:Fl.create(e).rest(w0.create())})}returns(e){return new ny({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new ny({args:e||Fl.create([]).rest(w0.create()),returns:r||w0.create(),typeName:qt.ZodFunction,...Xt(n)})}}class yE extends ir{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}yE.create=(t,e)=>new yE({getter:t,typeName:qt.ZodLazy,...Xt(e)});class bE extends ir{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return at(r,{received:r.data,code:De.invalid_literal,expected:this._def.value}),Gt}return{status:"valid",value:e.data}}get value(){return this._def.value}}bE.create=(t,e)=>new bE({value:t,typeName:qt.ZodLiteral,...Xt(e)});function Uae(t,e){return new kh({values:t,typeName:qt.ZodEnum,...Xt(e)})}class kh extends ir{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return at(r,{expected:Hr.joinValues(n),received:r.parsedType,code:De.invalid_type}),Gt}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return at(r,{received:r.data,code:De.invalid_enum_value,options:n}),Gt}return Lo(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return kh.create(e)}exclude(e){return kh.create(this.options.filter(r=>!e.includes(r)))}}kh.create=Uae;class wE extends ir{_parse(e){const r=Hr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==et.string&&n.parsedType!==et.number){const s=Hr.objectValues(r);return at(n,{expected:Hr.joinValues(s),received:n.parsedType,code:De.invalid_type}),Gt}if(r.indexOf(e.data)===-1){const s=Hr.objectValues(r);return at(n,{received:n.data,code:De.invalid_enum_value,options:s}),Gt}return Lo(e.data)}get enum(){return this._def.values}}wE.create=(t,e)=>new wE({values:t,typeName:qt.ZodNativeEnum,...Xt(e)});class By extends ir{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==et.promise&&r.common.async===!1)return at(r,{code:De.invalid_type,expected:et.promise,received:r.parsedType}),Gt;const n=r.parsedType===et.promise?r.data:Promise.resolve(r.data);return Lo(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}By.create=(t,e)=>new By({type:t,typeName:qt.ZodPromise,...Xt(e)});class Fu extends ir{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===qt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{at(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Gt:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Gt:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!lE(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>lE(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):o);Hr.assertNever(s)}}Fu.create=(t,e,r)=>new Fu({schema:t,typeName:qt.ZodEffects,effect:e,...Xt(r)});Fu.createWithPreprocess=(t,e,r)=>new Fu({schema:e,effect:{type:"preprocess",transform:t},typeName:qt.ZodEffects,...Xt(r)});class Yd extends ir{_parse(e){return this._getType(e)===et.undefined?Lo(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Yd.create=(t,e)=>new Yd({innerType:t,typeName:qt.ZodOptional,...Xt(e)});class D0 extends ir{_parse(e){return this._getType(e)===et.null?Lo(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}D0.create=(t,e)=>new D0({innerType:t,typeName:qt.ZodNullable,...Xt(e)});class vE extends ir{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===et.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}vE.create=(t,e)=>new vE({innerType:t,typeName:qt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Xt(e)});class g5 extends ir{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return d5(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Bu(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Bu(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}g5.create=(t,e)=>new g5({innerType:t,typeName:qt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Xt(e)});class m5 extends ir{_parse(e){if(this._getType(e)!==et.nan){const n=this._getOrReturnCtx(e);return at(n,{code:De.invalid_type,expected:et.nan,received:n.parsedType}),Gt}return{status:"valid",value:e.data}}}m5.create=t=>new m5({typeName:qt.ZodNaN,...Xt(t)});const tYe=Symbol("zod_brand");class Mae extends ir{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class P_ extends ir{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Gt:i.status==="dirty"?(r.dirty(),Bae(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Gt:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new P_({in:e,out:r,typeName:qt.ZodPipeline})}}class y5 extends ir{_parse(e){const r=this._def.innerType._parse(e);return lE(r)&&(r.value=Object.freeze(r.value)),r}}y5.create=(t,e)=>new y5({innerType:t,typeName:qt.ZodReadonly,...Xt(e)});const Dae=(t,e={},r)=>t?ky.create().superRefine((n,s)=>{var i,o;if(!t(n)){const a=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:r)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...u,fatal:c})}}):ky.create(),rYe={object:rs.lazycreate};var qt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(qt||(qt={}));const nYe=(t,e={message:`Input not instance of ${t.name}`})=>Dae(r=>r instanceof t,e),jae=Pu.create,Lae=Rh.create,sYe=m5.create,iYe=Oh.create,Fae=dE.create,oYe=U0.create,aYe=f5.create,cYe=fE.create,uYe=hE.create,lYe=ky.create,dYe=w0.create,fYe=nf.create,hYe=h5.create,pYe=Uu.create,gYe=rs.create,mYe=rs.strictCreate,yYe=pE.create,bYe=n3.create,wYe=gE.create,vYe=Fl.create,EYe=mE.create,_Ye=p5.create,AYe=M0.create,xYe=ny.create,CYe=yE.create,SYe=bE.create,IYe=kh.create,TYe=wE.create,NYe=By.create,vY=Fu.create,PYe=Yd.create,RYe=D0.create,OYe=Fu.createWithPreprocess,kYe=P_.create,BYe=()=>jae().optional(),UYe=()=>Lae().optional(),MYe=()=>Fae().optional(),DYe={string:(t=>Pu.create({...t,coerce:!0})),number:(t=>Rh.create({...t,coerce:!0})),boolean:(t=>dE.create({...t,coerce:!0})),bigint:(t=>Oh.create({...t,coerce:!0})),date:(t=>U0.create({...t,coerce:!0}))},jYe=Gt;var Y=Object.freeze({__proto__:null,defaultErrorMap:uE,setErrorMap:qZe,getErrorMap:u5,makeIssue:l5,EMPTY_PATH:HZe,addIssueToContext:at,ParseStatus:mo,INVALID:Gt,DIRTY:Bae,OK:Lo,isAborted:p4,isDirty:g4,isValid:lE,isAsync:d5,get util(){return Hr},get objectUtil(){return h4},ZodParsedType:et,getParsedType:lh,ZodType:ir,ZodString:Pu,ZodNumber:Rh,ZodBigInt:Oh,ZodBoolean:dE,ZodDate:U0,ZodSymbol:f5,ZodUndefined:fE,ZodNull:hE,ZodAny:ky,ZodUnknown:w0,ZodNever:nf,ZodVoid:h5,ZodArray:Uu,ZodObject:rs,ZodUnion:pE,ZodDiscriminatedUnion:n3,ZodIntersection:gE,ZodTuple:Fl,ZodRecord:mE,ZodMap:p5,ZodSet:M0,ZodFunction:ny,ZodLazy:yE,ZodLiteral:bE,ZodEnum:kh,ZodNativeEnum:wE,ZodPromise:By,ZodEffects:Fu,ZodTransformer:Fu,ZodOptional:Yd,ZodNullable:D0,ZodDefault:vE,ZodCatch:g5,ZodNaN:m5,BRAND:tYe,ZodBranded:Mae,ZodPipeline:P_,ZodReadonly:y5,custom:Dae,Schema:ir,ZodSchema:ir,late:rYe,get ZodFirstPartyTypeKind(){return qt},coerce:DYe,any:lYe,array:pYe,bigint:iYe,boolean:Fae,date:oYe,discriminatedUnion:bYe,effect:vY,enum:IYe,function:xYe,instanceof:nYe,intersection:wYe,lazy:CYe,literal:SYe,map:_Ye,nan:sYe,nativeEnum:TYe,never:fYe,null:uYe,nullable:RYe,number:Lae,object:gYe,oboolean:MYe,onumber:UYe,optional:PYe,ostring:BYe,pipeline:kYe,preprocess:OYe,promise:NYe,record:EYe,set:AYe,strictObject:mYe,string:jae,symbol:aYe,transformer:vY,tuple:vYe,undefined:cYe,union:yYe,unknown:dYe,void:hYe,NEVER:jYe,ZodIssueCode:De,quotelessJson:$Ze,ZodError:Bu});const us=Y.object({message:Y.string()});function st(t){return Y.literal(ut[t])}const s3=Y.object({serializedMessage:Y.string().optional(),accountAddress:Y.string(),chainId:Y.string(),notBefore:Y.string().optional(),domain:Y.string(),uri:Y.string(),version:Y.string(),nonce:Y.string(),statement:Y.string().optional(),resources:Y.array(Y.string()).optional(),requestId:Y.string().optional(),issuedAt:Y.string().optional(),expirationTime:Y.string().optional()});Y.object({accessList:Y.array(Y.string()),blockHash:Y.string().nullable(),blockNumber:Y.string().nullable(),chainId:Y.string().or(Y.number()),from:Y.string(),gas:Y.string(),hash:Y.string(),input:Y.string().nullable(),maxFeePerGas:Y.string(),maxPriorityFeePerGas:Y.string(),nonce:Y.string(),r:Y.string(),s:Y.string(),to:Y.string(),transactionIndex:Y.string().nullable(),type:Y.string(),v:Y.string(),value:Y.string()});const LYe=Y.object({chainId:Y.string().or(Y.number()),rpcUrl:Y.optional(Y.string())}),FYe=Y.object({email:Y.string().email()}),$Ye=Y.object({otp:Y.string()}),qYe=Y.object({uri:Y.string(),preferredAccountType:Y.optional(Y.string()),chainId:Y.optional(Y.string().or(Y.number())),siwxMessage:Y.optional(s3),rpcUrl:Y.optional(Y.string())}),HYe=Y.object({chainId:Y.optional(Y.string().or(Y.number())),preferredAccountType:Y.optional(Y.string()),socialUri:Y.optional(Y.string()),siwxMessage:Y.optional(s3),rpcUrl:Y.optional(Y.string())}),zYe=Y.object({provider:Y.enum(["google","github","apple","facebook","x","discord"])}),WYe=Y.object({email:Y.string().email()}),VYe=Y.object({otp:Y.string()}),GYe=Y.object({otp:Y.string()}),KYe=Y.object({themeMode:Y.optional(Y.enum(["light","dark"])),themeVariables:Y.optional(Y.record(Y.string(),Y.string().or(Y.number()))),w3mThemeVariables:Y.optional(Y.record(Y.string(),Y.string()))}),ZYe=Y.object({metadata:Y.object({name:Y.string(),description:Y.string(),url:Y.string(),icons:Y.array(Y.string())}).optional(),sdkVersion:Y.string().optional(),sdkType:Y.string().optional(),projectId:Y.string()}),YYe=Y.object({type:Y.string()}),JYe=Y.object({action:Y.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),XYe=Y.object({url:Y.string()}),QYe=Y.object({userName:Y.string()}),eJe=Y.object({email:Y.string().optional().nullable(),address:Y.string(),chainId:Y.string().or(Y.number()),accounts:Y.array(Y.object({address:Y.string(),type:Y.enum([Zs.ACCOUNT_TYPES.EOA,Zs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:Y.string().optional().nullable(),preferredAccountType:Y.optional(Y.string()),signature:Y.string().optional(),message:Y.string().optional(),siwxMessage:Y.optional(s3)}),tJe=Y.object({action:Y.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),rJe=Y.object({email:Y.string().email().optional().nullable(),address:Y.string(),chainId:Y.string().or(Y.number()),smartAccountDeployed:Y.optional(Y.boolean()),accounts:Y.array(Y.object({address:Y.string(),type:Y.enum([Zs.ACCOUNT_TYPES.EOA,Zs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:Y.optional(Y.string()),signature:Y.string().optional(),message:Y.string().optional(),siwxMessage:Y.optional(s3)}),nJe=Y.object({uri:Y.string()}),sJe=Y.object({isConnected:Y.boolean()}),iJe=Y.object({chainId:Y.string().or(Y.number())}),oJe=Y.object({chainId:Y.string().or(Y.number())}),aJe=Y.object({newEmail:Y.string().email()}),cJe=Y.object({smartAccountEnabledNetworks:Y.array(Y.number())});Y.object({address:Y.string(),isDeployed:Y.boolean()});const uJe=Y.object({version:Y.string().optional()}),lJe=Y.object({type:Y.string(),address:Y.string()}),dJe=Y.any(),fJe=Y.object({method:Y.literal("eth_accounts")}),hJe=Y.object({method:Y.literal("eth_blockNumber")}),pJe=Y.object({method:Y.literal("eth_call"),params:Y.array(Y.any())}),gJe=Y.object({method:Y.literal("eth_chainId")}),mJe=Y.object({method:Y.literal("eth_estimateGas"),params:Y.array(Y.any())}),yJe=Y.object({method:Y.literal("eth_feeHistory"),params:Y.array(Y.any())}),bJe=Y.object({method:Y.literal("eth_gasPrice")}),wJe=Y.object({method:Y.literal("eth_getAccount"),params:Y.array(Y.any())}),vJe=Y.object({method:Y.literal("eth_getBalance"),params:Y.array(Y.any())}),EJe=Y.object({method:Y.literal("eth_getBlockByHash"),params:Y.array(Y.any())}),_Je=Y.object({method:Y.literal("eth_getBlockByNumber"),params:Y.array(Y.any())}),AJe=Y.object({method:Y.literal("eth_getBlockReceipts"),params:Y.array(Y.any())}),xJe=Y.object({method:Y.literal("eth_getBlockTransactionCountByHash"),params:Y.array(Y.any())}),CJe=Y.object({method:Y.literal("eth_getBlockTransactionCountByNumber"),params:Y.array(Y.any())}),SJe=Y.object({method:Y.literal("eth_getCode"),params:Y.array(Y.any())}),IJe=Y.object({method:Y.literal("eth_getFilterChanges"),params:Y.array(Y.any())}),TJe=Y.object({method:Y.literal("eth_getFilterLogs"),params:Y.array(Y.any())}),NJe=Y.object({method:Y.literal("eth_getLogs"),params:Y.array(Y.any())}),PJe=Y.object({method:Y.literal("eth_getProof"),params:Y.array(Y.any())}),RJe=Y.object({method:Y.literal("eth_getStorageAt"),params:Y.array(Y.any())}),OJe=Y.object({method:Y.literal("eth_getTransactionByBlockHashAndIndex"),params:Y.array(Y.any())}),kJe=Y.object({method:Y.literal("eth_getTransactionByBlockNumberAndIndex"),params:Y.array(Y.any())}),BJe=Y.object({method:Y.literal("eth_getTransactionByHash"),params:Y.array(Y.any())}),UJe=Y.object({method:Y.literal("eth_getTransactionCount"),params:Y.array(Y.any())}),MJe=Y.object({method:Y.literal("eth_getTransactionReceipt"),params:Y.array(Y.any())}),DJe=Y.object({method:Y.literal("eth_getUncleCountByBlockHash"),params:Y.array(Y.any())}),jJe=Y.object({method:Y.literal("eth_getUncleCountByBlockNumber"),params:Y.array(Y.any())}),LJe=Y.object({method:Y.literal("eth_maxPriorityFeePerGas")}),FJe=Y.object({method:Y.literal("eth_newBlockFilter")}),$Je=Y.object({method:Y.literal("eth_newFilter"),params:Y.array(Y.any())}),qJe=Y.object({method:Y.literal("eth_newPendingTransactionFilter")}),HJe=Y.object({method:Y.literal("eth_sendRawTransaction"),params:Y.array(Y.any())}),zJe=Y.object({method:Y.literal("eth_syncing"),params:Y.array(Y.any())}),WJe=Y.object({method:Y.literal("eth_uninstallFilter"),params:Y.array(Y.any())}),EY=Y.object({method:Y.literal("personal_sign"),params:Y.array(Y.any())}),VJe=Y.object({method:Y.literal("eth_signTypedData_v4"),params:Y.array(Y.any())}),GJe=Y.object({method:Y.literal("eth_sendTransaction"),params:Y.array(Y.any())}),KJe=Y.object({method:Y.literal("solana_signMessage"),params:Y.object({message:Y.string(),pubkey:Y.string()})}),ZJe=Y.object({method:Y.literal("solana_signTransaction"),params:Y.object({transaction:Y.string()})}),YJe=Y.object({method:Y.literal("solana_signAllTransactions"),params:Y.object({transactions:Y.array(Y.string())})}),JJe=Y.object({method:Y.literal("solana_signAndSendTransaction"),params:Y.object({transaction:Y.string(),options:Y.object({skipPreflight:Y.boolean().optional(),preflightCommitment:Y.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:Y.number().optional(),minContextSlot:Y.number().optional()}).optional()})}),XJe=Y.object({method:Y.literal("wallet_sendCalls"),params:Y.array(Y.object({chainId:Y.string().or(Y.number()).optional(),from:Y.string().optional(),version:Y.string().optional(),capabilities:Y.any().optional(),calls:Y.array(Y.object({to:Y.string().startsWith("0x"),data:Y.string().startsWith("0x").optional(),value:Y.string().optional()}))}))}),QJe=Y.object({method:Y.literal("wallet_getCallsStatus"),params:Y.array(Y.string())}),eXe=Y.object({method:Y.literal("wallet_getCapabilities"),params:Y.array(Y.string().or(Y.number()).optional()).optional()}),tXe=Y.object({method:Y.literal("wallet_grantPermissions"),params:Y.array(Y.any())}),rXe=Y.object({method:Y.literal("wallet_revokePermissions"),params:Y.any()}),nXe=Y.object({method:Y.literal("wallet_getAssets"),params:Y.any()}),_Y=Y.object({token:Y.string()}),it=Y.object({id:Y.string().optional()}),LR={appEvent:it.extend({type:st("APP_SWITCH_NETWORK"),payload:LYe}).or(it.extend({type:st("APP_CONNECT_EMAIL"),payload:FYe})).or(it.extend({type:st("APP_CONNECT_DEVICE")})).or(it.extend({type:st("APP_CONNECT_OTP"),payload:$Ye})).or(it.extend({type:st("APP_CONNECT_SOCIAL"),payload:qYe})).or(it.extend({type:st("APP_GET_FARCASTER_URI")})).or(it.extend({type:st("APP_CONNECT_FARCASTER")})).or(it.extend({type:st("APP_GET_USER"),payload:Y.optional(HYe)})).or(it.extend({type:st("APP_GET_SOCIAL_REDIRECT_URI"),payload:zYe})).or(it.extend({type:st("APP_SIGN_OUT")})).or(it.extend({type:st("APP_IS_CONNECTED"),payload:Y.optional(_Y)})).or(it.extend({type:st("APP_GET_CHAIN_ID")})).or(it.extend({type:st("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(it.extend({type:st("APP_INIT_SMART_ACCOUNT")})).or(it.extend({type:st("APP_SET_PREFERRED_ACCOUNT"),payload:YYe})).or(it.extend({type:st("APP_RPC_REQUEST"),payload:EY.or(nXe).or(fJe).or(hJe).or(pJe).or(gJe).or(mJe).or(yJe).or(bJe).or(wJe).or(vJe).or(EJe).or(_Je).or(AJe).or(xJe).or(CJe).or(SJe).or(IJe).or(TJe).or(NJe).or(PJe).or(RJe).or(OJe).or(kJe).or(BJe).or(UJe).or(MJe).or(DJe).or(jJe).or(LJe).or(FJe).or($Je).or(qJe).or(HJe).or(zJe).or(WJe).or(EY).or(VJe).or(GJe).or(KJe).or(ZJe).or(YJe).or(JJe).or(QJe).or(XJe).or(eXe).or(tXe).or(rXe).and(Y.object({chainId:Y.string().or(Y.number()).optional(),chainNamespace:Y.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:Y.string().optional()}))})).or(it.extend({type:st("APP_UPDATE_EMAIL"),payload:WYe})).or(it.extend({type:st("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:VYe})).or(it.extend({type:st("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:GYe})).or(it.extend({type:st("APP_SYNC_THEME"),payload:KYe})).or(it.extend({type:st("APP_SYNC_DAPP_DATA"),payload:ZYe})).or(it.extend({type:st("APP_RELOAD")})).or(it.extend({type:st("APP_RPC_ABORT")})),frameEvent:it.extend({type:st("FRAME_SWITCH_NETWORK_ERROR"),payload:us}).or(it.extend({type:st("FRAME_SWITCH_NETWORK_SUCCESS"),payload:oJe})).or(it.extend({type:st("FRAME_CONNECT_EMAIL_SUCCESS"),payload:JYe})).or(it.extend({type:st("FRAME_CONNECT_EMAIL_ERROR"),payload:us})).or(it.extend({type:st("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:XYe})).or(it.extend({type:st("FRAME_GET_FARCASTER_URI_ERROR"),payload:us})).or(it.extend({type:st("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:QYe})).or(it.extend({type:st("FRAME_CONNECT_FARCASTER_ERROR"),payload:us})).or(it.extend({type:st("FRAME_CONNECT_OTP_ERROR"),payload:us})).or(it.extend({type:st("FRAME_CONNECT_OTP_SUCCESS")})).or(it.extend({type:st("FRAME_CONNECT_DEVICE_ERROR"),payload:us})).or(it.extend({type:st("FRAME_CONNECT_DEVICE_SUCCESS")})).or(it.extend({type:st("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:eJe})).or(it.extend({type:st("FRAME_CONNECT_SOCIAL_ERROR"),payload:us})).or(it.extend({type:st("FRAME_GET_USER_ERROR"),payload:us})).or(it.extend({type:st("FRAME_GET_USER_SUCCESS"),payload:rJe})).or(it.extend({type:st("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:us})).or(it.extend({type:st("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:nJe})).or(it.extend({type:st("FRAME_SIGN_OUT_ERROR"),payload:us})).or(it.extend({type:st("FRAME_SIGN_OUT_SUCCESS")})).or(it.extend({type:st("FRAME_IS_CONNECTED_ERROR"),payload:us})).or(it.extend({type:st("FRAME_IS_CONNECTED_SUCCESS"),payload:sJe})).or(it.extend({type:st("FRAME_GET_CHAIN_ID_ERROR"),payload:us})).or(it.extend({type:st("FRAME_GET_CHAIN_ID_SUCCESS"),payload:iJe})).or(it.extend({type:st("FRAME_RPC_REQUEST_ERROR"),payload:us})).or(it.extend({type:st("FRAME_RPC_REQUEST_SUCCESS"),payload:dJe})).or(it.extend({type:st("FRAME_SESSION_UPDATE"),payload:_Y})).or(it.extend({type:st("FRAME_UPDATE_EMAIL_ERROR"),payload:us})).or(it.extend({type:st("FRAME_UPDATE_EMAIL_SUCCESS"),payload:tJe})).or(it.extend({type:st("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:us})).or(it.extend({type:st("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(it.extend({type:st("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:us})).or(it.extend({type:st("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:aJe})).or(it.extend({type:st("FRAME_SYNC_THEME_ERROR"),payload:us})).or(it.extend({type:st("FRAME_SYNC_THEME_SUCCESS")})).or(it.extend({type:st("FRAME_SYNC_DAPP_DATA_ERROR"),payload:us})).or(it.extend({type:st("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(it.extend({type:st("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:cJe})).or(it.extend({type:st("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:us})).or(it.extend({type:st("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:us})).or(it.extend({type:st("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:lJe})).or(it.extend({type:st("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:us})).or(it.extend({type:st("FRAME_READY"),payload:uJe})).or(it.extend({type:st("FRAME_RELOAD_ERROR"),payload:us})).or(it.extend({type:st("FRAME_RELOAD_SUCCESS")}))};function FR(t,e={}){return typeof e?.type=="string"&&e?.type?.includes(t)}function sXe({projectId:t,chainId:e,enableLogger:r,rpcUrl:n=_e.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){const i=new URL(RDe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",kDe),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",n),s&&i.searchParams.set("enableCloudAuthAccount","true"),i.toString()}class iXe{constructor({projectId:e,isAppClient:r=!1,chainId:n="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:i=!1,rpcUrl:o=_e.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const a=document.getElementById("w3m-iframe");this.iframe&&!a&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(a,c,u)=>{function l({data:d}){if(!FR(ut.FRAME_EVENT_KEY,d))return;const f=LR.frameEvent.safeParse(d);if(!f.success){console.warn("W3mFrame: invalid frame event",f.error.message);return}f.data?.id===a&&(c(f.data),window.removeEventListener("message",l))}tc.isClient&&(window.addEventListener("message",l),u.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:a=>{tc.isClient&&window.addEventListener("message",({data:c})=>{if(!FR(ut.FRAME_EVENT_KEY,c))return;const u=LR.frameEvent.safeParse(c);u.success?a(u.data):console.warn("W3mFrame: invalid frame event",u.error.message)})},onAppEvent:a=>{tc.isClient&&window.addEventListener("message",({data:c})=>{if(!FR(ut.APP_EVENT_KEY,c))return;const u=LR.appEvent.safeParse(c);u.success||console.warn("W3mFrame: invalid app event",u.error.message),a(c)})},postAppEvent:a=>{if(tc.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(a,"*")}},postFrameEvent:a=>{if(tc.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(a,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),this.rpcUrl=o,r&&(this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),tc.isClient)){const a=document.createElement("iframe");a.id="w3m-iframe",a.src=sXe({projectId:e,chainId:n,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:i}),a.name="w3m-secure-iframe",a.style.position="fixed",a.style.zIndex="999999",a.style.display="none",a.style.border="none",a.style.animationDelay="0s, 50ms",a.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",a.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=a,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent(c=>{c.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,this.frameLoadPromiseResolver?.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(r=>({[r]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${r}&projectId=${this.projectId}`,chainId:r}}));return Object.assign({},...e)}}class oXe{constructor(e){const r=rb({level:ODe}),{logger:n,chunkLoggerController:s}=m9({opts:r});this.logger=bo(n,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class aXe{constructor({projectId:e,chainId:r,enableLogger:n=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:c}){this.openRpcRequests=[],this.isInitialized=!1,n&&(this.w3mLogger=new oXe(e)),this.abortController=i,this.getActiveCaipNetwork=o,this.getCaipNetworks=a;const u=this.getRpcUrl(r);this.w3mFrame=new iXe({projectId:e,isAppClient:!0,chainId:r,enableLogger:n,rpcUrl:u,enableCloudAuthAccount:c}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(r=>{r.type===ut.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ai.get(ut.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ai.get(ut.EMAIL)}getUsername(){return Ai.get(ut.SOCIAL_USERNAME)}async reload(){try{await this.appEvent({type:ut.APP_RELOAD})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error reloading iframe"),e}}async connectEmail(e){try{tc.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:ut.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){try{return this.appEvent({type:ut.APP_CONNECT_DEVICE})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting device"),e}}async connectOtp(e){try{return this.appEvent({type:ut.APP_CONNECT_OTP,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};const e=await this.appEvent({type:ut.APP_IS_CONNECTED});return e?.isConnected||this.deleteAuthLoginCache(),e}catch(e){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:e},"Error checking connection"),e}}async getChainId(){try{const e=await this.appEvent({type:ut.APP_GET_CHAIN_ID});return this.setLastUsedChainId(e.chainId),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting chain id"),e}}async getSocialRedirectUri(e){try{return await this.init(),this.appEvent({type:ut.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){try{const r=await this.appEvent({type:ut.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){try{return this.appEvent({type:ut.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){try{const r=await this.appEvent({type:ut.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){try{return this.appEvent({type:ut.APP_SYNC_THEME,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){try{return this.appEvent({type:ut.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){try{const e=await this.appEvent({type:ut.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(e.smartAccountEnabledNetworks),e}catch(e){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:e},"Error getting smart account enabled networks"),e}}async setPreferredAccount(e){try{return this.appEvent({type:ut.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){if(e?.socialUri)try{await this.init();const r=this.getRpcUrl(e.chainId),n=await this.appEvent({type:ut.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:r}});return n.userName&&this.setSocialLoginSuccess(n.userName),this.setLoginSuccess(n.email),this.setLastUsedChainId(n.chainId),this.user=n,n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting social"),r}else try{const r=e?.chainId||this.getLastUsedChainId()||1,n=await this.getUser({chainId:r,preferredAccountType:e?.preferredAccountType,siwxMessage:e?.siwxMessage,rpcUrl:this.getRpcUrl(r)});return this.setLoginSuccess(n.email),this.setLastUsedChainId(n.chainId),this.user=n,n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting"),r}}async getUser(e){try{await this.init();const r=e?.chainId||this.getLastUsedChainId()||1,n=await this.appEvent({type:ut.APP_GET_USER,payload:{...e,chainId:r,rpcUrl:this.getRpcUrl(r)}});return this.user=n,n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:r,preferredAccountType:n}){try{await this.init();const s=this.getRpcUrl(r),i=await this.appEvent({type:ut.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:r,rpcUrl:s,preferredAccountType:n}});return i.userName&&this.setSocialLoginSuccess(i.userName),i}catch(s){throw this.w3mLogger?.logger.error({error:s},"Error connecting social"),s}}async getFarcasterUri(){try{return await this.init(),await this.appEvent({type:ut.APP_GET_FARCASTER_URI})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting farcaster uri"),e}}async connectFarcaster(){try{const e=await this.appEvent({type:ut.APP_CONNECT_FARCASTER});return e.userName&&this.setSocialLoginSuccess(e.userName),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting farcaster"),e}}async switchNetwork({chainId:e}){try{const r=this.getRpcUrl(e),n=await this.appEvent({type:ut.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(n.chainId),n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error switching network"),r}}async disconnect(){try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const n=setTimeout(()=>{r()},3e3);await this.appEvent({type:ut.APP_SIGN_OUT}),clearTimeout(n),r()})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error disconnecting"),e}}async request(e){const r=e;try{if(Zs.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const n=e.chainNamespace||"eip155",s=this.getActiveCaipNetwork(n)?.id;r.chainNamespace=n,r.chainId=s,r.rpcUrl=this.getRpcUrl(s),this.rpcRequestHandler?.(e);const i=await this.appEvent({type:ut.APP_RPC_REQUEST,payload:r});return this.rpcSuccessHandler?.(i,r),i}catch(n){throw this.rpcErrorHandler?.(n,r),this.w3mLogger?.logger.error({error:n},"Error requesting"),n}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ut.FRAME_IS_CONNECTED_SUCCESS&&r.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ut.FRAME_IS_CONNECTED_ERROR&&e(),r.type===ut.FRAME_IS_CONNECTED_SUCCESS&&!r.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ut.FRAME_GET_USER_SUCCESS&&e(r.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ut.FRAME_CONNECT_SOCIAL_SUCCESS&&e(r.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ut.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(r.payload):r.type===ut.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Zs.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){try{await Promise.all(this.openRpcRequests.map(async({abortController:e,method:r})=>{Zs.SAFE_RPC_METHODS.includes(r)||e.abort(),await this.appEvent({type:ut.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(e){this.w3mLogger?.logger.error({error:e},"Error aborting RPC request")}}async appEvent(e){let r,n;function s(c){return c.replace("@w3m-app/","")}const i=[ut.APP_SYNC_DAPP_DATA,ut.APP_SYNC_THEME,ut.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(n=setTimeout(()=>{this.onTimeout?.("iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(n),[ut.APP_CONNECT_EMAIL,ut.APP_CONNECT_DEVICE,ut.APP_CONNECT_OTP,ut.APP_CONNECT_SOCIAL,ut.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(r=setTimeout(()=>{this.onTimeout?.("iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,u)=>{const l=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:e,id:l},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:l});const d=new AbortController;if(o==="RPC_REQUEST"){const p=e;this.openRpcRequests=[...this.openRpcRequests,{...p.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?u(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&u(new Error("Something went wrong"))});function f(p,g){p.id===l&&(g?.logger.info?.({framEvent:p,id:l},"Received frame response"),p.type===`@w3m-frame/${o}_SUCCESS`?(r&&clearTimeout(r),n&&clearTimeout(n),"payload"in p&&c(p.payload),c(void 0)):p.type===`@w3m-frame/${o}_ERROR`&&(r&&clearTimeout(r),n&&clearTimeout(n),"payload"in p&&u(new Error(p.payload?.message||"An error occurred")),u(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(l,p=>f(p,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ai.set(ut.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ai.set(ut.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ai.set(ut.EMAIL,e),Ai.set(ut.EMAIL_LOGIN_USED_KEY,"true"),Ai.delete(ut.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ai.delete(ut.EMAIL_LOGIN_USED_KEY),Ai.delete(ut.EMAIL),Ai.delete(ut.LAST_USED_CHAIN_KEY),Ai.delete(ut.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ai.set(ut.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ai.get(ut.LAST_USED_CHAIN_KEY)??void 0,r=Number(e);return isNaN(r)?e:r}persistSmartAccountEnabledNetworks(e){Ai.set(ut.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){let r=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?r=pa.parseCaipNetworkId(e)?.chainNamespace:Number.isInteger(Number(e))?r="eip155":r="solana");const n=this.getCaipNetworks(r);return(e?n.find(i=>String(i.id)===String(e)||i.caipNetworkId===e):n[0])?.rpcUrls.default.http?.[0]}}class V1{constructor(){}static getInstance({projectId:e,chainId:r,enableLogger:n,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a}){return V1.instance||(V1.instance=new aXe({projectId:e,chainId:r,enableLogger:n,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:!!Ce.state.remoteFeatures?.emailCapture})),V1.instance}}var AY={};const cXe={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof AY<"u"?AY.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},y4={filterOutDuplicatesByRDNS(t){const e=Ce.state.enableEIP6963?qe.state.connectors:[],r=Pe.getRecentWallets(),n=e.map(a=>a.info?.rdns).filter(Boolean),s=r.map(a=>a.rdns).filter(Boolean),i=n.concat(s);if(i.includes("io.metamask.mobile")&&gt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a?.rdns&&i.includes(String(a.rdns))||!a?.rdns&&e.some(u=>u.name===a.name)))},filterOutDuplicatesByIds(t){const e=qe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),r=Pe.getRecentWallets(),n=e.map(a=>a.explorerId),s=r.map(a=>a.id),i=n.concat(s);return t.filter(a=>!i.includes(a?.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=qe.state,{featuredWalletIds:r}=Ce.state,n=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>(a.info?.rdns&&(o[a.info.rdns]=!0),o),{});return t.map(o=>({...o,installed:!!o.rdns&&!!n[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(r?.length){const u=r.indexOf(o.id),l=r.indexOf(a.id);if(u!==-1&&l!==-1)return u-l;if(u!==-1)return-1;if(l!==-1)return 1}return 0})},getConnectOrderMethod(t,e){const r=t?.connectMethodsOrder||Ce.state.features?.connectMethodsOrder,n=e||qe.state.connectors;if(r)return r;const{injected:s,announced:i}=MI.getConnectorsByType(n,Nt.state.recommended,Nt.state.featured),o=s.filter(MI.showConnector),a=i.filter(MI.showConnector);return o.length||a.length?["wallet","email","social"]:cXe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Nt.state.excludedWallets.some(n=>n.rdns===t.rdns),r=!!t.name&&Nt.state.excludedWallets.some(n=>ga.isLowerCaseMatch(n.name,t.name));return e||r},markWalletsWithDisplayIndex(t){return t.map((e,r)=>({...e,display_index:r}))}},MI={getConnectorsByType(t,e,r){const{customWallets:n}=Ce.state,s=Pe.getRecentWallets(),i=y4.filterOutDuplicateWallets(e),o=y4.filterOutDuplicateWallets(r),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),u=t.filter(d=>d.type==="INJECTED"),l=t.filter(d=>d.type==="EXTERNAL");return{custom:n,recent:s,external:l,multiChain:a,announced:c,injected:u,recommended:i,featured:o}},showConnector(t){const e=t.info?.rdns,r=!!e&&Nt.state.excludedWallets.some(s=>!!s.rdns&&s.rdns===e),n=!!t.name&&Nt.state.excludedWallets.some(s=>ga.isLowerCaseMatch(s.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!gt.isMobile()||gt.isMobile()&&!e&&!Ge.checkInstalled())||r||n)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(r||n))},getIsConnectedWithWC(){return Array.from(ee.state.chains.values()).some(r=>qe.getConnectorId(r.namespace)===_e.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=Ce.state.features?.connectorTypeOrder??[]}){const d=[{type:"walletConnect",isEnabled:Ce.state.enableWalletConnect},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(h=>h.isEnabled),f=new Set(d.map(h=>h.type)),p=c.filter(h=>f.has(h)).map(h=>({type:h,isEnabled:!0})),g=d.filter(({type:h})=>!p.some(({type:E})=>E===h));return Array.from(new Set([...p,...g].map(({type:h})=>h)))},getAuthName({email:t,socialUsername:e,socialProvider:r}){return e?r&&r==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){try{if(t.name==="Browser Wallet"&&!gt.isMobile())return{accounts:[],chainId:void 0};if(t.id===_e.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[e,r]=await Promise.all([t.provider?.request({method:"eth_accounts"}),t.provider?.request({method:"eth_chainId"}).then(n=>Number(n))]);return{accounts:e,chainId:r}}catch(e){return console.warn(`Failed to fetch provider data for ${t.name}`,e),{accounts:[],chainId:void 0}}}};let G1,vh,Eh;function Irt(t,e){G1=document.createElement("style"),vh=document.createElement("style"),Eh=document.createElement("style"),G1.textContent=sy(t).core.cssText,vh.textContent=sy(t).dark.cssText,Eh.textContent=sy(t).light.cssText,document.head.appendChild(G1),document.head.appendChild(vh),document.head.appendChild(Eh),$ae(e)}function $ae(t){vh&&Eh&&(t==="light"?(vh.removeAttribute("media"),Eh.media="enabled"):(Eh.removeAttribute("media"),vh.media="enabled"))}function uXe(t){G1&&vh&&Eh&&(G1.textContent=sy(t).core.cssText,vh.textContent=sy(t).dark.cssText,Eh.textContent=sy(t).light.cssText)}function sy(t){return{core:uo`
      ${t?.["--w3m-font-family"]?uo``:uo`
            @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
          `}
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${ds(t?.["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${ds(t?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${ds(t?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${ds(t?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${ds(t?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:uo`
      :root {
        --w3m-color-mix: ${ds(t?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${ds(Hd(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${ds(Hd(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:uo`
      :root {
        --w3m-color-mix: ${ds(t?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${ds(Hd(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${ds(Hd(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Trt=uo`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Nrt=uo`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,Prt=uo`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,DI={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,r]=await Promise.all([DI.getAddresses(t),DI.getChainId(t)]);return{chainId:r,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){const r=e.rpcUrls.chainDefault?.http||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:DI.numberToHexString(e.id),rpcUrls:[...r],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[e.blockExplorers?.default.url],iconUrls:[cE.NetworkImageIds[e.id]]}]})}},bm={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function tp(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const xY=tp({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),CY=tp({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});tp({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});tp({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});tp({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const lXe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},_h={getMethodsByChainNamespace(t){return lXe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>n.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>n.add(s)),e.events&&Object.keys(e.events).forEach(s=>n.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&n.add(i)}),n.forEach(s=>{r[s]||(r[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{r[s]&&(r[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{r[s]&&(r[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{r[s]&&(r[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!r[a]||(r[a].rpcMap||(r[a].rpcMap={}),s.has(a)||(r[a].rpcMap={},s.add(a)),r[a].rpcMap[c]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const u=`${o}:${i}`,l=n[o];switch(l.chains.push(u),u){case xY.caipNetworkId:l.chains.push(xY.deprecatedCaipNetworkId);break;case CY.caipNetworkId:l.chains.push(CY.deprecatedCaipNetworkId);break}return l?.rpcMap&&c&&(l.rpcMap[i]=c),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{const e=await L1.resolveName(t);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,r){for(const n of[...e,...r])if(n.includes("*")){const i=`^${n.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(n).origin===t)return!0}catch{if(n===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:r,onDisconnect:n,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){r&&t.on("connect",()=>{const a=_h.getWalletConnectAccounts(t,e);r(a)}),n&&t.on("disconnect",()=>{n()}),s&&t.on("accountsChanged",a=>{try{const c=t.session?.namespaces?.[e]?.accounts||[],u=t.rpcProviders?.[e]?.getDefaultChain(),l=a.map(d=>{const f=c.find(h=>h.includes(`${e}:${u}:${d}`));if(!f)return;const{chainId:p,chainNamespace:g}=pa.parseCaipAddress(f);return{address:d,chainId:p,chainNamespace:g}}).filter(d=>d!==void 0);l.length>0&&s(l)}catch(c){console.warn("Failed to parse accounts for namespace on accountsChanged event",e,a,c)}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){const r=new Set,n=t?.session?.namespaces?.[e]?.accounts?.map(s=>pa.parseCaipAddress(s)).filter(({address:s})=>r.has(s.toLowerCase())?!1:(r.add(s.toLowerCase()),!0));return n&&n.length>0?n:[]}};class dXe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case _e.CHAIN.EVM:await this.syncEVMConnections(e);break;case _e.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case _e.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:r,universalProvider:n,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:u}=s(a.id);return!c&&u}).map(async a=>{if(a.id===_e.CONNECTOR_ID.WALLET_CONNECT){const c=_h.getWalletConnectAccounts(n,this.namespace),u=r.find(l=>l.chainNamespace===this.namespace&&l.id.toString()===c[0]?.chainId?.toString());c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:u})}else{const{accounts:c,chainId:u}=await MI.fetchProviderData(a);if(c.length>0&&u){const l=r.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===u.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:l}),a.provider&&a.id!==_e.CONNECTOR_ID.AUTH&&a.id!==_e.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:r,universalProvider:n,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:u}=s(a.id);return!c&&u}).map(async a=>{if(a.id===_e.CONNECTOR_ID.WALLET_CONNECT){const c=_h.getWalletConnectAccounts(n,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:r})}else{const c=await a.connect({chainId:r?.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:r}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:r,universalProvider:n,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:u}=s(a.id);return!c&&u}).map(async a=>{if(a.id===_e.CONNECTOR_ID.WALLET_CONNECT){const f=_h.getWalletConnectAccounts(n,this.namespace);f.length>0&&i({connectorId:a.id,accounts:f.map(p=>({address:p.address})),caipNetwork:r});return}const c=await a.connect();let l=(await a.getAccountAddresses())?.map(f=>gt.createAccount(_e.CHAIN.BITCOIN,f.address,f.purpose||"payment",f.publicKey,f.path));if(l&&l.length>1&&(l=[{namespace:_e.CHAIN.BITCOIN,publicKey:l[bm.ACCOUNT_INDEXES.PAYMENT]?.publicKey??"",path:l[bm.ACCOUNT_INDEXES.PAYMENT]?.path??"",address:l[bm.ACCOUNT_INDEXES.PAYMENT]?.address??"",type:"payment"},{namespace:_e.CHAIN.BITCOIN,publicKey:l[bm.ACCOUNT_INDEXES.ORDINAL]?.publicKey??"",path:l[bm.ACCOUNT_INDEXES.ORDINAL]?.path??"",address:l[bm.ACCOUNT_INDEXES.ORDINAL]?.address??"",type:"ordinal"}]),!(a.chains.find(f=>f.id===r?.id)||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:l.map(f=>({address:f.address,type:f.type})),caipNetwork:r}))}))}getConnection({address:e,connectorId:r,connections:n,connectors:s}){if(r){const o=n.find(u=>ga.isLowerCaseMatch(u.connectorId,r));if(!o)return null;const a=s.find(u=>ga.isLowerCaseMatch(u.id,o.connectorId)),c=e?o.accounts.find(u=>ga.isLowerCaseMatch(u.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=n.find(o=>o.accounts.length>0&&s.some(a=>ga.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>ga.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}const w1={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class qae{constructor({provider:e,namespace:r}){this.id=_e.CONNECTOR_ID.WALLET_CONNECT,this.name=cE.ConnectorNamesMap[_e.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=cE.ConnectorImageIds[_e.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=ee.getCaipNetworks.bind(ee),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=r}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const r=this.getCaipNetworks(),n=Ce.state.universalProviderConfigOverride,s=_h.createNamespaces(r,n);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return Eu.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:fXe})}}const fXe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],hXe=[_e.CONNECTOR_ID.AUTH,_e.CONNECTOR_ID.WALLET_CONNECT];class pXe{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=r=>ee.getCaipNetworks(r),this.getConnectorId=r=>qe.getConnectorId(r),e&&this.construct(e),e?.namespace&&(this.connectionManager=new dXe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:r}){const n=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===r?.toString());e&&n&&this.addConnection({connectorId:_e.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:n})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:_e.CONNECTOR_ID.AUTH,type:"AUTH",name:_e.CONNECTOR_NAMES.AUTH,provider:e,imageId:cE.ConnectorImageIds[_e.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const r=new Set;this.availableConnections=[...e,...this.availableConnections].filter(n=>r.has(n.connectorId.toLowerCase())?!1:(r.add(n.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(r=>!ga.isLowerCaseMatch(r.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,r){lt.setStatus(e,r)}on(e,r){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(s=>s(r))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:r,providerType:n}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(n==="WALLET_CONNECT"){s.setDefaultChain(r.caipNetworkId);return}if(s&&n==="AUTH"){const i=s,o=Lu(r.chainNamespace);await i.switchNetwork({chainId:r.caipNetworkId});const a=await i.getUser({chainId:r.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r instanceof qae);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,r){if(e.length>0){const{address:n,chainId:s}=gt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===s?.toString()),o=this.connectors.find(a=>a.id===r);n&&(this.emit("accountChanged",{address:n,chainId:s,connector:o}),this.addConnection({connectorId:r,accounts:e.map(a=>{const{address:c}=gt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,r,n=!0){if(e.length>0){const{address:s}=gt.getAccount(e[0]),i=this.connectionManager?.getConnection({connectorId:r,connections:this.connections,connectors:this.connectors});s&&ga.isLowerCaseMatch(this.getConnectorId(_e.CHAIN.EVM),r)&&this.emit("accountChanged",{address:s,chainId:i?.caipNetwork?.id,connector:i?.connector}),this.addConnection({connectorId:r,accounts:e.map(o=>{const{address:a}=gt.getAccount(o);return{address:a}}),caipNetwork:i?.caipNetwork})}else n&&this.onDisconnect(r)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),ga.isLowerCaseMatch(this.getConnectorId(_e.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,r){const n=typeof e=="string"&&e.startsWith("0x")?DI.hexStringToNumber(e).toString():e.toString(),s=this.connectionManager?.getConnection({connectorId:r,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(o=>o.chainNamespace===this.namespace).find(o=>o.id.toString()===n);s&&this.addConnection({connectorId:r,accounts:s.accounts,caipNetwork:i}),ga.isLowerCaseMatch(this.getConnectorId(_e.CHAIN.EVM),r)&&this.emit("switchNetwork",{chainId:n})}listenProviderEvents(e,r){if(hXe.includes(e))return;const n=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(r.on("disconnect",i),r.on("accountsChanged",n),r.on("chainChanged",s),this.providerHandlers[e]={provider:r,disconnect:i,accountsChanged:n,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:r,disconnect:n,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];r.removeListener("disconnect",n),r.removeListener("accountsChanged",s),r.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){const e=this.connectionManager?.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[r]=e.accounts;this.emit("accountChanged",{address:r?.address,chainId:e.caipNetwork?.id,connector:e.connector})}}}class gXe extends pXe{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new qae({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){const n=this.provider?.session?.namespaces?.[e]?.accounts?.map(s=>{const[,,i]=s.split(":");return i}).filter((s,i,o)=>o.indexOf(s)===i)||[];return Promise.resolve({accounts:n.map(s=>gt.createAccount(e,s,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&Cr.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(lt.state.balanceLoading&&e.chainId===ee.state.activeCaipNetwork?.id)return{balance:lt.state.balance||"0.00",symbol:lt.state.balanceSymbol||""};const s=(await lt.fetchTokenBalance()).find(i=>i.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&i.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:s?.quantity.numeric||"0.00",symbol:s?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:r,message:n,address:s}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return ee.state.activeCaipNetwork?.chainNamespace===_e.CHAIN.SOLANA?i=(await r.request({method:"solana_signMessage",params:{message:Zn.encode(new TextEncoder().encode(n)),pubkey:s}},ee.state.activeCaipNetwork?.caipNetworkId)).signature:i=await r.request({method:"personal_sign",params:[n,s]},ee.state.activeCaipNetwork?.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===_e.CHAIN.EVM)try{await n.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:XI(r.id)}]})}catch(s){if(s.code===w1.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||s.code===w1.ERROR_INVALID_CHAIN_ID||s.code===w1.ERROR_CODE_DEFAULT||s?.data?.originalError?.code===w1.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await n.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:XI(r.id),rpcUrls:[r?.rpcUrls.chainDefault?.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[r.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(n=>n.type==="WALLET_CONNECT")?.provider}}const mXe=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication"],eI={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Cr.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(r=>r!=="email"):!1},processFallback:t=>t===void 0?Cr.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Cr.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Cr.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Cr.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Cr.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Cr.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Cr.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Cr.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Cr.DEFAULT_REMOTE_FEATURES.multiWallet},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Cr.DEFAULT_REMOTE_FEATURES.payWithExchange},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Cr.DEFAULT_REMOTE_FEATURES.payments},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>typeof t>"u"?Cr.DEFAULT_REMOTE_FEATURES.reownAuthentication:!!t}},yXe={localSettingsOverridden:new Set,getApiConfig(t,e){return e?.find(r=>r.id===t)},addWarning(t,e){if(t!==void 0){const r=eI[e],n=r.isLegacy?`"features.${r.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(n)}},processFeature(t,e,r,n,s){const i=eI[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(n){const a=this.getApiConfig(i.apiFeatureName,r);return a?.config===null?this.processFallbackFeature(t,o):a?.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return eI[t].processApi(e)},processFallbackFeature(t,e){return eI[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,r=t.features||{};this.localSettingsOverridden.clear();let n=null,s=!1;try{n=await Nt.fetchProjectConfig(),s=n!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Cr.DEFAULT_REMOTE_FEATURES:Cr.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of mXe){const a=this.processFeature(o,r,n,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Cr.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Hs.open({debugMessage:io.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return i}};class bXe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(r,n)=>{if(r){const s=ee.getCaipNetworks(r)?.find(a=>a.id===n);if(s)return s;const i=ee.getNetworkData(r)?.caipNetwork;return i||ee.getRequestedCaipNetworks(r).filter(a=>a.chainNamespace===r)?.[0]}return ee.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const r=this.getCaipNetwork();if(r)return r.id},this.getCaipNetworks=r=>ee.getCaipNetworks(r),this.getActiveChainNamespace=()=>ee.state.activeChain,this.setRequestedCaipNetworks=(r,n)=>{ee.setRequestedCaipNetworks(r,n)},this.getApprovedCaipNetworkIds=()=>ee.getAllApprovedCaipNetworkIds(),this.getCaipAddress=r=>ee.state.activeChain===r||!r?ee.state.activeCaipAddress:ee.state.chains.get(r)?.accountState?.caipAddress,this.setClientId=r=>{Dt.setClientId(r)},this.getProvider=r=>vn.getProvider(r),this.getProviderType=r=>vn.getProviderId(r),this.getPreferredAccountType=r=>Lu(r),this.setCaipAddress=(r,n)=>{lt.setCaipAddress(r,n)},this.setBalance=(r,n,s)=>{lt.setBalance(r,n,s)},this.setProfileName=(r,n)=>{lt.setProfileName(r,n)},this.setProfileImage=(r,n)=>{lt.setProfileImage(r,n)},this.setUser=(r,n)=>{lt.setUser(r,n)},this.resetAccount=r=>{lt.resetAccount(r)},this.setCaipNetwork=r=>{ee.setActiveCaipNetwork(r)},this.setCaipNetworkOfNamespace=(r,n)=>{ee.setChainNetworkData(n,{caipNetwork:r})},this.setStatus=(r,n)=>{lt.setStatus(r,n),qe.isConnected()?Pe.setConnectionStatus("connected"):Pe.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=r=>ee.state.chains.get(r)?.accountState?.address,this.setConnectors=r=>{const n=[...qe.state.allConnectors,...r];qe.setConnectors(n)},this.setConnections=(r,n)=>{Pe.setConnections(r,n),Ge.setConnections(r,n)},this.fetchIdentity=r=>Dt.fetchIdentity(r),this.getReownName=r=>L1.getNamesForAddress(r),this.getConnectors=()=>qe.getConnectors(),this.getConnectorImage=r=>Fie.getConnectorImage(r),this.getConnections=r=>this.remoteFeatures.multiWallet?X6.getConnectionsData(r).connections:(Hs.open(_e.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=r=>this.remoteFeatures.multiWallet?X6.getConnectionsData(r).recentConnections:(Hs.open(_e.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async r=>{if(!this.remoteFeatures.multiWallet){Hs.open(_e.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await Ge.switchConnection(r)},this.deleteConnection=r=>{if(!this.remoteFeatures.multiWallet){Hs.open(_e.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}Pe.deleteAddressFromConnection(r),Ge.syncStorageConnections()},this.setConnectedWalletInfo=(r,n)=>{const s=vn.getProviderId(n),i=r?{...r,type:s}:void 0;lt.setConnectedWalletInfo(i,n)},this.getIsConnectedState=()=>!!ee.state.activeCaipAddress,this.addAddressLabel=(r,n,s)=>{lt.addAddressLabel(r,n,s)},this.removeAddressLabel=(r,n)=>{lt.removeAddressLabel(r,n)},this.getAddress=r=>ee.state.activeChain===r||!r?lt.state.address:ee.state.chains.get(r)?.accountState?.address,this.setApprovedCaipNetworksData=r=>ee.setApprovedCaipNetworksData(r),this.resetNetwork=r=>{ee.resetNetwork(r)},this.addConnector=r=>{qe.addConnector(r)},this.resetWcConnection=()=>{Ge.resetWcConnection()},this.setAddressExplorerUrl=(r,n)=>{lt.setAddressExplorerUrl(r,n)},this.setSmartAccountDeployed=(r,n)=>{lt.setSmartAccountDeployed(r,n)},this.setPreferredAccountType=(r,n)=>{ee.setAccountProp("preferredAccountType",r,n)},this.setEIP6963Enabled=r=>{Ce.setEIP6963Enabled(r)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,r){const n=e?.map(i=>i.namespace).filter(i=>!!i);if(n?.length)return[...new Set(n)];const s=r?.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){if(this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),Ce.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await yXe.fetchRemoteFeatures(e),Ce.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&BO.setOnrampProviders(this.remoteFeatures.onramp),(Ce.state.remoteFeatures?.email||Array.isArray(Ce.state.remoteFeatures?.socials)&&Ce.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins(),Ce.state.features?.reownAuthentication||Ce.state.remoteFeatures?.reownAuthentication){const{ReownAuthentication:r}=await Pr(async()=>{const{ReownAuthentication:s}=await import("./features-DEEl7bD8.js");return{ReownAuthentication:s}},[]),n=Ce.state.siwx;n instanceof r||(n&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),Ce.setSIWX(new r))}}async checkAllowedOrigins(){try{const e=await Nt.fetchAllowedOrigins();if(!e||!gt.isClient()){Hs.open(io.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const r=window.location.origin;_h.isOriginAllowed(r,e,w1.DEFAULT_ALLOWED_ANCESTORS)||Hs.open(io.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error)){Hs.open(io.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":Hs.open(io.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const r=e.cause instanceof Error?e.cause:e;Hs.open({displayMessage:io.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:io.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(r.message)},"error");break}default:Hs.open(io.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){const{...r}=e;delete r.adapters,delete r.universalProvider,Or.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(n=>n.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&sa.setThemeMode(e.themeMode),e.themeVariables&&sa.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");ee.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const r=this.getDefaultNetwork();r&&ee.setActiveCaipNetwork(r)}initializeConnectionController(e){Ge.initialize(e.adapters??[]),Ge.setWcBasic(e.basic??!1)}initializeConnectorController(){qe.initialize(this.chainNamespaces)}initializeProjectSettings(e){Ce.setProjectId(e.projectId),Ce.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){Ce.setDebug(e.debug!==!1),Ce.setEnableWalletConnect(e.enableWalletConnect!==!1),Ce.setEnableWalletGuide(e.enableWalletGuide!==!1),Ce.setEnableWallets(e.enableWallets!==!1),Ce.setEIP6963Enabled(e.enableEIP6963!==!1),Ce.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),Ce.setEnableReconnect(e.enableReconnect!==!1),Ce.setEnableAuthLogger(e.enableAuthLogger!==!1),Ce.setCustomRpcUrls(e.customRpcUrls),Ce.setEnableEmbedded(e.enableEmbedded),Ce.setAllWallets(e.allWallets),Ce.setIncludeWalletIds(e.includeWalletIds),Ce.setExcludeWalletIds(e.excludeWalletIds),Ce.setFeaturedWalletIds(e.featuredWalletIds),Ce.setTokens(e.tokens),Ce.setTermsConditionsUrl(e.termsConditionsUrl),Ce.setPrivacyPolicyUrl(e.privacyPolicyUrl),Ce.setCustomWallets(e.customWallets),Ce.setFeatures(e.features),Ce.setAllowUnsupportedChain(e.allowUnsupportedChain),Ce.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),Ce.setPreferUniversalLinks(e.experimental_preferUniversalLinks),Ce.setDefaultAccountTypes(e.defaultAccountTypes);const r=this.getDefaultMetaData();if(!e.metadata&&r&&(e.metadata=r),Ce.setMetadata(e.metadata),Ce.setDisableAppend(e.disableAppend),Ce.setEnableEmbedded(e.enableEmbedded),Ce.setSIWX(e.siwx),!e.projectId){Hs.open(io.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(s=>s.namespace===_e.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");Ce.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return gt.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=Nm.getUnsupportedNetwork(`${r}:${e}`);ee.setActiveCaipNetwork(n)}}getDefaultNetwork(){return Nm.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return Nm.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return Nm.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(s=>s.id===e.defaultNetwork?.id);return r?Nm.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,r){try{this.setLoading(!0,e);let n={connections:[]};const s=this.getAdapter(e);return(ee.state.chains.get(e)?.accountState?.caipAddress||!Ce.state.enableReconnect)&&s?.disconnect&&(n=await s.disconnect({id:r})),this.setLoading(!1,e),n}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=ee.state.activeChain,r=this.getAdapter(e),n=this.getCaipNetwork(e)?.id,s=Ge.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!r)throw new Error("Adapter not found");const a=await r.connectWalletConnect(n);(!o||!i)&&this.close(),this.setClientId(a?.clientId||null),Pe.setConnectedNamespaces([...ee.state.chains.keys()]),await this.syncWalletConnectAccount(),await Eu.initializeIfEnabled()},connectExternal:async({id:e,address:r,info:n,type:s,provider:i,chain:o,caipNetwork:a,socialUri:c})=>{const u=ee.state.activeChain,l=o||u,d=this.getAdapter(l);if(o&&o!==u&&!a){const g=this.getCaipNetworks().find(h=>h.chainNamespace===o);g&&this.setCaipNetwork(g)}if(!l)throw new Error("connectExternal: namespace not found");if(!d)throw new Error("connectExternal: adapter not found");const f=this.getCaipNetwork(l),p=await d.connect({id:e,address:r,info:n,type:s,provider:i,socialUri:c,chainId:a?.id||f?.id,rpcUrl:a?.rpcUrls?.default?.http?.[0]||f?.rpcUrls?.default?.http?.[0]});if(p)return Pe.addConnectedNamespace(l),this.syncProvider({...p,chainNamespace:l}),this.setStatus("connected",l),this.syncConnectedWalletInfo(l),Pe.removeDisconnectedConnectorId(e,l),{address:p.address}},reconnectExternal:async({id:e,info:r,type:n,provider:s})=>{const i=ee.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o?.reconnect&&(await o?.reconnect({id:e,info:r,type:n,provider:s,chainId:this.getCaipNetwork()?.id}),Pe.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const{id:r,chainNamespace:n,initialDisconnect:s}=e||{},i=n||ee.state.activeChain,o=qe.getConnectorId(i),a=r===_e.CONNECTOR_ID.AUTH||o===_e.CONNECTOR_ID.AUTH,c=r===_e.CONNECTOR_ID.WALLET_CONNECT||o===_e.CONNECTOR_ID.WALLET_CONNECT;try{const u=Array.from(ee.state.chains.keys());let l=n?[n]:u;(c||a)&&(l=u);const d=l.map(async g=>{const h=qe.getConnectorId(g),y=await this.disconnectNamespace(g,r||h);y&&(a&&Pe.deleteConnectedSocialProvider(),y.connections.forEach(E=>{Pe.addDisconnectedConnectorId(E.connectorId,g)})),s&&this.onDisconnectNamespace({chainNamespace:g,closeModal:!1})}),f=await Promise.allSettled(d);Xr.resetSend(),Ge.resetWcConnection(),Eu.getSIWX()?.signOutOnDisconnect&&await Eu.clearSessions(),qe.setFilterByNamespace(void 0),Ge.syncStorageConnections();const p=f.filter(g=>g.status==="rejected");if(p.length>0)throw new Error(p.map(g=>g.reason.message).join(", "));Or.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:n||"all"}})}catch(u){throw new Error(`Failed to disconnect chains: ${u.message}`)}},checkInstalled:e=>e?e.some(r=>!!window.ethereum?.[String(r)]):!!window.ethereum,signMessage:async e=>{const r=ee.state.activeChain,n=this.getAdapter(ee.state.activeChain);if(!r)throw new Error("signMessage: namespace not found");if(!n)throw new Error("signMessage: adapter not found");return(await n?.signMessage({message:e,address:lt.state.address,provider:vn.getProvider(r)}))?.signature||""},sendTransaction:async e=>{const r=e.chainNamespace;if(!r)throw new Error("sendTransaction: namespace not found");if(Cr.SEND_SUPPORTED_NAMESPACES.includes(r)){const n=this.getAdapter(r);if(!n)throw new Error("sendTransaction: adapter not found");const s=vn.getProvider(r);return(await n?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}))?.hash||""}return""},estimateGas:async e=>{const r=e.chainNamespace;if(r===_e.CHAIN.EVM){const n=this.getAdapter(r);if(!n)throw new Error("estimateGas: adapter is required but got undefined");const s=vn.getProvider(r),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");return(await n?.estimateGas({...e,provider:s,caipNetwork:i}))?.gas||0n}return 0n},getEnsAvatar:async()=>{const e=ee.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:lt.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:e}),lt.state.profileImage||!1},getEnsAddress:async e=>await _h.resolveReownName(e),writeContract:async e=>{const r=ee.state.activeChain,n=this.getAdapter(r);if(!r)throw new Error("writeContract: namespace is required but got undefined");if(!n)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=vn.getProvider(r);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(await n?.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}))?.hash},parseUnits:(e,r)=>{const n=this.getAdapter(ee.state.activeChain);if(!n)throw new Error("parseUnits: adapter is required but got undefined");return n?.parseUnits({value:e,decimals:r})??0n},formatUnits:(e,r)=>{const n=this.getAdapter(ee.state.activeChain);if(!n)throw new Error("formatUnits: adapter is required but got undefined");return n?.formatUnits({value:e,decimals:r})??"0"},getCapabilities:async e=>{const r=this.getAdapter(ee.state.activeChain);if(!r)throw new Error("getCapabilities: adapter is required but got undefined");return await r?.getCapabilities(e)},grantPermissions:async e=>{const r=this.getAdapter(ee.state.activeChain);if(!r)throw new Error("grantPermissions: adapter is required but got undefined");return await r?.grantPermissions(e)},revokePermissions:async e=>{const r=this.getAdapter(ee.state.activeChain);if(!r)throw new Error("revokePermissions: adapter is required but got undefined");return r?.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>{const r=this.getAdapter(ee.state.activeChain);if(!r)throw new Error("walletGetAssets: adapter is required but got undefined");return await r?.walletGetAssets(e)??{}},updateBalance:e=>{const r=this.getCaipNetwork(e);!r||!lt.state.address||this.updateNativeBalance(lt.state.address,r?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Ge.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(vn.getProviderId(ee.state.activeChain)===ec.CONNECTOR_TYPE_WALLET_CONNECT){const r=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(r)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=vn.getProvider(r),i=vn.getProviderId(r);if(e.chainNamespace===ee.state.activeChain)await this.getAdapter(r)?.switchNetwork({caipNetwork:e,provider:s,providerType:i});else if(this.setCaipNetwork(e),i===ec.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(r);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],s=r.accounts.map(i=>{const{chainId:o,chainNamespace:a}=pa.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...n,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{const s=e?.find(i=>i.namespace===n);return s?(s.construct({namespace:n,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),r[n]=s):r[n]=new gXe({namespace:n,networks:this.getCaipNetworks()}),r},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),await this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=Pe.getConnectionStatus();Ce.state.enableReconnect===!1?this.setStatus("disconnected",e):n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(Pe.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(u=>u.id.toString()===i.toString()||u.caipNetworkId.toString()===i.toString()),a=ee.state.activeChain===e,c=ee.state.chains.get(e)?.accountState?.address;if(o){const u=a&&s?s:c;u&&this.syncAccount({address:u,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),r.on("disconnect",()=>{const s=this.remoteFeatures.multiWallet,i=Array.from(Ge.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!s||i.length===0})}),r.on("connections",s=>{this.setConnections(s,e)}),r.on("pendingTransactions",()=>{const s=lt.state.address,i=ee.state.activeCaipNetwork;!s||!i?.id||this.updateNativeBalance(s,i.id,i.chainNamespace)}),r.on("accountChanged",({address:s,chainId:i,connector:o})=>{const a=ee.state.activeChain===e;o?.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),a&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):a&&ee.state.activeCaipNetwork?.id?this.syncAccount({address:s,chainId:ee.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),Pe.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&await this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>Ge.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async reconnectWalletConnect(){await this.syncWalletConnectAccount();const e=this.getAddress();Or.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:gt.isMobile()?"mobile":"qrcode",name:this.universalProvider?.session?.peer?.metadata?.name||"Unknown",reconnect:!0}})}async syncNamespaceConnection(e){try{e===_e.CHAIN.EVM&&gt.isSafeApp()&&qe.setConnectorId(_e.CONNECTOR_ID.SAFE,e);const r=qe.getConnectorId(e);switch(this.setStatus("connecting",e),r){case _e.CONNECTOR_ID.WALLET_CONNECT:await this.reconnectWalletConnect();break;case _e.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:r,closeModal:n}=e||{};ee.resetAccount(r),ee.resetNetwork(r),Pe.removeConnectedNamespace(r);const s=Array.from(ee.state.chains.keys());(r?[r]:s).forEach(o=>Pe.addDisconnectedConnectorId(qe.getConnectorId(o)||"",o)),qe.removeConnectorId(r),vn.resetChain(r),this.setUser(void 0,r),this.setStatus("disconnected",r),this.setConnectedWalletInfo(void 0,r),n!==!1&&vr.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const r=this.getCaipAddress(e),n=this.getCaipNetwork(e);return this.chainAdapters?.[e].syncConnections({connectToFirstConnector:!r,caipNetwork:n,getConnectorStorageInfo(s){const o=Pe.getConnections()[e]??[];return{hasDisconnected:Pe.isConnectorDisconnected(s,e),hasConnected:o.some(a=>ga.isLowerCaseMatch(a.connectorId,s))}}})}))}async syncAdapterConnection(e){const r=this.getAdapter(e),n=qe.getConnectorId(e),s=this.getCaipNetwork(e),o=qe.getConnectors(e).find(a=>a.id===n);try{if(!r||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!s?.id)throw new Error("CaipNetwork not found");const a=await r?.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]});a?(this.syncProvider({...a,chainNamespace:e}),await this.syncAccount({...a,chainNamespace:e}),this.setStatus("connected",e),Or.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:a.address,properties:{method:"browser",name:o.info?.name||o.name||"Unknown",reconnect:!0}})):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){const e=Object.keys(this.universalProvider?.session?.namespaces||{}),r=this.chainNamespaces.map(async n=>{const s=this.getAdapter(n);if(!s)return;const i=this.universalProvider?.session?.namespaces?.[n]?.accounts||[],o=ee.state.activeCaipNetwork?.id,a=i.find(c=>{const{chainId:u}=pa.parseCaipAddress(c);return u===o?.toString()})||i[0];if(a){const c=pa.validateCaipAddress(a),{chainId:u,address:l}=pa.parseCaipAddress(c);if(vn.setProviderId(n,ec.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&ee.state.activeCaipNetwork&&s.namespace!==_e.CHAIN.EVM){const d=s.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:ee.state.activeCaipNetwork});vn.setProvider(n,d)}else vn.setProvider(n,this.universalProvider);qe.setConnectorId(_e.CONNECTOR_ID.WALLET_CONNECT,n),Pe.addConnectedNamespace(n),await this.syncAccount({address:l,chainId:u,chainNamespace:n})}else e.includes(n)&&this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await ee.setApprovedCaipNetworksData(n)});await Promise.all(r)}syncProvider({type:e,provider:r,id:n,chainNamespace:s}){vn.setProviderId(s,e),vn.setProvider(s,r),qe.setConnectorId(n,s)}async syncAccount(e){const r=e.chainNamespace===ee.state.activeChain,n=ee.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Pe.getActiveNetworkProps(),c=i||a,u=ee.state.activeCaipNetwork?.name===_e.UNSUPPORTED_NETWORK_NAME,l=ee.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(u&&!l)&&c){let d=this.getCaipNetworks().find(g=>g.id.toString()===c.toString()),f=this.getCaipNetworks().find(g=>g.chainNamespace===o);if(!l&&!d&&!f){const g=this.getApprovedCaipNetworkIds()||[],h=g.find(E=>pa.parseCaipNetworkId(E)?.chainId===c.toString()),y=g.find(E=>pa.parseCaipNetworkId(E)?.chainNamespace===o);d=this.getCaipNetworks().find(E=>E.caipNetworkId===h),f=this.getCaipNetworks().find(E=>E.caipNetworkId===y||"deprecatedCaipNetworkId"in E&&E.deprecatedCaipNetworkId===y)}const p=d||f;p?.chainNamespace===ee.state.activeChain?Ce.state.enableNetworkSwitch&&!Ce.state.allowUnsupportedChain&&ee.state.activeCaipNetwork?.name===_e.UNSUPPORTED_NETWORK_NAME?ee.showUnsupportedChainUI():this.setCaipNetwork(p):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o),ga.isLowerCaseMatch(s,lt.state.address)||this.syncAccountInfo(s,p?.id,o),r?await this.syncBalance({address:s,chainId:p?.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:n?.id,chainNamespace:o}),this.syncIdentity({address:s,chainId:i,chainNamespace:o})}}async syncAccountInfo(e,r,n){const s=this.getCaipAddress(n),i=r||s?.split(":")[1];if(!i)return;const o=`${n}:${i}:${e}`;this.setCaipAddress(o,n),await this.syncIdentity({address:e,chainId:i,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const s=n[0];this.setProfileName(s.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){const r=qe.getConnectorId(e),n=vn.getProviderId(e);if(n===ec.CONNECTOR_TYPE_ANNOUNCED||n===ec.CONNECTOR_TYPE_INJECTED){if(r){const i=this.getConnectors().find(o=>{const a=o.id===r,c=o.info?.rdns===r,u=o.connectors?.some(l=>l.id===r||l.info?.rdns===r);return a||c||!!u});if(i){const{info:o,name:a,imageUrl:c}=i,u=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:u,...o},e)}}}else if(n===ec.CONNECTOR_TYPE_WALLET_CONNECT){const s=vn.getProvider(e);s?.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:s.session.peer.metadata.icons?.[0]},e)}else if(r&&(r===_e.CONNECTOR_ID.COINBASE_SDK||r===_e.CONNECTOR_ID.COINBASE)){const s=this.getConnectors().find(c=>c.id===r),i=s?.name||"Coinbase Wallet",o=s?.imageUrl||this.getConnectorImage(s),a=s?.info;this.setConnectedWalletInfo({...a,name:i,icon:o},e)}}async syncBalance(e){!Die.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(n=>n.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,r,n){const s=this.getAdapter(n),i=ee.getCaipNetworkByNamespace(n,r);if(s){const o=await s.getBalance({address:e,chainId:r,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,n),o}}async initializeUniversalAdapter(){const e=LZe.createLogger((n,...s)=>{n&&this.handleAlertError(n),console.error(...s)}),r={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};Ce.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await r3.init(r),Ce.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{_h.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:r=>{Ge.setUri(r)},onConnect:r=>{const{address:n}=gt.getAccount(r[0]);Ge.finalizeWcConnection(n)},onDisconnect:()=>{ee.state.noAdapters&&this.resetAccount(e),Ge.resetWcConnection()},onChainChanged:r=>{const n=ee.state.activeChain,s=n&&qe.state.activeConnectorIds[n]===_e.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(ee.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===r.toString()||a.caipNetworkId.toString()===r.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(r);return}o?.id.toString()!==i?.id.toString()&&o?.chainNamespace===i?.chainNamespace&&this.setCaipNetwork(i)}},onAccountsChanged:r=>{const n=ee.state.activeChain,s=n&&qe.state.activeConnectorIds[n]===_e.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(ee.state.noAdapters||s)){const i=r?.[0];i&&this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){return!this.universalProviderInitPromise&&gt.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Or.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const r=Object.entries(io.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,s]=r??[],{message:i,alertErrorKey:o}=s??{};if(n&&i&&!this.reportedAlertErrors[n]){const a=io.ALERT_ERRORS[o];a&&(Hs.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){if(await this.injectModalUi(),e?.uri&&Ge.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return vr.open({...e,data:{swap:e.arguments}})}return vr.open(e)}async close(){await this.injectModalUi(),vr.close()}setLoading(e,r){vr.setLoading(e,r)}async disconnect(e){await Ge.disconnect({namespace:e})}getSIWX(){return Ce.state.siwx}getError(){return""}getChainId(){return ee.state.activeCaipNetwork?.id}async switchNetwork(e){const r=this.getCaipNetworks().find(n=>n.id===e.id);if(!r){Hs.open(io.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await ee.switchActiveNetwork(r)}getWalletProvider(){return ee.state.activeChain?vn.state.providers[ee.state.activeChain]:null}getWalletProviderType(){return vn.getProviderId(ee.state.activeChain)}subscribeProviders(e){return vn.subscribeProviders(e)}getThemeMode(){return sa.state.themeMode}getThemeVariables(){return sa.state.themeVariables}setThemeMode(e){sa.setThemeMode(e),$ae(sa.state.themeMode)}setTermsConditionsUrl(e){Ce.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){Ce.setPrivacyPolicyUrl(e)}setThemeVariables(e){sa.setThemeVariables(e),uXe(sa.state.themeVariables)}subscribeTheme(e){return sa.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?Ge.subscribe(e):(Hs.open(_e.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?ee.state.chains.get(e)?.accountState?.connectedWalletInfo:lt.state.connectedWalletInfo}getAccount(e){const r=e||ee.state.activeChain,n=qe.getAuthConnector(r),s=ee.getAccountData(r),i=Pe.getConnectedConnectorId(ee.state.activeChain),o=Ge.getConnections(r);if(!r)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:u,type:l,publicKey:d})=>gt.createAccount(r,u,l||"eoa",d)));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:gt.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:n&&i===_e.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:Pe.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:Lu(r),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const s=this.getAccount(r);s&&e(s)};r?ee.subscribeChainProp("accountState",n,r):ee.subscribe(n),qe.subscribe(n)}subscribeNetwork(e){return ee.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r?.id,caipNetworkId:r?.caipNetworkId})})}subscribeWalletInfo(e,r){return r?lt.subscribeKey("connectedWalletInfo",e,r):lt.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){lt.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){ee.subscribeKey("activeCaipNetwork",e)}getState(){return Nu.state}getRemoteFeatures(){return Ce.state.remoteFeatures}subscribeState(e){return Nu.subscribe(e)}subscribeRemoteFeatures(e){return Ce.subscribeKey("remoteFeatures",e)}showErrorMessage(e){El.showError(e)}showSuccessMessage(e){El.showSuccess(e)}getEvent(){return{...Or.state}}subscribeEvents(e){return Or.subscribe(e)}replace(e){Lt.replace(e)}redirect(e){Lt.push(e)}popTransactionStack(e){Lt.popTransactionStack(e)}isOpen(){return vr.state.open}isTransactionStackEmpty(){return Lt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){Ce.setFeatures(e)}updateRemoteFeatures(e){Ce.setRemoteFeatures(e)}updateOptions(e){const n={...Ce.state||{},...e};Ce.setOptions(n)}setConnectMethodsOrder(e){Ce.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){Ce.setWalletFeaturesOrder(e)}setCollapseWallets(e){Ce.setCollapseWallets(e)}setSocialsOrder(e){Ce.setSocialsOrder(e)}getConnectMethodsOrder(){return y4.getConnectOrderMethod(Ce.state.features,qe.getConnectors())}addNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);this.getCaipNetworks().find(s=>s.id===n.id)||ee.addNetwork(n)}removeNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===r)&&ee.removeNetwork(e,r)}}let SY=!1;class wXe extends bXe{async onAuthProviderConnected(e){e.message&&e.signature&&e.siwxMessage&&await Eu.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature);const r=ee.state.activeChain;if(!r)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const n=r===_e.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=Ce.state.defaultAccountTypes[r],i=Lu(r),o=e.preferredAccountType||i||s;this.setCaipAddress(n,r);const{signature:a,siwxMessage:c,message:u,...l}=e;this.setUser({...lt.state.user||{},...l},r),this.setSmartAccountDeployed(!!e.smartAccountDeployed,r),this.setPreferredAccountType(o,r),this.setLoading(!1,r)}setupAuthConnectorListeners(e){e.onRpcRequest(r=>{tc.checkIfRequestExists(r)?tc.checkIfRequestIsSafe(r)||this.handleUnsafeRPCRequest():(this.open(),console.error(Zs.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:r.method}),setTimeout(()=>{this.showErrorMessage(Zs.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((r,n)=>{const s=tc.checkIfRequestIsSafe(n),i=lt.state.address,o=ee.state.activeCaipNetwork;s||(i&&o?.id&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const r=ee.state.activeChain;if(!r)throw new Error("AppKit:onNotConnected - namespace is required");qe.getConnectorId(r)===_e.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,r),this.setLoading(!1,r))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:r,type:n})=>{const s=ee.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");r&&this.setPreferredAccountType(n,s)})}async syncAuthConnectorTheme(e){if(!e)return;const r=sa.getSnapshot(),n=Ce.getSnapshot();await Promise.all([e.syncDappData({metadata:n.metadata,sdkVersion:n.sdkVersion,projectId:n.projectId,sdkType:n.sdkType}),e.syncTheme({themeMode:r.themeMode,themeVariables:r.themeVariables,w3mThemeVariables:Hd(r.themeVariables,r.themeMode)})])}async syncAuthConnector(e,r){const n=_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r),s=r===ee.state.activeChain;if(!n)return;this.setLoading(!0,r);const i=e.getLoginEmailUsed();this.setLoading(i,r),i&&this.setStatus("connecting",r);const o=e.getEmail(),a=e.getUsername();this.setUser({...lt.state?.user||{},username:a,email:o},r),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected();if(await this.syncAuthConnectorTheme(e),r&&n&&s){const u=await e.getSmartAccountEnabledNetworks();if(ee.setSmartAccountEnabledNetworks(u?.smartAccountEnabledNetworks||[],r),c&&this.connectionControllerClient?.connectExternal){await this.connectionControllerClient?.connectExternal({id:_e.CONNECTOR_ID.AUTH,info:{name:_e.CONNECTOR_ID.AUTH},type:ec.CONNECTOR_TYPE_AUTH,provider:e,chainId:ee.state.activeCaipNetwork?.id,chain:r}),this.setStatus("connected",r);const l=Pe.getConnectedSocialProvider();l?Or.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",address:lt.state.address,properties:{provider:l,reconnect:!0}}):Or.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:lt.state.address,properties:{method:"email",name:this.universalProvider?.session?.peer?.metadata?.name||"Unknown",reconnect:!0}})}else qe.getConnectorId(r)===_e.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",r),Pe.removeConnectedNamespace(r))}this.setLoading(!1,r)}async checkExistingTelegramSocialConnection(e){try{if(!gt.isTelegram())return;const r=Pe.getTelegramSocialProvider();if(!r||!gt.isClient())return;const s=new URL(window.location.href).searchParams.get("result_uri");if(!s)return;lt.setSocialProvider(r,e),await this.authProvider?.init();const i=qe.getAuthConnector();r&&i&&(this.setLoading(!0,e),await Ge.connectExternal({id:i.id,type:i.type,socialUri:s},i.chain),Pe.setConnectedSocialProvider(r),Pe.removeTelegramSocialProvider(),Or.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){if(!_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const n=this.remoteFeatures?.email,s=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,i=n||s,a=ga.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&this.options?.projectId&&i&&(this.authProvider=V1.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(a)?.caipNetworkId,abortController:io.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Hs.open(io.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Hs.open(io.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Hs.open(io.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:u=>g1(u),getCaipNetworks:u=>ee.getCaipNetworks(u)}),Nu.subscribeOpen(u=>{!u&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}));const c=e===ee.state.activeChain&&Ce.state.enableReconnect;Ce.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Nt.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;const r=ee.state.activeChain,n=e.chainNamespace,s=this.getAddressByChainNamespace(n);if(n===r&&s){const o=this.getAdapter(n),a=vn.getProvider(n),c=vn.getProviderId(n);await o?.switchNetwork({caipNetwork:e,provider:a,providerType:c}),this.setCaipNetwork(e)}else{const a=vn.getProviderId(r)===ec.CONNECTOR_TYPE_AUTH,c=vn.getProviderId(n),u=c===ec.CONNECTOR_TYPE_AUTH,l=_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!n)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((a&&c===void 0||u)&&l)try{ee.state.activeChain=e.chainNamespace,s?await this.getAdapter(n)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:c}):await this.connectionControllerClient?.connectExternal?.({id:_e.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:n,chainId:e.id,type:ec.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{await this.getAdapter(n)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:c})}else if(c===ec.CONNECTOR_TYPE_WALLET_CONNECT){if(!ee.state.noAdapters){const d=this.getAdapter(n),f=vn.getProvider(n),p=vn.getProviderId(n);await d?.switchNetwork({caipNetwork:e,provider:f,providerType:p})}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:n})}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Nu.set({initialized:!0})}async syncIdentity({address:e,chainId:r,chainNamespace:n}){const s=`${n}:${r}`;if(this.caipNetworks?.find(a=>a.caipNetworkId===s)?.testnet){this.setProfileName(null,n),this.setProfileImage(null,n);return}const o=qe.getConnectorId(n)===_e.CONNECTOR_ID.AUTH;try{const{name:a,avatar:c}=await this.fetchIdentity({address:e});!a&&o?await this.syncReownName(e,n):(this.setProfileName(a,n),this.setProfileImage(c,n))}catch{r!==1&&this.setProfileImage(null,n)}}syncConnectedWalletInfo(e){const r=vn.getProviderId(e);if(r===ec.CONNECTOR_TYPE_AUTH){const n=this.authProvider;if(n){const s=Pe.getConnectedSocialProvider()??"email",i=n.getEmail()??n.getUsername();this.setConnectedWalletInfo({name:r,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(gt.isClient()&&!SY)try{const e={...Cr.DEFAULT_FEATURES,...this.options.features},r=this.remoteFeatures;if(await this.loadModalComponents(e,r),gt.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!Ce.state.disableAppend&&!Ce.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}SY=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,r){if(!gt.isClient())return;const n=[];(r.email||r.socials&&r.socials.length>0)&&n.push(Pr(()=>import("./embedded-wallet-BwztMOHM.js"),__vite__mapDeps([59,4,60,61,62,9,63,8,7,64,65,66,67,68,69,70]))),r.email&&n.push(Pr(()=>import("./email-CDQmgb1P.js"),__vite__mapDeps([71,60,4,72,70,7,64,69,62,9,8,68,73,65]))),r.socials&&n.push(Pr(()=>import("./socials-BDwB4E1P.js"),__vite__mapDeps([74,4,7,60,75,8,9,62,76,77,69,78,68,64,70,79,63,26,80]))),r.swaps&&r.swaps.length>0&&n.push(Pr(()=>import("./swaps-B29M7Sry.js"),__vite__mapDeps([81,4,60,68,64,62,9,82,83,84,80,85,63,69,65,7,8]))),e.send&&n.push(Pr(()=>import("./send-oLJFJIdD.js"),__vite__mapDeps([86,4,60,68,64,69,62,9,8,76,70,7,85,63,80,84,65,87,88]))),e.receive&&n.push(Pr(()=>import("./receive-CsGSWoxU.js"),__vite__mapDeps([89,4,7,60,90,62,9,63,79,26]))),r.onramp&&r.onramp.length>0&&n.push(Pr(()=>import("./onramp-Dz66mjzM.js"),__vite__mapDeps([91,4,7,60,92,62,9,63,64,69,75,8,76,93,70,68,78,65]))),r.payWithExchange&&n.push(Pr(()=>import("./pay-with-exchange-_eFVJKaL.js"),__vite__mapDeps([94,4,60,68,64,66,62,9,63,92,7,69,80]))),r.activity&&n.push(Pr(()=>import("./transactions-B4SiWh_H.js"),__vite__mapDeps([95,60,4,96,47,69,62,9,70,7,63,80]))),(e.pay||r.payments)&&n.push(Pr(()=>import("./index-BG-gyhye.js"),__vite__mapDeps([97,4,7,60,68,64,62,9,98,63,69,66,92,88,78]))),r.emailCapture&&n.push(Pr(()=>import("./data-capture-DiwmmN5v.js"),__vite__mapDeps([99,4,60,72,70,7,64,100]))),await Promise.all([...n,Pr(()=>import("./index-B5mxkCYt.js"),__vite__mapDeps([101,4,7,60,63,64,87,62,9,69,102,83,66,92,68,67,98,61,96,47,70,80,82,88,8,65,73,75,76,77,78,90,79,26,93])),Pr(()=>import("./w3m-modal-DadICPhq.js"),__vite__mapDeps([103,4,7,60,62,9,66,63,69,67,64,83,102,84]))])}}const vXe="1.7.20";function EXe(t){return new wXe({...t,sdkVersion:gt.generateSdkVersion(t.adapters??[],"html",vXe)})}class Kp extends Error{constructor(e="WalletConnect client is not initialized. Please call connect() first."){super(e),this.name="ClientNotInitializedError",Object.setPrototypeOf(this,Kp.prototype)}}var b4;(function(t){t.Mainnet="tron:0x2b6653dc",t.Shasta="tron:0x94a9059e",t.Nile="tron:0xcd8690dc"})(b4||(b4={}));const _Xe=tp({id:"0x2b6653dc",caipNetworkId:"tron:0x2b6653dc",chainNamespace:"tron",name:"Tron Mainnet",nativeCurrency:{decimals:6,name:"TRX",symbol:"TRX"},rpcUrls:{default:{http:["https://api.trongrid.io/jsonrpc"],webSocket:[""]}},blockExplorers:{default:{name:"Tron BlockChain Explorer",url:"https://tronscan.org/"}},contracts:{}}),AXe=tp({id:"0xcd8690dc",caipNetworkId:"tron:0xcd8690dc",chainNamespace:"tron",name:"Tron Nile Testnet",nativeCurrency:{decimals:6,name:"TRX",symbol:"TRX"},rpcUrls:{default:{http:[""],webSocket:[""]}},blockExplorers:{default:{name:"Tron BlockChain Explorer",url:"https://nile.tronscan.org/"}},contracts:{}}),xXe=tp({id:"0x94a9059e",caipNetworkId:"tron:0x94a9059e",chainNamespace:"tron",name:"Tron Shasta Testnet",nativeCurrency:{decimals:6,name:"TRX",symbol:"TRX"},rpcUrls:{default:{http:[""],webSocket:[""]}},blockExplorers:{default:{name:"Tron BlockChain Explorer",url:"https://shasta.tronscan.org/"}},contracts:{}});var Uy;(function(t){t.signTransaction="tron_signTransaction",t.signMessage="tron_signMessage"})(Uy||(Uy={}));const $R=(t,e)=>({requiredNamespaces:{tron:{chains:[t],methods:[Uy.signTransaction,Uy.signMessage],events:[]}},pairingTopic:e});class CXe{constructor(e){this.providerPromise=null,this.eventListeners=new Map,this.sessionHandlers={},this._options=e.options,this._network=e.network,this._config=e}async getProvider(){if(this.provider)return this.provider;if(!this.providerPromise){const r=this._options.projectId;if(!r)throw new Error("[WalletConnectWallet] projectId is required to initialize UniversalProvider");this.providerPromise=DZe.init({projectId:r,logger:this._options?.logger,relayUrl:this._options?.relayUrl,metadata:this._options?.metadata}).catch(n=>{throw this.providerPromise=null,n})}const e=await this.providerPromise;return this.provider=e,this._client=e.client,e}extractAddressFromSession(e){const n=Object.values(e.namespaces).flatMap(i=>i.accounts)[0];if(!n)throw new Error("[WalletConnectWallet] No accounts found in session");const s=n.split(":")[2];if(!s)throw new Error(`[WalletConnectWallet] Invalid account format: ${n}`);return s}extractAllAddressesFromSession(e){const r=Object.values(e.namespaces).flatMap(n=>n.accounts);return!r||r.length===0?[]:r.map(n=>n.split(":")[2]).filter(n=>!!n)}emit(e,...r){this.eventListeners.get(e)?.forEach(n=>{try{n(...r)}catch(s){console.error(`[WalletConnectWallet] Error in ${e} listener:`,s)}})}on(e,r){return this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e).add(r),()=>this.off(e,r)}off(e,r){this.eventListeners.get(e)?.delete(r)}removeAllListeners(e){e?this.eventListeners.delete(e):this.eventListeners.clear()}setupSessionListeners(){if(!this._client||!this._session)return;const e=()=>{this._client&&(this.sessionHandlers.update&&this._client.off("session_update",this.sessionHandlers.update),this.sessionHandlers.delete&&this._client.off("session_delete",this.sessionHandlers.delete)),this.sessionHandlers={}};e(),this.sessionHandlers.update=({topic:r,params:n})=>{if(!this._session||this._session.topic!==r)return;let s;try{s=this._client?.session.get(r)}catch{return}if(!s)return;const i=this.extractAllAddressesFromSession(this._session);this._session={...s,namespaces:n?.namespaces||s.namespaces},this.address=this.extractAddressFromSession(this._session);const o=this.extractAllAddressesFromSession(this._session);JSON.stringify(i)!==JSON.stringify(o)&&this.emit("accountsChanged",o)},this.sessionHandlers.delete=({topic:r})=>{this._session?.topic===r&&(this._session=void 0,this.address=void 0,this.emit("disconnect"),e())},this._client.on("session_update",this.sessionHandlers.update),this._client.on("session_delete",this.sessionHandlers.delete)}async connect(){const e=await this.getProvider(),r=e.client,n=r.find($R(this._network)).filter(s=>s.acknowledged);if(n.length){this._session=n[n.length-1],this._client=r,this.address=this.extractAddressFromSession(this._session),this.setupSessionListeners();const s=this.extractAllAddressesFromSession(this._session);return this.emit("accountsChanged",s),{address:this.address}}else{this.appKit||(this.appKit=EXe({projectId:this._options.projectId,networks:[_Xe,AXe,xXe],themeMode:this._config.themeMode,themeVariables:this._config.themeVariables,allWallets:"HIDE",manualWCControl:!0,universalProvider:e})),this.appKit.open();try{const s=await e.connect({pairingTopic:void 0,optionalNamespaces:$R(this._network).requiredNamespaces});this._session=s,this._client=r,this.address=this.extractAddressFromSession(this._session),this.setupSessionListeners();const i=this.extractAllAddressesFromSession(this._session);return this.emit("accountsChanged",i),{address:this.address}}finally{this.appKit?.close()}}}async disconnect(){this._client&&(this.sessionHandlers.update&&this._client.off("session_update",this.sessionHandlers.update),this.sessionHandlers.delete&&this._client.off("session_delete",this.sessionHandlers.delete),this.sessionHandlers={});const e=zn("USER_DISCONNECTED"),r=this._session?.topic||this.provider?.session?.topic;if(!r)throw new Kp;const n=this.provider?.client||this._client;if(!n)throw new Kp;await n.disconnect({topic:r,reason:e}),this._session=void 0,this.address=void 0}get client(){if(this._client)return this._client;throw new Kp}async checkConnectStatus(){const r=(await this.getProvider()).client,n=r.find($R(this._network)).filter(s=>s.acknowledged);if(n.length){this._session=n[n.length-1],this._client=r,this.address=this.extractAddressFromSession(this._session),this.setupSessionListeners();const s=this.extractAllAddressesFromSession(this._session);return this.emit("accountsChanged",s),{address:this.address}}else return{address:""}}async signTransaction(e){if(this._client&&this._session){const n=this._session.sessionProperties?.tron_method_version==="v1",s=await this._client.request({chainId:this._network,topic:this._session.topic,request:{method:Uy.signTransaction,params:n?{address:this.address,transaction:e}:{address:this.address,transaction:{transaction:e}}}});return s?.result?s.result:s}else throw new Kp}async signMessage(e){if(this._client&&this._session){const{signature:r}=await this._client.request({chainId:this._network,topic:this._session.topic,request:{method:Uy.signMessage,params:{address:this.address,message:e}}});return r}else throw new Kp}}const SXe="a5498791a3ace64d6c1fb542a5a659bf",IXe=new CXe({network:b4.Mainnet,options:{projectId:SXe,metadata:{name:"zEnvelope",description:"zEnvelope App",url:window.location.origin,icons:["https://avatars.githubusercontent.com/u/179229932"]}}});async function Rrt(){try{const{address:t}=await IXe.connect();return console.log("Connected TRON address:",t),t}catch(t){throw console.error("Tron wallet connection failed:",t),t}}const Ort={1:{name:"Ethereum",type:"evm",contractAddress:"0x1518ea2170660381c61DD8Aac4B97d242344a627",rpcUrl:"https://ethereum-rpc.publicnode.com",explorerUrl:"https://etherscan.io",apiUrl:"https://api.etherscan.io/v2/api",currency:"ETH"},11155111:{name:"Sepolia",type:"evm",contractAddress:"0x79d0532F61E1922DF5199E0487c0D64562DAAE88",rpcUrl:"https://ethereum-sepolia-rpc.publicnode.com",explorerUrl:"https://sepolia.etherscan.io",apiUrl:"https://api.etherscan.io/v2/api",currency:"ETH"},56:{name:"BNB Chain",type:"evm",contractAddress:"0xe728f3F581Df57aFC16b8BE7c050b90797d81b5f",rpcUrl:"https://bsc-dataseed.binance.org",explorerUrl:"https://bscscan.com",apiUrl:"https://api.etherscan.io/v2/api",currency:"BNB"},137:{name:"Polygon",type:"evm",contractAddress:"0xe728f3F581Df57aFC16b8BE7c050b90797d81b5f",rpcUrl:"https://polygon-rpc.com",explorerUrl:"https://polygonscan.com",apiUrl:"https://api.etherscan.io/v2/api",currency:"POL"},8453:{name:"Base",type:"evm",contractAddress:"0x79d0532F61E1922DF5199E0487c0D64562DAAE88",rpcUrl:"https://mainnet.base.org",explorerUrl:"https://basescan.org",apiUrl:"https://api.etherscan.io/v2/api",currency:"ETH"},143:{name:"Monad",type:"evm",contractAddress:"0xe728f3F581Df57aFC16b8BE7c050b90797d81b5f",rpcUrl:"https://rpc-devnet.monadinfra.com/rpc/3fe540e310bbb6ef0b9f16cd23073b0a",explorerUrl:"https://explorer.monad.xyz",apiUrl:"https://api.etherscan.io/v2/api",currency:"MON"},solana:{name:"Solana",type:"solana",contractAddress:"82M2bQAZKCJdGmYZiGMmLiobdj9XHmyxvuQhbw99Mxo4",rpcUrl:"https://api.devnet.solana.com",explorerUrl:"https://explorer.solana.com",currency:"SOL"},ton:{name:"TON",type:"ton",contractAddress:"",rpcUrl:"https://toncenter.com/api/v2/jsonRPC",explorerUrl:"https://tonscan.org",currency:"TON"},tron:{name:"Tron",type:"tron",contractAddress:"",rpcUrl:"https://api.trongrid.io",explorerUrl:"https://tronscan.org",currency:"TRX"}};export{ee as $,fo as A,kt as B,J as C,the as D,Zt as E,Ci as F,I4 as G,Re as H,Trt as I,Nrt as J,Prt as K,bDe as L,fc as M,kY as N,we as O,jn as P,Lt as Q,It as R,ml as S,El as T,Ge as U,_e as V,Ss as W,Or as X,Lu as Y,Zs as Z,Pr as _,ke as a,Hce as a$,Dt as a0,gt as a1,JDe as a2,lt as a3,Hs as a4,p9 as a5,Cr as a6,qie as a7,qe as a8,yo as a9,mt as aA,xt as aB,Ot as aC,cr as aD,pt as aE,zde as aF,Si as aG,ec as aH,aXe as aI,io as aJ,Hd as aK,L1 as aL,gLe as aM,grt as aN,SK as aO,Qie as aP,nE as aQ,uLe as aR,Xie as aS,mLe as aT,mrt as aU,prt as aV,t5 as aW,brt as aX,yrt as aY,PI as aZ,br as a_,Bi as aa,cXe as ab,dr as ac,$Te as ad,vr as ae,fJ as af,na as ag,Fie as ah,sa as ai,pa as aj,Ce as ak,Nte as al,aO as am,vy as an,iy as ao,Ae as ap,Pe as aq,xs as ar,dt as as,Zn as at,Oi as au,Ih as av,hu as aw,Qa as ax,tc as ay,ft as az,_tt as b,f1 as b$,vn as b0,_De as b1,Ea as b2,oI as b3,Y1 as b4,qs as b5,tr as b6,I1 as b7,o8 as b8,aa as b9,d0 as bA,Yde as bB,xE as bC,mQ as bD,Dy as bE,QI as bF,E8e as bG,w8e as bH,b8e as bI,_8e as bJ,dh as bK,Twe as bL,H0 as bM,hwe as bN,Aet as bO,pwe as bP,_J as bQ,tpe as bR,rpe as bS,SU as bT,x4 as bU,iI as bV,vQe as bW,wQe as bX,gI as bY,r6 as bZ,ho as b_,X9e as ba,BO as bb,vu as bc,Eu as bd,Nt as be,Irt as bf,t6 as bg,hl as bh,Xr as bi,To as bj,jtt as bk,gJ as bl,Fn as bm,sU as bn,EQe as bo,eJ as bp,XI as bq,sfe as br,nfe as bs,dQe as bt,iJ as bu,Wde as bv,Xde as bw,Gde as bx,oJ as by,sJ as bz,Ett as c,bv as c$,Em as c0,nhe as c1,MI as c2,X6 as c3,ga as c4,y4 as c5,Nm as c6,rje as c7,Bh as c8,mQe as c9,RQe as cA,TQe as cB,PQe as cC,NQe as cD,OQe as cE,kQe as cF,bQe as cG,NY as cH,c1 as cI,C4 as cJ,v1 as cK,lJ as cL,e6 as cM,Tfe as cN,M_ as cO,ife as cP,nJ as cQ,Kde as cR,Zde as cS,oU as cT,Pv as cU,Nv as cV,Tv as cW,_v as cX,Sv as cY,pv as cZ,fv as c_,_5 as ca,AQe as cb,xQe as cc,ly as cd,gv as ce,aJ as cf,S4 as cg,cfe as ch,ufe as ci,lfe as cj,dfe as ck,ffe as cl,hfe as cm,pfe as cn,gfe as co,mfe as cp,yfe as cq,CQe as cr,pQe as cs,wfe as ct,SQe as cu,uJ as cv,bfe as cw,vfe as cx,Efe as cy,IQe as cz,wr as d,fy as d0,hv as d1,Zp as d2,dv as d3,Ev as d4,ic as d5,mv as d6,yv as d7,xa as d8,Av as d9,dy as da,wv as db,Iv as dc,afe as dd,Cv as de,xv as df,vv as dg,f0 as dh,Pfe as di,Vde as dj,tfe as dk,rfe as dl,Cfe as dm,Die as dn,g1 as dp,Ytt as dq,pJ as e,xtt as f,Att as g,Ctt as h,ci as i,oi as j,Ntt as k,Ort as l,aDe as m,Rrt as n,Dtt as o,Dn as p,Ftt as q,Ltt as r,ui as s,yI as t,uo as u,b3e as v,zc as w,Ttt as x,ze as y,ae as z};
